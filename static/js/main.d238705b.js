/*! For license information please see main.d238705b.js.LICENSE.txt */
!function(){var e={9791:function(e,t,n){"use strict";var r=n(9797),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,o=(0,r.Z)((function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.Z=o},9797:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},6532:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case f:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case d:case m:case h:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},8457:function(e,t,n){"use strict";n(6532)},7885:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5861),i=n(4165),o=n(2791),a=(0,i.Z)().mark(l),s=function(){};function l(e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),a)}var u=function(e,t){var n=(0,o.useRef)(e);(0,o.useEffect)((function(){n.current=e})),(0,o.useEffect)((function(){var e=!1,t=s,o=s,a=n.current((function(e,n){t=e||s,o=n||s}),l),u=s,c=function(){var n=(0,r.Z)((0,i.Z)().mark((function n(){var r,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r={value:void 0,done:!1},l=void 0;case 2:if(n.prev=2,r=l?a.throw(l):a.next(r.value),l=void 0,!r.value||!r.value.then){n.next=18;break}return n.prev=6,n.next=9,r.value;case 9:r.value=n.sent,n.next=18;break;case 12:if(n.prev=12,n.t0=n.catch(6),!e){n.next=17;break}return o(n.t0),n.abrupt("return");case 17:l=n.t0;case 18:if(!e){n.next=20;break}return n.abrupt("return");case 20:t=s,o=s,n.next=29;break;case 24:return n.prev=24,n.t1=n.catch(2),console.error("[use-async-effect] Unhandled promise rejection."),console.error(n.t1),n.abrupt("return");case 29:if(!1===r.done){n.next=2;break}case 30:r.value&&(u=r.value);case 31:case"end":return n.stop()}}),n,null,[[2,24],[6,12]])})));return function(){return n.apply(this,arguments)}}();return c(),function(){e=!0,t(),u()}}),t)}},9840:function(e,t){!function(){var n=Array.prototype.forEach,r=Object.prototype.hasOwnProperty,i=Array.prototype.slice,o=0;var a,s={keys:Object.keys||function(e){if("object"!==typeof e&&"function"!==typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++o+"";return e?e+t:t},has:function(e,t){return r.call(e,t)},each:function(e,t,r){if(null!=e)if(n&&e.forEach===n)e.forEach(t,r);else if(e.length===+e.length)for(var i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e);else for(var a in e)this.has(e,a)&&t.call(r,e[a],a,e)},once:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments),e=null),t}}};a={on:function(e,t,n){return u(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var r=this,i=s.once((function(){r.off(e,i),t.apply(this,arguments)}));return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,o,a,l,c,d,f;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(l=0,c=(a=e?[e]:s.keys(this._events)).length;l<c;l++)if(e=a[l],o=this._events[e]){if(this._events[e]=r=[],t||n)for(d=0,f=o.length;d<f;d++)i=o[d],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;for(var o in"object"===typeof t&&(n=this),e&&((r={})[e._listenerId]=e),r)r[o].off(t,n,this),i&&delete this._listeners[o];return this}};var l=/\s+/,u=function(e,t,n,r){if(!n)return!0;if("object"===typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){for(var o=n.split(l),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}};s.each({listenTo:"on",listenToOnce:"once"},(function(e,t){a[t]=function(t,n,r){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=s.uniqueId("l"))]=t,"object"===typeof n&&(r=this),t[e](n,r,this),this}})),a.bind=a.on,a.unbind=a.off,a.mixin=function(e){return s.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],(function(t){e[t]=this[t]}),this),e},e.exports&&(t=e.exports=a),t.BackboneEvents=a}()},1468:function(e,t,n){e.exports=n(9840)},7047:function(e,t,n){var r=n(1468);r.onAll=function(e,t){return this.on("all",e,t),this},r.oldMixin=r.mixin,r.mixin=function(e){r.oldMixin(e);for(var t=["onAll"],n=0;n<t.length;n++){var i=t[n];e[i]=this[i]}return e},e.exports=r},1132:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,i=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,r,i,u,c,d=arguments[0],f=1,p=arguments.length,h=!1;for("boolean"===typeof d&&(h=d,d=arguments[1]||{},f=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});f<p;++f)if(null!=(t=arguments[f]))for(n in t)r=l(d,n),d!==(i=l(t,n))&&(h&&i&&(a(i)||(u=o(i)))?(u?(u=!1,c=r&&o(r)?r:[]):c=r&&a(r)?r:{},s(d,{name:n,newValue:e(h,c,i)})):"undefined"!==typeof i&&s(d,{name:n,newValue:i}));return d}},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var a=c(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=f(n,v);try{u(t,v,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case g:case m:case l:return e;default:return t}}case i:return t}}}function _(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||w(e)===c},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},1065:function(e){var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,u="";function c(e){return e?e.replace(l,u):u}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,f=1;function p(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");f=~r?e.length-r:f+e.length}function h(){var e={line:d,column:f};return function(t){return t.position=new m(e),b(),t}}function m(e){this.start=e,this.end={line:d,column:f},this.source=l.source}m.prototype.content=e;var g=[];function v(t){var n=new Error(l.source+":"+d+":"+f+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=f,n.source=e,!l.silent)throw n;g.push(n)}function y(t){var n=t.exec(e);if(n){var r=n[0];return p(r),e=e.slice(r.length),n}}function b(){y(r)}function x(e){var t;for(e=e||[];t=w();)!1!==t&&e.push(t);return e}function w(){var t=h();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;u!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,u===e.charAt(n-1))return v("End of comment missing");var r=e.slice(2,n-2);return f+=2,p(r),e=e.slice(n),f+=2,t({type:"comment",comment:r})}}function _(){var e=h(),n=y(i);if(n){if(w(),!y(o))return v("property missing ':'");var r=y(a),l=e({type:"declaration",property:c(n[0].replace(t,u)),value:r?c(r[0].replace(t,u)):u});return y(s),l}}return b(),function(){var e,t=[];for(x(t);e=_();)!1!==e&&(t.push(e),x(t));return t}()}},5586:function(e){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},8890:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,l=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},u=o.push,c=o.indexOf,d={},f=d.toString,p=d.hasOwnProperty,h=p.toString,m=h.call(Object),g={},v=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,i,o=(n=n||b).createElement("script");if(o.text=e,t)for(r in x)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?d[f.call(e)]||"object":typeof e}var S="3.6.3",C=function e(t,n){return new e.fn.init(t,n)};function E(e){var t=!!e&&"length"in e&&e.length,n=_(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}C.fn=C.prototype={jquery:S,constructor:C,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},C.extend=C.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"===typeof a&&(u=a,a=arguments[s]||{},s++),"object"===typeof a||v(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(u&&r&&(C.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||C.isPlainObject(n)?n:{},i=!1,a[t]=C.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},C.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=a(e))||"function"===typeof(n=p.call(t,"constructor")&&t.constructor)&&h.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(E(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?C.merge(n,"string"===typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(E(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return l(a)},guid:1,support:g}),"function"===typeof Symbol&&(C.fn[Symbol.iterator]=o[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var k=function(e){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x="sizzle"+1*new Date,w=e.document,_=0,S=0,C=le(),E=le(),k=le(),P=le(),M=function(e,t){return e===t&&(d=!0),0},A={}.hasOwnProperty,T=[],R=T.pop,I=T.push,O=T.push,L=T.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\["+N+"*("+B+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+N+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",H=new RegExp(N+"+","g"),U=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),V=new RegExp("^"+N+"*,"+N+"*"),G=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),W=new RegExp(N+"|>"),$=new RegExp(j),q=new RegExp("^"+B+"$"),X={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){f()},ae=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(T=L.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(Ee){O={apply:T.length?function(e,t){I.apply(e,L.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,u,c,d,h,v,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!==typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!i&&(f(t),t=t||p,m)){if(11!==w&&(d=J.exec(e)))if(o=d[1]){if(9===w){if(!(u=t.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(y&&(u=y.getElementById(o))&&b(t,u)&&u.id===o)return r.push(u),r}else{if(d[2])return O.apply(r,t.getElementsByTagName(e)),r;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!P[e+" "]&&(!g||!g.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===w&&(W.test(e)||G.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=x)),s=(h=a(e)).length;s--;)h[s]=(c?"#"+c:":scope")+" "+be(h[s]);v=h.join(",")}try{if(n.cssSupportsSelector&&!CSS.supports("selector(:is("+v+"))"))throw new Error;return O.apply(r,y.querySelectorAll(v)),r}catch(_){P(e,!0)}finally{c===x&&t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,r,i)}function le(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ue(e){return e[x]=!0,e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(Ee){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ue((function(t){return t=+t,ue((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ve(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!K.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!=p&&9===a.nodeType&&a.documentElement?(h=(p=a).documentElement,m=!o(p),w!=p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=ce((function(e){return h.appendChild(e).appendChild(p.createElement("div")),"undefined"!==typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.cssSupportsSelector=ce((function(){return CSS.supports("selector(*)")&&p.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")})),n.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ce((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=ce((function(e){return h.appendChild(e).id=x,!p.getElementsByName||!p.getElementsByName(x).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!==typeof t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=Q.test(p.querySelectorAll))&&(ce((function(e){var t;h.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+N+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Q.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",j)})),n.cssSupportsSelector||g.push(":has"),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),b=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType&&e.documentElement||e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},M=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==p||e.ownerDocument==w&&b(w,e)?-1:t==p||t.ownerDocument==w&&b(w,t)?1:c?D(c,e)-D(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==p?-1:t==p?1:i?-1:o?1:c?D(c,e)-D(c,t):0;if(i===o)return fe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?fe(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&m&&!P[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Ee){P(t,!0)}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=p&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=p&&f(e);var i=r.attrHandle[t.toLowerCase()],o=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(d=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(M),d){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},r=se.selectors={cacheLength:50,createPseudo:ue,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&C(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(b=(p=(u=(c=(d=(f=g)[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===_&&u[1])&&u[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[_,p,b];break}}else if(y&&(b=p=(u=(c=(d=(f=t)[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===_&&u[1]),!1===b)for(;(f=++p&&f&&f[m]||(b=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&((c=(d=f[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[_,b]),f!==t)););return(b-=i)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[x]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=D(e,o[a])]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ue((function(e){var t=[],n=[],r=s(e.replace(U,"$1"));return r[x]?ue((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ue((function(e){return function(t){return se(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ue((function(e){return q.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ge((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=S++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var u,c,d,f=[_,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(d=t[x]||(t[x]={}))[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[o])&&u[0]===_&&u[1]===s)return f[2]=u[2];if(c[o]=f,f[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function Se(e,t,n,r,i,o){return r&&!r[x]&&(r=Se(r)),i&&!i[x]&&(i=Se(i,o)),ue((function(o,a,s,l){var u,c,d,f=[],p=[],h=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:_e(m,f,e,s,l),v=n?i||(o?e:h||r)?[]:a:g;if(n&&n(g,v,s,l),r)for(u=_e(v,p),r(u,[],s,l),c=u.length;c--;)(d=u[c])&&(v[p[c]]=!(g[p[c]]=d));if(o){if(i||e){if(i){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(g[c]=d);i(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=i?D(o,d):f[c])>-1&&(o[u]=!(a[u]=d))}}else v=_e(v===a?v.splice(h,v.length):v),i?i(null,a,v,l):O.apply(a,v)}))}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,c=xe((function(e){return e===t}),s,!0),d=xe((function(e){return D(t,e)>-1}),s,!0),f=[function(e,n,r){var i=!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):d(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])f=[xe(we(f),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[x]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return Se(l>1&&we(f),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),n,l<i&&Ce(e.slice(l,i)),i<o&&Ce(e=e.slice(i)),i<o&&be(e))}f.push(n)}return we(f)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=se.tokenize=function(e,t){var n,i,o,a,s,l,u,c=E[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=r.preFilter;s;){for(a in n&&!(i=V.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=G.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(i=X[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):E(e,l).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=k[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ce(t[n]))[x]?i.push(s):o.push(s);s=k(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,l,c){var d,h,g,v=0,y="0",b=o&&[],x=[],w=u,S=o||i&&r.find.TAG("*",c),C=_+=null==w?1:Math.random()||.1,E=S.length;for(c&&(u=a==p||a||c);y!==E&&null!=(d=S[y]);y++){if(i&&d){for(h=0,a||d.ownerDocument==p||(f(d),s=!m);g=e[h++];)if(g(d,a||p,s)){l.push(d);break}c&&(_=C)}n&&((d=!g&&d)&&v--,o&&b.push(d))}if(v+=y,n&&y!==v){for(h=0;g=t[h++];)g(b,x,a,s);if(o){if(v>0)for(;y--;)b[y]||x[y]||(x[y]=R.call(l));x=_e(x)}O.apply(l,x),c&&!o&&x.length>0&&v+t.length>1&&se.uniqueSort(l)}return c&&(_=C,u=w),b};return n?ue(o):o}(o,i)),s.selector=e}return s},l=se.select=function(e,t,n,i){var o,l,u,c,d,f="function"===typeof e&&e,p=!i&&a(e=f.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=X.needsContext.test(e)?0:l.length;o--&&(u=l[o],!r.relative[c=u.type]);)if((d=r.find[c])&&(i=d(u.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&be(l)))return O.apply(n,i),n;break}}return(f||s(e,p))(i,t,!m,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=x.split("").sort(M).join("")===x,n.detectDuplicates=!!d,f(),n.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||de(F,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(r);C.find=k,(C.expr=k.selectors)[":"]=C.expr.pseudos,C.uniqueSort=C.unique=k.uniqueSort,C.text=k.getText,C.isXMLDoc=k.isXML,C.contains=k.contains,C.escapeSelector=k.escape;var P=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&C(e).is(n))break;r.push(e)}return r},M=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=C.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(e,t,n){return v(t)?C.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?C.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?C.grep(e,(function(e){return c.call(t,e)>-1!==n})):C.filter(t,e,n)}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,(function(e){return 1===e.nodeType})))},C.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(C(e).filter((function(){for(t=0;t<r;t++)if(C.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)C.find(e,i[t],n);return r>1?C.uniqueSort(n):n},filter:function(e){return this.pushStack(I(this,e||[],!1))},not:function(e){return this.pushStack(I(this,e||[],!0))},is:function(e){return!!I(this,"string"===typeof e&&A.test(e)?C(e):e||[],!1).length}});var O,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||O,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),R.test(r[1])&&C.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,O=C(b);var D=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!==typeof e&&C(e);if(!A.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?C.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?c.call(C(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(T(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},(function(e,t){C.fn[e]=function(n,r){var i=C.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=C.filter(r,i)),this.length>1&&(F[e]||C.uniqueSort(i),D.test(e)&&i.reverse()),this.pushStack(i)}}));var B=/[^\x20\t\r\n\f]+/g;function z(e){return e}function j(e){throw e}function H(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}C.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return C.each(e.match(B)||[],(function(e,n){t[n]=!0})),t}(e):C.extend({},e);var t,n,r,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){C.each(n,(function(n,r){v(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==_(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return C.each(arguments,(function(e,t){for(var n;(n=C.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?C.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return C.Deferred((function(n){C.each(t,(function(t,r){var i=v(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var o=0;function a(e,t,n,i){return function(){var s=this,l=arguments,u=function(){var r,u;if(!(e<o)){if((r=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");u=r&&("object"===typeof r||"function"===typeof r)&&r.then,v(u)?i?u.call(r,a(o,t,z,i),a(o,t,j,i)):(o++,u.call(r,a(o,t,z,i),a(o,t,j,i),a(o,t,z,t.notifyWith))):(n!==z&&(s=void 0,l=[r]),(i||t.resolveWith)(s,l))}},c=i?u:function(){try{u()}catch(r){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(r,c.stackTrace),e+1>=o&&(n!==j&&(s=void 0,l=[r]),t.rejectWith(s,l))}};e?c():(C.Deferred.getStackHook&&(c.stackTrace=C.Deferred.getStackHook()),r.setTimeout(c))}}return C.Deferred((function(r){t[0][3].add(a(0,r,v(i)?i:z,r.notifyWith)),t[1][3].add(a(0,r,v(e)?e:z)),t[2][3].add(a(0,r,v(n)?n:j))})).promise()},promise:function(e){return null!=e?C.extend(e,i):i}},o={};return C.each(t,(function(e,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=s.call(arguments),o=C.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(H(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||v(i[n]&&i[n].then)))return o.then();for(;n--;)H(i[n],a(n),o.reject);return o.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&U.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){r.setTimeout((function(){throw e}))};var V=C.Deferred();function G(){b.removeEventListener("DOMContentLoaded",G),r.removeEventListener("load",G),C.ready()}C.fn.ready=function(e){return V.then(e).catch((function(e){C.readyException(e)})),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||V.resolveWith(b,[C]))}}),C.ready.then=V.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(C.ready):(b.addEventListener("DOMContentLoaded",G),r.addEventListener("load",G));var W=function e(t,n,r,i,o,a,s){var l=0,u=t.length,c=null==r;if("object"===_(r))for(l in o=!0,r)e(t,n,l,r[l],!0,a,s);else if(void 0!==i&&(o=!0,v(i)||(s=!0),c&&(s?(n.call(t,i),n=null):(c=n,n=function(e,t,n){return c.call(C(e),n)})),n))for(;l<u;l++)n(t[l],r,s?i:i.call(t[l],l,n(t[l],r)));return o?t:c?n.call(t):u?n(t[0],r):a},$=/^-ms-/,q=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function K(e){return e.replace($,"ms-").replace(q,X)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=C.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[K(t)]=n;else for(r in t)i[K(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(B)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||C.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var Q=new Z,J=new Z,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(i){}J.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),C.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=K(r.slice(5)),ne(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){J.set(this,e)})):W(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=J.get(o,e))||void 0!==(n=ne(o,e))?n:void 0;this.each((function(){J.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){J.remove(this,e)}))}}),C.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=C.queue(e,t=t||"fx"),r=n.length,i=n.shift(),o=C._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){C.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:C.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each((function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=C.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=b.documentElement,se=function(e){return C.contains(e.ownerDocument,e)},le={composed:!0};ae.getRootNode&&(se=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===C.css(e,"display")};function ce(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return C.css(e,t,"")},l=s(),u=n&&n[3]||(C.cssNumber[t]?"":"px"),c=e.nodeType&&(C.cssNumber[t]||"px"!==u&&+l)&&ie.exec(C.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)C.style(e,t,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;C.style(e,t,(c*=2)+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var de={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,i=de[r];return i||(t=n.body.appendChild(n.createElement(r)),i=C.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),de[r]=i,i)}function pe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ue(r)&&(i[o]=fe(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}C.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ue(this)?C(this).show():C(this).hide()}))}});var he=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),g.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",g.option=!!e.lastChild}();var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&T(e,t)?C.merge([e],n):n}function be(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,g.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,l,u,c,d=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((o=e[p])||0===o)if("object"===_(o))C.merge(f,o.nodeType?[o]:o);else if(xe.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(me.exec(o)||["",""])[1].toLowerCase(),l=ve[s]||ve._default,a.innerHTML=l[1]+C.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;C.merge(f,a.childNodes),(a=d.firstChild).textContent=""}else f.push(t.createTextNode(o));for(d.textContent="",p=0;o=f[p++];)if(r&&C.inArray(o,r)>-1)i&&i.push(o);else if(u=se(o),a=ye(d.appendChild(o),"script"),u&&be(a),n)for(c=0;o=a[c++];)ge.test(o.type||"")&&n.push(o);return d}var _e=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function Ce(){return!1}function Ee(e,t){return e===function(){try{return b.activeElement}catch(e){}}()===("focus"===t)}function ke(e,t,n,r,i,o){var a,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ce;else if(!i)return e;return 1===o&&(a=i,i=function(e){return C().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=C.guid++)),e.each((function(){C.event.add(this,t,i,r,n)}))}function Pe(e,t,n){n?(Q.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=s.call(arguments),Q.set(this,t,o),r=n(this,t),this[t](),o!==(i=Q.get(this,t))||r?Q.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&(Q.set(this,t,{value:C.event.trigger(C.extend(o[0],C.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&C.event.add(e,t,Se)}C.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,m,g=Q.get(e);if(Y(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&C.find.matchesSelector(ae,i),n.guid||(n.guid=C.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)p=m=(s=_e.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=C.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=C.event.special[p]||{},c=C.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),C.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(B)||[""]).length;u--;)if(p=m=(s=_e.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=C.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||C.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)C.event.remove(e,p+t[u],n,r,!0);C.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),l=C.event.fix(e),u=(Q.get(this,"events")||Object.create(null))[l.type]||[],c=C.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=C.event.handlers.call(this,l,u),t=0;(i=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?C(i,this).index(u)>-1:C.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return he.test(t.type)&&t.click&&T(t,"input")&&Pe(t,"click",Se),!1},trigger:function(e){var t=this||e;return he.test(t.type)&&t.click&&T(t,"input")&&Pe(t,"click"),!0},_default:function(e){var t=e.target;return he.test(t.type)&&t.click&&T(t,"input")&&Q.get(t,"click")||T(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0}).prototype={constructor:C.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(e,t){C.event.special[e]={setup:function(){return Pe(this,e,Ee),!1},trigger:function(){return Pe(this,e),!0},_default:function(t){return Q.get(t.target,e)},delegateType:t}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||C.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),C.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each((function(){C.event.remove(this,e,n,t)}))}});var Me=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Te=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.get(e).events))for(i in Q.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)C.event.add(t,i,s[i][n]);J.hasData(e)&&(o=J.access(e),a=C.extend({},o),J.set(t,a))}}function De(e,t){var n=t.nodeName.toLowerCase();"input"===n&&he.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Fe(e,t,n,r){t=l(t);var i,o,a,s,u,c,d=0,f=e.length,p=f-1,h=t[0],m=v(h);if(m||f>1&&"string"===typeof h&&!g.checkClone&&Ae.test(h))return e.each((function(i){var o=e.eq(i);m&&(t[0]=h.call(this,i,o.html())),Fe(o,t,n,r)}));if(f&&(o=(i=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=C.map(ye(i,"script"),Ie)).length;d<f;d++)u=i,d!==p&&(u=C.clone(u,!0,!0),s&&C.merge(a,ye(u,"script"))),n.call(e[d],u,d);if(s)for(c=a[a.length-1].ownerDocument,C.map(a,Oe),d=0;d<s;d++)u=a[d],ge.test(u.type||"")&&!Q.access(u,"globalEval")&&C.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?C._evalUrl&&!u.noModule&&C._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):w(u.textContent.replace(Te,""),u,c))}return e}function Ne(e,t,n){for(var r,i=t?C.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||C.cleanData(ye(r)),r.parentNode&&(n&&se(r)&&be(ye(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=se(e);if(!g.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!C.isXMLDoc(e))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)De(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,s);return(a=ye(s,"script")).length>0&&be(a,!l&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=C.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Ne(this,e,!0)},remove:function(e){return Ne(this,e)},text:function(e){return W(this,(function(e){return void 0===e?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Fe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)}))},prepend:function(){return Fe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return C.clone(this,e,t)}))},html:function(e){return W(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Me.test(e)&&!ve[(me.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,(function(t){var n=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(ye(this)),n&&n.replaceChild(t,this))}),e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){for(var n,r=[],i=C(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),C(i[a])[t](n),u.apply(r,n.get());return this.pushStack(r)}}));var Be=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),ze=/^--/,je=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},He=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ue=new RegExp(oe.join("|"),"i"),Ve="[\\x20\\t\\r\\n\\f]",Ge=new RegExp("^"+Ve+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ve+"+$","g");function We(e,t,n){var r,i,o,a,s=ze.test(t),l=e.style;return(n=n||je(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(Ge,"$1")||void 0),""!==a||se(e)||(a=C.style(e,t)),!g.pixelBoxStyles()&&Be.test(a)&&Ue.test(t)&&(r=l.width,i=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=r,l.minWidth=i,l.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(u).appendChild(c);var e=r.getComputedStyle(c);n="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",a=36===t(e.right),i=36===t(e.width),c.style.position="absolute",o=12===t(c.offsetWidth/3),ae.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var n,i,o,a,s,l,u=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,C.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,i;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ae.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,ae.removeChild(e)),s}}))}();var qe=["Webkit","Moz","ms"],Xe=b.createElement("div").style,Ke={};function Ye(e){var t=C.cssProps[e]||Ke[e];return t||(e in Xe?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=qe.length;n--;)if((e=qe[n]+t)in Xe)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,Qe={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function tt(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=C.css(e,n+oe[a],!0,i)),r?("content"===n&&(l-=C.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(l-=C.css(e,"border"+oe[a]+"Width",!0,i))):(l+=C.css(e,"padding"+oe[a],!0,i),"padding"!==n?l+=C.css(e,"border"+oe[a]+"Width",!0,i):s+=C.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function nt(e,t,n){var r=je(e),i=(!g.boxSizingReliable()||n)&&"border-box"===C.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Be.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&T(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===C.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===C.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+tt(e,t,n||(i?"border":"content"),o,r,a)+"px"}function rt(e,t,n,r,i){return new rt.prototype.init(e,t,n,r,i)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=K(t),l=ze.test(t),u=e.style;if(l||(t=Ye(s)),a=C.cssHooks[t]||C.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];"string"===(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ce(e,t,i),o="number"),null!=n&&n===n&&("number"!==o||l||(n+=i&&i[3]||(C.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o,a,s=K(t);return ze.test(t)||(t=Ye(s)),(a=C.cssHooks[t]||C.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Je&&(i=Je[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,n,r){if(n)return!Ze.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,r):He(e,Qe,(function(){return nt(e,t,r)}))},set:function(e,n,r){var i,o=je(e),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===C.css(e,"boxSizing",!1,o),l=r?tt(e,t,r,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-tt(e,t,"border",!1,o)-.5)),l&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=C.css(e,t)),et(0,n,l)}}})),C.cssHooks.marginLeft=$e(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(C.cssHooks[e+t].set=et)})),C.fn.extend({css:function(e,t){return W(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=je(e),i=t.length;a<i;a++)o[t[a]]=C.css(e,t[a],!1,r);return o}return void 0!==n?C.style(e,t,n):C.css(e,t)}),e,t,arguments.length>1)}}),C.Tween=rt,rt.prototype={constructor:rt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var e=rt.propHooks[this.prop];return e&&e.get?e.get(this):rt.propHooks._default.get(this)},run:function(e){var t,n=rt.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rt.propHooks._default.set(this),this}},rt.prototype.init.prototype=rt.prototype,rt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[Ye(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},rt.propHooks.scrollTop=rt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(C.fx=rt.prototype.init).step={};var it,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function lt(){ot&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(lt):r.setTimeout(lt,C.fx.interval),C.fx.tick())}function ut(){return r.setTimeout((function(){it=void 0})),it=Date.now()}function ct(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function dt(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(e,t,n){var r,i,o=0,a=ft.prefilters.length,s=C.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=it||ut(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(r);return s.notifyWith(e,[u,r,n]),r<1&&a?n:(a||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var r=C.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=K(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=C.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);o<a;o++)if(r=ft.prefilters[o].call(u,e,c,u.opts))return v(r.stop)&&(C._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return C.map(c,dt,u),v(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),C.fx.timer(C.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}C.Animation=C.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(B);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,u,c,d="width"in t||"height"in t,f=this,p={},h=e.style,m=e.nodeType&&ue(e),g=Q.get(e,"fxshow");for(r in n.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],at.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}p[r]=g&&g[r]||C.style(e,r)}if((l=!C.isEmptyObject(t))||!C.isEmptyObject(p))for(r in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=g&&g.display)&&(u=Q.get(e,"display")),"none"===(c=C.css(e,"display"))&&(u?c=u:(pe([e],!0),u=e.style.display||u,c=C.css(e,"display"),pe([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===C.css(e,"float")&&(l||(f.done((function(){h.display=u})),null==u&&(c=h.display,u="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:u}),o&&(g.hidden=!m),m&&pe([e],!0),f.done((function(){for(r in m||pe([e]),Q.remove(e,"fxshow"),p)C.style(e,r,p[r])}))),l=dt(m?g[r]:0,r,f),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"===typeof e?C.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return C.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in C.fx.speeds?r.duration=C.fx.speeds[r.duration]:r.duration=C.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=C.isEmptyObject(e),o=C.speed(t,n,r),a=function(){var t=ft(this,C.extend({},e),o);(i||Q.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=C.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&st.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||C.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=C.timers,a=r?r.length:0;for(n.finish=!0,C.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(e,t){var n=C.fn[t];C.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(ct(t,!0),e,r,i)}})),C.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),it=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ot||(ot=!0,lt())},C.fx.stop=function(){ot=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var pt,ht=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return W(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}}),C.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?C.prop(e,t,n):(1===o&&C.isXMLDoc(e)||(i=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&T(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(B);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ht[t]||C.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(B)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(B)||[]}C.fn.extend({prop:function(e,t){return W(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}}),C.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,i=C.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(e){var t,n,r,i,o,a;return v(e)?this.each((function(t){C(this).addClass(e.call(this,t,yt(this)))})):(t=bt(e)).length?this.each((function(){if(r=yt(this),n=1===this.nodeType&&" "+vt(r)+" "){for(o=0;o<t.length;o++)i=t[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=vt(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(e){var t,n,r,i,o,a;return v(e)?this.each((function(t){C(this).removeClass(e.call(this,t,yt(this)))})):arguments.length?(t=bt(e)).length?this.each((function(){if(r=yt(this),n=1===this.nodeType&&" "+vt(r)+" "){for(o=0;o<t.length;o++)for(i=t[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=vt(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,o,a=typeof e,s="string"===a||Array.isArray(e);return v(e)?this.each((function(n){C(this).toggleClass(e.call(this,n,yt(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=bt(e),this.each((function(){if(s)for(o=C(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==a||((r=yt(this))&&Q.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":Q.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+vt(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;C.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=v(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,C(this).val()):e)?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=C.map(i,(function(e){return null==e?"":e+""}))),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=C.valHooks[i.type]||C.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"===typeof(n=i.value)?n.replace(xt,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:vt(C.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(t=C(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=C.makeArray(t),a=i.length;a--;)((r=i[a]).selected=C.inArray(C.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},g.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in r;var wt=/^(?:focusinfocus|focusoutblur)$/,_t=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,n,i){var o,a,s,l,u,c,d,f,h=[n||b],m=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(a=f=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!wt.test(m+C.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[C.expando]?e:new C.Event(m,"object"===typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),d=C.event.special[m]||{},i||!d.trigger||!1!==d.trigger.apply(n,t))){if(!i&&!d.noBubble&&!y(n)){for(l=d.delegateType||m,wt.test(l+m)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(n.ownerDocument||b)&&h.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)f=a,e.type=o>1?l:d.bindType||m,(c=(Q.get(a,"events")||Object.create(null))[e.type]&&Q.get(a,"handle"))&&c.apply(a,t),(c=u&&a[u])&&c.apply&&Y(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(h.pop(),t)||!Y(n)||u&&v(n[m])&&!y(n)&&((s=n[u])&&(n[u]=null),C.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,_t),n[m](),e.isPropagationStopped()&&f.removeEventListener(m,_t),C.event.triggered=void 0,s&&(n[u]=s)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}}),g.focusin||C.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,t);i||r.addEventListener(e,n,!0),Q.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,t)-1;i?Q.access(r,t,i):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}}));var St=r.location,Ct={guid:Date.now()},Et=/\?/;C.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(i){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||C.error("Invalid XML: "+(n?C.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var kt=/\[\]$/,Pt=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,n,r){var i;if(Array.isArray(t))C.each(t,(function(t,i){n||kt.test(e)?r(e,i):Tt(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==_(t))r(e,t);else for(i in t)Tt(e+"["+i+"]",t[i],n,r)}C.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,(function(){i(this.name,this.value)}));else for(n in e)Tt(n,e[n],t,i);return r.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&At.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!he.test(e))})).map((function(e,t){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}})):{name:t.name,value:n.replace(Pt,"\r\n")}})).get()}});var Rt=/%20/g,It=/#.*$/,Ot=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dt=/^(?:GET|HEAD)$/,Ft=/^\/\//,Nt={},Bt={},zt="*/".concat("*"),jt=b.createElement("a");function Ht(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(B)||[];if(v(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ut(e,t,n,r){var i={},o=e===Bt;function a(s){var l;return i[s]=!0,C.each(e[s]||[],(function(e,s){var u=s(t,n,r);return"string"!==typeof u||o||i[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)})),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Vt(e,t){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&C.extend(!0,e,r),e}jt.href=St.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,C.ajaxSettings),t):Vt(C.ajaxSettings,e)},ajaxPrefilter:Ht(Nt),ajaxTransport:Ht(Bt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n,i,o,a,s,l,u,c,d,f,p=C.ajaxSetup({},t=t||{}),h=p.context||p,m=p.context&&(h.nodeType||h.jquery)?C(h):C.event,g=C.Deferred(),v=C.Callbacks("once memory"),y=p.statusCode||{},x={},w={},_="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=Lt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==u&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||_;return n&&n.abort(t),E(0,t),this}};if(g.promise(S),p.url=((e||p.url||St.href)+"").replace(Ft,St.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(B)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=jt.protocol+"//"+jt.host!==l.protocol+"//"+l.host}catch(k){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!==typeof p.data&&(p.data=C.param(p.data,p.traditional)),Ut(Nt,p,t,S),u)return S;for(d in(c=C.event&&p.global)&&0===C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Dt.test(p.type),i=p.url.replace(It,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Rt,"+")):(f=p.url.slice(i.length),p.data&&(p.processData||"string"===typeof p.data)&&(i+=(Et.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Ot,"$1"),f=(Et.test(i)?"&":"?")+"_="+Ct.guid+++f),p.url=i+f),p.ifModified&&(C.lastModified[i]&&S.setRequestHeader("If-Modified-Since",C.lastModified[i]),C.etag[i]&&S.setRequestHeader("If-None-Match",C.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+zt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(h,S,p)||u))return S.abort();if(_="abort",v.add(p.complete),S.done(p.success),S.fail(p.error),n=Ut(Bt,p,t,S)){if(S.readyState=1,c&&m.trigger("ajaxSend",[S,p]),u)return S;p.async&&p.timeout>0&&(s=r.setTimeout((function(){S.abort("timeout")}),p.timeout));try{u=!1,n.send(x,E)}catch(k){if(u)throw k;E(-1,k)}}else E(-1,"No Transport");function E(e,t,a,l){var d,f,b,x,w,_=t;u||(u=!0,s&&r.clearTimeout(s),n=void 0,o=l||"",S.readyState=e>0?4:0,d=e>=200&&e<300||304===e,a&&(x=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,S,a)),!d&&C.inArray("script",p.dataTypes)>-1&&C.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),x=function(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(k){return{state:"parsererror",error:a?k:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,x,S,d),d?(p.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(C.lastModified[i]=w),(w=S.getResponseHeader("etag"))&&(C.etag[i]=w)),204===e||"HEAD"===p.type?_="nocontent":304===e?_="notmodified":(_=x.state,f=x.data,d=!(b=x.error))):(b=_,!e&&_||(_="error",e<0&&(e=0))),S.status=e,S.statusText=(t||_)+"",d?g.resolveWith(h,[f,_,S]):g.rejectWith(h,[S,_,b]),S.statusCode(y),y=void 0,c&&m.trigger(d?"ajaxSuccess":"ajaxError",[S,p,d?f:b]),v.fireWith(h,[S,_]),c&&(m.trigger("ajaxComplete",[S,p]),--C.active||C.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],(function(e,t){C[t]=function(e,n,r,i){return v(n)&&(i=i||r,r=n,n=void 0),C.ajax(C.extend({url:e,type:t,dataType:i,data:n,success:r},C.isPlainObject(e)&&e))}})),C.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),C._evalUrl=function(e,t,n){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,n)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){C(this).wrapInner(e.call(this,t))})):this.each((function(){var t=C(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(n){C(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},Wt=C.ajaxSettings.xhr();g.cors=!!Wt&&"withCredentials"in Wt,g.ajax=Wt=!!Wt,C.ajaxTransport((function(e){var t,n;if(g.cors||Wt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Gt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}})),C.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),C.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var $t=[],qt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||C.expando+"_"+Ct.guid++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",(function(e,t,n){var i,o,a,s=!1!==e.jsonp&&(qt.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(qt,"$1"+i):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||C.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){void 0===o?C(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,$t.push(i)),a&&v(o)&&o(a[0]),a=o=void 0})),"script"})),g.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),C.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),o=!n&&[],(i=R.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&C(o).remove(),C.merge([],i.childNodes)));var r,i,o},C.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),a.length>0&&C.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length},C.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u=C.css(e,"position"),c=C(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),o=C.css(e,"top"),l=C.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),v(t)&&(t=t.call(e,n,C.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):c.css(d)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){C.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===C.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),i.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-C.css(r,"marginTop",!0),left:t.left-i.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||ae}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;C.fn[e]=function(r){return W(this,(function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),C.each(["top","left"],(function(e,t){C.cssHooks[t]=$e(g.pixelPosition,(function(e,n){if(n)return n=We(e,t),Be.test(n)?C(e).position()[t]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){C.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!==typeof i),s=n||(!0===i||!0===o?"margin":"border");return W(this,(function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?C.css(t,n,s):C.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}})),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){C.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Xt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),v(e))return r=s.call(arguments,2),i=function(){return e.apply(t||this,r.concat(s.call(arguments)))},i.guid=e.guid=e.guid||C.guid++,i},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=T,C.isFunction=v,C.isWindow=y,C.camelCase=K,C.type=_,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},C.trim=function(e){return null==e?"":(e+"").replace(Xt,"$1")},void 0===(n=function(){return C}.apply(t,[]))||(e.exports=n);var Kt=r.jQuery,Yt=r.$;return C.noConflict=function(e){return r.$===C&&(r.$=Yt),e&&r.jQuery===C&&(r.jQuery=Kt),C},"undefined"===typeof i&&(r.jQuery=r.$=C),C}))},5095:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,h=function(){return c.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function b(e){return u=e,s=setTimeout(w,t),c?y(e):a}function x(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=o}function w(){var e=h();if(x(e))return _(e);s=setTimeout(w,function(e){var n=t-(e-l);return d?p(n,o-(e-u)):n}(e))}function _(e){return s=void 0,v&&r?y(e):(r=i=void 0,a)}function S(){var e=h(),n=x(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return b(l);if(d)return s=setTimeout(w,t),y(l)}return void 0===s&&(s=setTimeout(w,t)),a}return t=g(t)||0,m(n)&&(c=!!n.leading,o=(d="maxWait"in n)?f(g(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},S.flush=function(){return void 0===s?a:_(h())},S}},6378:function(e,t,n){"use strict";n.r(t),n.d(t,{ArrowBuffer:function(){return fb},Assembly:function(){return Oh},Box3:function(){return Z},BoxBuffer:function(){return yb},BufferRepresentation:function(){return Om},Collection:function(){return mg},Color:function(){return ie},Colormaker:function(){return us},ColormakerRegistry:function(){return pl},Component:function(){return pg},ComponentCollection:function(){return Hg},ConeBuffer:function(){return ub},Counter:function(){return Ul},CylinderBuffer:function(){return ay},DatasourceRegistry:function(){return hl},Debug:function(){return sl},DecompressorRegistry:function(){return yl},EllipsoidBuffer:function(){return Cb},Euler:function(){return ue},Frames:function(){return xg},Kdtree:function(){return Mh},KeyActions:function(){return $p},LeftMouseButton:function(){return Du},ListingDatasource:function(){return ul},Matrix3:function(){return V},Matrix4:function(){return j},MdsrvDatasource:function(){return fS},MeasurementDefaultParams:function(){return il},MeshBuffer:function(){return Lp},MiddleMouseButton:function(){return Fu},MolecularSurface:function(){return Uy},MouseActions:function(){return Up},OctahedronBuffer:function(){return Ab},ParserRegistry:function(){return gl},PdbWriter:function(){return Nl},Plane:function(){return J},PointBuffer:function(){return Km},Quaternion:function(){return H},Queue:function(){return Ec},RepresentationCollection:function(){return vg},RepresentationRegistry:function(){return ml},RightMouseButton:function(){return Nu},ScriptExtensions:function(){return dl},SdfWriter:function(){return Bl},Selection:function(){return zs},Shape:function(){return Rm},ShapeComponent:function(){return $g},Signal:function(){return fs},SpatialHash:function(){return md},SphereBuffer:function(){return Wm},Stage:function(){return Wg},StaticDatasource:function(){return dS},StlWriter:function(){return Hl},Structure:function(){return km},StructureComponent:function(){return Bg},Superposition:function(){return _g},SurfaceComponent:function(){return zg},TetrahedronBuffer:function(){return Lb},TextBuffer:function(){return Uv},TorusBuffer:function(){return jb},TrajectoryDatasource:function(){return cl},TrajectoryPlayer:function(){return Cg},UIStageParameters:function(){return vS},Vector2:function(){return z},Vector3:function(){return U},Version:function(){return yS},Volume:function(){return Ep},VolumeComponent:function(){return jg},WidelineBuffer:function(){return Wv},autoLoad:function(){return Ol},concatStructures:function(){return Jh},download:function(){return Ta},flatten:function(){return ka},getDataInfo:function(){return Il},getFileInfo:function(){return Rl},getQuery:function(){return _a},guessElement:function(){return Zh},setDebug:function(){return ll},setListingDatasource:function(){return _l},setMeasurementDefaultParams:function(){return ol},setTrajectoryDatasource:function(){return Sl},superpose:function(){return Fg},throttle:function(){return Ra},uniqueArray:function(){return Da}}),"undefined"!==typeof window&&function(){window.console=window.console||{};for(var e,t,n=window.console,r={},i=function(){},o="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)n[e]||(n[e]=r);for(;t=a.pop();)n[t]||(n[t]=i)}(),"undefined"===typeof window.HTMLCanvasElement||window.HTMLCanvasElement.prototype.toBlob||Object.defineProperty(window.HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=window.atob(this.toDataURL(t,n).split(",")[1]),i=r.length,o=i>>2,a=new Uint8Array(i),s=new Uint32Array(a.buffer,0,o),l=0,u=0;l<o;l++)s[l]=r.charCodeAt(u++)|r.charCodeAt(u++)<<8|r.charCodeAt(u++)<<16|r.charCodeAt(u++)<<24;for(var c=3&i;c--;)a[u]=r.charCodeAt(u++);e(new window.Blob([a],{type:t||"image/png"}))}}),Math.cbrt=Math.cbrt||function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t},Math.sign||(Math.sign=function(e){return 0===(e=+e)||isNaN(e)?Number(e):e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&e>-9007199254740992&&e<9007199254740992&&Math.floor(e)===e}),Number.isNaN||(Number.isNaN=function(e){return e!==e}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=arguments;if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n,r=Object(e),i=!1,o=1;o<arguments.length;o++){var a=t[o];if(void 0!==a&&null!==a){for(var s=Object.keys(Object(a)),l=0,u=s.length;l<u;l++){var c=s[l];try{var d=Object.getOwnPropertyDescriptor(a,c);void 0!==d&&d.enumerable&&(r[c]=a[c])}catch(f){i||(i=!0,n=f)}}if(i)throw n}}return r}}),String.prototype.startsWith||function(){var e=function(){var e;try{var t={},n=Object.defineProperty;e=n(t,t,t)&&n}catch(r){}return e}(),t={}.toString,n=function(e){if(null===this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"===t.call(e))throw TypeError();var r=n.length,i=String(e),o=i.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;Number.isNaN(s)&&(s=0);var l=Math.min(Math.max(s,0),r);if(o+l>r)return!1;for(var u=-1;++u<o;)if(n.charCodeAt(l+u)!==i.charCodeAt(u))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}(),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),String.prototype.repeat||(String.prototype.repeat=function(e){if(null===this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if(e=+e,Number.isNaN(e)&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===t.length||0===e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1===(1&e)&&(n+=t),0!==(e>>>=1);)t+=t;return n}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!==typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||(Array.prototype.includes=function(e){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1],10)||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(e===(i=t[r])||Number.isNaN(e)&&Number.isNaN(i))return!0;r++}return!1}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"===typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var s,l=r(i.length),u=t(n)?Object(new n(l)):new Array(l),c=0;c<l;)s=i[c],u[c]=a?"undefined"===typeof o?a(s,c):a.call(o,s,c):s,c+=1;return u.length=l,u}}()),"undefined"!==typeof window&&function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=window.setTimeout((function(){t(n+r)}),r);return e=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),"undefined"!==typeof window&&(void 0===window.performance&&(self.performance={}),void 0===window.performance.now&&function(){var e=Date.now();window.performance.now=function(){return Date.now()-e}}()),void 0!==Object.defineProperty&&(void 0===Number.MAX_SAFE_INTEGER&&Object.defineProperty(Number,"MAX_SAFE_INTEGER",{enumerable:!1,configurable:!1,writable:!1,value:Math.pow(2,53)-1}),void 0===Number.MIN_SAFE_INTEGER&&Object.defineProperty(Number,"MIN_SAFE_INTEGER",{enumerable:!1,configurable:!1,writable:!1,value:-(Math.pow(2,53)-1)}));var r=setTimeout;function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void l(t.promise,i)}s(t.promise,r)}else(1===e._state?s:l)(t.promise,e._value)}))):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"===typeof n)return void d((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(a){l(e,a)}var r,i}function l(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn((function(){e._handled||o._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,s(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(r){if(n)return;n=!0,l(t,r)}}function f(){}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new c(e,t,n)),n},o.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},o.all=function(e){return new o((function(t,n){if(!e||"undefined"===typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,(function(t){o(e,t)}),n)}r[e]=a,0===--i&&t(r)}catch(l){n(l)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},o.resolve=function(e){return e&&"object"===typeof e&&e.constructor===o?e:new o((function(t){t(e)}))},o.reject=function(e){return new o((function(t,n){n(e)}))},o.race=function(e){return new o((function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)}))},o._immediateFn="function"===typeof setImmediate&&function(e){setImmediate(e)}||function(e){r(e,0)},o._unhandledRejectionFn=function(e){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){var t=arguments;if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=t[r];if(void 0!==i&&null!==i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n}),Object.assign(f.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var p=1e3,h=1001,m=1002,g=1003,v=1004,y=1005,b=1006,x=1008,w=1009,_=1012,S=1014,C=1015,E=1016,k=1020,P=1022,M=1023,A=1026,T=1027,R=2300,I=2301,O=2302,L=2400,D=2401,F=2402,N=3e3,B={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*B.DEG2RAD},radToDeg:function(e){return e*B.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function z(e,t){this.x=e||0,this.y=t||0}function j(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function H(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function U(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function V(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(z.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(z.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new z,t=new z;return function(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(j.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,l,u,c,d,f,p,h,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=d,g[3]=f,g[7]=p,g[11]=h,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new j).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new U;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var d=o*u,f=o*c,p=a*u,h=a*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=f+p*l,t[5]=d-h*l,t[9]=-a*s,t[2]=h-d*l,t[6]=p+f*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,g=s*c,v=l*u,y=l*c;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*u,g=s*c,v=l*u,y=l*c;t[0]=m-y*a,t[4]=-o*c,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){d=o*u,f=o*c,p=a*u,h=a*c;t[0]=s*u,t[4]=p*l-f,t[8]=d*l+h,t[1]=s*c,t[5]=h*l+d,t[9]=f*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,x=o*l,w=a*s,_=a*l;t[0]=s*u,t[4]=_-b*c,t[8]=w*c+x,t[1]=c,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=x*c+w,t[10]=b-_*c}else if("XZY"===e.order){b=o*s,x=o*l,w=a*s,_=a*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=b*c+_,t[5]=o*u,t[9]=x*c-w,t[2]=w*c-x,t[6]=a*u,t[10]=_*c+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new U(0,0,0),t=new U(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new U,t=new U,n=new U;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],f=n[13],p=n[2],h=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],S=r[8],C=r[12],E=r[1],k=r[5],P=r[9],M=r[13],A=r[2],T=r[6],R=r[10],I=r[14],O=r[3],L=r[7],D=r[11],F=r[15];return i[0]=o*w+a*E+s*A+l*O,i[4]=o*_+a*k+s*T+l*L,i[8]=o*S+a*P+s*R+l*D,i[12]=o*C+a*M+s*I+l*F,i[1]=u*w+c*E+d*A+f*O,i[5]=u*_+c*k+d*T+f*L,i[9]=u*S+c*P+d*R+f*D,i[13]=u*C+c*M+d*I+f*F,i[2]=p*w+h*E+m*A+g*O,i[6]=p*_+h*k+m*T+g*L,i[10]=p*S+h*P+m*R+g*D,i[14]=p*C+h*M+m*I+g*F,i[3]=v*w+y*E+b*A+x*O,i[7]=v*_+y*k+b*T+x*L,i[11]=v*S+y*P+b*R+x*D,i[15]=v*C+y*M+b*I+x*F,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new U;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],d=e[10],f=e[14];return e[3]*(+i*s*c-r*l*c-i*a*d+n*l*d+r*a*f-n*s*f)+e[7]*(+t*s*f-t*l*d+i*o*d-r*o*f+r*l*u-i*s*u)+e[11]*(+t*l*c-t*a*f-i*o*c+n*o*f+i*a*u-n*l*u)+e[15]*(-r*a*u-t*s*c+t*a*d+r*o*c-n*o*d+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],u=r[5],c=r[6],d=r[7],f=r[8],p=r[9],h=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15],x=p*y*d-v*h*d+v*c*m-u*y*m-p*c*b+u*h*b,w=g*h*d-f*y*d-g*c*m+l*y*m+f*c*b-l*h*b,_=f*v*d-g*p*d+g*u*m-l*v*m-f*u*b+l*p*b,S=g*p*c-f*v*c-g*u*h+l*v*h+f*u*y-l*p*y,C=i*x+o*w+a*_+s*S;if(0===C){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var k=1/C;return n[0]=x*k,n[1]=(v*h*s-p*y*s-v*a*m+o*y*m+p*a*b-o*h*b)*k,n[2]=(u*y*s-v*c*s+v*a*d-o*y*d-u*a*b+o*c*b)*k,n[3]=(p*c*s-u*h*s-p*a*d+o*h*d+u*a*m-o*c*m)*k,n[4]=w*k,n[5]=(f*y*s-g*h*s+g*a*m-i*y*m-f*a*b+i*h*b)*k,n[6]=(g*c*s-l*y*s-g*a*d+i*y*d+l*a*b-i*c*b)*k,n[7]=(l*h*s-f*c*s+f*a*d-i*h*d-l*a*m+i*c*m)*k,n[8]=_*k,n[9]=(g*p*s-f*v*s-g*o*m+i*v*m+f*o*b-i*p*b)*k,n[10]=(l*v*s-g*u*s+g*o*d-i*v*d-l*o*b+i*u*b)*k,n[11]=(f*u*s-l*p*s-f*o*d+i*p*d+l*o*m-i*u*m)*k,n[12]=S*k,n[13]=(f*v*a-g*p*a+g*o*h-i*v*h-f*o*y+i*p*y)*k,n[14]=(g*u*a-l*v*a-g*o*c+i*v*c+l*o*y-i*u*y)*k,n[15]=(l*p*a-f*u*a+f*o*c-i*p*c-l*o*h+i*u*h)*k,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,u=o+o,c=a+a,d=i*l,f=i*u,p=i*c,h=o*u,m=o*c,g=a*c,v=s*l,y=s*u,b=s*c,x=n.x,w=n.y,_=n.z;return r[0]=(1-(h+g))*x,r[1]=(f+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+y)*_,r[9]=(m-v)*_,r[10]=(1-(d+h))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(){var e=new U,t=new j;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var u=1/a,c=1/s,d=1/l;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=l,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),d=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),l=1/(n-r),u=1/(o-i),c=(t+e)*s,d=(n+r)*l,f=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(H,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],d=i[o+0],f=i[o+1],p=i[o+2],h=i[o+3];if(c!==h||s!==d||l!==f||u!==p){var m=1-a,g=s*d+l*f+u*p+c*h,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,g*v);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var w=a*v;if(s=s*m+d*w,l=l*m+f*w,u=u*m+p*w,c=c*m+h*w,m===1-a){var _=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=_,l*=_,u*=_,c*=_}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(H.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(H.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),d=s(n/2),f=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=d*u*c+l*f*p,this._y=l*f*c-d*u*p,this._z=l*u*p+d*f*c,this._w=l*u*c-d*f*p):"YXZ"===o?(this._x=d*u*c+l*f*p,this._y=l*f*c-d*u*p,this._z=l*u*p-d*f*c,this._w=l*u*c+d*f*p):"ZXY"===o?(this._x=d*u*c-l*f*p,this._y=l*f*c+d*u*p,this._z=l*u*p+d*f*c,this._w=l*u*c-d*f*p):"ZYX"===o?(this._x=d*u*c-l*f*p,this._y=l*f*c+d*u*p,this._z=l*u*p-d*f*c,this._w=l*u*c+d*f*p):"YZX"===o?(this._x=d*u*c+l*f*p,this._y=l*f*c+d*u*p,this._z=l*u*p-d*f*c,this._w=l*u*c-d*f*p):"XZY"===o&&(this._x=d*u*c-l*f*p,this._y=l*f*c-d*u*p,this._z=l*u*p+d*f*c,this._w=l*u*c+d*f*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],u=n[2],c=n[6],d=n[10],f=r+s+d;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>d?(t=2*Math.sqrt(1+r-s-d),this._w=(c-l)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>d?(t=2*Math.sqrt(1+s-r-d),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+d-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new U;return function(n,r){return void 0===t&&(t=new U),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(B.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-t;return this._w=l*o+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize()}var u=Math.sqrt(s),c=Math.atan2(u,a),d=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=o*d+this._w*f,this._x=n*d+this._x*f,this._y=r*d+this._y*f,this._z=i*d+this._z*f,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(U.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new H;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new H;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,u=s*n+a*t-i*r,c=s*r+i*n-o*t,d=-i*t-o*n-a*r;return this.x=l*s+d*-i+u*-a-c*-o,this.y=u*s+d*-o+c*-i-l*-a,this.z=c*s+d*-a+l*-o-u*-i,this},project:function(){var e=new j;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new j;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new U,t=new U;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new U;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new U;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(B.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(V.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new U;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],f=n[5],p=n[8],h=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=o*h+a*v+s*x,i[3]=o*m+a*y+s*w,i[6]=o*g+a*b+s*_,i[1]=l*h+u*v+c*x,i[4]=l*m+u*y+c*w,i[7]=l*g+u*b+c*_,i[2]=d*h+f*v+p*x,i[5]=d*m+f*y+p*w,i[8]=d*g+f*b+p*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-n*i*u+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],d=n[7],f=n[8],p=f*l-u*d,h=u*c-f*s,m=d*s-l*c,g=i*p+o*h+a*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return r[0]=p*y,r[1]=(a*d-f*o)*y,r[2]=(u*o-a*l)*y,r[3]=h*y,r[4]=(f*i-a*c)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*c-d*i)*y,r[8]=(l*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var G={getDataURL:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{"undefined"!==typeof OffscreenCanvas?t=new OffscreenCanvas(e.width,e.height):((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height);var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},W=0;function $(e,t,n,r,i,o,a,s,l,u){Object.defineProperty(this,"id",{value:W++}),this.uuid=B.generateUUID(),this.name="",this.image=void 0!==e?e:$.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:$.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:h,this.wrapT=void 0!==r?r:h,this.magFilter=void 0!==i?i:b,this.minFilter=void 0!==o?o:x,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:M,this.type=void 0!==s?s:w,this.offset=new z(0,0),this.repeat=new z(1,1),this.center=new z(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new V,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:N,this.version=0,this.onUpdate=null}function q(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function X(e,t,n){this.width=e,this.height=t,this.scissor=new q(0,0,e,t),this.scissorTest=!1,this.viewport=new q(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=b),this.texture=new $(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function K(e,t,n){X.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function Y(e,t,n,r,i,o,a,s,l,u,c,d){$.call(this,null,o,a,s,l,u,r,i,c,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:g,this.minFilter=void 0!==u?u:g,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Z(e,t){this.min=void 0!==e?e:new U(1/0,1/0,1/0),this.max=void 0!==t?t:new U(-1/0,-1/0,-1/0)}function Q(e,t){this.center=void 0!==e?e:new U,this.radius=void 0!==t?t:0}function J(e,t){this.normal=void 0!==e?e:new U(1,0,0),this.constant=void 0!==t?t:0}function ee(e,t,n,r,i,o){this.planes=[void 0!==e?e:new J,void 0!==t?t:new J,void 0!==n?n:new J,void 0!==r?r:new J,void 0!==i?i:new J,void 0!==o?o:new J]}$.DEFAULT_IMAGE=void 0,$.DEFAULT_MAPPING=300,$.prototype=Object.assign(Object.create(f.prototype),{constructor:$,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=B.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(G.getDataURL(r[o]))}else i=G.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case p:e.x=e.x-Math.floor(e.x);break;case h:e.x=e.x<0?0:1;break;case m:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case p:e.y=e.y-Math.floor(e.y);break;case h:e.y=e.y<0?0:1;break;case m:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty($.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(q.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,l=s[0],u=s[4],c=s[8],d=s[1],f=s[5],p=s[9],h=s[2],m=s[6],g=s[10];if(Math.abs(u-d)<o&&Math.abs(c-h)<o&&Math.abs(p-m)<o){if(Math.abs(u+d)<a&&Math.abs(c+h)<a&&Math.abs(p+m)<a&&Math.abs(l+f+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,y=(f+1)/2,b=(g+1)/2,x=(u+d)/4,w=(c+h)/4,_=(p+m)/4;return v>y&&v>b?v<o?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(v)),i=w/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=_/r):b<o?(n=.707106781,r=.707106781,i=0):(n=w/(i=Math.sqrt(b)),r=_/i),this.set(n,r,i,t),this}var S=Math.sqrt((m-p)*(m-p)+(c-h)*(c-h)+(d-u)*(d-u));return Math.abs(S)<.001&&(S=1),this.x=(m-p)/S,this.y=(c-h)/S,this.z=(d-u)/S,this.w=Math.acos((l+f+g-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new q,t=new q),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),X.prototype=Object.assign(Object.create(f.prototype),{constructor:X,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),K.prototype=Object.create(X.prototype),K.prototype.constructor=K,K.prototype.isWebGLRenderTargetCube=!0,Y.prototype=Object.create($.prototype),Y.prototype.constructor=Y,Y.prototype.isDataTexture=!0,Object.assign(Z.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],d=e[s+2];u<t&&(t=u),c<n&&(n=c),d<r&&(r=d),u>i&&(i=u),c>o&&(o=c),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),d=e.getZ(s);u<t&&(t=u),c<n&&(n=c),d<r&&(r=d),u>i&&(i=u),c>o&&(o=c),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new U;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new U),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new U),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new U;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new U),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new U;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new U,t=new U,n=new U,r=new U,i=new U,o=new U,a=new U,s=new U,l=new U,u=new U;function c(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),u=e.dot(a),c=t.dot(a),d=n.dot(a);if(Math.max(-Math.max(u,c,d),Math.min(u,c,d))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var d=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!c(d)&&(!!c(d=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(r,i),c(d=[u.x,u.y,u.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new U),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new U;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new U;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new Q),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){if(this.isEmpty())return this;var t=e.elements,n=t[0]*this.min.x,r=t[1]*this.min.x,i=t[2]*this.min.x,o=t[0]*this.max.x,a=t[1]*this.max.x,s=t[2]*this.max.x,l=t[4]*this.min.y,u=t[5]*this.min.y,c=t[6]*this.min.y,d=t[4]*this.max.y,f=t[5]*this.max.y,p=t[6]*this.max.y,h=t[8]*this.min.z,m=t[9]*this.min.z,g=t[10]*this.min.z,v=t[8]*this.max.z,y=t[9]*this.max.z,b=t[10]*this.max.z;return this.min.x=Math.min(n,o)+Math.min(l,d)+Math.min(h,v)+t[12],this.min.y=Math.min(r,a)+Math.min(u,f)+Math.min(m,y)+t[13],this.min.z=Math.min(i,s)+Math.min(c,p)+Math.min(g,b)+t[14],this.max.x=Math.max(n,o)+Math.max(l,d)+Math.max(h,v)+t[12],this.max.y=Math.max(r,a)+Math.max(u,f)+Math.max(m,y)+t[13],this.max.z=Math.max(i,s)+Math.max(c,p)+Math.max(g,b)+t[14],this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Q.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Z;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new U),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Z),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(J.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new U,t=new U;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new U),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new U;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new U);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new U),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new U,t=new V;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(ee.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],d=n[8],f=n[9],p=n[10],h=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,c-s,h-d,y-m).normalize(),t[1].setComponents(a+r,c+s,h+d,y+m).normalize(),t[2].setComponents(a+i,c+l,h+f,y+g).normalize(),t[3].setComponents(a-i,c-l,h-f,y-g).normalize(),t[4].setComponents(a-o,c-u,h-p,y-v).normalize(),t[5].setComponents(a+o,c+u,h+p,y+v).normalize(),this},intersectsObject:function(){var e=new Q;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Q;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(){var e=new U;return function(t){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var te={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},ne={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}},re={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ie(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(ie.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=B.euclideanModulo(t,1),n=B.clamp(n,0,1),r=B.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,c=(u=n[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=re[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),l=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=l<=.5?u/(a+s):u/(2-a-s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var oe={common:{diffuse:{value:new ie(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new V},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new z(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ie(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ie(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new V}},sprite:{diffuse:{value:new ie(15658734)},opacity:{value:1},center:{value:new z(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new V}}},ae={basic:{uniforms:ne.merge([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.fog]),vertexShader:te.meshbasic_vert,fragmentShader:te.meshbasic_frag},lambert:{uniforms:ne.merge([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.fog,oe.lights,{emissive:{value:new ie(0)}}]),vertexShader:te.meshlambert_vert,fragmentShader:te.meshlambert_frag},phong:{uniforms:ne.merge([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.gradientmap,oe.fog,oe.lights,{emissive:{value:new ie(0)},specular:{value:new ie(1118481)},shininess:{value:30}}]),vertexShader:te.meshphong_vert,fragmentShader:te.meshphong_frag},standard:{uniforms:ne.merge([oe.common,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.roughnessmap,oe.metalnessmap,oe.fog,oe.lights,{emissive:{value:new ie(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:te.meshphysical_vert,fragmentShader:te.meshphysical_frag},points:{uniforms:ne.merge([oe.points,oe.fog]),vertexShader:te.points_vert,fragmentShader:te.points_frag},dashed:{uniforms:ne.merge([oe.common,oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:te.linedashed_vert,fragmentShader:te.linedashed_frag},depth:{uniforms:ne.merge([oe.common,oe.displacementmap]),vertexShader:te.depth_vert,fragmentShader:te.depth_frag},normal:{uniforms:ne.merge([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,{opacity:{value:1}}]),vertexShader:te.normal_vert,fragmentShader:te.normal_frag},sprite:{uniforms:ne.merge([oe.sprite,oe.fog]),vertexShader:te.sprite_vert,fragmentShader:te.sprite_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:te.cube_vert,fragmentShader:te.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:te.equirect_vert,fragmentShader:te.equirect_frag},distanceRGBA:{uniforms:ne.merge([oe.common,oe.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:te.distanceRGBA_vert,fragmentShader:te.distanceRGBA_frag},shadow:{uniforms:ne.merge([oe.lights,oe.fog,{color:{value:new ie(0)},opacity:{value:1}}]),vertexShader:te.shadow_vert,fragmentShader:te.shadow_frag}};function se(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function le(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(!function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,e.STATIC_DRAW):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function ue(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||ue.DefaultOrder}function ce(){this.mask=1}ae.physical={uniforms:ne.merge([ae.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:te.meshphysical_vert,fragmentShader:te.meshphysical_frag},ue.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ue.DefaultOrder="XYZ",Object.defineProperties(ue.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(ue.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=B.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],d=i[2],f=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new j;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new H;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new U(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(ce.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var de=0;function fe(){Object.defineProperty(this,"id",{value:de++}),this.uuid=B.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fe.DefaultUp.clone();var e=new U,t=new ue,n=new H,r=new U(1,1,1);t.onChange((function(){n.setFromEuler(t,!1)})),n.onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new j},normalMatrix:{value:new V}}),this.matrix=new j,this.matrixWorld=new j,this.matrixAutoUpdate=fe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ce,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function pe(){fe.call(this),this.type="Camera",this.matrixWorldInverse=new j,this.projectionMatrix=new j}function he(e,t,n,r,i,o){pe.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function ge(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new U,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new ie,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}fe.DefaultUp=new U(0,1,0),fe.DefaultMatrixAutoUpdate=!0,fe.prototype=Object.assign(Object.create(f.prototype),{constructor:fe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new H;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new H;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new U(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new U(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new U(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new U;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new U(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new U(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new U(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new j;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new j,t=new U;return function(n,r,i){n.isVector3?t.copy(n):t.set(n,r,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){var t=arguments,n=this;if(arguments.length>1){for(var r=0;r<arguments.length;r++)n.add(t[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){var t=arguments,n=this;if(arguments.length>1){for(var r=0;r<arguments.length;r++)n.remove(t[r]);return this}var i=this.children.indexOf(e);return-1!==i&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new U),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new U,t=new U;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new H),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new U,t=new H;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new U),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new H;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new U),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var u=a[s];i(e.shapes,u)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(i(e.materials,this.material[s]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var d=m(e.geometries),f=m(e.materials),p=m(e.textures),h=m(e.images);a=m(e.shapes);d.length>0&&(n.geometries=d),f.length>0&&(n.materials=f),p.length>0&&(n.textures=p),h.length>0&&(n.images=h),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),pe.prototype=Object.assign(Object.create(fe.prototype),{constructor:pe,isCamera:!0,copy:function(e,t){return fe.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new H;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new U),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){fe.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),he.prototype=Object.assign(Object.create(pe.prototype),{constructor:he,isOrthographicCamera:!0,copy:function(e,t){return pe.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;o=(i+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(a-=d*(this.view.offsetY/u))-d*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(ge.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var ve=0;function ye(){Object.defineProperty(this,"id",{value:ve+=2}),this.uuid=B.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function be(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function xe(e,t,n){be.call(this,new Int8Array(e),t,n)}function we(e,t,n){be.call(this,new Uint8Array(e),t,n)}function _e(e,t,n){be.call(this,new Uint8ClampedArray(e),t,n)}function Se(e,t,n){be.call(this,new Int16Array(e),t,n)}function Ce(e,t,n){be.call(this,new Uint16Array(e),t,n)}function Ee(e,t,n){be.call(this,new Int32Array(e),t,n)}function ke(e,t,n){be.call(this,new Uint32Array(e),t,n)}function Pe(e,t,n){be.call(this,new Float32Array(e),t,n)}function Me(e,t,n){be.call(this,new Float64Array(e),t,n)}function Ae(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Te(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}ye.prototype=Object.assign(Object.create(f.prototype),{constructor:ye,isGeometry:!0,applyMatrix:function(e){for(var t=(new V).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new j;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new j;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new j;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new j;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new j;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new fe;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=[],c=[],d=[],f=0,p=0;f<i.length;f+=3,p+=2)t.vertices.push(new U(i[f],i[f+1],i[f+2])),void 0!==o&&u.push(new U(o[f],o[f+1],o[f+2])),void 0!==a&&t.colors.push(new ie(a[f],a[f+1],a[f+2])),void 0!==s&&c.push(new z(s[p],s[p+1])),void 0!==l&&d.push(new z(l[p],l[p+1]));function h(e,n,r,i){var f=new ge(e,n,r,void 0!==o?[u[e].clone(),u[n].clone(),u[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(f),void 0!==s&&t.faceVertexUvs[0].push([c[e].clone(),c[n].clone(),c[r].clone()]),void 0!==l&&t.faceVertexUvs[1].push([d[e].clone(),d[n].clone(),d[r].clone()])}var m=e.groups;if(m.length>0)for(f=0;f<m.length;f++)for(var g=m[f],v=g.start,y=(p=v,v+g.count);p<y;p+=3)void 0!==n?h(n[p],n[p+1],n[p+2],g.materialIndex):h(p,p+1,p+2,g.materialIndex);else if(void 0!==n)for(f=0;f<n.length;f+=3)h(n[f],n[f+1],n[f+2]);else for(f=0;f<i.length/3;f+=3)h(f,f+1,f+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new U;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new j;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=this,t=new U,n=new U,r=0,i=this.faces.length;r<i;r++){var o=e.faces[r],a=e.vertices[o.a],s=e.vertices[o.b],l=e.vertices[o.c];t.subVectors(l,s),n.subVectors(a,s),t.cross(n),t.normalize(),o.normal.copy(t)}},computeVertexNormals:function(e){var t,n,r,i,o,a,s=this;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new U;if(e){var l,u,c,d=new U,f=new U;for(r=0,i=this.faces.length;r<i;r++)o=s.faces[r],l=s.vertices[o.a],u=s.vertices[o.b],c=s.vertices[o.c],d.subVectors(c,u),f.subVectors(l,u),d.cross(f),a[o.a].add(d),a[o.b].add(d),a[o.c].add(d)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=s.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var p=(o=s.faces[r]).vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i,o=this;for(n=0,r=this.faces.length;n<r;n++)for((i=o.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new ye;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!o.morphNormals[e]){o.morphNormals[e]={},o.morphNormals[e].faceNormals=[],o.morphNormals[e].vertexNormals=[];var s=o.morphNormals[e].faceNormals,l=o.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new U,c={a:new U,b:new U,c:new U},s.push(u),l.push(c)}var u,c,d=o.morphNormals[e];for(a.vertices=o.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=o.faces[n],u=d.faceNormals[n],c=d.vertexNormals[n],u.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=o.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Z),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Q),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],d=this.colors,f=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new V).getNormalMatrix(t));for(var p=0,h=a.length;p<h;p++){var m=a[p].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(p=0,h=f.length;p<h;p++)d.push(f[p].clone());for(p=0,h=l.length;p<h;p++){var g,v,y,b=l[p],x=b.vertexNormals,w=b.vertexColors;(g=new ge(b.a+i,b.b+i,b.c+i)).normal.copy(b.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var _=0,S=x.length;_<S;_++)v=x[_].clone(),void 0!==r&&v.applyMatrix3(r).normalize(),g.vertexNormals.push(v);g.color.copy(b.color);for(_=0,S=w.length;_<S;_++)y=w[_],g.vertexColors.push(y.clone());g.materialIndex=b.materialIndex+n,s.push(g)}for(p=0,h=c.length;p<h;p++){var C=c[p],E=[];if(void 0!==C){for(_=0,S=C.length;_<S;_++)E.push(C[_].clone());u.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,l=this,u={},c=[],d=[],f=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=l.vertices[n],void 0===u[t=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f)]?(u[t]=n,c.push(l.vertices[n]),d[n]=c.length-1):d[n]=d[u[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){(i=l.faces[n]).a=d[i.a],i.b=d[i.b],i.c=d[i.c],o=[i.a,i.b,i.c];for(var h=0;h<3;h++)if(o[h]===o[(h+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var m=p[n];for(l.faces.splice(m,1),a=0,s=this.faceVertexUvs.length;a<s;a++)l.faceVertexUvs[a].splice(m,1)}var g=this.vertices.length-c.length;return this.vertices=c,g},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new U(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e=this,t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var n=this.parameters;for(var r in n)void 0!==n[r]&&(t[r]=n[r]);return t}for(var i=[],o=0;o<this.vertices.length;o++){var a=e.vertices[o];i.push(a.x,a.y,a.z)}var s=[],l=[],u={},c=[],d={},f=[],p={};for(o=0;o<this.faces.length;o++){var h=e.faces[o],m=void 0!==e.faceVertexUvs[0][o],g=h.normal.length()>0,v=h.vertexNormals.length>0,y=1!==h.color.r||1!==h.color.g||1!==h.color.b,b=h.vertexColors.length>0,x=0;if(x=C(x,0,0),x=C(x,1,!0),x=C(x,2,!1),x=C(x,3,m),x=C(x,4,g),x=C(x,5,v),x=C(x,6,y),x=C(x,7,b),s.push(x),s.push(h.a,h.b,h.c),s.push(h.materialIndex),m){var w=e.faceVertexUvs[0][o];s.push(P(w[0]),P(w[1]),P(w[2]))}if(g&&s.push(E(h.normal)),v){var _=h.vertexNormals;s.push(E(_[0]),E(_[1]),E(_[2]))}if(y&&s.push(k(h.color)),b){var S=h.vertexColors;s.push(k(S[0]),k(S[1]),k(S[2]))}}function C(e,t,n){return n?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]||(u[t]=l.length/3,l.push(e.x,e.y,e.z)),u[t]}function k(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==d[t]||(d[t]=c.length,c.push(e.getHex())),d[t]}function P(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=f.length/2,f.push(e.x,e.y)),p[t]}return t.data={},t.data.vertices=i,t.data.normals=l,c.length>0&&(t.data.colors=c),f.length>0&&(t.data.uvs=[f]),t.data.faces=s,t},clone:function(){return(new ye).copy(this)},copy:function(e){var t,n,r,i,o,a,s=this;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var l=e.vertices;for(t=0,n=l.length;t<n;t++)s.vertices.push(l[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)s.colors.push(u[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)s.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var d=e.faceVertexUvs[t];for(void 0===s.faceVertexUvs[t]&&(s.faceVertexUvs[t]=[]),r=0,i=d.length;r<i;r++){var f=d[r],p=[];for(o=0,a=f.length;o<a;o++){var h=f[o];p.push(h.clone())}s.faceVertexUvs[t].push(p)}}var m=e.morphTargets;for(t=0,n=m.length;t<n;t++){var g={};if(g.name=m[t].name,void 0!==m[t].vertices)for(g.vertices=[],r=0,i=m[t].vertices.length;r<i;r++)g.vertices.push(m[t].vertices[r].clone());if(void 0!==m[t].normals)for(g.normals=[],r=0,i=m[t].normals.length;r<i;r++)g.normals.push(m[t].normals[r].clone());s.morphTargets.push(g)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var y={};if(void 0!==v[t].vertexNormals)for(y.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var b=v[t].vertexNormals[r],x={};x.a=b.a.clone(),x.b=b.b.clone(),x.c=b.c.clone(),y.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(y.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)y.faceNormals.push(v[t].faceNormals[r].clone());s.morphNormals.push(y)}var w=e.skinWeights;for(t=0,n=w.length;t<n;t++)s.skinWeights.push(w[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)s.skinIndices.push(_[t].clone());var S=e.lineDistances;for(t=0,n=S.length;t<n;t++)s.lineDistances.push(S[t]);var C=e.boundingBox;null!==C&&(this.boundingBox=C.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(be.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(be.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ie),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new z),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new U),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new q),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),xe.prototype=Object.create(be.prototype),xe.prototype.constructor=xe,we.prototype=Object.create(be.prototype),we.prototype.constructor=we,_e.prototype=Object.create(be.prototype),_e.prototype.constructor=_e,Se.prototype=Object.create(be.prototype),Se.prototype.constructor=Se,Ce.prototype=Object.create(be.prototype),Ce.prototype.constructor=Ce,Ee.prototype=Object.create(be.prototype),Ee.prototype.constructor=Ee,ke.prototype=Object.create(be.prototype),ke.prototype.constructor=ke,Pe.prototype=Object.create(be.prototype),Pe.prototype.constructor=Pe,Me.prototype=Object.create(be.prototype),Me.prototype.constructor=Me,Object.assign(Ae.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=this,r=e.faces,i=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,l=e.morphTargets,u=l.length;if(u>0){t=[];for(var c=0;c<u;c++)t[c]=[];this.morphTargets.position=t}var d,f=e.morphNormals,p=f.length;if(p>0){d=[];for(c=0;c<p;c++)d[c]=[];this.morphTargets.normal=d}var h=e.skinIndices,m=e.skinWeights,g=h.length===i.length,v=m.length===i.length;i.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<r.length;c++){var y=r[c];n.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)n.normals.push(b[0],b[1],b[2]);else{var x=y.normal;n.normals.push(x,x,x)}var w,_=y.vertexColors;if(3===_.length)n.colors.push(_[0],_[1],_[2]);else{var S=y.color;n.colors.push(S,S,S)}if(!0===a)void 0!==(w=o[0][c])?n.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),n.uvs.push(new z,new z,new z));if(!0===s)void 0!==(w=o[1][c])?n.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),n.uvs2.push(new z,new z,new z));for(var C=0;C<u;C++){var E=l[C].vertices;t[C].push(E[y.a],E[y.b],E[y.c])}for(C=0;C<p;C++){var k=f[C].vertexNormals[c];d[C].push(k.a,k.b,k.c)}g&&n.skinIndices.push(h[y.a],h[y.b],h[y.c]),v&&n.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Re=1;function Ie(){Object.defineProperty(this,"id",{value:Re+=2}),this.uuid=B.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Oe(e,t,n,r,i,o){ye.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Le(e,t,n,r,i,o)),this.mergeVertices()}function Le(e,t,n,r,i,o){Ie.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],l=[],u=[],c=[],d=0,f=0;function p(e,t,n,r,i,o,p,h,m,g,v){var y,b,x=o/m,w=p/g,_=o/2,S=p/2,C=h/2,E=m+1,k=g+1,P=0,M=0,A=new U;for(b=0;b<k;b++){var T=b*w-S;for(y=0;y<E;y++){var R=y*x-_;A[e]=R*r,A[t]=T*i,A[n]=C,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=h>0?1:-1,u.push(A.x,A.y,A.z),c.push(y/m),c.push(1-b/g),P+=1}}for(b=0;b<g;b++)for(y=0;y<m;y++){var I=d+y+E*b,O=d+y+E*(b+1),L=d+(y+1)+E*(b+1),D=d+(y+1)+E*b;s.push(I,O,D),s.push(O,L,D),M+=6}a.addGroup(f,M,v),f+=M,d+=P}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Pe(l,3)),this.addAttribute("normal",new Pe(u,3)),this.addAttribute("uv",new Pe(c,2))}function De(e,t,n,r){ye.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Fe(e,t,n,r)),this.mergeVertices()}function Fe(e,t,n,r){Ie.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,u=Math.floor(r)||1,c=l+1,d=u+1,f=e/l,p=t/u,h=[],m=[],g=[],v=[];for(o=0;o<d;o++){var y=o*p-s;for(i=0;i<c;i++){var b=i*f-a;m.push(b,-y,0),g.push(0,0,1),v.push(i/l),v.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<l;i++){var x=i+c*o,w=i+c*(o+1),_=i+1+c*(o+1),S=i+1+c*o;h.push(x,w,S),h.push(w,_,S)}this.setIndex(h),this.addAttribute("position",new Pe(m,3)),this.addAttribute("normal",new Pe(g,3)),this.addAttribute("uv",new Pe(v,2))}Ie.prototype=Object.assign(Object.create(f.prototype),{constructor:Ie,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Te(e)>65535?ke:Ce)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new be(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new V).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new j;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new j;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new j;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new j;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new j;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new fe;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new U;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Pe(3*t.vertices.length,3),r=new Pe(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Pe(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Pe(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ae).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new be(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new be(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new be(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new be(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new be(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],u=0,c=l.length;u<c;u++){var d=l[u],f=new Pe(3*d.length,3);s.push(f.copyVector3sArray(d))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new Pe(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var h=new Pe(4*e.skinWeights.length,4);this.addAttribute("skinWeight",h.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Z);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Z,t=new U;return function(){null===this.boundingSphere&&(this.boundingSphere=new Q);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new be(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,l,u,c=t.normal.array,d=new U,f=new U,p=new U,h=new U,m=new U;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var v=0,y=n.length;v<y;++v){var b=n[v],x=b.start;for(o=x,a=x+b.count;o<a;o+=3)s=3*g[o+0],l=3*g[o+1],u=3*g[o+2],d.fromArray(r,s),f.fromArray(r,l),p.fromArray(r,u),h.subVectors(p,f),m.subVectors(d,f),h.cross(m),c[s]+=h.x,c[s+1]+=h.y,c[s+2]+=h.z,c[l]+=h.x,c[l+1]+=h.y,c[l+2]+=h.z,c[u]+=h.x,c[u+1]+=h.y,c[u+2]+=h.z}}else for(o=0,a=r.length;o<a;o+=9)d.fromArray(r,o),f.fromArray(r,o+3),p.fromArray(r,o+6),h.subVectors(p,f),m.subVectors(d,f),h.cross(m),c[o]=h.x,c[o+1]=h.y,c[o+2]=h.z,c[o+3]=h.x,c[o+4]=h.y,c[o+5]=h.z,c[o+6]=h.x,c[o+7]=h.y,c[o+8]=h.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,l=o.itemSize*t;s<a.length;s++,l++)i[l]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new U;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ie,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),l=0,u=0,c=0,d=t.length;c<d;c++){l=t[c]*a;for(var f=0;f<a;f++)s[u++]=o[l++]}e.addAttribute(r,new be(s,a))}var p=this.groups;for(c=0,d=p.length;c<d;c++){var h=p[c];e.addGroup(h.start,h.count,h.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Ie).copy(this)},copy:function(e){var t,n,r,i=this;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.index;null!==o&&this.setIndex(o.clone());var a=e.attributes;for(t in a){var s=a[t];i.addAttribute(t,s.clone())}var l=e.morphAttributes;for(t in l){var u=[],c=l[t];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());i.morphAttributes[t]=u}var d=e.groups;for(n=0,r=d.length;n<r;n++){var f=d[n];i.addGroup(f.start,f.count,f.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var h=e.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Oe.prototype=Object.create(ye.prototype),Oe.prototype.constructor=Oe,Le.prototype=Object.create(Ie.prototype),Le.prototype.constructor=Le,De.prototype=Object.create(ye.prototype),De.prototype.constructor=De,Fe.prototype=Object.create(Ie.prototype),Fe.prototype.constructor=Fe;var Ne=0;function Be(){Object.defineProperty(this,"id",{value:Ne++}),this.uuid=B.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function ze(e){Be.call(this),this.type="MeshBasicMaterial",this.color=new ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function je(e){Be.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function He(e,t){this.origin=void 0!==e?e:new U,this.direction=void 0!==t?t:new U}function Ue(e,t,n){this.a=void 0!==e?e:new U,this.b=void 0!==t?t:new U,this.c=void 0!==n?n:new U}function Ve(e,t){fe.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ie,this.material=void 0!==t?t:new ze({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Ge(e,t,n,r){var i,o,a,s=new ie(0),l=0;function u(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),u(s,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){u(s,l=e)},render:function(t,r,c,d){var f=r.background;null===f?u(s,l):f&&f.isColor&&(u(f,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&f.isCubeTexture?(void 0===a&&((a=new Ve(new Le(1,1,1),new je({uniforms:ae.cube.uniforms,vertexShader:ae.cube.vertexShader,fragmentShader:ae.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a)),a.material.uniforms.tCube.value=f,t.push(a,a.geometry,a.material,0,null)):f&&f.isTexture&&(void 0===i&&(i=new he(-1,1,1,-1,0,1),o=new Ve(new Fe(2,2),new ze({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o)),o.material.map=f,e.renderBufferDirect(i,null,o.geometry,o.material,o,null))}}}function We(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(o,a,s){var l;if(r.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}function $e(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),h=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=c>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:h,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y}}function qe(){var e=this,t=null,n=0,r=!1,i=!1,o=new J,a=new V,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=s.value,!0!==i||null===u){var c=r+4*l,d=n.matrixWorldInverse;a.getNormalMatrix(d),(null===u||u.length<c)&&(u=new Float32Array(c));for(var f=0,p=r;f!==l;++f,p+=4)o.copy(t[f]).applyMatrix4(d,a),o.normal.toArray(u,p),u[p+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,l()},this.setState=function(e,o,a,c,d,f){if(!r||null===e||0===e.length||i&&!a)i?u(null):l();else{var p=i?0:n,h=4*p,m=d.clippingState||null;s.value=m,m=u(e,c,h,f);for(var g=0;g!==h;++g)m[g]=t[g];d.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function Xe(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function Ke(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),delete r[a.id];var u=i[s.id];u&&(t.remove(u),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ie).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],l=0,u=s.length;l<u;l++)t.update(s[l],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var o,a=[],s=n.index,l=n.attributes;if(null!==s)for(var u=0,c=(o=s.array).length;u<c;u+=3){var d=o[u+0],f=o[u+1],p=o[u+2];a.push(d,f,f,p,p,d)}else for(u=0,c=(o=l.position.array).length/3-1;u<c;u+=3){d=u+0,f=u+1,p=u+2;a.push(d,f,f,p,p,d)}return r=new(Te(a)>65535?ke:Ce)(a,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}function Ye(e,t,n,r){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(s,l,u){var c;if(r.isWebGL2)c=e;else if(null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,u,o,l*a,s.maxInstancedCount),n.update(u,i,s.maxInstancedCount)}}function Ze(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Qe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Je(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,l=s.length,u=t[i.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[i.id]=u}var d=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<l;c++){0!==(p=u[c])[1]&&(d&&i.removeAttribute("morphTarget"+c),f&&i.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++){(p=u[c])[0]=c,p[1]=s[c]}for(u.sort(Qe),c=0;c<8;c++){var p;if(p=u[c]){var h=p[0],m=p[1];if(m){d&&i.addAttribute("morphTarget"+c,d[h]),f&&i.addAttribute("morphNormal"+c,f[h]),n[c]=m;continue}}n[c]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function et(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}function tt(e,t,n,r,i,o,a,s,l,u){e=void 0!==e?e:[],t=void 0!==t?t:301,$.call(this,e,t,n,r,i,o,a,s,l,u),this.flipY=!1}Be.prototype=Object.assign(Object.create(f.prototype),{constructor:Be,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){var t=this;if(void 0!==e)for(var n in e){var r=e[n];if(void 0!==r)if("shading"!==n){var i=t[n];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):t[n]="overdraw"===n?Number(r):r:console.warn("THREE."+t.type+": '"+n+"' is not a property of this material.")}else console.warn("THREE."+t.type+": .shading has been removed. Use the boolean .flatShading instead."),t.flatShading=1===r;else console.warn("THREE.Material: '"+n+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ze.prototype=Object.create(Be.prototype),ze.prototype.constructor=ze,ze.prototype.isMeshBasicMaterial=!0,ze.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},je.prototype=Object.create(Be.prototype),je.prototype.constructor=je,je.prototype.isShaderMaterial=!0,je.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ne.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},je.prototype.toJSON=function(e){var t=Be.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(He.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new U),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new U;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new U),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new U;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new U,t=new U,n=new U;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,l,u,c,d=.5*r.distanceTo(i),f=-this.direction.dot(t),p=n.dot(this.direction),h=-n.dot(t),m=n.lengthSq(),g=Math.abs(1-f*f);if(g>0)if(l=f*p-h,c=d*g,(s=f*h-p)>=0)if(l>=-c)if(l<=c){var v=1/g;u=(s*=v)*(s+f*(l*=v)+2*p)+l*(f*s+l+2*h)+m}else l=d,u=-(s=Math.max(0,-(f*l+p)))*s+l*(l+2*h)+m;else l=-d,u=-(s=Math.max(0,-(f*l+p)))*s+l*(l+2*h)+m;else l<=-c?u=-(s=Math.max(0,-(-f*d+p)))*s+(l=s>0?-d:Math.min(Math.max(-d,-h),d))*(l+2*h)+m:l<=c?(s=0,u=(l=Math.min(Math.max(-d,-h),d))*(l+2*h)+m):u=-(s=Math.max(0,-(f*d+p)))*s+(l=s>0?d:Math.min(Math.max(-d,-h),d))*(l+2*h)+m;else l=f>0?-d:d,u=-(s=Math.max(0,-(f*l+p)))*s+l*(l+2*h)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(l).add(e),u}}(),intersectSphere:function(){var e=new U;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,l=r+a;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(i=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(i=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(a=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new U;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new U,t=new U,n=new U,r=new U;return function(i,o,a,s,l){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var u,c=this.direction.dot(r);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,i);var d=u*this.direction.dot(n.crossVectors(e,n));if(d<0)return null;var f=u*this.direction.dot(t.cross(e));if(f<0)return null;if(d+f>c)return null;var p=-u*e.dot(r);return p<0?null:this.at(p/c,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Ue,{getNormal:function(){var e=new U;return function(t,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new U),i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new U,t=new U,n=new U;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var l=e.dot(e),u=e.dot(t),c=e.dot(n),d=t.dot(t),f=t.dot(n),p=l*d-u*u;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new U),0===p)return s.set(-2,-1,-1);var h=1/p,m=(d*c-u*f)*h,g=(l*f-u*c)*h;return s.set(1-m-g,g,m)}}(),containsPoint:function(){var e=new U;return function(t,n,r,i){return Ue.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(Ue.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new U,t=new U;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new U),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Ue.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new U),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Ue.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Ue.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new U,t=new U,n=new U,r=new U,i=new U,o=new U;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new U);var l,u,c=this.a,d=this.b,f=this.c;e.subVectors(d,c),t.subVectors(f,c),r.subVectors(a,c);var p=e.dot(r),h=t.dot(r);if(p<=0&&h<=0)return s.copy(c);i.subVectors(a,d);var m=e.dot(i),g=t.dot(i);if(m>=0&&g<=m)return s.copy(d);var v=p*g-m*h;if(v<=0&&p>=0&&m<=0)return l=p/(p-m),s.copy(c).addScaledVector(e,l);o.subVectors(a,f);var y=e.dot(o),b=t.dot(o);if(b>=0&&y<=b)return s.copy(f);var x=y*h-p*b;if(x<=0&&h>=0&&b<=0)return u=h/(h-b),s.copy(c).addScaledVector(t,u);var w=m*b-y*g;if(w<=0&&g-m>=0&&y-b>=0)return n.subVectors(f,d),u=(g-m)/(g-m+(y-b)),s.copy(d).addScaledVector(n,u);var _=1/(w+x+v);return l=x*_,u=v*_,s.copy(c).addScaledVector(e,l).addScaledVector(t,u)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Ve.prototype=Object.assign(Object.create(fe.prototype),{constructor:Ve,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return fe.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this,i=this.geometry;if(i.isBufferGeometry){var o=i.morphAttributes,a=Object.keys(o);if(a.length>0){var s=o[a[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),r.morphTargetInfluences.push(0),r.morphTargetDictionary[n]=e}}else{var l=i.morphTargets;if(void 0!==l&&l.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=l.length;e<t;e++)n=l[e].name||String(e),r.morphTargetInfluences.push(0),r.morphTargetDictionary[n]=e}},raycast:function(){var e=new j,t=new He,n=new Q,r=new U,i=new U,o=new U,a=new U,s=new U,l=new U,u=new z,c=new z,d=new z,f=new U,p=new U,h=new U;function m(e,t,n,r,i,o,a){return Ue.getBarycoord(e,t,n,r,f),i.multiplyScalar(f.x),o.multiplyScalar(f.y),a.multiplyScalar(f.z),i.add(o).add(a),i.clone()}function g(e,t,n,r,i,o,a,s){if(null===(1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s)))return null;h.copy(s),h.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(h);return l<n.near||l>n.far?null:{distance:l,point:h.clone(),object:e}}function v(e,t,n,a,s,l,f,h,v){r.fromBufferAttribute(s,f),i.fromBufferAttribute(s,h),o.fromBufferAttribute(s,v);var y=g(e,t,n,a,r,i,o,p);if(y){l&&(u.fromBufferAttribute(l,f),c.fromBufferAttribute(l,h),d.fromBufferAttribute(l,v),y.uv=m(p,r,i,o,u,c,d));var b=new ge(f,h,v);Ue.getNormal(r,i,o,b.normal),y.face=b}return y}return function(f,h){var y,b=this,x=this.geometry,w=this.material,_=this.matrixWorld;if(void 0!==w&&(null===x.boundingSphere&&x.computeBoundingSphere(),n.copy(x.boundingSphere),n.applyMatrix4(_),!1!==f.ray.intersectsSphere(n)&&(e.getInverse(_),t.copy(f.ray).applyMatrix4(e),null===x.boundingBox||!1!==t.intersectsBox(x.boundingBox))))if(x.isBufferGeometry){var S,C,E,k,P,M,A,T,R,I=x.index,O=x.attributes.position,L=x.attributes.uv,D=x.groups,F=x.drawRange;if(null!==I)if(Array.isArray(w))for(k=0,M=D.length;k<M;k++)for(R=w[(T=D[k]).materialIndex],P=Math.max(T.start,F.start),A=Math.min(T.start+T.count,F.start+F.count);P<A;P+=3)S=I.getX(P),C=I.getX(P+1),E=I.getX(P+2),(y=v(b,R,f,t,O,L,S,C,E))&&(y.faceIndex=Math.floor(P/3),h.push(y));else for(k=Math.max(0,F.start),M=Math.min(I.count,F.start+F.count);k<M;k+=3)S=I.getX(k),C=I.getX(k+1),E=I.getX(k+2),(y=v(b,w,f,t,O,L,S,C,E))&&(y.faceIndex=Math.floor(k/3),h.push(y));else if(void 0!==O)if(Array.isArray(w))for(k=0,M=D.length;k<M;k++)for(R=w[(T=D[k]).materialIndex],P=Math.max(T.start,F.start),A=Math.min(T.start+T.count,F.start+F.count);P<A;P+=3)(y=v(b,R,f,t,O,L,S=P,C=P+1,E=P+2))&&(y.faceIndex=Math.floor(P/3),h.push(y));else for(k=Math.max(0,F.start),M=Math.min(O.count,F.start+F.count);k<M;k+=3)(y=v(b,w,f,t,O,L,S=k,C=k+1,E=k+2))&&(y.faceIndex=Math.floor(k/3),h.push(y))}else if(x.isGeometry){var N,B,z,j,H=Array.isArray(w),U=x.vertices,V=x.faces,G=x.faceVertexUvs[0];G.length>0&&(j=G);for(var W=0,$=V.length;W<$;W++){var q=V[W],X=H?w[q.materialIndex]:w;if(void 0!==X){if(N=U[q.a],B=U[q.b],z=U[q.c],!0===X.morphTargets){var K=x.morphTargets,Y=b.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var Z=0,Q=K.length;Z<Q;Z++){var J=Y[Z];if(0!==J){var ee=K[Z].vertices;r.addScaledVector(a.subVectors(ee[q.a],N),J),i.addScaledVector(s.subVectors(ee[q.b],B),J),o.addScaledVector(l.subVectors(ee[q.c],z),J)}}r.add(N),i.add(B),o.add(z),N=r,B=i,z=o}if(y=g(b,X,f,t,N,B,z,p)){if(j&&j[W]){var te=j[W];u.copy(te[0]),c.copy(te[1]),d.copy(te[2]),y.uv=m(p,N,B,z,u,c,d)}y.face=q,y.faceIndex=W,h.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),tt.prototype=Object.create($.prototype),tt.prototype.constructor=tt,tt.prototype.isCubeTexture=!0,Object.defineProperty(tt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var nt=new $,rt=new tt;function it(){this.seq=[],this.map={}}var ot=[],at=[],st=new Float32Array(16),lt=new Float32Array(9),ut=new Float32Array(4);function ct(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=ot[i];if(void 0===o&&(o=new Float32Array(i),ot[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function dt(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ft(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function pt(e,t){var n=at[t];void 0===n&&(n=new Int32Array(t),at[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function ht(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function mt(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function gt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(dt(n,t))return;e.uniform2fv(this.addr,t),ft(n,t)}}function vt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(dt(n,t))return;e.uniform3fv(this.addr,t),ft(n,t)}}function yt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(dt(n,t))return;e.uniform4fv(this.addr,t),ft(n,t)}}function bt(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(dt(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ft(n,t)}else{if(dt(n,r))return;ut.set(r),e.uniformMatrix2fv(this.addr,!1,ut),ft(n,r)}}function xt(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(dt(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ft(n,t)}else{if(dt(n,r))return;lt.set(r),e.uniformMatrix3fv(this.addr,!1,lt),ft(n,r)}}function wt(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(dt(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ft(n,t)}else{if(dt(n,r))return;st.set(r),e.uniformMatrix4fv(this.addr,!1,st),ft(n,r)}}function _t(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||nt,i)}function St(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||rt,i)}function Ct(e,t){var n=this.cache;dt(n,t)||(e.uniform2iv(this.addr,t),ft(n,t))}function Et(e,t){var n=this.cache;dt(n,t)||(e.uniform3iv(this.addr,t),ft(n,t))}function kt(e,t){var n=this.cache;dt(n,t)||(e.uniform4iv(this.addr,t),ft(n,t))}function Pt(e,t){var n=this.cache;dt(n,t)||(e.uniform1fv(this.addr,t),ft(n,t))}function Mt(e,t){var n=this.cache;dt(n,t)||(e.uniform1iv(this.addr,t),ft(n,t))}function At(e,t){var n=this.cache,r=ct(t,this.size,2);dt(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function Tt(e,t){var n=this.cache,r=ct(t,this.size,3);dt(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function Rt(e,t){var n=this.cache,r=ct(t,this.size,4);dt(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function It(e,t){var n=this.cache,r=ct(t,this.size,4);dt(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function Ot(e,t){var n=this.cache,r=ct(t,this.size,9);dt(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function Lt(e,t){var n=this.cache,r=ct(t,this.size,16);dt(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function Dt(e,t,n){var r=this.cache,i=t.length,o=pt(n,i);!1===dt(r,o)&&(e.uniform1iv(this.addr,o),ft(r,o));for(var a=0;a!==i;++a)n.setTexture2D(t[a]||nt,o[a])}function Ft(e,t,n){var r=this.cache,i=t.length,o=pt(n,i);!1===dt(r,o)&&(e.uniform1iv(this.addr,o),ft(r,o));for(var a=0;a!==i;++a)n.setTextureCube(t[a]||rt,o[a])}function Nt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ht;case 35664:return gt;case 35665:return vt;case 35666:return yt;case 35674:return bt;case 35675:return xt;case 35676:return wt;case 35678:case 36198:return _t;case 35680:return St;case 5124:case 35670:return mt;case 35667:case 35671:return Ct;case 35668:case 35672:return Et;case 35669:case 35673:return kt}}(t.type)}function Bt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Pt;case 35664:return At;case 35665:return Tt;case 35666:return Rt;case 35674:return It;case 35675:return Ot;case 35676:return Lt;case 35678:return Dt;case 35680:return Ft;case 5124:case 35670:return Mt;case 35667:case 35671:return Ct;case 35668:case 35672:return Et;case 35669:case 35673:return kt}}(t.type)}function zt(e){this.id=e,it.call(this)}Bt.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ft(t,e)},zt.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var jt=/([\w\d_]+)(\])?(\[|\.)?/g;function Ht(e,t){e.seq.push(t),e.map[t.id]=t}function Ut(e,t,n){var r=e.name,i=r.length;for(jt.lastIndex=0;;){var o=jt.exec(r),a=jt.lastIndex,s=o[1],l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){Ht(n,void 0===u?new Nt(s,e,t):new Bt(s,e,t));break}var c=n.map[s];void 0===c&&Ht(n,c=new zt(s)),n=c}}function Vt(e,t,n){it.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);Ut(o,e.getUniformLocation(t,o.name),this)}}function Gt(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}Vt.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},Vt.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Vt.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},Vt.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Wt=0;function $t(e){switch(e){case N:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function qt(e,t){var n=$t(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Xt(e,t){var n=$t(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Kt(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yt(e){return""!==e}function Zt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Qt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Jt(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var n=te[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Jt(n)}))}function en(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}))}function tn(e,t,n,r,i,o,a){var s=e.context,l=r.defines,u=i.vertexShader,c=i.fragmentShader,d="SHADOWMAP_TYPE_BASIC";1===o.shadowMapType?d="SHADOWMAP_TYPE_PCF":2===o.shadowMapType&&(d="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",h="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case 301:case 302:f="ENVMAP_TYPE_CUBE";break;case 306:case 307:f="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:f="ENVMAP_TYPE_EQUIREC";break;case 305:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case 302:case 304:p="ENVMAP_MODE_REFRACTION"}switch(r.combine){case 0:h="ENVMAP_BLENDING_MULTIPLY";break;case 1:h="ENVMAP_BLENDING_MIX";break;case 2:h="ENVMAP_BLENDING_ADD"}}var m,g,v=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yt).join("\n")}(r.extensions,o,t),b=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(l),x=s.createProgram();if(r.isRawShaderMaterial?((m=[b].filter(Yt).join("\n")).length>0&&(m+="\n"),(g=[y,b].filter(Yt).join("\n")).length>0&&(g+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Yt).join("\n"),g=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+p:"",o.envMap?"#define "+h:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?te.tonemapping_pars_fragment:"",0!==o.toneMapping?Kt("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?te.encodings_pars_fragment:"",o.mapEncoding?qt("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?qt("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?qt("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?Xt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Yt).join("\n")),u=Qt(u=Zt(u=Jt(u),o),o),c=Qt(c=Zt(c=Jt(c),o),o),u=en(u),c=en(c),a.isWebGL2&&!r.isRawShaderMaterial){var w=!1,_=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==u.match(_)&&null!==c.match(_)&&(w=!0,u=u.replace(_,""),c=c.replace(_,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var S=m+u,C=g+c,E=Gt(s,s.VERTEX_SHADER,S),k=Gt(s,s.FRAGMENT_SHADER,C);s.attachShader(x,E),s.attachShader(x,k),void 0!==r.index0AttributeName?s.bindAttribLocation(x,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);var P,M,A=s.getProgramInfoLog(x).trim(),T=s.getShaderInfoLog(E).trim(),R=s.getShaderInfoLog(k).trim(),I=!0,O=!0;return!1===s.getProgramParameter(x,s.LINK_STATUS)?(I=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(x,s.VALIDATE_STATUS),"gl.getProgramInfoLog",A,T,R)):""!==A?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):""!==T&&""!==R||(O=!1),O&&(this.diagnostics={runnable:I,material:r,programLog:A,vertexShader:{log:T,prefix:m},fragmentShader:{log:R,prefix:g}}),s.deleteShader(E),s.deleteShader(k),this.getUniforms=function(){return void 0===P&&(P=new Vt(s,x,e)),P},this.getAttributes=function(){return void 0===M&&(M=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(s,x)),M},this.destroy=function(){s.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=Wt++,this.code=n,this.usedTimes=1,this.program=x,this.vertexShader=E,this.fragmentShader=k,this}function nn(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=N,n===N&&t&&(n=3007),n}this.getParameters=function(t,r,o,s,l,u,c){var d=i[t.type],f=c.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(c):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var h=e.getRenderTarget();return{shaderID:d,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:a(h?h.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(i,o,a,s){for(var l,u=0,c=r.length;u<c;u++){var d=r[u];if(d.code===s){++(l=d).usedTimes;break}}return void 0===l&&(l=new tn(e,t,s,i,o,a,n),r.push(l)),l},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function rn(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function on(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function an(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function sn(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,l){var u=e[t];void 0===u?(u={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:l},e[t]=u):(u.id=i.id,u.object=i,u.geometry=o,u.material=a,u.program=a.program,u.renderOrder=i.renderOrder,u.z=s,u.group=l),(!0===a.transparent?r:n).push(u),t++},sort:function(){n.length>1&&n.sort(on),r.length>1&&r.sort(an)}}}function ln(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new sn,e[r]=i),i},dispose:function(){e={}}}}function un(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new U,color:new ie,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new z};break;case"SpotLight":n={position:new U,direction:new U,color:new ie,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new z};break;case"PointLight":n={position:new U,color:new ie,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new z,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new U,skyColor:new ie,groundColor:new ie};break;case"RectAreaLight":n={color:new ie,position:new U,halfWidth:new U,halfHeight:new U}}return e[t.id]=n,n}}}var cn,dn=0;function fn(){var e=new un,t={id:dn++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new U,r=new j,i=new j;return{setup:function(o,a,s){for(var l=0,u=0,c=0,d=0,f=0,p=0,h=0,m=0,g=s.matrixWorldInverse,v=0,y=o.length;v<y;v++){var b=o[v],x=b.color,w=b.intensity,_=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)l+=x.r*w,u+=x.g*w,c+=x.b*w;else if(b.isDirectionalLight){if((E=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),E.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(g),E.shadow=b.castShadow,b.castShadow){var C=b.shadow;E.shadowBias=C.bias,E.shadowRadius=C.radius,E.shadowMapSize=C.mapSize}t.directionalShadowMap[d]=S,t.directionalShadowMatrix[d]=b.shadow.matrix,t.directional[d]=E,d++}else if(b.isSpotLight){if((E=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),E.color.copy(x).multiplyScalar(w),E.distance=_,E.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(g),E.coneCos=Math.cos(b.angle),E.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),E.decay=0===b.distance?0:b.decay,E.shadow=b.castShadow,b.castShadow){C=b.shadow;E.shadowBias=C.bias,E.shadowRadius=C.radius,E.shadowMapSize=C.mapSize}t.spotShadowMap[p]=S,t.spotShadowMatrix[p]=b.shadow.matrix,t.spot[p]=E,p++}else if(b.isRectAreaLight){(E=e.get(b)).color.copy(x).multiplyScalar(w),E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),i.identity(),r.copy(b.matrixWorld),r.premultiply(g),i.extractRotation(r),E.halfWidth.set(.5*b.width,0,0),E.halfHeight.set(0,.5*b.height,0),E.halfWidth.applyMatrix4(i),E.halfHeight.applyMatrix4(i),t.rectArea[h]=E,h++}else if(b.isPointLight){if((E=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),E.color.copy(b.color).multiplyScalar(b.intensity),E.distance=b.distance,E.decay=0===b.distance?0:b.decay,E.shadow=b.castShadow,b.castShadow){C=b.shadow;E.shadowBias=C.bias,E.shadowRadius=C.radius,E.shadowMapSize=C.mapSize,E.shadowCameraNear=C.camera.near,E.shadowCameraFar=C.camera.far}t.pointShadowMap[f]=S,t.pointShadowMatrix[f]=b.shadow.matrix,t.point[f]=E,f++}else if(b.isHemisphereLight){var E;(E=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),E.direction.transformDirection(g),E.direction.normalize(),E.skyColor.copy(b.color).multiplyScalar(w),E.groundColor.copy(b.groundColor).multiplyScalar(w),t.hemi[m]=E,m++}}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c,t.directional.length=d,t.spot.length=p,t.rectArea.length=h,t.point.length=f,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=d,t.hash.pointLength=f,t.hash.spotLength=p,t.hash.rectAreaLength=h,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}}function pn(){var e=new fn,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function hn(){var e={};return{get:function(t,n){var r;return void 0===e[t.id]?(r=new pn,e[t.id]={},e[t.id][n.id]=r):void 0===e[t.id][n.id]?(r=new pn,e[t.id][n.id]=r):r=e[t.id][n.id],r},dispose:function(){e={}}}}function mn(e){Be.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function gn(e){Be.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new U,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function vn(e,t,n){for(var r=new ee,i=new j,o=new z,a=new z(n,n),s=new U,l=new U,u=new Array(4),c=new Array(4),d={},f={0:1,1:0,2:2},p=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],h=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)],m=[new q,new q,new q,new q,new q,new q],v=0;4!==v;++v){var y=0!==(1&v),b=0!==(2&v),x=new mn({depthPacking:3201,morphTargets:y,skinning:b});u[v]=x;var w=new gn({morphTargets:y,skinning:b});c[v]=w}var _=this;function S(t,n,r,i,o,a){var s=t.geometry,l=null,p=u,h=t.customDepthMaterial;if(r&&(p=c,h=t.customDistanceMaterial),h)l=h;else{var m=!1;n.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var g=0;m&&(g|=1),t.isSkinnedMesh&&n.skinning&&(g|=2),l=p[g]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var v=l.uuid,y=n.uuid,b=d[v];void 0===b&&(b={},d[v]=b);var x=b[y];void 0===x&&(x=l.clone(),b[y]=x),l=x}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:f[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,r&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(i),l.nearDistance=o,l.farDistance=a),l}function C(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),u=n.material;if(Array.isArray(u))for(var c=s.groups,d=0,f=c.length;d<f;d++){var p=c[d],h=u[p.materialIndex];if(h&&h.visible){var m=S(n,h,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,p)}}else if(u.visible){m=S(n,u,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,null)}}for(var g=n.children,v=0,y=g.length;v<y;v++)C(g[v],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,u){if(!1!==_.enabled&&(!1!==_.autoUpdate||!1!==_.needsUpdate)&&0!==t.length){var c,d=e.context,f=e.state;f.disable(d.BLEND),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var v=0,y=t.length;v<y;v++){var b=t[v],x=b.shadow,w=b&&b.isPointLight;if(void 0!==x){var S=x.camera;if(o.copy(x.mapSize),o.min(a),w){var E=o.x,k=o.y;m[0].set(2*E,k,E,k),m[1].set(0,k,E,k),m[2].set(3*E,k,E,k),m[3].set(E,k,E,k),m[4].set(3*E,0,E,k),m[5].set(E,0,E,k),o.x*=4,o.y*=2}if(null===x.map){var P={minFilter:g,magFilter:g,format:M};x.map=new X(o.x,o.y,P),x.map.texture.name=b.name+".shadowMap",S.updateProjectionMatrix()}x.isSpotLightShadow&&x.update(b);var A=x.map,T=x.matrix;l.setFromMatrixPosition(b.matrixWorld),S.position.copy(l),w?(c=6,T.makeTranslation(-l.x,-l.y,-l.z)):(c=1,s.setFromMatrixPosition(b.target.matrixWorld),S.lookAt(s),S.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(S.projectionMatrix),T.multiply(S.matrixWorldInverse)),e.setRenderTarget(A),e.clear();for(var R=0;R<c;R++){if(w){s.copy(S.position),s.add(p[R]),S.up.copy(h[R]),S.lookAt(s),S.updateMatrixWorld();var I=m[R];f.viewport(I)}i.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),r.setFromMatrix(i),C(n,u,S,w)}}else console.warn("THREE.WebGLShadowMap:",b,"has no shadow.")}_.needsUpdate=!1}}}function yn(e,t,n,r){var i=new function(){var t=!1,n=new q,r=null,i=new q(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?B(e.DEPTH_TEST):z(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(t){t?B(e.STENCIL_TEST):z(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}},s=e.getParameter(e.MAX_VERTEX_ATTRIBS),l=new Uint8Array(s),u=new Uint8Array(s),c=new Uint8Array(s),d={},f=null,p=null,h=null,m=null,g=null,v=null,y=null,b=null,x=null,w=!1,_=null,S=null,C=null,E=null,k=null,P=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),M=!1,A=0,T=e.getParameter(e.VERSION);-1!==T.indexOf("WebGL")?(A=parseFloat(/^WebGL\ ([0-9])/.exec(T)[1]),M=A>=1):-1!==T.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(T)[1]),M=A>=2);var R=null,I={},O=new q,L=new q;function D(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var F={};function N(n,i){(l[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),c[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),c[n]=i)}function B(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function z(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}function j(t,r,i,o,a,s,l,u){if(0!==t?B(e.BLEND):z(e.BLEND),5!==t){if(t!==h||u!==w)switch(t){case 2:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case 3:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case 4:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}m=null,g=null,v=null,y=null,b=null,x=null}else a=a||r,s=s||i,l=l||o,r===m&&a===y||(e.blendEquationSeparate(n.convert(r),n.convert(a)),m=r,y=a),i===g&&o===v&&s===b&&l===x||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(l)),g=i,v=o,b=s,x=l);h=t,w=u}function H(t){_!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),_=t)}function U(t){0!==t?(B(e.CULL_FACE),t!==S&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):z(e.CULL_FACE),S=t}function V(t,n,r){t?(B(e.POLYGON_OFFSET_FILL),E===n&&k===r||(e.polygonOffset(n,r),E=n,k=r)):z(e.POLYGON_OFFSET_FILL)}function G(t){void 0===t&&(t=e.TEXTURE0+P-1),R!==t&&(e.activeTexture(t),R=t)}return F[e.TEXTURE_2D]=D(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=D(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),B(e.DEPTH_TEST),o.setFunc(3),H(!1),U(1),B(e.CULL_FACE),B(e.BLEND),j(1),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){N(e,0)},enableAttributeAndDivisor:N,disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==l[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:B,disable:z,getCompressedTextureFormats:function(){if(null===f&&(f=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)f.push(n[r]);return f},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:j,setMaterial:function(t,n){2===t.side?z(e.CULL_FACE):B(e.CULL_FACE);var r=1===t.side;n&&(r=!r),H(r),1===t.blending&&!1===t.transparent?j(0):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite),V(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:H,setCullFace:U,setLineWidth:function(t){t!==C&&(M&&e.lineWidth(t),C=t)},setPolygonOffset:V,setScissorTest:function(t){t?B(e.SCISSOR_TEST):z(e.SCISSOR_TEST)},activeTexture:G,bindTexture:function(t,n){null===R&&G();var r=I[R];void 0===r&&(r={type:void 0,texture:void 0},I[R]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||F[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);d={},f=null,R=null,I={},p=null,h=null,_=null,S=null,i.reset(),o.reset(),a.reset()}}}function bn(e,t,n,r,i,o,a){var s,l={};function u(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height),r}return e}function c(e){return B.isPowerOfTwo(e.width)&&B.isPowerOfTwo(e.height)}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==g&&e.minFilter!==b}function f(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function p(t,n){if(!i.isWebGL2)return t;if(t===e.RGB){if(n===e.FLOAT)return e.RGB32F;if(n===e.HALF_FLOAT)return e.RGB16F;if(n===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(n===e.FLOAT)return e.RGBA32F;if(n===e.HALF_FLOAT)return e.RGBA16F;if(n===e.UNSIGNED_BYTE)return e.RGBA8}return t}function m(t){return t===g||t===v||t===y?e.NEAREST:e.LINEAR}function x(t){var n=t.target;n.removeEventListener("dispose",x),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete l[n.id],a.memory.textures--}function w(t){var n=t.target;n.removeEventListener("dispose",w),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}(n),a.memory.textures--}function R(t,m){var v=r.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;l[t]!==n&&(l[t]=n,e.update())}(t),t.version>0&&v.__version!==t.version){var y=t.image;if(void 0===y)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==y.complete)return void function(t,r,l){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",x),t.__webglTexture=e.createTexture(),a.memory.textures++);n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var m=u(r.image,i.maxTextureSize);(function(e){return!i.isWebGL2&&(e.wrapS!==h||e.wrapT!==h||e.minFilter!==g&&e.minFilter!==b)})(r)&&!1===c(m)&&(m=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=B.floorPowerOfTwo(e.width),s.height=B.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(m));var v=c(m),y=o.convert(r.format),w=o.convert(r.type),E=p(y,w);I(e.TEXTURE_2D,r,v);var R,O=r.mipmaps;if(r.isDepthTexture){if(E=e.DEPTH_COMPONENT,r.type===C){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");E=e.DEPTH_COMPONENT32F}else i.isWebGL2&&(E=e.DEPTH_COMPONENT16);r.format===A&&E===e.DEPTH_COMPONENT&&r.type!==_&&r.type!==S&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=_,w=o.convert(r.type)),r.format===T&&(E=e.DEPTH_STENCIL,r.type!==k&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=k,w=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,E,m.width,m.height,0,y,w,null)}else if(r.isDataTexture)if(O.length>0&&v){for(var L=0,D=O.length;L<D;L++)R=O[L],n.texImage2D(e.TEXTURE_2D,L,E,R.width,R.height,0,y,w,R.data);r.generateMipmaps=!1,t.__maxMipLevel=O.length-1}else n.texImage2D(e.TEXTURE_2D,0,E,m.width,m.height,0,y,w,m.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(L=0,D=O.length;L<D;L++)R=O[L],r.format!==M&&r.format!==P?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(e.TEXTURE_2D,L,E,R.width,R.height,0,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,L,E,R.width,R.height,0,y,w,R.data);t.__maxMipLevel=O.length-1}else if(O.length>0&&v){for(L=0,D=O.length;L<D;L++)R=O[L],n.texImage2D(e.TEXTURE_2D,L,E,y,w,R);r.generateMipmaps=!1,t.__maxMipLevel=O.length-1}else n.texImage2D(e.TEXTURE_2D,0,E,y,w,m),t.__maxMipLevel=0;d(r,v)&&f(e.TEXTURE_2D,r,m.width,m.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(v,t,m);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(e.TEXTURE0+m),n.bindTexture(e.TEXTURE_2D,v.__webglTexture)}function I(n,a,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===h&&a.wrapT===h||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,m(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,m(a.minFilter)),a.minFilter!==g&&a.minFilter!==b&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===C&&null===t.get("OES_texture_float_linear"))return;if(a.type===E&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function O(t,i,a,s){var l=o.convert(i.texture.format),u=o.convert(i.texture.type),c=p(l,u);n.texImage2D(s,0,c,i.width,i.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function L(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function D(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),R(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===A)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==T)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),L(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),L(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=R,this.setTextureCube=function(t,s){var l=r.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",x),l.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var h=t&&t.isCompressedTexture,m=t.image[0]&&t.image[0].isDataTexture,g=[],v=0;v<6;v++)g[v]=h||m?m?t.image[v].image:t.image[v]:u(t.image[v],i.maxCubemapSize);var y=g[0],b=c(y),w=o.convert(t.format),_=o.convert(t.type),S=p(w,_);I(e.TEXTURE_CUBE_MAP,t,b);for(v=0;v<6;v++)if(h)for(var C,E=g[v].mipmaps,k=0,A=E.length;k<A;k++)C=E[k],t.format!==M&&t.format!==P?n.getCompressedTextureFormats().indexOf(w)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,k,S,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,k,S,C.width,C.height,0,w,_,C.data);else m?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,S,g[v].width,g[v].height,0,w,_,g[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,S,w,_,g[v]);l.__maxMipLevel=h?E.length-1:0,d(t,b)&&f(e.TEXTURE_CUBE_MAP,t,y.width,y.height),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",w),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,l=c(t);if(s){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),I(e.TEXTURE_CUBE_MAP,t.texture,l);for(u=0;u<6;u++)O(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);d(t.texture,l)&&f(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),I(e.TEXTURE_2D,t.texture,l),O(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),d(t.texture,l)&&f(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&D(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(d(i,c(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),f(o,i,t.width,t.height),n.bindTexture(o,null)}}}function xn(e,t,n){return{convert:function(r){var i;if(r===p)return e.REPEAT;if(r===h)return e.CLAMP_TO_EDGE;if(r===m)return e.MIRRORED_REPEAT;if(r===g)return e.NEAREST;if(r===v)return e.NEAREST_MIPMAP_NEAREST;if(r===y)return e.NEAREST_MIPMAP_LINEAR;if(r===b)return e.LINEAR;if(1007===r)return e.LINEAR_MIPMAP_NEAREST;if(r===x)return e.LINEAR_MIPMAP_LINEAR;if(r===w)return e.UNSIGNED_BYTE;if(1017===r)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===r)return e.UNSIGNED_SHORT_5_5_5_1;if(1019===r)return e.UNSIGNED_SHORT_5_6_5;if(1010===r)return e.BYTE;if(1011===r)return e.SHORT;if(r===_)return e.UNSIGNED_SHORT;if(1013===r)return e.INT;if(r===S)return e.UNSIGNED_INT;if(r===C)return e.FLOAT;if(r===E){if(n.isWebGL2)return e.HALF_FLOAT;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(1021===r)return e.ALPHA;if(r===P)return e.RGB;if(r===M)return e.RGBA;if(1024===r)return e.LUMINANCE;if(1025===r)return e.LUMINANCE_ALPHA;if(r===A)return e.DEPTH_COMPONENT;if(r===T)return e.DEPTH_STENCIL;if(100===r)return e.FUNC_ADD;if(101===r)return e.FUNC_SUBTRACT;if(102===r)return e.FUNC_REVERSE_SUBTRACT;if(200===r)return e.ZERO;if(201===r)return e.ONE;if(202===r)return e.SRC_COLOR;if(203===r)return e.ONE_MINUS_SRC_COLOR;if(204===r)return e.SRC_ALPHA;if(205===r)return e.ONE_MINUS_SRC_ALPHA;if(206===r)return e.DST_ALPHA;if(207===r)return e.ONE_MINUS_DST_ALPHA;if(208===r)return e.DST_COLOR;if(209===r)return e.ONE_MINUS_DST_COLOR;if(210===r)return e.SRC_ALPHA_SATURATE;if((33776===r||33777===r||33778===r||33779===r)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===r)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===r||35841===r||35842===r||35843===r)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===r)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return r;if(103===r||104===r){if(n.isWebGL2){if(103===r)return e.MIN;if(104===r)return e.MAX}if(null!==(i=t.get("EXT_blend_minmax"))){if(103===r)return i.MIN_EXT;if(104===r)return i.MAX_EXT}}if(r===k){if(n.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function wn(){fe.call(this),this.type="Group"}function _n(e,t,n,r){pe.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Sn(e){_n.call(this),this.cameras=e||[]}function Cn(e){var t=this,n=null,r=null,i=null,o=[],a=new j,s=new j;"undefined"!==typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",v,!1));var l=new j,u=new H,c=new U,d=new _n;d.bounds=new q(0,0,.5,1),d.layers.enable(1);var f=new _n;f.bounds=new q(.5,0,.5,1),f.layers.enable(2);var p,h,m=new Sn([d,f]);function g(){return null!==n&&!0===n.isPresenting}function v(){if(g()){var r=n.getEyeParameters("left"),i=r.renderWidth,o=r.renderHeight;h=e.getPixelRatio(),p=e.getSize(),e.setDrawingBufferSize(2*i,o,1),x.start()}else t.enabled&&(e.setDrawingBufferSize(p.width,p.height,h),x.stop())}m.layers.enable(1),m.layers.enable(2);var y=[];function b(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}this.enabled=!1,this.userHeight=1.6,this.getController=function(e){var t=o[e];return void 0===t&&((t=new wn).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),x.setContext(e)},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){if(null===n)return e.position.set(0,t.userHeight,0),e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r);var p=n.stageParameters;p?a.fromArray(p.sittingToStandingTransform):a.makeTranslation(0,t.userHeight,0);var h=r.pose,g=null!==i?i:e;if(g.matrix.copy(a),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==h.orientation&&(u.fromArray(h.orientation),g.quaternion.multiply(u)),null!==h.position&&(u.setFromRotationMatrix(a),c.fromArray(h.position),c.applyQuaternion(u),g.position.add(c)),g.updateMatrixWorld(),!1===n.isPresenting)return e;d.near=e.near,f.near=e.near,d.far=e.far,f.far=e.far,m.matrixWorld.copy(e.matrixWorld),m.matrixWorldInverse.copy(e.matrixWorldInverse),d.matrixWorldInverse.fromArray(r.leftViewMatrix),f.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(a),d.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s);var v=g.parent;null!==v&&(l.getInverse(v.matrixWorld),d.matrixWorldInverse.multiply(l),f.matrixWorldInverse.multiply(l)),d.matrixWorld.getInverse(d.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),d.projectionMatrix.fromArray(r.leftProjectionMatrix),f.projectionMatrix.fromArray(r.rightProjectionMatrix),m.projectionMatrix.copy(d.projectionMatrix);var x=n.getLayers();if(x.length){var w=x[0];null!==w.leftBounds&&4===w.leftBounds.length&&d.bounds.fromArray(w.leftBounds),null!==w.rightBounds&&4===w.rightBounds.length&&f.bounds.fromArray(w.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],n=b(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;y[e]!==n.buttons[i].pressed&&(y[e]=n.buttons[i].pressed,!0===y[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),m},this.getStandingMatrix=function(){return a},this.isPresenting=g;var x=new se;this.setAnimationLoop=function(e){x.setAnimationLoop(e)},this.submitFrame=function(){g()&&n.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",v)}}function En(e){var t=e.context,n=null,r=null,i=null,o=null,a=[],s=[];function l(){return null!==r&&null!==i}var u=new _n;u.layers.enable(1),u.viewport=new q;var c=new _n;c.layers.enable(2),c.viewport=new q;var d=new Sn([u,c]);function f(e){var t=a[s.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function p(){e.setFramebuffer(null),g.stop()}function h(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}d.layers.enable(1),d.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new wn).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setSession=function(n,o){null!==(r=n)&&(r.addEventListener("select",f),r.addEventListener("selectstart",f),r.addEventListener("selectend",f),r.addEventListener("end",p),r.baseLayer=new XRWebGLLayer(r,t),r.requestFrameOfReference(o.frameOfReferenceType).then((function(t){i=t,e.setFramebuffer(r.baseLayer.framebuffer),g.setContext(r),g.start()})),s=r.getInputSources(),r.addEventListener("inputsourceschange",(function(){s=r.getInputSources(),console.log(s)})))},this.getCamera=function(e){if(l()){var t=e.parent,n=d.cameras;h(d,t);for(var r=0;r<n.length;r++)h(n[r],t);e.matrixWorld.copy(d.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return d}return e},this.isPresenting=l;var m=null;var g=new se;g.setAnimationLoop((function(e,t){if(null!==(o=t.getDevicePose(i)))for(var n=r.baseLayer,l=t.views,u=0;u<l.length;u++){var c=l[u],f=n.getViewport(c),p=o.getViewMatrix(c),h=d.cameras[u];h.matrix.fromArray(p).getInverse(h.matrix),h.projectionMatrix.fromArray(c.projectionMatrix),h.viewport.set(f.x,f.y,f.width,f.height),0===u&&(d.matrix.copy(h.matrix),d.projectionMatrix.copy(h.projectionMatrix))}for(u=0;u<a.length;u++){var g=a[u],v=s[u];if(v){var y=t.getInputPose(v,i);if(null!==y){g.matrix.elements=y.pointerMatrix,g.matrix.decompose(g.position,g.rotation,g.scale),g.visible=!0;continue}}g.visible=!1}m&&m(e)})),this.setAnimationLoop=function(e){m=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function kn(e){console.log("THREE.WebGLRenderer","95");var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=null,d=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var f,p,h,m,g,v,y,b,x,_,S,k,P,A,T,R,I,O,L=this,D=!1,F=null,N=null,z=null,H=-1,V={geometry:null,program:null,wireframe:!1},G=null,W=null,$=new q,X=new q,K=null,Z=0,Q=t.width,J=t.height,te=1,re=new q(0,0,Q,J),ie=new q(0,0,Q,J),ue=!1,ce=new ee,de=new qe,fe=!1,pe=!1,he=new j,me=new U;function ge(){return null===N?te:1}try{var ve={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u};if(t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",_e,!1),null===(f=n||t.getContext("webgl",ve)||t.getContext("experimental-webgl",ve)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===f.getShaderPrecisionFormat&&(f.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){console.error("THREE.WebGLRenderer: "+De.message)}function ye(){p=new Xe(f),(h=new $e(f,p,e)).isWebGL2||(p.get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays")),p.get("OES_texture_float_linear"),O=new xn(f,p,h),(m=new yn(f,p,O,h)).scissor(X.copy(ie).multiplyScalar(te)),m.viewport($.copy(re).multiplyScalar(te)),g=new Ze(f),v=new rn,y=new bn(f,p,m,v,h,O,g),b=new le(f),x=new Ke(f,b,g),_=new et(x,g),T=new Je(f),S=new nn(L,p,h),k=new ln,P=new hn,A=new Ge(L,m,_,s),R=new We(f,p,g,h),I=new Ye(f,p,g,h),g.programs=S.programs,L.context=f,L.capabilities=h,L.extensions=p,L.properties=v,L.renderLists=k,L.state=m,L.info=g}ye();var be="xr"in navigator?new En(L):new Cn(L);this.vr=be;var xe=new vn(L,_,h.maxTextureSize);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function _e(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1,ye()}function Se(e){var t=e.target;t.removeEventListener("dispose",Se),function(e){Ce(e),v.remove(e)}(t)}function Ce(e){var t=v.get(e).program;e.program=void 0,void 0!==t&&S.releaseProgram(t)}this.shadowMap=xe,this.getContext=function(){return f},this.getContextAttributes=function(){return f.getContextAttributes()},this.forceContextLoss=function(){var e=p.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=p.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(e){void 0!==e&&(te=e,this.setSize(Q,J,!1))},this.getSize=function(){return{width:Q,height:J}},this.setSize=function(e,n,r){be.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Q=e,J=n,t.width=e*te,t.height=n*te,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:Q*te,height:J*te}},this.setDrawingBufferSize=function(e,n,r){Q=e,J=n,te=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return $},this.setViewport=function(e,t,n,r){re.set(e,J-t-r,n,r),m.viewport($.copy(re).multiplyScalar(te))},this.setScissor=function(e,t,n,r){ie.set(e,J-t-r,n,r),m.scissor(X.copy(ie).multiplyScalar(te))},this.setScissorTest=function(e){m.setScissorTest(ue=e)},this.getClearColor=function(){return A.getClearColor()},this.setClearColor=function(){A.setClearColor.apply(A,arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha.apply(A,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=f.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=f.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=f.STENCIL_BUFFER_BIT),f.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",_e,!1),k.dispose(),P.dispose(),v.dispose(),_.dispose(),be.dispose(),ke.stop()},this.renderBufferImmediate=function(e,t){m.initAttributes();var n=v.get(e);e.hasPositions&&!n.position&&(n.position=f.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=f.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=f.createBuffer()),e.hasColors&&!n.color&&(n.color=f.createBuffer());var r=t.getAttributes();e.hasPositions&&(f.bindBuffer(f.ARRAY_BUFFER,n.position),f.bufferData(f.ARRAY_BUFFER,e.positionArray,f.DYNAMIC_DRAW),m.enableAttribute(r.position),f.vertexAttribPointer(r.position,3,f.FLOAT,!1,0,0)),e.hasNormals&&(f.bindBuffer(f.ARRAY_BUFFER,n.normal),f.bufferData(f.ARRAY_BUFFER,e.normalArray,f.DYNAMIC_DRAW),m.enableAttribute(r.normal),f.vertexAttribPointer(r.normal,3,f.FLOAT,!1,0,0)),e.hasUvs&&(f.bindBuffer(f.ARRAY_BUFFER,n.uv),f.bufferData(f.ARRAY_BUFFER,e.uvArray,f.DYNAMIC_DRAW),m.enableAttribute(r.uv),f.vertexAttribPointer(r.uv,2,f.FLOAT,!1,0,0)),e.hasColors&&(f.bindBuffer(f.ARRAY_BUFFER,n.color),f.bufferData(f.ARRAY_BUFFER,e.colorArray,f.DYNAMIC_DRAW),m.enableAttribute(r.color),f.vertexAttribPointer(r.color,3,f.FLOAT,!1,0,0)),m.disableUnusedAttributes(),f.drawArrays(f.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;m.setMaterial(r,a);var s=Re(e,t,r,i),l=!1;V.geometry===n.id&&V.program===s.id&&V.wireframe===(!0===r.wireframe)||(V.geometry=n.id,V.program=s.id,V.wireframe=!0===r.wireframe,l=!0),i.morphTargetInfluences&&(T.update(i,n,r,s),l=!0);var u,c=n.index,d=n.attributes.position,g=1;!0===r.wireframe&&(c=x.getWireframeAttribute(n),g=2);var v=R;null!==c&&(u=b.get(c),(v=I).setIndex(u)),l&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&!h.isWebGL2&&null===p.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var l=r[a];if(void 0!==l){var u=l.normalized,c=l.itemSize,d=b.get(l);if(void 0===d)continue;var g=d.buffer,v=d.type,y=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var x=l.data,w=x.stride,_=l.offset;x&&x.isInstancedInterleavedBuffer?(m.enableAttributeAndDivisor(s,x.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=x.meshPerAttribute*x.count)):m.enableAttribute(s),f.bindBuffer(f.ARRAY_BUFFER,g),f.vertexAttribPointer(s,c,v,u,w*y,_*y)}else l.isInstancedBufferAttribute?(m.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):m.enableAttribute(s),f.bindBuffer(f.ARRAY_BUFFER,g),f.vertexAttribPointer(s,c,v,u,0,0)}else if(void 0!==o){var S=o[a];if(void 0!==S)switch(S.length){case 2:f.vertexAttrib2fv(s,S);break;case 3:f.vertexAttrib3fv(s,S);break;case 4:f.vertexAttrib4fv(s,S);break;default:f.vertexAttrib1fv(s,S)}}}}m.disableUnusedAttributes()}(r,s,n),null!==c&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,u.buffer));var y=1/0;null!==c?y=c.count:void 0!==d&&(y=d.count);var w=n.drawRange.start*g,_=n.drawRange.count*g,S=null!==o?o.start*g:0,C=null!==o?o.count*g:1/0,E=Math.max(w,S),k=Math.min(y,w+_,S+C)-1,P=Math.max(0,k-E+1);if(0!==P){if(i.isMesh)if(!0===r.wireframe)m.setLineWidth(r.wireframeLinewidth*ge()),v.setMode(f.LINES);else switch(i.drawMode){case 0:v.setMode(f.TRIANGLES);break;case 1:v.setMode(f.TRIANGLE_STRIP);break;case 2:v.setMode(f.TRIANGLE_FAN)}else if(i.isLine){var M=r.linewidth;void 0===M&&(M=1),m.setLineWidth(M*ge()),i.isLineSegments?v.setMode(f.LINES):i.isLineLoop?v.setMode(f.LINE_LOOP):v.setMode(f.LINE_STRIP)}else i.isPoints?v.setMode(f.POINTS):i.isSprite&&v.setMode(f.TRIANGLES);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,E,P):v.render(E,P)}},this.compile=function(e,t){(d=P.get(e,t)).init(),e.traverse((function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Te(t.material[n],e.fog,t);else Te(t.material,e.fog,t)}))};var Ee=null;var ke=new se;function Pe(e,t,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ce.intersectsSprite(e)){n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(he);var r=_.update(e),i=e.material;c.push(e,r,i,me.z,null)}}else if(e.isImmediateRenderObject)n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(he),c.push(e,null,e.material,me.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||ce.intersectsObject(e))){n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(he);r=_.update(e),i=e.material;if(Array.isArray(i))for(var o=r.groups,a=0,s=o.length;a<s;a++){var l=o[a],u=i[l.materialIndex];u&&u.visible&&c.push(e,r,u,me.z,l)}else i.visible&&c.push(e,r,i,me.z,null)}var f=e.children;for(a=0,s=f.length;a<s;a++)Pe(f[a],t,n)}}function Me(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,l=a.geometry,u=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){W=n;for(var d=n.cameras,f=0,p=d.length;f<p;f++){var h=d[f];if(s.layers.test(h.layers)){if("viewport"in h)m.viewport($.copy(h.viewport));else{var g=h.bounds,v=g.x*Q,y=g.y*J,b=g.z*Q,x=g.w*J;m.viewport($.set(v,y,b,x).multiplyScalar(te))}Ae(s,t,h,l,u,c)}}}else W=null,Ae(s,t,n,l,u,c)}}function Ae(e,t,n,r,i,o){if(e.onBeforeRender(L,t,n,r,i,o),d=P.get(t,W||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){m.setMaterial(i);var a=Re(n,t.fog,i,e);V.geometry=null,V.program=null,V.wireframe=!1,function(e,t){e.render((function(e){L.renderBufferImmediate(e,t)}))}(e,a)}else L.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(L,t,n,r,i,o),d=P.get(t,W||n)}function Te(e,t,n){var r=v.get(e),i=d.state.lights,o=d.state.shadowsArray,a=r.lightsHash,s=i.state.hash,l=S.getParameters(e,i.state,o,t,de.numPlanes,de.numIntersection,n),u=S.getProgramCode(e,l),c=r.program,f=!0;if(void 0===c)e.addEventListener("dispose",Se);else if(c.code!==u)Ce(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,f=!1;else{if(void 0!==l.shaderID)return;f=!1}if(f){if(l.shaderID){var p=ae[l.shaderID];r.shader={name:e.type,uniforms:ne.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,L),u=S.getProgramCode(e,l),c=S.acquireProgram(e,r.shader,l,u),r.program=c,e.program=c}var h=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<L.maxMorphTargets;m++)h["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(m=0;m<L.maxMorphNormals;m++)h["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var g=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=de.numPlanes,r.numIntersection=de.numIntersection,g.clippingPlanes=de.uniform),r.fog=t,void 0===a&&(r.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(g.ambientLightColor.value=i.state.ambient,g.directionalLights.value=i.state.directional,g.spotLights.value=i.state.spot,g.rectAreaLights.value=i.state.rectArea,g.pointLights.value=i.state.point,g.hemisphereLights.value=i.state.hemi,g.directionalShadowMap.value=i.state.directionalShadowMap,g.directionalShadowMatrix.value=i.state.directionalShadowMatrix,g.spotShadowMap.value=i.state.spotShadowMap,g.spotShadowMatrix.value=i.state.spotShadowMatrix,g.pointShadowMap.value=i.state.pointShadowMap,g.pointShadowMatrix.value=i.state.pointShadowMatrix);var y=r.program.getUniforms(),b=Vt.seqWithValue(y.seq,g);r.uniformsList=b}function Re(e,t,n,r){Z=0;var i=v.get(n),o=d.state.lights,a=i.lightsHash,s=o.state.hash;if(fe&&(pe||e!==G)){var l=e===G&&n.id===H;de.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,l)}!1===n.needsUpdate&&(void 0===i.program||n.fog&&i.fog!==t?n.needsUpdate=!0:(!n.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===de.numPlanes&&i.numIntersection===de.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(Te(n,t,r),n.needsUpdate=!1);var u,c,p=!1,g=!1,y=!1,b=i.program,x=b.getUniforms(),w=i.shader.uniforms;if(m.useProgram(b.program)&&(p=!0,g=!0,y=!0),n.id!==H&&(H=n.id,g=!0),p||e!==G){if(x.setValue(f,"projectionMatrix",e.projectionMatrix),h.logarithmicDepthBuffer&&x.setValue(f,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),G!==(W||e)&&(G=W||e,g=!0,y=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var _=x.map.cameraPosition;void 0!==_&&_.setValue(f,me.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&x.setValue(f,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){x.setOptional(f,r,"bindMatrix"),x.setOptional(f,r,"bindMatrixInverse");var S=r.skeleton;if(S){var E=S.bones;if(h.floatVertexTextures){if(void 0===S.boneTexture){var k=Math.sqrt(4*E.length);k=B.ceilPowerOfTwo(k),k=Math.max(k,4);var P=new Float32Array(k*k*4);P.set(S.boneMatrices);var A=new Y(P,k,k,M,C);A.needsUpdate=!0,S.boneMatrices=P,S.boneTexture=A,S.boneTextureSize=k}x.setValue(f,"boneTexture",S.boneTexture),x.setValue(f,"boneTextureSize",S.boneTextureSize)}else x.setOptional(f,S,"boneMatrices")}}return g&&(x.setValue(f,"toneMappingExposure",L.toneMappingExposure),x.setValue(f,"toneMappingWhitePoint",L.toneMappingWhitePoint),n.lights&&(c=y,(u=w).ambientLightColor.needsUpdate=c,u.directionalLights.needsUpdate=c,u.pointLights.needsUpdate=c,u.spotLights.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(w,t),n.isMeshBasicMaterial?Ie(w,n):n.isMeshLambertMaterial?(Ie(w,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(w,n)):n.isMeshPhongMaterial?(Ie(w,n),n.isMeshToonMaterial?function(e,t){Oe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(w,n):Oe(w,n)):n.isMeshStandardMaterial?(Ie(w,n),n.isMeshPhysicalMaterial?function(e,t){Le(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(w,n):Le(w,n)):n.isMeshDepthMaterial?(Ie(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshDistanceMaterial?(Ie(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(w,n)):n.isMeshNormalMaterial?(Ie(w,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(w,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(w,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*te,e.scale.value=.5*J,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(w,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(w,n):n.isShadowMaterial&&(w.color.value=n.color,w.opacity.value=n.opacity),void 0!==w.ltc_1&&(w.ltc_1.value=oe.LTC_1),void 0!==w.ltc_2&&(w.ltc_2.value=oe.LTC_2),Vt.upload(f,i.uniformsList,w,L)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Vt.upload(f,i.uniformsList,w,L),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&x.setValue(f,"center",r.center),x.setValue(f,"modelViewMatrix",r.modelViewMatrix),x.setValue(f,"normalMatrix",r.normalMatrix),x.setValue(f,"modelMatrix",r.matrixWorld),b}function Ie(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=v.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Oe(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Le(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}ke.setAnimationLoop((function(e){be.isPresenting()||Ee&&Ee(e)})),"undefined"!==typeof window&&ke.setContext(window),this.setAnimationLoop=function(e){Ee=e,be.setAnimationLoop(e),ke.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!D){V.geometry=null,V.program=null,V.wireframe=!1,H=-1,G=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),be.enabled&&(t=be.getCamera(t)),(d=P.get(e,t)).init(),e.onBeforeRender(L,e,t,n),he.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ce.setFromMatrix(he),pe=this.localClippingEnabled,fe=de.init(this.clippingPlanes,pe,t),(c=k.get(e,t)).init(),Pe(e,t,L.sortObjects),!0===L.sortObjects&&c.sort(),fe&&de.beginShadows();var i=d.state.shadowsArray;xe.render(i,e,t),d.setupLights(t),fe&&de.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),A.render(c,e,t,r);var o=c.opaque,a=c.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&Me(o,e,t,s),a.length&&Me(a,e,t,s)}else o.length&&Me(o,e,t),a.length&&Me(a,e,t);n&&y.updateRenderTargetMipmap(n),m.buffers.depth.setTest(!0),m.buffers.depth.setMask(!0),m.buffers.color.setMask(!0),m.setPolygonOffset(!1),e.onAfterRender(L,e,t),be.enabled&&be.submitFrame(),c=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=Z;return e>=h.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+h.maxTextures),Z+=1,e},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),y.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),y.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?y.setTextureCube(t,n):y.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){F=e},this.getRenderTarget=function(){return N},this.setRenderTarget=function(e){N=e,e&&void 0===v.get(e).__webglFramebuffer&&y.setupRenderTarget(e);var t=F,n=!1;if(e){var r=v.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,$.copy(e.viewport),X.copy(e.scissor),K=e.scissorTest}else $.copy(re).multiplyScalar(te),X.copy(ie).multiplyScalar(te),K=ue;if(z!==t&&(f.bindFramebuffer(f.FRAMEBUFFER,t),z=t),m.viewport($),m.scissor(X),m.setScissorTest(K),n){var i=v.get(e.texture);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=v.get(e).__webglFramebuffer;if(a){var s=!1;a!==z&&(f.bindFramebuffer(f.FRAMEBUFFER,a),s=!0);try{var l=e.texture,u=l.format,c=l.type;if(u!==M&&O.convert(u)!==f.getParameter(f.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(c!==w&&O.convert(c)!==f.getParameter(f.IMPLEMENTATION_COLOR_READ_TYPE)&&(c!==C||!(h.isWebGL2||p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float")))&&(c!==E||!(h.isWebGL2?p.get("EXT_color_buffer_float"):p.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&f.readPixels(t,n,r,i,O.convert(u),O.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&f.bindFramebuffer(f.FRAMEBUFFER,z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=O.convert(t.format);this.setTexture2D(t,0),f.copyTexImage2D(f.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=O.convert(n.format),s=O.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?f.texSubImage2D(f.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,t.image.data):f.texSubImage2D(f.TEXTURE_2D,r||0,e.x,e.y,a,s,t.image)}}function Pn(e,t){this.name="",this.color=new ie(e),this.density=void 0!==t?t:25e-5}function Mn(e,t,n){this.name="",this.color=new ie(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function An(){fe.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Tn(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Rn(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function In(e){Be.call(this),this.type="SpriteMaterial",this.color=new ie(16777215),this.map=null,this.rotation=0,this.lights=!1,this.transparent=!0,this.setValues(e)}function On(e){if(fe.call(this),this.type="Sprite",void 0===cn){cn=new Ie;var t=new Tn(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);cn.setIndex([0,1,2,0,2,3]),cn.addAttribute("position",new Rn(t,3,0,!1)),cn.addAttribute("uv",new Rn(t,2,3,!1))}this.geometry=cn,this.material=void 0!==e?e:new In,this.center=new z(.5,.5)}function Ln(){fe.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Dn(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new j)}}function Fn(){fe.call(this),this.type="Bone"}function Nn(e,t){Ve.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new j,this.bindMatrixInverse=new j;var n=new Dn(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function Bn(e){Be.call(this),this.type="LineBasicMaterial",this.color=new ie(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function zn(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),fe.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ie,this.material=void 0!==t?t:new Bn({color:16777215*Math.random()})}function jn(e,t){zn.call(this,e,t),this.type="LineSegments"}function Hn(e,t){zn.call(this,e,t),this.type="LineLoop"}function Un(e){Be.call(this),this.type="PointsMaterial",this.color=new ie(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Vn(e,t){fe.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ie,this.material=void 0!==t?t:new Un({color:16777215*Math.random()})}function Gn(e,t,n,r,i,o,a,s,l){$.call(this,e,t,n,r,i,o,a,s,l),this.generateMipmaps=!1}function Wn(e,t,n,r,i,o,a,s,l,u,c,d){$.call(this,null,o,a,s,l,u,r,i,c,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function $n(e,t,n,r,i,o,a,s,l){$.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}function qn(e,t,n,r,i,o,a,s,l,u){if((u=void 0!==u?u:A)!==A&&u!==T)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===A&&(n=_),void 0===n&&u===T&&(n=k),$.call(this,null,r,i,o,a,s,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:g,this.minFilter=void 0!==s?s:g,this.flipY=!1,this.generateMipmaps=!1}function Xn(e){Ie.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,l,u,c,d=[],f=[0,0],p={},h=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var g=m[t];for(n=0;n<3;n++)s=g[h[n]],l=g[h[(n+1)%3]],f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===p[u=f[0]+","+f[1]]&&(p[u]={index1:f[0],index2:f[1]})}for(u in p)a=p[u],c=e.vertices[a.index1],d.push(c.x,c.y,c.z),c=e.vertices[a.index2],d.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var v,y,b,x,w,_,S;if(c=new U,null!==e.index){for(v=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(t=w=(x=b[i]).start,r=w+x.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),l=y.getX(t+(n+1)%3),f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===p[u=f[0]+","+f[1]]&&(p[u]={index1:f[0],index2:f[1]});for(u in p)a=p[u],c.fromBufferAttribute(v,a.index1),d.push(c.x,c.y,c.z),c.fromBufferAttribute(v,a.index2),d.push(c.x,c.y,c.z)}else for(t=0,r=(v=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)_=3*t+n,c.fromBufferAttribute(v,_),d.push(c.x,c.y,c.z),S=3*t+(n+1)%3,c.fromBufferAttribute(v,S),d.push(c.x,c.y,c.z)}this.addAttribute("position",new Pe(d,3))}function Kn(e,t,n){ye.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Yn(e,t,n)),this.mergeVertices()}function Yn(e,t,n){Ie.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],l=[],u=1e-5,c=new U,d=new U,f=new U,p=new U,h=new U;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var g=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,g,d),a.push(d.x,d.y,d.z),v-u>=0?(e(v-u,g,f),p.subVectors(d,f)):(e(v+u,g,f),p.subVectors(f,d)),g-u>=0?(e(v,g-u,f),h.subVectors(d,f)):(e(v,g+u,f),h.subVectors(f,d)),c.crossVectors(p,h).normalize(),s.push(c.x,c.y,c.z),l.push(v,g)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,b=r*m+i+1,x=(r+1)*m+i+1,w=(r+1)*m+i;o.push(y,b,w),o.push(b,x,w)}this.setIndex(o),this.addAttribute("position",new Pe(a,3)),this.addAttribute("normal",new Pe(s,3)),this.addAttribute("uv",new Pe(l,2))}function Zn(e,t,n,r){ye.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Qn(e,t,n,r)),this.mergeVertices()}function Qn(e,t,n,r){Ie.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),l=[];for(i=0;i<=a;i++){l[i]=[];var u=e.clone().lerp(n,i/a),c=t.clone().lerp(n,i/a),d=a-i;for(o=0;o<=d;o++)l[i][o]=0===o&&i===a?u:u.clone().lerp(c,o/d)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2===0?(s(l[i][f+1]),s(l[i+1][f]),s(l[i][f])):(s(l[i][f+1]),s(l[i+1][f+1]),s(l[i+1][f]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new U,r=new U,i=new U,o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new U,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new U,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=c(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new U,t=new U,n=new U,r=new U,a=new z,s=new z,l=new z,d=0,f=0;d<i.length;d+=9,f+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),l.set(o[f+4],o[f+5]),r.copy(e).add(t).add(n).divideScalar(3);var p=c(r);u(a,f+0,e,p),u(s,f+2,t,p),u(l,f+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new Pe(i,3)),this.addAttribute("normal",new Pe(i.slice(),3)),this.addAttribute("uv",new Pe(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Jn(e,t){ye.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new er(e,t)),this.mergeVertices()}function er(e,t){Qn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function tr(e,t){ye.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new nr(e,t)),this.mergeVertices()}function nr(e,t){Qn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function rr(e,t){ye.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ir(e,t)),this.mergeVertices()}function ir(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Qn.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function or(e,t){ye.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ar(e,t)),this.mergeVertices()}function ar(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Qn.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function sr(e,t,n,r,i,o){ye.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new lr(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function lr(e,t,n,r,i){Ie.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new U,u=new U,c=new z,d=new U,f=[],p=[],h=[],m=[];function g(i){d=e.getPointAt(i/t,d);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var h=s/r*Math.PI*2,m=Math.sin(h),g=-Math.cos(h);u.x=g*a.x+m*c.x,u.y=g*a.y+m*c.y,u.z=g*a.z+m*c.z,u.normalize(),p.push(u.x,u.y,u.z),l.x=d.x+n*u.x,l.y=d.y+n*u.y,l.z=d.z+n*u.z,f.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)g(a);g(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)c.x=a/t,c.y=s/r,h.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(e,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.addAttribute("position",new Pe(f,3)),this.addAttribute("normal",new Pe(p,3)),this.addAttribute("uv",new Pe(h,2))}function ur(e,t,n,r,i,o,a){ye.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new cr(e,t,n,r,i,o)),this.mergeVertices()}function cr(e,t,n,r,i,o){Ie.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,l=[],u=[],c=[],d=[],f=new U,p=new U,h=new U,m=new U,g=new U,v=new U,y=new U;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(P(b,i,o,e,h),P(b+.01,i,o,e,m),v.subVectors(m,h),y.addVectors(m,h),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,w=-t*Math.cos(x),_=t*Math.sin(x);f.x=h.x+(w*y.x+_*g.x),f.y=h.y+(w*y.y+_*g.y),f.z=h.z+(w*y.z+_*g.z),u.push(f.x,f.y,f.z),p.subVectors(f,h).normalize(),c.push(p.x,p.y,p.z),d.push(a/n),d.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var S=(r+1)*(s-1)+(a-1),C=(r+1)*s+(a-1),E=(r+1)*s+a,k=(r+1)*(s-1)+a;l.push(S,C,k),l.push(C,E,k)}function P(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new Pe(u,3)),this.addAttribute("normal",new Pe(c,3)),this.addAttribute("uv",new Pe(d,2))}function dr(e,t,n,r,i){ye.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new fr(e,t,n,r,i)),this.mergeVertices()}function fr(e,t,n,r,i){Ie.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],l=[],u=[],c=[],d=new U,f=new U,p=new U;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var h=a/r*i,m=o/n*Math.PI*2;f.x=(e+t*Math.cos(m))*Math.cos(h),f.y=(e+t*Math.cos(m))*Math.sin(h),f.z=t*Math.sin(m),l.push(f.x,f.y,f.z),d.x=e*Math.cos(h),d.y=e*Math.sin(h),p.subVectors(f,d).normalize(),u.push(p.x,p.y,p.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var g=(r+1)*o+a-1,v=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(g,v,b),s.push(v,y,b)}this.setIndex(s),this.addAttribute("position",new Pe(l,3)),this.addAttribute("normal",new Pe(u,3)),this.addAttribute("uv",new Pe(c,2))}mn.prototype=Object.create(Be.prototype),mn.prototype.constructor=mn,mn.prototype.isMeshDepthMaterial=!0,mn.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},gn.prototype=Object.create(Be.prototype),gn.prototype.constructor=gn,gn.prototype.isMeshDistanceMaterial=!0,gn.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},wn.prototype=Object.assign(Object.create(fe.prototype),{constructor:wn,isGroup:!0}),_n.prototype=Object.assign(Object.create(pe.prototype),{constructor:_n,isPerspectiveCamera:!0,copy:function(e,t){return pe.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*B.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*B.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*B.RAD2DEG*Math.atan(Math.tan(.5*B.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*B.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Sn.prototype=Object.assign(Object.create(_n.prototype),{constructor:Sn,isArrayCamera:!0}),Pn.prototype.isFogExp2=!0,Pn.prototype.clone=function(){return new Pn(this.color,this.density)},Pn.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Mn.prototype.isFog=!0,Mn.prototype.clone=function(){return new Mn(this.color,this.near,this.far)},Mn.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},An.prototype=Object.assign(Object.create(fe.prototype),{constructor:An,copy:function(e,t){return fe.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(Tn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Tn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Rn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Rn.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),In.prototype=Object.create(Be.prototype),In.prototype.constructor=In,In.prototype.isSpriteMaterial=!0,In.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},On.prototype=Object.assign(Object.create(fe.prototype),{constructor:On,isSprite:!0,raycast:function(){var e=new U,t=new U,n=new U,r=new z,i=new z,o=new j,a=new U,s=new U,l=new U;function u(e,t,n,a,s,l){r.subVectors(e,n).addScalar(.5).multiply(a),void 0!==s?(i.x=l*r.x-s*r.y,i.y=s*r.x+l*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var c,d,f=this.material.rotation;0!==f&&(d=Math.cos(f),c=Math.sin(f));var p=this.center;u(a.set(-.5,-.5,0),n,p,t,c,d),u(s.set(.5,-.5,0),n,p,t,c,d),u(l.set(.5,.5,0),n,p,t,c,d);var h=r.ray.intersectTriangle(a,s,l,!1,e);if(null!==h||(u(s.set(-.5,.5,0),n,p,t,c,d),null!==(h=r.ray.intersectTriangle(a,l,s,!1,e)))){var m=r.ray.origin.distanceTo(e);m<r.near||m>r.far||i.push({distance:m,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return fe.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Ln.prototype=Object.assign(Object.create(fe.prototype),{constructor:Ln,copy:function(e){fe.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new U;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new U,t=new U;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Dn.prototype,{calculateInverses:function(){var e=this;this.boneInverses=[];for(var t=0,n=this.bones.length;t<n;t++){var r=new j;e.bones[t]&&r.getInverse(e.bones[t].matrixWorld),e.boneInverses.push(r)}},pose:function(){var e,t,n,r=this;for(t=0,n=this.bones.length;t<n;t++)(e=r.bones[t])&&e.matrixWorld.getInverse(r.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=r.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new j,t=new j;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var l=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(l,r[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Dn(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Fn.prototype=Object.assign(Object.create(fe.prototype),{constructor:Fn,isBone:!0}),Nn.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Nn,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=this,o=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=i.geometry.bones[n],e=new Fn,o.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(t=i.geometry.bones[n]).parent&&null!==t.parent&&void 0!==o[t.parent]?o[t.parent].add(o[n]):i.add(o[n])}return this.updateMatrixWorld(!0),o},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new q,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),(e=1/r.manhattanLength())!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Ve.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Bn.prototype=Object.create(Be.prototype),Bn.prototype.constructor=Bn,Bn.prototype.isLineBasicMaterial=!0,Bn.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},zn.prototype=Object.assign(Object.create(fe.prototype),{constructor:zn,isLine:!0,computeLineDistances:function(){var e=new U,t=new U;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new Pe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;(i=n.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new j,t=new He,n=new Q;return function(r,i){var o=this,a=r.linePrecision,s=a*a,l=this.geometry,u=this.matrixWorld;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var c=new U,d=new U,f=new U,p=new U,h=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var m=l.index,g=l.attributes.position.array;if(null!==m)for(var v=m.array,y=0,b=v.length-1;y<b;y+=h){var x=v[y],w=v[y+1];if(c.fromArray(g,3*x),d.fromArray(g,3*w),!(t.distanceSqToSegment(c,d,p,f)>s))p.applyMatrix4(o.matrixWorld),(C=r.ray.origin.distanceTo(p))<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(o.matrixWorld),index:y,face:null,faceIndex:null,object:o})}else for(y=0,b=g.length/3-1;y<b;y+=h){if(c.fromArray(g,3*y),d.fromArray(g,3*y+3),!(t.distanceSqToSegment(c,d,p,f)>s))p.applyMatrix4(o.matrixWorld),(C=r.ray.origin.distanceTo(p))<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(o.matrixWorld),index:y,face:null,faceIndex:null,object:o})}}else if(l.isGeometry){var _=l.vertices,S=_.length;for(y=0;y<S-1;y+=h){var C;if(!(t.distanceSqToSegment(_[y],_[y+1],p,f)>s))p.applyMatrix4(o.matrixWorld),(C=r.ray.origin.distanceTo(p))<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(o.matrixWorld),index:y,face:null,faceIndex:null,object:o})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),jn.prototype=Object.assign(Object.create(zn.prototype),{constructor:jn,isLineSegments:!0,computeLineDistances:function(){var e=new U,t=new U;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new Pe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),Hn.prototype=Object.assign(Object.create(zn.prototype),{constructor:Hn,isLineLoop:!0}),Un.prototype=Object.create(Be.prototype),Un.prototype.constructor=Un,Un.prototype.isPointsMaterial=!0,Un.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Vn.prototype=Object.assign(Object.create(fe.prototype),{constructor:Vn,isPoints:!0,raycast:function(){var e=new j,t=new He,n=new Q;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,l=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=l,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var u=l/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,d=new U,f=new U;if(a.isBufferGeometry){var p=a.index,h=a.attributes.position.array;if(null!==p)for(var m=p.array,g=0,v=m.length;g<v;g++){var y=m[g];d.fromArray(h,3*y),w(d,y)}else{g=0;for(var b=h.length/3;g<b;g++)d.fromArray(h,3*g),w(d,g)}}else{var x=a.vertices;for(g=0,b=x.length;g<b;g++)w(x[g],g)}}function w(e,n){var a=t.distanceSqToPoint(e);if(a<c){t.closestPointToPoint(e,f),f.applyMatrix4(s);var l=r.ray.origin.distanceTo(f);if(l<r.near||l>r.far)return;i.push({distance:l,distanceToRay:Math.sqrt(a),point:f.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Gn.prototype=Object.assign(Object.create($.prototype),{constructor:Gn,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Wn.prototype=Object.create($.prototype),Wn.prototype.constructor=Wn,Wn.prototype.isCompressedTexture=!0,$n.prototype=Object.create($.prototype),$n.prototype.constructor=$n,$n.prototype.isCanvasTexture=!0,qn.prototype=Object.create($.prototype),qn.prototype.constructor=qn,qn.prototype.isDepthTexture=!0,Xn.prototype=Object.create(Ie.prototype),Xn.prototype.constructor=Xn,Kn.prototype=Object.create(ye.prototype),Kn.prototype.constructor=Kn,Yn.prototype=Object.create(Ie.prototype),Yn.prototype.constructor=Yn,Zn.prototype=Object.create(ye.prototype),Zn.prototype.constructor=Zn,Qn.prototype=Object.create(Ie.prototype),Qn.prototype.constructor=Qn,Jn.prototype=Object.create(ye.prototype),Jn.prototype.constructor=Jn,er.prototype=Object.create(Qn.prototype),er.prototype.constructor=er,tr.prototype=Object.create(ye.prototype),tr.prototype.constructor=tr,nr.prototype=Object.create(Qn.prototype),nr.prototype.constructor=nr,rr.prototype=Object.create(ye.prototype),rr.prototype.constructor=rr,ir.prototype=Object.create(Qn.prototype),ir.prototype.constructor=ir,or.prototype=Object.create(ye.prototype),or.prototype.constructor=or,ar.prototype=Object.create(Qn.prototype),ar.prototype.constructor=ar,sr.prototype=Object.create(ye.prototype),sr.prototype.constructor=sr,lr.prototype=Object.create(Ie.prototype),lr.prototype.constructor=lr,ur.prototype=Object.create(ye.prototype),ur.prototype.constructor=ur,cr.prototype=Object.create(Ie.prototype),cr.prototype.constructor=cr,dr.prototype=Object.create(ye.prototype),dr.prototype.constructor=dr,fr.prototype=Object.create(Ie.prototype),fr.prototype.constructor=fr;var pr=function(e,t,n){n=n||2;var r,i,o,a,s,l,u,c=t&&t.length,d=c?t[0]*n:e.length,f=hr(e,0,d,n,!0),p=[];if(!f)return p;if(c&&(f=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=hr(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Cr(a));for(s.sort(wr),i=0;i<s.length;i++)_r(s[i],n),n=mr(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var h=n;h<d;h+=n)(s=e[h])<r&&(r=s),(l=e[h+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return gr(f,p,n,r,i,u),p};function hr(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Ir(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Ir(o,e[o],e[o+1],a);return a&&Mr(a,a.next)&&(Or(a),a=a.next),a}function mr(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Mr(r,r.next)&&0!==Pr(r.prev,r,r.next))r=r.next;else{if(Or(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function gr(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Sr(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?yr(e,r,i,o):vr(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Or(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?gr(e=br(e,t,n),t,n,r,i,o,2):2===a&&xr(e,t,n,r,i,o):gr(mr(e),t,n,r,i,o,1);break}}}function vr(e){var t=e.prev,n=e,r=e.next;if(Pr(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Er(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Pr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function yr(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Pr(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,d=Sr(s,l,t,n,r),f=Sr(u,c,t,n,r),p=e.nextZ;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&Er(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Pr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&Er(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Pr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function br(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Mr(i,o)&&Ar(i,r,r.next,o)&&Tr(i,o)&&Tr(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Or(r),Or(r.next),r=e=o),r=r.next}while(r!==e);return r}function xr(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&kr(a,s)){var l=Rr(a,s);return a=mr(a,a.next),l=mr(l,l.next),gr(a,t,n,r,i,o),void gr(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function wr(e,t){return e.x-t.x}function _r(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,d=n.y,f=1/0;r=n.next;for(;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&Er(o<d?i:a,o,c,d,o<d?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&Tr(r,e)&&(n=r,f=l),r=r.next;return n}(e,t),t){var n=Rr(t,e);mr(n,n.next)}}function Sr(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Cr(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Er(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function kr(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ar(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Tr(e,t)&&Tr(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Pr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Mr(e,t){return e.x===t.x&&e.y===t.y}function Ar(e,t,n,r){return!!(Mr(e,t)&&Mr(n,r)||Mr(e,r)&&Mr(n,t))||Pr(e,t,n)>0!==Pr(e,t,r)>0&&Pr(n,r,e)>0!==Pr(n,r,t)>0}function Tr(e,t){return Pr(e.prev,e,e.next)<0?Pr(e,t,e.next)>=0&&Pr(e,e.prev,t)>=0:Pr(e,t,e.prev)<0||Pr(e,e.next,t)<0}function Rr(e,t){var n=new Lr(e.i,e.x,e.y),r=new Lr(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ir(e,t,n,r){var i=new Lr(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Or(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Lr(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Dr={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return Dr.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Fr(e),Nr(n,e);var o=e.length;t.forEach(Fr);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,Nr(n,t[a]);var s=pr(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Fr(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Nr(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Br(e,t){ye.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new zr(e,t)),this.mergeVertices()}function zr(e,t){Ie.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:c-2,f=void 0!==t.bevelSegments?t.bevelSegments:3,p=t.extrudePath,h=void 0!==t.UVGenerator?t.UVGenerator:jr;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var m,g,v,y,b,x,w,_,S=!1;p&&(m=p.getSpacedPoints(s),S=!0,u=!1,g=p.computeFrenetFrames(s,!1),v=new U,y=new U,b=new U),u||(f=0,c=0,d=0);var C=e.extractPoints(a),E=C.shape,k=C.holes;if(!Dr.isClockWise(E))for(E=E.reverse(),w=0,_=k.length;w<_;w++)x=k[w],Dr.isClockWise(x)&&(k[w]=x.reverse());var P=Dr.triangulateShape(E,k),M=E;for(w=0,_=k.length;w<_;w++)x=k[w],E=E.concat(x);function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var T,R,I,O,L,D,F=E.length,N=P.length;function B(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=a*a+s*s,d=a*u-s*l;if(Math.abs(d)>Number.EPSILON){var f=Math.sqrt(c),p=Math.sqrt(l*l+u*u),h=t.x-s/f,m=t.y+a/f,g=((n.x-u/p-h)*u-(n.y+l/p-m)*l)/(a*u-s*l),v=(r=h+a*g-e.x)*r+(i=m+s*g-e.y)*i;if(v<=2)return new z(r,i);o=Math.sqrt(v/2)}else{var y=!1;a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new z(r/o,i/o)}for(var j=[],H=0,V=M.length,G=V-1,W=H+1;H<V;H++,G++,W++)G===V&&(G=0),W===V&&(W=0),j[H]=B(M[H],M[G],M[W]);var $,q,X=[],K=j.concat();for(w=0,_=k.length;w<_;w++){for(x=k[w],$=[],H=0,G=(V=x.length)-1,W=H+1;H<V;H++,G++,W++)G===V&&(G=0),W===V&&(W=0),$[H]=B(x[H],x[G],x[W]);X.push($),K=K.concat($)}for(T=0;T<f;T++){for(I=T/f,O=c*Math.cos(I*Math.PI/2),R=d*Math.sin(I*Math.PI/2),H=0,V=M.length;H<V;H++)Z((L=A(M[H],j[H],R)).x,L.y,-O);for(w=0,_=k.length;w<_;w++)for(x=k[w],$=X[w],H=0,V=x.length;H<V;H++)Z((L=A(x[H],$[H],R)).x,L.y,-O)}for(R=d,H=0;H<F;H++)L=u?A(E[H],K[H],R):E[H],S?(y.copy(g.normals[0]).multiplyScalar(L.x),v.copy(g.binormals[0]).multiplyScalar(L.y),b.copy(m[0]).add(y).add(v),Z(b.x,b.y,b.z)):Z(L.x,L.y,0);for(q=1;q<=s;q++)for(H=0;H<F;H++)L=u?A(E[H],K[H],R):E[H],S?(y.copy(g.normals[q]).multiplyScalar(L.x),v.copy(g.binormals[q]).multiplyScalar(L.y),b.copy(m[q]).add(y).add(v),Z(b.x,b.y,b.z)):Z(L.x,L.y,l/s*q);for(T=f-1;T>=0;T--){for(I=T/f,O=c*Math.cos(I*Math.PI/2),R=d*Math.sin(I*Math.PI/2),H=0,V=M.length;H<V;H++)Z((L=A(M[H],j[H],R)).x,L.y,l+O);for(w=0,_=k.length;w<_;w++)for(x=k[w],$=X[w],H=0,V=x.length;H<V;H++)L=A(x[H],$[H],R),S?Z(L.x,L.y+m[s-1].y,m[s-1].x+O):Z(L.x,L.y,l+O)}function Y(e,t){var n,r;for(H=e.length;--H>=0;){n=H,(r=H-1)<0&&(r=e.length-1);var i=0,o=s+2*f;for(i=0;i<o;i++){var a=F*i,l=F*(i+1);J(t+n+a,t+r+a,t+r+l,t+n+l)}}}function Z(e,t,n){o.push(e),o.push(t),o.push(n)}function Q(e,t,i){ee(e),ee(t),ee(i);var o=r.length/3,a=h.generateTopUV(n,r,o-3,o-2,o-1);te(a[0]),te(a[1]),te(a[2])}function J(e,t,i,o){ee(e),ee(t),ee(o),ee(t),ee(i),ee(o);var a=r.length/3,s=h.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);te(s[0]),te(s[1]),te(s[3]),te(s[1]),te(s[2]),te(s[3])}function ee(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function te(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(u){var t=0,i=F*t;for(H=0;H<N;H++)Q((D=P[H])[2]+i,D[1]+i,D[0]+i);for(i=F*(t=s+2*f),H=0;H<N;H++)Q((D=P[H])[0]+i,D[1]+i,D[2]+i)}else{for(H=0;H<N;H++)Q((D=P[H])[2],D[1],D[0]);for(H=0;H<N;H++)Q((D=P[H])[0]+F*s,D[1]+F*s,D[2]+F*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Y(M,t),t+=M.length,w=0,_=k.length;w<_;w++)Y(x=k[w],t),t+=x.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new Pe(r,3)),this.addAttribute("uv",new Pe(i,2)),this.computeVertexNormals()}Br.prototype=Object.create(ye.prototype),Br.prototype.constructor=Br,Br.prototype.toJSON=function(){var e=ye.prototype.toJSON.call(this);return Hr(this.parameters.shapes,this.parameters.options,e)},zr.prototype=Object.create(Ie.prototype),zr.prototype.constructor=zr,zr.prototype.toJSON=function(){var e=Ie.prototype.toJSON.call(this);return Hr(this.parameters.shapes,this.parameters.options,e)};var jr={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new z(o,a),new z(s,l),new z(u,c)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],d=t[3*r+2],f=t[3*i],p=t[3*i+1],h=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-c)<.01?[new z(a,1-l),new z(u,1-d),new z(f,1-h),new z(m,1-v)]:[new z(s,1-l),new z(c,1-d),new z(p,1-h),new z(g,1-v)]}};function Hr(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Ur(e,t){ye.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Vr(e,t)),this.mergeVertices()}function Vr(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ye;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),zr.call(this,r,t),this.type="TextBufferGeometry"}function Gr(e,t,n,r,i,o,a){ye.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Wr(e,t,n,r,i,o,a)),this.mergeVertices()}function Wr(e,t,n,r,i,o,a){Ie.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,l,u=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),c=0,d=[],f=new U,p=new U,h=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var y=[],b=l/n;for(s=0;s<=t;s++){var x=s/t;f.x=-e*Math.cos(r+x*i)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+x*i)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),p.set(f.x,f.y,f.z).normalize(),g.push(p.x,p.y,p.z),v.push(x,1-b),y.push(c++)}d.push(y)}for(l=0;l<n;l++)for(s=0;s<t;s++){var w=d[l][s+1],_=d[l][s],S=d[l+1][s],C=d[l+1][s+1];(0!==l||o>0)&&h.push(w,_,C),(l!==n-1||u<Math.PI)&&h.push(_,S,C)}this.setIndex(h),this.addAttribute("position",new Pe(m,3)),this.addAttribute("normal",new Pe(g,3)),this.addAttribute("uv",new Pe(v,2))}function $r(e,t,n,r,i,o){ye.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new qr(e,t,n,r,i,o)),this.mergeVertices()}function qr(e,t,n,r,i,o){Ie.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,l,u=[],c=[],d=[],f=[],p=e,h=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new U,g=new z;for(s=0;s<=r;s++){for(l=0;l<=n;l++)a=i+l/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),c.push(m.x,m.y,m.z),d.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,f.push(g.x,g.y);p+=h}for(s=0;s<r;s++){var v=s*(n+1);for(l=0;l<n;l++){var y=a=l+v,b=a+n+1,x=a+n+2,w=a+1;u.push(y,b,w),u.push(b,x,w)}}this.setIndex(u),this.addAttribute("position",new Pe(c,3)),this.addAttribute("normal",new Pe(d,3)),this.addAttribute("uv",new Pe(f,2))}function Xr(e,t,n,r){ye.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Kr(e,t,n,r)),this.mergeVertices()}function Kr(e,t,n,r){Ie.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=B.clamp(r,0,2*Math.PI);var i,o,a,s=[],l=[],u=[],c=1/t,d=new U,f=new z;for(o=0;o<=t;o++){var p=n+o*c*r,h=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)d.x=e[a].x*h,d.y=e[a].y,d.z=e[a].x*m,l.push(d.x,d.y,d.z),f.x=o/t,f.y=a/(e.length-1),u.push(f.x,f.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var g=i=a+o*e.length,v=i+e.length,y=i+e.length+1,b=i+1;s.push(g,v,b),s.push(v,y,b)}if(this.setIndex(s),this.addAttribute("position",new Pe(l,3)),this.addAttribute("uv",new Pe(u,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,w=new U,_=new U,S=new U;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)w.x=x[a+0],w.y=x[a+1],w.z=x[a+2],_.x=x[i+a+0],_.y=x[i+a+1],_.z=x[i+a+2],S.addVectors(w,_).normalize(),x[a+0]=x[i+a+0]=S.x,x[a+1]=x[i+a+1]=S.y,x[a+2]=x[i+a+2]=S.z}}function Yr(e,t){ye.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Zr(e,t)),this.mergeVertices()}function Zr(e,t){Ie.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(a,s,l),a+=s,s=0;function u(e){var a,l,u,c=r.length/3,d=e.extractPoints(t),f=d.shape,p=d.holes;if(!1===Dr.isClockWise(f))for(f=f.reverse(),a=0,l=p.length;a<l;a++)u=p[a],!0===Dr.isClockWise(u)&&(p[a]=u.reverse());var h=Dr.triangulateShape(f,p);for(a=0,l=p.length;a<l;a++)u=p[a],f=f.concat(u);for(a=0,l=f.length;a<l;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=h.length;a<l;a++){var g=h[a],v=g[0]+c,y=g[1]+c,b=g[2]+c;n.push(v,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new Pe(r,3)),this.addAttribute("normal",new Pe(i,3)),this.addAttribute("uv",new Pe(o,2))}function Qr(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Jr(e,t){Ie.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(B.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(o=new ye).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var d=o.vertices,f=o.faces,p=0,h=f.length;p<h;p++)for(var m=f[p],g=0;g<3;g++)n=m[c[g]],r=m[c[(g+1)%3]],l[0]=Math.min(n,r),l[1]=Math.max(n,r),void 0===u[i=l[0]+","+l[1]]?u[i]={index1:l[0],index2:l[1],face1:p,face2:void 0}:u[i].face2=p;for(i in u){var v=u[i];if(void 0===v.face2||f[v.face1].normal.dot(f[v.face2].normal)<=s){var y=d[v.index1];a.push(y.x,y.y,y.z),y=d[v.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new Pe(a,3))}function ei(e,t,n,r,i,o,a,s){ye.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new ti(e,t,n,r,i,o,a,s)),this.mergeVertices()}function ti(e,t,n,r,i,o,a,s){Ie.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],d=[],f=[],p=0,h=[],m=n/2,g=0;function v(n){var i,o,h,v=new z,y=new U,b=0,x=!0===n?e:t,w=!0===n?1:-1;for(o=p,i=1;i<=r;i++)c.push(0,m*w,0),d.push(0,w,0),f.push(.5,.5),p++;for(h=p,i=0;i<=r;i++){var _=i/r*s+a,S=Math.cos(_),C=Math.sin(_);y.x=x*C,y.y=m*w,y.z=x*S,c.push(y.x,y.y,y.z),d.push(0,w,0),v.x=.5*S+.5,v.y=.5*C*w+.5,f.push(v.x,v.y),p++}for(i=0;i<r;i++){var E=o+i,k=h+i;!0===n?u.push(k,k+1,E):u.push(k+1,k,E),b+=3}l.addGroup(g,b,!0===n?1:2),g+=b}!function(){var o,v,y=new U,b=new U,x=0,w=(t-e)/n;for(v=0;v<=i;v++){var _=[],S=v/i,C=S*(t-e)+e;for(o=0;o<=r;o++){var E=o/r,k=E*s+a,P=Math.sin(k),M=Math.cos(k);b.x=C*P,b.y=-S*n+m,b.z=C*M,c.push(b.x,b.y,b.z),y.set(P,w,M).normalize(),d.push(y.x,y.y,y.z),f.push(E,1-S),_.push(p++)}h.push(_)}for(o=0;o<r;o++)for(v=0;v<i;v++){var A=h[v][o],T=h[v+1][o],R=h[v+1][o+1],I=h[v][o+1];u.push(A,T,I),u.push(T,R,I),x+=6}l.addGroup(g,x,0),g+=x}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.addAttribute("position",new Pe(c,3)),this.addAttribute("normal",new Pe(d,3)),this.addAttribute("uv",new Pe(f,2))}function ni(e,t,n,r,i,o,a){ei.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ri(e,t,n,r,i,o,a){ti.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ii(e,t,n,r){ye.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new oi(e,t,n,r)),this.mergeVertices()}function oi(e,t,n,r){Ie.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],l=[],u=[],c=new U,d=new z;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var f=n+o/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),s.push(c.x,c.y,c.z),l.push(0,0,1),d.x=(s[i]/e+1)/2,d.y=(s[i+1]/e+1)/2,u.push(d.x,d.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new Pe(s,3)),this.addAttribute("normal",new Pe(l,3)),this.addAttribute("uv",new Pe(u,2))}Ur.prototype=Object.create(ye.prototype),Ur.prototype.constructor=Ur,Vr.prototype=Object.create(zr.prototype),Vr.prototype.constructor=Vr,Gr.prototype=Object.create(ye.prototype),Gr.prototype.constructor=Gr,Wr.prototype=Object.create(Ie.prototype),Wr.prototype.constructor=Wr,$r.prototype=Object.create(ye.prototype),$r.prototype.constructor=$r,qr.prototype=Object.create(Ie.prototype),qr.prototype.constructor=qr,Xr.prototype=Object.create(ye.prototype),Xr.prototype.constructor=Xr,Kr.prototype=Object.create(Ie.prototype),Kr.prototype.constructor=Kr,Yr.prototype=Object.create(ye.prototype),Yr.prototype.constructor=Yr,Yr.prototype.toJSON=function(){var e=ye.prototype.toJSON.call(this);return Qr(this.parameters.shapes,e)},Zr.prototype=Object.create(Ie.prototype),Zr.prototype.constructor=Zr,Zr.prototype.toJSON=function(){var e=Ie.prototype.toJSON.call(this);return Qr(this.parameters.shapes,e)},Jr.prototype=Object.create(Ie.prototype),Jr.prototype.constructor=Jr,ei.prototype=Object.create(ye.prototype),ei.prototype.constructor=ei,ti.prototype=Object.create(Ie.prototype),ti.prototype.constructor=ti,ni.prototype=Object.create(ei.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(ti.prototype),ri.prototype.constructor=ri,ii.prototype=Object.create(ye.prototype),ii.prototype.constructor=ii,oi.prototype=Object.create(Ie.prototype),oi.prototype.constructor=oi;var ai=Object.freeze({WireframeGeometry:Xn,ParametricGeometry:Kn,ParametricBufferGeometry:Yn,TetrahedronGeometry:Jn,TetrahedronBufferGeometry:er,OctahedronGeometry:tr,OctahedronBufferGeometry:nr,IcosahedronGeometry:rr,IcosahedronBufferGeometry:ir,DodecahedronGeometry:or,DodecahedronBufferGeometry:ar,PolyhedronGeometry:Zn,PolyhedronBufferGeometry:Qn,TubeGeometry:sr,TubeBufferGeometry:lr,TorusKnotGeometry:ur,TorusKnotBufferGeometry:cr,TorusGeometry:dr,TorusBufferGeometry:fr,TextGeometry:Ur,TextBufferGeometry:Vr,SphereGeometry:Gr,SphereBufferGeometry:Wr,RingGeometry:$r,RingBufferGeometry:qr,PlaneGeometry:De,PlaneBufferGeometry:Fe,LatheGeometry:Xr,LatheBufferGeometry:Kr,ShapeGeometry:Yr,ShapeBufferGeometry:Zr,ExtrudeGeometry:Br,ExtrudeBufferGeometry:zr,EdgesGeometry:Jr,ConeGeometry:ni,ConeBufferGeometry:ri,CylinderGeometry:ei,CylinderBufferGeometry:ti,CircleGeometry:ii,CircleBufferGeometry:oi,BoxGeometry:Oe,BoxBufferGeometry:Le});function si(e){Be.call(this),this.type="ShadowMaterial",this.color=new ie(0),this.transparent=!0,this.setValues(e)}function li(e){je.call(this,e),this.type="RawShaderMaterial"}function ui(e){Be.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ie(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ci(e){ui.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function di(e){Be.call(this),this.type="MeshPhongMaterial",this.color=new ie(16777215),this.specular=new ie(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function fi(e){di.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function pi(e){Be.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function hi(e){Be.call(this),this.type="MeshLambertMaterial",this.color=new ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function mi(e){Bn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}si.prototype=Object.create(Be.prototype),si.prototype.constructor=si,si.prototype.isShadowMaterial=!0,si.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.color.copy(e.color),this},li.prototype=Object.create(je.prototype),li.prototype.constructor=li,li.prototype.isRawShaderMaterial=!0,ui.prototype=Object.create(Be.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshStandardMaterial=!0,ui.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ci.prototype=Object.create(ui.prototype),ci.prototype.constructor=ci,ci.prototype.isMeshPhysicalMaterial=!0,ci.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},di.prototype=Object.create(Be.prototype),di.prototype.constructor=di,di.prototype.isMeshPhongMaterial=!0,di.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},fi.prototype=Object.create(di.prototype),fi.prototype.constructor=fi,fi.prototype.isMeshToonMaterial=!0,fi.prototype.copy=function(e){return di.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},pi.prototype=Object.create(Be.prototype),pi.prototype.constructor=pi,pi.prototype.isMeshNormalMaterial=!0,pi.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},hi.prototype=Object.create(Be.prototype),hi.prototype.constructor=hi,hi.prototype.isMeshLambertMaterial=!0,hi.prototype.copy=function(e){return Be.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},mi.prototype=Object.create(Bn.prototype),mi.prototype.constructor=mi,mi.prototype.isLineDashedMaterial=!0,mi.prototype.copy=function(e){return Bn.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var gi=Object.freeze({ShadowMaterial:si,SpriteMaterial:In,RawShaderMaterial:li,ShaderMaterial:je,PointsMaterial:Un,MeshPhysicalMaterial:ci,MeshStandardMaterial:ui,MeshPhongMaterial:di,MeshToonMaterial:fi,MeshNormalMaterial:pi,MeshLambertMaterial:hi,MeshDepthMaterial:mn,MeshDistanceMaterial:gn,MeshBasicMaterial:ze,LineDashedMaterial:mi,LineBasicMaterial:Bn,Material:Be}),vi={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function yi(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var bi=new yi,xi={};function wi(e){this.manager=void 0!==e?e:bi}function _i(e){this.manager=void 0!==e?e:bi}function Si(e){this.manager=void 0!==e?e:bi}function Ci(e){this.manager=void 0!==e?e:bi}function Ei(){this.type="Curve",this.arcLengthDivisions=200}function ki(e,t,n,r,i,o,a,s){Ei.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Pi(e,t,n,r,i,o){ki.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Mi(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,l*=a,u*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Object.assign(wi.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=vi.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===xi[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],u=a[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var c,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var f=new Uint8Array(u.length),p=0;p<u.length;p++)f[p]=u.charCodeAt(p);c="blob"===d?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var h=new DOMParser;c=h.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}window.setTimeout((function(){t&&t(c),i.manager.itemEnd(e)}),0)}catch(v){window.setTimeout((function(){r&&r(v),i.manager.itemEnd(e),i.manager.itemError(e)}),0)}}else{xi[e]=[],xi[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response;vi.add(e,n);var r=xi[e];if(delete xi[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=xi[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=xi[e];delete xi[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return i.manager.itemStart(e),m}xi[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:bi,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Wn;a.image=o;var s=new wi(this.manager);function l(l){s.load(e[l],(function(e){var n=i._parser(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=b),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,d=e.length;c<d;++c)l(c);else s.load(e,(function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=b),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:bi,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,o=new Y,a=new wi(this.manager);return a.setResponseType("arraybuffer"),a.load(e,(function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:h,o.wrapT=void 0!==n.wrapT?n.wrapT:h,o.magFilter=void 0!==n.magFilter?n.magFilter:b,o.minFilter=void 0!==n.minFilter?n.minFilter:x,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=b),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}),Object.assign(_i.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=vi.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),vi.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Si.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new tt,o=new _i(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ci.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new $,o=new _i(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?P:M,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ei.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(r[i=l]===n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n);return this.getPoint(r).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new U,a=[],s=[],l=[],u=new U,c=new j;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new U,l[0]=new U;var d=Number.MAX_VALUE,f=Math.abs(a[0].x),p=Math.abs(a[0].y),h=Math.abs(a[0].z);for(f<=d&&(d=f,o.set(1,0,0)),p<=d&&(d=p,o.set(0,1,0)),h<=d&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),l[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(a[n-1],a[n]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(B.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(u,i))),l[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(B.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(c.makeRotationAxis(a[n],i*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ki.prototype=Object.create(Ei.prototype),ki.prototype.constructor=ki,ki.prototype.isEllipseCurve=!0,ki.prototype.getPoint=function(e,t){for(var n=t||new z,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,f=l-this.aY;s=d*u-f*c+this.aX,l=d*c+f*u+this.aY}return n.set(s,l)},ki.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ki.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ki.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Pi.prototype=Object.create(ki.prototype),Pi.prototype.constructor=Pi,Pi.prototype.isArcCurve=!0;var Ai=new U,Ti=new Mi,Ri=new Mi,Ii=new Mi;function Oi(e,t,n,r){Ei.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Li(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Di(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Fi(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Ni(e,t,n,r){Ei.call(this),this.type="CubicBezierCurve",this.v0=e||new z,this.v1=t||new z,this.v2=n||new z,this.v3=r||new z}function Bi(e,t,n,r){Ei.call(this),this.type="CubicBezierCurve3",this.v0=e||new U,this.v1=t||new U,this.v2=n||new U,this.v3=r||new U}function zi(e,t){Ei.call(this),this.type="LineCurve",this.v1=e||new z,this.v2=t||new z}function ji(e,t){Ei.call(this),this.type="LineCurve3",this.v1=e||new U,this.v2=t||new U}function Hi(e,t,n){Ei.call(this),this.type="QuadraticBezierCurve",this.v0=e||new z,this.v1=t||new z,this.v2=n||new z}function Ui(e,t,n){Ei.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new U,this.v1=t||new U,this.v2=n||new U}function Vi(e){Ei.call(this),this.type="SplineCurve",this.points=e||[]}Oi.prototype=Object.create(Ei.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isCatmullRomCurve3=!0,Oi.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new U,s=this.points,l=s.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),d=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===d&&c===l-1&&(c=l-2,d=1),this.closed||c>0?n=s[(c-1)%l]:(Ai.subVectors(s[0],s[1]).add(s[0]),n=Ai),r=s[c%l],i=s[(c+1)%l],this.closed||c+2<l?o=s[(c+2)%l]:(Ai.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=Ai),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),f),h=Math.pow(r.distanceToSquared(i),f),m=Math.pow(i.distanceToSquared(o),f);h<1e-4&&(h=1),p<1e-4&&(p=h),m<1e-4&&(m=h),Ti.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,h,m),Ri.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,h,m),Ii.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,h,m)}else"catmullrom"===this.curveType&&(Ti.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Ri.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Ii.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Ti.calc(d),Ri.calc(d),Ii.calc(d)),a},Oi.prototype.copy=function(e){Ei.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Oi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Oi.prototype.fromJSON=function(e){Ei.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new U).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ni.prototype=Object.create(Ei.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isCubicBezierCurve=!0,Ni.prototype.getPoint=function(e,t){var n=t||new z,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Fi(e,r.x,i.x,o.x,a.x),Fi(e,r.y,i.y,o.y,a.y)),n},Ni.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ni.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ni.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Bi.prototype=Object.create(Ei.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isCubicBezierCurve3=!0,Bi.prototype.getPoint=function(e,t){var n=t||new U,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Fi(e,r.x,i.x,o.x,a.x),Fi(e,r.y,i.y,o.y,a.y),Fi(e,r.z,i.z,o.z,a.z)),n},Bi.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Bi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Bi.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},zi.prototype=Object.create(Ei.prototype),zi.prototype.constructor=zi,zi.prototype.isLineCurve=!0,zi.prototype.getPoint=function(e,t){var n=t||new z;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},zi.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},zi.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},zi.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},zi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},zi.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ji.prototype=Object.create(Ei.prototype),ji.prototype.constructor=ji,ji.prototype.isLineCurve3=!0,ji.prototype.getPoint=function(e,t){var n=t||new U;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ji.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ji.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ji.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ji.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hi.prototype=Object.create(Ei.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isQuadraticBezierCurve=!0,Hi.prototype.getPoint=function(e,t){var n=t||new z,r=this.v0,i=this.v1,o=this.v2;return n.set(Di(e,r.x,i.x,o.x),Di(e,r.y,i.y,o.y)),n},Hi.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hi.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ui.prototype=Object.create(Ei.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isQuadraticBezierCurve3=!0,Ui.prototype.getPoint=function(e,t){var n=t||new U,r=this.v0,i=this.v1,o=this.v2;return n.set(Di(e,r.x,i.x,o.x),Di(e,r.y,i.y,o.y),Di(e,r.z,i.z,o.z)),n},Ui.prototype.copy=function(e){return Ei.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ui.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ui.prototype.fromJSON=function(e){return Ei.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Vi.prototype=Object.create(Ei.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isSplineCurve=!0,Vi.prototype.getPoint=function(e,t){var n=t||new z,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Li(a,s.x,l.x,u.x,c.x),Li(a,s.y,l.y,u.y,c.y)),n},Vi.prototype.copy=function(e){Ei.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Vi.prototype.toJSON=function(){var e=Ei.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Vi.prototype.fromJSON=function(e){Ei.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new z).fromArray(r))}return this};var Gi=Object.freeze({ArcCurve:Pi,CatmullRomCurve3:Oi,CubicBezierCurve:Ni,CubicBezierCurve3:Bi,EllipseCurve:ki,LineCurve:zi,LineCurve3:ji,QuadraticBezierCurve:Hi,QuadraticBezierCurve3:Ui,SplineCurve:Vi});function Wi(){Ei.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function $i(e){Wi.call(this),this.type="Path",this.currentPoint=new z,e&&this.setFromPoints(e)}function qi(e){$i.call(this,e),this.uuid=B.generateUUID(),this.type="Shape",this.holes=[]}function Xi(e,t){fe.call(this),this.type="Light",this.color=new ie(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ki(e,t,n){Xi.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(fe.DefaultUp),this.updateMatrix(),this.groundColor=new ie(t)}function Yi(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new z(512,512),this.map=null,this.matrix=new j}function Zi(){Yi.call(this,new _n(50,1,.5,500))}function Qi(e,t,n,r,i,o){Xi.call(this,e,t),this.type="SpotLight",this.position.copy(fe.DefaultUp),this.updateMatrix(),this.target=new fe,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Zi}function Ji(e,t,n,r){Xi.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Yi(new _n(90,1,.5,500))}function eo(){Yi.call(this,new he(-5,5,5,-5,.5,500))}function to(e,t){Xi.call(this,e,t),this.type="DirectionalLight",this.position.copy(fe.DefaultUp),this.updateMatrix(),this.target=new fe,this.shadow=new eo}function no(e,t){Xi.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ro(e,t,n,r){Xi.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Wi.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Wi,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new zi(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Ei.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Ei.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Ei.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Gi[r.type]).fromJSON(r))}return this}}),$i.prototype=Object.assign(Object.create(Wi.prototype),{constructor:$i,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new zi(this.currentPoint.clone(),new z(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Hi(this.currentPoint.clone(),new z(e,t),new z(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new Ni(this.currentPoint.clone(),new z(e,t),new z(n,r),new z(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new Vi([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var l=new ki(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return Wi.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Wi.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Wi.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),qi.prototype=Object.assign(Object.create($i.prototype),{constructor:qi,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){$i.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=$i.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){$i.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new $i).fromJSON(r))}return this}}),Xi.prototype=Object.assign(Object.create(fe.prototype),{constructor:Xi,isLight:!0,copy:function(e){return fe.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ki.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ki,isHemisphereLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Yi.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Zi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Zi,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*B.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),Qi.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Qi,isSpotLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ji.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ji,isPointLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),eo.prototype=Object.assign(Object.create(Yi.prototype),{constructor:eo}),to.prototype=Object.assign(Object.create(Xi.prototype),{constructor:to,isDirectionalLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),no.prototype=Object.assign(Object.create(Xi.prototype),{constructor:no,isAmbientLight:!0}),ro.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ro,isRectAreaLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Xi.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var io={arraySlice:function(e,t,n){return io.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,l=0;l!==t;++l)i[a++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function oo(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function ao(e,t,n,r){oo.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function so(e,t,n,r){oo.call(this,e,t,n,r)}function lo(e,t,n,r){oo.call(this,e,t,n,r)}function uo(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=io.convertArray(t,this.TimeBufferType),this.values=io.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function co(e,t,n){uo.call(this,e,t,n)}function fo(e,t,n,r){uo.call(this,e,t,n,r)}function po(e,t,n,r){uo.call(this,e,t,n,r)}function ho(e,t,n,r){oo.call(this,e,t,n,r)}function mo(e,t,n,r){uo.call(this,e,t,n,r)}function go(e,t,n,r){uo.call(this,e,t,n,r)}function vo(e,t,n,r){uo.call(this,e,t,n,r)}function yo(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=B.generateUUID(),this.duration<0&&this.resetDuration()}function bo(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return po;case"vector":case"vector2":case"vector3":case"vector4":return vo;case"color":return fo;case"quaternion":return mo;case"bool":case"boolean":return co;case"string":return go}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];io.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function xo(e){this.manager=void 0!==e?e:bi,this.textures={}}function wo(e){this.manager=void 0!==e?e:bi}Object.assign(oo.prototype,{evaluate:function(e){var t=this,n=this.parameterPositions,r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{var a;n:{r:if(!(e<i)){for(var s=r+2;;){if(void 0===i){if(e<o)break r;return r=n.length,t._cachedIndex=r,t.afterEnd_(r-1,e,o)}if(r===s)break;if(o=i,e<(i=n[++r]))break t}a=n.length;break n}if(e>=o)break e;var l=n[1];e<l&&(r=2,o=l);for(s=r-2;;){if(void 0===o)return t._cachedIndex=0,t.beforeStart_(0,e,i);if(r===s)break;if(i=o,e>=(o=n[--r-1]))break t}a=r,r=0}for(;r<a;){var u=r+a>>>1;e<n[u]?a=u:r=u+1}if(i=n[r],void 0===(o=n[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,o,e)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(oo.prototype,{beforeStart_:oo.prototype.copySampleValue_,afterEnd_:oo.prototype.copySampleValue_}),ao.prototype=Object.assign(Object.create(oo.prototype),{constructor:ao,DefaultSettings_:{endingStart:L,endingEnd:L},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case D:i=e,a=2*t-n;break;case F:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case D:o=e,s=2*n-t;break;case F:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(n-t)/(r-t),h=p*p,m=h*p,g=-d*m+2*d*h-d*p,v=(1+d)*m+(-1.5-2*d)*h+(-.5+d)*p+1,y=(-1-f)*m+(1.5+f)*h+.5*p,b=f*m-f*h,x=0;x!==a;++x)i[x]=g*o[u+x]+v*o[l+x]+y*o[s+x]+b*o[c+x];return i}}),so.prototype=Object.assign(Object.create(oo.prototype),{constructor:so,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=(n-t)/(r-t),c=1-u,d=0;d!==a;++d)i[d]=o[l+d]*c+o[s+d]*u;return i}}),lo.prototype=Object.assign(Object.create(oo.prototype),{constructor:lo,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(uo,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:io.convertArray(e.times,Array),values:io.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(uo.prototype,{constructor:uo,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:I,InterpolantFactoryMethodDiscrete:function(e){return new lo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new so(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ao(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case R:t=this.InterpolantFactoryMethodDiscrete;break;case I:t=this.InterpolantFactoryMethodLinear;break;case O:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return R;case this.InterpolantFactoryMethodLinear:return I;case this.InterpolantFactoryMethodSmooth:return O}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=io.arraySlice(n,i,o),this.values=io.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=this,t=!0,n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var r=this.times,i=this.values,o=r.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,s=0;s!==o;s++){var l=r[s];if("number"===typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",e,s,l),t=!1;break}if(null!==a&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",e,s,l,a),t=!1;break}a=l}if(void 0!==i&&io.isTypedArray(i)){s=0;for(var u=i.length;s!==u;++s){var c=i[s];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",e,s,c),t=!1;break}}}return t},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===O,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(r)s=!0;else for(var u=a*n,c=u-n,d=u+n,f=0;f!==n;++f){var p=t[u+f];if(p!==t[c+f]||p!==t[d+f]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var h=a*n,m=i*n;for(f=0;f!==n;++f)t[m+f]=t[h+f]}++i}}if(o>0){e[i]=e[o];for(h=o*n,m=i*n,f=0;f!==n;++f)t[m+f]=t[h+f];++i}return i!==e.length&&(this.times=io.arraySlice(e,0,i),this.values=io.arraySlice(t,0,i*n)),this}}),co.prototype=Object.assign(Object.create(uo.prototype),{constructor:co,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:R,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fo.prototype=Object.assign(Object.create(uo.prototype),{constructor:fo,ValueTypeName:"color"}),po.prototype=Object.assign(Object.create(uo.prototype),{constructor:po,ValueTypeName:"number"}),ho.prototype=Object.assign(Object.create(oo.prototype),{constructor:ho,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(n-t)/(r-t),u=s+a;s!==u;s+=4)H.slerpFlat(i,0,o,s-a,o,s,l);return i}}),mo.prototype=Object.assign(Object.create(uo.prototype),{constructor:mo,ValueTypeName:"quaternion",DefaultInterpolation:I,InterpolantFactoryMethodLinear:function(e){return new ho(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),go.prototype=Object.assign(Object.create(uo.prototype),{constructor:go,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:R,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),vo.prototype=Object.assign(Object.create(uo.prototype),{constructor:vo,ValueTypeName:"vector"}),Object.assign(yo,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(bo(n[i]).scale(r));return new yo(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(uo.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);var u=io.getKeyframeOrder(s);s=io.sortedArray(s,1,u),l=io.sortedArray(l,1,u),r||0!==s[0]||(s.push(i),l.push(l[0])),o.push(new po(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new yo(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(i);if(l&&l.length>1){var u=r[d=l[1]];u||(r[d]=u=[]),u.push(s)}}var c=[];for(var d in r)c.push(yo.CreateFromMorphTargetSequence(d,r[d],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];io.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},d=0;d<u.length;d++)if(u[d].morphTargets)for(var f=0;f<u[d].morphTargets.length;f++)c[u[d].morphTargets[f]]=-1;for(var p in c){var h=[],m=[];for(f=0;f!==u[d].morphTargets.length;++f){var g=u[d];h.push(g.time),m.push(g.morphTarget===p?1:0)}r.push(new po(".morphTargetInfluence["+p+"]",h,m))}o=c.length*(a||1)}else{var v=".bones["+t[l].name+"]";n(vo,v+".position",u,"pos",r),n(mo,v+".quaternion",u,"rot",r),n(vo,v+".scale",u,"scl",r)}}return 0===r.length?null:new yo(i,o,r)}}),Object.assign(yo.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(xo.prototype,{load:function(e,t,n,r){var i=this;new wi(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new gi[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new z).fromArray(i)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r}}),Object.assign(wo.prototype,{load:function(e,t,n,r){var i=this;new wi(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=new Ie,n=e.data.index;if(void 0!==n){var r=new _o[n.type](n.array);t.setIndex(new be(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o];r=new _o[a.type](a.array);t.addAttribute(o,new be(r,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,u=s.length;l!==u;++l){var c=s[l];t.addGroup(c.start,c.count,c.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new U;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new Q(f,d.radius)}return t}});var _o={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function So(){}So.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(So.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},t=new ie,n=new Ci,r=new xo;return function(i,o,a){var s={};function l(e,t,r,i,l){var u,c=o+e,d=So.Handlers.get(c);null!==d?u=d.load(c):(n.setCrossOrigin(a),u=n.load(c)),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=p),1!==t[1]&&(u.wrapT=p)),void 0!==r&&u.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(u.wrapS=p),"mirror"===i[0]&&(u.wrapS=m),"repeat"===i[1]&&(u.wrapT=p),"mirror"===i[1]&&(u.wrapT=m)),void 0!==l&&(u.anisotropy=l);var f=B.generateUUID();return s[f]=u,f}var u={uuid:B.generateUUID(),type:"MeshLambertMaterial"};for(var c in i){var d=i[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":u.name=d;break;case"blending":u.blending=e[d];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(d).getHex();break;case"colorSpecular":u.specular=t.fromArray(d).getHex();break;case"colorEmissive":u.emissive=t.fromArray(d).getHex();break;case"specularCoef":u.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=l(d,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapEmissive":u.emissiveMap=l(d,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapLight":u.lightMap=l(d,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapAO":u.aoMap=l(d,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapBump":u.bumpMap=l(d,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=d;break;case"mapNormal":u.normalMap=l(d,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=d;break;case"mapSpecular":u.specularMap=l(d,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapMetalness":u.metalnessMap=l(d,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapRoughness":u.roughnessMap=l(d,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapAlpha":u.alphaMap=l(d,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"flipSided":u.side=1;break;case"doubleSided":u.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[c]=d;break;case"vertexColors":!0===d&&(u.vertexColors=2),"face"===d&&(u.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,d)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),r.setTextures(s),r.parse(u)}}()});var Co=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function Eo(e){"boolean"===typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:bi,this.withCredentials=!1}Object.assign(Eo.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Co(e),a=new wi(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,(function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var l=i.parse(r,o);t(l.geometry,l.materials)}),n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new ye;return function(e,t){function n(e,t){return e&1<<t}var r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,_,S,C,E,k,P,M=e.faces,A=e.vertices,T=e.normals,R=e.colors,I=e.scale,O=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&O++;for(r=0;r<O;r++)t.faceVertexUvs[r]=[]}for(a=0,s=A.length;a<s;)(x=new U).x=A[a++]*I,x.y=A[a++]*I,x.z=A[a++]*I,t.vertices.push(x);for(a=0,s=M.length;a<s;)if(p=n(f=M[a++],0),h=n(f,1),m=n(f,3),g=n(f,4),v=n(f,5),y=n(f,6),b=n(f,7),p){if((_=new ge).a=M[a],_.b=M[a+1],_.c=M[a+3],(S=new ge).a=M[a+1],S.b=M[a+2],S.c=M[a+3],a+=4,h&&(d=M[a++],_.materialIndex=d,S.materialIndex=d),o=t.faces.length,m)for(r=0;r<O;r++)for(k=e.uvs[r],t.faceVertexUvs[r][o]=[],t.faceVertexUvs[r][o+1]=[],i=0;i<4;i++)P=new z(k[2*(c=M[a++])],k[2*c+1]),2!==i&&t.faceVertexUvs[r][o].push(P),0!==i&&t.faceVertexUvs[r][o+1].push(P);if(g&&(u=3*M[a++],_.normal.set(T[u++],T[u++],T[u]),S.normal.copy(_.normal)),v)for(r=0;r<4;r++)u=3*M[a++],E=new U(T[u++],T[u++],T[u]),2!==r&&_.vertexNormals.push(E),0!==r&&S.vertexNormals.push(E);if(y&&(C=R[l=M[a++]],_.color.setHex(C),S.color.setHex(C)),b)for(r=0;r<4;r++)C=R[l=M[a++]],2!==r&&_.vertexColors.push(new ie(C)),0!==r&&S.vertexColors.push(new ie(C));t.faces.push(_),t.faces.push(S)}else{if((w=new ge).a=M[a++],w.b=M[a++],w.c=M[a++],h&&(d=M[a++],w.materialIndex=d),o=t.faces.length,m)for(r=0;r<O;r++)for(k=e.uvs[r],t.faceVertexUvs[r][o]=[],i=0;i<3;i++)P=new z(k[2*(c=M[a++])],k[2*c+1]),t.faceVertexUvs[r][o].push(P);if(g&&(u=3*M[a++],w.normal.set(T[u++],T[u++],T[u])),v)for(r=0;r<3;r++)u=3*M[a++],E=new U(T[u++],T[u++],T[u]),w.vertexNormals.push(E);if(y&&(l=M[a++],w.color.setHex(R[l])),b)for(r=0;r<3;r++)l=M[a++],w.vertexColors.push(new ie(R[l]));t.faces.push(w)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n){var o=e.skinWeights[r],a=n>1?e.skinWeights[r+1]:0,s=n>2?e.skinWeights[r+2]:0,l=n>3?e.skinWeights[r+3]:0;t.skinWeights.push(new q(o,a,s,l))}if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=n){var u=e.skinIndices[r],c=n>1?e.skinIndices[r+1]:0,d=n>2?e.skinIndices[r+2]:0,f=n>3?e.skinIndices[r+3]:0;t.skinIndices.push(new q(u,c,d,f))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,l=a.length;s<l;s+=3){var u=new U;u.x=a[s]*n,u.y=a[s+1]*n,u.z=a[s+2]*n,o.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=t.faces,d=e.morphColors[0].colors;for(r=0,i=c.length;r<i;r++)c[r].color.fromArray(d,3*r)}}(e,n),function(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=yo.parseAnimation(r[i],t.bones);o&&n.push(o)}if(t.morphTargets){var a=yo.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:So.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(function(e){this.manager=void 0!==e?e:bi,this.texturePath=""}.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new wi(i.manager).load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")}),n,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new qi).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Eo,i=new wo,o=0,a=e.length;o<a;o++){var s,l=e[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new ai[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new ai[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new ai[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new ai[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new ai[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new ai[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new ai[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new ai[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new ai[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new ai[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new ai[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new ai[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],c=0,d=l.shapes.length;c<d;c++){var f=t[l.shapes[c]];u.push(f)}s=new ai[l.type](u,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],c=0,d=l.shapes.length;c<d;c++){f=t[l.shapes[c]];u.push(f)}var p=l.options.extrudePath;void 0!==p&&(l.options.extrudePath=(new Gi[p.type]).fromJSON(p)),s=new ai[l.type](u,l.options);break;case"BufferGeometry":s=i.parse(l);break;case"Geometry":s=r.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),!0===s.isBufferGeometry&&void 0!==l.userData&&(s.userData=l.userData),n[l.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new xo;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=e[i];if("MultiMaterial"===a.type){for(var s=[],l=0;l<a.materials.length;l++)s.push(r.parse(a.materials[l]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=yo.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemEnd(e),n.manager.itemError(e)}))}if(void 0!==e&&e.length>0){var o=new _i(new yi(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],u=l.url;if(Array.isArray(u)){r[l.uuid]=[];for(var c=0,d=u.length;c<d;c++){var f=u[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.texturePath+f;r[l.uuid].push(i(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;r[l.uuid]=i(p)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new tt(t[s.image]):new $(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,Po)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],Mo),a.wrapT=n(s.wrap[1],Mo)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,Ao)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,Ao)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new An,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new ie(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Mn(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Pn(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new _n(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new he(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new no(e.color,e.intensity);break;case"DirectionalLight":r=new to(e.color,e.intensity);break;case"PointLight":r=new Ji(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new ro(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new Qi(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new Ki(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new Nn(a,s):new Ve(a,s);break;case"LOD":r=new Ln;break;case"Line":r=new zn(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new Hn(i(e.geometry),o(e.material));break;case"LineSegments":r=new jn(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Vn(i(e.geometry),o(e.material));break;case"Sprite":r=new On(o(e.material));break;case"Group":r=new wn;break;default:r=new fe}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,u=0;u<l.length;u++)r.add(this.parseObject(l[u],t,n));if("LOD"===e.type)for(var c=e.levels,d=0;d<c.length;d++){var f=c[d],p=r.getObjectByProperty("uuid",f.object);void 0!==p&&r.addLevel(p,f.distance)}return r}});var ko,Po={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Mo={RepeatWrapping:p,ClampToEdgeWrapping:h,MirroredRepeatWrapping:m},Ao={NearestFilter:g,NearestMipMapNearestFilter:v,NearestMipMapLinearFilter:y,LinearFilter:b,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:x};function To(){this.type="ShapePath",this.color=new ie,this.subPaths=[],this.currentPath=null}function Ro(e){this.type="Font",this.data=e}function Io(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,l,u,c,d,f,p,h=new To;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,v=m.length;g<v;){switch(m[g++]){case"m":a=m[g++]*t+n,s=m[g++]*t+r,h.moveTo(a,s);break;case"l":a=m[g++]*t+n,s=m[g++]*t+r,h.lineTo(a,s);break;case"q":l=m[g++]*t+n,u=m[g++]*t+r,c=m[g++]*t+n,d=m[g++]*t+r,h.quadraticCurveTo(c,d,l,u);break;case"b":l=m[g++]*t+n,u=m[g++]*t+r,c=m[g++]*t+n,d=m[g++]*t+r,f=m[g++]*t+n,p=m[g++]*t+r,h.bezierCurveTo(c,d,f,p,l,u)}}return{offsetX:o.ha*t,path:h}}}Object.assign(To.prototype,{moveTo:function(e,t){this.currentPath=new $i,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new qi;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],l=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],l=-l,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=u*(e.x-a.x)-l*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=Dr.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,l,u=[];if(1===o.length)return s=o[0],(l=new qi).curves=s.curves,u.push(l),u;var c=!i(o[0].getPoints());c=e?!c:c;var d,f,p=[],h=[],m=[],g=0;h[g]=void 0,m[g]=[];for(var v=0,y=o.length;v<y;v++)a=i(d=(s=o[v]).getPoints()),(a=e?!a:a)?(!c&&h[g]&&g++,h[g]={s:new qi,p:d},h[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:d[0]});if(!h[0])return n(o);if(h.length>1){for(var b=!1,x=[],w=0,_=h.length;w<_;w++)p[w]=[];for(w=0,_=h.length;w<_;w++)for(var S=m[w],C=0;C<S.length;C++){for(var E=S[C],k=!0,P=0;P<h.length;P++)r(E.p,h[P].p)&&(w!==P&&x.push({froms:w,tos:P,hole:C}),k?(k=!1,p[P].push(E)):b=!0);k&&p[w].push(E)}x.length>0&&(b||(m=p))}v=0;for(var M=h.length;v<M;v++){l=h[v].s,u.push(l);for(var A=0,T=(f=m[v]).length;A<T;A++)l.holes.push(f[A].h)}return u}}),Object.assign(Ro.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,l=0,u=0;u<r.length;u++){var c=r[u];if("\n"===c)s=0,l-=o;else{var d=Io(c,i,s,l,n);s+=d.offsetX,a.push(d.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(function(e){this.manager=void 0!==e?e:bi}.prototype,{load:function(e,t,n,r){var i=this,o=new wi(this.manager);o.setPath(this.path),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new Ro(e)},setPath:function(e){return this.path=e,this}});var Oo=function(){return void 0===ko&&(ko=new(window.AudioContext||window.webkitAudioContext)),ko};function Lo(e){this.manager=void 0!==e?e:bi}function Do(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _n,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _n,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Fo(e,t,n){fe.call(this),this.type="CubeCamera";var r=90,i=new _n(r,1,e,t);i.up.set(0,-1,0),i.lookAt(new U(1,0,0)),this.add(i);var o=new _n(r,1,e,t);o.up.set(0,-1,0),o.lookAt(new U(-1,0,0)),this.add(o);var a=new _n(r,1,e,t);a.up.set(0,0,1),a.lookAt(new U(0,1,0)),this.add(a);var s=new _n(r,1,e,t);s.up.set(0,0,-1),s.lookAt(new U(0,-1,0)),this.add(s);var l=new _n(r,1,e,t);l.up.set(0,-1,0),l.lookAt(new U(0,0,1)),this.add(l);var u=new _n(r,1,e,t);u.up.set(0,-1,0),u.lookAt(new U(0,0,-1)),this.add(u);var c={format:P,magFilter:b,minFilter:b};this.renderTarget=new K(n,n,c),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,o,n),n.activeCubeFace=2,e.render(t,a,n),n.activeCubeFace=3,e.render(t,s,n),n.activeCubeFace=4,e.render(t,l,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function No(){fe.call(this),this.type="AudioListener",this.context=Oo(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Bo(e){fe.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function zo(e){Bo.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function jo(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Ho(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(Lo.prototype,{load:function(e,t,n,r){var i=new wi(this.manager);i.setResponseType("arraybuffer"),i.load(e,(function(e){var n=e.slice(0);Oo().decodeAudioData(n,(function(e){t(e)}))}),n,r)}}),Object.assign(Do.prototype,{update:function(){var e,t,n,r,i,o,a,s,l=new j,u=new j;return function(c){if(e!==this||t!==c.focus||n!==c.fov||r!==c.aspect*this.aspect||i!==c.near||o!==c.far||a!==c.zoom||s!==this.eyeSep){e=this,t=c.focus,n=c.fov,r=c.aspect*this.aspect,i=c.near,o=c.far,a=c.zoom;var d,f,p=c.projectionMatrix.clone(),h=(s=this.eyeSep/2)*i/t,m=i*Math.tan(B.DEG2RAD*n*.5)/a;u.elements[12]=-s,l.elements[12]=s,d=-m*r+h,f=m*r+h,p.elements[0]=2*i/(f-d),p.elements[8]=(f+d)/(f-d),this.cameraL.projectionMatrix.copy(p),d=-m*r-h,f=m*r-h,p.elements[0]=2*i/(f-d),p.elements[8]=(f+d)/(f-d),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(l)}}()}),Fo.prototype=Object.create(fe.prototype),Fo.prototype.constructor=Fo,No.prototype=Object.assign(Object.create(fe.prototype),{constructor:No,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new U,t=new H,n=new U,r=new U;return function(i){fe.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),Bo.prototype=Object.assign(Object.create(fe.prototype),{constructor:Bo,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),zo.prototype=Object.assign(Object.create(Bo.prototype),{constructor:zo,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new U,t=new H,n=new U,r=new U;return function(i){fe.prototype.updateMatrixWorld.call(this,i);var o=this.panner;this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(jo.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Ho.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){H.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var Uo,Vo,Go="\\[\\]\\.:\\/";function Wo(e,t,n){var r=n||$o.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function $o(e,t,n){this.path=t,this.parsedPath=n||$o.parseTrackName(t),this.node=$o.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function qo(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:L,endingEnd:L},s=0;s!==i;++s){var l=r[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Xo(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ko(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Yo(){Ie.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Zo(e,t,n){Tn.call(this,e,t),this.meshPerAttribute=n||1}function Qo(e,t,n){be.call(this,e,t),this.meshPerAttribute=n||1}function Jo(e,t){return e.distance-t.distance}function ea(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)ea(i[o],t,n,!0)}function ta(e,t){this.min=void 0!==e?e:new z(1/0,1/0),this.max=void 0!==t?t:new z(-1/0,-1/0)}function na(e,t){this.start=void 0!==e?e:new U,this.end=void 0!==t?t:new U}function ra(e){fe.call(this),this.material=e,this.render=function(){}}function ia(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new Ie,u=new Pe(2*a*3,3);l.addAttribute("position",u),jn.call(this,l,new Bn({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function oa(e,t){fe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Ie,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Pe(r,3));var l=new Bn({fog:!1});this.cone=new jn(n,l),this.add(this.cone),this.update()}function aa(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,aa(e.children[n]));return t}function sa(e){for(var t=aa(e),n=new Ie,r=[],i=[],o=new ie(0,0,1),a=new ie(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new Pe(r,3)),n.addAttribute("color",new Pe(i,3));var u=new Bn({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});jn.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function la(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Wr(t,4,2),i=new ze({wireframe:!0,fog:!1});Ve.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ua(e,t){fe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Bn({fog:!1}),r=new Ie;r.addAttribute("position",new be(new Float32Array(15),3)),this.line=new zn(r,n),this.add(this.line),this.update()}function ca(e,t,n){fe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new nr(t);r.rotateY(.5*Math.PI),this.material=new ze({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new be(o,3)),this.add(new Ve(r,this.material)),this.update()}function da(e,t,n,r){e=e||10,t=t||10,n=new ie(void 0!==n?n:4473924),r=new ie(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],l=[],u=0,c=0,d=-a;u<=t;u++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);var f=u===i?n:r;f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3}var p=new Ie;p.addAttribute("position",new Pe(s,3)),p.addAttribute("color",new Pe(l,3));var h=new Bn({vertexColors:2});jn.call(this,p,h)}function fa(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new ie(void 0!==i?i:4473924),o=new ie(void 0!==o?o:8947848);var a,s,l,u,c,d,f,p=[],h=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,s),f=1&u?i:o,h.push(f.r,f.g,f.b),h.push(f.r,f.g,f.b);for(u=0;u<=n;u++)for(f=1&u?i:o,d=e-e/n*u,c=0;c<r;c++)l=c/r*(2*Math.PI),a=Math.sin(l)*d,s=Math.cos(l)*d,p.push(a,0,s),h.push(f.r,f.g,f.b),l=(c+1)/r*(2*Math.PI),a=Math.sin(l)*d,s=Math.cos(l)*d,p.push(a,0,s),h.push(f.r,f.g,f.b);var m=new Ie;m.addAttribute("position",new Pe(p,3)),m.addAttribute("color",new Pe(h,3));var g=new Bn({vertexColors:2});jn.call(this,m,g)}function pa(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Ie,u=new Pe(2*a*3,3);l.addAttribute("position",u),jn.call(this,l,new Bn({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ha(e,t,n){fe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Ie;r.addAttribute("position",new Pe([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Bn({fog:!1});this.lightPlane=new zn(r,i),this.add(this.lightPlane),(r=new Ie).addAttribute("position",new Pe([0,0,0,0,0,1],3)),this.targetLine=new zn(r,i),this.add(this.targetLine),this.update()}function ma(e){var t=new Ie,n=new Bn({color:16777215,vertexColors:1}),r=[],i=[],o={},a=new ie(16755200),s=new ie(16711680),l=new ie(43775),u=new ie(16777215),c=new ie(3355443);function d(e,t,n){f(e,n),f(t,n)}function f(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",u),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c),t.addAttribute("position",new Pe(r,3)),t.addAttribute("color",new Pe(i,3)),jn.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function ga(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Ie;i.setIndex(new be(n,1)),i.addAttribute("position",new be(r,3)),jn.call(this,i,new Bn({color:t})),this.matrixAutoUpdate=!1,this.update()}function va(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Ie;i.setIndex(new be(r,1)),i.addAttribute("position",new Pe([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),jn.call(this,i,new Bn({color:n})),this.geometry.computeBoundingSphere()}function ya(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new Ie;i.addAttribute("position",new Pe([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),zn.call(this,i,new Bn({color:r}));var o=new Ie;o.addAttribute("position",new Pe([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Ve(o,new ze({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function ba(e,t,n,r,i,o){fe.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Uo&&((Uo=new Ie).addAttribute("position",new Pe([0,0,0,0,1,0],3)),(Vo=new ti(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new zn(Uo,new Bn({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ve(Vo,new ze({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function xa(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Ie;n.addAttribute("position",new Pe(t,3)),n.addAttribute("color",new Pe([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new Bn({vertexColors:2});jn.call(this,n,r)}function wa(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Oi.call(this,e),this.type="catmullrom"}function _a(e){if("undefined"!==typeof window){var t=new RegExp(e+"=([^&#=]*)").exec(window.location.search);return t?decodeURIComponent(t[1]):void 0}}function Sa(e,t){return void 0!==e?e:t}function Ca(e,t){var n=Object.assign({},e);for(var r in t){void 0===e[r]&&(n[r]=t[r])}return n}function Ea(e,t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}return e}function ka(e,t){t=Sa(t,[]);for(var n=0;n<e.length;n++)Array.isArray(e[n])?ka(e[n],t):t.push(e[n]);return t}function Pa(){var e=window.location.protocol;return null===e.match(/http(s)?:/gi)?"http:":e}function Ma(){if("undefined"===typeof window)return!1;var e=window.navigator.userAgent;return/Opera|OPR/.test(e)?"Opera":/Chrome/i.test(e)?"Chrome":/Firefox/i.test(e)?"Firefox":/Mobile(\/.*)? Safari/i.test(e)?"Mobile Safari":/MSIE/i.test(e)?"Internet Explorer":!!/Safari/i.test(e)&&"Safari"}function Aa(e){window.open(e,"_blank")||(window.location.href=e)}function Ta(e,t){if(void 0===t&&(t="download"),e){var n="Safari"===Ma(),r=/CriOS\/[\d]+/.test(window.navigator.userAgent),i=document.createElement("a");if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e,t);else if((n||r)&&FileReader)if(e instanceof Blob){var o=new FileReader;o.onloadend=function(){s(o.result)},o.readAsDataURL(e)}else s(e);else{var a=!1;e instanceof Blob&&(e=URL.createObjectURL(e),a=!0),"download"in i?(i.style.display="hidden",document.body.appendChild(i),i.href=e,i.download=t,i.target="_blank",i.click(),document.body.removeChild(i)):Aa(e),a&&window.URL.revokeObjectURL(e)}}function s(e){Aa(r?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"))}}function Ra(e,t,n){var r,i,o,a=null,s=0;function l(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(r,i),a||(r=i=null)}return n||(n={}),function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=t-(u-s);return r=this,i=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=u,o=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(l,c)),o}}function Ia(e,t){return e<t?-1:e>t?1:0}function Oa(e,t,n){void 0===n&&(n=Ia);for(var r=0,i=e.length-1;r<=i;){var o=r+i>>1,a=n(t,e[o]);if(a>0)r=o+1;else{if(!(a<0))return o;i=o-1}}return-r-1}function La(e,t,n){var r=function(e,t){var n=e.length-1;if(e[n]<t)return-1;for(var r=0;r<=n;){var i=r+n>>1;e[i]>=t?n=i-1:r=i+1}return n+1}(e,t),i=function(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length-1;n<=r;){var i=n+r>>1;e[i]>t?r=i-1:n=i+1}return n-1}(e,n);return-1===r||-1===i||r>i?0:i-r+1}function Da(e){return e.sort().filter((function(e,t,n){return 0===t||e!==n[t-1]}))}function Fa(e){var t=28672;if(e.length>t){for(var n=[],r=0;r<e.length;r+=t)n.push(String.fromCharCode.apply(null,e.subarray(r,r+t)));return n.join("")}return String.fromCharCode.apply(null,e)}function Na(e,t){switch(e){case"int8":return new Int8Array(t);case"int16":return new Int16Array(t);case"int32":return new Int32Array(t);case"uint8":return new Uint8Array(t);case"uint16":return new Uint16Array(t);case"uint32":return new Uint32Array(t);case"float32":return new Float32Array(t);default:throw new Error("arrayType unknown: "+e)}}function Ba(e,t){return new(t>65535?Uint32Array:Uint16Array)(e)}function za(e){return e.buffer&&e.buffer instanceof ArrayBuffer?e.buffer:e}function ja(e,t){return void 0===e?e=new t:Array.isArray(e)&&(e=(new t).fromArray(e)),e}function Ha(e){return ja(e,U)}function Ua(e){return ja(e,j)}function Va(e){return ja(e,H)}function Ga(e){return t=e,n=Float32Array,t instanceof n?t:new n(t);var t,n}function Wa(e){return Sa(e,"").toString().toLowerCase()}Object.assign(Wo.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign($o,{Composite:Wo,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new $o.Composite(e,t,n):new $o(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+Go+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Go+"]",t="[^"+Go.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),r=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}),Object.assign($o.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=$o.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign($o.prototype,{_getValue_unbound:$o.prototype.getValue,_setValue_unbound:$o.prototype.setValue}),Object.assign(function(){var e=arguments;this.uuid=B.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[e[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=arguments,t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length,u=void 0,c=0,d=arguments.length;c!==d;++c){var f=e[c],p=f.uuid,h=i[p];if(void 0===h){h=n++,i[p]=h,t.push(f);for(var m=0,g=l;m!==g;++m)s[m].push(new $o(f,o[m],a[m]))}else if(h<r){u=t[h];var v=--r,y=t[v];i[y.uuid]=h,t[h]=y,i[p]=v,t[v]=f;for(m=0,g=l;m!==g;++m){var b=s[m],x=b[v],w=b[h];b[h]=x,void 0===w&&(w=new $o(f,o[m],a[m])),b[v]=w}}else t[h]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=arguments,t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var l=e[a],u=l.uuid,c=r[u];if(void 0!==c&&c>=n){var d=n++,f=t[d];r[f.uuid]=c,t[c]=f,r[u]=d,t[d]=l;for(var p=0,h=o;p!==h;++p){var m=i[p],g=m[d],v=m[c];m[c]=g,m[d]=v}}}this.nCachedObjects_=n},uncache:function(){for(var e=arguments,t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,l=arguments.length;s!==l;++s){var u=e[s],c=u.uuid,d=i[c];if(void 0!==d)if(delete i[c],d<r){var f=--r,p=t[f],h=t[b=--n];i[p.uuid]=d,t[d]=p,i[h.uuid]=f,t[f]=h,t.pop();for(var m=0,g=a;m!==g;++m){var v=(x=o[m])[f],y=x[b];x[d]=v,x[f]=y,x.pop()}}else{var b;i[(h=t[b=--n]).uuid]=d,t[d]=h,t.pop();for(m=0,g=a;m!==g;++m){var x;(x=o[m])[d]=x[b],x.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(c);for(var d=u,f=s.length;d!==f;++d){var p=s[d];c[d]=new $o(p,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(qo.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,d=l.length;c!==d;++c)l[c].evaluate(a),u[c].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=2202===r;if(0===e)return-1===i?t:o&&1===(1&i)?n-t:t;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=D,r.endingEnd=D):(r.endingStart=e?this.zeroSlopeAtStart?D:L:F,r.endingEnd=t?this.zeroSlopeAtEnd?D:L:F)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Xo.prototype=Object.assign(Object.create(f.prototype),{constructor:Xo,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var d=r[c],f=d.name,p=u[f];if(void 0!==p)o[c]=p;else{if(void 0!==(p=o[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,f));continue}var h=t&&t._propertyBindings[c].binding.parsedPath;++(p=new Ho($o.create(n,f,h),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(p,s,f),o[c]=p}a[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i];e:{for(var u in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new so(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?yo.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[r];if(void 0!==l)return l;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new qo(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?yo.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=this,n=e.uuid,r=this._actionsByClip;for(var i in r){var o=r[i].actionByRoot[n];void 0!==o&&(t._deactivateAction(o),t._removeInactiveAction(o))}var a=this._bindingsByRootAndName[n];if(void 0!==a)for(var s in a){var l=a[s];l.restoreOriginalState(),t._removeInactiveBinding(l)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Ko.prototype.clone=function(){return new Ko(void 0===this.value.clone?this.value:this.value.clone())},Yo.prototype=Object.assign(Object.create(Ie.prototype),{constructor:Yo,isInstancedBufferGeometry:!0,copy:function(e){return Ie.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Zo.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Zo,isInstancedInterleavedBuffer:!0,copy:function(e){return Tn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Qo.prototype=Object.assign(Object.create(be.prototype),{constructor:Qo,isInstancedBufferAttribute:!0,copy:function(e){return be.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(function(e,t,n,r){this.ray=new He(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return ea(e,this,r,t),r.sort(Jo),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)ea(e[i],this,r,t);return r.sort(Jo),r}}),Object.assign(function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(B.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(ta.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new z;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new z),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new z),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new z),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new z),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new z;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(na.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new U),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new U),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new U),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new U,t=new U;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e)/i;return r&&(o=B.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new U),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),ra.prototype=Object.create(fe.prototype),ra.prototype.constructor=ra,ra.prototype.isImmediateRenderObject=!0,ia.prototype=Object.create(jn.prototype),ia.prototype.constructor=ia,ia.prototype.update=function(){var e=new U,t=new U,n=new V;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,u=0,c=0,d=l.length;c<d;c++)for(var f=l[c],p=0,h=f.vertexNormals.length;p<h;p++){var m=s[f[r[p]]],g=f.vertexNormals[p];e.copy(m).applyMatrix4(i),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,y=a.attributes.normal;for(u=0,p=0,h=v.count;p<h;p++)e.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(i),t.set(y.getX(p),y.getY(p),y.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}o.needsUpdate=!0}}(),oa.prototype=Object.create(fe.prototype),oa.prototype.constructor=oa,oa.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},oa.prototype.update=function(){var e=new U,t=new U;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),sa.prototype=Object.create(jn.prototype),sa.prototype.constructor=sa,sa.prototype.updateMatrixWorld=function(){var e=new U,t=new j,n=new j;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<i.length;s++){var u=i[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}o.getAttribute("position").needsUpdate=!0,fe.prototype.updateMatrixWorld.call(this,r)}}(),la.prototype=Object.create(Ve.prototype),la.prototype.constructor=la,la.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},la.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ua.prototype=Object.create(fe.prototype),ua.prototype.constructor=ua,ua.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ua.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},ca.prototype=Object.create(fe.prototype),ca.prototype.constructor=ca,ca.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ca.prototype.update=function(){var e=new U,t=new ie,n=new ie;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),da.prototype=Object.create(jn.prototype),da.prototype.constructor=da,fa.prototype=Object.create(jn.prototype),fa.prototype.constructor=fa,pa.prototype=Object.create(jn.prototype),pa.prototype.constructor=pa,pa.prototype.update=function(){var e=new U,t=new U,n=new V;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,u=0,c=s.length;u<c;u++){var d=s[u],f=d.normal;e.copy(a[d.a]).add(a[d.b]).add(a[d.c]).divideScalar(3).applyMatrix4(r),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(l,e.x,e.y,e.z),l+=1,i.setXYZ(l,t.x,t.y,t.z),l+=1}i.needsUpdate=!0}}(),ha.prototype=Object.create(fe.prototype),ha.prototype.constructor=ha,ha.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ha.prototype.update=function(){var e=new U,t=new U,n=new U;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),ma.prototype=Object.create(jn.prototype),ma.prototype.constructor=ma,ma.prototype.update=function(){var e,t,n=new U,r=new pe;function i(i,o,a,s){n.set(o,a,s).unproject(r);var l=t[i];if(void 0!==l)for(var u=e.getAttribute("position"),c=0,d=l.length;c<d;c++)u.setXYZ(l[c],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),ga.prototype=Object.create(jn.prototype),ga.prototype.constructor=ga,ga.prototype.update=function(){var e=new Z;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ga.prototype.setFromObject=function(e){return this.object=e,this.update(),this},va.prototype=Object.create(jn.prototype),va.prototype.constructor=va,va.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),fe.prototype.updateMatrixWorld.call(this,e))},ya.prototype=Object.create(zn.prototype),ya.prototype.constructor=ya,ya.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),fe.prototype.updateMatrixWorld.call(this,e)},ba.prototype=Object.create(fe.prototype),ba.prototype.constructor=ba,ba.prototype.setDirection=function(){var e,t=new U;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),ba.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},ba.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},xa.prototype=Object.create(jn.prototype),xa.prototype.constructor=xa,Ei.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ei.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Wi.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new ye,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new U(i.x,i.y,i.z||0))}return t}}),Object.assign($i.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),wa.prototype=Object.create(Oi.prototype),Object.assign(wa.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),da.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},sa.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(So.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Co(e)}}),Object.assign(ta.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Z.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),na.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(B,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),B.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),B.ceilPowerOfTwo(e)}}),Object.assign(V.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(j.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new U),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),J.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},H.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(He.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Ue.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Ue,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ue.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ue.getNormal(e,t,n,r)}}),Object.assign(qi.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Br(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Yr(this,e)}}),Object.assign(z.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(U.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(q.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ye.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(fe.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(fe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ln.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Dn.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ei.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),_n.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Xi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(be.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Ie.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ie.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(zr.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Ko.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Be.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ie}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(di.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(je.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(kn.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(kn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(vn.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(X.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Cn.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Bo.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Lo).load(e,(function(e){t.setBuffer(e)})),this},jo.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Fo.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},G.crossOrigin=void 0,G.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ci;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},G.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Si;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},G.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},G.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var $a=function(e){this.name=e,this._dict={}},qa={names:{configurable:!0}};function Xa(e){return.01745*e}$a.prototype.add=function(e,t){this._dict[Wa(e)]=t},$a.prototype.get=function(e){return this._dict[Wa(e)]},qa.names.get=function(){return Object.keys(this._dict)},Object.defineProperties($a.prototype,qa);var Ka="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Ya=new Array(36);function Za(){for(var e,t=0,n=0;n<36;n++)8===n||13===n||18===n||23===n?Ya[n]="-":14===n?Ya[n]="4":(t<=2&&(t=33554432+16777216*Math.random()|0),e=15&t,t>>=4,Ya[n]=Ka[19===n?3&e|8:e]);return Ya.join("")}function Qa(e,t,n){return Math.max(t,Math.min(n,e))}function Ja(e){return Qa(e,0,100)}function es(e,t,n){return e+(t-e)*n}function ts(e,t,n,r,i,o){var a=(n-e)*o,s=(r-t)*o,l=i*i;return(2*t-2*n+a+s)*(i*l)+(-3*t+3*n-2*a-s)*l+a*i+t}function ns(e,t,n){var r;return r=function(e,t,n){return(e-t)/(n-t)}(n,e,t),(n=Qa(r,0,1))*n*(3-2*n)}var rs="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function is(e,t){return e(t={exports:{}},t.exports),t.exports}var os=is((function(e,t){(function(){var n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,_,S,C,E,k,P,M,A,T,R,I,O,L,D,F,N,B,z,j,H,U,V,G,W,$,q,X,K,Y,Z,Q,J,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,de,fe,pe,he,ge,ve,ye,be,xe,we,_e,Se,Ce,Ee,ke,Pe,Me,Ae=[].slice;Ce=function(){var e,t,n,r,i;for(e={},r=0,t=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;r<t;r++)n=i[r],e["[object "+n+"]"]=n.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),X=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),e>n&&(e=n),e},Ee=function(e){return e.length>=3?Array.prototype.slice.call(e):e[0]},_=function(e){var t,n;for(e._clipped=!1,e._unclipped=e.slice(0),t=n=0;n<3;t=++n)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e._clipped||delete e._unclipped,e},o=Math.PI,be=Math.round,C=Math.cos,A=Math.floor,ne=Math.pow,K=Math.log,we=Math.sin,_e=Math.sqrt,m=Math.atan2,Q=Math.max,h=Math.abs,l=2*o,a=o/3,r=o/180,s=180/o,w=function(){return arguments[0]instanceof n?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,arguments,(function(){}))},w.default=w,p=[],null!==e&&null!=e.exports&&(e.exports=w),(null!==t?t:this).chroma=w,w.version="1.3.7",f={},c=[],d=!1,n=function(){function e(){var e,t,n,r,i,o,a,s,l,u=arguments;for(o=this,t=[],s=0,r=arguments.length;s<r;s++)null!=(e=u[s])&&t.push(e);if(t.length>1&&(a=t[t.length-1]),null!=f[a])o._rgb=_(f[a](Ee(t.slice(0,-1))));else{for(d||(c=c.sort((function(e,t){return t.p-e.p})),d=!0),l=0,i=c.length;l<i&&!(a=(n=c[l]).test.apply(n,t));l++);a&&(o._rgb=_(f[a].apply(f,t)))}null==o._rgb&&console.warn("unknown format: "+t),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e.prototype.clone=function(){return w(me._rgb)},e}(),w._input=f,w.brewer=b={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],b)t.push(b[e.toLowerCase()]=b[e])}(),w.colors=ke={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},V=function(){var e,t,n,r,o,a,s;return r=(t=Ee(arguments))[0],e=t[1],n=t[2],a=(r+16)/116,o=isNaN(e)?a:a+e/500,s=isNaN(n)?a:a-n/200,a=i.Yn*G(a),o=i.Xn*G(o),s=i.Zn*G(s),[Me(3.2404542*o-1.5371385*a-.4985314*s),Me(-.969266*o+1.8760108*a+.041556*s),n=Me(.0556434*o-.2040259*a+1.0572252*s),t.length>3?t[3]:1]},Me=function(e){return 255*(e<=.00304?12.92*e:1.055*ne(e,1/2.4)-.055)},G=function(e){return e>i.t1?e*e*e:i.t2*(e-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ce=function(){var e,t,n,r,i,o,a;return n=(r=Ee(arguments))[0],t=r[1],e=r[2],o=(i=ge(n,t,e))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},ve=function(e){return(e/=255)<=.04045?e/12.92:ne((e+.055)/1.055,2.4)},Pe=function(e){return e>i.t3?ne(e,1/3):e/i.t2+i.t0},ge=function(){var e,t,n,r;return n=(r=Ee(arguments))[0],t=r[1],e=r[2],n=ve(n),t=ve(t),e=ve(e),[Pe((.4124564*n+.3575761*t+.1804375*e)/i.Xn),Pe((.2126729*n+.7151522*t+.072175*e)/i.Yn),Pe((.0193339*n+.119192*t+.9503041*e)/i.Zn)]},w.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["lab"]),(function(){}))},f.lab=V,n.prototype.lab=function(){return ce(this._rgb)},g=function(e){var t,n,r,i,o,a,s,l,u,c,d;return 2===(e=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(w(i));return r}()).length?(u=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=u[0],a=u[1],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push(o[t]+e*(a[t]-o[t]));return r}(),w.lab.apply(w,n)}):3===e.length?(c=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=c[0],a=c[1],s=c[2],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*o[t]+2*(1-e)*e*a[t]+e*e*s[t]);return r}(),w.lab.apply(w,n)}):4===e.length?(d=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=d[0],a=d[1],s=d[2],l=d[3],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]);return r}(),w.lab.apply(w,n)}):5===e.length&&(n=g(e.slice(0,3)),r=g(e.slice(2,5)),t=function(e){return e<.5?n(2*e):r(2*(e-.5))}),t},w.bezier=function(e){var t;return(t=g(e)).scale=function(){return w.scale(t)},t},w.cubehelix=function(e,t,n,r,i){var o,a,s;return null==e&&(e=300),null==t&&(t=-1.5),null==n&&(n=1),null==r&&(r=1),null==i&&(i=[0,1]),o=0,"array"===Ce(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(s=function(s){var u,c,d,f,p;return u=l*((e+120)/360+t*s),f=ne(i[0]+a*s,r),c=(0!==o?n[0]+s*o:n)*f*(1-f)/2,d=C(u),p=we(u),w(_([255*(f+c*(-.14861*d+1.78277*p)),255*(f+c*(-.29227*d-.90649*p)),255*(f+c*(1.97294*d))]))}).start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:("array"===Ce(n=e)?0===(o=n[1]-n[0])&&(n=n[1]):o=0,s)},s.lightness=function(e){return null==e?i:("array"===Ce(e)?(i=e,a=e[1]-e[0]):(i=[e,e],a=0),s)},s.scale=function(){return w.scale(s)},s.hue(n),s},w.random=function(){var e,t;for("0123456789abcdef",e="#",t=0;t<6;++t)e+="0123456789abcdef".charAt(A(16*Math.random()));return new n(e)},p=[],F=function(e,t,n,r){var i,o,a,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==Ce(e)&&(e=w(e)),"object"!==Ce(t)&&(t=w(t)),a=0,o=p.length;a<o;a++)if(r===(i=p[a])[0]){s=i[1](e,t,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(e.alpha()+n*(t.alpha()-e.alpha()))},w.interpolate=F,n.prototype.interpolate=function(e,t,n){return F(this,e,t,n)},w.mix=F,n.prototype.mix=n.prototype.interpolate,f.rgb=function(){var e,t,n,r;for(e in n=[],t=Ee(arguments))r=t[e],n.push(r);return n},w.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["rgb"]),(function(){}))},n.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},c.push({p:3,test:function(e){var t;return t=Ee(arguments),"array"===Ce(t)&&3===t.length||4===t.length&&"number"===Ce(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),f.lrgb=f.rgb,z=function(e,t,r,i){var o,a;return o=e._rgb,a=t._rgb,new n(_e(ne(o[0],2)*(1-r)+ne(a[0],2)*r),_e(ne(o[1],2)*(1-r)+ne(a[1],2)*r),_e(ne(o[2],2)*(1-r)+ne(a[2],2)*r),i)},u=function(e){var t,r,i,o,a;for(t=1/e.length,a=[0,0,0,0],i=0,r=e.length;i<r;i++)o=e[i]._rgb,a[0]+=ne(o[0],2)*t,a[1]+=ne(o[1],2)*t,a[2]+=ne(o[2],2)*t,a[3]+=o[3]*t;return a[0]=_e(a[0]),a[1]=_e(a[1]),a[2]=_e(a[2]),new n(a)},p.push(["lrgb",z]),w.average=function(e,t){var n,r,i,a,s,l,c,d,f,p,h,g,v;if(null==t&&(t="rgb"),f=e.length,e=e.map((function(e){return w(e)})),c=e.splice(0,1)[0],"lrgb"===t)return u(e);for(d in a=[],s=0,l=0,g=c.get(t))g[d]=g[d]||0,a.push(isNaN(g[d])?0:1),"h"!==t.charAt(d)||isNaN(g[d])||(n=g[d]/180*o,s+=C(n),l+=we(n));for(r=c.alpha(),h=0,p=e.length;h<p;h++)for(d in v=(i=e[h]).get(t),r+=i.alpha(),g)isNaN(v[d])||(a[d]+=1,"h"===t.charAt(d)?(n=v[d]/180*o,s+=C(n),l+=we(n)):g[d]+=v[d]);for(d in g)if("h"===t.charAt(d)){for(n=m(l/a[d],s/a[d])/o*180;n<0;)n+=360;for(;n>=360;)n-=360;g[d]=n}else g[d]=g[d]/a[d];return w(g,t).alpha(r/f)},R=function(e){var t,n;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(n=parseInt(e,16))>>16,n>>8&255,255&n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(n=parseInt(e,16))>>24&255,n>>16&255,n>>8&255,be((255&n)/255*100)/100];if(null!=f.css&&(t=f.css(e)))return t;throw"unknown color: "+e},ae=function(e,t){var n,r,i,o,a,s;return null==t&&(t="rgb"),a=e[0],i=e[1],r=e[2],n=e[3],a=Math.round(a),i=Math.round(i),r=Math.round(r),s=(s="000000"+(a<<16|i<<8|r).toString(16)).substr(s.length-6),o=(o="0"+be(255*n).toString(16)).substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},f.hex=function(e){return R(e)},w.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["hex"]),(function(){}))},n.prototype.hex=function(e){return null==e&&(e="rgb"),ae(this._rgb,e)},c.push({p:4,test:function(e){if(1===arguments.length&&"string"===Ce(e))return"hex"}}),L=function(){var e,t,n,r,i,o,a,s,l,u,c,d,f,p;if(i=(e=Ee(arguments))[0],c=e[1],a=e[2],0===c)l=r=t=255*a;else{for(n=[0,0,0],d=2*a-(f=a<.5?a*(1+c):a+c-a*c),(p=[0,0,0])[0]=(i/=360)+1/3,p[1]=i,p[2]=i-1/3,o=s=0;s<=2;o=++s)p[o]<0&&(p[o]+=1),p[o]>1&&(p[o]-=1),6*p[o]<1?n[o]=d+6*(f-d)*p[o]:2*p[o]<1?n[o]=f:3*p[o]<2?n[o]=d+(f-d)*(2/3-p[o])*6:n[o]=d;l=(u=[be(255*n[0]),be(255*n[1]),be(255*n[2])])[0],r=u[1],t=u[2]}return e.length>3?[l,r,t,e[3]]:[l,r,t]},le=function(e,t,n){var r,i,o,a,s;return void 0!==e&&e.length>=3&&(e=(a=e)[0],t=a[1],n=a[2]),e/=255,t/=255,n/=255,o=Math.min(e,t,n),i=((Q=Math.max(e,t,n))+o)/2,Q===o?(s=0,r=Number.NaN):s=i<.5?(Q-o)/(Q+o):(Q-o)/(2-Q-o),e===Q?r=(t-n)/(Q-o):t===Q?r=2+(n-e)/(Q-o):n===Q&&(r=4+(e-t)/(Q-o)),(r*=60)<0&&(r+=360),[r,s,i]},w.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["hsl"]),(function(){}))},f.hsl=L,n.prototype.hsl=function(){return le(this._rgb)},D=function(){var e,t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v;if(i=(e=Ee(arguments))[0],m=e[1],v=e[2],v*=255,0===m)l=r=t=v;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=v*(1-m),s=v*(1-m*(n=(i/=60)-(o=A(i)))),g=v*(1-m*(1-n)),o){case 0:l=(u=[v,g,a])[0],r=u[1],t=u[2];break;case 1:l=(c=[s,v,a])[0],r=c[1],t=c[2];break;case 2:l=(d=[a,v,g])[0],r=d[1],t=d[2];break;case 3:l=(f=[a,s,v])[0],r=f[1],t=f[2];break;case 4:l=(p=[g,a,v])[0],r=p[1],t=p[2];break;case 5:l=(h=[v,a,s])[0],r=h[1],t=h[2]}return[l,r,t,e.length>3?e[3]:1]},ue=function(){var e,t,n,r,i,o,a,s,l;return o=(a=Ee(arguments))[0],n=a[1],e=a[2],i=Math.min(o,n,e),t=(Q=Math.max(o,n,e))-i,l=Q/255,0===Q?(r=Number.NaN,s=0):(s=t/Q,o===Q&&(r=(n-e)/t),n===Q&&(r=2+(e-o)/t),e===Q&&(r=4+(o-n)/t),(r*=60)<0&&(r+=360)),[r,s,l]},w.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["hsv"]),(function(){}))},f.hsv=D,n.prototype.hsv=function(){return ue(this._rgb)},ee=function(e){return"number"===Ce(e)&&e>=0&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},pe=function(){var e;return((e=Ee(arguments))[0]<<16)+(e[1]<<8)+e[2]},w.num=function(e){return new n(e,"num")},n.prototype.num=function(e){return null==e&&(e="rgb"),pe(this._rgb,e)},f.num=ee,c.push({p:1,test:function(e){if(1===arguments.length&&"number"===Ce(e)&&e>=0&&e<=16777215)return"num"}}),T=function(){var e,t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b;if(s=(n=Ee(arguments))[0],i=n[1],t=n[2],a=a/100*255,e=255*(i/=100),0===i)d=a=r=t;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),c=(u=t*(1-i))+e*(1-(o=(s/=60)-(l=A(s)))),y=u+e*o,b=u+e,l){case 0:d=(f=[b,y,u])[0],a=f[1],r=f[2];break;case 1:d=(p=[c,b,u])[0],a=p[1],r=p[2];break;case 2:d=(h=[u,b,y])[0],a=h[1],r=h[2];break;case 3:d=(m=[u,c,b])[0],a=m[1],r=m[2];break;case 4:d=(g=[y,u,b])[0],a=g[1],r=g[2];break;case 5:d=(v=[b,u,c])[0],a=v[1],r=v[2]}return[d,a,r,n.length>3?n[3]:1]},oe=function(){var e,t,n,r,i,o,a,s,l;return s=(l=Ee(arguments))[0],i=l[1],t=l[2],a=Math.min(s,i,t),n=100*(r=(Q=Math.max(s,i,t))-a)/255,e=a/(255-r)*100,0===r?o=Number.NaN:(s===Q&&(o=(i-t)/r),i===Q&&(o=2+(t-s)/r),t===Q&&(o=4+(s-i)/r),(o*=60)<0&&(o+=360)),[o,n,e]},w.hcg=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["hcg"]),(function(){}))},f.hcg=T,n.prototype.hcg=function(){return oe(this._rgb)},E=function(e){var t,n,r,i,o,a,s,l;if(e=e.toLowerCase(),null!=w.colors&&w.colors[e])return R(w.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=l=0;l<=3;i=++l)s[i]=+s[i];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=t=0;t<=2;i=++t)s[i]=be(2.55*s[i]);s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=n=0;n<=2;i=++n)s[i]=be(2.55*s[i]);s[3]=+s[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=L(r))[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=L(r))[3]=+o[4]);return s},ie=function(e){var t;return"rgb"===(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(be).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(be).join(",")+","+e[3]+")":void 0},ye=function(e){return be(100*e)/100},O=function(e,t){var n;return n=t<1?"hsla":"hsl",e[0]=ye(e[0]||0),e[1]=ye(100*e[1])+"%",e[2]=ye(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},f.css=function(e){return E(e)},w.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["css"]),(function(){}))},n.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?ie(this._rgb):"hsl"===e.slice(0,3)?O(this.hsl(),this.alpha()):void 0},f.named=function(e){return R(ke[e])},c.push({p:5,test:function(e){if(1===arguments.length&&null!=ke[e])return"named"}}),n.prototype.name=function(e){var t,n;for(n in arguments.length&&(ke[e]&&(this._rgb=R(ke[e])),this._rgb[3]=1),t=this.hex(),ke)if(t===ke[n])return n;return t},W=function(){var e,t,n,i;return n=(i=Ee(arguments))[0],e=i[1],t=i[2],[n,C(t*=r)*e,we(t)*e]},$=function(){var e,t,n,r,i,o,a,s,l;return a=(n=Ee(arguments))[0],i=n[1],o=n[2],e=(s=W(a,i,o))[0],t=s[1],r=s[2],[(l=V(e,t,r))[0],l[1],r=l[2],n.length>3?n[3]:1]},U=function(){var e,t,n,r,i,o;return i=(o=Ee(arguments))[0],e=o[1],t=o[2],n=_e(e*e+t*t),r=(m(t,e)*s+360)%360,0===be(1e4*n)&&(r=Number.NaN),[i,n,r]},de=function(){var e,t,n,r,i,o,a;return i=(o=Ee(arguments))[0],n=o[1],t=o[2],r=(a=ce(i,n,t))[0],e=a[1],t=a[2],U(r,e,t)},w.lch=function(){var e;return e=Ee(arguments),new n(e,"lch")},w.hcl=function(){var e;return e=Ee(arguments),new n(e,"hcl")},f.lch=$,f.hcl=function(){var e,t,n,r;return t=(r=Ee(arguments))[0],e=r[1],n=r[2],$([n,e,t])},n.prototype.lch=function(){return de(this._rgb)},n.prototype.hcl=function(){return de(this._rgb).reverse()},re=function(e){var t,n,r,i,o,a;return null==e&&(e="rgb"),o=(a=Ee(arguments))[0],r=a[1],t=a[2],r/=255,t/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(r,t))))*(n=i<1?1/(1-i):0),(1-r-i)*n,(1-t-i)*n,i]},S=function(){var e,t,n,r,i,o;return n=(t=Ee(arguments))[0],i=t[1],o=t[2],r=t[3],e=t.length>4?t[4]:1,1===r?[0,0,0,e]:[n>=1?0:255*(1-n)*(1-r),i>=1?0:255*(1-i)*(1-r),o>=1?0:255*(1-o)*(1-r),e]},f.cmyk=function(){return S(Ee(arguments))},w.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["cmyk"]),(function(){}))},n.prototype.cmyk=function(){return re(this._rgb)},f.gl=function(){var e,t,n,r,i;for(r=function(){var e,n;for(t in n=[],e=Ee(arguments))i=e[t],n.push(i);return n}.apply(this,arguments),e=n=0;n<=2;e=++n)r[e]*=255;return r},w.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["gl"]),(function(){}))},n.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},fe=function(e,t,n){var r;return e=(r=Ee(arguments))[0],t=r[1],n=r[2],.2126*(e=Y(e))+.7152*(t=Y(t))+.0722*(n=Y(n))},Y=function(e){return(e/=255)<=.03928?e/12.92:ne((e+.055)/1.055,2.4)},H=function(e,t,r,i){var o,a;return o=e._rgb,a=t._rgb,new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},p.push(["rgb",H]),n.prototype.luminance=function(e,t){var n,r,i,o,a;return null==t&&(t="rgb"),arguments.length?(o=this._rgb,0===e?o=[0,0,0,this._rgb[3]]:1===e?o=[255,255,255,this[3]]:(n=fe(this._rgb),r=1e-7,i=20,a=function(n,o){var s,l;return s=(l=n.interpolate(o,.5,t)).luminance(),Math.abs(e-s)<r||!i--?l:s>e?a(n,l):a(l,o)},o=n>e?a(w("black"),this).rgba():a(this,w("white")).rgba()),w(o).alpha(this.alpha())):fe(this._rgb)},Se=function(e){var t,n,r,i;return(i=e/100)<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*K(n),t=i<20?0:.8274096064007395*(t=i-10)-254.76935184120902+115.67994401066147*K(t)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*K(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*K(n),t=255),[r,n,t]},he=function(){var e,t,n,r,i,o,a,s;for(i=(o=Ee(arguments))[0],o[1],e=o[2],r=1e3,n=4e4,t=.4;n-r>t;)(a=Se(s=.5*(n+r)))[2]/a[0]>=e/i?n=s:r=s;return be(s)},w.temperature=w.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["temperature"]),(function(){}))},f.temperature=f.kelvin=f.K=Se,n.prototype.temperature=function(){return he(this._rgb)},n.prototype.kelvin=n.prototype.temperature,w.contrast=function(e,t){var r,i,o,a;return"string"!==(o=Ce(e))&&"number"!==o||(e=new n(e)),"string"!==(a=Ce(t))&&"number"!==a||(t=new n(t)),(r=e.luminance())>(i=t.luminance())?(r+.05)/(i+.05):(i+.05)/(r+.05)},w.distance=function(e,t,r){var i,o,a,s,l,u,c;for(o in null==r&&(r="lab"),"string"!==(l=Ce(e))&&"number"!==l||(e=new n(e)),"string"!==(u=Ce(t))&&"number"!==u||(t=new n(t)),a=e.get(r),s=t.get(r),c=0,a)c+=(i=(a[o]||0)-(s[o]||0))*i;return Math.sqrt(c)},w.deltaE=function(e,t,r,i){var a,s,l,u,c,d,f,p,g,v,y,b,x,w,_,S,E,k,P,M,A,T,R,I;for(null==r&&(r=1),null==i&&(i=1),"string"!==(_=Ce(e))&&"number"!==_||(e=new n(e)),"string"!==(S=Ce(t))&&"number"!==S||(t=new n(t)),a=(E=e.lab())[0],l=E[1],c=E[2],s=(k=t.lab())[0],u=k[1],d=k[2],f=_e(l*l+c*c),p=_e(u*u+d*d),M=a<16?.511:.040975*a/(1+.01765*a),P=.0638*f/(1+.0131*f)+.638,w=f<1e-6?0:180*m(c,l)/o;w<0;)w+=360;for(;w>=360;)w-=360;return A=w>=164&&w<=345?.56+h(.2*C(o*(w+168)/180)):.36+h(.4*C(o*(w+35)/180)),x=_e((g=f*f*f*f)/(g+1900)),_e((T=(a-s)/(r*M))*T+(R=(b=f-p)/(i*P))*R+((v=l-u)*v+(y=c-d)*y-b*b)/((I=P*(x*A+1-x))*I))},n.prototype.get=function(e){var t,n,r,i,o;return this,r=(i=e.split("."))[0],t=i[1],o=this[r](),t?(n=r.indexOf(t))>-1?o[n]:console.warn("unknown channel "+t+" in mode "+r):o},n.prototype.set=function(e,t){var n,r,i,o,a;if(this,i=(o=e.split("."))[0],n=o[1])if(a=this[i](),(r=i.indexOf(n))>-1)if("string"===Ce(t))switch(t.charAt(0)){case"+":case"-":a[r]+=+t;break;case"*":a[r]*=+t.substr(1);break;case"/":a[r]/=+t.substr(1);break;default:a[r]=+t}else a[r]=t;else console.warn("unknown channel "+n+" in mode "+i);else a=t;return w(a,i).alpha(this.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(e){return arguments.length?w.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},n.prototype.darken=function(e){var t;return null==e&&(e=1),this,(t=this.lab())[0]-=i.Kn*e,w.lab(t).alpha(this.alpha())},n.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(e){var t;return null==e&&(e=1),this,(t=this.lch())[1]+=e*i.Kn,t[1]<0&&(t[1]=0),w.lch(t).alpha(this.alpha())},n.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},n.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),w(t[0]*e,t[1]*e,t[2]*e,e)},J=function(e,t){return e*t/255},k=function(e,t){return e>t?t:e},q=function(e,t){return e>t?e:t},xe=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},te=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},x=function(e,t){return 255*(1-(1-t/255)/(e/255))},P=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},(v=function(e,t,n){if(!v[n])throw"unknown blend mode "+n;return v[n](e,t)}).normal=(y=function(e){return function(t,n){var r,i;return r=w(n).rgb(),i=w(t).rgb(),w(e(r,i),"rgb")}})((M=function(e){return function(t,n){var r,i,o;for(o=[],r=i=0;i<=3;r=++i)o[r]=e(t[r],n[r]);return o}})((function(e,t){return e}))),v.multiply=y(M(J)),v.screen=y(M(xe)),v.overlay=y(M(te)),v.darken=y(M(k)),v.lighten=y(M(q)),v.dodge=y(M(P)),v.burn=y(M(x)),w.blend=v,w.analyze=function(e){var t,n,r,i;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;n<t;n++)null==(i=e[n])||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return w.limits(r,e,t)},r},w.scale=function(e,t){var n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,_,S;return c="rgb",d=w("#ccc"),m=0,a=[0,1],h=[],p=[0,0],n=!1,i=[],f=!1,u=0,l=1,o=!1,r={},g=!0,s=1,_=function(e){var t,n,r,o,a,s;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===Ce(e)&&null!=w.brewer&&(e=w.brewer[e]||w.brewer[e.toLowerCase()]||e),"array"===Ce(e)){for(t=r=0,o=(e=e.slice(0)).length-1;0<=o?r<=o:r>=o;t=0<=o?++r:--r)n=e[t],"string"===Ce(n)&&(e[t]=w(n));for(h.length=0,t=s=0,a=e.length-1;0<=a?s<=a:s>=a;t=0<=a?++s:--s)h.push(t/(e.length-1))}return x(),i=e},y=function(e){var t,r;if(null!=n){for(r=n.length-1,t=0;t<r&&e>=n[t];)t++;return t-1}return 0},S=function(e){return e},b=function(e,t){var o,a,f,m,v,b,x;if(null==t&&(t=!1),isNaN(e))return d;if(x=t?e:n&&n.length>2?y(e)/(n.length-2):l!==u?(e-u)/(l-u):1,t||(x=S(x)),1!==s&&(x=ne(x,s)),x=p[0]+x*(1-p[0]-p[1]),x=Math.min(1,Math.max(0,x)),f=Math.floor(1e4*x),g&&r[f])o=r[f];else{if("array"===Ce(i))for(a=m=0,b=h.length-1;0<=b?m<=b:m>=b;a=0<=b?++m:--m){if(x<=(v=h[a])){o=i[a];break}if(x>=v&&a===h.length-1){o=i[a];break}if(x>v&&x<h[a+1]){x=(x-v)/(h[a+1]-v),o=w.interpolate(i[a],i[a+1],x,c);break}}else"function"===Ce(i)&&(o=i(x));g&&(r[f]=o)}return o},x=function(){return r={}},_(e),(v=function(e){var t;return t=w(b(e)),f&&t[f]?t[f]():t}).classes=function(e){var t;return null!=e?("array"===Ce(e)?(n=e,a=[e[0],e[e.length-1]]):(t=w.analyze(a),n=0===e?[t.min,t.max]:w.limits(t,"e",e)),v):n},v.domain=function(e){var t,n,r,o,s,c,d;if(!arguments.length)return a;if(u=e[0],l=e[e.length-1],h=[],r=i.length,e.length===r&&u!==l)for(s=0,o=e.length;s<o;s++)n=e[s],h.push((n-u)/(l-u));else for(t=d=0,c=r-1;0<=c?d<=c:d>=c;t=0<=c?++d:--d)h.push(t/(r-1));return a=[u,l],v},v.mode=function(e){return arguments.length?(c=e,x(),v):c},v.range=function(e,t){return _(e),v},v.out=function(e){return f=e,v},v.spread=function(e){return arguments.length?(m=e,v):m},v.correctLightness=function(e){return null==e&&(e=!0),o=e,x(),S=o?function(e){var t,n,r,i,o,a,s,l,u;for(t=b(0,!0).lab()[0],n=b(1,!0).lab()[0],s=t>n,r=b(e,!0).lab()[0],i=r-(o=t+(n-t)*e),l=0,u=1,a=20;Math.abs(i)>.01&&a-- >0;)s&&(i*=-1),i<0?(l=e,e+=.5*(u-e)):(u=e,e+=.5*(l-e)),r=b(e,!0).lab()[0],i=r-o;return e}:function(e){return e},v},v.padding=function(e){return null!=e?("number"===Ce(e)&&(e=[e,e]),p=e,v):p},v.colors=function(t,r){var o,s,l,u,c,d,f,p;if(arguments.length<2&&(r="hex"),c=[],0===arguments.length)c=i.slice(0);else if(1===t)c=[v(.5)];else if(t>1)s=a[0],o=a[1]-s,c=function(){d=[];for(var e=0;0<=t?e<t:e>t;0<=t?e++:e--)d.push(e);return d}.apply(this).map((function(e){return v(s+e/(t-1)*o)}));else{if(e=[],f=[],n&&n.length>2)for(l=p=1,u=n.length;1<=u?p<u:p>u;l=1<=u?++p:--p)f.push(.5*(n[l-1]+n[l]));else f=a;c=f.map((function(e){return v(e)}))}return w[r]&&(c=c.map((function(e){return e[r]()}))),c},v.cache=function(e){return null!=e?(g=e,v):g},v.gamma=function(e){return null!=e?(s=e,v):s},v},null==w.scales&&(w.scales={}),w.scales.cool=function(){return w.scale([w.hsl(180,1,.9),w.hsl(250,.7,.4)])},w.scales.hot=function(){return w.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},w.analyze=function(e,t,n){var r,i,o,a,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},l=function(e,i){if(n(e,i))return null!=t&&"function"===Ce(t)?r(t(e)):null!=t&&"string"===Ce(t)||"number"===Ce(t)?r(e[t]):r(e)},"array"===Ce(e))for(a=0,o=e.length;a<o;a++)l(e[a]);else for(i in e)l(e[i],i);return s.domain=[s.min,s.max],s.limits=function(e,t){return w.limits(s,e,t)},s},w.limits=function(e,t,n){var r,i,o,a,s,l,u,c,d,f,p,m,g,v,y,b,x,_,S,C,E,k,P,M,T,R,I,O,L,D,F,N,B,z,j,H,U,V,G,W,$,q,X,Y,Z,J,ee,te,re,ie,oe,ae,se,le,ue;if(null==t&&(t="equal"),null==n&&(n=7),"array"===Ce(e)&&(e=w.analyze(e)),T=e.min,Q=e.max,e.sum,le=e.values.sort((function(e,t){return e-t})),1===n)return[T,Q];if(P=[],"c"===t.substr(0,1)&&(P.push(T),P.push(Q)),"e"===t.substr(0,1)){for(P.push(T),C=F=1,j=n-1;1<=j?F<=j:F>=j;C=1<=j?++F:--F)P.push(T+C/n*(Q-T));P.push(Q)}else if("l"===t.substr(0,1)){if(T<=0)throw"Logarithmic scales are only possible for values > 0";for(R=Math.LOG10E*K(T),M=Math.LOG10E*K(Q),P.push(T),C=ue=1,H=n-1;1<=H?ue<=H:ue>=H;C=1<=H?++ue:--ue)P.push(ne(10,R+C/n*(M-R)));P.push(Q)}else if("q"===t.substr(0,1)){for(P.push(T),C=r=1,q=n-1;1<=q?r<=q:r>=q;C=1<=q?++r:--r)N=(le.length-1)*C/n,(B=A(N))===N?P.push(le[B]):(z=N-B,P.push(le[B]*(1-z)+le[B+1]*z));P.push(Q)}else if("k"===t.substr(0,1)){for(O=le.length,v=new Array(O),_=new Array(n),ie=!0,L=0,b=null,(b=[]).push(T),C=i=1,X=n-1;1<=X?i<=X:i>=X;C=1<=X?++i:--i)b.push(T+C/n*(Q-T));for(b.push(Q);ie;){for(E=o=0,Y=n-1;0<=Y?o<=Y:o>=Y;E=0<=Y?++o:--o)_[E]=0;for(C=a=0,Z=O-1;0<=Z?a<=Z:a>=Z;C=0<=Z?++a:--a){for(se=le[C],I=Number.MAX_VALUE,E=s=0,J=n-1;0<=J?s<=J:s>=J;E=0<=J?++s:--s)(S=h(b[E]-se))<I&&(I=S,y=E);_[y]++,v[C]=y}for(D=new Array(n),E=l=0,ee=n-1;0<=ee?l<=ee:l>=ee;E=0<=ee?++l:--l)D[E]=null;for(C=u=0,te=O-1;0<=te?u<=te:u>=te;C=0<=te?++u:--u)null===D[x=v[C]]?D[x]=le[C]:D[x]+=le[C];for(E=c=0,re=n-1;0<=re?c<=re:c>=re;E=0<=re?++c:--c)D[E]*=1/_[E];for(ie=!1,E=d=0,U=n-1;0<=U?d<=U:d>=U;E=0<=U?++d:--d)if(D[E]!==b[C]){ie=!0;break}b=D,++L>200&&(ie=!1)}for(k={},E=f=0,V=n-1;0<=V?f<=V:f>=V;E=0<=V?++f:--f)k[E]=[];for(C=p=0,G=O-1;0<=G?p<=G:p>=G;C=0<=G?++p:--p)k[x=v[C]].push(le[C]);for(oe=[],E=m=0,W=n-1;0<=W?m<=W:m>=W;E=0<=W?++m:--m)oe.push(k[E][0]),oe.push(k[E][k[E].length-1]);for(oe=oe.sort((function(e,t){return e-t})),P.push(oe[0]),C=g=1,$=oe.length-1;g<=$;C=g+=2)ae=oe[C],isNaN(ae)||-1!==P.indexOf(ae)||P.push(ae)}return P},I=function(e,t,n){var r,i,o,s;return e=(r=Ee(arguments))[0],t=r[1],n=r[2],isNaN(e)&&(e=0),(e/=360)<1/3?o=1-((i=(1-t)/3)+(s=(1+t*C(l*e)/C(a-l*e))/3)):e<2/3?i=1-((s=(1-t)/3)+(o=(1+t*C(l*(e-=1/3))/C(a-l*e))/3)):s=1-((o=(1-t)/3)+(i=(1+t*C(l*(e-=2/3))/C(a-l*e))/3)),[255*(s=X(n*s*3)),255*(o=X(n*o*3)),255*(i=X(n*i*3)),r.length>3?r[3]:1]},se=function(){var e,t,n,r,i,o,a;return i=(o=Ee(arguments))[0],t=o[1],e=o[2],l=2*Math.PI,i/=255,t/=255,e/=255,0===(a=1-Math.min(i,t,e)/(r=(i+t+e)/3))?n=0:(n=(i-t+(i-e))/2,n/=Math.sqrt((i-t)*(i-t)+(i-e)*(t-e)),n=Math.acos(n),e>t&&(n=l-n),n/=l),[360*n,a,r]},w.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ae.call(arguments).concat(["hsi"]),(function(){}))},f.hsi=I,n.prototype.hsi=function(){return se(this._rgb)},N=function(e,t,n,r){var i,o,a,s,l,u,c,d,f,p;return"hsl"===r?(f=e.hsl(),p=t.hsl()):"hsv"===r?(f=e.hsv(),p=t.hsv()):"hcg"===r?(f=e.hcg(),p=t.hcg()):"hsi"===r?(f=e.hsi(),p=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",f=e.hcl(),p=t.hcl()),"h"===r.substr(0,1)&&(o=f[0],c=f[1],s=f[2],a=p[0],d=p[1],l=p[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===r||(u=d)):(i=o,1!==l&&0!==l||"hsv"===r||(u=c)):i=o+n*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),null==u&&(u=c+n*(d-c)),w[r](i,u,s+n*(l-s))},j=function(e,t,n,r){var i,o;return i=e.num(),o=t.num(),w.num(i+(o-i)*n,"num")},(p=p.concat(function(){var e,t,n,r;for(r=[],t=0,e=(n=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)Z=n[t],r.push([Z,N]);return r}())).push(["num",j]),B=function(e,t,r,i){var o,a;return o=e.lab(),a=t.lab(),new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},p.push(["lab",B])}).call(rs)})),as=os.scale,ss={scale:"uniform",mode:"hcl",domain:[0,1],value:16777215,reverse:!1},ls=new ie,us=function(e){void 0===e&&(e={}),this.parameters=Ca(e,ss),"string"===typeof this.parameters.value&&(this.parameters.value=ls.set(this.parameters.value).getHex()),this.parameters.structure&&(this.atomProxy=this.parameters.structure.getAtomProxy())};us.prototype.getScale=function(e){void 0===e&&(e={});var t=Ca(e,this.parameters);return"rainbow"===t.scale?t.scale=["red","orange","yellow","green","blue"]:"rwb"===t.scale&&(t.scale=["red","white","blue"]),t.reverse&&t.domain.reverse(),as(t.scale).mode(t.mode).domain(t.domain).out("num")},us.prototype.colorToArray=function(e,t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=(e>>16&255)/255,t[n+1]=(e>>8&255)/255,t[n+2]=(255&e)/255,t},us.prototype.atomColorToArray=function(e,t,n){return this.colorToArray(this.atomColor?this.atomColor(e):0,t,n)},us.prototype.bondColor=function(e,t){return this.atomProxy&&this.atomColor?(this.atomProxy.index=t?e.atomIndex1:e.atomIndex2,this.atomColor(this.atomProxy)):0},us.prototype.bondColorToArray=function(e,t,n,r){return this.colorToArray(this.bondColor(e,t),n,r)},us.prototype.volumeColorToArray=function(e,t,n){return this.colorToArray(this.volumeColor?this.volumeColor(e):0,t,n)},us.prototype.positionColorToArray=function(e,t,n){return this.colorToArray(this.positionColor?this.positionColor(e):0,t,n)};var cs,ds=is((function(e){!function(t){function n(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function r(e,t){if("function"!==typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function i(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){i.prototype.dispatch.apply(e,arguments)}}n.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},i.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,t,r,i){var o,a=this._indexOfListener(e,r);if(-1!==a){if((o=this._bindings[a]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else o=new n(this,e,t,r,i),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,r=this._bindings.length;r--;)if((n=this._bindings[r])._listener===e&&n.context===t)return r;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,n){return r(e,"add"),this._registerListener(e,!1,t,n)},addOnce:function(e,t,n){return r(e,"addOnce"),this._registerListener(e,!0,t,n)},remove:function(e,t){r(e,"remove");var n=this._indexOfListener(e,t);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){t=this._bindings.slice(),this._shouldPropagate=!0;do{r--}while(t[r]&&this._shouldPropagate&&!1!==t[r].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var o=i;o.Signal=i,e.exports?e.exports=o:t.signals=o}(rs)})),fs=ds.Signal;!function(e){e[e.PROTEIN=1]="PROTEIN",e[e.NUCLEIC=2]="NUCLEIC",e[e.RNA=3]="RNA",e[e.DNA=4]="DNA",e[e.POLYMER=5]="POLYMER",e[e.WATER=6]="WATER",e[e.HELIX=7]="HELIX",e[e.SHEET=8]="SHEET",e[e.TURN=9]="TURN",e[e.BACKBONE=10]="BACKBONE",e[e.SIDECHAIN=11]="SIDECHAIN",e[e.ALL=12]="ALL",e[e.HETERO=13]="HETERO",e[e.ION=14]="ION",e[e.SACCHARIDE=15]="SACCHARIDE",e[e.SUGAR=15]="SUGAR",e[e.BONDED=16]="BONDED",e[e.RING=17]="RING",e[e.AROMATICRING=18]="AROMATICRING",e[e.METAL=19]="METAL",e[e.NONE=20]="NONE"}(cs||(cs={}));var ps=["*","","ALL"],hs=["NONE"],ms=[cs.BACKBONE,cs.SIDECHAIN,cs.BONDED,cs.RING,cs.AROMATICRING,cs.METAL],gs=[cs.POLYMER,cs.WATER],vs=["ALA","GLY","SER"],ys=["CYS","SER","THR"],bs=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],xs=["PHE","TRP","TYR","HIS"],ws=["ASN","GLN"],_s=["ASP","GLU"],Ss=["ARG","HIS","LYS"],Cs=["ARG","ASP","GLU","HIS","LYS"],Es=["ASN","ARG","ASP","CYS","GLY","GLN","GLU","HIS","LYS","SER","THR","TYR"],ks=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],Ps=["HIS","PHE","PRO","TRP","TYR"],Ms=["ALA","GLY","ILE","LEU","VAL"];function As(e,t){if(void 0===t.atomname&&void 0===t.element&&void 0===t.altloc&&void 0===t.atomindex&&void 0===t.keyword&&void 0===t.inscode&&void 0===t.resname&&void 0===t.sstruc&&void 0===t.resno&&void 0===t.chainname&&void 0===t.model)return-1;if(void 0!==t.keyword){if(t.keyword===cs.BACKBONE&&!e.isBackbone())return!1;if(t.keyword===cs.SIDECHAIN&&!e.isSidechain())return!1;if(t.keyword===cs.BONDED&&!e.isBonded())return!1;if(t.keyword===cs.RING&&!e.isRing())return!1;if(t.keyword===cs.AROMATICRING&&!e.isAromatic())return!1;if(t.keyword===cs.HETERO&&!e.isHetero())return!1;if(t.keyword===cs.PROTEIN&&!e.isProtein())return!1;if(t.keyword===cs.NUCLEIC&&!e.isNucleic())return!1;if(t.keyword===cs.RNA&&!e.isRna())return!1;if(t.keyword===cs.DNA&&!e.isDna())return!1;if(t.keyword===cs.POLYMER&&!e.isPolymer())return!1;if(t.keyword===cs.WATER&&!e.isWater())return!1;if(t.keyword===cs.HELIX&&!e.isHelix())return!1;if(t.keyword===cs.SHEET&&!e.isSheet())return!1;if(t.keyword===cs.TURN&&!e.isTurn())return!1;if(t.keyword===cs.ION&&!e.isIon())return!1;if(t.keyword===cs.SACCHARIDE&&!e.isSaccharide())return!1;if(t.keyword===cs.METAL&&!e.isMetal())return!1}if(void 0!==t.atomname&&t.atomname!==e.atomname)return!1;if(void 0!==t.element&&t.element!==e.element)return!1;if(void 0!==t.altloc&&t.altloc!==e.altloc)return!1;if(void 0!==t.atomindex&&Oa(t.atomindex,e.index)<0)return!1;if(void 0!==t.resname)if(Array.isArray(t.resname)){if(!t.resname.includes(e.resname))return!1}else if(t.resname!==e.resname)return!1;if(void 0!==t.sstruc&&t.sstruc!==e.sstruc)return!1;if(void 0!==t.resno)if(Array.isArray(t.resno)&&2===t.resno.length){if(t.resno[0]>e.resno||t.resno[1]<e.resno)return!1}else if(t.resno!==e.resno)return!1;return(void 0===t.inscode||t.inscode===e.inscode)&&((void 0===t.chainname||t.chainname===e.chainname)&&(void 0===t.model||t.model===e.modelIndex))}function Ts(e,t){if(void 0===t.resname&&void 0===t.resno&&void 0===t.inscode&&void 0===t.sstruc&&void 0===t.model&&void 0===t.chainname&&void 0===t.atomindex&&(void 0===t.keyword||ms.includes(t.keyword)))return-1;if(void 0!==t.keyword){if(t.keyword===cs.HETERO&&!e.isHetero())return!1;if(t.keyword===cs.PROTEIN&&!e.isProtein())return!1;if(t.keyword===cs.NUCLEIC&&!e.isNucleic())return!1;if(t.keyword===cs.RNA&&!e.isRna())return!1;if(t.keyword===cs.DNA&&!e.isDna())return!1;if(t.keyword===cs.POLYMER&&!e.isPolymer())return!1;if(t.keyword===cs.WATER&&!e.isWater())return!1;if(t.keyword===cs.HELIX&&!e.isHelix())return!1;if(t.keyword===cs.SHEET&&!e.isSheet())return!1;if(t.keyword===cs.TURN&&!e.isTurn())return!1;if(t.keyword===cs.ION&&!e.isIon())return!1;if(t.keyword===cs.SACCHARIDE&&!e.isSaccharide())return!1}if(void 0!==t.atomindex&&0===La(t.atomindex,e.atomOffset,e.atomEnd))return!1;if(void 0!==t.resname)if(Array.isArray(t.resname)){if(!t.resname.includes(e.resname))return!1}else if(t.resname!==e.resname)return!1;if(void 0!==t.sstruc&&t.sstruc!==e.sstruc)return!1;if(void 0!==t.resno)if(Array.isArray(t.resno)&&2===t.resno.length){if(t.resno[0]>e.resno||t.resno[1]<e.resno)return!1}else if(t.resno!==e.resno)return!1;return(void 0===t.inscode||t.inscode===e.inscode)&&((void 0===t.chainname||t.chainname===e.chainname)&&(void 0===t.model||t.model===e.modelIndex))}function Rs(e,t){if(void 0===t.chainname&&void 0===t.model&&void 0===t.atomindex&&(void 0===t.keyword||!gs.includes(t.keyword)||!e.entity))return-1;if(void 0!==t.keyword){if(t.keyword===cs.POLYMER&&!e.entity.isPolymer())return!1;if(t.keyword===cs.WATER&&!e.entity.isWater())return!1}return(void 0===t.atomindex||0!==La(t.atomindex,e.atomOffset,e.atomEnd))&&((void 0===t.chainname||t.chainname===e.chainname)&&(void 0===t.model||t.model===e.modelIndex))}function Is(e,t){return void 0===t.model&&void 0===t.atomindex?-1:(void 0===t.atomindex||0!==La(t.atomindex,e.atomOffset,e.atomEnd))&&(void 0===t.model||t.model===e.index)}function Os(e,t){if(null===e)return!1;if(e.error)return!1;if(!e.rules||0===e.rules.length)return!1;for(var n=e.rules.length,r=!e.negate,i=!!e.negate,o=[],a=0;a<n;++a){var s=e.rules[a];s.hasOwnProperty("operator")&&(o[a]=Os(s,t))}return function(a){for(var s="AND"===e.operator,l=!1,u=0;u<n;++u){var c=e.rules[u],d=void 0;if(c.hasOwnProperty("operator")){var f=o[u];if(-1===(d=!1!==f?f(a):-1)){l=!0;continue}if(!0===d){if(s)continue;return r}if(s)return i}else{if(c.keyword===cs.ALL){if(s)continue;return r}if(c.keyword===cs.NONE){if(s)continue;return i}if(-1!==(d=t(a,c))){if(!0===d){if(s)continue;return r}if(s)return i}else l=!0}}return l?-1:s?r:i}}function Ls(e,t){if(e.error)return e;if(!e.rules||0===e.rules.length)return e;var n=e.rules.length,r={operator:e.operator,rules:[]};e.hasOwnProperty("negate")&&(r.negate=e.negate);for(var i=0;i<n;++i){var o=e.rules[i];if(o.hasOwnProperty("operator")){var a=Ls(o,t);null!==a&&r.rules.push(a)}else t(o)||r.rules.push(o)}return r.rules.length>0?e:null}function Ds(e,t){void 0===t&&(t=!1);var n=e;return t&&(n=Ls(e,(function(e){return void 0!==e.keyword&&!ms.includes(e.keyword)||(void 0!==e.model||(void 0!==e.chainname||(void 0!==e.resname||(void 0!==e.resno||void 0!==e.sstruc))))}))),Os(n,As)}function Fs(e,t){void 0===t&&(t=!1);var n=e;return t&&(n=Ls(e,(function(e){return!(void 0===e.keyword||!ms.includes(e.keyword))||(void 0!==e.model||(void 0!==e.chainname||(void 0!==e.atomname||(void 0!==e.element||void 0!==e.altloc))))}))),Os(n,Ts)}function Ns(e,t){void 0===t&&(t=!1);var n=e;return t&&(n=Ls(e,(function(e){return void 0!==e.keyword&&!gs.includes(e.keyword)||(void 0!==e.resname||(void 0!==e.resno||(void 0!==e.atomname||(void 0!==e.element||(void 0!==e.altloc||(void 0!==e.sstruc||void 0!==e.inscode))))))}))),Os(n,Rs)}function Bs(e,t){void 0===t&&(t=!1);var n=e;return t&&(n=Ls(e,(function(e){return void 0!==e.keyword||(void 0!==e.chainname||(void 0!==e.resname||(void 0!==e.resno||(void 0!==e.atomname||(void 0!==e.element||(void 0!==e.altloc||(void 0!==e.sstruc||void 0!==e.inscode)))))))}))),Os(n,Is)}var zs=function(e){this.signals={stringChanged:new fs},this.setString(e)},js={type:{configurable:!0}};js.type.get=function(){return"selection"},zs.prototype.setString=function(e,t){if(void 0===e&&(e=this.string||""),e!==this.string){try{this.selection=function(e){var t={operator:void 0,rules:[]};if(!e)return t;var n,r,i=t,o=[];"("===(e=e.replace(/\(/g," ( ").replace(/\)/g," ) ").trim()).charAt(0)&&")"===e.substr(-1)&&(e=e.slice(1,-1).trim());for(var a=e.split(/\s+/),s=function(e){n={operator:e,rules:[]},void 0===i?(i=n,t=n):(i.rules.push(n),o.push(i),i=n)},l=function(e){r=i,void 0===(i=o.pop())&&(s(e),u(r))},u=function(e){i.rules.push(e)},c=!1,d=0;d<a.length;++d){var f=a[d],p=f.toUpperCase();if("("!==f)if(")"!==f){if(c>0)if("NOT"===p)c=1;else if(1===c)c=2;else{if(2!==c)throw new Error("something went wrong with 'not'");c=!1,l()}if("AND"!==p)if("OR"!==p)if("NOT"!==f.toUpperCase()){if(+p!==+p){var h=cs[p];if(void 0!==h){u({keyword:h});continue}}if("HYDROGEN"!==p)if("SMALL"!==p)if("NUCLEOPHILIC"!==p)if("HYDROPHOBIC"!==p)if("AROMATIC"!==p)if("AMIDE"!==p)if("ACIDIC"!==p)if("BASIC"!==p)if("CHARGED"!==p)if("POLAR"!==p)if("NONPOLAR"!==p)if("CYCLIC"!==p)if("ALIPHATIC"!==p)if("SIDECHAINATTACHED"!==p)if("LIGAND"!==p)if(-1===ps.indexOf(p))if("@"!==f.charAt(0))if("#"!==f.charAt(0))if("_"!==f.charAt(0))if("["!==f[0]||"]"!==f[f.length-1])if(f.length>=1&&f.length<=4&&"^"!==f[0]&&":"!==f[0]&&"."!==f[0]&&"%"!==f[0]&&"/"!==f[0]&&isNaN(parseInt(f)))u({resname:p});else{var m={operator:"AND",rules:[]},g=f.split("/");if(g.length>1&&g[1]){if(isNaN(parseInt(g[1])))throw new Error("model must be an integer");m.rules.push({model:parseInt(g[1])})}var v=g[0].split("%");v.length>1&&m.rules.push({altloc:v[1]});var y=v[0].split(".");if(y.length>1&&y[1]){if(y[1].length>4)throw new Error("atomname must be one to four characters");m.rules.push({atomname:y[1].substring(0,4).toUpperCase()})}var b=y[0].split(":");b.length>1&&b[1]&&m.rules.push({chainname:b[1]});var x=b[0].split("^");if(x.length>1&&m.rules.push({inscode:x[1]}),x[0]){var w=void 0,_=void 0;"-"===x[0][0]&&(x[0]=x[0].substr(1),w=!0),x[0].includes("--")&&(x[0]=x[0].replace("--","-"),_=!0);var S=x[0].split("-");if(1===S.length){var C=parseInt(S[0]);if(isNaN(C))throw new Error("resi must be an integer");w&&(C*=-1),m.rules.push({resno:C})}else{if(2!==S.length)throw new Error("resi range must contain one '-'");var E=S.map((function(e){return parseInt(e)}));w&&(E[0]*=-1),_&&(E[1]*=-1),m.rules.push({resno:[E[0],E[1]]})}}if(1===m.rules.length)u(m.rules[0]);else{if(!(m.rules.length>1))throw new Error("empty selection chunk");u(m)}}else{var k=p.substr(1,f.length-2).split(","),P=k.length>1?k:k[0];u({resname:P})}else u({element:p.substr(1)});else console.error("# for element selection deprecated, use _"),u({element:p.substr(1)});else{var M=f.substr(1).split(",").map((function(e){return parseInt(e)}));M.sort((function(e,t){return e-t})),u({atomindex:M})}else u({keyword:cs.ALL});else u({operator:"AND",rules:[{operator:"OR",rules:[{operator:"AND",rules:[{keyword:cs.HETERO},{negate:!0,operator:void 0,rules:[{keyword:cs.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{keyword:cs.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{operator:"OR",rules:[{keyword:cs.WATER},{keyword:cs.ION}]}]}]});else u({operator:"OR",rules:[{keyword:cs.SIDECHAIN},{operator:"AND",negate:!1,rules:[{keyword:cs.PROTEIN},{operator:"OR",negate:!1,rules:[{atomname:"CA"},{atomname:"BB"}]}]},{operator:"AND",negate:!1,rules:[{resname:"PRO"},{atomname:"N"}]},{operator:"AND",negate:!1,rules:[{keyword:cs.NUCLEIC},{operator:"OR",negate:!0,rules:[{atomname:"P"},{atomname:"OP1"},{atomname:"OP2"},{atomname:"O3'"},{atomname:"O3*"},{atomname:"O5'"},{atomname:"O5*"},{atomname:"C5'"},{atomname:"C5*"}]}]}]});else u({resname:Ms});else u({resname:Ps});else u({resname:ks});else u({resname:Es});else u({resname:Cs});else u({resname:Ss});else u({resname:_s});else u({resname:ws});else u({resname:xs});else u({resname:bs});else u({resname:ys});else u({resname:vs});else u({operator:"OR",rules:[{element:"H"},{element:"D"}]})}else c=1,s(),i.negate=!0;else"AND"===i.operator?l("OR"):i.operator="OR";else if("OR"===i.operator){var A=i.rules.pop();s("AND"),u(A)}else i.operator="AND"}else l(),i.negate&&l();else c=!1,s()}return void 0===t.operator&&1===t.rules.length&&t.rules[0].hasOwnProperty("operator")&&(t=t.rules[0]),t}(e)}catch(r){this.selection={error:r.message}}var n=this.selection;this.string=e,this.test=Ds(n),this.residueTest=Fs(n),this.chainTest=Ns(n),this.modelTest=Bs(n),this.atomOnlyTest=Ds(n,!0),this.residueOnlyTest=Fs(n,!0),this.chainOnlyTest=Ns(n,!0),this.modelOnlyTest=Bs(n,!0),t||this.signals.stringChanged.dispatch(this.string)}},zs.prototype.isAllSelection=function(){return ps.includes(this.string.toUpperCase())},zs.prototype.isNoneSelection=function(){return hs.includes(this.string.toUpperCase())},Object.defineProperties(zs.prototype,js);var Hs=function(e){function t(t){var n=this;e.call(this,t),this.colormakerList=[],this.selectionList=[],(t.dataList||[]).forEach((function(e){var t=e[0],r=e[1],i=e[2];void 0===i&&(i={}),pl.hasScheme(t)?Object.assign(i,{scheme:t,structure:n.parameters.structure}):Object.assign(i,{scheme:"uniform",value:new ie(t).getHex()}),n.colormakerList.push(pl.getScheme(i)),n.selectionList.push(new zs(r))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){for(var t=0,n=this.selectionList.length;t<n;++t){var r=this.selectionList[t].test;if(r&&r(e))return this.colormakerList[t].atomColor(e)}return 16777215},t}(us),Us={"":"",OrRd:"[S] Orange-Red",PuBu:"[S] Purple-Blue",BuPu:"[S] Blue-Purple",Oranges:"[S] Oranges",BuGn:"[S] Blue-Green",YlOrBr:"[S] Yellow-Orange-Brown",YlGn:"[S] Yellow-Green",Reds:"[S] Reds",RdPu:"[S] Red-Purple",Greens:"[S] Greens",YlGnBu:"[S] Yellow-Green-Blue",Purples:"[S] Purples",GnBu:"[S] Green-Blue",Greys:"[S] Greys",YlOrRd:"[S] Yellow-Orange-Red",PuRd:"[S] Purple-Red",Blues:"[S] Blues",PuBuGn:"[S] Purple-Blue-Green",Viridis:"[D] Viridis",Spectral:"[D] Spectral",RdYlGn:"[D] Red-Yellow-Green",RdBu:"[D] Red-Blue",PiYG:"[D] Pink-Yellowgreen",PRGn:"[D] Purplered-Green",RdYlBu:"[D] Red-Yellow-Blue",BrBG:"[D] Brown-Bluegreen",RdGy:"[D] Red-Grey",PuOr:"[D] Purple-Orange",Set1:"[Q] Set1",Set2:"[Q] Set2",Set3:"[Q] Set3",Dark2:"[Q] Dark2",Paired:"[Q] Paired",Pastel1:"[Q] Pastel1",Pastel2:"[Q] Pastel2",Accent:"[Q] Accent",rainbow:"[?] Rainbow",rwb:"[?] Red-White-Blue"},Vs={"":"",rgb:"Red Green Blue",hsv:"Hue Saturation Value",hsl:"Hue Saturation Lightness",hsi:"Hue Saturation Intensity",lab:"CIE L*a*b*",hcl:"Hue Chroma Lightness"},Gs=function(){this.schemes={},this.userSchemes={}};Gs.prototype.getScheme=function(e){var t=((e||{}).scheme||"").toLowerCase();return new(t in this.schemes?this.schemes[t]:t in this.userSchemes?this.userSchemes[t]:us)(e)},Gs.prototype.getSchemes=function(){var e={};return Object.keys(this.schemes).forEach((function(t){e[t]=t})),Object.keys(this.userSchemes).forEach((function(t){e[t]=t.split("|")[1]})),e},Gs.prototype.getScales=function(){return Us},Gs.prototype.getModes=function(){return Vs},Gs.prototype.add=function(e,t){e=e.toLowerCase(),this.schemes[e]=t},Gs.prototype.addScheme=function(e,t){return e instanceof us||(e=this._createScheme(e)),this._addUserScheme(e,t)},Gs.prototype._addUserScheme=function(e,t){t=t||"";var n=(Za()+"|"+t).toLowerCase();return this.userSchemes[n]=e,n},Gs.prototype.removeScheme=function(e){e=e.toLowerCase(),delete this.userSchemes[e]},Gs.prototype._createScheme=function(e){var t=function(t){us.call(this,t),e.call(this,t)};return(t.prototype=us.prototype).constructor=us,t},Gs.prototype.addSelectionScheme=function(e,t){var n=function(t){function n(n){t.call(this,Object.assign({dataList:e},n))}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(Hs);return this._addUserScheme(n,t)},Gs.prototype.hasScheme=function(e){return(e=e.toLowerCase())in this.schemes||e in this.userSchemes};var Ws=function(e){function t(){e.call(this,"parser")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__hasObjName=function(e,t){var n=this.get(e);return n&&n.prototype.__objName===t},t.prototype.isTrajectory=function(e){return this.__hasObjName(e,"frames")},t.prototype.isStructure=function(e){return this.__hasObjName(e,"structure")},t.prototype.isVolume=function(e){return this.__hasObjName(e,"volume")},t.prototype.isSurface=function(e){return this.__hasObjName(e,"surface")},t.prototype.isBinary=function(e){var t=this.get(e);return t&&t.prototype.isBinary},t.prototype.isXml=function(e){var t=this.get(e);return t&&t.prototype.isXml},t.prototype.isJson=function(e){var t=this.get(e);return t&&t.prototype.isJson},t.prototype.getTrajectoryExtensions=function(){var e=this;return this.names.filter((function(t){return e.isTrajectory(t)}))},t.prototype.getStructureExtensions=function(){var e=this;return this.names.filter((function(t){return e.isStructure(t)}))},t.prototype.getVolumeExtensions=function(){var e=this;return this.names.filter((function(t){return e.isVolume(t)}))},t.prototype.getSurfaceExtensions=function(){var e=this;return this.names.filter((function(t){return e.isSurface(t)}))},t}($a);function $s(e){var t=e;return e.forEach((function(e){e.__deps&&Array.prototype.push.apply(t,$s(e.__deps))})),t}function qs(e){return Da($s(e)).map((function(e){return e.toString()})).join("\n\n\n")}function Xs(e){var t=e.data.__name,n=e.data.__postId;if(void 0===t)console.error("message __name undefined");else if(void 0===self.func)console.error("worker func undefined",t);else{self.func(e,(function(e,t){e=e||{},void 0!==n&&(e.__postId=n);try{self.postMessage(e,t)}catch(r){console.error("self.postMessage:",r),self.postMessage(e)}}))}}function Ks(e,t){var n="'use strict';\n\n"+qs(t);return n+="\n\n\nself.func = "+e.toString()+";",n+="\n\n\nself.onmessage = "+Xs.toString()+";",new Blob([n],{type:"application/javascript"})}var Ys=function(){this.activeWorkerCount=0,this._funcDict={},this._depsDict={},this._blobDict={}};Ys.prototype.add=function(e,t,n){this._funcDict[e]=t,this._depsDict[e]=n},Ys.prototype.get=function(e){return this._blobDict[e]||(this._blobDict[e]=Ks(this._funcDict[e],this._depsDict[e])),this._blobDict[e]};var Zs=Ma(),Qs=!1;try{var Js=Object.defineProperty({},"passive",{get:function(){Qs=!0}});window.addEventListener("test",(function(e){}),Js)}catch(bS){}var el="undefined"!==typeof window&&"undefined"!==typeof window.orientation,tl=!1;var nl=!1;var rl={log:Function.prototype.bind.call(console.log,console),info:Function.prototype.bind.call(console.info,console),warn:Function.prototype.bind.call(console.warn,console),error:Function.prototype.bind.call(console.error,console),time:Function.prototype.bind.call(console.time,console),timeEnd:Function.prototype.bind.call(console.timeEnd,console)},il={color:"green",labelColor:"grey",labelAttachment:"bottom-center",labelSize:.7,labelZOffset:.5,labelYOffset:.1,labelBorder:!0,labelBorderColor:"lightgrey",labelBorderWidth:.25,lineOpacity:.8,linewidth:5,opacity:.6,labelUnit:"angstrom",arcVisible:!0,planeVisible:!1};function ol(e){void 0===e&&(e={}),Object.assign(il,e)}var al,sl=!!(al=_a("debug"))&&("string"!==typeof al||/^1|true|t|yes|y$/i.test(al));function ll(e){sl=e}var ul,cl,dl=["ngl","js"],fl=new Ys,pl=new Gs,hl=new $a("datasource"),ml=new $a("representatation"),gl=new Ws,vl=new $a("shader"),yl=new $a("decompressor"),bl=new $a("component"),xl=new $a("buffer"),wl=new $a("picker");function _l(e){ul=e}function Sl(e){cl=e}var Cl=function(e,t){void 0===t&&(t={}),this.chunkSize=10485760,this.newline="\n",this.__pointer=0,this.__partialLine="",this.compressed=Sa(t.compressed,!1),this.binary=Sa(t.binary,!1),this.json=Sa(t.json,!1),this.xml=Sa(t.xml,!1),this.src=e};Cl.prototype.isBinary=function(){return this.binary||this.compressed},Cl.prototype.read=function(){var e=this;return this._read().then((function(t){var n=e.compressed?yl.get(e.compressed):void 0;return e.compressed&&n?e.data=n(t):((e.binary||e.compressed)&&t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e.data=t),e.data}))},Cl.prototype._chunk=function(e,t){return t=Math.min(this.data.length,t),0===e&&this.data.length===t?this.data:this.isBinary()?this.data.subarray(e,t):this.data.substring(e,t)},Cl.prototype.chunk=function(e){var t=e+this.chunkSize;return this._chunk(e,t)},Cl.prototype.peekLines=function(e){var t,n=this.data,r=n.length,i=this.isBinary()?this.newline.charCodeAt(0):this.newline,o=0;for(t=0;t<r&&(n[t]===i&&++o,o!==e);++t);var a=this._chunk(0,t+1);return this.chunkToLines(a,"",t>r).lines},Cl.prototype.chunkCount=function(){return Math.floor(this.data.length/this.chunkSize)+1},Cl.prototype.asText=function(){return this.isBinary()?Fa(this.data):this.data},Cl.prototype.chunkToLines=function(e,t,n){var r=this.newline;if(!this.isBinary()&&e.length===this.data.length)return{lines:e.split(r),partialLine:""};var i=[],o=this.isBinary()?Fa(e):e,a=o.lastIndexOf(r);if(-1===a)t+=o;else{var s=t+o.substr(0,a);i=i.concat(s.split(r)),t=a===o.length-r.length?"":o.substr(a+r.length)}return n&&""!==t&&i.push(t),{lines:i,partialLine:t}},Cl.prototype.nextChunk=function(){var e=this.__pointer;if(!(e>this.data.length))return this.__pointer+=this.chunkSize,this.chunk(e)},Cl.prototype.nextChunkOfLines=function(){var e=this.nextChunk();if(void 0!==e){var t=this.__pointer>this.data.length,n=this.chunkToLines(e,this.__partialLine,t);return this.__partialLine=n.partialLine,n.lines}},Cl.prototype.eachChunk=function(e){for(var t=this.chunkSize,n=this.data.length,r=this.chunkCount(),i=0;i<n;i+=t){e(this.chunk(i),Math.round(i/t),r)}},Cl.prototype.eachChunkOfLines=function(e){var t=this;this.eachChunk((function(n,r,i){var o=r===i+1,a=t.chunkToLines(n,t.__partialLine,o);t.__partialLine=a.partialLine,e(a.lines,r,i)}))},Cl.prototype.dispose=function(){delete this.src};var El=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._read=function(){var e=this;return new Promise((function(t,n){var r=e.src,i=new FileReader;i.onload=function(e){e.target&&t(e.target.result)},i.onerror=function(e){return n(e)},e.binary||e.compressed?i.readAsArrayBuffer(r):i.readAsText(r)}))},t}(Cl),kl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._read=function(){var e=this;return new Promise((function(t,n){var r=e.src,i=new XMLHttpRequest;i.open("GET",r,!0),i.addEventListener("load",(function(){if(200===i.status||304===i.status||0===i.status)try{t(i.response)}catch(bS){n(bS)}else n(i.statusText)}),!1),i.addEventListener("error",(function(e){return n("network error")}),!1),e.isBinary()?i.responseType="arraybuffer":e.json?i.responseType="json":e.xml?i.responseType="document":i.responseType="text",i.send()}))},t}(Cl),Pl=function(e,t){void 0===t&&(t={}),this.parameters=Ca(t,{ext:"",compressed:!1,binary:gl.isBinary(t.ext||""),name:"",dir:"",path:"",protocol:""});var n={compressed:this.parameters.compressed,binary:this.parameters.binary,json:gl.isJson(this.parameters.ext),xml:gl.isXml(this.parameters.ext)};"undefined"!==typeof File&&e instanceof File||"undefined"!==typeof Blob&&e instanceof Blob?this.streamer=new El(e,n):this.streamer=new kl(e,n)},Ml=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parserParams={voxelSize:n.voxelSize,firstModelOnly:n.firstModelOnly,asTrajectory:n.asTrajectory,cAlphaOnly:n.cAlphaOnly,name:this.parameters.name,path:this.parameters.path}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){return new(gl.get(this.parameters.ext))(this.streamer,this.parserParams).parse()},t}(Pl),Al=function(e,t,n){this.name=t,this.path=n,this.signals={elementAdded:new fs,elementRemoved:new fs,nameChanged:new fs},this.type="Script",this.dir=n.substring(0,n.lastIndexOf("/")+1);try{this.fn=new Function("stage","__name","__path","__dir",e)}catch(bS){rl.error("Script compilation failed",bS),this.fn=function(){}}};Al.prototype.run=function(e){var t=this;return new Promise((function(n,r){try{t.fn.apply(null,[e,t.name,t.path,t.dir]),n()}catch(bS){rl.error("Script.fn",bS),r(bS)}}))};var Tl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;return this.streamer.read().then((function(){return new Al(e.streamer.asText(),e.parameters.name,e.parameters.path)}))},t}(Pl);function Rl(e){var t,n,r=yl.names,i="",o=(t=e instanceof File?e.name:e instanceof Blob?"":e).lastIndexOf("?"),a=-1!==o?t.substring(o):"",s=(t=t.substring(0,-1===o?t.length:o)).replace(/^.*[\\/]/,""),l=s.substring(0,s.lastIndexOf(".")),u=s.split("."),c=u.length>1?(u.pop()||"").toLowerCase():"",d=t.match(/^(.+):\/\/(.+)$/);d&&(i=d[1].toLowerCase(),t=d[2]||"");var f=t.substring(0,t.lastIndexOf("/")+1);if(r.includes(c)){n=c;var p=t.length-c.length-1;c=(t.substr(0,p).split(".").pop()||"").toLowerCase();var h=l.length-c.length-1;l=l.substr(0,h)}else n=!1;return{path:t,name:s,ext:c,base:l,dir:f,compressed:n,protocol:i,query:a,src:e}}function Il(e){var t=Rl(e),n=hl.get(t.protocol);return n&&!(t=Rl(n.getUrl(t.src))).ext&&n.getExt&&(t.ext=n.getExt(e)),t}function Ol(e,t){void 0===t&&(t={});var n,r=Object.assign(Il(e),t);return gl.names.includes(r.ext)?n=new Ml(r.src,r):dl.includes(r.ext)&&(n=new Tl(r.src,r)),n?n.load():Promise.reject(new Error("autoLoad: ext '"+r.ext+"' unknown"))}var Ll=is((function(e,t){!function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function n(e){return i(a(e),arguments)}function r(e,t){return n.apply(null,[e].concat(t||[]))}function i(t,r){var i,o,a,s,l,u,c,d,f,p=1,h=t.length,m="";for(o=0;o<h;o++)if("string"===typeof t[o])m+=t[o];else if("object"===typeof t[o]){if((s=t[o]).keys)for(i=r[p],a=0;a<s.keys.length;a++){if(void 0==i)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));i=i[s.keys[a]]}else i=s.param_no?r[s.param_no]:r[p++];if(e.not_type.test(s.type)&&e.not_primitive.test(s.type)&&i instanceof Function&&(i=i()),e.numeric_arg.test(s.type)&&"number"!==typeof i&&isNaN(i))throw new TypeError(n("[sprintf] expecting number but found %T",i));switch(e.number.test(s.type)&&(d=i>=0),s.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,s.width?parseInt(s.width):0);break;case"e":i=s.precision?parseFloat(i).toExponential(s.precision):parseFloat(i).toExponential();break;case"f":i=s.precision?parseFloat(i).toFixed(s.precision):parseFloat(i);break;case"g":i=s.precision?String(Number(i.toPrecision(s.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=s.precision?i.substring(0,s.precision):i;break;case"t":i=String(!!i),i=s.precision?i.substring(0,s.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=s.precision?i.substring(0,s.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=s.precision?i.substring(0,s.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}e.json.test(s.type)?m+=i:(!e.number.test(s.type)||d&&!s.sign?f="":(f=d?"+":"-",i=i.toString().replace(e.sign,"")),u=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",c=s.width-(f+i).length,l=s.width&&c>0?u.repeat(c):"",m+=s.align?f+i+l:"0"===u?f+l+i:l+f+i)}return m}var o=Object.create(null);function a(t){if(o[t])return o[t];for(var n,r=t,i=[],a=0;r;){if(null!==(n=e.text.exec(r)))i.push(n[0]);else if(null!==(n=e.modulo.exec(r)))i.push("%");else{if(null===(n=e.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){a|=1;var s=[],l=n[2],u=[];if(null===(u=e.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(l=l.substring(u[0].length));)if(null!==(u=e.key_access.exec(l)))s.push(u[1]);else{if(null===(u=e.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}n[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}r=r.substring(n[0].length)}return o[t]=i}t.sprintf=n,t.vsprintf=r,"undefined"!==typeof window&&(window.sprintf=n,window.vsprintf=r)}()})),Dl=Ll.sprintf,Fl=function(){};Fl.prototype.getBlob=function(){return new Blob([this.getData()],{type:this.mimeType})},Fl.prototype.download=function(e,t){e=Sa(e,this.defaultName),t=Sa(t,this.defaultExt),Ta(this.getBlob(),e+"."+t)};var Nl=function(e){function t(t,n){e.call(this),this.mimeType="text/plain",this.defaultName="structure",this.defaultExt="pdb";var r=Object.assign({},n);this.renumberSerial=Sa(r.renumberSerial,!0),this.remarks=function(e){return Array.isArray(e)?e:[e]}(Sa(r.remarks,[])),this.structure=t,this._records=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._writeRecords=function(){this._records.length=0,this._writeTitle(),this._writeRemarks(),this._writeAtoms()},t.prototype._writeTitle=function(){this._records.push(Dl("TITLE %-74s",this.structure.name))},t.prototype._writeRemarks=function(){var e=this;this.remarks.forEach((function(t){e._records.push(Dl("REMARK %-73s",t))})),this.structure.trajectory&&(this._records.push(Dl("REMARK %-73s","Trajectory '"+this.structure.trajectory.name+"'")),this._records.push(Dl("REMARK %-73s","Frame "+this.structure.trajectory.frame)))},t.prototype._writeAtoms=function(){var e=this,t=1,n=1;this.structure.eachModel((function(r){e._records.push(Dl("MODEL %-74d",n++)),r.eachAtom((function(n){var r=n.hetero?"HETATM%5d %-4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s":"ATOM  %5d %-4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s",i=e.renumberSerial?t:n.serial,o=n.atomname;1===o.length&&(o=" "+o),e._records.push(Dl(r,i,o,n.resname,Sa(n.chainname," "),n.resno,n.x,n.y,n.z,Sa(n.occupancy,1),Sa(n.bfactor,0),"",Sa(n.element,""))),t+=1})),e._records.push(Dl("%-80s","ENDMDL")),n+=1})),this._records.push(Dl("%-80s","END"))},t.prototype.getString=function(){return console.warn("PdbWriter.getString() is deprecated, use .getData instead"),this.getData()},t.prototype.getData=function(){return this._writeRecords(),this._records.join("\n")},t}(Fl),Bl=function(e){function t(t){e.call(this),this.mimeType="text/plain",this.defaultName="structure",this.defaultExt="sdf",this.structure=t,this._records=[]}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={idString:{configurable:!0},titleString:{configurable:!0},countsString:{configurable:!0},chargeLines:{configurable:!0}};return n.idString.get=function(){return this.structure.id},n.titleString.get=function(){return"  "+this.structure.title},n.countsString.get=function(){return Dl("%3i%3i  0  0  0  0  0  0  0  0999 V2000",this.structure.atomCount,this.structure.bondCount)},n.chargeLines.get=function(){var e=[];this.structure.eachAtom((function(t){null!=t.formalCharge&&0!==t.formalCharge&&e.push([t.index,t.formalCharge])}));for(var t=[],n=0;n<e.length;n+=8){for(var r=Math.min(8,e.length-n),i=Dl("M  CHG%3i",r),o=n;o<n+r;o++)i+=Dl(" %3i %3i",e[o][0]+1,e[o][1]);t.push(i)}return t},t.prototype.formatAtom=function(e){var t=0;null!=e.formalCharge&&0!==e.formalCharge&&(t=4-e.formalCharge);var n=Dl("%10.4f%10.4f%10.4f %-3s 0%3i  0  0  0",e.x,e.y,e.z,e.element,t);if(48!==n.length)throw new Error("Incompatible atom for sdf format");return n},t.prototype.formatBond=function(e){return Dl("%3i%3i%3i  0  0  0",e.atomIndex1+1,e.atomIndex2+1,e.bondOrder)},t.prototype._writeRecords=function(){this._records.length=0,this._writeHeader(),this._writeCTab(),this._writeFooter()},t.prototype._writeHeader=function(){this._records.push(this.idString,this.titleString,"")},t.prototype._writeCTab=function(){var e=this;this._records.push(this.countsString),this.structure.eachAtom((function(t){e._records.push(e.formatAtom(t))})),this.structure.eachBond((function(t){e._records.push(e.formatBond(t))})),this.chargeLines.forEach((function(t){e._records.push(t)})),this._records.push("M  END")},t.prototype._writeFooter=function(){this._records.push("$$$$")},t.prototype.getData=function(){return this._writeRecords(),this._records.join("\n")},Object.defineProperties(t.prototype,n),t}(Fl),zl=[],jl=function(e,t){void 0===t&&(t={}),this._mark=0,this._marks=[],this.offset=0,this.littleEndian=!0;var n=!1;void 0===e&&(e=8192),"number"===typeof e?e=new ArrayBuffer(e):n=!0;var r=t.offset?t.offset>>>0:0,i=e.byteLength-r,o=r;e instanceof ArrayBuffer||(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+r),e=e.buffer),this._lastWrittenByte=n?i:0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=o,this._data=new DataView(this.buffer,o,i)};jl.prototype.available=function(e){return void 0===e&&(e=1),this.offset+e<=this.length},jl.prototype.isLittleEndian=function(){return this.littleEndian},jl.prototype.setLittleEndian=function(){return this.littleEndian=!0,this},jl.prototype.isBigEndian=function(){return!this.littleEndian},jl.prototype.setBigEndian=function(){return this.littleEndian=!1,this},jl.prototype.skip=function(e){return void 0===e&&(e=1),this.offset+=e,this},jl.prototype.seek=function(e){return this.offset=e,this},jl.prototype.mark=function(){return this._mark=this.offset,this},jl.prototype.reset=function(){return this.offset=this._mark,this},jl.prototype.pushMark=function(){return this._marks.push(this.offset),this},jl.prototype.popMark=function(){var e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this},jl.prototype.rewind=function(){return this.offset=0,this},jl.prototype.ensureAvailable=function(e){if(void 0===e&&(e=1),!this.available(e)){var t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=this.byteLength=t,this._data=new DataView(this.buffer)}return this},jl.prototype.readBoolean=function(){return 0!==this.readUint8()},jl.prototype.readInt8=function(){return this._data.getInt8(this.offset++)},jl.prototype.readUint8=function(){return this._data.getUint8(this.offset++)},jl.prototype.readByte=function(){return this.readUint8()},jl.prototype.readBytes=function(e){void 0===e&&(e=1);for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readByte();return t},jl.prototype.readInt16=function(){var e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},jl.prototype.readUint16=function(){var e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e},jl.prototype.readInt32=function(){var e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},jl.prototype.readUint32=function(){var e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},jl.prototype.readFloat32=function(){var e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},jl.prototype.readFloat64=function(){var e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},jl.prototype.readChar=function(){return String.fromCharCode(this.readInt8())},jl.prototype.readChars=function(e){void 0===e&&(e=1),zl.length=e;for(var t=0;t<e;t++)zl[t]=this.readChar();return zl.join("")},jl.prototype.writeBoolean=function(e){return void 0===e&&(e=!1),this.writeUint8(e?255:0),this},jl.prototype.writeInt8=function(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this},jl.prototype.writeUint8=function(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this},jl.prototype.writeByte=function(e){return this.writeUint8(e)},jl.prototype.writeBytes=function(e){this.ensureAvailable(e.length);for(var t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this},jl.prototype.writeInt16=function(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this},jl.prototype.writeUint16=function(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this},jl.prototype.writeInt32=function(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},jl.prototype.writeUint32=function(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},jl.prototype.writeFloat32=function(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},jl.prototype.writeFloat64=function(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this},jl.prototype.writeChar=function(e){return this.writeUint8(e.charCodeAt(0))},jl.prototype.writeChars=function(e){for(var t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this},jl.prototype.toArray=function(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)},jl.prototype._updateLastWrittenByte=function(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)};var Hl=function(e){function t(t){e.call(this),this.mimeType="application/vnd.ms-pki.stl",this.defaultName="surface",this.defaultExt="stl",this.surface=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getData=function(){var e=this,t=this.surface.index.length/3,n=new jl(2*t+3*t*4*4+80+4);n.skip(80),n.writeUint32(t);for(var r=new U,i=new U,o=new U,a=new U,s=0;s<t;s++){var l=[e.surface.index[3*s],e.surface.index[3*s+1],e.surface.index[3*s+2]];i.fromArray(e.surface.normal,3*l[0]),o.fromArray(e.surface.normal,3*l[1]),a.fromArray(e.surface.normal,3*l[2]),r.addVectors(i,o).add(a).normalize(),n.writeFloat32(r.x),n.writeFloat32(r.y),n.writeFloat32(r.z);for(var u=0;u<3;u++)r.fromArray(e.surface.position,3*l[u]),n.writeFloat32(r.x),n.writeFloat32(r.y),n.writeFloat32(r.z);n.writeUint16(0)}return new DataView(n.buffer)},t}(Fl),Ul=function(){this.count=0,this.signals={countChanged:new fs}};Ul.prototype.clear=function(){this.change(-this.count)},Ul.prototype.change=function(e){this.count+=e,this.signals.countChanged.dispatch(e,this.count),this.count<0&&rl.warn("Counter.count below zero",this.count)},Ul.prototype.increment=function(){this.change(1)},Ul.prototype.decrement=function(){this.change(-1)},Ul.prototype.listen=function(e){this.change(e.count),e.signals.countChanged.add(this.change,this)},Ul.prototype.unlisten=function(e){var t=e.signals.countChanged;t.has(this.change,this)&&t.remove(this.change,this)},Ul.prototype.onZeroOnce=function(e,t){var n=this;if(0===this.count)e.call(t);else{this.signals.countChanged.add((function r(){0===n.count&&(n.signals.countChanged.remove(r,n),e.call(t))}),this)}},Ul.prototype.dispose=function(){this.clear(),this.signals.countChanged.dispose()},vl.add("shader/BasicLine.vert","void main(){\n#include begin_vertex\n#include project_vertex\n}"),vl.add("shader/BasicLine.frag","uniform vec3 uColor;\n#include common\n#include fog_pars_fragment\nvoid main(){\ngl_FragColor = vec4( uColor, 1.0 );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n}"),vl.add("shader/Quad.vert","varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"),vl.add("shader/Quad.frag","varying vec2 vUv;\nuniform sampler2D tForeground;\nuniform float scale;\nvoid main() {\nvec4 foreground = texture2D( tForeground, vUv );\ngl_FragColor = foreground * scale;\n}");var Vl=function(){this.signals={updated:new fs},this.maxDuration=-1/0,this.minDuration=1/0,this.avgDuration=14,this.lastDuration=1/0,this.prevFpsTime=0,this.lastFps=1/0,this.lastFrames=1,this.frames=0,this.count=0,this.begin()};Vl.prototype.update=function(){this.startTime=this.end(),this.currentTime=this.startTime,this.signals.updated.dispatch()},Vl.prototype.begin=function(){this.startTime=window.performance.now(),this.lastFrames=this.frames},Vl.prototype.end=function(){var e=window.performance.now();return this.count+=1,this.frames+=1,this.lastDuration=e-this.startTime,this.minDuration=Math.min(this.minDuration,this.lastDuration),this.maxDuration=Math.max(this.maxDuration,this.lastDuration),this.avgDuration-=this.avgDuration/30,this.avgDuration+=this.lastDuration/30,e>this.prevFpsTime+1e3&&(this.lastFps=this.frames,this.prevFpsTime=e,this.frames=0),e},vl.add("shader/chunk/fog_fragment.glsl","#ifdef USE_FOG\nfloat depth = length( vViewPosition );\n#ifdef FOG_EXP2\nfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif"),vl.add("shader/chunk/interior_fragment.glsl","if( gl_FrontFacing == false ){\n#ifdef USE_INTERIOR_COLOR\noutgoingLight.xyz = interiorColor;\n#else\n#ifdef DIFFUSE_INTERIOR\noutgoingLight.xyz = vColor;\n#endif\n#endif\noutgoingLight.xyz *= 1.0 - interiorDarkening;\n}"),vl.add("shader/chunk/matrix_scale.glsl","float matrixScale( in mat4 m ){\nvec4 r = m[ 0 ];\nreturn sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );\n}"),vl.add("shader/chunk/nearclip_vertex.glsl","#ifdef NEAR_CLIP\nif( vViewPosition.z < clipNear - 5.0 )\ngl_Position.z = 2.0 * gl_Position.w;\n#endif"),vl.add("shader/chunk/nearclip_fragment.glsl","#ifdef NEAR_CLIP\nif( vViewPosition.z < clipNear )\ndiscard;\n#endif"),vl.add("shader/chunk/opaque_back_fragment.glsl","#ifdef OPAQUE_BACK\n#ifdef FLIP_SIDED\nif( gl_FrontFacing == true ){\ngl_FragColor.a = 1.0;\n}\n#else\nif( gl_FrontFacing == false ){\ngl_FragColor.a = 1.0;\n}\n#endif\n#endif"),vl.add("shader/chunk/radiusclip_vertex.glsl","#ifdef RADIUS_CLIP\nif( distance( vViewPosition, vClipCenter ) > clipRadius + 5.0 )\ngl_Position.z = 2.0 * gl_Position.w;\n#endif"),vl.add("shader/chunk/radiusclip_fragment.glsl","#ifdef RADIUS_CLIP\nif( distance( vViewPosition, vClipCenter ) > clipRadius )\ndiscard;\n#endif"),vl.add("shader/chunk/unpack_color.glsl","vec3 unpackColor(float f) {\nvec3 color;\ncolor.r = floor(f / 256.0 / 256.0);\ncolor.g = floor((f - color.r * 256.0 * 256.0) / 256.0);\ncolor.b = floor(f - color.r * 256.0 * 256.0 - color.g * 256.0);\nreturn color / 255.0;\n}");var Gl=/^(?!\/\/)\s*#include\s+(\S+)/gim,Wl={};function $l(e,t){void 0===t&&(t={});var n=e+"|";for(var r in t)n+=r+":"+t[r];if(!Wl[n]){var i=function(e){if(void 0===e)return"";var t=[];for(var n in e){var r=e[n];r&&t.push("#define "+n+" "+r)}return t.join("\n")+"\n"}(t),o=vl.get("shader/"+e);if(!o)throw new Error("empty shader, '"+e+"'");o=o.replace(Gl,(function(e,t){var n="shader/chunk/"+t+".glsl",r=vl.get(n)||te[t];if(!r)throw new Error("empty chunk, '"+t+"'");return r})),Wl[n]=i+o}return Wl[n]}if("undefined"!==typeof WebGLRenderingContext){var ql=WebGLRenderingContext.prototype,Xl=ql.getShaderParameter;ql.getShaderParameter=function(){return!sl||Xl.apply(this,arguments)};var Kl=ql.getShaderInfoLog;ql.getShaderInfoLog=function(){return sl?Kl.apply(this,arguments):""};var Yl=ql.getProgramParameter;ql.getProgramParameter=function(e,t){return!sl&&t===ql.LINK_STATUS||Yl.apply(this,arguments)};var Zl=ql.getProgramInfoLog;ql.getProgramInfoLog=function(){return sl?Zl.apply(this,arguments):""}}var Ql=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];Ql.forEach((function(e){e.forEach((function(e){e[0]*=.0625,e[1]*=.0625}))}));var Jl=function(e,t,n,r){this.canvas=document.createElement("canvas"),this._viewer=n,this._factor=Sa(r.factor,2),this._antialias=Sa(r.antialias,!1),this._onProgress=r.onProgress,this._onFinish=r.onFinish,this._antialias&&(this._factor*=2),this._n=this._factor*this._factor,this._width=this._viewer.width,this._height=this._viewer.height,this._antialias?(this.canvas.width=this._width*this._factor/2,this.canvas.height=this._height*this._factor/2):(this.canvas.width=this._width*this._factor,this.canvas.height=this._height*this._factor),this._ctx=this.canvas.getContext("2d"),this._viewerSampleLevel=n.sampleLevel,this._viewer.setSampling(-1)};Jl.prototype._renderTile=function(e){var t=this._viewer,n=this._width,r=this._height,i=this._factor,o=e%i*n,a=Math.floor(e/i)*r;if(t.camera.setViewOffset(n*i,r*i,o,a,n,r),t.render(),this._antialias){var s=Math.round((o+n)/2)-Math.round(o/2),l=Math.round((a+r)/2)-Math.round(a/2);this._ctx.drawImage(t.renderer.domElement,Math.round(o/2),Math.round(a/2),s,l)}else this._ctx.drawImage(t.renderer.domElement,Math.floor(o),Math.floor(a),Math.ceil(n),Math.ceil(r));"function"===typeof this._onProgress&&this._onProgress(e+1,this._n,!1)},Jl.prototype._finalize=function(){this._viewer.setSampling(this._viewerSampleLevel),this._viewer.camera.view=null,"function"===typeof this._onFinish&&this._onFinish(this._n+1,this._n,!1)},Jl.prototype.render=function(){for(var e=this,t=0;t<=this._n;++t)t===e._n?e._finalize():e._renderTile(t)},Jl.prototype.renderAsync=function(){for(var e=this,t=0,n=this._n,r=function(){t===n?e._finalize():e._renderTile(t),t+=1},i=0;i<=n;++i)setTimeout(r,0)};var eu=2*Math.PI,tu=(Math.PI,180/Math.PI);function nu(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=0);var o=i?i.length:e.length/n,a=0,s=0;if(i)for(var l=0;l<o;++l){var u=(e[i[l]*n+r]+t)%t/t*eu-Math.PI;a+=Math.cos(u),s+=Math.sin(u)}else for(var c=r;c<o;c+=n){var d=(e[c]+t)%t/t*eu-Math.PI;a+=Math.cos(d),s+=Math.sin(d)}return a/=o,s/=o,(Math.atan2(s,a)+Math.PI)/eu*t}function ru(e,t,n,r){void 0===r&&(r=0);for(var i=e.length,o=n||new Float32Array(i),a=0;a<i;a+=3)o[r+a+0]=(e[a+0]+t[a+0])/2,o[r+a+1]=(e[a+1]+t[a+1])/2,o[r+a+2]=(e[a+2]+t[a+2])/2;return o}function iu(e,t){for(var n=e.length,r=new Float32Array(n),i=0;i<n;i+=3)r[i+0]=t[i+0]-e[i+0],r[i+1]=t[i+1]-e[i+1],r[i+2]=t[i+2]-e[i+2];return r}function ou(e,t,n){for(var r=n||new Float32Array(e),i=0;i<e;++i)r[i]=t;return r}function au(e,t,n,r,i){for(var o=i||new Float32Array(3*e),a=0;a<e;++a){var s=3*a;o[s+0]=t,o[s+1]=n,o[s+2]=r}return o}function su(e){for(var t=new Float32Array(e),n=0;n<e;++n)t[n]=n;return t}function lu(e,t,n,r){void 0===n&&(n=0);for(var i=r||new Float32Array(e*t),o=0;o<e;++o)for(var a=n+o*t,s=0;s<t;++s)i[a+s]=o;return i}function uu(e,t){for(var n=e.length,r=new Float32Array(n*t),i=0;i<n;++i)for(var o=i*t,a=e[i],s=0;s<t;++s)r[o+s]=a;return r}function cu(e,t,n,r,i){for(var o=0;o<i;++o)t[r+o]=e[n+o]}function du(e,t,n,r){cu(e,e,t,n,r)}function fu(e){for(var t=-1/0,n=0,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function pu(e){for(var t=1/0,n=0,r=e.length;n<r;++n)e[n]<t&&(t=e[n]);return t}function hu(e,t,n){void 0===t&&(t=1),void 0===n&&(n=0);for(var r=e.length,i=0,o=n;o<r;o+=t)i+=e[o];return i}function mu(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=0),hu(e,t,n)/(e.length/t)}var gu={trim:!1,factor:1,antialias:!1,transparent:!1,onProgress:void 0};function vu(e,t){void 0===t&&(t={});var n=Ca(t,gu),r=n.trim,i=n.factor,o=n.antialias,a=n.transparent,s=e.renderer,l=e.camera,u=s.getClearAlpha(),c=s.getClearColor();function d(t){void 0===t&&(t=!1);var n=i;o&&(n*=2),t&&(n=1/n),e.scene.traverse((function(e){var t=e.material;t&&t.linewidth&&(t.linewidth*=n),t&&t.uniforms&&t.uniforms.size&&void 0===t.uniforms.size.__seen&&(t.uniforms.size.value*=n,t.uniforms.size.__seen=!0),t&&t.uniforms&&t.uniforms.linewidth&&void 0===t.uniforms.linewidth.__seen&&(t.uniforms.linewidth.value*=n,t.uniforms.linewidth.__seen=!0)})),e.scene.traverse((function(e){var t=e.material;t&&t.uniforms&&t.uniforms.size&&delete t.uniforms.size.__seen,t&&t.uniforms&&t.uniforms.linewidth&&delete t.uniforms.linewidth.__seen}))}function f(e){if(r){var t=c;return function(e,t,n,r,i){var o,a,s,l,u=e.height,c=e.width,d=e.getContext("2d").getImageData(0,0,c,u).data;for(s=!1,a=0;a<u;a++){for(o=0;o<c;o++)if(d[l=4*(a*c+o)]!==t||d[l+1]!==n||d[l+2]!==r||d[l+3]!==i){s=!0;break}if(s)break}var f=a;for(s=!1,o=0;o<c;o++){for(a=0;a<u;a++)if(d[l=4*(a*c+o)]!==t||d[l+1]!==n||d[l+2]!==r||d[l+3]!==i){s=!0;break}if(s)break}var p=o;for(s=!1,a=u-1;a>=0;a--){for(o=c-1;o>=0;o--)if(d[l=4*(a*c+o)]!==t||d[l+1]!==n||d[l+2]!==r||d[l+3]!==i){s=!0;break}if(s)break}var h=a;for(s=!1,o=c-1;o>=0;o--){for(a=u-1;a>=0;a--)if(d[l=4*(a*c+o)]!==t||d[l+1]!==n||d[l+2]!==r||d[l+3]!==i){s=!0;break}if(s)break}var m=o,g=document.createElement("canvas");return g.width=m-p,g.height=h-f,g.getContext("2d").drawImage(e,p,f,g.width,g.height,0,0,g.width,g.height),g}(e,a?0:255*t.r,a?0:255*t.g,a?0:255*t.b,a?0:255)}return e}function p(e,n,r){"function"===typeof t.onProgress&&t.onProgress(e,n,r)}return new Promise((function(t,n){var r=new Jl(s,l,e,{factor:i,antialias:o,onProgress:p,onFinish:function(i,o){f(r.canvas).toBlob((function(r){s.setClearAlpha(u),d(!0),e.requestRender(),p(o,o,!0),r?t(r):n("error creating image")}),"image/png")}});s.setClearAlpha(a?0:1),d(),r.renderAsync()}))}var yu=new U,bu=new j,xu=new j;var wu=new z,_u=new j,Su=new j;function Cu(e,t){_u.getInverse(t.projectionMatrix),Su.copy(t.projectionMatrix).transpose(),e.traverse((function(e){var t=e.material;if(t){var n=t.uniforms;n&&(n.projectionMatrixInverse&&n.projectionMatrixInverse.value.copy(_u),n.projectionMatrixTranspose&&n.projectionMatrixTranspose.value.copy(Su))}}))}function Eu(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log("error compiling shader "+r+": "+e.getShaderInfoLog(r)),e.deleteShader(r),null)}function ku(e,t){var n=e.getExtension(t);return n||console.log("extension '"+t+"' not available"),n}var Pu=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);function Mu(e){var t=document.createElement("canvas");t.width=16,t.height=16,t.style.width="16px",t.style.height="16px";var n=t.getContext("webgl")||t.getContext("experimental-webgl");if(!n)return console.log("error creating webgl context for "+e),!1;ku(n,"OES_texture_float"),ku(n,"OES_texture_half_float"),ku(n,"WEBGL_color_buffer_float");var r=Eu(n,"\nattribute vec4 a_position;\n\nvoid main() {\n  gl_Position = a_position;\n}",n.VERTEX_SHADER),i=Eu(n,"\nprecision mediump float;\nuniform vec4 u_color;\nuniform sampler2D u_texture;\n\nvoid main() {\n  gl_FragColor = texture2D(u_texture, vec2(0.5, 0.5)) * u_color;\n}",n.FRAGMENT_SHADER);if(!r||!i)return!1;var o=function(e,t,n,r){var i=e.createProgram();return t.forEach((function(t){return e.attachShader(i,t)})),n&&n.forEach((function(t,n){e.bindAttribLocation(i,r?r[n]:n,t)})),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(console.log("error linking program: "+e.getProgramInfoLog(i)),e.deleteProgram(i),null)}(n,[r,i]);n.useProgram(o);var a=n.getAttribLocation(o,"a_position"),s=n.getUniformLocation(o,"u_color");if(!s)return console.log("error getting 'u_color' uniform location"),!1;var l=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,l),n.bufferData(n.ARRAY_BUFFER,Pu,n.STATIC_DRAW),n.enableVertexAttribArray(a),n.vertexAttribPointer(a,2,n.FLOAT,!1,0,0);var u=n.createTexture(),c=new Uint8Array([255,255,255,255]);n.bindTexture(n.TEXTURE_2D,u),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,c);var d=n.createTexture();n.bindTexture(n.TEXTURE_2D,d),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,e,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);var f=n.createFramebuffer();if(n.bindFramebuffer(n.FRAMEBUFFER,f),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,d,0),n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE)return console.log("error creating framebuffer for "+e),!1;n.bindTexture(n.TEXTURE_2D,u),n.uniform4fv(s,[0,10,20,1]),n.drawArrays(n.TRIANGLES,0,6),n.bindTexture(n.TEXTURE_2D,d),n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(1,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.uniform4fv(s,[0,.1,.05,1]),n.drawArrays(n.TRIANGLES,0,6);var p=new Uint8Array(4);if(n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,p),0!==p[0]||p[1]<248||p[2]<248||p[3]<254)return console.log("not able to actually render to "+e+" texture"),!1;if(e===n.FLOAT){n.bindFramebuffer(n.FRAMEBUFFER,f);var h=new Float32Array(4);n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,h);var m=n.getError();if(m)return console.log("error reading pixels as float: '"+function(e,t){switch(t){case e.NO_ERROR:return"no error";case e.INVALID_ENUM:return"invalid enum";case e.INVALID_VALUE:return"invalid value";case e.INVALID_OPERATION:return"invalid operation";case e.INVALID_FRAMEBUFFER_OPERATION:return"invalid framebuffer operation";case e.OUT_OF_MEMORY:return"out of memory";case e.CONTEXT_LOST_WEBGL:return"context lost"}return"unknown error"}(n,m)+"'"),!1}return!0}var Au=new Float32Array(100),Tu=new Uint8Array(100),Ru=[12,7,13,17,11,6,8,18,16,2,14,22,10,1,3,9,19,23,21,15,5,0,4,24,20],Iu=new j;function Ou(e,t,n,r,i){var o=i.uniforms,a=[];if(o.objectId&&(o.objectId.value=tl?this.id:this.id/255,a.push("objectId")),(o.modelViewMatrixInverse||o.modelViewMatrixInverseTranspose||o.modelViewProjectionMatrix||o.modelViewProjectionMatrixInverse)&&this.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,this.matrixWorld),o.modelViewMatrixInverse&&(o.modelViewMatrixInverse.value.getInverse(this.modelViewMatrix),a.push("modelViewMatrixInverse")),o.modelViewMatrixInverseTranspose&&(o.modelViewMatrixInverse?o.modelViewMatrixInverseTranspose.value.copy(o.modelViewMatrixInverse.value).transpose():o.modelViewMatrixInverseTranspose.value.getInverse(this.modelViewMatrix).transpose(),a.push("modelViewMatrixInverseTranspose")),o.modelViewProjectionMatrix&&(o.modelViewProjectionMatrix.value.multiplyMatrices(n.projectionMatrix,this.modelViewMatrix),a.push("modelViewProjectionMatrix")),o.modelViewProjectionMatrixInverse&&(o.modelViewProjectionMatrix?(Iu.copy(o.modelViewProjectionMatrix.value),o.modelViewProjectionMatrixInverse.value.getInverse(Iu)):(Iu.multiplyMatrices(n.projectionMatrix,this.modelViewMatrix),o.modelViewProjectionMatrixInverse.value.getInverse(Iu)),a.push("modelViewProjectionMatrixInverse")),a.length){var s=e.properties.get(i);if(s.program){var l=e.getContext(),u=s.program;l.useProgram(u.program);var c=u.getUniforms();a.forEach((function(e){c.setValue(l,e,o[e].value)}))}}}var Lu=function(e){if(this.boundingBox=new Z,this.boundingBoxSize=new U,this.boundingBoxLength=0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this.distVector=new U,this.signals={ticked:new fs,rendered:new fs},"string"===typeof e){var t=document.getElementById(e);this.container=null===t?document.createElement("div"):t}else e instanceof HTMLElement?this.container=e:this.container=document.createElement("div");if(this.container===document.body)this.width=window.innerWidth||1,this.height=window.innerHeight||1;else{var n=this.container.getBoundingClientRect();this.width=n.width||1,this.height=n.height||1,this.container.style.overflow="hidden"}this.wrapper=document.createElement("div"),this.wrapper.style.position="relative",this.container.appendChild(this.wrapper),this._initParams(),this._initStats(),this._initCamera(),this._initScene(),!1!==this._initRenderer()?(this._initHelper(),this.setBackground(),this.setFog(),this.animate=this.animate.bind(this)):rl.error("Viewer: could not initialize renderer")};Lu.prototype._initParams=function(){this.parameters={fogColor:new ie(0),fogNear:50,fogFar:100,fogMode:"scene",fogScale:"relative",backgroundColor:new ie(0),cameraType:"perspective",cameraFov:40,cameraEyeSep:.3,cameraZ:-80,clipNear:0,clipFar:100,clipDist:10,clipMode:"scene",clipScale:"relative",lightColor:new ie(14540253),lightIntensity:1,ambientColor:new ie(14540253),ambientIntensity:.2,sampleLevel:0}},Lu.prototype._initCamera=function(){var e=new U(0,0,0),t=this.width,n=this.height;this.perspectiveCamera=new _n(this.parameters.cameraFov,t/n),this.perspectiveCamera.position.z=this.parameters.cameraZ,this.perspectiveCamera.lookAt(e),this.orthographicCamera=new he(t/-2,t/2,n/2,n/-2),this.orthographicCamera.position.z=this.parameters.cameraZ,this.orthographicCamera.lookAt(e),this.stereoCamera=new Do,this.stereoCamera.aspect=.5,this.stereoCamera.eyeSep=this.parameters.cameraEyeSep;var r=this.parameters.cameraType;if("orthographic"===r)this.camera=this.orthographicCamera;else{if("perspective"!==r&&"stereo"!==r)throw new Error("Unknown cameraType '"+r+"'");this.camera=this.perspectiveCamera}this.camera.updateProjectionMatrix()},Lu.prototype._initStats=function(){this.stats=new Vl},Lu.prototype._initScene=function(){this.scene||(this.scene=new An,this.scene.name="scene"),this.rotationGroup=new wn,this.rotationGroup.name="rotationGroup",this.scene.add(this.rotationGroup),this.translationGroup=new wn,this.translationGroup.name="translationGroup",this.rotationGroup.add(this.translationGroup),this.modelGroup=new wn,this.modelGroup.name="modelGroup",this.translationGroup.add(this.modelGroup),this.pickingGroup=new wn,this.pickingGroup.name="pickingGroup",this.translationGroup.add(this.pickingGroup),this.backgroundGroup=new wn,this.backgroundGroup.name="backgroundGroup",this.translationGroup.add(this.backgroundGroup),this.helperGroup=new wn,this.helperGroup.name="helperGroup",this.translationGroup.add(this.helperGroup),this.scene.fog=new Mn(this.parameters.fogColor.getHex()),this.spotLight=new Qi(this.parameters.lightColor.getHex(),this.parameters.lightIntensity),this.scene.add(this.spotLight),this.ambientLight=new no(this.parameters.ambientColor.getHex(),this.parameters.ambientIntensity),this.scene.add(this.ambientLight)},Lu.prototype._initRenderer=function(){var e=window.devicePixelRatio,t=this.width,n=this.height;try{this.renderer=new kn({preserveDrawingBuffer:!0,alpha:!0,antialias:!0})}catch(bS){return this.wrapper.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;"><p style="padding:15px;text-align:center;">Your browser/graphics card does not seem to support <a target="_blank" href="https://en.wikipedia.org/wiki/WebGL">WebGL</a>.<br/><br/>Find out how to get it <a target="_blank" href="http://get.webgl.org/">here</a>.</p></div>',!1}this.renderer.setPixelRatio(e),this.renderer.setSize(t,n),this.renderer.autoClear=!1,this.renderer.sortObjects=!0;var r=this.renderer.getContext();!function(e){nl=e}(this.renderer.extensions.get("EXT_frag_depth")),this.renderer.extensions.get("OES_element_index_uint"),function(e){tl=e}(this.renderer.extensions.get("OES_texture_float")&&this.renderer.extensions.get("WEBGL_color_buffer_float")||this.renderer.extensions.get("OES_texture_float")&&Mu(r.FLOAT)),this.wrapper.appendChild(this.renderer.domElement);var i=t*e,o=n*e;this.renderer.extensions.get("OES_texture_float"),this.supportsHalfFloat=this.renderer.extensions.get("OES_texture_half_float")&&Mu(36193),this.renderer.extensions.get("WEBGL_color_buffer_float"),sl&&console.log(JSON.stringify({Browser:Zs,OES_texture_float:!!this.renderer.extensions.get("OES_texture_float"),OES_texture_half_float:!!this.renderer.extensions.get("OES_texture_half_float"),WEBGL_color_buffer_float:!!this.renderer.extensions.get("WEBGL_color_buffer_float"),"testTextureSupport Float":Mu(r.FLOAT),"testTextureSupport HalfFloat":Mu(36193),"this.supportsHalfFloat":this.supportsHalfFloat,SupportsReadPixelsFloat:tl},null,2)),this.pickingTarget=new X(i,o,{minFilter:g,magFilter:g,stencilBuffer:!1,format:M,type:tl?C:w}),this.pickingTarget.texture.generateMipmaps=!1,this.renderer.clearTarget(this.pickingTarget,!0,!0,!0),this.renderer.setRenderTarget(null),this.sampleTarget=new X(i,o,{minFilter:b,magFilter:b,format:M}),this.holdTarget=new X(i,o,{minFilter:g,magFilter:g,format:M,type:w}),this.compositeUniforms={tForeground:new Ko(this.sampleTarget.texture),scale:new Ko(1)},this.compositeMaterial=new je({uniforms:this.compositeUniforms,vertexShader:$l("Quad.vert"),fragmentShader:$l("Quad.frag"),premultipliedAlpha:!0,transparent:!0,blending:2,depthTest:!1,depthWrite:!1}),this.compositeCamera=new he(-1,1,1,-1,0,1),this.compositeScene=new An,this.compositeScene.name="compositeScene",this.compositeScene.add(new Ve(new De(2,2),this.compositeMaterial))},Lu.prototype._initHelper=function(){var e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),t=new Float32Array(24),n=new Ie;n.setIndex(new be(e,1)),n.addAttribute("position",new be(t,3));var r=new je({uniforms:{uColor:{value:new ie("skyblue")}},vertexShader:$l("BasicLine.vert"),fragmentShader:$l("BasicLine.frag")});this.boundingBoxMesh=new jn(n,r),this.helperGroup.add(this.boundingBoxMesh)},Lu.prototype.updateHelper=function(){var e=this.boundingBoxMesh.geometry.attributes.position,t=e.array,n=this.boundingBox,r=n.min,i=n.max;t[0]=i.x,t[1]=i.y,t[2]=i.z,t[3]=r.x,t[4]=i.y,t[5]=i.z,t[6]=r.x,t[7]=r.y,t[8]=i.z,t[9]=i.x,t[10]=r.y,t[11]=i.z,t[12]=i.x,t[13]=i.y,t[14]=r.z,t[15]=r.x,t[16]=i.y,t[17]=r.z,t[18]=r.x,t[19]=r.y,t[20]=r.z,t[21]=i.x,t[22]=r.y,t[23]=r.z,e.needsUpdate=!0,this.boundingBox.isEmpty()||this.boundingBoxMesh.geometry.computeBoundingSphere()},Lu.prototype.add=function(e,t){var n=this;t?t.forEach((function(t){return n.addBuffer(e,t)})):this.addBuffer(e),e.parameters.background?(this.backgroundGroup.add(e.group),this.backgroundGroup.add(e.wireframeGroup)):(this.modelGroup.add(e.group),this.modelGroup.add(e.wireframeGroup)),e.pickable&&this.pickingGroup.add(e.pickingGroup),sl&&this.updateHelper()},Lu.prototype.addBuffer=function(e,t){function n(r){r instanceof wn?r.children.forEach(n):(r.userData.buffer=e,r.userData.instance=t,r.onBeforeRender=Ou)}var r=e.getMesh();t&&r.applyMatrix(t.matrix),n(r),e.group.add(r);var i=e.getWireframeMesh();if(t&&(i.matrix.copy(r.matrix),i.position.copy(r.position),i.quaternion.copy(r.quaternion),i.scale.copy(r.scale)),n(i),e.wireframeGroup.add(i),e.pickable){var o=e.getPickingMesh();t&&(o.matrix.copy(r.matrix),o.position.copy(r.position),o.quaternion.copy(r.quaternion),o.scale.copy(r.scale)),n(o),e.pickingGroup.add(o)}t?this._updateBoundingBox(e.geometry,e.matrix,t.matrix):this._updateBoundingBox(e.geometry,e.matrix)},Lu.prototype.remove=function(e){this.translationGroup.children.forEach((function(t){t.remove(e.group),t.remove(e.wireframeGroup)})),e.pickable&&this.pickingGroup.remove(e.pickingGroup),this.updateBoundingBox(),sl&&this.updateHelper()},Lu.prototype._updateBoundingBox=function(e,t,n){var r=this.boundingBox;function i(e,t,n){e.boundingBox||e.computeBoundingBox();var i=e.boundingBox.clone();t&&i.applyMatrix4(t),n&&i.applyMatrix4(n),i.min.equals(i.max)&&i.expandByScalar(5),r.union(i)}function o(e){var t,n;void 0!==e.geometry&&(e.userData.buffer&&(t=e.userData.buffer.matrix),e.userData.instance&&(n=e.userData.instance.matrix),i(e.geometry,t,n))}e?i(e,t,n):(r.makeEmpty(),this.modelGroup.traverse(o),this.backgroundGroup.traverse(o)),r.getSize(this.boundingBoxSize),this.boundingBoxLength=this.boundingBoxSize.length()},Lu.prototype.updateBoundingBox=function(){this._updateBoundingBox(),sl&&this.updateHelper()},Lu.prototype.getPickingPixels=function(){var e=this.width,t=this.height,n=e*t*4,r=tl?new Float32Array(n):new Uint8Array(n);return this.render(!0),this.renderer.readRenderTargetPixels(this.pickingTarget,0,0,e,t,r),r},Lu.prototype.getImage=function(e){var t=this;return new Promise((function(n){if(e){var r=t,i=r.width,o=r.height,a=i*o*4,s=t.getPickingPixels();if(tl){for(var l=new Uint8Array(a),u=0;u<a;++u)l[u]=Math.round(255*s[u]);s=l}var c=document.createElement("canvas");c.width=i,c.height=o;var d=c.getContext("2d"),f=d.getImageData(0,0,i,o);f.data.set(s),d.putImageData(f,0,0),c.toBlob(n,"image/png")}else t.renderer.domElement.toBlob(n,"image/png")}))},Lu.prototype.makeImage=function(e){return void 0===e&&(e={}),vu(this,e)},Lu.prototype.setLight=function(e,t,n,r){var i=this.parameters;void 0!==e&&i.lightColor.set(e),void 0!==t&&(i.lightIntensity=t),void 0!==n&&i.ambientColor.set(n),void 0!==r&&(i.ambientIntensity=r),this.requestRender()},Lu.prototype.setFog=function(e,t,n,r,i){var o=this.parameters;void 0!==e&&o.fogColor.set(e),void 0!==t&&(o.fogNear=t),void 0!==n&&(o.fogFar=n),void 0!==r&&(o.fogMode=r),void 0!==i&&(o.fogScale=i),this.requestRender()},Lu.prototype.setBackground=function(e){var t=this.parameters;e&&t.backgroundColor.set(e),this.setFog(t.backgroundColor),this.renderer.setClearColor(t.backgroundColor,0),this.renderer.domElement.style.backgroundColor=t.backgroundColor.getStyle(),this.requestRender()},Lu.prototype.setSampling=function(e){void 0!==e&&(this.parameters.sampleLevel=e,this.sampleLevel=e),this.requestRender()},Lu.prototype.setCamera=function(e,t,n){var r=this.parameters;if(e&&(r.cameraType=e),t&&(r.cameraFov=t),n&&(r.cameraEyeSep=n),"orthographic"===r.cameraType)this.camera!==this.orthographicCamera&&(this.camera=this.orthographicCamera,this.camera.position.copy(this.perspectiveCamera.position),this.camera.up.copy(this.perspectiveCamera.up),this.updateZoom());else{if("perspective"!==r.cameraType&&"stereo"!==r.cameraType)throw new Error("Unknown cameraType '"+r.cameraType+"'");this.camera!==this.perspectiveCamera&&(this.camera=this.perspectiveCamera,this.camera.position.copy(this.orthographicCamera.position),this.camera.up.copy(this.orthographicCamera.up))}this.perspectiveCamera.fov=r.cameraFov,this.stereoCamera.eyeSep=r.cameraEyeSep,this.camera.updateProjectionMatrix(),this.requestRender()},Lu.prototype.setClip=function(e,t,n,r,i){var o=this.parameters;void 0!==e&&(o.clipNear=e),void 0!==t&&(o.clipFar=t),void 0!==n&&(o.clipDist=n),void 0!==r&&(o.clipMode=r),void 0!==i&&(o.clipScale=i),this.requestRender()},Lu.prototype.setSize=function(e,t){this.width=e||1,this.height=t||1,this.perspectiveCamera.aspect=this.width/this.height,this.orthographicCamera.left=-this.width/2,this.orthographicCamera.right=this.width/2,this.orthographicCamera.top=this.height/2,this.orthographicCamera.bottom=-this.height/2,this.camera.updateProjectionMatrix();var n=window.devicePixelRatio;this.renderer.setPixelRatio(n),this.renderer.setSize(e,t);var r=this.width*n,i=this.height*n;this.pickingTarget.setSize(r,i),this.sampleTarget.setSize(r,i),this.holdTarget.setSize(r,i),this.requestRender()},Lu.prototype.handleResize=function(){if(this.container===document.body)this.setSize(window.innerWidth,window.innerHeight);else{var e=this.container.getBoundingClientRect();this.setSize(e.width,e.height)}},Lu.prototype.updateInfo=function(e){var t=this.info,n=t.memory,r=t.render;if(e)n.programs=0,n.geometries=0,n.textures=0,r.calls=0,r.vertices=0,r.points=0;else{var i=this.renderer.info,o=i.memory,a=i.render;n.geometries=o.geometries,n.textures=o.textures,r.calls+=a.calls,r.faces+=a.triangles,r.points+=a.points}},Lu.prototype.animate=function(){if(this.signals.ticked.dispatch(this.stats),window.performance.now()-this.stats.startTime>500&&!this.isStill&&this.sampleLevel<3&&-1!==this.sampleLevel){var e=this.sampleLevel;this.sampleLevel=3,this.renderPending=!0,this.render(),this.isStill=!0,this.sampleLevel=e,sl&&rl.log("rendered still frame")}window.requestAnimationFrame(this.animate)},Lu.prototype.pick=function(e,t){if("stereo"===this.parameters.cameraType)return{pid:0,instance:void 0,picker:void 0};e*=window.devicePixelRatio,t*=window.devicePixelRatio,e=Math.max(e-2,0),t=Math.max(t-2,0);var n,r,i=0,o=tl?Au:Tu;this.render(!0),this.renderer.readRenderTargetPixels(this.pickingTarget,e,t,5,5,o);for(var a=0;a<Ru.length;a++){var s=4*Ru[a],l=Math.round(o[s+3]),u=this.pickingGroup.getObjectById(l);u&&(n=u.userData.instance,r=u.userData.buffer.picking,i=tl?Math.round(255*o[s])<<16&16711680|Math.round(255*o[s+1])<<8&65280|255&Math.round(255*o[s+2]):o[s]<<16|o[s+1]<<8|o[s+2])}return{pid:i,instance:n,picker:r}},Lu.prototype.requestRender=function(){var e=this;this.renderPending||(window.performance.now()-this.stats.startTime>22&&(this.stats.begin(),this.isStill=!1),this.renderPending=!0,window.requestAnimationFrame((function(){e.render(),e.stats.update()})))},Lu.prototype.updateZoom=function(){var e=Xa(this.perspectiveCamera.fov),t=2*Math.tan(e/2)*-this.camera.position.z;this.orthographicCamera.zoom=this.height/t},Lu.prototype.__updateClipping=function(){var e=this.parameters;if(this.cDist=this.distVector.copy(this.camera.position).length(),this.cDist||(this.camera.position.set(0,0,e.cameraZ),this.cDist=Math.abs(e.cameraZ)),"absolute"===e.clipScale&&"absolute"===e.fogScale||(this.bRadius=Math.max(10,.5*this.boundingBoxLength),this.bRadius+=this.boundingBox.getCenter(this.distVector).length(),(this.bRadius===1/0||this.bRadius===-1/0||isNaN(this.bRadius))&&(this.bRadius=50)),"camera"==e.clipMode)this.camera.near=e.clipNear,this.camera.far=e.clipFar;else if("absolute"==e.clipScale)this.camera.near=this.cDist-e.clipNear,this.camera.far=this.cDist+e.clipFar;else{var t=(50-e.clipNear)/50,n=-(50-e.clipFar)/50;this.camera.near=this.cDist-this.bRadius*t,this.camera.far=this.cDist+this.bRadius*n}var r=this.scene.fog;if(r.color.set(e.fogColor),"camera"==e.fogMode)r.near=e.fogNear,r.far=e.fogFar;else if("absolute"==e.fogScale)r.near=this.cDist+e.fogNear,r.far=this.cDist+e.fogFar;else{var i=(50-e.fogNear)/50,o=-(50-e.fogFar)/50;r.near=this.cDist-this.bRadius*i,r.far=this.cDist+this.bRadius*o}"PerspectiveCamera"===this.camera.type?(this.camera.near=Math.max(.1,e.clipDist,this.camera.near),this.camera.far=Math.max(1,this.camera.far),r.near=Math.max(.1,r.near),r.far=Math.max(1,r.far)):"OrthographicCamera"===this.camera.type&&e.clipDist>0&&(this.camera.near=Math.max(e.clipDist,this.camera.near))},Lu.prototype.__updateCamera=function(){var e=this.camera;e.updateMatrix(),e.updateMatrixWorld(!0),e.updateProjectionMatrix(),function(e,t,n,r,i){var o=n.getSize(),a=o.width,s=o.height,l=s,u=n.getPixelRatio(),c="OrthographicCamera"===t.type;wu.set(a,s),_u.getInverse(t.projectionMatrix),Su.copy(t.projectionMatrix).transpose(),e.traverse((function(e){var t=e.material;if(t){var n=t.uniforms;if(n){if(t.clipNear){var o=(50-t.clipNear)/50,a=r-i*o;n.clipNear.value=a}n.canvasHeight&&(n.canvasHeight.value=l),n.resolution&&n.resolution.value.copy(wu),n.pixelRatio&&(n.pixelRatio.value=u),n.projectionMatrixInverse&&n.projectionMatrixInverse.value.copy(_u),n.projectionMatrixTranspose&&n.projectionMatrixTranspose.value.copy(Su),n.ortho&&(n.ortho.value=c)}}}))}(this.scene,e,this.renderer,this.cDist,this.bRadius),function(e,t){e.traverseVisible((function(e){if(e instanceof Vn&&e.userData.buffer.parameters.sortParticles){var n=e.geometry.attributes,r=n.position.count;if(0!==r){var i,o,a,s,l,u,c;bu.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),xu.multiplyMatrices(t.projectionMatrix,bu),e.userData.sortData?(i=e.userData.sortData,a=i.__zArray,o=i.__sortArray,s=i.__cmpFn):(a=new Float32Array(r),o=new Uint32Array(r),i={__zArray:a,__sortArray:o,__cmpFn:s=function(e,t){var n=a[e],r=a[t];return n>r?1:n<r?-1:0}},e.userData.sortData=i);for(var d=0;d<r;++d)yu.fromArray(n.position.array,3*d),yu.applyMatrix4(xu),a[d]=-yu.z,o[d]=d;for(var f in function(e,t,n,r){void 0===n&&(n=0),t=t||function(e,t){return e>t?1:e<t?-1:0};var i,o,a,s=[],l=-1,u=n,c=r=(r||e.length)-1;function d(t,n){var r=e[t];e[t]=e[n],e[n]=r}for(;;)if(c-u<=25){for(var f=u+1;f<=c;++f){for(i=e[f],o=f-1;o>=u&&t(e[o],i)>0;)e[o+1]=e[o],--o;e[o+1]=i}if(-1===l)break;c=s[l--],u=s[l--]}else{for(a=c,d(u+c>>1,o=u+1),t(e[u],e[c])>0&&d(u,c),t(e[o],e[c])>0&&d(o,c),t(e[u],e[o])>0&&d(u,o),i=e[o];;){do{o++}while(t(e[o],i)<0);do{a--}while(t(e[a],i)>0);if(a<o)break;d(o,a)}e[u+1]=e[a],e[a]=i,c-o+1>=a-u?(s[++l]=o,s[++l]=c,c=a-1):(s[++l]=u,s[++l]=a-1,u=o)}}(o,s),n){var p=n[f],h=p.array,m=p.itemSize;i[f]||(i[f]=new Float32Array(m*r)),c=i[f],i[f]=h;for(var g=0;g<r;++g){l=o[g];for(var v=0;v<m;++v)u=l*m+v,c[g*m+v]=h[u]}n[f].array=c,n[f].needsUpdate=!0}}}}))}(this.scene,e)},Lu.prototype.__setVisibility=function(e,t,n,r){this.modelGroup.visible=e,this.pickingGroup.visible=t,this.backgroundGroup.visible=n,this.helperGroup.visible=r},Lu.prototype.__updateLights=function(){this.spotLight.color.set(this.parameters.lightColor),this.spotLight.intensity=this.parameters.lightIntensity,this.distVector.copy(this.camera.position).setLength(100*this.boundingBoxLength),this.spotLight.position.copy(this.camera.position).add(this.distVector),this.ambientLight.color.set(this.parameters.ambientColor),this.ambientLight.intensity=this.parameters.ambientIntensity},Lu.prototype.__renderPickingGroup=function(e){this.renderer.clearTarget(this.pickingTarget,!0,!0,!0),this.__setVisibility(!1,!0,!1,!1),this.renderer.render(this.scene,e,this.pickingTarget),this.updateInfo(),this.renderer.setRenderTarget(null)},Lu.prototype.__renderModelGroup=function(e,t){t?this.renderer.clearTarget(t,!0,!0,!0):this.renderer.clear(),this.__setVisibility(!1,!1,!0,!1),this.renderer.render(this.scene,e,t),t?this.renderer.clearTarget(t,!1,!0,!1):this.renderer.clearDepth(),this.updateInfo(),this.__setVisibility(!0,!1,!1,sl),this.renderer.render(this.scene,e,t),this.updateInfo()},Lu.prototype.__renderSuperSample=function(e){var t=this,n=Ql[Math.max(0,Math.min(this.sampleLevel,5))],r=1/n.length;this.compositeUniforms.tForeground.value=this.sampleTarget.texture;var i=this.sampleTarget.width,o=this.sampleTarget.height;"stereo"===this.parameters.cameraType&&(i/=2);for(var a=0;a<n.length;++a){var s=n[a];e.setViewOffset(i,o,s[0],s[1],i,o),e.updateProjectionMatrix(),Cu(t.scene,e);var l=r;l+=.03125*((a+.5)/n.length-.5),t.compositeUniforms.scale.value=l,t.__renderModelGroup(e,t.sampleTarget),t.renderer.render(t.compositeScene,t.compositeCamera,t.holdTarget,0===a)}this.compositeUniforms.scale.value=1,this.compositeUniforms.tForeground.value=this.holdTarget.texture,e.clearViewOffset(),this.renderer.render(this.compositeScene,this.compositeCamera,null,!0)},Lu.prototype.__renderStereo=function(e){void 0===e&&(e=!1);var t=this.stereoCamera;t.update(this.perspectiveCamera);var n=this.renderer,r=n.getSize();n.setScissorTest(!0),n.setScissor(0,0,r.width/2,r.height),n.setViewport(0,0,r.width/2,r.height),Cu(this.scene,t.cameraL),this.__render(e,t.cameraL),n.setScissor(r.width/2,0,r.width/2,r.height),n.setViewport(r.width/2,0,r.width/2,r.height),Cu(this.scene,t.cameraR),this.__render(e,t.cameraR),n.setScissorTest(!1),n.setViewport(0,0,r.width,r.height)},Lu.prototype.__render=function(e,t){void 0===e&&(e=!1),e?this.lastRenderedPicking||this.__renderPickingGroup(t):this.sampleLevel>0&&"stereo"!==this.parameters.cameraType?this.__renderSuperSample(t):this.__renderModelGroup(t)},Lu.prototype.render=function(e){void 0===e&&(e=!1),this.rendering?rl.warn("'tried to call 'render' from within 'render'"):(this.rendering=!0,this.__updateClipping(),this.__updateCamera(),this.__updateLights(),this.updateInfo(!0),"stereo"===this.parameters.cameraType?this.__renderStereo(e):this.__render(e,this.camera),this.lastRenderedPicking=e,this.rendering=!1,this.renderPending=!1,this.signals.rendered.dispatch())},Lu.prototype.clear=function(){rl.log("scene cleared"),this.scene.remove(this.rotationGroup),this._initScene(),this.renderer.clear()},Lu.prototype.dispose=function(){this.renderer.dispose()};var Du=1,Fu=2,Nu=3;function Bu(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;return Math.sqrt(t*t+n*n)}var zu=function(e,t){void 0===t&&(t={}),this.domElement=e,this.signals={moved:new fs,scrolled:new fs,dragged:new fs,dropped:new fs,clicked:new fs,hovered:new fs,doubleClicked:new fs},this.position=new z,this.prevPosition=new z,this.down=new z,this.canvasPosition=new z,this.prevClickCP=new z,this.moving=!1,this.hovering=!0,this.scrolled=!1,this.lastMoved=1/0,this.which=0,this.buttons=0,this.pressed=!1,this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.shiftKey=!1,this.domElement.style.touchAction="none",this.hoverTimeout=Sa(t.hoverTimeout,50),this.handleScroll=Sa(t.handleScroll,!0),this.doubleClickSpeed=Sa(t.doubleClickSpeed,500),this._listen=this._listen.bind(this),this._onMousewheel=this._onMousewheel.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMousedown=this._onMousedown.bind(this),this._onMouseup=this._onMouseup.bind(this),this._onContextmenu=this._onContextmenu.bind(this),this._onTouchstart=this._onTouchstart.bind(this),this._onTouchend=this._onTouchend.bind(this),this._onTouchmove=this._onTouchmove.bind(this),this._listen();var n={passive:!1};document.addEventListener("mousewheel",this._onMousewheel,n),document.addEventListener("wheel",this._onMousewheel,n),document.addEventListener("MozMousePixelScroll",this._onMousewheel,n),document.addEventListener("mousemove",this._onMousemove,n),document.addEventListener("mousedown",this._onMousedown,n),document.addEventListener("mouseup",this._onMouseup,n),document.addEventListener("contextmenu",this._onContextmenu,n),document.addEventListener("touchstart",this._onTouchstart,n),document.addEventListener("touchend",this._onTouchend,n),document.addEventListener("touchmove",this._onTouchmove,n)},ju={key:{configurable:!0}};ju.key.get=function(){var e=0;return this.altKey&&(e+=1),this.ctrlKey&&(e+=2),this.metaKey&&(e+=4),this.shiftKey&&(e+=8),e},zu.prototype.setParameters=function(e){void 0===e&&(e={}),this.hoverTimeout=Sa(e.hoverTimeout,this.hoverTimeout)},zu.prototype._listen=function(){var e=window.performance.now(),t=this.canvasPosition;this.doubleClickPending&&e-this.lastClicked>this.doubleClickSpeed&&(this.doubleClickPending=!1),e-this.lastMoved>this.hoverTimeout&&(this.moving=!1),(this.scrolled||!this.moving&&!this.hovering)&&(this.scrolled=!1,-1!==this.hoverTimeout&&this.overElement&&(this.hovering=!0,this.signals.hovered.dispatch(t.x,t.y))),window.requestAnimationFrame(this._listen)},zu.prototype._onMousewheel=function(e){var t=this;if(e.target===this.domElement&&this.handleScroll){e.preventDefault(),this._setKeys(e);var n=0;n=e.wheelDelta?e.wheelDelta/40:e.detail?-e.detail/3:-e.deltaY/(e.deltaMode?.33:30),this.signals.scrolled.dispatch(n),setTimeout((function(){t.scrolled=!0}),this.hoverTimeout)}},zu.prototype._onMousemove=function(e){e.target===this.domElement?(e.preventDefault(),this.overElement=!0):this.overElement=!1,this._setKeys(e),this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(e.clientX,e.clientY),this._setCanvasPosition(e);var t=this.prevPosition.x-this.position.x,n=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(t,n),this.pressed&&this.signals.dragged.dispatch(t,n)},zu.prototype._onMousedown=function(e){e.target===this.domElement&&(e.preventDefault(),this._setKeys(e),this.moving=!1,this.hovering=!1,this.down.set(e.clientX,e.clientY),this.position.set(e.clientX,e.clientY),this.which=e.which,this.buttons=function(e){if("object"===typeof e){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var n=e.button;if(1===n)return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0}(e),this.pressed=!0,this._setCanvasPosition(e))},zu.prototype._onMouseup=function(e){e.target===this.domElement&&e.preventDefault(),this._setKeys(e);var t=this.canvasPosition;this._distance()<4&&(this.lastClicked=window.performance.now(),this.doubleClickPending&&this.prevClickCP.distanceTo(t)<4&&(this.signals.doubleClicked.dispatch(t.x,t.y),this.doubleClickPending=!1),this.signals.clicked.dispatch(t.x,t.y),this.doubleClickPending=!0,this.prevClickCP.copy(t)),this.which=void 0,this.buttons=void 0,this.pressed=void 0},zu.prototype._onContextmenu=function(e){e.target===this.domElement&&e.preventDefault()},zu.prototype._onTouchstart=function(e){if(e.target===this.domElement)switch(e.preventDefault(),this.pressed=!0,e.touches.length){case 1:this.moving=!1,this.hovering=!1,this.down.set(e.touches[0].pageX,e.touches[0].pageY),this.position.set(e.touches[0].pageX,e.touches[0].pageY),this._setCanvasPosition(e.touches[0]);break;case 2:this.down.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),this.position.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),this.lastTouchDistance=Bu(e)}},zu.prototype._onTouchend=function(e){e.target===this.domElement&&e.preventDefault(),this.which=void 0,this.buttons=void 0,this.pressed=void 0},zu.prototype._onTouchmove=function(e){switch(e.target===this.domElement?(e.preventDefault(),this.overElement=!0):this.overElement=!1,e.touches.length){case 1:this._setKeys(e),this.which=Du,this.buttons=1,this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(e.touches[0].pageX,e.touches[0].pageY),this._setCanvasPosition(e.touches[0]);var t=this.prevPosition.x-this.position.x,n=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(t,n),this.pressed&&this.signals.dragged.dispatch(t,n);break;case 2:var r=Bu(e),i=r-this.lastTouchDistance;if(this.lastTouchDistance=r,this.prevPosition.copy(this.position),this.position.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),Math.abs(i)>2&&this.handleScroll&&this.position.distanceTo(this.prevPosition)<2)this.which=0,this.buttons=0,this.signals.scrolled.dispatch(i/2);else{this.which=Nu,this.buttons=2;var o=this.prevPosition.x-this.position.x,a=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(o,a),this.pressed&&this.signals.dragged.dispatch(o,a)}}},zu.prototype._distance=function(){return this.position.distanceTo(this.down)},zu.prototype._setCanvasPosition=function(e){var t,n,r=this.domElement.getBoundingClientRect();"offsetX"in e&&"offsetY"in e?(t=e.offsetX,n=e.offsetY):(t=e.clientX-r.left,n=e.clientY-r.top),this.canvasPosition.set(t,r.height-n)},zu.prototype._setKeys=function(e){this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey,this.shiftKey=e.shiftKey},zu.prototype.dispose=function(){document.removeEventListener("mousewheel",this._onMousewheel),document.removeEventListener("wheel",this._onMousewheel),document.removeEventListener("MozMousePixelScroll",this._onMousewheel),document.removeEventListener("mousemove",this._onMousemove),document.removeEventListener("mousedown",this._onMousedown),document.removeEventListener("mouseup",this._onMouseup),document.removeEventListener("contextmenu",this._onContextmenu),document.removeEventListener("touchstart",this._onTouchstart),document.removeEventListener("touchend",this._onTouchend),document.removeEventListener("touchmove",this._onTouchmove)},Object.defineProperties(zu.prototype,ju);var Hu=new j,Uu=new j,Vu=new j,Gu=new j,Wu=new U,$u=new H,qu=new j,Xu=new U,Ku=new U,Yu=function(e,t){void 0===t&&(t={}),this.stage=e,this.rotateSpeed=Sa(t.rotateSpeed,2),this.zoomSpeed=Sa(t.zoomSpeed,1.2),this.panSpeed=Sa(t.panSpeed,1),this.viewer=e.viewer,this.mouse=e.mouseObserver,this.controls=e.viewerControls},Zu={component:{configurable:!0},atom:{configurable:!0}};Zu.component.get=function(){return this.stage.transformComponent},Zu.atom.get=function(){return this.stage.transformAtom},Yu.prototype._setPanVector=function(e,t,n){void 0===n&&(n=0);var r=this.controls.getCanvasScaleFactor(n);Xu.set(e,t,0),Xu.multiplyScalar(this.panSpeed*r)},Yu.prototype._getRotateXY=function(e,t){return[this.rotateSpeed*-e*.01,this.rotateSpeed*t*.01]},Yu.prototype._transformPanVector=function(){this.component&&(qu.extractRotation(this.component.transform),qu.premultiply(this.viewer.rotationGroup.matrix),qu.getInverse(qu),Xu.applyMatrix4(qu))},Yu.prototype.zoom=function(e){this.controls.zoom(this.zoomSpeed*e*.02)},Yu.prototype.pan=function(e,t){this._setPanVector(e,t),qu.getInverse(this.viewer.rotationGroup.matrix),Xu.applyMatrix4(qu),this.controls.translate(Xu)},Yu.prototype.panComponent=function(e,t){this.component&&(this._setPanVector(e,t),this._transformPanVector(),this.component.position.add(Xu),this.component.updateMatrix())},Yu.prototype.panAtom=function(e,t){this.atom&&this.component&&(this.atom.positionToVector3(Ku),Ku.add(this.viewer.translationGroup.position),Ku.applyMatrix4(this.viewer.rotationGroup.matrix),this._setPanVector(e,t,Ku.z),this._transformPanVector(),this.atom.positionAdd(Xu),this.component.updateRepresentations({position:!0}))},Yu.prototype.rotate=function(e,t){var n=this._getRotateXY(e,t),r=n[0],i=n[1];Hu.makeRotationX(i),Uu.makeRotationY(r),Hu.multiply(Uu),this.controls.applyMatrix(Hu)},Yu.prototype.zRotate=function(e,t){var n=this.rotateSpeed*((-e+t)/-2)*.01;Vu.makeRotationZ(n),this.controls.applyMatrix(Vu)},Yu.prototype.rotateComponent=function(e,t){if(this.component){var n=this._getRotateXY(e,t),r=n[0],i=n[1];Gu.extractRotation(this.component.transform),Gu.premultiply(this.viewer.rotationGroup.matrix),Gu.getInverse(Gu),Wu.set(1,0,0),Wu.applyMatrix4(Gu),Hu.makeRotationAxis(Wu,i),Wu.set(0,1,0),Wu.applyMatrix4(Gu),Uu.makeRotationAxis(Wu,r),Hu.multiply(Uu),$u.setFromRotationMatrix(Hu),this.component.quaternion.premultiply($u),this.component.updateMatrix()}},Object.defineProperties(Yu.prototype,Zu);var Qu=new U;var Ju=function(e,t){this.stage=t,this.pid=e.pid,this.picker=e.picker,this.instance=e.instance,this.stage=t,this.controls=t.viewerControls,this.mouse=t.mouseObserver},ec={type:{configurable:!0},altKey:{configurable:!0},ctrlKey:{configurable:!0},metaKey:{configurable:!0},shiftKey:{configurable:!0},canvasPosition:{configurable:!0},component:{configurable:!0},object:{configurable:!0},position:{configurable:!0},closestBondAtom:{configurable:!0},closeAtom:{configurable:!0},arrow:{configurable:!0},atom:{configurable:!0},axes:{configurable:!0},bond:{configurable:!0},box:{configurable:!0},cone:{configurable:!0},clash:{configurable:!0},contact:{configurable:!0},cylinder:{configurable:!0},distance:{configurable:!0},ellipsoid:{configurable:!0},octahedron:{configurable:!0},point:{configurable:!0},mesh:{configurable:!0},slice:{configurable:!0},sphere:{configurable:!0},tetrahedron:{configurable:!0},torus:{configurable:!0},surface:{configurable:!0},unitcell:{configurable:!0},unknown:{configurable:!0},volume:{configurable:!0},wideline:{configurable:!0}};ec.type.get=function(){return this.picker.type},ec.altKey.get=function(){return this.mouse.altKey},ec.ctrlKey.get=function(){return this.mouse.ctrlKey},ec.metaKey.get=function(){return this.mouse.metaKey},ec.shiftKey.get=function(){return this.mouse.shiftKey},ec.canvasPosition.get=function(){return this.mouse.canvasPosition},ec.component.get=function(){return this.stage.getComponentsByObject(this.picker.data).list[0]},ec.object.get=function(){return this.picker.getObject(this.pid)},ec.position.get=function(){return this.picker.getPosition(this.pid,this.instance,this.component)},ec.closestBondAtom.get=function(){if("bond"===this.type&&this.bond){var e,t,n,r=this.bond,i=this.controls,o=this.canvasPosition,a=i.getPositionOnCanvas(r.atom1),s=i.getPositionOnCanvas(r.atom2);return t=a,n=s,(e=o).distanceTo(t)<e.distanceTo(n)?r.atom1:r.atom2}},ec.closeAtom.get=function(){var e=this.canvasPosition,t=this.closestBondAtom;if(t){var n=this.controls.getPositionOnCanvas(t);t.positionToVector3(Qu),this.instance&&Qu.applyMatrix4(this.instance.matrix),Qu.applyMatrix4(this.component.matrix);var r=this.controls.viewer;Qu.add(r.translationGroup.position),Qu.applyMatrix4(r.rotationGroup.matrix);var i=this.controls.getCanvasScaleFactor(Qu.z),o=this.component.getMaxRepresentationRadius(t.index);return e.distanceTo(n)<=o/i?t:void 0}},ec.arrow.get=function(){return this._objectIfType("arrow")},ec.atom.get=function(){return this._objectIfType("atom")},ec.axes.get=function(){return this._objectIfType("axes")},ec.bond.get=function(){return this._objectIfType("bond")},ec.box.get=function(){return this._objectIfType("box")},ec.cone.get=function(){return this._objectIfType("cone")},ec.clash.get=function(){return this._objectIfType("clash")},ec.contact.get=function(){return this._objectIfType("contact")},ec.cylinder.get=function(){return this._objectIfType("cylinder")},ec.distance.get=function(){return this._objectIfType("distance")},ec.ellipsoid.get=function(){return this._objectIfType("ellipsoid")},ec.octahedron.get=function(){return this._objectIfType("octahedron")},ec.point.get=function(){return this._objectIfType("point")},ec.mesh.get=function(){return this._objectIfType("mesh")},ec.slice.get=function(){return this._objectIfType("slice")},ec.sphere.get=function(){return this._objectIfType("sphere")},ec.tetrahedron.get=function(){return this._objectIfType("tetrahedron")},ec.torus.get=function(){return this._objectIfType("torus")},ec.surface.get=function(){return this._objectIfType("surface")},ec.unitcell.get=function(){return this._objectIfType("unitcell")},ec.unknown.get=function(){return this._objectIfType("unknown")},ec.volume.get=function(){return this._objectIfType("volume")},ec.wideline.get=function(){return this._objectIfType("wideline")},Ju.prototype._objectIfType=function(e){return this.type===e?this.object:void 0},Ju.prototype.getLabel=function(){var e=this.atom||this.closeAtom,t="nothing";return this.arrow?t=this.arrow.name:e?t="atom: "+e.qualifiedName()+" ("+e.structure.name+")":this.axes?t="axes":this.bond?t="bond: "+this.bond.atom1.qualifiedName()+" - "+this.bond.atom2.qualifiedName()+" ("+this.bond.structure.name+")":this.box?t=this.box.name:this.cone?t=this.cone.name:this.clash?t="clash: "+this.clash.clash.sele1+" - "+this.clash.clash.sele2:this.contact?t=this.contact.type+": "+this.contact.atom1.qualifiedName()+" - "+this.contact.atom2.qualifiedName()+" ("+this.contact.atom1.structure.name+")":this.cylinder?t=this.cylinder.name:this.distance?t="distance: "+this.distance.atom1.qualifiedName()+" - "+this.distance.atom2.qualifiedName()+" ("+this.distance.structure.name+")":this.ellipsoid?t=this.ellipsoid.name:this.octahedron?t=this.octahedron.name:this.point?t=this.point.name:this.mesh?t="mesh: "+(this.mesh.name||this.mesh.serial)+" ("+this.mesh.shape.name+")":this.slice?t="slice: "+this.slice.value.toPrecision(3)+" ("+this.slice.volume.name+")":this.sphere?t=this.sphere.name:this.surface?t="surface: "+this.surface.surface.name:this.tetrahedron?t=this.tetrahedron.name:this.torus?t=this.torus.name:this.unitcell?t="unitcell: "+this.unitcell.unitcell.spacegroup+" ("+this.unitcell.structure.name+")":this.unknown?t="unknown":this.volume?t="volume: "+this.volume.value.toPrecision(3)+" ("+this.volume.volume.name+")":this.wideline&&(t=this.wideline.name),t},Object.defineProperties(Ju.prototype,ec);var tc=function(e){this.stage=e,this.viewer=e.viewer};tc.prototype.pick=function(e,t){var n=this.viewer.pick(e,t);if(n.picker&&"ignore"!==n.picker.type&&void 0!==n.pid){var r=n.picker.array;if(!(r&&n.pid>=r.length))return new Ju(n,this.stage);console.error("pid >= picker.array.length")}};var nc=new H,rc=new U,ic=new U,oc=new U,ac=new U,sc=new j,lc=new U,uc=new j,cc=function(e){this.stage=e,this.signals={changed:new fs},this.viewer=e.viewer},dc={position:{configurable:!0},rotation:{configurable:!0}};dc.position.get=function(){return this.viewer.translationGroup.position},dc.rotation.get=function(){return this.viewer.rotationGroup.quaternion},cc.prototype.changed=function(){this.viewer.requestRender(),this.signals.changed.dispatch()},cc.prototype.getPositionOnCanvas=function(e,t){var n=ja(t,z),r=this.viewer;return oc.copy(e).add(r.translationGroup.position).applyMatrix4(r.rotationGroup.matrix).project(r.camera),n.set((oc.x+1)*r.width/2,(oc.y+1)*r.height/2)},cc.prototype.getCanvasScaleFactor=function(e){void 0===e&&(e=0);var t=this.viewer.camera;if(t instanceof he)return 1/t.zoom;e=-e,e+=t.position.z;var n=Xa(t.fov);return-2*e*Math.tan(n/2)/this.viewer.height},cc.prototype.getOrientation=function(e){var t=Ua(e);t.copy(this.viewer.rotationGroup.matrix);var n=-this.viewer.camera.position.z;return t.scale(ac.set(n,n,n)),t.setPosition(this.viewer.translationGroup.position),t},cc.prototype.orient=function(e){Ua(e).decompose(rc,nc,ic);var t=this.viewer;t.rotationGroup.setRotationFromQuaternion(nc),t.translationGroup.position.copy(rc),t.camera.position.z=-ic.z,t.updateZoom(),this.changed()},cc.prototype.translate=function(e){this.viewer.translationGroup.position.add(Ha(e)),this.changed()},cc.prototype.center=function(e){this.viewer.translationGroup.position.copy(Ha(e)).negate(),this.changed()},cc.prototype.zoom=function(e){this.distance(this.viewer.camera.position.z*(1-e))},cc.prototype.distance=function(e){this.viewer.camera.position.z=Math.min(-1,e),this.viewer.updateZoom(),this.changed()},cc.prototype.spin=function(e,t){sc.getInverse(this.viewer.rotationGroup.matrix),lc.copy(Ha(e)).applyMatrix4(sc),this.viewer.rotationGroup.rotateOnAxis(lc,t),this.changed()},cc.prototype.rotate=function(e){this.viewer.rotationGroup.setRotationFromQuaternion(Va(e)),this.changed()},cc.prototype.align=function(e){uc.getInverse(Ua(e)),this.viewer.rotationGroup.setRotationFromMatrix(uc),this.changed()},cc.prototype.applyMatrix=function(e){this.viewer.rotationGroup.applyMatrix(Ua(e)),this.changed()},Object.defineProperties(cc.prototype,dc);var fc=function(e,t){for(var n,r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];this.pausedTime=-1,this.elapsedDuration=0,this.pausedDuration=0,this.ignoreGlobalToggle=!1,this._paused=!1,this._resolveList=[],this.duration=Sa(e,1e3),this.controls=t,this.startTime=window.performance.now(),(n=this)._init.apply(n,r)},pc={done:{configurable:!0},paused:{configurable:!0}};pc.done.get=function(){return 1===this.alpha},pc.paused.get=function(){return this._paused},fc.prototype.tick=function(e){if(!this._paused)return this.elapsedDuration=e.currentTime-this.startTime-this.pausedDuration,0===this.duration?this.alpha=1:this.alpha=ns(0,1,this.elapsedDuration/this.duration),this._tick(e),this.done&&this._resolveList.forEach((function(e){return e()})),this.done},fc.prototype.pause=function(e){e&&(this._hold=!0),-1===this.pausedTime&&(this.pausedTime=window.performance.now()),this._paused=!0},fc.prototype.resume=function(e){!e&&this._hold||(this.pausedDuration+=window.performance.now()-this.pausedTime,this._paused=!1,this._hold=!1,this.pausedTime=-1)},fc.prototype.toggle=function(){this._paused?this.resume():this.pause()},fc.prototype.then=function(e){var t,n=this;return t=this.done?Promise.resolve():new Promise((function(e){return n._resolveList.push(e)})),t.then(e)},Object.defineProperties(fc.prototype,pc);var hc=function(e){function t(t,n){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];e.apply(this,[Sa(t,1/0),n].concat(r))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t){Array.isArray(e)?this.axis=(new U).fromArray(e):this.axis=Sa(e,new U(0,1,0)),this.angle=Sa(t,.01)},t.prototype._tick=function(e){this.axis&&this.angle&&this.controls.spin(this.axis,this.angle*e.lastDuration/16)},t}(fc),mc=function(e){function t(t,n){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];e.apply(this,[Sa(t,1/0),n].concat(r)),this.angleSum=0,this.direction=1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t,n){Array.isArray(e)?this.axis=(new U).fromArray(e):this.axis=Sa(e,new U(0,1,0)),this.angleStep=Sa(t,.01),this.angleEnd=Sa(n,.2)},t.prototype._tick=function(e){if(this.axis&&this.angleStep&&this.angleEnd){var t=ns(0,1,Math.abs(this.angleSum)/this.angleEnd),n=this.angleStep*this.direction*(1.1-t);this.controls.spin(this.axis,n*e.lastDuration/16),this.angleSum+=this.angleStep,this.angleSum>=this.angleEnd&&(this.direction*=-1,this.angleSum=-this.angleEnd)}},t}(fc),gc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t){this.moveFrom=Ha(Sa(e,new U)),this.moveTo=Ha(Sa(t,new U))},t.prototype._tick=function(){this.controls.position.lerpVectors(this.moveFrom,this.moveTo,this.alpha).negate(),this.controls.changed()},t}(fc),vc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t){this.zoomFrom=e,this.zoomTo=t},t.prototype._tick=function(){this.controls.distance(es(this.zoomFrom,this.zoomTo,this.alpha))},t}(fc),yc=function(e){function t(){e.apply(this,arguments),this._currentRotation=new H}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t){this.rotateFrom=Va(e),this.rotateTo=Va(t),this._currentRotation=new H},t.prototype._tick=function(){this._currentRotation.copy(this.rotateFrom).slerp(this.rotateTo,this.alpha),this.controls.rotate(this._currentRotation)},t}(fc),bc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t,n){this.valueFrom=e,this.valueTo=t,this.callback=n},t.prototype._tick=function(){this.callback(es(this.valueFrom,this.valueTo,this.alpha))},t}(fc),xc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e){this.callback=e},t.prototype._tick=function(){1===this.alpha&&this.callback()},t}(fc),wc=function(e){void 0===e&&(e=[]),this._resolveList=[],this._list=e},_c={done:{configurable:!0}};_c.done.get=function(){return this._list.every((function(e){return e.done}))},wc.prototype.then=function(e){var t,n=this;return t=this.done?Promise.resolve():new Promise((function(e){n._resolveList.push(e),n._list.forEach((function(e){e.then((function(){n._resolveList.forEach((function(e){e()})),n._resolveList.length=0}))}))})),t.then(e)},Object.defineProperties(wc.prototype,_c);var Sc=function(e){this.stage=e,this.animationList=[],this.finishedList=[],this.viewer=e.viewer,this.controls=e.viewerControls},Cc={paused:{configurable:!0}};Cc.paused.get=function(){return this.animationList.every((function(e){return e.paused}))},Sc.prototype.add=function(e){return 0===e.duration?e.tick(this.viewer.stats):this.animationList.push(e),e},Sc.prototype.remove=function(e){var t=this.animationList,n=t.indexOf(e);n>-1&&t.splice(n,1)},Sc.prototype.run=function(e){for(var t=this.finishedList,n=this.animationList,r=n.length,i=0;i<r;++i){var o=n[i];o.tick(e)&&t.push(o)}var a=t.length;if(a){for(var s=0;s<a;++s)this.remove(t[s]);t.length=0}},Sc.prototype.spin=function(e,t,n){return this.add(new hc(n,this.controls,e,t))},Sc.prototype.rock=function(e,t,n,r){return this.add(new mc(r,this.controls,e,t,n))},Sc.prototype.rotate=function(e,t){var n=this.viewer.rotationGroup.quaternion.clone();return this.add(new yc(t,this.controls,n,e))},Sc.prototype.move=function(e,t){var n=this.controls.position.clone().negate();return this.add(new gc(t,this.controls,n,e))},Sc.prototype.zoom=function(e,t){var n=this.viewer.camera.position.z;return this.add(new vc(t,this.controls,n,e))},Sc.prototype.zoomMove=function(e,t,n){return new wc([this.move(e,n),this.zoom(t,n)])},Sc.prototype.orient=function(e,t){var n=new U,r=new H,i=new U;return Ua(e).decompose(n,r,i),new wc([this.move(n.negate(),t),this.rotate(r,t),this.zoom(-i.x,t)])},Sc.prototype.value=function(e,t,n,r){return this.add(new bc(r,this.controls,e,t,n))},Sc.prototype.timeout=function(e,t){return this.add(new xc(t,this.controls,e))},Sc.prototype.spinComponent=function(e,t,n,r){return this.add(new hc(r,e.controls,t,n))},Sc.prototype.rockComponent=function(e,t,n,r,i){return this.add(new mc(i,e.controls,t,n,r))},Sc.prototype.moveComponent=function(e,t,n){var r=e.controls.position.clone().negate();return this.add(new gc(n,e.controls,r,t))},Sc.prototype.pause=function(){this.animationList.forEach((function(e){return e.pause()}))},Sc.prototype.resume=function(){this.animationList.forEach((function(e){return e.resume()}))},Sc.prototype.toggle=function(){this.paused?this.resume():this.pause()},Sc.prototype.clear=function(){this.animationList.length=0},Sc.prototype.dispose=function(){this.clear()},Object.defineProperties(Sc.prototype,Cc);var Ec=function(e,t){if(this.fn=e,this.queue=[],this.pending=!1,this.next=this.next.bind(this),t){for(var n=0,r=t.length;n<r;++n)this.queue.push(t[n]);this.next()}};Ec.prototype.run=function(e){this.fn(e,this.next)},Ec.prototype.next=function(){var e=this,t=this.queue.shift();void 0!==t?(this.pending=!0,setTimeout((function(){return e.run(t)}))):this.pending=!1},Ec.prototype.push=function(e){this.queue.push(e),this.pending||this.next()},Ec.prototype.kill=function(){this.queue.length=0},Ec.prototype.length=function(){return this.queue.length};var kc=function(e,t,n){this.type="",this.parameters={lazy:{type:"boolean"},clipNear:{type:"range",step:1,max:100,min:0,buffer:!0},clipRadius:{type:"number",precision:1,max:1e3,min:0,buffer:!0},clipCenter:{type:"vector3",precision:1,buffer:!0},flatShaded:{type:"boolean",buffer:!0},opacity:{type:"range",step:.01,max:1,min:0,buffer:!0},depthWrite:{type:"boolean",buffer:!0},side:{type:"select",buffer:!0,options:{front:"front",back:"back",double:"double"}},wireframe:{type:"boolean",buffer:!0},colorScheme:{type:"select",update:"color",options:{}},colorScale:{type:"select",update:"color",options:pl.getScales()},colorReverse:{type:"boolean",update:"color"},colorValue:{type:"color",update:"color"},colorDomain:{type:"hidden",update:"color"},colorMode:{type:"select",update:"color",options:pl.getModes()},roughness:{type:"range",step:.01,max:1,min:0,buffer:!0},metalness:{type:"range",step:.01,max:1,min:0,buffer:!0},diffuse:{type:"color",buffer:!0},diffuseInterior:{type:"boolean",buffer:!0},useInteriorColor:{type:"boolean",buffer:!0},interiorColor:{type:"color",buffer:!0},interiorDarkening:{type:"range",step:.01,max:1,min:0,buffer:!0},matrix:{type:"hidden",buffer:!0},disablePicking:{type:"boolean",rebuild:!0}},this.viewer=t,this.tasks=new Ul,this.queue=new Ec(this.make.bind(this)),this.bufferList=[],this.parameters.colorScheme&&(this.parameters.colorScheme.options=pl.getSchemes()),this.toBePrepared=!1};kc.prototype.init=function(e){var t=e||{};this.clipNear=Sa(t.clipNear,0),this.clipRadius=Sa(t.clipRadius,0),this.clipCenter=Sa(t.clipCenter,new U),this.flatShaded=Sa(t.flatShaded,!1),this.side=Sa(t.side,"double"),this.opacity=Sa(t.opacity,1),this.depthWrite=Sa(t.depthWrite,!0),this.wireframe=Sa(t.wireframe,!1),this.setColor(t.color,t),this.colorScheme=Sa(t.colorScheme,"uniform"),this.colorScale=Sa(t.colorScale,""),this.colorReverse=Sa(t.colorReverse,!1),this.colorValue=Sa(t.colorValue,9474192),this.colorDomain=Sa(t.colorDomain,void 0),this.colorMode=Sa(t.colorMode,"hcl"),this.visible=Sa(t.visible,!0),this.quality=Sa(t.quality,void 0),this.roughness=Sa(t.roughness,.4),this.metalness=Sa(t.metalness,0),this.diffuse=Sa(t.diffuse,16777215),this.diffuseInterior=Sa(t.diffuseInterior,!1),this.useInteriorColor=Sa(t.useInteriorColor,!1),this.interiorColor=Sa(t.interiorColor,2236962),this.interiorDarkening=Sa(t.interiorDarkening,0),this.lazy=Sa(t.lazy,!1),this.lazyProps={build:!1,bufferParams:{},what:{}},this.matrix=Sa(t.matrix,new j),this.disablePicking=Sa(t.disablePicking,!1);var n=this.parameters;!0===n.sphereDetail&&(n.sphereDetail={type:"integer",max:3,min:0,rebuild:"impostor"}),!0===n.radialSegments&&(n.radialSegments={type:"integer",max:25,min:5,rebuild:"impostor"}),!0===n.openEnded&&(n.openEnded={type:"boolean",rebuild:"impostor",buffer:!0}),!0===n.disableImpostor&&(n.disableImpostor={type:"boolean",rebuild:!0}),"low"===t.quality?(n.sphereDetail&&(this.sphereDetail=0),n.radialSegments&&(this.radialSegments=5)):"medium"===t.quality?(n.sphereDetail&&(this.sphereDetail=1),n.radialSegments&&(this.radialSegments=10)):"high"===t.quality?(n.sphereDetail&&(this.sphereDetail=2),n.radialSegments&&(this.radialSegments=20)):(n.sphereDetail&&(this.sphereDetail=Sa(t.sphereDetail,1)),n.radialSegments&&(this.radialSegments=Sa(t.radialSegments,10))),n.openEnded&&(this.openEnded=Sa(t.openEnded,!0)),n.disableImpostor&&(this.disableImpostor=Sa(t.disableImpostor,!1))},kc.prototype.getColorParams=function(e){return Object.assign({scheme:this.colorScheme,scale:this.colorScale,reverse:this.colorReverse,value:this.colorValue,domain:this.colorDomain,mode:this.colorMode},e)},kc.prototype.getBufferParams=function(e){return void 0===e&&(e={}),Object.assign({clipNear:this.clipNear,clipRadius:this.clipRadius,clipCenter:this.clipCenter,flatShaded:this.flatShaded,opacity:this.opacity,depthWrite:this.depthWrite,side:this.side,wireframe:this.wireframe,roughness:this.roughness,metalness:this.metalness,diffuse:this.diffuse,diffuseInterior:this.diffuseInterior,useInteriorColor:this.useInteriorColor,interiorColor:this.interiorColor,interiorDarkening:this.interiorDarkening,matrix:this.matrix,disablePicking:this.disablePicking},e)},kc.prototype.setColor=function(e,t){var n=Object.keys(pl.getSchemes());if("string"===typeof e&&n.includes(e.toLowerCase()))t?t.colorScheme=e:this.setParameters({colorScheme:e});else if(void 0!==e){var r=new ie(e).getHex();t?(t.colorScheme="uniform",t.colorValue=r):this.setParameters({colorScheme:"uniform",colorValue:r})}return this},kc.prototype.prepare=function(e){},kc.prototype.create=function(){},kc.prototype.update=function(e){this.build()},kc.prototype.build=function(e){if(!this.lazy||this.visible&&this.opacity){if(!this.toBePrepared)return this.tasks.increment(),void this.make();this.queue.length()>0?(this.tasks.change(1-this.queue.length()),this.queue.kill()):this.tasks.increment(),this.queue.push(e||!1)}else this.lazyProps.build=!0},kc.prototype.make=function(e,t){var n=this;sl&&rl.time("Representation.make "+this.type);var r=function(){e?(n.update(e),n.viewer.requestRender(),n.tasks.decrement(),t&&t()):(n.clear(),n.create(),n.manualAttach||n.disposed||(sl&&rl.time("Representation.attach "+n.type),n.attach((function(){sl&&rl.timeEnd("Representation.attach "+n.type),n.tasks.decrement(),t&&t()})))),sl&&rl.timeEnd("Representation.make "+n.type)};this.toBePrepared?this.prepare(r):r()},kc.prototype.attach=function(e){this.setVisibility(this.visible),e()},kc.prototype.setVisibility=function(e,t){if(this.visible=e,this.visible&&this.opacity){var n=this.lazyProps,r=n.bufferParams,i=n.what;if(n.build)return n.build=!1,this.build(),this;(Object.keys(r).length||Object.keys(i).length)&&(n.bufferParams={},n.what={},this.updateParameters(r,i))}return this.bufferList.forEach((function(t){t.setVisibility(e)})),t||this.viewer.requestRender(),this},kc.prototype.setParameters=function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1);var i=e||{},o=this.parameters,a={};for(var s in this.opacity||void 0===i.opacity||(this.lazyProps.build?(this.lazyProps.build=!1,n=!0):(Object.assign(a,this.lazyProps.bufferParams),Object.assign(t,this.lazyProps.what),this.lazyProps.bufferParams={},this.lazyProps.what={})),this.setColor(i.color,i),i)if(void 0!==i[s]&&void 0!==o[s]&&(o[s].int&&(i[s]=parseInt(i[s])),o[s].float&&(i[s]=parseFloat(i[s])),i[s]!==r[s]||i[s].equals&&!i[s].equals(r[s]))){if(r[s]&&r[s].copy&&i[s].copy?r[s].copy(i[s]):r[s]&&r[s].set?r[s].set(i[s]):r[s]=i[s],o[s].buffer)if(!0===o[s].buffer)a[s]=i[s];else a[o[s].buffer]=i[s];o[s].update&&(t[o[s].update]=!0),!o[s].rebuild||"impostor"===o[s].rebuild&&nl&&!r.disableImpostor||(n=!0)}return n?this.build():this.updateParameters(a,t),this},kc.prototype.updateParameters=function(e,t){if(void 0===e&&(e={}),this.lazy&&(!this.visible||!this.opacity)&&!1===e.hasOwnProperty("opacity"))return Object.assign(this.lazyProps.bufferParams,e),void Object.assign(this.lazyProps.what,t);this.bufferList.forEach((function(t){t.setParameters(e)})),Object.keys(t).length&&this.update(t),this.viewer.requestRender()},kc.prototype.getParameters=function(){var e=this,t={lazy:this.lazy,visible:this.visible,quality:this.quality};return Object.keys(this.parameters).forEach((function(n){null!==e.parameters[n]&&(t[n]=e[n])})),t},kc.prototype.clear=function(){var e=this;this.bufferList.forEach((function(t){e.viewer.remove(t),t.dispose()})),this.bufferList.length=0,this.viewer.requestRender()},kc.prototype.dispose=function(){this.disposed=!0,this.queue.kill(),this.tasks.dispose(),this.clear()};var Pc=function(e){var t=this;this.pending=0,this.postCount=0,this.onmessageDict={},this.onerrorDict={},this.name=e,this.blobUrl=window.URL.createObjectURL(fl.get(e)),this.worker=new Worker(this.blobUrl),fl.activeWorkerCount+=1,this.worker.onmessage=function(n){t.pending-=1;var r=n.data.__postId;sl&&rl.timeEnd("Worker.postMessage "+e+" #"+r);var i=t.onmessageDict[r];i&&i.call(t.worker,n),delete t.onmessageDict[r],delete t.onerrorDict[r]},this.worker.onerror=function(n){if(t.pending-=1,n.data){var r=n.data.__postId,i=t.onerrorDict[r];i?i.call(t.worker,n):rl.error("Worker.onerror",r,e,n),delete t.onmessageDict[r],delete t.onerrorDict[r]}else rl.error("Worker.onerror",e,n)}};Pc.prototype.post=function(e,t,n,r){void 0===e&&(e={}),this.onmessageDict[this.postCount]=n,this.onerrorDict[this.postCount]=r,e.__name=this.name,e.__postId=this.postCount,e.__debug=sl,sl&&rl.time("Worker.postMessage "+this.name+" #"+this.postCount);try{this.worker.postMessage(e,t)}catch(i){rl.error("worker.post:",i),this.worker.postMessage(e)}return this.pending+=1,this.postCount+=1,this},Pc.prototype.terminate=function(){this.worker?(this.worker.terminate(),window.URL.revokeObjectURL(this.blobUrl),fl.activeWorkerCount-=1):rl.log("no worker to terminate")};var Mc=function(e,t){void 0===t&&(t=2),this.pool=[],this.count=0,this.maxCount=Math.min(8,t),this.name=e};function Ac(e){for(var t=e.length,n=t/3,r=0,i=0,o=0,a=0;a<t;a+=3)r+=e[a+0],i+=e[a+1],o+=e[a+2];return new U(r/n,i/n,o/n)}function Tc(e,t,n){return n?e.sub(n).projectOnVector(t).add(n):e.projectOnVector(t),e}function Rc(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],d=e[s+2];u<t&&(t=u),c<n&&(n=c),d<r&&(r=d),u>i&&(i=u),c>o&&(o=c),d>a&&(a=d)}return[Dc([t,n,r]),Dc([i,o,a])]}function Ic(e,t){for(var n=0,r=t.length;n<r;n+=3){var i=t[n],o=t[n+1],a=t[n+2];t[n]=e[0]*i+e[4]*o+e[8]*a+e[12],t[n+1]=e[1]*i+e[5]*o+e[9]*a+e[13],t[n+2]=e[2]*i+e[6]*o+e[10]*a+e[14]}}function Oc(e,t){for(var n=0,r=t.length;n<r;n+=3){var i=t[n],o=t[n+1],a=t[n+2];t[n]=e[0]*i+e[3]*o+e[6]*a,t[n+1]=e[1]*i+e[4]*o+e[7]*a,t[n+2]=e[2]*i+e[5]*o+e[8]*a}}function Lc(e){for(var t=0,n=e.length;t<n;t+=3){var r=e[t],i=e[t+1],o=e[t+2],a=1/Math.sqrt(r*r+i*i+o*o);e[t]=r*a,e[t+1]=i*a,e[t+2]=o*a}}function Dc(e){return new Float32Array(e||3)}function Fc(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a}function Nc(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bc(e,t,n){e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2]}function zc(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}function jc(e,t,n){void 0===n&&(n=0),e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2]}function Hc(e,t,n){void 0===n&&(n=0),t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2]}function Uc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function Vc(e,t,n){Gc(e,t,1/n)}function Gc(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}function Wc(e,t){Gc(e,t,1/Uc(t))}function $c(e,t,n){e[0]=t[0]-n,e[1]=t[1]-n,e[2]=t[2]-n}function qc(e,t,n){e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n}function Xc(e,t){e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2])}function Kc(e,t){e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2])}function Yc(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2]}function Zc(e,t){void 0===t&&(t=9);for(var n=Math.floor(t/2),r=e.position1.length/3,i=3*(n*r),o=1/t,a=iu(e.position1,e.position2),s=new Float32Array(i),l=new Float32Array(i),u=new U,c=0;c<r;++c){var d=3*c;u.set(a[d],a[d+1],a[d+2]);for(var f=e.position1[d],p=e.position1[d+1],h=e.position1[d+2],m=0;m<n;++m){var g=n*d+3*m,v=o*(2*m+1),y=o*(2*m+2);s[g]=f+u.x*v,s[g+1]=p+u.y*v,s[g+2]=h+u.z*v,l[g]=f+u.x*y,l[g+1]=p+u.y*y,l[g+2]=h+u.z*y}}var b=ru(s,l),x=function(e,t){for(var n=e.length/3,r=new Float32Array(n*t*3),i=0;i<n;++i)for(var o=3*i,a=i*t*3,s=e[o+0],l=e[o+1],u=e[o+2],c=0;c<t;++c){var d=a+3*c;r[d+0]=s,r[d+1]=l,r[d+2]=u}return r}(e.color,n),w={position:b,position1:s,position2:l,color:x,color2:x};return e.radius&&(w.radius=uu(e.radius,n)),e.picking&&e.picking.array&&(e.picking.array=uu(e.picking.array,n),w.picking=e.picking),e.primitiveId&&(w.primitiveId=uu(e.primitiveId,n)),w}function Qc(e,t){void 0===t&&(t=.1);for(var n=iu(e.position1,e.position2),r=[],i=[],o=[],a=e.radius?[]:void 0,s=e.picking?[]:void 0,l=e.primitiveId?[]:void 0,u=new U,c=e.position1.length/3,d=0,f=0;f<c;++f){var p=3*f;u.set(n[p],n[p+1],n[p+2]);for(var h=u.length()/t,m=Math.floor(h/2),g=1/h,v=e.position1[p],y=e.position1[p+1],b=e.position1[p+2],x=0;x<m;++x){var w=3*d+3*x,_=g*(2*x+1),S=g*(2*x+2);r[w]=v+u.x*_,r[w+1]=y+u.y*_,r[w+2]=b+u.z*_,i[w]=v+u.x*S,i[w+1]=y+u.y*S,i[w+2]=b+u.z*S,e.color&&(o[w]=e.color[p],o[w+1]=e.color[p+1],o[w+2]=e.color[p+2]),a&&(a[d+x]=e.radius[f]),s&&(e.picking.array?s[d+x]=e.picking.array[f]:s[d+x]=f),l&&(l[d+x]=e.primitiveId[f])}d+=m}var C=new Float32Array(r),E=new Float32Array(i),k=ru(C,E),P=new Float32Array(o),M={position:k,position1:C,position2:E,color:P,color2:P};return a&&(M.radius=new Float32Array(a)),s&&e.picking&&(e.picking.array=new Float32Array(s),M.picking=e.picking),l&&(M.primitiveId=new Float32Array(l)),M}function Jc(e,t){void 0===t&&(t=.1);for(var n=iu(e.position1,e.position2),r=[],i=[],o=[],a=e.radius?[]:void 0,s=e.picking?[]:void 0,l=e.primitiveId?[]:void 0,u=new U,c=e.position1.length/3,d=t,f=!0,p=0,h=0,m=0,g=0;g<c;++g){var v=3*g,y=e.position1[v],b=e.position1[v+1],x=e.position1[v+2];u.set(n[v],n[v+1],n[v+2]);var w=u.length();f&&(r[h]=y,r[h+1]=b,r[h+2]=x);for(var _=d,S=1/w;_<w;){var C=f?i:r;C[h]=y+u.x*_*S,C[h+1]=b+u.y*_*S,C[h+2]=x+u.z*_*S,f&&(h=3*++p),f=!f,d=t,_+=t}f&&(i[h]=e.position2[v],i[h+1]=e.position2[v+1],i[h+2]=e.position2[v+2],h=3*++p),d=_-w;for(var E=m;E<p;E++){if(e.color){var k=3*E;o[k]=e.color[v],o[k+1]=e.color[v+1],o[k+2]=e.color[v+2]}a&&(a[E]=e.radius[g]),s&&(e.picking.array?s[E]=e.picking.array[g]:s[E]=g),l&&(l[E]=e.primitiveId[g])}m=p}if(!f&&c>0){var P=3*p;i[P]=e.position2[3*c-3],i[P+1]=e.position2[3*c-2],i[P+1]=e.position2[3*c-1]}var M=new Float32Array(r),A=new Float32Array(i),T=ru(M,A),R=new Float32Array(o),I={position:T,position1:M,position2:A,color:R,color2:R};return a&&(I.radius=new Float32Array(a)),s&&e.picking&&(e.picking.array=new Float32Array(s),I.picking=e.picking),l&&(I.primitiveId=new Float32Array(l)),I}Mc.prototype.post=function(e,t,n,r){void 0===e&&(e={});var i=this.getNextWorker();return i?i.post(e,t,n,r):console.error("unable to get worker from pool"),this},Mc.prototype.terminate=function(){this.pool.forEach((function(e){e.terminate()}))},Mc.prototype.getNextWorker=function(){for(var e,t=this,n=1/0,r=0;r<this.maxCount;++r){if(r>=t.count){e=new Pc(t.name),t.pool.push(e),t.count+=1;break}var i=t.pool[r];if(0===i.pending){e=i;break}i.pending<n&&(n=i.pending,e=i)}return e},Mc.prototype.constructor=Mc,Rc.__deps=[Dc],Vc.__deps=[Gc],Wc.__deps=[Gc,Uc];var ed=new U,td=function(){},nd={Picker:{configurable:!0},Buffer:{configurable:!0}};nd.Picker.get=function(){return wl.get(this.type)},nd.Buffer.get=function(){return xl.get(this.type)},td.getShapeKey=function(e){return this.type+e[0].toUpperCase()+e.substr(1)},td.expandBoundingBox=function(e,t){},td.valueToShape=function(e,t,n){var r,i,o=e._primitiveData[this.getShapeKey(t)];switch(this.fields[t]){case"v3":case"c":i=o,void 0!==(r=n).toArray?r=r.toArray():void 0!==r.x?r=[r.x,r.y,r.z]:void 0!==r.r&&(r=[r.r,r.g,r.b]),i.push.apply(i,r);break;default:o.push(n)}},td.objectToShape=function(e,t){var n=this;Object.keys(this.fields).forEach((function(r){n.valueToShape(e,r,t[r])})),this.valueToShape(e,"name",t.name),this.expandBoundingBox(e.boundingBox,t)},td.valueFromShape=function(e,t,n){var r=e._primitiveData[this.getShapeKey(n)];switch(this.fields[n]){case"v3":return(new U).fromArray(r,3*t);case"c":return(new ie).fromArray(r,3*t);default:return r[t]}},td.objectFromShape=function(e,t){var n=this,r=this.valueFromShape(e,t,"name");void 0===r&&(r=this.type+": "+t+" ("+e.name+")");var i={shape:e,name:r};return Object.keys(this.fields).forEach((function(r){i[r]=n.valueFromShape(e,t,r)})),i},td.arrayFromShape=function(e,t){var n=e._primitiveData[this.getShapeKey(t)];return"s"===this.fields[t]?n:new Float32Array(n)},td.dataFromShape=function(e){var t=this,n={};return this.Picker&&(n.picking=new this.Picker(e)),Object.keys(this.fields).forEach((function(r){n[r]=t.arrayFromShape(e,r)})),n},td.bufferFromShape=function(e,t){return new this.Buffer(this.dataFromShape(e),t)},Object.defineProperties(td,nd),td.type="",td.fields={};var rd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){return this.valueFromShape(e,t,"position")},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position))},t}(td);rd.type="sphere",rd.fields={position:"v3",color:"c",radius:"f"};var id=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){return this.valueFromShape(e,t,"position")},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position))},t}(td);id.type="box",id.fields={position:"v3",color:"c",size:"f",heightAxis:"v3",depthAxis:"v3"};var od=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(id);od.type="octahedron";var ad=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(id);ad.type="tetrahedron";var sd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){var n=this.valueFromShape(e,t,"position1"),r=this.valueFromShape(e,t,"position2");return n.add(r).multiplyScalar(.5)},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position1)),e.expandByPoint(ed.fromArray(t.position2))},t.bufferFromShape=function(e,t){void 0===t&&(t={});var n=this.dataFromShape(e);return"cylinder"===this.type&&t.dashedCylinder&&(n=Qc(n)),new this.Buffer(n,t)},t}(td);sd.type="cylinder",sd.fields={position1:"v3",position2:"v3",color:"c",radius:"f"};var ld=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(sd);ld.type="arrow";var ud=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(sd);ud.type="cone";var cd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(rd);cd.type="ellipsoid",cd.fields={position:"v3",color:"c",radius:"f",majorAxis:"v3",minorAxis:"v3"};var dd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(cd);dd.type="torus";var fd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){return this.valueFromShape(e,t,"position")},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position))},t}(td);fd.type="text",fd.fields={position:"v3",color:"c",size:"f",text:"s"};var pd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){return this.valueFromShape(e,t,"position")},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position))},t}(td);pd.type="point",pd.fields={position:"v3",color:"c"};var hd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){var n=this.valueFromShape(e,t,"position1"),r=this.valueFromShape(e,t,"position2");return n.add(r).multiplyScalar(.5)},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position1)),e.expandByPoint(ed.fromArray(t.position2))},t}(td);hd.type="wideline",hd.fields={position1:"v3",position2:"v3",color:"c"};var md=function(e,t){var n=this;this.exp=3;var r=t||function(e){for(var t=e.x,n=e.y,r=e.z,i=new Z,o=t.length,a=i.min,s=i.max,l=0;l<o;l++)a.x=Math.min(t[l],a.x),a.y=Math.min(n[l],a.y),a.z=Math.min(r[l],a.z),s.x=Math.max(t[l],s.x),s.y=Math.max(n[l],s.y),s.z=Math.max(r[l],s.z);return i}(e);this.minX=r.min.x,this.minY=r.min.y,this.minZ=r.min.z,this.boundX=1+(r.max.x-this.minX>>this.exp),this.boundY=1+(r.max.y-this.minY>>this.exp),this.boundZ=1+(r.max.z-this.minZ>>this.exp);for(var i=this.boundX*this.boundY*this.boundZ,o=void 0!==e.count?e.count:e.x.length,a=e.x,s=e.y,l=e.z,u=0,c=new Uint32Array(i),d=new Int32Array(o),f=0;f<o;++f){var p=a[f]-n.minX>>n.exp,h=s[f]-n.minY>>n.exp,m=l[f]-n.minZ>>n.exp,g=(p*n.boundY+h)*n.boundZ+m;1===(c[g]+=1)&&(u+=1),d[f]=g}for(var v=new Uint16Array(u),y=0,b=0;y<i;++y){var x=c[y];x>0&&(c[y]=b+1,v[b]=x,b+=1)}for(var w=new Uint32Array(u),_=1;_<u;++_)w[_]+=w[_-1]+v[_-1];for(var S=new Uint16Array(u),C=new Int32Array(o),E=0;E<o;++E){var k=c[d[E]];if(k>0){var P=k-1;C[w[P]+S[P]]=E,S[P]+=1}}this.grid=c,this.bucketCount=v,this.bucketOffset=w,this.bucketArray=C,this.xArray=a,this.yArray=s,this.zArray=l};md.prototype.within=function(e,t,n,r){var i=[];return this.eachWithin(e,t,n,r,(function(e){return i.push(e)})),i},md.prototype.eachWithin=function(e,t,n,r,i){for(var o=this,a=r*r,s=Math.max(0,e-r-this.minX>>this.exp),l=Math.max(0,t-r-this.minY>>this.exp),u=Math.max(0,n-r-this.minZ>>this.exp),c=Math.min(this.boundX,1+(e+r-this.minX>>this.exp)),d=Math.min(this.boundY,1+(t+r-this.minY>>this.exp)),f=Math.min(this.boundZ,1+(n+r-this.minZ>>this.exp)),p=s;p<c;++p)for(var h=l;h<d;++h)for(var m=u;m<f;++m){var g=(p*o.boundY+h)*o.boundZ+m,v=o.grid[g];if(v>0)for(var y=v-1,b=o.bucketOffset[y],x=b+o.bucketCount[y],w=b;w<x;++w){var _=o.bucketArray[w],S=o.xArray[_]-e,C=o.yArray[_]-t,E=o.zArray[_]-n,k=S*S+C*C+E*E;k<=a&&i(_,k)}}};var gd=function(e){void 0===e&&(e=0),this._fields=this._defaultFields,this._init(0)};gd.prototype._init=function(e){this.length=e,this.count=0;for(var t=0,n=this._fields.length;t<n;++t){var r=this._fields[t],i=r[0],o=r[1],a=r[2];this._initField(i,o,a)}},gd.prototype._initField=function(e,t,n){this[e]=Na(n,this.length*t)},gd.prototype.addField=function(e,t,n){this._fields.push([e,t,n]),this._initField(e,t,n)},gd.prototype.resize=function(e){var t=this;this.length=Math.round(e||0),this.count=Math.min(this.count,this.length);for(var n=0,r=this._fields.length;n<r;++n){var i=t._fields[n][0],o=t._fields[n][1],a=t.length*o,s=new t[i].constructor(a);t[i].length>a?s.set(t[i].subarray(0,a)):s.set(t[i]),t[i]=s}},gd.prototype.growIfFull=function(){if(this.count>=this.length){var e=Math.round(1.5*this.length);this.resize(Math.max(256,e))}},gd.prototype.copyFrom=function(e,t,n,r){for(var i=this,o=0,a=this._fields.length;o<a;++o)for(var s=i._fields[o][0],l=i._fields[o][1],u=i[s],c=e[s],d=0;d<r;++d)for(var f=l*(t+d),p=l*(n+d),h=0;h<l;++h)u[f+h]=c[p+h]},gd.prototype.copyWithin=function(e,t,n){for(var r=this,i=0,o=this._fields.length;i<o;++i)for(var a=r._fields[i][0],s=r._fields[i][1],l=r[a],u=0;u<n;++u)for(var c=s*(e+u),d=s*(t+u),f=0;f<s;++f)l[c+f]=l[d+f]},gd.prototype.sort=function(e){rl.time("Store.sort");var t=this,n=new this.constructor(1);!function r(i,o){if(i<o){var a=Math.floor((i+o)/2),s=i,l=o;do{for(;e(s,a)<0;)s+=1;for(;e(l,a)>0;)l-=1;s<=l&&(s===a?a=l:l===a&&(a=s),(u=s)!==(c=l)&&(n.copyFrom(t,0,u,1),t.copyWithin(u,c,1),t.copyFrom(n,c,0,1)),s+=1,l-=1)}while(s<=l);r(i,l),r(s,o)}var u,c}(0,this.count-1),rl.timeEnd("Store.sort")},gd.prototype.clear=function(){this.count=0},gd.prototype.dispose=function(){delete this.length,delete this.count;for(var e=0,t=this._fields.length;e<t;++e){delete this[this._fields[e][0]]}};var vd=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["index1",1,"int32"],["index2",1,"int32"],["type",1,"int8"]]},t.prototype.addContact=function(e,t,n){this.growIfFull();var r=this.count;e<t?(this.index1[r]=e,this.index2[r]=t):(this.index2[r]=e,this.index1[r]=t),n&&(this.type[r]=n),this.count+=1},Object.defineProperties(t.prototype,n),t}(gd);function yd(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}var bd=function(e,t){this.length=e,this._words=new Uint32Array(e+32>>>5),!0===t&&this.setAll()};function xd(e){for(var t=e.edgeCount,n=e.nodeCount,r=e.nodeArray1,i=e.nodeArray2,o=new Uint8Array(n),a=new Int32Array(n),s=0;s<t;++s)o[r[s]]+=1,o[i[s]]+=1;for(var l=1;l<n;++l)a[l]+=a[l-1]+o[l-1];for(var u=2*t,c=new Int32Array(u),d=0;d<u;++d)c[d]=-1;for(var f=0;f<t;++f){for(var p=r[f],h=i[f],m=a[p];-1!==c[m]&&m<u;)m+=1;c[m]=f;for(var g=a[h];-1!==c[g]&&g<u;)g+=1;c[g]=f}return{countArray:o,offsetArray:a,indexArray:c}}function wd(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),{type:e,group:t,x:0,y:0,z:0,atomSet:[]}}function _d(e,t){e.x+=t.x,e.y+=t.y,e.z+=t.z,e.atomSet.push(t.index)}function Sd(e,t){var n=t.atomSet.length;if(n>0){var r=e.types,i=e.groups,o=e.centers,a=e.atomSets;r.push(t.type),i.push(t.group),o.x.push(t.x/n),o.y.push(t.y/n),o.z.push(t.z/n),a.push(t.atomSet)}}bd.prototype.get=function(e){return 0!==(this._words[e>>>5]&1<<e)},bd.prototype.set=function(e){this._words[e>>>5]|=1<<e},bd.prototype.clear=function(e){this._words[e>>>5]&=~(1<<e)},bd.prototype.flip=function(e){this._words[e>>>5]^=1<<e},bd.prototype._assignRange=function(e,t,n){if(!(t<e)){for(var r=this._words,i=!0===n?4294967295:0,o=e>>>5,a=t>>>5,s=o;s<a;++s)r[s]=i;var l=o<<5,u=a<<5;if(!0===n)if(t-e<32)for(var c=e,d=t+1;c<d;++c)r[c>>>5]|=1<<c;else{for(var f=e,p=l;f<p;++f)r[f>>>5]|=1<<f;for(var h=u,m=t+1;h<m;++h)r[h>>>5]|=1<<h}else if(t-e<32)for(var g=e,v=t+1;g<v;++g)r[g>>>5]&=~(1<<g);else{for(var y=e,b=l;y<b;++y)r[y>>>5]&=~(1<<y);for(var x=u,w=t+1;x<w;++x)r[x>>>5]&=~(1<<x)}return this}},bd.prototype.setRange=function(e,t){return this._assignRange(e,t,!0)},bd.prototype.clearRange=function(e,t){return this._assignRange(e,t,!1)},bd.prototype.setBits=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];n[o>>>5]|=1<<o}return this},bd.prototype.clearBits=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];n[o>>>5]&=~(1<<o)}return this},bd.prototype.setAll=function(){return this._assignRange(0,this.length-1,!0)},bd.prototype.clearAll=function(){return this._assignRange(0,this.length-1,!1)},bd.prototype.flipAll=function(){for(var e=this._words.length,t=this._words,n=32-this.length%32,r=0;r<e-1;++r)t[r]=~t[r];return t[e-1]=~(t[e-1]<<n)>>>n,this},bd.prototype._isRangeValue=function(e,t,n){if(!(t<e)){for(var r=this._words,i=!0===n?4294967295:0,o=e>>>5,a=t>>>5,s=o;s<a;++s)if(r[s]!==i)return!1;if(t-e<32){for(var l=e,u=t+1;l<u;++l)if(!!(r[l>>>5]&1<<l)!==n)return!1}else{for(var c=a<<5,d=e,f=o<<5<<5;d<f;++d)if(!!(r[d>>>5]&1<<d)!==n)return!1;for(var p=c,h=t+1;p<h;++p)if(!!(r[p>>>5]&1<<p)!==n)return!1}return!0}},bd.prototype.isRangeSet=function(e,t){return this._isRangeValue(e,t,!0)},bd.prototype.isRangeClear=function(e,t){return this._isRangeValue(e,t,!1)},bd.prototype.isAllSet=function(){return this._isRangeValue(0,this.length-1,!0)},bd.prototype.isAllClear=function(){return this._isRangeValue(0,this.length-1,!1)},bd.prototype.isSet=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];if(0===(n[o>>>5]&1<<o))return!1}return!0},bd.prototype.isClear=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];if(0!==(n[o>>>5]&1<<o))return!1}return!0},bd.prototype.isEqualTo=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)if(t[i]!==n[i])return!1;return!0},bd.prototype.getSize=function(){for(var e=this._words.length,t=this._words,n=0,r=0;r<e;++r)n+=yd(t[r]);return n},bd.prototype.difference=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]=t[i]&~n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},bd.prototype.union=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]|=n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},bd.prototype.intersection=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]&=n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},bd.prototype.intersects=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)if(0!==(t[i]&n[i]))return!0;return!1},bd.prototype.getIntersectionSize=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0,o=0;o<r;++o)i+=yd(t[o]&n[o]);return i},bd.prototype.makeIntersection=function(e){var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=new Uint32Array(r),o=Object.create(bd.prototype);o._words=i,o.length=Math.min(this.length,e.length);for(var a=0;a<r;++a)i[a]=t[a]&n[a];return o},bd.prototype.forEach=function(e){for(var t=this._words.length,n=this._words,r=0,i=0;i<t;++i)for(var o=n[i];0!==o;){var a=o&-o;e((i<<5)+yd(a-1),r),o^=a,++r}},bd.prototype.toArray=function(){for(var e=this._words,t=new Array(this.getSize()),n=this._words.length,r=0,i=0;i<n;++i)for(var o=e[i];0!==o;){var a=o&-o;t[r++]=(i<<5)+yd(a-1),o^=a}return t},bd.prototype.toString=function(){return"{"+this.toArray().join(",")+"}"},bd.prototype.toSeleString=function(){var e=this.toArray().join(",");return e?"@"+e:"NONE"},bd.prototype.clone=function(){var e=Object.create(bd.prototype);return e.length=this.length,e._words=new Uint32Array(this._words),e};var Cd=["D-BETA-PEPTIDE, C-GAMMA LINKING","D-GAMMA-PEPTIDE, C-DELTA LINKING","D-PEPTIDE COOH CARBOXY TERMINUS","D-PEPTIDE NH3 AMINO TERMINUS","D-PEPTIDE LINKING","L-BETA-PEPTIDE, C-GAMMA LINKING","L-GAMMA-PEPTIDE, C-DELTA LINKING","L-PEPTIDE COOH CARBOXY TERMINUS","L-PEPTIDE NH3 AMINO TERMINUS","L-PEPTIDE LINKING","PEPTIDE LINKING","PEPTIDE-LIKE"],Ed=["RNA OH 3 PRIME TERMINUS","RNA OH 5 PRIME TERMINUS","RNA LINKING"],kd=["DNA OH 3 PRIME TERMINUS","DNA OH 5 PRIME TERMINUS","DNA LINKING","L-DNA LINKING","L-RNA LINKING"],Pd=["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","SACCHARIDE"],Md=["NON-POLYMER"].concat(["OTHER"],Pd),Ad=["h","g","i"],Td=["e","b"],Rd=["s","t","l",""],Id={H:1,D:1,T:1,HE:2,LI:3,BE:4,B:5,C:6,N:7,O:8,F:9,NE:10,NA:11,MG:12,AL:13,SI:14,P:15,S:16,CL:17,AR:18,K:19,CA:20,SC:21,TI:22,V:23,CR:24,MN:25,FE:26,CO:27,NI:28,CU:29,ZN:30,GA:31,GE:32,AS:33,SE:34,BR:35,KR:36,RB:37,SR:38,Y:39,ZR:40,NB:41,MO:42,TC:43,RU:44,RH:45,PD:46,AG:47,CD:48,IN:49,SN:50,SB:51,TE:52,I:53,XE:54,CS:55,BA:56,LA:57,CE:58,PR:59,ND:60,PM:61,SM:62,EU:63,GD:64,TB:65,DY:66,HO:67,ER:68,TM:69,YB:70,LU:71,HF:72,TA:73,W:74,RE:75,OS:76,IR:77,PT:78,AU:79,HG:80,TL:81,PB:82,BI:83,PO:84,AT:85,RN:86,FR:87,RA:88,AC:89,TH:90,PA:91,U:92,NP:93,PU:94,AM:95,CM:96,BK:97,CF:98,ES:99,FM:100,MD:101,NO:102,LR:103,RF:104,DB:105,SG:106,BH:107,HS:108,MT:109,DS:110,RG:111,CN:112,NH:113,FL:114,MC:115,LV:116,TS:117,OG:118},Od={1:1.1,2:1.4,3:1.81,4:1.53,5:1.92,6:1.7,7:1.55,8:1.52,9:1.47,10:1.54,11:2.27,12:1.73,13:1.84,14:2.1,15:1.8,16:1.8,17:1.75,18:1.88,19:2.75,20:2.31,21:2.3,22:2.15,23:2.05,24:2.05,25:2.05,26:2.05,27:2,28:2,29:2,30:2.1,31:1.87,32:2.11,33:1.85,34:1.9,35:1.83,36:2.02,37:3.03,38:2.49,39:2.4,40:2.3,41:2.15,42:2.1,43:2.05,44:2.05,45:2,46:2.05,47:2.1,48:2.2,49:2.2,50:1.93,51:2.17,52:2.06,53:1.98,54:2.16,55:3.43,56:2.68,57:2.5,58:2.48,59:2.47,60:2.45,61:2.43,62:2.42,63:2.4,64:2.38,65:2.37,66:2.35,67:2.33,68:2.32,69:2.3,70:2.28,71:2.27,72:2.25,73:2.2,74:2.1,75:2.05,76:2,77:2,78:2.05,79:2.1,80:2.05,81:1.96,82:2.02,83:2.07,84:1.97,85:2.02,86:2.2,87:3.48,88:2.83,89:2,90:2.4,91:2,92:2.3,93:2,94:2,95:2,96:2,97:2,98:2,99:2,100:2,101:2,102:2,103:2,104:2,105:2,106:2,107:2,108:2,109:2,110:2,111:2,112:2,113:2,114:2,115:2,116:2,117:2,118:2},Ld={1:.31,2:.28,3:1.28,4:.96,5:.84,6:.76,7:.71,8:.66,9:.57,10:.58,11:1.66,12:1.41,13:1.21,14:1.11,15:1.07,16:1.05,17:1.02,18:1.06,19:2.03,20:1.76,21:1.7,22:1.6,23:1.53,24:1.39,25:1.39,26:1.32,27:1.26,28:1.24,29:1.32,30:1.22,31:1.22,32:1.2,33:1.19,34:1.2,35:1.2,36:1.16,37:2.2,38:1.95,39:1.9,40:1.75,41:1.64,42:1.54,43:1.47,44:1.46,45:1.42,46:1.39,47:1.45,48:1.44,49:1.42,50:1.39,51:1.39,52:1.38,53:1.39,54:1.4,55:2.44,56:2.15,57:2.07,58:2.04,59:2.03,60:2.01,61:1.99,62:1.98,63:1.98,64:1.96,65:1.94,66:1.92,67:1.92,68:1.89,69:1.9,70:1.87,71:1.87,72:1.75,73:1.7,74:1.62,75:1.51,76:1.44,77:1.41,78:1.36,79:1.36,80:1.32,81:1.45,82:1.46,83:1.48,84:1.4,85:1.5,86:1.5,87:2.6,88:2.21,89:2.15,90:2.06,91:2,92:1.96,93:1.9,94:1.87,95:1.8,96:1.69,97:1.6,98:1.6,99:1.6,100:1.6,101:1.6,102:1.6,103:1.6,104:1.6,105:1.6,106:1.6,107:1.6,108:1.6,109:1.6,110:1.6,111:1.6,112:1.6,113:1.6,114:1.6,115:1.6,116:1.6,117:1.6,118:1.6},Dd={1:[1],2:[0],3:[1],4:[2],5:[3],6:[4],7:[3],8:[2],9:[1],10:[0],11:[1],12:[2],13:[6],14:[6],15:[3,5,7],16:[2,4,6],17:[1],18:[0],19:[1],20:[2],31:[3],32:[4],33:[3,5],34:[2,4,6],35:[1],36:[0],37:[1],38:[2],49:[3],50:[4],51:[3,5],52:[2],53:[1,2,5],54:[0,2],55:[1],56:[2],81:[3],82:[4],83:[3],84:[2],85:[1],86:[0],87:[1],88:[2]},Fd={1:1,2:2,3:1,4:2,5:3,6:4,7:5,8:6,9:7,10:8,11:1,12:2,13:3,14:4,15:5,16:6,17:7,18:8,19:1,20:2,21:3,22:4,23:5,24:6,25:7,26:8,27:9,28:10,29:11,30:2,31:3,32:4,33:5,34:6,35:7,36:8,37:1,38:2,39:3,40:4,41:5,42:6,43:7,44:8,45:9,46:10,47:11,48:2,49:3,50:4,51:5,52:6,53:7,54:8,55:1,56:2,57:3,58:4,59:3,60:4,61:5,62:6,63:7,64:8,65:9,66:10,67:11,68:12,69:13,70:14,71:15,72:4,73:5,74:6,75:7,76:8,77:9,78:10,79:11,80:2,81:3,82:4,83:5,84:6,85:7,86:8,87:1,88:2,89:3,90:4,91:3,92:4,93:5,94:6,95:7,96:8,97:9,98:10,99:11,100:12,101:13,102:14,103:15,104:2,105:2,106:2,107:2,108:2,109:2,110:2,111:2,112:2,113:3,114:4,115:5,116:6,117:7,118:8},Nd={ALA:[.17,.5,.33],ARG:[.81,1.81,1],ASN:[.42,.85,.43],ASP:[1.23,3.64,2.41],ASH:[-.07,.43,.5],CYS:[-.24,-.02,.22],GLN:[.58,.77,.19],GLU:[2.02,3.63,1.61],GLH:[-.01,.11,.12],GLY:[.01,1.15,1.14],HIS:[.17,.11,-.06],ILE:[-.31,-1.12,-.81],LEU:[-.56,-1.25,-.69],LYS:[.99,2.8,1.81],MET:[-.23,-.67,-.44],PHE:[-1.13,-1.71,-.58],PRO:[.45,.14,-.31],SER:[.13,.46,.33],THR:[.14,.25,.11],TRP:[-1.85,-2.09,-.24],TYR:[-.94,-.71,.23],VAL:[.07,-.46,-.53]},Bd=[0,0,0],zd={HIS:"H",ARG:"R",LYS:"K",ILE:"I",PHE:"F",LEU:"L",TRP:"W",ALA:"A",MET:"M",PRO:"P",CYS:"C",ASN:"N",VAL:"V",GLY:"G",SER:"S",GLN:"Q",TYR:"Y",ASP:"D",GLU:"E",THR:"T",SEC:"U",PYL:"O"},jd=Object.keys(zd),Hd=["A","C","T","G","U","I"],Ud=["DA","DC","DT","DG","DU","DI"],Vd=["A","G","I","DA","DG","DI"],Gd=Hd.concat(Ud),Wd=["SOL","WAT","HOH","H2O","W","DOD","D3O","TIP3","TIP4","SPC"],$d=["118","119","1AL","1CU","2FK","2HP","2OF","3CO","3MT","3NI","3OF","3P8","4MO","4PU","543","6MO","ACT","AG","AL","ALF","AM","ATH","AU","AU3","AUC","AZI","BA","BCT","BEF","BF4","BO4","BR","BS3","BSY","CA","CAC","CD","CD1","CD3","CD5","CE","CHT","CL","CO","CO3","CO5","CON","CR","CS","CSB","CU","CU1","CU3","CUA","CUZ","CYN","DME","DMI","DSC","DTI","DY","E4N","EDR","EMC","ER3","EU","EU3","F","FE","FE2","FPO","GA","GD3","GEP","HAI","HG","HGC","IN","IOD","IR","IR3","IRI","IUM","K","KO4","LA","LCO","LCP","LI","LU","MAC","MG","MH2","MH3","MLI","MLT","MMC","MN","MN3","MN5","MN6","MO1","MO2","MO3","MO4","MO5","MO6","MOO","MOS","MOW","MW1","MW2","MW3","NA","NA2","NA5","NA6","NAO","NAW","NCO","NET","NH4","NI","NI1","NI2","NI3","NO2","NO3","NRU","O4M","OAA","OC1","OC2","OC3","OC4","OC5","OC6","OC7","OC8","OCL","OCM","OCN","OCO","OF1","OF2","OF3","OH","OS","OS4","OXL","PB","PBM","PD","PDV","PER","PI","PO3","PO4","PR","PT","PT4","PTN","RB","RH3","RHD","RU","SB","SCN","SE4","SEK","SM","SMO","SO3","SO4","SR","T1A","TB","TBA","TCN","TEA","TH","THE","TL","TMA","TRA","UNX","V","VN3","VO4","W","WO5","Y1","YB","YB2","YH","YT3","ZCM","ZN","ZN2","ZN3","ZNO","ZO3","OHX"],qd=["045","0AT","0BD","0MK","0NZ","0TS","0V4","0XY","0YT","10M","147","149","14T","15L","16G","18T","18Y","1AR","1BW","1GL","1GN","1JB","1LL","1NA","1S3","26M","26Q","26R","26V","26W","26Y","27C","289","291","293","2DG","2F8","2FG","2FL","2FP","2GL","2M4","2M5","32O","34V","3CM","3DO","3DY","3FM","3LR","3MF","3MG","3SA","3ZW","46D","46M","46Z","48Z","4CQ","4GC","4NN","50A","5DI","5GF","5MM","5RP","5SA","5SP","64K","6PG","6SA","7JZ","7SA","A1Q","A2G","AAB","AAL","AAO","ABC","ABD","ABE","ABF","ABL","ACG","ACI","ACR","ACX","ADA","ADG","ADR","AF1","AFD","AFL","AFO","AFP","AFR","AGC","AGH","AGL","AHR","AIG","ALL","ALX","AMU","AOG","AOS","ARA","ARB","ARE","ARI","ASG","ASO","AXP","AXR","B0D","B16","B2G","B4G","B6D","B8D","B9D","BBK","BCD","BDG","BDP","BDR","BEM","BFP","BGC","BGL","BGP","BGS","BHG","BMA","BMX","BNG","BNX","BOG","BRI","BXF","BXP","BXX","BXY","C3X","C4X","C5X","CAP","CBI","CBK","CBS","CDR","CEG","CGF","CHO","CR1","CR6","CRA","CT3","CTO","CTR","CTT","D6G","DAF","DAG","DDA","DDB","DDL","DEL","DFR","DFX","DG0","DGC","DGD","DGM","DGS","DIG","DLF","DLG","DMU","DNO","DOM","DP5","DQQ","DQR","DR2","DR3","DR4","DRI","DSR","DT6","DVC","E4P","E5G","EAG","EBG","EBQ","EGA","EJT","EPG","ERE","ERI","F1P","F1X","F6P","FBP","FCA","FCB","FCT","FDP","FDQ","FFC","FIX","FMO","FRU","FSI","FU4","FUB","FUC","FUD","FUL","FXP","G16","G1P","G2F","G3I","G4D","G4S","G6D","G6P","G6S","GAC","GAD","GAL","GC1","GC4","GCD","GCN","GCO","GCS","GCT","GCU","GCV","GCW","GCX","GE1","GFG","GFP","GIV","GL0","GL2","GL5","GL6","GL7","GL9","GLA","GLB","GLC","GLD","GLF","GLG","GLO","GLP","GLS","GLT","GLW","GMH","GN1","GNX","GP1","GP4","GPH","GPM","GQ1","GQ2","GQ4","GS1","GS4","GSA","GSD","GTE","GTH","GTK","GTR","GTZ","GU0","GU1","GU2","GU3","GU4","GU5","GU6","GU8","GU9","GUF","GUP","GUZ","GYP","GYV","H2P","HDL","HMS","HS2","HSD","HSG","HSH","HSJ","HSQ","HSR","HSU","HSX","HSY","HSZ","IAB","IDG","IDR","IDS","IDT","IDU","IDX","IDY","IMK","IN1","IPT","ISL","KBG","KD2","KDA","KDM","KDO","KFN","KO1","KO2","KTU","L6S","LAG","LAI","LAK","LAO","LAT","LB2","LBT","LCN","LDY","LGC","LGU","LM2","LMT","LMU","LOG","LOX","LPK","LSM","LTM","LVZ","LXB","LXZ","M1F","M3M","M6P","M8C","MA1","MA2","MA3","MAB","MAG","MAL","MAN","MAT","MAV","MAW","MBG","MCU","MDA","MDM","MDP","MFA","MFB","MFU","MG5","MGA","MGL","MLB","MMA","MMN","MN0","MRP","MTT","MUG","MVP","MXY","N1L","N9S","NAA","NAG","NBG","NDG","NED","NG1","NG6","NGA","NGB","NGC","NGE","NGF","NGL","NGS","NGY","NHF","NM6","NM9","NTF","NTO","NTP","NXD","NYT","OPG","OPM","ORP","OX2","P3M","P53","P6P","PA5","PNA","PNG","PNW","PRP","PSJ","PSV","PTQ","QDK","QPS","QV4","R1P","R1X","R2B","R5P","RAA","RAE","RAF","RAM","RAO","RAT","RB5","RBL","RCD","RDP","REL","RER","RF5","RG1","RGG","RHA","RIB","RIP","RNS","RNT","ROB","ROR","RPA","RST","RUB","RUU","RZM","S6P","S7P","SA0","SCR","SDD","SF6","SF9","SG4","SG5","SG6","SG7","SGA","SGC","SGD","SGN","SGS","SHB","SHG","SI3","SIO","SOE","SOL","SSG","SUC","SUP","SUS","T6P","T6T","TAG","TCB","TDG","TGK","TGY","TH1","TIA","TM5","TM6","TM9","TMR","TMX","TOA","TOC","TRE","TYV","UCD","UDC","VG1","X0X","X1X","X2F","X4S","X5S","X6X","XBP","XDN","XDP","XIF","XIM","XLF","XLS","XMM","XUL","XXR","XYP","XYS","YO5","Z3Q","Z6J","Z9M","ZDC","ZDM"],Xd=["CA","C","N","O","O1","O2","OC1","OC2","OX1","OXT","H","H1","H2","H3","HA","HN","BB"],Kd=["P","OP1","OP2","HOP2","HOP3","O2'","O3'","O4'","O5'","C1'","C2'","C3'","C4'","C5'","H1'","H2'","H2''","HO2'","H3'","H4'","H5'","H5''","HO3'","HO5'","O2*","O3*","O4*","O5*","C1*","C2*","C3*","C4*","C5*"],Yd={};function Zd(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;default:return 8}}Yd[1]={trace:"CA",direction1:"C",direction2:["O","OC1","O1","OX1","OXT"],backboneStart:"N",backboneEnd:"C"},Yd[2]={trace:["C4'","C4*"],direction1:["C1'","C1*"],direction2:["C3'","C3*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},Yd[3]={trace:["C3'","C3*"],direction1:["C2'","C2*"],direction2:["O4'","O4*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},Yd[4]={trace:["CA","BB"],backboneStart:["CA","BB"],backboneEnd:["CA","BB"]},Yd[5]={trace:["C4'","C4*","P"],backboneStart:["C4'","C4*","P"],backboneEnd:["C4'","C4*","P"]},Yd[6]={trace:["C3'","C3*","C2'","P"],backboneStart:["C3'","C3*","C2'","P"],backboneEnd:["C3'","C3*","C2'","P"]},Yd[0]={};var Qd=new Map([[2,Xa(180)],[3,Xa(120)],[4,Xa(109.4721)],[6,Xa(90)]]);function Jd(e,t){var n=[],r=new U,i=new U;return r.subVectors(t,e),e.eachBondedAtom((function(t){1!==t.number&&(i.subVectors(t,e),n.push(r.angleTo(i)))})),n}function ef(e,t){var n=e.clone(),r=new U;r.subVectors(t,e);var i=[new U,new U],o=0;if(e.eachBondedAtom((function(t){o>1||1!==t.number&&(n.index=t.index,i[o++].subVectors(t,e))})),1===o&&n.eachBondedAtom((function(t){o>1||1!==t.number&&t.index!==e.index&&i[o++].subVectors(t,e)})),2===o){var a=i[0].cross(i[1]);return Math.abs(Math.PI/2-a.angleTo(r))}}function tf(e,t){var n=e.structure,r=n.atomCount,i=new Int8Array(r),o=new Int8Array(r),a=new Int8Array(r),s=new Int8Array(r);return n.eachAtom((function(e){var n=e.index,r=function(e,t){var n=e.bondToElementCount(1),r=e.formalCharge||0,i="always"===t.assignCharge||"auto"===t.assignCharge&&0===r,o="always"===t.assignH||"auto"===t.assignH&&0===n,a=e.bondCount,s=function(e){var t=0;return e.eachBond((function(e){return t+=e.bondOrder})),t}(e),l=function(e){var t=e.structure.getBondProxy(),n=e.number,r=8===n||7===n;if(r&&4===e.bondCount)return!1;var i=!1;return e.eachBond((function(n){if(n.bondOrder>1)i=!0;else if(r){var o=n.getOtherAtom(e);o.eachBond((function(e){if(e.bondOrder>1){var t=o.number;if((15===t||16===t)&&8===e.getOtherAtom(o).number)return;i=!0}}),t)}})),i}(e),u=s-a>0,c=0,d=8;switch(e.number){case 1:i&&(0===a?(r=1,d=0):1===a&&(r=0,d=1));break;case 6:i&&(r=0),o&&(c=Math.max(0,4-s-Math.abs(r))),d=Zd(a+c+Math.max(0,-r));break;case 7:if(i)if(o)if(l&&s<4)r=a-n===1&&s-n===2?1:0;else{var f=!1;e.eachBondedAtom((function(e){(16===e.number||e.isMetal())&&(f=!0)})),r=f?0:1}else r=s-3;o&&(c=Math.max(0,3-s+r)),d=Zd(l&&!u?a+c-r:a+c+1-r);break;case 8:i&&(o||(r=s-2),1===s&&e.eachBondedAtom((function(t){t.eachBond((function(n){var i=n.getOtherAtom(t);i.index!==e.index&&8===i.number&&2===n.bondOrder&&(r=-1)}))}))),o&&(c=Math.max(0,2-s+r)),d=Zd(l&&!u?a+c-r+1:a+c-r+2);break;case 16:i&&(o||(r=s<=3&&!e.bondToElementCount(8)?s-2:0)),o&&s<2&&(c=Math.max(0,2-s+r)),s<=3&&(d=Zd(a+c-r+2));break;case 9:case 17:case 35:case 53:case 85:i&&(r=s-1);break;case 3:case 11:case 19:case 37:case 55:case 87:i&&(r=1-s);break;case 4:case 12:case 20:case 38:case 56:case 88:i&&(r=2-s);break;default:console.warn("Requested charge, protonation for an unhandled element",e.element)}return[r,c,c+n,d]}(e,t),l=r[0],u=r[1],c=r[2],d=r[3];i[n]=l,o[n]=u,a[n]=c,s[n]=d})),{charge:i,implicitH:o,totalH:a,idealGeometry:s}}function nf(e){if(e["@valenceModel"])return e["@valenceModel"];var t=tf(e,{assignCharge:"auto",assignH:"auto"});return e["@valenceModel"]=t,t}function rf(e){return 15===e.number&&e.bondToElementCount(8)===e.bondCount}var of=["ARG","HIS","LYS"],af=["GLU","ASP"];function sf(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxIonicDist,gf.maxIonicDist),i=Sa(n.maxPiStackingDist,gf.maxPiStackingDist),o=Sa(n.maxPiStackingOffset,gf.maxPiStackingOffset),a=Sa(n.maxPiStackingAngle,gf.maxPiStackingAngle),s=Sa(n.maxCationPiDist,gf.maxCationPiDist),l=Sa(n.maxCationPiOffset,gf.maxCationPiOffset),u=Sa(n.masterModelIndex,gf.masterModelIndex),c=Math.max(r+2,i,s),d=i*i,f=s*s,p=t.features,h=t.spatialHash,m=t.contactStore,g=t.featureSet,v=p.types,y=p.centers,b=p.atomSets,x=y.x,w=y.y,_=y.z,S=v.length,C=e.atomStore.x,E=e.atomStore.y,k=e.atomStore.z,P=e.getAtomProxy(),M=e.getAtomProxy(),A=new U,T=new U,R=new U,I=new U,O=new U,L=new U,D=new U,F=function(e,t){A.set(C[e[0]],E[e[0]],k[e[0]]),T.set(C[e[1]],E[e[1]],k[e[1]]),R.set(C[e[2]],E[e[2]],k[e[2]]),I.subVectors(A,T),O.subVectors(A,R),t.crossVectors(I,O)},N=function(e,t,n){return A.set(x[e],w[e],_[e]),T.set(x[t],w[t],_[t]),A.sub(T).projectOnPlane(n).add(T).distanceTo(T)},B=function(e,t,n){g.setBits(e,t),m.addContact(e,t,n)},z=function(e){h.eachWithin(x[e],w[e],_[e],c,(function(t,n){if(!(t<=e)&&(P.index=b[e][0],M.index=b[t][0],!yf(P,M,u))){var i=v[e],s=v[t];if(function(e,t){return 2===e&&1===t||1===e&&2===t}(i,s))(function(e,t,n){for(var r=e.length,i=t.length,o=0;o<r;++o){P.index=e[o];for(var a=0;a<i;++a)if(M.index=t[a],P.distanceTo(M)<=n)return!0}return!1})(b[e],b[t],r)&&B(e,t,1);else if(function(e,t){return 3===e&&3===t}(i,s)){if(n<=d){F(b[e],L),F(b[t],D);var c=57.29578*L.angleTo(D);Math.min(N(e,t,D),N(t,e,L))<=o&&(c<=a||c>=180-a||c<=a+90&&c>=90-a)&&B(e,t,3)}}else if(function(e,t){return 3===e&&1===t||1===e&&3===t}(i,s)&&n<=f){var p=3===i?[e,t]:[t,e],h=p[0],m=p[1];F(b[h],L),N(m,h,L)<=l&&B(h,m,2)}}}))},j=0;j<S;++j)z(j)}function lf(e){return"HIS"===e.resname&&7==e.number&&e.isRing()}var uf=[3,11,19,37,55,12,20,38,56,13,31,49,81,21,50,82,83,51,80];var cf=[17,35,53,85];var df=[7,8,16],ff=[6,7,15,16];var pf=Xa(180),hf=Xa(120);function mf(e,t,n){return!vf(e,t,n)&&(e.modelIndex!==t.modelIndex||e.altloc&&t.altloc&&e.altloc!==t.altloc)}var gf={maxHydrophobicDist:4,maxHbondDist:3.5,maxHbondSulfurDist:4.1,maxHbondAccAngle:45,maxHbondDonAngle:45,maxHbondAccPlaneAngle:90,maxHbondDonPlaneAngle:30,maxPiStackingDist:5.5,maxPiStackingOffset:2,maxPiStackingAngle:30,maxCationPiDist:6,maxCationPiOffset:2,maxIonicDist:5,maxHalogenBondDist:4,maxHalogenBondAngle:30,maxMetalDist:3,refineSaltBridges:!0,masterModelIndex:-1,lineOfSightDistFactor:1};function vf(e,t,n){return e.modelIndex===n&&t.modelIndex!==n||t.modelIndex===n&&e.modelIndex!==n}function yf(e,t,n){return!vf(e,t,n)&&(e.modelIndex!==t.modelIndex||e.residueIndex===t.residueIndex||e.altloc&&t.altloc&&e.altloc!==t.altloc)}function bf(e){var t={types:[],groups:[],centers:{x:[],y:[],z:[]},atomSets:[]};return sl&&rl.time("calculateFeatures"),function(e,t){var n=nf(e.data).charge,r={};e.eachResidue((function(e){if(of.includes(e.resname)){var i=wd(1);e.eachAtom((function(e){7===e.number&&e.isSidechain()&&_d(i,e)})),Sd(t,i)}else jd.includes(e.resname)||e.isNucleic()||(e.eachAtom((function(e){var n=!1,i=wd(1);!function(e){var t=0;return 6===e.number&&3===e.bondCount&&3===e.bondToElementCount(7)&&e.eachBondedAtom((function(e){e.bondCount-e.bondToElementCount(1)===1&&++t})),2===t}(e)?function(e){var t=0;return 6===e.number&&3===e.bondCount&&2===e.bondToElementCount(7)&&1===e.bondToElementCount(6)&&e.eachBondedAtom((function(e){e.bondCount-e.bondToElementCount(1)===1&&++t})),2===t}(e)&&(i.group=9,n=!0):(i.group=8,n=!0),n&&(e.eachBondedAtom((function(e){7===e.number&&(r[e.index]=!0,_d(i,e))})),Sd(t,i))})),e.eachAtom((function(e){var i=wd(1);n[e.index]>0&&(r[e.index]||(_d(i,e),Sd(t,i)))})))}))}(e,t),function(e,t){var n=nf(e.data).charge,r={};e.eachResidue((function(e){if(af.includes(e.resname)){var i=wd(2);e.eachAtom((function(e){8===e.number&&e.isSidechain()&&_d(i,e)})),Sd(t,i)}else if(Gd.includes(e.resname)){var o=wd(2);e.eachAtom((function(e){rf(e)&&(o.group=6,e.eachBondedAtom((function(e){8===e.number&&_d(o,e)})),Sd(t,o))}))}else jd.includes(e.resname)||Gd.includes(e.resname)||(e.eachAtom((function(e){var n=!1,i=wd(2);!function(e){return 16===e.number&&3===e.bondToElementCount(8)}(e)?rf(e)?(i.group=6,n=!0):function(e){return 16===e.number&&4===e.bondToElementCount(8)}(e)?(i.group=5,n=!0):function(e){var t=0;return 6===e.number&&2===e.bondToElementCount(8)&&1===e.bondToElementCount(6)&&e.eachBondedAtom((function(e){8===e.number&&e.bondCount-e.bondToElementCount(1)===1&&++t})),2===t}(e)&&(i.group=10,n=!0):(i.group=4,n=!0),n&&(e.eachBondedAtom((function(e){8===e.number&&(r[e.index]=!0,_d(i,e))})),Sd(t,i))})),e.eachAtom((function(e){var i=wd(2);n[e.index]<0&&(r[e.index]||(_d(i,e),Sd(t,i)))})))}))}(e,t),function(e,t){var n=e.getAtomProxy();e.eachResidue((function(e){var r=e.getAromaticRings();if(r){var i=e.atomOffset;r.forEach((function(e){var r=wd(3);e.forEach((function(e){n.index=e+i,_d(r,n)})),Sd(t,r)}))}}))}(e,t),function(e,t){var n=nf(e.data),r=n.charge,i=n.implicitH,o=n.idealGeometry;e.eachAtom((function(e){var n=wd(5),a=e.number;if(8===a)_d(n,e),Sd(t,n);else if(7===a){if(lf(e))_d(n,e),Sd(t,n);else if(r[e.index]<1){var s=e.bondCount+i[e.index],l=o[e.index];(4===l&&s<4||3===l&&s<3||2===l&&s<2)&&(_d(n,e),Sd(t,n))}}else 16===a&&("CYS"!==e.resname&&"MET"!==e.resname&&-1!==e.formalCharge||(_d(n,e),Sd(t,n)))}))}(e,t),function(e,t){var n=nf(e.data).totalH;e.eachAtom((function(e){var r=wd(4),i=e.number;(lf(e)||n[e.index]>0&&(7===i||8===i||16===i))&&(_d(r,e),Sd(t,r))}))}(e,t),function(e,t){var n=nf(e.data).totalH;e.eachAtom((function(e){if(6===e.number&&n[e.index]>0&&(e.bondToElementCount(7)>0||e.bondToElementCount(8)>0||function(e){if(!e.isAromatic())return!1;var t=e.residueType.getRings();if(!t)return!1;var n=!1;return t.rings.forEach((function(t){n||t.some((function(t){return e.index-e.residueAtomOffset===t}))&&(n=t.some((function(t){var n=e.residueType.atomTypeIdList[t],r=e.atomMap.get(n).number;return 7===r||8===r})))})),n}(e))){var r=wd(9);_d(r,e),Sd(t,r)}}))}(e,t),function(e,t){e.eachAtom((function(e){var n=!1,r=!1,i=jd.includes(e.resname),o=Gd.includes(e.resname);if(i||o?i?8===e.number?(["ASP","GLU","SER","THR","TYR","ASN","GLN"].includes(e.resname)&&e.isSidechain()||e.isBackbone())&&(n=!0,r=!0):16===e.number&&"CYS"===e.resname?(n=!0,r=!0):7===e.number&&"HIS"===e.resname&&e.isSidechain()&&(n=!0):o&&(8===e.number&&e.isBackbone()?(n=!0,r=!0):["N3","N4","N7"].includes(e.atomname)?n=!0:["O2","O4","O6"].includes(e.atomname)&&(n=!0,r=!0)):e.isHalogen()||8===e.number||16===e.number?(n=!0,r=!0):7===e.number&&(n=!0),n){var a=wd(11);_d(a,e),Sd(t,a)}if(r){var s=wd(10);_d(s,e),Sd(t,s)}}))}(e,t),function(e,t){e.eachAtom((function(e){if(e.isTransitionMetal()||30===e.number||48===e.number){var n=wd(12);_d(n,e),Sd(t,n)}else if(uf.includes(e.number)){var r=wd(13);_d(r,e),Sd(t,r)}}))}(e,t),function(e,t){e.eachAtom((function(e){var n=wd(8),r=!1;6===e.number?(r=!0,e.eachBondedAtom((function(e){var t=e.number;6!==t&&1!==t&&(r=!1)}))):9===e.number&&(r=!0),r&&(_d(n,e),Sd(t,n))}))}(e,t),function(e,t){e.eachAtom((function(e){if(df.includes(e.number)){var n=!1;if(e.eachBondedAtom((function(e){ff.includes(e.number)&&(n=!0)})),n){var r=wd(7);_d(r,e),Sd(t,r)}}}))}(e,t),function(e,t){e.eachAtom((function(e){if(cf.includes(e.number)&&1===e.bondToElementCount(6)){var n=wd(6);_d(n,e),Sd(t,n)}}))}(e,t),sl&&rl.timeEnd("calculateFeatures"),t}function xf(e,t){void 0===t&&(t=gf);var n=function(e){var t=e.types,n=e.centers;return{features:e,spatialHash:new md(n),contactStore:new vd,featureSet:new bd(t.length,!1)}}(bf(e));sl&&rl.time("calculateContacts"),sf(e,n,t),function(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxHbondDist,gf.maxHbondDist),i=Sa(n.maxHbondSulfurDist,gf.maxHbondSulfurDist),o=Xa(Sa(n.maxHbondAccAngle,gf.maxHbondAccAngle)),a=Xa(Sa(n.maxHbondDonAngle,gf.maxHbondDonAngle)),s=Xa(Sa(n.maxHbondAccPlaneAngle,gf.maxHbondAccPlaneAngle)),l=Xa(Sa(n.maxHbondDonPlaneAngle,gf.maxHbondDonPlaneAngle)),u=Sa(n.masterModelIndex,gf.masterModelIndex),c=Math.max(r,i),d=r*r,f=t.features,p=t.spatialHash,h=t.contactStore,m=t.featureSet,g=f.types,v=f.centers,y=f.atomSets,b=v.x,x=v.y,w=v.z,_=g.length,S=nf(e.data).idealGeometry,C=e.getAtomProxy(),E=e.getAtomProxy(),k=function(e){p.eachWithin(b[e],x[e],w[e],c,(function(t,n){if(!(t<=e)){var r=g[e],i=g[t],c=function(e,t){return 9===e&&5===t||5===e&&9===t}(r,i);if(c||function(e,t){return 5===e&&4===t||4===e&&5===t}(r,i)){var f=5===i?[e,t]:[t,e],p=f[0],v=f[1];if(C.index=y[p][0],E.index=y[v][0],E.index!==C.index&&!yf(C,E,u)&&!(16!==C.number&&16!==E.number&&n>d)&&!C.connectedTo(E)){var b=Jd(C,E),x=Qd.get(S[C.index])||Xa(120);if(!b.some((function(e){return Math.abs(x-e)>a}))){if(3===S[C.index]){var w=ef(C,E);if(void 0!==w&&w>l)return}var _=Jd(E,C),k=Qd.get(S[E.index])||Xa(120);if(!_.some((function(e){return k-e>o}))){if(3===S[E.index]){var P=ef(E,C);if(void 0!==P&&P>s)return}m.setBits(p,v);var M,A,T=c?8:function(e,t){return e.isWater()&&t.isWater()}(M=C,A=E)?9:function(e,t){return e.isBackbone()&&t.isBackbone()}(M,A)?10:4;h.addContact(p,v,T)}}}}}}))},P=0;P<_;++P)k(P)}(e,n,t),function(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxMetalDist,gf.maxMetalDist),i=Sa(n.masterModelIndex,gf.masterModelIndex),o=t.features,a=t.spatialHash,s=t.contactStore,l=t.featureSet,u=o.types,c=o.centers,d=o.atomSets,f=c.x,p=c.y,h=c.z,m=u.length,g=e.getAtomProxy(),v=e.getAtomProxy(),y=function(e){a.eachWithin(f[e],p[e],h[e],r,(function(t,n){if(!(t<=e)&&(g.index=d[e][0],v.index=d[t][0],!yf(g,v,i))){var r=g.isMetal(),o=v.isMetal();if(r||o){var a=r?[u[e],u[t]]:[u[t],u[e]];c=a[0],f=a[1],(12===c?11===f||12===f:13===c?10===f:void 0)&&(l.setBits(e,t),s.addContact(e,t,7))}}var c,f}))},b=0;b<m;++b)y(b)}(e,n,t),function(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxHydrophobicDist,gf.maxHydrophobicDist),i=Sa(n.masterModelIndex,gf.masterModelIndex),o=t.features,a=t.spatialHash,s=t.contactStore,l=t.featureSet,u=o.types,c=o.centers,d=o.atomSets,f=c.x,p=c.y,h=c.z,m=u.length,g=e.getAtomProxy(),v=e.getAtomProxy(),y=function(e){a.eachWithin(f[e],p[e],h[e],r,(function(t,n){var r,o;t<=e||(g.index=d[e][0],v.index=d[t][0],yf(g,v,i)||9===g.number&&9===v.number||g.connectedTo(v)||(r=u[e],o=u[t],8===r&&8===o&&(l.setBits(e,t),s.addContact(e,t,6))))}))},b=0;b<m;++b)y(b)}(e,n,t),function(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxHalogenBondDist,gf.maxHalogenBondDist),i=Xa(Sa(n.maxHalogenBondAngle,gf.maxHalogenBondAngle)),o=Sa(n.masterModelIndex,gf.masterModelIndex),a=t.features,s=t.spatialHash,l=t.contactStore,u=t.featureSet,c=a.types,d=a.centers,f=a.atomSets,p=d.x,h=d.y,m=d.z,g=c.length,v=e.getAtomProxy(),y=e.getAtomProxy(),b=function(e){s.eachWithin(p[e],h[e],m[e],r,(function(t,n){if(!(t<=e)&&(v.index=f[e][0],y.index=f[t][0],!yf(v,y,o)&&(r=c[e],a=c[t],7===r&&6===a||6===r&&7===a))){var r,a,s=6===c[e]?[v,y]:[y,v],d=s[0],p=s[1],h=Jd(d,p);if(1===h.length&&!(pf-h[0]>i)){var m=Jd(p,d);0!==m.length&&(m.some((function(e){return hf-e>i}))||(u.setBits(e,t),l.addContact(e,t,5)))}}}))},x=0;x<g;++x)b(x)}(e,n,t);var r=function(e){var t=e.contactStore,n=xd({nodeArray1:t.index1,nodeArray2:t.index2,edgeCount:t.count,nodeCount:e.featureSet.length}),r=new bd(e.contactStore.count,!0);return Object.assign({adjacencyList:n,contactSet:r},e)}(n);return function(e,t,n){void 0===n&&(n={}),sl&&rl.time("refineLineOfSight");var r=Sa(n.lineOfSightDistFactor,gf.lineOfSightDistFactor),i=Sa(n.masterModelIndex,gf.masterModelIndex),o=e.spatialHash,a=t.contactSet,s=t.contactStore,l=t.features,u=s.index1,c=s.index2,d=l.centers,f=l.atomSets,p=d.x,h=d.y,m=d.z,g=e.getAtomProxy(),v=e.getAtomProxy(),y=e.getAtomProxy(),b=new U,x=new U,w=3*r,_=r*r;a.forEach((function(e){b.set(p[u[e]],h[u[e]],m[u[e]]),x.set(p[c[e]],h[c[e]],m[c[e]]);var t=(b.x+x.x)/2,n=(b.y+x.y)/2,r=(b.z+x.z)/2,s=f[u[e]],l=f[c[e]];g.index=s[0],v.index=l[0],o.eachWithin(t,n,r,w,(function(t,n){y.index=t,1!==y.number&&y.vdw*y.vdw*_>n&&!mf(g,y,i)&&!mf(v,y,i)&&!s.includes(t)&&!l.includes(t)&&b.distanceToSquared(y)>1&&x.distanceToSquared(y)>1&&(a.clear(e),sl&&rl.log("removing",g.qualifiedName(),v.qualifiedName(),"because",y.qualifiedName()))}))})),sl&&rl.timeEnd("refineLineOfSight")}(e,r,t),function(e,t){var n=t.contactSet,r=t.contactStore,i=t.features,o=r.type,a=r.index1,s=r.index2,l=i.atomSets,u=e.getAtomProxy(),c=e.getAtomProxy(),d={},f=function(e,t,r){var i=d[r]||[1/0,-1],o=i[0],a=i[1];e<o?(-1!==a&&n.clear(a),d[r]=[e,t]):n.clear(t)};n.forEach((function(e){if(6===o[e]){u.index=l[a[e]][0],c.index=l[s[e]][0];var t=u.distanceTo(c);f(t,e,u.index+"|"+c.residueIndex),f(t,e,c.index+"|"+u.residueIndex)}}))}(e,r),t.refineSaltBridges&&function(e,t){var n=t.contactSet,r=t.contactStore,i=t.features,o=r.type,a=r.index1,s=r.index2,l=i.atomSets,u={},c=function(e,t){u[e]||(u[e]=[]),u[e].push(t)};n.forEach((function(e){1===o[e]&&(l[a[e]].forEach((function(t){return c(t,e)})),l[s[e]].forEach((function(t){return c(t,e)})))})),n.forEach((function(e){if(function(e){return 4===e||9===e||10===e}(o[e])){var t=u[l[a[e]][0]],r=u[l[s[e]][0]];if(t&&r)for(var i=t.length,c=0;c<i;++c)if(r.includes(t[c]))return void n.clear(e)}}))}(0,r),function(e,t){var n=t.contactSet,r=t.contactStore,i=t.features,o=r.type,a=r.index1,s=r.index2,l=i.atomSets,u={},c=function(e,t){u[e]||(u[e]=[]),u[e].push(t)};n.forEach((function(e){3===o[e]&&(l[a[e]].forEach((function(t){return c(t,e)})),l[s[e]].forEach((function(t){return c(t,e)})))})),n.forEach((function(e){if(6===o[e]||2===o[e]){var t=u[l[a[e]][0]],r=u[l[s[e]][0]];if(t&&r)for(var i=t.length,c=0;c<i;++c)if(r.includes(t[c]))return void n.clear(e)}}))}(0,r),function(e,t){var n=t.contactSet,r=t.contactStore,i=t.features,o=r.type,a=r.index1,s=r.index2,l=i.atomSets,u={},c=function(e,t){u[e]||(u[e]=[]),u[e].push(t)};n.forEach((function(e){1===o[e]&&(l[a[e]].forEach((function(t){return c(t,e)})),l[s[e]].forEach((function(t){return c(t,e)})))})),n.forEach((function(e){if(7===o[e]){var t=u[l[a[e]][0]],r=u[l[s[e]][0]];if(t&&r)for(var i=t.length,c=0;c<i;++c)if(r.includes(t[c]))return void n.clear(t[c])}}))}(0,r),sl&&rl.timeEnd("calculateContacts"),r}function wf(e){switch(e){case 4:case 9:case 10:return"hydrogen bond";case 6:return"hydrophobic contact";case 5:return"halogen bond";case 1:return"ionic interaction";case 7:return"metal coordination";case 2:return"cation-pi interaction";case 3:return"pi-pi stacking";case 8:return"weak hydrogen bond";default:return"unknown contact"}}var _f={hydrogenBond:!0,hydrophobic:!0,halogenBond:!0,ionicInteraction:!0,metalCoordination:!0,cationPi:!0,piStacking:!0,weakHydrogenBond:!0,waterHydrogenBond:!0,backboneHydrogenBond:!0,radius:1,filterSele:""},Sf=new ie;function Cf(e,t,n){var r=Ca(n,_f),i=[];r.hydrogenBond&&i.push(4),r.hydrophobic&&i.push(6),r.halogenBond&&i.push(5),r.ionicInteraction&&i.push(1),r.metalCoordination&&i.push(7),r.cationPi&&i.push(2),r.piStacking&&i.push(3),r.weakHydrogenBond&&i.push(8),r.waterHydrogenBond&&i.push(9),r.backboneHydrogenBond&&i.push(10);var o,a=e.features,s=e.contactSet,l=e.contactStore,u=a.centers,c=a.atomSets,d=u.x,f=u.y,p=u.z,h=l.index1,m=l.index2,g=l.type,v=[],y=[],b=[],x=[],w=[];return r.filterSele&&(o=Array.isArray(r.filterSele)?r.filterSele.map((function(e){return t.getAtomSet(new zs(e))})):t.getAtomSet(new zs(r.filterSele))),s.forEach((function(e){var t=g[e];if(i.includes(t)){if(o){var n=c[h[e]][0],a=c[m[e]][0];if(Array.isArray(o)){if(!(o[0].isSet(n)&&o[1].isSet(a)||o[1].isSet(n)&&o[0].isSet(a)))return}else if(!o.isSet(n)&&!o.isSet(a))return}var s=h[e],l=m[e];v.push(d[s],f[s],p[s]),y.push(d[l],f[l],p[l]),b.push.apply(b,function(e){switch(e){case 4:case 9:case 10:return Sf.setHex(2851770).toArray();case 6:return Sf.setHex(8421504).toArray();case 5:return Sf.setHex(4259775).toArray();case 1:return Sf.setHex(15779860).toArray();case 7:return Sf.setHex(9191577).toArray();case 2:return Sf.setHex(16744448).toArray();case 3:return Sf.setHex(9220966).toArray();case 8:return Sf.setHex(12967404).toArray();default:return Sf.setHex(13421772).toArray()}}(t)),x.push(r.radius),w.push(e)}})),{position1:new Float32Array(v),position2:new Float32Array(y),color:new Float32Array(b),color2:new Float32Array(b),radius:new Float32Array(x),picking:new Of(w,e,t)}}var Ef=function(e){this.array=e},kf={type:{configurable:!0},data:{configurable:!0}};kf.type.get=function(){return""},kf.data.get=function(){return{}},Ef.prototype.getIndex=function(e){return this.array?this.array[e]:e},Ef.prototype.getObject=function(e){return{}},Ef.prototype._applyTransformations=function(e,t,n){return t&&e.applyMatrix4(t.matrix),n&&e.applyMatrix4(n.matrix),e},Ef.prototype._getPosition=function(e){return new U},Ef.prototype.getPosition=function(e,t,n){return this._applyTransformations(this._getPosition(e),t,n)},Object.defineProperties(Ef.prototype,kf);var Pf=function(e){function t(t){e.call(this),this.shape=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0},data:{configurable:!0},type:{configurable:!0}};return n.primitive.get=function(){},n.data.get=function(){return this.shape},n.type.get=function(){return this.primitive.type},t.prototype.getObject=function(e){return this.primitive.objectFromShape(this.shape,this.getIndex(e))},t.prototype._getPosition=function(e){return this.primitive.positionFromShape(this.shape,this.getIndex(e))},Object.defineProperties(t.prototype,n),t}(Ef),Mf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return sd},Object.defineProperties(t.prototype,n),t}(Pf),Af=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return ld},Object.defineProperties(t.prototype,n),t}(Pf),Tf=function(e){function t(t,n){e.call(this,t),this.structure=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"atom"},n.data.get=function(){return this.structure},t.prototype.getObject=function(e){return this.structure.getAtomProxy(this.getIndex(e))},t.prototype._getPosition=function(e){return(new U).copy(this.getObject(e))},Object.defineProperties(t.prototype,n),t}(Ef),Rf=function(e){function t(t){e.call(this),this.axes=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"axes"},n.data.get=function(){return this.axes},t.prototype.getObject=function(){return{axes:this.axes}},t.prototype._getPosition=function(){return this.axes.center.clone()},Object.defineProperties(t.prototype,n),t}(Ef),If=function(e){function t(t,n,r){e.call(this,t),this.structure=n,this.bondStore=r||n.bondStore}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"bond"},n.data.get=function(){return this.structure},t.prototype.getObject=function(e){var t=this.structure.getBondProxy(this.getIndex(e));return t.bondStore=this.bondStore,t},t.prototype._getPosition=function(e){var t=this.getObject(e);return(new U).copy(t.atom1).add(t.atom2).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(Ef),Of=function(e){function t(t,n,r){e.call(this,t),this.contacts=n,this.structure=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"contact"},n.data.get=function(){return this.contacts},t.prototype.getObject=function(e){var t=this.getIndex(e),n=this.contacts,r=n.features,i=n.contactStore,o=r.centers,a=r.atomSets,s=o.x,l=o.y,u=o.z,c=i.index1,d=i.index2,f=i.type,p=c[t],h=d[t];return{center1:new U(s[p],l[p],u[p]),center2:new U(s[h],l[h],u[h]),atom1:this.structure.getAtomProxy(a[p][0]),atom2:this.structure.getAtomProxy(a[h][0]),type:wf(f[t])}},t.prototype._getPosition=function(e){var t=this.getObject(e),n=t.center1,r=t.center2;return(new U).addVectors(n,r).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(Ef),Lf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return ud},Object.defineProperties(t.prototype,n),t}(Pf),Df=function(e){function t(t,n,r){e.call(this,t),this.validation=n,this.structure=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"clash"},n.data.get=function(){return this.validation},t.prototype.getObject=function(e){var t=this.validation,n=this.getIndex(e);return{validation:t,index:n,clash:t.clashArray[n]}},t.prototype._getAtomProxyFromSele=function(e){var t=new zs(e),n=this.structure.getAtomIndices(t)[0];return this.structure.getAtomProxy(n)},t.prototype._getPosition=function(e){var t=this.getObject(e).clash,n=this._getAtomProxyFromSele(t.sele1),r=this._getAtomProxyFromSele(t.sele2);return(new U).copy(n).add(r).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(Ef),Ff=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"distance"},Object.defineProperties(t.prototype,n),t}(If),Nf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return cd},Object.defineProperties(t.prototype,n),t}(Pf),Bf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return od},Object.defineProperties(t.prototype,n),t}(Pf),zf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return id},Object.defineProperties(t.prototype,n),t}(Pf),jf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"ignore"},Object.defineProperties(t.prototype,n),t}(Ef),Hf=function(e){function t(t,n){e.call(this,t),this.mesh=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"mesh"},t.prototype.getObject=function(){var e=this.mesh;return{shape:this.shape,name:e.name,serial:e.serial}},t.prototype._getPosition=function(){return this.__position||(this.__position=Ac(this.mesh.position)),this.__position},Object.defineProperties(t.prototype,n),t}(Pf),Uf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return rd},Object.defineProperties(t.prototype,n),t}(Pf),Vf=function(e){function t(t,n){e.call(this,t),this.surface=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"surface"},n.data.get=function(){return this.surface},t.prototype.getObject=function(e){return{surface:this.surface,index:this.getIndex(e)}},t.prototype._getPosition=function(){return this.surface.center.clone()},Object.defineProperties(t.prototype,n),t}(Ef),Gf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return ad},Object.defineProperties(t.prototype,n),t}(Pf),Wf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return dd},Object.defineProperties(t.prototype,n),t}(Pf),$f=function(e){function t(t,n){e.call(this),this.unitcell=t,this.structure=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"unitcell"},n.data.get=function(){return this.unitcell},t.prototype.getObject=function(){return{unitcell:this.unitcell,structure:this.structure}},t.prototype._getPosition=function(){return this.unitcell.getCenter(this.structure)},Object.defineProperties(t.prototype,n),t}(Ef),qf=(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};n.type.get=function(){return"unknown"},Object.defineProperties(t.prototype,n)}(Ef),function(e){function t(t,n){e.call(this,t),this.volume=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"volume"},n.data.get=function(){return this.volume},t.prototype.getObject=function(e){var t=this.volume,n=this.getIndex(e);return{volume:t,index:n,value:t.data[n]}},t.prototype._getPosition=function(e){var t=this.volume.position,n=this.getIndex(e);return new U(t[3*n],t[3*n+1],t[3*n+2])},Object.defineProperties(t.prototype,n),t}(Ef)),Xf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"slice"},Object.defineProperties(t.prototype,n),t}(qf),Kf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return pd},Object.defineProperties(t.prototype,n),t}(Pf),Yf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return hd},Object.defineProperties(t.prototype,n),t}(Pf);function Zf(){return new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0])}function Qf(){return new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}function Jf(){return[[0,4,4,4,2,0,0,0,2,2,0,0],[4,0,4,4,0,8,0,0,0,8,8,0],[4,4,0,4,0,0,8,0,0,0,8,8],[4,4,4,0,0,0,0,1,1,0,0,1],[2,0,0,0,0,8,8,8,2,2,0,0],[0,8,0,0,8,0,8,8,0,8,8,0],[0,0,8,0,8,8,0,8,0,0,8,8],[0,0,0,1,8,8,8,0,1,0,0,1],[2,0,0,1,2,0,0,1,0,2,0,1],[2,8,0,0,2,8,0,0,2,0,8,0],[0,8,8,0,0,8,8,0,0,8,0,8],[0,0,8,1,0,0,8,1,1,0,8,0]]}function ep(e,t,n,r,i){var o,a,s,l,u,c,d,f=0,p=!1,h=!1,m=!1,g=t*n*r,v=t,y=t*n,b=new Int32Array(12),x=[],w=[],_=[],S=[],C=Zf(),E=Qf(),k=[[0,4,4,4,2,0,0,0,2,2,0,0],[4,0,4,4,0,8,0,0,0,8,8,0],[4,4,0,4,0,0,8,0,0,0,8,8],[4,4,4,0,0,0,0,1,1,0,0,1],[2,0,0,0,0,8,8,8,2,2,0,0],[0,8,0,0,8,0,8,8,0,8,8,0],[0,0,8,0,8,8,0,8,0,0,8,8],[0,0,0,1,8,8,8,0,1,0,0,1],[2,0,0,1,2,0,0,1,0,2,0,1],[2,8,0,0,2,8,0,0,2,0,8,0],[0,8,8,0,0,8,8,0,0,8,0,8],[0,0,8,1,0,0,8,1,1,0,8,0]];function P(e,t,n){return e+(t-e)*n}function M(e,i,o){return y*(o=(o+d)%r)+v*(i=(i+c)%n)+(e=(e+u)%t)}function A(e,t,n,r,l,u,c){var d=3*e;if(a[d]<0){var h=(f-u)/(c-u),m=o,g=3*s;if(x[g+0]=n+h,x[g+1]=r,x[g+2]=l,!p){var v=3*e;w[g]=-P(m[v],m[v+3],h),w[g+1]=-P(m[v+1],m[v+4],h),w[g+2]=-P(m[v+2],m[v+5],h)}i&&(S[s]=i[e+Math.round(h)]),a[d]=s,b[t]=s,s+=1}else b[t]=a[d]}function T(e,t,n,r,l,u,c){var d=3*e+1;if(a[d]<0){var h=(f-u)/(c-u),m=o,g=3*s;if(x[g]=n,x[g+1]=r+h,x[g+2]=l,!p){var y=3*e,_=y+3*v;w[g]=-P(m[y],m[_],h),w[g+1]=-P(m[y+1],m[_+1],h),w[g+2]=-P(m[y+2],m[_+2],h)}i&&(S[s]=i[e+Math.round(h)*v]),a[d]=s,b[t]=s,s+=1}else b[t]=a[d]}function R(e,t,n,r,l,u,c){var d=3*e+2;if(a[d]<0){var h=(f-u)/(c-u),m=o,g=3*s;if(x[g]=n,x[g+1]=r,x[g+2]=l+h,!p){var v=3*e,_=v+3*y;w[g]=-P(m[v],m[_],h),w[g+1]=-P(m[v+1],m[_+1],h),w[g+2]=-P(m[v+2],m[_+2],h)}i&&(S[s]=i[e+Math.round(h)*y]),a[d]=s,b[t]=s,s+=1}else b[t]=a[d]}function I(t){var n=3*t;0===o[n]&&(o[n]=e[(t-1+g)%g]-e[(t+1)%g],o[n+1]=e[(t-v+g)%g]-e[(t+v)%g],o[n+2]=e[(t-y+g)%g]-e[(t+y)%g])}function O(t,n,r,i,o){var a,s,u,c,d,g,x;m?(i=M(t,n,r),a=M(t+1,n,r),s=M(t,n+1,r),u=M(t,n,r+1),c=M(t+1,n+1,r),d=M(t+1,n,r+1),g=M(t,n+1,r+1),x=M(t+1,n+1,r+1)):(a=i+1,c=(s=i+v)+1,d=(u=i+y)+1,x=(g=s+y)+1);var w=0,S=e[i],P=e[a],O=e[s],L=e[c],D=e[u],F=e[d],N=e[g],B=e[x];S<f&&(w|=1),P<f&&(w|=2),O<f&&(w|=8),L<f&&(w|=4),D<f&&(w|=16),F<f&&(w|=32),N<f&&(w|=128),B<f&&(w|=64);var z=C[w];if(0===z)return 0;var j=t+1,H=n+1,U=r+1;1&z&&(p||(I(i),I(a)),A(i,0,t,n,r,S,P)),2&z&&(p||(I(a),I(c)),T(a,1,j,n,r,P,L)),4&z&&(p||(I(s),I(c)),A(s,2,t,H,r,O,L)),8&z&&(p||(I(i),I(s)),T(i,3,t,n,r,S,O)),16&z&&(p||(I(u),I(d)),A(u,4,t,n,U,D,F)),32&z&&(p||(I(d),I(x)),T(d,5,j,n,U,F,B)),64&z&&(p||(I(g),I(x)),A(g,6,t,H,U,N,B)),128&z&&(p||(I(u),I(g)),T(u,7,t,n,U,D,N)),256&z&&(p||(I(i),I(u)),R(i,8,t,n,r,S,D)),512&z&&(p||(I(a),I(d)),R(a,9,j,n,r,P,F)),1024&z&&(p||(I(c),I(x)),R(c,10,j,H,r,L,B)),2048&z&&(p||(I(s),I(g)),R(s,11,t,H,r,O,N));for(var V,G,W,$=w<<4,q=0;-1!==E[$+q];)V=E[$+q],G=E[$+q+1],W=E[$+q+2],h?(k[V][G]&o&&(_[l++]=b[V],_[l++]=b[G]),k[G][W]&o&&(_[l++]=b[G],_[l++]=b[W]),k[V][W]&o&&(_[l++]=b[V],_[l++]=b[W])):(_[l++]=b[G],_[l++]=b[V],_[l++]=b[W]),q+=3}function L(i,o,s,l,u,c){var d,h,g,b,x,w,_,S,C,E,k,P,A;if(i=void 0!==i?i:0,o=void 0!==o?o:0,s=void 0!==s?s:0,l=void 0!==l?l:t-1,u=void 0!==u?u:n-1,c=void 0!==c?c:r-1,m||(p?(i=Math.max(0,i),o=Math.max(0,o),s=Math.max(0,s),l=Math.min(t-1,l),u=Math.min(n-1,u),c=Math.min(r-1,c)):(i=Math.max(1,i),o=Math.max(1,o),s=Math.max(1,s),l=Math.min(t-2,l),u=Math.min(n-2,u),c=Math.min(r-2,c))),m)for(S=i-2,C=o-2,k=l+2,P=u+2,A=c+2,x=E=s-2;x<A;++x)for(b=C;b<P;++b)for(g=S;g<k;++g)h=3*M(g,b,x),a[h]=-1,a[h+1]=-1,a[h+2]=-1;else for(S=Math.max(0,i-2),C=Math.max(0,o-2),E=Math.max(0,s-2),k=Math.min(t,l+2),P=Math.min(n,u+2),A=Math.min(r,c+2),x=E;x<A;++x)for(_=y*x,b=C;b<P;++b)for(w=_+v*b,g=S;g<k;++g)a[d=3*(w+g)]=-1,a[d+1]=-1,a[d+2]=-1;if(!m){var T,R=i,I=o,L=s,D=l,F=u,N=c;for(T=!1,x=s;x<c;++x){for(b=o;b<u;++b){for(g=i;g<l;++g)if(e[d=t*n*x+t*b+g]>=f){L=x,T=!0;break}if(T)break}if(T)break}for(T=!1,b=o;b<u;++b){for(x=L;x<c;++x){for(g=i;g<l;++g)if(e[d=t*n*x+t*b+g]>=f){I=b,T=!0;break}if(T)break}if(T)break}for(T=!1,g=i;g<l;++g){for(b=I;b<u;++b){for(x=L;x<c;++x)if(e[d=t*n*x+t*b+g]>=f){R=g,T=!0;break}if(T)break}if(T)break}for(T=!1,x=c;x>=s;--x){for(b=u;b>=o;--b){for(g=l;g>=i;--g)if(e[d=t*n*x+t*b+g]>=f){N=x,T=!0;break}if(T)break}if(T)break}for(T=!1,b=u;b>=o;--b){for(x=N;x>=s;--x){for(g=l;g>=i;--g)if(e[d=t*n*x+t*b+g]>=f){F=b,T=!0;break}if(T)break}if(T)break}for(T=!1,g=l;g>=i;--g){for(b=F;b>=o;--b){for(x=N;x>=s;--x)if(e[d=t*n*x+t*b+g]>=f){D=g,T=!0;break}if(T)break}if(T)break}p?(i=Math.max(0,R-1),o=Math.max(0,I-1),s=Math.max(0,L-1),l=Math.min(t-1,D+1),u=Math.min(n-1,F+1),c=Math.min(r-1,N+1)):(i=Math.max(1,R-1),o=Math.max(1,I-1),s=Math.max(1,L-1),l=Math.min(t-2,D+1),u=Math.min(n-2,F+1),c=Math.min(r-2,N+1))}var B=15;for(x=s;x<c;++x,B&=-5)for(_=y*x,B|=2,b=o;b<u;++b,B&=-3)for(w=_+v*b,B|=1,g=i;g<l;++g,B&=-2)O(g,b,x,d=w+g,B)}this.triangulate=function(e,v,y,b,C){f=e,h=b,m=C,(p=v||h)||o||(o=new Float32Array(3*g));var E=3*g;if(a&&a.length===E||(a=new Int32Array(E)),s=0,l=0,void 0!==y){var k=y[0].map(Math.round),P=y[1].map(Math.round);u=t*Math.ceil(Math.abs(k[0])/t),c=n*Math.ceil(Math.abs(k[1])/n),d=r*Math.ceil(Math.abs(k[2])/r),L(k[0],k[1],k[2],P[0],P[1],P[2])}else u=c=d=0,L();return x.length=3*s,p||(w.length=3*s),_.length=l,i&&(S.length=s),{position:new Float32Array(x),normal:p?void 0:new Float32Array(w),index:Ba(_,x.length/3),atomindex:i?new Int32Array(S):void 0,contour:h}}}wl.add("arrow",Af),wl.add("box",zf),wl.add("cone",Lf),wl.add("cylinder",Mf),wl.add("ellipsoid",Nf),wl.add("octahedron",Bf),wl.add("sphere",Uf),wl.add("tetrahedron",Gf),wl.add("torus",Wf),wl.add("point",Kf),wl.add("wideline",Yf),Object.assign(ep,{__deps:[Zf,Qf,Jf,Ba]});var tp=function(e,t){this.cols=e,this.rows=t,this.size=this.cols*this.rows,this.data=new Float32Array(this.size)};function np(e,t){for(var n=0,r=0,i=t.rows,o=t.cols,a=0,s=0,l=0,u=t.data,c=e.data;n<i;s+=1,a+=o,n++)for(l=s,r=0;r<o;l+=i,r++)c[l]=u[a+r]}function rp(e,t,n){for(var r=0,i=0,o=0,a=0,s=0,l=0,u=0,c=t.cols,d=t.rows,f=n.rows,p=t.data,h=n.data,m=e.data,g=0;r<d;a+=c,r++)for(l=0,i=0;i<f;u++,i++){for(s=a,g=0,o=0;o<c;s++,l++,o++)g+=p[s]*h[l];m[u]=g}}function ip(e,t,n){var r=e.data,i=t.data,o=n.data,a=i[0],s=i[1],l=i[2],u=i[3],c=i[4],d=i[5],f=i[6],p=i[7],h=i[8],m=o[0],g=o[1],v=o[2],y=o[3],b=o[4],x=o[5],w=o[6],_=o[7],S=o[8];r[0]=a*m+s*y+l*w,r[1]=a*g+s*b+l*_,r[2]=a*v+s*x+l*S,r[3]=u*m+c*y+d*w,r[4]=u*g+c*b+d*_,r[5]=u*v+c*x+d*S,r[6]=f*m+p*y+h*w,r[7]=f*g+p*b+h*_,r[8]=f*v+p*x+h*S}function op(e){for(var t=e.rows,n=e.cols,r=e.data,i=new Array(n),o=0;o<n;++o)i[o]=0;for(var a=0,s=0;a<t;++a)for(var l=0;l<n;++l,++s)i[l]+=r[s];for(var u=0;u<n;++u)i[u]/=t;return i}function ap(e,t){for(var n=e.rows,r=e.cols,i=e.data,o=0,a=0;o<n;++o)for(var s=0;s<r;++s,++a)i[a]-=t[s]}function sp(e,t,n,r){r=e[t],e[t]=e[n],e[n]=r}function lp(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?(t/=e,e*Math.sqrt(1+t*t)):t>0?(e/=t,t*Math.sqrt(1+e*e)):0}tp.prototype.copyTo=function(e){e.data.set(this.data)};function up(e,t,n,r){var i=0,o=0,a=e.rows,s=e.cols,l=a,u=s;l<u&&(i=1,o=l,l=u,u=o);var c=new tp(l,l),d=new tp(1,u),f=new tp(u,u);if(0===i)np(c,e);else{for(o=0;o<s*a;o++)c.data[o]=e.data[o];for(;o<u*l;o++)c.data[o]=0}if(function(e,t,n,r,i,o,a,s){for(var l=0,u=0,c=0,d=0,f=Math.max(o,30),p=0,h=0,m=0,g=0,v=0,y=0,b=0,x=0,w=0,_=0,S=0,C=0,E=0,k=0,P=0,M=0,A=0,T=4660,R=0,I=0,O=0,L=new Float64Array(a<<3);l<a;l++){for(c=0,S=0;c<o;c++)S+=(x=e[l*t+c])*x;if(L[l]=S,r){for(c=0;c<a;c++)r[l*i+c]=0;r[l*i+l]=1}}for(;d<f;d++){for(v=0,l=0;l<a-1;l++)for(u=l+1;u<a;u++){for(p=l*t|0,h=u*t|0,P=L[l],M=0,A=L[u],c=2,M+=e[p]*e[h],M+=e[p+1]*e[h+1];c<o;c++)M+=e[p+c]*e[h+c];if(!(Math.abs(M)<=2.384185792e-7*Math.sqrt(P*A))){for(E=lp(M*=2,C=P-A),C<0?(k=.5*(E-C),y=M/(E*(b=Math.sqrt(k/E))*2)):b=M/(E*(y=Math.sqrt((E+C)/(2*E)))*2),P=0,A=0,c=2,w=y*e[p]+b*e[h],_=-b*e[p]+y*e[h],e[p]=w,e[h]=_,P+=w*w,A+=_*_,w=y*e[p+1]+b*e[h+1],_=-b*e[p+1]+y*e[h+1],e[p+1]=w,e[h+1]=_,P+=w*w,A+=_*_;c<o;c++)w=y*e[p+c]+b*e[h+c],_=-b*e[p+c]+y*e[h+c],e[p+c]=w,e[h+c]=_,P+=w*w,A+=_*_;if(L[l]=P,L[u]=A,v=1,r)for(g=u*i|0,c=2,w=y*r[m=l*i|0]+b*r[g],_=-b*r[m]+y*r[g],r[m]=w,r[g]=_,w=y*r[m+1]+b*r[g+1],_=-b*r[m+1]+y*r[g+1],r[m+1]=w,r[g+1]=_;c<a;c++)w=y*r[m+c]+b*r[g+c],_=-b*r[m+c]+y*r[g+c],r[m+c]=w,r[g+c]=_}}if(0===v)break}for(l=0;l<a;l++){for(c=0,S=0;c<o;c++)S+=(x=e[l*t+c])*x;L[l]=Math.sqrt(S)}for(l=0;l<a-1;l++){for(u=l,c=l+1;c<a;c++)L[u]<L[c]&&(u=c);if(l!==u&&(sp(L,l,u,S),r)){for(c=0;c<o;c++)sp(e,l*t+c,u*t+c,x);for(c=0;c<a;c++)sp(r,l*i+c,u*i+c,x)}}for(l=0;l<a;l++)n[l]=L[l];if(r)for(l=0;l<s;l++){for(S=l<a?L[l]:0;S<=1e-37;){for(I=1/o,c=0;c<o;c++)R=0!==(256&(T=214013*T+2531011)>>16)?I:-I,e[l*t+c]=R;for(d=0;d<2;d++)for(u=0;u<l;u++){for(S=0,c=0;c<o;c++)S+=e[l*t+c]*e[u*t+c];for(O=0,c=0;c<o;c++)x=e[l*t+c]-S*e[u*t+c],e[l*t+c]=x,O+=Math.abs(x);for(O=O?1/O:0,c=0;c<o;c++)e[l*t+c]*=O}for(S=0,c=0;c<o;c++)S+=(x=e[l*t+c])*x;S=Math.sqrt(S)}for(b=1/S,c=0;c<o;c++)e[l*t+c]*=b}}(c.data,l,d.data,f.data,u,l,u,l),t){for(o=0;o<u;o++)t.data[o]=d.data[o];for(;o<s;o++)t.data[o]=0}0===i?(n&&np(n,c),r&&np(r,f)):(n&&np(n,f),r&&np(r,c))}function cp(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function dp(e,t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g){e[0]=t,e[4]=n,e[8]=r,e[12]=i,e[1]=o,e[5]=a,e[9]=s,e[13]=l,e[2]=u,e[6]=c,e[10]=d,e[14]=f,e[3]=p,e[7]=h,e[11]=m,e[15]=g}function fp(e,t,n){var r=t[0],i=t[4],o=t[8],a=t[12],s=t[1],l=t[5],u=t[9],c=t[13],d=t[2],f=t[6],p=t[10],h=t[14],m=t[3],g=t[7],v=t[11],y=t[15],b=n[0],x=n[4],w=n[8],_=n[12],S=n[1],C=n[5],E=n[9],k=n[13],P=n[2],M=n[6],A=n[10],T=n[14],R=n[3],I=n[7],O=n[11],L=n[15];e[0]=r*b+i*S+o*P+a*R,e[4]=r*x+i*C+o*M+a*I,e[8]=r*w+i*E+o*A+a*O,e[12]=r*_+i*k+o*T+a*L,e[1]=s*b+l*S+u*P+c*R,e[5]=s*x+l*C+u*M+c*I,e[9]=s*w+l*E+u*A+c*O,e[13]=s*_+l*k+u*T+c*L,e[2]=d*b+f*S+p*P+h*R,e[6]=d*x+f*C+p*M+h*I,e[10]=d*w+f*E+p*A+h*O,e[14]=d*_+f*k+p*T+h*L,e[3]=m*b+g*S+v*P+y*R,e[7]=m*x+g*C+v*M+y*I,e[11]=m*w+g*E+v*A+y*O,e[15]=m*_+g*k+v*T+y*L}function pp(e,t,n,r){dp(e,t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1)}function hp(e,t,n,r){dp(e,1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1)}function mp(e,t){var n=Math.cos(t),r=Math.sin(t);dp(e,n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1)}function gp(){return new Float32Array([1,0,0,0,1,0,0,0,1])}function vp(e,t){var n=Dc([t[0],t[1],t[2]]),r=Dc([t[4],t[5],t[6]]),i=Dc([t[8],t[9],t[10]]),o=Dc();Fc(o,r,i),e[0]=o[0],e[1]=o[1],e[2]=o[2],Fc(o,i,n),e[3]=o[0],e[4]=o[1],e[5]=o[2],Fc(o,n,r),e[6]=o[0],e[7]=o[1],e[8]=o[2]}function yp(e,t,n,r){n=n||1,r=r||!0;var i,o=e.length/3,a=t.length/3;r&&(i=new Float32Array(3*o));var s,l,u,c,d=new Float32Array(3*o),f=new Array(20);for(s=0;s<20;++s)f[s]=new Uint32Array(o);for(s=0;s<o;++s)f[0][s]=0;for(s=0;s<a;++s){var p=3*s,h=3*s+1,m=3*s+2;for(c=!0,l=0,u=f[0][t[p]];l<u;++l)if(t[h]===f[l+1][t[p]]){c=!1;break}for(c&&(f[0][t[p]]++,f[f[0][t[p]]][t[p]]=t[h]),c=!0,l=0,u=f[0][t[p]];l<u;++l)if(t[m]===f[l+1][t[p]]){c=!1;break}for(c&&(f[0][t[p]]++,f[f[0][t[p]]][t[p]]=t[m]),c=!0,l=0,u=f[0][t[h]];l<u;++l)if(t[p]===f[l+1][t[h]]){c=!1;break}for(c&&(f[0][t[h]]++,f[f[0][t[h]]][t[h]]=t[p]),c=!0,l=0,u=f[0][t[h]];l<u;++l)if(t[m]===f[l+1][t[h]]){c=!1;break}for(c&&(f[0][t[h]]++,f[f[0][t[h]]][t[h]]=t[m]),c=!0,l=0;l<f[0][t[m]];++l)if(t[p]===f[l+1][t[m]]){c=!1;break}for(c&&(f[0][t[m]]++,f[f[0][t[m]]][t[m]]=t[p]),c=!0,l=0,u=f[0][t[m]];l<u;++l)if(t[h]===f[l+1][t[m]]){c=!1;break}c&&(f[0][t[m]]++,f[f[0][t[m]]][t[m]]=t[h])}for(var g,v,y,b,x,w=.5,_=.75/4.5,S=0;S<n;++S){for(s=0;s<o;++s)if(g=3*s,(y=f[0][s])<3)d[g]=e[g],d[g+1]=e[g+1],d[g+2]=e[g+2];else if(3===y||4===y){for(d[g]=0,d[g+1]=0,d[g+2]=0,l=0;l<y;++l)v=3*f[l+1][s],d[g]+=e[v],d[g+1]+=e[v+1],d[g+2]+=e[v+2];d[g]+=w*e[g],d[g+1]+=w*e[g+1],d[g+2]+=w*e[g+2],x=w+y,d[g]/=x,d[g+1]/=x,d[g+2]/=x}else{for(d[g]=0,d[g+1]=0,d[g+2]=0,l=0;l<y;++l)v=3*f[l+1][s],d[g]+=e[v],d[g+1]+=e[v+1],d[g+2]+=e[v+2];d[g]+=1*e[g],d[g+1]+=1*e[g+1],d[g+2]+=1*e[g+2],b=1+y,d[g]/=b,d[g+1]/=b,d[g+2]/=b}if(e.set(d),r){bp(e,t,i);var C=3*o;for(g=0;g<C;g+=3)e[g]+=-1*_*i[g],e[g+1]+=-1*_*i[g+1],e[g+2]+=-1*_*i[g+2]}}}function bp(e,t,n){var r,i;if(void 0===n)n=new Float32Array(e.length);else for(r=0,i=n.length;r<i;r++)n[r]=0;var o=new Float32Array(3),a=new Float32Array(3),s=new Float32Array(3),l=new Float32Array(3),u=new Float32Array(3);if(t)for(r=0,i=t.length;r<i;r+=3){var c=3*t[r],d=3*t[r+1],f=3*t[r+2];jc(o,e,c),jc(a,e,d),jc(s,e,f),Bc(l,s,a),Bc(u,o,a),Fc(l,l,u),n[c]+=l[0],n[c+1]+=l[1],n[c+2]+=l[2],n[d]+=l[0],n[d+1]+=l[1],n[d+2]+=l[2],n[f]+=l[0],n[f+1]+=l[1],n[f+2]+=l[2]}else for(r=0,i=e.length;r<i;r+=9)jc(o,e,r),jc(a,e,r+3),jc(s,e,r+6),Bc(l,s,a),Bc(u,o,a),Fc(l,l,u),n[r]=l[0],n[r+1]=l[1],n[r+2]=l[2],n[r+3]=l[0],n[r+4]=l[1],n[r+5]=l[2],n[r+6]=l[0],n[r+7]=l[1],n[r+8]=l[2];return Lc(n),n}function xp(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function wp(e,t,n,r,i){var o=1/r*3;$c(e,e,i+(o+=n)),qc(t,t,i+o),Gc(e,e,r),Xc(e,e),Vc(e,e,r),Gc(t,t,r),Kc(t,t),Vc(t,t,r);var a=new Float32Array(3);Bc(a,t,e),Gc(a,a,r),Kc(a,a),qc(a,a,1);var s=256*Math.pow(10,6),l=a[0]*a[1]*a[2]*3;s<=l&&(Gc(e,e,r*=Math.pow(s/l,1/3)),Xc(e,e),Vc(e,e,r),Gc(t,t,r),Kc(t,t),Vc(t,t,r),Bc(a,t,e),Gc(a,a,r),Kc(a,a),qc(a,a,1));var u=new Float32Array(e);Yc(u,u);var c=cp(),d=cp();mp(d,Xa(90)),fp(c,c,d);var f=cp();pp(f,-1/r,1/r,1/r),fp(c,c,f);var p=cp();return hp(p,-r*u[2],-r*u[1],-r*u[0]),fp(c,c,p),{dim:a,tran:u,matrix:c,scaleFactor:r}}pp.__deps=[dp],hp.__deps=[dp],mp.__deps=[dp],vp.__deps=[Dc,Fc],Object.assign(yp,{__deps:[bp]}),Object.assign(bp,{__deps:[Bc,Fc,jc,Lc]}),Object.assign(wp,{__deps:[Xa,$c,qc,Vc,Gc,Xc,Kc,Bc,Yc,cp,fp,hp,pp,mp]});var _p=function(e,t,n){this.name=e||"",this.path=t||"",this.info={},this.center=new U,this.boundingBox=new Z,n instanceof ye||n instanceof Ie||n instanceof wn?this.fromGeometry(n):n&&(this.set(n.position,n.index,n.normal,n.color,n.atomindex,n.contour),this.boundingBox.setFromArray(n.position),this.boundingBox.getCenter(this.center))},Sp={type:{configurable:!0}};function Cp(e,t,n,r,i){var o=new ep(e,t,n,r,i);this.getSurface=function(e,t,n,r,i,a){void 0===a&&(a=!1);var s=o.triangulate(e,t,n,i,a);if(t&&!i&&(yp(s.position,s.index,t,!0),s.normal=bp(s.position,s.index)),r&&(Ic(r,s.position),s.normal)){var l=gp();vp(l,r),Oc(l,s.normal)}return s}}Sp.type.get=function(){return"Surface"},_p.prototype.set=function(e,t,n,r,i,o){void 0===o&&(o=!1),this.position=e,this.index=t,this.normal=n,this.color=r,this.atomindex=i,this.size=e.length/3,this.contour=o},_p.prototype.fromGeometry=function(e){var t,n,r,i;if(sl&&rl.time("GeometrySurface.fromGeometry"),e instanceof ye?(e.computeVertexNormals(!0),t=(new Ie).fromGeometry(e)):t=e instanceof Ie?e:e[0],t.boundingBox||t.computeBoundingBox(),this.boundingBox.copy(t.boundingBox),this.boundingBox.getCenter(this.center),t instanceof Ie){var o=t.attributes,a=!!o.normal&&o.normal.array;(!a||0===a[0]&&0===a[1]&&0===a[2])&&t.computeVertexNormals(),n=o.position.array,r=o.index?o.index.array:null,i=o.normal.array}this.set(n,r,i,undefined,void 0),sl&&rl.timeEnd("GeometrySurface.setGeometry")},_p.prototype.getPosition=function(){return this.position},_p.prototype.getColor=function(e){var t=e||{};t.surface=this;var n=this.size,r=new Float32Array(3*n),i=pl.getScheme(t);if(i.volumeColor||"random"===t.scheme)for(var o=0;o<n;++o)i.volumeColorToArray(o,r,3*o);else if(i.positionColor)for(var a=new U,s=this.position,l=0;l<n;++l){var u=3*l;a.set(s[u],s[u+1],s[u+2]),i.positionColorToArray(a,r,u)}else if(i.atomColor&&this.atomindex)for(var c=t.structure.getAtomProxy(),d=this.atomindex,f=0;f<n;++f)c.index=d[f],i.atomColorToArray(c,r,3*f);else{var p=new ie(t.value);au(n,p.r,p.g,p.b,r)}return r},_p.prototype.getPicking=function(e){return this.atomindex&&e?new Tf(this.atomindex,e):new Vf(su(this.size),this)},_p.prototype.getNormal=function(){return this.normal},_p.prototype.getSize=function(e,t){return ou(this.size,e*t)},_p.prototype.getIndex=function(){return this.index},_p.prototype.getFilteredIndex=function(e,t){if(e&&this.atomindex){for(var n=new zs(e),r=t.getAtomSet(n),i=[],o=this.atomindex,a=this.index,s=a.length,l=this.contour?2:3,u=0,c=0;c<s;c+=l){for(var d=!0,f=0;f<l;f++){var p=o[a[c+f]];if(!r.get(p)){d=!1;break}}if(d)for(var h=0;h<l;h++,u++)i[u]=a[c+h]}return Ba(i,this.position.length/3)}return this.index},_p.prototype.getAtomindex=function(){return this.atomindex},_p.prototype.dispose=function(){},Object.defineProperties(_p.prototype,Sp),Object.assign(Cp,{__deps:[yp,bp,ep,Ic,Oc,gp,vp]}),fl.add("surf",(function(e,t){var n=e.data.args,r=e.data.params;if(n&&(self.volsurf=new Cp(n[0],n[1],n[2],n[3],n[4])),r){var i=self.volsurf.getSurface(r.isolevel,r.smooth,r.box,r.matrix,r.contour,r.wrap),o=[i.position.buffer,i.index.buffer];i.normal&&o.push(i.normal.buffer),i.atomindex&&o.push(i.atomindex.buffer),t({sd:i,p:r},o)}}),[Cp]);var Ep=function(e,t,n,r,i,o,a){this.name=e,this.path=t,this.matrix=new j,this.normalMatrix=new V,this.inverseMatrix=new j,this.center=new U,this.boundingBox=new Z,this.setData(n,r,i,o,a)},kp={type:{configurable:!0},position:{configurable:!0},min:{configurable:!0},max:{configurable:!0},sum:{configurable:!0},mean:{configurable:!0},rms:{configurable:!0}};function Pp(e){return"front"===e?0:"back"===e?1:2}kp.type.get=function(){return"Volume"},Ep.prototype.setData=function(e,t,n,r,i){this.nx=t||1,this.ny=n||1,this.nz=r||1,this.data=e||new Float32Array(1),this.setAtomindex(i),delete this._position,delete this._min,delete this._max,delete this._mean,delete this._rms,this.worker&&this.worker.terminate()},Ep.prototype.setStats=function(e,t,n,r){this._min=e,this._max=t,this._mean=n,this._rms=r},Ep.prototype.setMatrix=function(e){this.matrix.copy(e);var t=this.boundingBox,n=this.center,r=this.nx-1,i=this.ny-1,o=this.nz-1;t.makeEmpty(),t.expandByPoint(n.set(r,i,o)),t.expandByPoint(n.set(r,i,0)),t.expandByPoint(n.set(r,0,o)),t.expandByPoint(n.set(r,0,0)),t.expandByPoint(n.set(0,i,o)),t.expandByPoint(n.set(0,0,o)),t.expandByPoint(n.set(0,i,0)),t.expandByPoint(n.set(0,0,0)),t.applyMatrix4(this.matrix),t.getCenter(this.center);var a=this.matrix.elements,s=new U(a[0],a[1],a[2]),l=new U(a[4],a[5],a[6]),u=new U(a[8],a[9],a[10]),c=new U,d=this.normalMatrix.elements;c.crossVectors(l,u),d[0]=c.x,d[1]=c.y,d[2]=c.z,c.crossVectors(u,s),d[3]=c.x,d[4]=c.y,d[5]=c.z,c.crossVectors(s,l),d[6]=c.x,d[7]=c.y,d[8]=c.z,this.inverseMatrix.getInverse(this.matrix)},Ep.prototype.setAtomindex=function(e){this.atomindex=e},Ep.prototype.getBox=function(e,t,n){return n||(n=new Z),n.set(e,e),n.expandByScalar(t),n.applyMatrix4(this.inverseMatrix),n.min.round(),n.max.round(),n},Ep.prototype._getBox=function(e,t){if(e&&t){this.__box||(this.__box=new Z);var n=this.getBox(e,t,this.__box);return[n.min.toArray(),n.max.toArray()]}},Ep.prototype._makeSurface=function(e,t,n){var r=this.name+"@"+t.toPrecision(2),i=new _p(r,"",e);return i.info.isolevel=t,i.info.smooth=n,i.info.volume=this,i},Ep.prototype.getSurface=function(e,t,n,r,i,o){void 0===o&&(o=!1),e=isNaN(e)?this.getValueForSigma(2):e,t=Sa(t,0),void 0===this.volsurf&&(this.volsurf=new Cp(this.data,this.nx,this.ny,this.nz,this.atomindex));var a=this._getBox(n,r),s=this.volsurf.getSurface(e,t,a,this.matrix.elements,i,o);return this._makeSurface(s,e,t)},Ep.prototype.getSurfaceWorker=function(e,t,n,r,i,o,a){var s=this;if(e=isNaN(e)?this.getValueForSigma(2):e,t=t||0,window.hasOwnProperty("Worker")){void 0===this.workerPool&&(this.workerPool=new Mc("surf",2));var l={},u=this.workerPool.getNextWorker();0===u.postCount&&Object.assign(l,{args:[this.data,this.nx,this.ny,this.nz,this.atomindex]}),Object.assign(l,{params:{isolevel:e,smooth:t,box:this._getBox(n,r),matrix:this.matrix.elements,contour:i,wrap:o}}),u.post(l,void 0,(function(e){var t=e.data.sd,n=e.data.p;a(s._makeSurface(t,n.isolevel,n.smooth))}),(function(l){console.warn("Volume.getSurfaceWorker error - trying without worker",l);var u=s.getSurface(e,t,n,r,i,o);a(u)}))}else{var c=this.getSurface(e,t,n,r,i,o);a(c)}},Ep.prototype.getValueForSigma=function(e){return this.mean+Sa(e,2)*this.rms},Ep.prototype.getSigmaForValue=function(e){return(Sa(e,0)-this.mean)/this.rms},kp.position.get=function(){if(!this._position){for(var e=this.nz,t=this.ny,n=this.nx,r=new Float32Array(n*t*e*3),i=0,o=0;o<e;++o)for(var a=0;a<t;++a)for(var s=0;s<n;++s)r[i+0]=s,r[i+1]=a,r[i+2]=o,i+=3;Ic(this.matrix.elements,r),this._position=r}return this._position},Ep.prototype.getDataAtomindex=function(){return this.atomindex},Ep.prototype.getDataPosition=function(){return this.position},Ep.prototype.getDataColor=function(e){var t=e||{};t.volume=this,t.scale=t.scale||"Spectral",t.domain=t.domain||[this.min,this.max];for(var n=pl.getScheme(t),r=this.position.length/3,i=new Float32Array(3*r),o=0;o<r;++o)n.volumeColorToArray(o,i,3*o);return i},Ep.prototype.getDataPicking=function(){var e=su(this.position.length/3);return new qf(e,this)},Ep.prototype.getDataSize=function(e,t){var n,r=this.data,i=this.position.length/3;switch(e){case"value":case"deviation":n=new Float32Array(r);break;case"abs-value":n=new Float32Array(r);for(var o=0;o<i;++o)n[o]=Math.abs(n[o]);break;case"value-min":n=new Float32Array(r);for(var a=this.min,s=0;s<i;++s)n[s]-=a;break;default:n=ou(i,e)}if(1!==t)for(var l=0;l<i;++l)n[l]*=t;return n},kp.min.get=function(){return void 0===this._min&&(this._min=pu(this.data)),this._min},kp.max.get=function(){return void 0===this._max&&(this._max=fu(this.data)),this._max},kp.sum.get=function(){return void 0===this._sum&&(this._sum=hu(this.data)),this._sum},kp.mean.get=function(){return void 0===this._mean&&(this._mean=mu(this.data)),this._mean},kp.rms.get=function(){return void 0===this._rms&&(this._rms=function(e){for(var t=e.length,n=0,r=0;r<t;++r){var i=e[r];n+=i*i}return Math.sqrt(n/t)}(this.data)),this._rms},Ep.prototype.clone=function(){var e=new Ep(this.name,this.path,this.data,this.nx,this.ny,this.nz,this.atomindex);return e.matrix.copy(this.matrix),e.header=Object.assign({},this.header),e},Ep.prototype.dispose=function(){this.workerPool&&this.workerPool.terminate()},Object.defineProperties(Ep.prototype,kp),vl.add("shader/Mesh.vert","#define STANDARD\nuniform float clipNear;\nuniform vec3 clipCenter;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#elif defined( NOLIGHT )\nvarying vec3 vColor;\n#else\n#include color_pars_vertex\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#endif\n#include common\nvoid main(){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#elif defined( NOLIGHT )\nvColor = color;\n#else\n#include color_vertex\n#include beginnormal_vertex\n#include defaultnormal_vertex\n#ifndef FLAT_SHADED\nvNormal = normalize( transformedNormal );\n#endif\n#endif\n#include begin_vertex\n#include project_vertex\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}"),vl.add("shader/Mesh.frag","#define STANDARD\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 interiorColor;\nuniform float interiorDarkening;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float clipNear;\nuniform float clipRadius;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\n#elif defined( NOLIGHT )\nvarying vec3 vColor;\n#else\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars_begin\n#include lights_physical_pars_fragment\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( PICKING )\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#elif defined( NOLIGHT )\ngl_FragColor = vec4( vColor, opacity );\n#else\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\n#include normal_fragment_begin\n#include lights_physical_fragment\n#include lights_fragment_begin\n#include lights_fragment_end\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\n#include interior_fragment\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#include opaque_back_fragment\n#endif\n}");var Mp={f:1,v2:2,v3:3,c:3};function Ap(e,t){e.matrix.copy(t),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0}var Tp={opaqueBack:!1,side:"double",opacity:1,depthWrite:!0,clipNear:0,clipRadius:0,clipCenter:new U,flatShaded:!1,wireframe:!1,roughness:.4,metalness:0,diffuse:16777215,diffuseInterior:!1,useInteriorColor:!1,interiorColor:14540253,interiorDarkening:0,forceTransparent:!1,matrix:new j,disablePicking:!1,sortParticles:!1,background:!1},Rp={opaqueBack:{updateShader:!0},side:{updateShader:!0,property:!0},opacity:{uniform:!0},depthWrite:{property:!0},clipNear:{updateShader:!0,property:!0},clipRadius:{updateShader:!0,uniform:!0},clipCenter:{uniform:!0},flatShaded:{updateShader:!0},background:{updateShader:!0},wireframe:{updateVisibility:!0},roughness:{uniform:!0},metalness:{uniform:!0},diffuse:{uniform:!0},diffuseInterior:{updateShader:!0},useInteriorColor:{updateShader:!0},interiorColor:{uniform:!0},interiorDarkening:{uniform:!0},matrix:{}},Ip=function(e,t){void 0===t&&(t={}),this.parameterTypes=Rp,this.geometry=new Ie,this.indexVersion=0,this.wireframeIndexVersion=-1,this.group=new wn,this.wireframeGroup=new wn,this.pickingGroup=new wn,this.vertexShader="",this.fragmentShader="",this.isImpostor=!1,this.isText=!1,this.isSurface=!1,this.isPoint=!1,this.isLine=!1,this.dynamic=!0,this.visible=!0,this.wireframeIndexCount=0,this.parameters=Ca(t,this.defaultParameters),this.uniforms=ne.merge([oe.common,{fogColor:{value:null},fogNear:{value:0},fogFar:{value:0},opacity:{value:this.parameters.opacity},clipNear:{value:0},clipRadius:{value:this.parameters.clipRadius},clipCenter:{value:this.parameters.clipCenter}},{emissive:{value:new ie(0)},roughness:{value:this.parameters.roughness},metalness:{value:this.parameters.metalness},interiorColor:{value:new ie(this.parameters.interiorColor)},interiorDarkening:{value:this.parameters.interiorDarkening}},oe.lights]),this.uniforms.diffuse.value.set(this.parameters.diffuse),this.pickingUniforms={clipNear:{value:0},objectId:{value:0},opacity:{value:this.parameters.opacity}};var n=e.position||e.position1;this._positionDataSize=n?n.length/3:0,e.primitiveId||(e.primitiveId=su(this._positionDataSize)),this.addAttributes({position:{type:"v3",value:e.position},color:{type:"c",value:e.color},primitiveId:{type:"f",value:e.primitiveId}}),t.matrix&&(this.matrix=t.matrix),e.index&&this.initIndex(e.index),this.picking=e.picking,this.makeWireframeGeometry()},Op={defaultParameters:{configurable:!0},matrix:{configurable:!0},transparent:{configurable:!0},size:{configurable:!0},attributeSize:{configurable:!0},pickable:{configurable:!0}};Op.defaultParameters.get=function(){return Tp},Op.matrix.set=function(e){this.setMatrix(e)},Op.matrix.get=function(){return this.group.matrix.clone()},Op.transparent.get=function(){return this.parameters.opacity<1||this.parameters.forceTransparent},Op.size.get=function(){return this._positionDataSize},Op.attributeSize.get=function(){return this.size},Op.pickable.get=function(){return!!this.picking&&!this.parameters.disablePicking},Ip.prototype.setMatrix=function(e){Ap(this.group,e),Ap(this.wireframeGroup,e),Ap(this.pickingGroup,e)},Ip.prototype.initIndex=function(e){this.geometry.setIndex(new be(e,1)),this.geometry.getIndex().setDynamic(this.dynamic)},Ip.prototype.makeMaterial=function(){var e=Pp(this.parameters.side),t=new je({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.parameters.depthWrite,lights:!0,fog:!0,side:e});t.vertexColors=2,t.extensions.derivatives=this.parameters.flatShaded,t.extensions.fragDepth=this.isImpostor;var n=new je({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.parameters.depthWrite,lights:!1,fog:!0,side:e});n.vertexColors=2;var r=new je({uniforms:this.pickingUniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:!1,depthWrite:this.parameters.depthWrite,lights:!1,fog:!1,side:e,blending:0});r.vertexColors=2,r.extensions.fragDepth=this.isImpostor,t.clipNear=this.parameters.clipNear,n.clipNear=this.parameters.clipNear,r.clipNear=this.parameters.clipNear,this.material=t,this.wireframeMaterial=n,this.pickingMaterial=r,this.updateShader()},Ip.prototype.makeWireframeGeometry=function(){this.makeWireframeIndex();var e=this.geometry,t=this.wireframeIndex,n=new Ie;n.attributes=e.attributes,t&&(n.setIndex(new be(t,1).setDynamic(this.dynamic)),n.setDrawRange(0,this.wireframeIndexCount)),this.wireframeGeometry=n},Ip.prototype.makeWireframeIndex=function(){var e=[];function t(t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];return void 0===i?(e[t]=[n],!0):!i.includes(n)&&(i.push(n),!0)}var n=this.geometry,r=n.index;if(this.parameters.wireframe)if(r){var i,o=r.array,a=o.length;if(n.drawRange.count!==1/0&&(a=n.drawRange.count),this.wireframeIndex&&this.wireframeIndex.length>2*a)i=this.wireframeIndex;else i=Ba(2*a,n.attributes.position.count);var s=0;e.length=0;for(var l=0;l<a;l+=3){var u=o[l+0],c=o[l+1],d=o[l+2];t(u,c)&&(i[s+0]=u,i[s+1]=c,s+=2),t(c,d)&&(i[s+0]=c,i[s+1]=d,s+=2),t(d,u)&&(i[s+0]=d,i[s+1]=u,s+=2)}this.wireframeIndex=i,this.wireframeIndexCount=s,this.wireframeIndexVersion=this.indexVersion}else{var f,p=n.attributes.position.count;f=this.wireframeIndex&&this.wireframeIndex.length>2*p?this.wireframeIndex:Ba(2*p,p);for(var h=0,m=0;h<p;h+=3)f[m+0]=h,f[m+1]=h+1,f[m+2]=h+1,f[m+3]=h+2,f[m+4]=h+2,f[m+5]=h,m+=6;this.wireframeIndex=f,this.wireframeIndexCount=2*p,this.wireframeIndexVersion=this.indexVersion}else this.wireframeIndex=new Uint16Array(0),this.wireframeIndexCount=0},Ip.prototype.updateWireframeIndex=function(){if(this.wireframeGeometry&&this.wireframeIndex){if(this.wireframeGeometry.setDrawRange(0,1/0),this.wireframeIndexVersion<this.indexVersion&&this.makeWireframeIndex(),this.wireframeIndex.length>this.wireframeGeometry.index.array.length)this.wireframeGeometry.setIndex(new be(this.wireframeIndex,1).setDynamic(this.dynamic));else{var e=this.wireframeGeometry.getIndex();e.set(this.wireframeIndex),e.needsUpdate=this.wireframeIndexCount>0,e.updateRange.count=this.wireframeIndexCount}this.wireframeGeometry.setDrawRange(0,this.wireframeIndexCount)}},Ip.prototype.getRenderOrder=function(){var e=0;return this.isText?e=1:this.transparent&&(e=this.isSurface?3:2),e},Ip.prototype._getMesh=function(e){this.material||this.makeMaterial();var t,n=this.geometry,r=this[e];return(t=this.isLine?new jn(n,r):this.isPoint?new Vn(n,r):new Ve(n,r)).frustumCulled=!1,t.renderOrder=this.getRenderOrder(),t},Ip.prototype.getMesh=function(){return this._getMesh("material")},Ip.prototype.getWireframeMesh=function(){var e;return this.material||this.makeMaterial(),this.wireframeGeometry||this.makeWireframeGeometry(),(e=new jn(this.wireframeGeometry,this.wireframeMaterial)).frustumCulled=!1,e.renderOrder=this.getRenderOrder(),e},Ip.prototype.getPickingMesh=function(){return this._getMesh("pickingMaterial")},Ip.prototype.getShader=function(e,t){return $l(e,this.getDefines(t))},Ip.prototype.getVertexShader=function(e){return this.getShader(this.vertexShader,e)},Ip.prototype.getFragmentShader=function(e){return this.getShader(this.fragmentShader,e)},Ip.prototype.getDefines=function(e){var t={};return this.parameters.clipNear&&(t.NEAR_CLIP=1),this.parameters.clipRadius&&(t.RADIUS_CLIP=1),"picking"===e?t.PICKING=1:(("background"===e||this.parameters.background)&&(t.NOLIGHT=1),this.parameters.flatShaded&&(t.FLAT_SHADED=1),this.parameters.opaqueBack&&(t.OPAQUE_BACK=1),this.parameters.diffuseInterior&&(t.DIFFUSE_INTERIOR=1),this.parameters.useInteriorColor&&(t.USE_INTERIOR_COLOR=1)),t},Ip.prototype.getParameters=function(){return this.parameters},Ip.prototype.addUniforms=function(e){this.uniforms=ne.merge([this.uniforms,e]),this.pickingUniforms=ne.merge([this.pickingUniforms,e])},Ip.prototype.addAttributes=function(e){var t=this;for(var n in e){var r=void 0,i=e[n],o=t.attributeSize*Mp[i.type];i.value?(o!==i.value.length&&rl.error("attribute value has wrong length",n),r=i.value):r=Na("float32",o),t.geometry.addAttribute(n,new be(r,Mp[i.type]).setDynamic(t.dynamic))}},Ip.prototype.updateRenderOrder=function(){var e=this.getRenderOrder();function t(t){t.renderOrder=e}this.group.children.forEach(t),this.pickingGroup&&this.pickingGroup.children.forEach(t)},Ip.prototype.updateShader=function(){var e=this.material,t=this.wireframeMaterial,n=this.pickingMaterial;e.vertexShader=this.getVertexShader(),e.fragmentShader=this.getFragmentShader(),e.needsUpdate=!0,t.vertexShader=this.getShader("Line.vert"),t.fragmentShader=this.getShader("Line.frag"),t.needsUpdate=!0,n.vertexShader=this.getVertexShader("picking"),n.fragmentShader=this.getFragmentShader("picking"),n.needsUpdate=!0},Ip.prototype.setParameters=function(e){var t=this,n=e,r=this.parameterTypes,i=this.parameters,o={},a={},s=!1,l=!1;for(var u in n){var c=n[u];void 0!==c&&(i[u]=c,void 0!==r[u]&&(r[u].property&&(!0!==r[u].property?o[r[u].property]=c:o[u]=c),r[u].uniform&&(!0!==r[u].uniform?a[r[u].uniform]=c:a[u]=c),r[u].updateShader&&(s=!0),r[u].updateVisibility&&(l=!0),t.dynamic&&"wireframe"===u&&!0===c&&t.updateWireframeIndex(),"flatShaded"===u&&(t.material.extensions.derivatives=t.parameters.flatShaded||t.isText),"forceTransparent"===u&&(o.transparent=t.transparent),"matrix"===u&&(t.matrix=c)))}this.setProperties(o),this.setUniforms(a),s&&this.updateShader(),l&&this.setVisibility(this.visible)},Ip.prototype.setAttributes=function(e){var t=this,n=this.geometry,r=n.attributes;for(var i in e)if("picking"!==i){var o=e[i],a=o.length;if("index"===i){var s=n.getIndex();n.setDrawRange(0,1/0),a>s.array.length?n.setIndex(new be(o,1).setDynamic(t.dynamic)):(s.set(o),s.needsUpdate=a>0,s.updateRange.count=a,n.setDrawRange(0,a)),t.indexVersion++,t.parameters.wireframe&&t.updateWireframeIndex()}else{var l=r[i];a>l.array.length?n.addAttribute(i,new be(o,l.itemSize).setDynamic(t.dynamic)):(r[i].set(o),r[i].needsUpdate=a>0,r[i].updateRange.count=a)}}},Ip.prototype.setUniforms=function(e){if(e){var t=this.material.uniforms,n=this.wireframeMaterial.uniforms,r=this.pickingMaterial.uniforms;for(var i in e)"opacity"===i&&this.setProperties({transparent:this.transparent}),void 0!==t[i]&&(t[i].value.isVector3?t[i].value.copy(e[i]):t[i].value.set?t[i].value.set(e[i]):t[i].value=e[i]),void 0!==n[i]&&(n[i].value.isVector3?n[i].value.copy(e[i]):n[i].value.set?n[i].value.set(e[i]):n[i].value=e[i]),void 0!==r[i]&&(r[i].value.isVector3?r[i].value.copy(e[i]):r[i].value.set?r[i].value.set(e[i]):r[i].value=e[i])}},Ip.prototype.setProperties=function(e){if(e){var t=this.material,n=this.wireframeMaterial,r=this.pickingMaterial;for(var i in e){var o=i,a=e[o];"transparent"===o?this.updateRenderOrder():"side"===o&&(a=Pp(a)),t[o]=a,n[o]=a,r[o]=a}t.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0}},Ip.prototype.setVisibility=function(e){this.visible=e,this.parameters.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=e,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=e,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=e))},Ip.prototype.dispose=function(){this.material&&this.material.dispose(),this.wireframeMaterial&&this.wireframeMaterial.dispose(),this.pickingMaterial&&this.pickingMaterial.dispose(),this.geometry.dispose(),this.wireframeGeometry&&this.wireframeGeometry.dispose()},Ip.prototype.toJSON=function(){var e={};for(var t in this)"group"!==t&&"wireframeGroup"!==t&&"pickingGroup"!=t&&"picking"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Ip.prototype,Op);var Lp=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.vertexShader="Mesh.vert",this.fragmentShader="Mesh.frag",this.addAttributes({normal:{type:"v3",value:t.normal}}),void 0===t.normal&&this.geometry.computeVertexNormals()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Ip),Dp=function(e){function t(){e.apply(this,arguments),this.isSurface=!0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Lp);function Fp(e){e.visible=!0}function Np(e){e.visible=!1}var Bp=function(e){this.group=new wn,this.wireframeGroup=new wn,this.pickingGroup=new wn,this.frontMeshes=[],this.backMeshes=[],this.size=e.size,this.side=e.parameters.side,this.visible=e.visible,this.geometry=e.geometry,this.picking=e.picking,this.group=new wn,this.wireframeGroup=new wn,this.pickingGroup=new wn,this.matrix=e.matrix;var t=e,n=new e.constructor({position:new Float32Array(0)});t.makeMaterial(),n.makeMaterial(),n.picking=e.picking,n.geometry=e.geometry,n.wireframeGeometry=e.wireframeGeometry,n.setParameters(e.getParameters()),n.updateShader(),t.setParameters({side:"front"}),n.setParameters({side:"back",opacity:n.parameters.opacity}),this.buffer=e,this.frontBuffer=t,this.backBuffer=n},zp={matrix:{configurable:!0},pickable:{configurable:!0},parameters:{configurable:!0}};zp.matrix.set=function(e){Ip.prototype.setMatrix.call(this,e)},zp.matrix.get=function(){return this.group.matrix.clone()},zp.pickable.get=function(){return!!this.picking&&!this.parameters.disablePicking},zp.parameters.get=function(){return this.buffer.parameters},Bp.prototype.getParameters=function(){var e=Object.assign({},this.buffer.parameters);return e.side=this.side,e},Bp.prototype.getMesh=function(e){var t,n;return e?(n=this.backBuffer.getPickingMesh(),t=this.frontBuffer.getPickingMesh()):(n=this.backBuffer.getMesh(),t=this.frontBuffer.getMesh()),this.frontMeshes.push(t),this.backMeshes.push(n),this.setParameters({side:this.side}),(new wn).add(n,t)},Bp.prototype.getWireframeMesh=function(){return this.buffer.getWireframeMesh()},Bp.prototype.getPickingMesh=function(){return this.getMesh(!0)},Bp.prototype.setAttributes=function(e){this.buffer.setAttributes(e)},Bp.prototype.setParameters=function(e){"front"===(e=Object.assign({},e)).side?(this.frontMeshes.forEach(Fp),this.backMeshes.forEach(Np)):"back"===e.side?(this.frontMeshes.forEach(Np),this.backMeshes.forEach(Fp)):"double"===e.side&&(this.frontMeshes.forEach(Fp),this.backMeshes.forEach(Fp)),void 0!==e.side&&(this.side=e.side),delete e.side,void 0!==e.matrix&&(this.matrix=e.matrix),delete e.matrix,this.frontBuffer.setParameters(e),void 0!==e.wireframe&&(this.wireframe=e.wireframe,this.setVisibility(this.visible)),delete e.wireframe,this.backBuffer.setParameters(e)},Bp.prototype.setVisibility=function(e){this.visible=e,this.parameters.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=e,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=e,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=e))},Bp.prototype.dispose=function(){this.frontBuffer.dispose(),this.backBuffer.dispose()},Bp.prototype.toJSON=function(){var e={};for(var t in this)["side","size","visible","matrix","parameters"].includes(t)&&(e[t]=this[t]);return e},Object.defineProperties(Bp.prototype,zp),vl.add("shader/Line.vert","uniform float clipNear;\nuniform vec3 clipCenter;\nvarying vec3 vViewPosition;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#include color_pars_vertex\nvoid main(){\n#include color_vertex\n#include begin_vertex\n#include project_vertex\nvViewPosition = -mvPosition.xyz;\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}"),vl.add("shader/Line.frag","uniform float opacity;\nuniform float clipNear;\nuniform float clipRadius;\nvarying vec3 vViewPosition;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\ngl_FragColor = vec4( vColor, opacity );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n}");var jp=function(e){function t(){e.apply(this,arguments),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Ip),Hp=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="surface",this.parameters=Object.assign({isolevelType:{type:"select",options:{value:"value",sigma:"sigma"}},isolevel:{type:"number",precision:2,max:1e3,min:-1e3},negateIsolevel:{type:"boolean"},isolevelScroll:{type:"boolean"},smooth:{type:"integer",precision:1,max:10,min:0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},boxSize:{type:"integer",precision:1,max:100,min:0},colorVolume:{type:"hidden"},contour:{type:"boolean",rebuild:!0},useWorker:{type:"boolean",rebuild:!0},wrap:{type:"boolean",rebuild:!0}},this.parameters),t instanceof Ep?(this.surface=void 0,this.volume=t):(this.surface=t,this.volume=void 0),this.boxCenter=new U,this.__boxCenter=new U,this.box=new Z,this.__box=new Z,this._position=new U,this.setBox=function(){this._position.copy(n.translationGroup.position).negate(),this._position.equals(this.boxCenter)||this.setParameters({boxCenter:this._position})},this.toBePrepared=!0,this.viewer.signals.ticked.add(this.setBox,this),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"uniform"),n.colorValue=Sa(n.colorValue,14540253),this.isolevelType=Sa(n.isolevelType,"sigma"),this.isolevel=Sa(n.isolevel,2),this.negateIsolevel=Sa(n.negateIsolevel,!1),this.isolevelScroll=Sa(n.isolevelScroll,!1),this.smooth=Sa(n.smooth,0),this.background=Sa(n.background,!1),this.opaqueBack=Sa(n.opaqueBack,!0),this.boxSize=Sa(n.boxSize,0),this.colorVolume=Sa(n.colorVolume,void 0),this.contour=Sa(n.contour,!1),this.useWorker=Sa(n.useWorker,!0),this.wrap=Sa(n.wrap,!1),e.prototype.init.call(this,n),this.build()},t.prototype.attach=function(e){var t=this;this.bufferList.forEach((function(e){t.viewer.add(e)})),this.setVisibility(this.visible),e()},t.prototype.prepare=function(e){var t,n=this;if(this.volume)if(t="sigma"===this.isolevelType?this.volume.getValueForSigma(this.isolevel):this.isolevel,this.negateIsolevel&&(t*=-1),!this.surface||this.__isolevel!==t||this.__smooth!==this.smooth||this.__contour!==this.contour||this.__wrap!==this.wrap||this.__boxSize!==this.boxSize||this.boxSize>0&&!this.__boxCenter.equals(this.boxCenter)){this.__isolevel=t,this.__smooth=this.smooth,this.__contour=this.contour,this.__wrap=this.wrap,this.__boxSize=this.boxSize,this.__boxCenter.copy(this.boxCenter),this.__box.copy(this.box);var r=function(t){n.surface=t,e()};this.useWorker?this.volume.getSurfaceWorker(t,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap,r):r(this.volume.getSurface(t,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap))}else e();else e()},t.prototype.create=function(){var e,t={position:this.surface.getPosition(),color:this.surface.getColor(this.getColorParams()),index:this.surface.getIndex()};if(this.contour)e=new jp(t,this.getBufferParams({wireframe:!1}));else{Object.assign(t,{normal:this.surface.getNormal(),picking:this.surface.getPicking()});var n=new Dp(t,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1}));e=new Bp(n)}this.bufferList.push(e)},t.prototype.update=function(e){if(0!==this.bufferList.length){var t={};(e=e||{}).position&&(t.position=this.surface.getPosition()),e.color&&(t.color=this.surface.getColor(this.getColorParams())),e.index&&(t.index=this.surface.getIndex()),e.normal&&(t.normal=this.surface.getNormal()),this.bufferList.forEach((function(e){e.setAttributes(t)}))}},t.prototype.setParameters=function(t,n,r){return t&&void 0!==t.isolevelType&&this.volume&&("value"===this.isolevelType&&"sigma"===t.isolevelType?this.isolevel=this.volume.getSigmaForValue(this.isolevel):"sigma"===this.isolevelType&&"value"===t.isolevelType&&(this.isolevel=this.volume.getValueForSigma(this.isolevel)),this.isolevelType=t.isolevelType),t&&t.boxCenter&&(this.boxCenter.copy(t.boxCenter),delete t.boxCenter),t&&t.wireframe&&(t.contour||void 0===t.contour&&this.contour)&&(t.wireframe=!1),e.prototype.setParameters.call(this,t,n,r),this.volume&&this.volume.getBox(this.boxCenter,this.boxSize,this.box),t&&void 0!==t.colorVolume&&n&&(n.color=!0),this.surface&&(void 0!==t.isolevel||void 0!==t.negateIsolevel||void 0!==t.smooth||void 0!==t.wrap||void 0!==t.boxSize||this.boxSize>0&&!this.__box.equals(this.box))&&this.build({position:!0,color:!0,index:!0,normal:!this.contour}),this},t.prototype.getColorParams=function(){var t=e.prototype.getColorParams.call(this);return t.volume=this.colorVolume,t},t.prototype.dispose=function(){this.viewer.signals.ticked.remove(this.setBox,this),e.prototype.dispose.call(this)},t}(kc),Up=function(){};Up.zoomScroll=function(e,t){e.trackballControls.zoom(t)},Up.clipNearScroll=function(e,t){var n=e.getParameters();e.setParameters({clipNear:n.clipNear+t/10})},Up.focusScroll=function(e,t){var n=2*e.getParameters().clipNear,r=Math.sign(t)*function(e,t,n){if(e>t)return e;var r=e/t;return((2*n-t)*r+(2*t-3*n))*r*r+n}((100-n)/10,5,.2);e.setFocus(n+r)},Up.zoomFocusScroll=function(e,t){e.trackballControls.zoom(t);var n=e.viewer.camera.position.z;e.setFocus(100-Math.abs(n/8))},Up.isolevelScroll=function(e,t){var n=Math.sign(t)/10;e.eachRepresentation((function(e,t){if(e.repr instanceof Hp){var r=e.getParameters();r.isolevelScroll&&e.setParameters({isolevel:r.isolevel+n})}}))},Up.panDrag=function(e,t,n){e.trackballControls.pan(t,n)},Up.rotateDrag=function(e,t,n){e.trackballControls.rotate(t,n)},Up.zRotateDrag=function(e,t,n){e.trackballControls.zRotate(t,n)},Up.zoomDrag=function(e,t,n){e.trackballControls.zoom((t+n)/-2)},Up.zoomFocusDrag=function(e,t,n){e.trackballControls.zoom((t+n)/-2);var r=e.viewer.camera.position.z;e.setFocus(100-Math.abs(r/8))},Up.panComponentDrag=function(e,t,n){e.trackballControls.panComponent(t,n)},Up.panAtomDrag=function(e,t,n){e.trackballControls.panAtom(t,n)},Up.rotateComponentDrag=function(e,t,n){e.trackballControls.rotateComponent(t,n)},Up.movePick=function(e,t){t&&e.animationControls.move(t.position.clone())},Up.tooltipPick=function(e,t){var n=e.tooltip;if(e.getParameters().tooltip&&t){var r=t.mouse.position;n.innerText=t.getLabel(),n.style.bottom=window.innerHeight-r.y+3+"px",n.style.left=r.x+3+"px",n.style.display="block"}else n.style.display="none"},Up.measurePick=function(e,t){if(t&&(t.atom||t.bond)){var n=t.atom||t.closestBondAtom;t.component.measurePick(n)}else e.measureClear()};var Vp={default:[["scroll",Up.zoomScroll],["scroll-shift",Up.focusScroll],["scroll-ctrl",Up.isolevelScroll],["scroll-shift-ctrl",Up.zoomFocusScroll],["drag-left",Up.rotateDrag],["drag-right",Up.panDrag],["drag-ctrl-left",Up.panDrag],["drag-ctrl-right",Up.zRotateDrag],["drag-shift-left",Up.zoomDrag],["drag-middle",Up.zoomFocusDrag],["drag-ctrl-shift-right",Up.panComponentDrag],["drag-ctrl-shift-left",Up.rotateComponentDrag],["clickPick-right",Up.measurePick],["clickPick-ctrl-left",Up.measurePick],["clickPick-middle",Up.movePick],["clickPick-left",Up.movePick],["hoverPick",Up.tooltipPick]],pymol:[["drag-left",Up.rotateDrag],["drag-middle",Up.panDrag],["drag-right",Up.zoomDrag],["drag-shift-right",Up.focusScroll],["clickPick-ctrl+shift-middle",Up.movePick],["hoverPick",Up.tooltipPick]],coot:[["scroll",Up.isolevelScroll],["drag-left",Up.rotateDrag],["drag-middle",Up.panDrag],["drag-ctrl-left",Up.panDrag],["drag-right",Up.zoomFocusDrag],["drag-ctrl-right",Up.focusScroll],["clickPick-middle",Up.movePick],["hoverPick",Up.tooltipPick]],astexviewer:[["drag-left",Up.rotateDrag],["drag-ctrl-left",Up.panDrag],["drag-shift-left",Up.zoomDrag],["scroll",Up.focusScroll],["clickPick-middle",Up.movePick],["hoverPick",Up.tooltipPick]]};function Gp(e){var t=e.split(/[-+]/),n="";t.includes("scroll")&&(n="scroll"),t.includes("drag")&&(n="drag"),t.includes("click")&&(n="click"),t.includes("doubleClick")&&(n="doubleClick"),t.includes("hover")&&(n="hover"),t.includes("clickPick")&&(n="clickPick"),t.includes("hoverPick")&&(n="hoverPick");var r=0;t.includes("alt")&&(r+=1),t.includes("ctrl")&&(r+=2),t.includes("meta")&&(r+=4),t.includes("shift")&&(r+=8);var i=0;return t.includes("left")&&(i+=1),t.includes("right")&&(i+=2),t.includes("middle")&&(i+=4),[n,r,i]}var Wp=function(e,t){void 0===t&&(t={}),this.stage=e,this.actionList=[],this.mouse=e.mouseObserver,this.disabled=t.disabled||!1,this.preset(t.preset||"default")};Wp.prototype.run=function(e){for(var t=this,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];if(!this.disabled){var i=this.mouse.key||0,o=this.mouse.buttons||0;this.actionList.forEach((function(r){r.type===e&&r.key===i&&r.button===o&&r.callback.apply(r,[t.stage].concat(n))}))}},Wp.prototype.add=function(e,t){var n=Gp(e),r=n[0],i=n[1],o=n[2];this.actionList.push({type:r,key:i,button:o,callback:t})},Wp.prototype.remove=function(e,t){var n=e.includes("*"),r=Gp(e),i=r[0],o=r[1],a=r[2],s=this.actionList.filter((function(e){return!((e.type===i||n&&""===i)&&(e.key===o||n&&0===o)&&(e.button===a||n&&0===a)&&(e.callback===t||void 0===t))}));this.actionList=s},Wp.prototype.preset=function(e){var t=this;this.clear(),(Vp[e]||[]).forEach((function(e){return t.add(e[0],e[1])}))},Wp.prototype.clear=function(){this.actionList.length=0};var $p=function(){};$p.autoView=function(e){e.autoView(1e3)},$p.toggleAnimations=function(e){e.animationControls.toggle()},$p.toggleRock=function(e){e.toggleRock()},$p.toggleSpin=function(e){e.toggleSpin()},$p.toggleAntialiasing=function(e){var t=e.getParameters();e.setParameters({sampleLevel:-1===t.sampleLevel?0:-1})};var qp={default:[["i",$p.toggleSpin],["k",$p.toggleRock],["p",$p.toggleAnimations],["a",$p.toggleAntialiasing],["r",$p.autoView]]},Xp=function(e,t){void 0===t&&(t={}),this.stage=e,this.actionList=[],this.disabled=t.disabled||!1,this.preset(t.preset||"default")};Xp.prototype.run=function(e){var t=this;this.disabled||this.actionList.forEach((function(n){n.key===e&&n.callback(t.stage)}))},Xp.prototype.add=function(e,t){this.actionList.push({key:e,callback:t})},Xp.prototype.remove=function(e,t){var n=this.actionList.filter((function(n){return!(n.key===e&&(n.callback===t||void 0===t))}));this.actionList=n},Xp.prototype.preset=function(e){var t=this;this.clear(),(qp[e]||[]).forEach((function(e){return t.add(e[0],e[1])}))},Xp.prototype.clear=function(){this.actionList.length=0};var Kp=function(e){this.stage=e,this.stage=e,this.mouse=e.mouseObserver,this.controls=e.mouseControls,this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this)};Kp.prototype._onClick=function(e,t){var n=this.stage.pickingControls.pick(e,t);this.stage.signals.clicked.dispatch(n),this.controls.run("clickPick",n)},Kp.prototype._onHover=function(e,t){var n=this.stage.pickingControls.pick(e,t);n&&this.mouse.down.equals(this.mouse.position)&&(this.stage.transformComponent=n.component,this.stage.transformAtom=n.atom),this.stage.signals.hovered.dispatch(n),this.controls.run("hoverPick",n)},Kp.prototype.dispose=function(){this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)};var Yp=function(e){this.stage=e,this.stage=e,this.mouse=e.mouseObserver,this.controls=e.mouseControls,this.mouse.signals.moved.add(this._onMove,this),this.mouse.signals.scrolled.add(this._onScroll,this),this.mouse.signals.dragged.add(this._onDrag,this),this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this),this.mouse.signals.doubleClicked.add(this._onDblclick,this)};Yp.prototype._onMove=function(){this.stage.tooltip.style.display="none"},Yp.prototype._onScroll=function(e){this.controls.run("scroll",e)},Yp.prototype._onDrag=function(e,t){this.controls.run("drag",e,t)},Yp.prototype._onClick=function(e,t){this.controls.run("click",e,t)},Yp.prototype._onDblclick=function(e,t){this.controls.run("doubleClick",e,t)},Yp.prototype._onHover=function(e,t){this.controls.run("hover",e,t)},Yp.prototype.dispose=function(){this.mouse.signals.moved.remove(this._onMove,this),this.mouse.signals.scrolled.remove(this._onScroll,this),this.mouse.signals.dragged.remove(this._onDrag,this),this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)};var Zp=function(e){this.stage=e,this.viewer=e.viewer,this.animationControls=e.animationControls,this.viewer.signals.ticked.add(this._onTick,this)};Zp.prototype._onTick=function(e){this.animationControls.run(e)},Zp.prototype.dispose=function(){this.viewer.signals.ticked.remove(this._onTick,this)};var Qp=!!Qs&&{passive:!0},Jp=function(e){this.stage=e,this.stage=e,this.controls=e.keyControls,this.domElement=e.viewer.renderer.domElement,this.domElement.setAttribute("tabIndex","-1"),this.domElement.style.outline="none",this._focusDomElement=this._focusDomElement.bind(this),this._onKeydown=this._onKeydown.bind(this),this._onKeyup=this._onKeyup.bind(this),this._onKeypress=this._onKeypress.bind(this),this.domElement.addEventListener("mousedown",this._focusDomElement),this.domElement.addEventListener("touchstart",this._focusDomElement,Qp),this.domElement.addEventListener("keydown",this._onKeydown),this.domElement.addEventListener("keyup",this._onKeyup),this.domElement.addEventListener("keypress",this._onKeypress)};Jp.prototype._onKeydown=function(){},Jp.prototype._onKeyup=function(){},Jp.prototype._onKeypress=function(e){var t;t="key"in KeyboardEvent.prototype?e.key:String.fromCharCode(e.which||e.keyCode),this.controls.run(t)},Jp.prototype._focusDomElement=function(){this.domElement.focus()},Jp.prototype.dispose=function(){this.domElement.removeEventListener("mousedown",this._focusDomElement),this.domElement.removeEventListener("touchstart",this._focusDomElement,Qp),this.domElement.removeEventListener("keydown",this._onKeypress),this.domElement.removeEventListener("keyup",this._onKeypress),this.domElement.removeEventListener("keypress",this._onKeypress)};var eh=function(e,t,n,r){void 0===r&&(r={}),this.component=e,this.position=t,this.offsetX=Sa(r.offsetX,0),this.offsetY=Sa(r.offsetY,0),this.visible=Sa(r.visible,!0),this.stage=e.stage,this.viewer=e.stage.viewer,this._viewerPosition=new U,this._updateViewerPosition(),this._canvasPosition=new z,this._cameraPosition=new U,this.element=document.createElement("div"),Object.assign(this.element.style,{display:"block",position:"absolute",pointerEvents:"none",whiteSpace:"nowrap",left:"-10000px"}),this.viewer.wrapper.appendChild(this.element),this.setContent(n),this.updateVisibility(),this.viewer.signals.rendered.add(this._update,this),this.component.signals.matrixChanged.add(this._updateViewerPosition,this)};eh.prototype.setContent=function(e){var t=this.element.style.display;if("none"===t&&(this.element.style.left="-10000px",this.element.style.display="block"),e instanceof HTMLElement)this.element.appendChild(e);else{var n=document.createElement("div");n.innerText=e,Object.assign(n.style,{backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),this.element.appendChild(n)}this._clientRect=this.element.getBoundingClientRect(),"none"===t&&(this.element.style.display=t)},eh.prototype.setVisibility=function(e){this.visible=e,this.updateVisibility()},eh.prototype.getVisibility=function(){return this.visible&&this.component.parameters.visible},eh.prototype.updateVisibility=function(){this.element.style.display=this.getVisibility()?"block":"none"},eh.prototype._updateViewerPosition=function(){this._viewerPosition.copy(this.position).applyMatrix4(this.component.matrix)},eh.prototype._update=function(){if(this.getVisibility()){var e=this.element.style,t=this._canvasPosition,n=this._viewerPosition,r=this._clientRect;if(this._cameraPosition.copy(n).add(this.viewer.translationGroup.position).applyMatrix4(this.viewer.rotationGroup.matrix).sub(this.viewer.camera.position),this._cameraPosition.z<0)e.display="none";else{e.display="block";var i=this._cameraPosition.length(),o=this.viewer.scene.fog;e.opacity=(1-ns(o.near,o.far,i)).toString(),e.zIndex=Math.round(100*(o.far-i)).toString(),this.stage.viewerControls.getPositionOnCanvas(n,t),e.bottom=this.offsetX+t.y+r.height/2+"px",e.left=this.offsetY+t.x-r.width/2+"px"}}},eh.prototype.dispose=function(){this.viewer.wrapper.removeChild(this.element),this.viewer.signals.ticked.remove(this._update,this),this.component.signals.matrixChanged.remove(this._updateViewerPosition,this)};var th=new j,nh=new U,rh=new H,ih=function(e){this.component=e,this.signals={changed:new fs},this.stage=e.stage,this.viewer=e.stage.viewer},oh={position:{configurable:!0},rotation:{configurable:!0}};oh.position.get=function(){return this.component.position},oh.rotation.get=function(){return this.component.quaternion},ih.prototype.changed=function(){this.component.updateMatrix(),this.viewer.requestRender(),this.signals.changed.dispatch()},ih.prototype.spin=function(e,t){th.getInverse(this.viewer.rotationGroup.matrix),nh.copy(Ha(e)).applyMatrix4(th),th.extractRotation(this.component.transform),th.premultiply(this.viewer.rotationGroup.matrix),th.getInverse(th),nh.copy(Ha(e)),nh.applyMatrix4(th),th.makeRotationAxis(nh,t),rh.setFromRotationMatrix(th),this.component.quaternion.premultiply(rh),this.changed()},Object.defineProperties(ih.prototype,oh);var ah={"":"",vdw:"by vdW radius",covalent:"by covalent radius",sstruc:"by secondary structure",bfactor:"by bfactor",size:"size",data:"data",explicit:"explicit"},sh=function(e){void 0===e&&(e={}),this.max=10,this.type=Sa(e.type,"size"),this.scale=Sa(e.scale,1),this.size=Sa(e.size,1),this.data=Sa(e.data,{})};sh.prototype.atomRadius=function(e){var t;switch(this.type){case"vdw":t=e.vdw;break;case"covalent":t=e.covalent;break;case"bfactor":t=e.bfactor||1;break;case"sstruc":var n=e.sstruc;t="h"===n||"g"===n||"i"===n||"e"===n||"b"===n?.25:Kd.includes(e.atomname)?.4:.1;break;case"data":t=Sa(this.data[e.index],1);break;case"explicit":null===(t=e.radius)&&(t=this.size);break;default:t=this.size}return Math.min(t*this.scale,this.max)},sh.types=ah;var lh=new U(-1,-1,-1),uh=new j,ch=function(e){var t=e.rows,n=t/3,r=new tp(t,3),i=new tp(3,3),o=new tp(1,3),a=new tp(3,3),s=new tp(3,3),l=op(e);ap(e,l),np(r,e),rp(i,r,r),up(i,o,a,s);var u=new U(l[0],l[1],l[2]),c=new U(a.data[0],a.data[3],a.data[6]),d=new U(a.data[1],a.data[4],a.data[7]),f=new U(a.data[2],a.data[5],a.data[8]),p=c.clone().multiplyScalar(Math.sqrt(o.data[0]/n)),h=d.clone().multiplyScalar(Math.sqrt(o.data[1]/n)),m=f.clone().multiplyScalar(Math.sqrt(o.data[2]/n));this.begA=u.clone().sub(p),this.endA=u.clone().add(p),this.begB=u.clone().sub(h),this.endB=u.clone().add(h),this.begC=u.clone().sub(m),this.endC=u.clone().add(m),this.center=u,this.vecA=p,this.vecB=h,this.vecC=m,this.normVecA=c,this.normVecB=d,this.normVecC=f};ch.prototype.getBasisMatrix=function(e){void 0===e&&(e=new j);var t=e;return t.makeBasis(this.normVecB,this.normVecA,this.normVecC),t.determinant()<0&&t.scale(lh),t},ch.prototype.getRotationQuaternion=function(e){void 0===e&&(e=new H);var t=e;return t.setFromRotationMatrix(this.getBasisMatrix(uh)),t.inverse()},ch.prototype.getProjectedScaleForAtoms=function(e){var t=-1/0,n=-1/0,r=-1/0,i=-1/0,o=-1/0,a=-1/0,s=new U,l=new U,u=this.center,c=this.normVecA,d=this.normVecB,f=this.normVecC;return e.eachAtom((function(e){Tc(s.copy(e),c,u);var p=l.subVectors(s,u).normalize().dot(c),h=s.distanceTo(u);p>0?h>t&&(t=h):h>n&&(n=h),Tc(s.copy(e),d,u);var m=l.subVectors(s,u).normalize().dot(d),g=s.distanceTo(u);m>0?g>r&&(r=g):g>i&&(i=g),Tc(s.copy(e),f,u);var v=l.subVectors(s,u).normalize().dot(f),y=s.distanceTo(u);v>0?y>o&&(o=y):y>a&&(a=y)})),{d1a:t,d2a:r,d3a:o,d1b:-n,d2b:-i,d3b:-a}};var dh=function(e,t,n,r){this.volume=e,this.setFilter(t,n,r)},fh={header:{configurable:!0},matrix:{configurable:!0},normalMatrix:{configurable:!0},inverseMatrix:{configurable:!0},center:{configurable:!0},boundingBox:{configurable:!0},min:{configurable:!0},max:{configurable:!0},mean:{configurable:!0},rms:{configurable:!0}};fh.header.get=function(){return this.volume.header},fh.matrix.get=function(){return this.volume.matrix},fh.normalMatrix.get=function(){return this.volume.normalMatrix},fh.inverseMatrix.get=function(){return this.volume.inverseMatrix},fh.center.get=function(){return this.volume.center},fh.boundingBox.get=function(){return this.volume.boundingBox},fh.min.get=function(){return this.volume.min},fh.max.get=function(){return this.volume.max},fh.mean.get=function(){return this.volume.mean},fh.rms.get=function(){return this.volume.rms},dh.prototype._getFilterHash=function(e,t,n){return JSON.stringify([e,t,n])},dh.prototype.setFilter=function(e,t,n){isNaN(e)&&this.header&&(e=this.header.DMEAN+2*this.header.ARMS),e=void 0===e||isNaN(e)?-1/0:e,t=Sa(t,1/0),n=Sa(n,!1);var r=this.volume.data,i=this.volume.position,o=this.volume.atomindex,a=this._getFilterHash(e,t,n);if(a!==this._filterHash){if(e===-1/0&&t===1/0)this.data=r,this.position=i,this.atomindex=o;else{var s=r.length;this._dataBuffer||(this._dataBuffer=new ArrayBuffer(4*s),this._positionBuffer=new ArrayBuffer(3*s*4),o&&(this._atomindexBuffer=new ArrayBuffer(4*s)));var l,u=new Float32Array(this._dataBuffer),c=new Float32Array(this._positionBuffer);o&&(l=new Uint32Array(this._atomindexBuffer));for(var d=0,f=0;f<s;++f){var p=3*f,h=r[f];if(!n&&h>=e&&h<=t||n&&(h<e||h>t)){var m=3*d;u[d]=h,c[m+0]=i[p+0],c[m+1]=i[p+1],c[m+2]=i[p+2],o&&l&&(l[d]=o[f]),d+=1}}this.data=new Float32Array(this._dataBuffer,0,d),this.position=new Float32Array(this._positionBuffer,0,3*d),o&&(this.atomindex=new Int32Array(this._atomindexBuffer,0,d))}this._filterHash=a}},Object.defineProperties(dh.prototype,fh),dh.prototype.getValueForSigma=Ep.prototype.getValueForSigma,dh.prototype.getSigmaForValue=Ep.prototype.getSigmaForValue,dh.prototype.getDataAtomindex=Ep.prototype.getDataAtomindex,dh.prototype.getDataPosition=Ep.prototype.getDataPosition,dh.prototype.getDataColor=Ep.prototype.getDataColor,dh.prototype.getDataPicking=Ep.prototype.getDataPicking,dh.prototype.getDataSize=Ep.prototype.getDataSize;var ph=function(e,t){var n=xd({nodeArray1:e.atomIndex1,nodeArray2:e.atomIndex2,edgeCount:e.count,nodeCount:t});this.countArray=n.countArray,this.offsetArray=n.offsetArray,this.indexArray=n.indexArray},hh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["atomIndex1",1,"int32"],["atomIndex2",1,"int32"],["bondOrder",1,"int8"]]},t.prototype.addBond=function(e,t,n){this.growIfFull();var r=this.count,i=e.index,o=t.index;i<o?(this.atomIndex1[r]=i,this.atomIndex2[r]=o):(this.atomIndex2[r]=i,this.atomIndex1[r]=o),n&&(this.bondOrder[r]=n),this.count+=1},t.prototype.addBondIfConnected=function(e,t,n){return!!e.connectedTo(t)&&(this.addBond(e,t,n),!0)},Object.defineProperties(t.prototype,n),t}(gd),mh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["residueIndex",1,"uint32"],["atomTypeId",1,"uint16"],["x",1,"float32"],["y",1,"float32"],["z",1,"float32"],["serial",1,"int32"],["bfactor",1,"float32"],["altloc",1,"uint8"],["occupancy",1,"float32"]]},t.prototype.setAltloc=function(e,t){this.altloc[e]=t.charCodeAt(0)},t.prototype.getAltloc=function(e){var t=this.altloc[e];return t?String.fromCharCode(t):""},Object.defineProperties(t.prototype,n),t}(gd),gh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["chainIndex",1,"uint32"],["atomOffset",1,"uint32"],["atomCount",1,"uint16"],["residueTypeId",1,"uint16"],["resno",1,"int32"],["sstruc",1,"uint8"],["inscode",1,"uint8"]]},t.prototype.setSstruc=function(e,t){this.sstruc[e]=t.charCodeAt(0)},t.prototype.getSstruc=function(e){var t=this.sstruc[e];return t?String.fromCharCode(t):""},t.prototype.setInscode=function(e,t){this.inscode[e]=t.charCodeAt(0)},t.prototype.getInscode=function(e){var t=this.inscode[e];return t?String.fromCharCode(t):""},Object.defineProperties(t.prototype,n),t}(gd),vh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["entityIndex",1,"uint16"],["modelIndex",1,"uint16"],["residueOffset",1,"uint32"],["residueCount",1,"uint32"],["chainname",4,"uint8"],["chainid",4,"uint8"]]},t.prototype.setChainname=function(e,t){var n=4*e;this.chainname[n]=t.charCodeAt(0),this.chainname[n+1]=t.charCodeAt(1),this.chainname[n+2]=t.charCodeAt(2),this.chainname[n+3]=t.charCodeAt(3)},t.prototype.getChainname=function(e){for(var t="",n=0;n<4;++n){var r=this.chainname[4*e+n];if(!r)break;t+=String.fromCharCode(r)}return t},t.prototype.setChainid=function(e,t){var n=4*e;this.chainid[n]=t.charCodeAt(0),this.chainid[n+1]=t.charCodeAt(1),this.chainid[n+2]=t.charCodeAt(2),this.chainid[n+3]=t.charCodeAt(3)},t.prototype.getChainid=function(e){for(var t="",n=0;n<4;++n){var r=this.chainid[4*e+n];if(!r)break;t+=String.fromCharCode(r)}return t},Object.defineProperties(t.prototype,n),t}(gd),yh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["chainOffset",1,"uint32"],["chainCount",1,"uint32"]]},Object.defineProperties(t.prototype,n),t}(gd),bh=function(e){this.polymer=e,this.size=e.residueCount};bh.prototype.getCenterIterator=function(e){void 0===e&&(e=0);var t=this.getPosition().center,n=t.length/3,r=0,i=-1,o=[new U,new U,new U,new U];return{size:n,next:function(){var e=this.get(i);return i+=1,e},get:function(i){i=Math.min(n-1,Math.max(0,i));var a=o[r%4],s=3*i;if(a.fromArray(t,s),e){for(var l=Math.min(e,i,n-i-1),u=1;u<=l;++u){var c=3*u,d=(l+1-u)/(l+1);a.x+=d*t[s-c+0]+d*t[s+c+0],a.y+=d*t[s-c+1]+d*t[s+c+1],a.z+=d*t[s-c+2]+d*t[s+c+2]}a.x/=l+1,a.y/=l+1,a.z/=l+1}return r+=1,a},reset:function(){r=0,i=-1}}},bh.prototype.getColor=function(e){var t=this.polymer,n=t.structure,r=t.residueCount,i=t.residueIndexStart,o=new Float32Array(3*r),a=e||{};a.structure=n;for(var s=pl.getScheme(a),l=n.getResidueProxy(),u=n.getAtomProxy(),c=0;c<r;++c)l.index=i+c,u.index=l.traceAtomIndex,s.atomColorToArray(u,o,3*c);return{color:o}},bh.prototype.getPicking=function(){for(var e=this.polymer,t=e.structure,n=e.residueCount,r=e.residueIndexStart,i=new Float32Array(n),o=t.getResidueProxy(),a=0;a<n;++a)o.index=r+a,i[a]=o.traceAtomIndex;return{picking:new Tf(i,t)}},bh.prototype.getSize=function(e){for(var t=this.polymer,n=t.structure,r=t.residueCount,i=t.residueIndexStart,o=new Float32Array(r),a=new sh(e),s=n.getResidueProxy(),l=n.getAtomProxy(),u=0;u<r;++u)s.index=i+u,l.index=s.traceAtomIndex,o[u]=a.atomRadius(l);return{size:o}},bh.prototype.getPosition=function(){for(var e=this.polymer,t=e.structure,n=e.residueCount,r=n-3,i=new Float32Array(3*n),o=new Float32Array(3*n),a=new Float32Array(n),s=new Float32Array(n),l=new Float32Array(n),u=new Float32Array(n),c=new Float32Array(3*n),d=new U,f=new U,p=new U,h=new U,m=new U,g=new U,v=new U,y=new U,b=new U,x=new U,w=new U,_=new U(0,0,0),S="trace",C=t.getAtomProxy(),E=t.getAtomProxy(e.getAtomIndexByType(0,S)),k=t.getAtomProxy(e.getAtomIndexByType(1,S)),P=t.getAtomProxy(e.getAtomIndexByType(2,S)),M=0;M<r;++M){C.index=E.index,E.index=k.index,k.index=P.index,P.index=e.getAtomIndexByType(M+3,S);var A=3*M;d.subVectors(E,C),f.subVectors(k,E),p.subVectors(P,k),h.subVectors(d,f),m.subVectors(f,p),b.crossVectors(h,m).normalize(),b.toArray(o,A),M>0&&(a[M]=b.angleTo(x));var T=Math.cos(h.angleTo(m));u[M]=180/Math.PI*Math.acos(T);var R=h.length(),I=m.length();s[M]=Math.sqrt(I*R)/Math.max(2,2*(1-T)),l[M]=Math.abs(f.dot(b)),g.copy(h).multiplyScalar(s[M]/R),v.copy(m).multiplyScalar(s[M]/I),g.subVectors(E,g),v.subVectors(k,v),g.toArray(i,A+3),v.toArray(i,A+6),w.subVectors(C,_),w.toArray(c,A),x.copy(b),_.copy(g)}g.fromArray(i,3),v.fromArray(i,6),b.subVectors(g,v).normalize(),C.index=e.getAtomIndexByType(0,S),_.copy(C),y.copy(C),Tc(y,b,g),y.toArray(i,0),w.subVectors(_,g),w.toArray(c,0),g.fromArray(i,3*n-6),v.fromArray(i,3*n-9),b.subVectors(g,v).normalize(),C.index=e.getAtomIndexByType(n-1,S),_.copy(C),y.copy(C),Tc(y,b,g),y.toArray(i,3*n-3);for(var O=n-3;O<n;++O)g.fromArray(i,3*O),C.index=e.getAtomIndexByType(O,S),_.copy(C),w.subVectors(_,g),w.toArray(c,3*O);var L=new Float32Array(n),D=new Float32Array(n),F=new Float32Array(n),N=new Float32Array(n);L[1]=s[0],D[1]=u[0],F[1]=s[0];for(var B=2;B<n-2;++B)L[B]=.5*(s[B-2]+s[B-1]),D[B]=.5*(u[B-2]+u[B-1]),F[B]=.5*(l[B-2]+l[B-1]),g.fromArray(o,3*(B-2)),v.fromArray(o,3*(B-1)),N[B]=180/Math.PI*Math.acos(Math.cos(g.angleTo(v)));L[n-2]=s[n-4],D[n-2]=u[n-4],F[n-2]=l[n-4];var z=new Float32Array(3*n);cu(o,z,0,0,3),cu(o,z,0,3,3);for(var j=2;j<n-2;++j)g.fromArray(o,3*(j-2)),v.fromArray(o,3*(j-1)),b.addVectors(v,g).multiplyScalar(.5).normalize(),b.toArray(z,3*j);return cu(o,z,3*n-12,3*n-6,3),cu(o,z,3*n-12,3*n-3,3),{center:i,axis:z,bending:N,radius:L,rise:F,twist:D,resdir:c}};var xh=function(e){this.polymer=e,this.helixorient=new bh(e),this.position=this.helixorient.getPosition()};xh.prototype.getAxis=function(e,t,n,r,i){e=e||30,t=t||2.5,n=void 0!==n&&n;var o=this.polymer,a=o.structure,s=o.residueCount,l=o.residueIndexStart,u=this.position,c=r||{};c.structure=a;for(var d,f,p=pl.getScheme(c),h=new sh(i),m=0,g=0,v=[],y=[],b=[],x=[],w=[],_=[],S=[],C=[],E=[],k=new Float32Array(3*s),P=new Float32Array(3*s),M=new U,A=new U,T=a.getResidueProxy(),R=a.getResidueProxy(),I=a.getAtomProxy(),O=new U,L=new U,D=!1,F=0;F<s;++F)if(T.index=l+F,O.fromArray(u.center,3*F),F===s-1?D=!0:(R.index=l+F+1,L.fromArray(u.center,3*F+3),(n&&T.sstruc!==R.sstruc||O.distanceTo(L)>t||u.bending[F]>e)&&(D=!0)),D){if(F-m<4){m=F,D=!1;continue}I.index=T.traceAtomIndex,k=u.axis.subarray(3*m+3,3*F),P=u.center.subarray(3*m,3*F+3),d=Ac(k).normalize(),f=Ac(P),M.fromArray(P),Tc(M,d,f),A.fromArray(P,P.length-3),Tc(A,d,f),d.subVectors(A,M),d.toArray(v,g),f.toArray(y,g),M.toArray(b,g),A.toArray(x,g),p.atomColorToArray(I,w,g),_.push(I.index),S.push(h.atomRadius(I)),C.push(l+m),E.push(l+F+1-m),g+=3,m=F,D=!1}var N=new Float32Array(_);return{axis:new Float32Array(v),center:new Float32Array(y),begin:new Float32Array(b),end:new Float32Array(x),color:new Float32Array(w),picking:new Tf(N,a),size:new Float32Array(S),residueOffset:C,residueCount:E}};var wh=function(e){this.scoreFunction=e,this.content=[],this.scoreFunction=e};wh.prototype.push=function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},wh.prototype.pop=function(){var e=this.content[0],t=this.content.pop();return t&&this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},wh.prototype.peek=function(){return this.content[0]},wh.prototype.remove=function(e){for(var t=this,n=this.content.length,r=0;r<n;r++)if(t.content[r]===e){var i=t.content.pop();return void(i&&r!==n-1&&(t.content[r]=i,t.scoreFunction(i)<t.scoreFunction(e)?t.bubbleUp(r):t.sinkDown(r)))}throw new Error("Node not found.")},wh.prototype.size=function(){return this.content.length},wh.prototype.bubbleUp=function(e){for(var t=this,n=this.content[e];e>0;){var r=Math.floor((e+1)/2)-1,i=t.content[r];if(!(t.scoreFunction(n)<t.scoreFunction(i)))break;t.content[r]=n,t.content[e]=i,e=r}},wh.prototype.sinkDown=function(e){for(var t=this,n=this.content.length,r=this.content[e],i=this.scoreFunction(r),o=0;;){var a=2*(e+1),s=a-1,l=null;if(s<n){var u=t.content[s];(o=t.scoreFunction(u))<i&&(l=s)}if(a<n){var c=t.content[a];t.scoreFunction(c)<(null===l?i:o)&&(l=a)}if(null===l)break;t.content[e]=t.content[l],t.content[l]=r,e=l}};var _h=function(e,t){this.points=e,this.metric=t,this.maxDepth=0,this.currentNode=0;for(var n=e.length/3,r=new Uint32Array(n),i=0;i<n;++i)r[i]=i;this.indices=r,this.nodes=new Int32Array(4*n),this.rootIndex=this.buildTree(0,-1,0,n)};_h.prototype.buildTree=function(e,t,n,r){e>this.maxDepth&&(this.maxDepth=e);var i=r-n;if(0===i)return-1;var o=4*this.currentNode,a=this.nodes;if(this.currentNode+=1,1===i)return a[o]=n,a[o+1]=-1,a[o+2]=-1,a[o+3]=t,o;for(var s,l,u,c,d,f=this.indices,p=this.points,h=n+Math.floor(i/2),m=e%3,g=n,v=r-1;v>g;){for(c=p[3*f[u=g+v>>1]+m],l=f[u],f[u]=f[v],f[v]=l,d=g,s=g;s<v;++s)p[3*f[s]+m]<c&&(l=f[d],f[d]=f[s],f[s]=l,++d);if(l=f[v],f[v]=f[d],f[d]=l,h===(u=d))break;h<u?v=u-1:g=u+1}return a[o]=h,a[o+1]=this.buildTree(e+1,o,n,h),a[o+2]=this.buildTree(e+1,o,h+1,r),a[o+3]=t,o},_h.prototype.getNodeDepth=function(e){var t=this.nodes[e+3];return-1===t?0:this.getNodeDepth(t)+1},_h.prototype.nearest=function(e,t,n){var r=this,i=new wh((function(e){return-e[1]})),o=this.nodes,a=this.points,s=this.indices;!function l(u){var c,d,f=r.getNodeDepth(u)%3,p=3*s[o[u]],h=[a[p+0],a[p+1],a[p+2]],m=r.metric(e,h);function g(e,n){i.push([e,n]),i.size()>t&&i.pop()}var v=o[u+1],y=o[u+2];if(-1!==y||-1!==v){l(c=-1===y?v:-1===v?y:e[f]<=a[p+f]?v:y),(i.size()<t||m<i.peek()[1])&&m<=n&&g(u,m);for(var b=[],x=0;x<3;x+=1)b[x]=x===f?e[x]:a[p+x];var w=r.metric(b,h);(i.size()<t||Math.abs(w)<i.peek()[1])&&Math.abs(w)<=n&&-1!==(d=c===v?y:v)&&l(d)}else(i.size()<t||m<i.peek()[1])&&m<=n&&g(u,m)}(this.rootIndex);for(var l=[],u=0,c=Math.min(i.size(),t);u<c;u+=1)l.push(i.content[u]);return l},_h.prototype.verify=function(e,t){void 0===t&&(t=0);var n=1;if(void 0===e&&(e=this.rootIndex),-1===e)throw new Error("node is null");var r=t%3,i=this.nodes,o=this.points,a=this.indices,s=i[e+1],l=i[e+2];if(-1!==s){if(o[3*a[i[s]]+r]>o[3*a[i[e]]+r])throw new Error("left child is > parent!");n+=this.verify(s,t+1)}if(-1!==l){if(o[3*a[i[l]]+r]<o[3*a[i[e]]+r])throw new Error("right child is < parent!");n+=this.verify(l,t+1)}return n};var Sh=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueMap=e.residueMap,this.atomMap=e.atomMap},Ch={bondHash:{configurable:!0},entity:{configurable:!0},entityIndex:{configurable:!0},modelIndex:{configurable:!0},chainIndex:{configurable:!0},residue:{configurable:!0},residueIndex:{configurable:!0},sstruc:{configurable:!0},inscode:{configurable:!0},resno:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0},residueType:{configurable:!0},atomType:{configurable:!0},residueAtomOffset:{configurable:!0},resname:{configurable:!0},hetero:{configurable:!0},atomname:{configurable:!0},number:{configurable:!0},element:{configurable:!0},vdw:{configurable:!0},covalent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},z:{configurable:!0},serial:{configurable:!0},bfactor:{configurable:!0},occupancy:{configurable:!0},altloc:{configurable:!0},partialCharge:{configurable:!0},radius:{configurable:!0},formalCharge:{configurable:!0},aromatic:{configurable:!0},bondCount:{configurable:!0}};function Eh(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function kh(e,t){return Math.sqrt(Eh(e,t))}Ch.bondHash.get=function(){return this.structure.bondHash},Ch.entity.get=function(){return this.structure.entityList[this.entityIndex]},Ch.entityIndex.get=function(){return this.chainStore.entityIndex[this.chainIndex]},Ch.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},Ch.chainIndex.get=function(){return this.residueStore.chainIndex[this.residueIndex]},Ch.residue.get=function(){return console.warn("residue - might be expensive"),this.structure.getResidueProxy(this.residueIndex)},Ch.residueIndex.get=function(){return this.atomStore.residueIndex[this.index]},Ch.residueIndex.set=function(e){this.atomStore.residueIndex[this.index]=e},Ch.sstruc.get=function(){return this.residueStore.getSstruc(this.residueIndex)},Ch.inscode.get=function(){return this.residueStore.getInscode(this.residueIndex)},Ch.resno.get=function(){return this.residueStore.resno[this.residueIndex]},Ch.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},Ch.chainid.get=function(){return this.chainStore.getChainid(this.chainIndex)},Ch.residueType.get=function(){return this.residueMap.get(this.residueStore.residueTypeId[this.residueIndex])},Ch.atomType.get=function(){return this.atomMap.get(this.atomStore.atomTypeId[this.index])},Ch.residueAtomOffset.get=function(){return this.residueStore.atomOffset[this.residueIndex]},Ch.resname.get=function(){return this.residueType.resname},Ch.hetero.get=function(){return this.residueType.hetero},Ch.atomname.get=function(){return this.atomType.atomname},Ch.number.get=function(){return this.atomType.number},Ch.element.get=function(){return this.atomType.element},Ch.vdw.get=function(){return this.atomType.vdw},Ch.covalent.get=function(){return this.atomType.covalent},Ch.x.get=function(){return this.atomStore.x[this.index]},Ch.x.set=function(e){this.atomStore.x[this.index]=e},Ch.y.get=function(){return this.atomStore.y[this.index]},Ch.y.set=function(e){this.atomStore.y[this.index]=e},Ch.z.get=function(){return this.atomStore.z[this.index]},Ch.z.set=function(e){this.atomStore.z[this.index]=e},Ch.serial.get=function(){return this.atomStore.serial[this.index]},Ch.serial.set=function(e){this.atomStore.serial[this.index]=e},Ch.bfactor.get=function(){return this.atomStore.bfactor[this.index]},Ch.bfactor.set=function(e){this.atomStore.bfactor[this.index]=e},Ch.occupancy.get=function(){return this.atomStore.occupancy[this.index]},Ch.occupancy.set=function(e){this.atomStore.occupancy[this.index]=e},Ch.altloc.get=function(){return this.atomStore.getAltloc(this.index)},Ch.altloc.set=function(e){this.atomStore.setAltloc(this.index,e)},Ch.partialCharge.get=function(){return this.atomStore.partialCharge?this.atomStore.partialCharge[this.index]:null},Ch.partialCharge.set=function(e){this.atomStore.partialCharge&&(this.atomStore.partialCharge[this.index]=e)},Ch.radius.get=function(){return this.atomStore.radius?this.atomStore.radius[this.index]:null},Ch.radius.set=function(e){this.atomStore.radius&&(this.atomStore.radius[this.index]=e)},Ch.formalCharge.get=function(){return this.atomStore.formalCharge?this.atomStore.formalCharge[this.index]:null},Ch.formalCharge.set=function(e){this.atomStore.formalCharge&&(this.atomStore.formalCharge[this.index]=e)},Ch.aromatic.get=function(){return this.atomStore.aromatic?this.atomStore.aromatic[this.index]:this.residueType.isAromatic(this)?1:0},Ch.aromatic.set=function(e){this.atomStore.aromatic&&(this.atomStore.aromatic[this.index]=e)},Ch.bondCount.get=function(){return this.bondHash.countArray[this.index]},Sh.prototype.eachBond=function(e,t){t=t||this.structure._bp;for(var n=this.index,r=this.bondHash,i=r.indexArray,o=r.countArray[n],a=r.offsetArray[n],s=0;s<o;++s)t.index=i[a+s],e(t)},Sh.prototype.eachBondedAtom=function(e,t){var n=t||this.structure._ap,r=this.index;this.eachBond((function(t){n.index=r!==t.atomIndex1?t.atomIndex1:t.atomIndex2,e(n)})),this.index=r},Sh.prototype.hasBondTo=function(e){var t=!1;return this.eachBondedAtom((function(n){e.index===n.index&&(t=!0)})),t},Sh.prototype.bondToElementCount=function(e){var t=0,n=this.index;return this.eachBondedAtom((function(n){n.number===e&&(t+=1)})),this.index=n,t},Sh.prototype.hasBondToElement=function(e){return this.bondToElementCount(e)>0},Sh.prototype.isBackbone=function(){var e=this.residueType.backboneIndexList;return e.length>0&&e.includes(this.index-this.residueAtomOffset)},Sh.prototype.isPolymer=function(){if(this.structure.entityList.length>0)return this.entity.isPolymer();var e=this.residueType.moleculeType;return 3===e||4===e||5===e},Sh.prototype.isSidechain=function(){return this.isPolymer()&&!this.isBackbone()},Sh.prototype.isCg=function(){var e=this.residueType.backboneType;return 4===e||5===e||6===e},Sh.prototype.isTrace=function(){return this.index===this.residueType.traceAtomIndex+this.residueAtomOffset},Sh.prototype.isHetero=function(){return 1===this.residueType.hetero},Sh.prototype.isProtein=function(){return 3===this.residueType.moleculeType},Sh.prototype.isNucleic=function(){var e=this.residueType.moleculeType;return 4===e||5===e},Sh.prototype.isRna=function(){return 4===this.residueType.moleculeType},Sh.prototype.isDna=function(){return 5===this.residueType.moleculeType},Sh.prototype.isWater=function(){return 1===this.residueType.moleculeType},Sh.prototype.isIon=function(){return 2===this.residueType.moleculeType},Sh.prototype.isSaccharide=function(){return 6===this.residueType.moleculeType},Sh.prototype.isHelix=function(){return Ad.includes(this.sstruc)},Sh.prototype.isSheet=function(){return Td.includes(this.sstruc)},Sh.prototype.isTurn=function(){return Rd.includes(this.sstruc)&&this.isProtein()},Sh.prototype.isBonded=function(){return 0!==this.bondHash.countArray[this.index]},Sh.prototype.isRing=function(){return void 0!==this.residueType.getRings().atomRings[this.index-this.residueAtomOffset]},Sh.prototype.isAromatic=function(){return 1===this.aromatic},Sh.prototype.isMetal=function(){return this.atomType.isMetal()},Sh.prototype.isNonmetal=function(){return this.atomType.isNonmetal()},Sh.prototype.isMetalloid=function(){return this.atomType.isMetalloid()},Sh.prototype.isHalogen=function(){return this.atomType.isHalogen()},Sh.prototype.isDiatomicNonmetal=function(){return this.atomType.isDiatomicNonmetal()},Sh.prototype.isPolyatomicNonmetal=function(){return this.atomType.isPolyatomicNonmetal()},Sh.prototype.isAlkaliMetal=function(){return this.atomType.isAlkaliMetal()},Sh.prototype.isAlkalineEarthMetal=function(){return this.atomType.isAlkalineEarthMetal()},Sh.prototype.isNobleGas=function(){return this.atomType.isNobleGas()},Sh.prototype.isTransitionMetal=function(){return this.atomType.isTransitionMetal()},Sh.prototype.isPostTransitionMetal=function(){return this.atomType.isPostTransitionMetal()},Sh.prototype.isLanthanide=function(){return this.atomType.isLanthanide()},Sh.prototype.isActinide=function(){return this.atomType.isActinide()},Sh.prototype.getDefaultValence=function(){return this.atomType.getDefaultValence()},Sh.prototype.getValenceList=function(){return this.atomType.getValenceList()},Sh.prototype.getOuterShellElectronCount=function(){return this.atomType.getOuterShellElectronCount()},Sh.prototype.distanceTo=function(e){var t=this.atomStore,n=e.atomStore,r=this.index,i=e.index,o=t.x[r]-n.x[i],a=t.y[r]-n.y[i],s=t.z[r]-n.z[i],l=o*o+a*a+s*s;return Math.sqrt(l)},Sh.prototype.connectedTo=function(e){var t=this.atomStore,n=e.atomStore,r=this.index,i=e.index;if(t.altloc&&n.altloc){var o=t.altloc[r],a=n.altloc[i];if(0!==o&&0!==a&&32!==o&&32!==a&&o!==a)return!1}var s=t.x[r]-n.x[i],l=t.y[r]-n.y[i],u=t.z[r]-n.z[i],c=s*s+l*l+u*u;if(c<48&&this.isCg())return!0;if(isNaN(c))return!1;var d=this.covalent+e.covalent,f=d+.3,p=d-.5;return c<f*f&&c>p*p},Sh.prototype.positionFromArray=function(e,t){return void 0===t&&(t=0),this.x=e[t+0],this.y=e[t+1],this.z=e[t+2],this},Sh.prototype.positionToArray=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.index,r=this.atomStore;return e[t+0]=r.x[n],e[t+1]=r.y[n],e[t+2]=r.z[n],e},Sh.prototype.positionToVector3=function(e){return void 0===e&&(e=new U),e.x=this.x,e.y=this.y,e.z=this.z,e},Sh.prototype.positionFromVector3=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},Sh.prototype.positionAdd=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},Sh.prototype.positionSub=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},Sh.prototype.getResidueBonds=function(e){void 0===e&&(e=!1);var t,n,r,i,o=this.residueAtomOffset,a=this.index-this.residueAtomOffset,s=this.residueType.getBonds(),l=s.atomIndices1,u=s.atomIndices2;for(e||(i=[]),t=l.indexOf(a);-1!==t;){if(r=u[t]+o,!i)return r;i.push(r),t=l.indexOf(a,t+1)}for(n=u.indexOf(a);-1!==n;){if(r=l[n]+o,!i)return r;i.push(r),n=u.indexOf(a,n+1)}return i},Sh.prototype.qualifiedName=function(e){void 0===e&&(e=!1);var t="";return this.resname&&!e&&(t+="["+this.resname+"]"),void 0!==this.resno&&(t+=this.resno),this.inscode&&(t+="^"+this.inscode),this.chainname&&(t+=":"+this.chainname),this.atomname&&(t+="."+this.atomname),this.altloc&&(t+="%"+this.altloc),this.structure.modelStore.count>1&&(t+="/"+this.modelIndex),t},Sh.prototype.clone=function(){return new Sh(this.structure,this.index)},Sh.prototype.toObject=function(){return{index:this.index,residueIndex:this.residueIndex,resname:this.resname,x:this.x,y:this.y,z:this.z,element:this.element,chainname:this.chainname,resno:this.resno,serial:this.serial,vdw:this.vdw,covalent:this.covalent,hetero:this.hetero,bfactor:this.bfactor,altloc:this.altloc,atomname:this.atomname,modelIndex:this.modelIndex}},Object.defineProperties(Sh.prototype,Ch);var Ph=new Float32Array(3),Mh=function(e,t){void 0===t&&(t=!1),sl&&rl.time("Kdtree build");var n=t?Eh:kh,r=new Float32Array(3*e.atomCount),i=new Uint32Array(e.atomCount),o=0;e.eachAtom((function(e){r[o+0]=e.x,r[o+1]=e.y,r[o+2]=e.z,i[o/3]=e.index,o+=3})),this.atomIndices=i,this.points=r,this.kdtree=new _h(r,n),sl&&rl.timeEnd("Kdtree build")};Mh.prototype.nearest=function(e,t,n){e instanceof U?e.toArray(Ph):e instanceof Sh&&e.positionToArray(Ph);for(var r=this.kdtree.nearest(Ph,t,n),i=this.kdtree.indices,o=this.kdtree.nodes,a=this.atomIndices,s=[],l=0,u=r.length;l<u;++l){var c=r[l],d=c[0],f=c[1];s.push({index:a[i[o[d]]],distance:f})}return s};var Ah={" ":"X","!":"Y","#":"Z",$:"-X","%":"-Y","&":"-Z","'":"Y+1/2","(":"1/2+X",")":"1/2+Y","*":"1/2-X","+":"1/2+Z",",":"1/2-Y","-":"1/2-Z",".":"X+1/2","/":"Z+1/2",0:"-X+1/2",1:"-Y+1/2",2:"-Z+1/2",3:"1/4+X",4:"1/4-Y",5:"1/4+Z",6:"1/4-X",7:"1/4+Y",8:"3/4-Y",9:"3/4+Z",":":"3/4+Y",";":"3/4+X","<":"3/4-X","=":"1/4-Z",">":"3/4-Z","?":"X-Y","@":"Y-X",A:"Z+1/3",B:"Z+2/3",C:"X+2/3",D:"Y+1/3",E:"-Y+2/3",F:"X-Y+1/3",G:"Y-X+2/3",H:"-X+1/3",I:"X+1/3",J:"Y+2/3",K:"-Y+1/3",L:"X-Y+2/3",M:"Y-X+1/3",N:"-X+2/3",O:"2/3+X",P:"1/3+Y",Q:"1/3+Z",R:"2/3-Y",S:"1/3+X-Y",T:"2/3+Y-X",U:"1/3-X",V:"2/3-X",W:"1/3-Y",X:"1/3-Z",Y:"2/3+Y",Z:"1/3+Y-X","[":"2/3+X-Y","]":"1/3+X","^":"2/3+Z",_:"2/3-Z","`":"5/6+Z",a:"1/6+Z",b:"5/6-Z",c:"1/6-Z",d:"Z+5/6",e:"Z+1/6",f:"Z+1/4",g:"+Y"},Th={"P 1":" !#","P -1":" !#$%&","P 1 2 1":" !#$!&","P 1 21 1":" !#$'&","C 1 2 1":" !#$!&()#*)&","P 1 m 1":" !# %#","P 1 c 1":" !# %+","C 1 m 1":" !# %#()#(,#","C 1 c 1":" !# %+()#(,+","P 1 2/m 1":" !# %#$!&$%&","P 1 21/m 1":" !#$)&$%& ,#","C 1 2/m 1":" !# %#$!&$%&()#(,#*)&*,&","P 1 2/c 1":" !#$!-$%& %+","P 1 21/c 1":" !#$%&$)- ,+","C 1 2/c 1":" !#$!-$%& %+()#*)-*,&(,+","P 2 2 2":" !#$%#$!& %&","P 2 2 21":" !#$%+$!- %&","P 21 21 2":" !#$%#*)&(,&","P 21 21 21":" !#*%+$)-(,&","C 2 2 21":" !#$%+$!- %&()#*,+*)-(,&","C 2 2 2":" !#$%#$!& %&()#*,#*)&(,&","F 2 2 2":" !#$%#$!& %& )+$,+$)- ,-(!+*%+*!-(%-()#*,#*)&(,&","I 2 2 2":" !#$%# %&$!&.'/01/.120'2","I 21 21 21":" !#*%+$)-(,&()+$,#*!& %-","P m m 2":" !#$%# %#$!#","P m c 21":" !#$%+ %+$!#","P c c 2":" !#$%# %+$!+","P m a 2":" !#$%#(%#*!#","P c a 21":" !#$%+(%#*!+","P n c 2":" !#$%# ,+$)+","P m n 21":" !#*%+(%+$!#","P b a 2":" !#$%#(,#*)#","P n a 21":" !#$%+(,#*)+","P n n 2":" !#$%#(,+*)+","C m m 2":" !#$%# %#$!#()#*,#(,#*)#","C m c 21":" !#$%+ %+$!#()#*,+(,+*)#","C c c 2":" !#$%# %+$!+()#*,#(,+*)+","A m m 2":" !#$%# %#$!# )+$,+ ,+$)+","A b m 2":" !#$%# ,#$)# )+$,+ %+$!+","A m a 2":" !#$%#(%#*!# )+$,+(,+*)+","A b a 2":" !#$%#(,#*)# )+$,+(%+*!+","F m m 2":" !#$%# %#$!# )+$,+ ,+$)+(!+*%+(%+*!+()#*,#(,#*)#","F d d 2":" !#$%#345675 )+$,+3896:9(!+*%+;49<79()#*,#;85<:5","I m m 2":" !#$%# %#$!#()+*,+(,+*)+","I b a 2":" !#$%#(,#*)#()+*,+ %+$!+","I m a 2":" !#$%#(%#*!#()+*,+ ,+$)+","P 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#","P 2/n 2/n 2/n":" !#$%#$!& %&*,-()-(,+*)+","P 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+","P 2/b 2/a 2/n":" !#$%#$!& %&*,&()&(,#*)#","P 21/m 2/m 2/a":" !#*%#$!&(%&$%&(!& %#*!#","P 2/n 21/n 2/a":" !#*%#*)- ,-$%&(!&(,+$)+","P 2/m 2/n 21/a":" !#*%+*!- %&$%&(!-(%+$!#","P 21/c 2/c 2/a":" !#*%#$!-(%-$%&(!& %+*!+","P 21/b 21/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#","P 21/c 21/c 2/n":" !#*,#$)-(%-$%&()& ,+*!+","P 2/b 21/c 21/m":" !#$%+$)- ,&$%& !- ,+$)#","P 21/n 21/n 2/m":" !#$%#*)-(,-$%& !&(,+*)+","P 21/m 21/m 2/n":" !#$%#*'&.,&*,&.'& %#$!#","P 21/b 2/c 21/n":" !#*,+$!-(,&$%&()- %+*)#","P 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#","P 21/n 21/m 21/a":" !#0%/$'&.12$%&.!2 1#0'/","C 2/m 2/c 21/m":" !#$%+$!- %&$%& !- %+$!#()#*,+*)-(,&*,&()-(,+*)#","C 2/m 2/c 21/a":" !#$,+$)- %&$%& )- ,+$!#()#*%+*!-(,&*,&(!-(%+*)#","C 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()#*,#*)&(,&*,&()&(,#*)#","C 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+()#*,#*)-(,-*,&()&(,+*)+","C 2/m 2/m 2/a":" !#$,#$)& %&$%& )& ,#$!#()#*%#*!&(,&*,&(!&(%#*)#","C 2/c 2/c 2/a":" !#*,#$!&(,&$,-(!- ,+*!+()#$%#*)& %&*%- )-(%+$)+","F 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!# )+$,+$)- ,-$,- )- ,+$)+(!+*%+*!-(%-*%-(!-(%+*!+()#*,#*)&(,&*,&()&(,#*)#","F 2/d 2/d 2/d":" !#$%#$!& %&64=37=345675 )+$,+$)- ,-68>3:>3896:9(!+*%+*!-(%-<4>;7>;49<79()#*,#*)&(,&<8=;:=;85<:5","I 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()+*,+*)-(,-*,-()-(,+*)+","I 2/b 2/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#()+*,+$!- %-*,-()- %+$!+","I 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#()+$,#*!& %-*,- )&(%#$!+","I 21/m 21/m 21/a":" !#$,#$)& %&$%& )& ,#$!#()+*%+*!-(,-*,-(!-(%+*)+","P 4":" !#$%#% #!$#","P 41":" !#$%+% 5!$9","P 42":" !#$%#% +!$+","P 43":" !#$%+% 9!$5","I 4":" !#$%#% #!$#()+*,+,(+)*+","I 41":" !#*,+%(5)$9()+$%#, 9!*5","P -4":" !#$%#!$&% &","I -4":" !#$%#!$&% &()+*,+)*-,(-","P 4/m":" !#$%#% #!$#$%& !&!$&% &","P 42/m":" !#$%#% +!$+$%& !&!$-% -","P 4/n":" !#$%#,(#)*#*,&()&!$&% &","P 42/n":" !#$%#,(+)*+*,-()-!$&% &","I 4/m":" !#$%#% #!$#$%& !&!$&% &()+*,+,(+)*+*,-()-)*-,(-","I 41/a":" !#*,+%(5)$9$,=(!>!$&,(-()+$%#, 9!*5*%> )=)*-% &","P 4 2 2":" !#$%#% #!$#$!& %&! &%$&","P 4 21 2":" !#$%#,(#)*#*)&(,&! &%$&","P 41 2 2":" !#$%+% 5!$9$!& %-! >%$=","P 41 21 2":" !#$%+,(5)*9*)=(,>! &%$-","P 42 2 2":" !#$%#% +!$+$!& %&! -%$-","P 42 21 2":" !#$%#,(+)*+*)-(,-! &%$&","P 43 2 2":" !#$%+% 9!$5$!& %-! =%$>","P 43 21 2":" !#$%+,(9)*5*)>(,=! &%$-","I 4 2 2":" !#$%#% #!$#$!& %&! &%$&()+*,+,(+)*+*)-(,-)(-,*-","I 41 2 2":" !#*,+%(5)$9*!> ,=)(-%$&()+$%#, 9!*5$)=(%>! &,*-","P 4 m m":" !#$%#% #!$# %#$!#%$#! #","P 4 b m":" !#$%#% #!$#(,#*)#,*#)(#","P 42 c m":" !#$%#% +!$+ %+$!+%$#! #","P 42 n m":" !#$%#,(+)*+(,+*)+%$#! #","P 4 c c":" !#$%#% #!$# %+$!+%$+! +","P 4 n c":" !#$%#% #!$#(,+*)+,*+)(+","P 42 m c":" !#$%#% +!$+ %#$!#%$+! +","P 42 b c":" !#$%#% +!$+(,#*)#,*+)(+","I 4 m m":" !#$%#% #!$# %#$!#%$#! #()+*,+,(+)*+(,+*)+,*+)(+","I 4 c m":" !#$%#% #!$# %+$!+%$+! +()+*,+,(+)*+(,#*)#,*#)(#","I 41 m d":" !#*,+%(5)$9 %#*)+%*5) 9()+$%#, 9!*5(,+$!#,$9!(5","I 41 c d":" !#*,+%(5)$9 %+*)#%*9) 5()+$%#, 9!*5(,#$!+,$5!(9","P -4 2 m":" !#$%#% &!$&$!& %&%$#! #","P -4 2 c":" !#$%#% &!$&$!- %-%$+! +","P -4 21 m":" !#$%#% &!$&*)&(,&,*#)(#","P -4 21 c":" !#$%#% &!$&*)-(,-,*+)(+","P -4 m 2":" !#$%#!$&% & %#$!#! &%$&","P -4 c 2":" !#$%#% &!$& %+$!+! -%$-","P -4 b 2":" !#$%#% &!$&(,#*)#)(&,*&","P -4 n 2":" !#$%#% &!$&(,+*)+)(-,*-","I -4 m 2":" !#$%#% &!$& %#$!#! &%$&()+*,+,(-)*-(,+*)+)(-,*-","I -4 c 2":" !#$%#% &!$& %+$!+! -%$-()+*,+,(-)*-(,#*)#)(&,*&","I -4 2 m":" !#$%#% &!$&$!& %&%$#! #()+*,+,(-)*-*)-(,-,*+)(+","I -4 2 d":" !#$%#% &!$&*!>(%>,$9) 9()+*,+,(-)*-$)= ,=%*5!(5","P 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #","P 4/m 2/c 2/c":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +","P 4/n 2/b 2/m":" !#$%#% #!$#$!& %&! &%$&*,&()&)*&,(&(,#*)#,*#)(#","P 4/n 2/n 2/c":" !#$%#% #!$#$!& %&! &%$&*,-()-)*-,(-(,+*)+,*+)(+","P 4/m 21/b 2/m":" !#$%#% #!$#*)&(,&)(&,*&$%& !&!$&% &(,#*)#,*#)(#","P 4/m 21/n 2/c":" !#$%#% #!$#*)-(,-)(-,*-$%& !&!$&% &(,+*)+,*+)(+","P 4/n 21/m 2/m":" !#$%#,(#)*#*)&(,&! &%$&*,&()&!$&% & %#$!#,*#)(#","P 4/n 2/c 2/c":" !#$%#,(#)*#*)-(,-! -%$-*,&()&!$&% & %+$!+,*+)(+","P 42/m 2/m 2/c":" !#$%#% +!$+$!& %&! -%$-$%& !&!$-% - %#$!#%$+! +","P 42/m 2/c 2/m":" !#$%#% +!$+$!- %-! &%$&$%& !&!$-% - %+$!+%$#! #","P 42/n 2/b 2/c":" !#$%#,(+)*+$!- %-)(&,*&*,-()-!$&% &(,#*)#%$+! +","P 42/n 2/n 2/m":" !#$%#,(+)*+$!& %&)(-,*-*,-()-!$&% &(,+*)+%$#! #","P 42/m 21/b 2/c":" !#$%#% +!$+*)&(,&)(-,*-$%& !&!$-% -(,#*)#,*+)(+","P 42/m 21/n 2/m":" !#$%#,./'*/*'-.,-! &%$&$%& !&'*-,.-.,/*'/%$#! #","P 42/n 21/m 2/c":" !#$%#,(+)*+*)-(,-! &%$&*,-()-!$&% & %#$!#,*+)(+","P 42/n 21/c 2/m":" !#$%#,(+)*+*)&(,&! -%$-*,-()-!$&% & %+$!+,*#)(#","I 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #()+*,+,(+)*+*)-(,-)(-,*-*,-()-)*-,(-(,+*)+,*+)(+","I 4/m 2/c 2/m":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +()+*,+,(+)*+*)&(,&)(&,*&*,-()-)*-,(-(,#*)#,*#)(#","I 41/a 2/m 2/d":" !#*,+%(5)$9*!> ,=)(-%$&$,=(!>!$&,(-(,+$!#,$9!(5()+$%#, 9!*5$)=(%>! &,*-*%> )=)*-% & %#*)+%*5) 9","I 41/a 2/c 2/d":" !#*,+%(5)$9*!= ,>)(&%$-$,=(!>!$&,(-(,#$!+,$5!(9()+$%#, 9!*5$)>(%=! -,*&*%> )=)*-% & %+*)#%*9) 5","P 3":" !#%?#@$#","P 31":" !#%?A@$B","P 32":" !#%?B@$A","H 3":" !#%?#@$#CDAEFAGHAIJBKLBMNB","R 3":" !## !!# ","P -3":" !#%?#@$#$%&!@&? &","H -3":" !#%?#@$#$%&!@&? &OPQRSQTUQVWXYZX[]X]Y^W[^ZV^UR_PT_SO_","R -3":" !## !!# $%&&$%%&$","P 3 1 2":" !#%?#@$#%$&@!& ?&","P 3 2 1":" !#%?#@$#! &?%&$@&","P 31 1 2":" !#%?Q@$^%$_@!X ?&","P 31 2 1":" !#%?A@$B! &?%_$@X","P 32 1 2":" !#%?^@$Q%$X@!_ ?&","P 32 2 1":" !#%?B@$A! &?%X$@_","H 3 2":" !#%?#@$#! &?%&$@&OPQRSQTUQY]X[WXVZX]Y^W[^ZV^PO_SR_UT_","R 3 2":" !## !!# %$&$&%&%$","P 3 m 1":" !#%?#@$#%$#@!# ?#","P 3 1 m":" !#%?#@$#! #?%#$@#","P 3 c 1":" !#%?#@$#%$+@!+ ?+","P 3 1 c":" !#%?#@$#! +?%+$@+","H 3 m":" !#%?#@$#%$#@!# ?#OPQRSQTUQRUQTPQOSQ]Y^W[^ZV^WV^ZY^][^","R 3 m":" !## !!# ! # #!#! ","H 3 c":" !#%?#@$#%$+@!+ ?+OPQRSQTUQRU`TP`OS`]Y^W[^ZV^WVaZYa][a","R 3 c":" !## !!# '././'/'.","P -3 1 2/m":" !#%?#@$#%$&@!& ?&$%&!@&? &! #?%#$@#","P -3 1 2/c":" !#%?#@$#%$-@!- ?-$%&!@&? &! +?%+$@+","P -3 2/m 1":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#","P -3 2/c 1":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+","H -3 2/m":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#OPQRSQTUQY]X[WXVZXVWXYZX[]XRUQTPQOSQ]Y^W[^ZV^PO_SR_UT_UR_PT_SO_WV^ZY^][^","R -3 2/m":" !## !!# %$&$&%&%$$%&&$%%&$! # #!#! ","H -3 2/c":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+OPQRSQTUQY]b[WbVZbVWXYZX[]XRU`TP`OS`]Y^W[^ZV^POcSRcUTcUR_PT_SO_WVaZYa][a","R -3 2/c":" !## !!# 102021210$%&&$%%&$'././'/'.","P 6":" !#%?#@$#$%#!@#? #","P 61":" !#%?A@$B$%/!@d? e","P 65":" !#%?B@$A$%/!@e? d","P 62":" !#%?^@$Q$%#!@^? Q","P 64":" !#%?Q@$^$%#!@Q? ^","P 63":" !#%?#@$#$%+!@+? +","P -6":" !#%?#@$# !&%?&@$&","P 6/m":" !#%?#@$#$%#!@#? #$%&!@&? & !&%?&@$&","P 63/m":" !#%?#@$#$%+!@+? +$%&!@&? & !-%?-@$-","P 6 2 2":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&","P 61 2 2":" !#%?Q@$^$%+!@`? a! X?%&$@_%$b@!- ?c","P 65 2 2":" !#%?^@$Q$%+!@a? `! _?%&$@X%$c@!- ?b","P 62 2 2":" !#%?^@$Q$%#!@^? Q! _?%&$@X%$_@!& ?X","P 64 2 2":" !#%?Q@$^$%#!@Q? ^! X?%&$@_%$X@!& ?_","P 63 2 2":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-","P 6 m m":" !#%?#@$#$%#!@#? #%$#@!# ?#! #?%#$@#","P 6 c c":" !#%?#@$#$%#!@#? #%$+@!+ ?+! +?%+$@+","P 63 c m":" !#%?#@$#$%+!@+? +%$+@!+ ?+! #?%#$@#","P 63 m c":" !#%?#@$#$%+!@+? +%$#@!# ?#! +?%+$@+","P -6 m 2":" !#%?#@$# !&%?&@$&%$#@!# ?#%$&@!& ?&","P -6 c 2":" !#%?#@$# !-%?-@$-%$+@!+ ?+%$&@!& ?&","P -6 2 m":" !#%?#@$# !&%?&@$&! &?%&$@&! #?%#$@#","P -6 2 c":" !#%?#@$# !-%?-@$-! &?%&$@&! +?%+$@+","P 6/m 2/m 2/m":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&$%&!@&? & !&@$&%?&%$#@!# ?#! #?%#$@#","P 6/m 2/c 2/c":" !#%?#@$#$%#!@#? #! -?%-$@-%$-@!- ?-$%&!@&? & !&@$&%?&%$+@!+ ?+! +?%+$@+","P 63/m 2/c 2/m":" !#%?#@$#$%+!@+? +! -?%-$@-%$&@!& ?&$%&!@&? & !-@$-%?-%$+@!+ ?+! #?%#$@#","P 63/m 2/m 2/c":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-$%&!@&? & !-@$-%?-%$#@!# ?#! +?%+$@+","P 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ","F 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%&  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ","I 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(","P 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(","I 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- ","P 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$","P 2/n -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& *,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","F 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-($,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- *,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$","F 2/d -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& 64=37=345675=64=375345674=67=3453756 )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(68>3:>3896:9=<8=;:5;85<:4><7>;49;79<(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(<4>;7>;49<79>68>3:93896:8=<:=;85;:5<()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- <8=;:=;8f<:f><4>;79;49<78>6:>3893:96","I 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","P 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*","I 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*()+$,#*g& %-+()#$,&*!- %)+(,#$!&*%- *,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$","P 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$","P 42 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","F 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$","F 41 3 2":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46 )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<(!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86","I 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","P 43 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7;>46=:<5839398<5:6=4;>75:<983>7;=46","P 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<","I 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46","P -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ","F -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&%  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(+%*+!*-%(- +)$+,$-) -,#)(#,*&)*&,((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() +,$+)$-, -(#)*#,*&)(&,+!(+%*-!*-%(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(#,*#)*&,(&(+!*+%*-!(-%+) +,$-)$-, ","I -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","P -4 3 n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","F -4 3 c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() #,$#)$&, &(#!*#%*&!(&%+! +%$-!$-% (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(#%*#!*&%(& +!$+%$-! -%#) #,$&)$&, ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! +%$+!$-% - #)$#,$&) &,#!(#%*&!*&%(","I -4 3 d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7354<9:6>8;=357<946>:;=857394<>:6=8;()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- :;98657<=43>;9:658<=73>49:;586=7<>43","P 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","P 4/n -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/m -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/n -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","F 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#!  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*%*+!(+%(-!*-$-) -, +)$+,&,(&)*#,*#)((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%**%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*,$+) +, -)$-*&)(&,(#)*#,-%(-!*+%*+!(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$*,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$,*#)(#,(&)*&*-!(-%(+!*+%-, -)$+,$+) ","F 4/m -3 2/c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() &,$&)$#, #(#%*#!*&%(&!+!$+% -! -%$$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*,$#) #, &)$&*&!(&%(#!*#%-% -!$+%$+! (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(&%*&!*#%(# +%$+!$-% -!#)$#, &) &,$*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*%*#!(#%(&!*&$-! -% +!$+%&, &)$#,$#) ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! -%$-!$+% + #,$#)$&, &)#!*#%(&!(&%**,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$%$+! +% -!$-$&) &, #)$#,&%(&!*#%*#!(","F 41/d -3 2/m":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=4664=3:>;85<79=64>3:5;89<74=6:>385;79<,$+! #%(-)*&*&)(-% #!$+,-%(&)*+,$#!  )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<68>37=;49<:5=<8>;753496:4><:=;893756,*#!(+% &)$-*-!(&, +)$#%-, &!$+%*#)((!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<<4>;:=389675>68=379;45<:8=<7>;453:96%$#) +,(&!*-$&! -,(#)*+%&% -)$#,*+!(()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86<8=;7>3456:9><4=;:9385678>67=349;:5<%*+)(#, -!$&$-) &%(+!*#,&,(-!*#%$+) ","F 41/d -3 2/c":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46<8>;7=3496:5><8=;793456:8><7=;493:56%*#)(+, &!$-$-! &,(+)*#%&, -!$#%*+)( )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<<4=;:>385679>64=3:9;85<78=67>345;:9<%$+) #,(-!*&$&) -%(#!*+,&%(-)*#,$+! (!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<68=37>;45<:9=<4>;:5389674>6:=389;75<,*+!(#% -)$&*-)(&% +!$#,-,(&!*+%$#) ()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>8664>3:=;89<75=68>375;49<:4=<:>;853796,$#! +%(&)*-*&!(-, #)$+%-% &)$+,*#!(","I 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","I 41/a -3 2/d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<$%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*4<97358;=:6>6>:;=8357<94=8;>:694<573()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46*,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$865:;943>7<=<=73>4;9:658>43=7<5869:;","P 1 1 2":" !#$%#","P 1 1 21":" !#$%+","B 1 1 2":" !#$%#(g+*%+","A 1 2 1":" !#$!& )+$)-","C 1 21 1":" !#$)&()#*!&","I 1 2 1":" !#$!&.'/0'2","I 1 21 1":" !#$)&.'/0!-","P 1 1 m":" !# !&","P 1 1 b":" !# )&","B 1 1 m":" !# !&(!+(!-","B 1 1 b":" !# )&(!+()-","P 1 1 2/m":" !# !&$%#$%&","P 1 1 21/m":" !#$%+$%& !-","B 1 1 2/m":" !# !&$%#$%&(!+(!-*%+*%-","P 1 1 2/b":" !#$,#$%& )&","P 1 1 21/b":" !#$%&$,+ )-","B 1 1 2/b":" !#$,#$%& )&(!+*,+*%-()-","P 21 2 2":" !#$!&(%&*%#","P 2 21 2":" !# ,&$)&$%#","P 21 21 2 (a)":" !#*,#.%&$'&","P 21 2 21":" !#$!&(%-*%+","P 2 21 21":" !# %&$)-$,+","C 2 2 21a)":" !#*%+(,&$)-()#$,+ %&*!-","C 2 2 2a":" !#*,#.%&$'&()#$%# ,&*!&","F 2 2 2a":" !#*,#.%&$'& '/*%/.12$!2.!/$,/ %20'2.'#$%# 1&0!&","I 2 2 2a":" !#*,#.%&$'&()+$%+*!- ,-","P 21/m 21/m 2/n a":" !#*,#$)&(%&$%&.'& ,#*!#","P 42 21 2a":" !#*,#%.+'$+$'&.%&! -,*-","I 2 3a":" !#*,#.%&$'&!# ,- '&$%/$# !-*!/$%&.%()+$%+ ,-*!-)+(%&(!-*,#*+()&$)#*,- ,"},Rh=/^[1-9]$/;function Ih(e){var t="";return e.length>0&&(t=":"+Da(e).join(" OR :")),new zs(t)}var Oh=function(e){void 0===e&&(e=""),this.name=e,this.partList=[]},Lh={type:{configurable:!0}};Lh.type.get=function(){return"Assembly"},Oh.prototype.addPart=function(e,t){var n=new Dh(e,t);return this.partList.push(n),n},Oh.prototype.getAtomCount=function(e){return this.partList.reduce((function(t,n){return t+n.getAtomCount(e)}),0)},Oh.prototype.getResidueCount=function(e){return this.partList.reduce((function(t,n){return t+n.getResidueCount(e)}),0)},Oh.prototype.getInstanceCount=function(){var e=0;return this.partList.forEach((function(t){e+=t.matrixList.length})),e},Oh.prototype.isIdentity=function(e){if(1!==this.partList.length)return!1;var t=this.partList[0];if(1!==t.matrixList.length)return!1;if(!(new j).equals(t.matrixList[0]))return!1;var n=[];return e.eachChain((function(e){n.push(e.chainname)})),n=Da(n),t.chainList.length===n.length},Oh.prototype.getBoundingBox=function(e){var t=new Z;return this.partList.forEach((function(n){var r=n.getBoundingBox(e);t.expandByPoint(r.min),t.expandByPoint(r.max)})),t},Oh.prototype.getCenter=function(e){return this.getBoundingBox(e).getCenter(new U)},Oh.prototype.getSelection=function(){var e=[];return this.partList.forEach((function(t){e=e.concat(t.chainList)})),Ih(e)},Object.defineProperties(Oh.prototype,Lh);var Dh=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.matrixList=e,this.chainList=t},Fh={type:{configurable:!0}};Fh.type.get=function(){return"AssemblyPart"},Dh.prototype._getCount=function(e,t){var n=this,r=0;return e.eachChain((function(e){(0===n.chainList.length||n.chainList.includes(e.chainname))&&(r+=e[t])})),this.matrixList.length*r},Dh.prototype.getAtomCount=function(e){return this._getCount(e,"atomCount")},Dh.prototype.getResidueCount=function(e){return this._getCount(e,"residueCount")},Dh.prototype.getBoundingBox=function(e){var t=new Z,n=new Z,r=this.getSelection(),i=e.getBoundingBox(r);return this.matrixList.forEach((function(e){n.copy(i).applyMatrix4(e),t.expandByPoint(n.min),t.expandByPoint(n.max)})),t},Dh.prototype.getSelection=function(){return Ih(this.chainList)},Dh.prototype.getView=function(e){var t=this.getSelection();return t?e.getView(t):e},Dh.prototype.getInstanceList=function(){for(var e=[],t=0,n=this.matrixList.length;t<n;++t)e.push({id:t+1,name:t,matrix:this.matrixList[t]});return e},Object.defineProperties(Dh.prototype,Fh);var Nh=function(e){this.structure=e,this.currentModelindex=null,this.currentChainid=null,this.currentResname=null,this.currentResno=null,this.currentInscode=void 0,this.currentHetero=null,this.previousResname="",this.previousHetero=null,this.ai=-1,this.ri=-1,this.ci=-1,this.mi=-1};function Bh(e,t){if(t){sl&&rl.time("assignSecondaryStructure");var n=[];e.eachModel((function(e){e.eachChain((function(e){n.push(e.chainname)}))}));var r=n.slice().sort(),i=[];r.forEach((function(e){i.push(n.indexOf(e))}));var o=t.helices.filter((function(e){return Oa(r,e[0])>=0}));o.sort((function(e,t){var n=e[0],o=t[0],a=e[1],s=t[1];if(n===o)return a===s?0:a<s?-1:1;var l=Oa(r,n),u=Oa(r,o);return i[l]<i[u]?-1:1}));var a=e.residueStore;e.eachModel((function(e){var t=0,n=o.length;if(0!==n){var r=o[t],i=!1,s=!1;e.eachChain((function(e){var l=!1;if(e.chainname===r[0])for(var u=e.residueCount,c=e.residueOffset,d=c+u,f=c;f<d;++f)if(a.resno[f]===r[1]&&a.getInscode(f)===r[2]&&(i=!0),i&&(a.sstruc[f]=r[6],a.resno[f]===r[4]&&a.getInscode(f)===r[5]&&(i=!1,(t+=1)<n?(f=c-1,r=o[t],l=e.chainname!==r[0]):s=!0)),l||s)return}))}}));var s=t.sheets.filter((function(e){return Oa(r,e[0])>=0}));s.sort((function(e,t){var n=e[0],o=t[0];if(n===o)return 0;var a=Oa(r,n),s=Oa(r,o);return i[a]<i[s]?-1:1}));var l="e".charCodeAt(0);e.eachModel((function(e){var t=0,n=s.length;if(0!==n){var r=s[t],i=!1,o=!1;e.eachChain((function(e){var u=!1;if(e.chainname===r[0])for(var c=e.residueCount,d=e.residueOffset,f=d+c,p=d;p<f;++p)if(a.resno[p]===r[1]&&a.getInscode(p)===r[2]&&(i=!0),i&&(a.sstruc[p]=l,a.resno[p]===r[4]&&a.getInscode(p)===r[5]&&(i=!1,(t+=1)<n?(p=d-1,r=s[t],u=e.chainname!==r[0]):o=!0)),u||o)return}))}})),sl&&rl.timeEnd("assignSecondaryStructure")}}Nh.prototype.addResidueType=function(e){for(var t=this.structure.atomStore,n=this.structure.residueStore,r=this.structure.residueMap,i=n.atomCount[e],o=n.atomOffset[e],a=new Array(i),s=0;s<i;++s)a[s]=t.atomTypeId[o+s];n.residueTypeId[e]=r.add(this.previousResname,a,this.previousHetero)},Nh.prototype.addAtom=function(e,t,n,r,i,o,a,s){var l=this.structure.atomStore,u=this.structure.residueStore,c=this.structure.chainStore,d=this.structure.modelStore,f=!1,p=!1,h=!1;this.currentModelindex!==e?(f=!0,p=!0,h=!0,this.mi+=1,this.ci+=1,this.ri+=1):this.currentChainid!==n?(p=!0,h=!0,this.ci+=1,this.ri+=1):this.currentResno===i&&this.currentResname===r&&this.currentInscode===s||(h=!0,this.ri+=1),this.ai+=1,f&&(d.growIfFull(),d.chainOffset[this.mi]=this.ci,d.chainCount[this.mi]=0,d.count+=1,c.modelIndex[this.ci]=this.mi),p&&(c.growIfFull(),c.setChainname(this.ci,t),c.setChainid(this.ci,n),c.residueOffset[this.ci]=this.ri,c.residueCount[this.ci]=0,c.count+=1,c.modelIndex[this.ci]=this.mi,d.chainCount[this.mi]+=1,u.chainIndex[this.ri]=this.ci),h&&(this.previousResname=this.currentResname,this.previousHetero=this.currentHetero,this.ri>0&&this.addResidueType(this.ri-1),u.growIfFull(),u.resno[this.ri]=i,void 0!==a&&(u.sstruc[this.ri]=a.charCodeAt(0)),void 0!==s&&(u.inscode[this.ri]=s.charCodeAt(0)),u.atomOffset[this.ri]=this.ai,u.atomCount[this.ri]=0,u.count+=1,u.chainIndex[this.ri]=this.ci,c.residueCount[this.ci]+=1),l.count+=1,l.residueIndex[this.ai]=this.ri,u.atomCount[this.ri]+=1,this.currentModelindex=e,this.currentChainid=n,this.currentResname=r,this.currentResno=i,this.currentInscode=s,this.currentHetero=o},Nh.prototype.finalize=function(){this.previousResname=this.currentResname,this.previousHetero=this.currentHetero,this.ri>-1&&this.addResidueType(this.ri)};var zh=function(){var e=function(e,t,n,r){for(var i=e.structure,o=e.residueIndexStart,a=i.getResidueProxy(),s=i.getResidueProxy(),l=i.getAtomProxy(),u=i.getAtomProxy(),c=Math.max(0,t-2);c<=t;++c)for(var d=2;d<5;++d)if(!(c+d>=e.residueCount)){a.index=o+c,s.index=o+c+d,l.index=a.traceAtomIndex,u.index=s.traceAtomIndex;var f=l.distanceTo(u);if(Math.abs(f-n[d-2])>r)return!1}return!0},t=function(t,n){return e(t,n,[5.45,5.18,6.37],2.1)},n=function(t,n){return e(t,n,[6.1,10.4,13],1.42)};return function(e){sl&&rl.time("calculateSecondaryStructure"),e.eachPolymer((function(e){if(!(e.residueCount<4)){if(e.isCg())!function(e){for(var t=e.residueStore,n=e.residueIndexStart,r=new xh(e).position,i=new U,o=new U,a=0,s=e.residueCount;a<s;++a){i.fromArray(r.center,3*a),o.fromArray(r.center,3*a+3);var l=i.distanceTo(o);l<2&&l>1&&r.bending[a]<20&&(t.sstruc[n+a]="h".charCodeAt(0),t.sstruc[n+a+1]="h".charCodeAt(0))}}(e);else{if(!e.isProtein())return;!function(e){for(var r=e.residueStore,i=e.residueIndexStart,o=0,a=e.residueCount;o<a;++o){var s="c";t(e,o)?s="h":n(e,o)&&(s="e"),r.sstruc[i+o]=s.charCodeAt(0)}}(e)}var r,i=0;e.eachResidue((function(e){e.sstruc===r?i+=1:(1===i&&(e.index-=1,e.sstruc="c"),i=1,r=e.sstruc)}))}})),sl&&rl.timeEnd("calculateSecondaryStructure")}}(),jh="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function Hh(e){for(var t=jh.length,n=e,r=0,i=jh[n%t];n>=t;)n=Math.floor(n/t),i+=jh[n%t],r+=1;return r>=5&&rl.warn("chainname overflow"),i}function Uh(e,t){void 0===t&&(t=!1),sl&&rl.time("calculateChainnames");var n=!0;if(e.eachChain((function(e){e.chainname&&(n=!1)})),n){var r=e.modelStore,i=e.chainStore,o=e.residueStore,a=e.getAtomProxy(),s=e.getAtomProxy(),l=0,u=0,c=0,d=0,f=[];1===o.count?f.push({mIndex:0,chainname:"A",rStart:0,rCount:1}):e.eachResidueN(2,(function(e,n){var r=!1,i=e.backboneType,p=n.backboneType;d=e.index,e.modelIndex!==n.modelIndex||e.moleculeType!==n.moleculeType?r=!0:0!==i&&i===p&&(a.index=e.backboneEndAtomIndex,s.index=n.backboneStartAtomIndex,r=t?!a.hasBondTo(s):!a.connectedTo(s)),r||n.index!==o.count-1||(r=!0,d=n.index),r&&(f.push({mIndex:u,chainname:Hh(l),rStart:c,rCount:d-c+1}),l+=1,e.modelIndex!==n.modelIndex&&(l=0,u+=1),n.index===o.count-1&&d!==n.index&&f.push({mIndex:u,chainname:Hh(l),rStart:o.count-1,rCount:1}),c=n.index,d=n.index)})),i.count=0,f.forEach((function(e){!function(e,t,n,a){for(var s=i.count,l=0;l<a;++l)o.chainIndex[n+l]=s;i.growIfFull(),i.modelIndex[s]=e,i.setChainname(s,t),i.setChainid(s,t),i.residueOffset[s]=n,i.residueCount[s]=a,i.count+=1,r.chainCount[e]+=1}(e.mIndex,e.chainname,e.rStart,e.rCount)}));var p=0;e.eachModel((function(e){r.chainOffset[e.index]=p,r.chainCount[e.index]-=1,p+=r.chainCount[e.index]}))}sl&&rl.timeEnd("calculateChainnames")}function Vh(e){sl&&rl.time("calculateBonds"),$h(e),qh(e),sl&&rl.timeEnd("calculateBonds")}var Gh={"HIS|CD2|CG":2,"HIS|CE1|ND1":2,"ARG|CZ|NH2":2,"PHE|CE1|CZ":2,"PHE|CD2|CE2":2,"PHE|CD1|CG":2,"TRP|CD1|CG":2,"TRP|CD2|CE2":2,"TRP|CE3|CZ3":2,"TRP|CH2|CZ2":2,"ASN|CG|OD1":2,"GLN|CD|OE1":2,"TYR|CD1|CG":2,"TYR|CD2|CE2":2,"TYR|CE1|CZ":2,"ASP|CG|OD1":2,"GLU|CD|OE1":2,"G|C8|N7":2,"G|C4|C5":2,"G|C2|N3":2,"G|C6|O6":2,"C|C4|N3":2,"C|C5|C6":2,"C|C2|O2":2,"A|C2|N3":2,"A|C6|N1":2,"A|C4|C5":2,"A|C8|N7":2,"U|C5|C6":2,"U|C2|O2":2,"U|C4|O4":2,"DG|C8|N7":2,"DG|C4|C5":2,"DG|C2|N3":2,"DG|C6|O6":2,"DC|C4|N3":2,"DC|C5|C6":2,"DC|C2|O2":2,"DA|C2|N3":2,"DA|C6|N1":2,"DA|C4|C5":2,"DA|C8|N7":2,"DT|C5|C6":2,"DT|C2|O2":2,"DT|C4|O4":2};function Wh(e,t,n){var r;return t=(r=t<n?[t,n]:[n,t])[0],n=r[1],jd.includes(e)&&"C"===t&&"O"===n||Gd.includes(e)&&"OP1"===t&&"P"===n?2:Gh[e+"|"+t+"|"+n]||1}function $h(e,t){void 0===t&&(t=!1),sl&&rl.time("calculateBondsWithin");var n=e.bondStore,r=e.rungBondStore,i=e.getAtomSet(!1),o=e.getAtomProxy(),a=e.getAtomProxy(),s=e.getBondProxy(),l=t?null:function(e){sl&&rl.time("calculateAtomBondMap");var t=[];return e.eachBond((function(e){var n=e.atomIndex1,r=e.atomIndex2;void 0===t[n]&&(t[n]=[]),t[n][r]=e.index})),sl&&rl.timeEnd("calculateAtomBondMap"),t}(e);e.eachResidue((function(e){if(!t&&l){var u=e.atomCount,c=e.atomOffset;if(u>500)return void rl.warn("more than 500 atoms, skip residue for auto-bonding",e.qualifiedName());for(var d=e.getBonds(),f=d.atomIndices1,p=d.atomIndices2,h=d.bondOrders,m=f.length,g=0;g<m;++g){var v=f[g],y=p[g],b=v+c,x=y+c,w=l[b];if(void 0!==w&&void 0!==w[x])s.index=w[x],h[e.residueType.getBondIndex(v,y)]=s.bondOrder;else o.index=b,a.index=x,n.addBond(o,a,h[g])}}var _=e.residueType.traceAtomIndex,S=e.residueType.rungEndAtomIndex;-1!==_&&-1!==S&&(o.index=e.traceAtomIndex,a.index=e.rungEndAtomIndex,r.addBond(o,a),i.set(o.index),i.set(a.index))})),e.atomSetDict.rung=i,sl&&rl.timeEnd("calculateBondsWithin")}function qh(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),sl&&rl.time("calculateBondsBetween");var r=e.bondStore,i=e.backboneBondStore,o=e.getAtomSet(!1),a=e.getAtomProxy(),s=e.getAtomProxy();function l(e,l){var u=e.backboneType,c=l.backboneType;0!==u&&u===c&&(a.index=e.backboneEndAtomIndex,s.index=l.backboneStartAtomIndex,(n&&a.hasBondTo(s)||a.connectedTo(s))&&(t||r.addBond(a,s,1),a.index=e.traceAtomIndex,s.index=l.traceAtomIndex,i.addBond(a,s),o.set(a.index),o.set(s.index)))}0===i.count&&i.resize(e.residueStore.count),e.eachResidueN(2,l);var u=e.getResidueProxy(),c=e.getResidueProxy();if(e.eachChain((function(e){0!==e.residueCount&&(u.index=e.residueOffset,c.index=e.residueOffset+e.residueCount-1,l(c,u))})),e.atomSetDict.backbone=o,!t){sl&&rl.time("calculateBondsBetween inter");var d=e.spatialHash;e.eachResidue((function(e){0!==e.backboneType||e.isWater()||e.eachAtom((function(e){e.isMetal()||d.eachWithin(e.x,e.y,e.z,4,(function(t){s.index=t,e.modelIndex!==s.modelIndex||e.residueIndex===s.residueIndex||s.isMetal()||r.addBondIfConnected(e,s,1)}))}))})),sl&&rl.timeEnd("calculateBondsBetween inter")}sl&&rl.timeEnd("calculateBondsBetween")}function Xh(e){if(e.unitcell){sl&&rl.time("buildUnitcellAssembly");var t=e.unitcell,n=e.center.clone().applyMatrix4(t.cartToFrac),r=n.clone().floor(),i=function(e){var t=Th[e],n={};if(void 0===t)return console.warn("spacegroup '"+e+"' not found in symop library"),n;for(var r=[],i=0,o=t.length;i<o;i+=3){for(var a=[],s=0;s<3;++s)a.push(Ah[t[i+s]]);r.push(a)}return r.forEach((function(e){var t=0,r=(new j).set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),i=r.elements;n[e.toString()]=r,e.forEach((function(e){for(var n=!1,r=!1,o=0,a=e.length;o<a;++o){var s=e[o];if("-"===s)n=!0;else if("+"===s)n=!1;else if("/"===s)r=!0;else if("X"===s)i[0+t]=n?-1:1;else if("Y"===s)i[4+t]=n?-1:1;else if("Z"===s)i[8+t]=n?-1:1;else if(Rh.test(s)){var l=parseInt(s);r?i[12+t]/=l:i[12+t]=l}else rl.warn("getSymmetryOperations: unknown token '"+s+"'")}t+=1}))})),n}(t.spacegroup),o=new U,a=new U,s=new Oh("UNITCELL"),l=m(),u=[];if(e.biomolDict.NCS){u.push.apply(u,[new j].concat(e.biomolDict.NCS.partList[0].matrixList));var c=[];l.forEach((function(e){u.forEach((function(t){c.push(e.clone().multiply(t))}))})),s.addPart(c)}else s.addPart(l);var d=new U,f=new Oh("SUPERCELL"),p=Array.prototype.concat.call(m(d.set(1,0,0)),m(d.set(0,1,0)),m(d.set(0,0,1)),m(d.set(-1,0,0)),m(d.set(0,-1,0)),m(d.set(0,0,-1)),m(d.set(1,1,0)),m(d.set(1,0,1)),m(d.set(0,1,1)),m(d.set(-1,-1,0)),m(d.set(-1,0,-1)),m(d.set(0,-1,-1)),m(d.set(1,-1,-1)),m(d.set(1,1,-1)),m(d.set(1,-1,1)),m(d.set(-1,1,1)),m(d.set(-1,-1,1)),m(d.set(-1,1,-1)),m(d.set(0,1,-1)),m(d.set(0,-1,1)),m(d.set(1,0,-1)),m(d.set(-1,0,1)),m(d.set(1,-1,0)),m(d.set(-1,1,0)),m(),m(d.set(1,1,1)),m(d.set(-1,-1,-1)));if(e.biomolDict.NCS){var h=[];p.forEach((function(e){u.forEach((function(t){h.push(e.clone().multiply(t))}))})),f.addPart(h)}else f.addPart(p);e.biomolDict.UNITCELL=s,e.biomolDict.SUPERCELL=f,sl&&rl.timeEnd("buildUnitcellAssembly")}function m(e){var s=[];return Object.keys(i).forEach((function(l){var u=i[l].clone();o.copy(n).applyMatrix4(u).floor(),a.setFromMatrixPosition(u),a.sub(o),a.add(r),e&&a.add(e),u.setPosition(a),u.multiplyMatrices(t.fracToCart,u),u.multiply(t.cartToFrac),s.push(u)})),s}}var Kh=["H","C","O","N","S","P"],Yh=["NA","CL","FE"];function Zh(e){var t=e.trim().toUpperCase();parseInt(t.charAt(0))&&(t=t.substr(1)),parseInt(t.charAt(0))&&(t=t.substr(1));var n=t.length;if(0===n)return"";if(1===n)return t;if(2===n){if(-1!==Yh.indexOf(t))return t;if(-1!==Kh.indexOf(t[0]))return t[0]}return n>=3&&-1!==Kh.indexOf(t[0])?t[0]:""}function Qh(e){var t=e.bondHash,n=t.countArray,r=t.offsetArray,i=t.indexArray,o=e.getBondProxy();e.eachResidue((function(e){var t=e.residueType;if(void 0===t.bonds){var a=e.atomOffset,s=[],l=[],u=[],c={},d=a+e.atomCount;e.eachAtom((function(e){for(var t=e.index,f=r[t],p=0,h=n[t];p<h;++p){o.index=i[f+p];var m=o.atomIndex1;if(!(m<a||m>=d)){var g=o.atomIndex2;if(!(g<a||g>=d)){if(m>g){var v=g;g=m,m=v}var y=m+"|"+g;void 0===c[y]&&(c[y]=!0,s.push(m-a),l.push(g-a),u.push(o.bondOrder))}}}})),t.bonds={atomIndices1:s,atomIndices2:l,bondOrders:u}}}))}function Jh(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];sl&&rl.time("concatStructures");var r=new km(e,""),i=new Nh(r),o=r.atomStore,a=r.atomMap;o.addField("formalCharge",1,"int8"),o.addField("partialCharge",1,"float32");var s={},l=0,u=0,c=0;t.forEach((function(e){e.eachAtom((function(e){o.growIfFull(),o.atomTypeId[l]=a.add(e.atomname,e.element),o.x[l]=e.x,o.y[l]=e.y,o.z[l]=e.z,o.serial[l]=e.serial,o.formalCharge[l]=e.formalCharge,o.partialCharge[l]=e.partialCharge,o.altloc[l]=e.altloc,o.occupancy[l]=e.occupancy,o.bfactor[l]=e.bfactor,i.addAtom(e.modelIndex+c,e.chainname,e.chainid,e.resname,e.resno,1===e.hetero,e.sstruc,e.inscode),s[e.index+u]=l,l+=1})),u+=e.atomStore.count,c+=e.modelStore.count}));var d=r.bondStore,f=r.getAtomProxy(),p=r.getAtomProxy();return u=0,t.forEach((function(e){e.eachBond((function(e){f.index=s[e.atomIndex1+u],p.index=s[e.atomIndex2+u],d.addBond(f,p,e.bondOrder)})),u+=e.atomStore.count})),i.finalize(),qh(r,!0),$h(r,!0),r.finalizeAtoms(),r.finalizeBonds(),Qh(r),sl&&rl.timeEnd("concatStructures"),r}var em=[3,11,19,37,55,87],tm=[4,12,20,38,56,88],nm=[6,15,16,34],rm=[1,7,8,9,17,35,53],im=[2,10,18,36,54,86],om=[13,30,31,48,49,50,80,81,82,83,84,85,112],am=[5,14,32,33,51,52,85],sm=[9,17,35,53,85],lm=function(e,t,n){this.structure=e,this.atomname=t,n=n||Zh(t),this.element=n,this.number=Id[n]||0,this.vdw=Od[this.number]||2,this.covalent=Ld[this.number]||1.6};lm.prototype.getDefaultValence=function(){var e=Dd[this.number];return e?e[0]:-1},lm.prototype.getValenceList=function(){return Dd[this.number]||[]},lm.prototype.getOuterShellElectronCount=function(){return Fd[this.number]||2},lm.prototype.isMetal=function(){return this.isAlkaliMetal()||this.isAlkalineEarthMetal()||this.isLanthanide()||this.isActinide()||this.isTransitionMetal()||this.isPostTransitionMetal()},lm.prototype.isNonmetal=function(){return this.isDiatomicNonmetal()||this.isPolyatomicNonmetal()||this.isNobleGas()},lm.prototype.isMetalloid=function(){return am.includes(this.number)},lm.prototype.isHalogen=function(){return sm.includes(this.number)},lm.prototype.isDiatomicNonmetal=function(){return rm.includes(this.number)},lm.prototype.isPolyatomicNonmetal=function(){return nm.includes(this.number)},lm.prototype.isAlkaliMetal=function(){return em.includes(this.number)},lm.prototype.isAlkalineEarthMetal=function(){return tm.includes(this.number)},lm.prototype.isNobleGas=function(){return im.includes(this.number)},lm.prototype.isTransitionMetal=function(){var e=this.number;return e>=21&&e<=29||e>=39&&e<=47||e>=72&&e<=79||e>=104&&e<=108},lm.prototype.isPostTransitionMetal=function(){return om.includes(this.number)},lm.prototype.isLanthanide=function(){return this.number>=57&&this.number<=71},lm.prototype.isActinide=function(){return this.number>=89&&this.number<=103};var um=function(e){this.structure=e,this.dict={},this.list=[],this.structure=e};um.prototype.add=function(e,t){var n=function(e,t){return e+"|"+t}(e=e.toUpperCase(),t=t?t.toUpperCase():Zh(e)),r=this.dict[n];if(void 0===r){var i=new lm(this.structure,e,t);r=this.list.length,this.dict[n]=r,this.list.push(i)}return r},um.prototype.get=function(e){return this.list[e]};var cm=function(e,t,n,r,i,o){this.structure=e,this.bondReferenceAtomIndices=[],this.resname=t,this.atomTypeIdList=n,this.hetero=r?1:0,this.chemCompType=i,this.bonds=o,this.atomCount=n.length,this.moleculeType=this.getMoleculeType(),this.backboneType=this.getBackboneType(0),this.backboneEndType=this.getBackboneType(-1),this.backboneStartType=this.getBackboneType(1),this.backboneIndexList=this.getBackboneIndexList();var a=Yd[this.backboneType],s=Yd[this.backboneStartType],l=Yd[this.backboneEndType],u=this.getAtomIndexByName(a.trace);this.traceAtomIndex=Sa(u,-1);var c=this.getAtomIndexByName(a.direction1);this.direction1AtomIndex=Sa(c,-1);var d=this.getAtomIndexByName(a.direction2);this.direction2AtomIndex=Sa(d,-1);var f=this.getAtomIndexByName(s.backboneStart);this.backboneStartAtomIndex=Sa(f,-1);var p,h=this.getAtomIndexByName(l.backboneEnd);this.backboneEndAtomIndex=Sa(h,-1),p=Vd.includes(t)?this.getAtomIndexByName("N1"):this.getAtomIndexByName("N3"),this.rungEndAtomIndex=Sa(p,-1)};cm.prototype.getBackboneIndexList=function(){var e,t=[];switch(this.moleculeType){case 3:e=Xd;break;case 4:case 5:e=Kd;break;default:return t}for(var n=this.structure.atomMap,r=this.atomTypeIdList,i=0,o=this.atomCount;i<o;++i){var a=n.get(r[i]);e.includes(a.atomname)&&t.push(i)}return t},cm.prototype.getMoleculeType=function(){return this.isProtein()?3:this.isRna()?4:this.isDna()?5:this.isWater()?1:this.isIon()?2:this.isSaccharide()?6:0},cm.prototype.getBackboneType=function(e){return this.hasProteinBackbone(e)?1:this.hasRnaBackbone(e)?2:this.hasDnaBackbone(e)?3:this.hasCgProteinBackbone(e)?4:this.hasCgRnaBackbone(e)?5:this.hasCgDnaBackbone(e)?6:0},cm.prototype.isProtein=function(){return this.chemCompType?Cd.includes(this.chemCompType):this.hasAtomWithName("CA","C","N")||jd.includes(this.resname)},cm.prototype.isCg=function(){var e=this.backboneType;return 4===e||5===e||6===e},cm.prototype.isNucleic=function(){return this.isRna()||this.isDna()},cm.prototype.isRna=function(){return this.chemCompType?Ed.includes(this.chemCompType):1!==this.hetero&&(this.hasAtomWithName(["P","O3'","O3*"],["C4'","C4*"],["O2'","O2*","F2'","F2*"])||Hd.includes(this.resname)&&this.hasAtomWithName(["O2'","O2*","F2'","F2*"]))},cm.prototype.isDna=function(){return this.chemCompType?kd.includes(this.chemCompType):1!==this.hetero&&(this.hasAtomWithName(["P","O3'","O3*"],["C3'","C3*"])&&!this.hasAtomWithName(["O2'","O2*","F2'","F2*"])||Ud.includes(this.resname))},cm.prototype.isHetero=function(){return 1===this.hetero},cm.prototype.isIon=function(){return $d.includes(this.resname)},cm.prototype.isWater=function(){return Wd.includes(this.resname)},cm.prototype.isSaccharide=function(){return this.chemCompType?Pd.includes(this.chemCompType):qd.includes(this.resname)},cm.prototype.isStandardAminoacid=function(){return jd.includes(this.resname)},cm.prototype.isStandardBase=function(){return Gd.includes(this.resname)},cm.prototype.hasBackboneAtoms=function(e,t){var n=Yd[t];return-1===e?this.hasAtomWithName(n.trace,n.backboneEnd,n.direction1,n.direction2):0===e?this.hasAtomWithName(n.trace,n.direction1,n.direction2):1===e?this.hasAtomWithName(n.trace,n.backboneStart,n.direction1,n.direction2):this.hasAtomWithName(n.trace,n.backboneStart,n.backboneEnd,n.direction1,n.direction2)},cm.prototype.hasProteinBackbone=function(e){return this.isProtein()&&this.hasBackboneAtoms(e,1)},cm.prototype.hasRnaBackbone=function(e){return this.isRna()&&this.hasBackboneAtoms(e,2)},cm.prototype.hasDnaBackbone=function(e){return this.isDna()&&this.hasBackboneAtoms(e,3)},cm.prototype.hasCgProteinBackbone=function(e){return this.atomCount<7&&this.isProtein()&&this.hasBackboneAtoms(e,4)},cm.prototype.hasCgRnaBackbone=function(e){return this.atomCount<11&&this.isRna()&&this.hasBackboneAtoms(e,5)},cm.prototype.hasCgDnaBackbone=function(e){return this.atomCount<11&&this.isDna()&&this.hasBackboneAtoms(e,6)},cm.prototype.hasBackbone=function(e){return this.hasProteinBackbone(e)||this.hasRnaBackbone(e)||this.hasDnaBackbone(e)||this.hasCgProteinBackbone(e)||this.hasCgRnaBackbone(e)||this.hasCgDnaBackbone(e)},cm.prototype.getAtomIndexByName=function(e){var t=this.atomCount,n=this.structure.atomMap,r=this.atomTypeIdList;if(Array.isArray(e))for(var i=0;i<t;++i){var o=r[i];if(e.includes(n.get(o).atomname))return i}else for(var a=0;a<t;++a){var s=r[a];if(e===n.get(s).atomname)return a}},cm.prototype.hasAtomWithName=function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=t.length,i=0;i<r;++i)if(void 0!==t[i]&&void 0===e.getAtomIndexByName(t[i]))return!1;return!0},cm.prototype.getBonds=function(e){return void 0===this.bonds&&(this.bonds=function(e){var t=e.structure,n=t.getAtomProxy(),r=t.getAtomProxy(),i=e.atomCount,o=e.atomOffset,a=o+i-1,s=[],l=[],u=[];if(i>500)sl&&rl.warn("more than 500 atoms, skip residue for auto-bonding",e.qualifiedName());else if(i>50)for(var c=new Mh(e,!0),d=e.isCg()?1.2:2.3,f=o;f<a;++f){n.index=f;for(var p=n.covalent+d+.3,h=c.nearest(n,1/0,p*p),m=h.length,g=0;g<m;++g)r.index=h[g].index,n.index<r.index&&n.connectedTo(r)&&(s.push(n.index-o),l.push(r.index-o),u.push(Wh(n.resname,n.atomname,r.atomname)))}else for(var v=o;v<a;++v){n.index=v;for(var y=v+1;y<=a;++y)r.index=y,n.connectedTo(r)&&(s.push(v-o),l.push(y-o),u.push(Wh(n.resname,n.atomname,r.atomname)))}return{atomIndices1:s,atomIndices2:l,bondOrders:u}}(e)),this.bonds},cm.prototype.getRings=function(){return void 0===this.rings&&this.calculateRings(),this.rings},cm.prototype.getBondGraph=function(){return void 0===this.bondGraph&&this.calculateBondGraph(),this.bondGraph},cm.prototype.getAromatic=function(e){return void 0===this.aromaticAtoms&&this.calculateAromatic(this.structure.getResidueProxy(e.residueIndex)),this.aromaticAtoms},cm.prototype.getAromaticRings=function(e){return void 0===this.aromaticRings&&this.calculateAromatic(e),this.aromaticRings},cm.prototype.calculateBondGraph=function(){for(var e=this.bondGraph={},t=this.getBonds(),n=t.atomIndices1.length,r=t.atomIndices1,i=t.atomIndices2,o=0;o<n;++o){var a=r[o],s=i[o];(e[a]=e[a]||[]).push(s),(e[s]=e[s]||[]).push(a)}},cm.prototype.calculateRings=function(){for(var e=function(e,t){for(var n={count:t,visited:new Int32Array(t),queue:new Int32Array(t),pred:new Int32Array(t),left:new Int32Array(hm),right:new Int32Array(hm),color:new Int32Array(t),currentColor:0,rings:[],atomRings:[],bonds:e},r=0;r<t;r++)n.visited[r]=-1,n.pred[r]=-1;return n}(this.getBondGraph(),this.atomCount),t=0;t<e.count;t++)e.visited[t]>=0||pm(e,t);this.rings={atomRings:e.atomRings,rings:e.rings}},cm.prototype.isAromatic=function(e){return this.aromaticAtoms=this.getAromatic(e),1===this.aromaticAtoms[e.index-e.residueAtomOffset]},cm.prototype.calculateAromatic=function(e){var t=this,n=this.aromaticAtoms=new Uint8Array(this.atomCount),r=this.getRings().rings,i=r.map((function(n){return function(e){if(e.some((function(e){return!dm.includes(e.number)})))return!1;var t=0,n=new tp(3,e.length),r=n.data;return e.forEach((function(e){r[t+0]=e.x,r[t+1]=e.y,r[t+2]=e.z,t+=3})),new ch(n).vecC.length()<.05}(n.map((function(n){return t.structure.getAtomProxy(n+e.atomOffset)})))})),o=this.aromaticRings=[];r.forEach((function(e,t){i[t]&&(o.push(e),e.forEach((function(e){return n[e]=1})))}))},cm.prototype.assignBondReferenceAtomIndices=function(){var e=this.getBondGraph(),t=this.getRings(),n=t.atomRings,r=t.rings,i=this.bonds,o=i.atomIndices1,a=i.atomIndices2,s=i.bondOrders,l=this.bondReferenceAtomIndices,u=i.atomIndices1.length;l.length=0;for(var c=0;c<u;++c)if(!(s[c]<=1)){var d=void 0,f=o[c],p=a[c],h=n[f],m=n[p];if(h&&m)for(var g=0;g<h.length;g++)if(-1!==m.indexOf(h[g])){d=r[h[g]];break}if(e[f].length>1)for(var v=0;v<e[f].length;++v){var y=e[f][v];if(y!==p&&(void 0===d||-1!==d.indexOf(y))){l[c]=y;break}}else if(e[p].length>1)for(var b=0;b<e[p].length;++b){var x=e[p][b];if(x!==f&&(void 0===d||-1!==d.indexOf(x))){l[c]=x;break}}}},cm.prototype.getBondIndex=function(e,t){for(var n=this.bonds,r=n.atomIndices1,i=n.atomIndices2,o=r.indexOf(e),a=i.indexOf(t),s=a;-1!==o;){for(;-1!==a;){if(o===a)return o;a=i.indexOf(t,a+1)}o=r.indexOf(e,o+1),a=s}},cm.prototype.getBondReferenceAtomIndex=function(e,t){var n=this.getBondIndex(e,t);if(void 0!==n)return 0===this.bondReferenceAtomIndices.length&&this.assignBondReferenceAtomIndices(),this.bondReferenceAtomIndices[n]};var dm=[5,6,7,8,14,15,16,32,33,50,51,83];function fm(e,t,n){if(!(n<t)){for(var r=e.pred,i=e.color,o=e.left,a=e.right,s=++e.currentColor,l=t,u=0;u<hm&&(i[l]=s,!((l=r[l])<0));u++);var c=0,d=0,f=!1,p=0;l=n;for(var h=0;h<hm;h++){if(i[l]===s){p=l,f=!0;break}if(a[d++]=l,(l=r[l])<0)break}if(f){l=t;for(var m=0;m<hm&&(o[c++]=l,p!==l)&&!((l=r[l])<0);m++);for(var g=c+d,v=new Array(g),y=0,b=0;b<c;b++)v[y++]=o[b];for(var x=d-1;x>=0;x--)v[y++]=a[x];for(var w=e.rings.length,_=0;_<g;++_){var S=v[_];e.atomRings[S]?e.atomRings[S].push(w):e.atomRings[S]=[w]}e.rings.push(v)}}}function pm(e,t){var n=e.bonds,r=e.visited,i=e.queue,o=e.pred;r[t]=1,i[0]=t;for(var a=0,s=1;a<s;){var l=i[a++];if(void 0!==n[l])for(var u=n[l].length,c=0;c<u;c++){var d=n[l][c];r[d]>0?o[d]!==l&&o[l]!==d&&fm(e,l,d):(r[d]=1,i[s++]=d,o[d]=l)}}}var hm=4;var mm=function(e){this.structure=e,this.dict={},this.list=[]};mm.prototype.add=function(e,t,n,r,i){void 0===r&&(r="");var o=function(e,t,n,r){return void 0===r&&(r=""),e+"|"+t.join(",")+"|"+(n?1:0)+"|"+r}(e=e.toUpperCase(),t,n,r),a=this.dict[o];if(void 0===a){var s=new cm(this.structure,e,t,n,r,i);a=this.list.length,this.dict[o]=a,this.list.push(s)}return a},mm.prototype.get=function(e){return this.list[e]};var gm=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.bondStore=e.bondStore,this._v12=new U,this._v13=new U,this._ap1=this.structure.getAtomProxy(),this._ap2=this.structure.getAtomProxy(),this._ap3=this.structure.getAtomProxy()},vm={atom1:{configurable:!0},atom2:{configurable:!0},atomIndex1:{configurable:!0},atomIndex2:{configurable:!0},bondOrder:{configurable:!0}};vm.atom1.get=function(){return this.structure.getAtomProxy(this.atomIndex1)},vm.atom2.get=function(){return this.structure.getAtomProxy(this.atomIndex2)},vm.atomIndex1.get=function(){return this.bondStore.atomIndex1[this.index]},vm.atomIndex1.set=function(e){this.bondStore.atomIndex1[this.index]=e},vm.atomIndex2.get=function(){return this.bondStore.atomIndex2[this.index]},vm.atomIndex2.set=function(e){this.bondStore.atomIndex2[this.index]=e},vm.bondOrder.get=function(){return this.bondStore.bondOrder[this.index]},vm.bondOrder.set=function(e){this.bondStore.bondOrder[this.index]=e},gm.prototype.getOtherAtomIndex=function(e){return e===this.atomIndex1?this.atomIndex2:this.atomIndex1},gm.prototype.getOtherAtom=function(e){return this.structure.getAtomProxy(this.getOtherAtomIndex(e.index))},gm.prototype.getReferenceAtomIndex=function(){var e=this._ap1,t=this._ap2;if(e.index=this.atomIndex1,t.index=this.atomIndex2,e.residueIndex===t.residueIndex){var n=e.index-e.residueAtomOffset,r=t.index-t.residueAtomOffset,i=e.residueType.getBondReferenceAtomIndex(n,r);if(void 0!==i)return i+e.residueAtomOffset;console.warn("No reference atom found",e.index,t.index)}},gm.prototype.calculateShiftDir=function(e){void 0===e&&(e=new U);var t=this._ap1,n=this._ap2,r=this._ap3,i=this._v12,o=this._v13;t.index=this.atomIndex1,n.index=this.atomIndex2;var a=this.getReferenceAtomIndex();i.subVectors(t,n).normalize(),void 0!==a?(r.index=a,o.subVectors(t,r)):o.copy(t),o.normalize();var s=i.dot(o);return 1-Math.abs(s)<1e-5&&(o.set(1,0,0),s=i.dot(o),1-Math.abs(s)<1e-5&&(o.set(0,1,0),s=i.dot(o))),e.copy(o.sub(i.multiplyScalar(s))).normalize()},gm.prototype.qualifiedName=function(){return this.atomIndex1+"="+this.atomIndex2},gm.prototype.clone=function(){return new gm(this.structure,this.index)},gm.prototype.toObject=function(){return{atomIndex1:this.atomIndex1,atomIndex2:this.atomIndex2,bondOrder:this.bondOrder}},Object.defineProperties(gm.prototype,vm);var ym=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueMap=e.residueMap,this.atomMap=e.atomMap},bm={entity:{configurable:!0},entityIndex:{configurable:!0},chain:{configurable:!0},chainIndex:{configurable:!0},atomOffset:{configurable:!0},atomCount:{configurable:!0},atomEnd:{configurable:!0},modelIndex:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0},resno:{configurable:!0},sstruc:{configurable:!0},inscode:{configurable:!0},residueType:{configurable:!0},resname:{configurable:!0},hetero:{configurable:!0},moleculeType:{configurable:!0},backboneType:{configurable:!0},backboneStartType:{configurable:!0},backboneEndType:{configurable:!0},traceAtomIndex:{configurable:!0},direction1AtomIndex:{configurable:!0},direction2AtomIndex:{configurable:!0},backboneStartAtomIndex:{configurable:!0},backboneEndAtomIndex:{configurable:!0},rungEndAtomIndex:{configurable:!0},x:{configurable:!0},y:{configurable:!0},z:{configurable:!0}};bm.entity.get=function(){return this.structure.entityList[this.entityIndex]},bm.entityIndex.get=function(){return this.chainStore.entityIndex[this.chainIndex]},bm.chain.get=function(){return this.structure.getChainProxy(this.chainIndex)},bm.chainIndex.get=function(){return this.residueStore.chainIndex[this.index]},bm.chainIndex.set=function(e){this.residueStore.chainIndex[this.index]=e},bm.atomOffset.get=function(){return this.residueStore.atomOffset[this.index]},bm.atomOffset.set=function(e){this.residueStore.atomOffset[this.index]=e},bm.atomCount.get=function(){return this.residueStore.atomCount[this.index]},bm.atomCount.set=function(e){this.residueStore.atomCount[this.index]=e},bm.atomEnd.get=function(){return this.atomOffset+this.atomCount-1},bm.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},bm.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},bm.chainid.get=function(){return this.chainStore.getChainid(this.chainIndex)},bm.resno.get=function(){return this.residueStore.resno[this.index]},bm.resno.set=function(e){this.residueStore.resno[this.index]=e},bm.sstruc.get=function(){return this.residueStore.getSstruc(this.index)},bm.sstruc.set=function(e){this.residueStore.setSstruc(this.index,e)},bm.inscode.get=function(){return this.residueStore.getInscode(this.index)},bm.inscode.set=function(e){this.residueStore.setInscode(this.index,e)},bm.residueType.get=function(){return this.residueMap.get(this.residueStore.residueTypeId[this.index])},bm.resname.get=function(){return this.residueType.resname},bm.hetero.get=function(){return this.residueType.hetero},bm.moleculeType.get=function(){return this.residueType.moleculeType},bm.backboneType.get=function(){return this.residueType.backboneType},bm.backboneStartType.get=function(){return this.residueType.backboneStartType},bm.backboneEndType.get=function(){return this.residueType.backboneEndType},bm.traceAtomIndex.get=function(){return this.residueType.traceAtomIndex+this.atomOffset},bm.direction1AtomIndex.get=function(){return this.residueType.direction1AtomIndex+this.atomOffset},bm.direction2AtomIndex.get=function(){return this.residueType.direction2AtomIndex+this.atomOffset},bm.backboneStartAtomIndex.get=function(){return this.residueType.backboneStartAtomIndex+this.atomOffset},bm.backboneEndAtomIndex.get=function(){return this.residueType.backboneEndAtomIndex+this.atomOffset},bm.rungEndAtomIndex.get=function(){return this.residueType.rungEndAtomIndex+this.atomOffset},bm.x.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.x[t];return e/this.atomCount},bm.y.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.y[t];return e/this.atomCount},bm.z.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.z[t];return e/this.atomCount},ym.prototype.eachAtom=function(e,t){var n=this.atomCount,r=this.atomOffset,i=this.structure._ap,o=r+n;if(t&&t.atomOnlyTest)for(var a=t.atomOnlyTest,s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)},ym.prototype.positionToArray=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t+0]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},ym.prototype.isProtein=function(){return 3===this.residueType.moleculeType},ym.prototype.isNucleic=function(){var e=this.residueType.moleculeType;return 4===e||5===e},ym.prototype.isRna=function(){return 4===this.residueType.moleculeType},ym.prototype.isDna=function(){return 5===this.residueType.moleculeType},ym.prototype.isCg=function(){var e=this.residueType.backboneType;return 4===e||5===e||6===e},ym.prototype.isPolymer=function(){if(this.structure.entityList.length>0)return this.entity.isPolymer();var e=this.residueType.moleculeType;return 3===e||4===e||5===e},ym.prototype.isHetero=function(){return 1===this.residueType.hetero},ym.prototype.isWater=function(){return 1===this.residueType.moleculeType},ym.prototype.isIon=function(){return 2===this.residueType.moleculeType},ym.prototype.isSaccharide=function(){return 6===this.residueType.moleculeType},ym.prototype.isStandardAminoacid=function(){return this.residueType.isStandardAminoacid()},ym.prototype.isStandardBase=function(){return this.residueType.isStandardBase()},ym.prototype.isHelix=function(){return Ad.includes(this.sstruc)},ym.prototype.isSheet=function(){return Td.includes(this.sstruc)},ym.prototype.isTurn=function(){return Rd.includes(this.sstruc)&&this.isProtein()},ym.prototype.getAtomType=function(e){return this.atomMap.get(this.atomStore.atomTypeId[e])},ym.prototype.getResname1=function(){return zd[this.resname.toUpperCase()]||"X"},ym.prototype.getBackboneType=function(e){switch(e){case-1:return this.residueType.backboneStartType;case 1:return this.residueType.backboneEndType;default:return this.residueType.backboneType}},ym.prototype.getAtomIndexByName=function(e){var t=this.residueType.getAtomIndexByName(e);return void 0!==t&&(t+=this.atomOffset),t},ym.prototype.hasAtomWithName=function(e){return this.residueType.hasAtomWithName(e)},ym.prototype.getAtomnameList=function(){console.warn("getAtomnameList - might be expensive");for(var e=this.atomCount,t=this.atomOffset,n=new Array(e),r=0;r<e;++r)n[r]=this.getAtomType(t+r).atomname;return n},ym.prototype.connectedTo=function(e){var t=this.structure.getAtomProxy(this.backboneEndAtomIndex),n=this.structure.getAtomProxy(e.backboneStartAtomIndex);return!(!t||!n)&&t.connectedTo(n)},ym.prototype.getNextConnectedResidue=function(){var e=this.chainStore.residueOffset[this.chainIndex],t=this.chainStore.residueCount[this.chainIndex],n=this.index+1;if(n<e+t){var r=this.structure.getResidueProxy(n);if(this.connectedTo(r))return r}else if(n===e+t){var i=this.structure.getResidueProxy(e);if(this.connectedTo(i))return i}},ym.prototype.getPreviousConnectedResidue=function(e){var t=this.chainStore.residueOffset[this.chainIndex],n=this.index-1;if(n>=t){var r=Sa(e,this.structure.getResidueProxy());if(r.index=n,r.connectedTo(this))return r}else if(n===t-1){var i=this.chainStore.residueCount[this.chainIndex],o=Sa(e,this.structure.getResidueProxy());if(o.index=t+i-1,o.connectedTo(this))return o}},ym.prototype.getBonds=function(){return this.residueType.getBonds(this)},ym.prototype.getRings=function(){return this.residueType.getRings()},ym.prototype.getAromaticRings=function(){return this.residueType.getAromaticRings(this)},ym.prototype.qualifiedName=function(e){void 0===e&&(e=!1);var t="";return this.resname&&!e&&(t+="["+this.resname+"]"),void 0!==this.resno&&(t+=this.resno),this.inscode&&(t+="^"+this.inscode),this.chain&&(t+=":"+this.chainname),t+="/"+this.modelIndex},ym.prototype.clone=function(){return new ym(this.structure,this.index)},ym.prototype.toObject=function(){return{index:this.index,chainIndex:this.chainIndex,atomOffset:this.atomOffset,atomCount:this.atomCount,resno:this.resno,resname:this.resname,sstruc:this.sstruc}},Object.defineProperties(ym.prototype,bm);var xm=function(e,t,n){this.structure=e,this.residueIndexStart=t,this.residueIndexEnd=n,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueCount=n-t+1;var r=this.structure.getResidueProxy(this.residueIndexStart),i=this.structure.getResidueProxy(this.residueIndexEnd);this.isPrevConnected=void 0!==r.getPreviousConnectedResidue();var o=i.getNextConnectedResidue();this.isNextConnected=void 0!==o,this.isNextNextConnected=void 0!==o&&void 0!==o.getNextConnectedResidue(),this.isCyclic=i.connectedTo(r),this.__residueProxy=this.structure.getResidueProxy()},wm={chainIndex:{configurable:!0},modelIndex:{configurable:!0},chainname:{configurable:!0}};wm.chainIndex.get=function(){return this.residueStore.chainIndex[this.residueIndexStart]},wm.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},wm.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},xm.prototype.isProtein=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isProtein()},xm.prototype.isCg=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isCg()},xm.prototype.isNucleic=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isNucleic()},xm.prototype.getMoleculeType=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.moleculeType},xm.prototype.getBackboneType=function(e){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.getBackboneType(e)},xm.prototype.getAtomIndexByType=function(e,t){this.isCyclic?-1===e?e=this.residueCount-1:e===this.residueCount&&(e=0):(-1!==e||this.isPrevConnected||(e+=1),e!==this.residueCount||this.isNextNextConnected||(e-=1));var n,r=this.__residueProxy;switch(r.index=this.residueIndexStart+e,t){case"trace":n=r.traceAtomIndex;break;case"direction1":n=r.direction1AtomIndex;break;case"direction2":n=r.direction2AtomIndex;break;default:n=r.getAtomIndexByName(t)}return n},xm.prototype.eachAtom=function(e,t){this.eachResidue((function(n){n.eachAtom(e,t)}))},xm.prototype.eachAtomN=function(e,t,n){for(var r=this,i=this.residueCount,o=new Array(e),a=0;a<e;++a)o[a]=r.structure.getAtomProxy(r.getAtomIndexByType(a,n));t.apply(this,o);for(var s=e;s<i;++s){for(var l=1;l<e;++l)o[l-1].index=o[l].index;o[e-1].index=r.getAtomIndexByType(s,n),t.apply(r,o)}},xm.prototype.eachResidue=function(e){for(var t=this.structure.getResidueProxy(),n=this.residueCount,r=this.residueIndexStart,i=0;i<n;++i)t.index=r+i,e(t)},xm.prototype.qualifiedName=function(){var e=this.structure.getResidueProxy(this.residueIndexStart),t=this.structure.getResidueProxy(this.residueIndexEnd);return e.qualifiedName()+" - "+t.qualifiedName()},Object.defineProperties(xm.prototype,wm);var _m=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore},Sm={entity:{configurable:!0},model:{configurable:!0},entityIndex:{configurable:!0},modelIndex:{configurable:!0},residueOffset:{configurable:!0},residueCount:{configurable:!0},residueEnd:{configurable:!0},atomOffset:{configurable:!0},atomEnd:{configurable:!0},atomCount:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0}};Sm.entity.get=function(){return this.structure.entityList[this.entityIndex]},Sm.model.get=function(){return this.structure.getModelProxy(this.modelIndex)},Sm.entityIndex.get=function(){return this.chainStore.entityIndex[this.index]},Sm.entityIndex.set=function(e){this.chainStore.entityIndex[this.index]=e},Sm.modelIndex.get=function(){return this.chainStore.modelIndex[this.index]},Sm.modelIndex.set=function(e){this.chainStore.modelIndex[this.index]=e},Sm.residueOffset.get=function(){return this.chainStore.residueOffset[this.index]},Sm.residueOffset.set=function(e){this.chainStore.residueOffset[this.index]=e},Sm.residueCount.get=function(){return this.chainStore.residueCount[this.index]},Sm.residueCount.set=function(e){this.chainStore.residueCount[this.index]=e},Sm.residueEnd.get=function(){return this.residueOffset+this.residueCount-1},Sm.atomOffset.get=function(){return this.residueStore.atomOffset[this.residueOffset]},Sm.atomEnd.get=function(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1},Sm.atomCount.get=function(){return 0===this.residueCount?0:this.atomEnd-this.atomOffset+1},Sm.chainname.get=function(){return this.chainStore.getChainname(this.index)},Sm.chainname.set=function(e){this.chainStore.setChainname(this.index,e)},Sm.chainid.get=function(){return this.chainStore.getChainid(this.index)},Sm.chainid.set=function(e){this.chainStore.setChainid(this.index,e)},_m.prototype.eachAtom=function(e,t){this.eachResidue((function(n){n.eachAtom(e,t)}),t)},_m.prototype.eachResidue=function(e,t){var n=this.residueCount,r=this.residueOffset,i=this.structure._rp,o=r+n;if(t&&t.test){var a=t.residueOnlyTest;if(a)for(var s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)}else for(var u=r;u<o;++u)i.index=u,e(i)},_m.prototype.eachResidueN=function(e,t){var n=this.residueCount,r=this.residueOffset,i=r+n;if(!(n<e)){for(var o=new Array(e),a=0;a<e;++a)o[a]=this.structure.getResidueProxy(r+a);t.apply(this,o);for(var s=r+e;s<i;++s){for(var l=0;l<e;++l)o[l].index+=1;t.apply(this,o)}}},_m.prototype.eachPolymer=function(e,t){for(var n=0,r=0,i=t?t.residueOnlyTest:void 0,o=this.model.structure,a=this.residueCount,s=this.residueOffset,l=s+a,u=this.structure.getResidueProxy(),c=this.structure.getResidueProxy(s),d=this.structure.getAtomProxy(),f=this.structure.getAtomProxy(),p=!0,h=s+1;h<l;++h){u.index=c.index,c.index=h;var m=p?u.backboneEndType:u.backboneType,g=c.backboneType;p&&(n=u.index,p=!1),r=c.index,0!==m&&m===g?(d.index=u.backboneEndAtomIndex,f.index=c.backboneStartAtomIndex,d&&f&&d.connectedTo(f)&&(!i||i(u)&&i(c))||(u.index-n>1&&e(new xm(o,n,u.index)),n=r)):(0!==m&&u.index-n>1&&e(new xm(o,n,u.index)),n=r)}r-n>1&&this.structure.getResidueProxy(n).backboneEndType&&e(new xm(o,n,r))},_m.prototype.qualifiedName=function(){return":"+this.chainname+"/"+this.modelIndex},_m.prototype.clone=function(){return new _m(this.structure,this.index)},_m.prototype.toObject=function(){return{index:this.index,residueOffset:this.residueOffset,residueCount:this.residueCount,chainname:this.chainname}},Object.defineProperties(_m.prototype,Sm);var Cm=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.modelStore=e.modelStore,this.chainStore=e.chainStore,this.residueStore=e.residueStore},Em={chainOffset:{configurable:!0},chainCount:{configurable:!0},residueOffset:{configurable:!0},atomOffset:{configurable:!0},chainEnd:{configurable:!0},residueEnd:{configurable:!0},atomEnd:{configurable:!0},residueCount:{configurable:!0},atomCount:{configurable:!0}};Em.chainOffset.get=function(){return this.modelStore.chainOffset[this.index]},Em.chainOffset.set=function(e){this.modelStore.chainOffset[this.index]=e},Em.chainCount.get=function(){return this.modelStore.chainCount[this.index]},Em.chainCount.set=function(e){this.modelStore.chainCount[this.index]=e},Em.residueOffset.get=function(){return this.chainStore.residueOffset[this.chainOffset]},Em.atomOffset.get=function(){return this.residueStore.atomOffset[this.residueOffset]},Em.chainEnd.get=function(){return this.chainOffset+this.chainCount-1},Em.residueEnd.get=function(){return this.chainStore.residueOffset[this.chainEnd]+this.chainStore.residueCount[this.chainEnd]-1},Em.atomEnd.get=function(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1},Em.residueCount.get=function(){return 0===this.chainCount?0:this.residueEnd-this.residueOffset+1},Em.atomCount.get=function(){return 0===this.residueCount?0:this.atomEnd-this.atomOffset+1},Cm.prototype.eachAtom=function(e,t){this.eachChain((function(n){n.eachAtom(e,t)}),t)},Cm.prototype.eachResidue=function(e,t){this.eachChain((function(n){n.eachResidue(e,t)}),t)},Cm.prototype.eachPolymer=function(e,t){if(t&&t.chainOnlyTest){var n=t.chainOnlyTest;this.eachChain((function(r){n(r)&&r.eachPolymer(e,t)}))}else this.eachChain((function(n){n.eachPolymer(e,t)}))},Cm.prototype.eachChain=function(e,t){var n=this.chainCount,r=this.chainOffset,i=this.structure._cp,o=r+n;if(t&&t.test){var a=t.chainOnlyTest;if(a)for(var s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)}else for(var u=r;u<o;++u)i.index=u,e(i)},Cm.prototype.qualifiedName=function(){return"/"+this.index},Cm.prototype.clone=function(){return new Cm(this.structure,this.index)},Cm.prototype.toObject=function(){return{index:this.index,chainOffset:this.chainOffset,chainCount:this.chainCount}},Object.defineProperties(Cm.prototype,Em);var km=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),this.signals={refreshed:new fs},this.init(e,t)},Pm={type:{configurable:!0}};km.prototype.init=function(e,t){this.name=e,this.path=t,this.title="",this.id="",this.data={structure:this,"@spatialLookup":void 0,"@valenceModel":void 0},this.header={},this.extraData={},this.atomSetCache={},this.atomSetDict={},this.biomolDict={},this.entityList=[],this.unitcell=void 0,this.frames=[],this.boxes=[],this.validation=void 0,this.bondStore=new hh(0),this.backboneBondStore=new hh(0),this.rungBondStore=new hh(0),this.atomStore=new mh(0),this.residueStore=new gh(0),this.chainStore=new vh(0),this.modelStore=new yh(0),this.atomMap=new um(this),this.residueMap=new mm(this),this.bondHash=void 0,this.spatialHash=void 0,this.atomSet=void 0,this.bondSet=void 0,this.center=new U,this.boundingBox=new Z,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy()},Pm.type.get=function(){return"Structure"},km.prototype.finalizeAtoms=function(){this.atomSet=this.getAtomSet(),this.atomCount=this.atomStore.count,this.boundingBox=this.getBoundingBox(void 0,this.boundingBox),this.center=this.boundingBox.getCenter(new U),this.spatialHash=new md(this.atomStore,this.boundingBox)},km.prototype.finalizeBonds=function(){var e=this;for(var t in this.bondSet=this.getBondSet(),this.bondCount=this.bondStore.count,this.bondHash=new ph(this.bondStore,this.atomStore.count),this.atomSetCache={},this.atomSetDict.rung||(this.atomSetDict.rung=this.getAtomSet(!1)),e.atomSetDict)e.atomSetCache["__"+t]=e.atomSetDict[t].clone()},km.prototype.getBondProxy=function(e){return new gm(this,e)},km.prototype.getAtomProxy=function(e){return new Sh(this,e)},km.prototype.getResidueProxy=function(e){return new ym(this,e)},km.prototype.getChainProxy=function(e){return new _m(this,e)},km.prototype.getModelProxy=function(e){return new Cm(this,e)},km.prototype.getBondSet=function(){var e=this.bondStore.count,t=new bd(e),n=this.atomSet;if(n)if(n.isAllSet())t.setAll();else if(n.isAllClear())t.clearAll();else for(var r=this.getBondProxy(),i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index);else t.setAll();return t},km.prototype.getBackboneBondSet=function(){var e=this.backboneBondStore.count,t=new bd(e),n=this.atomSetCache.__backbone;if(n){var r=this.getBondProxy();r.bondStore=this.backboneBondStore;for(var i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index)}else t.setAll();return t},km.prototype.getRungBondSet=function(){var e=this.rungBondStore.count,t=new bd(e),n=this.atomSetCache.__rung;if(n){var r=this.getBondProxy();r.bondStore=this.rungBondStore;for(var i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index)}else t.setAll();return t},km.prototype.getAtomSet=function(e){var t=this.atomStore.count;if(void 0===e)return new bd(t,!0);if(e instanceof bd)return e;if(!0===e)return new bd(t,!0);if(e&&e.test){var n=e.string;if(n in this.atomSetCache)return this.atomSetCache[n];if(""===n)return new bd(t,!0);var r=new bd(t);return this.eachAtom((function(e){r.set(e.index)}),e),this.atomSetCache[n]=r,r}return!1===e?new bd(t):new bd(t,!0)},km.prototype.getAtomSetWithinSelection=function(e,t){var n=this.spatialHash,r=this.getAtomSet(!1),i=this.getAtomProxy();return n?(this.getAtomSet(e).forEach((function(e){i.index=e,n.within(i.x,i.y,i.z,t).forEach((function(e){r.set(e)}))})),r):r},km.prototype.getAtomSetWithinPoint=function(e,t){var n=e,r=this.getAtomSet(!1);return this.spatialHash?(this.spatialHash.within(n.x,n.y,n.z,t).forEach((function(e){r.set(e)})),r):r},km.prototype.getAtomSetWithinVolume=function(e,t,n,r,i){var o=new dh(e,n,r,i),a=o.getDataPosition(),s=a.length,l=o.matrix.getMaxScaleOnAxis(),u=this.getAtomSet(!1);if(!this.spatialHash)return u;for(var c=0;c<s;c+=3)this.spatialHash.within(a[c],a[c+1],a[c+2],l).forEach((function(e){u.set(e)}));return u},km.prototype.getAtomSetWithinGroup=function(e){var t=this.atomStore.residueIndex,n=this.getAtomSet(!1),r=this.getResidueProxy();return this.getAtomSet(e).forEach((function(e){r.index=t[e];for(var i=r.atomOffset;i<=r.atomEnd;++i)n.set(i)})),n},km.prototype.getSelection=function(){return!1},km.prototype.getStructure=function(){return this},km.prototype.eachEntity=function(e,t){this.entityList.forEach((function(n){void 0!==t&&n.getEntityType()!==t||e(n)}))},km.prototype.eachBond=function(e,t){var n,r=this.getBondProxy();if(t&&t.test&&(n=this.getBondSet(),this.bondSet&&n.intersection(this.bondSet)),n)n.forEach((function(t){r.index=t,e(r)}));else for(var i=this.bondStore.count,o=0;o<i;++o)r.index=o,e(r)},km.prototype.eachAtom=function(e,t){if(t&&t.test)this.eachModel((function(n){n.eachAtom(e,t)}),t);else for(var n=this.atomStore.count,r=this.getAtomProxy(),i=0;i<n;++i)r.index=i,e(r)},km.prototype.eachResidue=function(e,t){if(t&&t.test){var n=this.modelStore.count,r=this.getModelProxy(),i=t.modelOnlyTest;if(i)for(var o=0;o<n;++o)r.index=o,i(r)&&r.eachResidue(e,t);else for(var a=0;a<n;++a)r.index=a,r.eachResidue(e,t)}else for(var s=this.residueStore.count,l=this.getResidueProxy(),u=0;u<s;++u)l.index=u,e(l)},km.prototype.eachResidueN=function(e,t){var n=this.residueStore.count;if(!(n<e)){for(var r=new Array(e),i=0;i<e;++i)r[i]=this.getResidueProxy(i);t.apply(this,r);for(var o=e;o<n;++o){for(var a=0;a<e;++a)r[a].index+=1;t.apply(this,r)}}},km.prototype.eachPolymer=function(e,t){if(t&&t.modelOnlyTest){var n=t.modelOnlyTest;this.eachModel((function(r){n(r)&&r.eachPolymer(e,t)}))}else this.eachModel((function(n){n.eachPolymer(e,t)}))},km.prototype.eachChain=function(e,t){if(t&&t.test)this.eachModel((function(n){n.eachChain(e,t)}));else for(var n=this.chainStore.count,r=this.getChainProxy(),i=0;i<n;++i)r.index=i,e(r)},km.prototype.eachModel=function(e,t){var n=this.modelStore.count,r=this.getModelProxy();if(t&&t.test){var i=t.modelOnlyTest;if(i)for(var o=0;o<n;++o)r.index=o,i(r)&&e(r);else for(var a=0;a<n;++a)r.index=a,e(r)}else for(var s=0;s<n;++s)r.index=s,e(r)},km.prototype.getAtomData=function(e){var t=Object.assign({},e);t.colorParams&&(t.colorParams.structure=this.getStructure());var n,r,i=t.what,o=Sa(t.atomSet,this.atomSet),a={},s=this.getAtomProxy(),l=o.getSize();i&&!i.position||(a.position=new Float32Array(3*l)),i&&!i.color||!t.colorParams||(a.color=new Float32Array(3*l),r=pl.getScheme(t.colorParams)),i&&!i.picking||(a.picking=new Tf(new Float32Array(l),this.getStructure())),i&&!i.radius||(a.radius=new Float32Array(l),n=new sh(t.radiusParams)),i&&!i.index||(a.index=new Uint32Array(l));var u=a.position,c=a.color,d=a.picking,f=a.radius,p=a.index;return o.forEach((function(e,t){var i=3*t;s.index=e,u&&s.positionToArray(u,i),c&&r.atomColorToArray(s,c,i),d&&(d.array[t]=e),f&&(f[t]=n.atomRadius(s)),p&&(p[t]=e)})),a},km.prototype.getBondData=function(e){var t=Object.assign({},e);t.colorParams&&(t.colorParams.structure=this.getStructure());var n,r,i=t.what,o=Sa(t.bondSet,this.bondSet),a=Sa(t.multipleBond,"off"),s="off"!==a,l="offset"===a,u=Sa(t.bondScale,.4),c=Sa(t.bondSpacing,1),d={},f=this.getBondProxy();t.bondStore&&(f.bondStore=t.bondStore);var p,h=this.getAtomProxy(),m=this.getAtomProxy();if(s){var g=f.bondStore.bondOrder;p=0,o.forEach((function(e){p+=g[e]}))}else p=o.getSize();i&&!i.position||(d.position1=new Float32Array(3*p),d.position2=new Float32Array(3*p)),i&&!i.color||!t.colorParams||(d.color=new Float32Array(3*p),d.color2=new Float32Array(3*p),r=pl.getScheme(t.colorParams)),i&&!i.picking||(d.picking=new If(new Float32Array(p),this.getStructure(),t.bondStore)),(!i||i.radius||s&&i.position)&&(n=new sh(t.radiusParams)),i&&!i.radius||(d.radius=new Float32Array(p),t.radius2&&(d.radius2=new Float32Array(p)));var v,y,b,x,w,_,S=d.position1,C=d.position2,E=d.color,k=d.color2,P=d.picking,M=d.radius,A=d.radius2,T=0,R=new U,I=new U,O=new U;return o.forEach((function(e){if(y=3*T,f.index=e,h.index=f.atomIndex1,m.index=f.atomIndex2,x=f.bondOrder,S)if(s&&x>1){var t=n.atomRadius(h);_=t*u/(.5*x),f.calculateShiftDir(O),l?(w=2*c*t,O.multiplyScalar(w),O.negate(),I.subVectors(m,h).multiplyScalar(Math.max(.1,w/1.88)),h.positionToArray(S,y),m.positionToArray(C,y),x>=2&&(R.addVectors(h,O).add(I).toArray(S,y+3),R.addVectors(m,O).sub(I).toArray(C,y+3),x>=3&&(R.subVectors(h,O).add(I).toArray(S,y+6),R.subVectors(m,O).sub(I).toArray(C,y+6)))):(w=(c-u)*t,O.multiplyScalar(w),2===x?(R.addVectors(h,O).toArray(S,y),R.subVectors(h,O).toArray(S,y+3),R.addVectors(m,O).toArray(C,y),R.subVectors(m,O).toArray(C,y+3)):3===x?(h.positionToArray(S,y),R.addVectors(h,O).toArray(S,y+3),R.subVectors(h,O).toArray(S,y+6),m.positionToArray(C,y),R.addVectors(m,O).toArray(C,y+3),R.subVectors(m,O).toArray(C,y+6)):(h.positionToArray(S,y),m.positionToArray(C,y)))}else h.positionToArray(S,y),m.positionToArray(C,y);if(E&&k&&(r.bondColorToArray(f,1,E,y),r.bondColorToArray(f,0,k,y),s&&x>1))for(v=1;v<x;++v)du(E,y,b=3*v+y,3),du(k,y,b,3);if(P&&P.array&&(P.array[T]=e,s&&x>1))for(v=1;v<x;++v)P.array[T+v]=e;if(M&&(M[T]=n.atomRadius(h),s&&x>1))for(_=M[T]*u/(l?1:.5*x),v=l?1:0;v<x;++v)M[T+v]=_;if(A&&(A[T]=n.atomRadius(m),s&&x>1))for(_=A[T]*u/(l?1:.5*x),v=l?1:0;v<x;++v)A[T+v]=_;T+=s?x:1})),d},km.prototype.getBackboneAtomData=function(e){return e=Object.assign({atomSet:this.atomSetCache.__backbone},e),this.getAtomData(e)},km.prototype.getBackboneBondData=function(e){return e=Object.assign({bondSet:this.getBackboneBondSet(),bondStore:this.backboneBondStore},e),this.getBondData(e)},km.prototype.getRungAtomData=function(e){return e=Object.assign({atomSet:this.atomSetCache.__rung},e),this.getAtomData(e)},km.prototype.getRungBondData=function(e){return e=Object.assign({bondSet:this.getRungBondSet(),bondStore:this.rungBondStore},e),this.getBondData(e)},km.prototype.getBoundingBox=function(e,t){sl&&rl.time("getBoundingBox"),t=t||new Z;var n=1/0,r=1/0,i=1/0,o=-1/0,a=-1/0,s=-1/0;return this.eachAtom((function(e){var t=e.x,l=e.y,u=e.z;t<n&&(n=t),l<r&&(r=l),u<i&&(i=u),t>o&&(o=t),l>a&&(a=l),u>s&&(s=u)}),e),t.min.set(n,r,i),t.max.set(o,a,s),sl&&rl.timeEnd("getBoundingBox"),t},km.prototype.getPrincipalAxes=function(e){sl&&rl.time("getPrincipalAxes");var t=0,n=new tp(3,this.atomCount),r=n.data;return this.eachAtom((function(e){r[t+0]=e.x,r[t+1]=e.y,r[t+2]=e.z,t+=3}),e),sl&&rl.timeEnd("getPrincipalAxes"),new ch(n)},km.prototype.atomCenter=function(e){return e?this.getBoundingBox(e).getCenter(new U):this.center.clone()},km.prototype.hasCoords=function(){if(void 0===this._hasCoords){var e=this.atomStore;this._hasCoords=0!==pu(e.x)||0!==fu(e.x)||0!==pu(e.y)||0!==fu(e.y)||0!==pu(e.z)||0!==fu(e.z)||e.count/this.modelStore.count===1}return this._hasCoords},km.prototype.getSequence=function(e){var t=[],n=this.getResidueProxy();return this.eachAtom((function(e){n.index=e.residueIndex,e.index===n.traceAtomIndex&&t.push(n.getResname1())}),e),t},km.prototype.getAtomIndices=function(e){if(e&&e.string){var t=[];return this.eachAtom((function(e){t.push(e.index)}),e),new Uint32Array(t)}return this.getAtomData({what:{index:!0}}).index},km.prototype.getChainnameCount=function(e){var t=new Set;return this.eachChain((function(e){e.residueCount&&t.add(e.chainname)}),e),t.size},km.prototype.updatePosition=function(e){var t=0;this.eachAtom((function(n){n.positionFromArray(e,t),t+=3}),void 0),this._hasCoords=void 0},km.prototype.refreshPosition=function(){this.getBoundingBox(void 0,this.boundingBox),this.boundingBox.getCenter(this.center),this.spatialHash=new md(this.atomStore,this.boundingBox)},km.prototype.dispose=function(){this.frames&&(this.frames.length=0),this.boxes&&(this.boxes.length=0),this.bondStore.dispose(),this.backboneBondStore.dispose(),this.rungBondStore.dispose(),this.atomStore.dispose(),this.residueStore.dispose(),this.chainStore.dispose(),this.modelStore.dispose(),delete this.bondStore,delete this.atomStore,delete this.residueStore,delete this.chainStore,delete this.modelStore,delete this.frames,delete this.boxes,delete this.bondSet,delete this.atomSet},Object.defineProperties(km.prototype,Pm);var Mm=new Z,Am=[ld,id,ud,sd,cd,od,rd,ad,fd,dd,pd,hd],Tm={aspectRatio:1.5,sphereDetail:2,radialSegments:50,disableImpostor:!1,openEnded:!1,dashedCylinder:!1,labelParams:{},pointSize:2,sizeAttenuation:!1,useTexture:!0,lineWidth:2},Rm=function(e,t){var n=this;void 0===e&&(e="shape"),void 0===t&&(t={}),this.boundingBox=new Z,this.bufferList=[],this.meshCount=0,this._primitiveData={},this.name=e,this.parameters=Ca(t,Tm),Am.forEach((function(e){Object.keys(e.fields).forEach((function(t){n._primitiveData[e.getShapeKey(t)]=[]})),n._primitiveData[e.getShapeKey("name")]=[]}))},Im={center:{configurable:!0},type:{configurable:!0}};Rm.prototype.addBuffer=function(e){this.bufferList.push(e);var t=e.geometry;return t.boundingBox||t.computeBoundingBox(),this.boundingBox.union(t.boundingBox),this},Rm.prototype.addMesh=function(e,t,n,r,i){e=Ga(e),t=Ga(t),Array.isArray(n)&&(n=Ba(n,e.length)),r&&(r=Ga(r));var o={position:e,color:t,index:n,normal:r},a=new Hf(this,Object.assign({serial:this.meshCount,name:i},o)),s=new Lp(Object.assign({picking:a},o));return this.bufferList.push(s),Mm.setFromArray(e),this.boundingBox.union(Mm),this.meshCount+=1,this},Rm.prototype.addSphere=function(e,t,n,r){return rd.objectToShape(this,{position:e,color:t,radius:n,name:r}),this},Rm.prototype.addEllipsoid=function(e,t,n,r,i,o){return cd.objectToShape(this,{position:e,color:t,radius:n,majorAxis:r,minorAxis:i,name:o}),this},Rm.prototype.addTorus=function(e,t,n,r,i,o){return dd.objectToShape(this,{position:e,color:t,radius:n,majorAxis:r,minorAxis:i,name:o}),this},Rm.prototype.addCylinder=function(e,t,n,r,i){return sd.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},Rm.prototype.addCone=function(e,t,n,r,i){return ud.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},Rm.prototype.addArrow=function(e,t,n,r,i){return ld.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},Rm.prototype.addBox=function(e,t,n,r,i,o){return id.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},Rm.prototype.addOctahedron=function(e,t,n,r,i,o){return od.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},Rm.prototype.addTetrahedron=function(e,t,n,r,i,o){return ad.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},Rm.prototype.addText=function(e,t,n,r){return fd.objectToShape(this,{position:e,color:t,size:n,text:r}),this},Rm.prototype.addPoint=function(e,t,n){return pd.objectToShape(this,{position:e,color:t,name:n}),this},Rm.prototype.addWideline=function(e,t,n,r){return hd.objectToShape(this,{position1:e,position2:t,color:n,name:r}),this},Rm.prototype.addLabel=function(e,t,n,r){return console.warn("Shape.addLabel is deprecated, use .addText instead"),this.addText(e,t,n,r)},Rm.prototype.getBufferList=function(){var e=this,t=[];return Am.forEach((function(n){e._primitiveData[n.getShapeKey("color")].length&&t.push(n.bufferFromShape(e,e.parameters))})),this.bufferList.concat(t)},Rm.prototype.dispose=function(){var e=this;this.bufferList.forEach((function(e){e.dispose()})),this.bufferList.length=0,Am.forEach((function(t){Object.keys(t.fields).forEach((function(n){e._primitiveData[t.getShapeKey(n)].length=0})),e._primitiveData[t.getShapeKey("name")].length=0}))},Im.center.get=function(){return this._center||(this._center=this.boundingBox.getCenter(new U)),this._center},Im.type.get=function(){return"Shape"},Object.defineProperties(Rm.prototype,Im);var Om=function(e){function t(t,n,r){Array.isArray(t)||(t=[t]),e.call(this,t,n,r),this.type="buffer",this.parameters=Object.assign({},this.parameters,{colorScheme:null,colorScale:null,colorValue:null,colorDomain:null,colorMode:null}),this.buffer=t,this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){e.prototype.init.call(this,t),this.build()},t.prototype.create=function(){this.bufferList.push.apply(this.bufferList,this.buffer)},t.prototype.attach=function(e){var t=this;this.bufferList.forEach((function(e){t.viewer.add(e),e.setParameters(t.getBufferParams())})),this.setVisibility(this.visible),e()},t}(kc),Lm=new j,Dm=new V;var Fm=function(e){function t(t,n,r){void 0===n&&(n={}),e.call(this,function(e,t){var n,r=t.attributes.position.array,i=t.index?t.index.array:void 0,o=e.position.length/3,a=r.length/3,s=o*a,l=new Float32Array(3*s),u=new Float32Array(3*s),c=new Float32Array(3*s);return i&&(n=Ba(o*i.length,s)),{position:l,color:c,index:n,normal:u,primitiveId:e.primitiveId||lu(o,a),picking:e.picking}}(t,r),n),this.updateNormals=!1;var i=r.attributes.position.array,o=r.attributes.normal.array,a=r.index?r.index.array:void 0;this.geoPosition=i,this.geoNormal=o,this.geoIndex=a,this.positionCount=t.position.length/3,this.geoPositionCount=i.length/3,this.transformedGeoPosition=new Float32Array(3*this.geoPositionCount),this.transformedGeoNormal=new Float32Array(3*this.geoPositionCount);var s=this.geometry.attributes;this.meshPosition=s.position.array,this.meshColor=s.color.array,this.meshNormal=s.normal.array,this.setAttributes(t),a&&(this.meshIndex=this.geometry.getIndex().array,this.makeIndex())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n,r,i,o,a,s,l,u,c,d=this.geometry.attributes,f=this.updateNormals;e.position&&(n=e.position,i=this.geoPosition,l=this.meshPosition,a=this.transformedGeoPosition,d.position.needsUpdate=!0,(f||t)&&(o=this.geoNormal,c=this.meshNormal,s=this.transformedGeoNormal,d.normal.needsUpdate=!0)),e.color&&(r=e.color,u=this.meshColor,d.color.needsUpdate=!0);for(var p=this.positionCount,h=this.geoPositionCount,m=0;m<p;++m){var g=void 0,v=void 0,y=m*h*3,b=3*m;if(n&&a&&l&&c&&i&&o&&(a.set(i),Lm.makeTranslation(n[b],n[b+1],n[b+2]),this.applyPositionTransform(Lm,m,b),Ic(Lm.elements,a),l.set(a,y),f&&s?(s.set(o),Dm.getNormalMatrix(Lm),Oc(Dm.elements,s),c.set(s,y)):t&&c.set(o,y)),r&&u)for(g=0;g<h;++g)u[v=y+3*g]=r[b],u[v+1]=r[b+1],u[v+2]=r[b+2]}},t.prototype.makeIndex=function(){var e=this.geoIndex,t=this.meshIndex;if(e)for(var n=this.positionCount,r=this.geoPositionCount,i=3*(e.length/3),o=0;o<n;++o){var a=o*i,s=a+i;t.set(e,a);for(var l=a;l<s;++l)t[l]+=o*r}},t}(Lp),Nm=new U,Bm=Object.assign({sphereDetail:1},Tp),zm=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new ir(1,Sa(n.sphereDetail,1))),this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Bm},t.prototype.applyPositionTransform=function(e,t){var n=this._radius[t];Nm.set(n,n,n),e.scale(Nm)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.radius&&(this._radius=t.radius),e.prototype.setAttributes.call(this,t,n)},Object.defineProperties(t.prototype,n),t}(Fm);vl.add("shader/SphereImpostor.vert","uniform mat4 projectionMatrixInverse;\nuniform float clipNear;\nvarying float vRadius;\nvarying float vRadiusSq;\nvarying vec3 vPoint;\nvarying vec3 vPointViewPosition;\nattribute vec2 mapping;\nattribute float radius;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#endif\n#include matrix_scale\nconst mat4 D = mat4(\n1.0, 0.0, 0.0, 0.0,\n0.0, 1.0, 0.0, 0.0,\n0.0, 0.0, 1.0, 0.0,\n0.0, 0.0, 0.0, -1.0\n);\nmat4 transpose( in mat4 inMatrix ) {\nvec4 i0 = inMatrix[0];\nvec4 i1 = inMatrix[1];\nvec4 i2 = inMatrix[2];\nvec4 i3 = inMatrix[3];\nmat4 outMatrix = mat4(\nvec4(i0.x, i1.x, i2.x, i3.x),\nvec4(i0.y, i1.y, i2.y, i3.y),\nvec4(i0.z, i1.z, i2.z, i3.z),\nvec4(i0.w, i1.w, i2.w, i3.w)\n);\nreturn outMatrix;\n}\nvoid ComputePointSizeAndPositionInClipCoordSphere(){\nvec2 xbc;\nvec2 ybc;\nmat4 T = mat4(\nradius, 0.0, 0.0, 0.0,\n0.0, radius, 0.0, 0.0,\n0.0, 0.0, radius, 0.0,\nposition.x, position.y, position.z, 1.0\n);\nmat4 R = transpose( projectionMatrix * modelViewMatrix * T );\nfloat A = dot( R[ 3 ], D * R[ 3 ] );\nfloat B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );\nfloat C = dot( R[ 0 ], D * R[ 0 ] );\nxbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nxbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nfloat sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;\nA = dot( R[ 3 ], D * R[ 3 ] );\nB = -2.0 * dot( R[ 1 ], D * R[ 3 ] );\nC = dot( R[ 1 ], D * R[ 1 ] );\nybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nfloat sy = abs( ybc[ 0 ] - ybc[ 1 ] ) * 0.5;\ngl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );\ngl_Position.xy -= mapping * vec2( sx, sy );\ngl_Position.xy *= gl_Position.w;\n}\nvoid main(void){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\nvRadius = radius * matrixScale( modelViewMatrix );\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nmvPosition.z -= vRadius;\ngl_Position = projectionMatrix * vec4( mvPosition.xyz, 1.0 );\nComputePointSizeAndPositionInClipCoordSphere();\nvRadiusSq = vRadius * vRadius;\nvec4 vPoint4 = projectionMatrixInverse * gl_Position;\nvPoint = vPoint4.xyz / vPoint4.w;\nvPointViewPosition = -mvPosition.xyz / mvPosition.w;\n}"),vl.add("shader/SphereImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 interiorColor;\nuniform float interiorDarkening;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float clipNear;\nuniform mat4 projectionMatrix;\nuniform float ortho;\nvarying float vRadius;\nvarying float vRadiusSq;\nvarying vec3 vPoint;\nvarying vec3 vPointViewPosition;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars_begin\n#include lights_physical_pars_fragment\n#endif\nbool flag2 = false;\nbool interior = false;\nvec3 cameraPos;\nvec3 cameraNormal;\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nfloat calcClip( vec3 cameraPos ){\nreturn dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );\n}\nbool Impostor( out vec3 cameraPos, out vec3 cameraNormal ){\nvec3 cameraSpherePos = -vPointViewPosition;\ncameraSpherePos.z += vRadius;\nvec3 rayOrigin = mix( vec3( 0.0, 0.0, 0.0 ), vPoint, ortho );\nvec3 rayDirection = mix( normalize( vPoint ), vec3( 0.0, 0.0, 1.0 ), ortho );\nvec3 cameraSphereDir = mix( cameraSpherePos, rayOrigin - cameraSpherePos, ortho );\nfloat B = dot( rayDirection, cameraSphereDir );\nfloat det = B * B + vRadiusSq - dot( cameraSphereDir, cameraSphereDir );\nif( det < 0.0 ){\ndiscard;\nreturn false;\n}\nfloat sqrtDet = sqrt( det );\nfloat posT = mix( B + sqrtDet, B + sqrtDet, ortho );\nfloat negT = mix( B - sqrtDet, sqrtDet - B, ortho );\ncameraPos = rayDirection * negT + rayOrigin;\n#ifdef NEAR_CLIP\nif( calcDepth( cameraPos ) <= 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\n}else if( calcClip( cameraPos ) > 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\nflag2 = true;\n}\n#else\nif( calcDepth( cameraPos ) <= 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\n}\n#endif\ncameraNormal = normalize( cameraPos - cameraSpherePos );\ncameraNormal *= float(!interior) * 2.0 - 1.0;\nreturn !interior;\n}\nvoid main(void){\nbool flag = Impostor( cameraPos, cameraNormal );\n#ifdef NEAR_CLIP\nif( calcClip( cameraPos ) > 0.0 )\ndiscard;\n#endif\ngl_FragDepthEXT = calcDepth( cameraPos );\nif( !flag ){\n#ifdef NEAR_CLIP\nif( flag2 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\n}else if( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n#else\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n#endif\n}\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\n#ifdef PICKING\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vNormal = cameraNormal;\nvec3 vViewPosition = -cameraPos;\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\n#include normal_fragment_begin\n#include lights_physical_fragment\n#include lights_fragment_begin\n#include lights_fragment_end\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\nif( interior ){\n#ifdef USE_INTERIOR_COLOR\noutgoingLight.xyz = interiorColor;\n#else\n#ifdef DIFFUSE_INTERIOR\noutgoingLight.xyz = vColor;\n#endif\n#endif\noutgoingLight.xyz *= 1.0 - interiorDarkening;\n}\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var jm=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,n,r),this.index=Ba(this.indexSize,this.attributeSize),this.makeIndex(),this.initIndex(this.index),this.addAttributes({mapping:{type:t,value:null}}),this.setAttributes({primitiveId:su(this.size)})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={attributeSize:{configurable:!0},indexSize:{configurable:!0}};return n.attributeSize.get=function(){return this.size*this.mappingSize},n.indexSize.get=function(){return this.size*this.mappingIndicesSize},t.prototype.addAttributes=function(t){var n={};for(var r in t){var i=t[r];n[r]={type:i.type,value:null}}e.prototype.addAttributes.call(this,n)},t.prototype.getAttributeIndex=function(e){return 3*e*this.mappingSize},t.prototype.setAttributes=function(e){e&&!e.position&&e.position1&&e.position2&&(e.position=ru(e.position1,e.position2));var t,n,r,i,o,a,s,l=this.size,u=this.mappingSize,c=this.geometry.attributes;for(var d in e)if("index"!==d&&"picking"!==d){n=e[d],r=(t=c[d]).itemSize,i=t.array;for(var f=0;f<l;++f){a=(o=f*r)*u;for(var p=0;p<u;++p){s=a+r*p;for(var h=0;h<r;++h)i[s+h]=n[o+h]}}t.needsUpdate=!0}},t.prototype.makeMapping=function(){for(var e=this.size,t=this.mapping,n=this.mappingSize,r=this.mappingItemSize,i=this.geometry.attributes.mapping.array,o=0;o<e;o++)i.set(t,o*r*n)},t.prototype.makeIndex=function(){for(var e=this.size,t=this.mappingSize,n=this.mappingIndices,r=this.mappingIndicesSize,i=this.index,o=0;o<e;o++){var a=o*r,s=o*t;i.set(n,a);for(var l=0;l<r;++l)i[a+l]+=s}},Object.defineProperties(t.prototype,n),t}(Ip),Hm=new Float32Array([-1,1,-1,-1,1,1,1,-1]),Um=new Uint16Array([0,1,2,1,3,2]),Vm=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"v2",t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return Hm},n.mappingIndices.get=function(){return Um},n.mappingIndicesSize.get=function(){return 6},n.mappingSize.get=function(){return 4},n.mappingItemSize.get=function(){return 2},Object.defineProperties(t.prototype,n),t}(jm),Gm=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.isImpostor=!0,this.vertexShader="SphereImpostor.vert",this.fragmentShader="SphereImpostor.frag",this.addUniforms({projectionMatrixInverse:{value:new j},ortho:{value:0}}),this.addAttributes({radius:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Vm),Wm=(Object.assign({disableImpostor:!1},Bm),function(e,t){return!nl||t&&t.disableImpostor?new zm(e,t):new Gm(e,t)});function $m(e,t,n,r){var i=n-e,o=r-t;return Math.sqrt(i*i+o*o)}xl.add("sphere",Wm),vl.add("shader/Point.vert","uniform float clipNear;\nuniform float clipRadius;\nuniform vec3 clipCenter;\nuniform float size;\nuniform float canvasHeight;\nuniform float pixelRatio;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\nvarying vec3 vViewPosition;\n#endif\n#include common\nvoid main(){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\n#include begin_vertex\n#include project_vertex\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * pixelRatio * ( ( canvasHeight / 2.0 ) / -mvPosition.z );\n#else\ngl_PointSize = size * pixelRatio;\n#endif\n#ifndef PICKING\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n#include radiusclip_vertex\n}"),vl.add("shader/Point.frag","uniform vec3 diffuse;\nuniform float opacity;\nuniform float clipNear;\nuniform float clipRadius;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\nvarying vec3 vViewPosition;\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( PICKING )\n#ifdef USE_MAP\nif( texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) ).a < 0.5 )\ndiscard;\n#endif\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 outgoingLight = vec3( 0.0 );\nvec4 diffuseColor = vec4( diffuse, 1.0 );\n#ifdef USE_MAP\ndiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif\n#include color_fragment\n#include alphatest_fragment\noutgoingLight = diffuseColor.rgb;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var qm=Object.assign({pointSize:1,sizeAttenuation:!0,sortParticles:!1,alphaTest:.5,useTexture:!1,forceTransparent:!1,edgeBleach:0},Tp),Xm=Object.assign({pointSize:{uniform:"size"},sizeAttenuation:{updateShader:!0},sortParticles:{},alphaTest:{updateShader:!0},useTexture:{updateShader:!0},forceTransparent:{},edgeBleach:{uniform:!0}},Rp),Km=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parameterTypes=Xm,this.vertexShader="Point.vert",this.fragmentShader="Point.frag",this.isPoint=!0,this.addUniforms({size:{value:this.parameters.pointSize},canvasHeight:{value:1},pixelRatio:{value:1},map:{value:null}})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return qm},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this),this.makeTexture();var t=this.material,n=this.wireframeMaterial,r=this.pickingMaterial;t.uniforms.map.value=this.tex,t.needsUpdate=!0,n.uniforms.map.value=this.tex,n.needsUpdate=!0,r.uniforms.map.value=this.tex,r.needsUpdate=!0},t.prototype.makeTexture=function(){this.tex&&this.tex.dispose(),this.tex=function(e){for(var t=e||{},n=Sa(t.width,256),r=Sa(t.height,256),i=[n/2,r/2],o=Math.min(n/2,r/2),a=Sa(t.delta,1/(o+1))*o,s=0,l=0,u=new Uint8Array(n*r*4),c=0,d=u.length;c<d;c+=4){var f=1-ns(o-a,o,$m(s,l,i[0],i[1]));u[c]=255*f,u[c+1]=255*f,u[c+2]=255*f,u[c+3]=255*f,++s===n&&(s=0,l++)}var p=new Y(u,n,r);return p.needsUpdate=!0,p}({delta:this.parameters.edgeBleach})},t.prototype.getDefines=function(t){var n=e.prototype.getDefines.call(this,t);return this.parameters.sizeAttenuation&&(n.USE_SIZEATTENUATION=1),this.parameters.useTexture&&(n.USE_MAP=1),this.parameters.alphaTest>0&&this.parameters.alphaTest<=1&&(n.ALPHATEST=this.parameters.alphaTest.toPrecision(2)),n},t.prototype.setUniforms=function(t){t&&void 0!==t.edgeBleach&&(this.makeTexture(),t.map=this.tex),e.prototype.setUniforms.call(this,t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.tex&&this.tex.dispose()},Object.defineProperties(t.prototype,n),t}(Ip);xl.add("point",Km);var Ym=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="dot",this.parameters=Object.assign({thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdOut:{type:"boolean",rebuild:!0},dotType:{type:"select",rebuild:!0,options:{"":"",sphere:"sphere",point:"point"}},radiusType:{type:"select",options:{"":"",value:"value","abs-value":"abs-value","value-min":"value-min",deviation:"deviation",size:"size"}},radius:{type:"number",precision:3,max:10,min:.001,property:"size"},scale:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,disableImpostor:!0,pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{colorScheme:{type:"select",update:"color",options:{"":"",value:"value",uniform:"uniform",random:"random"}}}),t instanceof Ep?(this.surface=void 0,this.volume=new dh(t)):(this.surface=t,this.volume=void 0),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"uniform"),n.colorValue=Sa(n.colorValue,14540253),this.thresholdType=Sa(n.thresholdType,"sigma"),this.thresholdMin=Sa(n.thresholdMin,2),this.thresholdMax=Sa(n.thresholdMax,1/0),this.thresholdOut=Sa(n.thresholdOut,!1),this.dotType=Sa(n.dotType,"point"),this.radius=Sa(n.radius,.1),this.scale=Sa(n.scale,1),this.pointSize=Sa(n.pointSize,1),this.sizeAttenuation=Sa(n.sizeAttenuation,!0),this.sortParticles=Sa(n.sortParticles,!1),this.useTexture=Sa(n.useTexture,!1),this.alphaTest=Sa(n.alphaTest,.5),this.forceTransparent=Sa(n.forceTransparent,!1),this.edgeBleach=Sa(n.edgeBleach,0),e.prototype.init.call(this,n),this.build()},t.prototype.attach=function(e){var t=this;this.bufferList.forEach((function(e){t.viewer.add(e)})),this.setVisibility(this.visible),e()},t.prototype.create=function(){var e={};if(this.volume){var t,n,r=this.volume;"sigma"===this.thresholdType?(t=r.getValueForSigma(this.thresholdMin),n=r.getValueForSigma(this.thresholdMax)):(t=this.thresholdMin,n=this.thresholdMax),r.setFilter(t,n,this.thresholdOut),Object.assign(e,{position:r.getDataPosition(),color:r.getDataColor(this.getColorParams())}),"sphere"===this.dotType&&Object.assign(e,{radius:r.getDataSize(this.radius,this.scale),picking:r.getDataPicking()})}else{var i=this.surface;Object.assign(e,{position:i.getPosition(),color:i.getColor(this.getColorParams())}),"sphere"===this.dotType&&Object.assign(e,{radius:i.getSize(this.radius,this.scale),picking:i.getPicking()})}"sphere"===this.dotType?this.dotBuffer=new Wm(e,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!1})):this.dotBuffer=new Km(e,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach})),this.bufferList.push(this.dotBuffer)},t.prototype.update=function(e){if(void 0===e&&(e={}),0!==this.bufferList.length){var t={};e.color&&(this.volume?Object.assign(t,{color:this.volume.getDataColor(this.getColorParams())}):Object.assign(t,{color:this.surface.getColor(this.getColorParams())})),"sphere"===this.dotType&&(e.radius||e.scale)&&(this.volume?Object.assign(t,{radius:this.volume.getDataSize(this.radius,this.scale)}):Object.assign(t,{radius:this.surface.getSize(this.radius,this.scale)})),this.dotBuffer.setAttributes(t)}},t.prototype.setParameters=function(t,n,r){return void 0===n&&(n={}),t&&void 0!==t.thresholdType&&this.volume instanceof Ep&&("value"===this.thresholdType&&"sigma"===t.thresholdType?(this.thresholdMin=this.volume.getSigmaForValue(this.thresholdMin),this.thresholdMax=this.volume.getSigmaForValue(this.thresholdMax)):"sigma"===this.thresholdType&&"value"===t.thresholdType&&(this.thresholdMin=this.volume.getValueForSigma(this.thresholdMin),this.thresholdMax=this.volume.getValueForSigma(this.thresholdMax)),this.thresholdType=t.thresholdType),t&&void 0!==t.radiusType&&("radius"===t.radiusType?this.radius=.1:this.radius=parseFloat(t.radiusType),n.radius=!0,"sphere"!==this.dotType||nl&&!this.disableImpostor||(r=!0)),t&&void 0!==t.radius&&(n.radius=!0,"sphere"!==this.dotType||nl&&!this.disableImpostor||(r=!0)),t&&void 0!==t.scale&&(n.scale=!0,"sphere"!==this.dotType||nl&&!this.disableImpostor||(r=!0)),e.prototype.setParameters.call(this,t,n,r),this},t}(kc);vl.add("shader/Image.vert","uniform float clipRadius;\nuniform vec3 clipCenter;\nvarying vec2 vUv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\nvoid main() {\n#include begin_vertex\n#include project_vertex\nvUv = uv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n}"),vl.add("shader/Image.frag","uniform sampler2D map;\nuniform float opacity;\nuniform vec2 mapSize;\nuniform float clipNear;\nuniform float clipRadius;\nvarying vec2 vUv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform sampler2D pickingMap;\nuniform float objectId;\n#else\n#include fog_pars_fragment\n#endif\n#if defined( CUBIC_INTERPOLATION )\n#if defined( CATMULROM_FILTER ) || defined( MITCHELL_FILTER )\n#if defined( CATMULROM_FILTER )\nconst float B = 0.0;\nconst float C = 0.5;\n#elif defined( MITCHELL_FILTER )\nconst float B = 0.333;\nconst float C = 0.333;\n#endif\nfloat filter( float x ){\nfloat f = x;\nif( f < 0.0 ){\nf = -f;\n}\nif( f < 1.0 ){\nreturn ( ( 12.0 - 9.0 * B - 6.0 * C ) * ( f * f * f ) +\n( -18.0 + 12.0 * B + 6.0 *C ) * ( f * f ) +\n( 6.0 - 2.0 * B ) ) / 6.0;\n}else if( f >= 1.0 && f < 2.0 ){\nreturn ( ( -B - 6.0 * C ) * ( f * f * f )\n+ ( 6.0 * B + 30.0 * C ) * ( f *f ) +\n( - ( 12.0 * B ) - 48.0 * C ) * f +\n8.0 * B + 24.0 * C ) / 6.0;\n}else{\nreturn 0.0;\n}\n}\n#elif defined( BSPLINE_FILTER )\nfloat filter( float x ){\nfloat f = x;\nif( f < 0.0 ){\nf = -f;\n}\nif( f >= 0.0 && f <= 1.0 ){\nreturn ( 2.0 / 3.0 ) + ( 0.5 ) * ( f * f * f ) - ( f * f );\n}else if( f > 1.0 && f <= 2.0 ){\nreturn 1.0 / 6.0 * pow( ( 2.0 - f ), 3.0 );\n}\nreturn 1.0;\n}\n#else\nfloat filter( float x ){\nreturn 1.0;\n}\n#endif\nvec4 biCubic( sampler2D tex, vec2 texCoord ){\nvec2 texelSize = 1.0 / mapSize;\ntexCoord -= texelSize / 2.0;\nvec4 nSum = vec4( 0.0 );\nfloat nDenom = 0.0;\nvec2 cell = fract( texCoord * mapSize );\nfor( float m = -1.0; m <= 2.0; ++m ){\nfor( float n = -1.0; n <= 2.0; ++n ){\nvec4 vecData = texture2D(\ntex, texCoord + texelSize * vec2( m, n )\n);\nfloat c = filter( m - cell.x ) * filter( -n + cell.y );\nnSum += vecData * c;\nnDenom += c;\n}\n}\nreturn nSum / nDenom;\n}\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( CUBIC_INTERPOLATION )\ngl_FragColor = biCubic( map, vUv );\n#else\ngl_FragColor = texture2D( map, vUv );\n#endif\n#if defined( PICKING )\nif( gl_FragColor.a < 0.3 )\ndiscard;\ngl_FragColor = vec4( texture2D( pickingMap, vUv ).xyz, objectId );\n#else\nif( gl_FragColor.a < 0.01 )\ndiscard;\ngl_FragColor.a *= opacity;\n#include fog_fragment\n#endif\n}");var Zm=new Uint16Array([0,1,2,1,3,2]),Qm=new Float32Array([0,1,0,0,1,1,1,0]),Jm=Object.assign({filter:"nearest",forceTransparent:!0},Tp),eg=Object.assign({filter:{updateShader:!0,uniform:!0}},Rp),tg=function(e){function t(t,n){e.call(this,{position:t.position,index:Zm,picking:t.picking},n),this.parameterTypes=eg,this.alwaysTransparent=!0,this.hasWireframe=!1,this.vertexShader="Image.vert",this.fragmentShader="Image.frag";var r=t.imageData,i=t.width,o=t.height,a=new Y(r,i,o);a.flipY=!0,this.tex=a;for(var s=r.length,l=new Uint8Array(s),u=0;u<s;u+=4){var c=u/4;l[u]=c>>16&255,l[u+1]=c>>8&255,l[u+2]=255&c}var d=new Y(l,i,o);d.flipY=!0,d.minFilter=g,d.magFilter=g,this.pickingTex=d,this.addUniforms({map:{value:a},pickingMap:{value:d},mapSize:{value:new z(i,o)}}),this.geometry.addAttribute("uv",new be(Qm,2))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Jm},t.prototype.getDefines=function(t){var n=e.prototype.getDefines.call(this,t),r=this.parameters.filter;return r.startsWith("cubic")&&(n.CUBIC_INTERPOLATION=1,r.endsWith("bspline")?n.BSPLINE_FILTER=1:r.endsWith("catmulrom")?n.CATMULROM_FILTER=1:r.endsWith("mitchell")&&(n.MITCHELL_FILTER=1)),n},t.prototype.updateTexture=function(){var e=this.tex,t=this.parameters.filter;t.startsWith("cubic")?(e.minFilter=g,e.magFilter=g):"linear"===t?(e.minFilter=b,e.magFilter=b):(e.minFilter=g,e.magFilter=g),e.needsUpdate=!0,this.pickingTex.needsUpdate=!0},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this),this.updateTexture();var t=this.material;t.uniforms.map.value=this.tex,t.blending=1,t.needsUpdate=!0;var n=this.wireframeMaterial;n.uniforms.map.value=this.tex,n.blending=1,n.needsUpdate=!0;var r=this.pickingMaterial;r.uniforms.map.value=this.tex,r.uniforms.pickingMap.value=this.pickingTex,r.blending=1,r.needsUpdate=!0},t.prototype.setUniforms=function(t){t&&void 0!==t.filter&&(this.updateTexture(),t.map=this.tex),e.prototype.setUniforms.call(this,t)},Object.defineProperties(t.prototype,n),t}(Ip),ng=function(e,t){var n=t||{};this.dimension=Sa(n.dimension,"x"),this.positionType=Sa(n.positionType,"percent"),this.position=Sa(n.position,30),this.thresholdType=Sa(n.thresholdType,"sigma"),this.thresholdMin=Sa(n.thresholdMin,-1/0),this.thresholdMax=Sa(n.thresholdMax,1/0),this.normalize=Sa(n.normalize,!1),this.volume=e};ng.prototype.getPositionFromCoordinate=function(e){var t,n=this.dimension,r=this.volume,i=r.matrix,o=(new U).setFromMatrixPosition(i)[n],a=(new U).setFromMatrixScale(i)[n];return t="x"===n?r.nx:"y"===n?r.ny:r.nz,Math.round(((e-o)/(t/100)+1)/a)},ng.prototype.getData=function(e){e=e||{};var t,n=this.volume,r=n.data,i=n.matrix;function o(e){return Math.round(e/100*(t-1))}function a(e,t,r,i){return 3*(r*n.ny*n.nx+t*n.nx+e)+i}t="coordinate"===this.positionType?this.getPositionFromCoordinate(this.position):this.position;var s,l,u,c,d,f=new Float32Array(12),p=new U,h=0,m=0,g=0,v=n.nx,y=n.ny,b=n.nz;function x(e,t,n,r){p.set(e,t,n).applyMatrix4(i).toArray(f,r)}"x"===this.dimension?(u=o(n.nx),c=n.ny-1,d=n.nz-1,s=n.nz,l=n.ny,v=(h=u)+1,x(u,0,0,0),x(u,c,0,3),x(u,0,d,6),x(u,c,d,9)):"y"===this.dimension?(u=n.nx-1,c=o(n.ny),d=n.nz-1,s=n.nz,l=n.nx,y=(m=c)+1,x(0,c,0,0),x(u,c,0,3),x(0,c,d,6),x(u,c,d,9)):"z"===this.dimension&&(u=n.nx-1,c=n.ny-1,d=o(n.nz),s=n.nx,l=n.ny,b=(g=d)+1,x(0,0,d,0),x(0,c,d,3),x(u,0,d,6),x(u,c,d,9));var w,_,S=0,C=0,E=new Uint8Array(s*l*4),k=new Float32Array(s*l);"sigma"===this.thresholdType?(w=n.getValueForSigma(this.thresholdMin),_=n.getValueForSigma(this.thresholdMax)):(w=this.thresholdMin,_=this.thresholdMax);var P=Object.assign({},e.colorParams,{volume:n});this.normalize&&(P.domain=[0,1]);var M,A=pl.getScheme(P),T=new Float32Array(3),R=A.getScale(),I=0,O=0;if(this.normalize){I=1/0,M=-1/0;for(var L=m;L<y;++L)for(var D=h;D<v;++D)for(var F=g;F<b;++F){var N=r[a(D,L,F,0)/3];N<I&&(I=N),N>M&&(M=N)}O=M-I}for(var B=m;B<y;++B)for(var z=h;z<v;++z)for(var j=g;j<b;++j){var H=a(z,B,j,0)/3,V=r[H];this.normalize&&(V=(V-I)/O),A.colorToArray(R(V),T),E[S]=Math.round(255*T[0]),E[S+1]=Math.round(255*T[1]),E[S+2]=Math.round(255*T[2]),E[S+3]=V>w&&V<_?255:0,k[C]=H,++C,S+=4}var G=new Xf(k,n);return{position:f,imageData:E,width:s,height:l,picking:G}};var rg=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="slice",this.parameters=Object.assign({filter:{type:"select",buffer:!0,options:{nearest:"nearest",linear:"linear","cubic-bspline":"cubic-bspline","cubic-catmulrom":"cubic-catmulrom","cubic-mitchell":"cubic-mitchell"}},positionType:{type:"select",rebuild:!0,options:{percent:"percent",coordinate:"coordinate"}},position:{type:"range",step:.1,max:100,min:1,rebuild:!0},dimension:{type:"select",rebuild:!0,options:{x:"x",y:"y",z:"z"}},thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},normalize:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null,linewidth:null,colorScheme:null,roughness:null,metalness:null,diffuse:null}),this.volume=t,this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=this.volume,r=t||{};r.colorDomain=Sa(r.colorDomain,[n.min,n.max]),r.colorScheme=Sa(r.colorScheme,"value"),r.colorScale=Sa(r.colorScale,"Spectral"),this.colorScheme="value",this.dimension=Sa(r.dimension,"x"),this.filter=Sa(r.filter,"cubic-bspline"),this.positionType=Sa(r.positionType,"percent"),this.position=Sa(r.position,30),this.thresholdType=Sa(r.thresholdType,"sigma"),this.thresholdMin=Sa(r.thresholdMin,-1/0),this.thresholdMax=Sa(r.thresholdMax,1/0),this.normalize=Sa(r.normalize,!1),e.prototype.init.call(this,r),this.build()},t.prototype.attach=function(e){var t=this;this.bufferList.forEach((function(e){t.viewer.add(e)})),this.setVisibility(this.visible),e()},t.prototype.create=function(){var e=new ng(this.volume,{positionType:this.positionType,position:this.position,dimension:this.dimension,thresholdType:this.thresholdType,thresholdMin:this.thresholdMin,thresholdMax:this.thresholdMax,normalize:this.normalize}),t=new tg(e.getData({colorParams:this.getColorParams()}),this.getBufferParams({filter:this.filter}));this.bufferList.push(t)},t}(kc);function ig(e){rl.error("makeRepresentation: representation type "+e+" unknown")}var og={name:"some element",status:""},ag=function(e,t){void 0===t&&(t={}),this.stage=e,this.signals={statusChanged:new fs,nameChanged:new fs,disposed:new fs},this.parameters=Ca(t,this.defaultParameters),this.uuid=Za()},sg={defaultParameters:{configurable:!0},name:{configurable:!0}};sg.defaultParameters.get=function(){return og},sg.name.get=function(){return this.parameters.name},ag.prototype.setStatus=function(e){return this.parameters.status=e,this.signals.statusChanged.dispatch(e),this},ag.prototype.setName=function(e){return this.parameters.name=e,this.signals.nameChanged.dispatch(e),this},ag.prototype.dispose=function(){this.signals.disposed.dispatch()},Object.defineProperties(ag.prototype,sg);var lg=Object.assign({visible:!0},og),ug=function(e){function t(t,n,r,i){void 0===r&&(r={}),e.call(this,t,Object.assign({name:n.type},r)),this.parent=i,this.signals=Object.assign({visibilityChanged:new fs,parametersChanged:new fs},this.signals),this.setRepresentation(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},visible:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return lg},n.visible.get=function(){return this.parameters.visible},n.type.get=function(){return"representation"},t.prototype.getType=function(){return this.repr.type},t.prototype.setRepresentation=function(e){this._disposeRepresentation(),this.repr=e,this.stage.tasks.listen(this.repr.tasks),this.updateVisibility()},t.prototype._disposeRepresentation=function(){this.repr&&(this.stage.tasks.unlisten(this.repr.tasks),this.repr.dispose())},t.prototype.dispose=function(){this.parent&&this.parent.hasRepresentation(this)?this.parent.removeRepresentation(this):(this._disposeRepresentation(),this.signals.disposed.dispatch())},t.prototype.setVisibility=function(e){return this.parameters.visible=e,this.updateVisibility(),this.signals.visibilityChanged.dispatch(this.parameters.visible),this},t.prototype.getVisibility=function(){return this.parent?this.parent.parameters.visible&&this.parameters.visible:this.parameters.visible},t.prototype.toggleVisibility=function(){return this.setVisibility(!this.parameters.visible)},t.prototype.updateVisibility=function(){this.repr.setVisibility(this.getVisibility())},t.prototype.update=function(e){return this.repr.update(e),this},t.prototype.build=function(e){return this.repr.build(e),this},t.prototype.setSelection=function(e){var t=this.repr;return t.setSelection&&t.setSelection(e),this},t.prototype.setParameters=function(e){return this.repr.setParameters(e),this.signals.parametersChanged.dispatch(this.repr.getParameters()),this},t.prototype.getParameters=function(){return this.repr.getParameters()},t.prototype.setColor=function(e){return this.repr.setColor(e),this},Object.defineProperties(t.prototype,n),t}(ag),cg=new j,dg=new U,fg={name:"",status:"",visible:!0},pg=function(e,t,n){void 0===n&&(n={}),this.stage=e,this.object=t,this.signals={representationAdded:new fs,representationRemoved:new fs,visibilityChanged:new fs,matrixChanged:new fs,statusChanged:new fs,nameChanged:new fs,disposed:new fs},this.reprList=[],this.annotationList=[],this.matrix=new j,this.position=new U,this.quaternion=new H,this.scale=new U(1,1,1),this.transform=new j,this.parameters=Ca(n,this.defaultParameters),this.uuid=Za(),this.viewer=e.viewer,this.controls=new ih(this)},hg={defaultParameters:{configurable:!0},name:{configurable:!0},status:{configurable:!0},visible:{configurable:!0}};hg.defaultParameters.get=function(){return fg},hg.name.get=function(){return this.parameters.name},hg.status.get=function(){return this.parameters.status},hg.visible.get=function(){return this.parameters.visible},pg.prototype.setPosition=function(e){return Array.isArray(e)?this.position.fromArray(e):this.position.copy(e),this.updateMatrix(),this},pg.prototype.setRotation=function(e){if(Array.isArray(e))if(3===e.length){var t=(new ue).fromArray(e);this.quaternion.setFromEuler(t)}else this.quaternion.fromArray(e);else e instanceof ue?this.quaternion.setFromEuler(e):this.quaternion.copy(e);return this.updateMatrix(),this},pg.prototype.setScale=function(e){return this.scale.set(e,e,e),this.updateMatrix(),this},pg.prototype.setTransform=function(e){return this.transform.copy(e),this.updateMatrix(),this},pg.prototype.updateMatrix=function(){var e=this,t=this.getCenterUntransformed(dg);this.matrix.makeTranslation(-t.x,-t.y,-t.z),cg.makeRotationFromQuaternion(this.quaternion),this.matrix.premultiply(cg),cg.makeScale(this.scale.x,this.scale.y,this.scale.z),this.matrix.premultiply(cg);var n=this.position;cg.makeTranslation(n.x+t.x,n.y+t.y,n.z+t.z),this.matrix.premultiply(cg),this.matrix.premultiply(this.transform),this.reprList.forEach((function(t){t.setParameters({matrix:e.matrix})})),this.stage.viewer.updateBoundingBox(),this.signals.matrixChanged.dispatch(this.matrix)},pg.prototype.addAnnotation=function(e,t,n){var r=new eh(this,e,t,n);return this.annotationList.push(r),r},pg.prototype.eachAnnotation=function(e){this.annotationList.slice().forEach(e)},pg.prototype.removeAnnotation=function(e){var t=this.annotationList.indexOf(e);-1!==t&&(this.annotationList.splice(t,1),e.dispose())},pg.prototype.removeAllAnnotations=function(){this.eachAnnotation((function(e){return e.dispose()})),this.annotationList.length=0},pg.prototype._addRepresentation=function(e,t,n,r){void 0===r&&(r=!1);var i=n||{},o=this.stage.getParameters();i.matrix=this.matrix.clone(),i.quality=i.quality||o.quality,i.disableImpostor=Sa(i.disableImpostor,!o.impostor),i.useWorker=Sa(i.useWorker,o.workerDefault),i.visible=Sa(i.visible,!0);var a=Object.assign({},i,{visible:this.parameters.visible&&i.visible}),s=function(e,t,n,r){var i;if(sl&&rl.time("makeRepresentation "+e),t instanceof km){if(!(i=ml.get(e)))return void ig(e)}else if(t instanceof _p)if("surface"===e)i=Hp;else{if("dot"!==e)return void ig(e);i=Ym}else if(t instanceof Ep)if("surface"===e)i=Hp;else if("dot"===e)i=Ym;else{if("slice"!==e)return void ig(e);i=rg}else if(t instanceof Rm)i=Om,t=t.getBufferList();else{if("buffer"!==e)return void rl.error("makeRepresentation: object "+t+" unknown");i=Om}var o=new i(t,n,r);return sl&&rl.timeEnd("makeRepresentation "+e),o}(e,t,this.viewer,a),l=new ug(this.stage,s,i,this);return r||(this.reprList.push(l),this.signals.representationAdded.dispatch(l)),l},pg.prototype.addBufferRepresentation=function(e,t){return this._addRepresentation.call(this,"buffer",e,t)},pg.prototype.hasRepresentation=function(e){return-1!==this.reprList.indexOf(e)},pg.prototype.eachRepresentation=function(e){this.reprList.slice().forEach(e)},pg.prototype.removeRepresentation=function(e){var t=this.reprList.indexOf(e);-1!==t&&(this.reprList.splice(t,1),e.dispose(),this.signals.representationRemoved.dispatch(e))},pg.prototype.updateRepresentations=function(e){this.reprList.forEach((function(t){return t.update(e)})),this.stage.viewer.requestRender()},pg.prototype.removeAllRepresentations=function(){this.eachRepresentation((function(e){return e.dispose()}))},pg.prototype.dispose=function(){this.removeAllAnnotations(),this.removeAllRepresentations(),delete this.annotationList,delete this.reprList,this.signals.disposed.dispatch()},pg.prototype.setVisibility=function(e){return this.parameters.visible=e,this.eachRepresentation((function(e){return e.updateVisibility()})),this.eachAnnotation((function(e){return e.updateVisibility()})),this.signals.visibilityChanged.dispatch(e),this},pg.prototype.setStatus=function(e){return this.parameters.status=e,this.signals.statusChanged.dispatch(e),this},pg.prototype.setName=function(e){return this.parameters.name=e,this.signals.nameChanged.dispatch(e),this},pg.prototype.getBox=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this).getBoxUntransformed.apply(e,t).clone().applyMatrix4(this.matrix)},pg.prototype.getCenter=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this).getCenterUntransformed.apply(e,t).clone().applyMatrix4(this.matrix)},pg.prototype.getZoom=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return this.stage.getZoomForBox((e=this).getBox.apply(e,t))},pg.prototype.getBoxUntransformed=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new Z},pg.prototype.getCenterUntransformed=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return this.getBoxUntransformed().getCenter(new U)},pg.prototype.autoView=function(e){this.stage.animationControls.zoomMove(this.getCenter(),this.getZoom(),Sa(e,0))},Object.defineProperties(pg.prototype,hg);var mg=function(e){void 0===e&&(e=[]),this.list=e;for(var t=e.length,n=0;n<t;++n){e[n].signals.disposed.add(this._remove,this)}},gg={first:{configurable:!0}};mg.prototype._remove=function(e){var t=this.list.indexOf(e);-1!==t&&this.list.splice(t,1)},gg.first.get=function(){return this.list.length>0?this.list[0]:void 0},mg.prototype.forEach=function(e){return this.list.forEach(e),this},mg.prototype.dispose=function(){return this.forEach((function(e){return e.dispose()}))},Object.defineProperties(mg.prototype,gg);var vg=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setParameters=function(e){return this.forEach((function(t){return t.setParameters(e)}))},t.prototype.setVisibility=function(e){return this.forEach((function(t){return t.setVisibility(e)}))},t.prototype.setSelection=function(e){return this.forEach((function(t){return t.setSelection(e)}))},t.prototype.setColor=function(e){return this.forEach((function(t){return t.setColor(e)}))},t.prototype.update=function(e){return this.forEach((function(t){return t.update(e)}))},t.prototype.build=function(e){return this.forEach((function(t){return t.build(e)}))},t.prototype.dispose=function(e){return this.forEach((function(e){return e.dispose()}))},t}(mg),yg=Object.assign({defaultStep:1,defaultTimeout:50,defaultInterpolateType:"",defaultInterpolateStep:5,defaultMode:"loop",defaultDirection:"forward",initialFrame:0},og),bg=function(e){function t(t,n,r){var i=this;void 0===r&&(r={}),e.call(this,t,Object.assign({name:n.name},r)),this.trajectory=n,this.signals=Object.assign(this.signals,{frameChanged:new fs,playerChanged:new fs,countChanged:new fs,parametersChanged:new fs}),n.signals.frameChanged.add((function(e){i.signals.frameChanged.dispatch(e)})),n.signals.playerChanged.add((function(e){i.signals.playerChanged.dispatch(e)})),n.signals.countChanged.add((function(e){i.signals.countChanged.dispatch(e)})),void 0!==r.initialFrame&&this.setFrame(r.initialFrame)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return yg},n.type.get=function(){return"trajectory"},t.prototype.setFrame=function(e){this.trajectory.setFrame(e)},t.prototype.setParameters=function(e){void 0===e&&(e={}),this.trajectory.setParameters(e),this.signals.parametersChanged.dispatch(e)},t.prototype.dispose=function(){this.trajectory.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(ag),xg=function(e,t){this.name=e,this.path=t,this.coordinates=[],this.boxes=[],this.times=[],this.timeOffset=0,this.deltaTime=1},wg={type:{configurable:!0}};wg.type.get=function(){return"Frames"},Object.defineProperties(xg.prototype,wg);var _g=function(e,t){var n,r;if(this.A=new tp(3,3),this.W=new tp(1,3),this.U=new tp(3,3),this.V=new tp(3,3),this.VH=new tp(3,3),this.R=new tp(3,3),this.tmp=new tp(3,3),this.c=new tp(3,3),e instanceof km)n=e.atomCount;else{if(!(e instanceof Float32Array))return;n=e.length/3}if(t instanceof km)r=t.atomCount;else{if(!(t instanceof Float32Array))return;r=t.length/3}var i=Math.min(n,r),o=new tp(3,i),a=new tp(3,i);this.coords1t=new tp(i,3),this.coords2t=new tp(i,3),this.transformationMatrix=new j,this.c.data.set([1,0,0,0,1,0,0,0,-1]),this.prepCoords(e,o,i,!1),this.prepCoords(t,a,i,!1),this._superpose(o,a)};_g.prototype._superpose=function(e,t){this.mean1=op(e),this.mean2=op(t),ap(e,this.mean1),ap(t,this.mean2),np(this.coords1t,e),np(this.coords2t,t),rp(this.A,this.coords2t,this.coords1t),up(this.A,this.W,this.U,this.V),function(e,t){var n=e.data,r=t.data,i=n[4],o=n[8],a=n[5],s=n[7],l=n[0],u=l*i,c=l*a,d=n[3],f=n[1],p=d*f,h=n[2],m=d*h,g=n[6],v=g*f,y=g*h,b=1/(u*o-c*s-p*o+m*s+v*a-y*i);r[0]=(i*o-a*s)*b,r[1]=-(f*o-h*s)*b,r[2]=-(-f*a+h*i)*b,r[3]=-(d*o-a*g)*b,r[4]=(l*o-y)*b,r[5]=-(c-m)*b,r[6]=-(-d*s+i*g)*b,r[7]=-(l*s-v)*b,r[8]=(u-p)*b}(this.V,this.VH),ip(this.R,this.U,this.VH),function(e){var t=e.data;return t[0]*t[4]*t[8]-t[0]*t[5]*t[7]-t[3]*t[1]*t[8]+t[3]*t[2]*t[7]+t[6]*t[1]*t[5]-t[6]*t[2]*t[4]}(this.R)<0&&(sl&&rl.log("R not a right handed system"),ip(this.tmp,this.c,this.VH),ip(this.R,this.U,this.tmp));var n=new tp(4,4),r=new tp(4,4),i=new tp(4,4),o=new tp(4,4),a=new tp(4,4),s=new tp(4,4),l=this.R.data,u=this.mean1,c=this.mean2;o.data.set([1,0,0,-u[0],0,1,0,-u[1],0,0,1,-u[2],0,0,0,1]),a.data.set([l[0],l[1],l[2],0,l[3],l[4],l[5],0,l[6],l[7],l[8],0,0,0,0,1]),s.data.set([1,0,0,c[0],0,1,0,c[1],0,0,1,c[2],0,0,0,1]),np(r,o),rp(n,a,r),np(i,n),rp(r,s,i),np(n,r),this.transformationMatrix.elements=n.data},_g.prototype.prepCoords=function(e,t,n,r){var i=0,o=t.data,a=3,s=3*n;if(r&&(s=4*n,a=4),e instanceof km)e.eachAtom((function(e){i<s&&(o[i+0]=e.x,o[i+1]=e.y,o[i+2]=e.z,r&&(o[i+3]=1),i+=a)}));else if(e instanceof Float32Array)for(;i<s;i+=a)i<s&&(o[i]=e[i],o[i+1]=e[i+1],o[i+2]=e[i+2],r&&(o[i+3]=1));else rl.warn("prepCoords: input type unknown")},_g.prototype.transform=function(e){var t;if(e instanceof km)t=e.atomCount;else{if(!(e instanceof Float32Array))return;t=e.length/3}var n=new tp(4,t),r=new tp(t,4);this.prepCoords(e,n,t,!0);var i=this.transformationMatrix,o=i.determinant();if(!o)return o;var a=new tp(4,4);a.data=i.elements,function(e,t,n){for(var r=0,i=0,o=0,a=0,s=0,l=0,u=0,c=0,d=t.cols,f=t.rows,p=n.cols,h=t.data,m=n.data,g=e.data,v=0;r<f;a+=d,r++)for(u=0,i=0;i<p;c++,u++,i++){for(l=u,s=a,v=0,o=0;o<d;s++,l+=p,o++)v+=h[s]*m[l];g[c]=v}}(r,n,a);var s=0,l=r.data;if(e instanceof km){e.eachAtom((function(e){e.x=l[s],e.y=l[s+1],e.z=l[s+2],s+=4}));var u=new j;u.getInverse(i);var c=e.biomolDict;for(var d in c){if(c.hasOwnProperty(d))c[d].partList.forEach((function(e){e.matrixList.forEach((function(e){e.premultiply(i),e.multiply(u)}))}))}}else if(e instanceof Float32Array)for(var f=4*t;s<f;s+=4)e[s]=l[s],e[s+1]=l[s+1],e[s+2]=l[s+2];else rl.warn("transform: input type unknown");return this.transformationMatrix};var Sg={step:1,timeout:50,start:0,end:0,interpolateType:"",interpolateStep:5,mode:"loop",direction:"forward"},Cg=function(e,t){var n=this;void 0===t&&(t={}),this.signals={startedRunning:new fs,haltedRunning:new fs},this._run=!1,this._previousTime=0,this._currentTime=0,this._currentStep=1,e.signals.playerChanged.add((function(e){e!==n&&n.pause()}),this);var r=Sa(e.frameCount,1);this.traj=e,this.parameters=Ca(t,Sg),this.parameters.end=Math.min(Sa(t.end,r-1),r-1),this.parameters.step=Sa(t.step,Math.ceil((r+1)/100)),this._currentFrame=this.parameters.start,this._direction="bounce"===this.parameters.direction?"forward":this.parameters.direction,e.signals.countChanged.add((function(e){n.parameters.end=Math.min(Sa(n.parameters.end,e-1),e-1)}),this),this._animate=this._animate.bind(this)},Eg={isRunning:{configurable:!0}};Eg.isRunning.get=function(){return this._run},Cg.prototype.setParameters=function(e){void 0===e&&(e={}),Ea(this.parameters,e),void 0!==e.direction&&"bounce"!==this.parameters.direction&&(this._direction=this.parameters.direction)},Cg.prototype._animate=function(){if(this._run){this._currentTime=window.performance.now();var e=this._currentTime-this._previousTime,t=this.parameters.interpolateType?this.parameters.interpolateStep:1,n=this.parameters.timeout/t,r=this.traj;if(r&&r.frameCount&&!r.inProgress&&e>=n)if(this.parameters.interpolateType)if(this._currentStep>this.parameters.interpolateStep&&(this._currentStep=1),1===this._currentStep&&(this._currentFrame=this._nextInterpolated()),r.hasFrame(this._currentFrame)){this._currentStep+=1;var i=this._currentStep/(this.parameters.interpolateStep+1),o=this._currentFrame,a=o[0],s=o[1],l=o[2],u=o[3];r.setFrameInterpolated(a,s,l,u,i,this.parameters.interpolateType),this._previousTime=this._currentTime}else r.loadFrame(this._currentFrame);else{var c=this._next();r.hasFrame(c)?(r.setFrame(c),this._previousTime=this._currentTime):r.loadFrame(c)}window.requestAnimationFrame(this._animate)}},Cg.prototype._next=function(){var e,t=this.parameters;return((e="forward"===this._direction?this.traj.currentFrame+t.step:this.traj.currentFrame-t.step)>t.end||e<t.start)&&("bounce"===t.direction&&("forward"===this._direction?this._direction="backward":this._direction="forward"),"once"===t.mode?(this.pause(),e="forward"===t.direction?t.end:"backward"===t.direction||"forward"===this._direction?t.start:t.end):"forward"===this._direction?(e=t.start,t.interpolateType&&(e=Math.min(t.end,e+t.step))):(e=t.end,t.interpolateType&&(e=Math.max(t.start,e-t.step)))),e},Cg.prototype._nextInterpolated=function(){var e,t,n,r=this.parameters,i=this._next();return"forward"===this._direction?(e=Math.max(r.start,i-r.step),t=Math.max(r.start,i-2*r.step),n=Math.max(r.start,i-3*r.step)):(e=Math.min(r.end,i+r.step),t=Math.min(r.end,i+2*r.step),n=Math.min(r.end,i+3*r.step)),[i,e,t,n]},Cg.prototype.toggle=function(){this._run?this.pause():this.play()},Cg.prototype.play=function(){if(!this._run){this.traj.player!==this&&this.traj.setPlayer(this),this._currentStep=1;var e=this.parameters,t=this.traj.currentFrame,n=Math.ceil(t/e.step)*e.step;"forward"===e.direction&&t>=e.end?n=e.start:"backward"===e.direction&&t<=e.start&&(n=e.end),this.traj.setFrame(n),this._run=!0,this._animate(),this.signals.startedRunning.dispatch()}},Cg.prototype.pause=function(){this._run=!1,this.signals.haltedRunning.dispatch()},Cg.prototype.stop=function(){this.pause(),this.traj.setFrame(this.parameters.start)},Object.defineProperties(Cg.prototype,Eg);var kg=function(e,t,n){var r=this;void 0===n&&(n={}),this.signals={countChanged:new fs,frameChanged:new fs,playerChanged:new fs},this.frameCache={},this.loadQueue={},this.boxCache={},this.pathCache={},this.frameCacheSize=0,this._frameCount=0,this._currentFrame=-1,this._disposed=!1,this.deltaTime=Sa(n.deltaTime,0),this.timeOffset=Sa(n.timeOffset,0),this.centerPbc=Sa(n.centerPbc,!1),this.removePbc=Sa(n.removePbc,!1),this.removePeriodicity=Sa(n.removePeriodicity,!1),this.superpose=Sa(n.superpose,!1),this.name=e.replace(/^.*[\\/]/,""),this.trajPath=e,this.selection=new zs(Sa(n.sele,"backbone and not hydrogen")),this.selection.signals.stringChanged.add((function(){r.selectionIndices=r.structure.getAtomIndices(r.selection),r._resetCache(),r._saveInitialCoords(),r.setFrame(r._currentFrame)}))},Pg={frameCount:{configurable:!0},currentFrame:{configurable:!0}};Pg.frameCount.get=function(){return this._frameCount},Pg.currentFrame.get=function(){return this._currentFrame},kg.prototype._init=function(e){this.setStructure(e),this._loadFrameCount(),this.setPlayer(new Cg(this))},kg.prototype._loadFrameCount=function(){},kg.prototype.setStructure=function(e){this.structure=e,this.atomCount=e.atomCount,this.backboneIndices=this._getIndices(new zs("backbone and not hydrogen")),this._makeAtomIndices(),this._saveStructureCoords(),this.selectionIndices=this._getIndices(this.selection),this._resetCache(),this._saveInitialCoords(),this.setFrame(this._currentFrame)},kg.prototype._saveInitialCoords=function(){var e=this;this.structure.hasCoords()?(this.initialCoords=new Float32Array(this.structureCoords),this._makeSuperposeCoords()):this.frameCache[0]?(this.initialCoords=new Float32Array(this.frameCache[0]),this._makeSuperposeCoords()):this.loadFrame(0,(function(){return e._saveInitialCoords()}))},kg.prototype._saveStructureCoords=function(){this.structureCoords=this.structure.getAtomData({what:{position:!0}}).position},kg.prototype.setSelection=function(e){return this.selection.setString(e),this},kg.prototype._getIndices=function(e){var t=0,n=e.test,r=[];return n&&this.structure.eachAtom((function(e){n(e)&&r.push(t),t+=1})),r},kg.prototype._makeSuperposeCoords=function(){var e=3*this.selectionIndices.length;this.coords1=new Float32Array(e),this.coords2=new Float32Array(e);for(var t=this.initialCoords,n=this.coords2,r=0;r<e;r+=3){var i=3*this.selectionIndices[r/3];n[r+0]=t[i+0],n[r+1]=t[i+1],n[r+2]=t[i+2]}},kg.prototype._makeAtomIndices=function(){rl.error("Trajectory._makeAtomIndices not implemented")},kg.prototype._resetCache=function(){this.frameCache={},this.loadQueue={},this.boxCache={},this.pathCache={},this.frameCacheSize=0,this.initialCoords=new Float32Array(0)},kg.prototype.setParameters=function(e){void 0===e&&(e={});var t=!1;void 0!==e.centerPbc&&e.centerPbc!==this.centerPbc&&(this.centerPbc=e.centerPbc,t=!0),void 0!==e.removePeriodicity&&e.removePeriodicity!==this.removePeriodicity&&(this.removePeriodicity=e.removePeriodicity,t=!0),void 0!==e.removePbc&&e.removePbc!==this.removePbc&&(this.removePbc=e.removePbc,t=!0),void 0!==e.superpose&&e.superpose!==this.superpose&&(this.superpose=e.superpose,t=!0),this.deltaTime=Sa(e.deltaTime,this.deltaTime),this.timeOffset=Sa(e.timeOffset,this.timeOffset),t&&(this._resetCache(),this.setFrame(this._currentFrame))},kg.prototype.hasFrame=function(e){var t=this;return Array.isArray(e)?e.every((function(e){return!!t.frameCache[e]})):!!this.frameCache[e]},kg.prototype.setFrame=function(e,t){var n=this;return void 0===e||(this.inProgress=!0,-1===e||this.frameCache[e]?(this._updateStructure(e),t&&t()):this.loadFrame(e,(function(){n._updateStructure(e),t&&t()}))),this},kg.prototype._interpolate=function(e,t,n,r,i,o){var a,s=this.frameCache;a="spline"===o?function(e,t,n,r,i){for(var o=e.length,a=new Float32Array(o),s=0;s<o;s+=3){var l=s+1,u=s+2;a[s]=ts(r[s],n[s],t[s],e[s],i,1),a[l]=ts(r[l],n[l],t[l],e[l],i,1),a[u]=ts(r[u],n[u],t[u],e[u],i,1)}return a}(s[e],s[t],s[n],s[r],i):function(e,t,n){for(var r=e.length,i=new Float32Array(r),o=0;o<r;o+=3){var a=o+1,s=o+2;i[o]=es(t[o],e[o],n),i[a]=es(t[a],e[a],n),i[s]=es(t[s],e[s],n)}return i}(s[e],s[t],i),this.structure.updatePosition(a),this._currentFrame=e,this.signals.frameChanged.dispatch(e)},kg.prototype.setFrameInterpolated=function(e,t,n,r,i,o,a){var s=this;if(void 0===e)return this;var l=this.frameCache,u=[];return l[r]||u.push(r),l[n]||u.push(n),l[t]||u.push(t),l[e]||u.push(e),u.length?this.loadFrame(u,(function(){s._interpolate(e,t,n,r,i,o),a&&a()})):(this._interpolate(e,t,n,r,i,o),a&&a()),this},kg.prototype.loadFrame=function(e,t){var n=this;Array.isArray(e)?e.forEach((function(e){n.loadQueue[e]||n.frameCache[e]||(n.loadQueue[e]=!0,n._loadFrame(e,(function(){delete n.loadQueue[e]})))})):this.loadQueue[e]||this.frameCache[e]||(this.loadQueue[e]=!0,this._loadFrame(e,(function(){delete n.loadQueue[e],t&&t()})))},kg.prototype._loadFrame=function(e,t){rl.error("Trajectory._loadFrame not implemented",e,t)},kg.prototype._updateStructure=function(e){this._disposed?console.error("updateStructure: traj disposed"):(-1===e?this.structureCoords&&this.structure.updatePosition(this.structureCoords):this.structure.updatePosition(this.frameCache[e]),this.structure.trajectory={name:this.trajPath,frame:e},this._currentFrame=e,this.inProgress=!1,this.signals.frameChanged.dispatch(e))},kg.prototype._doSuperpose=function(e){for(var t=3*this.selectionIndices.length,n=this.coords1,r=this.coords2,i=0;i<t;i+=3){var o=3*this.selectionIndices[i/3];n[i+0]=e[o+0],n[i+1]=e[o+1],n[i+2]=e[o+2]}new _g(n,r).transform(e)},kg.prototype._process=function(e,t,n,r){if(this._setFrameCount(r),t){if(this.backboneIndices.length>0&&this.centerPbc){var i=[t[0],t[4],t[8]],o=function(e,t,n){return[nu(t,n[0],3,0,e),nu(t,n[1],3,1,e),nu(t,n[2],3,2,e)]}(this.backboneIndices,n,i);!function(e,t,n){if(0!==n[0]&&0!==n[8]&&0!==n[4])for(var r=e.length,i=n[0],o=n[1],a=n[2],s=-t[0]+i+i/2,l=-t[1]+o+o/2,u=-t[2]+a+a/2,c=0;c<r;c+=3)e[c+0]=(e[c+0]+s)%i,e[c+1]=(e[c+1]+l)%o,e[c+2]=(e[c+2]+u)%a}(n,o,i)}if(this.removePeriodicity){var a=function(e){return[mu(e,3,0),mu(e,3,1),mu(e,3,2)]}(n);!function(e,t,n){if(0!==t[0]&&0!==t[8]&&0!==t[4]){for(var r=e.length,i=3;i<r;i+=3)for(var o=0;o<3;++o){var a=(e[i+o]-n[o])/t[3*o+o];Math.abs(a)>.5&&(e[i+o]-=t[3*o+o]*Math.round(a))}}}(n,t,a)}this.removePbc&&function(e,t){if(0!==t[0]&&0!==t[8]&&0!==t[4]){for(var n=e.length,r=3;r<n;r+=3)for(var i=0;i<3;++i){var o=e[r+i]-e[r-3+i];if(Math.abs(o)>.9*t[3*i+i])if(o>0)for(var a=0;a<3;++a)e[r+a]-=t[3*i+a];else for(var s=0;s<3;++s)e[r+s]+=t[3*i+s]}}}(n,t)}this.selectionIndices.length>0&&this.coords1&&this.superpose&&this._doSuperpose(n),this.frameCache[e]=n,this.boxCache[e]=t,this.frameCacheSize+=1},kg.prototype._setFrameCount=function(e){e!==this._frameCount&&(this._frameCount=e,this.signals.countChanged.dispatch(e))},kg.prototype.dispose=function(){this._resetCache(),this._disposed=!0,this.player&&this.player.stop()},kg.prototype.setPlayer=function(e){this.player=e,this.signals.playerChanged.dispatch(e)},kg.prototype.getFrameTime=function(e){return this.timeOffset+e*this.deltaTime},Object.defineProperties(kg.prototype,Pg);var Mg=function(e){function t(t,n,r){var i=r||{};i.timeOffset=Sa(i.timeOffset,t.timeOffset),i.deltaTime=Sa(i.deltaTime,t.deltaTime),e.call(this,"",n,i),this.name=t.name,this.path=t.path,this.frames=t.coordinates,this.boxes=t.boxes,this._init(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"frames"},t.prototype._makeAtomIndices=function(){"StructureView"===this.structure.type?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=void 0},t.prototype._loadFrame=function(e,t){var n,r=this.frames[e];if(this.atomIndices){var i=this.atomIndices,o=i.length;n=new Float32Array(3*o);for(var a=0;a<o;++a){var s=3*a,l=3*i[a];n[s+0]=r[l+0],n[s+1]=r[l+1],n[s+2]=r[l+2]}}else n=new Float32Array(r);var u=this.boxes[e],c=this.frames.length;this._process(e,u,n,c),"function"===typeof t&&t()},t.prototype._loadFrameCount=function(){this.frames&&this._setFrameCount(this.frames.length)},Object.defineProperties(t.prototype,n),t}(kg),Ag=function(e){function t(t,n,r){e.call(this,"",n,r),this._init(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"structure"},t.prototype._makeAtomIndices=function(){this.structure.atomSet&&this.structure.atomSet.getSize()<this.structure.atomStore.count?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=void 0},t.prototype._loadFrame=function(e,t){var n,r=this.structure,i=r.frames[e];if(this.atomIndices){var o=this.atomIndices,a=o.length;n=new Float32Array(3*a);for(var s=0;s<a;++s){var l=3*s,u=3*o[s];n[l+0]=i[u+0],n[l+1]=i[u+1],n[l+2]=i[u+2]}}else n=new Float32Array(i);var c=r.boxes[e],d=r.frames.length;this._process(e,c,n,d),"function"===typeof t&&t()},t.prototype._loadFrameCount=function(){this._setFrameCount(this.structure.frames.length)},Object.defineProperties(t.prototype,n),t}(kg),Tg=function(e){function t(t,n,r){e.call(this,t,n,r),this._init(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"remote"},t.prototype._makeAtomIndices=function(){var e=[];if("StructureView"===this.structure.type){for(var t=this.structure.getAtomIndices(),n=t.length,r=t[0],i=t[0],o=1;o<n;++o){var a=t[o];i+1<a&&(e.push([r,i+1]),r=a),i=a}e.push([r,i+1])}else e.push([0,this.atomCount]);this.atomIndices=e},t.prototype._loadFrame=function(e,t){var n=this,r=new XMLHttpRequest,i=cl.getFrameUrl(this.trajPath,e),o=cl.getFrameParams(this.trajPath,this.atomIndices);r.open("POST",i,!0),r.responseType="arraybuffer",r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.addEventListener("load",(function(){var o=r.response;if(o){var a=new Int32Array(o,0,1)[0],s=new Float32Array(o,8,9),l=new Float32Array(o,44);n._process(e,s,l,a),"function"===typeof t&&t()}else rl.error("empty arrayBuffer for '"+i+"'")}),!1),r.send(o)},t.prototype._loadFrameCount=function(){var e=this,t=new XMLHttpRequest,n=cl.getCountUrl(this.trajPath);t.open("GET",n,!0),t.addEventListener("load",(function(){e._setFrameCount(parseInt(t.response))}),!1),t.send()},Object.defineProperties(t.prototype,n),t}(kg);km.prototype.getView=function(e){return new Rg(this,e)};var Rg=function(e){function t(t,n){e.call(this),this.structure=t,this.selection=n,this.center=new U,this.boundingBox=new Z,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy(),this.selection&&this.selection.signals.stringChanged.add(this.refresh,this),this.structure.signals.refreshed.add(this.refresh,this),this.refresh()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},name:{configurable:!0},path:{configurable:!0},title:{configurable:!0},id:{configurable:!0},data:{configurable:!0},atomSetDict:{configurable:!0},biomolDict:{configurable:!0},entityList:{configurable:!0},unitcell:{configurable:!0},frames:{configurable:!0},boxes:{configurable:!0},validation:{configurable:!0},bondStore:{configurable:!0},backboneBondStore:{configurable:!0},rungBondStore:{configurable:!0},atomStore:{configurable:!0},residueStore:{configurable:!0},chainStore:{configurable:!0},modelStore:{configurable:!0},atomMap:{configurable:!0},residueMap:{configurable:!0},bondHash:{configurable:!0},spatialHash:{configurable:!0},_hasCoords:{configurable:!0}};return t.prototype.init=function(){},n.type.get=function(){return"StructureView"},n.name.get=function(){return this.structure.name},n.path.get=function(){return this.structure.path},n.title.get=function(){return this.structure.title},n.id.get=function(){return this.structure.id},n.data.get=function(){return this.structure.data},n.atomSetDict.get=function(){return this.structure.atomSetDict},n.biomolDict.get=function(){return this.structure.biomolDict},n.entityList.get=function(){return this.structure.entityList},n.unitcell.get=function(){return this.structure.unitcell},n.frames.get=function(){return this.structure.frames},n.boxes.get=function(){return this.structure.boxes},n.validation.get=function(){return this.structure.validation},n.bondStore.get=function(){return this.structure.bondStore},n.backboneBondStore.get=function(){return this.structure.backboneBondStore},n.rungBondStore.get=function(){return this.structure.rungBondStore},n.atomStore.get=function(){return this.structure.atomStore},n.residueStore.get=function(){return this.structure.residueStore},n.chainStore.get=function(){return this.structure.chainStore},n.modelStore.get=function(){return this.structure.modelStore},n.atomMap.get=function(){return this.structure.atomMap},n.residueMap.get=function(){return this.structure.residueMap},n.bondHash.get=function(){return this.structure.bondHash},n.spatialHash.get=function(){return this.structure.spatialHash},n._hasCoords.get=function(){return this.structure._hasCoords},n._hasCoords.set=function(e){this.structure._hasCoords=e},t.prototype.refresh=function(){var e=this;sl&&rl.time("StructureView.refresh"),this.atomSetCache={};var t=this.structure;if(this.selection.isAllSelection()&&t!==this&&t.atomSet&&t.bondSet){for(var n in this.atomSet=t.atomSet.clone(),this.bondSet=t.bondSet.clone(),e.atomSetDict){var r=e.atomSetDict[n];e.atomSetCache["__"+n]=r.clone()}this.atomCount=t.atomCount,this.bondCount=t.bondCount,this.boundingBox.copy(t.boundingBox),this.center.copy(t.center)}else if(this.selection.isNoneSelection()&&t!==this&&t.atomSet&&t.bondSet){for(var i in this.atomSet=new bd(t.atomCount),this.bondSet=new bd(t.bondCount),e.atomSetDict)e.atomSetCache["__"+i]=new bd(t.atomCount);this.atomCount=0,this.bondCount=0,this.boundingBox.makeEmpty(),this.center.set(0,0,0)}else{for(var o in this.atomSet=this.getAtomSet(this.selection,!0),t.atomSet&&(this.atomSet=this.atomSet.intersection(t.atomSet)),this.bondSet=this.getBondSet(),e.atomSetDict){var a=e.atomSetDict[o];e.atomSetCache["__"+o]=a.makeIntersection(e.atomSet)}this.atomCount=this.atomSet.getSize(),this.bondCount=this.bondSet.getSize(),this.boundingBox=this.getBoundingBox(),this.center=this.boundingBox.getCenter(new U)}sl&&rl.timeEnd("StructureView.refresh"),this.signals.refreshed.dispatch()},t.prototype.setSelection=function(e){this.selection=e,this.refresh()},t.prototype.getSelection=function(e){var t=[];e&&e.string&&t.push(e.string);var n=this.structure.getSelection();n&&n.string&&t.push(n.string),this.selection&&this.selection.string&&t.push(this.selection.string);var r="";return t.length>0&&(r="( "+t.join(" ) AND ( ")+" )"),new zs(r)},t.prototype.getStructure=function(){return this.structure.getStructure()},t.prototype.eachBond=function(e,t){this.structure.eachBond(e,this.getSelection(t))},t.prototype.eachAtom=function(e,t){var n=this.getAtomProxy(),r=this.getAtomSet(t),i=this.atomStore.count;if(r.getSize()<i)r.forEach((function(t){n.index=t,e(n)}));else for(var o=0;o<i;++o)n.index=o,e(n)},t.prototype.eachResidue=function(e,t){this.structure.eachResidue(e,this.getSelection(t))},t.prototype.eachResidueN=function(e,t){console.error("StructureView.eachResidueN() not implemented")},t.prototype.eachChain=function(e,t){this.structure.eachChain(e,this.getSelection(t))},t.prototype.eachModel=function(e,t){this.structure.eachModel(e,this.getSelection(t))},t.prototype.getAtomSet=function(e,t){void 0===t&&(t=!1);var n=this.structure.getAtomSet(e);return!t&&this.atomSet&&(n=n.makeIntersection(this.atomSet)),n},t.prototype.getAtomIndices=function(e){return this.structure.getAtomIndices(this.getSelection(e))},t.prototype.refreshPosition=function(){return this.structure.refreshPosition()},t.prototype.dispose=function(){this.selection&&this.selection.signals.stringChanged.remove(this.refresh,this),this.structure.signals.refreshed.remove(this.refresh,this),delete this.structure,delete this.atomSet,delete this.bondSet,delete this.atomCount,delete this.bondCount},Object.defineProperties(t.prototype,n),t}(km),Ig=[[4,0,-2,-1,-2,0,-2,-1,-1,-1,-1,-2,-1,-1,-1,1,0,0,-3,-2],[0,9,-3,-4,-2,-3,-3,-1,-3,-1,-1,-3,-3,-3,-3,-1,-1,-1,-2,-2],[-2,-3,6,2,-3,-1,-1,-3,-1,-4,-3,1,-1,0,-2,0,-1,-3,-4,-3],[-1,-4,2,5,-3,-2,0,-3,1,-3,-2,0,-1,2,0,0,-1,-2,-3,-2],[-2,-2,-3,-3,6,-3,-1,0,-3,0,0,-3,-4,-3,-3,-2,-2,-1,1,3],[0,-3,-1,-2,-3,6,-2,-4,-2,-4,-3,0,-2,-2,-2,0,-2,-3,-2,-3],[-2,-3,-1,0,-1,-2,8,-3,-1,-3,-2,1,-2,0,0,-1,-2,-3,-2,2],[-1,-1,-3,-3,0,-4,-3,4,-3,2,1,-3,-3,-3,-3,-2,-1,3,-3,-1],[-1,-3,-1,1,-3,-2,-1,-3,5,-2,-1,0,-1,1,2,0,-1,-2,-3,-2],[-1,-1,-4,-3,0,-4,-3,2,-2,4,2,-3,-3,-2,-2,-2,-1,1,-2,-1],[-1,-1,-3,-2,0,-3,-2,1,-1,2,5,-2,-2,0,-1,-1,-1,1,-1,-1],[-2,-3,1,0,-3,0,1,-3,0,-3,-2,6,-2,0,0,1,0,-3,-4,-2],[-1,-3,-1,-1,-4,-2,-2,-3,-1,-3,-2,-2,7,-1,-2,-1,-1,-2,-4,-3],[-1,-3,0,2,-3,-2,0,-3,1,-2,0,0,-1,5,1,0,-1,-2,-2,-1],[-1,-3,-2,0,-3,-2,0,-3,2,-2,-1,0,-2,1,5,-1,-1,-3,-3,-2],[1,-1,0,0,-2,0,-1,-2,0,-2,-1,1,-1,0,-1,4,1,-2,-3,-2],[0,-1,-1,-1,-2,-2,-2,-1,-1,-1,-1,0,-1,-1,-1,1,5,0,-2,-2],[0,-1,-3,-2,-1,-3,-3,3,-2,1,1,-3,-2,-2,-3,-2,0,4,-3,-1],[-3,-2,-4,-3,1,-2,-2,-3,-3,-2,-1,-4,-4,-2,-3,-3,-2,-3,11,2],[-2,-2,-3,-2,3,-3,2,-1,-2,-1,-1,-2,-3,-1,-2,-2,-2,-1,2,7]];function Og(e,t){var n,r=0,i={};return t.forEach((function(t){n=0;var o={};t.forEach((function(t){o[e[n++]]=t})),i[e[r++]]=o})),i}var Lg={blosum62:Og("ARNDCQEGHILKMFPSTWYVBZ?",[[4,-1,-2,-2,0,-1,-1,0,-2,-1,-1,-1,-1,-2,-1,1,0,-3,-2,0,-2,-1,0],[-1,5,0,-2,-3,1,0,-2,0,-3,-2,2,-1,-3,-2,-1,-1,-3,-2,-3,-1,0,-1],[-2,0,6,1,-3,0,0,0,1,-3,-3,0,-2,-3,-2,1,0,-4,-2,-3,3,0,-1],[-2,-2,1,6,-3,0,2,-1,-1,-3,-4,-1,-3,-3,-1,0,-1,-4,-3,-3,4,1,-1],[0,-3,-3,-3,9,-3,-4,-3,-3,-1,-1,-3,-1,-2,-3,-1,-1,-2,-2,-1,-3,-3,-2],[-1,1,0,0,-3,5,2,-2,0,-3,-2,1,0,-3,-1,0,-1,-2,-1,-2,0,3,-1],[-1,0,0,2,-4,2,5,-2,0,-3,-3,1,-2,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-2,0,-1,-3,-2,-2,6,-2,-4,-4,-2,-3,-3,-2,0,-2,-2,-3,-3,-1,-2,-1],[-2,0,1,-1,-3,0,0,-2,8,-3,-3,-1,-2,-1,-2,-1,-2,-2,2,-3,0,0,-1],[-1,-3,-3,-3,-1,-3,-3,-4,-3,4,2,-3,1,0,-3,-2,-1,-3,-1,3,-3,-3,-1],[-1,-2,-3,-4,-1,-2,-3,-4,-3,2,4,-2,2,0,-3,-2,-1,-2,-1,1,-4,-3,-1],[-1,2,0,-1,-3,1,1,-2,-1,-3,-2,5,-1,-3,-1,0,-1,-3,-2,-2,0,1,-1],[-1,-1,-2,-3,-1,0,-2,-3,-2,1,2,-1,5,0,-2,-1,-1,-1,-1,1,-3,-1,-1],[-2,-3,-3,-3,-2,-3,-3,-3,-1,0,0,-3,0,6,-4,-2,-2,1,3,-1,-3,-3,-1],[-1,-2,-2,-1,-3,-1,-1,-2,-2,-3,-3,-1,-2,-4,7,-1,-1,-4,-3,-2,-2,-1,-2],[1,-1,1,0,-1,0,0,0,-1,-2,-2,0,-1,-2,-1,4,1,-3,-2,-2,0,0,0],[0,-1,0,-1,-1,-1,-1,-2,-2,-1,-1,-1,-1,-2,-1,1,5,-2,-2,0,-1,-1,0],[-3,-3,-4,-4,-2,-2,-3,-2,-2,-3,-2,-3,-1,1,-4,-3,-2,11,2,-3,-4,-3,-2],[-2,-2,-2,-3,-2,-1,-2,-3,2,-1,-1,-2,-1,3,-3,-2,-2,2,7,-1,-3,-2,-1],[0,-3,-3,-3,-1,-2,-2,-3,-3,3,1,-2,1,-1,-2,-2,0,-3,-1,4,-3,-2,-1],[-2,-1,3,4,-3,0,1,-1,0,-3,-4,0,-3,-3,-2,0,-1,-4,-3,-3,4,1,-1],[-1,0,0,1,-3,3,4,-2,0,-3,-3,1,-1,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,0,0,-2,-1,-1,-1,-1,-1]]),blosum62x:Og("ACDEFGHIKLMNPQRSTVWY",Ig)},Dg=function(e,t,n,r,i){void 0===n&&(n=-10),void 0===r&&(r=-1),void 0===i&&(i="blosum62"),this.seq1=e,this.seq2=t,this.gapPenalty=n,this.gapExtensionPenalty=r,i&&(this.substMatrix=Lg[i])};function Fg(e,t,n,r,i){var o,a,s,l,u;if(void 0===n&&(n=!1),void 0===r&&(r=""),void 0===i&&(i=""),n){var c=e,d=t;r&&i&&(c=e.getView(new zs(r)),d=t.getView(new zs(i)));var f,p,h=c.getSequence(),m=d.getSequence(),g=new Dg(h.join(""),m.join(""));g.calc(),g.trace(),o=0,a=0,s=g.ali1.length;for(var v=[],y=[],b=0;b<s;++b){var x=g.ali1[b],w=g.ali2[b];f=0,p=0,"-"===x?y[a]=!1:(y[a]=!0,f=1),"-"===w?v[o]=!1:(v[o]=!0,p=1),o+=f,a+=p}var _=[],S=[],C=c.getAtomProxy(),E=d.getAtomProxy();o=0,c.eachResidue((function(e){void 0!==e.traceAtomIndex&&e.traceAtomIndex===e.getAtomIndexByName("CA")&&(v[o]&&(C.index=e.getAtomIndexByName("CA"),_.push(C.x,C.y,C.z)),o+=1)})),o=0,d.eachResidue((function(e){void 0!==e.traceAtomIndex&&e.traceAtomIndex===e.getAtomIndexByName("CA")&&(y[o]&&(E.index=e.getAtomIndexByName("CA"),S.push(E.x,E.y,E.z)),o+=1)})),l=new Float32Array(_),u=new Float32Array(S)}else{l=e.getView(new zs(r+" and .CA")),u=t.getView(new zs(i+" and .CA"))}var k=new _g(l,u).transform(e);return e.refreshPosition(),k}Dg.prototype.initMatrices=function(){var e=this;this.n=this.seq1.length,this.m=this.seq2.length,this.score=void 0,this.ali="",this.S=[],this.V=[],this.H=[];for(var t=0;t<=this.n;++t){e.S[t]=[],e.V[t]=[],e.H[t]=[];for(var n=0;n<=this.m;++n)e.S[t][n]=0,e.V[t][n]=0,e.H[t][n]=0}for(var r=0;r<=this.n;++r)e.S[r][0]=e.gap(0),e.H[r][0]=-1/0;for(var i=0;i<=this.m;++i)e.S[0][i]=e.gap(0),e.V[0][i]=-1/0;this.S[0][0]=0},Dg.prototype.gap=function(e){return this.gapPenalty+e*this.gapExtensionPenalty},Dg.prototype.makeScoreFn=function(){var e=this.seq1,t=this.seq2,n=this.substMatrix;return n?function(r,i){var o=e[r],a=t[i];try{return n[o][a]}catch(bS){return-4}}:(rl.warn("Alignment: no subst matrix"),function(n,r){return e[n]===t[r]?5:-3})},Dg.prototype.calc=function(){sl&&rl.time("Alignment.calc"),this.initMatrices();for(var e,t,n,r,i,o=this.gap(0),a=this.makeScoreFn(),s=this.gapExtensionPenalty,l=this.V,u=this.H,c=this.S,d=this.n,f=this.m,p=1;p<=d;++p){t=c[p-1],e=l[p-1],n=l[p],r=u[p],i=c[p];for(var h=1;h<=f;++h)n[h]=Math.max(t[h]+o,e[h]+s),r[h]=Math.max(i[h-1]+o,r[h-1]+s),i[h]=Math.max(t[h-1]+a(p-1,h-1),n[h],r[h])}sl&&rl.timeEnd("Alignment.calc"),sl&&rl.log(this.S,this.V,this.H)},Dg.prototype.trace=function(){var e=this;sl&&rl.time("Alignment.trace"),this.ali1="",this.ali2="";var t,n=this.makeScoreFn(),r=this.n,i=this.m;for(this.S[r][i]>=this.V[r][i]?(t="S",this.score=this.S[r][i]):this.V[r][i]>=this.H[r][i]?(t="V",this.score=this.V[r][i]):(t="H",this.score=this.H[r][i]),sl&&rl.log("Alignment: SCORE",this.score),sl&&rl.log("Alignment: S, V, H",this.S[r][i],this.V[r][i],this.H[r][i]);r>0&&i>0;)"S"===t?e.S[r][i]===e.S[r-1][i-1]+n(r-1,i-1)?(e.ali1=e.seq1[r-1]+e.ali1,e.ali2=e.seq2[i-1]+e.ali2,--r,--i,t="S"):e.S[r][i]===e.V[r][i]?t="V":e.S[r][i]===e.H[r][i]?t="H":(--r,--i):"V"===t?e.V[r][i]===e.V[r-1][i]+e.gapExtensionPenalty?(e.ali1=e.seq1[r-1]+e.ali1,e.ali2="-"+e.ali2,--r,t="V"):e.V[r][i]===e.S[r-1][i]+e.gap(0)?(e.ali1=e.seq1[r-1]+e.ali1,e.ali2="-"+e.ali2,--r,t="S"):--r:"H"===t?e.H[r][i]===e.H[r][i-1]+e.gapExtensionPenalty?(e.ali1="-"+e.ali1,e.ali2=e.seq2[i-1]+e.ali2,--i,t="H"):e.H[r][i]===e.S[r][i-1]+e.gap(0)?(e.ali1="-"+e.ali1,e.ali2=e.seq2[i-1]+e.ali2,--i,t="S"):--i:rl.error("Alignment: no matrix");for(;r>0;)e.ali1=e.seq1[r-1]+e.ali1,e.ali2="-"+e.ali2,--r;for(;i>0;)e.ali1="-"+e.ali1,e.ali2=e.seq2[i-1]+e.ali2,--i;sl&&rl.timeEnd("Alignment.trace"),sl&&rl.log([this.ali1,this.ali2])};var Ng=Object.assign({sele:"",defaultAssembly:""},fg),Bg=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,t,n,Object.assign({name:n.name},r)),this.structure=n,this.trajList=[],this.signals=Object.assign(this.signals,{trajectoryAdded:new fs,trajectoryRemoved:new fs,defaultAssemblyChanged:new fs}),this.initSelection(this.parameters.sele),this.pickBuffer=function(e){var t=0,n=0,r=[];return{has:function(e){return-1!==r.indexOf(e)},get:function(e){return r[e]},push:function(i){r[t]=i,t=(e+t+1)%e,++n},get count(){return n},get data(){return r.slice(0,Math.min(n,e))},clear:function(){n=0,t=0,r.length=0}}}(4),this.pickDict=function(){var e={};return{has:function(t){return void 0!==e[JSON.stringify(t)]},add:function(t,n){e[JSON.stringify(t)]=n},del:function(t){delete e[JSON.stringify(t)]},get values(){return Object.keys(e).map((function(t){return e[t]}))}}}(),this.spacefillRepresentation=this.addRepresentation("spacefill",{sele:"none",opacity:il.opacity,color:il.color,disablePicking:!0,radiusType:"data"},!0),this.distanceRepresentation=this.addRepresentation("distance",il,!0),this.angleRepresentation=this.addRepresentation("angle",il,!0),this.dihedralRepresentation=this.addRepresentation("dihedral",il,!0),this.measureRepresentations=new vg([this.spacefillRepresentation,this.distanceRepresentation,this.angleRepresentation,this.dihedralRepresentation]),this.setDefaultAssembly(this.parameters.defaultAssembly)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return Ng},n.type.get=function(){return"structure"},t.prototype.initSelection=function(e){var t=this;this.selection=new zs(e),this.structureView=new Rg(this.structure,this.selection),this.selection.signals.stringChanged.add((function(){t.structureView.setSelection(t.selection),t.rebuildRepresentations(),t.rebuildTrajectories()}))},t.prototype.setSelection=function(e){return this.parameters.sele=e,this.selection.setString(e),this},t.prototype.setDefaultAssembly=function(e){if(void 0===this.structure.biomolDict[e]&&(e=""),this.parameters.defaultAssembly!==e){var t={defaultAssembly:e};this.reprList.forEach((function(e){return e.setParameters(t)})),this.measureRepresentations.setParameters(t),this.parameters.defaultAssembly=e,this.signals.defaultAssemblyChanged.dispatch(e)}return this},t.prototype.rebuildRepresentations=function(){this.reprList.forEach((function(e){e.build()})),this.measureRepresentations.build()},t.prototype.rebuildTrajectories=function(){var e=this;this.trajList.forEach((function(t){t.trajectory.setStructure(e.structureView)}))},t.prototype.updateRepresentations=function(t){e.prototype.updateRepresentations.call(this,t),this.measureRepresentations.update(t)},t.prototype.addRepresentation=function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1),t.defaultAssembly=this.parameters.defaultAssembly;var i=this._addRepresentation(e,this.structureView,t,n);return n||i.signals.parametersChanged.add((function(){return r.measureUpdate()})),i},t.prototype.addTrajectory=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t={});var r=function(e,t,n){return e&&e instanceof xg?new Mg(e,t,n):!e&&t.frames?new Ag(e,t,n):new Tg(e,t,n)}(e,this.structureView,t);r.signals.frameChanged.add((function(){n.updateRepresentations({position:!0})}));var i=new bg(this.stage,r,t);return this.trajList.push(i),this.signals.trajectoryAdded.dispatch(i),i},t.prototype.removeTrajectory=function(e){var t=this.trajList.indexOf(e);-1!==t&&this.trajList.splice(t,1),e.dispose(),this.signals.trajectoryRemoved.dispatch(e)},t.prototype.dispose=function(){this.trajList.slice().forEach((function(e){return e.dispose()})),this.trajList.length=0,this.structure.dispose(),this.measureRepresentations.dispose(),e.prototype.dispose.call(this)},t.prototype.autoView=function(e,t){"number"===typeof e&&(t=e,e=""),this.stage.animationControls.zoomMove(this.getCenter(e),this.getZoom(e),Sa(t,0))},t.prototype.getBoxUntransformed=function(e){return e?this.structureView.getBoundingBox(new zs(e)):this.structureView.boundingBox},t.prototype.getCenterUntransformed=function(e){return e&&"string"===typeof e?this.structure.atomCenter(new zs(e)):this.structure.center},t.prototype.superpose=function(e,t,n,r){return Fg(this.structureView,e.structureView,t,n,r),this.updateRepresentations({position:!0}),this},t.prototype.getMaxRepresentationRadius=function(e){var t=0,n=this.structure.getAtomProxy(e);return this.eachRepresentation((function(e){if(e.getVisibility()){var r=e.repr;t=Math.max(r.getAtomRadius(n),t)}})),t},t.prototype.measurePick=function(e){var t=this.pickBuffer.count;if(this.lastPick===e.index&&t>=1){if(t>1){var n=this.pickBuffer.data,r=this.pickBuffer.data.sort();this.pickDict.has(r)?this.pickDict.del(r):this.pickDict.add(r,n),2===t?this.distanceRepresentation.setParameters({atomPair:this.pickDict.values.filter((function(e){return 2===e.length}))}):3===t?this.angleRepresentation.setParameters({atomTriple:this.pickDict.values.filter((function(e){return 3===e.length}))}):4===t&&this.dihedralRepresentation.setParameters({atomQuad:this.pickDict.values.filter((function(e){return 4===e.length}))})}this.pickBuffer.clear(),this.lastPick=void 0}else this.pickBuffer.has(e.index)||this.pickBuffer.push(e.index),this.lastPick=e.index;this.measureUpdate()},t.prototype.measureClear=function(){this.pickBuffer.clear(),this.lastPick=void 0,this.spacefillRepresentation.setSelection("none")},t.prototype.measureBuild=function(){var e=this.measureData();this.distanceRepresentation.setParameters({atomPair:e.distance}),this.angleRepresentation.setParameters({atomTriple:e.angle}),this.dihedralRepresentation.setParameters({atomQuad:e.dihedral})},t.prototype.measureUpdate=function(){var e=this,t=this.pickBuffer.data,n={};t.forEach((function(t){var r=Math.max(.1,e.getMaxRepresentationRadius(t));n[t]=r*(2.3-ns(.1,2,r))})),this.spacefillRepresentation.setSelection(t.length?"@"+t.join(","):"none"),this.spacefillRepresentation.setParameters({radiusData:n})},t.prototype.measureData=function(){var e=this.pickDict.values;return{distance:e.filter((function(e){return 2===e.length})),angle:e.filter((function(e){return 3===e.length})),dihedral:e.filter((function(e){return 4===e.length}))}},t.prototype.removeAllMeasurements=function(e){var t=this.pickDict,n=t.values,r=function(e){n.filter((function(t){return t.length===e})).forEach((function(e){return t.del(e.slice().sort())}))};(!e||1&e)&&r(2),(!e||2&e)&&r(3),(!e||4&e)&&r(4),this.measureBuild()},t.prototype.removeMeasurement=function(e){this.pickDict.del(e.slice().sort()),this.measureBuild()},t.prototype.addMeasurement=function(e){if(!(e.length<2||e.length>4)){var t=e.slice().sort();this.pickDict.has(t)||this.pickDict.add(t,e),this.measureBuild()}},Object.defineProperties(t.prototype,n),t}(pg);bl.add("structure",Bg),bl.add("structureview",Bg);var zg=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,t,n,Object.assign({name:n.name},r)),this.surface=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"surface"},t.prototype.addRepresentation=function(e,t){return void 0===t&&(t={}),this._addRepresentation(e,this.surface,t)},t.prototype.getBoxUntransformed=function(){return this.surface.boundingBox},t.prototype.getCenterUntransformed=function(){return this.surface.center},t.prototype.dispose=function(){this.surface.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(pg);bl.add("surface",zg);var jg=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,t,n,Object.assign({name:n.name},r)),this.volume=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"volume"},t.prototype.addRepresentation=function(e,t){return void 0===t&&(t={}),this._addRepresentation(e,this.volume,t)},t.prototype.getBoxUntransformed=function(){return this.volume.boundingBox},t.prototype.getCenterUntransformed=function(){return this.volume.center},t.prototype.dispose=function(){this.volume.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(pg);bl.add("volume",jg);var Hg=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addRepresentation=function(e,t){return this.forEach((function(n){return n.addRepresentation(e,t)}))},t.prototype.autoView=function(e){return this.forEach((function(t){return t.autoView(e)}))},t}(mg);function Ug(e,t){return e instanceof RegExp?null!==t.name.match(e):t.name===e}var Vg=new U,Gg={impostor:!0,quality:"medium",workerDefault:!0,sampleLevel:0,backgroundColor:"black",rotateSpeed:2,zoomSpeed:1.2,panSpeed:1,clipNear:0,clipFar:100,clipDist:10,clipMode:"scene",clipScale:"relative",fogNear:50,fogFar:100,fogMode:"scene",fogScale:"relative",cameraFov:40,cameraEyeSep:.3,cameraType:"perspective",lightColor:14540253,lightIntensity:1,ambientColor:14540253,ambientIntensity:.2,hoverTimeout:0,tooltip:!0,mousePreset:"default"},Wg=function(e,t){void 0===t&&(t={}),this.signals={parametersChanged:new fs,fullscreenChanged:new fs,componentAdded:new fs,componentRemoved:new fs,clicked:new fs,hovered:new fs},this.tasks=new Ul,this.compList=[],this.defaultFileParams={},this.logList=[],this.viewer=new Lu(e),this.viewer.renderer&&(this.tooltip=document.createElement("div"),Object.assign(this.tooltip.style,{display:"none",position:"fixed",zIndex:"1000000",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),this.viewer.container.appendChild(this.tooltip),this.mouseObserver=new zu(this.viewer.renderer.domElement),this.viewerControls=new cc(this),this.trackballControls=new Yu(this),this.pickingControls=new tc(this),this.animationControls=new Sc(this),this.mouseControls=new Wp(this),this.keyControls=new Xp(this),this.pickingBehavior=new Kp(this),this.mouseBehavior=new Yp(this),this.animationBehavior=new Zp(this),this.keyBehavior=new Jp(this),this.spinAnimation=this.animationControls.spin([0,1,0],.005),this.spinAnimation.pause(!0),this.rockAnimation=this.animationControls.rock([0,1,0],.005),this.rockAnimation.pause(!0),this.parameters=Ca(t,Gg),this.setParameters(this.parameters),this.viewer.animate())};Wg.prototype.setParameters=function(e){void 0===e&&(e={}),Ea(this.parameters,e);var t=e,n=this.parameters,r=this.viewer,i=this.trackballControls;return void 0!==t.quality&&this.setQuality(n.quality),void 0!==t.impostor&&this.setImpostor(n.impostor),void 0!==t.rotateSpeed&&(i.rotateSpeed=n.rotateSpeed),void 0!==t.zoomSpeed&&(i.zoomSpeed=n.zoomSpeed),void 0!==t.panSpeed&&(i.panSpeed=n.panSpeed),void 0!==t.mousePreset&&this.mouseControls.preset(n.mousePreset),this.mouseObserver.setParameters({hoverTimeout:n.hoverTimeout}),r.setClip(n.clipNear,n.clipFar,n.clipDist,n.clipMode,n.clipScale),r.setFog(void 0,n.fogNear,n.fogFar,n.fogMode,n.fogScale),r.setCamera(n.cameraType,n.cameraFov,n.cameraEyeSep),r.setSampling(n.sampleLevel),r.setBackground(n.backgroundColor),r.setLight(n.lightColor,n.lightIntensity,n.ambientColor,n.ambientIntensity),this.signals.parametersChanged.dispatch(this.getParameters()),this},Wg.prototype.log=function(e){console.log("STAGE LOG",e),this.logList.push(e)},Wg.prototype.getParameters=function(){return Object.assign({},this.parameters)},Wg.prototype.defaultFileRepresentation=function(e){if(e instanceof Bg){var t,n,r;e.setSelection("/0");var i=e.structure;if(i.biomolDict.BU1){var o=i.biomolDict.BU1;t=o.getAtomCount(i),n=o.getResidueCount(i),r=o.getInstanceCount(),e.setDefaultAssembly("BU1")}else t=i.getModelProxy(0).atomCount,n=i.getModelProxy(0).residueCount,r=1;var a=t;el&&(a*=4);var s=i.atomStore.count/i.residueStore.count<2;s&&(a*=10);var l="chainname",u="RdYlBu",c=!1;if(1===i.getChainnameCount(new zs("polymer and /0"))&&(l="residueindex",u="spectral",c=!0),sl&&console.log(a,t,r,s),n/r<4)e.addRepresentation("ball+stick",{colorScheme:"element",radiusScale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"});else if(r>5&&a>15e3||a>7e5){var d=Math.min(1.5,Math.max(.1,2e3/(a/r)));s&&(d=Math.min(d,.15)),e.addRepresentation("surface",{colorScheme:l,colorScale:u,colorReverse:c,sele:"polymer",surfaceType:"sas",probeRadius:1.4,scaleFactor:d,useWorker:!1})}else a>25e4?e.addRepresentation("backbone",{colorScheme:l,colorScale:u,colorReverse:c,lineOnly:!0}):a>1e5?e.addRepresentation("backbone",{colorScheme:l,colorScale:u,colorReverse:c,quality:"low",disableImpostor:!0,radiusScale:2}):a>8e4?e.addRepresentation("backbone",{colorScheme:l,colorScale:u,colorReverse:c,radiusScale:2}):(e.addRepresentation("cartoon",{colorScheme:l,colorScale:u,colorReverse:c,radiusScale:.7,aspectRatio:5,quality:"auto"}),a<5e4&&e.addRepresentation("base",{colorScheme:l,colorScale:u,colorReverse:c,quality:"auto"}),e.addRepresentation("ball+stick",{sele:"ligand",colorScheme:"element",radiusScale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"}));e.structure.frames.length&&e.addTrajectory()}else(e instanceof zg||e instanceof jg)&&e.addRepresentation("surface");this.tasks.onZeroOnce(this.autoView,this)},Wg.prototype.loadFile=function(e,t){var n=this;void 0===t&&(t={});var r=Object.assign({},this.defaultFileParams,t),i=Rl(e).name;this.tasks.increment(),this.log("loading file '"+i+"'");var o=Sa(r.ext,Rl(e).ext);return(gl.isTrajectory(o)?Promise.reject(new Error("loadFile: ext '"+o+"' is a trajectory and must be loaded into a structure component")):Ol(e,r)).then((function(e){n.log("loaded '"+i+"'");var t=n.addComponentFromObject(e,r);return r.defaultRepresentation&&n.defaultFileRepresentation(t),n.tasks.decrement(),t}),(function(e){n.tasks.decrement();var t="error loading file: '"+e+"'";throw n.log(t),t}))},Wg.prototype.loadScript=function(e){var t=this,n=Rl(e).name;return this.log("loading script '"+n+"'"),Ol(e).then((function(e){t.tasks.increment(),t.log("running script '"+n+"'"),e.run(t).then((function(){t.tasks.decrement(),t.log("finished script '"+n+"'")})),t.log("called script '"+n+"'")}),(function(e){t.tasks.decrement();var r="errored script '"+n+"' \""+e+'"';throw t.log(r),r}))},Wg.prototype.addComponent=function(e){e?(this.compList.push(e),this.signals.componentAdded.dispatch(e)):rl.warn("Stage.addComponent: no component given")},Wg.prototype.addComponentFromObject=function(e,t){void 0===t&&(t={});var n=bl.get(e.type);if(n){var r=new n(this,e,t);return this.addComponent(r),r}rl.warn("no component for object type",e.type)},Wg.prototype.removeComponent=function(e){var t=this.compList.indexOf(e);-1!==t&&(this.compList.splice(t,1),e.dispose(),this.signals.componentRemoved.dispatch(e))},Wg.prototype.removeAllComponents=function(){var e=this;this.compList.slice().forEach((function(t){return e.removeComponent(t)}))},Wg.prototype.handleResize=function(){this.viewer.handleResize()},Wg.prototype.setSize=function(e,t){var n=this.viewer.container;n!==document.body&&(void 0!==e&&(n.style.width=e),void 0!==t&&(n.style.height=t),this.handleResize())},Wg.prototype.toggleFullscreen=function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled){var t=this;e=e||this.viewer.container,this.lastFullscreenElement=e,n()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e.dataset.normalWidth=e.style.width||"",e.dataset.normalHeight=e.style.height||"",e.style.width=window.screen.width+"px",e.style.height=window.screen.height+"px",e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),document.addEventListener("fullscreenchange",r),document.addEventListener("mozfullscreenchange",r),document.addEventListener("webkitfullscreenchange",r),document.addEventListener("MSFullscreenChange",r),this.handleResize(),this.signals.fullscreenChanged.dispatch(!0),setTimeout((function(){t.handleResize()}),100))}else rl.log("fullscreen mode (currently) not possible");function n(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function r(){if(!n()&&t.lastFullscreenElement){var e=t.lastFullscreenElement;e.style.width=e.dataset.normalWidth||"",e.style.height=e.dataset.normalHeight||"",document.removeEventListener("fullscreenchange",r),document.removeEventListener("mozfullscreenchange",r),document.removeEventListener("webkitfullscreenchange",r),document.removeEventListener("MSFullscreenChange",r),t.handleResize(),t.signals.fullscreenChanged.dispatch(!1)}}},Wg.prototype.setSpin=function(e){e?(this.spinAnimation.resume(!0),this.rockAnimation.pause(!0)):this.spinAnimation.pause(!0)},Wg.prototype.setRock=function(e){e?(this.rockAnimation.resume(!0),this.spinAnimation.pause(!0)):this.rockAnimation.pause(!0)},Wg.prototype.toggleSpin=function(){this.setSpin(this.spinAnimation.paused)},Wg.prototype.toggleRock=function(){this.setRock(this.rockAnimation.paused)},Wg.prototype.setFocus=function(e){var t=Qa(e/2,0,49.9),n=100-t,r=(n-t)/2;"scene"==this.parameters.clipMode&&this.setParameters({clipNear:t,clipFar:n}),"scene"==this.parameters.fogMode&&this.setParameters({fogNear:Ja(n-r),fogFar:Ja(n+r)})},Wg.prototype.getZoomForBox=function(e){var t=e.getSize(Vg),n=Math.max(t.x,t.y,t.z),r=Math.min(t.x,t.y,t.z),i=n+Math.sqrt(r),o=Xa(this.viewer.perspectiveCamera.fov),a=this.viewer.width,s=this.viewer.height,l=s<a?1:a/s;return i=Math.abs(.5*i/l/Math.sin(o/2)),-(i+=this.parameters.clipDist)},Wg.prototype.getBox=function(){return this.viewer.boundingBox},Wg.prototype.getZoom=function(){return this.getZoomForBox(this.getBox())},Wg.prototype.getCenter=function(e){return this.getBox().getCenter(e||new U)},Wg.prototype.autoView=function(e){this.animationControls.zoomMove(this.getCenter(),this.getZoom(),Sa(e,0))},Wg.prototype.makeImage=function(e){var t=this;return void 0===e&&(e={}),new Promise((function(n,r){t.tasks.onZeroOnce((function(){t.tasks.increment(),t.viewer.makeImage(e).then((function(e){t.tasks.decrement(),n(e)})).catch((function(e){t.tasks.decrement(),r(e)}))}))}))},Wg.prototype.setImpostor=function(e){this.parameters.impostor=e;var t=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation((function(n){if(t.includes(n.getType())){var r=n.getParameters();r.disableImpostor=!e,n.build(r)}}))},Wg.prototype.setQuality=function(e){this.parameters.quality=e;var t=["tube","cartoon","ribbon","trace","rope"],n=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation((function(r){var i=r.getParameters();if(!t.includes(r.getType())){if(!n.includes(r.getType()))return;if(!i.disableImpostor)return void(r.repr.quality=e)}i.quality=e,r.build(i)}))},Wg.prototype.eachComponent=function(e,t){this.compList.slice().forEach((function(n){void 0!==t&&t!==n.type||e(n)}))},Wg.prototype.eachRepresentation=function(e,t){this.eachComponent((function(n){n.reprList.slice().forEach((function(r){void 0!==t&&t!==r.getType()||e(r,n)}))}))},Wg.prototype.getComponentsByName=function(e){var t=[];return this.eachComponent((function(n){(void 0===e||Ug(e,n))&&t.push(n)})),new Hg(t)},Wg.prototype.getComponentsByObject=function(e){var t=[];return this.eachComponent((function(n){n.object===e&&t.push(n)})),new Hg(t)},Wg.prototype.getRepresentationsByName=function(e){var t=[];return this.eachRepresentation((function(n,r){(void 0===e||Ug(e,n))&&t.push(n)})),new vg(t)},Wg.prototype.measureClear=function(){this.eachComponent((function(e){return e.measureClear()}),"structure")},Wg.prototype.measureUpdate=function(){this.eachComponent((function(e){return e.measureUpdate()}),"structure")},Wg.prototype.dispose=function(){this.tasks.dispose(),this.viewer.dispose()};var $g=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,t,n,Object.assign({name:n.name},r)),this.shape=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"shape"},t.prototype.addRepresentation=function(e,t){return void 0===t&&(t={}),this._addRepresentation(e,this.shape,t)},t.prototype.getBoxUntransformed=function(){return this.shape.boundingBox},t.prototype.getCenterUntransformed=function(){return this.shape.center},t.prototype.dispose=function(){this.shape.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(pg);bl.add("shape",$g);var qg=function(e){function t(t){var n=this;e.call(this,t),t.scale||(this.parameters.scale="rainbow",this.parameters.reverse=Sa(t.reverse,!0)),this.scalePerModel={},t.structure.eachModel((function(e){n.parameters.domain=[e.atomOffset,e.atomEnd],n.scalePerModel[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.scalePerModel[e.modelIndex](e.index)},t}(us);pl.add("atomindex",qg);var Xg=function(e){function t(t){if(e.call(this,t),t.scale||(this.parameters.scale="OrRd"),!t.domain){var n,r=1/0,i=-1/0;t.sele&&(n=new zs(t.sele)),t.structure.eachAtom((function(e){var t=e.bfactor;r=Math.min(r,t),i=Math.max(i,t)}),n),this.parameters.domain=[r,i]}this.bfactorScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.bfactorScale(e.bfactor)},t}(us);pl.add("bfactor",Xg);var Kg=function(e){function t(t){var n=this;e.call(this,t),this.chainidDictPerModel={},this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel((function(e){var t=0,r={};e.eachChain((function(e){void 0===r[e.chainid]&&(r[e.chainid]=t,t+=1)})),n.parameters.domain=[0,t-1],n.chainidDictPerModel[e.index]=r,n.scalePerModel[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=this.chainidDictPerModel[e.modelIndex];return this.scalePerModel[e.modelIndex](t[e.chainid])},t}(us);pl.add("chainid",Kg);var Yg=function(e){function t(t){var n=this;e.call(this,t),this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel((function(e){n.parameters.domain=[e.chainOffset,e.chainEnd],n.scalePerModel[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.scalePerModel[e.modelIndex](e.chainIndex)},t}(us);pl.add("chainindex",Yg);var Zg=function(e){function t(t){var n=this;e.call(this,t),this.chainnameDictPerModel={},this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel((function(e){var t=0,r={};e.eachChain((function(e){void 0===r[e.chainname]&&(r[e.chainname]=t,t+=1)})),n.parameters.domain=[0,t-1],n.chainnameDictPerModel[e.index]=r,n.scalePerModel[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=this.chainnameDictPerModel[e.modelIndex];return this.scalePerModel[e.modelIndex](t[e.chainname])},t}(us);pl.add("chainname",Zg);var Qg=function(e){function t(t){e.call(this,t),this.rsrzDict={},this.rsccDict={},t.scale||(this.parameters.scale="RdYlBu"),this.rsrzScale=this.getScale({domain:[2,0]}),this.rsccScale=this.getScale({domain:[.678,1]});var n=t.structure.validation;n&&(this.rsrzDict=n.rsrzDict,this.rsccDict=n.rsccDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=e.resno+"";e.inscode&&(t+="^"+e.inscode),e.chainname&&(t+=":"+e.chainname),t+="/"+e.modelIndex;var n=this.rsrzDict[t];if(void 0!==n)return this.rsrzScale(n);var r=this.rsccDict[t];return void 0!==r?this.rsccScale(r):9474192},t}(us);pl.add("densityfit",Qg);var Jg={ARG:{CD:.1,CZ:.5,NE:-.1},ASN:{CG:.55,OD1:-.55},ASP:{CB:-.16,CG:.36,OD1:-.6,OD2:-.6},CYS:{CB:.19,SG:-.19},GLN:{CD:.55,OE1:-.55},GLU:{CD:.36,CG:-.16,OE1:-.6,OE2:-.6},HIS:{CB:.1,CD2:.2,CE1:.45,CG:.15,ND1:.05,NE2:.05},LYS:{CE:.25,NZ:.75},MET:{CE:.06,CG:.06,SD:-.12},PTR:{C:.55,CA:.1,CZ:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SEP:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SER:{CB:.25,OG:-.25},THR:{CB:.25,OG1:-.25},TPO:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,OG1:-1.1,O1P:-.85,O2P:-.85,O3P:-.85,P:1.4},TRP:{CD1:.06,CD2:.1,CE2:-.04,CE3:-.03,CG:-.03,NE1:-.06},TYR:{CZ:.25,OH:-.25},backbone:{C:.55,O:-.55,N:-.35,CA:.1}};var ev=function(e){function t(t){var n=this;e.call(this,t),this.delta=new U,this.hCharges=[],t.scale||(this.parameters.scale="rwb"),t.domain||(this.parameters.domain=[-50,50]),this.scale=this.getScale(),this.charges=new Float32Array(t.structure.atomCount);var r=[];t.structure.eachAtom((function(e){var t;if(n.charges[e.index]=(null!==(t=e).partialCharge?t.partialCharge:t.isProtein()&&(Jg[t.resname]&&Jg[t.resname][t.atomname]||Jg.backbone[t.atomname])||0)*e.occupancy,"N"===e.atomname){if(e.bondCount>=3)return;if(e.bondToElementCount(1))return;var i=function(e,t){void 0===t&&(t=new U);var n=!1,r=!1,i=!1;return t.set(2*e.x,2*e.y,2*e.z),e.eachBondedAtom((function(e){if(!n)return"H"===e.atomname?(t.set(e.x,e.y,e.z),void(n=!0)):void(r||"CA"!==e.atomname?i||"C"!==e.atomname||(i=!0,t.sub(e)):(t.sub(e),r=!0))})),n?t:r&&i?(t.normalize(),t.multiplyScalar(1.04),t.add(e),t):void 0}(e);void 0!==i&&(r.push(i),n.hCharges.push(.25*e.occupancy))}}));var i=t.structure.getBoundingBox();i.expandByScalar(1.04),this.hStore=function(e){for(var t=e.length,n=new Float32Array(t),r=new Float32Array(t),i=new Float32Array(t),o=0;o<e.length;o++){var a=e[o];n[o]=a.x,r[o]=a.y,i[o]=a.z}return{x:n,y:r,z:i,count:t}}(r),this.hHash=new md(this.hStore,i),this.hash=new md(t.structure.atomStore,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.positionColor=function(e){var t=this.charges,n=this.hCharges,r=0;return this.hash.eachWithin(e.x,e.y,e.z,12,(function(e,n){var i=t[e];0!==i&&(r+=i/n)})),this.hHash.eachWithin(e.x,e.y,e.z,12,(function(e,t){var i=n[e];0!==i&&(r+=i/t)})),this.scale(332*r)},t}(us);pl.add("electrostatic",ev);var tv={H:16777215,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578e4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:9699476,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32e3,AC:7384058,TH:47871,PA:41471,U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998,DS:16777215,RG:16777215,CN:16777215,UUT:16777215,FL:16777215,UUP:16777215,LV:16777215,UUH:16777215,D:16777152,T:16777120},nv=function(e){function t(t){t.value=Sa(t.value,tv.C),e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=e.element;return"C"===t?this.parameters.value:tv[t]||16777215},t}(us);pl.add("element",nv);var rv=function(e){function t(t){e.call(this,t),t.scale||(this.parameters.scale="Spectral"),t.domain||(this.parameters.domain=[0,t.structure.entityList.length-1]),this.entityindexScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.entityindexScale(e.entityIndex)},t}(us);pl.add("entityindex",rv);var iv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=e.entity;switch(t?t.entityType:void 0){case 1:return 8374655;case 2:return 16629894;case 3:return 12496596;case 4:return 3697840;default:return 16777113}},t}(us);pl.add("entitytype",iv);var ov=function(e){function t(t){e.call(this,t),this.geoAtomDict={},this.geoDict={};var n=t.structure.validation;n&&(this.geoAtomDict=n.geoAtomDict,this.geoDict=n.geoDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t,n=e.resno+"";e.inscode&&(n+="^"+e.inscode),e.chainname&&(n+=":"+e.chainname),n+="/"+e.modelIndex;var r=this.geoAtomDict[n];void 0!==r?t=function(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24}(r[e.atomname]||0):t=this.geoDict[n]||0;return 0===t?2188972:1===t?16703627:2===t?16018755:t>=3?10813478:9474192},t}(us);pl.add("geoquality",ov);var av=function(e){function t(t){var n=this;e.call(this,t),this.resHF={},t.scale||(this.parameters.scale="RdYlGn");for(var r in Nd)n.resHF[r]=Nd[r][0];if(this.defaultResidueHydrophobicity=Bd[0],!t.domain){var i=1/0,o=-1/0;for(var a in n.resHF){var s=n.resHF[a];i=Math.min(i,s),o=Math.max(o,s)}this.parameters.domain=[i,0,o]}this.hfScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.hfScale(this.resHF[e.resname]||this.defaultResidueHydrophobicity)},t}(us);pl.add("hydrophobicity",av);var sv=function(e){function t(t){e.call(this,t),t.scale||(this.parameters.scale="rainbow"),t.domain||(this.parameters.domain=[0,t.structure.modelStore.count]),this.modelindexScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.modelindexScale(e.modelIndex)},t}(us);pl.add("modelindex",sv);var lv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){switch(e.residueType.moleculeType){case 1:return 3697840;case 2:return 15729279;case 3:return 12496596;case 4:return 16629894;case 5:return 12540695;case 6:return 8374655;default:return 16777113}},t}(us);pl.add("moleculetype",lv);var uv=function(e){function t(t){e.call(this,t),t.scale||(this.parameters.scale="PuBu"),t.domain||(this.parameters.domain=[0,1]),this.occupancyScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.occupancyScale(e.occupancy)},t}(us);pl.add("occupancy",uv);var cv=function(e){function t(t){e.call(this,t),t.scale||(this.parameters.scale="rwb"),t.domain||(this.parameters.domain=[-1,1]),this.partialchargeScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.partialchargeScale(e.partialCharge||0)},t}(us);function dv(){return 16777215*Math.random()}pl.add("partialcharge",cv);var fv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(){return dv()},t.prototype.volumeColor=function(){return dv()},t.prototype.positionColor=function(){return dv()},t}(us);pl.add("random",fv);var pv=function(e){function t(t){e.call(this,t),this.rciDict={},t.scale||(this.parameters.scale="RdYlBu"),this.rciScale=this.getScale({domain:[.6,0]});var n=t.structure.validation;n&&(this.rciDict=n.rciDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t="["+e.resname+"]"+e.resno;e.chainname&&(t+=":"+e.chainname);var n=this.rciDict[t];return void 0!==n?this.rciScale(n):9474192},t}(us);pl.add("randomcoilindex",pv);var hv=function(e){function t(t){var n=this;e.call(this,t),this.scalePerChain={},t.scale||(this.parameters.scale="rainbow",this.parameters.reverse=Sa(t.reverse,!0)),t.structure.eachChain((function(e){n.parameters.domain=[e.residueOffset,e.residueEnd],n.scalePerChain[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.scalePerChain[e.chainIndex](e.residueIndex)},t}(us);pl.add("residueindex",hv);var mv={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935,ASH:16711935,GLH:16711935,A:14423100,G:3329330,I:10145074,X:8190976,C:16766720,T:4286945,U:4251856,D:35723,DA:14423100,DG:3329330,DI:10145074,DX:8190976,DC:16766720,DT:4286945,DU:4251856,DD:35723},gv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return mv[e.resname]||16711935},t}(us);pl.add("resname",gv);var vv=16711808,yv=10485888,bv=6291584,xv=16762880,wv=6324479,_v=16777215,Sv=11403518,Cv=16580962,Ev=10921722,kv=function(e){function t(t){e.call(this,t),this.residueProxy=t.structure.getResidueProxy()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=e.sstruc,n=this.residueProxy;return"h"===t?vv:"g"===t?yv:"i"===t?bv:"e"===t||"b"===t?xv:"t"===t?wv:(n.index=e.residueIndex,n.isDna()?Sv:n.isRna()?Cv:n.isSaccharide()?Ev:n.isProtein()||"s"===t||"l"===t?_v:8421504)},t}(us);pl.add("sstruc",kv);var Pv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(){return this.parameters.value},t.prototype.bondColor=function(){return this.parameters.value},t.prototype.valueColor=function(){return this.parameters.value},t.prototype.volumeColor=function(){return this.parameters.value},t}(us);pl.add("uniform",Pv);var Mv=function(e){function t(t){e.call(this,t),this.valueScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.volumeColor=function(e){return this.valueScale(this.parameters.volume.data[e])},t}(us);pl.add("value",Mv);var Av=function(e){function t(t){e.call(this,t),this.vec=new U,this.valueScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.positionColor=function(e){var t=this.parameters.volume;if(!t||!t.inverseMatrix)return this.parameters.value;var n=this.vec,r=t.data,i=t.nx,o=t.ny,a=i*o;n.copy(e),n.applyMatrix4(t.inverseMatrix);var s=Math.floor(n.x),l=Math.floor(n.y),u=Math.floor(n.z),c=(u*o+l)*i+s,d=c+1,f=c+i,p=c+a,h=f+1,m=p+1,g=f+a,v=g+1,y=r[c],b=r[d],x=r[f],w=r[p],_=r[h],S=r[m],C=r[g],E=r[v],k=n.x-s,P=n.y-l,M=n.z-u,A=es(y,b,k),T=es(w,S,k),R=es(x,_,k),I=es(C,E,k),O=es(A,R,P),L=es(T,I,P),D=es(O,L,M);return this.valueScale(D)},t}(us);pl.add("volume",Av);var Tv=function(e){function t(t,n,r){var i=r||{};if(e.call(this,t,n,i),this.type="structure",this.parameters=Object.assign({radiusType:{type:"select",options:sh.types},radiusData:{type:"hidden"},radiusSize:{type:"number",precision:3,max:10,min:.001},radiusScale:{type:"number",precision:3,max:10,min:.001},assembly:null,defaultAssembly:{type:"hidden"}},this.parameters),this.selection=new zs(i.sele),this.dataList=[],this.structure=t,this.structureView=this.structure.getView(this.selection),t.biomolDict){var o={default:"default","":t.unitcell?"AU":"FULL"};Object.keys(t.biomolDict).forEach((function(e){o[e]=e})),this.parameters.assembly={type:"select",options:o,rebuild:!0}}else this.parameters.assembly=null}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultScale:{configurable:!0}};return n.defaultScale.get=function(){return{vdw:1,covalent:1,bfactor:.01,sstruc:1}},t.prototype.init=function(t){var n=this,r=t||{};r.colorScheme=Sa(r.colorScheme,"element"),this.setRadius(r.radius,r),this.radiusType=Sa(r.radiusType,"vdw"),this.radiusData=Sa(r.radiusData,{}),this.radiusSize=Sa(r.radiusSize,1),this.radiusScale=Sa(r.radiusScale,1),this.assembly=Sa(r.assembly,"default"),this.defaultAssembly=Sa(r.defaultAssembly,""),"auto"===r.quality&&(r.quality=this.getQuality()),e.prototype.init.call(this,r),this.selection.signals.stringChanged.add((function(){n.build()})),this.build()},t.prototype.setRadius=function(e,t){var n=Object.keys(ah);return"string"===typeof e&&n.includes(e.toLowerCase())?t.radiusType=e:void 0!==e&&(t.radiusType="size",t.radiusSize=e),this},t.prototype.getAssembly=function(){var e="default"===this.assembly?this.defaultAssembly:this.assembly;return this.structure.biomolDict[e]},t.prototype.getQuality=function(){var e,t=this.structureView,n=this.getAssembly();return e=n?n.getAtomCount(t):t.atomCount,el&&(e*=4),t.atomStore.count/t.residueStore.count<2&&(e*=10),e<15e3?"high":e<8e4?"medium":"low"},t.prototype.create=function(){var e=this;if(0!==this.structureView.atomCount)if(this.structureView.hasCoords()){this.needsBuild=!1;var t=this.getAssembly();if(t)t.partList.forEach((function(t,n){var r=t.getView(e.structureView);if(0!==r.atomCount){var i=e.createData(r,n);i&&(i.sview=r,i.instanceList=t.getInstanceList(),e.dataList.push(i))}}));else{var n=this.createData(this.structureView,0);n&&(n.sview=this.structureView,this.dataList.push(n))}}else this.needsBuild=!0},t.prototype.update=function(e){var t=this;!this.lazy||this.visible?this.needsBuild?this.build():this.dataList.forEach((function(n){n.bufferList.length>0&&t.updateData(e,n)}),this):Object.assign(this.lazyProps.what,e)},t.prototype.updateData=function(e,t){this.build()},t.prototype.getColorParams=function(){return Object.assign({},e.prototype.getColorParams.call(this),{structure:this.structure})},t.prototype.getRadiusParams=function(e){return{type:this.radiusType,scale:this.radiusScale,size:this.radiusSize,data:this.radiusData}},t.prototype.getAtomParams=function(e,t){return Object.assign({what:e,colorParams:this.getColorParams(),radiusParams:this.getRadiusParams()},t)},t.prototype.getBondParams=function(e,t){return Object.assign({what:e,colorParams:this.getColorParams(),radiusParams:this.getRadiusParams()},t)},t.prototype.getAtomRadius=function(e){return this.structureView.atomSet.isSet(e.index)?new sh(this.getRadiusParams()).atomRadius(e):0},t.prototype.setSelection=function(e,t){return this.selection.setString(e,t),this},t.prototype.setParameters=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=!1);var i=t||{};return this.setRadius(i.radius,i),void 0===i.radiusType&&void 0===i.radiusData&&void 0===i.radiusSize&&void 0===i.radiusScale||(n.radius=!0,nl&&!this.disableImpostor||(r=!0)),void 0!==i.defaultAssembly&&i.defaultAssembly!==this.defaultAssembly&&("default"===this.assembly&&void 0===i.assembly||"default"===i.assembly)&&(r=!0),e.prototype.setParameters.call(this,i,n,r),this},t.prototype.getParameters=function(){return Object.assign(e.prototype.getParameters.call(this),{sele:this.selection?this.selection.string:void 0,defaultAssembly:this.defaultAssembly})},t.prototype.attach=function(e){var t=this.viewer,n=this.bufferList;this.dataList.forEach((function(e){e.bufferList.forEach((function(r){n.push(r),t.add(r,e.instanceList)}))})),this.setVisibility(this.visible),e()},t.prototype.clear=function(){this.dataList.length=0,e.prototype.clear.call(this)},t.prototype.dispose=function(){this.structureView.dispose(),delete this.structure,delete this.structureView,e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(kc),Rv=function(e){function t(t,n,r){e.call(this,t,n,r),this.n=0,this.parameters=Object.assign({labelVisible:{type:"boolean"},labelSize:{type:"number",precision:3,max:10,min:.001},labelColor:{type:"color"},labelFontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:"fontFamily"},labelFontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:"fontStyle"},labelFontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:"fontWeight"},labelsdf:{type:"boolean",buffer:"sdf"},labelXOffset:{type:"number",precision:1,max:20,min:-20,buffer:"xOffset"},labelYOffset:{type:"number",precision:1,max:20,min:-20,buffer:"yOffset"},labelZOffset:{type:"number",precision:1,max:20,min:-20,buffer:"zOffset"},labelAttachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},labelBorder:{type:"boolean",buffer:"showBorder"},labelBorderColor:{type:"color",buffer:"borderColor"},labelBorderWidth:{type:"number",precision:2,max:.3,min:0,buffer:"borderWidth"},labelBackground:{type:"boolean",rebuild:!0},labelBackgroundColor:{type:"color",buffer:"backgroundColor"},labelBackgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},labelBackgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:"backgroundOpacity"},labelFixedSize:{type:"boolean",buffer:"fixedSize"},lineOpacity:{type:"range",min:0,max:1,step:.01},linewidth:{type:"integer",max:50,min:1,buffer:!0}},this.parameters,{flatShaded:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};this.labelVisible=Sa(n.labelVisible,!0),this.labelSize=Sa(n.labelSize,2),this.labelColor=Sa(n.labelColor,16777215),this.labelFontFamily=Sa(n.labelFontFamily,"sans-serif"),this.labelFontStyle=Sa(n.labelFontstyle,"normal"),this.labelFontWeight=Sa(n.labelFontWeight,"bold"),this.labelsdf=Sa(n.labelsdf,"Chrome"===Zs),this.labelXOffset=Sa(n.labelXOffset,0),this.labelYOffset=Sa(n.labelYOffset,0),this.labelZOffset=Sa(n.labelZOffset,.5),this.labelAttachment=Sa(n.labelAttachment,"bottom-left"),this.labelBorder=Sa(n.labelBorder,!1),this.labelBorderColor=Sa(n.labelBorderColor,"lightgrey"),this.labelBorderWidth=Sa(n.labelBorderWidth,.15),this.labelBackground=Sa(n.labelBackground,!1),this.labelBackgroundColor=Sa(n.labelBackgroundColor,"lightgrey"),this.labelBackgroundMargin=Sa(n.labelBackgroundMargin,.5),this.labelBackgroundOpacity=Sa(n.labelBackgroundOpacity,1),this.labelFixedSize=Sa(n.labelFixedSize,!1),this.lineOpacity=Sa(n.lineOpacity,1),this.linewidth=Sa(n.linewidth,2),e.prototype.init.call(this,n)},t.prototype.update=function(t){t.position?this.build():e.prototype.update.call(this,t)},t.prototype.updateData=function(e,t){var n={};if(e&&!e.labelSize||Object.assign(n,{size:ou(this.n,this.labelSize)}),!e||e.labelColor){var r=new ie(this.labelColor);Object.assign(n,{color:au(this.n,r.r,r.g,r.b)})}this.textBuffer.setAttributes(n)},t.prototype.setParameters=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r=!1),t&&t.labelSize&&(n.labelSize=!0),t&&(t.labelColor||0===t.labelColor)&&(n.labelColor=!0),e.prototype.setParameters.call(this,t,n,r),t&&void 0!==t.opacity&&this.textBuffer.setParameters({opacity:1}),t&&void 0!==t.labelVisible&&this.setVisibility(this.visible),this},t.prototype.setVisibility=function(t,n){return e.prototype.setVisibility.call(this,t,!0),this.textBuffer&&this.textBuffer.setVisibility(this.labelVisible&&this.visible),n||this.viewer.requestRender(),this},t.prototype.getLabelBufferParams=function(t){return void 0===t&&(t={}),e.prototype.getBufferParams.call(this,Object.assign({fontFamily:this.labelFontFamily,fontStyle:this.labelFontStyle,fontWeight:this.labelFontWeight,sdf:this.labelsdf,xOffset:this.labelXOffset,yOffset:this.labelYOffset,zOffset:this.labelZOffset,attachment:this.labelAttachment,showBorder:this.labelBorder,borderColor:this.labelBorderColor,borderWidth:this.labelBorderWidth,showBackground:this.labelBackground,backgroundColor:this.labelBackgroundColor,backgroundMargin:this.labelBackgroundMargin,backgroundOpacity:this.labelBackgroundOpacity,fixedSize:this.labelFixedSize,disablePicking:!0,visible:this.labelVisible},t,{opacity:1}))},t.prototype.getAtomRadius=function(){return 0},t}(Tv);function Iv(e,t){var n=e.getAtomProxy(),r=new zs,i=t.length;if(0===i)return new Float32Array(0);var o=t[0].length,a=e.getAtomSet(),s=new Float32Array(i*o*3),l=0;return t.forEach((function(t){for(var i=!1,u=0;u<o;u++){var c=t[u];if("number"===typeof c&&Number.isInteger(c)){if(!a.get(c)){i=!0;break}n.index=c}else{r.setString(c);var d=e.getAtomIndices(r);if(!d.length){i=!0;break}n.index=d[0]}var f=l+3*u;s[f++]=n.x,s[f++]=n.y,s[f++]=n.z}i||(l+=3*o)})),s.subarray(0,l)}function Ov(e,t,n,r,i){var o=Math.cos(i),a=Math.sin(i);e[0]=t[0]+n[0]*o+r[0]*a,e[1]=t[1]+n[1]*o+r[1]*a,e[2]=t[2]+n[2]*o+r[2]*a}function Lv(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var l=0;l<n;l++)r[l]=e[l*t+s];Dv(r,i,o,a,n);for(var u=0;u<n;u++)e[u*t+s]=i[u]}for(var c=0;c<n;c++){for(var d=0;d<t;d++)r[d]=e[c*t+d];Dv(r,i,o,a,t);for(var f=0;f<t;f++)e[c*t+f]=Math.sqrt(i[f])}}function Dv(e,t,n,r,i){n[0]=0,r[0]=Number.MIN_SAFE_INTEGER,r[1]=Number.MAX_SAFE_INTEGER;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=Number.MAX_SAFE_INTEGER}for(var l=0,u=0;l<i;l++){for(;r[u+1]<l;)u++;t[l]=(l-n[u])*(l-n[u])+e[n[u]]}}vl.add("shader/SDFFont.vert","uniform float clipNear;\nuniform float clipRadius;\nuniform vec3 clipCenter;\nuniform float xOffset;\nuniform float yOffset;\nuniform float zOffset;\nuniform bool ortho;\nuniform float canvasHeight;\nuniform float pixelRatio;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\nvarying vec2 texCoord;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#endif\nattribute vec2 mapping;\nattribute vec2 inputTexCoord;\nattribute float inputSize;\n#include matrix_scale\n#include common\nvoid main(void){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\ntexCoord = inputTexCoord;\nfloat scale = matrixScale( modelViewMatrix );\nfloat _xOffset = xOffset * scale;\nfloat _yOffset = yOffset * scale;\nfloat _zOffset = zOffset * scale;\nif( texCoord.x == 10.0 ){\n_zOffset -= 0.001;\n}\nvec4 cameraPos = modelViewMatrix * vec4( position, 1.0 );\n#ifdef FIXED_SIZE\nif ( ortho ) {\nscale /= pixelRatio * (( canvasHeight / 2.0 ) / -cameraPosition.z) * 0.1;\n} else {\nscale /= pixelRatio * (( canvasHeight / 2.0 ) / -cameraPos.z) * 0.1;\n}\n#endif\nvec4 cameraCornerPos = vec4( cameraPos.xyz, 1.0 );\ncameraCornerPos.xy += mapping * inputSize * 0.01 * scale;\ncameraCornerPos.x += _xOffset;\ncameraCornerPos.y += _yOffset;\nif( ortho ){\ncameraCornerPos.xyz += normalize( -cameraPosition ) * _zOffset;\n} else {\ncameraCornerPos.xyz += normalize( -cameraCornerPos.xyz ) * _zOffset;\n}\ngl_Position = projectionMatrix * cameraCornerPos;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvViewPosition = -cameraCornerPos.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n#include radiusclip_vertex\n}"),vl.add("shader/SDFFont.frag","uniform sampler2D fontTexture;\nuniform float opacity;\nuniform bool showBorder;\nuniform vec3 borderColor;\nuniform float borderWidth;\nuniform vec3 backgroundColor;\nuniform float backgroundOpacity;\nuniform float clipNear;\nuniform float clipRadius;\nvarying vec3 vViewPosition;\nvarying vec2 texCoord;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\nconst vec3 vColor = vec3( 0.0 );\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#endif\nconst float gamma = 2.2 * 1.4142 / 128.0;\nconst float padding = 0.75;\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\nif( texCoord.x > 1.0 ){\ngl_FragColor = vec4( backgroundColor, backgroundOpacity );\n}else{\nfloat sdf = texture2D( fontTexture, texCoord ).a;\nif( showBorder ) sdf += borderWidth;\nfloat a = smoothstep(padding - gamma, padding + gamma, sdf);\nif( a < 0.2 ) discard;\na *= opacity;\nvec3 outgoingLight = vColor;\nif( showBorder && sdf < ( padding + borderWidth ) ){\noutgoingLight = borderColor;\n}\ngl_FragColor = vec4( outgoingLight, a );\n}\n#if defined( PICKING )\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var Fv={};var Nv={font:"sans-serif",size:36,style:"normal",variant:"normal",weight:"normal",outline:3,width:1024,height:1024},Bv=function(e){void 0===e&&(e={}),this.gamma=1,this.mapped={},this.scratchW=0,this.scratchH=0,this.currentX=0,this.currentY=0,this.cutoff=.25,this.parameters=Ca(e,Nv);var t=this.parameters;this.radius=t.size/8,this.padding=t.size/3;var n=this.lineHeight=t.size+2*t.outline+Math.round(t.size/4),r=this.maxWidth=t.width/4,i=this.canvas=document.createElement("canvas");i.width=r,i.height=n;var o=this.context=this.canvas.getContext("2d");o.font=t.style+" "+t.variant+" "+t.weight+" "+t.size+"px "+t.font,o.fillStyle="black",o.textAlign="left",o.textBaseline="bottom",o.lineJoin="round",this.gridOuter=new Float64Array(n*r),this.gridInner=new Float64Array(n*r),this.f=new Float64Array(Math.max(n,r)),this.d=new Float64Array(Math.max(n,r)),this.z=new Float64Array(Math.max(n,r)+1),this.v=new Int16Array(Math.max(n,r)),this.data=new Uint8Array(t.width*t.height*4),this.canvas2=document.createElement("canvas"),this.canvas2.width=t.width,this.canvas2.height=t.height,this.context2=this.canvas2.getContext("2d"),this.placeholder=this.map(String.fromCharCode(65533));for(var a=32;a<=126;++a)this.map(String.fromCharCode(a));this.map(String.fromCharCode(176)),this.map(String.fromCharCode(8491)),this.texture=new $n(this.canvas2),this.texture.flipY=!1,this.texture.needsUpdate=!0};Bv.prototype.map=function(e){var t=this.parameters;return void 0===this.mapped[e]&&(this.draw(e),this.currentX+this.scratchW>t.width&&(this.currentX=0,this.currentY+=this.scratchH),this.currentY+this.scratchH>t.height&&console.warn("canvas to small"),this.mapped[e]={x:this.currentX,y:this.currentY,w:this.scratchW,h:this.scratchH},this.context2.drawImage(this.canvas,0,0,this.scratchW,this.scratchH,this.currentX,this.currentY,this.scratchW,this.scratchH),this.currentX+=this.scratchW),this.mapped[e]},Bv.prototype.get=function(e){return this.mapped[e]||this.placeholder},Bv.prototype.draw=function(e){var t=this,n=this.parameters,r=this.lineHeight,i=n.outline,o=this.context,a=this.maxWidth,s=i,l=r-n.outline,u=o.measureText(e),c=Math.min(a,Math.ceil(u.width+2*s+1)),d=c*r;o.clearRect(0,0,c,r),o.fillText(e,s,l);for(var f=o.getImageData(0,0,c,r),p=f.data,h=0;h<d;h++){var m=f.data[4*h+3]/255;t.gridOuter[h]=1===m?0:0===m?Number.MAX_SAFE_INTEGER:Math.pow(Math.max(0,.5-m),2),t.gridInner[h]=1===m?Number.MAX_SAFE_INTEGER:0===m?0:Math.pow(Math.max(0,m-.5),2)}Lv(this.gridOuter,c,r,this.f,this.d,this.v,this.z),Lv(this.gridInner,c,r,this.f,this.d,this.v,this.z);for(var g=0;g<d;g++){var v=t.gridOuter[g]-t.gridInner[g];p[4*g+3]=Math.max(0,Math.min(255,Math.round(255-255*(v/t.radius+t.cutoff))))}o.putImageData(f,0,0),this.scratchW=c,this.scratchH=r};var zv=Object.assign({fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"bold",fontSize:36,xOffset:0,yOffset:0,zOffset:.5,attachment:"bottom-left",showBorder:!1,borderColor:"lightgrey",borderWidth:.15,showBackground:!1,backgroundColor:"lightgrey",backgroundMargin:.5,backgroundOpacity:1,forceTransparent:!0,fixedSize:!1},Tp),jv=Object.assign({fontFamily:{uniform:!0},fontStyle:{uniform:!0},fontWeight:{uniform:!0},fontSize:{uniform:!0},xOffset:{uniform:!0},yOffset:{uniform:!0},zOffset:{uniform:!0},showBorder:{uniform:!0},borderColor:{uniform:!0},borderWidth:{uniform:!0},backgroundColor:{uniform:!0},backgroundOpacity:{uniform:!0},fixedSize:{updateShader:!0}},Rp);function Hv(e,t){for(var n=e.position.length/3,r=0,i=0;i<n;++i)r+=e.text[i].length;return t.showBackground&&(r+=n),r}var Uv=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(3*Hv(t,n)),color:new Float32Array(3*Hv(t,n)),picking:new jf},n),this.parameterTypes=jv,this.alwaysTransparent=!0,this.hasWireframe=!1,this.isText=!0,this.vertexShader="SDFFont.vert",this.fragmentShader="SDFFont.frag",this.text=t.text,this.positionCount=t.position.length/3,this.addUniforms({fontTexture:{value:null},xOffset:{value:this.parameters.xOffset},yOffset:{value:this.parameters.yOffset},zOffset:{value:this.parameters.zOffset},ortho:{value:!1},showBorder:{value:this.parameters.showBorder},borderColor:{value:new ie(this.parameters.borderColor)},borderWidth:{value:this.parameters.borderWidth},backgroundColor:{value:new ie(this.parameters.backgroundColor)},backgroundOpacity:{value:this.parameters.backgroundOpacity},canvasHeight:{value:1},pixelRatio:{value:1}}),this.addAttributes({inputTexCoord:{type:"v2",value:null},inputSize:{type:"f",value:null}}),this.setAttributes(t),this.makeTexture(),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return zv},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this);var t=this.texture,n=this.material;n.transparent=!0,n.extensions.derivatives=!0,n.lights=!1,n.uniforms.fontTexture.value=t,n.needsUpdate=!0;var r=this.wireframeMaterial;r.transparent=!0,r.extensions.derivatives=!0,r.lights=!1,r.uniforms.fontTexture.value=t,r.needsUpdate=!0;var i=this.pickingMaterial;i.extensions.derivatives=!0,i.lights=!1,i.uniforms.fontTexture.value=t,i.needsUpdate=!0},t.prototype.setAttributes=function(e){var t,n,r,i,o,a;void 0===e&&(e={});var s=this.text,l=this.geometry.attributes;e.position&&(t=e.position,i=l.position.array,l.position.needsUpdate=!0),e.size&&(n=e.size,o=l.inputSize.array,l.inputSize.needsUpdate=!0),e.color&&(r=e.color,a=l.color.array,l.color.needsUpdate=!0);for(var u,c,d,f,p=this.positionCount,h=0,m=0;m<p;++m)for(c=3*m,f=s[m].length,this.parameters.showBackground&&(f+=1),d=0;d<f;++d,++h)for(var g=0;g<4;g++)u=4*h*3+3*g,t&&(i[u]=t[c],i[u+1]=t[c+1],i[u+2]=t[c+2]),n&&(o[4*h+g]=n[m]),r&&(a[u]=r[c],a[u+1]=r[c+1],a[u+2]=r[c+2])},t.prototype.makeTexture=function(){this.textAtlas=function(e){var t=JSON.stringify(e);return void 0===Fv[t]&&(Fv[t]=new Bv(e)),Fv[t]}({font:this.parameters.fontFamily,style:this.parameters.fontStyle,weight:this.parameters.fontWeight,size:this.parameters.fontSize}),this.texture=this.textAtlas.texture},t.prototype.makeMapping=function(){for(var e,t,n,r,i,o,a,s,l=this.textAtlas,u=this.text,c=this.parameters.attachment,d=l.lineHeight*this.parameters.backgroundMargin*.1-10,f=this.geometry.attributes,p=f.inputTexCoord.array,h=f.mapping.array,m=this.positionCount,g=0,v=0;v<m;++v){for(r=0,o=(n=u[v]).length,i=0;i<o;++i)r+=(e=l.get(n[i])).w-2*l.parameters.outline;for(s=c.startsWith("top")?l.lineHeight/1.25:c.startsWith("middle")?l.lineHeight/2.5:0,a=c.endsWith("right")?r:c.endsWith("center")?r/2:0,a+=l.parameters.outline,s+=l.parameters.outline,this.parameters.showBackground&&(h[(t=2*g*4)+0]=-l.lineHeight/6-a-d,h[t+1]=l.lineHeight-s+d,h[t+2]=-l.lineHeight/6-a-d,h[t+3]=0-s-d,h[t+4]=r+l.lineHeight/6-a+2*l.parameters.outline+d,h[t+5]=l.lineHeight-s+d,h[t+6]=r+l.lineHeight/6-a+2*l.parameters.outline+d,h[t+7]=0-s-d,p[t+0]=10,p[t+2]=10,p[t+4]=10,p[t+6]=10,g+=1),r=0,i=0;i<o;++i,++g){e=l.get(n[i]),h[(t=2*g*4)+0]=r-a,h[t+1]=e.h-s,h[t+2]=r-a,h[t+3]=0-s,h[t+4]=r+e.w-a,h[t+5]=e.h-s,h[t+6]=r+e.w-a,h[t+7]=0-s;var y=l.parameters.width,b=l.parameters.height,x=[e.x/y,e.y/b,e.x/y,(e.y+e.h)/b,(e.x+e.w)/y,e.y/b,(e.x+e.w)/y,(e.y+e.h)/b];p.set(x,t),r+=e.w-2*l.parameters.outline}}f.inputTexCoord.needsUpdate=!0,f.mapping.needsUpdate=!0},t.prototype.getDefines=function(t){var n=e.prototype.getDefines.call(this,t);return this.parameters.fixedSize&&(n.FIXED_SIZE=1),n},t.prototype.setUniforms=function(t){!t||void 0===t.fontFamily&&void 0===t.fontStyle&&void 0===t.fontWeight&&void 0===t.fontSize||(this.makeTexture(),this.makeMapping(),this.texture.needsUpdate=!0,t.fontTexture=this.texture),e.prototype.setUniforms.call(this,t)},Object.defineProperties(t.prototype,n),t}(Vm);xl.add("text",Uv),vl.add("shader/WideLine.vert","\nuniform float clipNear;\nuniform vec3 clipCenter;\nuniform float linewidth;\nuniform vec2 resolution;\nuniform mat4 projectionMatrixInverse;\nattribute vec2 mapping;\nattribute vec3 position1;\nattribute vec3 position2;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\nattribute vec3 color2;\nvarying vec3 vColor;\nvarying vec3 vColor2;\nvarying float flag;\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\nvoid trimSegment( const in vec4 start, inout vec4 end ) {\nfloat a = projectionMatrix[ 2 ][ 2 ]; float b = projectionMatrix[ 3 ][ 2 ]; float nearEstimate = - 0.5 * b / a;\nfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\nend.xyz = mix( start.xyz, end.xyz, alpha );\n}\nvoid main() {\nfloat aspect = resolution.x / resolution.y;\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\nflag = mapping.y;\nvColor = color;\nvColor2 = color2;\n#endif\nvec4 start = modelViewMatrix * vec4( position1, 1.0 );\nvec4 end = modelViewMatrix * vec4( position2, 1.0 );\nbool perspective = ( projectionMatrix[ 2 ][ 3 ] == -1.0 ); if ( perspective ) {\nif ( start.z < 0.0 && end.z >= 0.0 ) {\ntrimSegment( start, end );\n} else if ( end.z < 0.0 && start.z >= 0.0 ) {\ntrimSegment( end, start );\n}\n}\nvec4 clipStart = projectionMatrix * start;\nvec4 clipEnd = projectionMatrix * end;\nvec2 ndcStart = clipStart.xy / clipStart.w;\nvec2 ndcEnd = clipEnd.xy / clipEnd.w;\nvec2 dir = ndcEnd - ndcStart;\ndir.x *= aspect;\ndir = normalize( dir );\nvec2 offset = vec2( dir.y, - dir.x );\ndir.x /= aspect;\noffset.x /= aspect;\nif ( mapping.x < 0.0 ) offset *= - 1.0;\noffset *= linewidth;\noffset /= resolution.y;\nvec4 clip = ( mapping.y < 0.5 ) ? clipStart : clipEnd;\noffset *= clip.w;\nclip.xy += offset;\ngl_Position = clip;\n#ifndef PICKING\nvViewPosition = ( projectionMatrixInverse * clip ).xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}"),vl.add("shader/WideLine.frag","uniform vec3 diffuse;\nuniform float opacity;\nuniform float clipNear;\nuniform float clipRadius;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\n#include common\n#include fog_pars_fragment\nvarying vec3 vViewPosition;\nvarying vec3 vColor;\nvarying vec3 vColor2;\nvarying float flag;\n#endif\nvoid main() {\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( PICKING )\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 outgoingLight = vec3( 0.0 );\nvec4 diffuseColor = vec4( diffuse, 1.0 );\nif ( flag < 0.0 ) {\ndiffuseColor.rgb *= vColor;\n} else {\ndiffuseColor.rgb *= vColor2;\n}\n#include alphatest_fragment\noutgoingLight = diffuseColor.rgb;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var Vv=Object.assign({linewidth:2},Tp),Gv=Object.assign({linewidth:{uniform:!0}},Rp),Wv=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parameterTypes=Gv,this.vertexShader="WideLine.vert",this.fragmentShader="WideLine.frag",!t.color2&&t.color&&(t.color2=t.color),this.addUniforms({linewidth:{value:this.parameters.linewidth},resolution:{value:new z},projectionMatrixInverse:{value:new j}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null}}),this.setAttributes(t),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Vv},t.prototype.setParameters=function(t){e.prototype.setParameters.call(this,t)},Object.defineProperties(t.prototype,n),t}(Vm);xl.add("wideline",Wv);var $v=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="angle",this.parameters=Object.assign({atomTriple:{type:"hidden",rebuild:!0},vectorVisible:{type:"boolean",default:!0},arcVisible:{type:"boolean",default:!0},sectorVisible:{type:"boolean",default:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.side=Sa(n.side,"double"),n.opacity=Sa(n.opacity,.5),this.atomTriple=Sa(n.atomTriple,[]),this.arcVisible=Sa(n.arcVisible,!0),this.sectorVisible=Sa(n.sectorVisible,!0),this.vectorVisible=Sa(n.vectorVisible,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){if(e.atomCount&&this.atomTriple.length){var t=function(e,t){return function(e){for(var t=[],n=e.length/9,r=0;r<n;r++){for(var i=!0,o=r;o<r+3;o+=3)e[o]===e[o+3]&&e[o+1]===e[o+4]&&e[o+2]===e[o+5]&&(i=!1);i&&t.push(r)}var a=new Float32Array(9*t.length),s=0;return t.forEach((function(t){cu(e,a,9*t,9*s,9),s++})),a}(Iv(e,t))}(e,this.atomTriple),n=function(e,t){void 0===t&&(t={});for(var n=Sa(t.angleStep,Math.PI/90),r=e.length/9,i=new Float32Array(r),o=new Float32Array(3*r),a=new Array(r),s=new Float32Array(6*r),l=new Float32Array(6*r),u=new Array(r),c=new Array(r),d=new Array(r),f=0,p=Dc(),h=Dc(),m=Dc(),g=Dc(),v=Dc(),y=Dc(),b=Dc(),x=Dc(),w=Dc(),_=function(t){var r=9*t;jc(p,e,r),jc(h,e,r+3),jc(m,e,r+6);var _=6*t;Hc(p,s,_),Hc(h,l,_),Hc(h,s,_+3),Hc(m,l,_+3),Bc(g,p,h),Bc(v,m,h),Wc(g,g),Wc(v,v),Fc(y,g,v);var S=Uc(y),C=Nc(g,v),E=i[t]=Math.atan2(S,C);a[t]=(tu*E).toFixed(1)+String.fromCharCode(176),0===Uc(y)&&(y[0]=1,y[1]=0,y[2]=0),Fc(b,y,g),Wc(b,b),Ov(x,h,g,b,E/2),Hc(x,o,3*t);var k=Math.ceil(E/n),P=new Float32Array(9*k);d[t]=P;var M=new Float32Array(3*k),A=new Float32Array(3*k);u[t]=M,c[t]=A,zc(w,h,g);for(var T=function(e,t){var n=9*t,r=3*t;Hc(h,P,n),Hc(w,P,n+3),Hc(w,M,r),Ov(w,h,g,b,e),Hc(w,P,n+6),Hc(w,A,r)},R=0,I=n;I<E;I+=n)T(I,R),R++;T(E,R),f+=k},S=0;S<r;S++)_(S);for(var C=3*f,E=9*f,k=new Float32Array(C),P=new Float32Array(C),M=new Float32Array(E),A=0,T=0,R=0;R<r;R++){var I=u[R],O=c[R];cu(I,k,0,T,I.length),cu(O,P,0,T,O.length),T+=I.length;var L=d[R];cu(L,M,0,A,L.length),A+=L.length}return{labelPosition:o,labelText:a,vectorPosition1:s,vectorPosition2:l,arcPosition1:k,arcPosition2:P,sectorPosition:M}}(t),r=this.n=n.labelPosition.length/3,i=new ie(this.labelColor);this.textBuffer=new Uv({position:n.labelPosition,size:ou(r,this.labelSize),color:au(r,i.r,i.g,i.b),text:n.labelText},this.getLabelBufferParams());var o=new ie(this.colorValue);return this.vectorBuffer=new Wv(Jc({position1:n.vectorPosition1,position2:n.vectorPosition2,color:au(2*r,o.r,o.g,o.b),color2:au(2*r,o.r,o.g,o.b)}),this.getBufferParams({linewidth:this.linewidth,visible:this.vectorVisible,opacity:this.lineOpacity})),this.arcLength=n.arcPosition1.length/3,this.arcBuffer=new Wv(Jc({position1:n.arcPosition1,position2:n.arcPosition2,color:au(this.arcLength,o.r,o.g,o.b),color2:au(this.arcLength,o.r,o.g,o.b)}),this.getBufferParams({linewidth:this.linewidth,visible:this.arcVisible,opacity:this.lineOpacity})),this.sectorLength=n.sectorPosition.length/3,this.sectorBuffer=new Lp({position:n.sectorPosition,color:au(this.sectorLength,o.r,o.g,o.b)},this.getBufferParams({visible:this.sectorVisible})),{bufferList:[this.textBuffer,this.vectorBuffer,this.arcBuffer,this.sectorBuffer]}}},t.prototype.updateData=function(t,n){e.prototype.updateData.call(this,t,n);var r={},i={},o={};if(t.color){var a=new ie(this.colorValue);Object.assign(r,{color:au(2*this.n,a.r,a.g,a.b),color2:au(2*this.n,a.r,a.g,a.b)}),Object.assign(i,{color:au(this.arcLength,a.r,a.g,a.b),color2:au(this.arcLength,a.r,a.g,a.b)}),Object.assign(o,{color:au(this.sectorLength,a.r,a.g,a.b)})}this.vectorBuffer.setAttributes(r),this.arcBuffer.setAttributes(i),this.sectorBuffer.setAttributes(o)},t.prototype.setParameters=function(t){return e.prototype.setParameters.call(this,t,{},!1),!t||void 0===t.vectorVisible&&void 0===t.arcVisible&&void 0===t.sectorVisible||this.setVisibility(this.visible),t&&t.lineOpacity&&(this.vectorBuffer.setParameters({opacity:t.lineOpacity}),this.arcBuffer.setParameters({opacity:t.lineOpacity})),t&&void 0!==t.opacity&&(this.vectorBuffer.setParameters({opacity:this.lineOpacity}),this.arcBuffer.setParameters({opacity:this.lineOpacity})),t&&t.linewidth&&(this.vectorBuffer.setParameters({linewidth:t.linewidth}),this.arcBuffer.setParameters({linewidth:t.linewidth})),this},t.prototype.setVisibility=function(t,n){return e.prototype.setVisibility.call(this,t,!0),this.vectorBuffer&&this.vectorBuffer.setVisibility(this.vectorVisible&&this.visible),this.arcBuffer&&this.arcBuffer.setVisibility(this.arcVisible&&this.visible),this.sectorBuffer&&this.sectorBuffer.setVisibility(this.sectorVisible&&this.visible),n||this.viewer.requestRender(),this},t}(Rv);ml.add("angle",$v);var qv=new U,Xv=new U,Kv=new U,Yv=new U(0,1,0),Zv=Object.assign({radialSegments:1,openEnded:!0},Tp);function Qv(e){void 0===e&&(e={});var t=Sa(e.radialSegments,10),n=Sa(e.openEnded,!0),r=(new j).makeRotationX(Math.PI/2),i=new ti(1,1,1,t,1,n);return i.applyMatrix(r),i}var Jv=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,function(e,t){void 0===t&&(t={});var n=Qv(t),r=e.position1.length,i=n.attributes.position.array.length/3,o=r/3,a=new Float32Array(2*o*i);return lu(o,i,0,a),lu(o,i,o*i,a),{position:new Float32Array(2*r),color:new Float32Array(2*r),primitiveId:a,picking:e.picking}}(t,n),n,Qv(n)),this.updateNormals=!0;var r=t.position1.length,i=t.radius.length;this.__center=new Float32Array(r),this._position=new Float32Array(2*r),this._color=new Float32Array(2*r),this._from=new Float32Array(2*r),this._to=new Float32Array(2*r),this._radius=new Float32Array(2*i),this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Zv},t.prototype.applyPositionTransform=function(e,t,n){Xv.fromArray(this._from,n),Kv.fromArray(this._to,n),e.lookAt(Xv,Kv,Yv);var r=this._radius[t];qv.set(r,r,Xv.distanceTo(Kv)),e.scale(qv)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={});var r={};t.position1&&t.position2&&(ru(t.position1,t.position2,this.__center),ru(t.position1,this.__center,this._position),ru(this.__center,t.position2,this._position,t.position1.length),this._from.set(t.position1),this._from.set(this.__center,t.position1.length),this._to.set(this.__center),this._to.set(t.position2,this.__center.length),r.position=this._position),t.color&&t.color2&&(this._color.set(t.color),this._color.set(t.color2,t.color.length),r.color=this._color),t.radius&&(this._radius.set(t.radius),this._radius.set(t.radius,t.radius.length),r.radius=this._radius),e.prototype.setAttributes.call(this,r,n)},Object.defineProperties(t.prototype,n),t}(Fm);vl.add("shader/CylinderImpostor.vert","\nattribute vec3 mapping;\nattribute vec3 position1;\nattribute vec3 position2;\nattribute float radius;\nvarying vec3 axis;\nvarying vec4 base_radius;\nvarying vec4 end_b;\nvarying vec3 U;\nvarying vec3 V;\nvarying vec4 w;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\nattribute vec3 color2;\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#endif\nuniform mat4 modelViewMatrixInverse;\nuniform float ortho;\n#include matrix_scale\nvoid main(){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\nvColor1 = color;\nvColor2 = color2;\n#endif\nbase_radius.w = radius * matrixScale( modelViewMatrix );\nvec3 center = position;\nvec3 dir = normalize( position2 - position1 );\nfloat ext = length( position2 - position1 ) / 2.0;\nvec3 cam_dir;\nif( ortho == 0.0 ){\ncam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 0, 1 ) ).xyz - center;\n}else{\ncam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 1, 0 ) ).xyz;\n}\ncam_dir = normalize( cam_dir );\nvec3 ldir;\nfloat b = dot( cam_dir, dir );\nend_b.w = b;\nif( b < 0.0 )\nldir = -ext * dir;\nelse\nldir = ext * dir;\nvec3 left = normalize( cross( cam_dir, ldir ) );\nleft = radius * left;\nvec3 up = radius * normalize( cross( left, ldir ) );\naxis = normalize( normalMatrix * ldir );\nU = normalize( normalMatrix * up );\nV = normalize( normalMatrix * left );\nvec4 base4 = modelViewMatrix * vec4( center - ldir, 1.0 );\nbase_radius.xyz = base4.xyz / base4.w;\nvec4 top_position = modelViewMatrix * vec4( center + ldir, 1.0 );\nvec4 end4 = top_position;\nend_b.xyz = end4.xyz / end4.w;\nw = modelViewMatrix * vec4(\ncenter + mapping.x*ldir + mapping.y*left + mapping.z*up, 1.0\n);\ngl_Position = projectionMatrix * w;\ngl_Position.z = 0.99;\n}"),vl.add("shader/CylinderImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 interiorColor;\nuniform float interiorDarkening;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float clipNear;\nuniform mat4 projectionMatrix;\nuniform float ortho;\nvarying vec3 axis;\nvarying vec4 base_radius;\nvarying vec4 end_b;\nvarying vec3 U;\nvarying vec3 V;\nvarying vec4 w;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#include common\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars_begin\n#include lights_physical_pars_fragment\n#endif\nbool interior = false;\nfloat distSq3( vec3 v3a, vec3 v3b ){\nreturn (\n( v3a.x - v3b.x ) * ( v3a.x - v3b.x ) +\n( v3a.y - v3b.y ) * ( v3a.y - v3b.y ) +\n( v3a.z - v3b.z ) * ( v3a.z - v3b.z )\n);\n}\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nfloat calcClip( vec3 cameraPos ){\nreturn dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );\n}\nvoid main(){\nvec3 point = w.xyz / w.w;\nvec3 base = base_radius.xyz;\nfloat vRadius = base_radius.w;\nvec3 end = end_b.xyz;\nfloat b = end_b.w;\nvec3 end_cyl = end;\nvec3 surface_point = point;\nvec3 ray_target = surface_point;\nvec3 ray_origin = vec3(0.0);\nvec3 ray_direction = mix(normalize(ray_origin - ray_target), vec3(0.0, 0.0, 1.0), ortho);\nmat3 basis = mat3( U, V, axis );\nvec3 diff = ray_target - 0.5 * (base + end_cyl);\nvec3 P = diff * basis;\nfloat dz = dot( axis, ray_direction );\nfloat radius2 = vRadius*vRadius;\nvec3 D = vec3(dot(U, ray_direction),\ndot(V, ray_direction),\ndz);\nfloat a0 = P.x*P.x + P.y*P.y - radius2;\nfloat a1 = P.x*D.x + P.y*D.y;\nfloat a2 = D.x*D.x + D.y*D.y;\nfloat d = a1*a1 - a0*a2;\nif (d < 0.0)\ndiscard;\nfloat dist = (-a1 + sqrt(d)) / a2;\nvec3 new_point = ray_target + dist * ray_direction;\nvec3 tmp_point = new_point - base;\nvec3 _normal = normalize( tmp_point - axis * dot(tmp_point, axis) );\nray_origin = mix( ray_origin, surface_point, ortho );\nfloat front_cap_test = dot( tmp_point, axis );\nfloat end_cap_test = dot((new_point - end_cyl), axis);\n#ifndef CAP\nvec3 new_point2 = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\nvec3 tmp_point2 = new_point2 - base;\n#endif\nif (front_cap_test < 0.0)\n{\nfloat dNV = dot(-axis, ray_direction);\nif (dNV < 0.0)\ndiscard;\nfloat near = dot(-axis, (base)) / dNV;\nvec3 front_point = ray_direction * near + ray_origin;\nif (dot(front_point - base, front_point-base) > radius2)\ndiscard;\n#ifdef CAP\nnew_point = front_point;\n_normal = axis;\n#else\nnew_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\ndNV = dot(-axis, ray_direction);\nnear = dot(axis, end_cyl) / dNV;\nnew_point2 = ray_direction * near + ray_origin;\nif (dot(new_point2 - end_cyl, new_point2-base) < radius2)\ndiscard;\ninterior = true;\n#endif\n}\nif( end_cap_test > 0.0 )\n{\nfloat dNV = dot(axis, ray_direction);\nif (dNV < 0.0)\ndiscard;\nfloat near = dot(axis, end_cyl) / dNV;\nvec3 end_point = ray_direction * near + ray_origin;\nif( dot(end_point - end_cyl, end_point-base) > radius2 )\ndiscard;\n#ifdef CAP\nnew_point = end_point;\n_normal = axis;\n#else\nnew_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\ndNV = dot(-axis, ray_direction);\nnear = dot(-axis, (base)) / dNV;\nnew_point2 = ray_direction * near + ray_origin;\nif (dot(new_point2 - base, new_point2-base) < radius2)\ndiscard;\ninterior = true;\n#endif\n}\ngl_FragDepthEXT = calcDepth( new_point );\n#ifdef NEAR_CLIP\nif( calcClip( new_point ) > 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\nif( calcClip( new_point ) > 0.0 )\ndiscard;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\n}\n}else if( gl_FragDepthEXT <= 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n}\n#else\nif( gl_FragDepthEXT <= 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n}\n#endif\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\n#ifdef PICKING\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vViewPosition = -new_point;\nvec3 vNormal = _normal;\nvec3 vColor;\nif( distSq3( new_point, end_cyl ) < distSq3( new_point, base ) ){\nif( b < 0.0 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\n}else{\nif( b > 0.0 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\n}\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\nvec3 normal = normalize( vNormal );\n#include lights_physical_fragment\n#include lights_fragment_begin\n#include lights_fragment_end\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\nif( interior ){\n#ifdef USE_INTERIOR_COLOR\noutgoingLight.xyz = interiorColor;\n#else\n#ifdef DIFFUSE_INTERIOR\noutgoingLight.xyz = vColor;\n#endif\n#endif\noutgoingLight.xyz *= 1.0 - interiorDarkening;\n}\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var ey=new Float32Array([-1,1,-1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]),ty=new Uint16Array([0,1,2,1,4,2,2,4,3,4,5,3]),ny=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"v3",t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return ey},n.mappingIndices.get=function(){return ty},n.mappingIndicesSize.get=function(){return 12},n.mappingSize.get=function(){return 6},n.mappingItemSize.get=function(){return 3},Object.defineProperties(t.prototype,n),t}(jm),ry=Object.assign({openEnded:!1},Tp),iy=Object.assign({openEnded:{updateShader:!0}},Rp),oy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parameterTypes=iy,this.isImpostor=!0,this.vertexShader="CylinderImpostor.vert",this.fragmentShader="CylinderImpostor.frag",this.addUniforms({modelViewMatrixInverse:{value:new j},ortho:{value:0}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return ry},t.prototype.getDefines=function(t){var n=e.prototype.getDefines.call(this,t);return this.parameters.openEnded||(n.CAP=1),n},Object.defineProperties(t.prototype,n),t}(ny),ay=(Object.assign({disableImpostor:!1},Zv,ry),function(e,t){return void 0===t&&(t={}),!e.color2&&e.color&&(e.color2=e.color),!nl||t&&t.disableImpostor?new Jv(e,t):new oy(e,t)});xl.add("cylinder",ay);var sy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="axes",this.parameters=Object.assign({radiusSize:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0,showAxes:{type:"boolean",rebuild:!0},showBox:{type:"boolean",rebuild:!0}},this.parameters,{assembly:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.radiusSize=Sa(n.radiusSize,.5),n.colorValue=Sa(n.colorValue,"lightgreen"),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.showAxes=Sa(n.showAxes,!0),this.showBox=Sa(n.showBox,!1),e.prototype.init.call(this,n)},t.prototype.getPrincipalAxes=function(){var e,t=this.getAssembly();return t&&(e=t.partList[0].getSelection()),this.structureView.getPrincipalAxes(e)},t.prototype.getAxesData=function(e){var t=this.getPrincipalAxes(),n=new ie(this.colorValue),r=0,i=0;this.showAxes&&(r+=6,i+=3),this.showBox&&(r+=8,i+=12);var o=new Float32Array(3*r),a=au(r,n.r,n.g,n.b),s=ou(r,this.radiusSize),l=new Float32Array(3*i),u=new Float32Array(3*i),c=au(i,n.r,n.g,n.b),d=ou(i,this.radiusSize),f=0;if(this.showAxes){var p=function(e,t){e.toArray(o,2*f),t.toArray(o,2*f+3),e.toArray(l,f),t.toArray(u,f),f+=3};p(t.begA,t.endA),p(t.begB,t.endB),p(t.begC,t.endC)}if(this.showBox){var h=new U,m=t.getProjectedScaleForAtoms(e),g=m.d1a,v=m.d2a,y=m.d3a,b=m.d1b,x=m.d2b,w=m.d3b,_=2*f,S=function(e,n,r){h.copy(t.center).addScaledVector(t.normVecA,e).addScaledVector(t.normVecB,n).addScaledVector(t.normVecC,r),h.toArray(o,_),_+=3};S(g,v,y),S(g,v,w),S(g,x,w),S(g,x,y),S(b,x,w),S(b,x,y),S(b,v,y),S(b,v,w);var C=f,E=function(e,t){h.fromArray(o,2*f+3*e).toArray(l,C),h.fromArray(o,2*f+3*t).toArray(u,C),C+=3};E(0,1),E(0,3),E(0,6),E(1,2),E(1,7),E(2,3),E(2,4),E(3,5),E(4,5),E(4,7),E(5,6),E(6,7)}var k=new Rf(t);return{vertex:{position:o,color:a,radius:s,picking:k},edge:{position1:l,position2:u,color:c,color2:c,radius:d,picking:k}}},t.prototype.create=function(){var e=this.getAxesData(this.structureView);this.sphereBuffer=new Wm(e.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new ay(e.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})},t.prototype.createData=function(e){},t.prototype.updateData=function(e,t){var n=this.getAxesData(t.sview),r={},i={};e&&!e.position||(Object.assign(r,{position:n.vertex.position}),Object.assign(i,{position1:n.edge.position1,position2:n.edge.position2})),e&&!e.color||(Object.assign(r,{color:n.vertex.color}),Object.assign(i,{color:n.edge.color,color2:n.edge.color})),e&&!e.radius||(Object.assign(r,{radius:n.vertex.radius}),Object.assign(i,{radius:n.edge.radius})),this.sphereBuffer.setAttributes(r),this.cylinderBuffer.setAttributes(i)},t}(Tv);ml.add("axes",sy);var ly=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="ball+stick",this.parameters=Object.assign({sphereDetail:!0,radialSegments:!0,openEnded:!0,disableImpostor:!0,aspectRatio:{type:"number",precision:1,max:10,min:1},lineOnly:{type:"boolean",rebuild:!0},cylinderOnly:{type:"boolean",rebuild:!0},multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondScale:{type:"number",precision:2,max:1,min:.01},bondSpacing:{type:"number",precision:2,max:2,min:.5},linewidth:{type:"integer",max:50,min:1,buffer:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.radiusType=Sa(n.radiusType,"size"),n.radiusSize=Sa(n.radiusSize,.15),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.aspectRatio=Sa(n.aspectRatio,2),this.lineOnly=Sa(n.lineOnly,!1),this.cylinderOnly=Sa(n.cylinderOnly,!1),this.multipleBond=Sa(n.multipleBond,"off"),this.bondSpacing=Sa(n.bondSpacing,1),this.bondScale=Sa(n.bondScale,.4),this.linewidth=Sa(n.linewidth,2),e.prototype.init.call(this,n)},t.prototype.getAtomRadius=function(t){return this.aspectRatio*e.prototype.getAtomRadius.call(this,t)},t.prototype.getAtomParams=function(t,n){var r=e.prototype.getAtomParams.call(this,t,n);return r.radiusParams.scale*=this.aspectRatio,r},t.prototype.getAtomData=function(e,t,n){return e.getAtomData(this.getAtomParams(t,n))},t.prototype.getBondParams=function(t,n){return n=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,bondScale:this.bondScale},n),e.prototype.getBondParams.call(this,t,n)},t.prototype.getBondData=function(e,t,n){return e.getBondData(this.getBondParams(t,n))},t.prototype.createData=function(e){var t=[];if(this.lineOnly)this.lineBuffer=new Wv(this.getBondData(e,{position:!0,color:!0,picking:!0}),this.getBufferParams({linewidth:this.linewidth})),t.push(this.lineBuffer);else{var n=new ay(this.getBondData(e),this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}));if(t.push(n),!this.cylinderOnly){var r=new Wm(this.getAtomData(e),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));t.push(r)}}return{bufferList:t}},t.prototype.updateData=function(e,t){"off"!==this.multipleBond&&e&&e.radius&&(e.position=!0);var n=this.getBondData(t.sview,e);if(this.lineOnly){var r={};e&&!e.position||Object.assign(r,{position1:n.position1,position2:n.position2}),e&&!e.color||Object.assign(r,{color:n.color,color2:n.color2}),t.bufferList[0].setAttributes(r)}else{var i={};if(e&&!e.position||Object.assign(i,{position1:n.position1,position2:n.position2}),e&&!e.color||Object.assign(i,{color:n.color,color2:n.color2}),e&&!e.radius||Object.assign(i,{radius:n.radius}),t.bufferList[0].setAttributes(i),!this.cylinderOnly){var o=this.getAtomData(t.sview,e),a={};e&&!e.position||Object.assign(a,{position:o.position}),e&&!e.color||Object.assign(a,{color:o.color}),e&&!e.radius||Object.assign(a,{radius:o.radius}),t.bufferList[1].setAttributes(a)}}},t.prototype.setParameters=function(t){void 0===t&&(t={});var n=!1,r={};return(t.aspectRatio||t.bondSpacing||t.bondScale)&&(Object.assign(r,{radius:!0}),nl&&!this.disableImpostor||(n=!0)),e.prototype.setParameters.call(this,t,r,n),this},t}(Tv);ml.add("ball+stick",ly);var uy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="backbone",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=Sa(n.aspectRatio,1),n.radiusSize=Sa(n.radiusSize,.25),e.prototype.init.call(this,n)},t.prototype.getAtomRadius=function(t){return t.isTrace()?e.prototype.getAtomRadius.call(this,t):0},t.prototype.getAtomData=function(e,t,n){return e.getBackboneAtomData(this.getAtomParams(t,n))},t.prototype.getBondData=function(e,t,n){return e.getBackboneBondData(this.getBondParams(t,n))},t}(ly);ml.add("backbone",uy);var cy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="base",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=Sa(n.aspectRatio,1),n.radiusSize=Sa(n.radiusSize,.3),e.prototype.init.call(this,n)},t.prototype.getAtomData=function(e,t,n){return e.getRungAtomData(this.getAtomParams(t,n))},t.prototype.getBondData=function(e,t,n){var r=this.getBondParams(t,n);return Object.assign(r.colorParams,{rung:!0}),e.getRungBondData(r)},t}(ly);ml.add("base",cy);var dy=function(e,t){this.m=e,this.tension=t,this.dt=1/this.m,this.delta=1e-4,this.vec1=new U,this.vec2=new U,this.vDir=new U,this.vTan=new U,this.vNorm=new U,this.vBin=new U,this.m2=Math.ceil(this.m/2)};dy.prototype.interpolateToArr=function(e,t,n,r,i,o,a){o[a+0]=ts(e.x,t.x,n.x,r.x,i,this.tension),o[a+1]=ts(e.y,t.y,n.y,r.y,i,this.tension),o[a+2]=ts(e.z,t.z,n.z,r.z,i,this.tension)},dy.prototype.interpolateToVec=function(e,t,n,r,i,o){o.x=ts(e.x,t.x,n.x,r.x,i,this.tension),o.y=ts(e.y,t.y,n.y,r.y,i,this.tension),o.z=ts(e.z,t.z,n.z,r.z,i,this.tension)},dy.prototype.interpolatePosition=function(e,t,n,r,i,o){for(var a=0;a<this.m;++a){var s=o+3*a,l=this.dt*a;this.interpolateToArr(e,t,n,r,l,i,s)}},dy.prototype.interpolateTangent=function(e,t,n,r,i,o){for(var a=this,s=0;s<this.m;++s){var l=a.dt*s,u=l-a.delta,c=l+a.delta,d=o+3*s;u<0&&(u=0),c>1&&(c=1),a.interpolateToVec(e,t,n,r,u,a.vec1),a.interpolateToVec(e,t,n,r,c,a.vec2),a.vec2.sub(a.vec1).normalize(),a.vec2.toArray(i,d)}},dy.prototype.vectorSubdivide=function(e,t,n,r,i){for(var o,a=t.next(),s=t.next(),l=t.next(),u=t.size,c=u-1,d=r||0,f=0;f<c;++f)o=a,a=s,s=l,l=t.next(),e.apply(this,[o,a,s,l,n,d]),d+=3*this.m;i&&(o=t.get(u-2),a=t.get(u-1),s=t.get(0),l=t.get(1),e.apply(this,[o,a,s,l,n,d]),d+=3*this.m)},dy.prototype.getPosition=function(e,t,n,r){e.reset(),this.vectorSubdivide(this.interpolatePosition,e,t,n,r);var i=e.size-1,o=i*this.m*3;r&&(o+=3*this.m);var a=e.get(r?0:i);t[o]=a.x,t[o+1]=a.y,t[o+2]=a.z},dy.prototype.getTangent=function(e,t,n,r){e.reset(),this.vectorSubdivide(this.interpolateTangent,e,t,n,r);var i=(e.size-1)*this.m*3;r&&(i+=3*this.m),cu(t,t,i-3,i,3)},dy.prototype.interpolateNormalDir=function(e,t,n,r,i,o,a,s,l,u,c,d,f){for(var p=this,h=0;h<this.m;++h){var m=d+3*h;f&&(m+=3*p.m2);var g=p.dt*h;p.interpolateToVec(e,t,n,r,g,p.vec1),p.interpolateToVec(i,o,a,s,g,p.vec2),p.vDir.subVectors(p.vec2,p.vec1).normalize(),p.vTan.fromArray(l,m),p.vBin.crossVectors(p.vDir,p.vTan).normalize(),p.vBin.toArray(c,m),p.vNorm.crossVectors(p.vTan,p.vBin).normalize(),p.vNorm.toArray(u,m)}},dy.prototype.interpolateNormal=function(e,t,n,r,i){for(var o=this,a=0;a<this.m;++a){var s=i+3*a;e.copy(o.vNorm),o.vTan.fromArray(t,s),o.vBin.crossVectors(e,o.vTan).normalize(),o.vBin.toArray(r,s),o.vNorm.crossVectors(o.vTan,o.vBin).normalize(),o.vNorm.toArray(n,s)}},dy.prototype.getNormal=function(e,t,n,r,i,o){var a=this;this.vNorm.set(0,0,1);for(var s=e-1,l=i||0,u=0;u<s;++u)a.interpolateNormal(a.vDir,t,n,r,l),l+=3*a.m;o&&(this.interpolateNormal(this.vDir,t,n,r,l),l+=3*this.m),this.vBin.toArray(r,l),this.vNorm.toArray(n,l)},dy.prototype.getNormalDir=function(e,t,n,r,i,o,a,s){var l=this;e.reset(),t.reset();var u=new U,c=new U,d=new U,f=new U,p=new U,h=(new U).copy(e.next()),m=(new U).copy(e.next()),g=(new U).copy(e.next()),v=new U,y=(new U).copy(t.next()),b=(new U).copy(t.next()),x=(new U).copy(t.next());this.vNorm.set(0,0,1);for(var w=e.size,_=w-1,S=o||0,C=0;C<_;++C)p.copy(h),h.copy(m),m.copy(g),g.copy(e.next()),v.copy(y),y.copy(b),b.copy(x),x.copy(t.next()),0===C?(u.subVectors(v,p),c.subVectors(y,h),u.dot(c)<0&&(c.multiplyScalar(-1),y.addVectors(h,c)),d.subVectors(b,m),c.dot(d)<0&&(d.multiplyScalar(-1),b.addVectors(m,d))):d.copy(f),f.subVectors(x,g),d.dot(f)<0&&(f.multiplyScalar(-1),x.addVectors(g,f)),l.interpolateNormalDir(p,h,m,g,v,y,b,x,n,r,i,S,s),S+=3*l.m;if(a&&(p.copy(e.get(w-2)),h.copy(e.get(w-1)),m.copy(e.get(0)),g.copy(e.get(1)),v.copy(t.get(w-2)),y.copy(t.get(w-1)),b.copy(t.get(0)),x.copy(t.get(1)),d.copy(f),f.subVectors(x,g),d.dot(f)<0&&(f.multiplyScalar(-1),x.addVectors(g,f)),this.interpolateNormalDir(p,h,m,g,v,y,b,x,n,r,i,S,s),S+=3*this.m),s){this.vBin.fromArray(i,3*this.m2),this.vNorm.fromArray(r,3*this.m2);for(var E=0;E<this.m2;++E)l.vBin.toArray(i,3*E),l.vNorm.toArray(r,3*E)}else this.vBin.toArray(i,S),this.vNorm.toArray(r,S)},dy.prototype.interpolateColor=function(e,t,n,r,i){var o,a;for(o=0;o<this.m2;++o)a=i+3*o,n.apply(this,[e,r,a]);for(o=this.m2;o<this.m;++o)a=i+3*o,n.apply(this,[t,r,a])},dy.prototype.getColor=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,u=r||0,c=0;c<l;++c)o=a,a=e.next(),this.interpolateColor(o,a,t,n,u),u+=3*this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolateColor(o,a,t,n,u),u+=3*this.m),n[u]=n[u-3],n[u+1]=n[u-2],n[u+2]=n[u-1]},dy.prototype.interpolatePicking=function(e,t,n,r,i){var o;for(o=0;o<this.m2;++o)r[i+o]=n.apply(this,[e]);for(o=this.m2;o<this.m;++o)r[i+o]=n.apply(this,[t])},dy.prototype.getPicking=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,u=r||0,c=0;c<l;++c)o=a,a=e.next(),this.interpolatePicking(o,a,t,n,u),u+=this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolatePicking(o,a,t,n,u),u+=this.m),n[u]=n[u-1]},dy.prototype.interpolateSize=function(e,t,n,r,i){for(var o=n.apply(this,[e]),a=n.apply(this,[t]),s=0;s<this.m;++s){var l=s/this.m;r[i+s]=(1-l)*o+l*a}},dy.prototype.getSize=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,u=r||0,c=0;c<l;++c)o=a,a=e.next(),this.interpolateSize(o,a,t,n,u),u+=this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolateSize(o,a,t,n,u),u+=this.m),n[u]=n[u-1]};var fy=function(e,t){this.polymer=e,this.size=e.residueCount;var n=t||{};this.directional=n.directional||!1,this.positionIterator=n.positionIterator||!1,this.subdiv=n.subdiv||1,this.smoothSheet=n.smoothSheet||!1,n.tension?this.tension=n.tension:this.tension=this.polymer.isNucleic()?.5:.9,this.interpolator=new dy(this.subdiv,this.tension)};fy.prototype.getAtomIterator=function(e,t){var n=this.polymer,r=n.structure,i=n.residueCount,o=0,a=-1,s=[r.getAtomProxy(),r.getAtomProxy(),r.getAtomProxy(),r.getAtomProxy()],l=[new U,new U,new U,new U];var u=r.getAtomProxy(),c=r.getAtomProxy();function d(r){var a=s[o%4];if(a.index=n.getAtomIndexByType(r,e),t&&r>0&&r<i&&"e"===a.sstruc){var d=l[o%4];return u.index=n.getAtomIndexByType(r+1,e),c.index=n.getAtomIndexByType(r-1,e),d.addVectors(u,c).add(a).add(a).multiplyScalar(.25),o+=1,d}return o+=1,a}return{size:i,next:function(){var e=d(a);return a+=1,e},get:d,reset:function(){o=0,a=-1}}},fy.prototype.getSubdividedColor=function(e){var t=this.subdiv,n=this.polymer,r=(n.residueCount-1)*t*3+3;n.isCyclic&&(r+=3*t);var i=new Float32Array(r),o=this.getAtomIterator("trace"),a=e||{};a.structure=n.structure;var s=pl.getScheme(a);return this.interpolator.getColor(o,(function(e,t,n){s.atomColorToArray(e,t,n)}),i,0,n.isCyclic),{color:i}},fy.prototype.getSubdividedPicking=function(){var e=this.subdiv,t=this.polymer,n=(t.residueCount-1)*e+1;t.isCyclic&&(n+=e);var r=t.structure,i=this.getAtomIterator("trace"),o=new Float32Array(n);return this.interpolator.getPicking(i,(function(e){return e.index}),o,0,t.isCyclic),{picking:new Tf(o,r)}},fy.prototype.getSubdividedPosition=function(){return{position:this.getPosition()}},fy.prototype.getSubdividedOrientation=function(){var e=this.getTangent(),t=this.getNormals(e);return{tangent:e,normal:t.normal,binormal:t.binormal}},fy.prototype.getSubdividedSize=function(e){var t=this.subdiv,n=this.polymer,r=(n.residueCount-1)*t+1;n.isCyclic&&(r+=t);var i=new Float32Array(r),o=this.getAtomIterator("trace"),a=new sh(e);return this.interpolator.getSize(o,(function(e){return a.atomRadius(e)}),i,0,n.isCyclic),{size:i}},fy.prototype.getPosition=function(){var e=this.subdiv,t=this.polymer,n=(t.residueCount-1)*e*3+3;t.isCyclic&&(n+=3*e);var r=new Float32Array(n),i=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getPosition(i,r,0,t.isCyclic),r},fy.prototype.getTangent=function(){var e=this.subdiv,t=this.polymer,n=(this.size-1)*e*3+3;t.isCyclic&&(n+=3*e);var r=new Float32Array(n),i=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getTangent(i,r,0,t.isCyclic),r},fy.prototype.getNormals=function(e){var t=this.subdiv,n=this.polymer,r=n.isProtein(),i=this.size,o=(i-1)*t*3+3;n.isCyclic&&(o+=3*t);var a=new Float32Array(o),s=new Float32Array(o);if(this.directional&&!this.polymer.isCg()){var l=this.getAtomIterator("direction1"),u=this.getAtomIterator("direction2");this.interpolator.getNormalDir(l,u,e,a,s,0,n.isCyclic,r)}else this.interpolator.getNormal(i,e,a,s,0,n.isCyclic);return{normal:a,binormal:s}};var py=new U,hy=new U,my=Object.assign({radialSegments:4,capped:!1,aspectRatio:1},Tp);var gy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,function(e,t){void 0===t&&(t={});var n=Sa(t.radialSegments,4),r=Sa(t.capped,!1),i=r?n:0,o=r?n-2:0,a=e.position.length/3,s=a*n*3+2*i*3,l=2*(a-1)*n*3+2*o*3;return{position:new Float32Array(s),color:new Float32Array(s),index:Ba(l,s/3),normal:new Float32Array(s),picking:e.picking}}(t,n),n),this.capVertices=this.parameters.capped?this.parameters.radialSegments:0,this.capTriangles=this.parameters.capped?this.parameters.radialSegments-2:0,this.size2=t.position.length/3,t.primitiveId=su(this.size2),this.setAttributes(t),this.makeIndex()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return my},t.prototype.setAttributes=function(e){void 0===e&&(e={});var t,n,r,i,o,a,s,l,u,c,d,f,p,h=this.parameters.aspectRatio,m=this.size2,g=m-1,v=this.parameters.radialSegments,y=this.geometry.attributes;e.position&&(t=e.position,n=e.normal,r=e.binormal,i=e.tangent,a=e.size,l=y.position.array,c=y.normal.array,y.position.needsUpdate=!0,y.normal.needsUpdate=!0),e.color&&(o=e.color,u=y.color.array,y.color.needsUpdate=!0),e.primitiveId&&(s=e.primitiveId,d=y.primitiveId.array,y.primitiveId.needsUpdate=!0);var b=0,x=0,w=0,_=0,S=0,C=0,E=0,k=0,P=0,M=0,A=[],T=[],R=[],I=[],O=[],L=[];if(t)for(var D=0;D<v;++D){var F=D/v*2*Math.PI;A[D]=h*Math.cos(F),T[D]=Math.sin(F),R[D]=h*Math.cos(F-.01),I[D]=Math.sin(F-.01),O[D]=h*Math.cos(F+.01),L[D]=Math.sin(F+.01)}for(var N=0;N<m;++N){p=(f=3*N)*v,t&&i&&n&&r&&a&&(py.set(i[f],i[f+1],i[f+2]),x=n[f],w=n[f+1],_=n[f+2],S=r[f],C=r[f+1],E=r[f+2],k=t[f],P=t[f+1],M=t[f+2],b=a[N]);for(var B=0;B<v;++B){var z=p+3*B;if(t){var j=-b*A[B],H=b*T[B],U=-b*R[B],V=b*I[B],G=-b*O[B],W=b*L[B];l[z]=k+j*x+H*S,l[z+1]=P+j*w+H*C,l[z+2]=M+j*_+H*E,hy.set(G*x+W*S-(U*x+V*S),G*w+W*C-(U*w+V*C),G*_+W*E-(U*_+V*E)).cross(py),c[z]=hy.x,c[z+1]=hy.y,c[z+2]=hy.z}o&&(u[z]=o[f],u[z+1]=o[f+1],u[z+2]=o[f+2]),s&&(d[N*v+B]=s[N])}}f=0,p=3*m*v;for(var $=0;$<v;++$){var q=f+3*$,X=p+3*$;t&&i&&(l[X]=l[q],l[X+1]=l[q+1],l[X+2]=l[q+2],c[X]=i[f],c[X+1]=i[f+1],c[X+2]=i[f+2]),o&&(u[X]=u[q],u[X+1]=u[q+1],u[X+2]=u[q+2]),s&&(d[m*v+$]=d[0+$])}f=3*(m-1)*v,p=3*(m+1)*v;for(var K=0;K<v;++K){var Y=f+3*K,Z=p+3*K;t&&i&&(l[Z]=l[Y],l[Z+1]=l[Y+1],l[Z+2]=l[Y+2],c[Z]=i[3*g],c[Z+1]=i[3*g+1],c[Z+2]=i[3*g+2]),o&&(u[Z]=u[Y],u[Z+1]=u[Y+1],u[Z+2]=u[Y+2]),s&&(d[(m+1)*v+K]=d[(m-1)*v+K])}},t.prototype.makeIndex=function(){for(var e,t,n=this.geometry.getIndex().array,r=this.size2,i=r-1,o=this.capTriangles,a=this.parameters.radialSegments,s=this.parameters.radialSegments+1,l=0;l<i;++l)for(var u=l*a*3*2,c=l*a,d=(l+1)*a,f=0;f<a;++f)n[t=u+3*f*2]=c+f,n[t+1]=c+(f+1)%a,n[t+2]=d+f,n[t+3]=d+f,n[t+4]=c+(f+1)%a,n[t+5]=d+(f+1)%a;for(var p=[0],h=1;h<s/2;++h)p.push(h),a-h!==h&&p.push(a-h);t=i*a*3*2,e=r*a;for(var m=0;m<p.length-2;++m)m%2===0?(n[t+3*m+0]=e+p[m+0],n[t+3*m+1]=e+p[m+1],n[t+3*m+2]=e+p[m+2]):(n[t+3*m+0]=e+p[m+2],n[t+3*m+1]=e+p[m+1],n[t+3*m+2]=e+p[m+0]);t=i*a*3*2+3*o,e=r*a+a;for(var g=0;g<p.length-2;++g)g%2===0?(n[t+3*g+0]=e+p[g+0],n[t+3*g+1]=e+p[g+1],n[t+3*g+2]=e+p[g+2]):(n[t+3*g+0]=e+p[g+2],n[t+3*g+1]=e+p[g+1],n[t+3*g+2]=e+p[g+0])},Object.defineProperties(t.prototype,n),t}(Lp),vy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="cartoon",this.parameters=Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1,rebuild:!0},subdiv:{type:"integer",max:50,min:1,rebuild:!0},radialSegments:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},capped:{type:"boolean",rebuild:!0},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"chainname"),n.colorScale=Sa(n.colorScale,"RdYlBu"),n.radiusType=Sa(n.radiusType,"sstruc"),n.radiusScale=Sa(n.radiusScale,.7),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.aspectRatio=Sa(n.aspectRatio,5),this.tension=Sa(n.tension,NaN),this.capped=Sa(n.capped,!0),this.smoothSheet=Sa(n.smoothSheet,!1),"low"===n.quality?(this.subdiv=3,this.radialSegments=6):"medium"===n.quality?this.subdiv=6:"high"===n.quality?this.subdiv=12:this.subdiv=Sa(n.subdiv,6),e.prototype.init.call(this,n)},t.prototype.getSplineParams=function(e){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:1!==this.aspectRatio,smoothSheet:this.smoothSheet},e)},t.prototype.getSpline=function(e){return new fy(e,this.getSplineParams())},t.prototype.getAspectRatio=function(e){return e.isCg()?1:this.aspectRatio},t.prototype.getAtomRadius=function(t){return t.isTrace()?e.prototype.getAtomRadius.call(this,t):0},t.prototype.createData=function(e){var t=this,n=[],r=[];return this.structure.eachPolymer((function(e){if(!(e.residueCount<4)){r.push(e);var i=t.getSpline(e),o=t.getAspectRatio(e),a=i.getSubdividedPosition(),s=i.getSubdividedOrientation(),l=i.getSubdividedColor(t.getColorParams()),u=i.getSubdividedPicking(),c=i.getSubdividedSize(t.getRadiusParams());n.push(new gy(Object.assign({},a,s,l,u,c),t.getBufferParams({radialSegments:t.radialSegments,aspectRatio:o,capped:t.capped})))}}),e.getSelection()),{bufferList:n,polymerList:r}},t.prototype.updateData=function(e,t){var n=this;sl&&rl.time(this.type+" repr update"),e=e||{};for(var r=0,i=t.polymerList.length;r<i;++r){var o={},a=t.polymerList[r],s=n.getSpline(a),l=n.getAspectRatio(a);if(Object.assign(t.bufferList[r],{aspectRatio:l}),e.position||e.radius){var u=s.getSubdividedPosition(),c=s.getSubdividedOrientation(),d=s.getSubdividedSize(n.getRadiusParams(l));o.position=u.position,o.normal=c.normal,o.binormal=c.binormal,o.tangent=c.tangent,o.size=d.size}if(e.color){var f=s.getSubdividedColor(n.getColorParams());o.color=f.color}if(e.picking){var p=s.getSubdividedPicking();o.picking=p.picking}t.bufferList[r].setAttributes(o)}sl&&rl.timeEnd(this.type+" repr update")},t.prototype.setParameters=function(t){var n={};return t&&t.aspectRatio&&(n.radius=!0),t&&t.tension&&(n.position=!0),e.prototype.setParameters.call(this,t,n,!1),this},t}(Tv);ml.add("cartoon",vy);var yy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="contact",this.parameters=Object.assign({hydrogenBond:{type:"boolean",rebuild:!0},weakHydrogenBond:{type:"boolean",rebuild:!0},waterHydrogenBond:{type:"boolean",rebuild:!0},backboneHydrogenBond:{type:"boolean",rebuild:!0},hydrophobic:{type:"boolean",rebuild:!0},halogenBond:{type:"boolean",rebuild:!0},ionicInteraction:{type:"boolean",rebuild:!0},metalCoordination:{type:"boolean",rebuild:!0},cationPi:{type:"boolean",rebuild:!0},piStacking:{type:"boolean",rebuild:!0},filterSele:{type:"text",rebuild:!0},labelVisible:{type:"boolean",rebuild:!0},labelFixedSize:{type:"boolean",buffer:"fixedSize"},labelSize:{type:"number",precision:3,max:10,min:.001,rebuild:!0},labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},maxHydrophobicDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondSulfurDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondAccAngle:{type:"integer",max:180,min:0,rebuild:!0},maxHbondDonAngle:{type:"integer",max:180,min:0,rebuild:!0},maxHbondAccPlaneAngle:{type:"integer",max:90,min:0,rebuild:!0},maxHbondDonPlaneAngle:{type:"integer",max:90,min:0,rebuild:!0},maxPiStackingDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxPiStackingOffset:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxPiStackingAngle:{type:"integer",max:180,min:0,rebuild:!0},maxCationPiDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxCationPiOffset:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxIonicDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHalogenBondDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHalogenBondAngle:{type:"integer",max:180,min:0,rebuild:!0},maxMetalDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},refineSaltBridges:{type:"boolean",rebuild:!0},masterModelIndex:{type:"integer",max:1e3,min:-1,rebuild:!0},lineOfSightDistFactor:{type:"number",precision:1,max:10,min:0,rebuild:!0},radialSegments:!0,disableImpostor:!0},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.radiusSize=Sa(n.radiusSize,.05),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.hydrogenBond=Sa(n.hydrogenBond,!0),this.weakHydrogenBond=Sa(n.weakHydrogenBond,!1),this.waterHydrogenBond=Sa(n.waterHydrogenBond,!1),this.backboneHydrogenBond=Sa(n.backboneHydrogenBond,!1),this.hydrophobic=Sa(n.hydrophobic,!1),this.halogenBond=Sa(n.halogenBond,!0),this.ionicInteraction=Sa(n.ionicInteraction,!0),this.metalCoordination=Sa(n.metalCoordination,!0),this.cationPi=Sa(n.cationPi,!0),this.piStacking=Sa(n.piStacking,!0),this.filterSele=Sa(n.filterSele,""),this.labelVisible=Sa(n.labelVisible,!1),this.labelFixedSize=Sa(n.labelFixedSize,!1),this.labelSize=Sa(n.labelSize,2),this.labelUnit=Sa(n.labelUnit,""),this.maxHydrophobicDist=Sa(n.maxHydrophobicDist,4),this.maxHbondDist=Sa(n.maxHbondDist,3.5),this.maxHbondSulfurDist=Sa(n.maxHbondSulfurDist,4.1),this.maxHbondAccAngle=Sa(n.maxHbondAccAngle,45),this.maxHbondDonAngle=Sa(n.maxHbondDonAngle,45),this.maxHbondAccPlaneAngle=Sa(n.maxHbondAccPlaneAngle,90),this.maxHbondDonPlaneAngle=Sa(n.maxHbondDonPlaneAngle,30),this.maxPiStackingDist=Sa(n.maxPiStackingDist,5.5),this.maxPiStackingOffset=Sa(n.maxPiStackingOffset,2),this.maxPiStackingAngle=Sa(n.maxPiStackingAngle,30),this.maxCationPiDist=Sa(n.maxCationPiDist,6),this.maxCationPiOffset=Sa(n.maxCationPiOffset,2),this.maxIonicDist=Sa(n.maxIonicDist,5),this.maxHalogenBondDist=Sa(n.maxHalogenBondDist,3.5),this.maxHalogenBondAngle=Sa(n.maxHalogenBondAngle,30),this.maxMetalDist=Sa(n.maxMetalDist,3),this.refineSaltBridges=Sa(n.refineSaltBridges,!0),this.masterModelIndex=Sa(n.masterModelIndex,-1),this.lineOfSightDistFactor=Sa(n.lineOfSightDistFactor,1),e.prototype.init.call(this,n)},t.prototype.getAtomRadius=function(){return 0},t.prototype.getContactData=function(e){var t={maxHydrophobicDist:this.maxHydrophobicDist,maxHbondDist:this.maxHbondDist,maxHbondSulfurDist:this.maxHbondSulfurDist,maxHbondAccAngle:this.maxHbondAccAngle,maxHbondDonAngle:this.maxHbondDonAngle,maxHbondAccPlaneAngle:this.maxHbondAccPlaneAngle,maxHbondDonPlaneAngle:this.maxHbondDonPlaneAngle,maxPiStackingDist:this.maxPiStackingDist,maxPiStackingOffset:this.maxPiStackingOffset,maxPiStackingAngle:this.maxPiStackingAngle,maxCationPiDist:this.maxCationPiDist,maxCationPiOffset:this.maxCationPiOffset,maxIonicDist:this.maxIonicDist,maxHalogenBondDist:this.maxHalogenBondDist,maxHalogenBondAngle:this.maxHalogenBondAngle,maxMetalDist:this.maxMetalDist,refineSaltBridges:this.refineSaltBridges,masterModelIndex:this.masterModelIndex,lineOfSightDistFactor:this.lineOfSightDistFactor},n={hydrogenBond:this.hydrogenBond,weakHydrogenBond:this.weakHydrogenBond,waterHydrogenBond:this.waterHydrogenBond,backboneHydrogenBond:this.backboneHydrogenBond,hydrophobic:this.hydrophobic,halogenBond:this.halogenBond,ionicInteraction:this.ionicInteraction,metalCoordination:this.metalCoordination,cationPi:this.cationPi,piStacking:this.piStacking,radius:this.radiusSize*this.radiusScale,filterSele:this.filterSele};return Cf(xf(e,t),e,n)},t.prototype.createData=function(e){var t=this.getContactData(e),n=[new ay(Zc(t),this.getBufferParams({sphereDetail:1,dullInterior:!0,disableImpostor:this.disableImpostor}))];if(this.labelVisible){var r={size:this.labelSize,unit:this.labelUnit};n.push(new Uv(function(e,t){for(var n=ru(e.position1,e.position2),r=[],i=iu(e.position1,e.position2),o=i.length/3,a=0;a<o;a++){var s=3*a,l=Math.sqrt(Math.pow(i[s],2)+Math.pow(i[s+1],2)+Math.pow(i[s+2],2));switch(t.unit){case"angstrom":r[a]=l.toFixed(2)+" "+String.fromCharCode(8491);break;case"nm":r[a]=(l/10).toFixed(2)+" nm";break;default:r[a]=l.toFixed(2)}}return{position:n,size:ou(n.length/3,t.size),color:e.color,text:r}}(t,r),{fixedSize:this.labelFixedSize}))}return{bufferList:n}},t}(Tv);ml.add("contact",yy);var by=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="dihedral",this.parameters=Object.assign({atomQuad:{type:"hidden",rebuild:!0},extendLine:{type:"boolean",rebuild:!0,default:!0},lineVisible:{type:"boolean",default:!0},planeVisible:{type:"boolean",default:!0},sectorVisible:{type:"boolean",default:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.side=Sa(n.side,"double"),n.opacity=Sa(n.opacity,.5),this.atomQuad=Sa(n.atomQuad,[]),this.extendLine=Sa(n.extendLine,!0),this.lineVisible=Sa(n.lineVisible,!0),this.planeVisible=Sa(n.planeVisible,!0),this.sectorVisible=Sa(n.sectorVisible,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){if(e.atomCount&&this.atomQuad.length){var t=function(e,t){void 0===t&&(t={});for(var n=Sa(t.angleStep,Math.PI/90),r=e.length,i=e.length/12,o=new Float32Array(i),a=new Float32Array(3*i),s=new Array(i),l=new Array(i),u=new Array(i),c=new Array(i),d=new Array(i),f=0,p=0,h=0,m=Dc(),g=Dc(),v=Dc(),y=Dc(),b=Dc(),x=Dc(),w=Dc(),_=Dc(),S=Dc(),C=Dc(),E=Dc(),k=Dc(),P=Dc(),M=Dc(),A=Dc(),T=0,R=function(r){if(jc(m,e,r),jc(g,e,r+3),jc(v,e,r+6),jc(y,e,r+9),Bc(b,m,g),Bc(x,v,g),0!==Uc(x)){Bc(w,y,v),Gc(_,x,.5),zc(S,g,_),Wc(b,b),Wc(x,x),Wc(w,w),Bc(_,m,S);var i=Nc(_,x)>0;Bc(_,y,S);var R=Nc(_,x)<0;if(Gc(_,x,Nc(x,b)),Bc(C,b,_),Gc(_,x,Nc(x,w)),Bc(E,w,_),0!==Uc(C)&&0!==Uc(E)){Wc(C,C),Wc(E,E);var I=o[T]=Math.acos(Nc(C,E));s[T]=(tu*I).toFixed(1)+String.fromCharCode(176),Fc(M,C,x),Wc(M,M),Nc(M,E)<0&&Yc(M,M),Ov(_,S,C,M,I/2),Hc(_,a,3*T);var O=Math.ceil(I/n),L=O+(t.extendLine?4:2),D=t.extendLine?36:0,F=new Float32Array(3*L),N=new Float32Array(3*L),B=new Float32Array(9*O),z=new Float32Array(D);l[T]=F,u[T]=N,c[T]=B,d[T]=z,t.extendLine&&(i?(Bc(_,m,v),Wc(_,_),Gc(k,_,1/Nc(C,_)),zc(k,k,v)):(Gc(k,b,1/Nc(C,b)),zc(k,k,g)),R?(Bc(_,y,g),Wc(_,_),Gc(P,_,1/Nc(E,_)),zc(P,P,g)):(Gc(P,w,1/Nc(E,w)),zc(P,P,v))),zc(A,S,C);var j=0;t.extendLine?(Hc(m,F,j),Hc(k,N,j),Hc(k,F,j+=3),Hc(A,N,j),j+=3,Hc(k,z,0),Hc(A,z,3),Hc(i?v:g,z,6),Hc(i?v:g,z,9),Hc(A,z,12),Hc(S,z,15)):(Hc(S,F,j),Hc(A,N,j),j+=3);for(var H=function(e,t){var n=9*t;Hc(S,B,n),Hc(A,B,n+3),Hc(A,F,j),Ov(A,S,C,M,e),Hc(A,B,n+6),Hc(A,N,j),j+=3},U=0,V=n;V<I;V+=n)H(V,U++);H(I,U++),t.extendLine?(Hc(A,F,3*(L-2)),Hc(P,N,3*(L-2)),Hc(P,F,3*(L-1)),Hc(y,N,3*(L-1)),Hc(P,z,18),Hc(A,z,21),Hc(R?g:v,z,24),Hc(R?g:v,z,27),Hc(A,z,30),Hc(S,z,33)):(Hc(A,F,j),Hc(S,N,j),j+=3),f+=3*L,p+=9*O,h+=D,T+=1}}},I=0;I<r;I+=12)R(I);for(var O=T,L=new Float32Array(f),D=new Float32Array(f),F=new Float32Array(p),N=new Float32Array(h),B=0,z=0,j=0,H=0;H<O;H++){var U=l[H],V=u[H],G=c[H],W=d[H];cu(U,L,0,B,U.length),cu(V,D,0,B,V.length),cu(G,F,0,z,G.length),cu(W,N,0,j,W.length),B+=U.length,z+=G.length,j+=W.length}return{labelPosition:a.subarray(0,3*O),labelText:s.slice(0,O),linePosition1:L,linePosition2:D,planePosition:N,sectorPosition:F}}(Iv(e,this.atomQuad),{extendLine:this.extendLine}),n=this.n=t.labelText.length,r=new ie(this.labelColor);this.textBuffer=new Uv({position:t.labelPosition,size:ou(n,this.labelSize),color:au(n,r.r,r.g,r.b),text:t.labelText},this.getLabelBufferParams());var i=new ie(this.colorValue);this.lineLength=t.linePosition1.length/3;var o=au(this.lineLength,i.r,i.g,i.b);return this.lineBuffer=new Wv(Jc({position1:t.linePosition1,position2:t.linePosition2,color:o,color2:o}),this.getBufferParams({linewidth:this.linewidth,visible:this.lineVisible,opacity:this.lineOpacity})),this.planeLength=t.planePosition.length/3,this.planeBuffer=new Lp({position:t.planePosition,color:au(this.planeLength,i.r,i.g,i.b)},this.getBufferParams({visible:this.planeVisible})),this.sectorLength=t.sectorPosition.length/3,this.sectorBuffer=new Lp({position:t.sectorPosition,color:au(this.sectorLength,i.r,i.g,i.b)},this.getBufferParams({visible:this.sectorVisible})),{bufferList:[this.textBuffer,this.lineBuffer,this.planeBuffer,this.sectorBuffer]}}},t.prototype.updateData=function(t,n){e.prototype.updateData.call(this,t,n);var r={},i={},o={};if(t.color){var a=new ie(this.colorValue);Object.assign(r,{color:au(this.lineLength,a.r,a.g,a.b),color2:au(this.lineLength,a.r,a.g,a.b)}),Object.assign(i,{color:au(this.planeLength,a.r,a.g,a.b)}),Object.assign(o,{color:au(this.sectorLength,a.r,a.g,a.b)})}this.lineBuffer.setAttributes(r),this.planeBuffer.setAttributes(i),this.sectorBuffer.setAttributes(o)},t.prototype.setParameters=function(t){return e.prototype.setParameters.call(this,t,{},!1),!t||void 0===t.lineVisible&&void 0===t.sectorVisible&&void 0===t.planeVisible||this.setVisibility(this.visible),t&&t.lineOpacity&&this.lineBuffer.setParameters({opacity:t.lineOpacity}),t&&void 0!==t.opacity&&this.lineBuffer.setParameters({opacity:this.lineOpacity}),t&&t.linewidth&&this.lineBuffer.setParameters({linewidth:t.linewidth}),this},t.prototype.setVisibility=function(t,n){return e.prototype.setVisibility.call(this,t,!0),this.lineBuffer&&this.lineBuffer.setVisibility(this.lineVisible&&this.visible),this.planeBuffer&&this.planeBuffer.setVisibility(this.planeVisible&&this.visible),this.sectorBuffer&&this.sectorBuffer.setVisibility(this.sectorVisible&&this.visible),n||this.viewer.requestRender(),this},t}(Rv);ml.add("dihedral",by);var xy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="distance",this.parameters=Object.assign({radialSegments:!0,openEnded:!0,disableImpostor:!0,labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},useCylinder:{type:"boolean",rebuild:!0},atomPair:{type:"hidden",rebuild:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.linewidth=Sa(n.linewidth,5),n.radiusType=Sa(n.radiusType,"size"),n.radiusSize=Sa(n.radiusSize,.2),this.labelUnit=Sa(n.labelUnit,""),this.useCylinder=Sa(n.useCylinder,!1),this.atomPair=Sa(n.atomPair,[]),e.prototype.init.call(this,n)},t.prototype.getDistanceData=function(e,t){var n=this,r=t.length,i=new Array(r),o=new Float32Array(3*r),a=new zs,s=new zs,l=new hh,u=e.getAtomProxy(),c=e.getAtomProxy(),d=0,f=e.getAtomSet();t.forEach((function(t,r){var p=t[0],h=t[1];if("number"===typeof p&&Number.isInteger(p)&&"number"===typeof h&&Number.isInteger(h)){if(!f.get(p)||!f.get(h))return void(d+=1);u.index=p,c.index=h}else{a.setString(p),s.setString(h);var m=e.getAtomIndices(a),g=e.getAtomIndices(s);if(!m.length||!g.length)return void(d+=1);u.index=m[0],c.index=g[0]}l.addBond(u,c,1),r-=d;var v=u.distanceTo(c);switch(n.labelUnit){case"angstrom":i[r]=v.toFixed(2)+" "+String.fromCharCode(8491);break;case"nm":i[r]=(v/10).toFixed(2)+" nm";break;default:i[r]=v.toFixed(2)}var y=3*r;o[y+0]=(u.x+c.x)/2,o[y+1]=(u.y+c.y)/2,o[y+2]=(u.z+c.z)/2})),d>0&&(r-=d,o=o.subarray(0,3*r));var p=new bd(l.count,!0);return{text:i,position:o,bondSet:p,bondStore:l}},t.prototype.getBondData=function(e,t,n){var r=e.getBondData(this.getBondParams(t,n));return r.picking&&(r.picking=new Ff(r.picking.array,r.picking.structure,n.bondStore)),r},t.prototype.createData=function(e){if(e.atomCount&&this.atomPair.length){var t=this.atomPair.length,n=new ie(this.labelColor),r=this.getDistanceData(e,this.atomPair);this.textBuffer=new Uv({position:r.position,size:ou(t,this.labelSize),color:au(t,n.r,n.g,n.b),text:r.text},this.getLabelBufferParams());var i={bondSet:r.bondSet,bondStore:r.bondStore},o=this.getBondData(e,{position:!0,color:!0,picking:!0,radius:this.useCylinder},i);return this.useCylinder?this.distanceBuffer=new ay(o,this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})):this.distanceBuffer=new Wv(Qc(o),this.getBufferParams({linewidth:this.linewidth,visible:this.lineVisible,opacity:this.lineOpacity})),{bondSet:r.bondSet,bondStore:r.bondStore,position:r.position,bufferList:[this.textBuffer,this.distanceBuffer]}}},t.prototype.updateData=function(t,n){e.prototype.updateData.call(this,t,n);var r={bondSet:n.bondSet,bondStore:n.bondStore},i=this.getBondData(n.sview,t,r),o={};t&&!t.color||Object.assign(o,{color:i.color,color2:i.color2}),t&&!t.radius||Object.assign(o,{radius:i.radius}),this.distanceBuffer.setAttributes(o)},t.prototype.setParameters=function(t){return e.prototype.setParameters.call(this,t,{},!1),this.useCylinder||(t&&t.lineOpacity&&this.distanceBuffer.setParameters({opacity:t.lineOpacity}),t&&void 0!==t.opacity&&this.distanceBuffer.setParameters({opacity:this.lineOpacity}),t&&t.linewidth&&this.distanceBuffer.setParameters({linewidth:t.linewidth})),this},t}(Rv);function wy(e){return 2*(e.position.length/3)*3}ml.add("distance",xy);var _y=Object.assign({scale:1,color:"grey"},Tp),Sy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(wy(t)),color:new Float32Array(wy(t))},n),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag";var r=new ie(this.parameters.color),i=this.geometry.attributes;au(wy(t)/3,r.r,r.g,r.b,i.color.array),this.setAttributes(t)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return _y},t.prototype.setAttributes=function(e){void 0===e&&(e={});var t,n,r,i=this.geometry.attributes;e.position&&e.vector&&(t=e.position,n=e.vector,r=i.position.array,i.position.needsUpdate=!0);var o=this.size/2,a=this.parameters.scale;if(t&&n)for(var s=0;s<o;s++){var l=2*s*3,u=3*s;r[l+0]=t[u+0],r[l+1]=t[u+1],r[l+2]=t[u+2],r[l+3]=t[u+0]+n[u+0]*a,r[l+4]=t[u+1]+n[u+1]*a,r[l+5]=t[u+2]+n[u+2]*a}},Object.defineProperties(t.prototype,n),t}(Ip),Cy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="helixorient",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"sstruc"),n.radiusType=Sa(n.radiusType,"size"),n.radiusSize=Sa(n.radiusSize,.15),n.radiusScale=Sa(n.radiusScale,1),n.useInteriorColor=Sa(n.useInteriorColor,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){var t=this,n=[],r=[];return this.structure.eachPolymer((function(e){if(!(e.residueCount<4)){r.push(e);var i=new bh(e),o=i.getPosition(),a=i.getColor(t.getColorParams()),s=i.getSize(t.getRadiusParams()),l=i.getPicking();n.push(new Wm({position:o.center,color:a.color,radius:s.size,picking:l.picking},t.getBufferParams({sphereDetail:t.sphereDetail,disableImpostor:t.disableImpostor,dullInterior:!0})),new Sy({position:o.center,vector:o.axis},t.getBufferParams({color:"skyblue",scale:1})),new Sy({position:o.center,vector:o.resdir},t.getBufferParams({color:"lightgreen",scale:1})))}}),e.getSelection()),{bufferList:n,polymerList:r}},t.prototype.updateData=function(e,t){sl&&rl.time(this.type+" repr update"),e=e||{};for(var n=0,r=t.polymerList.length;n<r;++n){var i=3*n,o={},a=t.polymerList[n],s=new bh(a);if(e.position){var l=s.getPosition();Object.assign(o,{position:l.center}),t.bufferList[i+1].setAttributes({position:l.center,vector:l.axis}),t.bufferList[i+2].setAttributes({position:l.center,vector:l.resdir})}t.bufferList[i].setAttributes(o)}sl&&rl.timeEnd(this.type+" repr update")},t}(Tv);ml.add("helixorient",Cy);var Ey=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="licorice",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=1,e.prototype.init.call(this,n)},t}(ly);ml.add("licorice",Ey),vl.add("shader/HyperballStickImpostor.vert","\nattribute vec3 mapping;\nattribute float radius;\nattribute float radius2;\nattribute vec3 position1;\nattribute vec3 position2;\nvarying mat4 matrix_near;\nvarying vec4 prime1;\nvarying vec4 prime2;\nvarying float vRadius;\nvarying float vRadius2;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\nattribute vec3 color2;\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#endif\nuniform float shrink;\nuniform mat4 modelViewProjectionMatrix;\nuniform mat4 modelViewProjectionMatrixInverse;\nvoid main(){\nvRadius = radius;\nvRadius2 = radius2;\nvec4 spaceposition;\nvec3 position_atom1;\nvec3 position_atom2;\nvec4 vertex_position;\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\nvColor1 = color;\nvColor2 = color2;\n#endif\nfloat radius1 = radius;\nposition_atom1 = position1;\nposition_atom2 = position2;\nfloat distance = distance( position_atom1, position_atom2 );\nspaceposition.z = mapping.z * distance;\nif (radius1 > radius2) {\nspaceposition.y = mapping.y * 1.5 * radius1;\nspaceposition.x = mapping.x * 1.5 * radius1;\n} else {\nspaceposition.y = mapping.y * 1.5 * radius2;\nspaceposition.x = mapping.x * 1.5 * radius2;\n}\nspaceposition.w = 1.0;\nvec4 e3 = vec4( 1.0 );\nvec3 e1, e1_temp, e2, e2_temp;\ne3.xyz = normalize(position_atom1-position_atom2);\nif (e3.z == 0.0) { e3.z = 0.0000000000001;}\nif ( (position_atom1.x - position_atom2.x) == 0.0) { position_atom1.x += 0.001;}\nif ( (position_atom1.y - position_atom2.y) == 0.0) { position_atom1.y += 0.001;}\nif ( (position_atom1.z - position_atom2.z) == 0.0) { position_atom1.z += 0.001;}\nvec4 focus = vec4( 1.0 );\nfocus.x = ( position_atom1.x*position_atom1.x - position_atom2.x*position_atom2.x +\n( radius2*radius2 - radius1*radius1 )*e3.x*e3.x/shrink )/(2.0*(position_atom1.x - position_atom2.x));\nfocus.y = ( position_atom1.y*position_atom1.y - position_atom2.y*position_atom2.y +\n( radius2*radius2 - radius1*radius1 )*e3.y*e3.y/shrink )/(2.0*(position_atom1.y - position_atom2.y));\nfocus.z = ( position_atom1.z*position_atom1.z - position_atom2.z*position_atom2.z +\n( radius2*radius2 - radius1*radius1 )*e3.z*e3.z/shrink )/(2.0*(position_atom1.z - position_atom2.z));\ne1.x = 1.0;\ne1.y = 1.0;\ne1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;\ne1_temp = e1 - focus.xyz;\ne1 = normalize(e1_temp);\ne2_temp = e1.yzx * e3.zxy - e1.zxy * e3.yzx;\ne2 = normalize(e2_temp);\nmat3 R= mat3( e1.xyz, e2.xyz, e3.xyz );\nvertex_position.xyz = R * spaceposition.xyz;\nvertex_position.w = 1.0;\nvertex_position.x += (position_atom1.x+position_atom2.x) / 2.0;\nvertex_position.y += (position_atom1.y+position_atom2.y) / 2.0;\nvertex_position.z += (position_atom1.z+position_atom2.z) / 2.0;\ngl_Position = modelViewProjectionMatrix * vertex_position;\nvec4 i_near, i_far;\nvec4 near = gl_Position;\nnear.z = 0.0 ;\nnear = modelViewProjectionMatrixInverse * near;\ni_near = near;\nvec4 far = gl_Position;\nfar.z = far.w ;\ni_far = modelViewProjectionMatrixInverse * far;\nprime1 = vec4( position_atom1 - (position_atom1 - focus.xyz)*shrink, 1.0 );\nprime2 = vec4( position_atom2 - (position_atom2 - focus.xyz)*shrink, 1.0 );\nfloat Rsquare = (radius1*radius1/shrink) - (\n(position_atom1.x - focus.x)*(position_atom1.x - focus.x) +\n(position_atom1.y - focus.y)*(position_atom1.y - focus.y) +\n(position_atom1.z - focus.z)*(position_atom1.z - focus.z)\n);\nfocus.w = Rsquare;\nmatrix_near = mat4( i_near, i_far, focus, e3 );\ngl_Position.z = 1.0;\n}"),vl.add("shader/HyperballStickImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 interiorColor;\nuniform float interiorDarkening;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float clipNear;\nuniform float shrink;\nuniform mat4 modelViewMatrix;\nuniform mat4 modelViewProjectionMatrix;\nuniform mat4 modelViewMatrixInverseTranspose;\nuniform mat4 projectionMatrix;\nvarying mat4 matrix_near;\nvarying vec4 prime1;\nvarying vec4 prime2;\nvarying float vRadius;\nvarying float vRadius2;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#include common\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars_begin\n#include lights_physical_pars_fragment\n#endif\nbool interior = false;\nfloat calcClip( vec4 cameraPos ){\nreturn dot( cameraPos, vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );\n}\nfloat calcClip( vec3 cameraPos ){\nreturn calcClip( vec4( cameraPos, 1.0 ) );\n}\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nstruct Ray {\nvec3 origin ;\nvec3 direction ;\n};\nbool cutoff_plane (vec3 M, vec3 cutoff, vec3 x3){\nfloat a = x3.x;\nfloat b = x3.y;\nfloat c = x3.z;\nfloat d = -x3.x*cutoff.x-x3.y*cutoff.y-x3.z*cutoff.z;\nfloat l = a*M.x+b*M.y+c*M.z+d;\nif (l<0.0) {return true;}\nelse{return false;}\n}\nvec3 isect_surf(Ray r, mat4 matrix_coef){\nvec4 direction = vec4(r.direction, 0.0);\nvec4 origin = vec4(r.origin, 1.0);\nfloat a = dot(direction,(matrix_coef*direction));\nfloat b = dot(origin,(matrix_coef*direction));\nfloat c = dot(origin,(matrix_coef*origin));\nfloat delta =b*b-a*c;\ngl_FragColor.a = 1.0;\nif (delta<0.0){\ndiscard;\n}\nfloat t1 =(-b-sqrt(delta))/a;\nreturn r.origin+t1*r.direction;\n}\nvec3 isect_surf2(Ray r, mat4 matrix_coef){\nvec4 direction = vec4(r.direction, 0.0);\nvec4 origin = vec4(r.origin, 1.0);\nfloat a = dot(direction,(matrix_coef*direction));\nfloat b = dot(origin,(matrix_coef*direction));\nfloat c = dot(origin,(matrix_coef*origin));\nfloat delta =b*b-a*c;\ngl_FragColor.a = 1.0;\nif (delta<0.0){\ndiscard;\n}\nfloat t2 =(-b+sqrt(delta))/a;\nreturn r.origin+t2*r.direction;\n}\nRay primary_ray(vec4 near1, vec4 far1){\nvec3 near=near1.xyz/near1.w;\nvec3 far=far1.xyz/far1.w;\nreturn Ray(near,far-near);\n}\nfloat update_z_buffer(vec3 M, mat4 ModelViewP){\nfloat depth1;\nvec4 Ms=(ModelViewP*vec4(M,1.0));\nreturn depth1=(1.0+Ms.z/Ms.w)/2.0;\n}\nvoid main(){\nfloat radius = max( vRadius, vRadius2 );\nvec4 i_near, i_far, focus;\nvec3 e3, e1, e1_temp, e2;\ni_near = vec4(matrix_near[0][0],matrix_near[0][1],matrix_near[0][2],matrix_near[0][3]);\ni_far = vec4(matrix_near[1][0],matrix_near[1][1],matrix_near[1][2],matrix_near[1][3]);\nfocus = vec4(matrix_near[2][0],matrix_near[2][1],matrix_near[2][2],matrix_near[2][3]);\ne3 = vec3(matrix_near[3][0],matrix_near[3][1],matrix_near[3][2]);\ne1.x = 1.0;\ne1.y = 1.0;\ne1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;\ne1_temp = e1 - focus.xyz;\ne1 = normalize(e1_temp);\ne2 = normalize(cross(e1,e3));\nvec4 equation = focus;\nfloat shrinkfactor = shrink;\nfloat t1 = -1.0/(1.0-shrinkfactor);\nfloat t2 = 1.0/(shrinkfactor);\nvec4 colonne1, colonne2, colonne3, colonne4;\nmat4 mat;\nvec3 equation1 = vec3(t2,t2,t1);\nfloat A1 = - e1.x*equation.x - e1.y*equation.y - e1.z*equation.z;\nfloat A2 = - e2.x*equation.x - e2.y*equation.y - e2.z*equation.z;\nfloat A3 = - e3.x*equation.x - e3.y*equation.y - e3.z*equation.z;\nfloat A11 = equation1.x*e1.x*e1.x + equation1.y*e2.x*e2.x + equation1.z*e3.x*e3.x;\nfloat A21 = equation1.x*e1.x*e1.y + equation1.y*e2.x*e2.y + equation1.z*e3.x*e3.y;\nfloat A31 = equation1.x*e1.x*e1.z + equation1.y*e2.x*e2.z + equation1.z*e3.x*e3.z;\nfloat A41 = equation1.x*e1.x*A1 + equation1.y*e2.x*A2 + equation1.z*e3.x*A3;\nfloat A22 = equation1.x*e1.y*e1.y + equation1.y*e2.y*e2.y + equation1.z*e3.y*e3.y;\nfloat A32 = equation1.x*e1.y*e1.z + equation1.y*e2.y*e2.z + equation1.z*e3.y*e3.z;\nfloat A42 = equation1.x*e1.y*A1 + equation1.y*e2.y*A2 + equation1.z*e3.y*A3;\nfloat A33 = equation1.x*e1.z*e1.z + equation1.y*e2.z*e2.z + equation1.z*e3.z*e3.z;\nfloat A43 = equation1.x*e1.z*A1 + equation1.y*e2.z*A2 + equation1.z*e3.z*A3;\nfloat A44 = equation1.x*A1*A1 + equation1.y*A2*A2 + equation1.z*A3*A3 - equation.w;\ncolonne1 = vec4(A11,A21,A31,A41);\ncolonne2 = vec4(A21,A22,A32,A42);\ncolonne3 = vec4(A31,A32,A33,A43);\ncolonne4 = vec4(A41,A42,A43,A44);\nmat = mat4(colonne1,colonne2,colonne3,colonne4);\nRay ray = primary_ray(i_near,i_far) ;\nvec3 M;\nM = isect_surf(ray, mat);\nif (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }\nvec4 M1 = vec4(M,1.0);\nvec4 M2 = mat*M1;\nvec3 _normal = ( modelViewMatrixInverseTranspose * M2 ).xyz;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\n#ifdef NEAR_CLIP\nif( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 ){\nM = isect_surf2(ray, mat);\nif( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 )\ndiscard;\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / radius ) );\n}\n}else if( gl_FragDepthEXT <= 0.0 ){\nM = isect_surf2(ray, mat);\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix);\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );\n}\n}\n#else\nif( gl_FragDepthEXT <= 0.0 ){\nM = isect_surf2(ray, mat);\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );\n}\n}\n#endif\nif (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\nfloat distance_ratio = ((M.x-prime2.x)*e3.x + (M.y-prime2.y)*e3.y +(M.z-prime2.z)*e3.z) /\ndistance(prime2.xyz,prime1.xyz);\n#ifdef PICKING\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vViewPosition = -( modelViewMatrix * vec4( M, 1.0 ) ).xyz;\nvec3 vNormal = _normal;\nvec3 vColor;\nif( distance_ratio>0.5 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\nvec3 normal = normalize( vNormal );\n#include lights_physical_fragment\n#include lights_fragment_begin\n#include lights_fragment_end\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\nif( interior ){\n#ifdef USE_INTERIOR_COLOR\noutgoingLight.xyz = interiorColor;\n#else\n#ifdef DIFFUSE_INTERIOR\noutgoingLight.xyz = vColor;\n#endif\n#endif\noutgoingLight.xyz *= 1.0 - interiorDarkening;\n}\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var ky=new Float32Array([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1]),Py=new Uint16Array([0,1,2,0,2,3,1,5,6,1,6,2,4,6,5,4,7,6,0,7,4,0,3,7,0,5,1,0,4,5,3,2,6,3,6,7]),My=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"v3",t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return ky},n.mappingIndices.get=function(){return Py},n.mappingIndicesSize.get=function(){return 36},n.mappingSize.get=function(){return 8},n.mappingItemSize.get=function(){return 3},Object.defineProperties(t.prototype,n),t}(jm),Ay=Object.assign({shrink:.14},Tp),Ty=Object.assign({shrink:{uniform:!0}},Rp),Ry=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parameterTypes=Ty,this.isImpostor=!0,this.vertexShader="HyperballStickImpostor.vert",this.fragmentShader="HyperballStickImpostor.frag",this.addUniforms({modelViewProjectionMatrix:{value:new j},modelViewProjectionMatrixInverse:{value:new j},modelViewMatrixInverseTranspose:{value:new j},shrink:{value:this.parameters.shrink}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null},radius2:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Ay},Object.defineProperties(t.prototype,n),t}(My),Iy=(Object.assign({disableImpostor:!1},Zv,Ay),function(e,t){return void 0===t&&(t={}),!nl||t&&t.disableImpostor?(e.radius=function(e,t){for(var n=e.length,r=new Float32Array(n),i=0;i<n;i++)r[i]=Math.min(e[i],t[i]);return r}(e.radius,e.radius2),new Jv(e,t)):new Ry(e,t)}),Oy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="hyperball",this.parameters=Object.assign({shrink:{type:"number",precision:3,max:1,min:.001,buffer:!0}},this.parameters,{multipleBond:null,bondSpacing:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.radiusScale=Sa(n.radiusScale,.2),n.radiusType=Sa(n.radiusType,"vdw"),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.shrink=Sa(n.shrink,.12),e.prototype.init.call(this,n)},t.prototype.getBondParams=function(t,n){return t&&!t.radius||(n=Object.assign({radius2:!0},n)),e.prototype.getBondParams.call(this,t,n)},t.prototype.createData=function(e){var t=new Wm(e.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));return this.__center=new Float32Array(3*e.bondCount),{bufferList:[t,new Iy(e.getBondData(this.getBondParams()),this.getBufferParams({shrink:this.shrink,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))]}},t.prototype.updateData=function(e,t){var n=t.sview.getAtomData(this.getAtomParams()),r=t.sview.getBondData(this.getBondParams()),i={},o={};if(!e||e.position){Object.assign(i,{position:n.position});var a=r.position1,s=r.position2;Object.assign(o,{position:ru(a,s,this.__center),position1:a,position2:s})}e&&!e.color||(Object.assign(i,{color:n.color}),Object.assign(o,{color:r.color,color2:r.color2})),e&&!e.radius||(Object.assign(i,{radius:n.radius}),Object.assign(o,{radius:r.radius,radius2:r.radius2})),t.bufferList[0].setAttributes(i),t.bufferList[1].setAttributes(o)},t}(Ey);ml.add("hyperball",Oy);var Ly=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=""),this.type=e,this.text=t,this.format=n};Ly.prototype.atomLabel=function(e){var t;switch(this.type){case"atomname":t=e.atomname;break;case"atomindex":t=""+e.index;break;case"occupancy":t=e.occupancy.toFixed(2);break;case"bfactor":t=e.bfactor.toFixed(2);break;case"serial":t=""+e.serial;break;case"element":t=e.element;break;case"atom":t=e.atomname+"|"+e.index;break;case"resname":t=e.resname;break;case"resno":t=""+e.resno;break;case"res":t=""+(zd[e.resname.toUpperCase()]||e.resname)+e.resno;break;case"residue":var n=zd[e.resname.toUpperCase()];t=n&&!e.inscode?""+n+e.resno:"["+e.resname+"]"+e.resno+e.inscode;break;case"text":t=this.text[e.index];break;case"format":t=Dl(this.format,e);break;default:t=e.qualifiedName()}return void 0===t?"":t},Ly.types={"":"",atomname:"atom name",atomindex:"atom index",occupancy:"occupancy",bfactor:"b-factor",serial:"serial",element:"element",atom:"atom name + index",resname:"residue name",resno:"residue no",res:"one letter code + no",residue:"[residue name] + no + inscode",text:"text",format:"format",qualified:"qualified name"};var Dy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="label",this.parameters=Object.assign({labelType:{type:"select",options:Ly.types,rebuild:!0},labelText:{type:"hidden",rebuild:!0},labelFormat:{type:"text",rebuild:!0},labelGrouping:{type:"select",options:{atom:"atom",residue:"residue"},rebuild:!0},fontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:!0},fontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:!0},fontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:!0},xOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},yOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},zOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},attachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},showBorder:{type:"boolean",buffer:!0},borderColor:{type:"color",buffer:!0},borderWidth:{type:"number",precision:2,max:.3,min:0,buffer:!0},showBackground:{type:"boolean",rebuild:!0},backgroundColor:{type:"color",buffer:!0},backgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},backgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:!0},fixedSize:{type:"boolean",buffer:!0}},this.parameters,{side:null,flatShaded:null,wireframe:null,linewidth:null,roughness:null,metalness:null,diffuse:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};this.labelType=Sa(n.labelType,"res"),this.labelText=Sa(n.labelText,{}),this.labelFormat=Sa(n.labelFormat,""),this.labelGrouping=Sa(n.labelGrouping,"atom"),this.fontFamily=Sa(n.fontFamily,"sans-serif"),this.fontStyle=Sa(n.fontStyle,"normal"),this.fontWeight=Sa(n.fontWeight,"bold"),this.xOffset=Sa(n.xOffset,0),this.yOffset=Sa(n.yOffset,0),this.zOffset=Sa(n.zOffset,.5),this.attachment=Sa(n.attachment,"bottom-left"),this.showBorder=Sa(n.showBorder,!1),this.borderColor=Sa(n.borderColor,"lightgrey"),this.borderWidth=Sa(n.borderWidth,.15),this.showBackground=Sa(n.showBackground,!1),this.backgroundColor=Sa(n.backgroundColor,"lightgrey"),this.backgroundMargin=Sa(n.backgroundMargin,.5),this.backgroundOpacity=Sa(n.backgroundOpacity,1),this.fixedSize=Sa(n.fixedSize,!1),e.prototype.init.call(this,n)},t.prototype.getTextData=function(e,t){var n,r,i,o,a,s,l,u=this.getAtomParams(t),c=new Ly(this.labelType,this.labelText,this.labelFormat);if("atom"===this.labelGrouping){var d=e.getAtomData(u);n=d.position,r=d.radius,i=d.color,t&&!t.text||(o=[],e.eachAtom((function(e){return o.push(c.atomLabel(e))})))}else if("residue"===this.labelGrouping){t&&!t.position||(a=[]),t&&!t.color||(l=[]),t&&!t.radius||(s=[]),t&&!t.text||(o=[]),u.colorParams&&(u.colorParams.structure=e.getStructure());var f=pl.getScheme(u.colorParams),p=new sh(u.radiusParams),h=e.getAtomProxy(),m=0;e.eachResidue((function(e){var n=3*m;e.isProtein()||e.isNucleic()?(h.index=e.traceAtomIndex,t&&!t.position||h.positionToArray(a,n)):(h.index=e.atomOffset,t&&!t.position||e.positionToArray(a,n)),t&&!t.color||f.atomColorToArray(h,l,n),t&&!t.radius||(s[m]=p.atomRadius(h)),t&&!t.text||o.push(c.atomLabel(h)),++m})),t&&!t.position||(n=new Float32Array(a)),t&&!t.color||(i=new Float32Array(l)),t&&!t.radius||(r=new Float32Array(s))}return{position:n,size:r,color:i,text:o}},t.prototype.createData=function(e){return{bufferList:[new Uv(this.getTextData(e,{position:!0,color:!0,radius:!0,text:!0}),this.getBufferParams({fontFamily:this.fontFamily,fontStyle:this.fontStyle,fontWeight:this.fontWeight,xOffset:this.xOffset,yOffset:this.yOffset,zOffset:this.zOffset,attachment:this.attachment,showBorder:this.showBorder,borderColor:this.borderColor,borderWidth:this.borderWidth,showBackground:this.showBackground,backgroundColor:this.backgroundColor,backgroundMargin:this.backgroundMargin,backgroundOpacity:this.backgroundOpacity,fixedSize:this.fixedSize}))]}},t.prototype.updateData=function(e,t){t.bufferList[0].setAttributes(this.getTextData(t.sview,e))},t.prototype.getAtomRadius=function(){return 0},t}(Tv);function Fy(e){var t=e.getAtomSet(),n=e.getBondSet(),r=e.getBondProxy();return n.forEach((function(e){r.index=e,t.clear(r.atomIndex1),t.clear(r.atomIndex2)})),t}ml.add("label",Dy);var Ny=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="line",this.parameters=Object.assign({multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondSpacing:{type:"number",precision:2,max:2,min:.5},linewidth:{type:"integer",max:50,min:1,buffer:!0},lines:{type:"boolean",rebuild:!0},crosses:{type:"select",rebuild:!0,options:{off:"off",lone:"lone",all:"all"}},crossSize:{type:"number",precision:2,max:2,min:.1}},this.parameters,{flatShaded:null,side:null,wireframe:null,roughness:null,metalness:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};this.multipleBond=Sa(n.multipleBond,"off"),this.bondSpacing=Sa(n.bondSpacing,1),this.linewidth=Sa(n.linewidth,2),this.lines=Sa(n.lines,!0),this.crosses=Sa(n.crosses,"lone"),this.crossSize=Sa(n.crossSize,.4),e.prototype.init.call(this,n)},t.prototype.getAtomRadius=function(e){return.1},t.prototype.getBondParams=function(t,n){return n=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,radiusParams:{type:"size",size:.1,scale:1}},n),e.prototype.getBondParams.call(this,t,n)},t.prototype._crossData=function(e,t){if(!e||e.position||e.color){var n={};"lone"===this.crosses&&Object.assign(n,{atomSet:Fy(t)});var r,i=t.getAtomData(this.getAtomParams(e,n)),o={},a=i.position,s=i.color,l=i.picking,u=(a||s).length,c=3*u,d=new Float32Array(0),f=new Float32Array(0),p=new Float32Array(0),h=new Float32Array(0),m=new Float32Array(0);e&&!e.position||(d=o.position1=new Float32Array(c),f=o.position2=new Float32Array(c),r=this.crossSize/2),e&&!e.color||(p=o.color=new Float32Array(c),h=o.color2=new Float32Array(c)),e&&!e.picking||(m=new Float32Array(3*i.picking.array.length));for(var g=0;g<u;g++){var v=3*g,y=3*v;if(!e||e.position){var b=a[v],x=a[v+1],w=a[v+2];d[y]=b-r,d[y+1]=x,d[y+2]=w,f[y]=b+r,f[y+1]=x,f[y+2]=w,d[y+3]=b,d[y+4]=x-r,d[y+5]=w,f[y+3]=b,f[y+4]=x+r,f[y+5]=w,d[y+6]=b,d[y+7]=x,d[y+8]=w-r,f[y+6]=b,f[y+7]=x,f[y+8]=w+r}if(!e||e.color)for(var _=y+9,S=y;S<_;S+=3)p[S]=h[S]=s[v],p[S+1]=h[S+1]=s[v+1],p[S+2]=h[S+2]=s[v+2];e&&!e.picking||(m[v]=m[v+1]=m[v+2]=l.array[g])}return e&&!e.picking||(o.picking=new Tf(m,l.structure)),o}},t.prototype.createData=function(e){var t={position:!0,color:!0,picking:!0},n=[];if(this.lines){var r=e.getBondData(this.getBondParams(t)),i=new Wv(r,this.getBufferParams({linewidth:this.linewidth}));n.push(i)}if("off"!==this.crosses){var o=new Wv(this._crossData(t,e),this.getBufferParams({linewidth:this.linewidth}));n.push(o)}return{bufferList:n}},t.prototype.updateData=function(e,t){var n=0;if(this.lines){var r=t.sview.getBondData(this.getBondParams(e)),i={};e&&!e.position||Object.assign(i,{position1:r.position1,position2:r.position2}),e&&!e.color||Object.assign(i,{color:r.color,color2:r.color2}),t.bufferList[n++].setAttributes(i)}if("off"!==this.crosses){var o=this._crossData(e,t.sview),a={};e&&!e.position||Object.assign(a,{position1:o.position1,position2:o.position2}),e&&!e.color||Object.assign(a,{color:o.color,color2:o.color2}),t.bufferList[n++].setAttributes(a)}},t.prototype.setParameters=function(t){var n={};return t&&(t.bondSpacing||t.crossSize)&&Object.assign(n,{position:!0}),e.prototype.setParameters.call(this,t,n,!1),this},t}(Tv);function By(e,t,n,r,i){var o=new(r=r||Int32Array)(e*t*n*(i=i||1));function a(e,r,o){return((e*t+r)*n+o)*i}return{data:o,index:a,set:function(e,t,n){for(var r=[],s=arguments.length-3;s-- >0;)r[s]=arguments[s+3];for(var l=a(e,t,n),u=0;u<i;++u)o[l+u]=r[u]},toArray:function(e,t,n,r,s){void 0===r&&(r=[]),void 0===s&&(s=0);for(var l=a(e,t,n),u=0;u<i;++u)r[s+u]=o[l+u]},fromArray:function(e,t,n,r,s){void 0===s&&(s=0);for(var l=a(e,t,n),u=0;u<i;++u)o[l+u]=r[s+u]},copy:function(e){o.set(e.data)}}}function zy(e,t,n){var r=xp(t),i=Rc(e);0===e.length&&(i[0].set([0,0,0]),i[1].set([0,0,0]));var o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x=i[0],w=i[1];function _(e,t,n,i,_){o=t||1.4,a=n||2,g=_||!0;var S=0;for(var E in r)S=Math.max(S,E);var k=wp(x,w,S,a,e?o:0);l=k.dim[0],u=k.dim[1],c=k.dim[2],d=k.matrix,f=k.tran,a=k.scaleFactor,p={},h={},C(e),m=o*a,s=i||o/a,v=new Uint8Array(l*u*c),e&&(y=new Float64Array(l*u*c)),g&&(b=new Int32Array(l*u*c))}var S=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];function C(e){var t,n,i,s,l,u,c,d,f,m;for(var g in r)if(t=parseFloat(g),!p[g]){for(u=(c=e?(t+o)*a+.5:t*a+.5)*c,d=Math.floor(c)+1,f=new Int32Array(d*d),m=0,n=0;n<d;++n)for(i=0;i<d;++i)(s=n*n+i*i)>u?f[m]=-1:(l=Math.sqrt(u-s),f[m]=Math.floor(l)),++m;h[g]=d,p[g]=f}}function E(n){var r,i,o,s,d,m,y,x,w,_,S,C,E,k,P,M,A,T,R=3*n,I=n;r=Math.floor(.5+a*(e[R]+f[0])),i=Math.floor(.5+a*(e[R+1]+f[1])),o=Math.floor(.5+a*(e[R+2]+f[2]));var O,L=t[I],D=p[L],F=0,N=u*c,B=h[L];for(_=0;_<B;++_)for(S=0;S<B;++S){if(-1!==(O=D[F]))for(M=-1;M<2;++M)for(A=-1;A<2;++A)for(T=-1;T<2;++T)if(0!==M&&0!==A&&0!==T)for(y=M*_,w=T*S,C=0;C<=O;++C)if(k=i+(x=C*A),P=o+w,!((E=r+y)<0||k<0||P<0||E>=l||k>=u||P>=c)){var z=E*N+k*c+P;if(g)if(1&v[z]){if(1&v[z]){var j=b[z];j!==R&&y*y+x*x+w*w<(s=r+y-Math.floor(.5+a*(e[j]+f[0])))*s+(d=i+x-Math.floor(.5+a*(e[j+1]+f[1])))*d+(m=o+w-Math.floor(.5+a*(e[j+2]+f[2])))*m&&(b[z]=n)}}else v[z]|=1,b[z]=n;else v[z]|=1}F++}}function k(t){var n,r;for(console.time("EDTSurface fillvoxels"),n=0,r=v.length;n<r;++n)v[n]=0,t&&(y[n]=-1),g&&(b[n]=-1);for(n=0,r=e.length/3;n<r;++n)E(n);for(n=0,r=v.length;n<r;++n)1&v[n]&&(v[n]|=2);console.timeEnd("EDTSurface fillvoxels")}function P(n){var r,i,o,s,d,m,y,x,w,_,S,C,E,k,P,M,A,T,R,I=3*n,O=n,L=0;r=Math.floor(.5+a*(e[I]+f[0])),i=Math.floor(.5+a*(e[I+1]+f[1])),o=Math.floor(.5+a*(e[I+2]+f[2]));var D=t[O],F=u*c;for(E=0,R=h[D];E<R;++E)for(k=0;k<R;++k){if(-1!==p[D][L])for(M=-1;M<2;++M)for(A=-1;A<2;++A)for(T=-1;T<2;++T)if(0!==M&&0!==A&&0!==T)for(y=M*E,w=T*k,P=0;P<=p[D][L];++P)if(S=i+(x=P*A),C=o+w,!((_=r+y)<0||S<0||C<0||_>=l||S>=u||C>=c)){var N=_*F+S*c+C;if(2&v[N]){if(g){var B=b[N];y*y+x*x+w*w<(s=Math.floor(.5+a*(e[B]+f[0])))*s+(d=Math.floor(.5+a*(e[B+1]+f[1])))*d+(m=Math.floor(.5+a*(e[B+2]+f[2])))*m&&(b[N]=n)}}else v[N]|=2,g&&(b[N]=n)}L++}}function M(){var e,t,n,r;console.time("EDTSurface fastdistancemap");var i,o=By(l,u,c,Uint16Array,3),a=u*c,d=m*m,f=0;for(e=0;e<l;++e)for(t=0;t<u;++t)for(n=0;n<c;++n)v[i=e*a+t*c+n]&=-3,1&v[i]&&4&v[i]&&(o.set(e,t,n,e,t,n),y[i]=0,v[i]|=2,f+=1);var p=new Int32Array(3*f),h=0,x=new Int32Array(3*f),w=0;for(e=0;e<l;++e)for(t=0;t<u;++t)for(n=0;n<c;++n)4&v[i=e*a+t*c+n]&&(p[h]=e,p[h+1]=t,p[h+2]=n,h+=3,v[i]&=-5);do{for(w=A(p,o,h,x),h=0,e=0,r=w;e<r;e+=3)i=a*x[e]+c*x[e+1]+x[e+2],v[i]&=-5,y[i]<=1.0404*d&&(p[h]=x[e],p[h+1]=x[e+1],p[h+2]=x[e+2],h+=3)}while(h>0);var _,S=s*s,C=new Uint16Array(3);for(e=0;e<l;++e)for(t=0;t<u;++t)for(n=0;n<c;++n)v[i=e*a+t*c+n]&=-5,1&v[i]&&(2&v[i]&&!(2&v[i]&&y[i]>=S)||(v[i]|=4,g&&2&v[i]&&(o.toArray(e,t,n,C),_=C[0]*a+C[1]*c+C[2],b[i]=b[_])));console.timeEnd("EDTSurface fastdistancemap")}function A(e,t,n,r){var i,o,a,s,d,f,p,h,m,g,b,x,w=new Uint16Array(3),_=0;if(0===n)return _;var C=-1,E=-1,k=-1,P=u*c;for(p=0,m=n;p<m;p+=3)for(i=e[p],o=e[p+1],a=e[p+2],t.toArray(i,o,a,w),h=0;h<6;++h)C=i+(x=S[h])[0],E=o+x[1],k=a+x[2],C<l&&C>-1&&E<u&&E>-1&&k<c&&k>-1&&(1&v[b=C*P+c*E+k]&&!(2&v[b])?(t.fromArray(C,E,k,w),g=(s=C-w[0])*s+(d=E-w[1])*d+(f=k-w[2])*f,y[b]=g,v[b]|=2,v[b]|=4,r[_]=C,r[_+1]=E,r[_+2]=k,_+=3):1&v[b]&&2&v[b]&&(g=(s=C-w[0])*s+(d=E-w[1])*d+(f=k-w[2])*f)<y[b]&&(t.fromArray(C,E,k,w),y[b]=g,4&v[b]||(v[b]|=4,r[_]=C,r[_+1]=E,r[_+2]=k,_+=3)));for(p=0,m=n;p<m;p+=3)for(i=e[p],o=e[p+1],a=e[p+2],t.toArray(i,o,a,w),h=6;h<18;h++)C=i+(x=S[h])[0],E=o+x[1],k=a+x[2],C<l&&C>-1&&E<u&&E>-1&&k<c&&k>-1&&(1&v[b=C*P+c*E+k]&&!(2&v[b])?(t.fromArray(C,E,k,w),g=(s=C-w[0])*s+(d=E-w[1])*d+(f=k-w[2])*f,y[b]=g,v[b]|=2,v[b]|=4,r[_]=C,r[_+1]=E,r[_+2]=k,_+=3):1&v[b]&&2&v[b]&&(g=(s=C-w[0])*s+(d=E-w[1])*d+(f=k-w[2])*f)<y[b]&&(t.fromArray(C,E,k,w),y[b]=g,4&v[b]||(v[b]|=4,r[_]=C,r[_+1]=E,r[_+2]=k,_+=3)));for(p=0,m=n;p<m;p+=3)for(i=e[p],o=e[p+1],a=e[p+2],t.toArray(i,o,a,w),h=18;h<26;h++)C=i+(x=S[h])[0],E=o+x[1],k=a+x[2],C<l&&C>-1&&E<u&&E>-1&&k<c&&k>-1&&(1&v[b=C*P+c*E+k]&&!(2&v[b])?(t.fromArray(C,E,k,w),g=(s=C-w[0])*s+(d=E-w[1])*d+(f=k-w[2])*f,y[b]=g,v[b]|=2,v[b]|=4,r[_]=C,r[_+1]=E,r[_+2]=k,_+=3):1&v[b]&&2&v[b]&&(g=(s=C-w[0])*s+(d=E-w[1])*d+(f=k-w[2])*f)<y[b]&&(t.fromArray(C,E,k,w),y[b]=g,4&v[b]||(v[b]|=4,r[_]=C,r[_+1]=E,r[_+2]=k,_+=3)));return _}this.getVolume=function(t,r,i,o,a){console.time("EDTSurface.getVolume");var s="vws"!==t;_(s,r,i,o,a),k(s),function(){var e,t,n,r=u*c;for(e=0;e<l;++e)for(t=0;t<c;++t)for(n=0;n<u;++n){var i=e*r+n*c+t;if(1&v[i])for(var o=0;o<26;){var a=e+S[o][0],s=t+S[o][2],d=n+S[o][1];if(a>-1&&a<l&&d>-1&&d<u&&s>-1&&s<c&&!(1&v[a*r+d*c+s])){v[i]|=4;break}o++}}}(),"ms"!==t&&"ses"!==t||M(),"ses"===t&&(C(!1),function(){var t,n;for(t=0,n=v.length;t<n;++t)v[t]&=-3;for(t=0,n=e.length/3;t<n;++t)P(t)}()),function(e){var t,n=v.length;if("vws"===e)for(t=0;t<n;++t)v[t]&=-5,v[t]=2&v[t]?1:0;else if("ms"===e)for(t=0;t<n;++t)v[t]&=-3,4&v[t]&&(v[t]|=2),v[t]&=-5,v[t]=2&v[t]?1:0;else if("ses"===e)for(t=0;t<n;++t)4&v[t]&&2&v[t]?v[t]&=-5:4&v[t]&&!(2&v[t])&&(v[t]|=2),v[t]=2&v[t]?1:0;else if("sas"===e)for(t=0;t<n;++t)v[t]&=-5,v[t]=2&v[t]?1:0}(t);for(var d=0,f=b.length;d<f;++d)b[d]=n[b[d]];return console.timeEnd("EDTSurface.getVolume"),{data:v,nx:c,ny:u,nz:l,atomindex:b}},this.getSurface=function(e,t,n,r,i,o,a){var s=this.getVolume(e,t,n,r,i);return new Cp(s.data,s.nx,s.ny,s.nz,s.atomindex).getSurface(1,o,void 0,d,a)}}function jy(e,t,n,r,i,o,a){var s=e.length,l=i[0],u=i[1],c=i[2],d=o[0],f=o[1],p=o[2];function h(e,t){return Math.floor((e-t)/a)}for(var m,g,v,y=h(d,l)+1,b=h(f,u)+1,x=h(p,c)+1,w=y*b*x,_=b*x,S=[],C=0;C<s;C++){var E=(m=e[C],g=t[C],v=n[C],(h(m,l)*b+h(g,u))*x+h(v,c));void 0===S[E]?S[E]=[C]:S[E].push(C)}var k=new Uint32Array(w),P=new Uint16Array(w),M=new Uint32Array(s),A=0,T=0;for(C=0;C<w;C++){var R=k[C]=A,I=S[C];if(void 0!==I)for(var O=0;O<I.length;O++)M[A]=I[O],A++;var L=A-R;P[C]=L,L>T&&(T=L)}return{neighbourListLength:27*T+1,withinRadii:function(i,o,a,s,d){for(var f=0,p=h(i,l),m=h(o,u),g=h(a,c),v=Math.max(0,p-1),w=Math.max(0,m-1),S=Math.max(0,g-1),C=Math.min(y,p+2),E=Math.min(b,m+2),A=Math.min(x,g+2),T=v;T<C;++T)for(var R=T*_,I=w;I<E;++I)for(var O=I*x,L=S;L<A;++L)for(var D=R+O+L,F=k[D],N=F+P[D],B=F;B<N;B++){var z=M[B],j=e[z]-i,H=t[z]-o,U=n[z]-a,V=r[z]+s;j*j+H*H+U*U<=V*V&&(d[f++]=M[B])}d[f]=-1}}}function Hy(e,t,n){for(var r=t.length,i=new Float32Array(r),o=new Float32Array(r),a=new Float32Array(r),s=0;s<r;s++){var l=3*s;i[s]=e[l],o[s]=e[l+1],a[s]=e[l+2]}var u=Rc(e);0===e.length&&(u[0].set([0,0,0]),u[1].set([0,0,0]));var c,d,f,p,h,m,g,v,y,b,x,w,_,S,C,E,k,P,M,A=u[0],T=u[1],R=-1,I=new Float32Array([0,0,0]),O=new Float32Array([0,0,0]),L=new Float32Array([0,0,0]),D=new Float32Array([0,0,0]);function F(e,n,s,l){p=Sa(e,1.4),h=Sa(n,2),m=Sa(s,!0),g=Sa(l,30),c=new Float32Array(r),d=new Float32Array(r);for(var u=0;u<c.length;++u){var I=t[u]+p;c[u]=I,d[u]=I*I}f=0;for(var O=0;O<c.length;++O)c[O]>f&&(f=c[O]);!function(){var e=wp(A,T,f,h,0);h=e.scaleFactor,v=e.dim,y=e.matrix,M=Math.max(5,2+Math.floor(p*h)),b=ou(v[0]*v[1]*v[2],-1001),x=new Int32Array(b.length),w=new Float32Array(v[0]),_=new Float32Array(v[1]),S=new Float32Array(v[2]),N(w,A[0],1/h),N(_,A[1],1/h),N(S,A[2],1/h)}(),function(){var e=0,t=2*Math.PI/g;E=new Float32Array(g),C=new Float32Array(g);for(var n=0;n<g;n++)E[n]=Math.cos(e),C[n]=Math.sin(e),e+=t}(),k=jy(i,o,a,c,A,T,2.01*f),P=new Int32Array(k.neighbourListLength),R=-1}function N(e,t,n){for(var r=0;r<e.length;r++)e[r]=t+n*r}function B(e,t,n,r,i){var o;if(-1!==R){if((o=R)!==r&&o!==i&&z(o,e,t,n))return o;R=-1}var a=0;for(o=P[a];o>=0;){if(o!==r&&o!==i&&z(o,e,t,n))return R=o,o;o=P[++a]}return R=-1,-1}function z(t,n,r,i){var o=3*t,a=d[t],s=e[o]-n,l=e[o+1]-r,u=e[o+2]-i;return s*s+l*l+u*u<a}function j(){for(var e=0;e<r;e++){var t=i[e],n=o[e],s=a[e],l=c[e],u=d[e];k.withinRadii(t,n,s,l,P);for(var f=Math.ceil(l*h),p=Math.floor(h*(t-A[0])),g=Math.floor(h*(n-A[1])),y=Math.floor(h*(s-A[2])),C=Math.max(0,p-f),E=Math.max(0,g-f),M=Math.max(0,y-f),T=Math.min(v[0],p+f+2),R=Math.min(v[1],g+f+2),I=Math.min(v[2],y+f+2),O=C;O<T;O++)for(var L=w[O]-t,D=v[1]*v[2]*O,F=E;F<R;F++)for(var N=_[F]-n,z=L*L+N*N,j=D+v[2]*F,H=M;H<I;H++){var U=S[H]-s,V=z+U*U;if(V<u){var G=H+j;b[G]<0&&(b[G]=-b[G]);var W=Math.sqrt(V),$=l/W,q=L*$,X=N*$,K=U*$;if(-1===B(q+=t,X+=n,K+=s,e,-1)){var Y=l-W;Y<b[G]&&(b[G]=Y,m&&(x[G]=e))}}}}}function H(e,t){var n=c[e],r=c[t],s=I[0]=i[t]-i[e],l=I[1]=o[t]-o[e],u=I[2]=a[t]-a[e],d=s*s+l*l+u*u,f=Math.sqrt(d),p=n*((n*n+f*f-r*r)/(2*n*f));Wc(I,I),function(e,t){e[0]=e[1]=e[2]=1,0!==t[0]?e[0]=(t[1]+t[2])/-t[0]:0!==t[1]?e[1]=(t[0]+t[2])/-t[1]:0!==t[2]&&(e[2]=(t[0]+t[1])/-t[2])}(L,I),Wc(L,L),Fc(D,I,L),Wc(D,D);var y=Math.sqrt(n*n-p*p);Gc(L,L,y),Gc(D,D,y),Gc(I,I,p),O[0]=I[0]+i[e],O[1]=I[1]+o[e],O[2]=I[2]+a[e],R=-1;for(var k=M,P=0;P<g;P++){var T=E[P],F=C[P],N=O[0]+T*L[0]+F*D[0],z=O[1]+T*L[1]+F*D[1],j=O[2]+T*L[2]+F*D[2];if(-1===B(N,z,j,e,t))for(var H=Math.floor(h*(N-A[0])),U=Math.floor(h*(z-A[1])),V=Math.floor(h*(j-A[2])),G=Math.max(0,H-k),W=Math.max(0,U-k),$=Math.max(0,V-k),q=Math.min(v[0],H+k+2),X=Math.min(v[1],U+k+2),K=Math.min(v[2],V+k+2),Y=G;Y<q;Y++){s=N-w[Y];for(var Z=v[1]*v[2]*Y,Q=W;Q<X;Q++)for(var J=s*s+(l=z-_[Q])*l,ee=Z+v[2]*Q,te=$;te<K;te++){d=J+(u=j-S[te])*u;var ne=te+ee,re=b[ne];if(re>0&&d<re*re&&(b[ne]=Math.sqrt(d),m)){var ie=s*I[0]+l*I[1]+u*I[2];x[ne]=ie<0?t:e}}}}}function U(e,t,s){console.time("AVSurface.getVolume"),console.time("AVSurface.init"),F(e,t,s),console.timeEnd("AVSurface.init"),console.time("AVSurface.projectPoints"),j(),console.timeEnd("AVSurface.projectPoints"),console.time("AVSurface.projectTorii"),function(){for(var e=0;e<r;e++){k.withinRadii(i[e],o[e],a[e],c[e],P);for(var t=0,n=P[t];n>=0;)e<n&&H(e,n),n=P[++t]}}(),console.timeEnd("AVSurface.projectTorii"),function(){for(var e=0;e<b.length;e++)b[e]<0&&(b[e]=0)}(),function(){for(var e=0;e<x.length;e++)x[e]=n[x[e]]}(),console.timeEnd("AVSurface.getVolume")}this.getSurface=function(e,t,n,r,i,o,a){return U(t,n,i),new Cp(b,v[2],v[1],v[0],x).getSurface(t,!1,void 0,y,a)}}ml.add("line",Ny),Object.assign(zy,{__deps:[wp,xp,Cp,Rc,By]}),Object.assign(Hy,{__deps:[wp,Cp,ou,Rc,Gc,Fc,Wc,jy,Sa]}),fl.add("molsurf",(function(e,t){var n=e.data.args,r=e.data.params;if(n&&r){var i=new("av"===r.type?Hy:zy)(n.coordList,n.radiusList,n.indexList).getSurface(r.type,r.probeRadius,r.scaleFactor,r.cutoff,!0,r.smooth,r.contour),o=[i.position.buffer,i.index.buffer];i.normal&&o.push(i.normal.buffer),i.atomindex&&o.push(i.atomindex.buffer),t({sd:i,p:r},o)}}),[zy,Hy]);var Uy=function(e){this.structure=e};Uy.prototype._getAtomData=function(e){return this.structure.getAtomData({what:{position:!0,radius:!0,index:!0},radiusParams:Sa(e.radiusParams,{type:"vdw",scale:1})})},Uy.prototype._makeSurface=function(e,t){var n=new _p(t.name,"",e);return n.info.type=t.type,n.info.probeRadius=t.probeRadius,n.info.scaleFactor=t.scaleFactor,n.info.smooth=t.smooth,n.info.cutoff=t.cutoff,n},Uy.prototype.getSurface=function(e){var t=e||{},n=this._getAtomData(e),r=n.position,i=n.radius,o=n.index,a=new("av"===t.type?Hy:zy)(r,i,o).getSurface(t.type,t.probeRadius,t.scaleFactor,t.cutoff,!0,t.smooth,t.contour);return this._makeSurface(a,t)},Uy.prototype.getSurfaceWorker=function(e,t){var n=this,r=Object.assign({},e);if(window.hasOwnProperty("Worker")){void 0===this.worker&&(this.worker=new Pc("molsurf"));var i=this._getAtomData(e),o=i.position,a=i.radius,s=i.index,l={args:{coordList:o,radiusList:a,indexList:s},params:r},u=[o.buffer,a.buffer,s.buffer];this.worker.post(l,u,(function(e){t(n._makeSurface(e.data.sd,r))}),(function(e){console.warn("MolecularSurface.getSurfaceWorker error - trying without worker",e),n.worker.terminate(),n.worker=void 0;var i=n.getSurface(r);t(i)}))}else{var c=this.getSurface(r);t(c)}},Uy.prototype.dispose=function(){this.worker&&this.worker.terminate()};var Vy=function(e){function t(t,n,r){var i=this;e.call(this,t,n,r),this.type="surface",this.parameters=Object.assign({surfaceType:{type:"select",rebuild:!0,options:{vws:"vws",sas:"sas",ms:"ms",ses:"ses",av:"av"}},probeRadius:{type:"number",precision:1,max:20,min:0,rebuild:!0},smooth:{type:"integer",precision:1,max:10,min:0,rebuild:!0},scaleFactor:{type:"number",precision:1,max:5,min:0,rebuild:!0},cutoff:{type:"number",precision:2,max:50,min:0,rebuild:!0},contour:{type:"boolean",rebuild:!0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},filterSele:{type:"text",rebuild:!0},colorVolume:{type:"hidden"},useWorker:{type:"boolean",rebuild:!0}},this.parameters,{radius:null,scale:null}),this.__infoList=[],this.structure.signals.refreshed.add((function(){i.__forceNewMolsurf=!0})),this.toBePrepared=!0,this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"uniform"),n.colorValue=Sa(n.colorValue,14540253),n.disablePicking=Sa(n.disablePicking,!0),this.surfaceType=Sa(n.surfaceType,"ms"),this.probeRadius=Sa(n.probeRadius,1.4),this.smooth=Sa(n.smooth,2),this.scaleFactor=Sa(n.scaleFactor,2),this.cutoff=Sa(n.cutoff,0),this.contour=Sa(n.contour,!1),this.background=Sa(n.background,!1),this.opaqueBack=Sa(n.opaqueBack,!0),this.filterSele=Sa(n.filterSele,""),this.colorVolume=Sa(n.colorVolume,void 0),this.useWorker=Sa(n.useWorker,!0),e.prototype.init.call(this,t)},t.prototype.prepareData=function(e,t,n){var r=this.__infoList[t];if(r||(r={},this.__infoList[t]=r),r.molsurf&&r.sele===e.selection.string)n(t);else{if(this.filterSele){var i=e.structure.getView(new zs(this.filterSele)),o=i.boundingBox.getSize(new U),a=Math.max(o.x,o.y,o.z),s=e.getAtomSetWithinPoint(i.center,a/2+6);e=e.getView(new zs(e.getAtomSetWithinSelection(s,3).toSeleString()))}r.sele=e.selection.string,r.molsurf=new Uy(e);var l=this.getSurfaceParams(),u=function(e){r.surface=e,n(t)};this.useWorker?r.molsurf.getSurfaceWorker(l,u):u(r.molsurf.getSurface(l))}},t.prototype.prepare=function(e){var t=this;if((this.__forceNewMolsurf||this.__sele!==this.selection.string||this.__surfaceParams!==JSON.stringify(this.getSurfaceParams()))&&(this.__infoList.forEach((function(e){e.molsurf.dispose()})),this.__infoList.length=0),0!==this.structureView.atomCount){var n=function(){t.__sele=t.selection.string,t.__surfaceParams=JSON.stringify(t.getSurfaceParams()),t.__forceNewMolsurf=!1,e()},r="default"===this.assembly?this.defaultAssembly:this.assembly,i=this.structure.biomolDict[r];i?i.partList.forEach((function(e,r){var o=e.getView(t.structureView);t.prepareData(o,r,(function(e){e===i.partList.length-1&&n()}))})):this.prepareData(this.structureView,0,n)}else e()},t.prototype.createData=function(e,t){var n=this.__infoList[t],r=n.surface,i={position:r.getPosition(),color:r.getColor(this.getColorParams()),index:r.getFilteredIndex(this.filterSele,e)},o=[];if(r.contour){var a=new jp(i,this.getBufferParams({wireframe:!1}));o.push(a)}else{Object.assign(i,{normal:r.getNormal(),picking:r.getPicking(e.getStructure())});var s=new Dp(i,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1})),l=new Bp(s);o.push(l)}return{bufferList:o,info:n}},t.prototype.updateData=function(e,t){var n={};if(e.position||e.radius)return this.__forceNewMolsurf=!0,void this.build();e.color&&(n.color=t.info.surface.getColor(this.getColorParams())),e.index&&(n.index=t.info.surface.getFilteredIndex(this.filterSele,t.sview)),t.bufferList[0].setAttributes(n)},t.prototype.setParameters=function(t,n,r){return void 0===n&&(n={}),t&&t.filterSele&&(n.index=!0),t&&void 0!==t.colorVolume&&(n.color=!0),t&&t.wireframe&&(t.contour||void 0===t.contour&&this.contour)&&(t.wireframe=!1),e.prototype.setParameters.call(this,t,n,r),this},t.prototype.getSurfaceParams=function(e){return void 0===e&&(e={}),Object.assign({type:this.surfaceType,probeRadius:this.probeRadius,scaleFactor:this.scaleFactor,smooth:this.smooth&&!this.contour,cutoff:this.cutoff,contour:this.contour,useWorker:this.useWorker,radiusParams:this.getRadiusParams()},e)},t.prototype.getColorParams=function(){var t=e.prototype.getColorParams.call(this);return t.volume=this.colorVolume,t},t.prototype.getAtomRadius=function(){return 0},t.prototype.clear=function(){e.prototype.clear.call(this)},t.prototype.dispose=function(){this.__infoList.forEach((function(e){e.molsurf.dispose()})),this.__infoList.length=0,e.prototype.dispose.call(this)},t}(Tv);ml.add("surface",Vy);var Gy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="point",this.parameters=Object.assign({pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{flatShaded:null,wireframe:null,linewidth:null,side:null,roughness:null,metalness:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};this.pointSize=Sa(n.pointSize,1),this.sizeAttenuation=Sa(n.sizeAttenuation,!0),this.sortParticles=Sa(n.sortParticles,!1),this.useTexture=Sa(n.useTexture,!1),this.alphaTest=Sa(n.alphaTest,.5),this.forceTransparent=Sa(n.forceTransparent,!1),this.edgeBleach=Sa(n.edgeBleach,0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){var t=e.getAtomData(this.getAtomParams({position:!0,color:!0,picking:!0}));return{bufferList:[new Km(t,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach}))]}},t.prototype.updateData=function(e,t){var n=t.sview.getAtomData(this.getAtomParams(e)),r={};e&&!e.position||Object.assign(r,{position:n.position}),e&&!e.color||Object.assign(r,{color:n.color}),t.bufferList[0].setAttributes(r)},t.prototype.getAtomRadius=function(){return.1},t}(Tv);ml.add("point",Gy),vl.add("shader/Ribbon.vert","#define STANDARD\nuniform float clipNear;\nuniform vec3 clipCenter;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\nattribute vec3 dir;\nattribute float size;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#endif\n#include common\nvoid main(void){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#include beginnormal_vertex\n#include defaultnormal_vertex\n#ifndef FLAT_SHADED\nvNormal = normalize( transformedNormal );\n#endif\n#endif\n#include begin_vertex\ntransformed += normalize( dir ) * size;\n#include project_vertex\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}");var Wy=new Uint16Array([0,1,2,1,3,2]);function $y(e){return 3*(4*(e.position.length/3-1))}var qy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array($y(t)),color:new Float32Array($y(t)),index:Ba($y(t),$y(t)/3),normal:new Float32Array($y(t)),picking:t.picking},n),this.vertexShader="Ribbon.vert";var r=t.position.length/3-1,i=4*r,o=3*i;this.addAttributes({dir:{type:"v3",value:new Float32Array(o)}}),this.addAttributes({size:{type:"f",value:new Float32Array(i)}}),t.primitiveId=su(r),this.setAttributes(t),this.makeIndex()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(e){void 0===e&&(e={});var t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x=this.size/4,w=this.geometry.attributes;e.position&&(t=e.position,s=w.position.array,w.position.needsUpdate=!0),e.normal&&(n=e.normal,l=w.normal.array,w.normal.needsUpdate=!0),e.size&&(r=e.size,u=w.size.array,w.size.needsUpdate=!0),e.dir&&(i=e.dir,c=w.dir.array,w.dir.needsUpdate=!0),e.color&&(o=e.color,d=w.color.array,w.color.needsUpdate=!0),e.primitiveId&&(a=e.primitiveId,f=w.primitiveId.array,w.primitiveId.needsUpdate=!0);var _=r?r[0]:null;for(p=0;p<x;++p){for(y=3*p,m=3*p*4,v=4*p,t&&(s[m]=s[m+3]=t[y],s[m+1]=s[m+4]=t[y+1],s[m+2]=s[m+5]=t[y+2],s[m+6]=s[m+9]=t[y+3],s[m+7]=s[m+10]=t[y+4],s[m+8]=s[m+11]=t[y+5]),n&&(l[m]=l[m+3]=-n[y],l[m+1]=l[m+4]=-n[y+1],l[m+2]=l[m+5]=-n[y+2],l[m+6]=l[m+9]=-n[y+3],l[m+7]=l[m+10]=-n[y+4],l[m+8]=l[m+11]=-n[y+5]),h=0;h<4;++h)g=m+3*h,o&&(d[g]=o[y],d[g+1]=o[y+1],d[g+2]=o[y+2]),a&&(f[v+h]=a[p]);r&&(b=r[p],_!==r[p]?(u[v]=_,u[v+1]=_,u[v+2]=b,u[v+3]=b):(u[v]=b,u[v+1]=b,u[v+2]=b,u[v+3]=b),_=b),i&&(c[m]=i[y],c[m+1]=i[y+1],c[m+2]=i[y+2],c[m+3]=-i[y],c[m+4]=-i[y+1],c[m+5]=-i[y+2],c[m+6]=i[y+3],c[m+7]=i[y+4],c[m+8]=i[y+5],c[m+9]=-i[y+3],c[m+10]=-i[y+4],c[m+11]=-i[y+5])}},t.prototype.makeIndex=function(){for(var e=this.geometry.getIndex().array,t=e.length/4/3,n=0;n<t;++n){var r=6*n,i=4*n;e.set(Wy,r);for(var o=0;o<6;++o)e[r+o]+=i}},t}(Lp),Xy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="ribbon",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{side:null,wireframe:null,linewidth:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"chainname"),n.colorScale=Sa(n.colorScale,"RdYlBu"),n.radiusType=Sa(n.radiusType,"sstruc"),n.radiusScale=Sa(n.radiusScale,4),"low"===n.quality?this.subdiv=3:"medium"===n.quality?this.subdiv=6:"high"===n.quality?this.subdiv=12:this.subdiv=Sa(n.subdiv,6),this.tension=Sa(n.tension,NaN),this.smoothSheet=Sa(n.smoothSheet,!1),e.prototype.init.call(this,n)},t.prototype.getSplineParams=function(e){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!0,smoothSheet:this.smoothSheet},e)},t.prototype.getAtomRadius=function(t){return t.isTrace()?e.prototype.getAtomRadius.call(this,t):0},t.prototype.createData=function(e){var t=this,n=[],r=[];return this.structure.eachPolymer((function(e){if(!(e.residueCount<4)){r.push(e);var i=new fy(e,t.getSplineParams()),o=i.getSubdividedPosition(),a=i.getSubdividedOrientation(),s=i.getSubdividedColor(t.getColorParams()),l=i.getSubdividedPicking(),u=i.getSubdividedSize(t.getRadiusParams());n.push(new qy({position:o.position,normal:a.binormal,dir:a.normal,color:s.color,size:u.size,picking:l.picking},t.getBufferParams()))}}),e.getSelection()),{bufferList:n,polymerList:r}},t.prototype.updateData=function(e,t){var n=this;e=e||{};var r=0,i=t.polymerList.length;for(r=0;r<i;++r){var o={},a=new fy(t.polymerList[r],n.getSplineParams());if(e.position){var s=a.getSubdividedPosition(),l=a.getSubdividedOrientation();Object.assign(o,{position:s.position,normal:l.binormal,dir:l.normal})}if(e.radius||e.scale){var u=a.getSubdividedSize(n.getRadiusParams());Object.assign(o,{size:u.size})}if(e.color){var c=a.getSubdividedColor(n.getColorParams());Object.assign(o,{color:c.color})}t.bufferList[r].setAttributes(o)}},t.prototype.setParameters=function(t){var n={};return t&&t.tension&&Object.assign(n,{position:!0}),e.prototype.setParameters.call(this,t,n,!1),this},t}(Tv);ml.add("ribbon",Xy);var Ky=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="rocket",this.parameters=Object.assign({localAngle:{type:"integer",max:180,min:0,rebuild:!0},centerDist:{type:"number",precision:1,max:10,min:0,rebuild:!0},ssBorder:{type:"boolean",rebuild:!0},radialSegments:!0,openEnded:!0,disableImpostor:!0},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"sstruc"),n.radiusSize=Sa(n.radiusSize,1.5),n.radiusScale=Sa(n.radiusScale,1),n.openEnded=Sa(n.openEnded,!1),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.localAngle=Sa(n.localAngle,30),this.centerDist=Sa(n.centerDist,2.5),this.ssBorder=Sa(n.ssBorder,!1),e.prototype.init.call(this,n)},t.prototype.createData=function(e){var t=this,n=0,r=[],i=[];this.structure.eachPolymer((function(e){if(!(e.residueCount<4||e.isNucleic())){var o=new xh(e),a=o.getAxis(t.localAngle,t.centerDist,t.ssBorder,t.getColorParams(),t.getRadiusParams());n+=a.size.length,r.push(a),i.push(o)}}),e.getSelection());var o={begin:new Float32Array(3*n),end:new Float32Array(3*n),size:new Float32Array(n),color:new Float32Array(3*n),picking:{}},a=new Float32Array(n),s=0;return r.forEach((function(e){o.begin.set(e.begin,3*s),o.end.set(e.end,3*s),o.size.set(e.size,s),o.color.set(e.color,3*s),a.set(e.picking.array,s),s+=e.size.length})),n&&(o.picking=new Tf(a,e.getStructure())),{bufferList:[new ay({position1:o.begin,position2:o.end,color:o.color,color2:o.color,radius:o.size,picking:o.picking},this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))],axisList:r,helixbundleList:i,axisData:o}},t.prototype.updateData=function(e,t){var n=this;if((e=e||{}).position)this.build();else{var r={};if(e.color||e.radius){var i=0;t.helixbundleList.forEach((function(r){var o=r.getAxis(n.localAngle,n.centerDist,n.ssBorder,n.getColorParams(),n.getRadiusParams());e.color&&t.axisData.color.set(o.color,3*i),(e.radius||e.scale)&&t.axisData.size.set(o.size,i),i+=o.size.length})),e.color&&Object.assign(r,{color:t.axisData.color,color2:t.axisData.color}),(e.radius||e.scale)&&Object.assign(r,{radius:t.axisData.size})}t.bufferList[0].setAttributes(r)}},t}(Tv);ml.add("rocket",Ky);var Yy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="rope",this.parameters=Object.assign({smooth:{type:"integer",max:15,min:0,rebuild:!0}},this.parameters,{aspectRatio:null,smoothSheet:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=1,n.tension=Sa(n.tension,.5),n.radiusScale=Sa(n.radiusScale,5),n.smoothSheet=!1,this.smooth=Sa(n.smooth,2),e.prototype.init.call(this,n)},t.prototype.getSpline=function(e){var t=new bh(e);return new fy(e,this.getSplineParams({directional:!1,positionIterator:t.getCenterIterator(this.smooth)}))},t}(vy);ml.add("rope",Yy);var Zy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="spacefill",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.useInteriorColor=Sa(n.useInteriorColor,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){return{bufferList:[new Wm(e.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,dullInterior:!0,disableImpostor:this.disableImpostor}))]}},t.prototype.updateData=function(e,t){var n=t.sview.getAtomData(this.getAtomParams(e)),r={};e&&!e.position||Object.assign(r,{position:n.position}),e&&!e.color||Object.assign(r,{color:n.color}),e&&!e.radius||Object.assign(r,{radius:n.radius}),t.bufferList[0].setAttributes(r)},t}(Tv);function Qy(e){return 3*(e.position.length/3-1)*2}ml.add("spacefill",Zy);var Jy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(Qy(t)),color:new Float32Array(Qy(t))},n),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag",this.setAttributes(t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(e){var t,n,r,i,o=this.geometry.attributes;if(e.position&&(t=e.position,r=o.position.array,o.position.needsUpdate=!0),e.color&&(n=e.color,i=o.color.array,o.color.needsUpdate=!0),t||n)for(var a,s,l=this.size-1,u=0;u<l;++u)a=3*u,s=3*u*2,t&&(r[s]=t[a],r[s+1]=t[a+1],r[s+2]=t[a+2],r[s+3]=t[a+3],r[s+4]=t[a+4],r[s+5]=t[a+5]),n&&(i[s]=n[a],i[s+1]=n[a+1],i[s+2]=n[a+2],i[s+3]=n[a+3],i[s+4]=n[a+4],i[s+5]=n[a+5]);else rl.warn("TraceBuffer.prototype.setAttributes no data")},t}(Ip),eb=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="trace",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"chainname"),n.colorScale=Sa(n.colorScale,"RdYlBu"),"low"===n.quality?this.subdiv=3:"medium"===n.quality?this.subdiv=6:"high"===n.quality?this.subdiv=12:this.subdiv=Sa(n.subdiv,6),this.tension=Sa(n.tension,NaN),this.smoothSheet=Sa(n.smoothSheet,!1),e.prototype.init.call(this,n)},t.prototype.getSplineParams=function(e){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!1,smoothSheet:this.smoothSheet},e)},t.prototype.getAtomRadius=function(e){return e.isTrace()?.1:0},t.prototype.createData=function(e){var t=this,n=[],r=[];return this.structure.eachPolymer((function(e){if(!(e.residueCount<4)){r.push(e);var i=new fy(e,t.getSplineParams()),o=i.getSubdividedPosition(),a=i.getSubdividedColor(t.getColorParams());n.push(new Jy(Object.assign({},o,a),t.getBufferParams()))}}),e.getSelection()),{bufferList:n,polymerList:r}},t.prototype.updateData=function(e,t){e=e||{};var n=0,r=t.polymerList.length;for(n=0;n<r;++n){var i={},o=new fy(t.polymerList[n],this.getSplineParams());if(e.position){var a=o.getSubdividedPosition();Object.assign(i,{position:a.position})}if(e.color){var s=o.getSubdividedColor(this.getColorParams());Object.assign(i,{color:s.color})}t.bufferList[n].setAttributes(i)}},t.prototype.setParameters=function(t){var n={};return t&&t.tension&&Object.assign(n,{position:!0}),e.prototype.setParameters.call(this,t,n,!1),this},t}(Tv);ml.add("trace",eb);var tb=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="tube",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=1,n.radiusScale=Sa(n.radiusScale,2),"low"===n.quality&&(this.radialSegments=5),e.prototype.init.call(this,n)},t.prototype.getSplineParams=function(){return e.prototype.getSplineParams.call(this,{directional:!1})},t}(vy);ml.add("tube",tb);var nb=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="unitcell",this.parameters=Object.assign({radiusSize:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0},this.parameters,{assembly:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{},r=.5;this.structure.unitcell&&(r=Math.cbrt(this.structure.unitcell.volume)/200),n.radiusSize=Sa(n.radiusSize,r),n.colorValue=Sa(n.colorValue,"orange"),n.useInteriorColor=Sa(n.useInteriorColor,!0),e.prototype.init.call(this,n)},t.prototype.getUnitcellData=function(e){return e.unitcell.getData(e)},t.prototype.create=function(){var e=this.structureView.getStructure();if(e.unitcell){var t=this.getUnitcellData(e);this.sphereBuffer=new Wm(t.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new ay(t.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})}},t.prototype.createData=function(e){},t.prototype.updateData=function(e,t){var n=t.sview.getStructure();if(n.unitcell){var r=this.getUnitcellData(n),i={},o={};e&&!e.position||(Object.assign(i,{position:r.vertex.position}),Object.assign(o,{position1:r.edge.position1,position2:r.edge.position2})),e&&!e.color||(Object.assign(i,{color:r.vertex.color}),Object.assign(o,{color:r.edge.color,color2:r.edge.color2})),e&&!e.radius||(Object.assign(i,{radius:r.vertex.radius}),Object.assign(o,{radius:r.edge.radius})),this.sphereBuffer.setAttributes(i),this.cylinderBuffer.setAttributes(o)}},t}(Tv);ml.add("unitcell",nb);var rb=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="validation",this.parameters=Object.assign({},this.parameters,{radiusType:null,radiusSize:null,radiusScale:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorValue=Sa(n.colorValue,"#f0027f"),n.useInteriorColor=Sa(n.useInteriorColor,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){if(e.validation){var t=e.validation.getClashData({structure:e,color:this.colorValue});return{bufferList:[new ay(t,this.getBufferParams({openEnded:!1}))]}}},t}(Tv);ml.add("validation",rb);var ib=new U,ob=new U,ab=new U,sb=new U(0,1,0);var lb=Object.assign({radialSegments:60,openEnded:!1},Tp),ub=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(t.position1.length),color:t.color,picking:t.picking},n,function(e){void 0===e&&(e={});var t=new ri(1,1,Sa(e.radialSegments,60),1,Sa(e.openEnded,!1));return t.applyMatrix((new j).makeRotationX(-Math.PI/2)),t}(n)),this.updateNormals=!0,this._position=new Float32Array(t.position1.length),this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return lb},t.prototype.applyPositionTransform=function(e,t,n){ob.fromArray(this._position1,n),ab.fromArray(this._position2,n),e.lookAt(ob,ab,sb);var r=this._radius[t];ib.set(r,r,ob.distanceTo(ab)),e.scale(ib)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.position1&&t.position2&&(ru(t.position1,t.position2,this._position),this._position1=t.position1,this._position2=t.position2,t.position=this._position),t.radius&&(this._radius=t.radius),e.prototype.setAttributes.call(this,t,n)},Object.defineProperties(t.prototype,n),t}(Fm);xl.add("cone",ub);var cb=function(e){void 0===e&&(e=[]),this.geometryList=e};cb.prototype.computeBoundingBox=function(){var e=this;this.boundingBox?this.boundingBox.empty():this.boundingBox=new Z,this.geometryList.forEach((function(t){t.boundingBox||t.computeBoundingBox(),e.boundingBox.union(t.boundingBox)}))};var db=Object.assign({aspectRatio:1.5,radialSegments:50,openEnded:!1,disableImpostor:!1},Tp),fb=function(e,t){void 0===t&&(t={}),this.group=new wn,this.wireframeGroup=new wn,this.pickingGroup=new wn,this.visible=!0,this.parameters=Ca(t,this.defaultParameters),this.splitPosition=new Float32Array(e.position1.length),this.cylinderRadius=new Float32Array(e.radius.length);var n=this.makeAttributes(e),r={radialSegments:this.parameters.radialSegments,openEnded:this.parameters.openEnded,disableImpostor:this.parameters.disableImpostor};this.cylinderBuffer=new ay(n.cylinder,r),this.coneBuffer=new ub(n.cone,r),this.geometry=new cb([this.cylinderBuffer.geometry,this.coneBuffer.geometry]),this.matrix=Sa(t.matrix,new j),this.picking=e.picking},pb={defaultParameters:{configurable:!0},matrix:{configurable:!0},pickable:{configurable:!0}};pb.defaultParameters.get=function(){return db},pb.matrix.set=function(e){Ip.prototype.setMatrix.call(this,e)},pb.matrix.get=function(){return this.group.matrix.clone()},pb.pickable.get=function(){return!!this.picking},fb.prototype.makeAttributes=function(e){void 0===e&&(e={});var t,n,r=this.splitPosition,i=this.cylinderRadius,o=this.parameters.aspectRatio,a={},s={};if(e.radius){for(t=0,n=i.length;t<n;++t)i[t]=e.radius[t]/o;a.radius=i,s.radius=e.radius}if(e.position1&&e.position2){var l=new U,u=new U,c=new U,d=new U;for(t=0,n=r.length;t<n;t+=3){l.fromArray(e.position1,t),u.fromArray(e.position2,t),c.subVectors(l,u);var f=c.length(),p=i[t/3]*o*2,h=Math.min(f,p);c.setLength(h),d.copy(u).add(c),d.toArray(r,t)}a.position1=e.position1,a.position2=r,s.position1=r,s.position2=e.position2}return e.color&&(a.color=e.color,a.color2=e.color,s.color=e.color),{cylinder:a,cone:s}},fb.prototype.getMesh=function(){return(new wn).add(this.cylinderBuffer.getMesh(),this.coneBuffer.getMesh())},fb.prototype.getWireframeMesh=function(){return(new wn).add(this.cylinderBuffer.getWireframeMesh(),this.coneBuffer.getWireframeMesh())},fb.prototype.getPickingMesh=function(){return(new wn).add(this.cylinderBuffer.getPickingMesh(),this.coneBuffer.getPickingMesh())},fb.prototype.setAttributes=function(e){void 0===e&&(e={});var t=this.makeAttributes(e);this.cylinderBuffer.setAttributes(t.cylinder),this.coneBuffer.setAttributes(t.cone)},fb.prototype.setParameters=function(e){void 0===e&&(e={}),(e=Object.assign({},e))&&void 0!==e.matrix&&(this.matrix=e.matrix),delete e.matrix,e&&void 0!==e.wireframe&&(this.parameters.wireframe=e.wireframe,this.setVisibility(this.visible)),this.cylinderBuffer.setParameters(e),this.coneBuffer.setParameters(e)},fb.prototype.setVisibility=function(e){Ip.prototype.setVisibility.call(this,e)},fb.prototype.dispose=function(){this.cylinderBuffer.dispose(),this.coneBuffer.dispose()},Object.defineProperties(fb.prototype,pb),xl.add("arrow",fb);var hb=new U,mb=new U,gb=new U,vb=new U(0,0,0),yb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new Le(1,1,1)),this.updateNormals=!0,this.setAttributes(t,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(e,t,n){mb.fromArray(this._heightAxis,n),gb.fromArray(this._depthAxis,n),e.lookAt(vb,mb,gb),hb.set(this._size[t],gb.length(),mb.length()),e.scale(hb)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),e.prototype.setAttributes.call(this,t,n)},t}(Fm);xl.add("box",yb);var bb=new U,xb=new U,wb=new U,_b=new U(0,0,0),Sb=Object.assign({sphereDetail:2},Tp),Cb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new ir(1,Sa(n.sphereDetail,2))),this.updateNormals=!0,this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Sb},t.prototype.applyPositionTransform=function(e,t,n){xb.fromArray(this._majorAxis,n),wb.fromArray(this._minorAxis,n),e.lookAt(_b,xb,wb),bb.set(this._radius[t],wb.length(),xb.length()),e.scale(bb)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.radius&&(this._radius=t.radius),t.majorAxis&&(this._majorAxis=t.majorAxis),t.minorAxis&&(this._minorAxis=t.minorAxis),e.prototype.setAttributes.call(this,t,n)},Object.defineProperties(t.prototype,n),t}(Fm);xl.add("ellipsoid",Cb);var Eb=new U,kb=new U,Pb=new U,Mb=new U(0,0,0),Ab=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new nr(1,0)),this.updateNormals=!0,this.setAttributes(t,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(e,t,n){kb.fromArray(this._heightAxis,n),Pb.fromArray(this._depthAxis,n),e.lookAt(Mb,kb,Pb),Eb.set(this._size[t],Pb.length(),kb.length()),e.scale(Eb)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),e.prototype.setAttributes.call(this,t,n)},t}(Fm);xl.add("octahedron",Ab);var Tb=new U,Rb=new U,Ib=new U,Ob=new U(0,0,0),Lb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new er(1,0)),this.updateNormals=!0,this.setAttributes(t,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(e,t,n){Rb.fromArray(this._heightAxis,n),Ib.fromArray(this._depthAxis,n),e.lookAt(Ob,Rb,Ib),Tb.set(this._size[t],Ib.length(),Rb.length()),e.scale(Tb)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),e.prototype.setAttributes.call(this,t,n)},t}(Fm);xl.add("tetrahedron",Lb);var Db=new U,Fb=new U,Nb=new U,Bb=new U(0,0,0),zb=Object.assign({radiusRatio:.2,radialSegments:16,tubularSegments:32},Tp),jb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new fr(1,Sa(n.radiusRatio,.2),Sa(n.radialSegments,16),Sa(n.tubularSegments,32))),this.updateNormals=!0,this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return zb},t.prototype.applyPositionTransform=function(e,t,n){Fb.fromArray(this._majorAxis,n),Nb.fromArray(this._minorAxis,n),e.lookAt(Bb,Fb,Nb);var r=this._radius[t];Db.set(r,r,r),e.scale(Db)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.radius&&(this._radius=t.radius),t.majorAxis&&(this._majorAxis=t.majorAxis),t.minorAxis&&(this._minorAxis=t.minorAxis),e.prototype.setAttributes.call(this,t,n)},Object.defineProperties(t.prototype,n),t}(Fm);xl.add("torus",jb);var Hb=function(e,t){var n=t||{};this.streamer=e,this.name=Sa(n.name,""),this.path=Sa(n.path,"")},Ub={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0},isJson:{configurable:!0},isXml:{configurable:!0}};Ub.type.get=function(){return""},Ub.__objName.get=function(){return""},Ub.isBinary.get=function(){return!1},Ub.isJson.get=function(){return!1},Ub.isXml.get=function(){return!1},Hb.prototype.parse=function(){var e=this;return this.streamer.read().then((function(){return e._beforeParse(),e._parse(),e._afterParse(),e[e.__objName]}))},Hb.prototype._parse=function(){},Hb.prototype._beforeParse=function(){},Hb.prototype._afterParse=function(){sl&&rl.log(this[this.__objName])},Object.defineProperties(Hb.prototype,Ub);var Vb=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.firstModelOnly=Sa(r.firstModelOnly,!1),this.asTrajectory=Sa(r.asTrajectory,!1),this.cAlphaOnly=Sa(r.cAlphaOnly,!1),this.structure=new km(this.name,this.path),this.structureBuilder=new Nh(this.structure)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"structure"},n.__objName.get=function(){return"structure"},Object.defineProperties(t.prototype,n),t}(Hb);var Gb=function(e,t,n,r,i){void 0===n&&(n=""),void 0===i&&(i=[]),this.structure=e,this.index=t,this.description=n,this.entityType=function(e){switch(e=e.toLowerCase()){case"polymer":return 1;case"non-polymer":return 2;case"macrolide":return 3;case"water":return 4;default:return 0}}(r||""),this.chainIndexList=i,i.forEach((function(n){e.chainStore.entityIndex[n]=t}))},Wb={type:{configurable:!0}};Wb.type.get=function(){return function(e){switch(e){case 1:return"polymer";case 2:return"non-polymer";case 3:return"macrolide";case 4:return"water";default:return}}(this.entityType)},Gb.prototype.getEntityType=function(){return this.entityType},Gb.prototype.isPolymer=function(){return 1===this.entityType},Gb.prototype.isNonPolymer=function(){return 2===this.entityType},Gb.prototype.isMacrolide=function(){return 3===this.entityType},Gb.prototype.isWater=function(){return 4===this.entityType},Gb.prototype.eachChain=function(e){var t=this.structure.getChainProxy();this.chainIndexList.forEach((function(n){t.index=n,e(t)}))},Object.defineProperties(Gb.prototype,Wb);var $b={a:1,b:1,c:1,alpha:90,beta:90,gamma:90,spacegroup:"P 1"},qb=function(e){void 0===e&&(e=$b),this.cartToFrac=new j,this.fracToCart=new j,this.a=e.a,this.b=e.b,this.c=e.c,this.alpha=e.alpha,this.beta=e.beta,this.gamma=e.gamma,this.spacegroup=e.spacegroup;var t=Xa(this.alpha),n=Xa(this.beta),r=Xa(this.gamma),i=Math.cos(t),o=Math.cos(n),a=Math.cos(r),s=Math.sin(n),l=Math.sin(r);if(this.volume=this.a*this.b*this.c*Math.sqrt(1-i*i-o*o-a*a+2*i*o*a),void 0===e.cartToFrac){var u=this.a*this.b*l/this.volume,c=(o*a-i)/(s*l);this.fracToCart.set(this.a,0,0,0,this.b*a,this.b*l,0,0,this.c*o,-this.c*s*c,1/u,0,0,0,0,1).transpose(),this.cartToFrac.getInverse(this.fracToCart)}else this.cartToFrac.copy(e.cartToFrac),this.fracToCart.getInverse(this.cartToFrac)};qb.prototype.getPosition=function(e){var t=new Float32Array(24);if(e.unitcell){var n=e.unitcell,r=e.center.clone().applyMatrix4(n.cartToFrac).floor(),i=new U,o=0,a=function(e,a,s){i.set(e,a,s).add(r).applyMatrix4(n.fracToCart).toArray(t,o),o+=3};a(0,0,0),a(1,0,0),a(0,1,0),a(0,0,1),a(1,1,0),a(1,0,1),a(0,1,1),a(1,1,1)}return t},qb.prototype.getCenter=function(e){return function(e,t){void 0===t&&(t=new U);for(var n=e.length,r=0;r<n;r+=3)t.x+=e[r],t.y+=e[r+1],t.z+=e[r+2];return t.divideScalar(n/3),t}(this.getPosition(e))},qb.prototype.getData=function(e,t){void 0===t&&(t={});var n=Sa(t.colorValue,"orange"),r=Sa(t.radius,Math.cbrt(this.volume)/200),i=new ie(n),o=new U,a=this.getPosition(e),s=au(8,i.r,i.g,i.b),l=ou(8,r),u=new Float32Array(36),c=new Float32Array(36),d=au(12,i.r,i.g,i.b),f=ou(12,r),p=0;function h(e,t){o.fromArray(a,3*e).toArray(u,p),o.fromArray(a,3*t).toArray(c,p),p+=3}h(0,1),h(0,2),h(0,3),h(1,4),h(1,5),h(2,6),h(3,5),h(4,7),h(5,7),h(2,4),h(7,6),h(3,6);var m=new $f(this,e);return{vertex:{position:a,color:s,radius:l,picking:m},edge:{position1:u,position2:c,color:d,color2:d,radius:f,picking:m}}};var Xb={1:"h",2:"h",3:"i",4:"h",5:"g",6:"h",7:"h",8:"h",9:"h",10:"h",0:"h"},Kb=["DAL","DAR","DSG","DAS","DCY","DGL","DGN","DHI","DIL","DLE","DLY","MED","DPN","DPR","DSN","DTH","DTR","DTY","DVA","DNE"],Yb=["MOL_ID","MOLECULE","CHAIN","FRAGMENT","SYNONYM","EC","ENGINEERED","MUTATION","OTHER_DETAILS"],Zb=/\s+/;function Qb(e,t,n){var r=""+e;return t&&(r+=":"+t),n&&(r+="^"+n),r}var Jb=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.hex=Sa(r.hex,!1)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pdb"},t.prototype._parse=function(){sl&&rl.time("PdbParser._parse "+this.name);var e=!1,t=this.streamer.peekLines(1)[0],n=t.substr(62,4),r=t.substr(72,4);n===r&&r.trim()&&(e=!0);var i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,_,S,C,E,k,P,M,A,T,R,I,O,L,D,F,N="pqr"===this.type,B="pdbqt"===this.type,z=this.structure,H=this.structureBuilder,U=this.hex,V=10,G=10,W=this.firstModelOnly,$=this.asTrajectory,q=this.cAlphaOnly,X=z.frames,K=z.boxes,Y=!1,Z=z.biomolDict,Q={},J={},ee={},te=[],ne={},re={},ie={},oe={},ae={helices:[],sheets:[]},se=ae.helices,le=ae.sheets,ue=z.atomMap,ce=z.atomStore;ce.resize(Math.round(this.streamer.data.length/80)),(N||B)&&ce.addField("partialCharge",1,"float32"),N&&ce.addField("radius",1,"float32");var de=z.getAtomProxy(),fe=z.getAtomProxy(),pe=0,he=0,me=!0;this.streamer.eachChunkOfLines((function(t){!function(t,n,r){for(var ae,ge=t;ge<n;++ge)if(u=r[ge],"ATOM  "===(c=u.substr(0,6))||"HETATM"===c){if(me&&($?(Y?(i=new Float32Array(3*ce.count),X.push(i)):i=[],o=0):W||(Q={}),T=(A=1).toString(),R=!0,me=!1),W&&he>0)continue;var ve=void 0,ye=void 0,be=void 0,xe=void 0,we=void 0;if(N){if(we=10===(xe=u.split(Zb)).length?1:0,v=xe[2],q&&"CA"!==v)continue;ve=parseFloat(xe[6-we]),ye=parseFloat(xe[7-we]),be=parseFloat(xe[8-we])}else{if(v=u.substr(12,4).trim(),q&&"CA"!==v)continue;ve=parseFloat(u.substr(30,8)),ye=parseFloat(u.substr(38,8)),be=parseFloat(u.substr(46,8))}if($){var _e=3*o;if(i[_e+0]=ve,i[_e+1]=ye,i[_e+2]=be,o+=1,Y)continue}var Se=void 0;N?(d=parseInt(xe[1]),Se="",y="H"===u[0]?1:0,f=we?"":xe[4],p=parseInt(xe[5-we]),g="",h=xe[3],x="",m=1):(d=parseInt(u.substr(6,5),V),U&&99999===d&&(V=16),y="H"===u[0]?1:0,f=u[21].trim(),p=parseInt(u.substr(22,4),G),U&&9999===p&&(G=16),g=u[26].trim(),h=u.substr(17,4).trim()||"MOL",b=parseFloat(u.substr(60,6)),x=u[16].trim(),m=parseFloat(u.substr(54,6)),e||(B?Se=u.substr(12,2).trim():(Se=u.substr(76,2).trim(),f||(f=u.substr(72,4).trim())))),ce.growIfFull(),ce.atomTypeId[pe]=ue.add(v,Se),ce.x[pe]=ve,ce.y[pe]=ye,ce.z[pe]=be,ce.serial[pe]=d,ce.altloc[pe]=x.charCodeAt(0),ce.occupancy[pe]=isNaN(m)?0:m,N?(ce.partialCharge[pe]=parseFloat(xe[9-we]),ce.radius[pe]=parseFloat(xe[10-we])):(ce.bfactor[pe]=isNaN(b)?0:b,B&&(ce.partialCharge[pe]=parseFloat(u.substr(70,6))));var Ce=Qb(p,f,g);!y||re[Ce]||Kb.includes(h)?R||I===f||(T=(A+=1).toString()):I===f&&L===h&&(Wd.includes(h)||O===p&&D===g)||(T=(A+=1).toString(),O=p,L=h,D=g),H.addAtom(he,f,T,h,p,y,void 0,g),Q[d]=pe,pe+=1,R=!1,I=f}else if("CONECT"===c){var Ee=Q[parseInt(u.substr(6,5))],ke=[11,16,21,26],Pe={};if(void 0===Ee)continue;for(var Me=0;Me<4;++Me){var Ae=parseInt(u.substr(ke[Me],5));if(!Number.isNaN(Ae)&&void 0!==(Ae=Q[Ae]))if(Ee<Ae?(de.index=Ee,fe.index=Ae):(de.index=Ae,fe.index=Ee),void 0!==Pe[Ae])z.bondStore.bondOrder[Pe[Ae]]+=1;else{var Te=de.index+"|"+fe.index;void 0===ee[Te]&&(ee[Te]=!0,Pe[Ae]=z.bondStore.count,z.bondStore.addBond(de,fe,1))}}}else if("HELIX "===c){w=u[19].trim(),_=parseInt(u.substr(21,4)),S=u[25].trim(),C=u[31].trim(),E=parseInt(u.substr(33,4)),k=u[37].trim();var Re=parseInt(u.substr(39,1));Re=(Xb[Re]||Xb[0]).charCodeAt(0),se.push([w,_,S,C,E,k,Re])}else if("SHEET "===c)w=u[21].trim(),_=parseInt(u.substr(22,4)),S=u[26].trim(),C=u[32].trim(),E=parseInt(u.substr(33,4)),k=u[37].trim(),le.push([w,_,S,C,E,k]);else if("HETNAM"===c)ne[u.substr(11,3)]=u.substr(15).trim();else if("SEQRES"===c){var Ie=u[11].trim();Ie!==F&&(oe[Ie]=[],F=Ie),(ae=oe[Ie]).push.apply(ae,u.substr(19).trim().split(Zb))}else if("MODRES"===c){var Oe=u.substr(12,3).trim(),Le=u[16].trim(),De=u[22].trim(),Fe=parseInt(u.substr(18,4).trim()),Ne=Qb(Fe,Le,De);re[Ne]={resname:Oe,chainname:Le,inscode:De,resno:Fe}}else if("COMPND"===c){var Be=u.substr(10,70).trim(),ze=Be.indexOf(":"),je=Be.substring(0,ze),He=void 0;Yb.includes(je)?(M=je,He=Be.substring(ze+2)):He=Be,He=He.replace(/;$/,""),"MOL_ID"===M?(P={chainList:[],name:""},te.push(P)):"MOLECULE"===M?(P.name&&(P.name+=" "),P.name+=He):"CHAIN"===M&&Array.prototype.push.apply(P.chainList,He.split(/\s*,\s*/))}else if(u.startsWith("TER")){var Ue=z.getChainProxy(z.chainStore.count-1);ie[Ue.chainname]=Ue.index,T=(A+=1).toString(),R=!0}else if("REMARK"===c&&"350"===u.substr(7,3)){if("BIOMOLECULE:"===u.substr(11,12)){var Ve=u.substr(23).trim();/^(0|[1-9][0-9]*)$/.test(Ve)&&(Ve="BU"+Ve),a=new Oh(Ve),Z[Ve]=a}else if("BIOMT"===u.substr(13,5)){var Ge=u.split(/\s+/),We=parseInt(u[18])-1;0===We&&(l=new j,s.matrixList.push(l));var $e=l.elements;$e[0+We]=parseFloat(Ge[4]),$e[4+We]=parseFloat(Ge[5]),$e[8+We]=parseFloat(Ge[6]),$e[12+We]=parseFloat(Ge[7])}else if("APPLY THE FOLLOWING TO CHAINS:"===u.substr(11,30)||"                   AND CHAINS:"===u.substr(11,30)){"APPLY"===u.substr(11,5)&&(s=a.addPart());for(var qe=u.substr(41,30).split(","),Xe=0,Ke=qe.length;Xe<Ke;++Xe){var Ye=qe[Xe].trim();Ye&&s.chainList.push(Ye)}}}else if("HEADER"===c)z.id=u.substr(62,4);else if("TITLE "===c)z.title+=(z.title?" ":"")+u.substr(10,70).trim();else if("MODEL "===c)me=!0;else if("ENDMDL"===c||"END"===u.trim()){if(me)continue;$&&!Y&&(X.push(new Float32Array(i)),Y=!0),he+=1,me=!0}else if("MTRIX"===u.substr(0,5)){if("1"===u[59])continue;a&&"NCS"===a.name||(a=new Oh("NCS"),Z.NCS=a,s=a.addPart());var Ze=u.split(/\s+/),Qe=parseInt(u[5])-1;0===Qe&&(l=new j,s.matrixList.push(l));var Je=l.elements;Je[0+Qe]=parseFloat(Ze[2]),Je[4+Qe]=parseFloat(Ze[3]),Je[8+Qe]=parseFloat(Ze[4]),Je[12+Qe]=parseFloat(Ze[5])}else if("ORIGX"===u.substr(0,5)){J.origx||(J.origx=new j);var et=u.split(/\s+/),tt=parseInt(u[5])-1,nt=J.origx.elements;nt[0+tt]=parseFloat(et[1]),nt[4+tt]=parseFloat(et[2]),nt[8+tt]=parseFloat(et[3]),nt[12+tt]=parseFloat(et[4])}else if("SCALE"===u.substr(0,5)){J.scale||(J.scale=new j);var rt=u.split(/\s+/),it=parseInt(u[5])-1,ot=J.scale.elements;ot[0+it]=parseFloat(rt[1]),ot[4+it]=parseFloat(rt[2]),ot[8+it]=parseFloat(rt[3]),ot[12+it]=parseFloat(rt[4])}else if("CRYST1"===c){var at=parseFloat(u.substr(6,9)),st=parseFloat(u.substr(15,9)),lt=parseFloat(u.substr(24,9)),ut=parseFloat(u.substr(33,7)),ct=parseFloat(u.substr(40,7)),dt=parseFloat(u.substr(47,7)),ft=u.substr(55,11).trim(),pt=new Float32Array(9);pt[0]=at,pt[4]=st,pt[8]=lt,K.push(pt),0===he&&(J.a=at,J.b=st,J.c=lt,J.alpha=ut,J.beta=ct,J.gamma=dt,J.spacegroup=ft)}}(0,t.length,t)})),H.finalize();var ge=te.length;if(ge){z.eachChain((function(e){e.entityIndex=ge})),te.forEach((function(e,t){var n=e.chainList.map((function(e){return ie[e]}));z.entityList.push(new Gb(z,t,e.name,"polymer",n))}));var ve=te.length,ye=z.getResidueProxy(),be={};z.eachChain((function(e){e.entityIndex===ge&&(ye.index=e.residueOffset,be[ye.resname]||(be[ye.resname]=[]),be[ye.resname].push(e.index))})),Object.keys(be).forEach((function(e){var t=be[e],n="non-polymer",r=ne[e]||e;Wd.includes(e)&&(r="water",n="water"),z.entityList.push(new Gb(z,ve,r,n,t)),ve+=1}))}void 0!==J.a?z.unitcell=new qb(J):z.unitcell=void 0,(se.length||le.length)&&Bh(z,ae),z.finalizeAtoms(),e||Uh(z),Vh(z),z.finalizeBonds(),se.length||le.length||zh(z),Xh(z),sl&&rl.timeEnd("PdbParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("pdb",Jb),gl.add("pdb1",Jb),gl.add("ent",Jb);var ex=/\s+/,tx=/'((?:(?!'\s).)*)'|"((?:(?!"\s).)*)"|(\S+)/g,nx=/"/g,rx=/^['"]+|['"]+$/g;function ix(e){return!e||e[0]!==e[e.length-1]||"'"!==e[0]&&'"'!==e[0]?e:e.substring(1,e.length-1)}function ox(e,t){Array.isArray(e[t])||Object.keys(e).forEach((function(t){e[t]=[e[t]]}))}function ax(e){return"?"!==e}function sx(e,t){return ax(e)?e:t}function lx(e){switch(e.toLowerCase()){case"?":case"sing":return 1;case"doub":return 2;case"trip":return 3;case"quad":return 4}return 0}var ux=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"cif"},t.prototype._parse=function(){rl.time("CifParser._parse "+this.name);var e,t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w=this.structure,_=this.structureBuilder,S=this.firstModelOnly,C=this.asTrajectory,E=this.cAlphaOnly,k=w.frames,P={},M={},A={},T=!1,R=null,I=!1,O=!1,L=!1,D=[],F=null,N=null,B=null,z=null,H=[],V=w.atomMap,G=w.atomStore;G.resize(this.streamer.data.length/100);var W,$=0,q=0;if(this.streamer.eachChunkOfLines((function(j){!function(j,U,X){for(var K=j;K<U;++K)if(n=X[K],((r=n.trim())||T||O)&&"#"!==r[0])if("data_"===r.substring(0,5))P.data=r.substring(5).trim();else if(";"===r[0])T?(O?(F===D.length&&(F=0),D[F].push(R),F+=1):!1===B?P[N]=R:P[N][B]=R,T=!1,R=null):(T=!0,R=r.substring(1));else if("loop_"===r)O=!0,L=!0,D.length=0,H.length=0,F=0;else if("_"===r[0]){var Y,Z,Q;if(O&&!L&&(O=!1),O)Z=(Y=r.split("."))[0].substring(1),Q=Y[1],1===Y.length?(Q=!1,P[Z]||(P[Z]=[]),D.push(P[Z])):(P[Z]||(P[Z]={}),P[Z][Q]?sl&&rl.warn(Z,Q,"already exists"):(P[Z][Q]=[],D.push(P[Z][Q]),H.push(Q))),N=Z,B=Q,z=!0;else{var J=r.match(tx),ee=J[0],te=J[1];Z=(Y=ee.split("."))[0].substring(1),Q=Y[1],1===Y.length?(Q=!1,P[Z]=te):(P[Z]||(P[Z]={}),P[Z][Q]?sl&&rl.warn(Z,Q,"already exists"):P[Z][Q]=te),te||(I=!0),N=Z,B=Q}}else if(T)R+=n;else if(O){if(!r)continue;if("atom_site"===N){var ne=r.split(ex);z&&(i=H.indexOf("auth_asym_id"),o=H.indexOf("auth_seq_id"),a=H.indexOf("label_atom_id"),s=H.indexOf("label_comp_id"),l=H.indexOf("label_asym_id"),u=H.indexOf("label_entity_id"),c=H.indexOf("label_alt_id"),g=H.indexOf("Cartn_x"),v=H.indexOf("Cartn_y"),y=H.indexOf("Cartn_z"),f=H.indexOf("id"),p=H.indexOf("type_symbol"),d=H.indexOf("group_PDB"),b=H.indexOf("B_iso_or_equiv"),h=H.indexOf("pdbx_PDB_model_num"),m=H.indexOf("pdbx_PDB_ins_code"),x=H.indexOf("occupancy"),z=!1,W=parseInt(ne[h]),C&&(e=[],t=0));var re=parseInt(ne[h]);if(W!==re&&(C&&(0===q&&k.push(new Float32Array(e)),e=new Float32Array(3*G.count),k.push(e),t=0),q+=1),W=re,S&&q>0)continue;var ie=ne[a].replace(nx,"");if(E&&"CA"!==ie)continue;var oe=parseFloat(ne[g]),ae=parseFloat(ne[v]),se=parseFloat(ne[y]);if(C){var le=3*t;if(e[le+0]=oe,e[le+1]=ae,e[le+2]=se,t+=1,q>0)continue}var ue=ne[s],ce=parseInt(ne[o]),de=ne[m];de="?"===de?"":de;var fe=ne[i],pe=ne[l],he="H"===ne[d][0]?1:0,me=ne[p],ge=parseFloat(ne[b]),ve=parseFloat(ne[x]),ye=ne[c];if(ye="."===ye?"":ye,G.growIfFull(),G.atomTypeId[$]=V.add(ie,me),G.x[$]=oe,G.y[$]=ae,G.z[$]=se,G.serial[$]=parseInt(ne[f]),G.bfactor[$]=isNaN(ge)?0:ge,G.occupancy[$]=isNaN(ve)?0:ve,G.altloc[$]=ye.charCodeAt(0),_.addAtom(q,fe,pe,ue,ce,he,void 0,de),sl){var be=M[pe];void 0!==be&&be!==fe&&sl&&rl.warn(be,fe)}M[pe]=fe;var xe=ne[u];A[xe]||(A[xe]=new Set),A[xe].add(w.chainStore.count-1),$+=1}else{var we=r.match(tx),_e=we.length;F===D.length&&(F=0);for(var Se=0;Se<_e;++Se)D[F+Se].push(we[Se]);F+=_e}L=!1}else if("'"===r[0]&&"'"===r[r.length-1]){var Ce=r.substring(1,r.length-1);!1===B?P[N]=Ce:P[N][B]=Ce}else I?!1===B?P[N]=r:P[N][B]=r:sl&&rl.log("CifParser._parse: unknown state",r);else T=!1,O=!1,I=!1,D.length=0,F=null,N=null,B=null,z=null,H.length=0}(0,j.length,j)})),P.chem_comp&&P.chem_comp_atom)!function(e,t,n){var r,i,o=t.atomStore,a=t.atomMap,s=e.chem_comp,l=e.chem_comp_atom,u=e.chem_comp_bond;s&&(s.name&&(t.title=s.name.trim().replace(rx,"")),s.id&&(t.id=s.id.trim().replace(rx,"")));var c={};if(l){var d,f,p,h;for(ox(l,"comp_id"),i=l.comp_id.length,r=0;r<i;++r)o.growIfFull(),d=l.atom_id[r].replace(nx,""),f=l.type_symbol[r],c[d]=r,o.atomTypeId[r]=a.add(d,f),o.x[r]=l.model_Cartn_x[r],o.y[r]=l.model_Cartn_y[r],o.z[r]=l.model_Cartn_z[r],o.serial[r]=r,p=l.pdbx_component_comp_id[r],h=l.pdbx_residue_numbering?l.pdbx_residue_numbering[r]:1,n.addAtom(0,"","",p,h,!0);for(r=0;r<i;++r){var m=r+i;o.growIfFull(),d=l.atom_id[r].replace(nx,""),f=l.type_symbol[r],o.atomTypeId[m]=a.add(d,f),o.x[m]=l.pdbx_model_Cartn_x_ideal[r],o.y[m]=l.pdbx_model_Cartn_y_ideal[r],o.z[m]=l.pdbx_model_Cartn_z_ideal[r],o.serial[m]=m,p=l.pdbx_component_comp_id[r],h=l.pdbx_residue_numbering?l.pdbx_residue_numbering[r]:1,n.addAtom(1,"","",p,h,!0)}}if(l&&u){var g,v,y;ox(u,"comp_id"),i=u.comp_id.length;var b=l.comp_id.length,x=t.getAtomProxy(),w=t.getAtomProxy();for(r=0;r<i;++r)g=u.atom_id_1[r].replace(nx,""),v=u.atom_id_2[r].replace(nx,""),y=lx(u.value_order[r]),x.index=c[g],w.index=c[v],t.bondStore.growIfFull(),t.bondStore.addBond(x,w,y),x.index+=b,w.index+=b,t.bondStore.growIfFull(),t.bondStore.addBond(x,w,y)}}(P,w,_),_.finalize(),w.finalizeAtoms(),w.finalizeBonds(),Qh(w);else if(P.atom_site_type_symbol&&P.atom_site_label&&P.atom_site_fract_x)!function(e,t,n){var r=t.atomStore,i=t.atomMap;e.data&&(t.id=e.data,t.name=e.data),t.unitcell=new qb({a:parseFloat(e.cell_length_a),b:parseFloat(e.cell_length_b),c:parseFloat(e.cell_length_c),alpha:parseFloat(e.cell_angle_alpha),beta:parseFloat(e.cell_angle_beta),gamma:parseFloat(e.cell_angle_gamma),spacegroup:ix(e["symmetry_space_group_name_H-M"])});for(var o=new U,a=new U,s=e.atom_site_type_symbol.length,l=0;l<s;++l){r.growIfFull();var u=e.atom_site_label[l],c=e.atom_site_type_symbol[l];r.atomTypeId[l]=i.add(u,c),o.set(e.atom_site_fract_x[l],e.atom_site_fract_y[l],e.atom_site_fract_z[l]),o.applyMatrix4(t.unitcell.fracToCart),a.add(o),r.x[l]=o.x,r.y[l]=o.y,r.z[l]=o.z,e.atom_site_occupancy&&(r.occupancy[l]=parseFloat(e.atom_site_occupancy[l])),r.serial[l]=l,n.addAtom(0,"","","HET",1,!0)}a.divideScalar(s),t.center=a,Xh(t);var d=new U,f=new U,p=t.biomolDict.SUPERCELL.partList[0].matrixList,h=s;function m(e){return i.get(r.atomTypeId[e]).covalent}for(var g=new j,v=function(e){var t=m(e);o.set(r.x[e],r.y[e],r.z[e]),p.forEach((function(i){if(!g.equals(i)){d.copy(o),d.applyMatrix4(i);for(var a=0;a<s;++a){f.set(r.x[a],r.y[a],r.z[a]);var l=d.distanceToSquared(f),u=m(a)+t,c=u+.3,p=u-.5;if(l<c*c&&l>p*p)return r.growIfFull(),r.atomTypeId[h]=r.atomTypeId[e],r.x[h]=d.x,r.y[h]=d.y,r.z[h]=d.z,r.occupancy[h]=r.occupancy[e],r.serial[h]=h,r.altloc[h]="A".charCodeAt(0),n.addAtom(0,"","","HET",1,!0),void(h+=1)}}}))},y=0;y<s;++y)v(y)}(P,w,_),_.finalize(),w.finalizeAtoms(),Vh(w),w.finalizeBonds();else{var X=function(e,t,n){var r,i,o,a,s=[],l=[],u=e.struct_conf;if(u)for(ox(u,"id"),r=0,i=u.beg_auth_seq_id.length;r<i;++r){var c=parseInt(u.pdbx_PDB_helix_class[r]);Number.isNaN(c)||(o=u.pdbx_beg_PDB_ins_code[r],a=u.pdbx_end_PDB_ins_code[r],s.push([n[u.beg_label_asym_id[r]],parseInt(u.beg_auth_seq_id[r]),sx(o,""),n[u.end_label_asym_id[r]],parseInt(u.end_auth_seq_id[r]),sx(a,""),(Xb[c]||Xb[0]).charCodeAt(0)]))}var d=e.struct_sheet_range;if(d)for(ox(d,"id"),r=0,i=d.beg_auth_seq_id.length;r<i;++r)o=d.pdbx_beg_PDB_ins_code[r],a=d.pdbx_end_PDB_ins_code[r],l.push([n[d.beg_label_asym_id[r]],parseInt(d.beg_auth_seq_id[r]),sx(o,""),n[d.end_label_asym_id[r]],parseInt(d.end_auth_seq_id[r]),sx(a,"")]);return!(!u&&!d)&&{helices:s,sheets:l}}(P,0,M);if(function(e,t,n){var r={},i=t.biomolDict;if(e.pdbx_struct_oper_list){var o=e.pdbx_struct_oper_list;ox(o,"id"),o.id.forEach((function(e,t){var n=new j,i=n.elements;i[0]=parseFloat(o["matrix[1][1]"][t]),i[1]=parseFloat(o["matrix[1][2]"][t]),i[2]=parseFloat(o["matrix[1][3]"][t]),i[4]=parseFloat(o["matrix[2][1]"][t]),i[5]=parseFloat(o["matrix[2][2]"][t]),i[6]=parseFloat(o["matrix[2][3]"][t]),i[8]=parseFloat(o["matrix[3][1]"][t]),i[9]=parseFloat(o["matrix[3][2]"][t]),i[10]=parseFloat(o["matrix[3][3]"][t]),i[3]=parseFloat(o["vector[1]"][t]),i[7]=parseFloat(o["vector[2]"][t]),i[11]=parseFloat(o["vector[3]"][t]),n.transpose(),r[e]=n}))}if(e.pdbx_struct_assembly_gen){var a=e.pdbx_struct_assembly_gen;ox(a,"assembly_id");var s=function(e){var t={};return e.replace(/[()']/g,"").split(",").forEach((function(e){if(e.includes("-"))for(var n=e.split("-"),i=parseInt(n[0]),o=parseInt(n[1]);i<=o;++i)t[i]=r[i];else t[e]=r[e]})),t};a.assembly_id.forEach((function(e,t){var r={},o=a.oper_expression[t].replace(/['"]\(|['"]/g,"");if(o.includes(")(")||o.indexOf("(")>0){o=o.split("(");var l=s(o[0]),u=s(o[1]);Object.keys(l).forEach((function(e){Object.keys(u).forEach((function(t){var n=new j;n.multiplyMatrices(l[e],u[t]),r[e+"x"+t]=n}))}))}else r=s(o);var c=[];for(var d in r)c.push(r[d]);var f=e;/^(0|[1-9][0-9]*)$/.test(f)&&(f="BU"+f);for(var p=a.asym_id_list[t].split(","),h=0,m=p.length;h<m;++h)p[h]=n[p[h]];void 0===i[f]&&(i[f]=new Oh(f)),i[f].addPart(c,p)}))}if(e.struct_ncs_oper){var l=e.struct_ncs_oper;ox(l,"id");var u="NCS";i[u]=new Oh(u);var c=i[u].addPart();l.id.forEach((function(e,t){if("given"!==l.code[t]){var n=new j,r=n.elements;r[0]=parseFloat(l["matrix[1][1]"][t]),r[1]=parseFloat(l["matrix[1][2]"][t]),r[2]=parseFloat(l["matrix[1][3]"][t]),r[4]=parseFloat(l["matrix[2][1]"][t]),r[5]=parseFloat(l["matrix[2][2]"][t]),r[6]=parseFloat(l["matrix[2][3]"][t]),r[8]=parseFloat(l["matrix[3][1]"][t]),r[9]=parseFloat(l["matrix[3][2]"][t]),r[10]=parseFloat(l["matrix[3][3]"][t]),r[3]=parseFloat(l["vector[1]"][t]),r[7]=parseFloat(l["vector[2]"][t]),r[11]=parseFloat(l["vector[3]"][t]),n.transpose(),c.matrixList.push(n)}})),0===c.matrixList.length&&delete i[u]}var d={};if(e.cell){var f=e.cell,p=parseFloat(f.length_a),h=parseFloat(f.length_b),m=parseFloat(f.length_c),g=new Float32Array(9);g[0]=p,g[4]=h,g[8]=m,t.boxes.push(g),d.a=p,d.b=h,d.c=m,d.alpha=parseFloat(f.angle_alpha),d.beta=parseFloat(f.angle_beta),d.gamma=parseFloat(f.angle_gamma)}e.symmetry&&(d.spacegroup=ix(e.symmetry["space_group_name_H-M"]));var v=new j;if(e.database_PDB_matrix){var y=e.database_PDB_matrix,b=v.elements;b[0]=parseFloat(y["origx[1][1]"]),b[1]=parseFloat(y["origx[1][2]"]),b[2]=parseFloat(y["origx[1][3]"]),b[4]=parseFloat(y["origx[2][1]"]),b[5]=parseFloat(y["origx[2][2]"]),b[6]=parseFloat(y["origx[2][3]"]),b[8]=parseFloat(y["origx[3][1]"]),b[9]=parseFloat(y["origx[3][2]"]),b[10]=parseFloat(y["origx[3][3]"]),b[3]=parseFloat(y["origx_vector[1]"]),b[7]=parseFloat(y["origx_vector[2]"]),b[11]=parseFloat(y["origx_vector[3]"]),v.transpose(),d.origx=v}var x=new j;if(e.atom_sites){var w=e.atom_sites,_=x.elements;_[0]=parseFloat(w["fract_transf_matrix[1][1]"]),_[1]=parseFloat(w["fract_transf_matrix[1][2]"]),_[2]=parseFloat(w["fract_transf_matrix[1][3]"]),_[4]=parseFloat(w["fract_transf_matrix[2][1]"]),_[5]=parseFloat(w["fract_transf_matrix[2][2]"]),_[6]=parseFloat(w["fract_transf_matrix[2][3]"]),_[8]=parseFloat(w["fract_transf_matrix[3][1]"]),_[9]=parseFloat(w["fract_transf_matrix[3][2]"]),_[10]=parseFloat(w["fract_transf_matrix[3][3]"]),_[3]=parseFloat(w["fract_transf_vector[1]"]),_[7]=parseFloat(w["fract_transf_vector[2]"]),_[11]=parseFloat(w["fract_transf_vector[3]"]),x.transpose(),d.scale=x}void 0!==d.a?t.unitcell=new qb(d):t.unitcell=void 0}(P,w,M),function(e,t,n){var r=e.struct_conn;if(r){ox(r,"id");for(var i=/"/g,o=t.getAtomProxy(),a=t.getAtomProxy(),s={},l=0,u=r.id.length;l<u;++l){var c=r.conn_type_id[l];if("hydrog"!==c&&"mismat"!==c&&"saltbr"!==c&&"1_555"===r.ptnr1_symmetry[l]&&"1_555"===r.ptnr2_symmetry[l]){var d=r.pdbx_ptnr1_PDB_ins_code[l],f=r.pdbx_ptnr1_label_alt_id[l],p=r.ptnr1_auth_seq_id[l]+(ax(d)?"^"+d:"")+":"+n[r.ptnr1_label_asym_id[l]]+"."+r.ptnr1_label_atom_id[l].replace(i,"")+(ax(f)?"%"+f:""),h=s[p];if(!h){var m=new zs(p);if(m.selection.error){sl&&rl.warn("invalid selection for connection",p);continue}h=t.getAtomIndices(m),s[p]=h}var g=r.pdbx_ptnr2_PDB_ins_code[l],v=r.pdbx_ptnr2_label_alt_id[l],y=r.ptnr2_auth_seq_id[l]+(ax(g)?"^"+g:"")+":"+n[r.ptnr2_label_asym_id[l]]+"."+r.ptnr2_label_atom_id[l].replace(i,"")+(ax(v)?"%"+v:""),b=s[y];if(!b){var x=new zs(y);if(x.selection.error){sl&&rl.warn("invalid selection for connection",y);continue}b=t.getAtomIndices(x),s[y]=b}var w=h.length,_=b.length;if(w>_){var S=w;w=_,_=S;var C=h;h=b,b=C}if(0!==w&&0!==_)for(var E=0;E<_;++E)o.index=h[E%w],a.index=b[E],o&&a?t.bondStore.addBond(o,a,lx(r.pdbx_value_order[l])):rl.log("atoms for connection not found");else sl&&rl.warn("no atoms found for",p,y)}}}}(P,w,M),function(e,t,n){if(e.entity){ox(e.entity,"id");for(var r=e.entity,i=r.id.length,o=0;o<i;++o){var a=r.pdbx_description[o],s=r.type[o],l=Array.from(n[r.id[o]]);t.entityList[o]=new Gb(t,o,a,s,l)}}}(P,w,A),P.struct&&P.struct.title&&(w.title=P.struct.title.trim().replace(rx,"")),P.entry&&P.entry.id&&(w.id=P.entry.id.trim().replace(rx,"")),P.pdbx_audit_revision_history){if(P.pdbx_audit_revision_history.revision_date){ox(P.pdbx_audit_revision_history,"revision_date");var K=P.pdbx_audit_revision_history.revision_date.filter(ax);K.length&&(w.header.releaseDate=K[0])}if(P.pdbx_database_status.recvd_initial_deposition_date){ox(P.pdbx_database_status,"recvd_initial_deposition_date");var Y=P.pdbx_database_status.recvd_initial_deposition_date.filter(ax);Y.length&&(w.header.depositionDate=Y[0])}}else if(P.database_PDB_rev){if(P.database_PDB_rev.date){ox(P.database_PDB_rev,"date");var Z=P.database_PDB_rev.date.filter(ax);Z.length&&(w.header.releaseDate=Z[0])}if(P.database_PDB_rev.date_original){ox(P.database_PDB_rev,"date_original");var Q=P.database_PDB_rev.date_original.filter(ax);Q.length&&(w.header.depositionDate=Q[0])}}P.reflns&&P.reflns.d_resolution_high?ax(P.reflns.d_resolution_high)&&(w.header.resolution=parseFloat(P.reflns.d_resolution_high)):P.refine&&P.refine.ls_d_res_high&&ax(P.refine.ls_d_res_high)&&(w.header.resolution=parseFloat(P.refine.ls_d_res_high)),P.refine&&P.refine.ls_R_factor_R_free&&ax(P.refine.ls_R_factor_R_free)&&(w.header.rFree=parseFloat(P.refine.ls_R_factor_R_free)),P.refine&&P.refine.ls_R_factor_R_work&&ax(P.refine.ls_R_factor_R_work)&&(w.header.rWork=parseFloat(P.refine.ls_R_factor_R_work)),P.exptl&&P.exptl.method&&(ox(P.exptl,"method"),w.header.experimentalMethods=P.exptl.method.map((function(e){return e.replace(rx,"")}))),_.finalize(),w.finalizeAtoms(),Vh(w),w.finalizeBonds(),X?Bh(w,X):zh(w),Xh(w),w.extraData.cif=P}sl&&rl.timeEnd("CifParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("cif",ux),gl.add("mcif",ux),gl.add("mmcif",ux);var cx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"gro"},t.prototype._parse=function(){sl&&rl.time("GroParser._parse "+this.name);var e,t,n=this.structure,r=this.structureBuilder,i=this.firstModelOnly,o=this.asTrajectory,a=this.cAlphaOnly,s=n.frames,l=n.boxes,u=this.streamer.peekLines(3);n.title=u[0].trim();var c,d,f,p,h=5+(u[2].length-u[2].lastIndexOf(".")-1),m=20+h,g=20+2*h,v=parseInt(u[1]),y=v+3,b=n.atomMap,x=n.atomStore;x.resize(v);var w=0,_=0,S=0;this.streamer.eachChunkOfLines((function(n){!function(n,u,C){for(var E=n;E<u;++E){var k=++S-1,P=C[E];if(P)if(k%y===0)o&&(e=new Float32Array(3*v),s.push(e),t=0);else if(k%y===1);else if(k%y===y-1){var M=P.trim().split(/\s+/),A=new Float32Array(9);if(A[0]=10*parseFloat(M[0]),A[4]=10*parseFloat(M[1]),A[8]=10*parseFloat(M[2]),l.push(A),i)return!0;_+=1}else{if(c=P.substr(10,5).trim(),a&&"CA"!==c)continue;var T=10*parseFloat(P.substr(20,h)),R=10*parseFloat(P.substr(m,h)),I=10*parseFloat(P.substr(g,h));if(o){var O=3*t;if(e[O+0]=T,e[O+1]=R,e[O+2]=I,t+=1,k>y)continue}d=P.substr(5,5).trim(),f=parseInt(P.substr(0,5)),p=parseInt(P.substr(15,5)),x.growIfFull(),x.atomTypeId[w]=b.add(c),x.x[w]=T,x.y[w]=R,x.z[w]=I,x.serial[w]=p,r.addAtom(_,"","",d,f,0,"l"),w+=1}}}(0,n.length,n)})),r.finalize(),n.finalizeAtoms(),Uh(n),Vh(n),n.finalizeBonds(),zh(n),sl&&rl.timeEnd("GroParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("gro",cx);var dx=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"].concat(["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"]);function fx(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function px(e){return fx(DataView,e)}function hx(e){return fx(Int8Array,e)}function mx(e){return fx(Int32Array,e,4)}function gx(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,i=0;r<n;++r,i+=2)t[r]=e[i]<<8^e[i+1]<<0;return t}function vx(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,i=0;r<n;++r,i+=4)t[r]=e[i]<<24^e[i+1]<<16^e[i+2]<<8^e[i+3]<<0;return t}function yx(e,t,n){var r=e.length,i=1/t;n||(n=new Float32Array(r));for(var o=0;o<r;++o)n[o]=e[o]*i;return n}function bx(e,t){var n,r;if(!t){var i=0;for(n=0,r=e.length;n<r;n+=2)i+=e[n+1];t=new e.constructor(i)}var o=0;for(n=0,r=e.length;n<r;n+=2)for(var a=e[n],s=e[n+1],l=0;l<s;++l)t[o]=a,++o;return t}function xx(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;r<n;++r)t[r]=e[r]+t[r-1];return t}function wx(e,t){var n,r,i=e instanceof Int8Array?127:32767,o=-i-1,a=e.length;if(!t){var s=0;for(n=0;n<a;++n)e[n]<i&&e[n]>o&&++s;t=new Int32Array(s)}for(n=0,r=0;n<a;){for(var l=0;e[n]===i||e[n]===o;)l+=e[n],++n;l+=e[n],++n,t[r]=l,++r}return t}function _x(e,t,n){return yx(wx(e,mx(n)),t,n)}function Sx(e,t,n){var r=wx(e,mx(n));return function(e,t,n){return yx(xx(e,mx(n)),t,n)}(r,t,fx(Float32Array,r,4))}function Cx(e){var t=0,n=new DataView(e.buffer);function r(e){for(var t={},n=0;n<e;n++){t[s()]=s()}return t}function i(n){var r=e.subarray(t,t+n);return t+=n,r}function o(n){var r=e.subarray(t,t+n);t+=n;var i=65535;if(n>i){for(var o=[],a=0;a<r.length;a+=i)o.push(String.fromCharCode.apply(null,r.subarray(a,a+i)));return o.join("")}return String.fromCharCode.apply(null,r)}function a(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=s();return t}function s(){var s,l,u=e[t];if(0===(128&u))return t++,u;if(128===(240&u))return t++,r(l=15&u);if(144===(240&u))return t++,a(l=15&u);if(160===(224&u))return t++,o(l=31&u);if(224===(224&u))return s=n.getInt8(t),t++,s;switch(u){case 192:return t++,null;case 194:return t++,!1;case 195:return t++,!0;case 196:return l=n.getUint8(t+1),t+=2,i(l);case 197:return l=n.getUint16(t+1),t+=3,i(l);case 198:return l=n.getUint32(t+1),t+=5,i(l);case 202:return s=n.getFloat32(t+1),t+=5,s;case 203:return s=n.getFloat64(t+1),t+=9,s;case 204:return s=e[t+1],t+=2,s;case 205:return s=n.getUint16(t+1),t+=3,s;case 206:return s=n.getUint32(t+1),t+=5,s;case 208:return s=n.getInt8(t+1),t+=2,s;case 209:return s=n.getInt16(t+1),t+=3,s;case 210:return s=n.getInt32(t+1),t+=5,s;case 217:return l=n.getUint8(t+1),t+=2,o(l);case 218:return l=n.getUint16(t+1),t+=3,o(l);case 219:return l=n.getUint32(t+1),t+=5,o(l);case 220:return l=n.getUint16(t+1),t+=3,a(l);case 221:return l=n.getUint32(t+1),t+=5,a(l);case 222:return l=n.getUint16(t+1),t+=3,r(l);case 223:return l=n.getUint32(t+1),t+=5,r(l)}throw new Error("Unknown type 0x"+u.toString(16))}return s()}function Ex(e,t,n,r){switch(e){case 1:return function(e,t){var n=e.length;t||(t=new Float32Array(n/4));for(var r=px(t),i=px(e),o=0,a=0,s=n/4;o<s;++o,a+=4)r.setFloat32(a,i.getFloat32(a),!0);return t}(t);case 2:return hx(t);case 3:return gx(t);case 4:return vx(t);case 5:return fx(Uint8Array,t);case 6:return bx(vx(t),new Uint8Array(n));case 7:return bx(vx(t));case 8:return xx(bx(vx(t)),i);case 9:return function(e,t,n){return yx(bx(e,mx(n)),t,n)}(vx(t),vx(r)[0]);case 10:return Sx(gx(t),vx(r)[0]);case 11:return yx(gx(t),vx(r)[0]);case 12:return _x(gx(t),vx(r)[0]);case 13:return _x(hx(t),vx(r)[0]);case 14:return wx(gx(t));case 15:return wx(hx(t))}var i}function kx(e,t){var n=(t=t||{}).ignoreFields,r={};return dx.forEach((function(t){var i=!!n&&-1!==n.indexOf(t),o=e[t];i||void 0===o||(o instanceof Uint8Array?r[t]=Ex.apply(null,function(e){var t=px(e),n=t.getInt32(0),r=t.getInt32(4),i=e.subarray(8,12);return[n,e=e.subarray(12),r,i]}(o)):r[t]=o)})),r}var Px={0:"i".charCodeAt(0),1:"s".charCodeAt(0),2:"h".charCodeAt(0),3:"e".charCodeAt(0),4:"g".charCodeAt(0),5:"b".charCodeAt(0),6:"t".charCodeAt(0),7:"l".charCodeAt(0),"-1":"".charCodeAt(0)},Mx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"mmtf"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){var e,t,n,r,i;sl&&rl.time("MmtfParser._parse "+this.name);var o,a,s,l,u,c,d=this.structure,f=kx(Cx(this.streamer.data));if(["depositionDate","releaseDate","resolution","rFree","rWork","experimentalMethods"].forEach((function(e){void 0!==f[e]&&(d.header[e]=f[e])})),d.id=f.structureId,d.title=f.title,d.atomStore.addField("formalCharge",1,"int8"),this.firstModelOnly||this.asTrajectory){for(u=1,s=0,e=0,t=l=f.chainsPerModel[0];e<t;++e)s+=f.groupsPerChain[e];for(a=0,e=0,t=s;e<t;++e)a+=(i=f.groupList[f.groupTypeList[e]]).atomNameList.length;o=f.numBonds,c=[l]}else o=f.numBonds,a=f.numAtoms,s=f.numGroups,l=f.numChains,u=f.numModels,c=f.chainsPerModel;if(o+=s,this.asTrajectory)for(e=0,t=f.numModels;e<t;++e){var p=new Float32Array(3*a),h=a*e;for(n=0;n<a;++n){var m=3*n,g=n+h;p[m]=f.xCoordList[g],p[m+1]=f.yCoordList[g],p[m+2]=f.zCoordList[g]}d.frames.push(p)}var v=new Uint32Array(o),y=new Uint32Array(o),b=new Uint8Array(o),x=new Uint32Array(a),w=new Int8Array(a),_=new Uint32Array(s),S=new Uint32Array(s),C=new Uint16Array(s),E=new Uint16Array(l),k=new Uint32Array(l),P=new Uint32Array(l),M=new Uint32Array(u),A=new Uint32Array(u),T=0;for(e=0,t=u;e<t;++e){var R=c[e];for(M[e]=T,A[e]=R,n=0;n<R;++n)E[n+T]=e;T+=R}var I=f.groupsPerChain,O=0;for(e=0,t=l;e<t;++e){var L=I[e];for(k[e]=O,P[e]=L,n=0;n<L;++n)_[n+O]=e;O+=L}var D=0,F=0;for(e=0,t=s;e<t;++e){var N=(i=f.groupList[f.groupTypeList[e]]).atomNameList.length,B=i.formalChargeList,z=i.bondAtomList,H=i.bondOrderList;for(n=0,r=H.length;n<r;++n)v[F]=D+z[2*n],y[F]=D+z[2*n+1],b[F]=H[n],F+=1;for(S[e]=D,C[e]=N,n=0;n<N;++n)x[D]=e,w[D]=B[n],D+=1}var U=f.bondAtomList;if(U)for(f.bondOrderList&&b.set(f.bondOrderList,F),e=0,t=U.length;e<t;e+=2){var V=U[e],G=U[e+1];V<a&&G<a&&(v[F]=V,y[F]=G,F+=1)}d.bondStore.length=b.length,d.bondStore.count=F,d.bondStore.atomIndex1=v,d.bondStore.atomIndex2=y,d.bondStore.bondOrder=b,d.atomStore.length=a,d.atomStore.count=a,d.atomStore.residueIndex=x,d.atomStore.atomTypeId=new Uint16Array(a),d.atomStore.x=f.xCoordList.subarray(0,a),d.atomStore.y=f.yCoordList.subarray(0,a),d.atomStore.z=f.zCoordList.subarray(0,a),d.atomStore.serial=f.atomIdList.subarray(0,a),d.atomStore.bfactor=f.bFactorList.subarray(0,a),d.atomStore.altloc=f.altLocList.subarray(0,a),d.atomStore.occupancy=f.occupancyList.subarray(0,a),d.atomStore.formalCharge=w,d.residueStore.length=s,d.residueStore.count=s,d.residueStore.chainIndex=_,d.residueStore.residueTypeId=f.groupTypeList,d.residueStore.atomOffset=S,d.residueStore.atomCount=C,d.residueStore.resno=f.groupIdList.subarray(0,s),d.residueStore.sstruc=f.secStructList.subarray(0,s),d.residueStore.inscode=f.insCodeList.subarray(0,s),d.chainStore.length=l,d.chainStore.count=l,d.chainStore.entityIndex=new Uint16Array(l),d.chainStore.modelIndex=E,d.chainStore.residueOffset=k,d.chainStore.residueCount=P,d.chainStore.chainname=f.chainNameList.subarray(0,4*l),d.chainStore.chainid=f.chainIdList.subarray(0,4*l),d.modelStore.length=u,d.modelStore.count=u,d.modelStore.chainOffset=M,d.modelStore.chainCount=A;var W={};for(e=0,t=f.groupList.length;e<t;++e){var $=f.groupList[e],q=[];for(n=0,r=$.atomNameList.length;n<r;++n){var X=$.elementList[n].toUpperCase(),K=$.atomNameList[n];q.push(d.atomMap.add(K,X))}var Y=$.chemCompType.toUpperCase(),Z=Md.includes(Y),Q=$.bondOrderList.length,J=new Array(Q),ee=new Array(Q);for(n=0;n<Q;++n)J[n]=$.bondAtomList[2*n],ee[n]=$.bondAtomList[2*n+1];var te={atomIndices1:J,atomIndices2:ee,bondOrders:$.bondOrderList};W[e]=d.residueMap.add($.groupName,q,Z,Y,te)}for(e=0,t=s;e<t;++e)d.residueStore.residueTypeId[e]=W[d.residueStore.residueTypeId[e]];for(e=0,t=d.atomStore.count;e<t;++e){var ne=d.atomStore.residueIndex[e],re=d.residueMap.list[d.residueStore.residueTypeId[ne]],ie=d.residueStore.atomOffset[ne];d.atomStore.atomTypeId[e]=re.atomTypeIdList[e-ie]}if(f.secStructList){var oe=f.secStructList.length;for(e=0,t=d.residueStore.count;e<t;++e){var ae=Px[d.residueStore.sstruc[e%oe]];void 0!==ae&&(d.residueStore.sstruc[e]=ae)}}if(f.entityList&&f.entityList.forEach((function(e,t){d.entityList[t]=new Gb(d,t,e.description,e.type,e.chainIndexList)})),f.bioAssemblyList&&f.bioAssemblyList.forEach((function(e,t){var n=t+1,r=new Oh(""+n);d.biomolDict["BU"+n]=r;var i={};e.transformList.forEach((function(e){var t=(new j).fromArray(e.matrix).transpose(),n=e.chainIndexList.map((function(e){for(var t="",n=0;n<4;++n){var r=f.chainNameList[4*e+n];if(!r)break;t+=String.fromCharCode(r)}return t})),o=i[n.toString()];o?o.matrixList.push(t):i[n.toString()]=r.addPart([t],n)}))})),f.ncsOperatorList){var se=new Oh("NCS"),le=se.addPart();f.ncsOperatorList.forEach((function(e){var t=(new j).fromArray(e).transpose();le.matrixList.push(t)})),le.matrixList.length>0&&(d.biomolDict.NCS=se)}var ue=f.unitCell;ue&&Array.isArray(ue)&&ue[0]?d.unitcell=new qb({a:ue[0],b:ue[1],c:ue[2],alpha:ue[3],beta:ue[4],gamma:ue[5],spacegroup:f.spaceGroup}):d.unitcell=void 0,qh(d,!0),$h(d,!0),d.finalizeAtoms(),d.finalizeBonds(),Xh(d),sl&&rl.timeEnd("MmtfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("mmtf",Mx);var Ax=/\s+/,Tx={1:1,2:2,3:3,am:1,ar:1,du:1,un:1,nc:0},Rx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"mol2"},t.prototype._parse=function(){sl&&rl.time("Mol2Parser._parse "+this.name);var e,t,n=this.structure,r=this.structureBuilder,i=this.firstModelOnly,o=this.asTrajectory,a=n.frames,s=!1,l=n.atomMap,u=n.atomStore;u.resize(Math.round(this.streamer.data.length/60)),u.addField("partialCharge",1,"float32");var c=0,d=0,f=0,p=-1,h=0,m=0,g=n.getAtomProxy(),v=n.getAtomProxy();this.streamer.eachChunkOfLines((function(y){!function(y,b,x){for(var w=y;w<b;++w){var _=x[w].trim();if(""!==_&&"#"!==_[0])if("@"===_[0])"@<TRIPOS>MOLECULE"===_?(m=1,d=0,++p):"@<TRIPOS>ATOM"===_?(m=2,f=u.count,o&&(t=0,e=new Float32Array(3*h),a.push(e),p>0&&(s=!0))):m="@<TRIPOS>BOND"===_?3:0;else if(1===m){if(0===d)n.title=_,n.id=_;else if(1===d){var S=_.split(Ax);h=parseInt(S[0])}++d}else if(2===m){var C=_.split(Ax);if(i&&p>0)continue;var E=parseFloat(C[2]),k=parseFloat(C[3]),P=parseFloat(C[4]);if(o){var M=3*t;if(e[M+0]=E,e[M+1]=k,e[M+2]=P,t+=1,s)continue}var A=C[0],T=C[1],R=C[5].split(".")[0],I=C[6]?parseInt(C[6]):1,O=C[7]?C[7]:"",L=C[8]?parseFloat(C[8]):0;u.growIfFull(),u.atomTypeId[c]=l.add(T,R),u.x[c]=E,u.y[c]=k,u.z[c]=P,u.serial[c]=A,u.partialCharge[c]=L,r.addAtom(p,"","",O,I,1),c+=1}else if(3===m){if(i&&p>0)continue;if(o&&p>0)continue;var D=_.split(Ax);g.index=parseInt(D[1])-1+f,v.index=parseInt(D[2])-1+f;var F=Tx[D[3]];n.bondStore.addBond(g,v,F)}}}(0,y.length,y)})),r.finalize(),n.finalizeAtoms(),Uh(n),$h(n,!0),qh(n,!0),n.finalizeBonds(),Qh(n),zh(n),sl&&rl.timeEnd("Mol2Parser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("mol2",Rx);var Ix=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pdbqt"},Object.defineProperties(t.prototype,n),t}(Jb);gl.add("pdbqt",Ix);var Ox=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pqr"},Object.defineProperties(t.prototype,n),t}(Jb);gl.add("pqr",Ox);var Lx=/> <(.+)>/,Dx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"sdf"},t.prototype._parse=function(){sl&&rl.time("SdfParser._parse "+this.name);var e=this.structure,t=this.structureBuilder,n=this.firstModelOnly,r=this.asTrajectory,i=this.streamer.peekLines(2);e.id=i[0].trim(),e.title=i[1].trim();var o,a,s=e.frames,l=!1,u=e.atomMap,c=e.atomStore;c.resize(Math.round(this.streamer.data.length/50)),c.addField("formalCharge",1,"int8");var d,f,p,h,m,g,v,y=e.getAtomProxy(),b=e.getAtomProxy(),x=0,w=0,_=0,S=0,C=[],E=!1,k={};e.extraData.sdf=C,this.streamer.eachChunkOfLines((function(i){!function(i,P,M){for(var A=i;A<P;++A){var T=M[A];if("$$$$"===T.substr(0,4))w=-1,++_,S=c.count,C.push(k),k={},E=!1;else if(3===w)f=parseInt(T.substr(0,3)),p=parseInt(T.substr(3,3)),v=(g=m=(h=4)+f)+p,r&&(a=0,o=new Float32Array(3*f),s.push(o),_>0&&(l=!0));else if(w>=h&&w<m){if(n&&_>0)continue;var R=parseFloat(T.substr(0,10)),I=parseFloat(T.substr(10,10)),O=parseFloat(T.substr(20,10));if(r){var L=3*a;if(o[L+0]=R,o[L+1]=I,o[L+2]=O,a+=1,l)continue}var D=T.substr(31,3).trim(),F=D+(x+1);c.growIfFull(),c.atomTypeId[x]=u.add(F,D),c.x[x]=R,c.y[x]=I,c.z[x]=O,c.serial[x]=x,c.formalCharge[x]=0,t.addAtom(_,"","","HET",1,1),x+=1}else if(w>=g&&w<v){if(n&&_>0)continue;if(r&&_>0)continue;y.index=parseInt(T.substr(0,3))-1+S,b.index=parseInt(T.substr(3,3))-1+S;var N=parseInt(T.substr(6,3));e.bondStore.addBond(y,b,N)}else if(T.match(/M {2}CHG/))for(var B=parseInt(T.substr(6,3)),z=0,j=10;z<B;++z,j+=8){var H=parseInt(T.substr(j,3))-1+S,U=parseInt(T.substr(j+4,3));c.formalCharge[H]=U}else(d=T.match(Lx))?(E=d[1],k[E]=[]):!1!==E&&T&&k[E].push(T);++w}}(0,i.length,i)})),t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),Qh(e),sl&&rl.timeEnd("SdfParser._parse "+this.name)},t.prototype._postProcess=function(){Qh(this.structure)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("sdf",Dx),gl.add("sd",Dx),gl.add("mol",Dx);function Fx(e,t,n){return parseInt(e.substr(t,n).trim())}var Nx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"prmtop"},t.prototype._parse=function(){sl&&rl.time("PrmtopParser._parse "+this.name);var e=this.structure,t=this.structureBuilder,n=e.atomMap,r=e.atomStore;r.addField("partialCharge",1,"float32"),r.addField("radius",1,"float32");var i,o,a,s,l,u,c,d,f,p,h,m=[],g={},v=["NATOM","NTYPES","NBONH","MBONA","NTHETH","MTHETA","NPHIH","MPHIA","NHPARM","NPARM","NNB","NRES","NBONA","NTHETA","NPHIA","NUMBND","NUMANG","NPTRA","NATYP","NPHB","IFPERT","NBPER","NGPER","NDPER","MBPER","MGPER","MDPER","IFBOX","NMXRS","IFCAP","NUMEXTRA","NCOPY"];v.forEach((function(e){g[e]=0})),this.streamer.eachChunkOfLines((function(e){!function(e,t,n){for(var y=e;y<t;++y){var b=n[y],x=b.trim();if(x)if(b.startsWith("%FORMAT"));else if(b.startsWith("%FLAG")){var w=b.substr(5).trim();p=0,"TITLE"===w?f=0:"POINTERS"===w?f=1:"ATOM_NAME"===w?f=2:"CHARGE"===w?f=3:"MASS"===w?f=4:"RESIDUE_LABEL"===w?f=5:"RESIDUE_POINTER"===w?f=6:"BONDS_INC_HYDROGEN"===w?(h=0,f=7):"BONDS_WITHOUT_HYDROGEN"===w?(h=g.NBONH,f=8):f="RADII"===w?9:void 0}else if(0===f)m.push(x);else if(1===f){for(var _=Math.min(p+10,32),S=0;p<_;++S,++p)g[v[p]]=parseInt(b.substr(8*S,8).trim());i=new Array(g.NATOM),o=new Float32Array(g.NATOM),a=new Float32Array(g.NATOM),r.resize(g.NATOM);var C=g.NBONH+g.MBONA;s=new Uint32Array(C),l=new Uint32Array(C),u=new Uint8Array(C),c=new Array(g.NRES),d=new Uint32Array(g.NRES)}else if(2===f)for(var E=Math.min(p+20,g.NATOM),k=0;p<E;++k,++p)i[p]=b.substr(4*k,4).trim();else if(3===f)for(var P=Math.min(p+5,g.NATOM),M=0;p<P;++M,++p)o[p]=parseFloat(b.substr(16*M,16))/18.2223;else if(4===f);else if(5===f)for(var A=Math.min(p+20,g.NRES),T=0;p<A;++T,++p)c[p]=b.substr(4*T,4).trim();else if(6===f)for(var R=Math.min(p+10,g.NRES),I=0;p<R;++I,++p)d[p]=Fx(b,8*I,8);else if(7===f)for(var O=Math.min(p+10,3*g.NBONH),L=0;p<O;++L,++p){var D=p%3;0===D&&(s[h]=Fx(b,8*L,8)/3),1===D&&(l[h]=Fx(b,8*L,8)/3,u[h]=1,++h)}else if(8===f)for(var F=Math.min(p+10,3*g.MBONA),N=0;p<F;++N,++p){var B=p%3;0===B&&(s[h]=Fx(b,8*N,8)/3),1===B&&(l[h]=Fx(b,8*N,8)/3,u[h]=1,++h)}else if(9===f)for(var z=Math.min(p+5,g.NATOM),j=0;p<z;++j,++p)a[p]=parseFloat(b.substr(16*j,16))}}(0,e.length,e)})),e.title=m.join(" ");for(var y=g.NATOM,b=0,x=c[0],w=1,_=0;_<y;++_)_+1===d[b+1]&&(++b,x=c[b],w=b+1),r.atomTypeId[_]=n.add(i[_]),r.serial[_]=_+1,t.addAtom(0,"","",x,w);r.partialCharge.set(o),r.radius.set(a),e.bondStore.length=u.length,e.bondStore.count=u.length,e.bondStore.atomIndex1=s,e.bondStore.atomIndex2=l,e.bondStore.bondOrder=u,t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),$h(e,!0),qh(e,!0,!0),Uh(e,!0),Qh(e),sl&&rl.timeEnd("PrmtopParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("prmtop",Nx),gl.add("parm7",Nx);var Bx=/\s+/,zx=/(^\*|REMARK)*/,jx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"psf"},t.prototype._parse=function(){sl&&rl.time("PsfParser._parse "+this.name);var e=this.structure,t=this.structureBuilder,n=e.atomMap,r=e.atomStore;r.addField("partialCharge",1,"float32");var i,o,a,s,l,u,c=[],d=0,f=0,p=0;this.streamer.eachChunkOfLines((function(e){!function(e,h,m){for(var g=e;g<h;++g){var v=m[g].trim();if(v)if(2===i){var y=v.split(Bx),b=parseInt(y[0]),x=y[1],w=parseInt(y[2]),_=y[3],S=y[4],C=parseFloat(y[6]);x!==a&&(o=Hh(f),++f),r.growIfFull(),r.atomTypeId[d]=n.add(S),r.serial[d]=b,r.partialCharge[d]=C,t.addAtom(0,o,o,_,w),d+=1,a=x}else if(3===i)for(var E=v.split(Bx),k=0,P=E.length;k<P;k+=2)s[p]=parseInt(E[k])-1,l[p]=parseInt(E[k+1])-1,u[p]=1,p+=1;else if(1===i)c.push(v.replace(zx,"").trim());else if(4===i);else if(5===i);else if(6===i);else if(v.includes("!NATOM")){i=2;var M=parseInt(v.split(Bx)[0]);r.resize(M)}else if(v.includes("!NBOND")){i=3;var A=parseInt(v.split(Bx)[0]);s=new Uint32Array(A),l=new Uint32Array(A),u=new Uint8Array(A)}else v.includes("!NTITLE")?i=1:v.includes("!NTHETA")?i=4:v.includes("!NPHI")?i=5:v.includes("!NIMPHI")&&(i=6);else i=void 0}}(0,e.length,e)})),e.title=c.join(" "),e.bondStore.length=u.length,e.bondStore.count=p,e.bondStore.atomIndex1=s,e.bondStore.atomIndex2=l,e.bondStore.bondOrder=u,t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),$h(e,!0),qh(e,!0,!0),Qh(e),sl&&rl.timeEnd("PsfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("psf",jx);var Hx=/\[ (.+) \]/,Ux=/\s+/,Vx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"top"},t.prototype._parse=function(){sl&&rl.time("TopParser._parse "+this.name);var e=this.structure,t=this.structureBuilder,n=e.atomMap,r=e.bondStore,i=e.atomStore;i.addField("partialCharge",1,"float32");var o,a,s=[],l={};this.streamer.eachChunkOfLines((function(t){!function(t,n,r){for(var i=t;i<n;++i){var u=r[i],c=u.trim();if(c&&"*"!==c[0]&&";"!==c[0]){if(c.startsWith("#include"))throw new Error("TopParser: #include statements not allowed");var d=u.match(Hx);if(null===d){var f=c.indexOf(";");if(-1!==f&&(c=c.substring(0,f).trim()),2===a){var p=c.split(Ux)[0];l[p]=o}else if(3===a){var h=c.split(Ux);o.atoms.push([parseInt(h[2]),h[3],h[4],parseFloat(h[6])])}else if(4===a){var m=c.split(Ux);o.bonds.push([parseInt(m[0]),parseInt(m[1])])}else if(0===a)e.title=c;else if(1===a){var g=c.split(Ux);s.push([g[0],parseInt(g[1])])}}else{var v=d[1];"moleculetype"===v?(a=2,o={atoms:[],bonds:[]}):a="atoms"===v?3:"bonds"===v?4:"system"===v?0:"molecules"===v?1:void 0}}}}(0,t.length,t)}));var u=0,c=0;s.forEach((function(e){var t=e[0],n=e[1],r=l[t];u+=n*r.atoms.length,c+=n*r.bonds.length})),i.resize(u),r.resize(c);var d,f=0,p=0,h=0,m=0,g=0,v=0;s.forEach((function(e){for(var o=e[0],a=e[1],s=l[o],u=Hh(m),c=function(e){d=-1;var a=Wd.includes(o)?u:Hh(h);s.atoms.forEach((function(e){var r=e[0],o=e[1],s=e[2],l=e[3];r!==d&&++p,i.atomTypeId[f]=n.add(s),i.serial[f]=f+1,i.partialCharge[f]=l,t.addAtom(0,u,a,o,p+1),++f,d=r})),s.bonds.forEach((function(e){r.atomIndex1[g]=v+e[0]-1,r.atomIndex2[g]=v+e[1]-1,++g})),++h,v+=s.atoms.length},y=0;y<a;++y)c();++m})),r.count=c,t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),$h(e,!0),qh(e,!0,!0),Qh(e),sl&&rl.timeEnd("TopParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vb);gl.add("top",Vx);var Gx=function(e){function t(t,n){e.call(this,t,n),this.frames=new xg(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"trajectory"},n.__objName.get=function(){return"frames"},Object.defineProperties(t.prototype,n),t}(Hb),Wx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dcd"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("DcdParser._parse "+this.name);var e=za(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o={},a=0,s=new Int32Array(e,0,23),l=s[0]!==t.getInt32(0);if(84!==s[0])for(var u=e.byteLength,c=0;c<u;c+=4)t.setFloat32(c,t.getFloat32(c),!0);84!==s[0]&&rl.error("dcd bad format, header block start"),"CORD"!==String.fromCharCode(t.getUint8(4),t.getUint8(5),t.getUint8(6),t.getUint8(7))&&rl.error("dcd bad format, format string");var d=!1,f=!1,p=!1;0!==s[22]&&(d=!0,0!==s[12]&&(f=!0),1===s[13]&&(p=!0)),o.NSET=s[2],o.ISTART=s[3],o.NSAVC=s[4],o.NAMNF=s[10],o.DELTA=d?t.getFloat32(44,l):t.getFloat64(44,l),84!==s[22]&&rl.error("dcd bad format, header block end"),a=a+84+8;var h=t.getInt32(a,l),m=a+1;if((h-4)%80!==0&&rl.error("dcd bad format, title block start"),o.TITLE=Fa(new Uint8Array(e,m,h)),t.getInt32(m+h+4-1,l)!==h&&rl.error("dcd bad format, title block end"),a=a+h+8,4!==t.getInt32(a,l)&&rl.error("dcd bad format, natom block start"),o.NATOM=t.getInt32(a+4,l),4!==t.getInt32(a+8,l)&&rl.error("dcd bad format, natom block end"),a=a+4+8,o.NAMNF>0)rl.error("dcd format with fixed atoms unsupported, aborting");else{for(var g=o.NATOM,v=4*g,y=0,b=o.NSET;y<b;++y){if(f){a+=4;var x=new Float32Array(9);x[0]=t.getFloat64(a,l),x[4]=t.getFloat64(a+16,l),x[8]=t.getFloat64(a+40,l),i.push(x),a+=48,a+=4}for(var w=new Float32Array(3*g),_=0;_<3;++_){t.getInt32(a,l)!==v&&rl.error("dcd bad format, coord block start",y,_),a+=4;for(var S=new Float32Array(e,a,g),C=0;C<g;++C)w[3*C+_]=S[C];a+=v,t.getInt32(a,l)!==v&&rl.error("dcd bad format, coord block end",y,_),a+=4}if(r.push(w),p)a+=4+t.getInt32(a,l)+4}o.DELTA&&(n.deltaTime=20.45482949774598*o.DELTA),o.ISTART>=1&&(n.timeOffset=(o.ISTART-1)*n.deltaTime),sl&&rl.timeEnd("DcdParser._parse "+this.name)}},Object.defineProperties(t.prototype,n),t}(Gx);function $x(e,t){if(e)throw new TypeError("Not a valid NetCDF v3.x file: "+t)}function qx(e){e.offset%4!==0&&e.skip(4-e.offset%4)}function Xx(e){var t=e.readUint32(),n=e.readChars(t);return qx(e),n}gl.add("dcd",Wx);var Kx=1,Yx=2,Zx=3,Qx=4,Jx=5,ew=6;function tw(e){switch(Number(e)){case Kx:return"byte";case Yx:return"char";case Zx:return"short";case Qx:return"int";case Jx:return"float";case ew:return"double";default:return"undefined"}}function nw(e){switch(Number(e)){case Kx:case Yx:return 1;case Zx:return 2;case Qx:case Jx:return 4;case ew:return 8;default:return-1}}function rw(e){switch(String(e)){case"byte":return Kx;case"char":return Yx;case"short":return Zx;case"int":return Qx;case"float":return Jx;case"double":return ew;default:return-1}}function iw(e,t){if(1!==e){for(var n=new Array(e),r=0;r<e;r++)n[r]=t();return n}return t()}function ow(e,t,n){switch(t){case Kx:return e.readBytes(n);case Yx:return function(e){if(0===e.charCodeAt(e.length-1))return e.substring(0,e.length-1);return e}(e.readChars(n));case Zx:return iw(n,e.readInt16.bind(e));case Qx:return iw(n,e.readInt32.bind(e));case Jx:return iw(n,e.readFloat32.bind(e));case ew:return iw(n,e.readFloat64.bind(e));default:return void $x(!0,"non valid type "+t)}}function aw(e,t){var n={recordDimension:{length:e.readUint32()}};n.version=t;var r=function(e){var t,n,r,i=e.readUint32();if(0===i)return $x(0!==e.readUint32(),"wrong empty tag for list of dimensions"),[];$x(10!==i,"wrong tag for list of dimensions");var o=e.readUint32();t=new Array(o);for(var a=0;a<o;a++){var s=Xx(e),l=e.readUint32();0===l&&(n=a,r=s),t[a]={name:s,size:l}}return{dimensions:t,recordId:n,recordName:r}}(e);n.recordDimension.id=r.recordId,n.recordDimension.name=r.recordName,n.dimensions=r.dimensions,n.globalAttributes=sw(e);var i=function(e,t,n){var r,i=e.readUint32(),o=0;if(0===i)return $x(0!==e.readUint32(),"wrong empty tag for list of variables"),[];$x(11!==i,"wrong tag for list of variables");var a=e.readUint32();r=new Array(a);for(var s=0;s<a;s++){for(var l=Xx(e),u=e.readUint32(),c=new Array(u),d=0;d<u;d++)c[d]=e.readUint32();var f=sw(e),p=e.readUint32();$x(p<1&&p>6,"non valid type "+p);var h=e.readUint32(),m=e.readUint32();2===n&&($x(m>0,"offsets larger than 4GB not supported"),m=e.readUint32()),c[0]===t&&(o+=h),r[s]={name:l,dimensions:c,attributes:f,type:tw(p),size:h,offset:m,record:c[0]===t}}return{variables:r,recordStep:o}}(e,r.recordId,t);return n.variables=i.variables,n.recordDimension.recordStep=i.recordStep,n}function sw(e){var t,n=e.readUint32();if(0===n)return $x(0!==e.readUint32(),"wrong empty tag for list of attributes"),[];$x(12!==n,"wrong tag for list of attributes");var r=e.readUint32();t=new Array(r);for(var i=0;i<r;i++){var o=Xx(e),a=e.readUint32();$x(a<1||a>6,"non valid type "+a);var s=e.readUint32(),l=ow(e,a,s);qx(e),t[i]={name:o,type:tw(a),value:l}}return t}var lw=function(e){var t=new jl(e);t.setBigEndian(),$x("CDF"!==t.readChars(3),"should start with CDF");var n=t.readByte();$x(n>2,"unknown version"),this.header=aw(t,n),this.buffer=t},uw={version:{configurable:!0},recordDimension:{configurable:!0},dimensions:{configurable:!0},globalAttributes:{configurable:!0},variables:{configurable:!0}};uw.version.get=function(){return 1===this.header.version?"classic format":"64-bit offset format"},uw.recordDimension.get=function(){return this.header.recordDimension},uw.dimensions.get=function(){return this.header.dimensions},uw.globalAttributes.get=function(){return this.header.globalAttributes},uw.variables.get=function(){return this.header.variables},lw.prototype.hasDataVariable=function(e){return-1!==this.header.variables.findIndex((function(t){return t.name===e}))},lw.prototype.getDataVariable=function(e){var t;return $x(void 0===(t="string"===typeof e?this.header.variables.find((function(t){return t.name===e})):e),"variable not found"),this.buffer.seek(t.offset),t.record?function(e,t,n){for(var r=rw(t.type),i=t.size?t.size/nw(r):1,o=n.length,a=new Array(o),s=n.recordStep,l=0;l<o;l++){var u=e.offset;a[l]=ow(e,r,i),e.seek(u+s)}return a}(this.buffer,t,this.header.recordDimension):function(e,t){for(var n=rw(t.type),r=t.size/nw(n),i=new Array(r),o=0;o<r;o++)i[o]=ow(e,n,1);return i}(this.buffer,t)},Object.defineProperties(lw.prototype,uw);var cw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"nctraj"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("NctrajParser._parse "+this.name);var e=new lw(this.streamer.data),t=this.frames,n=t.coordinates,r=t.boxes,i=t.times;e.getDataVariable("coordinates").forEach((function(e){n.push(new Float32Array(e))})),e.hasDataVariable("cell_lengths")&&e.getDataVariable("cell_lengths").forEach((function(e){r.push(new Float32Array(e))})),e.hasDataVariable("time")&&e.getDataVariable("time").forEach((function(e){i.push(e)})),i.length>=1&&(t.timeOffset=i[0]),i.length>=2&&(t.deltaTime=i[1]-i[0]),sl&&rl.timeEnd("NctrajParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Gx);gl.add("nctraj",cw),gl.add("ncdf",cw),gl.add("nc",cw);var dw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"trr"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("TrrParser._parse "+this.name);for(var e=za(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o=n.times,a=0;;){a+=8;var s=t.getInt32(a);a+=4,a+=s;var l=t.getInt32(a+8),u=t.getInt32(a+12),c=t.getInt32(a+16),d=t.getInt32(a+28),f=t.getInt32(a+32),p=t.getInt32(a+36),h=t.getInt32(a+40);a+=52;var m=l/9,g=3*h;if(8===m?o.push(t.getFloat64(a)):o.push(t.getFloat32(a)),a+=2*m,l){var v=new Float32Array(9);if(8===m)for(var y=0;y<9;++y)v[y]=10*t.getFloat64(a),a+=8;else for(var b=0;b<9;++b)v[b]=10*t.getFloat32(a),a+=4;i.push(v)}if(a+=u,a+=c,d){var x=void 0;if(8===m){x=new Float32Array(g);for(var w=0;w<g;++w)x[w]=10*t.getFloat64(a),a+=8}else{for(var _=new Uint32Array(e,a,g),S=0;S<g;++S){var C=_[S];_[S]=(255&C)<<24|(65280&C)<<8|C>>8&65280|C>>24&255}x=new Float32Array(e,a,g);for(var E=0;E<g;++E)x[E]*=10,a+=4}r.push(x)}if(a+=f,(a+=p)>=e.byteLength)break}o.length>=1&&(n.timeOffset=o[0]),o.length>=2&&(n.deltaTime=o[1]-o[0]),sl&&rl.timeEnd("TrrParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Gx);gl.add("trr",dw);var fw=new Uint32Array([0,0,0,0,0,0,0,0,0,8,10,12,16,20,25,32,40,50,64,80,101,128,161,203,256,322,406,512,645,812,1024,1290,1625,2048,2580,3250,4096,5060,6501,8192,10321,13003,16384,20642,26007,32768,41285,52015,65536,82570,104031,131072,165140,208063,262144,330280,416127,524287,660561,832255,1048576,1321122,1664510,2097152,2642245,3329021,4194304,5284491,6658042,8388607,10568983,13316085,16777216]);function pw(e){for(var t=1,n=0;e>=t&&n<32;)n++,t<<=1;return n}var hw=new Uint8Array(32);function mw(e,t){var n=1,r=0;hw[0]=1;for(var i=0;i<e;i++){var o=void 0,a=0;for(o=0;o<n;o++)a+=hw[o]*t[i],hw[o]=255&a,a>>=8;for(;0!==a;)hw[o++]=255&a,a>>=8;n=o}var s=1;for(n--;hw[n]>=s;)r++,s*=2;return r+8*n}function gw(e,t,n,r){for(var i=(1<<n)-1,o=r[1],a=r[2],s=e[0],l=0;n>=8;)l|=(a=a<<8|t[s++])>>o<<n-8,n-=8;return n>0&&(o<n&&(o+=8,a=a<<8|t[s++]),l|=a>>(o-=n)&(1<<n)-1),l&=i,e[0]=s,e[1]=o,e[2]=a,l}var vw=new Int32Array(32);function yw(e,t,n,r,i,o,a){var s=0;for(vw[1]=0,vw[2]=0,vw[3]=0;r>8;)vw[s++]=gw(e,t,8,a),r-=8;r>0&&(vw[s++]=gw(e,t,r,a));for(var l=n-1;l>0;l--){for(var u=0,c=s-1;c>=0;c--){var d=(u=u<<8|vw[c])/i[l]|0;vw[c]=d,u-=d*i[l]}o[l]=u}o[0]=vw[0]|vw[1]<<8|vw[2]<<16|vw[3]<<24}var bw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"xtc"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("XtcParser._parse "+this.name);for(var e=za(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o=n.times,a=new Int32Array(6),s=new Int32Array(3),l=new Int32Array(3),u=new Uint32Array(3),c=new Float32Array(3),d=new Float32Array(3),f=0,p=new Int32Array(3),h=new Uint32Array(p.buffer);;){var m=void 0,g=t.getInt32(f+4);f+=12;var v=3*g;o.push(t.getFloat32(f)),f+=4;for(var y=new Float32Array(9),b=0;b<9;++b)y[b]=10*t.getFloat32(f),f+=4;if(i.push(y),g<=9){m=new Float32Array(g);for(var x=0;x<g;++x)m[x]=t.getFloat32(f),f+=4}else{p[0]=p[1]=p[2]=0,s[0]=s[1]=s[2]=0,u[0]=u[1]=u[2]=0,l[0]=l[1]=l[2]=0,c[0]=c[1]=c[2]=0,d[0]=d[1]=d[2]=0,m=new Float32Array(v);var w=0,_=t.getInt32(f);f+=4;var S=t.getFloat32(f);f+=4,a[0]=t.getInt32(f),a[1]=t.getInt32(f+4),a[2]=t.getInt32(f+8),a[3]=t.getInt32(f+12),a[4]=t.getInt32(f+16),a[5]=t.getInt32(f+20),s[0]=a[3]-a[0]+1,s[1]=a[4]-a[1]+1,s[2]=a[5]-a[2]+1,f+=24;var C=void 0;(s[0]|s[1]|s[2])>16777215?(l[0]=pw(s[0]),l[1]=pw(s[1]),l[2]=pw(s[2]),C=0):C=mw(3,s);var E=t.getInt32(f);f+=4;var k=E-1,P=fw[k=9>k?9:k]/2|0,M=fw[E]/2|0;u[0]=u[1]=u[2]=fw[E];var A=4*Math.ceil(t.getInt32(f)/4);f+=4;var T=1/S,R=0,I=0,O=new Uint8Array(e,f);for(c[0]=c[1]=c[2]=0;I<_;){0===C?(c[0]=gw(p,O,l[0],h),c[1]=gw(p,O,l[1],h),c[2]=gw(p,O,l[2],h)):yw(p,O,3,C,s,c,h),I++,c[0]+=a[0],c[1]+=a[1],c[2]+=a[2],d[0]=c[0],d[1]=c[1],d[2]=c[2];var L=0;if(1===gw(p,O,1,h)&&(R=gw(p,O,5,h),R-=L=R%3,L--),R>0){c[0]=c[1]=c[2]=0;for(var D=0;D<R;D+=3){if(yw(p,O,3,E,u,c,h),I++,c[0]+=d[0]-M,c[1]+=d[1]-M,c[2]+=d[2]-M,0===D){var F=c[0];c[0]=d[0],d[0]=F,F=c[1],c[1]=d[1],d[1]=F,F=c[2],c[2]=d[2],d[2]=F,m[w++]=d[0]*T,m[w++]=d[1]*T,m[w++]=d[2]*T}else d[0]=c[0],d[1]=c[1],d[2]=c[2];m[w++]=c[0]*T,m[w++]=c[1]*T,m[w++]=c[2]*T}}else m[w++]=c[0]*T,m[w++]=c[1]*T,m[w++]=c[2]*T;if(E+=L,L<0?(M=P,P=E>9?fw[E-1]/2|0:0):L>0&&(P=M,M=fw[E]/2|0),u[0]=u[1]=u[2]=fw[E],0===u[0]||0===u[1]||0===u[2])return void console.error("(xdrfile error) Undefined error.")}f+=A}for(var N=0;N<v;N++)m[N]*=10;if(r.push(m),f>=e.byteLength)break}o.length>=1&&(n.timeOffset=o[0]),o.length>=2&&(n.deltaTime=o[1]-o[0]),sl&&rl.timeEnd("XtcParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Gx);gl.add("xtc",bw);var xw=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.volume=new Ep(this.name,this.path),this.voxelSize=Sa(r.voxelSize,1)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"volume"},n.__objName.get=function(){return"volume"},t.prototype._afterParse=function(){this.volume.setMatrix(this.getMatrix()),e.prototype._afterParse.call(this)},t.prototype.getMatrix=function(){return new j},Object.defineProperties(t.prototype,n),t}(Hb),ww=/\s+/,_w=/-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,Sw=.529177210859,Cw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"cube"},t.prototype._parse=function(){sl&&rl.time("CubeParser._parse "+this.name);var e=this.volume,t=this.streamer.peekLines(6),n={},r=Sw*this.voxelSize;function i(e,n){var r=t[e].trim().split(ww)[n];return parseFloat(r)}n.atomCount=Math.abs(i(2,0)),n.originX=i(2,1)*Sw,n.originY=i(2,2)*Sw,n.originZ=i(2,3)*Sw,n.NVX=i(3,0),n.NVY=i(4,0),n.NVZ=i(5,0),n.basisX=new U(i(3,1),i(3,2),i(3,3)).multiplyScalar(r),n.basisY=new U(i(4,1),i(4,2),i(4,3)).multiplyScalar(r),n.basisZ=new U(i(5,1),i(5,2),i(5,3)).multiplyScalar(r);var o=new Float32Array(n.NVX*n.NVY*n.NVZ),a=0,s=0,l=i(2,0)>0?0:1;this.streamer.eachChunkOfLines((function(e){!function(e,t,r){for(var i=e;i<t;++i){var u=r[i].trim();if(""!==u&&s>=n.atomCount+6+l)for(var c=u.match(_w),d=0,f=c.length;d<f;++d)o[a]=parseFloat(c[d]),++a;++s}}(0,e.length,e)})),e.header=n,e.setData(o,n.NVZ,n.NVY,n.NVX),sl&&rl.timeEnd("CubeParser._parse "+this.name)},t.prototype.getMatrix=function(){var e=this.volume.header,t=new j;return t.multiply((new j).makeTranslation(e.originX,e.originY,e.originZ)),t.multiply((new j).makeBasis(e.basisZ,e.basisY,e.basisX)),t},Object.defineProperties(t.prototype,n),t}(xw);gl.add("cub",Cw),gl.add("cube",Cw);var Ew=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dsn6"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("Dsn6Parser._parse "+this.name);var e,t,n=this.volume,r={},i=za(this.streamer.data),o=new Int16Array(i),a=new Uint8Array(i),s=String.fromCharCode.apply(null,a.subarray(0,512));if(s.startsWith(":-)"))r.xStart=parseInt(s.substr(10,5)),r.yStart=parseInt(s.substr(15,5)),r.zStart=parseInt(s.substr(20,5)),r.xExtent=parseInt(s.substr(32,5)),r.yExtent=parseInt(s.substr(38,5)),r.zExtent=parseInt(s.substr(42,5)),r.xRate=parseInt(s.substr(52,5)),r.yRate=parseInt(s.substr(58,5)),r.zRate=parseInt(s.substr(62,5)),r.xlen=parseFloat(s.substr(73,10))*this.voxelSize,r.ylen=parseFloat(s.substr(83,10))*this.voxelSize,r.zlen=parseFloat(s.substr(93,10))*this.voxelSize,r.alpha=parseFloat(s.substr(103,10)),r.beta=parseFloat(s.substr(113,10)),r.gamma=parseFloat(s.substr(123,10)),e=parseFloat(s.substr(138,12))/100,t=parseInt(s.substr(155,8)),r.sigma=100*parseFloat(s.substr(170,12));else{if(100!==o[18])for(var l=0,u=o.length;l<u;++l){var c=o[l];o[l]=(255&c)<<8|c>>8&255}r.xStart=o[0],r.yStart=o[1],r.zStart=o[2],r.xExtent=o[3],r.yExtent=o[4],r.zExtent=o[5],r.xRate=o[6],r.yRate=o[7],r.zRate=o[8];var d=1/o[17],f=d*this.voxelSize;r.xlen=o[9]*f,r.ylen=o[10]*f,r.zlen=o[11]*f,r.alpha=o[12]*d,r.beta=o[13]*d,r.gamma=o[14]*d,e=o[15]/100,t=o[16],r.gamma=o[14]*d}n.header=r,sl&&rl.log(r,e,t);for(var p=new Float32Array(r.xExtent*r.yExtent*r.zExtent),h=512,m=Math.ceil(r.xExtent/8),g=Math.ceil(r.yExtent/8),v=Math.ceil(r.zExtent/8),y=0;y<v;++y)for(var b=0;b<g;++b)for(var x=0;x<m;++x)for(var w=0;w<8;++w)for(var _=8*y+w,S=0;S<8;++S)for(var C=8*b+S,E=0;E<8;++E){var k=8*x+E;if(!(k<r.xExtent&&C<r.yExtent&&_<r.zExtent)){h+=8-E;break}p[(k*r.yExtent+C)*r.zExtent+_]=(a[h]-t)/e,++h}n.setData(p,r.zExtent,r.yExtent,r.xExtent),r.sigma&&n.setStats(void 0,void 0,void 0,r.sigma),sl&&rl.timeEnd("Dsn6Parser._parse "+this.name)},t.prototype.getMatrix=function(){var e=this.volume.header,t=[e.xlen,0,0],n=[e.ylen*Math.cos(Math.PI/180*e.gamma),e.ylen*Math.sin(Math.PI/180*e.gamma),0],r=[e.zlen*Math.cos(Math.PI/180*e.beta),e.zlen*(Math.cos(Math.PI/180*e.alpha)-Math.cos(Math.PI/180*e.gamma)*Math.cos(Math.PI/180*e.beta))/Math.sin(Math.PI/180*e.gamma),0];r[2]=Math.sqrt(e.zlen*e.zlen*Math.sin(Math.PI/180*e.beta)*Math.sin(Math.PI/180*e.beta)-r[1]*r[1]);var i=[[],t,n,r],o=[0,e.xRate,e.yRate,e.zRate],a=[0,1,2,3],s=new j;return s.set(i[a[1]][0]/o[a[1]],i[a[2]][0]/o[a[2]],i[a[3]][0]/o[a[3]],0,i[a[1]][1]/o[a[1]],i[a[2]][1]/o[a[2]],i[a[3]][1]/o[a[3]],0,i[a[1]][2]/o[a[1]],i[a[2]][2]/o[a[2]],i[a[3]][2]/o[a[3]],0,0,0,0,1),s.multiply((new j).makeRotationY(Xa(90))),s.multiply((new j).makeTranslation(-e.zStart,e.yStart,e.xStart)),s.multiply((new j).makeScale(-1,1,1)),s},Object.defineProperties(t.prototype,n),t}(xw);gl.add("dsn6",Ew),gl.add("brix",Ew);var kw=/\s+/,Pw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"dx"},t.prototype._parse=function(){sl&&rl.time("DxParser._parse "+this.name);var e=this.volume,t=this.streamer.peekLines(30),n=this.parseHeaderLines(t),r=this.volume.header,i=n.dataLineStart,o=r.nx*r.ny*r.nz,a=new Float32Array(o),s=0,l=0;this.streamer.eachChunkOfLines((function(e){!function(e,t,n){for(var r=e;r<t;++r){if(s<o&&l>i){var u=n[r].trim();if(""!==u)for(var c=u.split(kw),d=0,f=c.length;d<f;++d)a[s]=parseFloat(c[d]),++s}++l}}(0,e.length,e)})),e.setData(a,r.nz,r.ny,r.nx),sl&&rl.timeEnd("DxParser._parse "+this.name)},t.prototype.parseHeaderLines=function(e){for(var t=this,n={},r=e.length,i=0,o=0,a=0,s=0;s<r;++s){var l=void 0,u=e[s];if(u.startsWith("object 1"))l=u.split(kw),n.nx=parseInt(l[5]),n.ny=parseInt(l[6]),n.nz=parseInt(l[7]);else if(u.startsWith("origin"))l=u.split(kw),n.xmin=parseFloat(l[1]),n.ymin=parseFloat(l[2]),n.zmin=parseFloat(l[3]);else if(u.startsWith("delta"))l=u.split(kw),0===a?n.hx=parseFloat(l[1])*t.voxelSize:1===a?n.hy=parseFloat(l[2])*t.voxelSize:2===a&&(n.hz=parseFloat(l[3])*t.voxelSize),a+=1;else if(u.startsWith("object 3")){i=s,o+=u.length+1;break}o+=u.length+1}return this.volume.header=n,{dataLineStart:i,headerByteCount:o}},t.prototype.getMatrix=function(){var e=this.volume.header,t=new j;return t.multiply((new j).makeRotationY(Xa(90))),t.multiply((new j).makeTranslation(-e.zmin,e.ymin,e.xmin)),t.multiply((new j).makeScale(-e.hz,e.hy,e.hx)),t},Object.defineProperties(t.prototype,n),t}(xw);gl.add("dx",Pw);var Mw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dxbin"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("DxbinParser._parse "+this.name);for(var e=za(this.streamer.data),t=function(e,t,n){void 0===t&&(t=10485760),void 0===n&&(n="\n");for(var r="",i=[],o=0;o<e.length;o+=t){var a=Fa(e.subarray(o,o+t)),s=a.lastIndexOf(n);if(-1===s)r+=a;else{var l=r+a.substr(0,s);i=i.concat(l.split(n)),r=s===a.length-n.length?"":a.substr(s+n.length)}}return""!==r&&i.push(r),i}(new Uint8Array(e,0,1e3)),n=this.parseHeaderLines(t),r=this.volume.header,i=n.headerByteCount,o=r.nx*r.ny*r.nz,a=new DataView(e),s=new Float32Array(o),l=0;l<o;++l)s[l]=a.getFloat64(8*l+i,!0);this.volume.setData(s,r.nz,r.ny,r.nx),sl&&rl.timeEnd("DxbinParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Pw);gl.add("dxbin",Mw);var Aw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"mrc"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("MrcParser._parse "+this.name);var e,t=this.volume,n={},r=za(this.streamer.data),i=new Int32Array(r,0,56),o=new Float32Array(r,0,56),a=new DataView(r);if(n.MAP=String.fromCharCode(a.getUint8(208),a.getUint8(209),a.getUint8(210),a.getUint8(211)),n.MACHST=[a.getUint8(212),a.getUint8(213)],17===n.MACHST[0]&&17===n.MACHST[1])for(var s=r.byteLength,l=0;l<s;l+=4)a.setFloat32(l,a.getFloat32(l),!0);if(n.NX=i[0],n.NY=i[1],n.NZ=i[2],n.MODE=i[3],n.NXSTART=i[4],n.NYSTART=i[5],n.NZSTART=i[6],n.MX=i[7],n.MY=i[8],n.MZ=i[9],n.xlen=o[10]*this.voxelSize,n.ylen=o[11]*this.voxelSize,n.zlen=o[12]*this.voxelSize,n.alpha=o[13],n.beta=o[14],n.gamma=o[15],n.MAPC=i[16],n.MAPR=i[17],n.MAPS=i[18],n.DMIN=o[19],n.DMAX=o[20],n.DMEAN=o[21],n.ISPG=i[22],n.NSYMBT=i[23],n.LSKFLG=i[24],n.originX=o[49],n.originY=o[50],n.originZ=o[51],n.ARMS=o[54],t.header=n,2===n.MODE)e=new Float32Array(r,1024+n.NSYMBT,n.NX*n.NY*n.NZ);else if(0===n.MODE){if(e=new Float32Array(new Int8Array(r,1024+n.NSYMBT,n.NX*n.NY*n.NZ)),-128===i[39]&&127===i[40])for(var u=(n.DMAX-n.DMIN)/255,c=.5*(n.DMIN+n.DMAX+u),d=0,f=e.length;d<f;++d)e[d]=u*e[d]+c}else rl.error("MrcParser unknown mode",n.MODE);t.setData(e,n.NX,n.NY,n.NZ),0!==n.ARMS&&t.setStats(n.DMIN,n.DMAX,n.DMEAN,n.ARMS),sl&&rl.timeEnd("MrcParser._parse "+this.name)},t.prototype.getMatrix=function(){var e=this.volume.header,t=[e.xlen,0,0],n=[e.ylen*Math.cos(Math.PI/180*e.gamma),e.ylen*Math.sin(Math.PI/180*e.gamma),0],r=[e.zlen*Math.cos(Math.PI/180*e.beta),e.zlen*(Math.cos(Math.PI/180*e.alpha)-Math.cos(Math.PI/180*e.gamma)*Math.cos(Math.PI/180*e.beta))/Math.sin(Math.PI/180*e.gamma),0];r[2]=Math.sqrt(e.zlen*e.zlen*Math.sin(Math.PI/180*e.beta)*Math.sin(Math.PI/180*e.beta)-r[1]*r[1]);var i=[[],t,n,r],o=[0,e.MX,e.MY,e.MZ],a=[0,e.MAPC,e.MAPR,e.MAPS],s=new j;return s.set(i[a[1]][0]/o[a[1]],i[a[2]][0]/o[a[2]],i[a[3]][0]/o[a[3]],0,i[a[1]][1]/o[a[1]],i[a[2]][1]/o[a[2]],i[a[3]][1]/o[a[3]],0,i[a[1]][2]/o[a[1]],i[a[2]][2]/o[a[2]],i[a[3]][2]/o[a[3]],0,0,0,0,1),s.setPosition(new U(e.originX,e.originY,e.originZ)),s.multiply((new j).makeTranslation(e.NXSTART,e.NYSTART,e.NZSTART)),s},Object.defineProperties(t.prototype,n),t}(xw);gl.add("mrc",Aw),gl.add("ccp4",Aw),gl.add("map",Aw);var Tw=/\s+/;function Rw(e){return e.trim().split(Tw).map(parseFloat)}var Iw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"xplor"},t.prototype._parse=function(){sl&&rl.time("XplorParser._parse "+this.name);var e,t=this.volume,n=this.streamer.peekLines(8),r={},i=(e=n[2].startsWith("REMARKS")?parseInt(n[1].substring(0,8))+2:5)+3,o=Rw(n[e]);r.NA=o[0],r.AMIN=o[1],r.AMAX=o[2],r.NB=o[3],r.BMIN=o[4],r.BMAX=o[5],r.NC=o[6],r.CMIN=o[7],r.CMAX=o[8];var a=Rw(n[e+1]);r.a=a[0]*this.voxelSize,r.b=a[1]*this.voxelSize,r.c=a[2]*this.voxelSize,r.alpha=a[3],r.beta=a[4],r.gamma=a[5];var s=r.AMAX-r.AMIN+1,l=r.BMAX-r.BMIN+1,u=r.CMAX-r.CMIN+1,c=s*l*u,d=new Float32Array(c),f=Math.ceil(1+s*l/6),p=0,h=0;this.streamer.eachChunkOfLines((function(e){!function(e,t,n){for(var o=e;o<t;++o){var a=n[o];if(h>=i&&(h-i)%f!==0&&p<c)for(var s=0;s<6;++s){var l=parseFloat(a.substr(12*s,12));if(isNaN(l))break;d[p++]=l}else if(p===c){var u=a.trim();if(u&&"-9999"!==u){var m=Rw(a);r.RAVE=m[0],r.RSIGMA=m[1]}}++h}}(0,e.length,e)})),t.header=r,t.setData(d,s,l,u),0!==r.RAVE&&1!==r.RSIGMA&&t.setStats(void 0,void 0,r.RAVE,r.RSIGMA),sl&&rl.timeEnd("XplorParser._parse "+this.name)},t.prototype.getMatrix=function(){var e=this.volume.header,t=[e.a,0,0],n=[e.b*Math.cos(Math.PI/180*e.gamma),e.b*Math.sin(Math.PI/180*e.gamma),0],r=[e.c*Math.cos(Math.PI/180*e.beta),e.c*(Math.cos(Math.PI/180*e.alpha)-Math.cos(Math.PI/180*e.gamma)*Math.cos(Math.PI/180*e.beta))/Math.sin(Math.PI/180*e.gamma),0];r[2]=Math.sqrt(e.c*e.c*Math.sin(Math.PI/180*e.beta)*Math.sin(Math.PI/180*e.beta)-r[1]*r[1]);var i=[[],t,n,r],o=[0,e.NA,e.NB,e.NC],a=[0,1,2,3],s=new j;return s.set(i[a[1]][0]/o[a[1]],i[a[2]][0]/o[a[2]],i[a[3]][0]/o[a[3]],0,i[a[1]][1]/o[a[1]],i[a[2]][1]/o[a[2]],i[a[3]][1]/o[a[3]],0,i[a[1]][2]/o[a[1]],i[a[2]][2]/o[a[2]],i[a[3]][2]/o[a[3]],0,0,0,0,1),s.multiply((new j).makeTranslation(e.AMIN,e.BMIN,e.CMIN)),s},Object.defineProperties(t.prototype,n),t}(xw);function Ow(e,t,n){var r,i,o;e/=360,t/=100,n/=100;var a=Math.floor(6*e),s=6*e-a,l=n*(1-t),u=n*(1-s*t),c=n*(1-(1-s)*t);switch(a%6){case 0:r=n,i=c,o=l;break;case 1:r=u,i=n,o=l;break;case 2:r=l,i=n,o=c;break;case 3:r=l,i=u,o=n;break;case 4:r=c,i=l,o=n;break;case 5:r=n,i=l,o=u}return[r,i,o]}gl.add("xplor",Iw),gl.add("cns",Iw);var Lw={red:Ow(0,100,100),orange:Ow(20,100,100),gold:Ow(40,100,100),yellow:Ow(60,100,100),lime:Ow(80,100,100),green:Ow(120,80,100),sea:Ow(150,100,100),cyan:Ow(180,100,85),sky:Ow(210,75,95),blue:Ow(240,70,100),purple:Ow(275,75,100),magenta:Ow(300,95,100),hotpink:Ow(335,100,100),pink:Ow(350,55,100),peach:Ow(25,75,100),lilac:Ow(275,55,100),pinktint:Ow(340,30,100),peachtint:Ow(25,50,100),yellowtint:Ow(60,50,100),greentint:Ow(135,40,100),bluetint:Ow(220,40,100),lilactint:Ow(275,35,100),white:Ow(0,0,100),gray:Ow(0,0,50),brown:Ow(20,45,75),deadwhite:[1,1,1],deadblack:[0,0,0],invisible:[0,0,0]},Dw=/[\s,]+/,Fw=/[^{}\s]*{[^{}]+}|[^{}\s]+/g,Nw=/^{+|}+$/g,Bw=/^['"]+|['"]+$/g,zw=/\s*=\s*/g;function jw(e){for(var t,n,r,i=[],o=(e=e.replace(zw,"=")).match(Fw),a=1;a<o.length;++a){var s=o[a];if("{"===s[0])t=s.substring(1,s.length-1);else{var l=s.split("=");2===l.length&&("color"===l[0]?n=Lw[l[1]]:"width"===l[0]?r=parseInt(l[1]):"master"===l[0]&&i.push(l[1].replace(Nw,"")))}}return{listName:t,listColor:n,listMasters:i,listWidth:r}}function Hw(e){for(var t,n,r,i=(e=e.trim()).indexOf("{"),o=e.indexOf("}"),a=e.substr(o+1).split(Dw),s=e.substr(i+1,o-1),l=[parseFloat(a[a.length-3]),parseFloat(a[a.length-2]),parseFloat(a[a.length-1])],u=4;u<=a.length;u++){var c=a[a.length-u];c in Lw&&(t=Lw[a[a.length-u]]),c.startsWith("width")&&(n=parseInt(c.substring(5))),c.startsWith("r=")&&(r=parseFloat(c.split("=")[1]))}return{label:s,position:l,color:t,radius:r,width:n}}function Uw(e){var t=e.indexOf("{"),n=e.indexOf("}");return e.substring(-1!==t?t+1:0,-1!==n?n:void 0).trim()}function Vw(e){var t=e.indexOf("}");return-1===t?void 0:e.substr(t+1).trim()}function Gw(e){for(var t,n={},r=(e=e.replace(zw,"=")).match(Fw),i=1;i<r.length;++i){var o=r[i];if("{"===o[0])t=o.substring(1,o.length-1);else{var a=o.split("=");2===a.length?n[a[0]]=a[1].replace(Nw,""):n[a[0]]=!0}}return[t,n]}var Ww=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"kin"},n.__objName.get=function(){return"kinemage"},t.prototype._parse=function(){sl&&rl.time("KinParser._parse "+this.name);var e={kinemage:void 0,onewidth:void 0,"1viewid":void 0,pdbfile:void 0,texts:[],text:"",captions:[],caption:"",groupDict:{},subgroupDict:{},masterDict:{},pointmasterDict:{},dotLists:[],vectorLists:[],ballLists:[],ribbonLists:[]};this.kinemage=e;var t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,_,S,C=!1,E="",k=!1,P="",M=!1,A="",T=!1,R="",I=!1,O=!1;if(this.streamer.eachChunkOfLines((function(L){!function(L,D,F){for(var N=L;N<D;++N){var B=F[N];if("@"===B[0]&&(C=!1,k=!1,M=!1,T=!1,I=!1,O=!1),B)if(B.startsWith("@dotlist")){var z=jw(B),j=z.listColor,H=z.listName,U=z.listMasters;C=!0,E="",n=[],r=[],i=[],t=j,e.dotLists.push({name:H,masterArray:U,labelArray:n,positionArray:r,colorArray:i})}else if(B.startsWith("@vectorlist")){var V=jw(B),G=V.listMasters,W=V.listName,$=V.listWidth,q=V.listColor;G&&G.forEach((function(t){e.masterDict[t]||(e.masterDict[t]={indent:!1,visible:!1})})),k=!0,P="",o=null,a=null,u=[],c=[],d=[],f=[],p=[],h=[],s=q,l=[],$&&l.push($),e.vectorLists.push({name:W,masterArray:G,label1Array:u,label2Array:c,position1Array:d,position2Array:f,color1Array:p,color2Array:h,width:l})}else if(B.startsWith("@balllist")){var X=jw(B),K=X.listName,Y=X.listColor,Z=X.listMasters;Z&&Z.forEach((function(t){e.masterDict[t]||(e.masterDict[t]={indent:!1,visible:!1})})),M=!0,A="",v=[],m=[],y=[],b=[],g=Y,e.ballLists.push({name:K,masterArray:Z,labelArray:v,radiusArray:m,positionArray:y,colorArray:b})}else if(B.startsWith("@ribbonlist")){var Q=jw(B),J=Q.listMasters,ee=Q.listName,te=Q.listColor;J&&J.forEach((function(t){e.masterDict[t]||(e.masterDict[t]={indent:!1,visible:!1})})),T=!0,R="",w=[],_=[],S=[],x=te,e.ribbonLists.push({name:ee,masterArray:J,labelArray:w,positionArray:_,colorArray:S})}else if(B.startsWith("@text"))I=!0,e.texts.push(B.substr(5));else if(B.startsWith("@caption"))O=!0,e.captions.push(B.substr(8));else if(C){var ne=Hw(B),re=ne.label,ie=ne.color,oe=ne.position;'"'===re?re=E:E=re,void 0===ie&&(ie=t),n.push(re),r.push.apply(r,oe),i.push.apply(i,ie)}else if(k){var ae=B.indexOf("{"),se=B.indexOf("{",ae+1),le=void 0,ue=void 0;-1===se?(le=B,ue=B):(le=B.substr(0,se),ue=B.substr(se));var ce=Hw(le),de=ce.label,fe=ce.color,pe=ce.width,he=ce.position;if('"'===de?de=P:P=de,void 0===fe&&(fe=s),pe&&l.push(pe),u.push(de),d.push.apply(d,he),p.push.apply(p,fe),-1===se&&o)c.push(P),f.push.apply(f,o),h.push.apply(h,a),P=de,o=he,a=fe;else{var me=Hw(ue),ge=me.label,ve=me.color,ye=me.position;'"'===ge?ge=P:P=ge,void 0===ve&&(ve=s),c.push(ge),f.push.apply(f,ye),h.push.apply(h,ve),o=ye,a=ve}}else if(M){var be=Hw(B),xe=be.label,we=be.radius,_e=be.color,Se=be.position;'"'===xe?xe=A:A=xe,void 0===we&&(we=1),void 0===_e&&(_e=g),v.push(xe),m.push(we),y.push.apply(y,Se),b.push.apply(b,_e)}else if(T){var Ce=Hw(B),Ee=Ce.label,ke=Ce.color,Pe=Ce.position;'"'===Ee?Ee=R:R=Ee,void 0===ke&&(ke=x),w.push(Ee),_.push.apply(_,Pe),S.push.apply(S,ke)}else if(I)e.texts.push(B);else if(O)e.captions.push(B);else if(B.startsWith("@kinemage"))e.kinemage=parseInt(B.substr(9).trim());else if(B.startsWith("@onewidth"))e.onewidth=!0;else if(B.startsWith("@1viewid"))e["1viewid"]=Uw(B);else if(B.startsWith("@pdbfile"))e.pdbfile=Uw(B);else if(B.startsWith("@group")){var Me=Gw(B),Ae=Me[0],Te=Me[1];for(var Re in e.groupDict[Ae]||(e.groupDict[Ae]={dominant:!1,animate:!1}),Te)e.groupDict[Ae][Re]=Te[Re]}else if(B.startsWith("@subgroup")){var Ie=Gw(B),Oe=Ie[0],Le=Ie[1];for(var De in e.subgroupDict[Oe]||(e.subgroupDict[Oe]={dominant:!1,animate:!1,master:void 0}),Le)e.subgroupDict[Oe][De]=Le[De]}else if(B.startsWith("@master")){var Fe=Uw(B),Ne=Vw(B);e.masterDict[Fe]||(e.masterDict[Fe]={indent:!1,visible:!1}),"on"===Ne?e.masterDict[Fe].visible=!0:"off"===Ne?e.masterDict[Fe].visible=!1:"indent"===Ne&&(e.masterDict[Fe].indent=!0)}else if(B.startsWith("@pointmaster")){var Be=Gw(B),ze=Be[0],je=Be[1];e.pointmasterDict[ze]={id:Object.keys(je)[0].replace(Bw,"")}}else console.log(B);else C=!1,k=!1,M=!1,T=!1}}(0,L.length,L)})),e.text=e.texts.join("\n").trim(),e.caption=e.captions.join("\n").trim(),e.ribbonLists){var L=[];e.ribbonLists.forEach((function(e){L.push(function(e){for(var t=e.labelArray,n=e.positionArray,r=e.colorArray,i=[],o=0;o<3*(t.length-2);++o)i[o]=t[o-2*Math.floor(o/3)];for(var a=[],s=0;s<9*(n.length/3-2);++s)a[s]=n[s-6*Math.floor(s/9)];for(var l=[],u=0;u<9*(r.length/3-2);++u)l[u]=r[u-6*Math.floor(u/9)];return{name:e.name,masterArray:e.masterArray,labelArray:i,positionArray:a,colorArray:l}}(e))})),e.ribbonLists=L}sl&&rl.timeEnd("KinParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Hb);gl.add("kin",Ww);var $w=function(e){function t(t,n){e.call(this,t,n),this.loader=this.getLoader(),this.surface=new _p(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"surface"},n.__objName.get=function(){return"surface"},t.prototype._parse=function(){var e=this.loader.parse(this.streamer.asText());this.surface.fromGeometry(e)},Object.defineProperties(t.prototype,n),t}(Hb),qw=function(){this.regexp={vertex_pattern:/^v\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,normal_pattern:/^vn\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,uv_pattern:/^vt\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}};qw.prototype={constructor:qw,setPath:function(e){this.path=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);this.object={name:e||"",geometry:{vertices:[],normals:[]},fromDeclaration:!1!==t},this.objects.push(this.object)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0]),i.push(r[e+1]),i.push(r[e+2]),i.push(r[t+0]),i.push(r[t+1]),i.push(r[t+2]),i.push(r[n+0]),i.push(r[n+1]),i.push(r[n+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0]),n.push(t[e+1]),n.push(t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0]),i.push(r[e+1]),i.push(r[e+2]),i.push(r[t+0]),i.push(r[t+1]),i.push(r[t+2]),i.push(r[n+0]),i.push(r[n+1]),i.push(r[n+2])},addFace:function(e,t,n,r,i,o,a,s){var l,u=this.vertices.length,c=this.parseVertexIndex(e,u),d=this.parseVertexIndex(t,u),f=this.parseVertexIndex(n,u);if(void 0===r?this.addVertex(c,d,f):(l=this.parseVertexIndex(r,u),this.addVertex(c,d,l),this.addVertex(d,f,l)),void 0!==i){var p=this.normals.length;c=this.parseNormalIndex(i,p),d=i===o?c:this.parseNormalIndex(o,p),f=i===a?c:this.parseNormalIndex(a,p),void 0===r?this.addNormal(c,d,f):(l=this.parseNormalIndex(s,p),this.addNormal(c,d,l),this.addNormal(d,f,l))}},addLineGeometry:function(e){this.object.geometry.type="Line";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexLine(this.parseVertexIndex(e[n],t))}};return e.startObject("",!1),e},parse:function(e){var t,n,r=this,i=this._createParserState();-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));var o=e.split("\n"),a="",s="",l="",u=[],c="function"===typeof"".trimLeft;for(t=0,n=o.length;t<n;t++)if(a=o[t],0!==(a=c?a.trimLeft():a.trim()).length&&"#"!==(s=a.charAt(0)))if("v"===s){if(" "===(l=a.charAt(1))&&null!==(u=r.regexp.vertex_pattern.exec(a)))i.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));else if("n"===l&&null!==(u=r.regexp.normal_pattern.exec(a)))i.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));else if("t"!==l||null===r.regexp.uv_pattern.exec(a))throw new Error("Unexpected vertex/normal/uv line: '"+a+"'")}else if("f"===s)if(null!==(u=r.regexp.face_vertex_uv_normal.exec(a)))i.addFace(u[1],u[4],u[7],u[10],u[3],u[6],u[9],u[12]);else if(null!==r.regexp.face_vertex_uv.exec(a));else if(null!==(u=r.regexp.face_vertex_normal.exec(a)))i.addFace(u[1],u[3],u[5],u[7],u[2],u[4],u[6],u[8]);else{if(null===(u=r.regexp.face_vertex.exec(a)))throw new Error("Unexpected face line: '"+a+"'");i.addFace(u[1],u[2],u[3],u[4])}else if("l"===s){var d=a.substring(1).trim().split(" "),f=[],p=[];if(-1===a.indexOf("/"))f=d;else for(var h=0,m=d.length;h<m;h++){var g=d[h].split("/");""!==g[0]&&f.push(g[0]),""!==g[1]&&p.push(g[1])}i.addLineGeometry(f,p)}else if(null!==(u=r.regexp.object_pattern.exec(a))){var v=u[0].substr(1).trim();i.startObject(v)}else if(r.regexp.material_use_pattern.test(a));else if(r.regexp.material_library_pattern.test(a));else if(null===r.regexp.smoothing_pattern.exec(a)){if("\0"===a)continue;throw new Error("Unexpected line: '"+a+"'")}var y=[];for(t=0,n=i.objects.length;t<n;t++){var b=i.objects[t].geometry;if(0!==b.vertices.length){var x=new Ie;x.addAttribute("position",new be(new Float32Array(b.vertices),3)),b.normals.length>0?x.addAttribute("normal",new be(new Float32Array(b.normals),3)):x.computeVertexNormals(),y.push(x)}}return y}};var Xw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"obj"},t.prototype.getLoader=function(){return new qw},Object.defineProperties(t.prototype,n),t}($w);gl.add("obj",Xw);var Kw=function(){this.propertyNameMapping={}};Kw.prototype={constructor:Kw,setPropertyNameMapping:function(e){this.propertyNameMapping=e},bin2str:function(e){for(var t=new Uint8Array(e),n="",r=0;r<e.byteLength;r++)n+=String.fromCharCode(t[r]);return n},isASCII:function(e){return"ascii"===this.parseHeader(this.bin2str(e)).format},parse:function(e){return e instanceof ArrayBuffer?this.isASCII(e)?this.parseASCII(this.bin2str(e)):this.parseBinary(e):this.parseASCII(e)},parseHeader:function(e){var t="",n=0,r=/ply([\s\S]*)end_header\s/.exec(e);null!==r&&(t=r[1],n=r[0].length);var i,o,a,s={comments:[],elements:[],headerLength:n},l=t.split("\n");function u(e,t){var n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],n.name in t&&(n.name=t[n.name]),n}for(var c=0;c<l.length;c++){var d=l[c];if(""!==(d=d.trim()))switch(o=(a=d.split(/\s+/)).shift(),d=a.join(" "),o){case"format":s.format=a[0],s.version=a[1];break;case"comment":s.comments.push(d);break;case"element":void 0!==i&&s.elements.push(i),(i={}).name=a[0],i.count=parseInt(a[1]),i.properties=[];break;case"property":i.properties.push(u(a,this.propertyNameMapping));break;default:console.log("unhandled",o,a)}}return void 0!==i&&s.elements.push(i),s},parseASCIINumber:function(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}},parseASCIIElement:function(e,t){for(var n=this,r=t.split(/\s+/),i={},o=0;o<e.length;o++)if("list"===e[o].type){for(var a=[],s=n.parseASCIINumber(r.shift(),e[o].countType),l=0;l<s;l++)a.push(n.parseASCIINumber(r.shift(),e[o].itemType));i[e[o].name]=a}else i[e[o].name]=n.parseASCIINumber(r.shift(),e[o].type);return i},parseASCII:function(e){var t,n=new ye,r=this.parseHeader(e),i="";null!==(t=/end_header\s([\s\S]*)$/.exec(e))&&(i=t[1]);var o=i.split("\n"),a=0,s=0;n.useColor=!1;for(var l=0;l<o.length;l++){var u=o[l];if(""!==(u=u.trim())){s>=r.elements[a].count&&(a++,s=0);var c=this.parseASCIIElement(r.elements[a].properties,u);this.handleElement(n,r.elements[a].name,c),s++}}return this.postProcess(n)},postProcess:function(e){if(e.useColor){for(var t=0;t<e.faces.length;t++)e.faces[t].vertexColors=[e.colors[e.faces[t].a],e.colors[e.faces[t].b],e.colors[e.faces[t].c]];e.elementsNeedUpdate=!0}return e.computeBoundingSphere(),e},handleElement:function(e,t,n){if("vertex"===t){if(e.vertices.push(new U(n.x,n.y,n.z)),"red"in n&&"green"in n&&"blue"in n){e.useColor=!0;var r=new ie;r.setRGB(n.red/255,n.green/255,n.blue/255),e.colors.push(r)}}else if("face"===t){var i=n.vertex_indices;3===i.length?e.faces.push(new ge(i[0],i[1],i[2])):4===i.length&&e.faces.push(new ge(i[0],i[1],i[3]),new ge(i[1],i[2],i[3]))}},binaryRead:function(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8]}},binaryReadElement:function(e,t,n,r){for(var i,o=this,a={},s=0,l=0;l<n.length;l++)if("list"===n[l].type){var u=[],c=(i=o.binaryRead(e,t+s,n[l].countType,r))[0];s+=i[1];for(var d=0;d<c;d++)i=o.binaryRead(e,t+s,n[l].itemType,r),u.push(i[0]),s+=i[1];a[n[l].name]=u}else i=o.binaryRead(e,t+s,n[l].type,r),a[n[l].name]=i[0],s+=i[1];return[a,s]},parseBinary:function(e){for(var t,n=new ye,r=this.parseHeader(this.bin2str(e)),i="binary_little_endian"===r.format,o=new DataView(e,r.headerLength),a=0,s=0;s<r.elements.length;s++)for(var l=0;l<r.elements[s].count;l++){a+=(t=this.binaryReadElement(o,a,r.elements[s].properties,i))[1];var u=t[0];this.handleElement(n,r.elements[s].name,u)}return this.postProcess(n)}};var Yw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"ply"},t.prototype.getLoader=function(){return new Kw},Object.defineProperties(t.prototype,n),t}($w);gl.add("ply",Yw);var Zw=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.delimiter=Sa(r.delimiter,","),this.comment=Sa(r.comment,"#"),this.columnNames=Sa(r.columnNames,!1),this.table={name:this.name,path:this.path,columnNames:[],data:[]}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"csv"},n.__objName.get=function(){return"table"},t.prototype._parse=function(){var e=this,t=this.table.data,n=new RegExp("\\s*"+this.delimiter+"\\s*"),r=0;this.streamer.eachChunkOfLines((function(i){for(var o=i.length,a=0;a<o;++a){var s=i[a].trim();if(!s.startsWith(e.comment)){var l=s.split(n);0===r?e.table.columnNames=l:s&&t.push(l),++r}}}))},Object.defineProperties(t.prototype,n),t}(Hb);gl.add("csv",Zw);var Qw=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.string=Sa(r.string,!1),this.json={name:this.name,path:this.path,data:{}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isJson:{configurable:!0}};return n.type.get=function(){return"json"},n.__objName.get=function(){return"json"},n.isJson.get=function(){return!0},t.prototype._parse=function(){this.streamer.isBinary()||this.string?this.json.data=JSON.parse(this.streamer.asText()):this.json.data=this.streamer.data},Object.defineProperties(t.prototype,n),t}(Hb);gl.add("json",Qw);var Jw=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.msgpack={name:this.name,path:this.path,data:void 0}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"msgpack"},n.__objName.get=function(){return"msgpack"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("MsgpackParser._parse "+this.name),this.msgpack.data=Cx(this.streamer.data),sl&&rl.timeEnd("MsgpackParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Hb);gl.add("msgpack",Jw);var e_=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.netcdf={name:this.name,path:this.path,data:void 0}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"netcdf"},n.__objName.get=function(){return"netcdf"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("NetcdfParser._parse "+this.name),this.netcdf.data=new lw(this.streamer.data),sl&&rl.timeEnd("NetcdfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Hb);gl.add("netcdf",e_);var t_=function(e){function t(t,n){e.call(this,t,n),this.text={name:this.name,path:this.path,data:""}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"text"},n.__objName.get=function(){return"text"},t.prototype._parse=function(){this.text.data=this.streamer.asText()},Object.defineProperties(t.prototype,n),t}(Hb);gl.add("txt",t_),gl.add("text",t_);var n_=/^['"]|['"]$/g,r_=/^<([\w-:.]+)\s*/,i_=/^([^<]*)/,o_=/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/;function a_(e){return e=e.trim().replace(/<!--[\s\S]*?-->/g,""),{declaration:t(),root:n()};function t(){if(i(/^<\?xml\s*/)){for(var e={attributes:{}};!o()&&!a("?>");){var t=r();if(!t)return e;e.attributes[t.name]=t.value}return i(/\?>\s*/),e}}function n(){var e=i(r_);if(e){for(var t,s={name:e[1],attributes:{},children:[]};!(o()||a(">")||a("?>")||a("/>"));){var l=r();if(!l)return s;s.attributes[l.name]=l.value}if(i(/^\s*\/>\s*/))return s;for(i(/\??>\s*/),s.content=function(){var e=i(i_);if(e)return e[1];return""}();t=n();)s.children.push(t);return i(/^<\/[\w-:.]+>\s*/),s}}function r(){var e,t=i(o_);if(t)return{name:t[1],value:(e=t[2],e.replace(n_,""))}}function i(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function o(){return 0===e.length}function a(t){return 0===e.indexOf(t)}}var s_=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.useDomParser=Sa(r.useDomParser,!1),this.xml={name:this.name,path:this.path,data:{}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isXml:{configurable:!0}};return n.type.get=function(){return"xml"},n.__objName.get=function(){return"xml"},n.isXml.get=function(){return!0},t.prototype.__xmlParser=function(e){return a_(e)},t.prototype.__domParser=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")},t.prototype._parse=function(){sl&&rl.time("XmlParser._parse "+this.name),this.useDomParser?this.streamer.data instanceof Document?this.xml.data=this.streamer.data:this.xml.data=this.__domParser(this.streamer.asText()):this.xml.data=this.__xmlParser(this.streamer.asText()),sl&&rl.timeEnd("XmlParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Hb);function l_(e,t){var n=e.getNamedItem(t);return null!==n?n.value:""}function u_(e,t,n){void 0===n&&(n=!1);var r=l_(e,"icode").trim(),i=l_(e,"chain").trim(),o=l_(e,"altcode"),a=l_(e,"resnum");return r&&(a+="^"+r),i&&(a+=":"+i),t&&(a+="."+t),n&&o.trim()&&(a+="%"+o),a+="/"+(parseInt(l_(e,"model"))-1)}function c_(e){var t=l_(e,"chain").trim(),n="["+l_(e,"rescode")+"]"+l_(e,"resnum");return t&&(n+=":"+t),n}function d_(e,t,n){void 0===e[t]?e[t]=n:e[t]|=n}function f_(e,t){return null!==e&&e.value===t}function p_(e,t,n){for(var r=0,i=t.getElementsByTagName("clash"),o=0,a=i.length;o<a;++o)if(e[l_(i[o].attributes,"cid")]){r+=1;break}return t.getElementsByTagName("angle-outlier").length>0&&(r+=1),t.getElementsByTagName("bond-outlier").length>0&&(r+=1),t.getElementsByTagName("plane-outlier").length>0&&(r+=1),f_(n.getNamedItem("rota"),"OUTLIER")&&(r+=1),f_(n.getNamedItem("rama"),"OUTLIER")&&(r+=1),f_(n.getNamedItem("RNApucker"),"outlier")&&(r+=1),r}gl.add("xml",s_);var h_=function(e,t){this.name=e,this.path=t,this.rsrzDict={},this.rsccDict={},this.rciDict={},this.clashDict={},this.clashArray=[],this.geoDict={},this.geoAtomDict={},this.atomDict={},this.clashSele="NONE"},m_={type:{configurable:!0}};m_.type.get=function(){return"validation"},h_.prototype.fromXml=function(e){sl&&rl.time("Validation.fromXml");var t=this.rsrzDict,n=this.rsccDict,r=this.rciDict,i=this.clashDict,o=this.clashArray,a=this.geoDict,s=this.geoAtomDict,l=this.atomDict,u=e.getElementsByTagName("Entry");if(1===u.length){var c=u[0].getElementsByTagName("chemical_shift_list");if(1===c.length)for(var d=c[0].getElementsByTagName("random_coil_index"),f=0,p=d.length;f<p;++f){var h=d[f].attributes;r[c_(h)]=parseFloat(l_(h,"value"))}}var m=e.getElementsByTagName("ModelledSubgroup"),g={},v=[];sl&&rl.time("Validation.fromXml#clashDict");for(var y=0,b=m.length;y<b;++y){var x=m[y],w=x.attributes,_=u_(w);null!==w.getNamedItem("rsrz")&&(t[_]=parseFloat(l_(w,"rsrz"))),null!==w.getNamedItem("rscc")&&(n[_]=parseFloat(l_(w,"rscc")));var S=e.createAttribute("sele");S.value=_,w.setNamedItem(S);for(var C=x.getElementsByTagName("clash"),E=0,k=C.length;E<k;++E){var P=C[E].attributes,M=l_(P,"atom");if("H"!==Zh(M)){var A=l_(P,"cid"),T=u_(w,M,!0);if(l[T]=!0,void 0===g[A])g[A]={sele1:T,res1:_};else{var R=g[A];R.res1!==_&&(R.sele2=T,R.res2=_,v.push(R.res1,_),i[A]=R,o.push(R))}}}}sl&&rl.timeEnd("Validation.fromXml#clashDict");for(var I=0,O=m.length;I<O;++I){var L=m[I],D=L.attributes,F=l_(D,"sele");if("."!==l_(D,"seq")){var N=p_(i,L,D);N>0&&(a[F]=N)}else{var B=L.getElementsByTagName("clash"),z=L.getElementsByTagName("mog-bond-outlier"),j=L.getElementsByTagName("mog-angle-outlier");if(z.length>0||j.length>0||B.length>0){var H={};s[F]=H;for(var U=0,V=B.length;U<V;++U){var G=B[U].attributes;i[l_(G,"cid")]&&d_(H,l_(G,"atom"),1)}for(var W=0,$=z.length;W<$;++W){l_(z[W].attributes,"atoms").split(",").forEach((function(e){d_(H,e,2)}))}for(var q=0,X=j.length;q<X;++q){l_(j[q].attributes,"atoms").split(",").forEach((function(e){d_(H,e,4)}))}}}}this.clashSele=v.length?v.join(" OR "):"NONE",sl&&rl.timeEnd("Validation.fromXml")},h_.prototype.getClashData=function(e){sl&&rl.time("Validation.getClashData");var t=e||{},n=t.structure,r=n.atomSet,i=new ie(Sa(t.color,"#f0027f")),o=n.getAtomProxy(),a=n.getAtomProxy(),s=new U,l=new U,u=new U,c=this.clashArray,d=c.length,f=new Float32Array(3*d),p=new Float32Array(3*d),h=au(d,i.r,i.g,i.b),m=new Float32Array(d),g=new Float32Array(d);sl&&rl.time("Validation.getClashData#atomDict");var v=this.atomDict;n.eachAtom((function(e){var t=function(e){var t=e.inscode,n=e.chainname,r=e.atomname,i=e.altloc,o=e.resno+"";return t&&(o+="^"+t),n&&(o+=":"+n),r&&(o+="."+r),i&&(o+="%"+i),o+"/"+e.modelIndex}(e);!0===v[t]&&(v[t]=e.index)})),sl&&rl.timeEnd("Validation.getClashData#atomDict");var y=0;return c.forEach((function(e,t){if(o.index=v[e.sele1],a.index=v[e.sele2],void 0!==o.index&&void 0!==a.index&&r.isSet(o.index,a.index)){s.subVectors(a,o).setLength(o.vdw),l.copy(o).add(s),s.subVectors(o,a).setLength(a.vdw),u.copy(a).add(s);var n=o.distanceTo(a)/2,i=Math.sqrt(o.vdw*o.vdw-n*n),c=Math.sqrt(a.vdw*a.vdw-n*n);l.toArray(f,3*y),u.toArray(p,3*y),m[y]=(i+c)/2,g[y]=t,++y}})),sl&&rl.timeEnd("Validation.getClashData"),{position1:f.subarray(0,3*y),position2:p.subarray(0,3*y),color:h.subarray(0,3*y),color2:h.subarray(0,3*y),radius:m.subarray(0,y),picking:new Df(g.subarray(0,y),this,n)}},Object.defineProperties(h_.prototype,m_);var g_=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.useDomParser=!0,this.validation=new h_(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={__objName:{configurable:!0},isXml:{configurable:!0}};return n.__objName.get=function(){return"validation"},n.isXml.get=function(){return!0},t.prototype._parse=function(){e.prototype._parse.call(this),sl&&rl.time("ValidationParser._parse "+this.name),this.validation.fromXml(this.xml.data),sl&&rl.timeEnd("ValidationParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(s_);function v_(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)}function y_(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]}function b_(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}gl.add("validation",g_);var x_=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function w_(e,t,n,r){var i=x_,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}function __(e,t){var n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,_,S,C,E,k;n=e.state,r=e.next_in,E=e.input,i=r+(e.avail_in-5),o=e.next_out,k=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),b=m[p&v];t:for(;;){if(p>>>=x=b>>>24,h-=x,0===(x=b>>>16&255))k[o++]=65535&b;else{if(!(16&x)){if(0===(64&x)){b=m[(65535&b)+(p&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(x&=15)&&(h<x&&(p+=E[r++]<<h,h+=8),w+=p&(1<<x)-1,p>>>=x,h-=x),h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),b=g[p&y];n:for(;;){if(p>>>=x=b>>>24,h-=x,!(16&(x=b>>>16&255))){if(0===(64&x)){b=g[(65535&b)+(p&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(_=65535&b,h<(x&=15)&&(p+=E[r++]<<h,(h+=8)<x&&(p+=E[r++]<<h,h+=8)),(_+=p&(1<<x)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=x,h-=x,_>(x=o-a)){if((x=_-x)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,C=f,0===d){if(S+=u-x,x<w){w-=x;do{k[o++]=f[S++]}while(--x);S=o-_,C=k}}else if(d<x){if(S+=u+d-x,(x-=d)<w){w-=x;do{k[o++]=f[S++]}while(--x);if(S=0,d<w){w-=x=d;do{k[o++]=f[S++]}while(--x);S=o-_,C=k}}}else if(S+=d-x,x<w){w-=x;do{k[o++]=f[S++]}while(--x);S=o-_,C=k}for(;w>2;)k[o++]=C[S++],k[o++]=C[S++],k[o++]=C[S++],w-=3;w&&(k[o++]=C[S++],w>1&&(k[o++]=C[S++]))}else{S=o-_;do{k[o++]=k[S++],k[o++]=k[S++],k[o++]=k[S++],w-=3}while(w>2);w&&(k[o++]=k[S++],w>1&&(k[o++]=k[S++]))}break}}break}}while(r<i&&o<s);r-=w=h>>3,p&=(1<<(h-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=h}var S_=15,C_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],E_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],k_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function M_(e,t,n,r,i,o,a,s){var l,u,c,d,f,p,h,m,g,v=s.bits,y=0,b=0,x=0,w=0,_=0,S=0,C=0,E=0,k=0,P=0,M=null,A=0,T=new Uint16Array(16),R=new Uint16Array(16),I=null,O=0;for(y=0;y<=S_;y++)T[y]=0;for(b=0;b<r;b++)T[t[n+b]]++;for(_=v,w=S_;w>=1&&0===T[w];w--);if(_>w&&(_=w),0===w)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(x=1;x<w&&0===T[x];x++);for(_<x&&(_=x),E=1,y=1;y<=S_;y++)if(E<<=1,(E-=T[y])<0)return-1;if(E>0&&(0===e||1!==w))return-1;for(R[1]=0,y=1;y<S_;y++)R[y+1]=R[y]+T[y];for(b=0;b<r;b++)0!==t[n+b]&&(a[R[t[n+b]]++]=b);if(0===e?(M=I=a,p=19):1===e?(M=C_,A-=257,I=E_,O-=257,p=256):(M=k_,I=P_,p=-1),P=0,b=0,y=x,f=o,S=_,C=0,c=-1,d=(k=1<<_)-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){h=y-C,a[b]<p?(m=0,g=a[b]):a[b]>p?(m=I[O+a[b]],g=M[A+a[b]]):(m=96,g=0),l=1<<y-C,x=u=1<<S;do{i[f+(P>>C)+(u-=l)]=h<<24|m<<16|g|0}while(0!==u);for(l=1<<y-1;P&l;)l>>=1;if(0!==l?(P&=l-1,P+=l):P=0,b++,0===--T[y]){if(y===w)break;y=t[n+a[b]]}if(y>_&&(P&d)!==c){for(0===C&&(C=_),f+=x,E=1<<(S=y-C);S+C<w&&!((E-=T[S+C])<=0);)S++,E<<=1;if(k+=1<<S,1===e&&k>852||2===e&&k>592)return 1;i[c=P&d]=_<<24|S<<16|f-o|0}}return 0!==P&&(i[f+P]=y-C<<24|64<<16|0),s.bits=_,0}var A_=-2,T_=12,R_=30;function I_(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function O_(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L_(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,0):A_}(e)):A_}function D_(e,t){var n,r;return e?(r=new O_,e.state=r,r.window=null,n=function(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?A_:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,L_(e))):A_}(e,t),0!==n&&(e.state=null),n):A_}var F_,N_,B_=!0;function z_(e){if(B_){var t;for(F_=new Int32Array(512),N_=new Int32Array(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(M_(1,e.lens,0,288,F_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;M_(2,e.lens,0,32,N_,0,e.work,{bits:5}),B_=!1}e.lencode=F_,e.lenbits=9,e.distcode=N_,e.distbits=5}function j_(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(y_(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),y_(o.window,t,n-r,i,o.wnext),(r-=i)?(y_(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function H_(e,t){var n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,_,S,C,E,k=0,P=new Uint8Array(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return A_;(n=e.state).mode===T_&&(n.mode=13),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,c=n.bits,d=s,f=l,S=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(2&n.wrap&&35615===u){n.check=0,P[0]=255&u,P[1]=u>>>8&255,n.check=w_(n.check,P,2,0),u=0,c=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=R_;break}if(8!==(15&u)){e.msg="unknown compression method",n.mode=R_;break}if(c-=4,_=8+(15&(u>>>=4)),0===n.wbits)n.wbits=_;else if(_>n.wbits){e.msg="invalid window size",n.mode=R_;break}n.dmax=1<<_,e.adler=n.check=1,n.mode=512&u?10:T_,u=0,c=0;break;case 2:for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(n.flags=u,8!==(255&n.flags)){e.msg="unknown compression method",n.mode=R_;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=R_;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(P[0]=255&u,P[1]=u>>>8&255,n.check=w_(n.check,P,2,0)),u=0,c=0,n.mode=3;case 3:for(;c<32;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&(P[0]=255&u,P[1]=u>>>8&255,P[2]=u>>>16&255,P[3]=u>>>24&255,n.check=w_(n.check,P,4,0)),u=0,c=0,n.mode=4;case 4:for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(P[0]=255&u,P[1]=u>>>8&255,n.check=w_(n.check,P,2,0)),u=0,c=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(P[0]=255&u,P[1]=u>>>8&255,n.check=w_(n.check,P,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=n.length)>s&&(p=s),p&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y_(n.head.extra,r,o,p,_)),512&n.flags&&(n.check=w_(n.check,r,p,o)),s-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;p=0;do{_=r[o+p++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_))}while(_&&p<s);if(512&n.flags&&(n.check=w_(n.check,r,p,o)),s-=p,o+=p,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;p=0;do{_=r[o+p++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_))}while(_&&p<s);if(512&n.flags&&(n.check=w_(n.check,r,p,o)),s-=p,o+=p,_)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=R_;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=T_;break;case 10:for(;c<32;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}e.adler=n.check=I_(u),u=0,c=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,2;e.adler=n.check=1,n.mode=T_;case T_:if(5===t||6===t)break e;case 13:if(n.last){u>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}switch(n.last=1&u,c-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(z_(n),n.mode=20,6===t){u>>>=2,c-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=R_}u>>>=2,c-=2;break;case 14:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=R_;break}if(n.length=65535&u,u=0,c=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(p=n.length){if(p>s&&(p=s),p>l&&(p=l),0===p)break e;y_(i,r,o,p,a),s-=p,o+=p,l-=p,a+=p,n.length-=p;break}n.mode=T_;break;case 17:for(;c<14;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=R_;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.lens[M[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},S=M_(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid code lengths set",n.mode=R_;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(k=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,y=65535&k,!((g=k>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(y<16)u>>>=g,c-=g,n.lens[n.have++]=y;else{if(16===y){for(E=g+2;c<E;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(u>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=R_;break}_=n.lens[n.have-1],p=3+(3&u),u>>>=2,c-=2}else if(17===y){for(E=g+3;c<E;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}c-=g,_=0,p=3+(7&(u>>>=g)),u>>>=3,c-=3}else{for(E=g+7;c<E;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}c-=g,_=0,p=11+(127&(u>>>=g)),u>>>=7,c-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=R_;break}for(;p--;)n.lens[n.have++]=_}}if(n.mode===R_)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=R_;break}if(n.lenbits=9,C={bits:n.lenbits},S=M_(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid literal/lengths set",n.mode=R_;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},S=M_(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,S){e.msg="invalid distances set",n.mode=R_;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,__(e,f),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,c=n.bits,n.mode===T_&&(n.back=-1);break}for(n.back=0;v=(k=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,y=65535&k,!((g=k>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(v&&0===(240&v)){for(b=g,x=v,w=y;v=(k=n.lencode[w+((u&(1<<b+x)-1)>>b)])>>>16&255,y=65535&k,!(b+(g=k>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=g,c-=g,n.back+=g,n.length=y,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=T_;break}if(64&v){e.msg="invalid literal/length code",n.mode=R_;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(E=n.extra;c<E;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(k=n.distcode[u&(1<<n.distbits)-1])>>>16&255,y=65535&k,!((g=k>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(0===(240&v)){for(b=g,x=v,w=y;v=(k=n.distcode[w+((u&(1<<b+x)-1)>>b)])>>>16&255,y=65535&k,!(b+(g=k>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=g,c-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=R_;break}n.offset=y,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(E=n.extra;c<E;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=R_;break}n.mode=25;case 25:if(0===l)break e;if(p=f-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=R_;break}p>n.wnext?(p-=n.wnext,h=n.wsize-p):h=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,h=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{i[a++]=m[h++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===s)break e;s--,u|=r[o++]<<c,c+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?w_(n.check,i,f,a-f):b_(n.check,i,f,a-f)),f=l,(n.flags?u:I_(u))!==n.check){e.msg="incorrect data check",n.mode=R_;break}u=0,c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=R_;break}u=0,c=0}n.mode=29;case 29:S=1;break e;case R_:S=-3;break e;case 31:return-4;default:return A_}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,(n.wsize||f!==e.avail_out&&n.mode<R_&&(n.mode<27||4!==t))&&j_(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?w_(n.check,i,f,e.next_out-f):b_(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===T_?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===f||4===t)&&0===S&&(S=-5),S}function U_(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?A_:11===n.mode&&b_(1,t,r,0)!==n.check?-3:j_(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):A_}var V_=!0,G_=!0;try{String.fromCharCode.apply(null,[0])}catch(xS){V_=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(xS){G_=!1}for(var W_=new Uint8Array(256),$_=0;$_<256;$_++)W_[$_]=$_>=252?6:$_>=248?5:$_>=240?4:$_>=224?3:$_>=192?2:1;function q_(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}function X_(e,t){var n,r,i,o,a=t||e.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)s[r++]=i;else if((o=W_[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return function(e,t){if(t<65537&&(e.subarray&&G_||!e.subarray&&V_))return String.fromCharCode.apply(null,v_(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}(s,r)}function K_(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+W_[e[n]]>t?n:t}W_[254]=W_[254]=1;var Y_={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function Z_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Q_(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var J_=Object.prototype.toString;function eS(e){if(!(this instanceof eS))return new eS(e);this.options=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e}({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Z_,this.strm.avail_out=0;var n=D_(this.strm,t.windowBits);if(0!==n)throw new Error(Y_[n]);this.header=new Q_,function(e,t){var n;e&&e.state&&(0===(2&(n=e.state).wrap)||(n.head=t,t.done=!1))}(this.strm,this.header)}eS.prototype.push=function(e,t){var n,r,i,o,a,s,l=this,u=this.strm,c=this.options.chunkSize,d=this.options.dictionary,f=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"===typeof e?u.input=function(e){for(var t=new Uint8Array(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t}(e):"[object ArrayBuffer]"===J_.call(e)?u.input=new Uint8Array(e):u.input=e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new Uint8Array(c),u.next_out=0,u.avail_out=c),2===(n=H_(u,0))&&d&&(s="string"===typeof d?q_(d):"[object ArrayBuffer]"===J_.call(d)?new Uint8Array(d):d,n=U_(l.strm,s)),-5===n&&!0===f&&(n=0,f=!1),1!==n&&0!==n)return l.onEnd(n),l.ended=!0,!1;u.next_out&&(0!==u.avail_out&&1!==n&&(0!==u.avail_in||4!==r&&2!==r)||("string"===l.options.to?(i=K_(u.output,u.next_out),o=u.next_out-i,a=X_(u.output,i),u.next_out=o,u.avail_out=c-o,o&&y_(u.output,u.output,i,o,0),l.onData(a)):l.onData(v_(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(f=!0)}while((u.avail_in>0||0===u.avail_out)&&1!==n);return 1===n&&(r=4),4===r?(n=function(e){if(!e||!e.state)return A_;var t=e.state;return t.window&&(t.window=null),e.state=null,0}(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),u.avail_out=0,!0)},eS.prototype.onData=function(e){this.chunks.push(e)},eS.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},yl.add("gz",(function(e){var t;e instanceof ArrayBuffer&&(e=new Uint8Array(e));try{t=function(e,t){var n=new eS(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}(e)}catch(bS){t=e}return t}));var tS=function(){},nS="//mmtf.rcsb.org/v1.0/",rS=nS+"full/",iS=nS+"reduced/",oS=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(e){var t,n=Rl(e),r=n.name.substr(0,4);return!["pdb","cif"].includes(n.ext)||!1!==n.compressed&&"gz"!==n.compressed?"mmtf"===n.ext?t=n.base.endsWith(".bb")?iS+r:rS+r:n.ext?(rl.warn("unsupported ext",n.ext),t=rS+r):t=rS+r:t="//files.rcsb.org/download/"+n.path,Pa()+t},t.prototype.getExt=function(e){var t=Rl(e).ext;return t||"mmtf"},t}(tS);hl.add("rcsb",new oS);var aS="//pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/",sS="/SDF?record_type=3d",lS=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(e){var t,n=Rl(e),r=n.name;return n.ext&&"sdf"!==n.ext?(rl.warn("unsupported ext",n.ext),t=aS+r+sS):t=aS+r+sS,Pa()+t},t.prototype.getExt=function(e){var t=Rl(e).ext;return t||"sdf"},t}(tS);hl.add("pubchem",new lS);var uS=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(e){return e},t.prototype.getExt=function(e){return Rl(e).ext},t}(tS);hl.add("ftp",new uS),hl.add("http",new uS),hl.add("https",new uS);var cS=/^((http|https|ftp):)*\/\//,dS=function(e){function t(t){void 0===t&&(t=""),e.call(this),this.baseUrl=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(e){var t=Rl(e),n=this.baseUrl+t.path;return cS.test(this.baseUrl)||(n=function(e){var t=window.location,n=t.pathname,r=n.substring(0,n.lastIndexOf("/")+1);return t.origin+r+e}(n)),n},t.prototype.getExt=function(e){return Rl(e).ext},t}(tS),fS=function(e){function t(t){void 0===t&&(t=""),e.call(this),this.baseUrl=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getListing=function(e){void 0===e&&(e="");var t=this.baseUrl+"dir/"+e;return"/"!==t[t.length-1]&&(t+="/"),Ol(t,{ext:"json"}).then((function(t){return{path:e,data:t.data}}))},t.prototype.getUrl=function(e){var t=Rl(e);return this.baseUrl+"file/"+t.path+t.query},t.prototype.getCountUrl=function(e){var t=Rl(e);return this.baseUrl+"traj/numframes/"+t.path+t.query},t.prototype.getFrameUrl=function(e,t){var n=Rl(e);return this.baseUrl+"traj/frame/"+t+"/"+n.path+n.query},t.prototype.getFrameParams=function(e,t){return"atomIndices="+t.join(";")},t.prototype.getPathUrl=function(e,t){var n=Rl(e);return this.baseUrl+"traj/path/"+t+"/"+n.path+n.query},t.prototype.getExt=function(e){return Rl(e).ext},t}(tS);function pS(e,t){return{type:"integer",max:e,min:t}}function hS(e,t,n){return{type:"number",precision:e,max:t,min:n}}function mS(e,t,n){return{type:"range",step:e,max:t,min:n}}function gS(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return{type:"select",options:e.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=t,n))}),{})}}var vS={backgroundColor:{type:"color"},quality:gS("auto","low","medium","high"),sampleLevel:mS(1,5,-1),impostor:{type:"boolean"},workerDefault:{type:"boolean"},rotateSpeed:hS(1,10,0),zoomSpeed:hS(1,10,0),panSpeed:hS(1,10,0),clipNear:mS(1,100,0),clipFar:mS(1,100,0),clipDist:pS(200,0),clipMode:gS("scene","camera"),clipScale:gS("relative","absolute"),fogNear:mS(1,100,0),fogFar:mS(1,100,0),fogMode:gS("scene","camera"),fogScale:gS("relative","absolute"),cameraType:gS("perspective","orthographic","stereo"),cameraEyeSep:hS(3,1,.01),cameraFov:mS(1,120,15),lightColor:{type:"color"},lightIntensity:hS(2,10,0),ambientColor:{type:"color"},ambientIntensity:hS(2,10,0),hoverTimeout:pS(1e4,-1),tooltip:{type:"boolean"},mousePreset:gS.apply(void 0,Object.keys(Vp))},yS="2.0.0-dev.37";window.Promise||(window.Promise=o)},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3513:function(e,t,n){"use strict";var r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y,b,x,w,_,S,C,E,k,P,M,A,T,R,I,O,L,D,F,N,B,z,j,H,U,V,G,W,$,q,X,K,Y,Z,Q,J,ee,te,ne,re,ie,oe=n(7424).default,ae=n(8416).default,se=n(9400).default,le=n(861).default;var ue=n(2791),ce=n(7691);function de(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var fe,pe=function(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(ue),he=de(ue),me=de(ce);function ge(e,t){return e[t]}function ve(e,t){return t.split(".").reduce((function(e,t){var n=t.match(/[^\]\\[.]+/g);if(n&&n.length>1)for(var r=0;r<n.length;r++)return e[n[r]][n[r+1]];return e[t]}),e)}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[].concat(le(e.slice(0,n)),[t],le(e.slice(n)))}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",r=e.slice(),i=ge(t,n);return i?r.splice(r.findIndex((function(e){return ge(e,n)===i})),1):r.splice(r.findIndex((function(e){return e===t})),1),r}function xe(e){return e.map((function(e,t){var n=Object.assign(Object.assign({},e),{sortable:e.sortable||!!e.sortFunction||void 0});return e.id||(n.id=t+1),n}))}function we(e,t){return Math.ceil(e/t)}function _e(e,t){return Math.min(e,t)}!function(e){e.ASC="asc",e.DESC="desc"}(fe||(fe={}));var Se=function(){return null};function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={},i=le(n);return t.length&&t.forEach((function(t){if(!t.when||"function"!=typeof t.when)throw new Error('"when" must be defined in the conditional style object and must be function');t.when(e)&&(r=t.style||{},t.classNames&&(i=[].concat(le(i),le(t.classNames))),"function"==typeof t.style&&(r=t.style(e)||{}))})),{style:r,classNames:i.join(" ")}}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",r=ge(e,n);return r?t.some((function(e){return ge(e,n)===r})):t.some((function(t){return t===e}))}function ke(e,t){return t?e.findIndex((function(e){return Pe(e.id,t)})):-1}function Pe(e,t){return e==t}function Me(e,t){var n=!e.toggleOnSelectedRowsChange;switch(t.type){case"SELECT_ALL_ROWS":var r=t.keyField,i=t.rows,o=t.rowCount,a=t.mergeSelections,s=!e.allSelected,l=!e.toggleOnSelectedRowsChange;if(a){var u=s?[].concat(le(e.selectedRows),le(i.filter((function(t){return!Ee(t,e.selectedRows,r)})))):e.selectedRows.filter((function(e){return!Ee(e,i,r)}));return Object.assign(Object.assign({},e),{allSelected:s,selectedCount:u.length,selectedRows:u,toggleOnSelectedRowsChange:l})}return Object.assign(Object.assign({},e),{allSelected:s,selectedCount:s?o:0,selectedRows:s?i:[],toggleOnSelectedRowsChange:l});case"SELECT_SINGLE_ROW":var c=t.keyField,d=t.row,f=t.isSelected,p=t.rowCount;return t.singleSelect?f?Object.assign(Object.assign({},e),{selectedCount:0,allSelected:!1,selectedRows:[],toggleOnSelectedRowsChange:n}):Object.assign(Object.assign({},e),{selectedCount:1,allSelected:!1,selectedRows:[d],toggleOnSelectedRowsChange:n}):f?Object.assign(Object.assign({},e),{selectedCount:e.selectedRows.length>0?e.selectedRows.length-1:0,allSelected:!1,selectedRows:be(e.selectedRows,d,c),toggleOnSelectedRowsChange:n}):Object.assign(Object.assign({},e),{selectedCount:e.selectedRows.length+1,allSelected:e.selectedRows.length+1===p,selectedRows:ye(e.selectedRows,d),toggleOnSelectedRowsChange:n});case"SELECT_MULTIPLE_ROWS":var h=t.keyField,m=t.selectedRows,g=t.totalRows;if(t.mergeSelections){var v=[].concat(le(e.selectedRows),le(m.filter((function(t){return!Ee(t,e.selectedRows,h)}))));return Object.assign(Object.assign({},e),{selectedCount:v.length,allSelected:!1,selectedRows:v,toggleOnSelectedRowsChange:n})}return Object.assign(Object.assign({},e),{selectedCount:m.length,allSelected:m.length===g,selectedRows:m,toggleOnSelectedRowsChange:n});case"CLEAR_SELECTED_ROWS":var y=t.selectedRowsFlag;return Object.assign(Object.assign({},e),{allSelected:!1,selectedCount:0,selectedRows:[],selectedRowsFlag:y});case"SORT_CHANGE":var b=t.sortDirection,x=t.selectedColumn,w=t.clearSelectedOnSort;return Object.assign(Object.assign(Object.assign({},e),{selectedColumn:x,sortDirection:b,currentPage:1}),w&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:n});case"CHANGE_PAGE":var _=t.page,S=t.paginationServer,C=t.visibleOnly,E=t.persistSelectedOnPageChange,k=S&&E,P=S&&!E||C;return Object.assign(Object.assign(Object.assign(Object.assign({},e),{currentPage:_}),k&&{allSelected:!1}),P&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:n});case"CHANGE_ROWS_PER_PAGE":var M=t.rowsPerPage,A=t.page;return Object.assign(Object.assign({},e),{currentPage:A,rowsPerPage:M})}}var Ae=ce.css(r||(r=se(["\n\tpointer-events: none;\n\topacity: 0.4;\n"]))),Te=me.default.div(i||(i=se(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 100%;\n\theight: 100%;\n\tmax-width: 100%;\n\t",";\n\t",";\n"])),(function(e){return e.disabled&&Ae}),(function(e){return e.theme.table.style})),Re=ce.css(o||(o=se(["\n\tposition: sticky;\n\tposition: -webkit-sticky; /* Safari */\n\ttop: 0;\n\tz-index: 1;\n"]))),Ie=me.default.div(a||(a=se(["\n\tdisplay: flex;\n\twidth: 100%;\n\t",";\n\t",";\n"])),(function(e){return e.fixedHeader&&Re}),(function(e){return e.theme.head.style})),Oe=me.default.div(s||(s=se(["\n\tdisplay: flex;\n\talign-items: stretch;\n\twidth: 100%;\n\t",";\n\t",";\n"])),(function(e){return e.theme.headRow.style}),(function(e){var t=e.dense,n=e.theme;return t&&n.headRow.denseStyle})),Le=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ce.css(l||(l=se(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),599,ce.css.apply(ce,[e].concat(n)))},De=me.default.div(f||(f=se(["\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tline-height: normal;\n\t",";\n\t",";\n"])),(function(e){return e.theme[e.headCell?"headCells":"cells"].style}),(function(e){return e.noPadding&&"padding: 0"})),Fe=me.default(De)(p||(p=se(["\n\tflex-grow: ",";\n\tflex-shrink: 0;\n\tflex-basis: 0;\n\tmax-width: ",";\n\tmin-width: ",";\n\t",";\n\t",";\n\t",";\n\t",";\n\n\t/* handle hiding cells */\n\t",";\n\t",";\n\t",";\n\t",";\n"])),(function(e){var t=e.button,n=e.grow;return 0===n||t?0:n||1}),(function(e){return e.maxWidth||"100%"}),(function(e){return e.minWidth||"100px"}),(function(e){var t=e.width;return t&&ce.css(h||(h=se(["\n\t\t\tmin-width: ",";\n\t\t\tmax-width: ",";\n\t\t"])),t,t)}),(function(e){return e.right&&"justify-content: flex-end"}),(function(e){var t=e.button;return(e.center||t)&&"justify-content: center"}),(function(e){var t=e.compact,n=e.button;return(t||n)&&"padding: 0"}),(function(e){var t=e.hide;return t&&"sm"===t&&Le(m||(m=se(["\n    display: none;\n  "])))}),(function(e){var t=e.hide;return t&&"md"===t&&function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ce.css(u||(u=se(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),959,ce.css.apply(ce,[e].concat(n)))}(g||(g=se(["\n    display: none;\n  "])))}),(function(e){var t=e.hide;return t&&"lg"===t&&function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ce.css(c||(c=se(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),1280,ce.css.apply(ce,[e].concat(n)))}(v||(v=se(["\n    display: none;\n  "])))}),(function(e){var t=e.hide;return t&&Number.isInteger(t)&&function(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return ce.css(d||(d=se(["\n\t\t\t\t@media screen and (max-width: ","px) {\n\t\t\t\t\t","\n\t\t\t\t}\n\t\t\t"])),e,ce.css.apply(ce,[t].concat(r)))}}(t)(y||(y=se(["\n    display: none;\n  "])))})),Ne=ce.css(b||(b=se(["\n\tdiv:first-child {\n\t\twhite-space: ",";\n\t\toverflow: ",";\n\t\ttext-overflow: ellipsis;\n\t}\n"])),(function(e){return e.wrapCell?"normal":"nowrap"}),(function(e){return e.allowOverflow?"visible":"hidden"})),Be=me.default(Fe).attrs((function(e){return{style:e.style}}))(x||(x=se(["\n\t",";\n\t",";\n\t",";\n"])),(function(e){return!e.renderAsCell&&Ne}),(function(e){var t=e.theme;return e.isDragging&&t.cells.draggingStyle}),(function(e){return e.cellStyle})),ze=pe.memo((function(e){var t=e.id,n=e.column,r=e.row,i=e.rowIndex,o=e.dataTag,a=e.isDragging,s=e.onDragStart,l=e.onDragOver,u=e.onDragEnd,c=e.onDragEnter,d=e.onDragLeave,f=Ce(r,n.conditionalCellStyles,["rdt_TableCell"]),p=f.style,h=f.classNames;return pe.createElement(Be,{id:t,"data-column-id":n.id,role:"cell",className:h,"data-tag":o,cellStyle:n.style,renderAsCell:!!n.cell,allowOverflow:n.allowOverflow,button:n.button,center:n.center,compact:n.compact,grow:n.grow,hide:n.hide,maxWidth:n.maxWidth,minWidth:n.minWidth,right:n.right,width:n.width,wrapCell:n.wrap,style:p,isDragging:a,onDragStart:s,onDragOver:l,onDragEnd:u,onDragEnter:c,onDragLeave:d},!n.cell&&pe.createElement("div",{"data-tag":o},function(e,t,n,r){if(!t)return null;if("string"!=typeof t&&"function"!=typeof t)throw new Error("selector must be a . delimited string eg (my.property) or function (e.g. row => row.field");return n&&"function"==typeof n?n(e,r):t&&"function"==typeof t?t(e,r):ve(e,t)}(r,n.selector,n.format,i)),n.cell&&n.cell(r,i,n,t))})),je=pe.memo((function(e){var t=e.name,n=e.component,r=void 0===n?"input":n,i=e.componentOptions,o=void 0===i?{style:{}}:i,a=e.indeterminate,s=void 0!==a&&a,l=e.checked,u=void 0!==l&&l,c=e.disabled,d=void 0!==c&&c,f=e.onClick,p=void 0===f?Se:f,h=r,m="input"!==h?o.style:function(e){return Object.assign(Object.assign({fontSize:"18px"},!e&&{cursor:"pointer"}),{padding:0,marginTop:"1px",verticalAlign:"middle",position:"relative"})}(d),g=pe.useMemo((function(){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;return Object.keys(e).map((function(t){return e[t]})).forEach((function(t,r){var o=e;"function"==typeof t&&(i=Object.assign(Object.assign({},o),ae({},Object.keys(e)[r],t.apply(void 0,n))))})),i||e}(o,s)}),[o,s]);return pe.createElement(h,Object.assign({type:"checkbox",ref:function(e){e&&(e.indeterminate=s)},style:m,onClick:d?Se:p,name:t,"aria-label":t,checked:u,disabled:d},g,{onChange:Se}))})),He=me.default(De)(w||(w=se(["\n\tflex: 0 0 48px;\n\tmin-width: 48px;\n\tjustify-content: center;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n"])));function Ue(e){var t=e.name,n=e.keyField,r=e.row,i=e.rowCount,o=e.selected,a=e.selectableRowsComponent,s=e.selectableRowsComponentProps,l=e.selectableRowsSingle,u=e.selectableRowDisabled,c=e.onSelectedRow,d=!(!u||!u(r));return pe.createElement(He,{onClick:function(e){return e.stopPropagation()},className:"rdt_TableCell",noPadding:!0},pe.createElement(je,{name:t,component:a,componentOptions:s,checked:o,"aria-checked":o,onClick:function(){c({type:"SELECT_SINGLE_ROW",row:r,isSelected:o,keyField:n,rowCount:i,singleSelect:l})},disabled:d}))}var Ve=me.default.button(_||(_=se(["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n\tborder: none;\n\tbackground-color: transparent;\n\t",";\n"])),(function(e){return e.theme.expanderButton.style}));function Ge(e){var t=e.disabled,n=void 0!==t&&t,r=e.expanded,i=void 0!==r&&r,o=e.expandableIcon,a=e.id,s=e.row,l=e.onToggled,u=i?o.expanded:o.collapsed;return pe.createElement(Ve,{"aria-disabled":n,onClick:function(){return l&&l(s)},"data-testid":"expander-button-".concat(a),disabled:n,"aria-label":i?"Collapse Row":"Expand Row",role:"button",type:"button"},u)}var We=me.default(De)(S||(S=se(["\n\twhite-space: nowrap;\n\tfont-weight: 400;\n\tmin-width: 48px;\n\t",";\n"])),(function(e){return e.theme.expanderCell.style}));function $e(e){var t=e.row,n=e.expanded,r=void 0!==n&&n,i=e.expandableIcon,o=e.id,a=e.onToggled,s=e.disabled,l=void 0!==s&&s;return pe.createElement(We,{onClick:function(e){return e.stopPropagation()},noPadding:!0},pe.createElement(Ge,{id:o,row:t,expanded:r,expandableIcon:i,disabled:l,onToggled:a}))}var qe,Xe,Ke,Ye=me.default.div(C||(C=se(["\n\twidth: 100%;\n\tbox-sizing: border-box;\n\t",";\n\t",";\n"])),(function(e){return e.theme.expanderRow.style}),(function(e){return e.extendedRowStyle})),Ze=pe.memo((function(e){var t=e.data,n=e.ExpanderComponent,r=e.expanderComponentProps,i=e.extendedRowStyle,o=e.extendedClassNames,a=["rdt_ExpanderRow"].concat(le(o.split(" ").filter((function(e){return"rdt_TableRow"!==e})))).join(" ");return pe.createElement(Ye,{className:a,extendedRowStyle:i},pe.createElement(n,Object.assign({data:t},r)))}));t.Nm=void 0,(qe=t.Nm||(t.Nm={})).LTR="ltr",qe.RTL="rtl",qe.AUTO="auto",t.v2=void 0,(Xe=t.v2||(t.v2={})).LEFT="left",Xe.RIGHT="right",Xe.CENTER="center",t.pU=void 0,(Ke=t.pU||(t.pU={})).SM="sm",Ke.MD="md",Ke.LG="lg";var Qe=ce.css(E||(E=se(["\n\t&:hover {\n\t\t",";\n\t}\n"])),(function(e){var t=e.highlightOnHover,n=e.theme;return t&&n.rows.highlightOnHoverStyle})),Je=ce.css(k||(k=se(["\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]))),et=me.default.div.attrs((function(e){return{style:e.style}}))(P||(P=se(["\n\tdisplay: flex;\n\talign-items: stretch;\n\talign-content: stretch;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\t",";\n\t",";\n\t",";\n\t",";\n\t",";\n\t",";\n"])),(function(e){return e.theme.rows.style}),(function(e){var t=e.dense,n=e.theme;return t&&n.rows.denseStyle}),(function(e){var t=e.striped,n=e.theme;return t&&n.rows.stripedStyle}),(function(e){return e.highlightOnHover&&Qe}),(function(e){return e.pointerOnHover&&Je}),(function(e){var t=e.selected,n=e.theme;return t&&n.rows.selectedHighlightStyle}));function tt(e){var t=e.columns,n=void 0===t?[]:t,r=e.conditionalRowStyles,i=void 0===r?[]:r,o=e.defaultExpanded,a=void 0!==o&&o,s=e.defaultExpanderDisabled,l=void 0!==s&&s,u=e.dense,c=void 0!==u&&u,d=e.expandableIcon,f=e.expandableRows,p=void 0!==f&&f,h=e.expandableRowsComponent,m=e.expandableRowsComponentProps,g=e.expandableRowsHideExpander,v=e.expandOnRowClicked,y=void 0!==v&&v,b=e.expandOnRowDoubleClicked,x=void 0!==b&&b,w=e.highlightOnHover,_=void 0!==w&&w,S=e.id,C=e.expandableInheritConditionalStyles,E=e.keyField,k=e.onRowClicked,P=void 0===k?Se:k,M=e.onRowDoubleClicked,A=void 0===M?Se:M,T=e.onRowMouseEnter,R=void 0===T?Se:T,I=e.onRowMouseLeave,O=void 0===I?Se:I,L=e.onRowExpandToggled,D=void 0===L?Se:L,F=e.onSelectedRow,N=void 0===F?Se:F,B=e.pointerOnHover,z=void 0!==B&&B,j=e.row,H=e.rowCount,U=e.rowIndex,V=e.selectableRowDisabled,G=void 0===V?null:V,W=e.selectableRows,$=void 0!==W&&W,q=e.selectableRowsComponent,X=e.selectableRowsComponentProps,K=e.selectableRowsHighlight,Y=void 0!==K&&K,Z=e.selectableRowsSingle,Q=void 0!==Z&&Z,J=e.selected,ee=e.striped,te=void 0!==ee&&ee,ne=e.draggingColumnId,re=e.onDragStart,ie=e.onDragOver,ae=e.onDragEnd,se=e.onDragEnter,le=e.onDragLeave,ue=pe.useState(a),ce=oe(ue,2),de=ce[0],fe=ce[1];pe.useEffect((function(){fe(a)}),[a]);var he=pe.useCallback((function(){fe(!de),D(!de,j)}),[de,D,j]),me=z||p&&(y||x),ve=pe.useCallback((function(e){e.target&&"allowRowEvents"===e.target.getAttribute("data-tag")&&(P(j,e),!l&&p&&y&&he())}),[l,y,p,he,P,j]),ye=pe.useCallback((function(e){e.target&&"allowRowEvents"===e.target.getAttribute("data-tag")&&(A(j,e),!l&&p&&x&&he())}),[l,x,p,he,A,j]),be=pe.useCallback((function(e){R(j,e)}),[R,j]),xe=pe.useCallback((function(e){O(j,e)}),[O,j]),we=ge(j,E),_e=Ce(j,i,["rdt_TableRow"]),Ee=_e.style,ke=_e.classNames,Me=Y&&J,Ae=C?Ee:{},Te=te&&U%2==0;return pe.createElement(pe.Fragment,null,pe.createElement(et,{id:"row-".concat(S),role:"row",striped:Te,highlightOnHover:_,pointerOnHover:!l&&me,dense:c,onClick:ve,onDoubleClick:ye,onMouseEnter:be,onMouseLeave:xe,className:ke,selected:Me,style:Ee},$&&pe.createElement(Ue,{name:"select-row-".concat(we),keyField:E,row:j,rowCount:H,selected:J,selectableRowsComponent:q,selectableRowsComponentProps:X,selectableRowDisabled:G,selectableRowsSingle:Q,onSelectedRow:N}),p&&!g&&pe.createElement($e,{id:we,expandableIcon:d,expanded:de,row:j,onToggled:he,disabled:l}),n.map((function(e){return e.omit?null:pe.createElement(ze,{id:"cell-".concat(e.id,"-").concat(we),key:"cell-".concat(e.id,"-").concat(we),dataTag:e.ignoreRowClick||e.button?null:"allowRowEvents",column:e,row:j,rowIndex:U,isDragging:Pe(ne,e.id),onDragStart:re,onDragOver:ie,onDragEnd:ae,onDragEnter:se,onDragLeave:le})}))),p&&de&&pe.createElement(Ze,{key:"expander-".concat(we),data:j,extendedRowStyle:Ae,extendedClassNames:ke,ExpanderComponent:h,expanderComponentProps:m}))}var nt=me.default.span(M||(M=se(["\n\tpadding: 2px;\n\tcolor: inherit;\n\tflex-grow: 0;\n\tflex-shrink: 0;\n\t",";\n\t",";\n"])),(function(e){return e.sortActive?"opacity: 1":"opacity: 0"}),(function(e){return"desc"===e.sortDirection&&"transform: rotate(180deg)"})),rt=function(e){var t=e.sortActive,n=e.sortDirection;return he.default.createElement(nt,{sortActive:t,sortDirection:n},"\u25b2")},it=me.default(Fe)(A||(A=se(["\n\t",";\n\t",";\n"])),(function(e){return e.button&&"text-align: center"}),(function(e){var t=e.theme;return e.isDragging&&t.headCells.draggingStyle})),ot=ce.css(T||(T=se(["\n\tcursor: pointer;\n\tspan.__rdt_custom_sort_icon__ {\n\t\ti,\n\t\tsvg {\n\t\t\ttransform: 'translate3d(0, 0, 0)';\n\t\t\t",";\n\t\t\tcolor: inherit;\n\t\t\tfont-size: 18px;\n\t\t\theight: 18px;\n\t\t\twidth: 18px;\n\t\t\tbackface-visibility: hidden;\n\t\t\ttransform-style: preserve-3d;\n\t\t\ttransition-duration: 95ms;\n\t\t\ttransition-property: transform;\n\t\t}\n\n\t\t&.asc i,\n\t\t&.asc svg {\n\t\t\ttransform: rotate(180deg);\n\t\t}\n\t}\n\n\t",";\n"])),(function(e){return e.sortActive?"opacity: 1":"opacity: 0"}),(function(e){return!e.sortActive&&ce.css(R||(R=se(["\n\t\t\t&:hover,\n\t\t\t&:focus {\n\t\t\t\topacity: 0.7;\n\n\t\t\t\tspan,\n\t\t\t\tspan.__rdt_custom_sort_icon__ * {\n\t\t\t\t\topacity: 0.7;\n\t\t\t\t}\n\t\t\t}\n\t\t"])))})),at=me.default.div(I||(I=se(["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: inherit;\n\theight: 100%;\n\twidth: 100%;\n\toutline: none;\n\tuser-select: none;\n\toverflow: hidden;\n\t",";\n"])),(function(e){return!e.disabled&&ot})),st=me.default.div(O||(O=se(["\n\toverflow: hidden;\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n"]))),lt=pe.memo((function(e){var t=e.column,n=e.disabled,r=e.draggingColumnId,i=e.selectedColumn,o=void 0===i?{}:i,a=e.sortDirection,s=e.sortIcon,l=e.sortServer,u=e.pagination,c=e.paginationServer,d=e.persistSelectedOnSort,f=e.selectableRowsVisibleOnly,p=e.onSort,h=e.onDragStart,m=e.onDragOver,g=e.onDragEnd,v=e.onDragEnter,y=e.onDragLeave;pe.useEffect((function(){"string"==typeof t.selector&&console.error("Warning: ".concat(t.selector," is a string based column selector which has been deprecated as of v7 and will be removed in v8. Instead, use a selector function e.g. row => row[field]..."))}),[]);var b=pe.useState(!1),x=oe(b,2),w=x[0],_=x[1],S=pe.useRef(null);if(pe.useEffect((function(){S.current&&_(S.current.scrollWidth>S.current.clientWidth)}),[w]),t.omit)return null;var C=function(){if(t.sortable||t.selector){var e=a;Pe(o.id,t.id)&&(e=a===fe.ASC?fe.DESC:fe.ASC),p({type:"SORT_CHANGE",sortDirection:e,selectedColumn:t,clearSelectedOnSort:u&&c&&!d||l||f})}},E=function(e){return pe.createElement(rt,{sortActive:e,sortDirection:a})},k=function(){return pe.createElement("span",{className:[a,"__rdt_custom_sort_icon__"].join(" ")},s)},P=!(!t.sortable||!Pe(o.id,t.id)),M=!t.sortable||n,A=t.sortable&&!s&&!t.right,T=t.sortable&&!s&&t.right,R=t.sortable&&s&&!t.right,I=t.sortable&&s&&t.right;return pe.createElement(it,{"data-column-id":t.id,className:"rdt_TableCol",headCell:!0,allowOverflow:t.allowOverflow,button:t.button,compact:t.compact,grow:t.grow,hide:t.hide,maxWidth:t.maxWidth,minWidth:t.minWidth,right:t.right,center:t.center,width:t.width,draggable:t.reorder,isDragging:Pe(t.id,r),onDragStart:h,onDragOver:m,onDragEnd:g,onDragEnter:v,onDragLeave:y},t.name&&pe.createElement(at,{"data-column-id":t.id,"data-sort-id":t.id,role:"columnheader",tabIndex:0,className:"rdt_TableCol_Sortable",onClick:M?void 0:C,onKeyPress:M?void 0:function(e){"Enter"===e.key&&C()},sortActive:!M&&P,disabled:M},!M&&I&&k(),!M&&T&&E(P),"string"==typeof t.name?pe.createElement(st,{title:w?t.name:void 0,ref:S,"data-column-id":t.id},t.name):t.name,!M&&R&&k(),!M&&A&&E(P)))})),ut=me.default(De)(L||(L=se(["\n\tflex: 0 0 48px;\n\tjustify-content: center;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n\tfont-size: unset;\n"])));function ct(e){var t=e.headCell,n=void 0===t||t,r=e.rowData,i=e.keyField,o=e.allSelected,a=e.mergeSelections,s=e.selectedRows,l=e.selectableRowsComponent,u=e.selectableRowsComponentProps,c=e.selectableRowDisabled,d=e.onSelectAllRows,f=s.length>0&&!o,p=c?r.filter((function(e){return!c(e)})):r,h=0===p.length,m=Math.min(r.length,p.length);return pe.createElement(ut,{className:"rdt_TableCol",headCell:n,noPadding:!0},pe.createElement(je,{name:"select-all-rows",component:l,componentOptions:u,onClick:function(){d({type:"SELECT_ALL_ROWS",rows:p,rowCount:m,mergeSelections:a,keyField:i})},checked:o,indeterminate:f,disabled:h}))}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.Nm.AUTO,n="object"==typeof window,r=pe.useState(!1),i=oe(r,2),o=i[0],a=i[1];return pe.useEffect((function(){if(n)if("auto"!==e)a("rtl"===e);else{var t=!(!window.document||!window.document.createElement),r=document.getElementsByTagName("BODY")[0],i=document.getElementsByTagName("HTML")[0],o="rtl"===r.dir||"rtl"===i.dir;a(t&&o)}}),[e,n]),o}var ft=me.default.div(D||(D=se(["\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 1 0 auto;\n\theight: 100%;\n\tcolor: ",";\n\tfont-size: ",";\n\tfont-weight: 400;\n"])),(function(e){return e.theme.contextMenu.fontColor}),(function(e){return e.theme.contextMenu.fontSize})),pt=me.default.div(F||(F=se(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tflex-wrap: wrap;\n"]))),ht=me.default.div(N||(N=se(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbox-sizing: inherit;\n\tz-index: 1;\n\talign-items: center;\n\tjustify-content: space-between;\n\tdisplay: flex;\n\t",";\n\t",";\n\t",";\n"])),(function(e){return e.rtl&&"direction: rtl"}),(function(e){return e.theme.contextMenu.style}),(function(e){var t=e.theme;return e.visible&&t.contextMenu.activeStyle}));function mt(e){var t=e.contextMessage,n=e.contextActions,r=e.contextComponent,i=e.selectedCount,o=dt(e.direction),a=i>0;return r?pe.createElement(ht,{visible:a},pe.cloneElement(r,{selectedCount:i})):pe.createElement(ht,{visible:a,rtl:o},pe.createElement(ft,null,function(e,t,n){if(0===t)return null;var r=1===t?e.singular:e.plural;return n?"".concat(t," ").concat(e.message||""," ").concat(r):"".concat(t," ").concat(r," ").concat(e.message||"")}(t,i,o)),pe.createElement(pt,null,n))}var gt=me.default.div(B||(B=se(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\talign-items: center;\n\tjustify-content: space-between;\n\twidth: 100%;\n\tflex-wrap: wrap;\n\t","\n"])),(function(e){return e.theme.header.style})),vt=me.default.div(z||(z=se(["\n\tflex: 1 0 auto;\n\tcolor: ",";\n\tfont-size: ",";\n\tfont-weight: 400;\n"])),(function(e){return e.theme.header.fontColor}),(function(e){return e.theme.header.fontSize})),yt=me.default.div(j||(j=se(["\n\tflex: 1 0 auto;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\n\t> * {\n\t\tmargin-left: 5px;\n\t}\n"]))),bt=function(e){var t=e.title,n=e.actions,r=void 0===n?null:n,i=e.contextMessage,o=e.contextActions,a=e.contextComponent,s=e.selectedCount,l=e.direction,u=e.showMenu,c=void 0===u||u;return pe.createElement(gt,{className:"rdt_TableHeader",role:"heading","aria-level":1},pe.createElement(vt,null,t),r&&pe.createElement(yt,null,r),c&&pe.createElement(mt,{contextMessage:i,contextActions:o,contextComponent:a,direction:l,selectedCount:s}))};function xt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var wt={left:"flex-start",right:"flex-end",center:"center"},_t=me.default.header(H||(H=se(["\n\tposition: relative;\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\tbox-sizing: border-box;\n\talign-items: center;\n\tpadding: 4px 16px 4px 24px;\n\twidth: 100%;\n\tjustify-content: ",";\n\tflex-wrap: ",";\n\t","\n"])),(function(e){var t=e.align;return wt[t]}),(function(e){return e.wrapContent?"wrap":"nowrap"}),(function(e){return e.theme.subHeader.style})),St=function(e){var t=e.align,n=void 0===t?"right":t,r=e.wrapContent,i=void 0===r||r,o=xt(e,["align","wrapContent"]);return pe.createElement(_t,Object.assign({align:n,wrapContent:i},o))},Ct=me.default.div(U||(U=se(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]))),Et=me.default.div(V||(V=se(["\n\tposition: relative;\n\twidth: 100%;\n\tborder-radius: inherit;\n\t",";\n\n\t",";\n\n\t",";\n"])),(function(e){var t=e.responsive,n=e.fixedHeader;return t&&ce.css(G||(G=se(["\n\t\t\toverflow-x: auto;\n\n\t\t\t// hidden prevents vertical scrolling in firefox when fixedHeader is disabled\n\t\t\toverflow-y: ",";\n\t\t\tmin-height: 0;\n\t\t"])),n?"auto":"hidden")}),(function(e){var t=e.fixedHeader,n=void 0!==t&&t,r=e.fixedHeaderScrollHeight,i=void 0===r?"100vh":r;return n&&ce.css(W||(W=se(["\n\t\t\tmax-height: ",";\n\t\t\t-webkit-overflow-scrolling: touch;\n\t\t"])),i)}),(function(e){return e.theme.responsiveWrapper.style})),kt=me.default.div($||($=se(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\t",";\n"])),(function(e){return e.theme.progress.style})),Pt=me.default.div(q||(q=se(["\n\tposition: relative;\n\twidth: 100%;\n\t",";\n"])),(function(e){return e.theme.tableWrapper.style})),Mt=me.default(De)(X||(X=se(["\n\twhite-space: nowrap;\n\t",";\n"])),(function(e){return e.theme.expanderCell.style})),At=me.default.div(K||(K=se(["\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\t",";\n"])),(function(e){return e.theme.noData.style})),Tt=function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},he.default.createElement("path",{d:"M7 10l5 5 5-5z"}),he.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},Rt=me.default.select(Y||(Y=se(["\n\tcursor: pointer;\n\theight: 24px;\n\tmax-width: 100%;\n\tuser-select: none;\n\tpadding-left: 8px;\n\tpadding-right: 24px;\n\tbox-sizing: content-box;\n\tfont-size: inherit;\n\tcolor: inherit;\n\tborder: none;\n\tbackground-color: transparent;\n\tappearance: none;\n\tdirection: ltr;\n\tflex-shrink: 0;\n\n\t&::-ms-expand {\n\t\tdisplay: none;\n\t}\n\n\t&:disabled::-ms-expand {\n\t\tbackground: #f60;\n\t}\n\n\toption {\n\t\tcolor: initial;\n\t}\n"]))),It=me.default.div(Z||(Z=se(["\n\tposition: relative;\n\tflex-shrink: 0;\n\tfont-size: inherit;\n\tcolor: inherit;\n\tmargin-top: 1px;\n\n\tsvg {\n\t\ttop: 0;\n\t\tright: 0;\n\t\tcolor: inherit;\n\t\tposition: absolute;\n\t\tfill: currentColor;\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tdisplay: inline-block;\n\t\tuser-select: none;\n\t\tpointer-events: none;\n\t}\n"]))),Ot=function(e){var t=e.defaultValue,n=e.onChange,r=xt(e,["defaultValue","onChange"]);return pe.createElement(It,null,pe.createElement(Rt,Object.assign({onChange:n,defaultValue:t},r)),pe.createElement(Tt,null))},Lt={columns:[],data:[],title:"",keyField:"id",selectableRows:!1,selectableRowsHighlight:!1,selectableRowsNoSelectAll:!1,selectableRowSelected:null,selectableRowDisabled:null,selectableRowsComponent:"input",selectableRowsComponentProps:{},selectableRowsVisibleOnly:!1,selectableRowsSingle:!1,clearSelectedRows:!1,expandableRows:!1,expandableRowDisabled:null,expandableRowExpanded:null,expandOnRowClicked:!1,expandableRowsHideExpander:!1,expandOnRowDoubleClicked:!1,expandableInheritConditionalStyles:!1,expandableRowsComponent:function(){return he.default.createElement("div",null,"To add an expander pass in a component instance via ",he.default.createElement("strong",null,"expandableRowsComponent"),". You can then access props.data from this component.")},expandableIcon:{collapsed:he.default.createElement((function(){return he.default.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},he.default.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),he.default.createElement("path",{d:"M0-.25h24v24H0z",fill:"none"}))}),null),expanded:he.default.createElement((function(){return he.default.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},he.default.createElement("path",{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}),he.default.createElement("path",{d:"M0-.75h24v24H0z",fill:"none"}))}),null)},expandableRowsComponentProps:{},progressPending:!1,progressComponent:he.default.createElement("div",{style:{fontSize:"24px",fontWeight:700,padding:"24px"}},"Loading..."),persistTableHead:!1,sortIcon:null,sortFunction:null,sortServer:!1,striped:!1,highlightOnHover:!1,pointerOnHover:!1,noContextMenu:!1,contextMessage:{singular:"item",plural:"items",message:"selected"},actions:null,contextActions:null,contextComponent:null,defaultSortFieldId:null,defaultSortAsc:!0,responsive:!0,noDataComponent:he.default.createElement("div",{style:{padding:"24px"}},"There are no records to display"),disabled:!1,noTableHead:!1,noHeader:!1,subHeader:!1,subHeaderAlign:t.v2.RIGHT,subHeaderWrap:!0,subHeaderComponent:null,fixedHeader:!1,fixedHeaderScrollHeight:"100vh",pagination:!1,paginationServer:!1,paginationServerOptions:{persistSelectedOnSort:!1,persistSelectedOnPageChange:!1},paginationDefaultPage:1,paginationResetDefaultPage:!1,paginationTotalRows:0,paginationPerPage:10,paginationRowsPerPageOptions:[10,15,20,25,30],paginationComponent:null,paginationComponentOptions:{},paginationIconFirstPage:he.default.createElement((function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},he.default.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),he.default.createElement("path",{fill:"none",d:"M24 24H0V0h24v24z"}))}),null),paginationIconLastPage:he.default.createElement((function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},he.default.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),he.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}),null),paginationIconNext:he.default.createElement((function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},he.default.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),he.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}),null),paginationIconPrevious:he.default.createElement((function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},he.default.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),he.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}),null),dense:!1,conditionalRowStyles:[],theme:"default",customStyles:{},direction:t.Nm.AUTO,onChangePage:Se,onChangeRowsPerPage:Se,onRowClicked:Se,onRowDoubleClicked:Se,onRowMouseEnter:Se,onRowMouseLeave:Se,onRowExpandToggled:Se,onSelectedRowsChange:Se,onSort:Se,onColumnOrderChange:Se},Dt={rowsPerPageText:"Rows per page:",rangeSeparatorText:"of",noRowsPerPage:!1,selectAllRowsItem:!1,selectAllRowsItemText:"All"},Ft=me.default.nav(Q||(Q=se(["\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tpadding-right: 8px;\n\tpadding-left: 8px;\n\twidth: 100%;\n\t",";\n"])),(function(e){return e.theme.pagination.style})),Nt=me.default.button(J||(J=se(["\n\tposition: relative;\n\tdisplay: block;\n\tuser-select: none;\n\tborder: none;\n\t",";\n\t",";\n"])),(function(e){return e.theme.pagination.pageButtonsStyle}),(function(e){return e.isRTL&&"transform: scale(-1, -1)"})),Bt=me.default.div(ee||(ee=se(["\n\tdisplay: flex;\n\talign-items: center;\n\tborder-radius: 4px;\n\twhite-space: nowrap;\n\t",";\n"])),Le(te||(te=se(["\n    width: 100%;\n    justify-content: space-around;\n  "])))),zt=me.default.span(ne||(ne=se(["\n\tflex-shrink: 1;\n\tuser-select: none;\n"]))),jt=me.default(zt)(re||(re=se(["\n\tmargin: 0 24px;\n"]))),Ht=me.default(zt)(ie||(ie=se(["\n\tmargin: 0 4px;\n"]))),Ut=pe.memo((function(e){var t=e.rowsPerPage,n=e.rowCount,r=e.currentPage,i=e.direction,o=void 0===i?Lt.direction:i,a=e.paginationRowsPerPageOptions,s=void 0===a?Lt.paginationRowsPerPageOptions:a,l=e.paginationIconLastPage,u=void 0===l?Lt.paginationIconLastPage:l,c=e.paginationIconFirstPage,d=void 0===c?Lt.paginationIconFirstPage:c,f=e.paginationIconNext,p=void 0===f?Lt.paginationIconNext:f,h=e.paginationIconPrevious,m=void 0===h?Lt.paginationIconPrevious:h,g=e.paginationComponentOptions,v=void 0===g?Lt.paginationComponentOptions:g,y=e.onChangeRowsPerPage,b=void 0===y?Lt.onChangeRowsPerPage:y,x=e.onChangePage,w=void 0===x?Lt.onChangePage:x,_=function(){var e="object"==typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var n=pe.useState(t),r=oe(n,2),i=r[0],o=r[1];return pe.useEffect((function(){if(!e)return function(){return null};function n(){o(t())}return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),i}(),S=dt(o),C=_.width&&_.width>599,E=we(n,t),k=r*t,P=k-t+1,M=1===r,A=r===E,T=Object.assign(Object.assign({},Dt),v),R=r===E?"".concat(P,"-").concat(n," ").concat(T.rangeSeparatorText," ").concat(n):"".concat(P,"-").concat(k," ").concat(T.rangeSeparatorText," ").concat(n),I=pe.useCallback((function(){return w(r-1)}),[r,w]),O=pe.useCallback((function(){return w(r+1)}),[r,w]),L=pe.useCallback((function(){return w(1)}),[w]),D=pe.useCallback((function(){return w(we(n,t))}),[w,n,t]),F=pe.useCallback((function(e){return b(Number(e.target.value),r)}),[r,b]),N=s.map((function(e){return pe.createElement("option",{key:e,value:e},e)}));T.selectAllRowsItem&&N.push(pe.createElement("option",{key:-1,value:n},T.selectAllRowsItemText));var B=pe.createElement(Ot,{onChange:F,defaultValue:t,"aria-label":T.rowsPerPageText},N);return pe.createElement(Ft,{className:"rdt_Pagination"},!T.noRowsPerPage&&C&&pe.createElement(pe.Fragment,null,pe.createElement(Ht,null,T.rowsPerPageText),B),C&&pe.createElement(jt,null,R),pe.createElement(Bt,null,pe.createElement(Nt,{id:"pagination-first-page",type:"button","aria-label":"First Page","aria-disabled":M,onClick:L,disabled:M,isRTL:S},d),pe.createElement(Nt,{id:"pagination-previous-page",type:"button","aria-label":"Previous Page","aria-disabled":M,onClick:I,disabled:M,isRTL:S},m),!C&&B,pe.createElement(Nt,{id:"pagination-next-page",type:"button","aria-label":"Next Page","aria-disabled":A,onClick:O,disabled:A,isRTL:S},p),pe.createElement(Nt,{id:"pagination-last-page",type:"button","aria-label":"Last Page","aria-disabled":A,onClick:D,disabled:A,isRTL:S},u)))})),Vt=function(e,t){var n=pe.useRef(!0);pe.useEffect((function(){n.current?n.current=!1:e()}),t)},Gt=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Wt}(e)}(e)},Wt="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function $t(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Yt((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function qt(e,t,n){return e.concat(t).map((function(e){return $t(e,n)}))}function Xt(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function Kt(e,t){try{return t in e}catch(e){return!1}}function Yt(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||qt,n.isMergeableObject=n.isMergeableObject||Gt,n.cloneUnlessOtherwiseSpecified=$t;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Xt(e).forEach((function(t){r[t]=$t(e[t],n)})),Xt(t).forEach((function(i){(function(e,t){return Kt(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(Kt(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return Yt;var n=t.customMerge(e);return"function"==typeof n?n:Yt}(i,n)(e[i],t[i],n):r[i]=$t(t[i],n))})),r}(e,t,n):$t(t,n)}Yt.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return Yt(e,n,t)}),{})};var Zt=Yt,Qt={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)"},background:{default:"#FFFFFF"},context:{background:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},divider:{default:"rgba(0,0,0,.12)"},button:{default:"rgba(0,0,0,.54)",focus:"rgba(0,0,0,.12)",hover:"rgba(0,0,0,.12)",disabled:"rgba(0, 0, 0, .18)"},selected:{default:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},highlightOnHover:{default:"#EEEEEE",text:"rgba(0, 0, 0, 0.87)"},striped:{default:"#FAFAFA",text:"rgba(0, 0, 0, 0.87)"}},Jt={default:Qt,light:Qt,dark:{text:{primary:"#FFFFFF",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(0,0,0,.12)"},background:{default:"#424242"},context:{background:"#E91E63",text:"#FFFFFF"},divider:{default:"rgba(81, 81, 81, 1)"},button:{default:"#FFFFFF",focus:"rgba(255, 255, 255, .54)",hover:"rgba(255, 255, 255, .12)",disabled:"rgba(255, 255, 255, .18)"},selected:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},highlightOnHover:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},striped:{default:"rgba(0, 0, 0, .87)",text:"#FFFFFF"}}};function en(e,t,n,r){var i=pe.useState((function(){return xe(e)})),o=oe(i,2),a=o[0],s=o[1],l=pe.useState(""),u=oe(l,2),c=u[0],d=u[1],f=pe.useRef("");Vt((function(){s(xe(e))}),[e]);var p=pe.useCallback((function(e){var t,n,r,i=null===(t=e.target.attributes.getNamedItem("data-column-id"))||void 0===t?void 0:t.value;i&&(f.current=(null===(r=null===(n=a[ke(a,i)])||void 0===n?void 0:n.id)||void 0===r?void 0:r.toString())||"",d(f.current))}),[a]),h=pe.useCallback((function(e){var n,r=null===(n=e.target.attributes.getNamedItem("data-column-id"))||void 0===n?void 0:n.value;if(r&&f.current&&r!==f.current){var i=ke(a,f.current),o=ke(a,r),l=le(a);l[i]=a[o],l[o]=a[i],s(l),t(l)}}),[t,a]),m=pe.useCallback((function(e){e.preventDefault()}),[]),g=pe.useCallback((function(e){e.preventDefault()}),[]),v=pe.useCallback((function(e){e.preventDefault(),f.current="",d("")}),[]),y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?fe.ASC:fe.DESC}(r),b=pe.useMemo((function(){return a[ke(a,null==n?void 0:n.toString())]||{}}),[n,a]);return{tableColumns:a,draggingColumnId:c,handleDragStart:p,handleDragEnter:h,handleDragOver:m,handleDragLeave:g,handleDragEnd:v,defaultSortDirection:y,defaultSortColumn:b}}var tn=pe.memo((function(e){var t=e.data,n=void 0===t?Lt.data:t,r=e.columns,i=void 0===r?Lt.columns:r,o=e.title,a=void 0===o?Lt.title:o,s=e.actions,l=void 0===s?Lt.actions:s,u=e.keyField,c=void 0===u?Lt.keyField:u,d=e.striped,f=void 0===d?Lt.striped:d,p=e.highlightOnHover,h=void 0===p?Lt.highlightOnHover:p,m=e.pointerOnHover,g=void 0===m?Lt.pointerOnHover:m,v=e.dense,y=void 0===v?Lt.dense:v,b=e.selectableRows,x=void 0===b?Lt.selectableRows:b,w=e.selectableRowsSingle,_=void 0===w?Lt.selectableRowsSingle:w,S=e.selectableRowsHighlight,C=void 0===S?Lt.selectableRowsHighlight:S,E=e.selectableRowsNoSelectAll,k=void 0===E?Lt.selectableRowsNoSelectAll:E,P=e.selectableRowsVisibleOnly,M=void 0===P?Lt.selectableRowsVisibleOnly:P,A=e.selectableRowSelected,T=void 0===A?Lt.selectableRowSelected:A,R=e.selectableRowDisabled,I=void 0===R?Lt.selectableRowDisabled:R,O=e.selectableRowsComponent,L=void 0===O?Lt.selectableRowsComponent:O,D=e.selectableRowsComponentProps,F=void 0===D?Lt.selectableRowsComponentProps:D,N=e.onRowExpandToggled,B=void 0===N?Lt.onRowExpandToggled:N,z=e.onSelectedRowsChange,j=void 0===z?Lt.onSelectedRowsChange:z,H=e.expandableIcon,U=void 0===H?Lt.expandableIcon:H,V=e.onChangeRowsPerPage,G=void 0===V?Lt.onChangeRowsPerPage:V,W=e.onChangePage,$=void 0===W?Lt.onChangePage:W,q=e.paginationServer,X=void 0===q?Lt.paginationServer:q,K=e.paginationServerOptions,Y=void 0===K?Lt.paginationServerOptions:K,Z=e.paginationTotalRows,Q=void 0===Z?Lt.paginationTotalRows:Z,J=e.paginationDefaultPage,ee=void 0===J?Lt.paginationDefaultPage:J,te=e.paginationResetDefaultPage,ne=void 0===te?Lt.paginationResetDefaultPage:te,re=e.paginationPerPage,ie=void 0===re?Lt.paginationPerPage:re,ae=e.paginationRowsPerPageOptions,se=void 0===ae?Lt.paginationRowsPerPageOptions:ae,ue=e.paginationIconLastPage,de=void 0===ue?Lt.paginationIconLastPage:ue,he=e.paginationIconFirstPage,me=void 0===he?Lt.paginationIconFirstPage:he,ye=e.paginationIconNext,be=void 0===ye?Lt.paginationIconNext:ye,xe=e.paginationIconPrevious,Se=void 0===xe?Lt.paginationIconPrevious:xe,Ce=e.paginationComponent,ke=void 0===Ce?Lt.paginationComponent:Ce,Pe=e.paginationComponentOptions,Ae=void 0===Pe?Lt.paginationComponentOptions:Pe,Re=e.responsive,Le=void 0===Re?Lt.responsive:Re,Fe=e.progressPending,Ne=void 0===Fe?Lt.progressPending:Fe,Be=e.progressComponent,ze=void 0===Be?Lt.progressComponent:Be,je=e.persistTableHead,He=void 0===je?Lt.persistTableHead:je,Ue=e.noDataComponent,Ve=void 0===Ue?Lt.noDataComponent:Ue,Ge=e.disabled,We=void 0===Ge?Lt.disabled:Ge,$e=e.noTableHead,qe=void 0===$e?Lt.noTableHead:$e,Xe=e.noHeader,Ke=void 0===Xe?Lt.noHeader:Xe,Ye=e.fixedHeader,Ze=void 0===Ye?Lt.fixedHeader:Ye,Qe=e.fixedHeaderScrollHeight,Je=void 0===Qe?Lt.fixedHeaderScrollHeight:Qe,et=e.pagination,nt=void 0===et?Lt.pagination:et,rt=e.subHeader,it=void 0===rt?Lt.subHeader:rt,ot=e.subHeaderAlign,at=void 0===ot?Lt.subHeaderAlign:ot,st=e.subHeaderWrap,ut=void 0===st?Lt.subHeaderWrap:st,dt=e.subHeaderComponent,ft=void 0===dt?Lt.subHeaderComponent:dt,pt=e.noContextMenu,ht=void 0===pt?Lt.noContextMenu:pt,mt=e.contextMessage,gt=void 0===mt?Lt.contextMessage:mt,vt=e.contextActions,yt=void 0===vt?Lt.contextActions:vt,xt=e.contextComponent,wt=void 0===xt?Lt.contextComponent:xt,_t=e.expandableRows,Tt=void 0===_t?Lt.expandableRows:_t,Rt=e.onRowClicked,It=void 0===Rt?Lt.onRowClicked:Rt,Ot=e.onRowDoubleClicked,Dt=void 0===Ot?Lt.onRowDoubleClicked:Ot,Ft=e.onRowMouseEnter,Nt=void 0===Ft?Lt.onRowMouseEnter:Ft,Bt=e.onRowMouseLeave,zt=void 0===Bt?Lt.onRowMouseLeave:Bt,jt=e.sortIcon,Ht=void 0===jt?Lt.sortIcon:jt,Gt=e.onSort,Wt=void 0===Gt?Lt.onSort:Gt,$t=e.sortFunction,qt=void 0===$t?Lt.sortFunction:$t,Xt=e.sortServer,Kt=void 0===Xt?Lt.sortServer:Xt,Yt=e.expandableRowsComponent,Qt=void 0===Yt?Lt.expandableRowsComponent:Yt,tn=e.expandableRowsComponentProps,nn=void 0===tn?Lt.expandableRowsComponentProps:tn,rn=e.expandableRowDisabled,on=void 0===rn?Lt.expandableRowDisabled:rn,an=e.expandableRowsHideExpander,sn=void 0===an?Lt.expandableRowsHideExpander:an,ln=e.expandOnRowClicked,un=void 0===ln?Lt.expandOnRowClicked:ln,cn=e.expandOnRowDoubleClicked,dn=void 0===cn?Lt.expandOnRowDoubleClicked:cn,fn=e.expandableRowExpanded,pn=void 0===fn?Lt.expandableRowExpanded:fn,hn=e.expandableInheritConditionalStyles,mn=void 0===hn?Lt.expandableInheritConditionalStyles:hn,gn=e.defaultSortFieldId,vn=void 0===gn?Lt.defaultSortFieldId:gn,yn=e.defaultSortAsc,bn=void 0===yn?Lt.defaultSortAsc:yn,xn=e.clearSelectedRows,wn=void 0===xn?Lt.clearSelectedRows:xn,_n=e.conditionalRowStyles,Sn=void 0===_n?Lt.conditionalRowStyles:_n,Cn=e.theme,En=void 0===Cn?Lt.theme:Cn,kn=e.customStyles,Pn=void 0===kn?Lt.customStyles:kn,Mn=e.direction,An=void 0===Mn?Lt.direction:Mn,Tn=e.onColumnOrderChange,Rn=void 0===Tn?Lt.onColumnOrderChange:Tn,In=e.className,On=en(i,Rn,vn,bn),Ln=On.tableColumns,Dn=On.draggingColumnId,Fn=On.handleDragStart,Nn=On.handleDragEnter,Bn=On.handleDragOver,zn=On.handleDragLeave,jn=On.handleDragEnd,Hn=On.defaultSortDirection,Un=On.defaultSortColumn,Vn=pe.useReducer(Me,{allSelected:!1,selectedCount:0,selectedRows:[],selectedColumn:Un,toggleOnSelectedRowsChange:!1,sortDirection:Hn,currentPage:ee,rowsPerPage:ie,selectedRowsFlag:!1,contextMessage:Lt.contextMessage}),Gn=oe(Vn,2),Wn=Gn[0],$n=Wn.rowsPerPage,qn=Wn.currentPage,Xn=Wn.selectedRows,Kn=Wn.allSelected,Yn=Wn.selectedCount,Zn=Wn.selectedColumn,Qn=Wn.sortDirection,Jn=Wn.toggleOnSelectedRowsChange,er=Gn[1],tr=Y.persistSelectedOnSort,nr=void 0!==tr&&tr,rr=Y.persistSelectedOnPageChange,ir=void 0!==rr&&rr,or=!(!X||!ir&&!nr),ar=nt&&!Ne&&n.length>0,sr=ke||Ut,lr=pe.useMemo((function(){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",i=Jt[n]?n:r;return Zt({table:{style:{color:(e=Jt[i]).text.primary,backgroundColor:e.background.default}},tableWrapper:{style:{display:"table"}},responsiveWrapper:{style:{}},header:{style:{fontSize:"22px",color:e.text.primary,backgroundColor:e.background.default,minHeight:"56px",paddingLeft:"16px",paddingRight:"8px"}},subHeader:{style:{backgroundColor:e.background.default,minHeight:"52px"}},head:{style:{color:e.text.primary,fontSize:"12px",fontWeight:500}},headRow:{style:{backgroundColor:e.background.default,minHeight:"52px",borderBottomWidth:"1px",borderBottomColor:e.divider.default,borderBottomStyle:"solid"},denseStyle:{minHeight:"32px"}},headCells:{style:{paddingLeft:"16px",paddingRight:"16px"},draggingStyle:{cursor:"move"}},contextMenu:{style:{backgroundColor:e.context.background,fontSize:"18px",fontWeight:400,color:e.context.text,paddingLeft:"16px",paddingRight:"8px",transform:"translate3d(0, -100%, 0)",transitionDuration:"125ms",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)",willChange:"transform"},activeStyle:{transform:"translate3d(0, 0, 0)"}},cells:{style:{paddingLeft:"16px",paddingRight:"16px",wordBreak:"break-word"},draggingStyle:{}},rows:{style:{fontSize:"13px",fontWeight:400,color:e.text.primary,backgroundColor:e.background.default,minHeight:"48px","&:not(:last-of-type)":{borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:e.divider.default}},denseStyle:{minHeight:"32px"},selectedHighlightStyle:{"&:nth-of-type(n)":{color:e.selected.text,backgroundColor:e.selected.default,borderBottomColor:e.background.default}},highlightOnHoverStyle:{color:e.highlightOnHover.text,backgroundColor:e.highlightOnHover.default,transitionDuration:"0.15s",transitionProperty:"background-color",borderBottomColor:e.background.default,outlineStyle:"solid",outlineWidth:"1px",outlineColor:e.background.default},stripedStyle:{color:e.striped.text,backgroundColor:e.striped.default}},expanderRow:{style:{color:e.text.primary,backgroundColor:e.background.default}},expanderCell:{style:{flex:"0 0 48px"}},expanderButton:{style:{color:e.button.default,fill:e.button.default,backgroundColor:"transparent",borderRadius:"2px",transition:"0.25s",height:"100%",width:"100%","&:hover:enabled":{cursor:"pointer"},"&:disabled":{color:e.button.disabled},"&:hover:not(:disabled)":{cursor:"pointer",backgroundColor:e.button.hover},"&:focus":{outline:"none",backgroundColor:e.button.focus},svg:{margin:"auto"}}},pagination:{style:{color:e.text.secondary,fontSize:"13px",minHeight:"56px",backgroundColor:e.background.default,borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:e.divider.default},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"px",cursor:"pointer",transition:"0.4s",color:e.button.default,fill:e.button.default,backgroundColor:"transparent","&:disabled":{cursor:"unset",color:e.button.disabled,fill:e.button.disabled},"&:hover:not(:disabled)":{backgroundColor:e.button.hover},"&:focus":{outline:"none",backgroundColor:e.button.focus}}},noData:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:e.text.primary,backgroundColor:e.background.default}},progress:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:e.text.primary,backgroundColor:e.background.default}}},t)}(Pn,En)}),[Pn,En]),ur=pe.useMemo((function(){return Object.assign({},"auto"!==An&&{dir:An})}),[An]),cr=pe.useMemo((function(){if(Kt)return n;if((null==Zn?void 0:Zn.sortFunction)&&"function"==typeof Zn.sortFunction){var e=Zn.sortFunction,t=Qn===fe.ASC?e:function(t,n){return-1*e(t,n)};return le(n).sort(t)}return function(e,t,n,r){return t?r&&"function"==typeof r?r(e.slice(0),t,n):e.slice(0).sort((function(e,r){var i,o;if("string"==typeof t?(i=ve(e,t),o=ve(r,t)):(i=t(e),o=t(r)),"asc"===n){if(i<o)return-1;if(i>o)return 1}if("desc"===n){if(i>o)return-1;if(i<o)return 1}return 0})):e}(n,null==Zn?void 0:Zn.selector,Qn,qt)}),[Kt,Zn,Qn,n,qt]),dr=pe.useMemo((function(){if(nt&&!X){var e=qn*$n,t=e-$n;return cr.slice(t,e)}return cr}),[qn,nt,X,$n,cr]),fr=pe.useCallback((function(e){er(e)}),[]),pr=pe.useCallback((function(e){er(e)}),[]),hr=pe.useCallback((function(e){er(e)}),[]),mr=pe.useCallback((function(e,t){return It(e,t)}),[It]),gr=pe.useCallback((function(e,t){return Dt(e,t)}),[Dt]),vr=pe.useCallback((function(e,t){return Nt(e,t)}),[Nt]),yr=pe.useCallback((function(e,t){return zt(e,t)}),[zt]),br=pe.useCallback((function(e){return er({type:"CHANGE_PAGE",page:e,paginationServer:X,visibleOnly:M,persistSelectedOnPageChange:ir})}),[X,ir,M]),xr=pe.useCallback((function(e){var t=we(Q||dr.length,e),n=_e(qn,t);X||br(n),er({type:"CHANGE_ROWS_PER_PAGE",page:n,rowsPerPage:e})}),[qn,br,X,Q,dr.length]);if(nt&&!X&&cr.length>0&&0===dr.length){var wr=we(cr.length,$n),_r=_e(qn,wr);br(_r)}Vt((function(){j({allSelected:Kn,selectedCount:Yn,selectedRows:Xn.slice(0)})}),[Jn]),Vt((function(){Wt(Zn,Qn,cr.slice(0))}),[Zn,Qn]),Vt((function(){$(qn,Q||cr.length)}),[qn]),Vt((function(){G($n,qn)}),[$n]),Vt((function(){br(ee)}),[ee,ne]),Vt((function(){if(nt&&X&&Q>0){var e=we(Q,$n),t=_e(qn,e);qn!==t&&br(t)}}),[Q]),pe.useEffect((function(){er({type:"CLEAR_SELECTED_ROWS",selectedRowsFlag:wn})}),[_,wn]),pe.useEffect((function(){if(T){var e=cr.filter((function(e){return T(e)})),t=_?e.slice(0,1):e;er({type:"SELECT_MULTIPLE_ROWS",keyField:c,selectedRows:t,totalRows:cr.length,mergeSelections:or})}}),[n,T]);var Sr=M?dr:cr,Cr=ir||_||k;return pe.createElement(ce.ThemeProvider,{theme:lr},!Ke&&(!!a||!!l)&&pe.createElement(bt,{title:a,actions:l,showMenu:!ht,selectedCount:Yn,direction:An,contextActions:yt,contextComponent:wt,contextMessage:gt}),it&&pe.createElement(St,{align:at,wrapContent:ut},ft),pe.createElement(Et,Object.assign({responsive:Le,fixedHeader:Ze,fixedHeaderScrollHeight:Je,className:In},ur),pe.createElement(Pt,null,Ne&&!He&&pe.createElement(kt,null,ze),pe.createElement(Te,{disabled:We,className:"rdt_Table",role:"table"},!qe&&(!!He||cr.length>0&&!Ne)&&pe.createElement(Ie,{className:"rdt_TableHead",role:"rowgroup",fixedHeader:Ze},pe.createElement(Oe,{className:"rdt_TableHeadRow",role:"row",dense:y},x&&(Cr?pe.createElement(De,{style:{flex:"0 0 48px"}}):pe.createElement(ct,{allSelected:Kn,selectedRows:Xn,selectableRowsComponent:L,selectableRowsComponentProps:F,selectableRowDisabled:I,rowData:Sr,keyField:c,mergeSelections:or,onSelectAllRows:pr})),Tt&&!sn&&pe.createElement(Mt,null),Ln.map((function(e){return pe.createElement(lt,{key:e.id,column:e,selectedColumn:Zn,disabled:Ne||0===cr.length,pagination:nt,paginationServer:X,persistSelectedOnSort:nr,selectableRowsVisibleOnly:M,sortDirection:Qn,sortIcon:Ht,sortServer:Kt,onSort:fr,onDragStart:Fn,onDragOver:Bn,onDragEnd:jn,onDragEnter:Nn,onDragLeave:zn,draggingColumnId:Dn})})))),!cr.length&&!Ne&&pe.createElement(At,null,Ve),Ne&&He&&pe.createElement(kt,null,ze),!Ne&&cr.length>0&&pe.createElement(Ct,{className:"rdt_TableBody",role:"rowgroup"},dr.map((function(e,t){var n=ge(e,c),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"number"!=typeof e&&(!e||0===e.length)}(n)?t:n,i=Ee(e,Xn,c),o=!!(Tt&&pn&&pn(e)),a=!!(Tt&&on&&on(e));return pe.createElement(tt,{id:r,key:r,keyField:c,"data-row-id":r,columns:Ln,row:e,rowCount:cr.length,rowIndex:t,selectableRows:x,expandableRows:Tt,expandableIcon:U,highlightOnHover:h,pointerOnHover:g,dense:y,expandOnRowClicked:un,expandOnRowDoubleClicked:dn,expandableRowsComponent:Qt,expandableRowsComponentProps:nn,expandableRowsHideExpander:sn,defaultExpanderDisabled:a,defaultExpanded:o,expandableInheritConditionalStyles:mn,conditionalRowStyles:Sn,selected:i,selectableRowsHighlight:C,selectableRowsComponent:L,selectableRowsComponentProps:F,selectableRowDisabled:I,selectableRowsSingle:_,striped:f,onRowExpandToggled:B,onRowClicked:mr,onRowDoubleClicked:gr,onRowMouseEnter:vr,onRowMouseLeave:yr,onSelectedRow:hr,draggingColumnId:Dn,onDragStart:Fn,onDragOver:Bn,onDragEnd:jn,onDragEnter:Nn,onDragLeave:zn})})))))),ar&&pe.createElement("div",null,pe.createElement(sr,{onChangePage:br,onChangeRowsPerPage:xr,rowCount:Q||cr.length,currentPage:qn,rowsPerPage:$n,direction:An,paginationRowsPerPageOptions:se,paginationIconLastPage:de,paginationIconFirstPage:me,paginationIconNext:be,paginationIconPrevious:Se,paginationComponentOptions:Ae})))}))},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),P=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var F,N=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function H(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case E:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Ce=null;function Ee(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function ke(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Pe(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Me(e,t){return e(t)}function Ae(){}var Te=!1;function Re(e,t,n){if(Te)return e(t,n);Te=!0;try{return Me(e,t,n)}finally{Te=!1,(null!==Se||null!==Ce)&&(Ae(),Pe())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Oe=!1}function De(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Fe=!1,Ne=null,Be=!1,ze=null,je={onError:function(e){Fe=!0,Ne=e}};function He(e,t,n,r,i,o,a,s,l){Fe=!1,Ne=null,De.apply(je,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ue(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ge(i),e;if(a===r)return Ge(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ze=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,St,Ct,Et,kt=!1,Pt=[],Mt=null,At=null,Tt=null,Rt=new Map,It=new Map,Ot=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ft(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nt(e){var t=yi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Bt(e)&&n.delete(t)}function jt(){kt=!1,null!==Mt&&Bt(Mt)&&(Mt=null),null!==At&&Bt(At)&&(At=null),null!==Tt&&Bt(Tt)&&(Tt=null),Rt.forEach(zt),It.forEach(zt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Ut(e){function t(t){return Ht(t,e)}if(0<Pt.length){Ht(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Ht(Mt,e),null!==At&&Ht(At,e),null!==Tt&&Ht(Tt,e),Rt.forEach(t),It.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Nt(n),null===n.blockedOn&&Ot.shift()}var Vt=x.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function $t(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function qt(e,t,n,r){if(Gt){var i=Kt(e,t,n,r);if(null===i)Gr(e,t,r,Xt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Mt=Ft(Mt,e,t,n,r,i),!0;case"dragenter":return At=Ft(At,e,t,n,r,i),!0;case"mouseover":return Tt=Ft(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,Ft(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,It.set(o,Ft(It.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Kt(e,t,n,r))&&Gr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Xt=null;function Kt(e,t,n,r){if(Xt=null,null!==(e=yi(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),dn=N({},un,{view:0,detail:0}),fn=on(dn),pn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=on(pn),mn=on(N({},pn,{dataTransfer:0})),gn=on(N({},dn,{relatedTarget:0})),vn=on(N({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),xn=on(N({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Cn}var kn=N({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=on(kn),Mn=on(N({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Tn=on(N({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=N({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=on(Rn),On=[9,13,27,32],Ln=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Dn,Nn=c&&(!Ln||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=$r(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,qn=null;function Xn(e){Br(e,0)}function Kn(e){if(q(xi(e)))return e}function Yn(e,t){if("change"===e)return t}var Zn=!1;if(c){var Qn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){$n&&($n.detachEvent("onpropertychange",nr),qn=$n=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Wn(t,qn,e,we(e)),Re(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,($n=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function or(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=$r(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Cr={};function Er(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var kr=Er("animationend"),Pr=Er("animationiteration"),Mr=Er("animationstart"),Ar=Er("transitionend"),Tr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Tr.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Lr=Rr[Or];Ir(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Ir(kr,"onAnimationEnd"),Ir(Pr,"onAnimationIteration"),Ir(Mr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,u){if(He.apply(this,arguments),Fe){if(!Fe)throw Error(o(198));var c=Ne;Fe=!1,Ne=null,Be||(Be=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Nr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Nr(i,s,u),o=l}}}if(Be)throw e=ze,Be=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Hr]){e[Hr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,jr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=$t;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=o,i=we(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Pn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case Pr:case Mr:l=vn;break;case Ar:l=Tn;break;case"scroll":l=fn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=Ie(h,f))&&c.push(Wr(h,m,p)))),d)break;h=h.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[hi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=hn,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==l?s:xi(l),p=null==u?s:xi(u),(s=new c(m,h+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,yi(i)===r&&((c=new c(f,h+"enter",u,n,i)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(f=u,h=0,p=c=l;p;p=qr(p))h++;for(p=0,m=f;m;m=qr(m))p++;for(;0<h-p;)c=qr(c),h--;for(;0<p-h;)f=qr(f),p--;for(;h--;){if(c===f||null!==f&&c===f.alternate)break e;c=qr(c),f=qr(f)}c=null}else c=null;null!==l&&Xr(a,s,l,c,!1),null!==u&&null!==d&&Xr(a,d,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Yn;else if(Gn(s))if(Zn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=en()):(Qt="value"in(Zt=i)?Zt.value:Zt.textContent,Un=!0)),0<(v=$r(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Ln&&jn(e,t)?(e=en(),Jt=Qt=Zt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=$r(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Br(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $r(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ie(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Ie(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Ie(n,o))&&a.unshift(Wr(n,l,s)):i||null!=(l=Ie(n,o))&&a.push(Wr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Yr,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,hi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[pi]||null}var _i=[],Si=-1;function Ci(e){return{current:e}}function Ei(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function ki(e,t){Si++,_i[Si]=e.current,e.current=t}var Pi={},Mi=Ci(Pi),Ai=Ci(!1),Ti=Pi;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ii(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ai),Ei(Mi)}function Li(e,t,n){if(Mi.current!==Pi)throw Error(o(168));ki(Mi,t),ki(Ai,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return N({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Ti=Mi.current,ki(Mi,e),ki(Ai,Ai.current),!0}function Ni(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Mi),ki(Mi,e)):Ei(Ai),ki(Ai,n)}var Bi=null,zi=!1,ji=!1;function Hi(e){null===Bi?Bi=[e]:Bi.push(e)}function Ui(){if(!ji&&null!==Bi){ji=!0;var e=0,t=bt;try{var n=Bi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,zi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),qe(Je,Ui),i}finally{bt=t,ji=!1}}return null}var Vi=[],Gi=0,Wi=null,$i=0,qi=[],Xi=0,Ki=null,Yi=1,Zi="";function Qi(e,t){Vi[Gi++]=$i,Vi[Gi++]=Wi,Wi=e,$i=t}function Ji(e,t,n){qi[Xi++]=Yi,qi[Xi++]=Zi,qi[Xi++]=Ki,Ki=e;var r=Yi;e=Zi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Zi=o+e}else Yi=1<<o|n<<i|r,Zi=e}function eo(e){null!==e.return&&(Qi(e,1),Ji(e,1,0))}function to(e){for(;e===Wi;)Wi=Vi[--Gi],Vi[Gi]=null,$i=Vi[--Gi],Vi[Gi]=null;for(;e===Ki;)Ki=qi[--Xi],qi[Xi]=null,Zi=qi[--Xi],qi[Xi]=null,Yi=qi[--Xi],qi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Yi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ui(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ui(e.nextSibling)}function ho(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ci(null),bo=null,xo=null,wo=null;function _o(){wo=xo=bo=null}function So(e){var t=yo.current;Ei(yo),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){bo=e,wo=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===bo)throw Error(o(308));xo=e,bo.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var Po=null;function Mo(e){null===Po?Po=[e]:Po.push(e)}function Ao(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Mo(t)):(n.next=i.next,i.next=n),t.interleaved=n,To(e,r)}function To(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ro=!1;function Io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ml)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,To(e,n)}return null===(i=r.interleaved)?(t.next=t,Mo(r)):(t.next=i.next,i.next=t),r.interleaved=t,To(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function No(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bo(e,t,n,r){var i=e.updateQueue;Ro=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,c=u=l=null,s=o;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(f=t,p=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=N({},d,f);break e;case 2:Ro=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=d}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Uo={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(nu(t,e,i,r),Fo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(nu(t,e,i,r),Fo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(nu(t,e,r,n),Fo(t,e,r))}};function Vo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Go(e,t,n){var r=!1,i=Pi,o=t.contextType;return"object"===typeof o&&null!==o?o=ko(o):(i=Ii(t)?Ti:Mi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Pi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Uo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Uo.enqueueReplaceState(t,t.state,null)}function $o(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jo,Io(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ko(o):(o=Ii(t)?Ti:Mi.current,i.context=Ri(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Ho(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Uo.enqueueReplaceState(i,i.state,null),Bo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ko(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ou(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Nu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===I&&Ko(o)===t.type)?((r=i(t,n.props)).ref=qo(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=qo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Du(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Nu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=qo(e,null,t),n.return=e,n;case _:return(t=Bu(t,e.mode,n)).return=e,t;case I:return f(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Du(t,e.mode,n,null)).return=e,t;Xo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case I:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);Xo(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return h(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);Xo(t,r)}return null}function m(i,o,s,l){for(var u=null,c=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(i,d),io&&Qi(i,m),u;if(null===d){for(;m<s.length;m++)null!==(d=f(i,s[m],l))&&(o=a(d,o,m),null===c?u=d:c.sibling=d,c=d);return io&&Qi(i,m),u}for(d=r(i,d);m<s.length;m++)null!==(g=h(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Qi(i,m),u}function g(i,s,l,u){var c=D(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var d=c=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),io&&Qi(i,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(i,y.value,u))&&(s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return io&&Qi(i,g),c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=h(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Qi(i,g),c}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===I&&Ko(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=qo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((o=Du(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Lu(a.type,a.key,a.props,null,r.mode,l)).ref=qo(r,o,a),l.return=r,r=l)}return s(r);case _:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bu(a,r.mode,l)).return=r,r=o}return s(r);case I:return e(r,o,(c=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(D(a))return g(r,o,a,l);Xo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Nu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Zo=Yo(!0),Qo=Yo(!1),Jo={},ea=Ci(Jo),ta=Ci(Jo),na=Ci(Jo);function ra(e){if(e===Jo)throw Error(o(174));return e}function ia(e,t){switch(ki(na,t),ki(ta,e),ki(ea,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(ea),ki(ea,t)}function oa(){Ei(ea),Ei(ta),Ei(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(ki(ta,e),ki(ea,n))}function sa(e){ta.current===e&&(Ei(ea),Ei(ta))}var la=Ci(0);function ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function da(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var fa=x.ReactCurrentDispatcher,pa=x.ReactCurrentBatchConfig,ha=0,ma=null,ga=null,va=null,ya=!1,ba=!1,xa=0,wa=0;function _a(){throw Error(o(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ca(e,t,n,r,i,a){if(ha=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),ba){a=0;do{if(ba=!1,xa=0,25<=a)throw Error(o(301));a+=1,va=ga=null,t.updateQueue=null,fa.current=us,e=n(r,i)}while(ba)}if(fa.current=as,t=null!==ga&&null!==ga.next,ha=0,va=ga=ma=null,ya=!1,t)throw Error(o(300));return e}function Ea(){var e=0!==xa;return xa=0,e}function ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===va?ma.memoizedState=va=e:va=va.next=e,va}function Pa(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===va?ma.memoizedState:va.next;if(null!==t)va=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===va?ma.memoizedState=va=e:va=va.next=e}return va}function Ma(e,t){return"function"===typeof t?t(e):t}function Aa(e){var t=Pa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var d=c.lane;if((ha&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,s=r):u=u.next=f,ma.lanes|=d,Fl|=d}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ma.lanes|=a,Fl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=Pa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(xs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ra(){}function Ia(e,t){var n=ma,r=Pa(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,xs=!0),r=r.queue,Ga(Da.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==va&&1&va.memoizedState.tag){if(n.flags|=2048,za(9,La.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(o(349));0!==(30&ha)||Oa(n,t,i)}return i}function Oa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function La(e,t,n,r){t.value=n,t.getSnapshot=r,Fa(t)&&Na(e)}function Da(e,t,n){return n((function(){Fa(t)&&Na(e)}))}function Fa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Na(e){var t=To(e,1);null!==t&&nu(t,e,1,-1)}function Ba(e){var t=ka();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ma,e),[t.memoizedState,e]}function za(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return Pa().memoizedState}function Ha(e,t,n,r){var i=ka();ma.flags|=e,i.memoizedState=za(1|t,n,void 0,void 0===r?null:r)}function Ua(e,t,n,r){var i=Pa();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=za(t,n,o,r))}ma.flags|=e,i.memoizedState=za(1|t,n,o,r)}function Va(e,t){return Ha(8390656,8,e,t)}function Ga(e,t){return Ua(2048,8,e,t)}function Wa(e,t){return Ua(4,2,e,t)}function $a(e,t){return Ua(4,4,e,t)}function qa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4,4,qa.bind(null,t,e),n)}function Ka(){}function Ya(e,t){var n=Pa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Za(e,t){var n=Pa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qa(e,t,n){return 0===(21&ha)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),ma.lanes|=n,Fl|=n,e.baseState=!0),t)}function Ja(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{bt=n,pa.transition=r}}function es(){return Pa().memoizedState}function ts(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ao(e,t,n,r))){nu(n,e,r,eu()),os(n,t,r)}}function ns(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Mo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ao(e,t,i,r))&&(nu(n,e,r,i=eu()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function is(e,t){ba=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:ko,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},ss={readContext:ko,useCallback:function(e,t){return ka().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ha(4194308,4,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ha(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ha(4,2,e,t)},useMemo:function(e,t){var n=ka();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ka();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ka().memoizedState=e},useState:Ba,useDebugValue:Ka,useDeferredValue:function(e){return ka().memoizedState=e},useTransition:function(){var e=Ba(!1),t=e[0];return e=Ja.bind(null,e[1]),ka().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,i=ka();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Al)throw Error(o(349));0!==(30&ha)||Oa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Va(Da.bind(null,r,a,e),[e]),r.flags|=2048,za(9,La.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ka(),t=Al.identifierPrefix;if(io){var n=Zi;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=xa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:ko,useCallback:Ya,useContext:ko,useEffect:Ga,useImperativeHandle:Xa,useInsertionEffect:Wa,useLayoutEffect:$a,useMemo:Za,useReducer:Aa,useRef:ja,useState:function(){return Aa(Ma)},useDebugValue:Ka,useDeferredValue:function(e){return Qa(Pa(),ga.memoizedState,e)},useTransition:function(){return[Aa(Ma)[0],Pa().memoizedState]},useMutableSource:Ra,useSyncExternalStore:Ia,useId:es,unstable_isNewReconciler:!1},us={readContext:ko,useCallback:Ya,useContext:ko,useEffect:Ga,useImperativeHandle:Xa,useInsertionEffect:Wa,useLayoutEffect:$a,useMemo:Za,useReducer:Ta,useRef:ja,useState:function(){return Ta(Ma)},useDebugValue:Ka,useDeferredValue:function(e){var t=Pa();return null===ga?t.memoizedState=e:Qa(t,ga.memoizedState,e)},useTransition:function(){return[Ta(Ma)[0],Pa().memoizedState]},useMutableSource:Ra,useSyncExternalStore:Ia,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Wl=r),fs(0,t)},n}function ms(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Qo(t,null,n,r):Zo(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=Ca(e,t,n,r,o,i),n=Ea(),null===e||xs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Iu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Cs(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Ou(o,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return Ps(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ol,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ol,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ki(Ol,Il),Il|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ki(Ol,Il),Il|=r;return ws(e,t,i,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ps(e,t,n,r,i){var o=Ii(n)?Ti:Mi.current;return o=Ri(t,o),Eo(t,i),n=Ca(e,t,n,r,o,i),r=Ea(),null===e||xs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Ms(e,t,n,r,i){if(Ii(n)){var o=!0;Fi(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Vs(e,t),Go(t,n,r),$o(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=ko(u):u=Ri(t,u=Ii(n)?Ti:Mi.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Wo(t,a,r,u),Ro=!1;var f=t.memoizedState;a.state=f,Bo(t,r,a,i),l=t.memoizedState,s!==r||f!==l||Ai.current||Ro?("function"===typeof c&&(Ho(t,n,c,r),l=t.memoizedState),(s=Ro||Vo(t,n,s,r,f,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:vo(t.type,s),a.props=u,d=t.pendingProps,f=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ko(l):l=Ri(t,l=Ii(n)?Ti:Mi.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||f!==l)&&Wo(t,a,r,l),Ro=!1,f=t.memoizedState,a.state=f,Bo(t,r,a,i);var h=t.memoizedState;s!==d||f!==h||Ai.current||Ro?("function"===typeof p&&(Ho(t,n,p,r),h=t.memoizedState),(u=Ro||Vo(t,n,u,r,f,h,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,o,i)}function As(e,t,n,r,i,o){ks(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ni(t,n,!1),Gs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Zo(t,e.child,null,o),t.child=Zo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&Ni(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ia(e,t.containerInfo)}function Rs(e,t,n,r,i){return ho(),mo(i),t.flags|=256,ws(e,t,n,r),t.child}var Is,Os,Ls,Ds={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ns(e,t,n){var r,i=t.pendingProps,a=la.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ki(la,1&a),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fu(l,i,0,null),e=Du(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ds,e):Bs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(a=Du(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Zo(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ds,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Al)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,To(e,i),nu(r,e,i,-1))}return mu(),zs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Xi++]=Yi,qi[Xi++]=Zi,qi[Xi++]=Ki,Yi=e.id,Zi=e.overflow,Ki=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ou(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ou(r,s):(s=Du(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Fs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=Ou(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&mo(r),Zo(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Co(e.return,t,n)}function Hs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Us(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(la,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Hs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Hs(t,!0,n,null,o);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ou(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ou(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $s(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(t),null;case 1:case 17:return Ii(t.type)&&Oi(),$s(t),null;case 3:return r=t.stateNode,oa(),Ei(Ai),Ei(Mi),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(au(oo),oo=null))),$s(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return $s(t),null}if(e=ra(ea.current),fo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":$(r),J(r,a,!0);break;case"textarea":$(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[pi]=r,Is(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=K(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in ye(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&zr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":$(e),J(e,r,!1);break;case"textarea":$(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $s(t),null;case 6:if(e&&null!=t.stateNode)Ls(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return $s(t),null;case 13:if(Ei(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),ho(),t.flags|=98560,a=!1;else if(a=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[fi]=t}else ho(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$s(t),a=!1}else null!==oo&&(au(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===Ll&&(Ll=3):mu())),null!==t.updateQueue&&(t.flags|=4),$s(t),null);case 4:return oa(),null===e&&Ur(t.stateNode.containerInfo),$s(t),null;case 10:return So(t.type._context),$s(t),null;case 19:if(Ei(la),null===(a=t.memoizedState))return $s(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ws(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ua(e))){for(t.flags|=128,Ws(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&Ze()>Ul&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ua(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return $s(t),null}else 2*Ze()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,n=la.current,ki(la,r?1&n|2:1&n),t):($s(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Il)&&($s(t),6&t.subtreeFlags&&(t.flags|=8192)):$s(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Ii(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ei(Ai),Ei(Mi),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ei(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ho()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(la),null;case 4:return oa(),null;case 10:return So(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Is=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=K(e,i),r=K(e,r),a=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Ys=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Js(n,t);case 6:var r=cl,i=dl;cl=null,fl(e,t,n),dl=i,null!==(cl=r)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(cl,n.stateNode));break;case 4:r=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),cl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ys&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cu(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,fl(e,t,n),Ys=r):fl(e,t,n);break;default:fl(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(o(160));pl(a,s,i),cl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Cu(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cu(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){Cu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&Z(i,a),be(l,s);var c=be(l,a);for(s=0;s<u.length;s+=2){var d=u[s],f=u[s+1];"style"===d?ge(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):b(i,d,f,c)}switch(l){case"input":Q(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?ne(i,!!a.multiple,h,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Cu(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Cu(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){Cu(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Ze())),4&r&&hl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||d,ml(t,e),Ys=c):ml(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Qs=e,d=e.child;null!==d;){for(f=Qs=d;null!==Qs;){switch(h=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Js(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cu(r,n,g)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){wl(f);continue}}null!==h?(h.return=p,Qs=h):wl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=f.stateNode,s=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Cu(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Cu(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(t,e),vl(e),4&r&&hl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Cu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qs=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ks;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Ks;var u=Ys;if(Ks=a,(Ys=l)&&!u)for(Qs=i;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Qs=l):_l(i);for(;null!==o;)Qs=o,bl(o,t,n),o=o.sibling;Qs=i,Ks=s,Ys=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qs=o):xl(e)}}function xl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Ut(f)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&il(t)}catch(p){Cu(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function _l(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cu(t,i,l)}}var o=t.return;try{il(t)}catch(l){Cu(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cu(t,a,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Sl,Cl=Math.ceil,El=x.ReactCurrentDispatcher,kl=x.ReactCurrentOwner,Pl=x.ReactCurrentBatchConfig,Ml=0,Al=null,Tl=null,Rl=0,Il=0,Ol=Ci(0),Ll=0,Dl=null,Fl=0,Nl=0,Bl=0,zl=null,jl=null,Hl=0,Ul=1/0,Vl=null,Gl=!1,Wl=null,$l=null,ql=!1,Xl=null,Kl=0,Yl=0,Zl=null,Ql=-1,Jl=0;function eu(){return 0!==(6&Ml)?Ze():-1!==Ql?Ql:Ql=Ze()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Rl?Rl&-Rl:null!==go.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,n,r){if(50<Yl)throw Yl=0,Zl=null,Error(o(185));vt(e,n,r),0!==(2&Ml)&&e===Al||(e===Al&&(0===(2&Ml)&&(Nl|=n),4===Ll&&su(e,Rl)),ru(e,r),1===n&&0===Ml&&0===(1&t.mode)&&(Ul=Ze()+500,zi&&Ui()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Al?Rl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zi=!0,Hi(e)}(lu.bind(null,e)):Hi(lu.bind(null,e)),ai((function(){0===(6&Ml)&&Ui()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Au(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Ql=-1,Jl=0,0!==(6&Ml))throw Error(o(327));var n=e.callbackNode;if(_u()&&e.callbackNode!==n)return null;var r=ft(e,e===Al?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Ml;Ml|=2;var a=hu();for(Al===e&&Rl===t||(Vl=null,Ul=Ze()+500,fu(e,t));;)try{yu();break}catch(l){pu(e,l)}_o(),El.current=a,Ml=i,null!==Tl?t=0:(Al=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=ou(e,i))),1===t)throw n=Dl,fu(e,0),su(e,r),ru(e,Ze()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(a=ht(e))&&(r=a,t=ou(e,a))),1===t))throw n=Dl,fu(e,0),su(e,r),ru(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wu(e,jl,Vl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Hl+500-Ze())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,jl,Vl),t);break}wu(e,jl,Vl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,jl,Vl),r);break}wu(e,jl,Vl);break;default:throw Error(o(329))}}}return ru(e,Ze()),e.callbackNode===n?iu.bind(null,e):null}function ou(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=jl,jl=n,null!==t&&au(t)),e}function au(e){null===jl?jl=e:jl.push.apply(jl,e)}function su(e,t){for(t&=~Bl,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Ml))throw Error(o(327));_u();var t=ft(e,0);if(0===(1&t))return ru(e,Ze()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Dl,fu(e,0),su(e,t),ru(e,Ze()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,jl,Vl),ru(e,Ze()),null}function uu(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Ul=Ze()+500,zi&&Ui())}}function cu(e){null!==Xl&&0===Xl.tag&&0===(6&Ml)&&_u();var t=Ml;Ml|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Ml=t))&&Ui()}}function du(){Il=Ol.current,Ei(Ol)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:oa(),Ei(Ai),Ei(Mi),da();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ei(la);break;case 10:So(r.type._context);break;case 22:case 23:du()}n=n.return}if(Al=e,Tl=e=Ou(e.current,null),Rl=Il=t,Ll=0,Dl=null,Bl=Nl=Fl=0,jl=zl=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(r=(n=Po[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Po=null}return e}function pu(e,t){for(;;){var n=Tl;try{if(_o(),fa.current=as,ya){for(var r=ma.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(ha=0,va=ga=ma=null,ba=!1,xa=0,kl.current=null,null===n||null===n.return){Ll=1,Dl=t,Tl=null;break}e:{var a=e,s=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=vs(s);if(null!==h){h.flags&=-257,ys(h,s,l,0,t),1&h.mode&&gs(a,c,t),u=c;var m=(t=h).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){gs(a,c,t),mu();break e}u=Error(o(426))}else if(io&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,l,0,t),mo(cs(u,l));break e}}a=u=cs(u,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,No(a,hs(0,u,t));break e;case 1:l=u;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===$l||!$l.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,No(a,ms(a,l,t));break e}}a=a.return}while(null!==a)}xu(n)}catch(x){t=x,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function hu(){var e=El.current;return El.current=as,null===e?as:e}function mu(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&Nl)||su(Al,Rl)}function gu(e,t){var n=Ml;Ml|=2;var r=hu();for(Al===e&&Rl===t||(Vl=null,fu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(_o(),Ml=n,El.current=r,null!==Tl)throw Error(o(261));return Al=null,Rl=0,Ll}function vu(){for(;null!==Tl;)bu(Tl)}function yu(){for(;null!==Tl&&!Ke();)bu(Tl)}function bu(e){var t=Sl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?xu(e):Tl=t,kl.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Il)))return void(Tl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Ll=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Ll&&(Ll=5)}function wu(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{_u()}while(null!==Xl);if(0!==(6&Ml))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Al&&(Tl=Al=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Au(tt,(function(){return _u(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Pl.transition,Pl.transition=null;var s=bt;bt=1;var l=Ml;Ml|=4,kl.current=null,function(e,t){if(ei=Gt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==a||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++c===i&&(l=s),p===a&&++d===r&&(u=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){Cu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),gl(n,e),hr(ti),Gt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ye(),Ml=l,bt=s,Pl.transition=a}else e.current=n;if(ql&&(ql=!1,Xl=e,Kl=i),a=e.pendingLanes,0===a&&($l=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Wl,Wl=null,e;0!==(1&Kl)&&0!==e.tag&&_u(),a=e.pendingLanes,0!==(1&a)?e===Zl?Yl++:(Yl=0,Zl=e):Yl=0,Ui()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function _u(){if(null!==Xl){var e=xt(Kl),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Kl=0,0!==(6&Ml))throw Error(o(331));var i=Ml;for(Ml|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(0!==(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var f=d.child;if(null!==f)f.return=d,Qs=f;else for(;null!==Qs;){var p=(d=Qs).sibling,h=d.return;if(ol(d),d===c){Qs=null;break}if(null!==p){p.return=h,Qs=p;break}Qs=h}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Qs=y;break e}Qs=a.return}}var b=e.current;for(Qs=b;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=b;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Cu(l,l.return,_)}if(l===s){Qs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qs=w;break e}Qs=l.return}}if(Ml=i,Ui(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Su(e,t,n){e=Do(e,t=hs(0,t=cs(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Cu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$l||!$l.has(r))){t=Do(t,e=ms(t,e=cs(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Ze()-Hl?fu(e,0):Bl|=n),ru(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=To(e,t))&&(vt(e,t,n),ru(e,n))}function Pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),ku(e,n)}function Au(e,t){return qe(e,t)}function Tu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Tu(e,t,n,r)}function Iu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ou(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Iu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Du(n.children,i,a,t);case C:s=8,i|=8;break;case E:return(e=Ru(12,n,t,2|i)).elementType=E,e.lanes=a,e;case A:return(e=Ru(13,n,t,i)).elementType=A,e.lanes=a,e;case T:return(e=Ru(19,n,t,i)).elementType=T,e.lanes=a,e;case O:return Fu(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case P:s=9;break e;case M:s=11;break e;case R:s=14;break e;case I:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ru(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Du(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Nu(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function Bu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,i,o,a,s,l){return e=new zu(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ru(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Io(o),e}function Hu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Uu(e){if(!e)return Pi;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ii(n))return Di(e,n,t)}return t}function Vu(e,t,n,r,i,o,a,s,l){return(e=ju(n,r,!0,e,0,o,0,s,l)).context=Uu(null),n=e.current,(o=Lo(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function Gu(e,t,n,r){var i=t.current,o=eu(),a=tu(i);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,a))&&(nu(e,i,a,o),Fo(e,i,a)),a}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $u(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){$u(e,t),(e=e.alternate)&&$u(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),ho();break;case 5:aa(t);break;case 1:Ii(t.type)&&Fi(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ns(e,t,n):(ki(la,1&la.current),null!==(e=Gs(e,t,n))?e.sibling:null);ki(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Gs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,io&&0!==(1048576&t.flags)&&Ji(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Ri(t,Mi.current);Eo(t,n),i=Ca(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(r)?(a=!0,Fi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Io(t),i.updater=Uo,t.stateNode=i,i._reactInternals=t,$o(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Iu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===R)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Ps(null,t,r,e,n);break e;case 1:t=Ms(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ps(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Ts(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),Bo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Qo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),r===i){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&uo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),ks(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Ns(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,ki(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ai.current){t=Gs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Lo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Co(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Co(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=ko(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),Ss(e,t,r,i=vo(r.type,i),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Vs(e,t),t.tag=1,Ii(r)?(e=!0,Fi(t)):e=!1,Eo(t,n),Go(t,r,i),$o(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ku(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Wu(a);s.call(e)}}Gu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wu(a);o.call(e)}}var a=Vu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=a,e[hi]=a.current,Ur(8===e.nodeType?e.parentNode:e),cu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wu(l);s.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[hi]=l.current,Ur(8===e.nodeType?e.parentNode:e),cu((function(){Gu(t,l,n,r)})),l}(n,t,e,i,r);return Wu(a)}Yu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gu(e,t,null,null)},Yu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Gu(null,e,null,null)})),t[hi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Nt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Ze()),0===(6&Ml)&&(Ul=Ze()+500,Ui()))}break;case 13:cu((function(){var t=To(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),qu(e,1)}},_t=function(e){if(13===e.tag){var t=To(e,134217728);if(null!==t)nu(t,e,134217728,eu());qu(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=To(e,t);if(null!==n)nu(n,e,t,eu());qu(e,t)}},Ct=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));q(r),Q(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=uu,Ae=cu;var tc={usingClientEntryPoint:!1,Events:[bi,xi,wi,ke,Pe,uu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),ot=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(t))throw Error(o(200));return Hu(e,t,null,n)},t.createRoot=function(e,t){if(!Zu(e))throw Error(o(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Ku(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Qu(t))throw Error(o(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,i,0,a,s),e[hi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!Qu(t))throw Error(o(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(o(40));return!!e._reactRootContainer&&(cu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,l=60110,u=60112,c=60113,d=60120,f=60115,p=60116,h=60121,m=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),o=b("react.strict_mode"),a=b("react.profiler"),s=b("react.provider"),l=b("react.context"),u=b("react.forward_ref"),c=b("react.suspense"),d=b("react.suspense_list"),f=b("react.memo"),p=b("react.lazy"),h=b("react.block"),m=b("react.server.block"),g=b("react.fundamental"),v=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case c:case d:return e;default:switch(e=e&&e.$$typeof){case l:case u:case p:case f:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===a||e===v||e===o||e===c||e===d||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===s||e.$$typeof===l||e.$$typeof===u||e.$$typeof===g||e.$$typeof===h||e[0]===m)},t.typeOf=x},7441:function(e,t,n){"use strict";e.exports=n(1372)},7574:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case f:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case d:case m:case h:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=m,t.Memo=h,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.SuspenseList=p,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return v(e)===u},t.isContextProvider=function(e){return v(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===o},t.isLazy=function(e){return v(e)===m},t.isMemo=function(e){return v(e)===h},t.isPortal=function(e){return v(e)===i},t.isProfiler=function(e){return v(e)===s},t.isStrictMode=function(e){return v(e)===a},t.isSuspense=function(e){return v(e)===f},t.isSuspenseList=function(e){return v(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===s||e===a||e===f||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=v},8599:function(e,t,n){"use strict";e.exports=n(7574)},9737:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},l=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.ComponentDefaultParameters=void 0;var c=o(n(2791)),d=u(n(7885)),f=n(7671),p=n(3898);t.ComponentDefaultParameters={name:"",status:"",visible:!0};var h=new f.NGL.Vector3,m=new f.NGL.Quaternion,g=new f.NGL.Matrix4;t.Component=function(e){var n=e.children,r=e.path,i=e.loadFileParams,o=e.params,u=void 0===o?t.ComponentDefaultParameters:o,v=e.reprList,y=void 0===v?void 0:v,b=e.position,x=void 0===b?h:b,w=e.quaternion,_=void 0===w?m:w,S=e.scale,C=void 0===S?1:S,E=e.transform,k=void 0===E?g:E,P=e.onLoad,M=e.onLoadFailure,A=p.useStage(),T=s(c.useState(),2),R=T[0],I=T[1];return d.default((function(e,t){var n,o,s;return a(this,(function(a){switch(a.label){case 0:n=new AbortController,e((function(){return n.abort()})),a.label=1;case 1:return a.trys.push([1,3,,4]),[5,l(t(A.loadFile(r,i)))];case 2:return o=a.sent(),[3,4];case 3:return s=a.sent(),M&&M(s),[3,4];case 4:return o&&I(o),[2]}}))}),[i,M,r,A]),c.useEffect((function(){R&&P&&P(R)}),[R,P]),c.useEffect((function(){return function(){R&&A.removeComponent(R)}}),[R,A]),c.useEffect((function(){if(R){var e=f.mergeParams(u,t.ComponentDefaultParameters);e.name!==R.parameters.name&&R.setName(e.name),e.status!==R.parameters.status&&R.setStatus(e.status),e.visible!==R.parameters.visible&&R.setVisibility(e.visible)}}),[R,u]),c.useEffect((function(){R&&y&&(R.removeAllRepresentations(),y.forEach((function(e){return R.addRepresentation(e.type,e.params)})))}),[R,y]),c.useEffect((function(){R&&R.setPosition(x)}),[R,x]),c.useEffect((function(){R&&R.setRotation(_)}),[R,_]),c.useEffect((function(){R&&R.setScale(C)}),[R,C]),c.useEffect((function(){R&&R.setTransform(k)}),[R,k]),c.default.createElement(c.default.Fragment,null,R&&c.default.createElement(p.ComponentReactContext.Provider,{value:R},n))}},6895:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=void 0;var s=o(n(2791)),l=n(3898),u=n(7671),c=n(377);t.Stage=function(e){var t=e.children,n=e.width,r=e.height,i=e.params,o=e.cameraState,d=e.onCameraMove,f=s.useRef(),p=a(s.useState(),2),h=p[0],m=p[1],g=s.useCallback((function(e){if(e){var t=new u.NGL.Stage(e);m(t)}}),[]);s.useEffect((function(){return function(){h&&h.dispose()}}),[h]);var v=s.useCallback((function(){setTimeout((function(){h&&f.current&&u.applyCameraState(h,f.current)}))}),[h]);s.useEffect((function(){return h&&(h.signals.componentAdded.add(v),h.signals.componentRemoved.add(v)),function(){h&&(h.signals.componentAdded.remove(v),h.signals.componentRemoved.remove(v))}}),[v,h]),s.useEffect((function(){h&&h.setParameters(i)}),[i,h]),s.useEffect((function(){h&&h.setSize(n,r)}),[r,h,n]),s.useEffect((function(){if(h){var e=f.current;u.isCameraStateEqual(o,e)||(f.current=o,o&&u.applyCameraState(h,o))}}),[o,h]);var y=s.useCallback((function(){if(h&&d){var e=u.getCameraState(h),t=u.isCameraStateEqual(e,u.getDefaultCameraState(h))?u.CAMERA_STATE_NONE:e;d(t)}}),[d,h]);return s.useEffect((function(){return h&&h.viewerControls.signals.changed.add(y),function(){h&&h.viewerControls.signals.changed.remove(y)}}),[y,h]),s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{ref:g,style:{width:n,height:r}}),h&&s.default.createElement(l.StageReactContext.Provider,{value:h},s.default.createElement(c.Viewer,null,t)))}},377:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewer=void 0;var i=r(n(2791));t.Viewer=function(e){var t=e.children;return i.default.createElement(i.default.Fragment,null,t)}},5827:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StructureComponent=void 0;var a=o(n(2791)),s=n(9737),l=n(5412);t.StructureComponent=function(e){var t=e.children,n=e.selection,o=i(e,["children","selection"]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Component,r({},o),a.default.createElement(l.StructureComponentInner,{selection:n},t)))}},5412:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StructureComponentInner=void 0;var a=o(n(2791)),s=n(3898),l=n(7671);t.StructureComponentInner=function(e){var t=e.selection,n=void 0===t?"":t,r=e.children,i=s.useComponent();if(!(i instanceof l.NGL.StructureComponent))throw new TypeError("NGL Component loaded from given path is not a StructureComponent");return a.useEffect((function(){i.setSelection(n)}),[i,n]),a.default.createElement(a.default.Fragment,null,r)}},9680:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9737),t),i(n(6895),t),i(n(5827),t)},3898:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3056),t),i(n(2648),t)},3056:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useComponent=t.ComponentReactContext=void 0;var r=n(2791),i=n(7671);t.ComponentReactContext=r.createContext(void 0),t.useComponent=function(){var e=r.useContext(t.ComponentReactContext);if(!e)throw new i.ReactNGLError("useComponent hook can only be used in the children of <Component>");return e}},2648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStage=t.StageReactContext=void 0;var r=n(2791),i=n(7671);t.StageReactContext=r.createContext(void 0),t.useStage=function(){var e=r.useContext(t.StageReactContext);if(!e)throw new i.ReactNGLError("useStage hook can only be used in the children of <Stage>");return e}},3051:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9680),t),i(n(7671),t),i(n(3898),t)},6740:function(e,t){"use strict";var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNGLError=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Error);t.ReactNGLError=r},6394:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hello=void 0,t.hello=function(e){return"Hello, "+e}},7671:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.NGL=void 0;var s=o(n(7163));t.NGL=s,a(n(6740),t),a(n(6394),t),a(n(4685),t),a(n(5701),t),a(n(8965),t)},4685:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeParams=void 0,t.mergeParams=function(e,t){var i=n(n({},t),e);return Object.entries(t).forEach((function(e){var n=r(e,2),o=n[0];void 0===n[1]&&(i[o]=t[o])})),i}},5701:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7163:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6378),t)},8965:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isCameraStateEqual=t.applyCameraState=t.getDefaultCameraState=t.getDefaultDistance=t.getDefaultPosition=t.getCameraState=t.CAMERA_STATE_NONE=t.DEFAULT_ROTATION=t.Rotation=t.Position=void 0;var a=o(n(7163));t.Position=a.Vector3,t.Rotation=a.Quaternion,t.DEFAULT_ROTATION=new t.Rotation(0,0,0,1),t.CAMERA_STATE_NONE={},t.getCameraState=function(e){var t=e.viewerControls;return{position:t.position,rotation:t.rotation,distance:e.viewer.camera.position.z}},t.getDefaultPosition=function(e){return e.getCenter().negate()},t.getDefaultDistance=function(e){return e.getZoom()},t.getDefaultCameraState=function(e){return{position:t.getDefaultPosition(e),rotation:t.DEFAULT_ROTATION,distance:t.getDefaultDistance(e)}},t.applyCameraState=function(e,n,r){void 0===r&&(r=!1);var i=e.viewerControls,o=t.getCameraState(e),a=!1,s=n.position||t.getDefaultPosition(e);s.equals(o.position)||(i.viewer.translationGroup.position.copy(s),a=!0);var l=n.rotation||t.DEFAULT_ROTATION;l.equals(o.rotation)||(i.viewer.rotationGroup.setRotationFromQuaternion(l),a=!0);var u=n.distance||t.getDefaultDistance(e);u!==o.distance&&(i.viewer.camera.position.z=Math.min(-1,u),i.viewer.updateZoom(),a=!0),a&&(i.viewer.requestRender(),r||i.signals.changed.dispatch())},t.isCameraStateEqual=function(e,t){if(void 0===e||void 0===t)return e===t;var n=e.position&&t.position?e.position.equals(t.position):e.position===t.position,r=e.rotation&&t.rotation?e.rotation.equals(t.rotation):e.rotation===t.rotation;return n&&r&&e.distance===t.distance}},7659:function(e,t,n){var r=n(2096),i=n(7867),o=i;o.v1=r,o.v4=i,e.exports=o},8378:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},7082:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},2096:function(e,t,n){var r,i,o=n(7082),a=n(8378),s=0,l=0;e.exports=function(e,t,n){var u=t&&n||0,c=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:l+1,g=h-s+(m-l)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,l=m,i=f;var v=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;c[u++]=v>>>24&255,c[u++]=v>>>16&255,c[u++]=v>>>8&255,c[u++]=255&v;var y=h/4294967296*1e4&268435455;c[u++]=y>>>8&255,c[u++]=255&y,c[u++]=y>>>24&15|16,c[u++]=y>>>16&255,c[u++]=f>>>8|128,c[u++]=255&f;for(var b=0;b<6;++b)c[u+b]=d[b];return t||a(c)}},7867:function(e,t,n){var r=n(7082),i=n(8378);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+M(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),A(a,t,i,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var c=o+M(s=e[u],u);l+=A(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=A(s=s.value,t,i,c=o+M(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},O={transition:null},L={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,x(e),!m)if(null!==r(u))m=!0,O(_);else{var t=r(c);null!==t&&L(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(k),k=-1),h=!0;var o=p;try{for(x(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!A());){var a=f.callback;if("function"===typeof a){f.callback=null,p=f.priorityLevel;var s=a(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(u)&&i(u),x(n)}else i(u);f=r(u)}if(null!==f)var l=!0;else{var d=r(c);null!==d&&L(w,d.startTime-n),l=!1}return l}finally{f=null,p=o,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,E=null,k=-1,P=5,M=-1;function A(){return!(t.unstable_now()-M<P)}function T(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?S():(C=!1,E=null)}}else C=!1}if("function"===typeof b)S=function(){b(T)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,I=R.port2;R.port1.onmessage=T,S=function(){I.postMessage(null)}}else S=function(){v(T,0)};function O(e){E=e,C||(C=!0,S())}function L(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(y(k),k=-1):g=!0,L(w,o-a))):(e.sortIndex=s,n(u,e),m||h||(m=!0,O(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},2748:function(e,t,n){$=n(8890);var r=n(5335);n(7047).mixin(r.prototype),e.exports=r},5335:function(e,t,n){var r=function(){var e=n(5095);return function(t,n){var r,o=this;this.events={MOUSE_SELECTION_EVENT:"sequence-viewer-mouse-selection",SEQUENCE_SELECTED_EVENT:"sequence-viewer-substring-selected"},r=void 0!==n?n:"",console.log(r);var a,s,l="",u="",c={data:[],start:null,end:null,hlColor:null},d={};function f(e){return e+~~(e/10)+4*~~(e/d.charsPerLine)}function p(e){var n=function(e,t){var n=[];e.length&&e.forEach((function(e){n.push({start:e.start+1,end:e.end,sequence:t.substring(e.start,e.end)})}));return n}(e,t);n&&h(n)}function h(e){if(CustomEvent){var t=new CustomEvent(o.events.SEQUENCE_SELECTED_EVENT,{detail:e});s.dispatchEvent(t)}else console.warn("CustomEvent is not defined....");o.trigger&&o.trigger(o.events.SEQUENCE_SELECTED_EVENT,e)}this.render=function(n,m){if("string"!==typeof n)throw new Error("Div identifier must be a string");if(a=n,null===(s=document.getElementById(n.substring(1))))throw new Error("Cannot find element with id: "+n.substring(1));m||(m={}),d.showLineNumbers=void 0===m.showLineNumbers||m.showLineNumbers,d.wrapAminoAcids=void 0===m.wrapAminoAcids||m.wrapAminoAcids,d.sequenceMaxHeight=void 0===m.sequenceMaxHeight?"400px":m.sequenceMaxHeight,d.title=void 0===m.title?"Protein Sequence":m.title,d.charsPerLine=void 0===m.charsPerLine?30:m.charsPerLine,d.search=void 0!==m.search&&m.search,d.toolbar=void 0!==m.toolbar&&m.toolbar,d.badge=void 0===m.badge||m.badge,d.fasta=void 0===m.fasta||m.fasta,d.blast=void 0===m.blast||m.blast,d.header=m.header?{display:void 0===m.header.display||m.header.display,searchInTitle:void 0===m.header.searchInTitle||m.header.searchInTitle,unit:void 0===m.header.unit?"Char":m.header.unit,showCpl:void 0===m.header.showCpl||m.header.showCpl,badgeWithUnit:void 0!==m.header.badgeWithUnit&&m.header.badgeWithUnit}:{display:!0,searchInTitle:!0,unit:"Char",showCpl:!0,badgeWithUnit:!1};var g='<div style="display:inline-block;"><span class="badge" style="border-radius:70%;border: 2px solid black;color:#C50063;padding:8px 5px;background-color:white;margin-right:10px;vertical-align:middle;min-width:32px;">'+t.length+"</span></div>",v='<div style="display:inline-block;"><span class="badge" style="border-radius:70%;border: 2px solid black;color:#C50063;padding:5px 5px;background-color:white;margin-right:10px;vertical-align:middle;min-width:32px;font-size:11px;">'+t.length+"<div style='margin-top:-2px;font-size:9px;color:black;text-transform:lowercase;'>"+d.header.unit+"</div></span></div>",y=d.badge?d.header.badgeWithUnit?v:g:"",b=(d.header.display?'<div class="sequenceHeader row" style="border-bottom: 1px solid #E7EAEC;padding-bottom:5px;margin:0px 0px 10px">'+y+'<h4 style="display:inline-block;vertical-align:middle;">'+d.title+"</h4></div>":"")+'<div class="sequenceBody" style="margin-top: 5px;"><div class="scroller" style="max-height:'+d.sequenceMaxHeight+';overflow:auto;white-space: nowrap;padding-right:20px;margin-right:10px;"><div class="charNumbers" style="font-family: monospace;font-size: 13px;display:inline-block;text-align:right; padding-right:5px; border-right:1px solid LightGray;"></div><div class="fastaSeq" display-option="'+d.charsPerLine+'" style="font-family: monospace;font-size: 13px;display:inline-block;padding:5px;">'+t+'</div></div><div class="coverageLegend" style="margin-top: 10px;margin-left:15px;"></div></div>';if($(n).html(b),d.wrapAminoAcids?function(e){var t=parseInt($(e).attr("display-option"));t=(t+t/10).toString();var n=$(e).html();n=n.toString().match(/.{1,10}/g).join(" ").match(new RegExp(".{1,"+t+"}","g")).join("<br>"),u=n,$(e).html(n)}(n+" .fastaSeq"):$(n+" .scroller").css("overflow-x","auto"),d.showLineNumbers&&function(e,t){for(var n=$(e).html().split("<br>"),r=parseInt($(e).attr("display-option")),i=[],o=0,a=0;a<n.length;a++)i.push(o+1+"<br>"),o+=r;$(t).html(i.join(""))}(n+" .fastaSeq",n+" .charNumbers"),d.toolbar){if(d.header.showCpl)!function(){var e=r?"hidden-xs":"",t='<form class="form-inline" style="margin-bottom:5px;"><div class="form-group form-group-sm sequenceToolbar" style=""> <label class="control-label charPerLine-label '+e+"\" for='"+a.substring(1)+"-cpl' style='margin-right:5px;'>"+d.header.unit+' per line</label><select class="CPLChoice form-control '+e+"\" id='"+a.substring(1)+"-cpl' style='display:inline-block;width:auto;margin-right:10px;'><option>Select</option><option value=50>50</option><option value=60>60</option><option value=70>70</option><option value=80>80</option><option value=90>90</option><option value=100>100</option></select></div></form>";$(a+" .sequenceBody").prepend(t),$(a+" .CPLChoice").change((function(){var e;e=this,d.charsPerLine=e.value,o.render(a,d),c.data.length&&o.coverage(c.data,c.start,c.end,c.hlColor),$(a+" .CPLChoice option:selected").text($(this).val())}))}();else{$(a+" .sequenceBody").prepend('<form class="form-inline" style="margin-bottom:5px;"><div class="form-group form-group-sm sequenceToolbar" style=""> </div></form>')}""!==r&&(d.fasta&&$(a+" .sequenceToolbar").append('<a class="btn btn-default btn-sm fasta-link" href="http://www.nextprot.org/entry/'+r.split("-")[0]+"/fasta?isoform="+r.slice(3)+"\" target='_blank'>View FASTA</a>"),d.blast&&$(a+" .sequenceToolbar").append('<a class="btn btn-default btn-sm" href="/blast/'+r+'" style="margin-left:5px;">Blast sequence</a><a id="selectionBlast" class="btn btn-default btn-sm" href="/blast/'+r+'" style="margin-left:5px;"> Blast selection</a>'))}d.search&&function(n){n?$(a+" .sequenceHeader").append('<input class="inputSearchSeq form-control pull-right" type="text" style="width:40%;margin-top: 3px;" placeholder="Search in sequence.. (Regex supported)">'):$(a+" .sequenceBody").prepend('<input class="inputSearchSeq form-control" type="text" style="width:100%;margin:3px auto 10px;" placeholder="Search in sequence.. (Regex supported)">');$(a+" .inputSearchSeq").keyup(e((function(){var e=$(this).val();if(/\S/.test(e)){for(var n,r=new RegExp(e,"gi"),o=[];null!=(n=r.exec(t));)o.push({start:n.index,end:n.index+n[0].length});o.sort((function(e,t){return t.start-e.start})),p(o),function(e,t,n){(new Date).getTime(),0===e.length&&$(a+" .fastaSeq").html(l);var r=l.toString(),o=0,s=0;for(i in e)o=f(e[i].start),s=f(e[i].end),r=r.substring(0,o)+"<span class='stringsSelected' style=\"background:"+t+';color:white;">'+r.substring(o,s)+"</span>"+r.substring(s,r.length);$(a+" .fastaSeq").html(r)}(o,"#C50063")}else $(a+" .fastaSeq").html(u),h([])}),250))}(d.header.searchInTitle);l=$(n+" .fastaSeq").html(),$(a+" .fastaSeq").mouseup((function(){var e=function(){var e=window.getSelection().toString().replace(/\s+/g,""),t=window.getSelection(),n=$(a+" .fastaSeq")[0],r=0,i=$(a+" .fastaSeq").text(),o=t.getRangeAt(0),s=o.cloneRange();s.selectNodeContents(n),s.setEnd(o.endContainer,o.endOffset),r=s.toString().length;var l=i.substring(0,r).replace(/\s+/g,"").length,u=l-(e.length-1);return{text:e,start:u,end:l}}();e&&(function(e){if(CustomEvent){var t=new CustomEvent(o.events.MOUSE_SELECTION_EVENT,{detail:{selection:e.text,start:e.start,end:e.end}});s.dispatchEvent(t)}else console.warn("CustomEvent is not defined....");o.trigger&&o.trigger(o.events.MOUSE_SELECTION_EVENT,{selection:e})}(e),d.blast&&$("#selectionBlast").attr("href","/blast/"+r+"/"+e.start+"/"+e.end+"/"))}))},this.selection=function(e,t,n,i){var o=[e,t],s=l;p([{start:e,end:t}]),o[0]=o[0]+~~(o[0]/10)+4*~~(o[0]/d.charsPerLine),o[1]=o[1]+~~(o[1]/10)+4*~~(o[1]/d.charsPerLine);s=s.substring(0,o[0])+"<span class='stringSelected' style=\"background:"+n+';color:white;">'+s.substring(o[0],o[1])+"</span>"+s.substring(o[1],s.length),$(a+" .fastaSeq").html(s),d.blast&&$("#selectionBlast").attr("href","/blast/"+r+"/"+(e+1)+"/"+t+"/")},this.addLegend=function(e){for(var t=0;t<e.length;t++)!0===e[t].underscore?$(a+" .coverageLegend").append('<div style="display:inline-block;background:'+e[t].color+';width:20px;height:20px;vertical-align:middle;margin:0px 5px 0px 10px;border-radius:50%; border: 1px solid grey;text-align:center; line-height:0.8;">_</div><p style="display:inline-block;font-weight:bold;font-size:11px;font-style:italic;margin:0;padding-top:3px;vertical-align:top;">'+e[t].name+"</p></div>"):$(a+" .coverageLegend").append('<div style="display:inline-block;background:'+e[t].color+';width:20px;height:20px;vertical-align:middle;margin:0px 5px 0px 10px;border-radius:50%;"></div><p style="display:inline-block;font-weight:bold;font-size:11px;font-style:italic;margin:0;padding-top:3px;vertical-align:top;">'+e[t].name+"</p>")},this.coverage=function(e,n,r,i){c.data=jQuery.extend(!0,[],e),c.start=n,c.end=r,c.hlColor=i,e.sort((function(e,t){return e.start-t.start})),e=function(e){for(var n=e.slice(),r=0;r<=e.length-1;r++)0===r?(e[0].start>0&&n.unshift({start:0,end:e[0].start,color:"black",underscore:!1}),r===e.length-1&&n.push({start:e[r].end,end:t.length,color:"black",underscore:!1})):r===e.length-1?(e[r-1].end<e[r].start&&n.push({start:e[r-1].end,end:e[r].start,color:"black",underscore:!1}),e[r].end<t.length-1&&n.push({start:e[r].end,end:t.length,color:"black",underscore:!1})):e[r-1].end<e[r].start&&n.push({start:e[r-1].end,end:e[r].start,color:"black",underscore:!1}),0!==r&&e[r-1].end>e[r].start&&console.warn("WARNING (error): Some positions in the coverage list are overlapping");return n.sort((function(e,t){return e.start-t.start})),n}(e);(new Date).getTime();if(!n)n=0;if(!r)r=0;if(!i)i="#FFE5A3";for(var o="",s="",d=0;d<e.length;d++){var p="";void 0!==e[d].tooltip&&(p=' title="'+e[d].tooltip+'"');var h="";void 0!==e[d].bgcolor&&(h="background:"+e[d].bgcolor+";");var m="",g="";void 0!==e[d].onclick&&(m=' onclick=" return '+d+';" ',g="cursor: pointer;"),e[d].underscore?o+=s='<span style="text-decoration:underline;color:'+e[d].color+";"+h+g+'"'+p+m+">":o+=s='<span style="color:'+e[d].color+";"+h+g+'"'+p+m+">",r?n>=e[d].start&&n<e[d].end&&r>=e[d].start&&r<e[d].end?(o+=l.substring(f(e[d].start),f(n))+'<span class="peptideHighlighted" style="background:'+i+';">'+l.substring(f(n),f(r+1)),o+="</span>"+l.substring(f(r+1),f(e[d].end))+"</span>"):n>=e[d].start&&n<e[d].end?o+=l.substring(f(e[d].start),f(n))+'</span><span class="peptideHighlighted" style="background:'+i+';">'+s+l.substring(f(n),f(e[d].end))+"</span>":r>=e[d].start&&r<e[d].end?o+=l.substring(f(e[d].start),f(r+1))+"</span></span>"+s+l.substring(f(r+1),f(e[d].end))+"</span>":o+=l.substring(f(e[d].start),f(e[d].end))+"</span>":o+=l.substring(f(e[d].start),f(e[d].end))+"</span>"}var v=$(a+" .fastaSeq");v.html(o),u=o;var y=$("[onclick]",v);for(d=0;d<y.length;d++){var b=y[d].onclick();y[d].onclick=e[b].onclick}},this.onMouseSelection=function(e){s.addEventListener(o.events.MOUSE_SELECTION_EVENT,e)},this.onSubpartSelected=function(e){s.addEventListener(o.events.SEQUENCE_SELECTED_EVENT,e)}}}();"object"===typeof e.exports&&(e.exports=r)},9613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var u=o[l];if(!s(u))return!1;var c=e[u],d=t[u];if(!1===(i=n?n.call(r,c,d,u):void 0)||void 0===i&&c!==d)return!1}return!0}},6426:function(e,t,n){var r=n(1065);function i(e,t){var n,i=null;if(!e||"string"!==typeof e)return i;for(var o,a,s=r(e),l="function"===typeof t,u=0,c=s.length;u<c;u++)o=(n=s[u]).property,a=n.value,l?t(o,a,n):a&&(i||(i={}),i[o]=a);return i}e.exports=i,e.exports.default=i},7691:function(e,t,n){"use strict";n.r(t),n.d(t,{ServerStyleSheet:function(){return ze},StyleSheetConsumer:function(){return re},StyleSheetContext:function(){return ne},StyleSheetManager:function(){return ue},ThemeConsumer:function(){return Re},ThemeContext:function(){return Te},ThemeProvider:function(){return Ie},__PRIVATE__:function(){return Ue},createGlobalStyle:function(){return Ne},css:function(){return be},default:function(){return Ve},isStyledComponent:function(){return b},keyframes:function(){return Be},useTheme:function(){return He},version:function(){return w},withTheme:function(){return je}});var r=n(7441),i=n(2791),o=n(9613),a=n.n(o);var s=function(e){function t(e,r,l,u,f){for(var p,h,m,g,x,_=0,S=0,C=0,E=0,k=0,I=0,L=m=p=0,F=0,N=0,B=0,z=0,j=l.length,H=j-1,U="",V="",G="",W="";F<j;){if(h=l.charCodeAt(F),F===H&&0!==S+E+C+_&&(0!==S&&(h=47===S?10:47),E=C=_=0,j++,H++),0===S+E+C+_){if(F===H&&(0<N&&(U=U.replace(d,"")),0<U.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:U+=l.charAt(F)}h=59}switch(h){case 123:for(p=(U=U.trim()).charCodeAt(0),m=1,z=++F;F<j;){switch(h=l.charCodeAt(F)){case 123:m++;break;case 125:m--;break;case 47:switch(h=l.charCodeAt(F+1)){case 42:case 47:e:{for(L=F+1;L<H;++L)switch(l.charCodeAt(L)){case 47:if(42===h&&42===l.charCodeAt(L-1)&&F+2!==L){F=L+1;break e}break;case 10:if(47===h){F=L+1;break e}}F=L}}break;case 91:h++;case 40:h++;case 34:case 39:for(;F++<H&&l.charCodeAt(F)!==h;);}if(0===m)break;F++}if(m=l.substring(z,F),0===p&&(p=(U=U.replace(c,"").trim()).charCodeAt(0)),64===p){switch(0<N&&(U=U.replace(d,"")),h=U.charCodeAt(1)){case 100:case 109:case 115:case 45:N=r;break;default:N=R}if(z=(m=t(r,N,m,h,f+1)).length,0<O&&(x=s(3,m,N=n(R,U,B),r,M,P,z,h,f,u),U=N.join(""),void 0!==x&&0===(z=(m=x.trim()).length)&&(h=0,m="")),0<z)switch(h){case 115:U=U.replace(w,a);case 100:case 109:case 45:m=U+"{"+m+"}";break;case 107:m=(U=U.replace(v,"$1 $2"))+"{"+m+"}",m=1===T||2===T&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=U+m,112===u&&(V+=m,m="")}else m=""}else m=t(r,n(r,U,B),m,u,f+1);G+=m,m=B=N=L=p=0,U="",h=l.charCodeAt(++F);break;case 125:case 59:if(1<(z=(U=(0<N?U.replace(d,""):U).trim()).length))switch(0===L&&(p=U.charCodeAt(0),45===p||96<p&&123>p)&&(z=(U=U.replace(" ",":")).length),0<O&&void 0!==(x=s(1,U,r,e,M,P,V.length,u,f,u))&&0===(z=(U=x.trim()).length)&&(U="\0\0"),p=U.charCodeAt(0),h=U.charCodeAt(1),p){case 0:break;case 64:if(105===h||99===h){W+=U+l.charAt(F);break}default:58!==U.charCodeAt(z-1)&&(V+=i(U,p,h,U.charCodeAt(2)))}B=N=L=p=0,U="",h=l.charCodeAt(++F)}}switch(h){case 13:case 10:47===S?S=0:0===1+p&&107!==u&&0<U.length&&(N=1,U+="\0"),0<O*D&&s(0,U,r,e,M,P,V.length,u,f,u),P=1,M++;break;case 59:case 125:if(0===S+E+C+_){P++;break}default:switch(P++,g=l.charAt(F),h){case 9:case 32:if(0===E+_+S)switch(k){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===E+S+_&&(N=B=1,g="\f"+g);break;case 108:if(0===E+S+_+A&&0<L)switch(F-L){case 2:112===k&&58===l.charCodeAt(F-3)&&(A=k);case 8:111===I&&(A=I)}break;case 58:0===E+S+_&&(L=F);break;case 44:0===S+C+E+_&&(N=1,g+="\r");break;case 34:case 39:0===S&&(E=E===h?0:0===E?h:E);break;case 91:0===E+S+C&&_++;break;case 93:0===E+S+C&&_--;break;case 41:0===E+S+_&&C--;break;case 40:if(0===E+S+_){if(0===p)if(2*k+3*I===533);else p=1;C++}break;case 64:0===S+C+E+_+L+m&&(m=1);break;case 42:case 47:if(!(0<E+_+C))switch(S){case 0:switch(2*h+3*l.charCodeAt(F+1)){case 235:S=47;break;case 220:z=F,S=42}break;case 42:47===h&&42===k&&z+2!==F&&(33===l.charCodeAt(z+2)&&(V+=l.substring(z,F+1)),g="",S=0)}}0===S&&(U+=g)}I=k,k=h,F++}if(0<(z=V.length)){if(N=r,0<O&&(void 0!==(x=s(2,V,N,e,M,P,z,u,f,u))&&0===(V=x).length))return W+V+G;if(V=N.join(",")+"{"+V+"}",0!==T*A){switch(2!==T||o(V,2)||(A=0),A){case 111:V=V.replace(b,":-moz-$1")+V;break;case 112:V=V.replace(y,"::-webkit-input-$1")+V.replace(y,"::-moz-$1")+V.replace(y,":-ms-input-$1")+V}A=0}}return W+V+G}function n(e,t,n){var i=t.trim().split(m);t=i;var o=i.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var l=s=0;for(t=[];s<o;++s)for(var u=0;u<a;++u)t[l++]=r(e[u]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var a=e+";",s=2*t+3*n+4*r;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===T||2===T&&o(l,1)?"-webkit-"+l+l:l}if(0===T||2===T&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(k,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return p.test(a)?a.replace(f,":-webkit-")+a.replace(f,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(x,"tb");break;case 232:l=a.replace(x,"tb-rl");break;case 220:l=a.replace(x,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+r&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+a}return a}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),L(2!==t?r:r.replace(C,"$1"),n,t)}function a(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(_," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,o,a,s,l,c){for(var d,f=0,p=t;f<O;++f)switch(d=I[f].call(u,e,p,n,r,i,o,a,s,l,c)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(L=null,e?"function"!==typeof e?T=1:(T=2,L=e):T=0),l}function u(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<O){var i=s(-1,n,r,r,M,P,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var o=t(R,r,n,0,0);return 0<O&&(void 0!==(i=s(-2,o,r,r,M,P,o.length,0,0,0))&&(o=i)),"",A=0,P=M=1,o}var c=/^\0+/g,d=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,k=/([^-])(image-set\()/,P=1,M=1,A=0,T=1,R=[],I=[],O=0,L=null,D=0;return u.use=function e(t){switch(t){case void 0:case null:O=I.length=0;break;default:if("function"===typeof t)I[O++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else D=0|!!t}return e},u.set=l,void 0!==e&&l(e),u},l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},u=n(9791),c=n(2110),d=n.n(c);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},h=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,r.typeOf)(e)},m=Object.freeze([]),g=Object.freeze({});function v(e){return"function"==typeof e}function y(e){return e.displayName||e.name||"Component"}function b(e){return e&&"string"==typeof e.styledComponentId}var x="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",w="5.3.6",_="undefined"!=typeof window&&"HTMLElement"in window,S=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),C={};function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var k=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&E(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),P=new Map,M=new Map,A=1,T=function(e){if(P.has(e))return P.get(e);for(;M.has(A);)A++;var t=A++;return P.set(e,t),M.set(t,e),t},R=function(e){return M.get(e)},I=function(e,t){t>=A&&(A=t+1),P.set(e,t),M.set(t,e)},O="style["+x+'][data-styled-version="5.3.6"]',L=new RegExp("^"+x+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),D=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},F=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,o=n.length;i<o;i++){var a=n[i].trim();if(a){var s=a.match(L);if(s){var l=0|parseInt(s[1],10),u=s[2];0!==l&&(I(u,l),D(e,u,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(a)}}},N=function(){return n.nc},B=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(x))return r}}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(x,"active"),r.setAttribute("data-styled-version","5.3.6");var a=N();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},z=function(){function e(e){var t=this.element=B(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}E(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),j=function(){function e(e){var t=this.element=B(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),H=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),U=_,V={isServer:!_,useCSSOMInjection:!S},G=function(){function e(e,t,n){void 0===e&&(e=g),void 0===t&&(t={}),this.options=f({},V,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&_&&U&&(U=!1,function(e){for(var t=document.querySelectorAll(O),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(x)&&(F(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return T(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(f({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new H(i):r?new z(i):new j(i),new k(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(T(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(T(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(T(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var o=R(i);if(void 0!==o){var a=e.names.get(o),s=t.getGroup(i);if(a&&s&&a.size){var l=x+".g"+i+'[id="'+o+'"]',u="";void 0!==a&&a.forEach((function(e){e.length>0&&(u+=e+",")})),r+=""+s+l+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),W=/(a)(d)/gi,$=function(e){return String.fromCharCode(e+(e>25?39:97))};function q(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=$(t%52)+n;return($(t%52)+n).replace(W,"$1-$2")}var X=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},K=function(e){return X(5381,e)};function Y(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(v(n)&&!b(n))return!1}return!0}var Z=K("5.3.6"),Q=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Y(e),this.componentId=t,this.baseHash=X(Z,t),this.baseStyle=n,G.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var o=ve(this.rules,e,t,n).join(""),a=q(X(this.baseHash,o)>>>0);if(!t.hasNameForId(r,a)){var s=n(o,"."+a,void 0,r);t.insertRules(r,a,s)}i.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,u=X(this.baseHash,n.hash),c="",d=0;d<l;d++){var f=this.rules[d];if("string"==typeof f)c+=f;else if(f){var p=ve(f,e,t,n),h=Array.isArray(p)?p.join(""):p;u=X(u,h+d),c+=h}}if(c){var m=q(u>>>0);if(!t.hasNameForId(r,m)){var g=n(c,"."+m,void 0,r);t.insertRules(r,m,g)}i.push(m)}}return i.join(" ")},e}(),J=/^\s*\/\/.*$/gm,ee=[":","[",".","#"];function te(e){var t,n,r,i,o=void 0===e?g:e,a=o.options,l=void 0===a?g:a,u=o.plugins,c=void 0===u?m:u,d=new s(l),f=[],p=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,o,a,s,l,u,c,d){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),h=function(e,r,o){return 0===r&&-1!==ee.indexOf(o[n.length])||o.match(i)?e:"."+t};function v(e,o,a,s){void 0===s&&(s="&");var l=e.replace(J,""),u=o&&a?a+" "+o+" { "+l+" }":l;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),d(a||!o?"":o,u)}return d.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,h))},p,function(e){if(-2===e){var t=f;return f=[],t}}])),v.hash=c.length?c.reduce((function(e,t){return t.name||E(15),X(e,t.name)}),5381).toString():"",v}var ne=i.createContext(),re=ne.Consumer,ie=i.createContext(),oe=(ie.Consumer,new G),ae=te();function se(){return(0,i.useContext)(ne)||oe}function le(){return(0,i.useContext)(ie)||ae}function ue(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],o=se(),s=(0,i.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,i.useMemo)((function(){return te({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){a()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(ne.Provider,{value:s},i.createElement(ie.Provider,{value:l},e.children))}var ce=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ae);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return E(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ae),this.name+e.hash},e}(),de=/([A-Z])/,fe=/([A-Z])/g,pe=/^ms-/,he=function(e){return"-"+e.toLowerCase()};function me(e){return de.test(e)?e.replace(fe,he).replace(pe,"-ms-"):e}var ge=function(e){return null==e||!1===e||""===e};function ve(e,t,n,r){if(Array.isArray(e)){for(var i,o=[],a=0,s=e.length;a<s;a+=1)""!==(i=ve(e[a],t,n,r))&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}return ge(e)?"":b(e)?"."+e.styledComponentId:v(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:ve(e(t),t,n,r):e instanceof ce?n?(e.inject(n,r),e.getName(r)):e:h(e)?function e(t,n){var r,i,o=[];for(var a in t)t.hasOwnProperty(a)&&!ge(t[a])&&(Array.isArray(t[a])&&t[a].isCss||v(t[a])?o.push(me(a)+":",t[a],";"):h(t[a])?o.push.apply(o,e(t[a],a)):o.push(me(a)+": "+(r=a,(null==(i=t[a])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in l?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var u}var ye=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function be(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e)||h(e)?ye(ve(p(m,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:ye(ve(p(e,n)))}new Set;var xe=function(e,t,n){return void 0===n&&(n=g),e.theme!==n.theme&&e.theme||t||n.theme},we=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,_e=/(^-|-$)/g;function Se(e){return e.replace(we,"-").replace(_e,"")}var Ce=function(e){return q(K(e)>>>0)};function Ee(e){return"string"==typeof e&&!0}var ke=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Pe=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Me(e,t,n){var r=e[n];ke(t)&&ke(r)?Ae(r,t):e[n]=t}function Ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(ke(a))for(var s in a)Pe(s)&&Me(e,a[s],s)}return e}var Te=i.createContext(),Re=Te.Consumer;function Ie(e){var t=(0,i.useContext)(Te),n=(0,i.useMemo)((function(){return function(e,t){return e?v(e)?e(t):Array.isArray(e)||"object"!=typeof e?E(8):t?f({},t,{},e):e:E(14)}(e.theme,t)}),[e.theme,t]);return e.children?i.createElement(Te.Provider,{value:n},e.children):null}var Oe={};function Le(e,t,n){var r=b(e),o=!Ee(e),a=t.attrs,s=void 0===a?m:a,l=t.componentId,c=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Se(e);Oe[n]=(Oe[n]||0)+1;var r=n+"-"+Ce("5.3.6"+n+Oe[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):l,p=t.displayName,h=void 0===p?function(e){return Ee(e)?"styled."+e:"Styled("+y(e)+")"}(e):p,x=t.displayName&&t.componentId?Se(t.displayName)+"-"+t.componentId:t.componentId||c,w=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,_=t.shouldForwardProp;r&&e.shouldForwardProp&&(_=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var S,C=new Q(n,x,r?e.componentStyle:void 0),E=C.isStatic&&0===s.length,k=function(e,t){return function(e,t,n,r){var o=e.attrs,a=e.componentStyle,s=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,d=e.styledComponentId,p=e.target,h=function(e,t,n){void 0===e&&(e=g);var r=f({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,o,a=e;for(t in v(a)&&(a=a(r)),a)r[t]=i[t]="className"===t?(n=i[t],o=a[t],n&&o?n+" "+o:n||o):a[t]})),[r,i]}(xe(t,(0,i.useContext)(Te),s)||g,t,o),m=h[0],y=h[1],b=function(e,t,n,r){var i=se(),o=le();return t?e.generateAndInjectStyles(g,i,o):e.generateAndInjectStyles(n,i,o)}(a,r,m),x=n,w=y.$as||t.$as||y.as||t.as||p,_=Ee(w),S=y!==t?f({},t,{},y):t,C={};for(var E in S)"$"!==E[0]&&"as"!==E&&("forwardedAs"===E?C.as=S[E]:(c?c(E,u.Z,w):!_||(0,u.Z)(E))&&(C[E]=S[E]));return t.style&&y.style!==t.style&&(C.style=f({},t.style,{},y.style)),C.className=Array.prototype.concat(l,d,b!==d?b:null,t.className,y.className).filter(Boolean).join(" "),C.ref=x,(0,i.createElement)(w,C)}(S,e,t,E)};return k.displayName=h,(S=i.forwardRef(k)).attrs=w,S.componentStyle=C,S.displayName=h,S.shouldForwardProp=_,S.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):m,S.styledComponentId=x,S.target=r?e.target:e,S.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),o=r&&r+"-"+(Ee(e)?e:Se(y(e)));return Le(e,f({},i,{attrs:w,componentId:o}),n)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ae({},e.defaultProps,t):t}}),S.toString=function(){return"."+S.styledComponentId},o&&d()(S,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var De=function(e){return function e(t,n,i){if(void 0===i&&(i=g),!(0,r.isValidElementType)(n))return E(1,String(n));var o=function(){return t(n,i,be.apply(void 0,arguments))};return o.withConfig=function(r){return e(t,n,f({},i,{},r))},o.attrs=function(r){return e(t,n,f({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},o}(Le,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){De[e]=De(e)}));var Fe=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Y(e),G.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(ve(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&G.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function Ne(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=be.apply(void 0,[e].concat(n)),a="sc-global-"+Ce(JSON.stringify(o)),s=new Fe(o,a);function l(e){var t=se(),n=le(),r=(0,i.useContext)(Te),o=(0,i.useRef)(t.allocateGSInstance(a)).current;return t.server&&u(o,e,t,r,n),(0,i.useLayoutEffect)((function(){if(!t.server)return u(o,e,t,r,n),function(){return s.removeStyles(o,t)}}),[o,e,t,r,n]),null}function u(e,t,n,r,i){if(s.isStatic)s.renderStyles(e,C,n,i);else{var o=f({},t,{theme:xe(t,r,l.defaultProps)});s.renderStyles(e,o,n,i)}}return i.memo(l)}function Be(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=be.apply(void 0,[e].concat(n)).join(""),o=Ce(i);return new ce(o,i)}var ze=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=N();return"<style "+[n&&'nonce="'+n+'"',x+'="true"','data-styled-version="5.3.6"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?E(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return E(2);var n=((t={})[x]="",t["data-styled-version"]="5.3.6",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=N();return r&&(n.nonce=r),[i.createElement("style",f({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new G({isServer:!0}),this.sealed=!1}var t=e.prototype;return t.collectStyles=function(e){return this.sealed?E(2):i.createElement(ue,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return E(3)},e}(),je=function(e){var t=i.forwardRef((function(t,n){var r=(0,i.useContext)(Te),o=e.defaultProps,a=xe(t,r,o);return i.createElement(e,f({},t,{theme:a,ref:n}))}));return d()(t,e),t.displayName="WithTheme("+y(e)+")",t},He=function(){return(0,i.useContext)(Te)},Ue={StyleSheet:G,masterSheet:oe},Ve=De},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),o=n(6116),a=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},9400:function(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),o=n(6116),a=n(2281);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(T){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=d;var p={};function h(){}function m(){}function g(){}var v={};c(v,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(M([])));b&&b!==t&&n.call(b,s)&&(v=b);var x=g.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(o,a,s,l){var u=f(e[o],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,l)}),(function(e){i("throw",e,s,l)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,l)}))}l(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function S(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function M(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return m.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(_.prototype),c(_.prototype,l,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(d(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(x),c(x,u,"Generator"),c(x,s,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{attentionMarkers:function(){return ok},contentInitial:function(){return JE},disable:function(){return ak},document:function(){return QE},flow:function(){return tk},flowInitial:function(){return ek},insideSpan:function(){return ik},string:function(){return nk},text:function(){return rk}});var t={};n.r(t),n.d(t,{boolean:function(){return Qk},booleanish:function(){return Jk},commaOrSpaceSeparated:function(){return iP},commaSeparated:function(){return rP},number:function(){return tP},overloadedBoolean:function(){return eP},spaceSeparated:function(){return nP}});var r=n(2791),i=n.t(r,2),o=n(1250);function a(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||l(e,t)||u()}var d=n(1002);function f(e){var t=function(e,t){if("object"!==(0,d.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==(0,d.Z)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,d.Z)(t)?t:String(t)}function p(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=n(7659),v=n(2748),y=n.n(v),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function x(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var w=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n));return r.handleChange=r.handleChange.bind(r),r.handleRef=r.handleRef.bind(r),n.selection&&n.selection.length>0&&n.coverage&&n.coverage.length>0&&console.warn("The selection and coverage options are not compatible with each other."),r._seqObj=new(y())(r.props.sequence),r._div=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.callRender=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.selection,i=x(n,["selection"]),o=this._div;null!==o&&(this._seqObj.render("#"+o.id,b({},i,t)),this.props.coverage.length>0&&this._seqObj.coverage(this.props.coverage),this.props.legend.length>0&&this._seqObj.addLegend(this.props.legend),r.length>0&&(e=this._seqObj).selection.apply(e,r))},t.prototype.componentDidMount=function(){document.addEventListener("change",this.handleChange),this.callRender(),this._seqObj.onSubpartSelected(this.props.onSubpartSelected),this._seqObj.onMouseSelection(this.props.onMouseSelection)},t.prototype.componentWillReceiveProps=function(e){this.props.sequence!==e.sequence&&(this._seqObj=new(y())(e.sequence))},t.prototype.componentDidUpdate=function(e,t){this.props!==e&&this.callRender()},t.prototype.componentWillUnmount=function(){document.removeEventListener("change",this.handleChange)},t.prototype.handleChange=function(e){var t=e.target;(" "+t.className+" ").indexOf(" "+this.props.seqLenClass+" ")>-1&&this.callRender({charsPerLine:t.value})},t.prototype.handleRef=function(e){this._div=e},t.prototype.render=function(){var e=this.props,t=(e.id,e.sequence,e.className);return r.createElement("div",{className:t,id:this.props.id,ref:this.handleRef})},t}(r.Component);w.propTypes={},w.defaultProps={id:(0,g.v4)(),coverage:[],legend:[],selection:[],seqLenClass:"CPLChoice",onMouseSelection:function(e){},onSubpartSelected:function(e){},className:""};n(3513);var _=n(184);var S=n(2007),C=n.n(S);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function P(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=P(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var M=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=P(e))&&(r&&(r+=" "),r+=t);return r};function A(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function T(e){if("string"!==typeof e)throw new Error(A(7));return e.charAt(0).toUpperCase()+e.slice(1)}var R=T;function I(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){I(t,e)}))}}),t)}var L=O,D="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,F=D;function N(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}function B(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function z(e){return function(e){if(Array.isArray(e))return s(e)}(e)||B(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=n(9791);var H=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(rR){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),U=Math.abs,V=String.fromCharCode,G=Object.assign;function W(e){return e.trim()}function $(e,t,n){return e.replace(t,n)}function q(e,t){return e.indexOf(t)}function X(e,t){return 0|e.charCodeAt(t)}function K(e,t,n){return e.slice(t,n)}function Y(e){return e.length}function Z(e){return e.length}function Q(e,t){return t.push(e),e}var J=1,ee=1,te=0,ne=0,re=0,ie="";function oe(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:J,column:ee,length:a,return:""}}function ae(e,t){return G(oe("",null,null,"",null,null,0),e,{length:-e.length},t)}function se(){return re=ne>0?X(ie,--ne):0,ee--,10===re&&(ee=1,J--),re}function le(){return re=ne<te?X(ie,ne++):0,ee++,10===re&&(ee=1,J++),re}function ue(){return X(ie,ne)}function ce(){return ne}function de(e,t){return K(ie,e,t)}function fe(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function pe(e){return J=ee=1,te=Y(ie=e),ne=0,[]}function he(e){return ie="",e}function me(e){return W(de(ne-1,ye(91===e?e+2:40===e?e+1:e)))}function ge(e){for(;(re=ue())&&re<33;)le();return fe(e)>2||fe(re)>3?"":" "}function ve(e,t){for(;--t&&le()&&!(re<48||re>102||re>57&&re<65||re>70&&re<97););return de(e,ce()+(t<6&&32==ue()&&32==le()))}function ye(e){for(;le();)switch(re){case e:return ne;case 34:case 39:34!==e&&39!==e&&ye(re);break;case 40:41===e&&ye(e);break;case 92:le()}return ne}function be(e,t){for(;le()&&e+re!==57&&(e+re!==84||47!==ue()););return"/*"+de(t,ne-1)+"*"+V(47===e?e:le())}function xe(e){for(;!fe(ue());)le();return de(e,ne)}var we="-ms-",_e="-moz-",Se="-webkit-",Ce="comm",Ee="rule",ke="decl",Pe="@keyframes";function Me(e,t){for(var n="",r=Z(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Ae(e,t,n,r){switch(e.type){case"@import":case ke:return e.return=e.return||e.value;case Ce:return"";case Pe:return e.return=e.value+"{"+Me(e.children,r)+"}";case Ee:e.value=e.props.join(",")}return Y(n=Me(e.children,r))?e.return=e.value+"{"+n+"}":""}function Te(e){return he(Re("",null,null,null,[""],e=pe(e),0,[0],e))}function Re(e,t,n,r,i,o,a,s,l){for(var u=0,c=0,d=a,f=0,p=0,h=0,m=1,g=1,v=1,y=0,b="",x=i,w=o,_=r,S=b;g;)switch(h=y,y=le()){case 40:if(108!=h&&58==X(S,d-1)){-1!=q(S+=$(me(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:S+=me(y);break;case 9:case 10:case 13:case 32:S+=ge(h);break;case 92:S+=ve(ce()-1,7);continue;case 47:switch(ue()){case 42:case 47:Q(Oe(be(le(),ce()),t,n),l);break;default:S+="/"}break;case 123*m:s[u++]=Y(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+c:p>0&&Y(S)-d&&Q(p>32?Le(S+";",r,n,d-1):Le($(S," ","")+";",r,n,d-2),l);break;case 59:S+=";";default:if(Q(_=Ie(S,t,n,u,c,i,s,b,x=[],w=[],d),o),123===y)if(0===c)Re(S,t,_,_,x,o,d,s,w);else switch(99===f&&110===X(S,3)?100:f){case 100:case 109:case 115:Re(e,_,_,r&&Q(Ie(e,_,_,0,0,i,s,b,i,x=[],d),w),i,w,d,s,r?x:w);break;default:Re(S,_,_,_,[""],w,0,s,w)}}u=c=p=0,m=v=1,b=S="",d=a;break;case 58:d=1+Y(S),p=h;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==se())continue;switch(S+=V(y),y*m){case 38:v=c>0?1:(S+="\f",-1);break;case 44:s[u++]=(Y(S)-1)*v,v=1;break;case 64:45===ue()&&(S+=me(le())),f=ue(),c=d=Y(b=S+=xe(ce())),y++;break;case 45:45===h&&2==Y(S)&&(m=0)}}return o}function Ie(e,t,n,r,i,o,a,s,l,u,c){for(var d=i-1,f=0===i?o:[""],p=Z(f),h=0,m=0,g=0;h<r;++h)for(var v=0,y=K(e,d+1,d=U(m=a[h])),b=e;v<p;++v)(b=W(m>0?f[v]+" "+y:$(y,/&\f/g,f[v])))&&(l[g++]=b);return oe(e,t,n,0===i?Ee:s,l,u,c)}function Oe(e,t,n){return oe(e,t,n,Ce,V(re),K(e,2,-2),0)}function Le(e,t,n,r){return oe(e,t,n,ke,K(e,0,r),K(e,r+1,-1),r)}var De=function(e,t,n){for(var r=0,i=0;r=i,i=ue(),38===r&&12===i&&(t[n]=1),!fe(i);)le();return de(e,ne)},Fe=function(e,t){return he(function(e,t){var n=-1,r=44;do{switch(fe(r)){case 0:38===r&&12===ue()&&(t[n]=1),e[n]+=De(ne-1,t,n);break;case 2:e[n]+=me(r);break;case 4:if(44===r){e[++n]=58===ue()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=V(r)}}while(r=le());return e}(pe(e),t))},Ne=new WeakMap,Be=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Ne.get(n))&&!r){Ne.set(e,!0);for(var i=[],o=Fe(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var u=0;u<a.length;u++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},ze=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function je(e,t){switch(function(e,t){return 45^X(e,0)?(((t<<2^X(e,0))<<2^X(e,1))<<2^X(e,2))<<2^X(e,3):0}(e,t)){case 5103:return Se+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Se+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Se+e+_e+e+we+e+e;case 6828:case 4268:return Se+e+we+e+e;case 6165:return Se+e+we+"flex-"+e+e;case 5187:return Se+e+$(e,/(\w+).+(:[^]+)/,Se+"box-$1$2"+we+"flex-$1$2")+e;case 5443:return Se+e+we+"flex-item-"+$(e,/flex-|-self/,"")+e;case 4675:return Se+e+we+"flex-line-pack"+$(e,/align-content|flex-|-self/,"")+e;case 5548:return Se+e+we+$(e,"shrink","negative")+e;case 5292:return Se+e+we+$(e,"basis","preferred-size")+e;case 6060:return Se+"box-"+$(e,"-grow","")+Se+e+we+$(e,"grow","positive")+e;case 4554:return Se+$(e,/([^-])(transform)/g,"$1"+Se+"$2")+e;case 6187:return $($($(e,/(zoom-|grab)/,Se+"$1"),/(image-set)/,Se+"$1"),e,"")+e;case 5495:case 3959:return $(e,/(image-set\([^]*)/,Se+"$1$`$1");case 4968:return $($(e,/(.+:)(flex-)?(.*)/,Se+"box-pack:$3"+we+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Se+e+e;case 4095:case 3583:case 4068:case 2532:return $(e,/(.+)-inline(.+)/,Se+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Y(e)-1-t>6)switch(X(e,t+1)){case 109:if(45!==X(e,t+4))break;case 102:return $(e,/(.+:)(.+)-([^]+)/,"$1"+Se+"$2-$3$1"+_e+(108==X(e,t+3)?"$3":"$2-$3"))+e;case 115:return~q(e,"stretch")?je($(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==X(e,t+1))break;case 6444:switch(X(e,Y(e)-3-(~q(e,"!important")&&10))){case 107:return $(e,":",":"+Se)+e;case 101:return $(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Se+(45===X(e,14)?"inline-":"")+"box$3$1"+Se+"$2$3$1"+we+"$2box$3")+e}break;case 5936:switch(X(e,t+11)){case 114:return Se+e+we+$(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Se+e+we+$(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Se+e+we+$(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Se+e+we+e+e}return e}var He=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ke:e.return=je(e.value,e.length);break;case Pe:return Me([ae(e,{value:$(e.value,"@","@"+Se)})],r);case Ee:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Me([ae(e,{props:[$(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Me([ae(e,{props:[$(t,/:(plac\w+)/,":"+Se+"input-$1")]}),ae(e,{props:[$(t,/:(plac\w+)/,":-moz-$1")]}),ae(e,{props:[$(t,/:(plac\w+)/,we+"input-$1")]})],r)}return""}))}}],Ue=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||He;var i,o,a={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var l,u,c=[Ae,(u=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=Z(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([Be,ze].concat(r,c));o=function(e,t,n,r){l=n,function(e){Me(Te(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new H({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(s),f};var Ve=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Ge={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},We=n(9797),$e=/[A-Z]|^ms/g,qe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Xe=function(e){return 45===e.charCodeAt(1)},Ke=function(e){return null!=e&&"boolean"!==typeof e},Ye=(0,We.Z)((function(e){return Xe(e)?e:e.replace($e,"-$&").toLowerCase()})),Ze=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(qe,(function(e,t,n){return Je={name:t,styles:n,next:Je},t}))}return 1===Ge[e]||Xe(e)||"number"!==typeof t||0===t?t:t+"px"};function Qe(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Je={name:n.name,styles:n.styles,next:Je},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Je={name:r.name,styles:r.styles,next:Je},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Qe(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":Ke(a)&&(r+=Ye(o)+":"+Ze(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=Qe(e,t,a);switch(o){case"animation":case"animationName":r+=Ye(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)Ke(a[l])&&(r+=Ye(o)+":"+Ze(o,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Je,o=n(e);return Je=i,Qe(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var Je,et=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var tt=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Je=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=Qe(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++)i+=Qe(n,t,e[a]),r&&(i+=o[a]);et.lastIndex=0;for(var s,l="";null!==(s=et.exec(i));)l+="-"+s[1];return{name:Ve(i)+l,styles:i,next:Je}},nt=!!i.useInsertionEffect&&i.useInsertionEffect,rt=nt||function(e){return e()},it=nt||r.useLayoutEffect,ot=(0,r.createContext)("undefined"!==typeof HTMLElement?Ue({key:"css"}):null);ot.Provider;var at=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(ot);return e(t,i,n)}))},st=(0,r.createContext)({});function lt(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var ut=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},ct=function(e,t,n){ut(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0);i=i.next}while(void 0!==i)}},dt=j.Z,ft=function(e){return"theme"!==e},pt=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?dt:ft},ht=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},mt=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;ut(t,n,r);rt((function(){return ct(t,n,r)}));return null},gt=function e(t,n){var i,o,a=t.__emotion_real===t,s=a&&t.__emotion_base||t;void 0!==n&&(i=n.label,o=n.target);var l=ht(t,n,a),u=l||pt(s),c=!u("as");return function(){var d=arguments,f=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&f.push("label:"+i+";"),null==d[0]||void 0===d[0].raw)f.push.apply(f,d);else{0,f.push(d[0][0]);for(var p=d.length,h=1;h<p;h++)f.push(d[h],d[0][h])}var m=at((function(e,t,n){var i=c&&e.as||s,a="",d=[],p=e;if(null==e.theme){for(var h in p={},e)p[h]=e[h];p.theme=(0,r.useContext)(st)}"string"===typeof e.className?a=lt(t.registered,d,e.className):null!=e.className&&(a=e.className+" ");var m=tt(f.concat(d),t.registered,p);a+=t.key+"-"+m.name,void 0!==o&&(a+=" "+o);var g=c&&void 0===l?pt(i):u,v={};for(var y in e)c&&"as"===y||g(y)&&(v[y]=e[y]);return v.className=a,v.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(mt,{cache:t,serialized:m,isStringTag:"string"===typeof i}),(0,r.createElement)(i,v))}));return m.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=f,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(t,r){return e(t,E({},n,r,{shouldForwardProp:ht(m,r,!0)})).apply(void 0,f)},m}},vt=gt.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){vt[e]=vt(e)}));var yt=vt;function bt(e,t){return yt(e,t)}var xt=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function wt(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function _t(e){if(!wt(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=_t(e[n])})),t}function St(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?E({},e):e;return wt(e)&&wt(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(wt(t[i])&&i in e&&wt(e[i])?r[i]=St(e[i],t[i],n):n.clone?r[i]=wt(t[i])?_t(t[i]):t[i]:r[i]=t[i])})),r}var Ct=["values","unit","step"];function Et(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,o=e.step,a=void 0===o?5:o,s=k(e,Ct),l=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return E({},e,p({},t.key,t.val))}),{})}(n),u=Object.keys(l);function c(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-a/100).concat(i,")")}function f(e,t){var r=u.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[u[r]]?n[u[r]]:t)-a/100).concat(i,")")}return E({keys:u,values:l,up:c,down:d,between:f,only:function(e){return u.indexOf(e)+1<u.length?f(e,u[u.indexOf(e)+1]):c(e)},not:function(e){var t=u.indexOf(e);return 0===t?c(u[1]):t===u.length-1?d(u[t]):f(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}var kt={borderRadius:4},Pt={xs:0,sm:600,md:900,lg:1200,xl:1536},Mt={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(Pt[e],"px)")}};function At(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||Mt;return t.reduce((function(e,r,o){return e[i.up(i.keys[o])]=n(t[o]),e}),{})}if("object"===typeof t){var o=r.breakpoints||Mt;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(o.values||Pt).indexOf(r)){e[o.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function Tt(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function Rt(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function It(e){var t,n=e.values,r=e.breakpoints,i=e.base||function(e,t){if("object"!==typeof e)return{};var n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((function(t,r){r<e.length&&(n[t]=!0)})):r.forEach((function(t){null!=e[t]&&(n[t]=!0)})),n}(n,r),o=Object.keys(i);return 0===o.length?n:o.reduce((function(e,r,i){return Array.isArray(n)?(e[r]=null!=n[i]?n[i]:n[t],t=i):"object"===typeof n?(e[r]=null!=n[r]?n[r]:n[t],t=r):e[r]=n,e}),{})}function Ot(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function Lt(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:Ot(e,n)||i,t&&(r=t(r,i,e)),r}var Dt=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,o=e.transform,a=function(e){if(null==e[t])return null;var n=e[t],a=Ot(e.theme,i)||{};return At(e,n,(function(e){var n=Lt(a,o,e);return e===n&&"string"===typeof e&&(n=Lt(a,o,"".concat(t).concat("default"===e?"":T(e)),e)),!1===r?n:p({},r,n)}))};return a.propTypes={},a.filterProps=[t],a};var Ft=function(e,t){return t?St(e,t,{clone:!1}):e};var Nt={m:"margin",p:"padding"},Bt={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},zt={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},jt=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!zt[e])return[e];e=zt[e]}var t=c(e.split(""),2),n=t[0],r=t[1],i=Nt[n],o=Bt[r]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]})),Ht=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ut=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Vt=[].concat(Ht,Ut);function Gt(e,t,n,r){var i,o=null!=(i=Ot(e,t,!1))?i:n;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function Wt(e){return Gt(e,"spacing",8)}function $t(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function qt(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=$t(t,n),e}),{})}}(jt(n),r);return At(e,e[n],i)}function Xt(e,t){var n=Wt(e.theme);return Object.keys(e).map((function(r){return qt(e,t,r,n)})).reduce(Ft,{})}function Kt(e){return Xt(e,Ht)}function Yt(e){return Xt(e,Ut)}function Zt(e){return Xt(e,Vt)}Kt.propTypes={},Kt.filterProps=Ht,Yt.propTypes={},Yt.filterProps=Ut,Zt.propTypes={},Zt.filterProps=Vt;function Qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Wt({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var Jt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?Ft(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function en(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var tn=Dt({prop:"border",themeKey:"borders",transform:en}),nn=Dt({prop:"borderTop",themeKey:"borders",transform:en}),rn=Dt({prop:"borderRight",themeKey:"borders",transform:en}),on=Dt({prop:"borderBottom",themeKey:"borders",transform:en}),an=Dt({prop:"borderLeft",themeKey:"borders",transform:en}),sn=Dt({prop:"borderColor",themeKey:"palette"}),ln=Dt({prop:"borderTopColor",themeKey:"palette"}),un=Dt({prop:"borderRightColor",themeKey:"palette"}),cn=Dt({prop:"borderBottomColor",themeKey:"palette"}),dn=Dt({prop:"borderLeftColor",themeKey:"palette"}),fn=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=Gt(e.theme,"shape.borderRadius",4);return At(e,e.borderRadius,(function(e){return{borderRadius:$t(t,e)}}))}return null};fn.propTypes={},fn.filterProps=["borderRadius"];Jt(tn,nn,rn,on,an,sn,ln,un,cn,dn,fn);var pn=function(e){if(void 0!==e.gap&&null!==e.gap){var t=Gt(e.theme,"spacing",8);return At(e,e.gap,(function(e){return{gap:$t(t,e)}}))}return null};pn.propTypes={},pn.filterProps=["gap"];var hn=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=Gt(e.theme,"spacing",8);return At(e,e.columnGap,(function(e){return{columnGap:$t(t,e)}}))}return null};hn.propTypes={},hn.filterProps=["columnGap"];var mn=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=Gt(e.theme,"spacing",8);return At(e,e.rowGap,(function(e){return{rowGap:$t(t,e)}}))}return null};mn.propTypes={},mn.filterProps=["rowGap"];Jt(pn,hn,mn,Dt({prop:"gridColumn"}),Dt({prop:"gridRow"}),Dt({prop:"gridAutoFlow"}),Dt({prop:"gridAutoColumns"}),Dt({prop:"gridAutoRows"}),Dt({prop:"gridTemplateColumns"}),Dt({prop:"gridTemplateRows"}),Dt({prop:"gridTemplateAreas"}),Dt({prop:"gridArea"}));function gn(e,t){return"grey"===t?t:e}Jt(Dt({prop:"color",themeKey:"palette",transform:gn}),Dt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:gn}),Dt({prop:"backgroundColor",themeKey:"palette",transform:gn}));function vn(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var yn=Dt({prop:"width",transform:vn}),bn=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return At(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||Pt[t]||vn(t)}}))}return null};bn.filterProps=["maxWidth"];var xn=Dt({prop:"minWidth",transform:vn}),wn=Dt({prop:"height",transform:vn}),_n=Dt({prop:"maxHeight",transform:vn}),Sn=Dt({prop:"minHeight",transform:vn}),Cn=(Dt({prop:"size",cssProperty:"width",transform:vn}),Dt({prop:"size",cssProperty:"height",transform:vn}),Jt(yn,bn,xn,wn,_n,Sn,Dt({prop:"boxSizing"})),{border:{themeKey:"borders",transform:en},borderTop:{themeKey:"borders",transform:en},borderRight:{themeKey:"borders",transform:en},borderBottom:{themeKey:"borders",transform:en},borderLeft:{themeKey:"borders",transform:en},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:fn},color:{themeKey:"palette",transform:gn},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:gn},backgroundColor:{themeKey:"palette",transform:gn},p:{style:Yt},pt:{style:Yt},pr:{style:Yt},pb:{style:Yt},pl:{style:Yt},px:{style:Yt},py:{style:Yt},padding:{style:Yt},paddingTop:{style:Yt},paddingRight:{style:Yt},paddingBottom:{style:Yt},paddingLeft:{style:Yt},paddingX:{style:Yt},paddingY:{style:Yt},paddingInline:{style:Yt},paddingInlineStart:{style:Yt},paddingInlineEnd:{style:Yt},paddingBlock:{style:Yt},paddingBlockStart:{style:Yt},paddingBlockEnd:{style:Yt},m:{style:Kt},mt:{style:Kt},mr:{style:Kt},mb:{style:Kt},ml:{style:Kt},mx:{style:Kt},my:{style:Kt},margin:{style:Kt},marginTop:{style:Kt},marginRight:{style:Kt},marginBottom:{style:Kt},marginLeft:{style:Kt},marginX:{style:Kt},marginY:{style:Kt},marginInline:{style:Kt},marginInlineStart:{style:Kt},marginInlineEnd:{style:Kt},marginBlock:{style:Kt},marginBlockStart:{style:Kt},marginBlockEnd:{style:Kt},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:pn},rowGap:{style:mn},columnGap:{style:hn},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:vn},maxWidth:{style:bn},minWidth:{transform:vn},height:{transform:vn},maxHeight:{transform:vn},minHeight:{transform:vn},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});var En=function(){function e(e,t,n,r){var i,o=(p(i={},e,t),p(i,"theme",n),i),a=r[e];if(!a)return p({},e,t);var s=a.cssProperty,l=void 0===s?e:s,u=a.themeKey,c=a.transform,d=a.style;if(null==t)return null;var f=Ot(n,u)||{};if(d)return d(o);return At(o,t,(function(t){var n=Lt(f,c,t);return t===n&&"string"===typeof t&&(n=Lt(f,c,"".concat(e).concat("default"===t?"":T(t)),t)),!1===l?n:p({},l,n)}))}return function t(n){var r,i=n||{},o=i.sx,a=i.theme,s=void 0===a?{}:a;if(!o)return null;var l=null!=(r=s.unstable_sxConfig)?r:Cn;function u(n){var r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;var i=Tt(s.breakpoints),o=Object.keys(i),a=i;return Object.keys(r).forEach((function(n){var i,o,u=(i=r[n],o=s,"function"===typeof i?i(o):i);if(null!==u&&void 0!==u)if("object"===typeof u)if(l[n])a=Ft(a,e(n,u,s,l));else{var c=At({theme:s},u,(function(e){return p({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(c,u)?a=Ft(a,c):a[n]=t({sx:u,theme:s})}else a=Ft(a,e(n,u,s,l))})),Rt(o,a)}return Array.isArray(o)?o.map(u):u(o)}}();En.filterProps=["sx"];var kn=En,Pn=["breakpoints","palette","spacing","shape"];var Mn=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,o=e.spacing,a=e.shape,s=void 0===a?{}:a,l=k(e,Pn),u=Et(n),c=Qt(o),d=St({breakpoints:u,direction:"ltr",components:{},palette:E({mode:"light"},i),spacing:c,shape:E({},kt,s)},l),f=arguments.length,p=new Array(f>1?f-1:0),h=1;h<f;h++)p[h-1]=arguments[h];return(d=p.reduce((function(e,t){return St(e,t)}),d)).unstable_sxConfig=E({},Cn,null==l?void 0:l.unstable_sxConfig),d.unstable_sx=function(e){return kn({sx:e,theme:this})},d},An=["variant"];function Tn(e){return 0===e.length}function Rn(e){var t=e.variant,n=k(e,An),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?Tn(r)?e[t]:T(e[t]):"".concat(Tn(r)?t:T(t)).concat(T(e[t].toString()))})),r}var In=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],On=["theme"],Ln=["theme"];function Dn(e){return 0===Object.keys(e).length}function Fn(e){return"string"===typeof e&&e.charCodeAt(0)>96}var Nn=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},Bn=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=Rn(e.props);r[t]=e.style})),r},zn=function(e,t,n,r){var i,o,a=e.ownerState,s=void 0===a?{}:a,l=[],u=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&l.push(t[Rn(n.props)])})),l};function jn(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var Hn=Mn();function Un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?Hn:t,r=e.rootShouldForwardProp,i=void 0===r?jn:r,o=e.slotShouldForwardProp,a=void 0===o?jn:o,s=function(e){var t=Dn(e.theme)?n:e.theme;return kn(E({},e,{theme:t}))};return s.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xt(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var r,o=t.name,l=t.slot,u=t.skipVariantsResolver,d=t.skipSx,f=t.overridesResolver,p=k(t,In),h=void 0!==u?u:l&&"Root"!==l||!1,m=d||!1;var g=jn;"Root"===l?g=i:l?g=a:Fn(e)&&(g=void 0);var v=bt(e,E({shouldForwardProp:g,label:r},p)),y=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var a=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=k(t,On);return e(E({theme:Dn(r)?n:r},i))}:e})):[],l=e;o&&f&&a.push((function(e){var t=Dn(e.theme)?n:e.theme,r=Nn(o,t);if(r){var i={};return Object.entries(r).forEach((function(n){var r=c(n,2),o=r[0],a=r[1];i[o]="function"===typeof a?a(E({},e,{theme:t})):a})),f(e,i)}return null})),o&&!h&&a.push((function(e){var t=Dn(e.theme)?n:e.theme;return zn(e,Bn(o,t),t,o)})),m||a.push(s);var u=a.length-r.length;if(Array.isArray(e)&&u>0){var d=new Array(u).fill("");(l=[].concat(z(e),z(d))).raw=[].concat(z(e.raw),z(d))}else"function"===typeof e&&e.__emotion_real!==e&&(l=function(t){var r=t.theme,i=k(t,Ln);return e(E({theme:Dn(r)?n:r},i))});var p=v.apply(void 0,[l].concat(z(a)));return p};return v.withConfig&&(y.withConfig=v.withConfig),y}}function Vn(e,t){var n;return E({toolbar:(n={minHeight:56},p(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),p(n,e.up("sm"),{minHeight:64}),n)},t)}function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Wn(e){if(e.type)return e;if("#"===e.charAt(0))return Wn(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(A(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(A(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function $n(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function qn(e){var t="hsl"===(e=Wn(e)).type||"hsla"===e.type?Wn(function(e){var t=(e=Wn(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),$n({type:s,values:l})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Xn(e,t){return e=Wn(e),t=Gn(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,$n(e)}function Kn(e,t){if(e=Wn(e),t=Gn(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return $n(e)}function Yn(e,t){if(e=Wn(e),t=Gn(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return $n(e)}var Zn={black:"#000",white:"#fff"},Qn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Jn={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},er={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},tr={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},nr={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},rr={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ir={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},or=["mode","contrastThreshold","tonalOffset"],ar={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Zn.white,default:Zn.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},sr={text:{primary:Zn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Zn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function lr(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Yn(e.main,i):"dark"===t&&(e.dark=Kn(e.main,o)))}function ur(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,o=e.tonalOffset,a=void 0===o?.2:o,s=k(e,or),l=e.primary||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:nr[200],light:nr[50],dark:nr[400]}:{main:nr[700],light:nr[400],dark:nr[800]}}(n),u=e.secondary||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:Jn[200],light:Jn[50],dark:Jn[400]}:{main:Jn[500],light:Jn[300],dark:Jn[700]}}(n),c=e.error||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:er[500],light:er[300],dark:er[700]}:{main:er[700],light:er[400],dark:er[800]}}(n),d=e.info||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:rr[400],light:rr[300],dark:rr[700]}:{main:rr[700],light:rr[500],dark:rr[900]}}(n),f=e.success||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:ir[400],light:ir[300],dark:ir[700]}:{main:ir[800],light:ir[500],dark:ir[900]}}(n),p=e.warning||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:tr[400],light:tr[300],dark:tr[700]}:{main:"#ed6c02",light:tr[500],dark:tr[900]}}(n);function h(e){var t=function(e,t){var n=qn(e),r=qn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,sr.text.primary)>=i?sr.text.primary:ar.text.primary;return t}var m=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,o=e.lightShade,s=void 0===o?300:o,l=e.darkShade,u=void 0===l?700:l;if(!(t=E({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(A(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(A(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return lr(t,"light",s,a),lr(t,"dark",u,a),t.contrastText||(t.contrastText=h(t.main)),t},g={dark:sr,light:ar};return St(E({common:E({},Zn),mode:n,primary:m({color:l,name:"primary"}),secondary:m({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:c,name:"error"}),warning:m({color:p,name:"warning"}),info:m({color:d,name:"info"}),success:m({color:f,name:"success"}),grey:Qn,contrastThreshold:i,getContrastText:h,augmentColor:m,tonalOffset:a},g[n]),s)}var cr=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var dr={textTransform:"uppercase"},fr='"Roboto", "Helvetica", "Arial", sans-serif';function pr(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?fr:r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,l=void 0===s?300:s,u=n.fontWeightRegular,c=void 0===u?400:u,d=n.fontWeightMedium,f=void 0===d?500:d,p=n.fontWeightBold,h=void 0===p?700:p,m=n.htmlFontSize,g=void 0===m?16:m,v=n.allVariants,y=n.pxToRem,b=k(n,cr);var x=a/14,w=y||function(e){return"".concat(e/g*x,"rem")},_=function(e,t,n,r,o){return E({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===fr?{letterSpacing:"".concat((a=r/t,Math.round(1e5*a)/1e5),"em")}:{},o,v);var a},S={h1:_(l,96,1.167,-1.5),h2:_(l,60,1.2,-.5),h3:_(c,48,1.167,0),h4:_(c,34,1.235,.25),h5:_(c,24,1.334,0),h6:_(f,20,1.6,.15),subtitle1:_(c,16,1.75,.15),subtitle2:_(f,14,1.57,.1),body1:_(c,16,1.5,.15),body2:_(c,14,1.43,.15),button:_(f,14,1.75,.4,dr),caption:_(c,12,1.66,.4),overline:_(c,12,2.66,1,dr)};return St(E({htmlFontSize:g,pxToRem:w,fontFamily:i,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:f,fontWeightBold:h},S),b,{clone:!1})}function hr(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var mr=["none",hr(0,2,1,-1,0,1,1,0,0,1,3,0),hr(0,3,1,-2,0,2,2,0,0,1,5,0),hr(0,3,3,-2,0,3,4,0,0,1,8,0),hr(0,2,4,-1,0,4,5,0,0,1,10,0),hr(0,3,5,-1,0,5,8,0,0,1,14,0),hr(0,3,5,-1,0,6,10,0,0,1,18,0),hr(0,4,5,-2,0,7,10,1,0,2,16,1),hr(0,5,5,-3,0,8,10,1,0,3,14,2),hr(0,5,6,-3,0,9,12,1,0,3,16,2),hr(0,6,6,-3,0,10,14,1,0,4,18,3),hr(0,6,7,-4,0,11,15,1,0,4,20,3),hr(0,7,8,-4,0,12,17,2,0,5,22,4),hr(0,7,8,-4,0,13,19,2,0,5,24,4),hr(0,7,9,-4,0,14,21,2,0,5,26,4),hr(0,8,9,-5,0,15,22,2,0,6,28,5),hr(0,8,10,-5,0,16,24,2,0,6,30,5),hr(0,8,11,-5,0,17,26,2,0,6,32,5),hr(0,9,11,-5,0,18,28,2,0,7,34,6),hr(0,9,12,-6,0,19,29,2,0,7,36,6),hr(0,10,13,-6,0,20,31,3,0,8,38,7),hr(0,10,13,-6,0,21,33,3,0,8,40,7),hr(0,10,14,-6,0,22,35,3,0,8,42,7),hr(0,11,14,-7,0,23,36,3,0,9,44,8),hr(0,11,15,-7,0,24,38,3,0,9,46,8)],gr=["duration","easing","delay"],vr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},yr={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function br(e){return"".concat(Math.round(e),"ms")}function xr(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function wr(e){var t=E({},vr,e.easing),n=E({},yr,e.duration);return E({getAutoHeightDuration:xr,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,o=void 0===i?n.standard:i,a=r.easing,s=void 0===a?t.easeInOut:a,l=r.delay,u=void 0===l?0:l;k(r,gr);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:br(o)," ").concat(s," ").concat("string"===typeof u?u:br(u))})).join(",")}},e,{easing:t,duration:n})}var _r={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Sr=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,o=e.transitions,a=void 0===o?{}:o,s=e.typography,l=void 0===s?{}:s,u=k(e,Sr);if(e.vars)throw new Error(A(18));var c=ur(i),d=Mn(e),f=St(d,{mixins:Vn(d.breakpoints,n),palette:c,shadows:mr.slice(),typography:pr(c,l),transitions:wr(a),zIndex:E({},_r)});f=St(f,u);for(var p=arguments.length,h=new Array(p>1?p-1:0),m=1;m<p;m++)h[m-1]=arguments[m];return(f=h.reduce((function(e,t){return St(e,t)}),f)).unstable_sxConfig=E({},Cn,null==u?void 0:u.unstable_sxConfig),f.unstable_sx=function(e){return kn({sx:e,theme:this})},f}var Er=Cr,kr=Er(),Pr=function(e){return jn(e)&&"classes"!==e},Mr=jn,Ar=Un({defaultTheme:kr,rootShouldForwardProp:Pr}),Tr=function(e){return e},Rr=function(){var e=Tr;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=Tr}}}(),Ir={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Or(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=Ir[t];return r?"".concat(n,"-").concat(r):"".concat(Rr.generate(e),"-").concat(t)}function Lr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=Or(e,t,n)})),r}function Dr(e){return Or("MuiDataGrid",e)}var Fr=Lr("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","autoHeight","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLinkOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","root","root--densityStandard","root--densityComfortable","root--densityCompact","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]),Nr=Ar("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:function(e,t){return[p({},"&.".concat(Fr.autoHeight),t.autoHeight),p({},"&.".concat(Fr.aggregationColumnHeader),t.aggregationColumnHeader),p({},"&.".concat(Fr["aggregationColumnHeader--alignLeft"]),t["aggregationColumnHeader--alignLeft"]),p({},"&.".concat(Fr["aggregationColumnHeader--alignCenter"]),t["aggregationColumnHeader--alignCenter"]),p({},"&.".concat(Fr["aggregationColumnHeader--alignRight"]),t["aggregationColumnHeader--alignRight"]),p({},"&.".concat(Fr.aggregationColumnHeaderLabel),t.aggregationColumnHeaderLabel),p({},"& .".concat(Fr.editBooleanCell),t.editBooleanCell),p({},"& .".concat(Fr["cell--editing"]),t["cell--editing"]),p({},"& .".concat(Fr["cell--textCenter"]),t["cell--textCenter"]),p({},"& .".concat(Fr["cell--textLeft"]),t["cell--textLeft"]),p({},"& .".concat(Fr["cell--textRight"]),t["cell--textRight"]),p({},"& .".concat(Fr["cell--withRenderer"]),t["cell--withRenderer"]),p({},"& .".concat(Fr.cell),t.cell),p({},"& .".concat(Fr.cellContent),t.cellContent),p({},"& .".concat(Fr.cellCheckbox),t.cellCheckbox),p({},"& .".concat(Fr.cellSkeleton),t.cellSkeleton),p({},"& .".concat(Fr.checkboxInput),t.checkboxInput),p({},"& .".concat(Fr["columnHeader--alignCenter"]),t["columnHeader--alignCenter"]),p({},"& .".concat(Fr["columnHeader--alignLeft"]),t["columnHeader--alignLeft"]),p({},"& .".concat(Fr["columnHeader--alignRight"]),t["columnHeader--alignRight"]),p({},"& .".concat(Fr["columnHeader--dragging"]),t["columnHeader--dragging"]),p({},"& .".concat(Fr["columnHeader--moving"]),t["columnHeader--moving"]),p({},"& .".concat(Fr["columnHeader--numeric"]),t["columnHeader--numeric"]),p({},"& .".concat(Fr["columnHeader--sortable"]),t["columnHeader--sortable"]),p({},"& .".concat(Fr["columnHeader--sorted"]),t["columnHeader--sorted"]),p({},"& .".concat(Fr.columnHeader),t.columnHeader),p({},"& .".concat(Fr.columnHeaderCheckbox),t.columnHeaderCheckbox),p({},"& .".concat(Fr.columnHeaderDraggableContainer),t.columnHeaderDraggableContainer),p({},"& .".concat(Fr.columnHeaderTitleContainer),t.columnHeaderTitleContainer),p({},"& .".concat(Fr["columnSeparator--resizable"]),t["columnSeparator--resizable"]),p({},"& .".concat(Fr["columnSeparator--resizing"]),t["columnSeparator--resizing"]),p({},"& .".concat(Fr.columnSeparator),t.columnSeparator),p({},"& .".concat(Fr.filterIcon),t.filterIcon),p({},"& .".concat(Fr.iconSeparator),t.iconSeparator),p({},"& .".concat(Fr.menuIcon),t.menuIcon),p({},"& .".concat(Fr.menuIconButton),t.menuIconButton),p({},"& .".concat(Fr.menuOpen),t.menuOpen),p({},"& .".concat(Fr.menuList),t.menuList),p({},"& .".concat(Fr["row--editable"]),t["row--editable"]),p({},"& .".concat(Fr["row--editing"]),t["row--editing"]),p({},"& .".concat(Fr["row--dragging"]),t["row--dragging"]),p({},"& .".concat(Fr.row),t.row),p({},"& .".concat(Fr.rowReorderCellPlaceholder),t.rowReorderCellPlaceholder),p({},"& .".concat(Fr.rowReorderCell),t.rowReorderCell),p({},"& .".concat(Fr["rowReorderCell--draggable"]),t["rowReorderCell--draggable"]),p({},"& .".concat(Fr.sortIcon),t.sortIcon),p({},"& .".concat(Fr.withBorder),t.withBorder),p({},"& .".concat(Fr.treeDataGroupingCell),t.treeDataGroupingCell),p({},"& .".concat(Fr.treeDataGroupingCellToggle),t.treeDataGroupingCellToggle),p({},"& .".concat(Fr.detailPanelToggleCell),t.detailPanelToggleCell),p({},"& .".concat(Fr["detailPanelToggleCell--expanded"]),t["detailPanelToggleCell--expanded"]),t.root]}})((function(e){var t,n,r,i=e.theme,o="light"===i.palette.mode?Yn(Xn(i.palette.divider,1),.88):Kn(Xn(i.palette.divider,1),.68);return E({flex:1,boxSizing:"border-box",position:"relative",border:"1px solid ".concat(o),borderRadius:i.shape.borderRadius,color:i.palette.text.primary},i.typography.body2,(p(r={outline:"none",height:"100%",display:"flex",flexDirection:"column"},"&.".concat(Fr.autoHeight),p({height:"auto"},"& .".concat(Fr["row--lastVisible"]," .").concat(Fr.cell),{borderBottomColor:"transparent"})),p(r,"& .".concat(Fr["virtualScrollerContent--overflowed"]," .").concat(Fr["row--lastVisible"]," .").concat(Fr.cell),{borderBottomColor:"transparent"}),p(r,"& .".concat(Fr.columnHeader,", & .").concat(Fr.cell),{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"}),p(r,"& .".concat(Fr.columnHeader,":focus-within, & .").concat(Fr.cell,":focus-within"),{outline:"solid ".concat(Xn(i.palette.primary.main,.5)," 1px"),outlineWidth:1,outlineOffset:-1}),p(r,"& .".concat(Fr.columnHeader,":focus, & .").concat(Fr.cell,":focus"),{outline:"solid ".concat(i.palette.primary.main," 1px")}),p(r,"& .".concat(Fr.columnHeaderCheckbox,", & .").concat(Fr.cellCheckbox),{padding:0,justifyContent:"center",alignItems:"center"}),p(r,"& .".concat(Fr.columnHeader),{position:"relative",display:"flex",alignItems:"center"}),p(r,"& .".concat(Fr["columnHeader--sorted"]," .").concat(Fr.iconButtonContainer,", & .").concat(Fr["columnHeader--filtered"]," .").concat(Fr.iconButtonContainer),{visibility:"visible",width:"auto"}),p(r,"& .".concat(Fr.columnHeader,":not(.").concat(Fr["columnHeader--sorted"],") .").concat(Fr.sortIcon),{opacity:0,transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.shorter})}),p(r,"& .".concat(Fr.columnHeader,":not(.").concat(Fr["columnHeader--sorted"],"):hover .").concat(Fr.sortIcon),{opacity:.5}),p(r,"& .".concat(Fr.columnHeaderTitleContainer),{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"}),p(r,"& .".concat(Fr.columnHeaderTitleContainerContent),{overflow:"hidden",display:"flex",alignItems:"center"}),p(r,"& .".concat(Fr["columnHeader--filledGroup"]," .").concat(Fr.columnHeaderTitleContainer),{borderBottom:"solid ".concat(o," 1px"),boxSizing:"border-box"}),p(r,"& .".concat(Fr["columnHeader--filledGroup"],".").concat(Fr["columnHeader--showColumnBorder"]," .").concat(Fr.columnHeaderTitleContainer),{borderBottom:"none"}),p(r,"& .".concat(Fr["columnHeader--filledGroup"],".").concat(Fr["columnHeader--showColumnBorder"]),{borderBottom:"solid ".concat(o," 1px"),boxSizing:"border-box"}),p(r,"& .".concat(Fr.sortIcon,", & .").concat(Fr.filterIcon),{fontSize:"inherit"}),p(r,"& .".concat(Fr["columnHeader--sortable"]),{cursor:"pointer"}),p(r,"& .".concat(Fr["columnHeader--alignCenter"]," .").concat(Fr.columnHeaderTitleContainer),{justifyContent:"center"}),p(r,"& .".concat(Fr["columnHeader--alignRight"]," .").concat(Fr.columnHeaderDraggableContainer,", & .").concat(Fr["columnHeader--alignRight"]," .").concat(Fr.columnHeaderTitleContainer),{flexDirection:"row-reverse"}),p(r,"& .".concat(Fr["columnHeader--alignCenter"]," .").concat(Fr.menuIcon,", & .").concat(Fr["columnHeader--alignRight"]," .").concat(Fr.menuIcon),{marginRight:"auto",marginLeft:-6}),p(r,"& .".concat(Fr["columnHeader--alignRight"]," .").concat(Fr.menuIcon,", & .").concat(Fr["columnHeader--alignRight"]," .").concat(Fr.menuIcon),{marginRight:"auto",marginLeft:-10}),p(r,"& .".concat(Fr["columnHeader--moving"]),{backgroundColor:i.palette.action.hover}),p(r,"& .".concat(Fr.columnSeparator),{position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:o}),p(r,"& .".concat(Fr["columnSeparator--sideLeft"]),{left:-12}),p(r,"& .".concat(Fr["columnSeparator--sideRight"]),{right:-12}),p(r,"& .".concat(Fr["columnSeparator--resizable"]),(p(t={cursor:"col-resize",touchAction:"none","&:hover":{color:i.palette.text.primary,"@media (hover: none)":{color:o}}},"&.".concat(Fr["columnSeparator--resizing"]),{color:i.palette.text.primary}),p(t,"& svg",{pointerEvents:"none"}),t)),p(r,"& .".concat(Fr.iconSeparator),{color:"inherit"}),p(r,"& .".concat(Fr.menuIcon),{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"}),p(r,"& .".concat(Fr.columnHeader,":hover"),(p(n={},"& .".concat(Fr.iconButtonContainer),{visibility:"visible",width:"auto"}),p(n,"& .".concat(Fr.menuIcon),{width:"auto",visibility:"visible"}),n)),p(r,".".concat(Fr.menuOpen),{visibility:"visible",width:"auto"}),p(r,"& .".concat(Fr.row),{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:i.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:Xn(i.palette.primary.main,i.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:Xn(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:Xn(i.palette.primary.main,i.palette.action.selectedOpacity)}}}}),p(r,"& .".concat(Fr.cell),{display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(o)}),p(r,"& .".concat(Fr.row,":not(.").concat(Fr["row--dynamicHeight"],") > .").concat(Fr.cell),{overflow:"hidden",whiteSpace:"nowrap"}),p(r,"& .".concat(Fr.cellContent),{overflow:"hidden",textOverflow:"ellipsis"}),p(r,"& .".concat(Fr.cell,".").concat(Fr["cell--editing"]),{padding:1,display:"flex",boxShadow:i.shadows[2],backgroundColor:i.palette.background.paper,"&:focus-within":{outline:"solid ".concat(i.palette.primary.main," 1px"),outlineOffset:"-1px"}}),p(r,"& .".concat(Fr["row--editing"]),{boxShadow:i.shadows[2]}),p(r,"& .".concat(Fr["row--editing"]," .").concat(Fr.cell),{boxShadow:i.shadows[0],backgroundColor:i.palette.background.paper}),p(r,"& .".concat(Fr.editBooleanCell),{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"}),p(r,"& .".concat(Fr.booleanCell,'[data-value="true"]'),{color:i.palette.text.secondary}),p(r,"& .".concat(Fr.booleanCell,'[data-value="false"]'),{color:i.palette.text.disabled}),p(r,"& .".concat(Fr.actionsCell),{display:"inline-flex",alignItems:"center",gridGap:i.spacing(1)}),p(r,"& .".concat(Fr.rowReorderCell),{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:i.palette.action.disabledOpacity}),p(r,"& .".concat(Fr["rowReorderCell--draggable"]),{cursor:"move",opacity:1}),p(r,"& .".concat(Fr.rowReorderCellContainer),{padding:0,alignItems:"stretch"}),p(r,"& .".concat(Fr.withBorder),{borderRight:"1px solid ".concat(o)}),p(r,"& .".concat(Fr["cell--textLeft"]),{justifyContent:"flex-start"}),p(r,"& .".concat(Fr["cell--textRight"]),{justifyContent:"flex-end"}),p(r,"& .".concat(Fr["cell--textCenter"]),{justifyContent:"center"}),p(r,"& .".concat(Fr.columnHeaderDraggableContainer),{display:"flex",width:"100%",height:"100%"}),p(r,"& .".concat(Fr.rowReorderCellPlaceholder),{display:"none"}),p(r,"& .".concat(Fr["columnHeader--dragging"],", & .").concat(Fr["row--dragging"]),{background:i.palette.background.paper,padding:"0 12px",borderRadius:i.shape.borderRadius,opacity:i.palette.action.disabledOpacity}),p(r,"& .".concat(Fr["row--dragging"]),p({background:i.palette.background.paper,padding:"0 12px",borderRadius:i.shape.borderRadius,opacity:i.palette.action.disabledOpacity},"& .".concat(Fr.rowReorderCellPlaceholder),{display:"flex"})),p(r,"& .".concat(Fr.treeDataGroupingCell),{display:"flex",alignItems:"center",width:"100%"}),p(r,"& .".concat(Fr.treeDataGroupingCellToggle),{flex:"0 0 28px",alignSelf:"stretch",marginRight:i.spacing(2)}),p(r,"& .".concat(Fr.groupingCriteriaCell),{display:"flex",alignItems:"center",width:"100%"}),p(r,"& .".concat(Fr.groupingCriteriaCellToggle),{flex:"0 0 28px",alignSelf:"stretch",marginRight:i.spacing(2)}),r))})),Br="NOT_FOUND";var zr=function(e,t){return e===t};function jr(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,i=void 0===r?zr:r,o=n.maxSize,a=void 0===o?1:o,s=n.resultEqualityCheck,l=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(i),u=1===a?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:Br},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(l):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return Br}return{get:r,put:function(t,i){r(t)===Br&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(a,l);function c(){var t=u.get(arguments);if(t===Br){if(t=e.apply(null,arguments),s){var n=u.getEntries(),r=n.find((function(e){return s(e.value,t)}));r&&(t=r.value)}u.put(arguments,t)}return t}return c.clearCache=function(){return u.clear()},c}function Hr(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function Ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o,a=0,s={memoizeOptions:void 0},l=r.pop();if("object"===typeof l&&(s=l,l=r.pop()),"function"!==typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=s,c=u.memoizeOptions,d=void 0===c?n:c,f=Array.isArray(d)?d:[d],p=Hr(r),h=e.apply(void 0,[function(){return a++,l.apply(null,arguments)}].concat(f)),m=e((function(){for(var e=[],t=p.length,n=0;n<t;n++)e.push(p[n].apply(null,arguments));return o=h.apply(null,e)}));return Object.assign(m,{resultFunc:l,memoizedResultFunc:h,dependencies:p,lastResult:function(){return o},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),m};return i}var Vr=Ur(jr),Gr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",n=!1,r=Array.isArray(e)?e.join("\n"):e;return function(){n||(n=!0,"error"===t?console.error(r):console.warn(r))}},Wr=function(e,t){return e},$r={cache:null},qr=(Gr(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g `mySelector(state, apiRef.current.instanceId)`."]),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null===$r.cache&&($r.cache={});var r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=!!i.current,s=a?i.current.instanceId:null!=o?o:"default",l=a?i.current.state:i;null===$r.cache&&($r.cache={});var u=$r.cache;if(u[s]&&u[s].get(t))return u[s].get(t)(l,s);var c=Vr.apply(void 0,t);return u[s]||(u[s]=new Map),u[s].set(t,c),c(l,s)};return r.acceptsApiRef=!0,r}),Xr=function(e){return e.columns},Kr=qr(Xr,(function(e){return e.all})),Yr=qr(Xr,(function(e){return e.lookup})),Zr=qr(Kr,Yr,(function(e,t){return e.map((function(e){return t[e]}))})),Qr=qr(Xr,(function(e){return e.columnVisibilityModel})),Jr=qr(Zr,Qr,(function(e,t){return e.filter((function(e){return!1!==t[e.field]}))})),ei=(qr(Jr,(function(e){return e.map((function(e){return e.field}))})),qr(Jr,(function(e){for(var t=[],n=0,r=0;r<e.length;r+=1)t.push(n),n+=e[r].computedWidth;return t}))),ti=qr(Jr,ei,(function(e,t){var n=e.length;return 0===n?0:t[n-1]+e[n-1].computedWidth})),ni=qr(Zr,(function(e){return e.filter((function(e){return e.filterable}))})),ri=qr(Zr,(function(e){return e.reduce((function(e,t){return t.filterable&&(e[t.field]=t),e}),{})})),ii=(Wr(Kr),Wr(Zr),Wr(Jr),Wr(ni),Wr(qr(ni,(function(e){return e.map((function(e){return e.field}))}))),Wr(qr(Jr,(function(e){return e.length}))),Wr(qr(ei,ti,(function(e,t){return{totalWidth:t,positions:e}}))));Gr(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);var oi=function(e,t){return function(e){return e.acceptsApiRef}(t)?t(e):t(e.current.state)},ai=r.createContext(void 0);function si(){var e=r.useContext(ai);if(void 0===e)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join("\n"));return e}var li=r.createContext(void 0);var ui=function(){var e=r.useContext(li);if(!e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e},ci=function(e){return e.density},di=qr(ci,(function(e){return e.value})),fi=qr(ci,(function(e){return e.rowHeight})),pi=qr(ci,(function(e){return e.headerHeight})),hi=qr(ci,(function(e){return e.headerGroupingMaxDepth})),mi=qr(ci,(function(e){return e.factor})),gi=qr(ci,(function(e){return e.headerHeight*(1+e.headerGroupingMaxDepth)})),vi=function(e){return e.rows},yi=qr(vi,(function(e){return e.totalRowCount})),bi=qr(vi,(function(e){return e.loading})),xi=qr(vi,(function(e){return e.totalTopLevelRowCount})),wi=qr(vi,(function(e){return e.idRowsLookup})),_i=qr(vi,(function(e){return e.idToIdLookup})),Si=qr(vi,(function(e){return e.tree})),Ci=qr(vi,(function(e){return e.groupingName})),Ei=qr(vi,(function(e){return e.treeDepth})),ki=qr(vi,(function(e){return e.ids})),Pi=qr(vi,(function(e){return null==e?void 0:e.additionalRowGroups})),Mi=qr(Pi,(function(e){return null==e?void 0:e.pinnedRows})),Ai=qr(Mi,(function(e){var t,n;return((null==e||null==(t=e.top)?void 0:t.length)||0)+((null==e||null==(n=e.bottom)?void 0:n.length)||0)})),Ti=["children","className"],Ri=r.forwardRef((function(e,t){var n=ui(),i=e.children,o=e.className,a=k(e,Ti),s=si(),l=oi(s,Jr),u=oi(s,yi),d=oi(s,di),f=oi(s,hi),p=r.useRef(null),h=L(p,t),m=oi(s,Ai),g=function(e){var t=e.autoHeight,n=e.density,r=e.classes;return N({root:["root",t&&"autoHeight","root--density".concat(R(n))]},Dr,r)}({density:d,classes:n.classes,autoHeight:n.autoHeight});s.current.rootElementRef=p;var v=c(r.useState(!1),2),y=v[0],b=v[1];return F((function(){b(!0)}),[]),F((function(){y&&s.current.unstable_updateGridDimensionsRef()}),[s,y]),y?(0,_.jsx)(Nr,E({ref:h,className:M(o,g.root),role:"grid","aria-colcount":l.length,"aria-rowcount":f+1+m+u,"aria-multiselectable":!n.disableMultipleSelection,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"]},a,{children:i})):null}));function Ii(e,t){var n=r.useRef(null);if(n.current)return n.current;var i=e.current.getLogger(t);return n.current=i,i}var Oi=Ar("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:function(e,t){return t.main}})((function(){return{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"}}));function Li(e){var t=function(e){return N({root:["main"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(Oi,{className:t.root,children:e.children})}function Di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function Ni(e,t,n){return t&&Fi(e.prototype,t),n&&Fi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bi(e,t){return Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bi(e,t)}function zi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bi(e,t)}function ji(e){return ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ji(e)}function Hi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(rR){return!1}}function Ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vi(e,t){if(t&&("object"===(0,d.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ui(e)}function Gi(e){var t=Hi();return function(){var n,r=ji(e);if(t){var i=ji(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vi(this,n)}}var Wi=function(e){zi(n,e);var t=Gi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Ni(n,[{key:"componentDidCatch",value:function(e,t){this.props.api.current&&(this.logError(e),this.props.api.current.showError({error:e,errorInfo:t}))}},{key:"logError",value:function(e,t){this.props.logger.error("An unexpected error occurred. Error: ".concat(e&&e.message,". "),e,t)}},{key:"render",value:function(){var e;return this.props.hasError||null!=(e=this.state)&&e.hasError?this.props.render(this.state):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(r.Component);function $i(e){var t=e.children,n=si(),r=Ii(n,"GridErrorHandler"),i=ui(),o=n.current.state.error;return(0,_.jsx)(Wi,{hasError:null!=o,api:n,logger:r,render:function(e){var t;return(0,_.jsx)(Li,{children:(0,_.jsx)(i.components.ErrorOverlay,E({},e,o,null==(t=i.componentsProps)?void 0:t.errorOverlay))})},children:t})}function qi(){var e,t=si(),n=ui(),i=r.useRef(null);return t.current.headerRef=i,(0,_.jsx)("div",{ref:i,children:(0,_.jsx)(n.components.Header,E({},null==(e=n.componentsProps)?void 0:e.header))})}function Xi(e){var t=r.useRef(e);return D((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}var Ki=Xi;function Yi(e){return e&&e.ownerDocument||document}function Zi(e){return Yi(e).defaultView||window}var Qi=Zi;function Ji(e,t){var n=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},r=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var r=this;n(this),this.__resizeRAF__&&t.cancelAnimationFrame(this.__resizeRAF__),this.__resizeRAF__=t.requestAnimationFrame((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(r)&&(r.__resizeLast__.width=r.offsetWidth,r.__resizeLast__.height=r.offsetHeight,r.__resizeListeners__.forEach((function(t){t.call(r,e)})))}))}},i=!1,o="",a="animationstart",s="Webkit Moz O ms".split(" "),l="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),u=document.createElement("fakeelement");if(void 0!==u.style.animationName&&(i=!0),!1===i)for(var c=0;c<s.length;c++)if(void 0!==u.style[s[c]+"AnimationName"]){o="-"+s[c].toLowerCase()+"-",a=l[c],i=!0;break}var d="resizeanim",f="@"+o+"keyframes "+d+" { from { opacity: 0; } to { opacity: 0; } } ",p=o+"animation: 1ms "+d+"; ";return{addResizeListener:function(i,o){if(!i.__resizeTriggers__){var s=i.ownerDocument,l=t.getComputedStyle(i);l&&"static"==l.position&&(i.style.position="relative"),function(t){if(!t.getElementById("muiDetectElementResize")){var n=(f||"")+".Mui-resizeTriggers { "+(p||"")+'visibility: hidden; opacity: 0; } .Mui-resizeTriggers, .Mui-resizeTriggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .Mui-resizeTriggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="muiDetectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(t.createTextNode(n)),r.appendChild(i)}}(s),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=s.createElement("div")).className="Mui-resizeTriggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),n(i),i.addEventListener("scroll",r,!0),a&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName==d&&n(i)},i.__resizeTriggers__.addEventListener(a,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(o)},removeResizeListener:function(e,t){if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",r,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(a,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(rR){}}}}}var eo=["children","defaultHeight","defaultWidth","disableHeight","disableWidth","nonce","onResize","style"],to=r.forwardRef((function(e,t){var n=e.children,i=e.defaultHeight,o=void 0===i?null:i,a=e.defaultWidth,s=void 0===a?null:a,l=e.disableHeight,u=void 0!==l&&l,d=e.disableWidth,f=void 0!==d&&d,p=e.nonce,h=e.onResize,m=e.style,g=k(e,eo),v=c(r.useState({height:o,width:s}),2),y=v[0],b=v[1],x=r.useRef(null),w=r.useRef(null),S=Ki((function(){if(w.current){var e=w.current.offsetHeight||0,t=w.current.offsetWidth||0,n=Qi(w.current).getComputedStyle(w.current),r=parseInt(n.paddingLeft,10)||0,i=parseInt(n.paddingRight,10)||0,o=e-(parseInt(n.paddingTop,10)||0)-(parseInt(n.paddingBottom,10)||0),a=t-r-i;(!u&&y.height!==o||!f&&y.width!==a)&&(b({height:o,width:a}),h&&h({height:o,width:a}))}}));F((function(){var e;if(w.current=x.current.parentElement,w){var t=Qi(null!=(e=w.current)?e:void 0),n=Ji(p,t);return n.addResizeListener(w.current,S),S(),function(){n.removeResizeListener(w.current,S)}}}),[p,S]);var C={overflow:"visible"},P={};u||(C.height=0,P.height=y.height),f||(C.width=0,P.width=y.width);var M=L(x,t);return(0,_.jsx)("div",E({ref:M,style:E({},C,m)},g,{children:null===y.height&&null===y.width?null:n(P)}))})),no=function(e){return e.sorting},ro=qr(no,(function(e){return e.sortedRows})),io=qr(ro,wi,(function(e,t){return e.map((function(e){return{id:e,model:t[e]}}))})),oo=qr(no,(function(e){return e.sortModel})),ao=qr(oo,(function(e){var t=e.reduce((function(t,n,r){return t[n.field]={sortDirection:n.sort,sortIndex:e.length>1?r+1:void 0},t}),{});return t})),so=function(e){return e.filter},lo=qr(so,(function(e){return e.filterModel})),uo=qr(lo,(function(e){return e.quickFilterValues})),co=qr(so,(function(e){return e.visibleRowsLookup})),fo=qr(so,(function(e){return e.filteredRowsLookup})),po=(qr(so,(function(e){return e.filteredDescendantCountLookup})),qr(co,io,(function(e,t){return t.filter((function(t){return!1!==e[t.id]}))}))),ho=qr(po,(function(e){return e.map((function(e){return e.id}))})),mo=qr(fo,io,(function(e,t){return t.filter((function(t){return!1!==e[t.id]}))})),go=qr(mo,(function(e){return e.map((function(e){return e.id}))})),vo=qr(po,Si,Ei,(function(e,t,n){return n<2?e:e.filter((function(e){var n;return 0===(null==(n=t[e.id])?void 0:n.depth)}))})),yo=qr(po,(function(e){return e.length})),bo=qr(vo,(function(e){return e.length})),xo=qr(lo,Yr,(function(e,t){var n;return null==(n=e.items)?void 0:n.filter((function(e){var n,r;if(!e.columnField)return!1;var i=t[e.columnField];if(null==i||!i.filterOperators||0===(null==i||null==(n=i.filterOperators)?void 0:n.length))return!1;var o=i.filterOperators.find((function(t){return t.value===e.operatorValue}));return!!o&&(!o.InputComponent||null!=e.value&&""!==(null==(r=e.value)?void 0:r.toString()))}))})),wo=qr(xo,(function(e){return e.reduce((function(e,t){return e[t.columnField]?e[t.columnField].push(t):e[t.columnField]=[t],e}),{})}));function _o(e){var t,n,i=si(),o=ui(),a=oi(i,gi),s=c(r.useState((function(){var e,t;return null!=(e=null==(t=i.current.getRootDimensions())?void 0:t.viewportInnerSize)?e:null})),2),l=s[0],u=s[1],d=r.useCallback((function(){var e,t;u(null!=(e=null==(t=i.current.getRootDimensions())?void 0:t.viewportInnerSize)?e:null)}),[i]);F((function(){return i.current.subscribeEvent("viewportInnerSizeChange",d)}),[i,d]);var f=null!=(t=null==l?void 0:l.height)?t:0;return o.autoHeight&&0===f&&(f="auto"),l?(0,_.jsx)("div",E({style:{height:f,width:null!=(n=null==l?void 0:l.width)?n:0,position:"absolute",top:a,bottom:"auto"===f?0:void 0}},e)):null}function So(){var e,t,n,r=si(),i=ui(),o=oi(r,yi),a=oi(r,yo),s=oi(r,bi),l=!s&&o>0&&0===a,u=null;s||0!==o||(u=(0,_.jsx)(i.components.NoRowsOverlay,E({},null==(e=i.componentsProps)?void 0:e.noRowsOverlay)));l&&(u=(0,_.jsx)(i.components.NoResultsOverlay,E({},null==(t=i.componentsProps)?void 0:t.noResultsOverlay)));s&&(u=(0,_.jsx)(i.components.LoadingOverlay,E({},null==(n=i.componentsProps)?void 0:n.loadingOverlay)));return null===u?null:(0,_.jsx)(_o,{children:u})}function Co(e){var t=e.children,n=e.VirtualScrollerComponent,i=e.ColumnHeadersComponent,o=si(),a=ui(),s=oi(o,gi),l=c(r.useState(a.disableVirtualization),2),u=l[0],d=l[1],f=r.useCallback((function(){d(!0)}),[]),p=r.useCallback((function(){d(!1)}),[]);r.useEffect((function(){d(a.disableVirtualization)}),[a.disableVirtualization]),o.current.unstable_disableVirtualization=f,o.current.unstable_enableVirtualization=p;var h=r.useRef(null),m=r.useRef(null),g=r.useRef(null),v=r.useRef(null);o.current.columnHeadersContainerElementRef=m,o.current.columnHeadersElementRef=h,o.current.windowRef=g,o.current.renderingZoneRef=v;var y=r.useCallback((function(e){o.current.publishEvent("resize",e)}),[o]);return(0,_.jsxs)(Li,{children:[(0,_.jsx)(So,{}),(0,_.jsx)(i,{ref:m,innerRef:h}),(0,_.jsx)(to,{nonce:a.nonce,disableHeight:a.autoHeight,onResize:y,children:function(e){var t={width:e.width,height:e.height?e.height-s:"auto",marginTop:s};return(0,_.jsx)(n,{ref:g,style:t,disableVirtualization:u})}}),t]})}function Eo(){var e,t=si(),n=ui(),i=r.useRef(null);return t.current.footerRef=i,n.hideFooter?null:(0,_.jsx)("div",{ref:i,children:(0,_.jsx)(n.components.Footer,E({},null==(e=n.componentsProps)?void 0:e.footer))})}var ko=function(e){var t=e.apiRef,n=e.props,r=e.children;return(0,_.jsx)(li.Provider,{value:n,children:(0,_.jsx)(ai.Provider,{value:t,children:r})})};function Po(e){return"function"===typeof e}function Mo(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var Ao=function(e,t,n){return Math.max(t,Math.min(n,e))};function To(e,t){if(e===t)return!0;if(e&&t&&"object"===typeof e&&"object"===typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r+=1)if(!To(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(var i=Array.from(e.entries()),o=0;o<i.length;o+=1)if(!t.has(i[o][0]))return!1;for(var a=0;a<i.length;a+=1){var s=i[a];if(!To(s[1],t.get(s[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(var l=Array.from(e.entries()),u=0;u<l.length;u+=1)if(!t.has(l[u][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){var c=e.length;if(c!==t.length)return!1;for(var d=0;d<c;d+=1)if(e[d]!==t[d])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var f=Object.keys(e),p=f.length;if(p!==Object.keys(t).length)return!1;for(var h=0;h<p;h+=1)if(!Object.prototype.hasOwnProperty.call(t,f[h]))return!1;for(var m=0;m<p;m+=1){var g=f[m];if(!To(e[g],t[g]))return!1}return!0}return e!==e&&t!==t}function Ro(e,t,n){var r=function(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}}(e);return function(){return t+(n-t)*r()}}function Io(e){return"function"===typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}var Oo=function(){try{var e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(t){return!1}}()&&null!=window.localStorage.getItem("DEBUG"),Lo=function(){},Do={debug:Lo,info:Lo,warn:Lo,error:Lo},Fo=["debug","info","warn","error"];function No(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console,r=Fo.indexOf(t);if(-1===r)throw new Error("MUI: Log level ".concat(t," not recognized."));var i=Fo.reduce((function(t,i,o){return t[i]=o>=r?function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=r[0],s=r.slice(1);n[i].apply(n,["MUI: ".concat(e," - ").concat(a)].concat(z(s)))}:Lo,t}),{});return i}function Bo(e,t,n){var i=r.useRef(t),o=c(r.useState(Object.keys(t)),1)[0],a=r.useCallback((function(){e.current&&o.forEach((function(t){e.current.hasOwnProperty(t)||(e.current[t]=function(){var e;return(e=i.current)[t].apply(e,arguments)})}))}),[o,e]);r.useEffect((function(){i.current=t}),[t]),r.useEffect((function(){a()}),[a]),a()}var zo,jo=1e3,Ho=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jo;Di(this,e),this.timeouts=new Map,this.cleanupTimeout=jo,this.cleanupTimeout=t}return Ni(e,[{key:"register",value:function(e,t,n){var r=this;this.timeouts||(this.timeouts=new Map);var i=setTimeout((function(){"function"===typeof t&&t(),r.timeouts.delete(n.cleanupToken)}),this.cleanupTimeout);this.timeouts.set(n.cleanupToken,i)}},{key:"unregister",value:function(e){var t=this.timeouts.get(e.cleanupToken);t&&(this.timeouts.delete(e.cleanupToken),clearTimeout(t))}},{key:"reset",value:function(){var e=this;this.timeouts&&(this.timeouts.forEach((function(t,n){e.unregister({cleanupToken:n})})),this.timeouts=void 0)}}]),e}(),Uo=function(){function e(){Di(this,e),this.registry=new FinalizationRegistry((function(e){"function"===typeof e&&e()}))}return Ni(e,[{key:"register",value:function(e,t,n){this.registry.register(e,t,n)}},{key:"unregister",value:function(e){this.registry.unregister(e)}},{key:"reset",value:function(){}}]),e}();!function(e){e.DataGrid="DataGrid",e.DataGridPro="DataGridPro"}(zo||(zo={}));var Vo=Ni((function e(){Di(this,e)}));var Go={registry:null},Wo=function(e){var t=0;return function(n,i,o,a){null===e.registry&&(e.registry="undefined"!==typeof FinalizationRegistry?new Uo:new Ho);var s=c(r.useState(new Vo),1)[0],l=r.useRef(null),u=r.useRef();u.current=o;var d=r.useRef(null);if(!l.current&&u.current){l.current=n.current.subscribeEvent(i,(function(e,t,n){var r;t.defaultMuiPrevented||(null==(r=u.current)||r.call(u,e,t,n))}),a),t+=1,d.current={cleanupToken:t},e.registry.register(s,(function(){var e;null==(e=l.current)||e.call(l),l.current=null,d.current=null}),d.current)}else!u.current&&l.current&&(l.current(),l.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));r.useEffect((function(){if(!l.current&&u.current){l.current=n.current.subscribeEvent(i,(function(e,t,n){var r;t.defaultMuiPrevented||(null==(r=u.current)||r.call(u,e,t,n))}),a)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),function(){var e;null==(e=l.current)||e.call(l),l.current=null}}),[n,i,a])}}(Go),$o={isFirst:!0};function qo(e,t,n){Wo(e,t,n,$o)}var Xo=function(){function e(){Di(this,e),this.maxListeners=10,this.warnOnce=!1,this.events={}}return Ni(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.events[e];r||(r={highPriority:new Map,regular:new Map},this.events[e]=r),n.isFirst?r.highPriority.set(t,!0):r.regular.set(t,!0)}},{key:"removeListener",value:function(e,t){this.events[e]&&(this.events[e].regular.delete(t),this.events[e].highPriority.delete(t))}},{key:"removeAllListeners",value:function(){this.events={}}},{key:"emit",value:function(e){var t=this.events[e];if(t){for(var n=Array.from(t.highPriority.keys()),r=Array.from(t.regular.keys()),i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(var s=n.length-1;s>=0;s-=1){var l=n[s];t.highPriority.has(l)&&l.apply(this,o)}for(var u=0;u<r.length;u+=1){var c=r[u];t.regular.has(c)&&c.apply(this,o)}}}},{key:"once",value:function(e,t){var n=this;this.on(e,(function r(){n.removeListener(e,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];t.apply(n,o)}))}}]),e}(),Ko=function(e){return void 0!==e.isPropagationStopped},Yo=0;function Zo(e,t){var n=r.useRef();n.current||(n.current={unstable_eventManager:new Xo,unstable_caches:{},state:{},instanceId:Yo},Yo+=1),r.useImperativeHandle(e,(function(){return n.current}),[n]);var i=r.useCallback((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r[0],a=r[1],s=r[2],l=void 0===s?{}:s;if(l.defaultMuiPrevented=!1,!Ko(l)||!l.isPropagationStopped()){var u=t.signature===zo.DataGridPro?{api:n.current}:{};n.current.unstable_eventManager.emit(o,a,l,u)}}),[n,t.signature]),o=r.useCallback((function(e,t,r){n.current.unstable_eventManager.on(e,t,r);var i=n.current;return function(){i.unstable_eventManager.removeListener(e,t)}}),[n]),a=r.useCallback((function(e){n.current.publishEvent("componentError",e)}),[n]);return Bo(n,{subscribeEvent:o,publishEvent:i,showError:a}),r.useEffect((function(){var e=n.current;return function(){var t;"undefined"!==typeof(t=e.instanceId)?$r.cache&&$r.cache[t]&&delete $r.cache[t]:$r.cache=null,e.publishEvent("unmount")}}),[n]),n}var Qo="none",Jo={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree"},ea=["stateId"],ta=function(e,t){var n=Zo(e,t);return function(e,t){e.current.getLogger=r.useCallback((function(e){return Oo?No(e,"debug",t.logger):t.logLevel?No(e,t.logLevel.toString(),t.logger):Do}),[t.logLevel,t.logger])}(n,t),function(e,t){var n=r.useCallback((function(t){e.current.setState((function(e){return E({},e,{error:t})}))}),[e]);r.useEffect((function(){t.error?n({error:t.error}):n(null)}),[n,t.error]),Wo(e,"componentError",n)}(n,t),function(e,t){var n=r.useRef({}),i=c(r.useState(),2)[1],o=r.useCallback((function(e){var t=e.stateId,r=k(e,ea);n.current[t]=E({},r,{stateId:t})}),[]),a=r.useCallback((function(r,i){var o;if(o=Po(r)?r(e.current.state):r,e.current.state===o)return!1;var a=!1,s=[];if(Object.keys(n.current).forEach((function(t){var r=n.current[t],i=r.stateSelector(e.current.state,e.current.instanceId),l=r.stateSelector(o,e.current.instanceId);l!==i&&(s.push({stateId:r.stateId,hasPropChanged:l!==r.propModel}),void 0!==r.propModel&&l!==r.propModel&&(a=!0))})),s.length>1)throw new Error("You're not allowed to update several sub-state in one transaction. You already updated ".concat(s[0].stateId,", therefore, you're not allowed to update ").concat(s.map((function(e){return e.stateId})).join(", ")," in the same transaction."));if(a||(e.current.state=o,e.current.publishEvent&&e.current.publishEvent("stateChange",o)),1===s.length){var l=s[0],u=l.stateId,c=l.hasPropChanged,d=n.current[u],f=d.stateSelector(o,e.current.instanceId);if(d.propOnChange&&c){var p=t.signature===zo.DataGridPro?{api:e.current,reason:i}:{reason:i};d.propOnChange(f,p)}a||e.current.publishEvent(d.changeEvent,f,{reason:i})}return!a}),[e,t.signature]),s=r.useCallback((function(t,n,r){return e.current.setState((function(e){return E({},e,p({},t,n(e[t])))}),r)}),[e]),l=r.useCallback((function(){return i((function(){return e.current.state}))}),[e]);Bo(e,{setState:a,forceUpdate:l,unstable_updateControlState:s,unstable_registerControlState:o})}(n,t),function(e){var t=r.useRef({}),n=r.useCallback((function(e){e&&Object.values(e.appliers).forEach((function(e){e()}))}),[]),i=r.useCallback((function(e,r,i){t.current[e]||(t.current[e]={processors:new Map,appliers:{}});var o=t.current[e];return o.processors.get(r)!==i&&(o.processors.set(r,i),n(o)),function(){t.current[e].processors.set(r,null)}}),[n]),o=r.useCallback((function(e,n,r){return t.current[e]||(t.current[e]={processors:new Map,appliers:{}}),t.current[e].appliers[n]=r,function(){var r=k(t.current[e].appliers,[n].map(f));t.current[e].appliers=r}}),[]),a=r.useCallback((function(e){var r=t.current[e];n(r)}),[n]),s=r.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2];return t.current[i]?Array.from(t.current[i].processors.values()).reduce((function(e,t){return t?t(e,a):e}),o):o}),[]);Bo(e,{unstable_registerPipeProcessor:i,unstable_registerPipeApplier:o,unstable_requestPipeProcessorsApplication:a,unstable_applyPipeProcessors:s})}(n),function(e){var t=r.useRef(new Map),n=r.useRef({}),i=r.useCallback((function(t,r,i){var o=function(){var e=k(n.current[r],[t].map(f));n.current[r]=e};n.current[r]||(n.current[r]={});var a=n.current[r],s=a[t];return a[t]=i,s&&s!==i?(t===e.current.unstable_getActiveStrategy(Jo[r])&&e.current.publishEvent("activeStrategyProcessorChange",r),o):o}),[e]),o=r.useCallback((function(t,r){var i=e.current.unstable_getActiveStrategy(Jo[t]);if(null==i)throw new Error("Can't apply a strategy processor before defining an active strategy");var o=n.current[t];if(!o||!o[i])throw new Error('No processor found for processor "'.concat(t,'" on strategy "').concat(i,'"'));return(0,o[i])(r)}),[e]),a=r.useCallback((function(e){var n,r=Array.from(t.current.entries()).find((function(t){var n=c(t,2)[1];return n.group===e&&n.isAvailable()}));return null!=(n=null==r?void 0:r[0])?n:Qo}),[]),s=r.useCallback((function(n,r,i){t.current.set(r,{group:n,isAvailable:i}),e.current.publishEvent("strategyAvailabilityChange")}),[e]);Bo(e,{unstable_registerStrategyProcessor:i,unstable_applyStrategyProcessor:o,unstable_getActiveStrategy:a,unstable_setStrategyAvailability:s})}(n),function(e,t){Bo(e,{getLocaleText:r.useCallback((function(e){if(null==t.localeText[e])throw new Error("Missing translation for key ".concat(e,"."));return t.localeText[e]}),[t.localeText])})}(n,t),n},na=function(e,t,n){var i=r.useRef(!1);i.current||(t.current.state=e(t.current.state,n,t),i.current=!0)};function ra(e){var t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);var n=document.createRange();n.selectNode(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}var ia=function(e){var t=r.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0!==e.current.getSelectedRows().size){var n=e.current.getDataAsCsv({includeHeaders:t,delimiter:"\t"});navigator.clipboard?navigator.clipboard.writeText(n).catch((function(){ra(n)})):ra(n)}}),[e]),n=r.useCallback((function(t){var n=t.ctrlKey||t.metaKey||t.altKey;"C"===String.fromCharCode(t.keyCode)&&n&&(function(e){var t;return""!==(null==(t=window.getSelection())?void 0:t.toString())||!!e&&(e.selectionEnd||0)-(e.selectionStart||0)>0}(t.target)||e.current.unstable_copySelectedRowsToClipboard(t.altKey))}),[e]);!function(e,t,n,i,o){var a=Ii(e,"useNativeEventListener"),s=c(r.useState(!1),2),l=s[0],u=s[1],d=r.useRef(i),f=r.useCallback((function(e){return d.current&&d.current(e)}),[]);r.useEffect((function(){d.current=i}),[i]),r.useEffect((function(){var r;if((r=Po(t)?t():t&&t.current?t.current:null)&&n&&!l){a.debug("Binding native ".concat(n," event")),r.addEventListener(n,f,o);var i=r;u(!0),e.current.subscribeEvent("unmount",(function(){a.debug("Clearing native ".concat(n," event")),i.removeEventListener(n,f,o)}))}}),[t,f,n,l,a,o,e])}(e,e.current.rootElementRef,"keydown",n),Bo(e,{unstable_copySelectedRowsToClipboard:t})},oa=function(e){return e.columnMenu},aa=function(e){return E({},e,{columnMenu:{open:!1}})},sa=function(e){var t=r.useRef(!0);t.current&&(t.current=!1,e())},la=function(e,t,n){var i=r.useRef(),o=r.useRef("mui-".concat(Math.round(1e9*Math.random()))),a=r.useCallback((function(){i.current=e.current.unstable_registerPipeProcessor(t,o.current,n)}),[e,n,t]);sa((function(){a()}));var s=r.useRef(!0);r.useEffect((function(){return s.current?s.current=!1:a(),function(){i.current&&(i.current(),i.current=null)}}),[a])},ua=function(e,t,n){var i=r.useRef(),o=r.useRef("mui-".concat(Math.round(1e9*Math.random()))),a=r.useCallback((function(){i.current=e.current.unstable_registerPipeApplier(t,o.current,n)}),[e,n,t]);sa((function(){a()}));var s=r.useRef(!0);r.useEffect((function(){return s.current?s.current=!1:a(),function(){i.current&&(i.current(),i.current=null)}}),[a])},ca=n(4165),da=n(5861),fa=n(4164);function pa(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=function(){e.apply(r,o)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}var ha=["onChange","maxRows","minRows","style","value"];function ma(e,t){return parseInt(e[t],10)||0}var ga={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function va(e){return void 0===e||null===e||0===Object.keys(e).length}var ya=r.forwardRef((function(e,t){var n=e.onChange,i=e.maxRows,o=e.minRows,a=void 0===o?1:o,s=e.style,l=e.value,u=k(e,ha),d=r.useRef(null!=l).current,f=r.useRef(null),p=O(t,f),h=r.useRef(null),m=r.useRef(0),g=c(r.useState({}),2),v=g[0],y=g[1],b=r.useCallback((function(){var t=f.current,n=Zi(t).getComputedStyle(t);if("0px"===n.width)return{};var r=h.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var o=n["box-sizing"],s=ma(n,"padding-bottom")+ma(n,"padding-top"),l=ma(n,"border-bottom-width")+ma(n,"border-top-width"),u=r.scrollHeight;r.value="x";var c=r.scrollHeight,d=u;return a&&(d=Math.max(Number(a)*c,d)),i&&(d=Math.min(Number(i)*c,d)),{outerHeightStyle:(d=Math.max(d,c))+("border-box"===o?s+l:0),overflow:Math.abs(d-u)<=1}}),[i,a,e.placeholder]),x=function(e,t){var n=t.outerHeightStyle,r=t.overflow;return m.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==r)?(m.current+=1,{overflow:r,outerHeightStyle:n}):e},w=r.useCallback((function(){var e=b();va(e)||y((function(t){return x(t,e)}))}),[b]);r.useEffect((function(){var e,t=pa((function(){m.current=0,f.current&&function(){var e=b();va(e)||(0,fa.flushSync)((function(){y((function(t){return x(t,e)}))}))}()})),n=Zi(f.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(f.current),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}})),D((function(){w()})),r.useEffect((function(){m.current=0}),[l]);return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)("textarea",E({value:l,onChange:function(e){m.current=0,d||w(),n&&n(e)},ref:p,rows:a,style:E({height:v.outerHeightStyle,overflow:v.overflow?"hidden":null},s)},u)),(0,_.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:E({},ga,s,{padding:0})})]})})),ba=ya;var xa=function(e){return"string"===typeof e};function wa(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var _a=r.createContext(void 0);function Sa(){return r.useContext(_a)}function Ca(e,t){var n=E({},t);return Object.keys(e).forEach((function(r){if(r.toString().match(/^(components|slots)$/))n[r]=E({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){var i=e[r]||{},o=t[r];n[r]={},o&&Object.keys(o)?i&&Object.keys(i)?(n[r]=E({},o),Object.keys(i).forEach((function(e){n[r][e]=Ca(i[e],o[e])}))):n[r]=o:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}var Ea=r.createContext(null);function ka(){return r.useContext(Ea)}function Pa(e){return 0===Object.keys(e).length}var Ma=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=ka();return!t||Pa(t)?e:t},Aa=Mn();var Ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa;return Ma(e)};function Ra(e){var t=e.props,n=e.name,r=e.defaultTheme,i=function(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?Ca(t.components[n].defaultProps,r):r}({theme:Ta(r),name:n,props:t});return i}function Ia(e){return Ra({props:e.props,name:e.name,defaultTheme:kr})}n(2110);var Oa=at((function(e,t){var n=e.styles,i=tt([n],void 0,(0,r.useContext)(st)),o=(0,r.useRef)();return it((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",e),n.hydrate([a])),o.current=[n,r],function(){n.flush()}}),[t]),it((function(){var e=o.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&ct(t,i.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",i,n,!1)}}),[t,i.name]),null}));function La(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tt(t)}var Da=function(){var e=La.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Fa(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,i="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,_.jsx)(Oa,{styles:i})}var Na=function(e){return(0,_.jsx)(Fa,E({},e,{defaultTheme:kr}))};function Ba(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function za(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Ba(e.value)&&""!==e.value||t&&Ba(e.defaultValue)&&""!==e.defaultValue)}function ja(e){return Or("MuiInputBase",e)}var Ha=Lr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Ua=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Va=function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(R(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Ga=function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Wa=Ar("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Va})((function(e){var t=e.theme,n=e.ownerState;return E({},t.typography.body1,p({color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(Ha.disabled),{color:(t.vars||t).palette.text.disabled,cursor:"default"}),n.multiline&&E({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),$a=Ar("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Ga})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode,o=E({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),a={opacity:"0 !important"},s=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return E((p(t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},"label[data-shrink=false] + .".concat(Ha.formControl," &"),{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s}),p(t,"&.".concat(Ha.disabled),{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled}),p(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),qa=(0,_.jsx)(Na,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Xa=r.forwardRef((function(e,t){var n,i=Ia({props:e,name:"MuiInputBase"}),o=i["aria-describedby"],a=i.autoComplete,s=i.autoFocus,l=i.className,u=i.components,d=void 0===u?{}:u,f=i.componentsProps,p=void 0===f?{}:f,h=i.defaultValue,m=i.disabled,g=i.disableInjectingGlobalStyles,v=i.endAdornment,y=i.fullWidth,b=void 0!==y&&y,x=i.id,w=i.inputComponent,S=void 0===w?"input":w,C=i.inputProps,P=void 0===C?{}:C,T=i.inputRef,I=i.maxRows,O=i.minRows,D=i.multiline,B=void 0!==D&&D,z=i.name,j=i.onBlur,H=i.onChange,U=i.onClick,V=i.onFocus,G=i.onKeyDown,W=i.onKeyUp,$=i.placeholder,q=i.readOnly,X=i.renderSuffix,K=i.rows,Y=i.slotProps,Z=void 0===Y?{}:Y,Q=i.slots,J=void 0===Q?{}:Q,ee=i.startAdornment,te=i.type,ne=void 0===te?"text":te,re=i.value,ie=k(i,Ua),oe=null!=P.value?P.value:re,ae=r.useRef(null!=oe).current,se=r.useRef(),le=r.useCallback((function(e){0}),[]),ue=L(se,T,P.ref,le),ce=c(r.useState(!1),2),de=ce[0],fe=ce[1],pe=Sa();var he=wa({props:i,muiFormControl:pe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});he.focused=pe?pe.focused:de,r.useEffect((function(){!pe&&m&&de&&(fe(!1),j&&j())}),[pe,m,de,j]);var me=pe&&pe.onFilled,ge=pe&&pe.onEmpty,ve=r.useCallback((function(e){za(e)?me&&me():ge&&ge()}),[me,ge]);F((function(){ae&&ve({value:oe})}),[oe,ve,ae]);r.useEffect((function(){ve(se.current)}),[]);var ye=S,be=P;B&&"input"===ye&&(be=E(K?{type:void 0,minRows:K,maxRows:K}:{type:void 0,maxRows:I,minRows:O},be),ye=ba);r.useEffect((function(){pe&&pe.setAdornedStart(Boolean(ee))}),[pe,ee]);var xe=E({},i,{color:he.color||"primary",disabled:he.disabled,endAdornment:v,error:he.error,focused:he.focused,formControl:pe,fullWidth:b,hiddenLabel:he.hiddenLabel,multiline:B,size:he.size,startAdornment:ee,type:ne}),we=function(e){var t=e.classes,n=e.color,r=e.disabled,i=e.error,o=e.endAdornment,a=e.focused,s=e.formControl,l=e.fullWidth,u=e.hiddenLabel,c=e.multiline,d=e.readOnly,f=e.size,p=e.startAdornment,h=e.type;return N({root:["root","color".concat(R(n)),r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl","small"===f&&"sizeSmall",c&&"multiline",p&&"adornedStart",o&&"adornedEnd",u&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===h&&"inputTypeSearch",c&&"inputMultiline","small"===f&&"inputSizeSmall",u&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]},ja,t)}(xe),_e=J.root||d.Root||Wa,Se=Z.root||p.root||{},Ce=J.input||d.Input||$a;return be=E({},be,null!=(n=Z.input)?n:p.input),(0,_.jsxs)(r.Fragment,{children:[!g&&qa,(0,_.jsxs)(_e,E({},Se,!xa(_e)&&{ownerState:E({},xe,Se.ownerState)},{ref:t,onClick:function(e){se.current&&e.currentTarget===e.target&&se.current.focus(),U&&U(e)}},ie,{className:M(we.root,Se.className,l),children:[ee,(0,_.jsx)(_a.Provider,{value:null,children:(0,_.jsx)(Ce,E({ownerState:xe,"aria-invalid":he.error,"aria-describedby":o,autoComplete:a,autoFocus:s,defaultValue:h,disabled:he.disabled,id:x,onAnimationStart:function(e){ve("mui-auto-fill-cancel"===e.animationName?se.current:{value:"x"})},name:z,placeholder:$,readOnly:q,required:he.required,rows:K,value:oe,onKeyDown:G,onKeyUp:W,type:ne},be,!xa(Ce)&&{as:ye,ownerState:E({},xe,be.ownerState)},{ref:ue,className:M(we.input,be.className),onBlur:function(e){j&&j(e),P.onBlur&&P.onBlur(e),pe&&pe.onBlur?pe.onBlur(e):fe(!1)},onChange:function(e){if(!ae){var t=e.target||se.current;if(null==t)throw new Error(A(1));ve({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];P.onChange&&P.onChange.apply(P,[e].concat(r)),H&&H.apply(void 0,[e].concat(r))},onFocus:function(e){he.disabled?e.stopPropagation():(V&&V(e),P.onFocus&&P.onFocus(e),pe&&pe.onFocus?pe.onFocus(e):fe(!0))}}))}),v,X?X(E({},he,{startAdornment:ee})):null]}))]})})),Ka=Xa;function Ya(e){return Or("MuiSvgIcon",e)}Lr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var Za=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Qa=Ar("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(R(n.color))],t["fontSize".concat(R(n.fontSize))]]}})((function(e){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,y=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=y.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(s=y.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(u=y.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875rem"}[b.fontSize],color:null!=(d=null==(f=(y.vars||y).palette)||null==(p=f[b.color])?void 0:p.main)?d:{action:null==(h=(y.vars||y).palette)||null==(m=h.action)?void 0:m.active,disabled:null==(g=(y.vars||y).palette)||null==(v=g.action)?void 0:v.disabled,inherit:void 0}[b.color]}})),Ja=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiSvgIcon"}),r=n.children,i=n.className,o=n.color,a=void 0===o?"inherit":o,s=n.component,l=void 0===s?"svg":s,u=n.fontSize,c=void 0===u?"medium":u,d=n.htmlColor,f=n.inheritViewBox,p=void 0!==f&&f,h=n.titleAccess,m=n.viewBox,g=void 0===m?"0 0 24 24":m,v=k(n,Za),y=E({},n,{color:a,component:l,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:p,viewBox:g}),b={};p||(b.viewBox=g);var x=function(e){var t=e.color,n=e.fontSize,r=e.classes;return N({root:["root","inherit"!==t&&"color".concat(R(t)),"fontSize".concat(R(n))]},Ya,r)}(y);return(0,_.jsxs)(Qa,E({as:l,className:M(x.root,i),focusable:"false",color:d,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:t},b,v,{ownerState:y,children:[r,h?(0,_.jsx)("title",{children:h}):null]}))}));Ja.muiName="SvgIcon";var es=Ja;function ts(e,t){function n(n,r){return(0,_.jsx)(es,E({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=es.muiName,r.memo(r.forwardRef(n))}var ns=ts((0,_.jsx)("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),rs=ts((0,_.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),is=ts((0,_.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),os=ts((0,_.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),as=ts((0,_.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),ss=ts((0,_.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),ls=ts((0,_.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),us=(ts((0,_.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),ts((0,_.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),ts((0,_.jsx)("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon")),cs=ts((0,_.jsx)("path",{d:"M11 19V5h2v14z"}),"Separator"),ds=ts((0,_.jsx)("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),fs=ts((0,_.jsx)("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),ps=ts((0,_.jsx)("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),hs=ts((0,_.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),ms=ts((0,_.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),gs=ts((0,_.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),vs=ts((0,_.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),ys=ts((0,_.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),bs=ts((0,_.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),xs=ts((0,_.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),ws=ts((0,_.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),_s=ts((0,_.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),Ss=0;var Cs=i.useId;function Es(e){if(void 0!==Cs){var t=Cs();return null!=e?e:t}return function(e){var t=c(r.useState(e),2),n=t[0],i=t[1],o=e||n;return r.useEffect((function(){null==n&&i("mui-".concat(Ss+=1))}),[n]),o}(e)}var ks=Es;var Ps,Ms=r.createContext({}),As=!0,Ts=!1,Rs={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Is(e){e.metaKey||e.altKey||e.ctrlKey||(As=!0)}function Os(){As=!1}function Ls(){"hidden"===this.visibilityState&&Ts&&(As=!0)}function Ds(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return As||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!Rs[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var Fs=function(){var e=r.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",Is,!0),t.addEventListener("mousedown",Os,!0),t.addEventListener("pointerdown",Os,!0),t.addEventListener("touchstart",Os,!0),t.addEventListener("visibilitychange",Ls,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!Ds(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(Ts=!0,window.clearTimeout(Ps),Ps=window.setTimeout((function(){Ts=!1}),100),t.current=!1,!0)},ref:e}};function Ns(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Bs(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Bi(e,t)}var zs=r.createContext(null);function js(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function Hs(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Us(e,t,n){var i=js(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,r.isValidElement)(s)){var l=a in t,u=a in i,c=t[a],d=(0,r.isValidElement)(c)&&!c.props.in;!u||l&&!d?u||!l||d?u&&l&&(0,r.isValidElement)(c)&&(o[a]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:Hs(s,"exit",e),enter:Hs(s,"enter",e)})):o[a]=(0,r.cloneElement)(s,{in:!1}):o[a]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:Hs(s,"exit",e),enter:Hs(s,"enter",e)})}})),o}var Vs=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Gs=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(Ui(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Bs(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,o=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,i=a,js(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:Hs(e,"appear",n),enter:Hs(e,"enter",n),exit:Hs(e,"exit",n)})}))):Us(e,o,a),firstRender:!1}},n.handleExited=function(e,t){var n=js(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=E({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=k(e,["component","childFactory"]),o=this.state.contextValue,a=Vs(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(zs.Provider,{value:o},a):r.createElement(zs.Provider,{value:o},r.createElement(t,i,a))},t}(r.Component);Gs.propTypes={},Gs.defaultProps={component:"div",childFactory:function(e){return e}};var Ws=Gs;var $s=function(e){var t=e.className,n=e.classes,i=e.pulsate,o=void 0!==i&&i,a=e.rippleX,s=e.rippleY,l=e.rippleSize,u=e.in,d=e.onExited,f=e.timeout,p=c(r.useState(!1),2),h=p[0],m=p[1],g=M(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),v={width:l,height:l,top:-l/2+s,left:-l/2+a},y=M(n.child,h&&n.childLeaving,o&&n.childPulsate);return u||h||m(!0),r.useEffect((function(){if(!u&&null!=d){var e=setTimeout(d,f);return function(){clearTimeout(e)}}}),[d,u,f]),(0,_.jsx)("span",{className:g,style:v,children:(0,_.jsx)("span",{className:y})})};var qs,Xs,Ks,Ys,Zs,Qs,Js,el,tl=Lr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),nl=["center","classes","className"],rl=Da(Zs||(Zs=qs||(qs=Ns(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),il=Da(Qs||(Qs=Xs||(Xs=Ns(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),ol=Da(Js||(Js=Ks||(Ks=Ns(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),al=Ar("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),sl=Ar($s,{name:"MuiTouchRipple",slot:"Ripple"})(el||(el=Ys||(Ys=Ns(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),tl.rippleVisible,rl,550,(function(e){return e.theme.transitions.easing.easeInOut}),tl.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),tl.child,tl.childLeaving,il,550,(function(e){return e.theme.transitions.easing.easeInOut}),tl.childPulsate,ol,(function(e){return e.theme.transitions.easing.easeInOut})),ll=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiTouchRipple"}),i=n.center,o=void 0!==i&&i,a=n.classes,s=void 0===a?{}:a,l=n.className,u=k(n,nl),d=c(r.useState([]),2),f=d[0],p=d[1],h=r.useRef(0),m=r.useRef(null);r.useEffect((function(){m.current&&(m.current(),m.current=null)}),[f]);var g=r.useRef(!1),v=r.useRef(null),y=r.useRef(null),b=r.useRef(null);r.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var x=r.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;p((function(e){return[].concat(z(e),[(0,_.jsx)(sl,{classes:{ripple:M(s.ripple,tl.ripple),rippleVisible:M(s.rippleVisible,tl.rippleVisible),ripplePulsate:M(s.ripplePulsate,tl.ripplePulsate),child:M(s.child,tl.child),childLeaving:M(s.childLeaving,tl.childLeaving),childPulsate:M(s.childPulsate,tl.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},h.current)])})),h.current+=1,m.current=o}),[s]),w=r.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,i=void 0!==r&&r,a=t.center,s=void 0===a?o||t.pulsate:a,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===(null==e?void 0:e.type)&&g.current)g.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(g.current=!0);var c,d,f,p=u?null:b.current,h=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(h.width/2),d=Math.round(h.height/2);else{var m=e.touches&&e.touches.length>0?e.touches[0]:e,w=m.clientX,_=m.clientY;c=Math.round(w-h.left),d=Math.round(_-h.top)}if(s)(f=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(f+=1);else{var S=2*Math.max(Math.abs((p?p.clientWidth:0)-c),c)+2,C=2*Math.max(Math.abs((p?p.clientHeight:0)-d),d)+2;f=Math.sqrt(Math.pow(S,2)+Math.pow(C,2))}null!=e&&e.touches?null===y.current&&(y.current=function(){x({pulsate:i,rippleX:c,rippleY:d,rippleSize:f,cb:n})},v.current=setTimeout((function(){y.current&&(y.current(),y.current=null)}),80)):x({pulsate:i,rippleX:c,rippleY:d,rippleSize:f,cb:n})}}),[o,x]),S=r.useCallback((function(){w({},{pulsate:!0})}),[w]),C=r.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===(null==e?void 0:e.type)&&y.current)return y.current(),y.current=null,void(v.current=setTimeout((function(){C(e,t)})));y.current=null,p((function(e){return e.length>0?e.slice(1):e})),m.current=t}),[]);return r.useImperativeHandle(t,(function(){return{pulsate:S,start:w,stop:C}}),[S,w,C]),(0,_.jsx)(al,E({className:M(tl.root,s.root,l),ref:b},u,{children:(0,_.jsx)(Ws,{component:null,exit:!0,children:f})}))})),ul=ll;function cl(e){return Or("MuiButtonBase",e)}var dl,fl=Lr("MuiButtonBase",["root","disabled","focusVisible"]),pl=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],hl=Ar("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((p(dl={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(fl.disabled),{pointerEvents:"none",cursor:"default"}),p(dl,"@media print",{colorAdjust:"exact"}),dl)),ml=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiButtonBase"}),i=n.action,o=n.centerRipple,a=void 0!==o&&o,s=n.children,l=n.className,u=n.component,d=void 0===u?"button":u,f=n.disabled,p=void 0!==f&&f,h=n.disableRipple,m=void 0!==h&&h,g=n.disableTouchRipple,v=void 0!==g&&g,y=n.focusRipple,b=void 0!==y&&y,x=n.LinkComponent,w=void 0===x?"a":x,S=n.onBlur,C=n.onClick,P=n.onContextMenu,A=n.onDragLeave,T=n.onFocus,R=n.onFocusVisible,I=n.onKeyDown,O=n.onKeyUp,D=n.onMouseDown,F=n.onMouseLeave,B=n.onMouseUp,z=n.onTouchEnd,j=n.onTouchMove,H=n.onTouchStart,U=n.tabIndex,V=void 0===U?0:U,G=n.TouchRippleProps,W=n.touchRippleRef,$=n.type,q=k(n,pl),X=r.useRef(null),K=r.useRef(null),Y=L(K,W),Z=Fs(),Q=Z.isFocusVisibleRef,J=Z.onFocus,ee=Z.onBlur,te=Z.ref,ne=c(r.useState(!1),2),re=ne[0],ie=ne[1];p&&re&&ie(!1),r.useImperativeHandle(i,(function(){return{focusVisible:function(){ie(!0),X.current.focus()}}}),[]);var oe=c(r.useState(!1),2),ae=oe[0],se=oe[1];r.useEffect((function(){se(!0)}),[]);var le=ae&&!m&&!p;function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return Ki((function(r){return t&&t(r),!n&&K.current&&K.current[e](r),!0}))}r.useEffect((function(){re&&b&&!m&&ae&&K.current.pulsate()}),[m,b,re,ae]);var ce=ue("start",D),de=ue("stop",P),fe=ue("stop",A),pe=ue("stop",B),he=ue("stop",(function(e){re&&e.preventDefault(),F&&F(e)})),me=ue("start",H),ge=ue("stop",z),ve=ue("stop",j),ye=ue("stop",(function(e){ee(e),!1===Q.current&&ie(!1),S&&S(e)}),!1),be=Ki((function(e){X.current||(X.current=e.currentTarget),J(e),!0===Q.current&&(ie(!0),R&&R(e)),T&&T(e)})),xe=function(){var e=X.current;return d&&"button"!==d&&!("A"===e.tagName&&e.href)},we=r.useRef(!1),_e=Ki((function(e){b&&!we.current&&re&&K.current&&" "===e.key&&(we.current=!0,K.current.stop(e,(function(){K.current.start(e)}))),e.target===e.currentTarget&&xe()&&" "===e.key&&e.preventDefault(),I&&I(e),e.target===e.currentTarget&&xe()&&"Enter"===e.key&&!p&&(e.preventDefault(),C&&C(e))})),Se=Ki((function(e){b&&" "===e.key&&K.current&&re&&!e.defaultPrevented&&(we.current=!1,K.current.stop(e,(function(){K.current.pulsate(e)}))),O&&O(e),C&&e.target===e.currentTarget&&xe()&&" "===e.key&&!e.defaultPrevented&&C(e)})),Ce=d;"button"===Ce&&(q.href||q.to)&&(Ce=w);var Ee={};"button"===Ce?(Ee.type=void 0===$?"button":$,Ee.disabled=p):(q.href||q.to||(Ee.role="button"),p&&(Ee["aria-disabled"]=p));var ke=L(t,te,X);var Pe=E({},n,{centerRipple:a,component:d,disabled:p,disableRipple:m,disableTouchRipple:v,focusRipple:b,tabIndex:V,focusVisible:re}),Me=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=N({root:["root",t&&"disabled",n&&"focusVisible"]},cl,e.classes);return n&&r&&(i.root+=" ".concat(r)),i}(Pe);return(0,_.jsxs)(hl,E({as:Ce,className:M(Me.root,l),ownerState:Pe,onBlur:ye,onClick:C,onContextMenu:de,onFocus:be,onKeyDown:_e,onKeyUp:Se,onMouseDown:ce,onMouseLeave:he,onMouseUp:pe,onDragLeave:fe,onTouchEnd:ge,onTouchMove:ve,onTouchStart:me,ref:ke,tabIndex:p?-1:V,type:$},Ee,q,{children:[s,le?(0,_.jsx)(ul,E({ref:Y,center:a},G)):null]}))})),gl=ml;var vl=Lr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function yl(e){return Or("MuiListItemIcon",e)}var bl=Lr("MuiListItemIcon",["root","alignItemsFlexStart"]);var xl=Lr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function wl(e){return Or("MuiMenuItem",e)}var _l=Lr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Sl=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Cl=Ar(gl,{shouldForwardProp:function(e){return Pr(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,r=e.ownerState;return E({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(p(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(_l.selected),p({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):Xn(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(_l.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):Xn(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),p(t,"&.".concat(_l.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):Xn(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):Xn(n.palette.primary.main,n.palette.action.selectedOpacity)}}),p(t,"&.".concat(_l.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),p(t,"&.".concat(_l.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),p(t,"& + .".concat(vl.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),p(t,"& + .".concat(vl.inset),{marginLeft:52}),p(t,"& .".concat(xl.root),{marginTop:0,marginBottom:0}),p(t,"& .".concat(xl.inset),{paddingLeft:36}),p(t,"& .".concat(bl.root),{minWidth:36}),t),!r.dense&&p({},n.breakpoints.up("sm"),{minHeight:"auto"}),r.dense&&E({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,p({},"& .".concat(bl.root," svg"),{fontSize:"1.25rem"})))})),El=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiMenuItem"}),i=n.autoFocus,o=void 0!==i&&i,a=n.component,s=void 0===a?"li":a,l=n.dense,u=void 0!==l&&l,c=n.divider,d=void 0!==c&&c,f=n.disableGutters,p=void 0!==f&&f,h=n.focusVisibleClassName,m=n.role,g=void 0===m?"menuitem":m,v=n.tabIndex,y=n.className,b=k(n,Sl),x=r.useContext(Ms),w=r.useMemo((function(){return{dense:u||x.dense||!1,disableGutters:p}}),[x.dense,u,p]),S=r.useRef(null);F((function(){o&&S.current&&S.current.focus()}),[o]);var C,P=E({},n,{dense:w.dense,divider:d,disableGutters:p}),A=function(e){var t=e.disabled,n=e.dense,r=e.divider,i=e.disableGutters,o=e.selected,a=e.classes;return E({},a,N({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},wl,a))}(n),T=L(S,t);return n.disabled||(C=void 0!==v?v:-1),(0,_.jsx)(Ms.Provider,{value:w,children:(0,_.jsx)(Cl,E({ref:T,role:g,tabIndex:C,component:s,focusVisibleClassName:M(A.focusVisible,h),className:M(A.root,y)},b,{ownerState:P,classes:A}))})}));function kl(e){return"object"===typeof e&&null!==e?e.value:e}function Pl(e,t){if(void 0!==t){var n=t.find((function(t){var n=kl(t);return String(n)===String(e)}));return kl(n)}}var Ml=["item","applyValue","type","apiRef","focusElementRef"];var Al=function(e,t,n){var r=e.valueOptions,i=e.valueFormatter,o=e.field;return[""].concat(z("function"===typeof r?r({field:o}):r||[])).map((function(e){var r="object"===typeof e,a=r?e.value:e,s=r?e.value:e,l=i&&""!==e?i({value:e,field:o,api:t}):e,u=r?e.label:l;return(0,_.jsx)(n,{value:s,children:u},a)}))};function Tl(e){var t,n,i,o,a,s=e.item,l=e.applyValue,u=e.type,d=e.apiRef,f=e.focusElementRef,p=k(e,Ml);var h=r.useRef(),m=c(r.useState(null!=(t=s.value)?t:""),2),g=m[0],v=m[1],y=c(r.useState(!1),2),b=y[0],x=y[1],w=ks(),S=ui(),C=null==(i=((null==(n=S.componentsProps)?void 0:n.baseSelect)||{}).native)||i,P="singleSelect"===u?{select:!0,SelectProps:E({native:C},null==(o=S.componentsProps)?void 0:o.baseSelect),children:Al(d.current.getColumn(s.columnField),d.current,C?"option":El)}:{},M=r.useCallback((function(e){var t=e.target.value;if("singleSelect"===u){var n=d.current.getColumn(s.columnField),r="function"===typeof n.valueOptions?n.valueOptions({field:n.field}):n.valueOptions;t=Pl(t,r)}clearTimeout(h.current),v(String(t)),x(!0),h.current=setTimeout((function(){l(E({},s,{value:t})),x(!1)}),500)}),[d,l,s,u]);r.useEffect((function(){return function(){clearTimeout(h.current)}}),[]),r.useEffect((function(){var e,t=null!=(e=s.value)?e:"";v(String(t))}),[s.value]);var A=b?{endAdornment:(0,_.jsx)(ys,{})}:p.InputProps;return(0,_.jsx)(S.components.BaseTextField,E({id:w,label:d.current.getLocaleText("filterPanelInputLabel"),placeholder:d.current.getLocaleText("filterPanelInputPlaceholder"),value:g,onChange:M,variant:"standard",type:u||"text",InputProps:A,InputLabelProps:{shrink:!0},inputRef:f},P,p,null==(a=S.componentsProps)?void 0:a.baseTextField))}var Rl=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","isValidating","debounceMs","isProcessingProps","onValueChange"],Il=Ar(Ka,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:function(e,t){return t.editInputCell}})((function(e){return E({},e.theme.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})})),Ol=r.forwardRef((function(e,t){var n,i,o=ui(),a=e.id,s=e.value,l=e.field,u=e.colDef,d=e.hasFocus,f=e.debounceMs,p=void 0===f?null!=(n=o.experimentalFeatures)&&n.newEditingApi?200:500:f,h=e.isProcessingProps,m=e.onValueChange,g=k(e,Rl),v=si(),y=r.useRef(),b=c(r.useState(s),2),x=b[0],w=b[1],S=function(e){return N({root:["editInputCell"]},Dr,e.classes)}({classes:o.classes}),C=r.useCallback(function(){var e=(0,da.Z)((0,ca.Z)().mark((function e(t){var n,r,i,s;return(0,ca.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.value,!m){e.next=4;break}return e.next=4,m(t,r);case 4:i=v.current.getColumn(l),s=r,i.valueParser&&null!=(n=o.experimentalFeatures)&&n.newEditingApi&&(s=i.valueParser(r,v.current.getCellParams(a,l))),w(s),v.current.setEditCellValue({id:a,field:l,value:s,debounceMs:p,unstable_skipValueParser:!0},t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,p,l,a,m,null==(i=o.experimentalFeatures)?void 0:i.newEditingApi]),P=v.current.unstable_getEditCellMeta?v.current.unstable_getEditCellMeta(a,l):{};return r.useEffect((function(){"debouncedSetEditCellValue"!==P.changeReason&&w(s)}),[P.changeReason,s]),F((function(){d&&y.current.focus()}),[d]),(0,_.jsx)(Il,E({ref:t,inputRef:y,className:S.root,fullWidth:!0,type:"number"===u.type?u.type:"text",value:null!=x?x:"",onChange:C,endAdornment:h?(0,_.jsx)(ys,{}):void 0},g))})),Ll=Gr(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Dl=function(e,t){return t&&e.length>1?(Ll(),[e[0]]):e},Fl=function(e,t){return function(n){return E({},n,{sorting:E({},n.sorting,{sortModel:Dl(e,t)})})}},Nl=function(e,t){var n=e.indexOf(t);return t&&-1!==n&&n+1!==e.length?e[n+1]:e[0]},Bl=function(e,t){return null==e&&null!=t?-1:null==t&&null!=e?1:null==e&&null==t?0:null},zl=new Intl.Collator,jl=function(e,t){var n=Bl(e,t);return null!==n?n:Number(e)-Number(t)},Hl=function(e,t){var n=Bl(e,t);return null!==n?n:e>t?1:e<t?-1:0};function Ul(e){var t=e.controlled,n=e.default,i=(e.name,e.state,r.useRef(void 0!==t).current),o=c(r.useState(n),2),a=o[0],s=o[1];return[i?t:a,r.useCallback((function(e){i||s(e)}),[])]}function Vl(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function Gl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreAccents,n=void 0===t||t,r=e.ignoreCase,i=void 0===r||r,o=e.limit,a=e.matchFrom,s=void 0===a?"any":a,l=e.stringify,u=e.trim,c=void 0!==u&&u;return function(e,t){var r=t.inputValue,a=t.getOptionLabel,u=c?r.trim():r;i&&(u=u.toLowerCase()),n&&(u=Vl(u));var d=u?e.filter((function(e){var t=(l||a)(e);return i&&(t=t.toLowerCase()),n&&(t=Vl(t)),"start"===s?0===t.indexOf(u):t.indexOf(u)>-1})):e;return"number"===typeof o?d.slice(0,o):d}}function Wl(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}var $l=Gl(),ql=function(e){var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))};function Xl(e){var t,n=e.unstable_isActiveElementInListbox,i=void 0===n?ql:n,o=e.unstable_classNamePrefix,a=void 0===o?"Mui":o,s=e.autoComplete,l=void 0!==s&&s,u=e.autoHighlight,d=void 0!==u&&u,f=e.autoSelect,p=void 0!==f&&f,h=e.blurOnSelect,m=void 0!==h&&h,g=e.clearOnBlur,v=void 0===g?!e.freeSolo:g,y=e.clearOnEscape,b=void 0!==y&&y,x=e.componentName,w=void 0===x?"useAutocomplete":x,_=e.defaultValue,S=void 0===_?e.multiple?[]:null:_,C=e.disableClearable,k=void 0!==C&&C,P=e.disableCloseOnSelect,M=void 0!==P&&P,A=e.disabled,T=e.disabledItemsFocusable,R=void 0!==T&&T,O=e.disableListWrap,L=void 0!==O&&O,D=e.filterOptions,F=void 0===D?$l:D,N=e.filterSelectedOptions,B=void 0!==N&&N,z=e.freeSolo,j=void 0!==z&&z,H=e.getOptionDisabled,U=e.getOptionLabel,V=void 0===U?function(e){var t;return null!=(t=e.label)?t:e}:U,G=e.groupBy,W=e.handleHomeEndKeys,$=void 0===W?!e.freeSolo:W,q=e.id,X=e.includeInputInList,K=void 0!==X&&X,Y=e.inputValue,Z=e.isOptionEqualToValue,Q=void 0===Z?function(e,t){return e===t}:Z,J=e.multiple,ee=void 0!==J&&J,te=e.onChange,ne=e.onClose,re=e.onHighlightChange,ie=e.onInputChange,oe=e.onOpen,ae=e.open,se=e.openOnFocus,le=void 0!==se&&se,ue=e.options,ce=e.readOnly,de=void 0!==ce&&ce,fe=e.selectOnFocus,pe=void 0===fe?!e.freeSolo:fe,he=e.value,me=Es(q);t=function(e){var t=V(e);return"string"!==typeof t?String(t):t};var ge=r.useRef(!1),ve=r.useRef(!0),ye=r.useRef(null),be=r.useRef(null),xe=c(r.useState(null),2),we=xe[0],_e=xe[1],Se=c(r.useState(-1),2),Ce=Se[0],Ee=Se[1],ke=d?0:-1,Pe=r.useRef(ke),Me=c(Ul({controlled:he,default:S,name:w}),2),Ae=Me[0],Te=Me[1],Re=c(Ul({controlled:Y,default:"",name:w,state:"inputValue"}),2),Ie=Re[0],Oe=Re[1],Le=c(r.useState(!1),2),De=Le[0],Fe=Le[1],Ne=r.useCallback((function(e,n){if((ee?Ae.length<n.length:null!==n)||v){var r;if(ee)r="";else if(null==n)r="";else{var i=t(n);r="string"===typeof i?i:""}Ie!==r&&(Oe(r),ie&&ie(e,r,"reset"))}}),[t,Ie,ee,ie,Oe,v,Ae]),Be=r.useRef();r.useEffect((function(){var e=Ae!==Be.current;Be.current=Ae,De&&!e||j&&!e||Ne(null,Ae)}),[Ae,Ne,De,Be,j]);var ze=c(Ul({controlled:ae,default:!1,name:w,state:"open"}),2),je=ze[0],He=ze[1],Ue=c(r.useState(!0),2),Ve=Ue[0],Ge=Ue[1],We=!ee&&null!=Ae&&Ie===t(Ae),$e=je&&!de,qe=$e?F(ue.filter((function(e){return!B||!(ee?Ae:[Ae]).some((function(t){return null!==t&&Q(e,t)}))})),{inputValue:We&&Ve?"":Ie,getOptionLabel:t}):[],Xe=je&&qe.length>0&&!de,Ke=Xi((function(e){-1===e?ye.current.focus():we.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));r.useEffect((function(){ee&&Ce>Ae.length-1&&(Ee(-1),Ke(-1))}),[Ae,ee,Ce,Ke]);var Ye=Xi((function(e){var t=e.event,n=e.index,r=e.reason,i=void 0===r?"auto":r;if(Pe.current=n,-1===n?ye.current.removeAttribute("aria-activedescendant"):ye.current.setAttribute("aria-activedescendant","".concat(me,"-option-").concat(n)),re&&re(t,-1===n?null:qe[n],i),be.current){var o=be.current.querySelector('[role="option"].'.concat(a,"-focused"));o&&(o.classList.remove("".concat(a,"-focused")),o.classList.remove("".concat(a,"-focusVisible")));var s=be.current.parentElement.querySelector('[role="listbox"]');if(s)if(-1!==n){var l=be.current.querySelector('[data-option-index="'.concat(n,'"]'));if(l&&(l.classList.add("".concat(a,"-focused")),"keyboard"===i&&l.classList.add("".concat(a,"-focusVisible")),s.scrollHeight>s.clientHeight&&"mouse"!==i)){var u=l,c=s.clientHeight+s.scrollTop,d=u.offsetTop+u.offsetHeight;d>c?s.scrollTop=d-s.clientHeight:u.offsetTop-u.offsetHeight*(G?1.3:0)<s.scrollTop&&(s.scrollTop=u.offsetTop-u.offsetHeight*(G?1.3:0))}}else s.scrollTop=0}})),Ze=Xi((function(e){var n=e.event,r=e.diff,i=e.direction,o=void 0===i?"next":i,a=e.reason,s=void 0===a?"auto":a;if($e){var u=function(e,t){if(!be.current||-1===e)return-1;for(var n=e;;){if("next"===t&&n===qe.length||"previous"===t&&-1===n)return-1;var r=be.current.querySelector('[data-option-index="'.concat(n,'"]')),i=!R&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(!(r&&!r.hasAttribute("tabindex")||i))return n;n+="next"===t?1:-1}}(function(){var e=qe.length-1;if("reset"===r)return ke;if("start"===r)return 0;if("end"===r)return e;var t=Pe.current+r;return t<0?-1===t&&K?-1:L&&-1!==Pe.current||Math.abs(r)>1?0:e:t>e?t===e+1&&K?-1:L||Math.abs(r)>1?e:0:t}(),o);if(Ye({index:u,reason:s,event:n}),l&&"reset"!==r)if(-1===u)ye.current.value=Ie;else{var c=t(qe[u]);ye.current.value=c,0===c.toLowerCase().indexOf(Ie.toLowerCase())&&Ie.length>0&&ye.current.setSelectionRange(Ie.length,c.length)}}})),Qe=r.useCallback((function(){if($e){var e=ee?Ae[0]:Ae;if(0!==qe.length&&null!=e){if(be.current)if(null==e)Pe.current>=qe.length-1?Ye({index:qe.length-1}):Ye({index:Pe.current});else{var t=qe[Pe.current];if(ee&&t&&-1!==Wl(Ae,(function(e){return Q(t,e)})))return;var n=Wl(qe,(function(t){return Q(t,e)}));-1===n?Ze({diff:"reset"}):Ye({index:n})}}else Ze({diff:"reset"})}}),[qe.length,!ee&&Ae,B,Ze,Ye,$e,Ie,ee]),Je=Xi((function(e){I(be,e),e&&Qe()}));r.useEffect((function(){Qe()}),[Qe]);var et=function(e){je||(He(!0),Ge(!0),oe&&oe(e))},tt=function(e,t){je&&(He(!1),ne&&ne(e,t))},nt=function(e,t,n,r){if(ee){if(Ae.length===t.length&&Ae.every((function(e,n){return e===t[n]})))return}else if(Ae===t)return;te&&te(e,t,n,r),Te(t)},rt=r.useRef(!1),it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",i=n,o=t;if(ee){var a=Wl(o=Array.isArray(Ae)?Ae.slice():[],(function(e){return Q(t,e)}));-1===a?o.push(t):"freeSolo"!==r&&(o.splice(a,1),i="removeOption")}Ne(e,o),nt(e,o,i,{option:t}),M||e&&(e.ctrlKey||e.metaKey)||tt(e,i),(!0===m||"touch"===m&&rt.current||"mouse"===m&&!rt.current)&&ye.current.blur()};var ot=function(e,t){if(ee){""===Ie&&tt(e,"toggleInput");var n=Ce;-1===Ce?""===Ie&&"previous"===t&&(n=Ae.length-1):((n+="next"===t?1:-1)<0&&(n=0),n===Ae.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;for(var n=e;;){if("next"===t&&n===Ae.length||"previous"===t&&-1===n)return-1;var r=we.querySelector('[data-tag-index="'.concat(n,'"]'));if(r&&r.hasAttribute("tabindex")&&!r.disabled&&"true"!==r.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),Ee(n),Ke(n)}},at=function(e){ge.current=!0,Oe(""),ie&&ie(e,"","clear"),nt(e,ee?[]:null,"clear")},st=function(e){return function(t){if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Ce&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(Ee(-1),Ke(-1)),229!==t.which))switch(t.key){case"Home":$e&&$&&(t.preventDefault(),Ze({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":$e&&$&&(t.preventDefault(),Ze({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),Ze({diff:-5,direction:"previous",reason:"keyboard",event:t}),et(t);break;case"PageDown":t.preventDefault(),Ze({diff:5,direction:"next",reason:"keyboard",event:t}),et(t);break;case"ArrowDown":t.preventDefault(),Ze({diff:1,direction:"next",reason:"keyboard",event:t}),et(t);break;case"ArrowUp":t.preventDefault(),Ze({diff:-1,direction:"previous",reason:"keyboard",event:t}),et(t);break;case"ArrowLeft":ot(t,"previous");break;case"ArrowRight":ot(t,"next");break;case"Enter":if(-1!==Pe.current&&$e){var n=qe[Pe.current],r=!!H&&H(n);if(t.preventDefault(),r)return;it(t,n,"selectOption"),l&&ye.current.setSelectionRange(ye.current.value.length,ye.current.value.length)}else j&&""!==Ie&&!1===We&&(ee&&t.preventDefault(),it(t,Ie,"createOption","freeSolo"));break;case"Escape":$e?(t.preventDefault(),t.stopPropagation(),tt(t,"escape")):b&&(""!==Ie||ee&&Ae.length>0)&&(t.preventDefault(),t.stopPropagation(),at(t));break;case"Backspace":if(ee&&!de&&""===Ie&&Ae.length>0){var i=-1===Ce?Ae.length-1:Ce,o=Ae.slice();o.splice(i,1),nt(t,o,"removeOption",{option:Ae[i]})}break;case"Delete":if(ee&&!de&&""===Ie&&Ae.length>0&&-1!==Ce){var a=Ce,s=Ae.slice();s.splice(a,1),nt(t,s,"removeOption",{option:Ae[a]})}}}},lt=function(e){Fe(!0),le&&!ge.current&&et(e)},ut=function(e){i(be)?ye.current.focus():(Fe(!1),ve.current=!0,ge.current=!1,p&&-1!==Pe.current&&$e?it(e,qe[Pe.current],"blur"):p&&j&&""!==Ie?it(e,Ie,"blur","freeSolo"):v&&Ne(e,Ae),tt(e,"blur"))},ct=function(e){var t=e.target.value;Ie!==t&&(Oe(t),Ge(!1),ie&&ie(e,t,"input")),""===t?k||ee||nt(e,null,"clear"):et(e)},dt=function(e){Ye({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},ft=function(){rt.current=!0},pt=function(e){var t=Number(e.currentTarget.getAttribute("data-option-index"));it(e,qe[t],"selectOption"),rt.current=!1},ht=function(e){return function(t){var n=Ae.slice();n.splice(e,1),nt(t,n,"removeOption",{option:Ae[e]})}},mt=function(e){je?tt(e,"toggleInput"):et(e)},gt=function(e){e.target.getAttribute("id")!==me&&e.preventDefault()},vt=function(){ye.current.focus(),pe&&ve.current&&ye.current.selectionEnd-ye.current.selectionStart===0&&ye.current.select(),ve.current=!1},yt=function(e){""!==Ie&&je||mt(e)},bt=j&&Ie.length>0;bt=bt||(ee?Ae.length>0:null!==Ae);var xt=qe;if(G){new Map;xt=qe.reduce((function(e,t,n){var r=G(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return A&&De&&ut(),{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E({"aria-owns":Xe?"".concat(me,"-listbox"):null},e,{onKeyDown:st(e),onMouseDown:gt,onClick:vt})},getInputLabelProps:function(){return{id:"".concat(me,"-label"),htmlFor:me}},getInputProps:function(){return{id:me,value:Ie,onBlur:ut,onFocus:lt,onChange:ct,onMouseDown:yt,"aria-activedescendant":$e?"":null,"aria-autocomplete":l?"both":"list","aria-controls":Xe?"".concat(me,"-listbox"):void 0,"aria-expanded":Xe,autoComplete:"off",ref:ye,autoCapitalize:"none",spellCheck:"false",role:"combobox"}},getClearProps:function(){return{tabIndex:-1,onClick:at}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:mt}},getTagProps:function(e){var t=e.index;return E({key:t,"data-tag-index":t,tabIndex:-1},!de&&{onDelete:ht(t)})},getListboxProps:function(){return{role:"listbox",id:"".concat(me,"-listbox"),"aria-labelledby":"".concat(me,"-label"),ref:Je,onMouseDown:function(e){e.preventDefault()}}},getOptionProps:function(e){var n=e.index,r=e.option,i=(ee?Ae:[Ae]).some((function(e){return null!=e&&Q(r,e)})),o=!!H&&H(r);return{key:t(r),tabIndex:-1,role:"option",id:"".concat(me,"-option-").concat(n),onMouseOver:dt,onClick:pt,onTouchStart:ft,"data-option-index":n,"aria-disabled":o,"aria-selected":i}},id:me,inputValue:Ie,value:Ae,dirty:bt,popupOpen:$e,focused:De||-1!==Ce,anchorEl:we,setAnchorEl:_e,focusedTag:Ce,groupedOptions:xt}}function Kl(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Yl(e){return e instanceof Kl(e).Element||e instanceof Element}function Zl(e){return e instanceof Kl(e).HTMLElement||e instanceof HTMLElement}function Ql(e){return"undefined"!==typeof ShadowRoot&&(e instanceof Kl(e).ShadowRoot||e instanceof ShadowRoot)}var Jl=Math.max,eu=Math.min,tu=Math.round;function nu(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function ru(){return!/^((?!chrome|android).)*safari/i.test(nu())}function iu(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&Zl(e)&&(i=e.offsetWidth>0&&tu(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&tu(r.height)/e.offsetHeight||1);var a=(Yl(e)?Kl(e):window).visualViewport,s=!ru()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,u=(r.top+(s&&a?a.offsetTop:0))/o,c=r.width/i,d=r.height/o;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l,x:l,y:u}}function ou(e){var t=Kl(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function au(e){return e?(e.nodeName||"").toLowerCase():null}function su(e){return((Yl(e)?e.ownerDocument:e.document)||window.document).documentElement}function lu(e){return iu(su(e)).left+ou(e).scrollLeft}function uu(e){return Kl(e).getComputedStyle(e)}function cu(e){var t=uu(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function du(e,t,n){void 0===n&&(n=!1);var r=Zl(t),i=Zl(t)&&function(e){var t=e.getBoundingClientRect(),n=tu(t.width)/e.offsetWidth||1,r=tu(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=su(t),a=iu(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==au(t)||cu(o))&&(s=function(e){return e!==Kl(e)&&Zl(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:ou(e);var t}(t)),Zl(t)?((l=iu(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=lu(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function fu(e){var t=iu(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function pu(e){return"html"===au(e)?e:e.assignedSlot||e.parentNode||(Ql(e)?e.host:null)||su(e)}function hu(e){return["html","body","#document"].indexOf(au(e))>=0?e.ownerDocument.body:Zl(e)&&cu(e)?e:hu(pu(e))}function mu(e,t){var n;void 0===t&&(t=[]);var r=hu(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=Kl(r),a=i?[o].concat(o.visualViewport||[],cu(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(mu(pu(a)))}function gu(e){return["table","td","th"].indexOf(au(e))>=0}function vu(e){return Zl(e)&&"fixed"!==uu(e).position?e.offsetParent:null}function yu(e){for(var t=Kl(e),n=vu(e);n&&gu(n)&&"static"===uu(n).position;)n=vu(n);return n&&("html"===au(n)||"body"===au(n)&&"static"===uu(n).position)?t:n||function(e){var t=/firefox/i.test(nu());if(/Trident/i.test(nu())&&Zl(e)&&"fixed"===uu(e).position)return null;var n=pu(e);for(Ql(n)&&(n=n.host);Zl(n)&&["html","body"].indexOf(au(n))<0;){var r=uu(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var bu="top",xu="bottom",wu="right",_u="left",Su="auto",Cu=[bu,xu,wu,_u],Eu="start",ku="end",Pu="viewport",Mu="popper",Au=Cu.reduce((function(e,t){return e.concat([t+"-"+Eu,t+"-"+ku])}),[]),Tu=[].concat(Cu,[Su]).reduce((function(e,t){return e.concat([t,t+"-"+Eu,t+"-"+ku])}),[]),Ru=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Iu(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function Ou(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Lu={placement:"bottom",modifiers:[],strategy:"absolute"};function Du(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Fu(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?Lu:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Lu,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;u(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:Yl(e)?mu(e):e.contextElement?mu(e.contextElement):[],popper:mu(t)};var c=function(e){var t=Iu(e);return Ru.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=c.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:l,options:r}),u=function(){};a.push(s||u)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(Du(t,n)){i.rects={reference:du(t,yu(n),"fixed"===i.options.strategy),popper:fu(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,u=o.options,c=void 0===u?{}:u,d=o.name;"function"===typeof a&&(i=a({state:i,options:c,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:Ou((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){u(),s=!0}};if(!Du(e,t))return l;function u(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var Nu={passive:!0};var Bu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=Kl(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach((function(e){e.addEventListener("scroll",n.update,Nu)})),s&&l.addEventListener("resize",n.update,Nu),function(){o&&u.forEach((function(e){e.removeEventListener("scroll",n.update,Nu)})),s&&l.removeEventListener("resize",n.update,Nu)}},data:{}};function zu(e){return e.split("-")[0]}function ju(e){return e.split("-")[1]}function Hu(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Uu(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?zu(i):null,a=i?ju(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case bu:t={x:s,y:n.y-r.height};break;case xu:t={x:s,y:n.y+n.height};break;case wu:t={x:n.x+n.width,y:l};break;case _u:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var u=o?Hu(o):null;if(null!=u){var c="y"===u?"height":"width";switch(a){case Eu:t[u]=t[u]-(n[c]/2-r[c]/2);break;case ku:t[u]=t[u]+(n[c]/2-r[c]/2)}}return t}var Vu={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Uu({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Gu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wu(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=a.x,p=void 0===f?0:f,h=a.y,m=void 0===h?0:h,g="function"===typeof c?c({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),b=_u,x=bu,w=window;if(u){var _=yu(n),S="clientHeight",C="clientWidth";if(_===Kl(n)&&"static"!==uu(_=su(n)).position&&"absolute"===s&&(S="scrollHeight",C="scrollWidth"),i===bu||(i===_u||i===wu)&&o===ku)x=xu,m-=(d&&_===w&&w.visualViewport?w.visualViewport.height:_[S])-r.height,m*=l?1:-1;if(i===_u||(i===bu||i===xu)&&o===ku)b=wu,p-=(d&&_===w&&w.visualViewport?w.visualViewport.width:_[C])-r.width,p*=l?1:-1}var E,k=Object.assign({position:s},u&&Gu),P=!0===c?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:tu(t*r)/r||0,y:tu(n*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=P.x,m=P.y,l?Object.assign({},k,((E={})[x]=y?"0":"",E[b]=v?"0":"",E.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",E)):Object.assign({},k,((t={})[x]=y?m+"px":"",t[b]=v?p+"px":"",t.transform="",t))}var $u={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];Zl(i)&&au(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Zl(r)&&au(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var qu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=Tu.reduce((function(e,n){return e[n]=function(e,t,n){var r=zu(e),i=[_u,bu].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[_u,wu].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,u=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=a}},Xu={left:"right",right:"left",bottom:"top",top:"bottom"};function Ku(e){return e.replace(/left|right|bottom|top/g,(function(e){return Xu[e]}))}var Yu={start:"end",end:"start"};function Zu(e){return e.replace(/start|end/g,(function(e){return Yu[e]}))}function Qu(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Ql(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ju(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ec(e,t,n){return t===Pu?Ju(function(e,t){var n=Kl(e),r=su(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var u=ru();(u||!u&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+lu(e),y:l}}(e,n)):Yl(t)?function(e,t){var n=iu(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Ju(function(e){var t,n=su(e),r=ou(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=Jl(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Jl(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+lu(e),l=-r.scrollTop;return"rtl"===uu(i||n).direction&&(s+=Jl(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(su(e)))}function tc(e,t,n,r){var i="clippingParents"===t?function(e){var t=mu(pu(e)),n=["absolute","fixed"].indexOf(uu(e).position)>=0&&Zl(e)?yu(e):e;return Yl(n)?t.filter((function(e){return Yl(e)&&Qu(e,n)&&"body"!==au(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(t,n){var i=ec(e,n,r);return t.top=Jl(i.top,t.top),t.right=eu(i.right,t.right),t.bottom=eu(i.bottom,t.bottom),t.left=Jl(i.left,t.left),t}),ec(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function nc(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function rc(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ic(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?"clippingParents":s,u=n.rootBoundary,c=void 0===u?Pu:u,d=n.elementContext,f=void 0===d?Mu:d,p=n.altBoundary,h=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=nc("number"!==typeof g?g:rc(g,Cu)),y=f===Mu?"reference":Mu,b=e.rects.popper,x=e.elements[h?y:f],w=tc(Yl(x)?x:x.contextElement||su(e.elements.popper),l,c,a),_=iu(e.elements.reference),S=Uu({reference:_,element:b,strategy:"absolute",placement:i}),C=Ju(Object.assign({},b,S)),E=f===Mu?C:_,k={top:w.top-E.top+v.top,bottom:E.bottom-w.bottom+v.bottom,left:w.left-E.left+v.left,right:E.right-w.right+v.right},P=e.modifiersData.offset;if(f===Mu&&P){var M=P[i];Object.keys(k).forEach((function(e){var t=[wu,xu].indexOf(e)>=0?1:-1,n=[bu,xu].indexOf(e)>=0?"y":"x";k[e]+=M[n]*t}))}return k}var oc={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,h=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=zu(g),y=l||(v===g||!h?[Ku(g)]:function(e){if(zu(e)===Su)return[];var t=Ku(e);return[Zu(e),t,Zu(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(zu(n)===Su?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=void 0===l?Tu:l,c=ju(r),d=c?s?Au:Au.filter((function(e){return ju(e)===c})):Cu,f=d.filter((function(e){return u.indexOf(e)>=0}));0===f.length&&(f=d);var p=f.reduce((function(t,n){return t[n]=ic(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[zu(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:c,rootBoundary:d,padding:u,flipVariations:h,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,w=t.rects.popper,_=new Map,S=!0,C=b[0],E=0;E<b.length;E++){var k=b[E],P=zu(k),M=ju(k)===Eu,A=[bu,xu].indexOf(P)>=0,T=A?"width":"height",R=ic(t,{placement:k,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),I=A?M?wu:_u:M?xu:bu;x[T]>w[T]&&(I=Ku(I));var O=Ku(I),L=[];if(o&&L.push(R[P]<=0),s&&L.push(R[I]<=0,R[O]<=0),L.every((function(e){return e}))){C=k,S=!1;break}_.set(k,L)}if(S)for(var D=function(e){var t=b.find((function(t){var n=_.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},F=h?3:1;F>0;F--){if("break"===D(F))break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ac(e,t,n){return Jl(e,eu(t,n))}var sc={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,p=void 0===f||f,h=n.tetherOffset,m=void 0===h?0:h,g=ic(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),v=zu(t.placement),y=ju(t.placement),b=!y,x=Hu(v),w="x"===x?"y":"x",_=t.modifiersData.popperOffsets,S=t.rects.reference,C=t.rects.popper,E="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,k="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),P=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(_){if(o){var A,T="y"===x?bu:_u,R="y"===x?xu:wu,I="y"===x?"height":"width",O=_[x],L=O+g[T],D=O-g[R],F=p?-C[I]/2:0,N=y===Eu?S[I]:C[I],B=y===Eu?-C[I]:-S[I],z=t.elements.arrow,j=p&&z?fu(z):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=H[T],V=H[R],G=ac(0,S[I],j[I]),W=b?S[I]/2-F-G-U-k.mainAxis:N-G-U-k.mainAxis,$=b?-S[I]/2+F+G+V+k.mainAxis:B+G+V+k.mainAxis,q=t.elements.arrow&&yu(t.elements.arrow),X=q?"y"===x?q.clientTop||0:q.clientLeft||0:0,K=null!=(A=null==P?void 0:P[x])?A:0,Y=O+$-K,Z=ac(p?eu(L,O+W-K-X):L,O,p?Jl(D,Y):D);_[x]=Z,M[x]=Z-O}if(s){var Q,J="x"===x?bu:_u,ee="x"===x?xu:wu,te=_[w],ne="y"===w?"height":"width",re=te+g[J],ie=te-g[ee],oe=-1!==[bu,_u].indexOf(v),ae=null!=(Q=null==P?void 0:P[w])?Q:0,se=oe?re:te-S[ne]-C[ne]-ae+k.altAxis,le=oe?te+S[ne]+C[ne]-ae-k.altAxis:ie,ue=p&&oe?function(e,t,n){var r=ac(e,t,n);return r>n?n:r}(se,te,le):ac(p?se:re,te,p?le:ie);_[w]=ue,M[w]=ue-te}t.modifiersData[r]=M}},requiresIfExists:["offset"]};var lc={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=zu(n.placement),l=Hu(s),u=[_u,wu].indexOf(s)>=0?"height":"width";if(o&&a){var c=function(e,t){return nc("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:rc(e,Cu))}(i.padding,n),d=fu(o),f="y"===l?bu:_u,p="y"===l?xu:wu,h=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],m=a[l]-n.rects.reference[l],g=yu(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=h/2-m/2,b=c[f],x=v-d[u]-c[p],w=v/2-d[u]/2+y,_=ac(b,w,x),S=l;n.modifiersData[r]=((t={})[S]=_,t.centerOffset=_-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&Qu(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function uc(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function cc(e){return[bu,wu,xu,_u].some((function(t){return e[t]>=0}))}var dc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=ic(t,{elementContext:"reference"}),s=ic(t,{altBoundary:!0}),l=uc(a,r),u=uc(s,i,o),c=cc(l),d=cc(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}},fc=Fu({defaultModifiers:[Bu,Vu,{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,u={placement:zu(t.placement),variation:ju(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Wu(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Wu(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},$u,qu,oc,sc,lc,dc]});var pc=r.forwardRef((function(e,t){var n=e.children,i=e.container,o=e.disablePortal,a=void 0!==o&&o,s=c(r.useState(null),2),l=s[0],u=s[1],d=O(r.isValidElement(n)?n.ref:null,t);if(D((function(){a||u(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,a]),D((function(){if(l&&!a)return I(t,l),function(){I(t,null)}}),[t,l,a]),a){if(r.isValidElement(n)){var f={ref:d};return r.cloneElement(n,f)}return(0,_.jsx)(r.Fragment,{children:n})}return(0,_.jsx)(r.Fragment,{children:l?fa.createPortal(n,l):l})}));function hc(e){return Or("MuiPopperUnstyled",e)}Lr("MuiPopperUnstyled",["root"]);function mc(e,t,n){return void 0===e||xa(e)?t:E({},t,{ownerState:E({},t.ownerState,n)})}function gc(e){if(void 0===e)return{};var t={};return Object.keys(e).filter((function(t){return!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])})).forEach((function(n){t[n]=e[n]})),t}function vc(e){var t=e.getSlotProps,n=e.additionalProps,r=e.externalSlotProps,i=e.externalForwardedProps,o=e.className;if(!t){var a=M(null==i?void 0:i.className,null==r?void 0:r.className,o,null==n?void 0:n.className),s=E({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),l=E({},n,i,r);return a.length>0&&(l.className=a),Object.keys(s).length>0&&(l.style=s),{props:l,internalRef:void 0}}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var n={};return Object.keys(e).filter((function(n){return n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n)})).forEach((function(t){n[t]=e[t]})),n}(E({},i,r)),c=gc(r),d=gc(i),f=t(u),p=M(null==f?void 0:f.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),h=E({},null==f?void 0:f.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),m=E({},f,n,d,c);return p.length>0&&(m.className=p),Object.keys(h).length>0&&(m.style=h),{props:m,internalRef:f.ref}}function yc(e,t){return"function"===typeof e?e(t):e}var bc=["elementType","externalSlotProps","ownerState"];function xc(e){var t,n=e.elementType,r=e.externalSlotProps,i=e.ownerState,o=k(e,bc),a=yc(r,i),s=vc(E({},o,{externalSlotProps:a}));return mc(n,E({},s.props,{ref:O(s.internalRef,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref)}),i)}var wc=["anchorEl","children","component","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","slotProps","slots","TransitionProps"],_c=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Sc(e){return"function"===typeof e?e():e}function Cc(e){return void 0!==e.nodeType}var Ec={},kc=r.forwardRef((function(e,t){var n,i=e.anchorEl,o=e.children,a=e.component,s=e.direction,l=e.disablePortal,u=e.modifiers,d=e.open,f=e.ownerState,p=e.placement,h=e.popperOptions,m=e.popperRef,g=e.slotProps,v=void 0===g?{}:g,y=e.slots,b=void 0===y?{}:y,x=e.TransitionProps,w=k(e,wc),S=r.useRef(null),C=O(S,t),P=r.useRef(null),M=O(P,m),A=r.useRef(M);D((function(){A.current=M}),[M]),r.useImperativeHandle(m,(function(){return P.current}),[]);var T=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(p,s),R=c(r.useState(T),2),I=R[0],L=R[1],F=c(r.useState(Sc(i)),2),B=F[0],z=F[1];r.useEffect((function(){P.current&&P.current.forceUpdate()})),r.useEffect((function(){i&&z(Sc(i))}),[i]),D((function(){if(B&&d){var e=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:function(e){var t=e.state;L(t.placement)}}];null!=u&&(e=e.concat(u)),h&&null!=h.modifiers&&(e=e.concat(h.modifiers));var t=fc(B,S.current,E({placement:T},h,{modifiers:e}));return A.current(t),function(){t.destroy(),A.current(null)}}}),[B,l,u,d,h,T]);var j={placement:I};null!==x&&(j.TransitionProps=x);var H=N({root:["root"]},hc,{}),U=null!=(n=null!=a?a:b.root)?n:"div",V=xc({elementType:U,externalSlotProps:v.root,externalForwardedProps:w,additionalProps:{role:"tooltip",ref:C},ownerState:E({},e,f),className:H.root});return(0,_.jsx)(U,E({},V,{children:"function"===typeof o?o(j):o}))})),Pc=r.forwardRef((function(e,t){var n,i=e.anchorEl,o=e.children,a=e.container,s=e.direction,l=void 0===s?"ltr":s,u=e.disablePortal,d=void 0!==u&&u,f=e.keepMounted,p=void 0!==f&&f,h=e.modifiers,m=e.open,g=e.placement,v=void 0===g?"bottom":g,y=e.popperOptions,b=void 0===y?Ec:y,x=e.popperRef,w=e.style,S=e.transition,C=void 0!==S&&S,P=e.slotProps,M=void 0===P?{}:P,A=e.slots,T=void 0===A?{}:A,R=k(e,_c),I=c(r.useState(!0),2),O=I[0],L=I[1];if(!p&&!m&&(!C||O))return null;if(a)n=a;else if(i){var D=Sc(i);n=D&&Cc(D)?Yi(D).body:Yi(null).body}var F=m||!p||C&&!O?void 0:"none",N=C?{in:m,onEnter:function(){L(!1)},onExited:function(){L(!0)}}:void 0;return(0,_.jsx)(pc,{disablePortal:d,container:n,children:(0,_.jsx)(kc,E({anchorEl:i,direction:l,disablePortal:d,modifiers:h,ref:t,open:C?!O:m,placement:v,popperOptions:b,popperRef:x,slotProps:M,slots:T},R,{style:E({position:"fixed",top:0,left:0,display:F},w),TransitionProps:N,children:o}))})})),Mc=["components","componentsProps","slots","slotProps"],Ac=Ar(Pc,{name:"MuiPopper",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Tc=r.forwardRef((function(e,t){var n,r=Ma(),i=Ia({props:e,name:"MuiPopper"}),o=i.components,a=i.componentsProps,s=i.slots,l=i.slotProps,u=k(i,Mc),c=null!=(n=null==s?void 0:s.root)?n:null==o?void 0:o.Root;return(0,_.jsx)(Ac,E({direction:null==r?void 0:r.direction,slots:{root:c},slotProps:null!=l?l:a},u,{ref:t}))}));function Rc(e){return Or("MuiListSubheader",e)}Lr("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var Ic=["className","color","component","disableGutters","disableSticky","inset"],Oc=Ar("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat(R(n.color))],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((function(e){var t=e.theme,n=e.ownerState;return E({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:(t.vars||t).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),Lc=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiListSubheader"}),r=n.className,i=n.color,o=void 0===i?"default":i,a=n.component,s=void 0===a?"li":a,l=n.disableGutters,u=void 0!==l&&l,c=n.disableSticky,d=void 0!==c&&c,f=n.inset,p=void 0!==f&&f,h=k(n,Ic),m=E({},n,{color:o,component:s,disableGutters:u,disableSticky:d,inset:p}),g=function(e){var t=e.classes,n=e.color,r=e.disableGutters,i=e.inset,o=e.disableSticky;return N({root:["root","default"!==n&&"color".concat(R(n)),!r&&"gutters",i&&"inset",!o&&"sticky"]},Rc,t)}(m);return(0,_.jsx)(Oc,E({as:s,className:M(g.root,r),ref:t,ownerState:m},h))})),Dc=Lc,Fc=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)};function Nc(e){return Or("MuiPaper",e)}Lr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var Bc=["className","component","elevation","square","variant"],zc=Ar("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return E({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&E({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat(Xn("#fff",Fc(r.elevation)),", ").concat(Xn("#fff",Fc(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),jc=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiPaper"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=n.elevation,s=void 0===a?1:a,l=n.square,u=void 0!==l&&l,c=n.variant,d=void 0===c?"elevation":c,f=k(n,Bc),p=E({},n,{component:o,elevation:s,square:u,variant:d}),h=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes;return N({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},Nc,i)}(p);return(0,_.jsx)(zc,E({as:o,ownerState:p,className:M(h.root,r),ref:t},f))}));function Hc(e){return Or("MuiIconButton",e)}var Uc=Lr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Vc=["edge","children","className","color","disabled","disableFocusRipple","size"],Gc=Ar(gl,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat(R(n.color))],n.edge&&t["edge".concat(R(n.edge))],t["size".concat(R(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return E({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Xn(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t,n=e.theme,r=e.ownerState,i=null==(t=(n.vars||n).palette)?void 0:t[r.color];return E({},"inherit"===r.color&&{color:"inherit"},"inherit"!==r.color&&"default"!==r.color&&E({color:null==i?void 0:i.main},!r.disableRipple&&{"&:hover":E({},i&&{backgroundColor:n.vars?"rgba(".concat(i.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Xn(i.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===r.size&&{padding:5,fontSize:n.typography.pxToRem(18)},"large"===r.size&&{padding:12,fontSize:n.typography.pxToRem(28)},p({},"&.".concat(Uc.disabled),{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}))})),Wc=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,o=n.children,a=n.className,s=n.color,l=void 0===s?"default":s,u=n.disabled,c=void 0!==u&&u,d=n.disableFocusRipple,f=void 0!==d&&d,p=n.size,h=void 0===p?"medium":p,m=k(n,Vc),g=E({},n,{edge:i,color:l,disabled:c,disableFocusRipple:f,size:h}),v=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,o=e.size;return N({root:["root",n&&"disabled","default"!==r&&"color".concat(R(r)),i&&"edge".concat(R(i)),"size".concat(R(o))]},Hc,t)}(g);return(0,_.jsx)(Gc,E({className:M(v.root,a),centerRipple:!0,focusRipple:!f,disabled:c,ref:t,ownerState:g},m,{children:o}))})),$c=Wc,qc=ts((0,_.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Xc(e){return Or("MuiChip",e)}var Kc=Lr("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Yc=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Zc=Ar("div",{name:"MuiChip",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.color,i=n.iconColor,o=n.clickable,a=n.onDelete,s=n.size,l=n.variant;return[p({},"& .".concat(Kc.avatar),t.avatar),p({},"& .".concat(Kc.avatar),t["avatar".concat(R(s))]),p({},"& .".concat(Kc.avatar),t["avatarColor".concat(R(r))]),p({},"& .".concat(Kc.icon),t.icon),p({},"& .".concat(Kc.icon),t["icon".concat(R(s))]),p({},"& .".concat(Kc.icon),t["iconColor".concat(R(i))]),p({},"& .".concat(Kc.deleteIcon),t.deleteIcon),p({},"& .".concat(Kc.deleteIcon),t["deleteIcon".concat(R(s))]),p({},"& .".concat(Kc.deleteIcon),t["deleteIconColor".concat(R(r))]),p({},"& .".concat(Kc.deleteIcon),t["deleteIcon".concat(R(l),"Color").concat(R(r))]),t.root,t["size".concat(R(s))],t["color".concat(R(r))],o&&t.clickable,o&&"default"!==r&&t["clickableColor".concat(R(r),")")],a&&t.deletable,a&&"default"!==r&&t["deletableColor".concat(R(r))],t[l],t["".concat(l).concat(R(r))]]}})((function(e){var t,n=e.theme,r=e.ownerState,i=Xn(n.palette.text.primary,.26),o="light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300];return E((p(t={maxWidth:"100%",fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(n.vars||n).palette.text.primary,backgroundColor:(n.vars||n).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},"&.".concat(Kc.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"}),p(t,"& .".concat(Kc.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:n.vars?n.vars.palette.Chip.defaultAvatarColor:o,fontSize:n.typography.pxToRem(12)}),p(t,"& .".concat(Kc.avatarColorPrimary),{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.dark}),p(t,"& .".concat(Kc.avatarColorSecondary),{color:(n.vars||n).palette.secondary.contrastText,backgroundColor:(n.vars||n).palette.secondary.dark}),p(t,"& .".concat(Kc.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)}),p(t,"& .".concat(Kc.icon),E({marginLeft:5,marginRight:-6},"small"===r.size&&{fontSize:18,marginLeft:4,marginRight:-4},r.iconColor===r.color&&E({color:n.vars?n.vars.palette.Chip.defaultIconColor:o},"default"!==r.color&&{color:"inherit"}))),p(t,"& .".concat(Kc.deleteIcon),E({WebkitTapHighlightColor:"transparent",color:n.vars?"rgba(".concat(n.vars.palette.text.primaryChannel," / 0.26)"):i,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:n.vars?"rgba(".concat(n.vars.palette.text.primaryChannel," / 0.4)"):Xn(i,.4)}},"small"===r.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==r.color&&{color:n.vars?"rgba(".concat(n.vars.palette[r.color].contrastTextChannel," / 0.7)"):Xn(n.palette[r.color].contrastText,.7),"&:hover, &:active":{color:(n.vars||n).palette[r.color].contrastText}})),t),"small"===r.size&&{height:24},"default"!==r.color&&{backgroundColor:(n.vars||n).palette[r.color].main,color:(n.vars||n).palette[r.color].contrastText},r.onDelete&&p({},"&.".concat(Kc.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):Xn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),r.onDelete&&"default"!==r.color&&p({},"&.".concat(Kc.focusVisible),{backgroundColor:(n.vars||n).palette[r.color].dark}))}),(function(e){var t,n=e.theme,r=e.ownerState;return E({},r.clickable&&(p(t={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):Xn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)}},"&.".concat(Kc.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):Xn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),p(t,"&:active",{boxShadow:(n.vars||n).shadows[1]}),t),r.clickable&&"default"!==r.color&&p({},"&:hover, &.".concat(Kc.focusVisible),{backgroundColor:(n.vars||n).palette[r.color].dark}))}),(function(e){var t,n,r=e.theme,i=e.ownerState;return E({},"outlined"===i.variant&&(p(t={backgroundColor:"transparent",border:r.vars?"1px solid ".concat(r.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===r.palette.mode?r.palette.grey[400]:r.palette.grey[700])},"&.".concat(Kc.clickable,":hover"),{backgroundColor:(r.vars||r).palette.action.hover}),p(t,"&.".concat(Kc.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),p(t,"& .".concat(Kc.avatar),{marginLeft:4}),p(t,"& .".concat(Kc.avatarSmall),{marginLeft:2}),p(t,"& .".concat(Kc.icon),{marginLeft:4}),p(t,"& .".concat(Kc.iconSmall),{marginLeft:2}),p(t,"& .".concat(Kc.deleteIcon),{marginRight:5}),p(t,"& .".concat(Kc.deleteIconSmall),{marginRight:3}),t),"outlined"===i.variant&&"default"!==i.color&&(p(n={color:(r.vars||r).palette[i.color].main,border:"1px solid ".concat(r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / 0.7)"):Xn(r.palette[i.color].main,.7))},"&.".concat(Kc.clickable,":hover"),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):Xn(r.palette[i.color].main,r.palette.action.hoverOpacity)}),p(n,"&.".concat(Kc.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / ").concat(r.vars.palette.action.focusOpacity,")"):Xn(r.palette[i.color].main,r.palette.action.focusOpacity)}),p(n,"& .".concat(Kc.deleteIcon),{color:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / 0.7)"):Xn(r.palette[i.color].main,.7),"&:hover, &:active":{color:(r.vars||r).palette[i.color].main}}),n))})),Qc=Ar("span",{name:"MuiChip",slot:"Label",overridesResolver:function(e,t){var n=e.ownerState.size;return[t.label,t["label".concat(R(n))]]}})((function(e){return E({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===e.ownerState.size&&{paddingLeft:8,paddingRight:8})}));function Jc(e){return"Backspace"===e.key||"Delete"===e.key}var ed=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiChip"}),i=n.avatar,o=n.className,a=n.clickable,s=n.color,l=void 0===s?"default":s,u=n.component,c=n.deleteIcon,d=n.disabled,f=void 0!==d&&d,p=n.icon,h=n.label,m=n.onClick,g=n.onDelete,v=n.onKeyDown,y=n.onKeyUp,b=n.size,x=void 0===b?"medium":b,w=n.variant,S=void 0===w?"filled":w,C=n.tabIndex,P=n.skipFocusWhenDisabled,A=void 0!==P&&P,T=k(n,Yc),I=r.useRef(null),O=L(I,t),D=function(e){e.stopPropagation(),g&&g(e)},F=!(!1===a||!m)||a,B=F||g?gl:u||"div",z=E({},n,{component:B,disabled:f,size:x,color:l,iconColor:r.isValidElement(p)&&p.props.color||l,onDelete:!!g,clickable:F,variant:S}),j=function(e){var t=e.classes,n=e.disabled,r=e.size,i=e.color,o=e.iconColor,a=e.onDelete,s=e.clickable,l=e.variant;return N({root:["root",l,n&&"disabled","size".concat(R(r)),"color".concat(R(i)),s&&"clickable",s&&"clickableColor".concat(R(i)),a&&"deletable",a&&"deletableColor".concat(R(i)),"".concat(l).concat(R(i))],label:["label","label".concat(R(r))],avatar:["avatar","avatar".concat(R(r)),"avatarColor".concat(R(i))],icon:["icon","icon".concat(R(r)),"iconColor".concat(R(o))],deleteIcon:["deleteIcon","deleteIcon".concat(R(r)),"deleteIconColor".concat(R(i)),"deleteIcon".concat(R(l),"Color").concat(R(i))]},Xc,t)}(z),H=B===gl?E({component:u||"div",focusVisibleClassName:j.focusVisible},g&&{disableRipple:!0}):{},U=null;g&&(U=c&&r.isValidElement(c)?r.cloneElement(c,{className:M(c.props.className,j.deleteIcon),onClick:D}):(0,_.jsx)(qc,{className:M(j.deleteIcon),onClick:D}));var V=null;i&&r.isValidElement(i)&&(V=r.cloneElement(i,{className:M(j.avatar,i.props.className)}));var G=null;return p&&r.isValidElement(p)&&(G=r.cloneElement(p,{className:M(j.icon,p.props.className)})),(0,_.jsxs)(Zc,E({as:B,className:M(j.root,o),disabled:!(!F||!f)||void 0,onClick:m,onKeyDown:function(e){e.currentTarget===e.target&&Jc(e)&&e.preventDefault(),v&&v(e)},onKeyUp:function(e){e.currentTarget===e.target&&(g&&Jc(e)?g(e):"Escape"===e.key&&I.current&&I.current.blur()),y&&y(e)},ref:O,tabIndex:A&&f?-1:C,ownerState:z},H,T,{children:[V||G,(0,_.jsx)(Qc,{className:M(j.label),ownerState:z,children:h}),U]}))})),td=ed;function nd(e){return Or("MuiInput",e)}var rd=E({},Ha,Lr("MuiInput",["root","underline","input"]));function id(e){return Or("MuiOutlinedInput",e)}var od=E({},Ha,Lr("MuiOutlinedInput",["root","notchedOutline","input"]));function ad(e){return Or("MuiFilledInput",e)}var sd=E({},Ha,Lr("MuiFilledInput",["root","underline","input"])),ld=ts((0,_.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),ud=ts((0,_.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function cd(e){return Or("MuiAutocomplete",e)}var dd,fd,pd=Lr("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),hd=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],md=Ar("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.fullWidth,i=n.hasClearIcon,o=n.hasPopupIcon,a=n.inputFocused,s=n.size;return[p({},"& .".concat(pd.tag),t.tag),p({},"& .".concat(pd.tag),t["tagSize".concat(R(s))]),p({},"& .".concat(pd.inputRoot),t.inputRoot),p({},"& .".concat(pd.input),t.input),p({},"& .".concat(pd.input),a&&t.inputFocused),t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})((function(e){var t,n,r,i,o,a=e.ownerState;return E((p(t={},"&.".concat(pd.focused," .").concat(pd.clearIndicator),{visibility:"visible"}),p(t,"@media (pointer: fine)",p({},"&:hover .".concat(pd.clearIndicator),{visibility:"visible"})),t),a.fullWidth&&{width:"100%"},(p(o={},"& .".concat(pd.tag),E({margin:3,maxWidth:"calc(100% - 6px)"},"small"===a.size&&{margin:2,maxWidth:"calc(100% - 4px)"})),p(o,"& .".concat(pd.inputRoot),(p(n={flexWrap:"wrap"},".".concat(pd.hasPopupIcon,"&, .").concat(pd.hasClearIcon,"&"),{paddingRight:30}),p(n,".".concat(pd.hasPopupIcon,".").concat(pd.hasClearIcon,"&"),{paddingRight:56}),p(n,"& .".concat(pd.input),{width:0,minWidth:30}),n)),p(o,"& .".concat(rd.root),{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}}),p(o,"& .".concat(rd.root,".").concat(Ha.sizeSmall),p({},"& .".concat(rd.input),{padding:"2px 4px 3px 0"})),p(o,"& .".concat(od.root),(p(r={padding:9},".".concat(pd.hasPopupIcon,"&, .").concat(pd.hasClearIcon,"&"),{paddingRight:39}),p(r,".".concat(pd.hasPopupIcon,".").concat(pd.hasClearIcon,"&"),{paddingRight:65}),p(r,"& .".concat(pd.input),{padding:"7.5px 4px 7.5px 6px"}),p(r,"& .".concat(pd.endAdornment),{right:9}),r)),p(o,"& .".concat(od.root,".").concat(Ha.sizeSmall),p({paddingTop:6,paddingBottom:6,paddingLeft:6},"& .".concat(pd.input),{padding:"2.5px 4px 2.5px 6px"})),p(o,"& .".concat(sd.root),(p(i={paddingTop:19,paddingLeft:8},".".concat(pd.hasPopupIcon,"&, .").concat(pd.hasClearIcon,"&"),{paddingRight:39}),p(i,".".concat(pd.hasPopupIcon,".").concat(pd.hasClearIcon,"&"),{paddingRight:65}),p(i,"& .".concat(sd.input),{padding:"7px 4px"}),p(i,"& .".concat(pd.endAdornment),{right:9}),i)),p(o,"& .".concat(sd.root,".").concat(Ha.sizeSmall),p({paddingBottom:1},"& .".concat(sd.input),{padding:"2.5px 4px"})),p(o,"& .".concat(Ha.hiddenLabel),{paddingTop:8}),p(o,"& .".concat(pd.input),E({flexGrow:1,textOverflow:"ellipsis",opacity:0},a.inputFocused&&{opacity:1})),o))})),gd=Ar("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:function(e,t){return t.endAdornment}})({position:"absolute",right:0,top:"calc(50% - 14px)"}),vd=Ar($c,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:function(e,t){return t.clearIndicator}})({marginRight:-2,padding:4,visibility:"hidden"}),yd=Ar($c,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:function(e,t){var n=e.ownerState;return E({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})((function(e){return E({padding:2,marginRight:-2},e.ownerState.popupOpen&&{transform:"rotate(180deg)"})})),bd=Ar(Tc,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[p({},"& .".concat(pd.option),t.option),t.popper,n.disablePortal&&t.popperDisablePortal]}})((function(e){var t=e.theme,n=e.ownerState;return E({zIndex:(t.vars||t).zIndex.modal},n.disablePortal&&{position:"absolute"})})),xd=Ar(jc,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){return E({},e.theme.typography.body1,{overflow:"auto"})})),wd=Ar("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:function(e,t){return t.loading}})((function(e){var t=e.theme;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),_d=Ar("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:function(e,t){return t.noOptions}})((function(e){var t=e.theme;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),Sd=Ar("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:function(e,t){return t.listbox}})((function(e){var t,n,r=e.theme;return p({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative"},"& .".concat(pd.option),(p(n={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},r.breakpoints.up("sm"),{minHeight:"auto"}),p(n,"&.".concat(pd.focused),{backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}),p(n,'&[aria-disabled="true"]',{opacity:(r.vars||r).palette.action.disabledOpacity,pointerEvents:"none"}),p(n,"&.".concat(pd.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),p(n,'&[aria-selected="true"]',(p(t={backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):Xn(r.palette.primary.main,r.palette.action.selectedOpacity)},"&.".concat(pd.focused),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):Xn(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(r.vars||r).palette.action.selected}}),p(t,"&.".concat(pd.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.focusOpacity,"))"):Xn(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}),t)),n))})),Cd=Ar(Dc,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:function(e,t){return t.groupLabel}})((function(e){var t=e.theme;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}})),Ed=Ar("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:function(e,t){return t.groupUl}})(p({padding:0},"& .".concat(pd.option),{paddingLeft:24})),kd=r.forwardRef((function(e,t){var n,i,o,a,s,l=Ia({props:e,name:"MuiAutocomplete"}),u=(l.autoComplete,l.autoHighlight,l.autoSelect,l.blurOnSelect,l.ChipProps),c=l.className,d=l.clearIcon,f=void 0===d?dd||(dd=(0,_.jsx)(ld,{fontSize:"small"})):d,p=l.clearOnBlur,h=(void 0===p&&l.freeSolo,l.clearOnEscape,l.clearText),m=void 0===h?"Clear":h,g=l.closeText,v=void 0===g?"Close":g,y=l.componentsProps,b=void 0===y?{}:y,x=l.defaultValue,w=(void 0===x&&l.multiple,l.disableClearable),S=void 0!==w&&w,C=(l.disableCloseOnSelect,l.disabled),P=void 0!==C&&C,A=(l.disabledItemsFocusable,l.disableListWrap,l.disablePortal),T=void 0!==A&&A,I=(l.filterSelectedOptions,l.forcePopupIcon),O=void 0===I?"auto":I,L=l.freeSolo,D=void 0!==L&&L,F=l.fullWidth,B=void 0!==F&&F,z=l.getLimitTagsText,j=void 0===z?function(e){return"+".concat(e)}:z,H=l.getOptionLabel,U=void 0===H?function(e){var t;return null!=(t=e.label)?t:e}:H,V=l.groupBy,G=l.handleHomeEndKeys,W=(void 0===G&&l.freeSolo,l.includeInputInList,l.limitTags),$=void 0===W?-1:W,q=l.ListboxComponent,X=void 0===q?"ul":q,K=l.ListboxProps,Y=l.loading,Z=void 0!==Y&&Y,Q=l.loadingText,J=void 0===Q?"Loading\u2026":Q,ee=l.multiple,te=void 0!==ee&&ee,ne=l.noOptionsText,re=void 0===ne?"No options":ne,ie=(l.openOnFocus,l.openText),oe=void 0===ie?"Open":ie,ae=l.PaperComponent,se=void 0===ae?jc:ae,le=l.PopperComponent,ue=void 0===le?Tc:le,ce=l.popupIcon,de=void 0===ce?fd||(fd=(0,_.jsx)(ud,{})):ce,fe=l.readOnly,pe=void 0!==fe&&fe,he=l.renderGroup,me=l.renderInput,ge=l.renderOption,ve=l.renderTags,ye=l.selectOnFocus,be=(void 0===ye&&l.freeSolo,l.size),xe=void 0===be?"medium":be,we=l.slotProps,_e=void 0===we?{}:we,Se=k(l,hd),Ce=Xl(E({},l,{componentName:"Autocomplete"})),Ee=Ce.getRootProps,ke=Ce.getInputProps,Pe=Ce.getInputLabelProps,Me=Ce.getPopupIndicatorProps,Ae=Ce.getClearProps,Te=Ce.getTagProps,Re=Ce.getListboxProps,Ie=Ce.getOptionProps,Oe=Ce.value,Le=Ce.dirty,De=Ce.id,Fe=Ce.popupOpen,Ne=Ce.focused,Be=Ce.focusedTag,ze=Ce.anchorEl,je=Ce.setAnchorEl,He=Ce.inputValue,Ue=Ce.groupedOptions,Ve=!S&&!P&&Le&&!pe,Ge=(!D||!0===O)&&!1!==O,We=E({},l,{disablePortal:T,focused:Ne,fullWidth:B,hasClearIcon:Ve,hasPopupIcon:Ge,inputFocused:-1===Be,popupOpen:Fe,size:xe}),$e=function(e){var t=e.classes,n=e.disablePortal,r=e.focused,i=e.fullWidth,o=e.hasClearIcon,a=e.hasPopupIcon,s=e.inputFocused,l=e.popupOpen,u=e.size;return N({root:["root",r&&"focused",i&&"fullWidth",o&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",s&&"inputFocused"],tag:["tag","tagSize".concat(R(u))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",l&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]},cd,t)}(We);if(te&&Oe.length>0){var qe=function(e){return E({className:$e.tag,disabled:P},Te(e))};s=ve?ve(Oe,qe,We):Oe.map((function(e,t){return(0,_.jsx)(td,E({label:U(e),size:xe},qe({index:t}),u))}))}if($>-1&&Array.isArray(s)){var Xe=s.length-$;!Ne&&Xe>0&&(s=s.splice(0,$)).push((0,_.jsx)("span",{className:$e.tag,children:j(Xe)},s.length))}var Ke=he||function(e){return(0,_.jsxs)("li",{children:[(0,_.jsx)(Cd,{className:$e.groupLabel,ownerState:We,component:"div",children:e.group}),(0,_.jsx)(Ed,{className:$e.groupUl,ownerState:We,children:e.children})]},e.key)},Ye=ge||function(e,t){return(0,_.jsx)("li",E({},e,{children:U(t)}))},Ze=function(e,t){var n=Ie({option:e,index:t});return Ye(E({},n,{className:$e.option}),e,{selected:n["aria-selected"],index:t,inputValue:He})},Qe=null!=(n=_e.clearIndicator)?n:b.clearIndicator,Je=null!=(i=_e.paper)?i:b.paper,et=null!=(o=_e.popper)?o:b.popper,tt=null!=(a=_e.popupIndicator)?a:b.popupIndicator;return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(md,E({ref:t,className:M($e.root,c),ownerState:We},Ee(Se),{children:me({id:De,disabled:P,fullWidth:!0,size:"small"===xe?"small":void 0,InputLabelProps:Pe(),InputProps:E({ref:je,className:$e.inputRoot,startAdornment:s},(Ve||Ge)&&{endAdornment:(0,_.jsxs)(gd,{className:$e.endAdornment,ownerState:We,children:[Ve?(0,_.jsx)(vd,E({},Ae(),{"aria-label":m,title:m,ownerState:We},Qe,{className:M($e.clearIndicator,null==Qe?void 0:Qe.className),children:f})):null,Ge?(0,_.jsx)(yd,E({},Me(),{disabled:P,"aria-label":Fe?v:oe,title:Fe?v:oe,ownerState:We},tt,{className:M($e.popupIndicator,null==tt?void 0:tt.className),children:de})):null]})}),inputProps:E({className:$e.input,disabled:P,readOnly:pe},ke())})})),ze?(0,_.jsx)(bd,E({as:ue,disablePortal:T,style:{width:ze?ze.clientWidth:null},ownerState:We,role:"presentation",anchorEl:ze,open:Fe},et,{className:M($e.popper,null==et?void 0:et.className),children:(0,_.jsxs)(xd,E({ownerState:We,as:se},Je,{className:M($e.paper,null==Je?void 0:Je.className),children:[Z&&0===Ue.length?(0,_.jsx)(wd,{className:$e.loading,ownerState:We,children:J}):null,0!==Ue.length||D||Z?null:(0,_.jsx)(_d,{className:$e.noOptions,ownerState:We,role:"presentation",onMouseDown:function(e){e.preventDefault()},children:re}),Ue.length>0?(0,_.jsx)(Sd,E({as:X,className:$e.listbox,ownerState:We},Re(),K,{children:Ue.map((function(e,t){return V?Ke({key:e.key,group:e.group,children:e.options.map((function(t,n){return Ze(t,e.index+n)}))}):Ze(e,t)}))})):null]}))})):null]})})),Pd=kd,Md=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function Ad(e){var t=e.item,n=e.applyValue,i=e.type,o=e.apiRef,a=e.focusElementRef,s=e.color,l=e.error,u=e.helperText,d=e.size,f=e.variant,p=k(e,Md),h={color:s,error:l,helperText:u,size:d,variant:f},m=c(r.useState(t.value||[]),2),g=m[0],v=m[1],y=ks(),b=ui();r.useEffect((function(){var e,n=null!=(e=t.value)?e:[];v(n.map(String))}),[t.value]);var x=r.useCallback((function(e,r){v(r.map(String)),n(E({},t,{value:z(r)}))}),[n,t]);return(0,_.jsx)(Pd,E({multiple:!0,freeSolo:!0,limitTags:1,options:[],filterOptions:function(e,t){var n=t.inputValue;return null==n||""===n?[]:[n]},id:y,value:g,onChange:x,renderTags:function(e,t){return e.map((function(e,n){return(0,_.jsx)(td,E({variant:"outlined",size:"small",label:e},t({index:n})))}))},renderInput:function(e){var t;return(0,_.jsx)(b.components.BaseTextField,E({},e,{label:o.current.getLocaleText("filterPanelInputLabel"),placeholder:o.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:E({},e.InputLabelProps,{shrink:!0}),inputRef:a,type:i||"text"},h,null==(t=b.componentsProps)?void 0:t.baseTextField))}},p))}var Td={width:100,minWidth:50,maxWidth:1/0,hide:!1,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:function(e,t){var n=Bl(e,t);return null!==n?n:"string"===typeof e?zl.compare(e.toString(),t.toString()):e-t},type:"string",align:"left",filterOperators:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{value:"contains",getApplyFilterFn:function(t){if(!t.value)return null;var n=e?t.value:t.value.trim(),r=new RegExp(Mo(n),"i");return function(e){var t=e.value;return null!=t&&r.test(t.toString())}},InputComponent:Tl},{value:"equals",getApplyFilterFn:function(t){if(!t.value)return null;var n=e?t.value:t.value.trim(),r=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return function(e){var t=e.value;return null!=t&&0===r.compare(n,t.toString())}},InputComponent:Tl},{value:"startsWith",getApplyFilterFn:function(t){if(!t.value)return null;var n=e?t.value:t.value.trim(),r=new RegExp("^".concat(Mo(n),".*$"),"i");return function(e){var t=e.value;return null!=t&&r.test(t.toString())}},InputComponent:Tl},{value:"endsWith",getApplyFilterFn:function(t){if(!t.value)return null;var n=e?t.value:t.value.trim(),r=new RegExp(".*".concat(Mo(n),"$"),"i");return function(e){var t=e.value;return null!=t&&r.test(t.toString())}},InputComponent:Tl},{value:"isEmpty",getApplyFilterFn:function(){return function(e){var t=e.value;return""===t||null==t}},requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){var t=e.value;return""!==t&&null!=t}},requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:function(t){if(!Array.isArray(t.value)||0===t.value.length)return null;var n=e?t.value:t.value.map((function(e){return e.trim()})),r=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return function(e){var t=e.value;return null!=t&&n.some((function(e){return 0===r.compare(e,t.toString()||"")}))}},InputComponent:Ad}]}(),renderEditCell:function(e){return(0,_.jsx)(Ol,E({},e))},getApplyQuickFilterFn:function(e){if(!e)return null;var t=new RegExp(Mo(e),"i");return function(e){var n=e.value;return null!=n&&t.test(n.toString())}}},Rd=function(e){return null==e?null:Number(e)},Id=function(){return[{label:"=",value:"=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return Rd(n)===e.value}},InputComponent:Tl,InputComponentProps:{type:"number"}},{label:"!=",value:"!=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return Rd(n)!==e.value}},InputComponent:Tl,InputComponentProps:{type:"number"}},{label:">",value:">",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&Rd(n)>e.value}},InputComponent:Tl,InputComponentProps:{type:"number"}},{label:">=",value:">=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&Rd(n)>=e.value}},InputComponent:Tl,InputComponentProps:{type:"number"}},{label:"<",value:"<",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&Rd(n)<e.value}},InputComponent:Tl,InputComponentProps:{type:"number"}},{label:"<=",value:"<=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&Rd(n)<=e.value}},InputComponent:Tl,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:function(){return function(e){return null==e.value}},requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){return null!=e.value}},requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:function(e){return Array.isArray(e.value)&&0!==e.value.length?function(t){var n=t.value;return null!=n&&e.value.includes(Number(n))}:null},InputComponent:Ad,InputComponentProps:{type:"number"}}]},Od=(Wr(Id),E({},Td,{type:"number",align:"right",headerAlign:"right",sortComparator:jl,valueParser:function(e){return""===e?null:Number(e)},valueFormatter:function(e){var t=e.value;return function(e){return"number"===typeof e}(t)?t.toLocaleString():t||""},filterOperators:Id(),getApplyQuickFilterFn:function(e){return null==e||Number.isNaN(e)||""===e?null:function(t){var n=t.value;return Rd(n)===Rd(e)}}})),Ld=["item","applyValue","type","apiRef","focusElementRef","InputProps"];function Dd(e){var t,n,i=e.item,o=e.applyValue,a=e.type,s=e.apiRef,l=e.focusElementRef,u=e.InputProps,d=k(e,Ld),f=r.useRef(),p=c(r.useState(null!=(t=i.value)?t:""),2),h=p[0],m=p[1],g=c(r.useState(!1),2),v=g[0],y=g[1],b=ks(),x=ui(),w=r.useCallback((function(e){var t=e.target.value;clearTimeout(f.current),m(String(t)),y(!0),f.current=setTimeout((function(){o(E({},i,{value:t})),y(!1)}),500)}),[o,i]);return r.useEffect((function(){return function(){clearTimeout(f.current)}}),[]),r.useEffect((function(){var e,t=null!=(e=i.value)?e:"";m(String(t))}),[i.value]),(0,_.jsx)(x.components.BaseTextField,E({id:b,label:s.current.getLocaleText("filterPanelInputLabel"),placeholder:s.current.getLocaleText("filterPanelInputPlaceholder"),value:h,onChange:w,variant:"standard",type:a||"text",InputLabelProps:{shrink:!0},inputRef:l,InputProps:E({},v?{endAdornment:(0,_.jsx)(ys,{})}:{},u,{inputProps:E({max:"datetime-local"===a?"9999-12-31T23:59":"9999-12-31"},null==u?void 0:u.inputProps)})},d,null==(n=x.componentsProps)?void 0:n.baseTextField))}var Fd=/(\d+)-(\d+)-(\d+)/,Nd=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function Bd(e,t,n,r){if(!e.value)return null;var i=c(e.value.match(n?Nd:Fd).slice(1).map(Number),5),o=i[0],a=i[1],s=i[2],l=i[3],u=i[4],d=new Date(o,a-1,s,l||0,u||0).getTime();return function(e){var i=e.value;if(!i)return!1;var o=i instanceof Date?i:new Date(i.toString());if(r)return t(o.getTime(),d);var a=(i instanceof Date?new Date(o):o).setHours(n?o.getHours():0,n?o.getMinutes():0,0,0);return t(a,d)}}var zd=function(e){return[{value:"is",getApplyFilterFn:function(t){return Bd(t,(function(e,t){return e===t}),e)},InputComponent:Dd,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:function(t){return Bd(t,(function(e,t){return e!==t}),e)},InputComponent:Dd,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:function(t){return Bd(t,(function(e,t){return e>t}),e)},InputComponent:Dd,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:function(t){return Bd(t,(function(e,t){return e>=t}),e)},InputComponent:Dd,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:function(t){return Bd(t,(function(e,t){return e<t}),e,!e)},InputComponent:Dd,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:function(t){return Bd(t,(function(e,t){return e<=t}),e)},InputComponent:Dd,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:function(){return function(e){return null==e.value}},requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){return null!=e.value}},requiresFilterValue:!1}]},jd=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","inputProps","isValidating","isProcessingProps","onValueChange"],Hd=Ar(Ka)({fontSize:"inherit"});function Ud(e){var t=e.id,n=e.value,i=e.field,o=e.colDef,a=e.hasFocus,s=e.inputProps,l=e.onValueChange,u=k(e,jd),d="dateTime"===o.type,f=si(),p=r.useRef(),h=r.useMemo((function(){var e,t;null==(e=null==n?null:n instanceof Date?n:new Date((null!=n?n:"").toString()))||Number.isNaN(e.getTime())?t="":t=new Date(e.getTime()-60*e.getTimezoneOffset()*1e3).toISOString().substr(0,d?16:10);return{parsed:e,formatted:t}}),[n,d]),m=c(r.useState(h),2),g=m[0],v=m[1],y=function(e){return N({root:["editInputCell"]},Dr,e.classes)}({classes:ui().classes}),b=r.useCallback(function(){var e=(0,da.Z)((0,ca.Z)().mark((function e(n){var r,o,a,s,u,d,p,h,m,g,y,b,x,w,_;return(0,ca.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(r=n.target.value)?o=null:(a=r.split("T"),s=c(a,2),u=s[0],d=s[1],p=u.split("-"),h=c(p,3),m=h[0],g=h[1],y=h[2],(o=new Date).setFullYear(Number(m),Number(g)-1,Number(y)),o.setHours(0,0,0,0),d&&(b=d.split(":"),x=c(b,2),w=x[0],_=x[1],o.setHours(Number(w),Number(_),0,0))),!l){e.next=5;break}return e.next=5,l(n,o);case 5:v({parsed:o,formatted:r}),f.current.setEditCellValue({id:t,field:i,value:o},n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,i,t,l]);return r.useEffect((function(){v((function(e){var t,n;return h.parsed!==e.parsed&&(null==(t=h.parsed)?void 0:t.getTime())!==(null==(n=e.parsed)?void 0:n.getTime())?h:e}))}),[h]),F((function(){a&&p.current.focus()}),[a]),(0,_.jsx)(Hd,E({inputRef:p,fullWidth:!0,className:y.root,type:d?"datetime-local":"date",inputProps:E({max:d?"9999-12-31T23:59":"9999-12-31"},s),value:g.formatted,onChange:b},u))}var Vd=function(e){return(0,_.jsx)(Ud,E({},e))};var Gd=E({},Td,{type:"date",sortComparator:Hl,valueFormatter:function(e){var t=e.value;return t instanceof Date?t.toLocaleDateString():null!=t?t:""},filterOperators:zd(),renderEditCell:Vd,getApplyQuickFilterFn:void 0}),Wd=E({},Td,{type:"dateTime",sortComparator:Hl,valueFormatter:function(e){var t=e.value;return t instanceof Date?t.toLocaleString():null!=t?t:""},filterOperators:zd(!0),renderEditCell:Vd,getApplyQuickFilterFn:void 0}),$d=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex","getValue"],qd=function(e){var t=e.value,n=k(e,$d),i=si(),o=ui(),a=function(e){return N({root:["booleanCell"]},Dr,e.classes)}({classes:o.classes}),s=r.useMemo((function(){return t?o.components.BooleanCellTrueIcon:o.components.BooleanCellFalseIcon}),[o.components.BooleanCellFalseIcon,o.components.BooleanCellTrueIcon,t]);return(0,_.jsx)(s,E({fontSize:"small",className:a.root,titleAccess:i.current.getLocaleText(t?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":Boolean(t)},n))},Xd=r.memo(qd),Kd=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error","onValueChange"];function Yd(e){var t,n=e.id,i=e.value,o=e.field,a=e.className,s=e.hasFocus,l=e.onValueChange,u=k(e,Kd),d=si(),f=r.useRef(null),p=ks(),h=c(r.useState(i),2),m=h[0],g=h[1],v=ui(),y=function(e){return N({root:["editBooleanCell"]},Dr,e.classes)}({classes:v.classes}),b=r.useCallback(function(){var e=(0,da.Z)((0,ca.Z)().mark((function e(t){var r;return(0,ca.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.checked,!l){e.next=4;break}return e.next=4,l(t,r);case 4:return g(r),e.next=7,d.current.setEditCellValue({id:n,field:o,value:r},t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,o,n,l]);return r.useEffect((function(){g(i)}),[i]),F((function(){s&&f.current.focus()}),[s]),(0,_.jsx)("label",E({htmlFor:p,className:M(y.root,a)},u,{children:(0,_.jsx)(v.components.BaseCheckbox,E({id:p,inputRef:f,checked:Boolean(m),onChange:b,size:"small"},null==(t=v.componentsProps)?void 0:t.baseCheckbox))}))}var Zd=["item","applyValue","apiRef","focusElementRef"];function Qd(e){var t,n,i,o,a=e.item,s=e.applyValue,l=e.apiRef,u=e.focusElementRef,d=k(e,Zd),f=c(r.useState(a.value||""),2),p=f[0],h=f[1],m=ui(),g=null==(n=((null==(t=m.componentsProps)?void 0:t.baseSelect)||{}).native)||n,v=g?"option":El,y=r.useCallback((function(e){var t=e.target.value;h(t),s(E({},a,{value:t}))}),[s,a]);return r.useEffect((function(){h(a.value||"")}),[a.value]),(0,_.jsxs)(m.components.BaseTextField,E({label:l.current.getLocaleText("filterPanelInputLabel"),value:p,onChange:y,select:!0,variant:"standard",SelectProps:E({native:g,displayEmpty:!0},null==(i=m.componentsProps)?void 0:i.baseSelect),InputLabelProps:{shrink:!0},inputRef:u},d,null==(o=m.componentsProps)?void 0:o.baseTextField,{children:[(0,_.jsx)(v,{value:"",children:l.current.getLocaleText("filterValueAny")}),(0,_.jsx)(v,{value:"true",children:l.current.getLocaleText("filterValueTrue")}),(0,_.jsx)(v,{value:"false",children:l.current.getLocaleText("filterValueFalse")})]}))}var Jd=E({},Td,{type:"boolean",align:"center",headerAlign:"center",renderCell:function(e){return e.rowNode.isAutoGenerated?"":(0,_.jsx)(Xd,E({},e))},renderEditCell:function(e){return(0,_.jsx)(Yd,E({},e))},sortComparator:jl,valueFormatter:function(e){var t=e.value,n=e.api;return t?n.getLocaleText("booleanCellTrueLabel"):n.getLocaleText("booleanCellFalseLabel")},filterOperators:[{value:"is",getApplyFilterFn:function(e){if(!e.value)return null;var t="true"===e.value;return function(e){var n=e.value;return Boolean(n)===t}},InputComponent:Qd}],getApplyQuickFilterFn:void 0,aggregable:!1}),ef=function(e){return"Escape"===e},tf=function(e){return"Enter"===e},nf=function(e){return"Tab"===e},rf=function(e){return" "===e},of=function(e){return"Delete"===e||"Backspace"===e};function af(e){return 1===e.key.length&&!1===e.ctrlKey&&!1===e.metaKey}var sf,lf,uf,cf=["Enter","Escape","Tab"],df=["Enter","Tab"],ff=function(e){return tf(e.key)||of(e.key)||af(e)},pf=function(e){return df.indexOf(e)>-1},hf=function(e){return function(e){return"Home"===e||"End"===e}(e)||function(e){return 0===e.indexOf("Arrow")}(e)||function(e){return 0===e.indexOf("Page")}(e)||rf(e)},mf=function(e){return!!e.key},gf=function(e){return nf(e)||ef(e)};!function(e){e.Cell="cell",e.Row="row"}(sf||(sf={})),function(e){e.Edit="edit",e.View="view"}(lf||(lf={})),function(e){e.Edit="edit",e.View="view"}(uf||(uf={}));var vf=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen"];function yf(e){var t,n,i,o,a=ui(),s=e.id,l=e.value,u=e.api,d=e.field,f=e.row,p=e.colDef,h=e.hasFocus,m=e.error,g=e.onValueChange,v=e.initialOpen,y=void 0===v?a.editMode===sf.Cell:v,b=k(e,vf),x=si(),w=r.useRef(),S=r.useRef(),C=c(r.useState(y),2),P=C[0],M=C[1],A=null!=(n=((null==(t=a.componentsProps)?void 0:t.baseSelect)||{}).native)&&n;o="function"===typeof p.valueOptions?p.valueOptions({id:s,row:f,field:d}):p.valueOptions,p.valueFormatter&&(o=o.map((function(e){if("object"===typeof e)return e;var t={field:d,api:u,value:e};return{value:e,label:String(p.valueFormatter(t))}})));var T=function(){var e=(0,da.Z)((0,ca.Z)().mark((function e(t){var n,r,i,l,u;return(0,ca.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M(!1),r=t.target,i=Pl(r.value,o),!g){e.next=6;break}return e.next=6,g(t,i);case 6:return e.next=8,x.current.setEditCellValue({id:s,field:d,value:i},t);case 8:if(l=e.sent,null==(n=a.experimentalFeatures)||!n.newEditingApi){e.next=11;break}return e.abrupt("return");case 11:if(a.editMode!==sf.Row&&!1!==l){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,Promise.resolve(x.current.commitCellChange({id:s,field:d},t));case 15:e.sent&&(x.current.setCellMode(s,d,"view"),t.key&&(u=x.current.getCellParams(s,d),x.current.publishEvent("cellNavigationKeyDown",u,t)));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return F((function(){h&&S.current.focus()}),[h]),(0,_.jsx)(a.components.BaseSelect,E({ref:w,inputRef:S,value:l,onChange:T,open:P,onOpen:function(e){(function(e){return!!e.key})(e)&&"Enter"===e.key||M(!0)},MenuProps:{onClose:function(e,t){var n;a.editMode!==sf.Row?("backdropClick"===t||ef(e.key))&&(null!=(n=a.experimentalFeatures)&&n.newEditingApi?x.current.stopCellEditMode({id:s,field:d,ignoreModifications:!0}):x.current.setCellMode(s,d,"view")):M(!1)}},error:m,native:A,fullWidth:!0},b,null==(i=a.componentsProps)?void 0:i.baseSelect,{children:o.map((function(e){return function(e,t){var n="object"===typeof e,r=n?e.value:e,i=n?e.value:e,o=n?e.label:e;return(0,_.jsx)(t,{value:i,children:o},r)}(e,A?"option":El)}))}))}var bf=["item","applyValue","type","apiRef","focusElementRef"],xf=function(e,t,n){var r=e.valueOptions,i=e.valueFormatter,o=e.field;return[""].concat(z("function"===typeof r?r({field:o}):r||[])).map((function(e){var r="object"===typeof e,a=r?e.value:e,s=r?e.value:e,l=i&&""!==e?i({value:e,field:o,api:t}):e,u=r?e.label:l;return(0,_.jsx)(n,{value:s,children:u},a)}))};function wf(e){var t,n,i,o,a,s=e.item,l=e.applyValue,u=e.type,d=e.apiRef,f=e.focusElementRef,p=k(e,bf),h=c(r.useState(null!=(t=s.value)?t:""),2),m=h[0],g=h[1],v=ks(),y=ui(),b=null==(i=((null==(n=y.componentsProps)?void 0:n.baseSelect)||{}).native)||i,x=s.columnField?d.current.getColumn(s.columnField):null,w=r.useMemo((function(){if(null!==x)return"function"===typeof x.valueOptions?x.valueOptions({field:x.field}):x.valueOptions}),[x]),S=r.useCallback((function(e){var t=e.target.value;t=Pl(t,w),g(String(t)),l(E({},s,{value:t}))}),[l,s,w]);return r.useEffect((function(){var e,t;if(void 0!==w){if((t=Pl(s.value,w))!==s.value)return void l(E({},s,{value:t}))}else t=s.value;t=null!=(e=t)?e:"",g(String(t))}),[s,w,l]),(0,_.jsx)(y.components.BaseTextField,E({id:v,label:d.current.getLocaleText("filterPanelInputLabel"),placeholder:d.current.getLocaleText("filterPanelInputPlaceholder"),value:m,onChange:S,variant:"standard",type:u||"text",InputLabelProps:{shrink:!0},inputRef:f,select:!0,SelectProps:E({native:b},null==(o=y.componentsProps)?void 0:o.baseSelect)},p,null==(a=y.componentsProps)?void 0:a.baseTextField,{children:xf(d.current.getColumn(s.columnField),d.current,b?"option":El)}))}var _f=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"],Sf=function(e,t){return kl(e)===kl(t)},Cf=Gl();function Ef(e){var t=e.item,n=e.applyValue,i=e.apiRef,o=e.focusElementRef,a=e.color,s=e.error,l=e.helperText,u=e.size,c=e.variant,d=void 0===c?"standard":c,f=k(e,_f),p={color:a,error:s,helperText:l,size:u,variant:d},h=ks(),m=ui(),g=t.columnField?i.current.getColumn(t.columnField):null,v=r.useMemo((function(){return null!=g&&g.valueOptions?"function"===typeof g.valueOptions?g.valueOptions({field:g.field}):g.valueOptions:[]}),[g]),y=r.useMemo((function(){return null==v?void 0:v.map(kl)}),[v]),b=i.current.getColumn(t.columnField),x=b.valueFormatter,w=b.field,S=function(e){return"object"===typeof e?e.label:x&&""!==e?x({value:e,field:w,api:i.current}):e},C=r.useMemo((function(){return Array.isArray(t.value)?void 0!==v?t.value.map((function(e){var t=kl(e);return(null==y?void 0:y.findIndex((function(e){return e===t})))||0})).filter((function(e){return e>=0})).map((function(e){return v[e]})):t.value:[]}),[t.value,v,y]);r.useEffect((function(){Array.isArray(t.value)&&C.length===t.value.length||n(E({},t,{value:C.map(kl)}))}),[t,C,n]);var P=r.useCallback((function(e,r){n(E({},t,{value:z(r.map(kl))}))}),[n,t]);return(0,_.jsx)(Pd,E({multiple:!0,limitTags:1,options:v,isOptionEqualToValue:Sf,filterOptions:Cf,id:h,value:C,onChange:P,renderTags:function(e,t){return e.map((function(e,n){return(0,_.jsx)(td,E({variant:"outlined",size:"small",label:S(e)},t({index:n})))}))},renderInput:function(e){var t;return(0,_.jsx)(m.components.BaseTextField,E({},e,{label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:E({},e.InputLabelProps,{shrink:!0}),inputRef:o,type:"singleSelect"},p,null==(t=m.componentsProps)?void 0:t.baseTextField))}},f))}var kf=function(e){return null==e||"object"!==typeof e?e:e.value},Pf=E({},Td,{type:"singleSelect",renderEditCell:function(e){return(0,_.jsx)(yf,E({},e))},filterOperators:[{value:"is",getApplyFilterFn:function(e){return null==e.value||""===e.value?null:function(t){var n=t.value;return kf(n)===kf(e.value)}},InputComponent:wf},{value:"not",getApplyFilterFn:function(e){return null==e.value||""===e.value?null:function(t){var n=t.value;return kf(n)!==kf(e.value)}},InputComponent:wf},{value:"isAnyOf",getApplyFilterFn:function(e){if(!Array.isArray(e.value)||0===e.value.length)return null;var t=e.value.map(kf);return function(e){var n=e.value;return t.includes(kf(n))}},InputComponent:Ef}],getApplyQuickFilterFn:function(e,t,n){if(!e)return null;var r=t.valueOptions,i=t.valueFormatter,o=t.field,a=[kf(e).toString()],s="function"===typeof r?r({field:o}):r||[];return s&&s.forEach((function(t){var r,s;"object"===typeof t?(r=t.value,s=t.label):(r=t,s=i?i({value:t,field:o,api:n.current}):t),s.slice(0,e.length).toLowerCase()===e.toLowerCase()&&(a.includes(r)||a.push(r.toString()))})),function(e){var t=e.value;return null!=t&&a.includes(kf(t).toString())}}}),Mf=(n(8457),Yi);function Af(e){return Or("MuiList",e)}Lr("MuiList",["root","padding","dense","subheader"]);var Tf=["children","className","component","dense","disablePadding","subheader"],Rf=Ar("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return E({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),If=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiList"}),i=n.children,o=n.className,a=n.component,s=void 0===a?"ul":a,l=n.dense,u=void 0!==l&&l,c=n.disablePadding,d=void 0!==c&&c,f=n.subheader,p=k(n,Tf),h=r.useMemo((function(){return{dense:u}}),[u]),m=E({},n,{component:s,dense:u,disablePadding:d}),g=function(e){var t=e.classes;return N({root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]},Af,t)}(m);return(0,_.jsx)(Ms.Provider,{value:h,children:(0,_.jsxs)(Rf,E({as:s,className:M(g.root,o),ref:t,ownerState:m},p,{children:[f,i]}))})}));function Of(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var Lf=Of,Df=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Ff(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Nf(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Bf(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function zf(e,t,n,r,i,o){for(var a=!1,s=i(e,t,!!t&&n);s;){if(s===e.firstChild){if(a)return!1;a=!0}var l=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Bf(s,o)&&!l)return s.focus(),!0;s=i(e,s,n)}return!1}var jf=r.forwardRef((function(e,t){var n=e.actions,i=e.autoFocus,o=void 0!==i&&i,a=e.autoFocusItem,s=void 0!==a&&a,l=e.children,u=e.className,c=e.disabledItemsFocusable,d=void 0!==c&&c,f=e.disableListWrap,p=void 0!==f&&f,h=e.onKeyDown,m=e.variant,g=void 0===m?"selectedMenu":m,v=k(e,Df),y=r.useRef(null),b=r.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});F((function(){o&&y.current.focus()}),[o]),r.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!y.current.style.width;if(e.clientHeight<y.current.clientHeight&&n){var r="".concat(Lf(Mf(e)),"px");y.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,y.current.style.width="calc(100% + ".concat(r,")")}return y.current}}}),[]);var x=L(y,t),w=-1;r.Children.forEach(l,(function(e,t){r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===g&&e.props.selected||-1===w)&&(w=t))}));var S=r.Children.map(l,(function(e,t){if(t===w){var n={};return s&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===g&&(n.tabIndex=0),r.cloneElement(e,n)}return e}));return(0,_.jsx)(If,E({role:"menu",ref:x,className:u,onKeyDown:function(e){var t=y.current,n=e.key,r=Mf(t).activeElement;if("ArrowDown"===n)e.preventDefault(),zf(t,r,p,d,Ff);else if("ArrowUp"===n)e.preventDefault(),zf(t,r,p,d,Nf);else if("Home"===n)e.preventDefault(),zf(t,null,p,d,Ff);else if("End"===n)e.preventDefault(),zf(t,null,p,d,Nf);else if(1===n.length){var i=b.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);var s=r&&!i.repeating&&Bf(r,i);i.previousKeyMatched&&(s||zf(t,r,!1,d,Ff,i))?e.preventDefault():i.previousKeyMatched=!1}h&&h(e)},tabIndex:o?0:-1},v,{children:S}))})),Hf=jf;function Uf(e){return e.substring(2).toLowerCase()}var Vf=function(e){var t=e.children,n=e.disableReactTree,i=void 0!==n&&n,o=e.mouseEvent,a=void 0===o?"onClick":o,s=e.onClickAway,l=e.touchEvent,u=void 0===l?"onTouchEnd":l,c=r.useRef(!1),d=r.useRef(null),f=r.useRef(!1),p=r.useRef(!1);r.useEffect((function(){return setTimeout((function(){f.current=!0}),0),function(){f.current=!1}}),[]);var h=O(t.ref,d),m=Xi((function(e){var t=p.current;p.current=!1;var n=Yi(d.current);!f.current||!d.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n)||(c.current?c.current=!1:(e.composedPath?e.composedPath().indexOf(d.current)>-1:!n.documentElement.contains(e.target)||d.current.contains(e.target))||!i&&t||s(e))})),g=function(e){return function(n){p.current=!0;var r=t.props[e];r&&r(n)}},v={ref:h};return!1!==u&&(v[u]=g(u)),r.useEffect((function(){if(!1!==u){var e=Uf(u),t=Yi(d.current),n=function(){c.current=!0};return t.addEventListener(e,m),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,m),t.removeEventListener("touchmove",n)}}}),[m,u]),!1!==a&&(v[a]=g(a)),r.useEffect((function(){if(!1!==a){var e=Uf(a),t=Yi(d.current);return t.addEventListener(e,m),function(){t.removeEventListener(e,m)}}}),[m,a]),(0,_.jsx)(r.Fragment,{children:r.cloneElement(t,v)})},Gf=!1,Wf="unmounted",$f="exited",qf="entering",Xf="entered",Kf="exiting",Yf=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=$f,r.appearStatus=qf):i=Xf:i=t.unmountOnExit||t.mountOnEnter?Wf:$f,r.state={status:i},r.nextCallback=null,r}Bs(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Wf?{status:$f}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==qf&&n!==Xf&&(t=qf):n!==qf&&n!==Xf||(t=Kf)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===qf){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:fa.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===$f&&this.setState({status:Wf})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[fa.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||Gf?this.safeSetState({status:Xf},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:qf},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:Xf},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:fa.findDOMNode(this);t&&!Gf?(this.props.onExit(r),this.safeSetState({status:Kf},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:$f},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:$f},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:fa.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Wf)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,k(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(zs.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function Zf(){}Yf.contextType=zs,Yf.propTypes={},Yf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Zf,onEntering:Zf,onEntered:Zf,onExit:Zf,onExiting:Zf,onExited:Zf},Yf.UNMOUNTED=Wf,Yf.EXITED=$f,Yf.ENTERING=qf,Yf.ENTERED=Xf,Yf.EXITING=Kf;var Qf=Yf;function Jf(){return Ta(kr)}var ep=function(e){return e.scrollTop};function tp(e,t){var n,r,i=e.timeout,o=e.easing,a=e.style,s=void 0===a?{}:a;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}var np=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function rp(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var ip={entering:{opacity:1,transform:rp(1)},entered:{opacity:1,transform:"none"}},op="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ap=r.forwardRef((function(e,t){var n=e.addEndListener,i=e.appear,o=void 0===i||i,a=e.children,s=e.easing,l=e.in,u=e.onEnter,c=e.onEntered,d=e.onEntering,f=e.onExit,p=e.onExited,h=e.onExiting,m=e.style,g=e.timeout,v=void 0===g?"auto":g,y=e.TransitionComponent,b=void 0===y?Qf:y,x=k(e,np),w=r.useRef(),S=r.useRef(),C=Jf(),P=r.useRef(null),M=L(P,a.ref,t),A=function(e){return function(t){if(e){var n=P.current;void 0===t?e(n):e(n,t)}}},T=A(d),R=A((function(e,t){ep(e);var n,r=tp({style:m,timeout:v,easing:s},{mode:"enter"}),i=r.duration,o=r.delay,a=r.easing;"auto"===v?(n=C.transitions.getAutoHeightDuration(e.clientHeight),S.current=n):n=i,e.style.transition=[C.transitions.create("opacity",{duration:n,delay:o}),C.transitions.create("transform",{duration:op?n:.666*n,delay:o,easing:a})].join(","),u&&u(e,t)})),I=A(c),O=A(h),D=A((function(e){var t,n=tp({style:m,timeout:v,easing:s},{mode:"exit"}),r=n.duration,i=n.delay,o=n.easing;"auto"===v?(t=C.transitions.getAutoHeightDuration(e.clientHeight),S.current=t):t=r,e.style.transition=[C.transitions.create("opacity",{duration:t,delay:i}),C.transitions.create("transform",{duration:op?t:.666*t,delay:op?i:i||.333*t,easing:o})].join(","),e.style.opacity=0,e.style.transform=rp(.75),f&&f(e)})),F=A(p);return r.useEffect((function(){return function(){clearTimeout(w.current)}}),[]),(0,_.jsx)(b,E({appear:o,in:l,nodeRef:P,onEnter:R,onEntered:I,onEntering:T,onExit:D,onExited:F,onExiting:O,addEndListener:function(e){"auto"===v&&(w.current=setTimeout(e,S.current||0)),n&&n(P.current,e)},timeout:"auto"===v?null:v},x,{children:function(e,t){return r.cloneElement(a,E({style:E({opacity:0,transform:rp(.75),visibility:"exited"!==e||l?void 0:"hidden"},ip[e],m,a.props.style),ref:M},t))}}))}));ap.muiSupportAuto=!0;var sp=ap,lp=["open","target","onClickAway","children","position","className","onExited"],up=Ar(Tc,{name:"MuiDataGrid",slot:"Menu",overridesResolver:function(e,t){return t.menu}})((function(e){return p({zIndex:e.theme.zIndex.modal},"& .".concat(Fr.menuList),{outline:0})})),cp={"bottom-start":"top left","bottom-end":"top right"},dp=function(e){var t,n=e.open,i=e.target,o=e.onClickAway,a=e.children,s=e.position,l=e.className,u=e.onExited,c=k(e,lp),d=si(),f=r.useRef(i),p=r.useRef(n),h=ui(),m=function(e){return N({root:["menu"]},Dr,e.classes)}({classes:h.classes});r.useEffect((function(){p.current&&f.current&&f.current.focus();var e=n?"menuOpen":"menuClose";d.current.publishEvent(e,{target:i}),p.current=n,f.current=i}),[d,n,i]);return(0,_.jsx)(up,E({as:h.components.BasePopper,className:M(l,m.root),open:n,anchorEl:i,transition:!0,placement:s},c,null==(t=h.componentsProps)?void 0:t.basePopper,{children:function(e){var t,n=e.TransitionProps,r=e.placement;return(0,_.jsx)(Vf,{onClickAway:o,mouseEvent:"onMouseDown",children:(0,_.jsx)(sp,E({},n,{style:{transformOrigin:cp[r]},onExited:(t=null==n?void 0:n.onExited,function(e){t&&t(),u&&u(e)}),children:(0,_.jsx)(jc,{children:a})}))})}}))},fp=["colDef","id","api","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","getValue","tabIndex","position","focusElementRef"],pp=function(e){var t=e.colDef,n=e.id,i=e.hasFocus,o=e.tabIndex,a=e.position,s=void 0===a?"bottom-end":a,l=e.focusElementRef,u=k(e,fp),d=c(r.useState(-1),2),f=d[0],p=d[1],h=c(r.useState(!1),2),m=h[0],g=h[1],v=si(),y=r.useRef(null),b=r.useRef(null),x=r.useRef(!1),w=r.useRef({}),S=ks(),C=ks(),P=ui();if(r.useLayoutEffect((function(){i||Object.entries(w.current).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];null==r||r.stop({},(function(){delete w.current[n]}))}))}),[i]),r.useEffect((function(){f<0||!y.current||(f>=y.current.children.length||y.current.children[f].focus({preventScroll:!0}))}),[f]),r.useEffect((function(){i||(p(-1),x.current=!1)}),[i]),r.useImperativeHandle(l,(function(){return{focus:function(){x.current||p(0)}}}),[]),!function(e){return"function"===typeof e.getActions}(t))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");var M=t.getActions(v.current.getRowParams(n)),A=M.filter((function(e){return!e.props.showInMenu})),T=M.filter((function(e){return e.props.showInMenu})),R=A.length+(T.length?1:0);r.useEffect((function(){f>=R&&p(R-1)}),[f,R]);var I=function(){g(!1)},O=function(e){return function(t){w.current[e]=t}},L=function(e,t){return function(n){p(e),x.current=!0,t&&t(n)}};return(0,_.jsxs)("div",E({role:"menu",ref:y,tabIndex:-1,className:Fr.actionsCell,onKeyDown:function(e){if(!(R<=1)){var t=f;"ArrowRight"===e.key?t+=1:"ArrowLeft"===e.key&&(t-=1),t<0||t>=R||t!==f&&(e.preventDefault(),e.stopPropagation(),p(t))}}},u,{children:[A.map((function(e,t){return r.cloneElement(e,{key:t,touchRippleRef:O(t),onClick:L(t,e.props.onClick),tabIndex:f===t?o:-1})})),T.length>0&&C&&(0,_.jsx)($c,{ref:b,id:C,"aria-label":v.current.getLocaleText("actionsCellMore"),"aria-controls":S,"aria-expanded":m?"true":void 0,"aria-haspopup":"true",role:"menuitem",size:"small",onClick:function(){g(!0),p(R-1),x.current=!0},touchRippleRef:O(C),tabIndex:f===A.length?o:-1,children:(0,_.jsx)(P.components.MoreActionsIcon,{fontSize:"small"})}),T.length>0&&(0,_.jsx)(dp,{onClickAway:I,onClick:I,open:m,target:b.current,position:s,children:(0,_.jsx)(Hf,{id:S,className:Fr.menuList,onKeyDown:function(e){"Tab"===e.key&&e.preventDefault(),["Tab","Enter","Escape"].includes(e.key)&&I()},"aria-labelledby":C,variant:"menu",autoFocusItem:!0,children:T.map((function(e,t){return r.cloneElement(e,{key:t})}))})})]}))},hp="actions",mp=E({},Td,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:function(e){return(0,_.jsx)(pp,E({},e))},getApplyQuickFilterFn:void 0}),gp="__default__",vp=function(){var e;return p(e={string:Td,number:Od,date:Gd,dateTime:Wd,boolean:Jd,singleSelect:Pf},hp,mp),p(e,gp,Td),e},yp=["maxWidth","minWidth","width","flex"],bp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=E({},vp());return Object.entries(e).forEach((function(e){var n=c(e,2),r=n[0],i=n[1];t[r]?t[r]=E({},t[r],i):t[r]=E({},t[i.extendType||gp],i)})),t};var xp,wp=function(e,t){var n={},r=0,i=0,o=[];e.all.forEach((function(t){var a,s=E({},e.lookup[t]);!1===e.columnVisibilityModel[t]?s.computedWidth=0:(s.flex&&s.flex>0?(r+=s.flex,a=0,o.push(s)):a=Ao(s.width,s.minWidth,s.maxWidth),i+=a,s.computedWidth=a);n[t]=s}));var a=Math.max(t-i,0);if(r>0&&t>0){var s=function(e){var t=e.initialFreeSpace,n=e.totalFlexUnits,r=e.flexColumns,i={all:{},frozenFields:[],freeze:function(e){var t=i.all[e];t&&!0!==t.frozen&&(i.all[e].frozen=!0,i.frozenFields.push(e))}};return function e(){if(i.frozenFields.length!==r.length){var o={min:{},max:{}},a=t,s=n,l=0;i.frozenFields.forEach((function(e){a-=i.all[e].computedWidth,s-=i.all[e].flex}));for(var u=0;u<r.length;u+=1){var c=r[u];if(!i.all[c.field]||!0!==i.all[c.field].frozen){var d=a/s*c.flex;d<c.minWidth?(l+=c.minWidth-d,d=c.minWidth,o.min[c.field]=!0):d>c.maxWidth&&(l+=c.maxWidth-d,d=c.maxWidth,o.max[c.field]=!0),i.all[c.field]={frozen:!1,computedWidth:d,flex:c.flex}}}l<0?Object.keys(o.max).forEach((function(e){i.freeze(e)})):l>0?Object.keys(o.min).forEach((function(e){i.freeze(e)})):r.forEach((function(e){var t=e.field;i.freeze(t)})),e()}}(),i.all}({initialFreeSpace:a,totalFlexUnits:r,flexColumns:o});Object.keys(s).forEach((function(e){n[e].computedWidth=s[e].computedWidth}))}return E({},e,{lookup:n})},_p=function(e){var t,n,r,i,o,a=e.apiRef,s=e.columnsToUpsert,l=e.initialState,u=e.columnTypes,d=e.currentColumnVisibilityModel,f=void 0===d?Qr(a):d,h=e.shouldRegenColumnVisibilityModelFromColumns,m=e.keepOnlyColumnsToUpsert,g=void 0!==m&&m,v=!a.current.state.columns;if(v)o={all:[],lookup:{}};else{var y=Xr(a.current.state);o={all:g?[]:z(y.all),lookup:E({},y.lookup)}}var b={};g&&!v&&(b=Object.keys(o.lookup).reduce((function(e,t){return E({},e,p({},t,!1))}),{}));var x={};s.forEach((function(e){var t=e.field;x[t]=!0,b[t]=!0;var n=o.lookup[t];null==n?(n=E({},function(e,t){return t&&e[t]?e[t]:e[gp]}(u,e.type),{field:t,hasBeenResized:!1}),o.all.push(t)):g&&o.all.push(t);var r=n.hasBeenResized;yp.forEach((function(t){void 0!==e[t]&&(r=!0,-1===e[t]&&(e[t]=1/0))})),o.lookup[t]=E({},n,{hide:null!=e.hide&&e.hide},e,{hasBeenResized:r})})),g&&!v&&Object.keys(o.lookup).forEach((function(e){b[e]||delete o.lookup[e]}));var w=E({},o.lookup),_=a.current.unstable_applyPipeProcessors("hydrateColumns",o),S={};if(h){var C=!1,k=E({},f);v?_.all.forEach((function(e){k[e]=!o.lookup[e].hide})):g&&Object.keys(k).forEach((function(e){_.lookup[e]||(delete k[e],C=!0)})),_.all.forEach((function(e){if(x[e]||w[e]!==_.lookup[e]){var t=f[e];if(void 0===t)if(v)t=!0;else t=!!Xr(a.current.state).lookup[e];var n=!_.lookup[e].hide;n!==t&&(C=!0,k[e]=n)}})),S=C||v?k:f}else S=f;var P=function(e,t){if(!t)return e;var n=t.orderedFields,r=void 0===n?[]:n,i=t.dimensions,o=void 0===i?{}:i,a=Object.keys(o);if(0===a.length&&0===r.length)return e;for(var s={},l=[],u=0;u<r.length;u+=1){var d=r[u];e.lookup[d]&&(s[d]=!0,l.push(d))}for(var f=0===l.length?e.all:[].concat(l,z(e.all.filter((function(e){return!s[e]})))),p=E({},e.lookup),h=function(){var e=a[m],t=E({},p[e],{hasBeenResized:!0});Object.entries(o[e]).forEach((function(e){var n=c(e,2),r=n[0],i=n[1];t[r]=-1===i?1/0:i})),p[e]=t},m=0;m<a.length;m+=1)h();return{all:f,lookup:p}}(_,l),M=E({},P,{columnVisibilityModel:S});return wp(M,null!=(t=null==(n=(r=a.current).getRootDimensions)||null==(i=n.call(r))?void 0:i.viewportInnerSize.width)?t:0)},Sp=function(e){return function(t){return E({},t,{columns:e})}};function Cp(e){for(var t=e.firstColumnToRender,n=e.apiRef,r=e.firstRowToRender,i=e.lastRowToRender,o=e.visibleRows,a=t,s=r;s<i;s+=1){if(o[s]){var l=o[s].id,u=n.current.unstable_getCellColSpanInfo(l,t);u&&u.spannedByColSpan&&(a=u.leftVisibleCellIndex)}}return a}function Ep(e){var t=e.firstColumnIndex,n=e.minColumnIndex,r=e.columnBuffer,i=e.firstRowToRender,o=e.lastRowToRender,a=e.apiRef,s=e.visibleRows;return Cp({firstColumnToRender:Math.max(t-r,n),apiRef:a,firstRowToRender:i,lastRowToRender:o,visibleRows:s})}!function(e){e.filters="filters",e.columns="columns"}(xp||(xp={}));var kp,Pp=function(e,t,n){var r,i,o,a,s,l,u,c=!!t.columnVisibilityModel||!(null==(r=t.initialState)||null==(i=r.columns)||!i.columnVisibilityModel);n.current.unstable_caches.columns={isUsingColumnVisibilityModel:c};var d=bp(t.columnTypes);return E({},e,{columns:_p({apiRef:n,columnTypes:d,columnsToUpsert:t.columns,initialState:null==(o=t.initialState)?void 0:o.columns,shouldRegenColumnVisibilityModelFromColumns:!c,currentColumnVisibilityModel:null!=(a=null!=(s=t.columnVisibilityModel)?s:null==(l=t.initialState)||null==(u=l.columns)?void 0:u.columnVisibilityModel)?a:{},keepOnlyColumnsToUpsert:!0})})};function Mp(e){return void 0!==e.field}!function(e){e.Compact="compact",e.Standard="standard",e.Comfortable="comfortable"}(kp||(kp={}));var Ap=qr((function(e){return e.columnGrouping}),(function(e){return e.lookup})),Tp=["groupId","children"];var Rp=function e(t,n,r){if(Mp(t)){if(void 0!==r[t.field])throw new Error(["MUI: columnGroupingModel contains duplicated field","column field ".concat(t.field," occurrs two times in the grouping model:"),"- ".concat(r[t.field].join(" > ")),"- ".concat(n.join(" > "))].join("\n"));r[t.field]=n}else{var i=t.groupId;t.children.forEach((function(t){e(t,[].concat(z(n),[i]),r)}))}},Ip=function(e){if(!e)return{};var t={};return e.forEach((function(e){Rp(e,[],t)})),t},Op=function e(t){var n={};return t.forEach((function(t){if(!Mp(t)){var r=t.groupId,i=t.children,o=k(t,Tp);if(!r)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");i||console.warn("MUI: group groupId=".concat(r," has no children."));var a=E({},o,{groupId:r}),s=e(i);if(void 0!==s[r]||void 0!==n[r])throw new Error("MUI: The groupId ".concat(r," is used multiple times in the columnGroupingModel."));n=E({},n,s,p({},r,a))}})),E({},n)},Lp=function(e,t){var n;return E({},e,{columnGrouping:{lookup:Op(null!=(n=t.columnGroupingModel)?n:[]),groupCollapsedModel:{}}})},Dp=function(e,t,n,r){switch(e){case kp.Compact:return{value:e,headerHeight:Math.floor(.7*t),rowHeight:Math.floor(.7*n),headerGroupingMaxDepth:r,factor:.7};case kp.Comfortable:return{value:e,headerHeight:Math.floor(1.3*t),rowHeight:Math.floor(1.3*n),headerGroupingMaxDepth:r,factor:1.3};default:return{value:e,headerHeight:t,rowHeight:n,headerGroupingMaxDepth:r,factor:1}}},Fp=function(e,t){var n;if(null==t.columnGroupingModel||0===Object.keys(t.columnGroupingModel).length)n=0;else{var r=Ip(t.columnGroupingModel),i=e.columns,o=i.all.filter((function(e){return!1!==i.columnVisibilityModel[e]}));n=0===o.length?0:Math.max.apply(Math,z(o.map((function(e){var t,n;return null!=(t=null==(n=r[e])?void 0:n.length)?t:0}))))}return E({},e,{density:Dp(t.density,t.headerHeight,t.rowHeight,n)})};var Np=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","getValue","api"],Bp=r.forwardRef((function(e,t){var n,i=e.field,o=e.id,a=e.value,s=e.rowNode,l=e.hasFocus,u=e.tabIndex,c=k(e,Np),d=si(),f=ui(),p=function(e){return N({root:["checkboxInput"]},Dr,e.classes)}({classes:f.classes}),h=r.useRef(null),m=r.useRef(),g=L(h,t),v=d.current.getCellElement(o,i);r.useLayoutEffect((function(){0===u&&v&&(v.tabIndex=-1)}),[v,u]),r.useEffect((function(){if(l){var e,t=null==(e=h.current)?void 0:e.querySelector("input");null==t||t.focus({preventScroll:!0})}else m.current&&m.current.stop({})}),[l]);var y=r.useCallback((function(t){rf(t.key)&&t.stopPropagation(),hf(t.key)&&!t.shiftKey&&d.current.publishEvent("cellNavigationKeyDown",e,t)}),[d,e]);if("footer"===s.position)return null;var b=d.current.isRowSelectable(o),x=d.current.getLocaleText(a?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return s.isPinned?null:(0,_.jsx)(f.components.BaseCheckbox,E({ref:g,tabIndex:u,checked:a,onChange:function(e){var t={value:e.target.checked,id:o};d.current.publishEvent("rowSelectionCheckboxChange",t,e)},className:p.root,inputProps:{"aria-label":x},onKeyDown:y,disabled:!b,touchRippleRef:m},null==(n=f.componentsProps)?void 0:n.baseCheckbox,c))})),zp=Bp,jp=function(e){return e.focus},Hp=qr(jp,(function(e){return e.cell})),Up=qr(jp,(function(e){return e.columnHeader})),Vp=function(e){return e.tabIndex},Gp=qr(Vp,(function(e){return e.cell})),Wp=qr(Vp,(function(e){return e.columnHeader})),$p=function(e){return e.selection},qp=qr($p,(function(e){return e.length})),Xp=qr($p,wi,(function(e,t){return new Map(e.map((function(e){return[e,t[e]]})))})),Kp=qr($p,(function(e){return e.reduce((function(e,t){return e[t]=t,e}),{})})),Yp=function(e){return e.pagination},Zp=qr(Yp,(function(e){return e.page})),Qp=qr(Yp,(function(e){return e.pageSize})),Jp=(qr(Yp,(function(e){return e.pageCount})),qr(Yp,Si,Ei,po,vo,(function(e,t,n,r,i){var o=i.length,a=Math.min(e.pageSize*e.page,o-1),s=Math.min(a+e.pageSize-1,o-1);if(-1===a||-1===s)return null;if(n<2)return{firstRowIndex:a,lastRowIndex:s};for(var l=i[a],u=s-a+1,c=r.findIndex((function(e){return e.id===l.id})),d=c,f=0;d<r.length&&f<=u;){var p=t[r[d].id].depth;(f<u||p>0)&&(d+=1),0===p&&(f+=1)}return{firstRowIndex:c,lastRowIndex:d-1}}))),eh=qr(po,Jp,(function(e,t){return t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]})),th=qr(ho,Jp,(function(e,t){return t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]})),nh=["field","colDef"],rh=r.forwardRef((function(e,t){var n,i=k(e,nh),o=c(r.useState(!1),2)[1],a=si(),s=ui(),l=function(e){return N({root:["checkboxInput"]},Dr,e.classes)}({classes:s.classes}),u=oi(a,Wp),d=oi(a,$p),f=oi(a,ho),p=oi(a,th),h=r.useMemo((function(){return"function"!==typeof s.isRowSelectable?d:d.filter((function(e){return!!a.current.getRow(e)&&s.isRowSelectable(a.current.getRowParams(e))}))}),[a,s.isRowSelectable,d]),m=r.useMemo((function(){return(s.pagination&&s.checkboxSelectionVisibleOnly?p:f).reduce((function(e,t){return e[t]=!0,e}),{})}),[s.pagination,s.checkboxSelectionVisibleOnly,p,f]),g=r.useMemo((function(){return h.filter((function(e){return m[e]})).length}),[h,m]),v=g>0&&g<Object.keys(m).length,y=g>0,b=null!==u&&u.field===e.field?0:-1;r.useLayoutEffect((function(){var t=a.current.getColumnHeaderElement(e.field);0===b&&t&&(t.tabIndex=-1)}),[b,a,e.field]);var x=r.useCallback((function(t){" "===t.key&&a.current.publishEvent("headerSelectionCheckboxChange",{value:!y}),hf(t.key)&&!t.shiftKey&&a.current.publishEvent("columnHeaderNavigationKeyDown",e,t)}),[a,e,y]),w=r.useCallback((function(){o((function(e){return!e}))}),[]);r.useEffect((function(){return a.current.subscribeEvent("selectionChange",w)}),[a,w]);var S=a.current.getLocaleText(y?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return(0,_.jsx)(s.components.BaseCheckbox,E({ref:t,indeterminate:v,checked:y,onChange:function(e){var t={value:e.target.checked};a.current.publishEvent("headerSelectionCheckboxChange",t)},className:l.root,inputProps:{"aria-label":S},tabIndex:b,onKeyDown:x},null==(n=s.componentsProps)?void 0:n.baseCheckbox,i))})),ih="__check__",oh=E({},Jd,{field:ih,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,valueGetter:function(e){return void 0!==Kp(e.api.state,e.api.instanceId)[e.id]},renderHeader:function(e){return(0,_.jsx)(rh,E({},e))},renderCell:function(e){return(0,_.jsx)(zp,E({},e))}}),ah=function(e,t){if("string"===typeof e){var n=e.replace(/"/g,'""');return[t,"\n","\r"].some((function(e){return n.includes(e)}))?'"'.concat(n,'"'):n}return e};Gr(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);function sh(e){var t=e.columns,n=e.rowIds,r=e.getCellParams,i=e.delimiterCharacter,o=e.includeHeaders,a=n.reduce((function(e,n){return"".concat(e).concat(function(e,t,n,r){return t.map((function(t){var i=n(e,t.field);return ah(i.formattedValue,r)}))}(n,t,r,i).join(i),"\r\n")}),"").trim();if(!o)return a;var s="".concat(t.filter((function(e){return e.field!==oh.field})).map((function(e){return ah(e.headerName||e.field,i)})).join(i),"\r\n");return"".concat(s).concat(a).trim()}var lh,uh=function(e){var t=e.apiRef,n=e.options,r=Zr(t);return n.fields?n.fields.map((function(e){return r.find((function(t){return t.field===e}))})).filter((function(e){return!!e})):(n.allColumns?r:Jr(t)).filter((function(e){return!e.disableExport}))},ch=function(e){var t,n,r=e.apiRef,i=go(r),o=Si(r),a=r.current.getSelectedRows(),s=i.filter((function(e){var t;return"body"===(null!=(t=o[e].position)?t:"body")})),l=Mi(r),u=(null==l||null==(t=l.top)?void 0:t.map((function(e){return e.id})))||[],c=(null==l||null==(n=l.bottom)?void 0:n.map((function(e){return e.id})))||[];return s.unshift.apply(s,z(u)),s.push.apply(s,z(c)),a.size>0?s.filter((function(e){return a.has(e)})):s},dh=["children","onClick"],fh=r.forwardRef((function(e,t){var n,i=e.children,o=e.onClick,a=k(e,dh),s=si(),l=ui(),u=ks(),d=ks(),f=c(r.useState(!1),2),p=f[0],h=f[1],m=r.useRef(null),g=L(t,m),v=function(){return h(!1)};return null==i?null:(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(l.components.BaseButton,E({ref:g,size:"small",startIcon:(0,_.jsx)(l.components.ExportIcon,{}),"aria-expanded":p?"true":void 0,"aria-label":s.current.getLocaleText("toolbarExportLabel"),"aria-haspopup":"menu","aria-labelledby":d,id:u},a,{onClick:function(e){h((function(e){return!e})),null==o||o(e)}},null==(n=l.componentsProps)?void 0:n.baseButton,{children:s.current.getLocaleText("toolbarExport")})),(0,_.jsx)(dp,{open:p,target:m.current,onClickAway:function(e){var t;m.current===e.target||null!=(t=m.current)&&t.contains(e.target)||h(!1)},position:"bottom-start",children:(0,_.jsx)(Hf,{id:d,className:Fr.menuList,"aria-labelledby":u,onKeyDown:function(e){nf(e.key)&&e.preventDefault(),gf(e.key)&&v()},autoFocusItem:p,children:r.Children.map(i,(function(e){return r.isValidElement(e)?r.cloneElement(e,{hideMenu:v}):e}))})})]})})),ph=["hideMenu","options"],hh=["hideMenu","options"],mh=["csvOptions","printOptions","excelOptions"],gh=function(e){var t=si(),n=e.hideMenu,r=e.options,i=k(e,ph);return(0,_.jsx)(El,E({onClick:function(){t.current.exportDataAsCsv(r),null==n||n()}},i,{children:t.current.getLocaleText("toolbarExportCSV")}))},vh=function(e){var t=si(),n=e.hideMenu,r=e.options,i=k(e,hh);return(0,_.jsx)(El,E({onClick:function(){t.current.exportDataAsPrint(r),null==n||n()}},i,{children:t.current.getLocaleText("toolbarExportPrint")}))},yh=r.forwardRef((function(e,t){var n=e.csvOptions,i=void 0===n?{}:n,o=e.printOptions,a=void 0===o?{}:o,s=e.excelOptions,l=k(e,mh),u=si().current.unstable_applyPipeProcessors("exportMenu",[],{excelOptions:s,csvOptions:i,printOptions:a}).sort((function(e,t){return e.componentName>t.componentName?1:-1}));return 0===u.length?null:(0,_.jsx)(fh,E({},l,{ref:t,children:u.map((function(e,t){return r.cloneElement(e.component,{key:t})}))}))})),bh=function(e){var t=Ii(e,"useGridCsvExport"),n=r.useCallback((function(){var n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.debug("Get data as CSV");var o=uh({apiRef:e,options:i}),a=null!=(n=i.getRowsToExport)?n:ch,s=a({apiRef:e});return sh({columns:o,rowIds:s,getCellParams:e.current.getCellParams,delimiterCharacter:i.delimiter||",",includeHeaders:null==(r=i.includeHeaders)||r})}),[t,e]),i=r.useCallback((function(e){t.debug("Export data as CSV");var r=n(e);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.title||"untitled",r="".concat(n,".").concat(t);if("download"in HTMLAnchorElement.prototype){var i=URL.createObjectURL(e),o=document.createElement("a");return o.href=i,o.download=r,o.click(),void setTimeout((function(){URL.revokeObjectURL(i)}))}throw new Error("MUI: exportAs not supported")}(new Blob([null!=e&&e.utf8WithBom?new Uint8Array([239,187,191]):"",r],{type:"text/csv"}),"csv",null==e?void 0:e.fileName)}),[t,n]);Bo(e,{getDataAsCsv:n,exportDataAsCsv:i});var o=r.useCallback((function(e,t){var n;return null!=(n=t.csvOptions)&&n.disableToolbarButton?e:[].concat(z(e),[{component:(0,_.jsx)(gh,{options:t.csvOptions}),componentName:"csvExport"}])}),[]);la(e,"exportMenu",o)},xh=function(e){return e.rowsMeta},wh="client",_h="server";!function(e){e.And="and",e.Or="or"}(lh||(lh={}));var Sh=function(){return{items:[],linkOperator:lh.And,quickFilterValues:[],quickFilterLogicOperator:lh.And}},Ch=function(e,t,n,i){var o=r.useCallback((function(){e.current.unstable_registerStrategyProcessor(t,n,i)}),[e,i,n,t]);sa((function(){o()}));var a=r.useRef(!0);r.useEffect((function(){a.current?a.current=!1:o()}),[o])},Eh=function(e,t){var n=E({},e);if(null==n.id&&(n.id=Math.round(1e5*Math.random())),null==n.operatorValue){var r=Yr(t)[n.columnField];n.operatorValue=r&&r.filterOperators[0].value}return n},kh=Gr(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Ph=Gr("MUI: The 'id' field is required on `filterModel.items` when you use multiple filters.","error"),Mh=Gr(["MUI: One of your filtering item have no `operatorValue` provided.","This property will become required on `@mui/x-data-grid@6.X`."]),Ah=function(e,t,n){var r,i=e.items.length>1;i&&t?(kh(),r=[e.items[0]]):r=e.items;var o=i&&r.some((function(e){return null==e.id})),a=r.some((function(e){return null==e.operatorValue}));return o&&Ph(),a&&Mh(),a||o?E({},e,{items:r.map((function(e){return Eh(e,n)}))}):e.items!==r?E({},e,{items:r}):e},Th=function(e,t,n){return function(r){return E({},r,{filterModel:Ah(e,t,n)})}},Rh=function(e,t){if(!e.columnField||!e.operatorValue)return null;var n,r=t.current.getColumn(e.columnField);if(!r)return null;if(r.valueParser){var i,o=r.valueParser;n=Array.isArray(e.value)?null==(i=e.value)?void 0:i.map((function(e){return o(e)})):o(e.value)}else n=e.value;var a=E({},e,{value:n}),s=r.filterOperators;if(null==s||!s.length)throw new Error("MUI: No filter operators found for column '".concat(r.field,"'."));var l=s.find((function(e){return e.value===a.operatorValue}));if(!l)throw new Error("MUI: No filter operator found for column '".concat(r.field,"' and operator value '").concat(a.operatorValue,"'."));var u=l.getApplyFilterFn(a,r);if("function"!==typeof u)return null;return{fn:function(e){var n=t.current.getCellParams(e,a.columnField);return u(n)},item:a}},Ih=function(e,t){var n=function(e,t){var n=e.items.map((function(e){return Rh(e,t)})).filter((function(e){return!!e}));return 0===n.length?null:function(e,t){var r={};return(t?n.filter((function(e){return t(e.item.columnField)})):n).forEach((function(t){r[t.item.id]=t.fn(e)})),r}}(e,t),r=function(e,t){var n=e.quickFilterValues,r=void 0===n?[]:n;if(0===r.length)return null;var i=Kr(t),o={};i.forEach((function(e){var n=t.current.getColumn(e),i=null==n?void 0:n.getApplyQuickFilterFn;i&&(o[e]=r.map((function(e){return i(e,n,t)})))}));var a=r.filter((function(e,t){return Object.keys(o).some((function(e){return null!=o[e][t]}))}));return 0===a.length?null:function(e,n){var r={},i=[];Object.keys(o).forEach((function(o){n&&!n(o)||(r[o]=t.current.getCellParams(e,o),i.push(o))}));var s={};return a.forEach((function(e,t){var n=i.some((function(e){var n,i;return null!=o[e][t]&&(null==(n=(i=o[e])[t])?void 0:n.call(i,r[e]))}));s[e]=n})),s}}(e,t);return function(e,t){return{passingFilterItems:n&&n(e,t),passingQuickFilterValues:r&&r(e,t)}}},Oh=function(e,t,n,r){var i,o,a=n.items.filter((function(e){return null!==Rh(e,r)})),s=e.filter((function(e){return null!=e})),l=t.filter((function(e){return null!=e})),u=null!=(i=n.quickFilterLogicOperator)?i:Sh().quickFilterLogicOperator,c=null!=(o=n.linkOperator)?o:Sh().linkOperator;if(s.length>0){var d=function(e){return s.some((function(t){return t[e.id]}))};if(c===lh.And){if(!a.every(d))return!1}else if(!a.some(d))return!1}if(l.length>0&&null!=n.quickFilterValues){var f=function(e){return l.some((function(t){return t[e]}))};if(u===lh.And){if(!n.quickFilterValues.every(f))return!1}else if(!n.quickFilterValues.some(f))return!1}return!0},Lh=function(e,t,n){var r,i,o,a,s=null!=(r=null!=(i=t.filterModel)?i:null==(o=t.initialState)||null==(a=o.filter)?void 0:a.filterModel)?r:Sh();return E({},e,{filter:{filterModel:Ah(s,t.disableMultipleColumnsFiltering,n),visibleRowsLookup:{},filteredDescendantCountLookup:{}}})},Dh=function(e,t){var n,r;return t.pagination&&"client"===t.paginationMode?(r=Jp(e),n=eh(e)):r=0===(n=po(e)).length?null:{firstRowIndex:0,lastRowIndex:n.length-1},{rows:n,range:r}},Fh=function(e,t){var n=Dh(e,t);return r.useMemo((function(){return{rows:n.rows,range:n.range}}),[n.rows,n.range])},Nh=function(e){return E({},e,{focus:{cell:null,columnHeader:null},tabIndex:{cell:null,columnHeader:null}})},Bh="__detail_panel_toggle__";var zh=function(e,t){var n=Ii(e,"useGridKeyboardNavigation"),i=Fh(e,t).rows,o=r.useMemo((function(){return function(e,t){var n=Mi(e)||{};return[].concat(z(n.top||[]),z(t),z(n.bottom||[]))}(e,i)}),[e,i]),a=r.useCallback((function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",o=po(e),a=e.current.unstable_getCellColSpanInfo(r,t);a&&a.spannedByColSpan&&("left"===i?t=a.leftVisibleCellIndex:"right"===i&&(t=a.rightVisibleCellIndex));var s=o.findIndex((function(e){return e.id===r}));n.debug("Navigating to cell row ".concat(s,", col ").concat(t)),e.current.scrollToIndexes({colIndex:t,rowIndex:s});var l=e.current.getVisibleColumns()[t].field;e.current.setCellFocus(r,l)}),[e,n]),s=r.useCallback((function(t,r){n.debug("Navigating to header col ".concat(t)),e.current.scrollToIndexes({colIndex:t});var i=e.current.getVisibleColumns()[t].field;e.current.setColumnHeaderFocus(i,r)}),[e,n]),l=r.useCallback((function(e){return o[e].id}),[o]),u=r.useCallback((function(t,n){var r=e.current.getRootDimensions();if(0!==o.length&&r){var i=e.current.unstable_getViewportPageSize(),u=t.field?e.current.getColumnIndex(t.field):0,c=o.findIndex((function(e){return e.id===t.id})),d=o.length-1,f=Jr(e).length-1,p=!0;switch(n.key){case"ArrowDown":case"Enter":c<d&&a(u,l(c+1));break;case"ArrowUp":c>0?a(u,l(c-1)):s(u,n);break;case"ArrowRight":u<f&&a(u+1,l(c),"right");break;case"ArrowLeft":u>0&&a(u-1,l(c));break;case"Tab":n.shiftKey&&u>0?a(u-1,l(c),"left"):!n.shiftKey&&u<f&&a(u+1,l(c),"right");break;case" ":if(t.field===Bh)break;var h=t.colDef;if(h&&"treeDataGroup"===h.type)break;!n.shiftKey&&c<d&&a(u,l(Math.min(c+i,d)));break;case"PageDown":c<d&&a(u,l(Math.min(c+i,d)));break;case"PageUp":var m=Math.max(c-i,0);m!==c&&m>=0?a(u,l(m)):s(u,n);break;case"Home":n.ctrlKey||n.metaKey||n.shiftKey?a(0,l(0)):a(0,l(c));break;case"End":n.ctrlKey||n.metaKey||n.shiftKey?a(f,l(d)):a(f,l(c));break;default:p=!1}p&&n.preventDefault()}}),[e,o,a,s,l]),c=r.useCallback((function(t,n){var r=n.currentTarget.querySelector(".".concat(Fr.columnHeaderTitleContainerContent));if((!(!!r&&r.contains(n.target))||t.field===oh.field)&&e.current.getRootDimensions()){var i=e.current.unstable_getViewportPageSize(),u=t.field?e.current.getColumnIndex(t.field):0,c=o.length-1,d=Jr(e).length-1,f=!0;switch(n.key){case"ArrowDown":a(u,l(0));break;case"ArrowRight":u<d&&s(u+1,n);break;case"ArrowLeft":u>0&&s(u-1,n);break;case"PageDown":null!==c&&a(u,l(Math.min(0+i,c)));break;case"Home":s(0,n);break;case"End":s(d,n);break;case"Enter":(n.ctrlKey||n.metaKey)&&e.current.toggleColumnMenu(t.field);break;case" ":break;default:f=!1}f&&n.preventDefault()}}),[e,o,a,s,l]),d=r.useCallback((function(t,n){if(n.currentTarget.contains(n.target)){var r=e.current.getCellParams(t.id,t.field);r.cellMode!==lf.Edit&&hf(n.key)&&e.current.publishEvent("cellNavigationKeyDown",r,n)}}),[e]);Wo(e,"cellNavigationKeyDown",u),Wo(e,"columnHeaderKeyDown",c),Wo(e,"cellKeyDown",d)},jh=["rowsBeforePartialUpdates"];var Hh=function(e,t,n){var r=t?t(e):e.id;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A row was provided without id in the rows prop:";if(null==e)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",n,JSON.stringify(t)].join("\n"))}(r,e,n),r},Uh=function(e){for(var t=e.rows,n=e.getRowId,r={rowsBeforePartialUpdates:t,loadingPropBeforePartialUpdates:e.loading,rowCountPropBeforePartialUpdates:e.rowCount,idRowsLookup:{},idToIdLookup:{},ids:[]},i=0;i<t.length;i+=1){var o=t[i],a=Hh(o,n);r.idRowsLookup[a]=o,r.idToIdLookup[a]=a,r.ids.push(a)}return r},Vh=function(e){var t=e.apiRef,n=e.previousTree,r=e.rowCountProp,i=e.loadingProp,o=k(t.current.unstable_caches.rows,jh),a=null!=r?r:0,s=t.current.unstable_applyStrategyProcessor("rowTreeCreation",E({},o,{previousTree:n})),l=t.current.unstable_applyPipeProcessors("hydrateRows",s),u=1===l.treeDepth?l.ids.length:Object.values(l.tree).filter((function(e){return null==e.parent&&!e.isPinned})).length;return E({},l,{groupingResponseBeforeRowHydration:s,loading:i,totalRowCount:Math.max(a,l.ids.length),totalTopLevelRowCount:Math.max(a,u)})},Gh=function e(t,n,r){var i,o=null==(i=t[n])?void 0:i.children;if(null==o)return[];for(var a=[],s=0;s<o.length;s+=1){var l=o[s],u=t[l];r&&u.isAutoGenerated||a.push(l),a.push.apply(a,z(e(t,u.id,r)))}return a};function Wh(e){var t,n,r=Mi(e);return{top:(null==r||null==(t=r.top)?void 0:t.reduce((function(t,n){return t+=e.current.unstable_getRowHeight(n.id)}),0))||0,bottom:(null==r||null==(n=r.bottom)?void 0:n.reduce((function(t,n){return t+=e.current.unstable_getRowHeight(n.id)}),0))||0}}var $h=function(e){return e?0:100},qh=function(e){return function(t){return E({},t,{pagination:E({},t.pagination,{pageSize:e})})}},Xh=function(e,t){return t>0&&e>0?Math.ceil(e/t):0},Kh=function(e){return e.pageCount?E({},e,{page:Math.max(Math.min(e.page,e.pageCount-1),0)}):e},Yh=function(e){return function(t){return E({},t,{pagination:Kh(E({},t.pagination,{page:e}))})}},Zh=(Gr(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error"),function(e,t){var n,r,i,o,a,s,l,u,c;return E({},e,{pagination:{pageSize:c=null!=t.pageSize?t.pageSize:null!=(null==(n=t.initialState)||null==(r=n.pagination)?void 0:r.pageSize)?t.initialState.pagination.pageSize:$h(t.autoPageSize),page:null!=(i=null!=(o=t.page)?o:null==(a=t.initialState)||null==(s=a.pagination)?void 0:s.page)?i:0,pageCount:Xh(null!=(l=t.rowCount)?l:0,c),rowCount:null!=(u=t.rowCount)?u:0}})}),Qh=function(e,t){!function(e,t){var n,i,o=Ii(e,"useGridPageSize"),a=oi(e,fi);e.current.unstable_registerControlState({stateId:"pageSize",propModel:t.pageSize,propOnChange:t.onPageSizeChange,stateSelector:Qp,changeEvent:"pageSizeChange"});var s=r.useCallback((function(t){t!==Qp(e)&&(o.debug("Setting page size to ".concat(t)),e.current.setState(qh(t)),e.current.forceUpdate())}),[e,o]);Bo(e,{setPageSize:s});var l=r.useCallback((function(n,r){var i,o,a=Qp(e);return r.exportOnlyDirtyModels&&null==t.pageSize&&null==(null==(i=t.initialState)||null==(o=i.pagination)?void 0:o.pageSize)&&a===$h(t.autoPageSize)?n:E({},n,{pagination:E({},n.pagination,{pageSize:a})})}),[e,t.pageSize,null==(n=t.initialState)||null==(i=n.pagination)?void 0:i.pageSize,t.autoPageSize]),u=r.useCallback((function(t,n){var r,i=null==(r=n.stateToRestore.pagination)?void 0:r.pageSize;return null!=i&&e.current.setState(qh(i)),t}),[e]);la(e,"exportState",l),la(e,"restoreState",u);var c=r.useCallback((function(){var n=e.current.getRootDimensions();if(t.autoPageSize&&n){var r=Wh(e),i=Math.floor((n.viewportInnerSize.height-r.top-r.bottom)/a);e.current.setPageSize(i)}}),[e,t.autoPageSize,a]);Wo(e,"viewportInnerSizeChange",c),r.useEffect((function(){null==t.pageSize||t.autoPageSize||e.current.setPageSize(t.pageSize)}),[e,t.autoPageSize,t.pageSize]),r.useEffect((function(){c()}),[c])}(e,t),function(e,t){var n,i,o=Ii(e,"useGridPage"),a=oi(e,bo);e.current.unstable_registerControlState({stateId:"page",propModel:t.page,propOnChange:t.onPageChange,stateSelector:Zp,changeEvent:"pageChange"});var s=r.useCallback((function(t){o.debug("Setting page to ".concat(t)),e.current.setState(Yh(t)),e.current.forceUpdate()}),[e,o]);Bo(e,{setPage:s});var l=r.useCallback((function(n,r){var i,o,a=Zp(e);return r.exportOnlyDirtyModels&&null==t.page&&null==(null==(i=t.initialState)||null==(o=i.pagination)?void 0:o.page)&&0===a?n:E({},n,{pagination:E({},n.pagination,{page:a})})}),[e,t.page,null==(n=t.initialState)||null==(i=n.pagination)?void 0:i.page]),u=r.useCallback((function(t,n){var r,i,o=null!=(r=null==(i=n.stateToRestore.pagination)?void 0:i.page)?r:Zp(e);return e.current.setState(Yh(o)),t}),[e]);la(e,"exportState",l),la(e,"restoreState",u),Wo(e,"pageSizeChange",(function(t){e.current.setState((function(e){var n=Xh(e.pagination.rowCount,t);return E({},e,{pagination:Kh(E({},e.pagination,{pageCount:n,page:e.pagination.page}))})})),e.current.forceUpdate()})),Wo(e,"pageChange",(function(){return e.current.scrollToIndexes({rowIndex:Zp(e)*Qp(e)})})),r.useEffect((function(){}),[t.rowCount,t.paginationMode]),r.useEffect((function(){e.current.setState((function(e){var n=void 0!==t.rowCount?t.rowCount:a,r=Xh(n,e.pagination.pageSize),i=null==t.page?e.pagination.page:t.page;return E({},e,{pagination:Kh(E({},e.pagination,{page:i,rowCount:n,pageCount:r}))})})),e.current.forceUpdate()}),[a,t.rowCount,t.page,t.paginationMode,e])}(e,t)},Jh=function(e){return e.preferencePanel},em=function(e,t){var n,r;return E({},e,{preferencePanel:null!=(n=null==(r=t.initialState)?void 0:r.preferencePanel)?n:{open:!1}})},tm=function(e){return e.editRows};function nm(e){return"function"===typeof e.then}var rm,im,om=function(e){return E({},e,{editRows:{}})};function am(e,t){var n,i=Ii(e,"useGridEditRows");!function(e,t){var n,i=Ii(e,"useGridEditRows"),o=function(e){return function(){t.editMode===sf.Cell&&e.apply(void 0,arguments)}},a=r.useCallback((function(t,n,r){e.current.getCellMode(t,n)!==r&&(i.debug("Switching cell id: ".concat(t," field: ").concat(n," to mode: ").concat(r)),e.current.setState((function(i){var o=E({},i.editRows);return o[t]=E({},o[t]),r===lf.Edit?o[t][n]={value:e.current.getCellValue(t,n)}:(delete o[t][n],Object.keys(o[t]).length||delete o[t]),E({},i,{editRows:o})})),e.current.forceUpdate(),e.current.publishEvent("cellModeChange",e.current.getCellParams(t,n)))}),[e,i]),s=r.useCallback((function(t,n){var r=tm(e.current.state);return r[t]&&r[t][n]?lf.Edit:lf.View}),[e]),l=r.useCallback((function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.id,a=n.field;e.current.unstable_runPendingEditCellValueMutation(o,a);var s=e.current.getEditRowsModel();if(!s[o]||!s[o][a])throw new Error("MUI: Cell at id: ".concat(o," and field: ").concat(a," is not in edit mode."));var l=s[o][a],u=e.current.getColumn(a),c=e.current.getRow(o);if(null!=(r=t.experimentalFeatures)&&r.preventCommitWhileValidating){var d=s[o][a];if(d.isValidating||d.error)return!1}var f=E({},n,{value:l.value}),p=!!l.error;if(!p&&"function"===typeof u.preProcessEditCellProps){var h=u.preProcessEditCellProps({id:o,row:c,props:l});if(nm(h))return h.then((function(t){return e.current.unstable_setEditCellProps({id:o,field:a,props:t}),!t.error&&(e.current.publishEvent("cellEditCommit",f,i),!0)}));e.current.unstable_setEditCellProps({id:o,field:a,props:h}),p=!!h.error}return!p&&(e.current.publishEvent("cellEditCommit",f,i),!0)}),[e,null==(n=t.experimentalFeatures)?void 0:n.preventCommitWhileValidating]),u=r.useCallback((function(t){var n=e.current.getColumn(t.field),r=e.current.getRow(t.id);return new Promise((function(i){var o={value:t.value},a=e.current.getEditRowsModel()[t.id][t.field];if("function"!==typeof n.preProcessEditCellProps)return e.current.unstable_setEditCellProps(E({},t,{props:o})),void i(!0);o=e.current.unstable_setEditCellProps(E({},t,{props:E({},a,{isValidating:!0})})),Promise.resolve(n.preProcessEditCellProps({id:t.id,row:r,props:E({},o,{value:e.current.unstable_parseValue(t.id,t.field,t.value)})})).then((function(n){e.current.unstable_setEditCellProps(E({},t,{props:E({},n,{isValidating:!1})})),i(!n.error)}))}))}),[e]);Bo(e,{setCellMode:a,getCellMode:s,commitCellChange:l,unstable_setCellEditingEditCellValue:u});var c=r.useCallback(function(){var t=(0,da.Z)((0,ca.Z)().mark((function t(n,r){var i,o,a,s,l,u;return(0,ca.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(229!==r.which){t.next=2;break}return t.abrupt("return");case 2:if(i=n.id,o=n.field,a=n.cellMode,n.isEditable){t.next=5;break}return t.abrupt("return");case 5:if(s=a===lf.Edit,l=r.ctrlKey||r.metaKey||r.altKey,s||!ff(r)||l||" "===r.key&&r.shiftKey||e.current.publishEvent("cellEditStart",n,r),!s&&of(r.key)&&(e.current.setEditCellValue({id:i,field:o,value:""}),e.current.commitCellChange({id:i,field:o},r),e.current.publishEvent("cellEditStop",n,r)),!s||!pf(r.key)){t.next=16;break}return u={id:i,field:o},t.next=13,e.current.commitCellChange(u,r);case 13:if(t.sent){t.next=16;break}return t.abrupt("return");case 16:s&&(c=r.key,cf.indexOf(c)>-1)&&e.current.publishEvent("cellEditStop",n,r);case 17:case"end":return t.stop()}var c}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]),d=r.useCallback((function(t,n){t.isEditable&&e.current.publishEvent("cellEditStart",t,n)}),[e]),f=function(){var t=(0,da.Z)((0,ca.Z)().mark((function t(n,r){return(0,ca.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.cellMode!==lf.View){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.current.commitCellChange(n,r);case 4:e.current.publishEvent("cellEditStop",n,r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=Ki((function(e,t){f(e,t)})),m=Ki((function(){var t=Hp(e);if(t){var n=e.current.getCellParams(t.id,t.field);f(n,{})}})),g=r.useCallback((function(t,n){t.isEditable&&(e.current.setCellMode(t.id,t.field,lf.Edit),mf(n)&&af(n)&&e.current.unstable_setEditCellProps({id:t.id,field:t.field,props:{value:""}}))}),[e]),v=r.useCallback((function(t,n){e.current.setCellMode(t.id,t.field,lf.View),mf(n)&&(pf(n.key)?e.current.publishEvent("cellNavigationKeyDown",t,n):("Escape"===n.key||of(n.key))&&e.current.setCellFocus(t.id,t.field))}),[e]),y=r.useCallback((function(t){var n=t.id,r=t.field,o=e.current.getEditRowsModel()[n][r].value;i.debug("Setting cell id: ".concat(n," field: ").concat(r," to value: ").concat(null==o?void 0:o.toString()));var a=e.current.getRow(n);if(a){var s=e.current.getColumn(t.field),l=E({},a,p({},r,o));s.valueSetter&&(l=s.valueSetter({row:a,value:o})),e.current.updateRows([l])}}),[e,i]),b=r.useCallback((function(t){var n=e.current.getRow(t.id),r=e.current.getColumn(t.field),i=r.preProcessEditCellProps?r.preProcessEditCellProps({id:t.id,row:n,props:t.props}):t.props;nm(i)?i.then((function(n){e.current.unstable_setEditCellProps(E({},t,{props:n}))})):e.current.unstable_setEditCellProps(E({},t,{props:i}))}),[e]);Wo(e,"cellKeyDown",o(c)),Wo(e,"cellDoubleClick",o(d)),Wo(e,"cellFocusOut",o(h)),Wo(e,"columnHeaderDragStart",o(m)),Wo(e,"cellEditStart",o(g)),Wo(e,"cellEditStop",o(v)),Wo(e,"cellEditCommit",o(y)),Wo(e,"editCellPropsChange",o(b)),qo(e,"cellEditCommit",t.onCellEditCommit),qo(e,"cellEditStart",t.onCellEditStart),qo(e,"cellEditStop",t.onCellEditStop)}(e,t),function(e,t){var n,i,o=r.useRef(null),a=r.useRef(null),s=oi(e,Zr),l=function(e){return function(){t.editMode===sf.Row&&e.apply(void 0,arguments)}},u=r.useCallback((function(t,n){n!==e.current.getRowMode(t)&&(e.current.setState((function(r){var i=E({},r.editRows);return n===uf.Edit?(i[t]={},s.forEach((function(n){var r=e.current.getCellParams(t,n.field);r.isEditable&&(i[t][n.field]={value:r.value})}))):delete i[t],E({},r,{editRows:i})})),e.current.forceUpdate())}),[e,s]),c=r.useCallback((function(n){return t.editMode===sf.Cell?uf.View:tm(e.current.state)[n]?uf.Edit:uf.View}),[e,t.editMode]),d=r.useCallback((function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.editMode===sf.Cell)throw new Error("MUI: You can't commit changes when the edit mode is 'cell'.");e.current.unstable_runPendingEditCellValueMutation(n);var o=e.current.getEditRowsModel()[n];if(!o)throw new Error("MUI: Row at id: ".concat(n," is not being edited."));if(null!=(r=t.experimentalFeatures)&&r.preventCommitWhileValidating&&!Object.keys(o).reduce((function(e,t){return e&&!o[t].isValidating&&!o[t].error}),!0))return!1;if(Object.values(o).some((function(e){return!!e.error})))return!1;var a=Object.keys(o).filter((function(t){return"function"===typeof e.current.getColumn(t).preProcessEditCellProps}));if(a.length>0){var s=e.current.getRow(n),l=a.map(function(){var t=(0,da.Z)((0,ca.Z)().mark((function t(r){var i,a;return(0,ca.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.current.getColumn(r),t.next=3,Promise.resolve(i.preProcessEditCellProps({id:n,row:s,props:o[r]}));case 3:return a=t.sent,e.current.unstable_setEditCellProps({id:n,field:r,props:a}),t.abrupt("return",a.error);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return Promise.all(l).then((function(t){return!t.some((function(e){return!!e}))&&(e.current.publishEvent("rowEditCommit",n,i),!0)}))}return e.current.publishEvent("rowEditCommit",n,i),!0}),[e,t.editMode,null==(n=t.experimentalFeatures)?void 0:n.preventCommitWhileValidating]),f=r.useCallback((function(t){var n=e.current.getEditRowsModel()[t.id],r=e.current.getRow(t.id),i=!0;return new Promise((function(o){Object.keys(n).forEach(function(){var o=(0,da.Z)((0,ca.Z)().mark((function o(a){var s,l;return(0,ca.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=e.current.getColumn(a),l=a===t.field?{value:t.value}:n[a],l=e.current.unstable_setEditCellProps({id:t.id,field:a,props:E({},l,{isValidating:!0})}),!s.preProcessEditCellProps){o.next=7;break}return o.next=6,Promise.resolve(s.preProcessEditCellProps({id:t.id,row:r,props:E({},l,{value:a===t.field?e.current.unstable_parseValue(t.id,a,t.value):l.value})}));case 6:l=o.sent;case 7:l.error&&(i=!1),e.current.unstable_setEditCellProps({id:t.id,field:a,props:E({},l,{isValidating:!1})});case 9:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()),o(i)}))}),[e]);Bo(e,{setRowMode:u,getRowMode:c,commitRowChange:d,unstable_setRowEditingEditCellValue:f});var p=r.useCallback(function(){var n=(0,da.Z)((0,ca.Z)().mark((function n(r,i){var o,a,s,l;return(0,ca.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(229!==i.which){n.next=2;break}return n.abrupt("return");case 2:if(o=r.cellMode,r.isEditable){n.next=5;break}return n.abrupt("return");case 5:if(a=o===lf.Edit,s=e.current.getRowParams(r.id),!a){n.next=20;break}if("Enter"!==i.key){n.next=17;break}return n.next=11,e.current.commitRowChange(r.id);case 11:if(n.sent||null==(l=t.experimentalFeatures)||!l.preventCommitWhileValidating){n.next=14;break}return n.abrupt("return");case 14:e.current.publishEvent("rowEditStop",s,i),n.next=18;break;case 17:"Escape"===i.key&&e.current.publishEvent("rowEditStop",s,i);case 18:n.next=21;break;case 20:"Enter"===i.key&&e.current.publishEvent("rowEditStart",s,i);case 21:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e,null==(i=t.experimentalFeatures)?void 0:i.preventCommitWhileValidating]),h=r.useCallback((function(t,n){if(t.isEditable){var r=e.current.getRowParams(t.id);e.current.publishEvent("rowEditStart",r,n)}}),[e]),m=r.useCallback((function(t){var n=e.current.getRow(t.id),r=e.current.getEditRowsModel()[t.id];Object.keys(r).forEach(function(){var i=(0,da.Z)((0,ca.Z)().mark((function i(o){var a,s,l;return(0,ca.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(a=e.current.getColumn(o)).preProcessEditCellProps){i.next=9;break}return s=o===t.field?t.props:r[o],i.next=5,Promise.resolve(a.preProcessEditCellProps({id:t.id,row:n,props:s}));case 5:l=i.sent,e.current.unstable_setEditCellProps({id:t.id,field:o,props:l}),i.next=10;break;case 9:o===t.field&&e.current.unstable_setEditCellProps(t);case 10:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}),[e]),g=r.useCallback((function(t){e.current.setRowMode(t.id,uf.Edit)}),[e]),v=r.useCallback((function(t,n){e.current.setRowMode(t.id,uf.View),"Enter"===n.key&&e.current.publishEvent("cellNavigationKeyDown",t,n)}),[e]),y=r.useCallback((function(t){var n=e.current.getEditRowsModel()[t];if(!n)throw new Error("MUI: Row at id: ".concat(t," is not being edited."));var r=e.current.getRow(t);if(r){var i=E({},r);Object.keys(n).forEach((function(t){var r=e.current.getColumn(t),o=n[t].value;r.valueSetter?i=r.valueSetter({row:i,value:o}):i[t]=o})),e.current.updateRows([i])}}),[e]),b=r.useCallback((function(e){a.current=e}),[]),x=function(){var t=(0,da.Z)((0,ca.Z)().mark((function t(n,r){return(0,ca.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.cellMode!==lf.View){t.next=2;break}return t.abrupt("return");case 2:a.current=null,o.current=setTimeout((0,da.Z)((0,ca.Z)().mark((function t(){var i,o;return(0,ca.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null==(i=a.current)?void 0:i.id)===n.id){t.next=5;break}return t.next=3,e.current.commitRowChange(n.id,r);case 3:o=e.current.getRowParams(n.id),e.current.publishEvent("rowEditStop",o,r);case 5:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=Ki((function(e,t){x(e,t)})),_=Ki((function(){var t=Hp(e);if(t){var n=e.current.getCellParams(t.id,t.field);x(n,{})}}));Wo(e,"cellKeyDown",l(p)),Wo(e,"cellDoubleClick",l(h)),Wo(e,"editCellPropsChange",l(m)),Wo(e,"rowEditStart",l(g)),Wo(e,"rowEditStop",l(v)),Wo(e,"rowEditCommit",l(y)),Wo(e,"cellFocusIn",l(b)),Wo(e,"cellFocusOut",l(w)),Wo(e,"columnHeaderDragStart",l(_)),qo(e,"rowEditCommit",t.onRowEditCommit),qo(e,"rowEditStart",t.onRowEditStart),qo(e,"rowEditStop",t.onRowEditStop)}(e,t);var o=r.useRef({});e.current.unstable_registerControlState({stateId:"editRows",propModel:t.editRowsModel,propOnChange:t.onEditRowsModelChange,stateSelector:tm,changeEvent:"editRowsModelChange"});var a=r.useCallback((function(e){return!e.rowNode.isAutoGenerated&&!e.rowNode.isPinned&&!!e.colDef.editable&&!!e.colDef.renderEditCell&&(!t.isCellEditable||t.isCellEditable(e))}),[t.isCellEditable]),s=function(e,t,n,r){if(n){if(o.current[e]||(o.current[e]={}),o.current[e][t]){var i=c(o.current[e][t],1)[0];clearTimeout(i)}var a=setTimeout((function(){r(),delete o.current[e][t]}),n);o.current[e][t]=[a,function(){r();var n=c(o.current[e][t],1)[0];clearTimeout(n),delete o.current[e][t]}]}else r()},l=r.useCallback((function(e,t){if(o.current[e])if(t){if(o.current[e][t]){(0,c(o.current[e][t],2)[1])()}}else Object.keys(o.current[e]).forEach((function(t){(0,c(o.current[e][t],2)[1])()}))}),[]),u=r.useCallback((function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(n.id,n.field,n.debounceMs,(function(){var i;if(null!=(i=t.experimentalFeatures)&&i.preventCommitWhileValidating)return"row"===t.editMode?e.current.unstable_setRowEditingEditCellValue(n):e.current.unstable_setCellEditingEditCellValue(n);var o={id:n.id,field:n.field,props:{value:n.value}};return e.current.publishEvent("editCellPropsChange",o,r)}))}),[e,t.editMode,null==(n=t.experimentalFeatures)?void 0:n.preventCommitWhileValidating]),d=r.useCallback((function(t,n,r){var i=e.current.getColumn(n);return i.valueParser?i.valueParser(r,e.current.getCellParams(t,n)):r}),[e]),f=r.useCallback((function(t){var n=t.id,r=t.field,o=t.props;return i.debug("Setting cell props on id: ".concat(n," field: ").concat(r)),e.current.setState((function(e){var t=E({},e.editRows);return t[n]=E({},e.editRows[n]),t[n][r]=E({},o,{value:d(n,r,o.value)}),E({},e,{editRows:t})})),e.current.forceUpdate(),tm(e.current.state)[n][r]}),[e,i,d]),h=r.useCallback((function(t){tm(e.current.state)!==t&&(i.debug("Setting editRows model"),e.current.setState((function(e){return E({},e,{editRows:t})})),e.current.forceUpdate())}),[e,i]),m=r.useCallback((function(){return tm(e.current.state)}),[e]),g=r.useCallback((function(e,t){var n=t.detail>1;e.isEditable&&e.cellMode===lf.View&&n&&t.preventDefault()}),[]);Wo(e,"cellMouseDown",g),qo(e,"editCellPropsChange",t.onEditCellPropsChange),Bo(e,{isCellEditable:a,setEditRowsModel:h,getEditRowsModel:m,setEditCellValue:u,unstable_setEditCellProps:f,unstable_parseValue:d,unstable_runPendingEditCellValueMutation:l}),r.useEffect((function(){void 0!==t.editRowsModel&&e.current.setEditRowsModel(t.editRowsModel)}),[e,t.editRowsModel])}!function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"}(rm||(rm={})),function(e){e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"}(im||(im={}));var sm,lm,um=["id","field"],cm=["id","field"],dm=Gr(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error");!function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"}(sm||(sm={})),function(e){e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"}(lm||(lm={}));var fm=["id"],pm=["id"],hm=Gr(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error"),mm=function(e){return E({},e,{editRows:{}})},gm=function(e,t){!function(e,t){var n=c(r.useState({}),2),i=n[0],o=n[1],a=r.useRef(i),s=r.useRef({}),l=t.processRowUpdate,u=t.onProcessRowUpdateError,d=t.cellModesModel,h=t.onCellModesModelChange,m=t.signature,g=function(e){return function(){t.editMode===sf.Cell&&e.apply(void 0,arguments)}},v=r.useCallback((function(t,n){var r=e.current.getCellParams(t,n);if(!e.current.isCellEditable(r))throw new Error("MUI: The cell with id=".concat(t," and field=").concat(n," is not editable."))}),[e]),y=r.useCallback((function(t,n,r){if(e.current.getCellMode(t,n)!==r)throw new Error("MUI: The cell with id=".concat(t," and field=").concat(n," is not in ").concat(r," mode."))}),[e]),b=r.useCallback((function(t,n){if(t.isEditable&&t.cellMode!==lf.Edit){var r=E({},t,{reason:rm.cellDoubleClick});e.current.publishEvent("cellEditStart",r,n)}}),[e]),x=r.useCallback((function(t,n){if(t.cellMode!==lf.View&&e.current.getCellMode(t.id,t.field)!==lf.View){var r=E({},t,{reason:im.cellFocusOut});e.current.publishEvent("cellEditStop",r,n)}}),[e]),w=r.useCallback((function(t,n){if(t.cellMode===lf.Edit){if(229===n.which)return;var r;if("Escape"===n.key?r=im.escapeKeyDown:"Enter"===n.key?r=im.enterKeyDown:"Tab"===n.key&&(r=n.shiftKey?im.shiftTabKeyDown:im.tabKeyDown,n.preventDefault()),r){var i=E({},t,{reason:r});e.current.publishEvent("cellEditStop",i,n)}}else if(t.isEditable){var o;if(" "===n.key&&n.shiftKey)return;if(af(n)||(n.ctrlKey||n.metaKey)&&"v"===n.key?o=rm.printableKeyDown:"Enter"===n.key?o=rm.enterKeyDown:"Delete"!==n.key&&"Backspace"!==n.key||(o=rm.deleteKeyDown),o){var a=E({},t,{reason:o,key:n.key});e.current.publishEvent("cellEditStart",a,n)}}}),[e]),_=r.useCallback((function(t){var n=t.id,i=t.field,o=t.reason,a=t.key,s={id:n,field:i};o===rm.printableKeyDown?r.version.startsWith("18")?s.initialValue=a:s.deleteValue=!0:o===rm.deleteKeyDown&&(s.deleteValue=!0),e.current.startCellEditMode(s)}),[e]),S=r.useCallback((function(n){var r,i=n.id,o=n.field,a=n.reason;e.current.unstable_runPendingEditCellValueMutation(i,o),a===im.enterKeyDown?r="below":a===im.tabKeyDown?r="right":a===im.shiftTabKeyDown&&(r="left");var s="escapeKeyDown"===a;tm(e.current.state)[i][o].isProcessingProps&&!t.disableIgnoreModificationsIfProcessingProps&&(s=!0),e.current.stopCellEditMode({id:i,field:o,ignoreModifications:s,cellToFocusAfter:r})}),[e,t.disableIgnoreModificationsIfProcessingProps]);Wo(e,"cellDoubleClick",g(b)),Wo(e,"cellFocusOut",g(x)),Wo(e,"cellKeyDown",g(w)),Wo(e,"cellEditStart",g(_)),Wo(e,"cellEditStop",g(S)),qo(e,"cellEditStart",t.onCellEditStart),qo(e,"cellEditStop",t.onCellEditStop);var C=r.useCallback((function(t,n){var r=tm(e.current.state);return r[t]&&r[t][n]?lf.Edit:lf.View}),[e]),P=Xi((function(n){var r=n!==t.cellModesModel;if(h&&r){var i=m===zo.DataGridPro?{api:e.current}:{};h(n,i)}t.cellModesModel&&r||(o(n),a.current=n,e.current.publishEvent("cellModesModelChange",n))})),M=r.useCallback((function(e,t,n){var r=E({},a.current);if(null!==n)r[e]=E({},r[e],p({},t,E({},n)));else{var i=k(r[e],[t].map(f));r[e]=i,0===Object.keys(r[e]).length&&delete r[e]}P(r)}),[P]),A=r.useCallback((function(t,n,r){e.current.setState((function(e){var i=E({},e.editRows);return null!==r?i[t]=E({},i[t],p({},n,E({},r))):(delete i[t][n],0===Object.keys(i[t]).length&&delete i[t]),E({},e,{editRows:i})})),e.current.forceUpdate()}),[e]),T=r.useCallback((function(e){var t=e.id,n=e.field,r=k(e,um);v(t,n),y(t,n,lf.View),M(t,n,E({mode:lf.Edit},r))}),[v,y,M]),R=Xi((function(t){var n=t.id,r=t.field,i=t.deleteValue,o=t.initialValue,a=e.current.getCellValue(n,r);(i||o)&&(a=i?"":o),A(n,r,{value:a,error:!1,isProcessingProps:!1}),e.current.setCellFocus(n,r)})),I=r.useCallback((function(e){var t=e.id,n=e.field,r=k(e,cm);y(t,n,lf.Edit),M(t,n,E({mode:lf.View},r))}),[y,M]),O=Xi(function(){var t=(0,da.Z)((0,ca.Z)().mark((function t(n){var r,i,o,a,c,d,f,p,h,m,g,v,b;return(0,ca.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.id,i=n.field,o=n.ignoreModifications,a=n.cellToFocusAfter,c=void 0===a?"none":a,y(r,i,lf.Edit),e.current.unstable_runPendingEditCellValueMutation(r,i),d=function(){A(r,i,null),M(r,i,null),"none"!==c&&e.current.unstable_moveFocusToRelativeCell(r,i,c)},!o){t.next=7;break}return d(),t.abrupt("return");case 7:if(f=tm(e.current.state),p=f[r][i],h=p.error,m=p.isProcessingProps,!h&&!m){t.next=13;break}return s.current[r][i].mode=lf.Edit,M(r,i,{mode:lf.Edit}),t.abrupt("return");case 13:if(g=e.current.unstable_getRowWithUpdatedValuesFromCellEditing(r,i),l){v=function(e){s.current[r][i].mode=lf.Edit,M(r,i,{mode:lf.Edit}),u?u(e):dm()};try{b=e.current.getRow(r),Promise.resolve(l(g,b)).then((function(t){e.current.updateRows([t]),d()})).catch(v)}catch(x){v(x)}}else e.current.updateRows([g]),d();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),L=r.useCallback(function(){var t=(0,da.Z)((0,ca.Z)().mark((function t(n){var r,i,o,a,s,l,u,c,d,f,p,h,m;return(0,ca.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.id,a=n.field,s=n.value,l=n.debounceMs,u=n.unstable_skipValueParser,v(o,a),y(o,a,lf.Edit),c=e.current.getColumn(a),d=e.current.getRow(o),f=s,c.valueParser&&!u&&(f=c.valueParser(s,e.current.getCellParams(o,a))),p=tm(e.current.state),h=E({},p[o][a],{value:f,changeReason:l?"debouncedSetEditCellValue":"setEditCellValue"}),!c.preProcessEditCellProps){t.next=16;break}return m=s!==p[o][a].value,h=E({},h,{isProcessingProps:!0}),A(o,a,h),t.next=15,Promise.resolve(c.preProcessEditCellProps({id:o,row:d,props:h,hasChanged:m}));case 15:h=t.sent;case 16:if(e.current.getCellMode(o,a)!==lf.View){t.next=18;break}return t.abrupt("return",!1);case 18:return p=tm(e.current.state),(h=E({},h,{isProcessingProps:!1})).value=c.preProcessEditCellProps?p[o][a].value:f,A(o,a,h),p=tm(e.current.state),t.abrupt("return",!(null!=(r=p[o])&&null!=(i=r[a])&&i.error));case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,v,y,A]),D=r.useCallback((function(t,n){var r=e.current.getColumn(n),i=tm(e.current.state)[t][n].value,o=e.current.getRow(t);return r.valueSetter?r.valueSetter({value:i,row:o}):E({},o,p({},n,i))}),[e]);Bo(e,{getCellMode:C,startCellEditMode:T,stopCellEditMode:I,unstable_setCellEditingEditCellValue:L,unstable_getRowWithUpdatedValuesFromCellEditing:D}),r.useEffect((function(){d&&P(d)}),[d,P]),r.useEffect((function(){var t=_i(e),n=s.current;s.current=Io(i),Object.entries(i).forEach((function(e){var r=c(e,2),i=r[0],o=r[1];Object.entries(o).forEach((function(e){var r,o,a,s=c(e,2),l=s[0],u=s[1],d=(null==(r=n[i])||null==(o=r[l])?void 0:o.mode)||lf.View,f=null!=(a=t[i])?a:i;u.mode===lf.Edit&&d===lf.View?R(E({id:f,field:l},u)):u.mode===lf.View&&d===lf.Edit&&O(E({id:f,field:l},u))}))}))}),[e,i,R,O])}(e,t),function(e,t){var n=c(r.useState({}),2),i=n[0],o=n[1],a=r.useRef(i),s=r.useRef({}),l=r.useRef(null),u=r.useRef(null),d=t.processRowUpdate,h=t.onProcessRowUpdateError,m=t.rowModesModel,g=t.onRowModesModelChange,v=t.signature,y=function(e){return function(){t.editMode===sf.Row&&e.apply(void 0,arguments)}},b=r.useCallback((function(t,n){var r=e.current.getCellParams(t,n);if(!e.current.isCellEditable(r))throw new Error("MUI: The cell with id=".concat(t," and field=").concat(n," is not editable."))}),[e]),x=r.useCallback((function(t,n){if(e.current.getRowMode(t)!==n)throw new Error("MUI: The row with id=".concat(t," is not in ").concat(n," mode."))}),[e]),w=r.useCallback((function(t,n){if(t.isEditable&&e.current.getRowMode(t.id)!==uf.Edit){var r=E({},e.current.getRowParams(t.id),{field:t.field,reason:sm.cellDoubleClick});e.current.publishEvent("rowEditStart",r,n)}}),[e]),_=r.useCallback((function(e){u.current=e}),[]),S=r.useCallback((function(t,n){t.isEditable&&e.current.getRowMode(t.id)!==uf.View&&(u.current=null,l.current=setTimeout((function(){var r;if(l.current=null,(null==(r=u.current)?void 0:r.id)!==t.id){if(!e.current.getRow(t.id))return;if(e.current.getRowMode(t.id)===uf.View)return;var i=E({},e.current.getRowParams(t.id),{field:t.field,reason:lm.rowFocusOut});e.current.publishEvent("rowEditStop",i,n)}})))}),[e]);r.useEffect((function(){return function(){clearTimeout(l.current)}}),[]);var C=r.useCallback((function(t,n){if(t.cellMode===uf.Edit){if(229===n.which)return;var r;if("Escape"===n.key)r=lm.escapeKeyDown;else if("Enter"===n.key)r=lm.enterKeyDown;else if("Tab"===n.key){var i=Kr(e).filter((function(n){return e.current.isCellEditable(e.current.getCellParams(t.id,n))}));n.shiftKey?t.field===i[0]&&(r=lm.shiftTabKeyDown):t.field===i[i.length-1]&&(r=lm.tabKeyDown),r&&n.preventDefault()}if(r){var o=E({},e.current.getRowParams(t.id),{reason:r,field:t.field});e.current.publishEvent("rowEditStop",o,n)}}else if(t.isEditable){var a;if(" "===n.key&&n.shiftKey)return;if(af(n)||(n.ctrlKey||n.metaKey)&&"v"===n.key?a=sm.printableKeyDown:"Enter"===n.key?a=sm.enterKeyDown:"Delete"!==n.key&&"Backspace"!==n.key||(a=sm.deleteKeyDown),a){var s=E({},e.current.getRowParams(t.id),{field:t.field,key:n.key,reason:a});e.current.publishEvent("rowEditStart",s,n)}}}),[e]),P=r.useCallback((function(t){var n=t.id,i=t.field,o=t.reason,a=t.key,s={id:n,fieldToFocus:i};o===sm.printableKeyDown?r.version.startsWith("18")?s.initialValue=a:s.deleteValue=!!i:o===sm.deleteKeyDown&&(s.deleteValue=!!i),e.current.startRowEditMode(s)}),[e]),M=r.useCallback((function(n){var r,i=n.id,o=n.reason,a=n.field;e.current.unstable_runPendingEditCellValueMutation(i),o===lm.enterKeyDown?r="below":o===lm.tabKeyDown?r="right":o===lm.shiftTabKeyDown&&(r="left");var s="escapeKeyDown"===o,l=tm(e.current.state);s||t.disableIgnoreModificationsIfProcessingProps||(s=Object.values(l[i]).some((function(e){return e.isProcessingProps}))),e.current.stopRowEditMode({id:i,ignoreModifications:s,field:a,cellToFocusAfter:r})}),[e,t.disableIgnoreModificationsIfProcessingProps]);Wo(e,"cellDoubleClick",y(w)),Wo(e,"cellFocusIn",y(_)),Wo(e,"cellFocusOut",y(S)),Wo(e,"cellKeyDown",y(C)),Wo(e,"rowEditStart",y(P)),Wo(e,"rowEditStop",y(M)),qo(e,"rowEditStart",t.onRowEditStart),qo(e,"rowEditStop",t.onRowEditStop);var A=r.useCallback((function(n){if(t.editMode===sf.Cell)return uf.View;var r=tm(e.current.state);return r[n]&&Object.keys(r[n]).length>0?uf.Edit:uf.View}),[e,t.editMode]),T=Xi((function(n){var r=n!==t.rowModesModel;if(g&&r){var i=v===zo.DataGridPro?{api:e.current}:{};g(n,i)}t.rowModesModel&&r||(o(n),a.current=n,e.current.publishEvent("rowModesModelChange",n))})),R=r.useCallback((function(e,t){var n=E({},a.current);null!==t?n[e]=E({},t):delete n[e],T(n)}),[T]),I=r.useCallback((function(t,n){e.current.setState((function(e){var r=E({},e.editRows);return null!==n?r[t]=n:delete r[t],E({},e,{editRows:r})})),e.current.forceUpdate()}),[e]),O=r.useCallback((function(t,n,r){e.current.setState((function(e){var i=E({},e.editRows);return null!==r?i[t]=E({},i[t],p({},n,E({},r))):(delete i[t][n],0===Object.keys(i[t]).length&&delete i[t]),E({},e,{editRows:i})})),e.current.forceUpdate()}),[e]),L=r.useCallback((function(e){var t=e.id,n=k(e,fm);x(t,uf.View),R(t,E({mode:uf.Edit},n))}),[x,R]),D=Xi((function(t){var n=t.id,r=t.fieldToFocus,i=t.deleteValue,o=t.initialValue,a=Kr(e).reduce((function(t,a){if(!e.current.getCellParams(n,a).isEditable)return t;var s=e.current.getCellValue(n,a);return r===a&&(i||o)&&(s=i?"":o),t[a]={value:s,error:!1,isProcessingProps:!1},t}),{});I(n,a),r&&e.current.setCellFocus(n,r)})),F=r.useCallback((function(e){var t=e.id,n=k(e,pm);x(t,uf.Edit),R(t,E({mode:uf.View},n))}),[x,R]),N=Xi((function(t){var n=t.id,r=t.ignoreModifications,i=t.field,o=t.cellToFocusAfter,a=void 0===o?"none":o;e.current.unstable_runPendingEditCellValueMutation(n);var l=function(){"none"!==a&&i&&e.current.unstable_moveFocusToRelativeCell(n,i,a),I(n,null),R(n,null)};if(r)l();else{var u=tm(e.current.state),c=e.current.getRow(n);if(Object.values(u[n]).some((function(e){return e.isProcessingProps})))s.current[n].mode=uf.Edit;else{if(Object.values(u[n]).some((function(e){return e.error})))return s.current[n].mode=uf.Edit,void R(n,{mode:uf.Edit});var f=e.current.unstable_getRowWithUpdatedValuesFromRowEditing(n);if(d){var p=function(e){s.current[n].mode=uf.Edit,R(n,{mode:uf.Edit}),h?h(e):hm()};try{Promise.resolve(d(f,c)).then((function(t){e.current.updateRows([t]),l()})).catch(p)}catch(m){p(m)}}else e.current.updateRows([f]),l()}}})),B=r.useCallback((function(t){var n=t.id,r=t.field,i=t.value,o=t.debounceMs,a=t.unstable_skipValueParser;b(n,r);var s=e.current.getColumn(r),l=e.current.getRow(n),u=i;s.valueParser&&!a&&(u=s.valueParser(i,e.current.getCellParams(n,r)));var d=tm(e.current.state),p=E({},d[n][r],{value:u,changeReason:o?"debouncedSetEditCellValue":"setEditCellValue"});return s.preProcessEditCellProps||O(n,r,p),new Promise((function(t){var i=[];if(s.preProcessEditCellProps){var o=p.value!==d[n][r].value;p=E({},p,{isProcessingProps:!0}),O(n,r,p);var a=k(d[n],[r].map(f)),h=Promise.resolve(s.preProcessEditCellProps({id:n,row:l,props:p,hasChanged:o,otherFieldsProps:a})).then((function(i){e.current.getRowMode(n)!==uf.View?(d=tm(e.current.state),(i=E({},i,{isProcessingProps:!1})).value=s.preProcessEditCellProps?d[n][r].value:u,O(n,r,i)):t(!1)}));i.push(h)}Object.entries(d[n]).forEach((function(o){var a=c(o,2),s=a[0],u=a[1];if(s!==r){var p=e.current.getColumn(s);if(p.preProcessEditCellProps){u=E({},u,{isProcessingProps:!0}),O(n,s,u);var h=k((d=tm(e.current.state))[n],[s].map(f)),m=Promise.resolve(p.preProcessEditCellProps({id:n,row:l,props:u,hasChanged:!1,otherFieldsProps:h})).then((function(r){e.current.getRowMode(n)!==uf.View?(r=E({},r,{isProcessingProps:!1}),O(n,s,r)):t(!1)}));i.push(m)}}})),Promise.all(i).then((function(){e.current.getRowMode(n)===uf.Edit?(d=tm(e.current.state),t(!d[n][r].error)):t(!1)}))}))}),[e,b,O]),z=r.useCallback((function(t){var n=tm(e.current.state),r=E({},e.current.getRow(t));return Object.entries(n[t]).forEach((function(t){var n=c(t,2),i=n[0],o=n[1],a=e.current.getColumn(i);a.valueSetter?r=a.valueSetter({value:o.value,row:r}):r[i]=o.value})),r}),[e]);Bo(e,{getRowMode:A,startRowEditMode:L,stopRowEditMode:F,unstable_setRowEditingEditCellValue:B,unstable_getRowWithUpdatedValuesFromRowEditing:z}),r.useEffect((function(){m&&T(m)}),[m,T]),r.useEffect((function(){var t=_i(e),n=s.current;s.current=Io(i),Object.entries(i).forEach((function(e){var r,i,o=c(e,2),a=o[0],s=o[1],l=(null==(r=n[a])?void 0:r.mode)||uf.View,u=null!=(i=t[a])?i:a;s.mode===uf.Edit&&l===uf.View?D(E({id:u},s)):s.mode===uf.View&&l===uf.Edit&&N(E({id:u},s))}))}),[e,i,D,N])}(e,t);var n=r.useRef({}),i=t.isCellEditable,o=r.useCallback((function(e){return!e.rowNode.isAutoGenerated&&(!!e.colDef.editable&&(!!e.colDef.renderEditCell&&(i?i(e):!e.rowNode.isPinned)))}),[i]);r.useEffect((function(){var e=n.current;return function(){Object.entries(e).forEach((function(t){var n=c(t,2),r=n[0],i=n[1];Object.keys(i).forEach((function(t){var n=c(e[r][t],1)[0];clearTimeout(n),delete e[r][t]}))}))}}),[]);var a=r.useCallback((function(e,t){if(n.current[e])if(t){if(n.current[e][t]){(0,c(n.current[e][t],2)[1])()}}else Object.keys(n.current[e]).forEach((function(t){(0,c(n.current[e][t],2)[1])()}))}),[]),s=r.useCallback((function(r){var i=r.id,o=r.field,a=r.debounceMs;return new Promise((function(s){!function(e,t,r,i){if(r){if(n.current[e]||(n.current[e]={}),n.current[e][t]){var o=c(n.current[e][t],1)[0];clearTimeout(o)}var a=setTimeout((function(){i(),delete n.current[e][t]}),r);n.current[e][t]=[a,function(){var r=c(n.current[e][t],1)[0];clearTimeout(r),i(),delete n.current[e][t]}]}else i()}(i,o,a,(0,da.Z)((0,ca.Z)().mark((function n(){var a,l;return(0,ca.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.editMode===sf.Row?e.current.unstable_setRowEditingEditCellValue:e.current.unstable_setCellEditingEditCellValue,e.current.getCellMode(i,o)!==lf.Edit){n.next=6;break}return n.next=4,a(r);case 4:l=n.sent,s(l);case 6:case"end":return n.stop()}}),n)}))))}))}),[e,t.editMode]),l=r.useCallback((function(n,r){return t.editMode===sf.Cell?e.current.unstable_getRowWithUpdatedValuesFromCellEditing(n,r):e.current.unstable_getRowWithUpdatedValuesFromRowEditing(n)}),[e,t.editMode]),u=r.useCallback((function(t,n){return{changeReason:tm(e.current.state)[t][n].changeReason}}),[e]);Bo(e,{isCellEditable:o,setEditCellValue:s,unstable_runPendingEditCellValueMutation:a,unstable_getRowWithUpdatedValues:l,unstable_getEditCellMeta:u})},vm=function(e,t,n){return n.current.unstable_caches.rows=Uh({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),E({},e,{rows:Vh({apiRef:n,previousTree:null,rowCountProp:t.rowCount,loadingProp:t.loading})})},ym=function(e,t){var n=Ii(e,"useGridRows"),i=Fh(e,t),o=r.useRef(Date.now()),a=r.useRef(null),s=r.useCallback((function(t){var n;return null!=(n=wi(e)[t])?n:null}),[e]),l=r.useMemo((function(){return i.rows.reduce((function(e,t,n){return e[t.id]=n,e}),{})}),[i.rows]),u=r.useCallback((function(n,r){var i=function(){a.current=null,o.current=Date.now(),e.current.setState((function(n){return E({},n,{rows:Vh({apiRef:e,previousTree:Si(e),rowCountProp:t.rowCount,loadingProp:t.loading})})})),e.current.publishEvent("rowsSet"),e.current.forceUpdate()};if(a.current&&(clearTimeout(a.current),a.current=null),e.current.unstable_caches.rows=n,r){var s=t.throttleRowsMs-(Date.now()-o.current);s>0?a.current=setTimeout(i,s):i()}else i()}),[t.throttleRowsMs,t.rowCount,t.loading,e]),d=r.useCallback((function(r){n.debug("Updating all rows, new length ".concat(r.length));var i=Uh({rows:r,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),o=e.current.unstable_caches.rows;i.rowsBeforePartialUpdates=o.rowsBeforePartialUpdates,u(i,!0)}),[n,t.getRowId,t.loading,t.rowCount,u,e]),f=r.useCallback((function(n){if(t.signature===zo.DataGrid&&n.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));var r=new Map;n.forEach((function(e){var n=Hh(e,t.getRowId,"A row was provided without id when calling updateRows():");r.has(n)?r.set(n,E({},r.get(n),e)):r.set(n,e)}));var i=[],o=e.current.unstable_caches.rows,a={rowsBeforePartialUpdates:o.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:o.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:o.rowCountPropBeforePartialUpdates,idRowsLookup:E({},o.idRowsLookup),idToIdLookup:E({},o.idToIdLookup),ids:z(o.ids)};r.forEach((function(t,n){return"delete"===t._action?(delete a.idRowsLookup[n],delete a.idToIdLookup[n],void i.push(n)):e.current.getRow(n)?void(a.idRowsLookup[n]=E({},e.current.getRow(n),t)):(a.idRowsLookup[n]=t,a.idToIdLookup[n]=n,void a.ids.push(n))})),i.length>0&&(a.ids=a.ids.filter((function(e){return!i.includes(e)}))),u(a,!0)}),[t.signature,t.getRowId,u,e]),h=r.useCallback((function(){var t=ki(e),n=wi(e);return new Map(t.map((function(e){return[e,n[e]]})))}),[e]),m=r.useCallback((function(){return yi(e)}),[e]),g=r.useCallback((function(){return ki(e)}),[e]),v=r.useCallback((function(e){return l[e]}),[l]),y=r.useCallback((function(t,n){var r=e.current.getRowNode(t);if(!r)throw new Error("MUI: No row with id #".concat(t," found"));var i=E({},r,{childrenExpanded:n});e.current.setState((function(e){return E({},e,{rows:E({},e.rows,{tree:E({},e.rows.tree,p({},t,i))})})})),e.current.forceUpdate(),e.current.publishEvent("rowExpansionChange",i)}),[e]),b=r.useCallback((function(t){var n;return null!=(n=Si(e)[t])?n:null}),[e]),x=r.useCallback((function(t){var n,r=t.skipAutoGeneratedRows,i=void 0===r||r,o=t.groupId,a=t.applySorting,s=t.applyFiltering,l=Si(e);if(a){var u=l[o];if(!u)return[];var c=ro(e);n=[];for(var d=c.findIndex((function(e){return e===o}))+1,f=d;f<c.length&&l[c[f]].depth>u.depth;f+=1){var p=c[f],h=l[p];i&&h.isAutoGenerated||n.push(p)}}else n=Gh(l,o,i);if(s){var m=fo(e);n=n.filter((function(e){return!1!==m[e]}))}return n}),[e]),w=r.useCallback((function(t,r){var i=ki(e),o=i.findIndex((function(e){return e===t}));if(-1!==o&&o!==r){n.debug("Moving row ".concat(t," to index ").concat(r));var a=z(i);a.splice(r,0,a.splice(o,1)[0]),e.current.setState((function(e){return E({},e,{rows:E({},e.rows,{ids:a})})})),e.current.unstable_caches.rows.ids=a,e.current.publishEvent("rowsSet")}}),[e,n]),_=r.useCallback((function(n,r){if(t.signature===zo.DataGrid&&r.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));if(0!==r.length){var i=z(ki(e)),o=wi(e),a=_i(e),s=Si(e),l=E({},o),u=E({},a),d=E({},s),f=r.map((function(e){return{id:Hh(e,t.getRowId,"A row was provided without id when calling replaceRows()."),model:e}}));f.forEach((function(e,t){var r=c(i.splice(n+t,1,e.id),1)[0];delete l[r],delete u[r],delete d[r]})),f.forEach((function(e){var t={id:e.id,parent:null,depth:0,groupingKey:null,groupingField:null};l[e.id]=e.model,u[e.id]=e.id,d[e.id]=t})),e.current.unstable_caches.rows.idRowsLookup=l,e.current.unstable_caches.rows.idToIdLookup=u,e.current.unstable_caches.rows.ids=i,e.current.setState((function(e){return E({},e,{rows:E({},e.rows,{idRowsLookup:l,idToIdLookup:u,tree:d,ids:i})})})),e.current.publishEvent("rowsSet")}}),[e,t.signature,t.getRowId]),S={getRow:s,getRowModels:h,getRowsCount:m,getAllRowIds:g,setRows:d,setRowIndex:w,updateRows:f,setRowChildrenExpansion:y,getRowNode:b,getRowIndexRelativeToVisibleRows:v,getRowGroupChildren:x,unstable_replaceRows:_},C=r.useCallback((function(){var r;n.info("Row grouping pre-processing have changed, regenerating the row tree"),r=e.current.unstable_caches.rows.rowsBeforePartialUpdates===t.rows?e.current.unstable_caches.rows:Uh({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),u(r,!1)}),[n,e,t.rows,t.getRowId,t.loading,t.rowCount,u]),k=r.useCallback((function(e){"rowTreeCreation"===e&&C()}),[C]),P=r.useCallback((function(){e.current.unstable_getActiveStrategy("rowTree")!==Ci(e)&&C()}),[e,C]);Wo(e,"activeStrategyProcessorChange",k),Wo(e,"strategyAvailabilityChange",P);var M=r.useCallback((function(){e.current.setState((function(t){return E({},t,{rows:E({},t.rows,e.current.unstable_applyPipeProcessors("hydrateRows",t.rows.groupingResponseBeforeRowHydration))})})),e.current.publishEvent("rowsSet"),e.current.forceUpdate()}),[e]);ua(e,"hydrateRows",M),Bo(e,S),r.useEffect((function(){return function(){null!==a.current&&clearTimeout(a.current)}}),[]);var A=r.useRef(!0);r.useEffect((function(){if(A.current)A.current=!1;else{var r=e.current.unstable_caches.rows.rowsBeforePartialUpdates===t.rows,i=e.current.unstable_caches.rows.loadingPropBeforePartialUpdates===t.loading,o=e.current.unstable_caches.rows.rowCountPropBeforePartialUpdates===t.rowCount;if(r)return i||(e.current.setState((function(e){return E({},e,{rows:E({},e.rows,{loading:t.loading})})})),e.current.unstable_caches.rows.loadingPropBeforePartialUpdates=t.loading,e.current.forceUpdate()),void(o||(e.current.setState((function(e){return E({},e,{rows:E({},e.rows,{totalRowCount:Math.max(t.rowCount||0,e.rows.totalRowCount),totalTopLevelRowCount:Math.max(t.rowCount||0,e.rows.totalTopLevelRowCount)})})})),e.current.unstable_caches.rows.rowCountPropBeforePartialUpdates=t.rowCount,e.current.forceUpdate()));n.debug("Updating all rows, new length ".concat(t.rows.length)),u(Uh({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),!1)}}),[t.rows,t.rowCount,t.getRowId,t.loading,n,u,e])},bm=function(e){for(var t=e.ids,n=e.idRowsLookup,r=e.idToIdLookup,i=e.previousTree,o={},a=0;a<t.length;a+=1){var s=t[a];i&&i[s]&&0===i[s].depth&&null==i[s].parent&&!i[s].isPinned?o[s]=i[s]:o[s]={id:s,depth:0,parent:null,groupingKey:"",groupingField:null}}return{groupingName:Qo,tree:o,treeDepth:1,idRowsLookup:n,idToIdLookup:r,ids:t}};function xm(e,t){return e.closest(".".concat(t))}function wm(e){return e.replace(/["\\]/g,"\\$&")}function _m(e,t){return e.querySelector(".".concat(Fr.row,'[data-id="').concat(wm(String(t)),'"]'))}Gr(["MUI: You are calling getValue. This method is deprecated and will be removed in the next major version.","Instead, you can access the data from `params.row`."]);function Sm(e){var t=r.useCallback((function(t){return{field:t,colDef:e.current.getColumn(t)}}),[e]),n=r.useCallback((function(){var t;return(t=e.current).getCellValue.apply(t,arguments)}),[e]),i=r.useCallback((function(t){var r=e.current.getRow(t);if(!r)throw new Error("No row with id #".concat(t," found"));return{id:t,columns:e.current.getAllColumns(),row:r,getValue:n}}),[e,n]),o=r.useCallback((function(t,r){var i=e.current.getRow(t),o=e.current.getRowNode(t);if(!i||!o)throw new Error("No row with id #".concat(t," found"));var a=Hp(e),s=Gp(e);return{id:t,field:r,row:i,rowNode:o,value:i[r],colDef:e.current.getColumn(r),cellMode:e.current.getCellMode(t,r),getValue:n,api:e.current,hasFocus:null!==a&&a.field===r&&a.id===t,tabIndex:s&&s.field===r&&s.id===t?0:-1}}),[e,n]),a=r.useCallback((function(t,r){var i=e.current.getColumn(r),o=e.current.getCellValue(t,r),a=e.current.getRow(t),s=e.current.getRowNode(t);if(!a||!s)throw new Error("No row with id #".concat(t," found"));var l=Hp(e),u=Gp(e),c={id:t,field:r,row:a,rowNode:s,colDef:i,cellMode:e.current.getCellMode(t,r),getValue:n,hasFocus:null!==l&&l.field===r&&l.id===t,tabIndex:u&&u.field===r&&u.id===t?0:-1,value:o,formattedValue:o};return i&&i.valueFormatter&&(c.formattedValue=i.valueFormatter({id:t,field:c.field,value:c.value,api:e.current})),c.isEditable=i&&e.current.isCellEditable(c),c}),[e,n]),s=r.useCallback((function(t,n){var r=e.current.getColumn(n);if(!r||!r.valueGetter){var i=e.current.getRow(t);if(!i)throw new Error("No row with id #".concat(t," found"));return i[n]}return r.valueGetter(o(t,n))}),[e,o]),l=r.useCallback((function(t){return e.current.rootElementRef.current?function(e,t){return e.querySelector('[role="columnheader"][data-field="'.concat(wm(t),'"]'))}(e.current.rootElementRef.current,t):null}),[e]),u=r.useCallback((function(t){return e.current.rootElementRef.current?_m(e.current.rootElementRef.current,t):null}),[e]),c=r.useCallback((function(t,n){return e.current.rootElementRef.current?function(e,t){var n=t.id,r=t.field,i=_m(e,n);return i?i.querySelector(".".concat(Fr.cell,'[data-field="').concat(wm(r),'"]')):null}(e.current.rootElementRef.current,{id:t,field:n}):null}),[e]);Bo(e,{getCellValue:s,getCellParams:a,getCellElement:c,getRowParams:i,getRowElement:u,getColumnHeaderParams:t,getColumnHeaderElement:l})}var Cm=function(e,t){return null==e||Array.isArray(e)?e:t&&t[0]===e?t:[e]},Em=function(e,t){var n;return E({},e,{selection:null!=(n=Cm(t.selectionModel))?n:[]})},km=function(e,t){var n=function(e){var t=e.classes;return r.useMemo((function(){return N({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},Dr,t)}),[t])}({classes:t.classes}),i=r.useCallback((function(r){var i=E({},oh,{cellClassName:n.cellCheckbox,headerClassName:n.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),o=t.checkboxSelection,a=null!=r.lookup[ih];return o&&!a?(r.lookup[ih]=i,r.all=[ih].concat(z(r.all))):!o&&a?(delete r.lookup[ih],r.all=r.all.filter((function(e){return e!==ih}))):o&&a&&(r.lookup[ih]=E({},i,r.lookup[ih])),r}),[e,n,t.checkboxSelection]);la(e,"hydrateColumns",i)},Pm=function(e,t){var n,r,i,o,a=null!=(n=null!=(r=t.sortModel)?r:null==(i=t.initialState)||null==(o=i.sorting)?void 0:o.sortModel)?n:[];return E({},e,{sorting:{sortModel:Dl(a,t.disableMultipleColumnsSorting),sortedRows:[]}})};function Mm(e){var t=e.clientHeight,n=e.scrollTop,r=e.offsetHeight,i=e.offsetTop,o=i+r;return r>t?i:o-t>n?o-t:i<n?i:void 0}var Am=pa;var Tm=function(e){return E({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}})},Rm=function(e){var t,n,i=ta(void 0,e);return function(e,t){var n,i=r.useCallback((function(e){var n;if(null==(n=t.experimentalFeatures)||!n.columnGrouping)return e;var r=Ip(t.columnGroupingModel);return e.all.forEach((function(t){var n,i,o=null!=(n=r[t])?n:[],a=e.lookup[t];(function(e){return void 0!==e.groupPath})(a)&&To(o,null==a?void 0:a.groupPath)||(e.lookup[t]=E({},e.lookup[t],{groupPath:null!=(i=r[t])?i:[]}))})),e}),[t.columnGroupingModel,null==(n=t.experimentalFeatures)?void 0:n.columnGrouping]);la(e,"hydrateColumns",i)}(i,e),km(i,e),function(e){Ch(e,Qo,"rowTreeCreation",bm)}(i),na(Em,i,e),na(Pp,i,e),na(Lp,i,e),na(vm,i,e),na(null!=(t=e.experimentalFeatures)&&t.newEditingApi?mm:om,i,e),na(Nh,i,e),na(Pm,i,e),na(em,i,e),na(Lh,i,e),na(Fp,i,e),na(Zh,i,e),na(Tm,i,e),na(aa,i,e),zh(i,e),function(e,t){var n=Ii(e,"useGridSelection"),i=r.useMemo((function(){return Cm(t.selectionModel,$p(e.current.state))}),[e,t.selectionModel]),o=r.useRef(null);e.current.unstable_registerControlState({stateId:"selection",propModel:i,propOnChange:t.onSelectionModelChange,stateSelector:$p,changeEvent:"selectionChange"});var a=t.checkboxSelection,s=t.disableMultipleSelection,l=t.disableSelectionOnClick,u=t.pagination,d=t.paginationMode,f=t.isRowSelectable,p=!s||a,h=Fh(e,t),m=r.useCallback((function(t){var n,r=t,i=null!=(n=o.current)?n:t,a=e.current.isRowSelected(t);if(a){var s=ho(e),l=s.findIndex((function(e){return e===i})),u=s.findIndex((function(e){return e===r}));if(l===u)return;r=l>u?s[u+1]:s[u-1]}o.current=t,e.current.selectRowRange({startId:i,endId:r},!a)}),[e]),g=r.useCallback((function(t){$p(e.current.state)!==t&&(n.debug("Setting selection model"),e.current.setState((function(e){return E({},e,{selection:t})})),e.current.forceUpdate())}),[e,n]),v=r.useCallback((function(t){return $p(e.current.state).includes(t)}),[e]),y=r.useCallback((function(t){if(f&&!f(e.current.getRowParams(t)))return!1;var n=e.current.getRowNode(t);return!("footer"===(null==n?void 0:n.position)||null!=n&&n.isPinned)}),[e,f]),b=r.useCallback((function(){return Xp(e)}),[e]),x=r.useCallback((function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.current.isRowSelectable(t))if(o.current=t,i)n.debug("Setting selection for row ".concat(t)),e.current.setSelectionModel(r?[t]:[]);else{n.debug("Toggling selection for row ".concat(t));var a=$p(e.current.state).filter((function(e){return e!==t}));r&&a.push(t),(a.length<2||p)&&e.current.setSelectionModel(a)}}),[e,n,p]),w=r.useCallback((function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.debug("Setting selection for several rows");var o,a=t.filter((function(t){return e.current.isRowSelectable(t)}));if(i)o=r?a:[];else{var s=E({},Kp(e));a.forEach((function(e){r?s[e]=e:delete s[e]})),o=Object.values(s)}(o.length<2||p)&&e.current.setSelectionModel(o)}),[e,n,p]),_=r.useCallback((function(t){var r=t.startId,i=t.endId,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;if(e.current.getRow(r)&&e.current.getRow(i)){n.debug("Expanding selection from row ".concat(r," to row ").concat(i));var s=ho(e),l=s.indexOf(r),u=s.indexOf(i),d=c(l>u?[u,l]:[l,u],2),f=d[0],p=d[1],h=s.slice(f,p+1);e.current.selectRows(h,o,a)}}),[e,n]);Bo(e,{selectRow:x,selectRows:w,selectRowRange:_,setSelectionModel:g,getSelectedRows:b,isRowSelected:v,isRowSelectable:y});var S=r.useCallback((function(){if(!t.keepNonExistentRowsSelected){var n=$p(e.current.state),r=wi(e),i=E({},Kp(e)),o=!1;n.forEach((function(e){r[e]||(delete i[e],o=!0)})),o&&e.current.setSelectionModel(Object.values(i))}}),[e,t.keepNonExistentRowsSelected]),C=r.useCallback((function(t,n){var r=n.metaKey||n.ctrlKey,i=!a&&!r&&!mf(n),o=!p||i,s=e.current.isRowSelected(t);o?e.current.selectRow(t,!!i||!s,!0):e.current.selectRow(t,!s,!1)}),[e,p,a]),k=r.useCallback((function(t,n){var r;if(!l){var i=null==(r=n.target.closest(".".concat(Fr.cell)))?void 0:r.getAttribute("data-field");if(i!==oh.field&&i!==Bh){if(i&&e.current.getColumn(i).type===hp)return;e.current.getRowNode(t.id).isPinned||(n.shiftKey&&(p||a)?m(t.id):C(t.id,n))}}}),[l,p,a,e,m,C]),P=r.useCallback((function(e,t){var n;p&&t.shiftKey&&(null==(n=window.getSelection())||n.removeAllRanges())}),[p]),M=r.useCallback((function(t,n){n.nativeEvent.shiftKey?m(t.id):e.current.selectRow(t.id,t.value)}),[e,m]),A=r.useCallback((function(n){var r=t.checkboxSelectionVisibleOnly&&t.pagination?th(e):ho(e);e.current.selectRows(r,n.value)}),[e,t.checkboxSelectionVisibleOnly,t.pagination]),T=r.useCallback((function(t,n){if(e.current.getCellMode(t.id,t.field)!==lf.Edit&&n.currentTarget.contains(n.target)){if(hf(n.key)&&n.shiftKey){var r=Hp(e);if(r&&r.id!==t.id){n.preventDefault();var i=e.current.isRowSelected(r.id);if(!p)return void e.current.selectRow(r.id,!i,!0);var o,a,s=e.current.getRowIndexRelativeToVisibleRows(r.id),l=e.current.getRowIndexRelativeToVisibleRows(t.id);s>l?i?(o=l,a=s-1):(o=l,a=s):i?(o=s+1,a=l):(o=s,a=l);var u=h.rows.slice(o,a+1).map((function(e){return e.id}));return void e.current.selectRows(u,!i)}}if(" "===n.key&&n.shiftKey)return n.preventDefault(),void C(t.id,n);"a"===n.key.toLowerCase()&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),w(e.current.getAllRowIds(),!0))}}),[e,C,w,h.rows,p]);Wo(e,"sortedRowsSet",S),Wo(e,"rowClick",k),Wo(e,"rowSelectionCheckboxChange",M),Wo(e,"headerSelectionCheckboxChange",A),Wo(e,"cellMouseDown",P),Wo(e,"cellKeyDown",T),r.useEffect((function(){void 0!==i&&e.current.setSelectionModel(i)}),[e,i]);var R=null!=i;r.useEffect((function(){if(!R){var t=$p(e.current.state);if(y){var n=t.filter((function(e){return y(e)}));n.length<t.length&&e.current.setSelectionModel(n)}}}),[e,y,R]),r.useEffect((function(){var t=$p(e.current.state);if(!p&&t.length>1){var n=Dh(e,{pagination:u,paginationMode:d}).rows.reduce((function(e,t){return e[t.id]=!0,e}),{}),r=t.find((function(e){var t=!0;return y&&(t=y(e)),t&&n[e]}));e.current.setSelectionModel(void 0!==r?[r]:[])}}),[e,p,a,s,y,u,d])}(i,e),function(e,t){var n,i,o=Ii(e,"useGridColumns"),a=r.useMemo((function(){return bp(t.columnTypes)}),[t.columnTypes]),s=r.useRef(t.columns),l=r.useRef(a);e.current.unstable_registerControlState({stateId:"visibleColumns",propModel:t.columnVisibilityModel,propOnChange:t.onColumnVisibilityModelChange,stateSelector:Qr,changeEvent:"columnVisibilityModelChange"});var u=r.useCallback((function(t){o.debug("Updating columns state."),e.current.setState(Sp(t)),e.current.forceUpdate(),e.current.publishEvent("columnsChange",t.all)}),[o,e]),c=r.useCallback((function(t){return Yr(e)[t]}),[e]),d=r.useCallback((function(){return Zr(e)}),[e]),f=r.useCallback((function(){return Jr(e)}),[e]),h=r.useCallback((function(){return ii(e)}),[e]),m=r.useCallback((function(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?Jr(e):Zr(e)).findIndex((function(e){return e.field===t}))}),[e]),g=r.useCallback((function(t){var n=m(t);return ei(e)[n]}),[e,m]),v=r.useCallback((function(t){Qr(e)!==t&&(e.current.setState((function(n){return E({},n,{columns:_p({apiRef:e,columnTypes:a,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!1,currentColumnVisibilityModel:t,keepOnlyColumnsToUpsert:!1})})})),e.current.forceUpdate())}),[e,a]),y=r.useCallback((function(t){var n=_p({apiRef:e,columnTypes:a,columnsToUpsert:t,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!0,keepOnlyColumnsToUpsert:!1});u(n)}),[e,u,a]),b=r.useCallback((function(t){return e.current.updateColumns([t])}),[e]),x=r.useCallback((function(t,n){if(e.current.unstable_caches.columns.isUsingColumnVisibilityModel){var r,i=Qr(e);if(n!==(null==(r=i[t])||r)){var o=E({},i,p({},t,n));e.current.setColumnVisibilityModel(o)}}else{var a=E({},e.current.getColumn(t),{hide:!n});e.current.updateColumns([a]);var s={field:t,colDef:a,isVisible:n};e.current.publishEvent("columnVisibilityChange",s)}}),[e]),w=r.useCallback((function(t,n){var r=Kr(e),i=r.findIndex((function(e){return e===t}));if(i!==n){o.debug("Moving column ".concat(t," to index ").concat(n));var a=z(r),s=a.splice(i,1)[0];a.splice(n,0,s),u(E({},Xr(e.current.state),{all:a}));var l={field:t,element:e.current.getColumnHeaderElement(t),colDef:e.current.getColumn(t),targetIndex:n,oldIndex:i};e.current.publishEvent("columnOrderChange",l)}}),[e,o,u]),S=r.useCallback((function(t,n){o.debug("Updating column ".concat(t," width to ").concat(n));var r=E({},e.current.getColumn(t),{width:n});e.current.updateColumns([r]),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(t),colDef:r,width:n})}),[e,o]);Bo(e,{getColumn:c,getAllColumns:d,getColumnIndex:m,getColumnPosition:g,getVisibleColumns:f,getColumnsMeta:h,updateColumn:b,updateColumns:y,setColumnVisibilityModel:v,setColumnVisibility:x,setColumnIndex:w,setColumnWidth:S});var C=r.useCallback((function(n,r){var i={};if(e.current.unstable_caches.columns.isUsingColumnVisibilityModel){var o,a,s,l=Qr(e);(!r.exportOnlyDirtyModels||null!=t.columnVisibilityModel||Object.keys(null!=(o=null==(a=t.initialState)||null==(s=a.columns)?void 0:s.columnVisibilityModel)?o:{}).length>0||Object.keys(l).length>0)&&(i.columnVisibilityModel=l)}i.orderedFields=Kr(e);var u=Zr(e),c={};return u.forEach((function(e){if(e.hasBeenResized){var t={};yp.forEach((function(n){var r=e[n];r===1/0&&(r=-1),t[n]=r})),c[e.field]=t}})),Object.keys(c).length>0&&(i.dimensions=c),E({},n,{columns:i})}),[e,t.columnVisibilityModel,null==(n=t.initialState)?void 0:n.columns]),k=r.useCallback((function(t,n){var r,i=e.current.unstable_caches.columns.isUsingColumnVisibilityModel?null==(r=n.stateToRestore.columns)?void 0:r.columnVisibilityModel:void 0,o=n.stateToRestore.columns;if(null==i&&null==o)return t;var s=_p({apiRef:e,columnTypes:a,columnsToUpsert:[],initialState:o,shouldRegenColumnVisibilityModelFromColumns:!e.current.unstable_caches.columns.isUsingColumnVisibilityModel,currentColumnVisibilityModel:i,keepOnlyColumnsToUpsert:!1});return e.current.setState(Sp(s)),null!=o&&e.current.publishEvent("columnsChange",s.all),t}),[e,a]),P=r.useCallback((function(e,n){if(n===xp.columns){var r,i=t.components.ColumnsPanel;return(0,_.jsx)(i,E({},null==(r=t.componentsProps)?void 0:r.columnsPanel))}return e}),[t.components.ColumnsPanel,null==(i=t.componentsProps)?void 0:i.columnsPanel]);la(e,"exportState",C),la(e,"restoreState",k),la(e,"preferencePanel",P);var M=r.useRef(null);Wo(e,"viewportInnerSizeChange",(function(t){M.current!==t.width&&(M.current=t.width,u(wp(Xr(e.current.state),t.width)))})),qo(e,"columnVisibilityChange",t.onColumnVisibilityChange);var A=r.useCallback((function(){o.info("Columns pipe processing have changed, regenerating the columns");var t=_p({apiRef:e,columnTypes:a,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!e.current.unstable_caches.columns.isUsingColumnVisibilityModel,keepOnlyColumnsToUpsert:!1});u(t)}),[e,o,u,a]);ua(e,"hydrateColumns",A);var T=r.useRef(!0);r.useEffect((function(){if(T.current)T.current=!1;else if(o.info("GridColumns have changed, new length ".concat(t.columns.length)),s.current!==t.columns||l.current!==a){var n=_p({apiRef:e,columnTypes:a,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!e.current.unstable_caches.columns.isUsingColumnVisibilityModel,columnsToUpsert:t.columns,keepOnlyColumnsToUpsert:!0});s.current=t.columns,l.current=a,u(n)}}),[o,e,u,t.columns,a]),r.useEffect((function(){void 0!==t.columnVisibilityModel&&e.current.setColumnVisibilityModel(t.columnVisibilityModel)}),[e,o,t.columnVisibilityModel])}(i,e),ym(i,e),Sm(i),function(e){var t=r.useRef({}),n=r.useCallback((function(e,n,r){var i=t.current;i[e]||(i[e]={}),i[e][n]=r}),[]),i=r.useCallback((function(e,n){var r;return null==(r=t.current[e])?void 0:r[n]}),[]),o=r.useCallback((function(t){var r=t.columnIndex,i=t.rowId,o=t.minFirstColumnIndex,a=t.maxLastColumnIndex,s=t.columns,l=s.length,u=s[r],c="function"===typeof u.colSpan?u.colSpan(e.current.getCellParams(i,u.field)):u.colSpan;if(!c||1===c)return n(i,r,{spannedByColSpan:!1,cellProps:{colSpan:1,width:u.computedWidth}}),{colSpan:1};for(var d=u.computedWidth,f=1;f<c;f+=1){var p=r+f;p>=o&&p<a&&(d+=s[p].computedWidth,n(i,r+f,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(r+c,l-1),leftVisibleCellIndex:r})),n(i,r,{spannedByColSpan:!1,cellProps:{colSpan:c,width:d}})}return{colSpan:c}}),[e,n]),a=r.useCallback((function(e){for(var t=e.rowId,n=e.minFirstColumn,r=e.maxLastColumn,i=e.columns,a=n;a<r;a+=1){var s=o({columnIndex:a,rowId:t,minFirstColumnIndex:n,maxLastColumnIndex:r,columns:i});s.colSpan>1&&(a+=s.colSpan-1)}}),[o]);Bo(e,{unstable_getCellColSpanInfo:i,unstable_calculateColSpan:a});var s=r.useCallback((function(){t.current={}}),[]);Wo(e,"columnOrderChange",s)}(i),function(e,t){var n,i=r.useCallback((function(t){var n,r;return null!=(n=null==(r=Yr(e)[t])?void 0:r.groupPath)?n:[]}),[e]),o=r.useCallback((function(){return Ap(e)}),[e]);Bo(e,{unstable_getColumnGroupPath:i,unstable_getAllGroupDetails:o});var a=r.useRef(!0);r.useEffect((function(){var n,r;if(a.current)a.current=!1;else if(null!=(n=t.experimentalFeatures)&&n.columnGrouping){var i=Op(null!=(r=t.columnGroupingModel)?r:[]);e.current.setState((function(e){return E({},e,{columnGrouping:E({},e.columnGrouping,{lookup:i})})}))}}),[e,t.columnGroupingModel,null==(n=t.experimentalFeatures)?void 0:n.columnGrouping])}(i,e),(null!=(n=e.experimentalFeatures)&&n.newEditingApi?gm:am)(i,e),function(e,t){var n=Ii(e,"useGridFocus"),i=r.useRef(null),o=r.useCallback((function(t,n){t&&e.current.getRow(t.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(t.id,t.field),n)}),[e]),a=r.useCallback((function(t,r){var i=Hp(e);(null==i?void 0:i.id)===t&&(null==i?void 0:i.field)===r||(e.current.setState((function(e){return n.debug("Focusing on cell with id=".concat(t," and field=").concat(r)),E({},e,{tabIndex:{cell:{id:t,field:r},columnHeader:null},focus:{cell:{id:t,field:r},columnHeader:null}})})),e.current.forceUpdate(),e.current.getRow(t)&&(i&&o(i,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(t,r))))}),[e,n,o]),s=r.useCallback((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Hp(e);o(i,r),e.current.setState((function(e){return n.debug("Focusing on column header with colIndex=".concat(t)),E({},e,{tabIndex:{columnHeader:{field:t},cell:null},focus:{columnHeader:{field:t},cell:null}})})),e.current.forceUpdate()}),[e,n,o]),l=r.useCallback((function(n,r,i){var o=e.current.getColumnIndex(r),a=e.current.getRowIndexRelativeToVisibleRows(n),s=Jr(e);"right"===i?o+=1:"left"===i?o-=1:a+=1;var l=Dh(e,{pagination:t.pagination,paginationMode:t.paginationMode});o>=s.length?(a+=1)<l.rows.length&&(o=0):o<0&&(a-=1)>=0&&(o=s.length-1),a=Ao(a,0,l.rows.length-1);var u=l.rows[a],c=e.current.unstable_getCellColSpanInfo(u.id,o);c&&c.spannedByColSpan&&("left"===i||"below"===i?o=c.leftVisibleCellIndex:"right"===i&&(o=c.rightVisibleCellIndex));var d=s[o=Ao(o,0,s.length-1)];e.current.setCellFocus(u.id,d.field)}),[e,t.pagination,t.paginationMode]),u=r.useCallback((function(t){var n=t.id,r=t.field;e.current.setCellFocus(n,r)}),[e]),c=r.useCallback((function(t,n){"Enter"===n.key||"Tab"===n.key||hf(n.key)||e.current.setCellFocus(t.id,t.field)}),[e]),d=r.useCallback((function(t,n){var r=t.field;n.target===n.currentTarget&&e.current.setColumnHeaderFocus(r,n)}),[e]),f=r.useCallback((function(){n.debug("Clearing focus"),e.current.setState((function(e){return E({},e,{focus:{cell:null,columnHeader:null}})}))}),[n,e]),p=r.useCallback((function(e){i.current=e}),[]),h=r.useCallback((function(t){var n=i.current;i.current=null;var r=Hp(e);if(r){if((null==n?void 0:n.id)!==r.id||(null==n?void 0:n.field)!==r.field){var a=e.current.getCellElement(r.id,r.field);null!=a&&a.contains(t.target)||(n?e.current.setCellFocus(n.id,n.field):(e.current.setState((function(e){return E({},e,{focus:{cell:null,columnHeader:null}})})),e.current.forceUpdate(),o(r,t)))}}else n&&e.current.setCellFocus(n.id,n.field)}),[e,o]),m=r.useCallback((function(t){if("view"!==t.cellMode){var n=Hp(e);(null==n?void 0:n.id)===t.id&&(null==n?void 0:n.field)===t.field||e.current.setCellFocus(t.id,t.field)}}),[e]),g=r.useCallback((function(){var t=Hp(e);t&&!e.current.getRow(t.id)&&e.current.setState((function(e){return E({},e,{focus:{cell:null,columnHeader:null}})}))}),[e]);Bo(e,{setCellFocus:a,setColumnHeaderFocus:s,unstable_moveFocusToRelativeCell:l}),r.useEffect((function(){var t=Mf(e.current.rootElementRef.current);return t.addEventListener("click",h),function(){t.removeEventListener("click",h)}}),[e,h]),Wo(e,"columnHeaderBlur",f),Wo(e,"cellDoubleClick",u),Wo(e,"cellMouseDown",p),Wo(e,"cellKeyDown",c),Wo(e,"cellModeChange",m),Wo(e,"columnHeaderFocus",d),Wo(e,"rowsSet",g)}(i,e),function(e,t){var n,i=Ii(e,"useGridPreferencesPanel"),o=r.useRef(),a=r.useRef(),s=r.useCallback((function(){i.debug("Hiding Preferences Panel");var t=Jh(e.current.state);t.openedPanelValue&&e.current.publishEvent("preferencePanelClose",{openedPanelValue:t.openedPanelValue}),e.current.setState((function(e){return E({},e,{preferencePanel:{open:!1}})})),e.current.forceUpdate()}),[e,i]),l=r.useCallback((function(){a.current=setTimeout((function(){return clearTimeout(o.current)}),0)}),[]),u=r.useCallback((function(){o.current=setTimeout(s,100)}),[s]),c=r.useCallback((function(t){i.debug("Opening Preferences Panel"),l(),e.current.setState((function(e){return E({},e,{preferencePanel:E({},e.preferencePanel,{open:!0,openedPanelValue:t})})})),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:t}),e.current.forceUpdate()}),[i,l,e]);Bo(e,{showPreferences:c,hidePreferences:u});var d=r.useCallback((function(n,r){var i,o=Jh(e.current.state);return!r.exportOnlyDirtyModels||null!=(null==(i=t.initialState)?void 0:i.preferencePanel)||o.open?E({},n,{preferencePanel:o}):n}),[e,null==(n=t.initialState)?void 0:n.preferencePanel]),f=r.useCallback((function(t,n){var r=n.stateToRestore.preferencePanel;return null!=r&&e.current.setState((function(e){return E({},e,{preferencePanel:r})})),t}),[e]);la(e,"exportState",d),la(e,"restoreState",f),r.useEffect((function(){return function(){clearTimeout(o.current),clearTimeout(a.current)}}),[])}(i,e),function(e,t){var n,i,o,a=Ii(e,"useGridFilter");e.current.unstable_registerControlState({stateId:"filter",propModel:t.filterModel,propOnChange:t.onFilterModelChange,stateSelector:lo,changeEvent:"filterModelChange"});var s=r.useCallback((function(){e.current.setState((function(n){var r=lo(n,e.current.instanceId),i=t.filterMode===wh?Ih(r,e):null,o=e.current.unstable_applyStrategyProcessor("filtering",{isRowMatchingFilters:i,filterModel:null!=r?r:Sh()});return E({},n,{filter:E({},n.filter,o)})})),e.current.publishEvent("filteredRowsSet")}),[t.filterMode,e]),l=r.useCallback((function(){s(),e.current.forceUpdate()}),[e,s]),u=r.useCallback((function(t){var n=lo(e),r=z(n.items),i=r.findIndex((function(e){return e.id===t.id}));-1===i?r.push(t):r[i]=t,e.current.setFilterModel(E({},n,{items:r}),"upsertFilterItem")}),[e]),c=r.useCallback((function(t){var n=lo(e),r=z(n.items);t.forEach((function(e){var n=t.findIndex((function(t){return t.id===e.id}));-1===n?r.push(e):r[n]=e})),e.current.setFilterModel(E({},n,{items:t}),"upsertFilterItems")}),[e]),d=r.useCallback((function(t){var n=lo(e),r=n.items.filter((function(e){return e.id!==t.id}));r.length!==n.items.length&&e.current.setFilterModel(E({},n,{items:r}),"deleteFilterItem")}),[e]),f=r.useCallback((function(n){if(a.debug("Displaying filter panel"),n){var r,i=lo(e),o=i.items.filter((function(t){var n;if(void 0!==t.value)return!0;var r=null==(n=e.current.getColumn(t.columnField).filterOperators)?void 0:n.find((function(e){return e.value===t.operatorValue}));return!("undefined"===typeof(null==r?void 0:r.requiresFilterValue)||(null==r?void 0:r.requiresFilterValue))}));r=o.find((function(e){return e.columnField===n}))?o:t.disableMultipleColumnsFiltering?[Eh({columnField:n},e)]:[].concat(z(o),[Eh({columnField:n},e)]),e.current.setFilterModel(E({},i,{items:r}))}e.current.showPreferences(xp.filters)}),[e,a,t.disableMultipleColumnsFiltering]),p=r.useCallback((function(){a.debug("Hiding filter panel"),e.current.hidePreferences()}),[e,a]),h=r.useCallback((function(t){var n=lo(e);n.linkOperator!==t&&e.current.setFilterModel(E({},n,{linkOperator:t}),"changeLogicOperator")}),[e]),m=r.useCallback((function(t){var n=lo(e);To(n.quickFilterValues,t)||e.current.setFilterModel(E({},n,{quickFilterValues:z(t)}))}),[e]),g=r.useCallback((function(n,r){lo(e)!==n&&(a.debug("Setting filter model"),e.current.unstable_updateControlState("filter",Th(n,t.disableMultipleColumnsFiltering,e),r),e.current.unstable_applyFilters())}),[e,a,t.disableMultipleColumnsFiltering]),v=r.useCallback((function(){var t=po(e);return new Map(t.map((function(e){return[e.id,e.model]})))}),[e]);Bo(e,{setFilterLinkOperator:h,unstable_applyFilters:l,deleteFilterItem:d,upsertFilterItem:u,upsertFilterItems:c,setFilterModel:g,showFilterPanel:f,hideFilterPanel:p,getVisibleRowModels:v,setQuickFilterValues:m});var y=r.useCallback((function(n,r){var i,o,a=lo(e);return r.exportOnlyDirtyModels&&null==t.filterModel&&null==(null==(i=t.initialState)||null==(o=i.filter)?void 0:o.filterModel)&&To(a,Sh())?n:E({},n,{filter:{filterModel:a}})}),[e,t.filterModel,null==(n=t.initialState)||null==(i=n.filter)?void 0:i.filterModel]),b=r.useCallback((function(n,r){var i,o=null==(i=r.stateToRestore.filter)?void 0:i.filterModel;return null==o?n:(e.current.unstable_updateControlState("filter",Th(o,t.disableMultipleColumnsFiltering,e),"restoreState"),E({},n,{callbacks:[].concat(z(n.callbacks),[e.current.unstable_applyFilters])}))}),[e,t.disableMultipleColumnsFiltering]),x=r.useCallback((function(e,n){if(n===xp.filters){var r,i=t.components.FilterPanel;return(0,_.jsx)(i,E({},null==(r=t.componentsProps)?void 0:r.filterPanel))}return e}),[t.components.FilterPanel,null==(o=t.componentsProps)?void 0:o.filterPanel]),w=r.useCallback((function(n){if(t.filterMode===wh&&n.isRowMatchingFilters){for(var r=ki(e),i={},o=0;o<r.length;o+=1){var a=r[o],s=void 0;if("string"===typeof a&&a.startsWith("auto-generated-group-footer"))s=!0;else{var l=n.isRowMatchingFilters(a),u=l.passingFilterItems,c=l.passingQuickFilterValues;s=Oh([u],[c],n.filterModel,e)}i[a]=s}return{filteredRowsLookup:i,visibleRowsLookup:i,filteredDescendantCountLookup:{}}}return{visibleRowsLookup:{},filteredRowsLookup:{},filteredDescendantCountLookup:{}}}),[e,t.filterMode]);la(e,"exportState",y),la(e,"restoreState",b),la(e,"preferencePanel",x),Ch(e,Qo,"filtering",w);var S=r.useCallback((function(){a.debug("onColUpdated - GridColumns changed, applying filters");var t=lo(e),n=ri(e),r=t.items.filter((function(e){return e.columnField&&n[e.columnField]}));r.length<t.items.length&&e.current.setFilterModel(E({},t,{items:r}))}),[e,a]),C=r.useCallback((function(t){"filtering"===t&&e.current.unstable_applyFilters()}),[e]);Wo(e,"rowsSet",s),Wo(e,"rowExpansionChange",e.current.unstable_applyFilters),Wo(e,"columnsChange",S),Wo(e,"activeStrategyProcessorChange",C),sa((function(){e.current.unstable_applyFilters()})),r.useEffect((function(){void 0!==t.filterModel&&e.current.setFilterModel(t.filterModel)}),[e,a,t.filterModel])}(i,e),function(e,t){var n,i,o=Ii(e,"useGridSorting");e.current.unstable_registerControlState({stateId:"sortModel",propModel:t.sortModel,propOnChange:t.onSortModelChange,stateSelector:oo,changeEvent:"sortModelChange"});var a=r.useCallback((function(t,n){var r=oo(e),i=r.findIndex((function(e){return e.field===t})),o=z(r);return i>-1?n?o.splice(i,1,n):o.splice(i,1):o=[].concat(z(r),[n]),o}),[e]),s=r.useCallback((function(n,r){var i,o=oo(e).find((function(e){return e.field===n.field}));if(o){var a,s=void 0===r?Nl(null!=(a=n.sortingOrder)?a:t.sortingOrder,o.sort):r;return null==s?void 0:E({},o,{sort:s})}return{field:n.field,sort:void 0===r?Nl(null!=(i=n.sortingOrder)?i:t.sortingOrder):r}}),[e,t.sortingOrder]),l=r.useCallback((function(){e.current.setState((function(n){if(t.sortingMode===_h)return o.debug("Skipping sorting rows as sortingMode = server"),E({},n,{sorting:E({},n.sorting,{sortedRows:ki(n,e.current.instanceId)})});var r=function(e,t){var n=e.map((function(e){return function(e,t){var n=t.current.getColumn(e.field);if(!n)return null;var r="desc"===e.sort?function(){return-1*n.sortComparator.apply(n,arguments)}:n.sortComparator;return{getSortCellParams:function(e){return{id:e,field:n.field,rowNode:t.current.getRowNode(e),value:t.current.getCellValue(e,n.field),api:t.current}},comparator:r}}(e,t)})).filter((function(e){return!!e}));return 0===n.length?null:function(e){return e.map((function(e){return{node:e,params:n.map((function(t){return t.getSortCellParams(e.id)}))}})).sort((function(e,t){return r=e,i=t,n.reduce((function(e,t,n){if(0!==e)return e;var o=r.params[n],a=i.params[n];return t.comparator(o.value,a.value,o,a)}),0);var r,i})).map((function(e){return e.node.id}))}}(oo(n,e.current.instanceId),e),i=e.current.unstable_applyStrategyProcessor("sorting",{sortRowList:r});return E({},n,{sorting:E({},n.sorting,{sortedRows:i})})})),e.current.publishEvent("sortedRowsSet"),e.current.forceUpdate()}),[e,o,t.sortingMode]),u=r.useCallback((function(n){oo(e)!==n&&(o.debug("Setting sort model"),e.current.setState(Fl(n,t.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())}),[e,o,t.disableMultipleColumnsSorting]),c=r.useCallback((function(n,r,i){if(n.sortable){var o,l=s(n,r);o=!i||t.disableMultipleColumnsSorting?l?[l]:[]:a(n.field,l),e.current.setSortModel(o)}}),[e,a,s,t.disableMultipleColumnsSorting]),d=r.useCallback((function(){return oo(e)}),[e]),f=r.useCallback((function(){return io(e).map((function(e){return e.model}))}),[e]),p=r.useCallback((function(){return ro(e)}),[e]),h=r.useCallback((function(t){return e.current.getSortedRowIds().indexOf(t)}),[e]),m=r.useCallback((function(t){return e.current.getSortedRowIds()[t]}),[e]);Bo(e,{getSortModel:d,getSortedRows:f,getSortedRowIds:p,getRowIndex:h,getRowIdFromRowIndex:m,setSortModel:u,sortColumn:c,applySorting:l});var g=r.useCallback((function(n,r){var i,o,a=oo(e);return!r.exportOnlyDirtyModels||null!=t.sortModel||null!=(null==(i=t.initialState)||null==(o=i.sorting)?void 0:o.sortModel)||a.length>0?E({},n,{sorting:{sortModel:a}}):n}),[e,t.sortModel,null==(n=t.initialState)||null==(i=n.sorting)?void 0:i.sortModel]),v=r.useCallback((function(n,r){var i,o=null==(i=r.stateToRestore.sorting)?void 0:i.sortModel;return null==o?n:(e.current.setState(Fl(o,t.disableMultipleColumnsSorting)),E({},n,{callbacks:[].concat(z(n.callbacks),[e.current.applySorting])}))}),[e,t.disableMultipleColumnsSorting]),y=r.useCallback((function(t){var n=Si(e);if(!t.sortRowList){var r=[],i=[];return ki(e).forEach((function(e){n[e].isPinned||("footer"===n[e].position?i.push(e):r.push(e))})),[].concat(r,i)}var o=[],a=[];return Object.values(n).forEach((function(e){e.isPinned||("footer"===e.position?a.push(e.id):o.push(e))})),[].concat(z(t.sortRowList(o)),a)}),[e]);la(e,"exportState",g),la(e,"restoreState",v),Ch(e,Qo,"sorting",y);var b=r.useCallback((function(e,t){var n=e.colDef,r=t.shiftKey||t.metaKey||t.ctrlKey;c(n,void 0,r)}),[c]),x=r.useCallback((function(e,t){var n=e.colDef;!tf(t.key)||t.ctrlKey||t.metaKey||c(n,void 0,t.shiftKey)}),[c]),w=r.useCallback((function(){var t=oo(e),n=Yr(e);if(t.length>0){var r=t.filter((function(e){return n[e.field]}));r.length<t.length&&e.current.setSortModel(r)}}),[e]),_=r.useCallback((function(t){"sorting"===t&&e.current.applySorting()}),[e]);Wo(e,"columnHeaderClick",b),Wo(e,"columnHeaderKeyDown",x),Wo(e,"rowsSet",e.current.applySorting),Wo(e,"columnsChange",w),Wo(e,"activeStrategyProcessorChange",_),sa((function(){e.current.applySorting()})),r.useEffect((function(){void 0!==t.sortModel&&e.current.setSortModel(t.sortModel)}),[e,t.sortModel])}(i,e),function(e,t){var n=oi(e,Jr),i=n.length>0?Math.max.apply(Math,z(n.map((function(e){var t,n;return null!=(t=null==(n=e.groupPath)?void 0:n.length)?t:0})))):0,o=Ii(e,"useDensity"),a=r.useCallback((function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.headerHeight,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.rowHeight,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;o.debug("Set grid density to ".concat(n)),e.current.setState((function(e){var t=ci(e),i=Dp(n,r,a,s);return To(t,i)?e:E({},e,{density:i})})),e.current.forceUpdate()}),[o,e,t.headerHeight,t.rowHeight,i]);r.useEffect((function(){e.current.setDensity(t.density,t.headerHeight,t.rowHeight,i)}),[e,t.density,t.rowHeight,t.headerHeight,i]),Bo(e,{setDensity:a})}(i,e),Qh(i,e),function(e,t){var n=t.getRowHeight,i=t.getRowSpacing,o=t.getEstimatedRowHeight,a=r.useRef({}),s=r.useRef(-1),l=r.useRef(!1),u=oi(e,fi),d=oi(e,so),f=oi(e,Yp),p=oi(e,no),h=Fh(e,t),m=oi(e,Mi),g=r.useCallback((function(){var t,r;l.current=!1;var d=mi(e.current.state,e.current.instanceId),f=function(t){a.current[t.id]||(a.current[t.id]={sizes:{baseCenter:u},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});var r=a.current[t.id],s=r.isResized,f=r.needsFirstMeasurement,p=r.sizes,m=u,g=p.baseCenter;if(s)m=g;else if(n){var v=n(E({},t,{densityFactor:d}));if("auto"===v){if(f){var y=o?o(E({},t,{densityFactor:d})):u;m=null!=y?y:u}else m=g;l.current=!0,a.current[t.id].autoHeight=!0}else m=null!=v?v:u,a.current[t.id].needsFirstMeasurement=!1,a.current[t.id].autoHeight=!1}else a.current[t.id].needsFirstMeasurement=!1;var b=Object.entries(p).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return/^base[A-Z]/.test(r)&&(e[r]=i),e}),{}),x=E({},b,{baseCenter:m});if(i){var w,_,S=e.current.getRowIndexRelativeToVisibleRows(t.id),C=i(E({},t,{isFirstVisible:0===S,isLastVisible:S===h.rows.length-1,indexRelativeToCurrentPage:S}));x.spacingTop=null!=(w=C.top)?w:0,x.spacingBottom=null!=(_=C.bottom)?_:0}var k=e.current.unstable_applyPipeProcessors("rowHeight",x,t);return a.current[t.id].sizes=k,k},p=[],g=h.rows.reduce((function(e,t){p.push(e);var n=0,r=0,i=f(t);return Object.entries(i).forEach((function(e){var t=c(e,2),i=t[0],o=t[1];/^base[A-Z]/.test(i)?n=o>n?o:n:r+=o})),e+n+r}),0);null==m||null==(t=m.top)||t.forEach((function(e){f(e)})),null==m||null==(r=m.bottom)||r.forEach((function(e){f(e)})),e.current.setState((function(e){return E({},e,{rowsMeta:{currentPageTotalHeight:g,positions:p}})})),l.current||(s.current=1/0),e.current.forceUpdate()}),[e,h.rows,u,n,i,o,m]),v=r.useCallback((function(e){var t=a.current[e];return t?t.sizes.baseCenter:u}),[u]),y=r.useCallback((function(e,t){a.current[e].sizes.baseCenter=t,a.current[e].isResized=!0,a.current[e].needsFirstMeasurement=!1,g()}),[g]),b=r.useMemo((function(){return Am(g)}),[g]),x=r.useCallback((function(e,t,n){if(a.current[e]&&a.current[e].autoHeight){var r=a.current[e].sizes["base".concat(R(n))]!==t;a.current[e].needsFirstMeasurement=!1,a.current[e].sizes["base".concat(R(n))]=t,r&&b()}}),[b]),w=r.useCallback((function(e){var t;return(null==(t=a.current[e])?void 0:t.autoHeight)||!1}),[]),_=r.useCallback((function(){return s.current}),[]),S=r.useCallback((function(e){l.current&&e>s.current&&(s.current=e)}),[]),C=r.useCallback((function(){a.current={},g()}),[g]);r.useEffect((function(){g()}),[u,d,f,p,g]),ua(e,"rowHeight",g),Bo(e,{unstable_getLastMeasuredRowIndex:_,unstable_setLastMeasuredRowIndex:S,unstable_rowHasAutoHeight:w,unstable_getRowHeight:v,unstable_getRowInternalSizes:function(e){var t;return null==(t=a.current[e])?void 0:t.sizes},unstable_setRowHeight:y,unstable_storeRowHeightMeasurement:x,resetRowHeights:C})}(i,e),function(e,t){var n=Ii(e,"useGridScroll"),i=e.current.columnHeadersElementRef,o=e.current.windowRef,a=oi(e,po),s=r.useCallback((function(r){var i=yi(e),s=Jr(e);if(null!=r.rowIndex&&0===i||0===s.length)return!1;n.debug("Scrolling to cell at row ".concat(r.rowIndex,", col: ").concat(r.colIndex," "));var l={};if(null!=r.colIndex){var u,c=ei(e);if("undefined"!==typeof r.rowIndex){var d,f=null==(d=a[r.rowIndex])?void 0:d.id,p=e.current.unstable_getCellColSpanInfo(f,r.colIndex);p&&!p.spannedByColSpan&&(u=p.cellProps.width)}"undefined"===typeof u&&(u=s[r.colIndex].computedWidth),l.left=Mm({clientHeight:o.current.clientWidth,scrollTop:o.current.scrollLeft,offsetHeight:u,offsetTop:c[r.colIndex]})}if(null!=r.rowIndex){var h,m,g=xh(e.current.state),v=Zp(e),y=Qp(e),b=t.pagination?r.rowIndex-v*y:r.rowIndex,x=g.positions[b+1]?g.positions[b+1]-g.positions[b]:g.currentPageTotalHeight-g.positions[b],w=(null==(h=o.current.querySelector(".".concat(Fr["pinnedRows--top"])))?void 0:h.clientHeight)||0,_=(null==(m=o.current.querySelector(".".concat(Fr["pinnedRows--bottom"])))?void 0:m.clientHeight)||0;l.top=Mm({clientHeight:o.current.clientHeight-w-_,scrollTop:o.current.scrollTop,offsetHeight:x,offsetTop:g.positions[b]})}return(void 0!==typeof(l=e.current.unstable_applyPipeProcessors("scrollToIndexes",l,r)).left||void 0!==typeof l.top)&&(e.current.scroll(l),!0)}),[n,e,o,t.pagination,a]),l=r.useCallback((function(e){o.current&&null!=e.left&&i.current&&(i.current.scrollLeft=e.left,o.current.scrollLeft=e.left,n.debug("Scrolling left: ".concat(e.left))),o.current&&null!=e.top&&(o.current.scrollTop=e.top,n.debug("Scrolling top: ".concat(e.top))),n.debug("Scrolling, updating container, and viewport")}),[o,i,n]),u=r.useCallback((function(){return null!=o&&o.current?{top:o.current.scrollTop,left:o.current.scrollLeft}:{top:0,left:0}}),[o]);Bo(e,{scroll:l,scrollToIndexes:s,getScrollPosition:u})}(i,e),function(e){var t=Ii(e,"useGridColumnMenu"),n=r.useCallback((function(n){e.current.setState((function(e){return e.columnMenu.open&&e.columnMenu.field===n?e:(t.debug("Opening Column Menu"),E({},e,{columnMenu:{open:!0,field:n}}))}))&&(e.current.hidePreferences(),e.current.forceUpdate())}),[e,t]),i=r.useCallback((function(){e.current.setState((function(e){return e.columnMenu.open||void 0!==e.columnMenu.field?(t.debug("Hiding Column Menu"),E({},e,{columnMenu:E({},e.columnMenu,{open:!1,field:void 0})})):e}))&&e.current.forceUpdate()}),[e,t]),o=r.useCallback((function(r){t.debug("Toggle Column Menu");var o=oa(e.current.state);o.open&&o.field===r?i():n(r)}),[e,t,n,i]);Bo(e,{showColumnMenu:n,hideColumnMenu:i,toggleColumnMenu:o});var a=r.useCallback((function(t,n){if(n.target.classList.contains(Fr.menuIconButton)&&n.relatedTarget){var r=n.relatedTarget.classList.contains(Fr.menuList),i="menuitem"===n.relatedTarget.getAttribute("role");(r||i)&&e.current.setColumnHeaderFocus(t.field)}}),[e]);Wo(e,"columnResizeStart",i),Wo(e,"columnHeaderFocus",a),Wo(e,"virtualScrollerWheel",e.current.hideColumnMenu),Wo(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)}(i),bh(i),function(e,t){var n=Ii(e,"useGridPrintExport"),i=r.useRef(null),o=r.useRef(null),a=r.useRef({});r.useEffect((function(){i.current=Mf(e.current.rootElementRef.current)}),[e]);var s=r.useCallback((function(t,n){return new Promise((function(r){if(t||n){var i=uh({apiRef:e,options:{fields:t,allColumns:n}}).map((function(e){return e.field})),o=Zr(e),a={};o.forEach((function(e){a[e.field]=i.includes(e.field)})),e.current.setColumnVisibilityModel(a),r()}else r()}))}),[e]),l=r.useCallback((function(e){var t=document.createElement("iframe");return t.id="grid-print-window",t.src=window.location.href,t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}),[]),u=r.useCallback((function(t,n){var r,o,a,s=E({copyStyles:!0,hideToolbar:!1,hideFooter:!1},n);t.onload=null;var l=t.contentDocument||(null==(r=t.contentWindow)?void 0:r.document);if(l){var u=gi(e),c=xh(e.current.state),d=e.current.rootElementRef.current,f=d.cloneNode(!0),p=f.querySelector(".".concat(Fr.virtualScroller));p.style.height="auto",p.style.width="auto",p.parentElement.style.width="auto",p.parentElement.style.height="auto",f.querySelector(".".concat(Fr.main)).style.overflow="visible",f.querySelector(".".concat(Fr.columnHeaders)).querySelector(".".concat(Fr.columnHeadersInner)).style.width="100%";var h,m,g=(null==(o=d.querySelector(".".concat(Fr.toolbarContainer)))?void 0:o.clientHeight)||0,v=(null==(a=d.querySelector(".".concat(Fr.footerContainer)))?void 0:a.clientHeight)||0;s.hideToolbar&&(null==(h=f.querySelector(".".concat(Fr.toolbarContainer)))||h.remove(),g=0),s.hideFooter&&(null==(m=f.querySelector(".".concat(Fr.footerContainer)))||m.remove(),v=0),f.style.height="".concat(c.currentPageTotalHeight+u+g+v,"px"),l.body.innerHTML="",l.body.appendChild(f);var y,b="function"===typeof s.pageStyle?s.pageStyle():s.pageStyle;if("string"===typeof b){var x=l.createElement("style");x.appendChild(l.createTextNode(b)),l.head.appendChild(x)}if(s.bodyClassName&&(y=l.body.classList).add.apply(y,z(s.bodyClassName.split(" "))),s.copyStyles)for(var w=i.current.querySelectorAll("style, link[rel='stylesheet']"),_=0;_<w.length;_+=1){var S=w[_];if("STYLE"===S.tagName){var C=l.createElement(S.tagName),k=S.sheet;if(k){for(var P="",M=0;M<k.cssRules.length;M+=1)"string"===typeof k.cssRules[M].cssText&&(P+="".concat(k.cssRules[M].cssText,"\r\n"));C.appendChild(l.createTextNode(P)),l.head.appendChild(C)}}else if(S.getAttribute("href")){for(var A=l.createElement(S.tagName),T=0;T<S.attributes.length;T+=1){var R=S.attributes[T];R&&A.setAttribute(R.nodeName,R.nodeValue||"")}l.head.appendChild(A)}}t.contentWindow.print()}}),[e,i]),c=r.useCallback((function(t){var n,r;i.current.body.removeChild(t),e.current.restoreState(o.current||{}),null!=(n=o.current)&&null!=(r=n.columns)&&r.columnVisibilityModel||e.current.setColumnVisibilityModel(a.current),e.current.unstable_enableVirtualization(),o.current=null,a.current={}}),[e]),d=r.useCallback(function(){var r=(0,da.Z)((0,ca.Z)().mark((function r(d){var f,p;return(0,ca.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.debug("Export data as Print"),e.current.rootElementRef.current){r.next=3;break}throw new Error("MUI: No grid root element available.");case 3:return o.current=e.current.exportState(),a.current=Qr(e),t.pagination&&(f=yo(e),e.current.setPageSize(f)),r.next=8,s(null==d?void 0:d.fields,null==d?void 0:d.allColumns);case 8:e.current.unstable_disableVirtualization(),p=l(null==d?void 0:d.fileName),i.current.body.appendChild(p),p.onload=function(){return u(p,d)},p.contentWindow.onafterprint=function(){return c(p)};case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[t,n,e,l,u,c,s]);Bo(e,{exportDataAsPrint:d});var f=r.useCallback((function(e,t){var n;return null!=(n=t.printOptions)&&n.disableToolbarButton?e:[].concat(z(e),[{component:(0,_.jsx)(vh,{options:t.printOptions}),componentName:"printExport"}])}),[]);la(e,"exportMenu",f)}(i,e),ia(i),function(e,t){var n=Ii(e,"useResizeContainer"),i=r.useRef(!1),o=r.useRef(null),a=r.useRef(null),s=oi(e,xh),l=oi(e,gi),u=r.useCallback((function(){var n,r=null==(n=e.current.rootElementRef)?void 0:n.current,i=ti(e),u=Wh(e);if(o.current){var c,d,f,p;if(null!=t.scrollbarSize)c=t.scrollbarSize;else if(i&&r){var h=Mf(r).createElement("div");h.style.width="99px",h.style.height="99px",h.style.position="absolute",h.style.overflow="scroll",h.className="scrollDiv",r.appendChild(h),c=h.offsetWidth-h.clientWidth,r.removeChild(h)}else c=0;if(t.autoHeight)p=!1,f=Math.round(i)>o.current.width,d={width:o.current.width,height:s.currentPageTotalHeight+(f?c:0)};else{d={width:o.current.width,height:o.current.height-l};var m=function(e){var t=e.content,n=e.container,r=e.scrollBarSize,i=t.width>n.width,o=t.height>n.height,a=!1,s=!1;return(i||o)&&(a=i,(s=t.height+(a?r:0)>n.height)&&(a=t.width+r>n.width)),{hasScrollX:a,hasScrollY:s}}({content:{width:Math.round(i),height:s.currentPageTotalHeight},container:{width:d.width,height:d.height-u.top-u.bottom},scrollBarSize:c});p=m.hasScrollY,f=m.hasScrollX}var g={viewportOuterSize:d,viewportInnerSize:{width:d.width-(p?c:0),height:d.height-(f?c:0)},hasScrollX:f,hasScrollY:p,scrollBarSize:c},v=a.current;a.current=g,g.viewportInnerSize.width===(null==v?void 0:v.viewportInnerSize.width)&&g.viewportInnerSize.height===(null==v?void 0:v.viewportInnerSize.height)||e.current.publishEvent("viewportInnerSizeChange",g.viewportInnerSize)}}),[e,t.scrollbarSize,t.autoHeight,l,s.currentPageTotalHeight]),c=r.useCallback((function(){u(),e.current.publishEvent("debouncedResize",o.current)}),[e,u]),d=r.useCallback((function(){return a.current}),[]),f=r.useCallback((function(){var n=e.current.getRootDimensions();if(!n)return 0;var r=Dh(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(t.getRowHeight){var i=e.current.unstable_getRenderContext(),o=i.lastRowIndex-i.firstRowIndex;return Math.min(o-1,r.rows.length)}var a=Math.floor(n.viewportInnerSize.height/fi(e));return Math.min(a,r.rows.length)}),[e,t.pagination,t.paginationMode,t.getRowHeight]);Bo(e,{resize:c,getRootDimensions:d,unstable_getViewportPageSize:f,unstable_updateGridDimensionsRef:u});var p=r.useMemo((function(){return Am(c,60)}),[c]),h=r.useRef(!0),m=r.useCallback((function(e){o.current=e;var r=/jsdom/.test(window.navigator.userAgent);if(0!==e.height||i.current||t.autoHeight||r||(n.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),i.current=!0),0!==e.width||i.current||r||(n.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),i.current=!0),h.current)return c(),void(h.current=!1);p()}),[t.autoHeight,p,n,c]);F((function(){return u()}),[u]),qo(e,"sortedRowsSet",u),qo(e,"pageChange",u),qo(e,"pageSizeChange",u),qo(e,"columnsChange",u),Wo(e,"resize",m),qo(e,"debouncedResize",t.onResize)}(i,e),function(e,t){qo(e,"columnHeaderClick",t.onColumnHeaderClick),qo(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),qo(e,"columnHeaderOver",t.onColumnHeaderOver),qo(e,"columnHeaderOut",t.onColumnHeaderOut),qo(e,"columnHeaderEnter",t.onColumnHeaderEnter),qo(e,"columnHeaderLeave",t.onColumnHeaderLeave),qo(e,"columnOrderChange",t.onColumnOrderChange),qo(e,"cellClick",t.onCellClick),qo(e,"cellDoubleClick",t.onCellDoubleClick),qo(e,"cellKeyDown",t.onCellKeyDown),qo(e,"cellFocusOut",t.onCellFocusOut),qo(e,"preferencePanelClose",t.onPreferencePanelClose),qo(e,"preferencePanelOpen",t.onPreferencePanelOpen),qo(e,"menuOpen",t.onMenuOpen),qo(e,"menuClose",t.onMenuClose),qo(e,"rowDoubleClick",t.onRowDoubleClick),qo(e,"rowClick",t.onRowClick),qo(e,"componentError",t.onError),qo(e,"stateChange",t.onStateChange)}(i,e),function(e){var t=r.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.current.unstable_applyPipeProcessors("exportState",{},t)}),[e]),n=r.useCallback((function(t){e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:t}).callbacks.forEach((function(e){e()})),e.current.forceUpdate()}),[e]);Bo(e,{exportState:t,restoreState:n})}(i),i},Im={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",errorOverlayDefaultLabel:"An error occurred.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:function(e){return"".concat(e,1!==e?" active filters":" active filter")},toolbarQuickFilterPlaceholder:"Search\u2026",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelDeleteIconLabel:"Delete",filterPanelLinkOperator:"Logic operator",filterPanelOperators:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:function(e){return"".concat(e,1!==e?" active filters":" active filter")},columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:function(e){return"".concat(e.toLocaleString(),1!==e?" rows selected":" row selected")},footerTotalRows:"Total Rows:",footerTotalVisibleRows:function(e,t){return"".concat(e.toLocaleString()," of ").concat(t.toLocaleString())},checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:function(e){return"Group by ".concat(e)},unGroupColumn:function(e){return"Stop grouping by ".concat(e)},detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"},Om=Ul;function Lm(e){return Or("PrivateSwitchBase",e)}Lr("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var Dm=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Fm=Ar(gl)((function(e){var t=e.ownerState;return E({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),Nm=Ar("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Bm=r.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,i=e.checkedIcon,o=e.className,a=e.defaultChecked,s=e.disabled,l=e.disableFocusRipple,u=void 0!==l&&l,d=e.edge,f=void 0!==d&&d,p=e.icon,h=e.id,m=e.inputProps,g=e.inputRef,v=e.name,y=e.onBlur,b=e.onChange,x=e.onFocus,w=e.readOnly,S=e.required,C=e.tabIndex,P=e.type,A=e.value,T=k(e,Dm),I=c(Om({controlled:r,default:Boolean(a),name:"SwitchBase",state:"checked"}),2),O=I[0],L=I[1],D=Sa(),F=s;D&&"undefined"===typeof F&&(F=D.disabled);var B="checkbox"===P||"radio"===P,z=E({},e,{checked:O,disabled:F,disableFocusRipple:u,edge:f}),j=function(e){var t=e.classes,n=e.checked,r=e.disabled,i=e.edge;return N({root:["root",n&&"checked",r&&"disabled",i&&"edge".concat(R(i))],input:["input"]},Lm,t)}(z);return(0,_.jsxs)(Fm,E({component:"span",className:M(j.root,o),centerRipple:!0,focusRipple:!u,disabled:F,tabIndex:null,role:void 0,onFocus:function(e){x&&x(e),D&&D.onFocus&&D.onFocus(e)},onBlur:function(e){y&&y(e),D&&D.onBlur&&D.onBlur(e)},ownerState:z,ref:t},T,{children:[(0,_.jsx)(Nm,E({autoFocus:n,checked:r,defaultChecked:a,className:j.input,disabled:F,id:B&&h,name:v,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;L(t),b&&b(e,t)}},readOnly:w,ref:g,required:S,ownerState:z,tabIndex:C,type:P},"checkbox"===P&&void 0===A?{}:{value:A},m)),O?i:p]}))})),zm=ts((0,_.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),jm=ts((0,_.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Hm=ts((0,_.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Um(e){return Or("MuiCheckbox",e)}var Vm=Lr("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),Gm=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Wm=Ar(Bm,{shouldForwardProp:function(e){return Pr(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat(R(n.color))]]}})((function(e){var t,n=e.theme,r=e.ownerState;return E({color:(n.vars||n).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat("default"===r.color?n.vars.palette.action.activeChannel:n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Xn("default"===r.color?n.palette.action.active:n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(p(t={},"&.".concat(Vm.checked,", &.").concat(Vm.indeterminate),{color:(n.vars||n).palette[r.color].main}),p(t,"&.".concat(Vm.disabled),{color:(n.vars||n).palette.action.disabled}),t))})),$m=(0,_.jsx)(jm,{}),qm=(0,_.jsx)(zm,{}),Xm=(0,_.jsx)(Hm,{}),Km=r.forwardRef((function(e,t){var n,i,o=Ia({props:e,name:"MuiCheckbox"}),a=o.checkedIcon,s=void 0===a?$m:a,l=o.color,u=void 0===l?"primary":l,c=o.icon,d=void 0===c?qm:c,f=o.indeterminate,p=void 0!==f&&f,h=o.indeterminateIcon,m=void 0===h?Xm:h,g=o.inputProps,v=o.size,y=void 0===v?"medium":v,b=o.className,x=k(o,Gm),w=p?m:d,S=p?m:s,C=E({},o,{color:u,indeterminate:p,size:y}),P=function(e){var t=e.classes,n=e.indeterminate,r=e.color;return E({},t,N({root:["root",n&&"indeterminate","color".concat(R(r))]},Um,t))}(C);return(0,_.jsx)(Wm,E({type:"checkbox",inputProps:E({"data-indeterminate":p},g),icon:r.cloneElement(w,{fontSize:null!=(n=w.props.fontSize)?n:y}),checkedIcon:r.cloneElement(S,{fontSize:null!=(i=S.props.fontSize)?i:y}),ownerState:C,ref:t,className:M(P.root,b)},x,{classes:P}))})),Ym=Km,Zm=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Qm=Ar(Wa,{shouldForwardProp:function(e){return Pr(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat(z(Va(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i="rgba(".concat(n.vars.palette.common.onBackgroundChannel," / ").concat(n.vars.opacity.inputUnderline,")")),E({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&(p(t={"&:after":{borderBottom:"2px solid ".concat((n.vars||n).palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},"&.".concat(rd.focused,":after"),{transform:"scaleX(1) translateX(0)"}),p(t,"&.".concat(rd.error),{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}}),p(t,"&:before",{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),p(t,"&:hover:not(.".concat(rd.disabled,", .").concat(rd.error,"):before"),{borderBottom:"2px solid ".concat((n.vars||n).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}}),p(t,"&.".concat(rd.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),Jm=Ar($a,{name:"MuiInput",slot:"Input",overridesResolver:Ga})({}),eg=r.forwardRef((function(e,t){var n,r,i,o,a=Ia({props:e,name:"MuiInput"}),s=a.disableUnderline,l=a.components,u=void 0===l?{}:l,c=a.componentsProps,d=a.fullWidth,f=void 0!==d&&d,p=a.inputComponent,h=void 0===p?"input":p,m=a.multiline,g=void 0!==m&&m,v=a.slotProps,y=a.slots,b=void 0===y?{}:y,x=a.type,w=void 0===x?"text":x,S=k(a,Zm),C=function(e){var t=e.classes;return E({},t,N({root:["root",!e.disableUnderline&&"underline"],input:["input"]},nd,t))}(a),P={root:{ownerState:{disableUnderline:s}}},M=(null!=v?v:c)?St(null!=v?v:c,P):P,A=null!=(n=null!=(r=b.root)?r:u.Root)?n:Qm,T=null!=(i=null!=(o=b.input)?o:u.Input)?i:Jm;return(0,_.jsx)(Ka,E({slots:{root:A,input:T},slotProps:M,fullWidth:f,inputComponent:h,multiline:g,ref:t,type:w},S,{classes:C}))}));eg.muiName="Input";var tg=eg,ng=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],rg=Ar(Wa,{shouldForwardProp:function(e){return Pr(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat(z(Va(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n,r,i=e.theme,o=e.ownerState,a="light"===i.palette.mode,s=a?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",l=a?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",u=a?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=a?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return E((p(t={position:"relative",backgroundColor:i.vars?i.vars.palette.FilledInput.bg:l,borderTopLeftRadius:(i.vars||i).shape.borderRadius,borderTopRightRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),"&:hover":{backgroundColor:i.vars?i.vars.palette.FilledInput.hoverBg:u,"@media (hover: none)":{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:l}}},"&.".concat(sd.focused),{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:l}),p(t,"&.".concat(sd.disabled),{backgroundColor:i.vars?i.vars.palette.FilledInput.disabledBg:c}),t),!o.disableUnderline&&(p(n={"&:after":{borderBottom:"2px solid ".concat(null==(r=(i.vars||i).palette[o.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"}},"&.".concat(sd.focused,":after"),{transform:"scaleX(1) translateX(0)"}),p(n,"&.".concat(sd.error),{"&:before, &:after":{borderBottomColor:(i.vars||i).palette.error.main}}),p(n,"&:before",{borderBottom:"1px solid ".concat(i.vars?"rgba(".concat(i.vars.palette.common.onBackgroundChannel," / ").concat(i.vars.opacity.inputUnderline,")"):s),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"}),p(n,"&:hover:not(.".concat(sd.disabled,", .").concat(sd.error,"):before"),{borderBottom:"1px solid ".concat((i.vars||i).palette.text.primary)}),p(n,"&.".concat(sd.disabled,":before"),{borderBottomStyle:"dotted"}),n),o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&E({padding:"25px 12px 8px"},"small"===o.size&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),ig=Ar($a,{name:"MuiFilledInput",slot:"Input",overridesResolver:Ga})((function(e){var t=e.theme,n=e.ownerState;return E({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&p({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),og=r.forwardRef((function(e,t){var n,r,i,o,a=Ia({props:e,name:"MuiFilledInput"}),s=a.components,l=void 0===s?{}:s,u=a.componentsProps,c=a.fullWidth,d=void 0!==c&&c,f=a.inputComponent,p=void 0===f?"input":f,h=a.multiline,m=void 0!==h&&h,g=a.slotProps,v=a.slots,y=void 0===v?{}:v,b=a.type,x=void 0===b?"text":b,w=k(a,ng),S=E({},a,{fullWidth:d,inputComponent:p,multiline:m,type:x}),C=function(e){var t=e.classes;return E({},t,N({root:["root",!e.disableUnderline&&"underline"],input:["input"]},ad,t))}(a),P={root:{ownerState:S},input:{ownerState:S}},M=(null!=g?g:u)?St(null!=g?g:u,P):P,A=null!=(n=null!=(r=y.root)?r:l.Root)?n:rg,T=null!=(i=null!=(o=y.input)?o:l.Input)?i:ig;return(0,_.jsx)(Ka,E({slots:{root:A,input:T},componentsProps:M,fullWidth:d,inputComponent:p,multiline:m,ref:t,type:x},w,{classes:C}))}));og.muiName="Input";var ag,sg=og,lg=["children","classes","className","label","notched"],ug=Ar("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),cg=Ar("legend")((function(e){var t=e.ownerState,n=e.theme;return E({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&E({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));var dg=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],fg=Ar(Wa,{shouldForwardProp:function(e){return Pr(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Va})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return E((p(t={position:"relative",borderRadius:(n.vars||n).shape.borderRadius},"&:hover .".concat(od.notchedOutline),{borderColor:(n.vars||n).palette.text.primary}),p(t,"@media (hover: none)",p({},"&:hover .".concat(od.notchedOutline),{borderColor:n.vars?"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.23)"):i})),p(t,"&.".concat(od.focused," .").concat(od.notchedOutline),{borderColor:(n.vars||n).palette[r.color].main,borderWidth:2}),p(t,"&.".concat(od.error," .").concat(od.notchedOutline),{borderColor:(n.vars||n).palette.error.main}),p(t,"&.".concat(od.disabled," .").concat(od.notchedOutline),{borderColor:(n.vars||n).palette.action.disabled}),t),r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&E({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),pg=Ar((function(e){var t=e.className,n=e.label,r=e.notched,i=k(e,lg),o=null!=n&&""!==n,a=E({},e,{notched:r,withLabel:o});return(0,_.jsx)(ug,E({"aria-hidden":!0,className:t,ownerState:a},i,{children:(0,_.jsx)(cg,{ownerState:a,children:o?(0,_.jsx)("span",{children:n}):ag||(ag=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){var t=e.theme,n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),hg=Ar($a,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Ga})((function(e){var t=e.theme,n=e.ownerState;return E({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&p({"&:-webkit-autofill":{borderRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),mg=r.forwardRef((function(e,t){var n,i,o,a,s,l=Ia({props:e,name:"MuiOutlinedInput"}),u=l.components,c=void 0===u?{}:u,d=l.fullWidth,f=void 0!==d&&d,p=l.inputComponent,h=void 0===p?"input":p,m=l.label,g=l.multiline,v=void 0!==g&&g,y=l.notched,b=l.slots,x=void 0===b?{}:b,w=l.type,S=void 0===w?"text":w,C=k(l,dg),P=function(e){var t=e.classes;return E({},t,N({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},id,t))}(l),M=Sa(),A=wa({props:l,muiFormControl:M,states:["required"]}),T=E({},l,{color:A.color||"primary",disabled:A.disabled,error:A.error,focused:A.focused,formControl:M,fullWidth:f,hiddenLabel:A.hiddenLabel,multiline:v,size:A.size,type:S}),R=null!=(n=null!=(i=x.root)?i:c.Root)?n:fg,I=null!=(o=null!=(a=x.input)?a:c.Input)?o:hg;return(0,_.jsx)(Ka,E({slots:{root:R,input:I},renderSuffix:function(e){return(0,_.jsx)(pg,{ownerState:T,className:P.notchedOutline,label:null!=m&&""!==m&&A.required?s||(s=(0,_.jsxs)(r.Fragment,{children:[m,"\xa0","*"]})):m,notched:"undefined"!==typeof y?y:Boolean(e.startAdornment||e.filled||e.focused)})},fullWidth:f,inputComponent:h,multiline:v,ref:t,type:S},C,{classes:E({},P,{notchedOutline:null})}))}));mg.muiName="Input";var gg=mg;function vg(e){return Or("MuiFormLabel",e)}var yg=Lr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),bg=["children","className","color","component","disabled","error","filled","focused","required"],xg=Ar("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return E({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((function(e){var t,n=e.theme,r=e.ownerState;return E({color:(n.vars||n).palette.text.secondary},n.typography.body1,(p(t={lineHeight:"1.4375em",padding:0,position:"relative"},"&.".concat(yg.focused),{color:(n.vars||n).palette[r.color].main}),p(t,"&.".concat(yg.disabled),{color:(n.vars||n).palette.text.disabled}),p(t,"&.".concat(yg.error),{color:(n.vars||n).palette.error.main}),t))})),wg=Ar("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return p({},"&.".concat(yg.error),{color:(t.vars||t).palette.error.main})})),_g=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiFormLabel"}),r=n.children,i=n.className,o=n.component,a=void 0===o?"label":o,s=k(n,bg),l=wa({props:n,muiFormControl:Sa(),states:["color","required","focused","disabled","error","filled"]}),u=E({},n,{color:l.color||"primary",component:a,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),c=function(e){var t=e.classes,n=e.color,r=e.focused,i=e.disabled,o=e.error,a=e.filled,s=e.required;return N({root:["root","color".concat(R(n)),i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]},vg,t)}(u);return(0,_.jsxs)(xg,E({as:a,ownerState:u,className:M(c.root,i),ref:t},s,{children:[r,l.required&&(0,_.jsxs)(wg,{ownerState:u,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),Sg=_g;function Cg(e){return Or("MuiInputLabel",e)}Lr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var Eg=["disableAnimation","margin","shrink","variant","className"],kg=Ar(Sg,{shouldForwardProp:function(e){return Pr(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[p({},"& .".concat(yg.asterisk),t.asterisk),t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return E({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&E({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&E({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&E({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Pg=r.forwardRef((function(e,t){var n=Ia({name:"MuiInputLabel",props:e}),r=n.disableAnimation,i=void 0!==r&&r,o=n.shrink,a=n.className,s=k(n,Eg),l=Sa(),u=o;"undefined"===typeof u&&l&&(u=l.filled||l.focused||l.adornedStart);var c=wa({props:n,muiFormControl:l,states:["size","variant","required"]}),d=E({},n,{disableAnimation:i,formControl:l,shrink:u,size:c.size,variant:c.variant,required:c.required}),f=function(e){var t=e.classes,n=e.formControl,r=e.size,i=e.shrink;return E({},t,N({root:["root",n&&"formControl",!e.disableAnimation&&"animated",i&&"shrink","small"===r&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},Cg,t))}(d);return(0,_.jsx)(kg,E({"data-shrink":u,ownerState:d,ref:t,className:M(f.root,a)},s,{classes:f}))}));var Mg=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function Ag(e){return Or("MuiFormControl",e)}Lr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var Tg=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Rg=Ar("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return E({},t.root,t["margin".concat(R(n.margin))],n.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return E({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Ig=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiFormControl"}),i=n.children,o=n.className,a=n.color,s=void 0===a?"primary":a,l=n.component,u=void 0===l?"div":l,d=n.disabled,f=void 0!==d&&d,p=n.error,h=void 0!==p&&p,m=n.focused,g=n.fullWidth,v=void 0!==g&&g,y=n.hiddenLabel,b=void 0!==y&&y,x=n.margin,w=void 0===x?"none":x,S=n.required,C=void 0!==S&&S,P=n.size,A=void 0===P?"medium":P,T=n.variant,I=void 0===T?"outlined":T,O=k(n,Tg),L=E({},n,{color:s,component:u,disabled:f,error:h,fullWidth:v,hiddenLabel:b,margin:w,required:C,size:A,variant:I}),D=function(e){var t=e.classes,n=e.margin,r=e.fullWidth;return N({root:["root","none"!==n&&"margin".concat(R(n)),r&&"fullWidth"]},Ag,t)}(L),F=c(r.useState((function(){var e=!1;return i&&r.Children.forEach(i,(function(t){if(Mg(t,["Input","Select"])){var n=Mg(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),2),B=F[0],z=F[1],j=c(r.useState((function(){var e=!1;return i&&r.Children.forEach(i,(function(t){Mg(t,["Input","Select"])&&za(t.props,!0)&&(e=!0)})),e})),2),H=j[0],U=j[1],V=c(r.useState(!1),2),G=V[0],W=V[1];f&&G&&W(!1);var $,q=void 0===m||f?G:m,X=r.useMemo((function(){return{adornedStart:B,setAdornedStart:z,color:s,disabled:f,error:h,filled:H,focused:q,fullWidth:v,hiddenLabel:b,size:A,onBlur:function(){W(!1)},onEmpty:function(){U(!1)},onFilled:function(){U(!0)},onFocus:function(){W(!0)},registerEffect:$,required:C,variant:I}}),[B,s,f,h,H,q,v,b,$,C,A,I]);return(0,_.jsx)(_a.Provider,{value:X,children:(0,_.jsx)(Rg,E({as:u,ownerState:L,className:M(D.root,o),ref:t},O,{children:i}))})})),Og=Ig;function Lg(e){return Or("MuiFormHelperText",e)}var Dg,Fg=Lr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Ng=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Bg=Ar("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.size&&t["size".concat(R(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((function(e){var t,n=e.theme,r=e.ownerState;return E({color:(n.vars||n).palette.text.secondary},n.typography.caption,(p(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},"&.".concat(Fg.disabled),{color:(n.vars||n).palette.text.disabled}),p(t,"&.".concat(Fg.error),{color:(n.vars||n).palette.error.main}),t),"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})})),zg=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiFormHelperText"}),r=n.children,i=n.className,o=n.component,a=void 0===o?"p":o,s=k(n,Ng),l=wa({props:n,muiFormControl:Sa(),states:["variant","size","disabled","error","filled","focused","required"]}),u=E({},n,{component:a,contained:"filled"===l.variant||"outlined"===l.variant,variant:l.variant,size:l.size,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),c=function(e){var t=e.classes,n=e.contained,r=e.size,i=e.disabled,o=e.error,a=e.filled,s=e.focused,l=e.required;return N({root:["root",i&&"disabled",o&&"error",r&&"size".concat(R(r)),n&&"contained",s&&"focused",a&&"filled",l&&"required"]},Lg,t)}(u);return(0,_.jsx)(Bg,E({as:a,ownerState:u,className:M(c.root,i),ref:t},s,{children:" "===r?Dg||(Dg=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))}));function jg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}function Hg(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Ug(e){return parseInt(Zi(e).getComputedStyle(e).paddingRight,10)||0}function Vg(e,t,n,r,i){var o=[t,n].concat(z(r));[].forEach.call(e.children,(function(e){var t=-1===o.indexOf(e),n=!function(e){var t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&Hg(e,i)}))}function Gg(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Wg(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=Yi(e);return t.body===e?Zi(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var i=Of(Yi(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Ug(r)+i,"px");var o=Yi(r).querySelectorAll(".mui-fixed");[].forEach.call(o,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(Ug(e)+i,"px")}))}var a;if(r.parentNode instanceof DocumentFragment)a=Yi(r).body;else{var s=r.parentElement,l=Zi(r);a="HTML"===(null==s?void 0:s.nodeName)&&"scroll"===l.getComputedStyle(s).overflowY?s:r}n.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var $g=function(){function e(){Di(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return Ni(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Hg(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Vg(t,e.mount,e.modalRef,r,!0);var i=Gg(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=Gg(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Wg(r,t))}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.modals.indexOf(e);if(-1===n)return n;var r=Gg(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&Hg(e.modalRef,t),Vg(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{var o=i.modals[i.modals.length-1];o.modalRef&&Hg(o.modalRef,!1)}return n}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),qg=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Xg(e){var t=[],n=[];return Array.from(e.querySelectorAll(qg)).forEach((function(e,r){var i=function(e){var t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function Kg(){return!0}var Yg=function(e){var t=e.children,n=e.disableAutoFocus,i=void 0!==n&&n,o=e.disableEnforceFocus,a=void 0!==o&&o,s=e.disableRestoreFocus,l=void 0!==s&&s,u=e.getTabbable,c=void 0===u?Xg:u,d=e.isEnabled,f=void 0===d?Kg:d,p=e.open,h=r.useRef(!1),m=r.useRef(null),g=r.useRef(null),v=r.useRef(null),y=r.useRef(null),b=r.useRef(!1),x=r.useRef(null),w=O(t.ref,x),S=r.useRef(null);r.useEffect((function(){p&&x.current&&(b.current=!i)}),[i,p]),r.useEffect((function(){if(p&&x.current){var e=Yi(x.current);return x.current.contains(e.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),b.current&&x.current.focus()),function(){l||(v.current&&v.current.focus&&(h.current=!0,v.current.focus()),v.current=null)}}}),[p]),r.useEffect((function(){if(p&&x.current){var e=Yi(x.current),t=function(t){var n=x.current;if(null!==n)if(e.hasFocus()&&!a&&f()&&!h.current){if(!n.contains(e.activeElement)){if(t&&y.current!==t.target||e.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!b.current)return;var r=[];if(e.activeElement!==m.current&&e.activeElement!==g.current||(r=c(x.current)),r.length>0){var i,o,s=Boolean((null==(i=S.current)?void 0:i.shiftKey)&&"Tab"===(null==(o=S.current)?void 0:o.key)),l=r[0],u=r[r.length-1];"string"!==typeof l&&"string"!==typeof u&&(s?u.focus():l.focus())}else n.focus()}}else h.current=!1},n=function(t){S.current=t,!a&&f()&&"Tab"===t.key&&e.activeElement===x.current&&t.shiftKey&&(h.current=!0,g.current&&g.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){e.activeElement&&"BODY"===e.activeElement.tagName&&t(null)}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[i,a,l,f,p,c]);var C=function(e){null===v.current&&(v.current=e.relatedTarget),b.current=!0};return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)("div",{tabIndex:p?0:-1,onFocus:C,ref:m,"data-testid":"sentinelStart"}),r.cloneElement(t,{ref:w,onFocus:function(e){null===v.current&&(v.current=e.relatedTarget),b.current=!0,y.current=e.target;var n=t.props.onFocus;n&&n(e)}}),(0,_.jsx)("div",{tabIndex:p?0:-1,onFocus:C,ref:g,"data-testid":"sentinelEnd"})]})};function Zg(e){return Or("MuiModal",e)}Lr("MuiModal",["root","hidden"]);var Qg=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"];var Jg=new $g,ev=r.forwardRef((function(e,t){var n,i,o=e.children,a=e.classes,s=e.closeAfterTransition,l=void 0!==s&&s,u=e.component,d=e.container,f=e.disableAutoFocus,p=void 0!==f&&f,h=e.disableEnforceFocus,m=void 0!==h&&h,g=e.disableEscapeKeyDown,v=void 0!==g&&g,y=e.disablePortal,b=void 0!==y&&y,x=e.disableRestoreFocus,w=void 0!==x&&x,S=e.disableScrollLock,C=void 0!==S&&S,P=e.hideBackdrop,M=void 0!==P&&P,A=e.keepMounted,T=void 0!==A&&A,R=e.manager,I=void 0===R?Jg:R,L=e.onBackdropClick,D=e.onClose,F=e.onKeyDown,B=e.open,z=e.onTransitionEnter,j=e.onTransitionExited,H=e.slotProps,U=void 0===H?{}:H,V=e.slots,G=void 0===V?{}:V,W=k(e,Qg),$=c(r.useState(!B),2),q=$[0],X=$[1],K=r.useRef({}),Y=r.useRef(null),Z=r.useRef(null),Q=O(Z,t),J=function(e){return!!e&&e.props.hasOwnProperty("in")}(o),ee=null==(n=e["aria-hidden"])||n,te=function(){return K.current.modalRef=Z.current,K.current.mountNode=Y.current,K.current},ne=function(){I.mount(te(),{disableScrollLock:C}),Z.current&&(Z.current.scrollTop=0)},re=Xi((function(){var e=function(e){return"function"===typeof e?e():e}(d)||Yi(Y.current).body;I.add(te(),e),Z.current&&ne()})),ie=r.useCallback((function(){return I.isTopModal(te())}),[I]),oe=Xi((function(e){Y.current=e,e&&Z.current&&(B&&ie()?ne():Hg(Z.current,ee))})),ae=r.useCallback((function(){I.remove(te(),ee)}),[I,ee]);r.useEffect((function(){return function(){ae()}}),[ae]),r.useEffect((function(){B?re():J&&l||ae()}),[B,ae,J,l,re]);var se=E({},e,{classes:a,closeAfterTransition:l,disableAutoFocus:p,disableEnforceFocus:m,disableEscapeKeyDown:v,disablePortal:b,disableRestoreFocus:w,disableScrollLock:C,exited:q,hideBackdrop:M,keepMounted:T}),le=function(e){var t=e.open,n=e.exited;return N({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},Zg,e.classes)}(se),ue={};void 0===o.props.tabIndex&&(ue.tabIndex="-1"),J&&(ue.onEnter=jg((function(){X(!1),z&&z()}),o.props.onEnter),ue.onExited=jg((function(){X(!0),j&&j(),l&&ae()}),o.props.onExited));var ce=null!=(i=null!=u?u:G.root)?i:"div",de=xc({elementType:ce,externalSlotProps:U.root,externalForwardedProps:W,additionalProps:{ref:Q,role:"presentation",onKeyDown:function(e){F&&F(e),"Escape"===e.key&&ie()&&(v||(e.stopPropagation(),D&&D(e,"escapeKeyDown")))}},className:le.root,ownerState:se}),fe=G.backdrop,pe=xc({elementType:fe,externalSlotProps:U.backdrop,additionalProps:{"aria-hidden":!0,onClick:function(e){e.target===e.currentTarget&&(L&&L(e),D&&D(e,"backdropClick"))},open:B},className:le.backdrop,ownerState:se});return T||B||J&&!q?(0,_.jsx)(pc,{ref:oe,container:d,disablePortal:b,children:(0,_.jsxs)(ce,E({},de,{children:[!M&&fe?(0,_.jsx)(fe,E({},pe)):null,(0,_.jsx)(Yg,{disableEnforceFocus:m,disableAutoFocus:p,disableRestoreFocus:w,isEnabled:ie,open:B,children:r.cloneElement(o,ue)})]}))}):null})),tv=ev,nv=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],rv={entering:{opacity:1},entered:{opacity:1}},iv=r.forwardRef((function(e,t){var n=Jf(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},o=e.addEndListener,a=e.appear,s=void 0===a||a,l=e.children,u=e.easing,c=e.in,d=e.onEnter,f=e.onEntered,p=e.onEntering,h=e.onExit,m=e.onExited,g=e.onExiting,v=e.style,y=e.timeout,b=void 0===y?i:y,x=e.TransitionComponent,w=void 0===x?Qf:x,S=k(e,nv),C=r.useRef(null),P=L(C,l.ref,t),M=function(e){return function(t){if(e){var n=C.current;void 0===t?e(n):e(n,t)}}},A=M(p),T=M((function(e,t){ep(e);var r=tp({style:v,timeout:b,easing:u},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),d&&d(e,t)})),R=M(f),I=M(g),O=M((function(e){var t=tp({style:v,timeout:b,easing:u},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),h&&h(e)})),D=M(m);return(0,_.jsx)(w,E({appear:s,in:c,nodeRef:C,onEnter:T,onEntered:R,onEntering:A,onExit:O,onExited:D,onExiting:I,addEndListener:function(e){o&&o(C.current,e)},timeout:b},S,{children:function(e,t){return r.cloneElement(l,E({style:E({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},rv[e],v,l.props.style),ref:P},t))}}))})),ov=iv;function av(e){return Or("MuiBackdrop",e)}Lr("MuiBackdrop",["root","invisible"]);var sv=["children","component","components","componentsProps","className","invisible","open","slotProps","slots","transitionDuration","TransitionComponent"],lv=Ar("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){return E({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.ownerState.invisible&&{backgroundColor:"transparent"})})),uv=r.forwardRef((function(e,t){var n,r,i,o=Ia({props:e,name:"MuiBackdrop"}),a=o.children,s=o.component,l=void 0===s?"div":s,u=o.components,c=void 0===u?{}:u,d=o.componentsProps,f=void 0===d?{}:d,p=o.className,h=o.invisible,m=void 0!==h&&h,g=o.open,v=o.slotProps,y=void 0===v?{}:v,b=o.slots,x=void 0===b?{}:b,w=o.transitionDuration,S=o.TransitionComponent,C=void 0===S?ov:S,P=k(o,sv),A=E({},o,{component:l,invisible:m}),T=function(e){var t=e.classes;return N({root:["root",e.invisible&&"invisible"]},av,t)}(A),R=null!=(n=y.root)?n:f.root;return(0,_.jsx)(C,E({in:g,timeout:w},P,{children:(0,_.jsx)(lv,E({"aria-hidden":!0},R,{as:null!=(r=null!=(i=x.root)?i:c.Root)?r:l,className:M(T.root,p,null==R?void 0:R.className),ownerState:E({},A,null==R?void 0:R.ownerState),classes:T,ref:t,children:a}))}))})),cv=uv,dv=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],fv=Ar("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return E({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),pv=Ar(cv,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),hv=r.forwardRef((function(e,t){var n,i,o,a,s,l,u=Ia({name:"MuiModal",props:e}),d=u.BackdropComponent,f=void 0===d?pv:d,p=u.BackdropProps,h=u.closeAfterTransition,m=void 0!==h&&h,g=u.children,v=u.component,y=u.components,b=void 0===y?{}:y,x=u.componentsProps,w=void 0===x?{}:x,S=u.disableAutoFocus,C=void 0!==S&&S,P=u.disableEnforceFocus,M=void 0!==P&&P,A=u.disableEscapeKeyDown,T=void 0!==A&&A,R=u.disablePortal,I=void 0!==R&&R,O=u.disableRestoreFocus,L=void 0!==O&&O,D=u.disableScrollLock,F=void 0!==D&&D,N=u.hideBackdrop,B=void 0!==N&&N,z=u.keepMounted,j=void 0!==z&&z,H=u.slotProps,U=u.slots,V=u.theme,G=k(u,dv),W=c(r.useState(!0),2),$=W[0],q=W[1],X={closeAfterTransition:m,disableAutoFocus:C,disableEnforceFocus:M,disableEscapeKeyDown:T,disablePortal:I,disableRestoreFocus:L,disableScrollLock:F,hideBackdrop:B,keepMounted:j},K=E({},u,X,{exited:$}),Y=function(e){return e.classes}(K),Z=null!=(n=null!=(i=null==U?void 0:U.root)?i:b.Root)?n:fv,Q=null!=(o=null!=(a=null==U?void 0:U.backdrop)?a:b.Backdrop)?o:f,J=null!=(s=null==H?void 0:H.root)?s:w.root,ee=null!=(l=null==H?void 0:H.backdrop)?l:w.backdrop;return(0,_.jsx)(tv,E({slots:{root:Z,backdrop:Q},slotProps:{root:function(){return E({},yc(J,K),!xa(Z)&&{as:v,theme:V})},backdrop:function(){return E({},p,yc(ee,K))}},onTransitionEnter:function(){return q(!1)},onTransitionExited:function(){return q(!0)},ref:t},G,{classes:Y},X,{children:g}))})),mv=hv;function gv(e){return Or("MuiPopover",e)}Lr("MuiPopover",["root","paper"]);var vv=["onEntering"],yv=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function bv(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function xv(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function wv(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function _v(e){return"function"===typeof e?e():e}var Sv=Ar(mv,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Cv=Ar(jc,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ev=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiPopover"}),i=n.action,o=n.anchorEl,a=n.anchorOrigin,s=void 0===a?{vertical:"top",horizontal:"left"}:a,l=n.anchorPosition,u=n.anchorReference,d=void 0===u?"anchorEl":u,f=n.children,p=n.className,h=n.container,m=n.elevation,g=void 0===m?8:m,v=n.marginThreshold,y=void 0===v?16:v,b=n.open,x=n.PaperProps,w=void 0===x?{}:x,S=n.transformOrigin,C=void 0===S?{vertical:"top",horizontal:"left"}:S,P=n.TransitionComponent,A=void 0===P?sp:P,T=n.transitionDuration,R=void 0===T?"auto":T,I=n.TransitionProps,O=(void 0===I?{}:I).onEntering,D=k(n.TransitionProps,vv),F=k(n,yv),B=r.useRef(),z=L(B,w.ref),j=E({},n,{anchorOrigin:s,anchorReference:d,elevation:g,marginThreshold:y,PaperProps:w,transformOrigin:C,TransitionComponent:A,transitionDuration:R,TransitionProps:D}),H=function(e){return N({root:["root"],paper:["paper"]},gv,e.classes)}(j),U=r.useCallback((function(){if("anchorPosition"===d)return l;var e=_v(o),t=(e&&1===e.nodeType?e:Mf(B.current).body).getBoundingClientRect();return{top:t.top+bv(t,s.vertical),left:t.left+xv(t,s.horizontal)}}),[o,s.horizontal,s.vertical,l,d]),V=r.useCallback((function(e){return{vertical:bv(e,C.vertical),horizontal:xv(e,C.horizontal)}}),[C.horizontal,C.vertical]),G=r.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=V(t);if("none"===d)return{top:null,left:null,transformOrigin:wv(n)};var r=U(),i=r.top-n.vertical,a=r.left-n.horizontal,s=i+t.height,l=a+t.width,u=Qi(_v(o)),c=u.innerHeight-y,f=u.innerWidth-y;if(i<y){var p=i-y;i-=p,n.vertical+=p}else if(s>c){var h=s-c;i-=h,n.vertical+=h}if(a<y){var m=a-y;a-=m,n.horizontal+=m}else if(l>f){var g=l-f;a-=g,n.horizontal+=g}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:wv(n)}}),[o,d,U,V,y]),W=c(r.useState(b),2),$=W[0],q=W[1],X=r.useCallback((function(){var e=B.current;if(e){var t=G(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,q(!0)}}),[G]);r.useEffect((function(){b&&X()})),r.useImperativeHandle(i,(function(){return b?{updatePosition:function(){X()}}:null}),[b,X]),r.useEffect((function(){if(b){var e=Am((function(){X()})),t=Qi(o);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[o,b,X]);var K=R;"auto"!==R||A.muiSupportAuto||(K=void 0);var Y=h||(o?Mf(_v(o)).body:void 0);return(0,_.jsx)(Sv,E({BackdropProps:{invisible:!0},className:M(H.root,p),container:Y,open:b,ref:t,ownerState:j},F,{children:(0,_.jsx)(A,E({appear:!0,in:b,onEntering:function(e,t){O&&O(e,t),X()},onExited:function(){q(!1)},timeout:K},D,{children:(0,_.jsx)(Cv,E({elevation:g},w,{ref:z,className:M(H.paper,w.className)},$?void 0:{style:E({},w.style,{opacity:0})},{ownerState:j,children:f}))}))}))})),kv=Ev;function Pv(e){return Or("MuiMenu",e)}Lr("MuiMenu",["root","paper","list"]);var Mv=["onEntering"],Av=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Tv={vertical:"top",horizontal:"right"},Rv={vertical:"top",horizontal:"left"},Iv=Ar(kv,{shouldForwardProp:function(e){return Pr(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Ov=Ar(jc,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Lv=Ar(Hf,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),Dv=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiMenu"}),i=n.autoFocus,o=void 0===i||i,a=n.children,s=n.disableAutoFocusItem,l=void 0!==s&&s,u=n.MenuListProps,c=void 0===u?{}:u,d=n.onClose,f=n.open,p=n.PaperProps,h=void 0===p?{}:p,m=n.PopoverClasses,g=n.transitionDuration,v=void 0===g?"auto":g,y=n.TransitionProps,b=(void 0===y?{}:y).onEntering,x=n.variant,w=void 0===x?"selectedMenu":x,S=k(n.TransitionProps,Mv),C=k(n,Av),P=Jf(),A="rtl"===P.direction,T=E({},n,{autoFocus:o,disableAutoFocusItem:l,MenuListProps:c,onEntering:b,PaperProps:h,transitionDuration:v,TransitionProps:S,variant:w}),R=function(e){return N({root:["root"],paper:["paper"],list:["list"]},Pv,e.classes)}(T),I=o&&!l&&f,O=r.useRef(null),L=-1;return r.Children.map(a,(function(e,t){r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===w&&e.props.selected||-1===L)&&(L=t))})),(0,_.jsx)(Iv,E({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:A?"right":"left"},transformOrigin:A?Tv:Rv,PaperProps:E({component:Ov},h,{classes:E({},h.classes,{root:R.paper})}),className:R.root,open:f,ref:t,transitionDuration:v,TransitionProps:E({onEntering:function(e,t){O.current&&O.current.adjustStyleForScrollbar(e,P),b&&b(e,t)}},S),ownerState:T},C,{classes:m,children:(0,_.jsx)(Lv,E({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:O,autoFocus:o&&(-1===L||l),autoFocusItem:I,variant:w},c,{className:M(R.list,c.className),children:a}))}))})),Fv=Dv;function Nv(e){return Or("MuiNativeSelect",e)}var Bv=Lr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),zv=["className","disabled","IconComponent","inputRef","variant"],jv=function(e){var t,n=e.ownerState,r=e.theme;return E((p(t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":E({},r.vars?{backgroundColor:"rgba(".concat(r.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"}},"&.".concat(Bv.disabled),{cursor:"default"}),p(t,"&[multiple]",{height:"auto"}),p(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:(r.vars||r).palette.background.paper}),p(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:(r.vars||r).shape.borderRadius,"&:focus":{borderRadius:(r.vars||r).shape.borderRadius},"&&&":{paddingRight:32}})},Hv=Ar("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Pr,overridesResolver:function(e,t){var n=e.ownerState;return[t.select,t[n.variant],p({},"&.".concat(Bv.multiple),t.multiple)]}})(jv),Uv=function(e){var t=e.ownerState,n=e.theme;return E(p({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active},"&.".concat(Bv.disabled),{color:(n.vars||n).palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},Vv=Ar("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat(R(n.variant))],n.open&&t.iconOpen]}})(Uv),Gv=r.forwardRef((function(e,t){var n=e.className,i=e.disabled,o=e.IconComponent,a=e.inputRef,s=e.variant,l=void 0===s?"standard":s,u=k(e,zv),c=E({},e,{disabled:i,variant:l}),d=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,o=e.open;return N({select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat(R(n)),o&&"iconOpen",r&&"disabled"]},Nv,t)}(c);return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(Hv,E({ownerState:c,className:M(d.select,n),disabled:i,ref:a||t},u)),e.multiple?null:(0,_.jsx)(Vv,{as:o,ownerState:c,className:d.icon})]})}));function Wv(e){return Or("MuiSelect",e)}var $v,qv=Lr("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Xv=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Kv=Ar("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var n=e.ownerState;return[p({},"&.".concat(qv.select),t.select),p({},"&.".concat(qv.select),t[n.variant]),p({},"&.".concat(qv.multiple),t.multiple)]}})(jv,p({},"&.".concat(qv.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),Yv=Ar("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat(R(n.variant))],n.open&&t.iconOpen]}})(Uv),Zv=Ar("input",{shouldForwardProp:function(e){return Mr(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Qv(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Jv(e){return null==e||"string"===typeof e&&!e.trim()}var ey,ty,ny=r.forwardRef((function(e,t){var n=e["aria-describedby"],i=e["aria-label"],o=e.autoFocus,a=e.autoWidth,s=e.children,l=e.className,u=e.defaultOpen,d=e.defaultValue,f=e.disabled,p=e.displayEmpty,h=e.IconComponent,m=e.inputRef,g=e.labelId,v=e.MenuProps,y=void 0===v?{}:v,b=e.multiple,x=e.name,w=e.onBlur,S=e.onChange,C=e.onClose,P=e.onFocus,T=e.onOpen,I=e.open,O=e.readOnly,D=e.renderValue,F=e.SelectDisplayProps,B=void 0===F?{}:F,z=e.tabIndex,j=e.value,H=e.variant,U=void 0===H?"standard":H,V=k(e,Xv),G=c(Om({controlled:j,default:d,name:"Select"}),2),W=G[0],$=G[1],q=c(Om({controlled:I,default:u,name:"Select"}),2),X=q[0],K=q[1],Y=r.useRef(null),Z=r.useRef(null),Q=c(r.useState(null),2),J=Q[0],ee=Q[1],te=r.useRef(null!=I).current,ne=c(r.useState(),2),re=ne[0],ie=ne[1],oe=L(t,m),ae=r.useCallback((function(e){Z.current=e,e&&ee(e)}),[]),se=null==J?void 0:J.parentNode;r.useImperativeHandle(oe,(function(){return{focus:function(){Z.current.focus()},node:Y.current,value:W}}),[W]),r.useEffect((function(){u&&X&&J&&!te&&(ie(a?null:se.clientWidth),Z.current.focus())}),[J,a]),r.useEffect((function(){o&&Z.current.focus()}),[o]),r.useEffect((function(){if(g){var e=Mf(Z.current).getElementById(g);if(e){var t=function(){getSelection().isCollapsed&&Z.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[g]);var le,ue,ce=function(e,t){e?T&&T(t):C&&C(t),te||(ie(a?null:se.clientWidth),K(e))},de=r.Children.toArray(s),fe=function(e){return function(t){var n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(W)?W.slice():[];var r=W.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),W!==n&&($(n),S)){var i=t.nativeEvent||t,o=new i.constructor(i.type,i);Object.defineProperty(o,"target",{writable:!0,value:{value:n,name:x}}),S(o,e)}b||ce(!1,t)}}},pe=null!==J&&X;delete V["aria-invalid"];var he=[],me=!1;(za({value:W})||p)&&(D?le=D(W):me=!0);var ge=de.map((function(e,t,n){var i,o,a,s,l;if(!r.isValidElement(e))return null;if(b){if(!Array.isArray(W))throw new Error(A(2));l=W.some((function(t){return Qv(t,e.props.value)})),l&&me&&he.push(e.props.children)}else(l=Qv(W,e.props.value))&&me&&(ue=e.props.children);if(l&&!0,void 0===e.props.value)return r.cloneElement(e,{"aria-readonly":!0,role:"option"});return r.cloneElement(e,{"aria-selected":l?"true":"false",onClick:fe(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:void 0===(null==(i=n[0])||null==(o=i.props)?void 0:o.value)||!0===(null==(a=n[0])||null==(s=a.props)?void 0:s.disabled)?function(){if(W)return l;var t=n.find((function(e){var t;return void 0!==(null==e||null==(t=e.props)?void 0:t.value)&&!0!==e.props.disabled}));return e===t||l}():l,value:void 0,"data-value":e.props.value})}));me&&(le=b?0===he.length?null:he.reduce((function(e,t,n){return e.push(t),n<he.length-1&&e.push(", "),e}),[]):ue);var ve,ye=re;!a&&te&&J&&(ye=se.clientWidth),ve="undefined"!==typeof z?z:f?null:0;var be=B.id||(x?"mui-component-select-".concat(x):void 0),xe=E({},e,{variant:U,value:W,open:pe}),we=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,o=e.open;return N({select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat(R(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},Wv,t)}(xe);return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(Kv,E({ref:ae,tabIndex:ve,role:"button","aria-disabled":f?"true":void 0,"aria-expanded":pe?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[g,be].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:function(e){if(!O){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ce(!0,e))}},onMouseDown:f||O?null:function(e){0===e.button&&(e.preventDefault(),Z.current.focus(),ce(!0,e))},onBlur:function(e){!pe&&w&&(Object.defineProperty(e,"target",{writable:!0,value:{value:W,name:x}}),w(e))},onFocus:P},B,{ownerState:xe,className:M(B.className,we.select,l),id:be,children:Jv(le)?$v||($v=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"})):le})),(0,_.jsx)(Zv,E({value:Array.isArray(W)?W.join(","):W,name:x,ref:Y,"aria-hidden":!0,onChange:function(e){var t=de.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=de[t];$(n.props.value),S&&S(e,n)}},tabIndex:-1,disabled:f,className:we.nativeInput,autoFocus:o,ownerState:xe},V)),(0,_.jsx)(Yv,{as:h,className:we.icon,ownerState:xe}),(0,_.jsx)(Fv,E({id:"menu-".concat(x||""),anchorEl:se,open:pe,onClose:function(e){ce(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:E({"aria-labelledby":g,role:"listbox",disableListWrap:!0},y.MenuListProps),PaperProps:E({},y.PaperProps,{style:E({minWidth:ye},null!=y.PaperProps?y.PaperProps.style:null)}),children:ge}))]})})),ry=ny,iy=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],oy={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return Pr(e)&&"variant"!==e},slot:"Root"},ay=Ar(tg,oy)(""),sy=Ar(gg,oy)(""),ly=Ar(sg,oy)(""),uy=r.forwardRef((function(e,t){var n=Ia({name:"MuiSelect",props:e}),i=n.autoWidth,o=void 0!==i&&i,a=n.children,s=n.classes,l=void 0===s?{}:s,u=n.className,c=n.defaultOpen,d=void 0!==c&&c,f=n.displayEmpty,p=void 0!==f&&f,h=n.IconComponent,m=void 0===h?ud:h,g=n.id,v=n.input,y=n.inputProps,b=n.label,x=n.labelId,w=n.MenuProps,S=n.multiple,C=void 0!==S&&S,P=n.native,A=void 0!==P&&P,T=n.onClose,R=n.onOpen,I=n.open,O=n.renderValue,D=n.SelectDisplayProps,F=n.variant,N=void 0===F?"outlined":F,B=k(n,iy),z=A?Gv:ry,j=wa({props:n,muiFormControl:Sa(),states:["variant"]}).variant||N,H=v||{standard:ey||(ey=(0,_.jsx)(ay,{})),outlined:(0,_.jsx)(sy,{label:b}),filled:ty||(ty=(0,_.jsx)(ly,{}))}[j],U=function(e){return e.classes}(E({},n,{variant:j,classes:l})),V=L(t,H.ref);return(0,_.jsx)(r.Fragment,{children:r.cloneElement(H,E({inputComponent:z,inputProps:E({children:a,IconComponent:m,variant:j,type:void 0,multiple:C},A?{id:g}:{autoWidth:o,defaultOpen:d,displayEmpty:p,labelId:x,MenuProps:w,onClose:T,onOpen:R,open:I,renderValue:O,SelectDisplayProps:E({id:g},D)},y,{classes:y?St(U,y.classes):U},v?v.props.inputProps:{})},C&&A&&"outlined"===j?{notched:!0}:{},{ref:V,className:M(H.props.className,u)},!v&&{variant:j},B))})}));uy.muiName="Select";var cy=uy;function dy(e){return Or("MuiTextField",e)}Lr("MuiTextField",["root"]);var fy=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],py={standard:tg,filled:sg,outlined:gg},hy=Ar(Og,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),my=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiTextField"}),r=n.autoComplete,i=n.autoFocus,o=void 0!==i&&i,a=n.children,s=n.className,l=n.color,u=void 0===l?"primary":l,c=n.defaultValue,d=n.disabled,f=void 0!==d&&d,p=n.error,h=void 0!==p&&p,m=n.FormHelperTextProps,g=n.fullWidth,v=void 0!==g&&g,y=n.helperText,b=n.id,x=n.InputLabelProps,w=n.inputProps,S=n.InputProps,C=n.inputRef,P=n.label,A=n.maxRows,T=n.minRows,R=n.multiline,I=void 0!==R&&R,O=n.name,L=n.onBlur,D=n.onChange,F=n.onFocus,B=n.placeholder,z=n.required,j=void 0!==z&&z,H=n.rows,U=n.select,V=void 0!==U&&U,G=n.SelectProps,W=n.type,$=n.value,q=n.variant,X=void 0===q?"outlined":q,K=k(n,fy),Y=E({},n,{autoFocus:o,color:u,disabled:f,error:h,fullWidth:v,multiline:I,required:j,select:V,variant:X}),Z=function(e){return N({root:["root"]},dy,e.classes)}(Y);var Q={};"outlined"===X&&(x&&"undefined"!==typeof x.shrink&&(Q.notched=x.shrink),Q.label=P),V&&(G&&G.native||(Q.id=void 0),Q["aria-describedby"]=void 0);var J=Es(b),ee=y&&J?"".concat(J,"-helper-text"):void 0,te=P&&J?"".concat(J,"-label"):void 0,ne=py[X],re=(0,_.jsx)(ne,E({"aria-describedby":ee,autoComplete:r,autoFocus:o,defaultValue:c,fullWidth:v,multiline:I,name:O,rows:H,maxRows:A,minRows:T,type:W,value:$,id:J,inputRef:C,onBlur:L,onChange:D,onFocus:F,placeholder:B,inputProps:w},Q,S));return(0,_.jsxs)(hy,E({className:M(Z.root,s),disabled:f,error:h,fullWidth:v,ref:t,required:j,color:u,variant:X,ownerState:Y},K,{children:[null!=P&&""!==P&&(0,_.jsx)(Pg,E({htmlFor:J,id:te},x,{children:P})),V?(0,_.jsx)(cy,E({"aria-describedby":ee,id:J,labelId:te,value:$,input:re},G,{children:a})):re,y&&(0,_.jsx)(zg,E({id:ee},m,{children:y}))]}))})),gy=my;function vy(e){return Or("MuiSwitch",e)}var yy=Lr("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),by=["className","color","edge","size","sx"],xy=Ar("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.edge&&t["edge".concat(R(n.edge))],t["size".concat(R(n.size))]]}})((function(e){var t,n=e.ownerState;return E({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===n.edge&&{marginLeft:-8},"end"===n.edge&&{marginRight:-8},"small"===n.size&&(p(t={width:40,height:24,padding:7},"& .".concat(yy.thumb),{width:16,height:16}),p(t,"& .".concat(yy.switchBase),p({padding:4},"&.".concat(yy.checked),{transform:"translateX(16px)"})),t))})),wy=Ar(Bm,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var n=e.ownerState;return[t.switchBase,p({},"& .".concat(yy.input),t.input),"default"!==n.color&&t["color".concat(R(n.color))]]}})((function(e){var t,n=e.theme;return p(t={position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:"".concat("light"===n.palette.mode?n.palette.common.white:n.palette.grey[300]),transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest})},"&.".concat(yy.checked),{transform:"translateX(20px)"}),p(t,"&.".concat(yy.disabled),{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:"".concat("light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[600])}),p(t,"&.".concat(yy.checked," + .").concat(yy.track),{opacity:.5}),p(t,"&.".concat(yy.disabled," + .").concat(yy.track),{opacity:n.vars?n.vars.opacity.switchTrackDisabled:"".concat("light"===n.palette.mode?.12:.2)}),p(t,"& .".concat(yy.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,n=e.theme,r=e.ownerState;return E({"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.activeChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Xn(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(p(t={},"&.".concat(yy.checked),p({color:(n.vars||n).palette[r.color].main,"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[r.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Xn(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(yy.disabled),{color:n.vars?n.vars.palette.Switch["".concat(r.color,"DisabledColor")]:"".concat("light"===n.palette.mode?Yn(n.palette[r.color].main,.62):Kn(n.palette[r.color].main,.55))})),p(t,"&.".concat(yy.checked," + .").concat(yy.track),{backgroundColor:(n.vars||n).palette[r.color].main}),t))})),_y=Ar("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),Sy=Ar("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){var t=e.theme;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),Cy=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiSwitch"}),r=n.className,i=n.color,o=void 0===i?"primary":i,a=n.edge,s=void 0!==a&&a,l=n.size,u=void 0===l?"medium":l,c=n.sx,d=k(n,by),f=E({},n,{color:o,edge:s,size:u}),p=function(e){var t=e.classes,n=e.edge,r=e.size,i=e.color,o=e.checked,a=e.disabled;return E({},t,N({root:["root",n&&"edge".concat(R(n)),"size".concat(R(r))],switchBase:["switchBase","color".concat(R(i)),o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},vy,t))}(f),h=(0,_.jsx)(Sy,{className:p.thumb,ownerState:f});return(0,_.jsxs)(xy,{className:M(p.root,r),sx:c,ownerState:f,children:[(0,_.jsx)(wy,E({type:"checkbox",icon:h,checkedIcon:h,ref:t,ownerState:f},d,{classes:E({},p,{root:p.switchBase})})),(0,_.jsx)(_y,{className:p.track,ownerState:f})]})})),Ey=Cy;function ky(e){return Or("MuiButton",e)}var Py=Lr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var My=r.createContext({}),Ay=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ty=function(e){return E({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},Ry=Ar(gl,{shouldForwardProp:function(e){return Pr(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat(R(n.color))],t["size".concat(R(n.size))],t["".concat(n.variant,"Size").concat(R(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,i=e.theme,o=e.ownerState;return E({},i.typography.button,(p(t={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":E({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Xn(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[o.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Xn(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat((i.vars||i).palette[o.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[o.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Xn(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:(i.vars||i).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[o.color].main}}),"&:active":E({},"contained"===o.variant&&{boxShadow:(i.vars||i).shadows[8]})},"&.".concat(Py.focusVisible),E({},"contained"===o.variant&&{boxShadow:(i.vars||i).shadows[6]})),p(t,"&.".concat(Py.disabled),E({color:(i.vars||i).palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"outlined"===o.variant&&"secondary"===o.color&&{border:"1px solid ".concat((i.vars||i).palette.action.disabled)},"contained"===o.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),t),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[o.color].mainChannel," / 0.5)"):"1px solid ".concat(Xn(i.palette[o.color].main,.5))},"contained"===o.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].contrastText,backgroundColor:(i.vars||i).palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(p(t={boxShadow:"none","&:hover":{boxShadow:"none"}},"&.".concat(Py.focusVisible),{boxShadow:"none"}),p(t,"&:active",{boxShadow:"none"}),p(t,"&.".concat(Py.disabled),{boxShadow:"none"}),t)})),Iy=Ar("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat(R(n.size))]]}})((function(e){var t=e.ownerState;return E({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Ty(t))})),Oy=Ar("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat(R(n.size))]]}})((function(e){var t=e.ownerState;return E({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Ty(t))})),Ly=r.forwardRef((function(e,t){var n=r.useContext(My),i=Ia({props:Ca(n,e),name:"MuiButton"}),o=i.children,a=i.color,s=void 0===a?"primary":a,l=i.component,u=void 0===l?"button":l,c=i.className,d=i.disabled,f=void 0!==d&&d,p=i.disableElevation,h=void 0!==p&&p,m=i.disableFocusRipple,g=void 0!==m&&m,v=i.endIcon,y=i.focusVisibleClassName,b=i.fullWidth,x=void 0!==b&&b,w=i.size,S=void 0===w?"medium":w,C=i.startIcon,P=i.type,A=i.variant,T=void 0===A?"text":A,I=k(i,Ay),O=E({},i,{color:s,component:u,disabled:f,disableElevation:h,disableFocusRipple:g,fullWidth:x,size:S,type:P,variant:T}),L=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,o=e.variant,a=e.classes;return E({},a,N({root:["root",o,"".concat(o).concat(R(t)),"size".concat(R(i)),"".concat(o,"Size").concat(R(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(R(i))],endIcon:["endIcon","iconSize".concat(R(i))]},ky,a))}(O),D=C&&(0,_.jsx)(Iy,{className:L.startIcon,ownerState:O,children:C}),F=v&&(0,_.jsx)(Oy,{className:L.endIcon,ownerState:O,children:v});return(0,_.jsxs)(Ry,E({ownerState:O,className:M(n.className,L.root,c),component:u,disabled:f,focusRipple:!g,focusVisibleClassName:M(L.focusVisible,y),ref:t,type:P},I,{classes:L,children:[D,o,F]}))})),Dy=Ly;function Fy(e){return Or("MuiTooltip",e)}var Ny=Lr("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),By=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];var zy=Ar(Tc,{name:"MuiTooltip",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((function(e){var t,n=e.theme,r=e.ownerState,i=e.open;return E({zIndex:(n.vars||n).zIndex.tooltip,pointerEvents:"none"},!r.disableInteractive&&{pointerEvents:"auto"},!i&&{pointerEvents:"none"},r.arrow&&(p(t={},'&[data-popper-placement*="bottom"] .'.concat(Ny.arrow),{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}}),p(t,'&[data-popper-placement*="top"] .'.concat(Ny.arrow),{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}}),p(t,'&[data-popper-placement*="right"] .'.concat(Ny.arrow),E({},r.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}})),p(t,'&[data-popper-placement*="left"] .'.concat(Ny.arrow),E({},r.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})),t))})),jy=Ar("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:function(e,t){var n=e.ownerState;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t["tooltipPlacement".concat(R(n.placement.split("-")[0]))]]}})((function(e){var t,n,r=e.theme,i=e.ownerState;return E({backgroundColor:r.vars?r.vars.palette.Tooltip.bg:Xn(r.palette.grey[700],.92),borderRadius:(r.vars||r).shape.borderRadius,color:(r.vars||r).palette.common.white,fontFamily:r.typography.fontFamily,padding:"4px 8px",fontSize:r.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:r.typography.fontWeightMedium},i.arrow&&{position:"relative",margin:0},i.touch&&{padding:"8px 16px",fontSize:r.typography.pxToRem(14),lineHeight:"".concat((n=16/14,Math.round(1e5*n)/1e5),"em"),fontWeight:r.typography.fontWeightRegular},(p(t={},".".concat(Ny.popper,'[data-popper-placement*="left"] &'),E({transformOrigin:"right center"},i.isRtl?E({marginLeft:"14px"},i.touch&&{marginLeft:"24px"}):E({marginRight:"14px"},i.touch&&{marginRight:"24px"}))),p(t,".".concat(Ny.popper,'[data-popper-placement*="right"] &'),E({transformOrigin:"left center"},i.isRtl?E({marginRight:"14px"},i.touch&&{marginRight:"24px"}):E({marginLeft:"14px"},i.touch&&{marginLeft:"24px"}))),p(t,".".concat(Ny.popper,'[data-popper-placement*="top"] &'),E({transformOrigin:"center bottom",marginBottom:"14px"},i.touch&&{marginBottom:"24px"})),p(t,".".concat(Ny.popper,'[data-popper-placement*="bottom"] &'),E({transformOrigin:"center top",marginTop:"14px"},i.touch&&{marginTop:"24px"})),t))})),Hy=Ar("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:function(e,t){return t.arrow}})((function(e){var t=e.theme;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Xn(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}})),Uy=!1,Vy=null;function Gy(e,t){return function(n){t&&t(n),e(n)}}var Wy,$y=r.forwardRef((function(e,t){var n,i,o,a,s,l,u,d,f,p,h,m,g,v,y,b,x,w,S,C=Ia({props:e,name:"MuiTooltip"}),P=C.arrow,A=void 0!==P&&P,T=C.children,I=C.components,O=void 0===I?{}:I,D=C.componentsProps,F=void 0===D?{}:D,B=C.describeChild,z=void 0!==B&&B,j=C.disableFocusListener,H=void 0!==j&&j,U=C.disableHoverListener,V=void 0!==U&&U,G=C.disableInteractive,W=void 0!==G&&G,$=C.disableTouchListener,q=void 0!==$&&$,X=C.enterDelay,K=void 0===X?100:X,Y=C.enterNextDelay,Z=void 0===Y?0:Y,Q=C.enterTouchDelay,J=void 0===Q?700:Q,ee=C.followCursor,te=void 0!==ee&&ee,ne=C.id,re=C.leaveDelay,ie=void 0===re?0:re,oe=C.leaveTouchDelay,ae=void 0===oe?1500:oe,se=C.onClose,le=C.onOpen,ue=C.open,ce=C.placement,de=void 0===ce?"bottom":ce,fe=C.PopperComponent,pe=C.PopperProps,he=void 0===pe?{}:pe,me=C.slotProps,ge=void 0===me?{}:me,ve=C.slots,ye=void 0===ve?{}:ve,be=C.title,xe=C.TransitionComponent,we=void 0===xe?sp:xe,_e=C.TransitionProps,Se=k(C,By),Ce=Jf(),Ee="rtl"===Ce.direction,ke=c(r.useState(),2),Pe=ke[0],Me=ke[1],Ae=c(r.useState(null),2),Te=Ae[0],Re=Ae[1],Ie=r.useRef(!1),Oe=W||te,Le=r.useRef(),De=r.useRef(),Fe=r.useRef(),Ne=r.useRef(),Be=c(Om({controlled:ue,default:!1,name:"Tooltip",state:"open"}),2),ze=Be[0],je=Be[1],He=ze,Ue=ks(ne),Ve=r.useRef(),Ge=r.useCallback((function(){void 0!==Ve.current&&(document.body.style.WebkitUserSelect=Ve.current,Ve.current=void 0),clearTimeout(Ne.current)}),[]);r.useEffect((function(){return function(){clearTimeout(Le.current),clearTimeout(De.current),clearTimeout(Fe.current),Ge()}}),[Ge]);var We=function(e){clearTimeout(Vy),Uy=!0,je(!0),le&&!He&&le(e)},$e=Ki((function(e){clearTimeout(Vy),Vy=setTimeout((function(){Uy=!1}),800+ie),je(!1),se&&He&&se(e),clearTimeout(Le.current),Le.current=setTimeout((function(){Ie.current=!1}),Ce.transitions.duration.shortest)})),qe=function(e){Ie.current&&"touchstart"!==e.type||(Pe&&Pe.removeAttribute("title"),clearTimeout(De.current),clearTimeout(Fe.current),K||Uy&&Z?De.current=setTimeout((function(){We(e)}),Uy?Z:K):We(e))},Xe=function(e){clearTimeout(De.current),clearTimeout(Fe.current),Fe.current=setTimeout((function(){$e(e)}),ie)},Ke=Fs(),Ye=Ke.isFocusVisibleRef,Ze=Ke.onBlur,Qe=Ke.onFocus,Je=Ke.ref,et=c(r.useState(!1),2)[1],tt=function(e){Ze(e),!1===Ye.current&&(et(!1),Xe(e))},nt=function(e){Pe||Me(e.currentTarget),Qe(e),!0===Ye.current&&(et(!0),qe(e))},rt=function(e){Ie.current=!0;var t=T.props;t.onTouchStart&&t.onTouchStart(e)},it=qe,ot=Xe;r.useEffect((function(){if(He)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||$e(e)}}),[$e,He]);var at=L(T.ref,Je,Me,t);be||0===be||(He=!1);var st=r.useRef({x:0,y:0}),lt=r.useRef(),ut={},ct="string"===typeof be;z?(ut.title=He||!ct||V?null:be,ut["aria-describedby"]=He?Ue:null):(ut["aria-label"]=ct?be:null,ut["aria-labelledby"]=He&&!ct?Ue:null);var dt=E({},ut,Se,T.props,{className:M(Se.className,T.props.className),onTouchStart:rt,ref:at},te?{onMouseMove:function(e){var t=T.props;t.onMouseMove&&t.onMouseMove(e),st.current={x:e.clientX,y:e.clientY},lt.current&&lt.current.update()}}:{});var ft={};q||(dt.onTouchStart=function(e){rt(e),clearTimeout(Fe.current),clearTimeout(Le.current),Ge(),Ve.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ne.current=setTimeout((function(){document.body.style.WebkitUserSelect=Ve.current,qe(e)}),J)},dt.onTouchEnd=function(e){T.props.onTouchEnd&&T.props.onTouchEnd(e),Ge(),clearTimeout(Fe.current),Fe.current=setTimeout((function(){$e(e)}),ae)}),V||(dt.onMouseOver=Gy(it,dt.onMouseOver),dt.onMouseLeave=Gy(ot,dt.onMouseLeave),Oe||(ft.onMouseOver=it,ft.onMouseLeave=ot)),H||(dt.onFocus=Gy(nt,dt.onFocus),dt.onBlur=Gy(tt,dt.onBlur),Oe||(ft.onFocus=nt,ft.onBlur=tt));var pt=r.useMemo((function(){var e,t=[{name:"arrow",enabled:Boolean(Te),options:{element:Te,padding:4}}];return null!=(e=he.popperOptions)&&e.modifiers&&(t=t.concat(he.popperOptions.modifiers)),E({},he.popperOptions,{modifiers:t})}),[Te,he]),ht=E({},C,{isRtl:Ee,arrow:A,disableInteractive:Oe,placement:de,PopperComponentProp:fe,touch:Ie.current}),mt=function(e){var t=e.classes,n=e.disableInteractive,r=e.arrow,i=e.touch,o=e.placement;return N({popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch","tooltipPlacement".concat(R(o.split("-")[0]))],arrow:["arrow"]},Fy,t)}(ht),gt=null!=(n=null!=(i=ye.popper)?i:O.Popper)?n:zy,vt=null!=(o=null!=(a=null!=(s=ye.transition)?s:O.Transition)?a:we)?o:sp,yt=null!=(l=null!=(u=ye.tooltip)?u:O.Tooltip)?l:jy,bt=null!=(d=null!=(f=ye.arrow)?f:O.Arrow)?d:Hy,xt=mc(gt,E({},he,null!=(p=ge.popper)?p:F.popper,{className:M(mt.popper,null==he?void 0:he.className,null==(h=null!=(m=ge.popper)?m:F.popper)?void 0:h.className)}),ht),wt=mc(vt,E({},_e,null!=(g=ge.transition)?g:F.transition),ht),_t=mc(yt,E({},null!=(v=ge.tooltip)?v:F.tooltip,{className:M(mt.tooltip,null==(y=null!=(b=ge.tooltip)?b:F.tooltip)?void 0:y.className)}),ht),St=mc(bt,E({},null!=(x=ge.arrow)?x:F.arrow,{className:M(mt.arrow,null==(w=null!=(S=ge.arrow)?S:F.arrow)?void 0:w.className)}),ht);return(0,_.jsxs)(r.Fragment,{children:[r.cloneElement(T,dt),(0,_.jsx)(gt,E({as:null!=fe?fe:Tc,placement:de,anchorEl:te?{getBoundingClientRect:function(){return{top:st.current.y,left:st.current.x,right:st.current.x,bottom:st.current.y,width:0,height:0}}}:Pe,popperRef:lt,open:!!Pe&&He,id:Ue,transition:!0},ft,xt,{popperOptions:pt,children:function(e){var t=e.TransitionProps;return(0,_.jsx)(vt,E({timeout:Ce.transitions.duration.shorter},t,wt,{children:(0,_.jsxs)(yt,E({},_t,{children:[be,A?(0,_.jsx)(bt,E({},St,{ref:Re})):null]}))}))}}))]})})),qy=$y,Xy=["align","children","colIndex","colDef","cellMode","field","formattedValue","hasFocus","height","isEditable","rowId","tabIndex","value","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","onClick","onDoubleClick","onMouseDown","onMouseUp","onKeyDown","onDragEnter","onDragOver"];function Ky(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Yy(e){return parseFloat(e)}function Zy(e){return Or("MuiSkeleton",e)}Lr("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var Qy,Jy,eb,tb,nb,rb,ib,ob,ab=["animation","className","component","height","style","variant","width"],sb=Da(nb||(nb=Qy||(Qy=Ns(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),lb=Da(rb||(rb=Jy||(Jy=Ns(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),ub=Ar("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((function(e){var t=e.theme,n=e.ownerState,r=Ky(t.shape.borderRadius)||"px",i=Yy(t.shape.borderRadius);return E({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:Xn(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(i).concat(r,"/").concat(Math.round(i/.6*10)/10).concat(r),"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(function(e){return"pulse"===e.ownerState.animation&&La(ib||(ib=eb||(eb=Ns(["\n      animation: "," 1.5s ease-in-out 0.5s infinite;\n    "]))),sb)}),(function(e){var t=e.ownerState,n=e.theme;return"wave"===t.animation&&La(ob||(ob=tb||(tb=Ns(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 1.6s linear 0.5s infinite;\n        background: linear-gradient(\n          90deg,\n          transparent,\n          ",",\n          transparent\n        );\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),lb,(n.vars||n).palette.action.hover)})),cb=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiSkeleton"}),r=n.animation,i=void 0===r?"pulse":r,o=n.className,a=n.component,s=void 0===a?"span":a,l=n.height,u=n.style,c=n.variant,d=void 0===c?"text":c,f=n.width,p=k(n,ab),h=E({},n,{animation:i,component:s,variant:d,hasChildren:Boolean(p.children)}),m=function(e){var t=e.classes,n=e.variant,r=e.animation,i=e.hasChildren,o=e.width,a=e.height;return N({root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!a&&"heightAuto"]},Zy,t)}(h);return(0,_.jsx)(ub,E({as:s,ref:t,className:M(m.root,o),ownerState:h},p,{style:E({width:f,height:l},u)}))})),db=cb,fb=["field","align","width","contentWidth"];var pb=function(e){var t=r.useRef({});return r.useEffect((function(){t.current=e})),t.current};function hb(e){return Or("MuiBadge",e)}Lr("MuiBadge",["root","badge","invisible"]);var mb=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],gb=r.forwardRef((function(e,t){var n=e.component,r=e.children,i=e.max,o=void 0===i?99:i,a=e.slotProps,s=void 0===a?{}:a,l=e.slots,u=void 0===l?{}:l,c=e.showZero,d=void 0!==c&&c,f=k(e,mb),p=function(e){var t=e.badgeContent,n=e.invisible,r=void 0!==n&&n,i=e.max,o=void 0===i?99:i,a=e.showZero,s=void 0!==a&&a,l=pb({badgeContent:t,max:o}),u=r;!1!==r||0!==t||s||(u=!0);var c=u?l:e,d=c.badgeContent,f=c.max,p=void 0===f?o:f;return{badgeContent:d,invisible:u,max:p,displayValue:d&&Number(d)>p?"".concat(p,"+"):d}}(E({},e,{max:o})),h=p.badgeContent,m=p.max,g=p.displayValue,v=E({},e,{badgeContent:h,invisible:p.invisible,max:m,showZero:d}),y=function(e){return N({root:["root"],badge:["badge",e.invisible&&"invisible"]},hb,void 0)}(v),b=n||u.root||"span",x=xc({elementType:b,externalSlotProps:s.root,externalForwardedProps:f,additionalProps:{ref:t},ownerState:v,className:y.root}),w=u.badge||"span",S=xc({elementType:w,externalSlotProps:s.badge,ownerState:v,className:y.badge});return(0,_.jsxs)(b,E({},x,{children:[r,(0,_.jsx)(w,E({},S,{children:g}))]}))})),vb=gb,yb=function(e){return!e||!xa(e)};function bb(e){return Or("MuiBadge",e)}var xb=Lr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),wb=["anchorOrigin","className","component","components","componentsProps","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],_b=Ar("span",{name:"MuiBadge",slot:"Root",overridesResolver:function(e,t){return t.root}})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Sb=Ar("span",{name:"MuiBadge",slot:"Badge",overridesResolver:function(e,t){var n=e.ownerState;return[t.badge,t[n.variant],t["anchorOrigin".concat(R(n.anchorOrigin.vertical)).concat(R(n.anchorOrigin.horizontal)).concat(R(n.overlap))],"default"!==n.color&&t["color".concat(R(n.color))],n.invisible&&t.invisible]}})((function(e){var t=e.theme,n=e.ownerState;return E({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},"dot"===n.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&p({top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%"},"&.".concat(xb.invisible),{transform:"scale(0) translate(50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&p({bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%"},"&.".concat(xb.invisible),{transform:"scale(0) translate(50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&p({top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%"},"&.".concat(xb.invisible),{transform:"scale(0) translate(-50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&p({bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%"},"&.".concat(xb.invisible),{transform:"scale(0) translate(-50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&p({top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%"},"&.".concat(xb.invisible),{transform:"scale(0) translate(50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&p({bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%"},"&.".concat(xb.invisible),{transform:"scale(0) translate(50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&p({top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%"},"&.".concat(xb.invisible),{transform:"scale(0) translate(-50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&p({bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%"},"&.".concat(xb.invisible),{transform:"scale(0) translate(-50%, 50%)"}),n.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})})),Cb=r.forwardRef((function(e,t){var n,r,i,o,a,s,l=Ia({props:e,name:"MuiBadge"}),u=l.anchorOrigin,c=void 0===u?{vertical:"top",horizontal:"right"}:u,d=l.className,f=l.component,p=void 0===f?"span":f,h=l.components,m=void 0===h?{}:h,g=l.componentsProps,v=void 0===g?{}:g,y=l.overlap,b=void 0===y?"rectangular":y,x=l.color,w=void 0===x?"default":x,S=l.invisible,C=void 0!==S&&S,P=l.max,A=l.badgeContent,T=l.slots,I=l.slotProps,O=l.showZero,L=void 0!==O&&O,D=l.variant,F=void 0===D?"standard":D,B=k(l,wb),z=pb({anchorOrigin:c,color:w,overlap:b,variant:F}),j=C;!1===C&&(0===A&&!L||null==A&&"dot"!==F)&&(j=!0);var H,U=j?z:l,V=U.color,G=void 0===V?w:V,W=U.overlap,$=void 0===W?b:W,q=U.anchorOrigin,X=void 0===q?c:q,K=U.variant,Y=void 0===K?F:K,Z=function(e){var t=e.color,n=e.anchorOrigin,r=e.invisible,i=e.overlap,o=e.variant,a=e.classes,s=void 0===a?{}:a;return N({root:["root"],badge:["badge",o,r&&"invisible","anchorOrigin".concat(R(n.vertical)).concat(R(n.horizontal)),"anchorOrigin".concat(R(n.vertical)).concat(R(n.horizontal)).concat(R(i)),"overlap".concat(R(i)),"default"!==t&&"color".concat(R(t))]},bb,s)}(E({},l,{anchorOrigin:X,invisible:j,color:G,overlap:$,variant:Y}));"dot"!==Y&&(H=A&&Number(A)>P?"".concat(P,"+"):A);var Q=null!=(n=null!=(r=null==T?void 0:T.root)?r:m.Root)?n:_b,J=null!=(i=null!=(o=null==T?void 0:T.badge)?o:m.Badge)?i:Sb,ee=null!=(a=null==I?void 0:I.root)?a:v.root,te=null!=(s=null==I?void 0:I.badge)?s:v.badge;return(0,_.jsx)(vb,E({invisible:C,badgeContent:H,showZero:L,max:P},B,{slots:{root:Q,badge:J},className:M(null==ee?void 0:ee.className,Z.root,d),slotProps:{root:E({},ee,yb(Q)&&{as:p,ownerState:E({},null==ee?void 0:ee.ownerState,{anchorOrigin:X,color:G,overlap:$,variant:Y})}),badge:E({},te,{className:M(Z.badge,null==te?void 0:te.className)},yb(J)&&{ownerState:E({},null==te?void 0:te.ownerState,{anchorOrigin:X,color:G,overlap:$,variant:Y})})},ref:t}))})),Eb=Cb,kb=["className"],Pb=Ar("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:function(e,t){return t.iconButtonContainer}})((function(){return{display:"flex",visibility:"hidden",width:0}})),Mb=r.forwardRef((function(e,t){var n=e.className,r=k(e,kb),i=function(e){return N({root:["iconButtonContainer"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(Pb,E({ref:t,className:M(i.root,n)},r))}));var Ab=["hideMenu","currentColumn","open","id","labelledby","className","children"],Tb=r.forwardRef((function(e,t){var n=e.hideMenu,i=e.open,o=e.id,a=e.labelledby,s=e.className,l=e.children,u=k(e,Ab),c=r.useCallback((function(e){nf(e.key)&&e.preventDefault(),gf(e.key)&&n(e)}),[n]);return(0,_.jsx)(Hf,E({id:o,ref:t,className:M(Fr.menuList,s),"aria-labelledby":a,onKeyDown:c,autoFocus:i},u,{children:l}))})),Rb=function(e){var t=e.onClick,n=si(),i=ui(),o=r.useCallback((function(e){t(e),n.current.showPreferences(xp.columns)}),[n,t]);return i.disableColumnSelector?null:(0,_.jsx)(El,{onClick:o,children:n.current.getLocaleText("columnMenuShowColumns")})},Ib=function(e){var t=e.column,n=e.onClick,i=si(),o=ui(),a=r.useCallback((function(e){n(e),i.current.showFilterPanel(null==t?void 0:t.field)}),[i,null==t?void 0:t.field,n]);return o.disableColumnFilter||null==t||!t.filterable?null:(0,_.jsx)(El,{onClick:a,children:i.current.getLocaleText("columnMenuFilter")})},Ob=function(e){var t=e.column,n=e.onClick,i=si(),o=ui(),a=r.useRef(),s=1===Jr(i).filter((function(e){return!0!==e.disableColumnMenu})).length,l=r.useCallback((function(e){s||(n(e),a.current=setTimeout((function(){i.current.setColumnVisibility(null==t?void 0:t.field,!1)}),100))}),[i,null==t?void 0:t.field,n,s]);return r.useEffect((function(){return function(){return clearTimeout(a.current)}}),[]),o.disableColumnSelector||!1===t.hideable?null:(0,_.jsx)(El,{onClick:l,disabled:s,children:i.current.getLocaleText("columnMenuHideColumn")})};function Lb(e){var t,n=e.column,i=e.onClick,o=si(),a=oi(o,oo),s=ui(),l=null!=(t=n.sortingOrder)?t:s.sortingOrder,u=r.useMemo((function(){if(!n)return null;var e=a.find((function(e){return e.field===n.field}));return null==e?void 0:e.sort}),[n,a]),c=r.useCallback((function(e){i(e);var t=e.currentTarget.getAttribute("data-value")||null;o.current.sortColumn(n,t)}),[o,n,i]);return n&&n.sortable?(0,_.jsxs)(r.Fragment,{children:[l.includes(null)?(0,_.jsx)(El,{onClick:c,disabled:null==u,children:o.current.getLocaleText("columnMenuUnsort")}):null,l.includes("asc")?(0,_.jsx)(El,{onClick:c,"data-value":"asc",disabled:"asc"===u,children:o.current.getLocaleText("columnMenuSortAsc")}):null,l.includes("desc")?(0,_.jsx)(El,{onClick:c,"data-value":"desc",disabled:"desc"===u,children:o.current.getLocaleText("columnMenuSortDesc")}):null]}):null}var Db=r.forwardRef((function(e,t){var n=e.hideMenu,i=e.currentColumn,o=si(),a=[(0,_.jsx)(Lb,{onClick:n,column:i}),(0,_.jsx)(Ib,{onClick:n,column:i}),(0,_.jsx)(Ob,{onClick:n,column:i}),(0,_.jsx)(Rb,{onClick:n,column:i})],s=o.current.unstable_applyPipeProcessors("columnMenu",a,i);return(0,_.jsx)(Tb,E({ref:t},e,{children:s.map((function(e,t){return r.cloneElement(e,{key:t,onClick:n,column:i})}))}))})),Fb=["className","rowCount","visibleRowCount"],Nb=Ar("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:function(e,t){return t.rowCount}})((function(e){return{alignItems:"center",display:"flex",margin:e.theme.spacing(0,2)}})),Bb=r.forwardRef((function(e,t){var n=e.className,r=e.rowCount,i=e.visibleRowCount,o=k(e,Fb),a=si(),s=function(e){return N({root:["rowCount"]},Dr,e.classes)}({classes:ui().classes});if(0===r)return null;var l=i<r?a.current.getLocaleText("footerTotalVisibleRows")(i,r):r.toLocaleString();return(0,_.jsxs)(Nb,E({ref:t,className:M(s.root,n)},o,{children:[a.current.getLocaleText("footerTotalRows")," ",l]}))})),zb=["className","selectedRowCount"],jb=Ar("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:function(e,t){return t.selectedRowCount}})((function(e){var t=e.theme;return p({alignItems:"center",display:"flex",margin:t.spacing(0,2),visibility:"hidden",width:0,height:0},t.breakpoints.up("sm"),{visibility:"visible",width:"auto",height:"auto"})})),Hb=r.forwardRef((function(e,t){var n=e.className,r=e.selectedRowCount,i=k(e,zb),o=si(),a=function(e){return N({root:["selectedRowCount"]},Dr,e.classes)}({classes:ui().classes}),s=o.current.getLocaleText("footerRowSelected")(r);return(0,_.jsx)(jb,E({ref:t,className:M(a.root,n)},i,{children:s}))})),Ub=["className"],Vb=Ar("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:function(e,t){return t.footerContainer}})((function(e){var t=e.theme,n="light"===t.palette.mode?Yn(Xn(t.palette.divider,1),.88):Kn(Xn(t.palette.divider,1),.68);return{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid ".concat(n)}})),Gb=r.forwardRef((function(e,t){var n=e.className,r=k(e,Ub),i=function(e){return N({root:["footerContainer"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(Vb,E({ref:t,className:M(i.root,n)},r))})),Wb=r.forwardRef((function(e,t){var n,r=si(),i=ui(),o=oi(r,xi),a=oi(r,qp),s=oi(r,bo),l=!i.hideFooterSelectedRowCount&&a>0?(0,_.jsx)(Hb,{selectedRowCount:a}):(0,_.jsx)("div",{}),u=i.hideFooterRowCount||i.pagination?null:(0,_.jsx)(Bb,{rowCount:o,visibleRowCount:s}),c=i.pagination&&!i.hideFooterPagination&&i.components.Pagination&&(0,_.jsx)(i.components.Pagination,E({},null==(n=i.componentsProps)?void 0:n.pagination));return(0,_.jsxs)(Gb,E({ref:t},e,{children:[l,u,c]}))})),$b=r.forwardRef((function(e,t){var n,r,i=ui();return(0,_.jsxs)("div",E({ref:t},e,{children:[(0,_.jsx)(i.components.PreferencesPanel,E({},null==(n=i.componentsProps)?void 0:n.preferencesPanel)),i.components.Toolbar&&(0,_.jsx)(i.components.Toolbar,E({},null==(r=i.componentsProps)?void 0:r.toolbar))]}))})),qb=r.forwardRef((function(e,t){var n,r,i,o=si(),a=oi(o,Zr),s=ui(),l=oi(o,Jh),u=o.current.unstable_applyPipeProcessors("preferencePanel",null,null!=(n=l.openedPanelValue)?n:xp.filters);return(0,_.jsx)(s.components.Panel,E({ref:t,as:s.components.BasePopper,open:a.length>0&&l.open},null==(r=s.componentsProps)?void 0:r.panel,e,null==(i=s.componentsProps)?void 0:i.basePopper,{children:u}))}));function Xb(e){return Or("MuiCircularProgress",e)}Lr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var Kb,Yb,Zb,Qb,Jb,ex,tx,nx,rx=["className","color","disableShrink","size","style","thickness","value","variant"],ix=44,ox=Da(Jb||(Jb=Kb||(Kb=Ns(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),ax=Da(ex||(ex=Yb||(Yb=Ns(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),sx=Ar("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["color".concat(R(n.color))]]}})((function(e){var t=e.ownerState,n=e.theme;return E({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&La(tx||(tx=Zb||(Zb=Ns(["\n      animation: "," 1.4s linear infinite;\n    "]))),ox)})),lx=Ar("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,t){return t.svg}})({display:"block"}),ux=Ar("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,t){var n=e.ownerState;return[t.circle,t["circle".concat(R(n.variant))],n.disableShrink&&t.circleDisableShrink]}})((function(e){var t=e.ownerState,n=e.theme;return E({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var t=e.ownerState;return"indeterminate"===t.variant&&!t.disableShrink&&La(nx||(nx=Qb||(Qb=Ns(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),ax)})),cx=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiCircularProgress"}),r=n.className,i=n.color,o=void 0===i?"primary":i,a=n.disableShrink,s=void 0!==a&&a,l=n.size,u=void 0===l?40:l,c=n.style,d=n.thickness,f=void 0===d?3.6:d,p=n.value,h=void 0===p?0:p,m=n.variant,g=void 0===m?"indeterminate":m,v=k(n,rx),y=E({},n,{color:o,disableShrink:s,size:u,thickness:f,value:h,variant:g}),b=function(e){var t=e.classes,n=e.variant,r=e.color,i=e.disableShrink;return N({root:["root",n,"color".concat(R(r))],svg:["svg"],circle:["circle","circle".concat(R(n)),i&&"circleDisableShrink"]},Xb,t)}(y),x={},w={},S={};if("determinate"===g){var C=2*Math.PI*((ix-f)/2);x.strokeDasharray=C.toFixed(3),S["aria-valuenow"]=Math.round(h),x.strokeDashoffset="".concat(((100-h)/100*C).toFixed(3),"px"),w.transform="rotate(-90deg)"}return(0,_.jsx)(sx,E({className:M(b.root,r),style:E({width:u,height:u},w,c),ownerState:y,ref:t,role:"progressbar"},S,v,{children:(0,_.jsx)(lx,{className:b.svg,ownerState:y,viewBox:"".concat(22," ").concat(22," ").concat(ix," ").concat(ix),children:(0,_.jsx)(ux,{className:b.circle,style:x,ownerState:y,cx:ix,cy:ix,r:(ix-f)/2,fill:"none",strokeWidth:f})})}))})),dx=cx,fx=["className"],px=Ar("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:function(e,t){return t.overlay}})((function(e){var t=e.theme;return{position:"absolute",top:0,zIndex:4,width:"100%",height:"100%",pointerEvents:"none",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:Xn(t.palette.background.default,t.palette.action.disabledOpacity)}})),hx=r.forwardRef((function(e,t){var n=e.className,r=k(e,fx),i=function(e){return N({root:["overlay"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(px,E({ref:t,className:M(i.root,n)},r))})),mx=r.forwardRef((function(e,t){return(0,_.jsx)(hx,E({ref:t},e,{children:(0,_.jsx)(dx,{})}))})),gx=r.forwardRef((function(e,t){var n=si().current.getLocaleText("noRowsLabel");return(0,_.jsx)(hx,E({ref:t},e,{children:n}))}));var vx=r.createContext();var yx=r.createContext();function bx(e){return Or("MuiTableCell",e)}var xx=Lr("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),wx=["align","className","component","padding","scope","size","sortDirection","variant"],_x=Ar("td",{name:"MuiTableCell",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["size".concat(R(n.size))],"normal"!==n.padding&&t["padding".concat(R(n.padding))],"inherit"!==n.align&&t["align".concat(R(n.align))],n.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,n=e.ownerState;return E({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?Yn(Xn(t.palette.divider,1),.88):Kn(Xn(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===n.variant&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===n.variant&&{color:(t.vars||t).palette.text.primary},"footer"===n.variant&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===n.size&&p({padding:"6px 16px"},"&.".concat(xx.paddingCheckbox),{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}),"checkbox"===n.padding&&{width:48,padding:"0 0 0 4px"},"none"===n.padding&&{padding:0},"left"===n.align&&{textAlign:"left"},"center"===n.align&&{textAlign:"center"},"right"===n.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===n.align&&{textAlign:"justify"},n.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})})),Sx=r.forwardRef((function(e,t){var n,i=Ia({props:e,name:"MuiTableCell"}),o=i.align,a=void 0===o?"inherit":o,s=i.className,l=i.component,u=i.padding,c=i.scope,d=i.size,f=i.sortDirection,p=i.variant,h=k(i,wx),m=r.useContext(vx),g=r.useContext(yx),v=g&&"head"===g.variant,y=c;"td"===(n=l||(v?"th":"td"))?y=void 0:!y&&v&&(y="col");var b=p||g&&g.variant,x=E({},i,{align:a,component:n,padding:u||(m&&m.padding?m.padding:"normal"),size:d||(m&&m.size?m.size:"medium"),sortDirection:f,stickyHeader:"head"===b&&m&&m.stickyHeader,variant:b}),w=function(e){var t=e.classes,n=e.variant,r=e.align,i=e.padding,o=e.size;return N({root:["root",n,e.stickyHeader&&"stickyHeader","inherit"!==r&&"align".concat(R(r)),"normal"!==i&&"padding".concat(R(i)),"size".concat(R(o))]},bx,t)}(x),S=null;return f&&(S="asc"===f?"ascending":"descending"),(0,_.jsx)(_x,E({as:n,ref:t,className:M(w.root,s),"aria-sort":S,scope:y,ownerState:x},h))})),Cx=Sx;function Ex(e){return Or("MuiToolbar",e)}Lr("MuiToolbar",["root","gutters","regular","dense"]);var kx,Px,Mx,Ax,Tx,Rx,Ix,Ox,Lx=["className","component","disableGutters","variant"],Dx=Ar("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return E({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&p({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),"dense"===n.variant&&{minHeight:48})}),(function(e){var t=e.theme;return"regular"===e.ownerState.variant&&t.mixins.toolbar})),Fx=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiToolbar"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=n.disableGutters,s=void 0!==a&&a,l=n.variant,u=void 0===l?"regular":l,c=k(n,Lx),d=E({},n,{component:o,disableGutters:s,variant:u}),f=function(e){var t=e.classes;return N({root:["root",!e.disableGutters&&"gutters",e.variant]},Ex,t)}(d);return(0,_.jsx)(Dx,E({as:o,className:M(f.root,r),ref:t,ownerState:d},c))})),Nx=ts((0,_.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Bx=ts((0,_.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),zx=ts((0,_.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),jx=ts((0,_.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Hx=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],Ux=r.forwardRef((function(e,t){var n=e.backIconButtonProps,r=e.count,i=e.getItemAriaLabel,o=e.nextIconButtonProps,a=e.onPageChange,s=e.page,l=e.rowsPerPage,u=e.showFirstButton,c=e.showLastButton,d=k(e,Hx),f=Jf();return(0,_.jsxs)("div",E({ref:t},d,{children:[u&&(0,_.jsx)($c,{onClick:function(e){a(e,0)},disabled:0===s,"aria-label":i("first",s),title:i("first",s),children:"rtl"===f.direction?kx||(kx=(0,_.jsx)(zx,{})):Px||(Px=(0,_.jsx)(jx,{}))}),(0,_.jsx)($c,E({onClick:function(e){a(e,s-1)},disabled:0===s,color:"inherit","aria-label":i("previous",s),title:i("previous",s)},n,{children:"rtl"===f.direction?Mx||(Mx=(0,_.jsx)(Bx,{})):Ax||(Ax=(0,_.jsx)(Nx,{}))})),(0,_.jsx)($c,E({onClick:function(e){a(e,s+1)},disabled:-1!==r&&s>=Math.ceil(r/l)-1,color:"inherit","aria-label":i("next",s),title:i("next",s)},o,{children:"rtl"===f.direction?Tx||(Tx=(0,_.jsx)(Nx,{})):Rx||(Rx=(0,_.jsx)(Bx,{}))})),c&&(0,_.jsx)($c,{onClick:function(e){a(e,Math.max(0,Math.ceil(r/l)-1))},disabled:s>=Math.ceil(r/l)-1,"aria-label":i("last",s),title:i("last",s),children:"rtl"===f.direction?Ix||(Ix=(0,_.jsx)(jx,{})):Ox||(Ox=(0,_.jsx)(zx,{}))})]}))}));function Vx(e){return Or("MuiTablePagination",e)}var Gx,Wx=Lr("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),$x=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],qx=Ar(Cx,{name:"MuiTablePagination",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t=e.theme;return{overflow:"auto",color:(t.vars||t).palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}}})),Xx=Ar(Fx,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:function(e,t){return E(p({},"& .".concat(Wx.actions),t.actions),t.toolbar)}})((function(e){var t,n=e.theme;return p(t={minHeight:52,paddingRight:2},"".concat(n.breakpoints.up("xs")," and (orientation: landscape)"),{minHeight:52}),p(t,n.breakpoints.up("sm"),{minHeight:52,paddingRight:2}),p(t,"& .".concat(Wx.actions),{flexShrink:0,marginLeft:20}),t})),Kx=Ar("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:function(e,t){return t.spacer}})({flex:"1 1 100%"}),Yx=Ar("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:function(e,t){return t.selectLabel}})((function(e){return E({},e.theme.typography.body2,{flexShrink:0})})),Zx=Ar(cy,{name:"MuiTablePagination",slot:"Select",overridesResolver:function(e,t){var n;return E((p(n={},"& .".concat(Wx.selectIcon),t.selectIcon),p(n,"& .".concat(Wx.select),t.select),n),t.input,t.selectRoot)}})(p({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8},"& .".concat(Wx.select),{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"})),Qx=Ar(El,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:function(e,t){return t.menuItem}})({}),Jx=Ar("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:function(e,t){return t.displayedRows}})((function(e){return E({},e.theme.typography.body2,{flexShrink:0})}));function ew(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"\u2013").concat(n," of ").concat(-1!==r?r:"more than ".concat(n))}function tw(e){return"Go to ".concat(e," page")}var nw=Ar(r.forwardRef((function(e,t){var n,i=Ia({props:e,name:"MuiTablePagination"}),o=i.ActionsComponent,a=void 0===o?Ux:o,s=i.backIconButtonProps,l=i.className,u=i.colSpan,c=i.component,d=void 0===c?Cx:c,f=i.count,p=i.getItemAriaLabel,h=void 0===p?tw:p,m=i.labelDisplayedRows,g=void 0===m?ew:m,v=i.labelRowsPerPage,y=void 0===v?"Rows per page:":v,b=i.nextIconButtonProps,x=i.onPageChange,w=i.onRowsPerPageChange,S=i.page,C=i.rowsPerPage,P=i.rowsPerPageOptions,A=void 0===P?[10,25,50,100]:P,T=i.SelectProps,R=void 0===T?{}:T,I=i.showFirstButton,O=void 0!==I&&I,L=i.showLastButton,D=void 0!==L&&L,F=k(i,$x),B=i,z=function(e){return N({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},Vx,e.classes)}(B),j=R.native?"option":Qx;d!==Cx&&"td"!==d||(n=u||1e3);var H=ks(R.id),U=ks(R.labelId);return(0,_.jsx)(qx,E({colSpan:n,ref:t,as:d,ownerState:B,className:M(z.root,l)},F,{children:(0,_.jsxs)(Xx,{className:z.toolbar,children:[(0,_.jsx)(Kx,{className:z.spacer}),A.length>1&&(0,_.jsx)(Yx,{className:z.selectLabel,id:U,children:y}),A.length>1&&(0,_.jsx)(Zx,E({variant:"standard"},!R.variant&&{input:Gx||(Gx=(0,_.jsx)(Ka,{}))},{value:C,onChange:w,id:H,labelId:U},R,{classes:E({},R.classes,{root:M(z.input,z.selectRoot,(R.classes||{}).root),select:M(z.select,(R.classes||{}).select),icon:M(z.selectIcon,(R.classes||{}).icon)}),children:A.map((function(e){return(0,r.createElement)(j,E({},!xa(j)&&{ownerState:B},{className:z.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)}))})),(0,_.jsx)(Jx,{className:z.displayedRows,children:g({from:0===f?0:S*C+1,to:-1===f?(S+1)*C:-1===C?f:Math.min(f,(S+1)*C),count:-1===f?-1:f,page:S})}),(0,_.jsx)(a,{className:z.actions,backIconButtonProps:s,count:f,nextIconButtonProps:b,onPageChange:x,page:S,rowsPerPage:C,showFirstButton:O,showLastButton:D,getItemAriaLabel:h})]})}))})))((function(e){var t,n=e.theme;return p(t={},"& .".concat(Wx.selectLabel),p({display:"none"},n.breakpoints.up("sm"),{display:"block"})),p(t,"& .".concat(Wx.input),p({display:"none"},n.breakpoints.up("sm"),{display:"inline-flex"})),t})),rw=r.forwardRef((function(e,t){var n,i=si(),o=ui(),a=oi(i,Yp),s=r.useMemo((function(){return Math.floor(a.rowCount/(a.pageSize||1))}),[a.rowCount,a.pageSize]),l=r.useCallback((function(e){var t=Number(e.target.value);i.current.setPageSize(t)}),[i]),u=r.useCallback((function(e,t){i.current.setPage(t)}),[i]);return(0,_.jsx)(nw,E({ref:t,component:"div",count:a.rowCount,page:a.page<=s?a.page:s,rowsPerPageOptions:null!=(n=o.rowsPerPageOptions)&&n.includes(a.pageSize)?o.rowsPerPageOptions:[],rowsPerPage:a.pageSize,onPageChange:u,onRowsPerPageChange:l},i.current.getLocaleText("MuiTablePagination"),e))})),iw=["className"],ow=Ar("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:function(e,t){return t.panelContent}})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function aw(e){var t=e.className,n=k(e,iw),r=function(e){return N({root:["panelContent"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(ow,E({className:M(t,r.root)},n))}var sw=["className"],lw=Ar("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:function(e,t){return t.panelFooter}})((function(e){return{padding:e.theme.spacing(.5),display:"flex",justifyContent:"space-between"}}));function uw(e){var t=e.className,n=k(e,sw),r=function(e){return N({root:["panelFooter"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(lw,E({className:M(t,r.root)},n))}var cw=["className"],dw=Ar("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:function(e,t){return t.panelWrapper}})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),fw=function(){return!0},pw=r.forwardRef((function(e,t){var n=e.className,r=k(e,cw),i=function(e){return N({root:["panelWrapper"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(Yg,{open:!0,disableEnforceFocus:!0,isEnabled:fw,children:(0,_.jsx)(dw,E({ref:t,tabIndex:-1,className:M(n,i.root)},r))})})),hw=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","linkOperators","columnsSort","deleteIconProps","linkOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],mw=["InputComponentProps"],gw=Ar("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:function(e,t){return t.filterForm}})((function(e){return{display:"flex",padding:e.theme.spacing(1)}})),vw=Ar(Og,{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:function(e,t){return t.filterFormDeleteIcon}})((function(e){var t=e.theme;return{flexShrink:0,justifyContent:"flex-end",marginRight:t.spacing(.5),marginBottom:t.spacing(.2)}})),yw=Ar(Og,{name:"MuiDataGrid",slot:"FilterFormLinkOperatorInput",overridesResolver:function(e,t){return t.filterFormLinkOperatorInput}})({minWidth:55,marginRight:5,justifyContent:"end"}),bw=Ar(Og,{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:function(e,t){return t.filterFormColumnInput}})({width:150}),xw=Ar(Og,{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:function(e,t){return t.filterFormOperatorInput}})({width:120}),ww=Ar(Og,{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:function(e,t){return t.filterFormValueInput}})({width:190}),_w=function(e){switch(e){case lh.And:return"filterPanelOperatorAnd";case lh.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `linkOperator` property in the `GridFilterPanel`.")}},Sw=function(e){return e.headerName||e.field},Cw=new Intl.Collator,Ew=r.forwardRef((function(e,t){var n,i,o,a,s,l,u,c=e.item,d=e.hasMultipleFilters,f=e.deleteFilter,p=e.applyFilterChanges,h=e.multiFilterOperator,m=e.showMultiFilterOperators,g=e.disableMultiFilterOperator,v=e.applyMultiFilterOperatorChanges,y=e.focusElementRef,b=e.linkOperators,x=void 0===b?[lh.And,lh.Or]:b,w=e.columnsSort,S=e.deleteIconProps,C=void 0===S?{}:S,P=e.linkOperatorInputProps,A=void 0===P?{}:P,T=e.operatorInputProps,I=void 0===T?{}:T,O=e.columnInputProps,L=void 0===O?{}:O,D=e.valueInputProps,F=void 0===D?{}:D,B=k(e,hw),z=si(),j=oi(z,ni),H=ks(),U=ks(),V=ks(),G=ks(),W=ui(),$=function(e){return N({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],linkOperatorInput:["filterFormLinkOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},Dr,e.classes)}({classes:W.classes}),q=r.useRef(null),X=r.useRef(null),K=d&&x.length>0,Y=(null==(n=W.componentsProps)?void 0:n.baseFormControl)||{},Z=null==(o=((null==(i=W.componentsProps)?void 0:i.baseSelect)||{}).native)||o,Q=Z?"option":El,J=F.InputComponentProps,ee=k(F,mw),te=r.useMemo((function(){switch(w){case"asc":return j.sort((function(e,t){return Cw.compare(Sw(e),Sw(t))}));case"desc":return j.sort((function(e,t){return-Cw.compare(Sw(e),Sw(t))}));default:return j}}),[j,w]),ne=c.columnField?z.current.getColumn(c.columnField):null,re=r.useMemo((function(){var e;return c.operatorValue&&ne?null==(e=ne.filterOperators)?void 0:e.find((function(e){return e.value===c.operatorValue})):null}),[c,ne]),ie=r.useCallback((function(e){var t=e.target.value,n=z.current.getColumn(t);if(n.field!==ne.field){var r=n.filterOperators.find((function(e){return e.value===c.operatorValue}))||n.filterOperators[0],i=!r.InputComponent||r.InputComponent!==(null==re?void 0:re.InputComponent);p(E({},c,{columnField:t,operatorValue:r.value,value:i?void 0:c.value}))}}),[z,p,c,ne,re]),oe=r.useCallback((function(e){var t=e.target.value,n=null==ne?void 0:ne.filterOperators.find((function(e){return e.value===t})),r=!(null!=n&&n.InputComponent)||(null==n?void 0:n.InputComponent)!==(null==re?void 0:re.InputComponent);p(E({},c,{operatorValue:t,value:r?void 0:c.value}))}),[p,c,ne,re]),ae=r.useCallback((function(e){var t=e.target.value===lh.And.toString()?lh.And:lh.Or;v(t)}),[v]);return r.useImperativeHandle(y,(function(){return{focus:function(){var e;null!=re&&re.InputComponent?null==q||null==(e=q.current)||e.focus():X.current.focus()}}}),[re]),(0,_.jsxs)(gw,E({ref:t,className:$.root},B,{children:[(0,_.jsx)(vw,E({variant:"standard",as:W.components.BaseFormControl},Y,C,{className:M($.deleteIcon,Y.className,C.className),children:(0,_.jsx)($c,{"aria-label":z.current.getLocaleText("filterPanelDeleteIconLabel"),title:z.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:function(){W.disableMultipleColumnsFiltering?void 0===c.value?f(c):p(E({},c,{value:void 0})):f(c)},size:"small",children:(0,_.jsx)(W.components.FilterPanelDeleteIcon,{fontSize:"small"})})})),(0,_.jsx)(yw,E({variant:"standard",as:W.components.BaseFormControl},Y,A,{sx:E({display:K?"flex":"none",visibility:m?"visible":"hidden"},Y.sx||{},A.sx||{}),className:M($.linkOperatorInput,Y.className,A.className),children:(0,_.jsx)(W.components.BaseSelect,E({inputProps:{"aria-label":z.current.getLocaleText("filterPanelLinkOperator")},value:h,onChange:ae,disabled:!!g||1===x.length,native:Z},null==(a=W.componentsProps)?void 0:a.baseSelect,{children:x.map((function(e){return(0,_.jsx)(Q,{value:e.toString(),children:z.current.getLocaleText(_w(e))},e.toString())}))}))})),(0,_.jsxs)(bw,E({variant:"standard",as:W.components.BaseFormControl},Y,L,{className:M($.columnInput,Y.className,L.className),children:[(0,_.jsx)(Pg,{htmlFor:H,id:U,children:z.current.getLocaleText("filterPanelColumns")}),(0,_.jsx)(W.components.BaseSelect,E({labelId:U,id:H,label:z.current.getLocaleText("filterPanelColumns"),value:c.columnField||"",onChange:ie,native:Z},null==(s=W.componentsProps)?void 0:s.baseSelect,{children:te.map((function(e){return(0,_.jsx)(Q,{value:e.field,children:Sw(e)},e.field)}))}))]})),(0,_.jsxs)(xw,E({variant:"standard",as:W.components.BaseFormControl},Y,I,{className:M($.operatorInput,Y.className,I.className),children:[(0,_.jsx)(Pg,{htmlFor:V,id:G,children:z.current.getLocaleText("filterPanelOperators")}),(0,_.jsx)(W.components.BaseSelect,E({labelId:G,label:z.current.getLocaleText("filterPanelOperators"),id:V,value:c.operatorValue,onChange:oe,native:Z,inputRef:X},null==(l=W.componentsProps)?void 0:l.baseSelect,{children:null==ne||null==(u=ne.filterOperators)?void 0:u.map((function(e){return(0,_.jsx)(Q,{value:e.value,children:e.label||z.current.getLocaleText("filterOperator".concat(R(e.value)))},e.value)}))}))]})),(0,_.jsx)(ww,E({variant:"standard",as:W.components.BaseFormControl},Y,ee,{className:M($.valueInput,Y.className,ee.className),children:null!=re&&re.InputComponent?(0,_.jsx)(re.InputComponent,E({apiRef:z,item:c,applyValue:p,focusElementRef:q},re.InputComponentProps,J)):null}))]}))})),kw=["linkOperators","columnsSort","filterFormProps","children"],Pw=r.forwardRef((function(e,t){var n,i=si(),o=ui(),a=oi(i,lo),s=oi(i,ni),l=r.useRef(null),u=e.linkOperators,c=void 0===u?[lh.And,lh.Or]:u,d=e.columnsSort,f=e.filterFormProps,p=k(e,kw),h=r.useCallback((function(e){i.current.upsertFilterItem(e)}),[i]),m=r.useCallback((function(e){i.current.setFilterLinkOperator(e)}),[i]),g=r.useCallback((function(){var e=s.find((function(e){var t;return null==(t=e.filterOperators)?void 0:t.length}));return e?{columnField:e.field,operatorValue:e.filterOperators[0].value,id:Math.round(1e5*Math.random())}:null}),[s]),v=r.useMemo((function(){if(a.items.length)return a.items;var e=g();return e?[e]:[]}),[a.items,g]),y=v.length>1,b=r.useCallback((function(e){var t=1===v.length;i.current.deleteFilterItem(e),t&&i.current.hideFilterPanel()}),[i,v.length]);return r.useEffect((function(){c.length>0&&a.linkOperator&&!c.includes(a.linkOperator)&&m(c[0])}),[c,m,a.linkOperator]),r.useEffect((function(){v.length>0&&l.current.focus()}),[v.length]),(0,_.jsxs)(pw,E({ref:t},p,{children:[(0,_.jsx)(aw,{children:v.map((function(e,t){return(0,_.jsx)(Ew,E({item:e,applyFilterChanges:h,deleteFilter:b,hasMultipleFilters:y,showMultiFilterOperators:t>0,multiFilterOperator:a.linkOperator,disableMultiFilterOperator:1!==t,applyMultiFilterOperatorChanges:m,focusElementRef:t===v.length-1?l:null,linkOperators:c,columnsSort:d},f),null==e.id?t:e.id)}))}),!o.disableMultipleColumnsFiltering&&(0,_.jsx)(uw,{children:(0,_.jsx)(o.components.BaseButton,E({onClick:function(){var e=g();e&&i.current.upsertFilterItems([].concat(z(v),[e]))},startIcon:(0,_.jsx)(gs,{})},null==(n=o.componentsProps)?void 0:n.baseButton,{children:i.current.getLocaleText("filterPanelAddFilter")}))})]}))})),Mw=["sx"];function Aw(e){var t,n=e.sx,r=function(e){var t,n,r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:Cn;return Object.keys(e).forEach((function(t){i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r}(k(e,Mw)),i=r.systemProps,o=r.otherProps;return t=Array.isArray(n)?[i].concat(z(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return wt(e)?E({},i,e):i}:E({},i,n),E({},o,{sx:t})}function Tw(e){return Or("MuiTypography",e)}Lr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var Rw=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Iw=Ar("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(R(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return E({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Ow={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Lw={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Dw=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiTypography"}),r=function(e){return Lw[e]||e}(n.color),i=Aw(E({},n,{color:r})),o=i.align,a=void 0===o?"inherit":o,s=i.className,l=i.component,u=i.gutterBottom,c=void 0!==u&&u,d=i.noWrap,f=void 0!==d&&d,p=i.paragraph,h=void 0!==p&&p,m=i.variant,g=void 0===m?"body1":m,v=i.variantMapping,y=void 0===v?Ow:v,b=k(i,Rw),x=E({},i,{align:a,color:r,className:s,component:l,gutterBottom:c,noWrap:f,paragraph:h,variant:g,variantMapping:y}),w=l||(h?"p":y[g]||Ow[g])||"span",S=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,i=e.paragraph,o=e.variant,a=e.classes;return N({root:["root",o,"inherit"!==e.align&&"align".concat(R(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},Tw,a)}(x);return(0,_.jsx)(Iw,E({as:w,ref:t,ownerState:x,className:M(S.root,s)},b))})),Fw=Dw;function Nw(e){return Or("MuiFormControlLabel",e)}var Bw=Lr("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),zw=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],jw=Ar("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[p({},"& .".concat(Bw.label),t.label),t.root,t["labelPlacement".concat(R(n.labelPlacement))]]}})((function(e){var t=e.theme,n=e.ownerState;return E(p({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(Bw.disabled),{cursor:"default"}),"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},p({},"& .".concat(Bw.label),p({},"&.".concat(Bw.disabled),{color:(t.vars||t).palette.text.disabled})))})),Hw=r.forwardRef((function(e,t){var n,i=Ia({props:e,name:"MuiFormControlLabel"}),o=i.className,a=i.componentsProps,s=void 0===a?{}:a,l=i.control,u=i.disabled,c=i.disableTypography,d=i.label,f=i.labelPlacement,p=void 0===f?"end":f,h=i.slotProps,m=void 0===h?{}:h,g=k(i,zw),v=Sa(),y=u;"undefined"===typeof y&&"undefined"!==typeof l.props.disabled&&(y=l.props.disabled),"undefined"===typeof y&&v&&(y=v.disabled);var b={disabled:y};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof l.props[e]&&"undefined"!==typeof i[e]&&(b[e]=i[e])}));var x=wa({props:i,muiFormControl:v,states:["error"]}),w=E({},i,{disabled:y,labelPlacement:p,error:x.error}),S=function(e){var t=e.classes,n=e.disabled,r=e.labelPlacement,i=e.error;return N({root:["root",n&&"disabled","labelPlacement".concat(R(r)),i&&"error"],label:["label",n&&"disabled"]},Nw,t)}(w),C=null!=(n=m.typography)?n:s.typography,P=d;return null==P||P.type===Fw||c||(P=(0,_.jsx)(Fw,E({component:"span"},C,{className:M(S.label,null==C?void 0:C.className),children:P}))),(0,_.jsxs)(jw,E({className:M(S.root,o),ownerState:w,ref:t},g,{children:[r.cloneElement(l,b),P]}))})),Uw=["className"],Vw=Ar("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:function(e,t){return t.panelHeader}})((function(e){return{padding:e.theme.spacing(1)}}));function Gw(e){var t=e.className,n=k(e,Uw),r=function(e){return N({root:["panelHeader"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(Vw,E({className:M(t,r.root)},n))}var Ww=["sort","searchPredicate","autoFocusSearchField"],$w=Ar("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:function(e,t){return t.columnsPanel}})((function(){return{padding:"8px 0px 8px 8px"}})),qw=Ar("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:function(e,t){return t.columnsPanelRow}})((function(e){var t=e.theme;return p({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px"},"& .".concat(yy.root),{marginRight:t.spacing(.5)})})),Xw=(Ar($c)({justifyContent:"flex-end"}),new Intl.Collator),Kw=function(e,t){return(e.headerName||e.field).toLowerCase().indexOf(t)>-1};var Yw=["children","className","classes"],Zw=Lr("MuiDataGrid",["panel","paper"]),Qw=Ar(Tc,{name:"MuiDataGrid",slot:"Panel",overridesResolver:function(e,t){return t.panel}})((function(e){return{zIndex:e.theme.zIndex.modal}})),Jw=Ar(jc,{name:"MuiDataGrid",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){return{backgroundColor:e.theme.palette.background.paper,minWidth:300,maxHeight:450,display:"flex"}})),e_=r.forwardRef((function(e,t){var n,i=e.children,o=e.className,a=k(e,Yw),s=si(),l=Zw,u=c(r.useState(!1),2),d=u[0],f=u[1],p=r.useCallback((function(){s.current.hidePreferences()}),[s]),h=r.useCallback((function(e){ef(e.key)&&s.current.hidePreferences()}),[s]),m=r.useMemo((function(){return[{name:"flip",enabled:!1},{name:"isPlaced",enabled:!0,phase:"main",fn:function(){f(!0)},effect:function(){return function(){f(!1)}}}]}),[]),g=null==(n=s.current.columnHeadersContainerElementRef)?void 0:n.current;return g?(0,_.jsx)(Qw,E({ref:t,placement:"bottom-start",className:M(o,l.panel),anchorEl:g,modifiers:m},a,{children:(0,_.jsx)(Vf,{mouseEvent:"onMouseUp",onClickAway:p,children:(0,_.jsx)(Jw,{className:l.paper,elevation:8,onKeyDown:h,children:d&&i})})})):null})),t_=["selected","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","cellFocus","cellTabIndex","editRowsState","isLastVisible","onClick","onDoubleClick","onMouseEnter","onMouseLeave"],n_=["changeReason"],r_=function(e){var t=e.width;if(!t)return null;var n={width:t};return(0,_.jsx)("div",{className:"MuiDataGrid-cell",style:n})},i_=r.forwardRef((function(e,t){var n,i=e.selected,o=e.rowId,a=e.row,s=e.index,l=e.style,u=e.position,d=e.rowHeight,f=e.className,p=e.visibleColumns,h=e.renderedColumns,m=e.containerWidth,g=e.firstColumnToRender,v=e.cellFocus,y=e.cellTabIndex,b=e.editRowsState,x=e.isLastVisible,w=void 0!==x&&x,S=e.onClick,C=e.onDoubleClick,P=e.onMouseEnter,A=e.onMouseLeave,T=k(e,t_),R=si(),I=r.useRef(null),O=ui(),D=Fh(R,O),F=oi(R,ti),B=oi(R,oo),j=oi(R,Ei),H=oi(R,hi),U=L(I,t),V=s+H+2,G=null!=(n=R.current.getRootDimensions())?n:{hasScrollX:!1,hasScrollY:!1},W=G.hasScrollX,$=G.hasScrollY,q=function(e){var t=e.editable,n=e.editing;return N({root:["row",e.selected&&"selected",t&&"row--editable",n&&"row--editing",e.isLastVisible&&"row--lastVisible","auto"===e.rowHeight&&"row--dynamicHeight"]},Dr,e.classes)}({selected:i,isLastVisible:w,classes:O.classes,editing:R.current.getRowMode(o)===uf.Edit,editable:O.editMode===sf.Row,rowHeight:d});r.useLayoutEffect((function(){"auto"===d&&I.current&&"undefined"===typeof ResizeObserver&&R.current.unstable_storeRowHeightMeasurement(o,I.current.clientHeight,u)}),[R,d,o,u]),r.useLayoutEffect((function(){if(D.range){var e=R.current.getRowIndexRelativeToVisibleRows(o);null!=e&&R.current.unstable_setLastMeasuredRowIndex(e)}var t=I.current;if(t&&!("auto"!==d)&&"undefined"!==typeof ResizeObserver){var n=new ResizeObserver((function(e){var t=c(e,1)[0],n=t.borderBoxSize&&t.borderBoxSize.length>0?t.borderBoxSize[0].blockSize:t.contentRect.height;R.current.unstable_storeRowHeightMeasurement(o,n,u)}));return n.observe(t),function(){return n.disconnect()}}}),[R,D.range,s,d,o,u]);var X=r.useCallback((function(e,t){return function(n){(1!==n.target.nodeType||n.currentTarget.contains(n.target))&&R.current.getRow(o)&&(R.current.publishEvent(e,R.current.getRowParams(o),n),t&&t(n))}}),[R,o]),K=r.useCallback((function(e){var t=xm(e.target,Fr.cell),n=null==t?void 0:t.getAttribute("data-field");if(n){if(n===oh.field)return;if(n===Bh)return;if("__reorder__"===n)return;if(R.current.getCellMode(o,n)===lf.Edit)return;if(R.current.getColumn(n).type===hp)return}X("rowClick",S)(e)}),[R,S,X,o]),Y=r.useCallback((function(e,t){var n,r=R.current.getCellParams(o,e.field),i=[],s=O.disableColumnReorder&&e.disableReorder||!O.rowReordering&&!!B.length&&j>1&&Object.keys(b).length>0;e.cellClassName&&i.push(M("function"===typeof e.cellClassName?e.cellClassName(r):e.cellClassName));var l,u=b[o]?b[o][e.field]:null,c=null;null==u&&e.renderCell&&(c=e.renderCell(E({},r,{api:R.current})),i.push(M(Fr["cell--withRenderer"],null==(l=O.classes)?void 0:l["cell--withRenderer"])));if(null!=u&&e.renderEditCell){var f,p=a;R.current.unstable_getRowWithUpdatedValues&&(p=R.current.unstable_getRowWithUpdatedValues(o,e.field));var h=E({},r,{row:p},k(u,n_),{api:R.current});c=e.renderEditCell(h),i.push(M(Fr["cell--editing"],null==(f=O.classes)?void 0:f["cell--editing"]))}O.getCellClassName&&i.push(O.getCellClassName(r));var m=null!==v&&v.id===o&&v.field===e.field,g=null!==y&&y.id===o&&y.field===e.field&&"view"===r.cellMode?0:-1;return(0,_.jsx)(O.components.Cell,E({value:r.value,field:e.field,width:t.width,rowId:o,height:d,showRightBorder:t.showRightBorder,formattedValue:r.formattedValue,align:e.align||"left",cellMode:r.cellMode,colIndex:t.indexRelativeToAllColumns,isEditable:r.isEditable,hasFocus:m,tabIndex:g,className:M(i),colSpan:t.colSpan,disableDragEvents:s},null==(n=O.componentsProps)?void 0:n.cell,{children:c}),e.field)}),[R,y,b,v,O,a,d,o,j,B.length]),Z=R.current.unstable_getRowInternalSizes(o),Q=d;if("auto"===Q&&Z){var J=0,ee=Object.entries(Z).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return/^base[A-Z]/.test(r)?(J+=1,i>e?i:e):e}),0);ee>0&&J>1&&(Q=ee)}var te=E({},l,{maxHeight:"auto"===d?"none":d,minHeight:Q});null!=Z&&Z.spacingTop&&(te["border"===O.rowSpacingType?"borderTopWidth":"marginTop"]=Z.spacingTop);if(null!=Z&&Z.spacingBottom){var ne="border"===O.rowSpacingType?"borderBottomWidth":"marginBottom",re=te[ne];"number"!==typeof re&&(re=parseInt(re||"0",10)),re+=Z.spacingBottom,te[ne]=re}var ie=R.current.unstable_applyPipeProcessors("rowClassName",[],o);if("function"===typeof O.getRowClassName){var oe,ae=s-((null==(oe=D.range)?void 0:oe.firstRowIndex)||0),se=E({},R.current.getRowParams(o),{isFirstVisible:0===ae,isLastVisible:ae===D.rows.length-1,indexRelativeToCurrentPage:ae});ie.push(O.getRowClassName(se))}for(var le=Ro(1e4,20,80),ue=[],ce=0;ce<h.length;ce+=1){var de=h[ce],fe=g+ce,pe=fe===p.length-1,he=pe?!(pe&&W&&!$)&&O.disableExtendRowFullWidth:O.showCellRightBorder,me=R.current.unstable_getCellColSpanInfo(o,fe);if(me&&!me.spannedByColSpan)if(a){var ge=me.cellProps,ve=ge.colSpan,ye={width:ge.width,colSpan:ve,showRightBorder:he,indexRelativeToAllColumns:fe};ue.push(Y(de,ye))}else{var be=me.cellProps.width,xe=Math.round(le());ue.push((0,_.jsx)(O.components.SkeletonCell,{width:be,contentWidth:xe,field:de.field,align:de.align},de.field))}}var we=m-F,_e=a?{onClick:K,onDoubleClick:X("rowDoubleClick",C),onMouseEnter:X("rowMouseEnter",P),onMouseLeave:X("rowMouseLeave",A)}:null;return(0,_.jsxs)("div",E({ref:U,"data-id":o,"data-rowindex":s,role:"row",className:M.apply(void 0,z(ie).concat([q.root,f])),"aria-rowindex":V,"aria-selected":i,style:te},_e,T,{children:[ue,we>0&&(0,_.jsx)(r_,{width:we})]}))})),o_=["sortingOrder"],a_=r.memo((function(e){var t=e.sortingOrder,n=k(e,o_),r=ui(),i="asc"===c(t,1)[0]?r.components.ColumnSortedAscendingIcon:r.components.ColumnSortedDescendingIcon;return i?(0,_.jsx)(i,E({},n)):null})),s_=["error","hasError","errorInfo"],l_=r.forwardRef((function(e,t){var n=e.error,r=k(e,s_),i=si(),o=i.current.getLocaleText("errorOverlayDefaultLabel"),a=oi(i,fi);return(0,_.jsx)(hx,E({ref:t,sx:{width:"100%",minHeight:2*a}},r,{children:(null==n?void 0:n.message)||o}))})),u_=r.forwardRef((function(e,t){var n=si().current.getLocaleText("noResultsOverlayLabel");return(0,_.jsx)(hx,E({ref:t},e,{children:n}))})),c_=E({},{BooleanCellTrueIcon:ws,BooleanCellFalseIcon:ms,ColumnMenuIcon:hs,OpenFilterButtonIcon:as,FilterPanelDeleteIcon:ms,ColumnFilteredIcon:ss,ColumnSelectorIcon:us,ColumnUnsortedIcon:a_,ColumnSortedAscendingIcon:ns,ColumnSortedDescendingIcon:rs,ColumnResizeIcon:cs,DensityCompactIcon:ds,DensityStandardIcon:fs,DensityComfortableIcon:ps,ExportIcon:xs,MoreActionsIcon:_s,TreeDataCollapseIcon:os,TreeDataExpandIcon:is,GroupingCriteriaCollapseIcon:os,GroupingCriteriaExpandIcon:is,DetailPanelExpandIcon:gs,DetailPanelCollapseIcon:vs,RowReorderIcon:bs,QuickFilterIcon:ls,QuickFilterClearIcon:ms},{BaseCheckbox:Ym,BaseTextField:gy,BaseFormControl:Og,BaseSelect:cy,BaseSwitch:Ey,BaseButton:Dy,BaseTooltip:qy,BasePopper:Tc,Cell:function(e){var t=e.align,n=e.children,i=e.colIndex,o=e.cellMode,a=e.field,s=e.formattedValue,l=e.hasFocus,u=e.height,c=e.isEditable,d=e.rowId,f=e.tabIndex,p=e.value,h=e.width,m=e.className,g=e.showRightBorder,v=e.colSpan,y=e.disableDragEvents,b=e.onClick,x=e.onDoubleClick,w=e.onMouseDown,S=e.onMouseUp,C=e.onKeyDown,P=e.onDragEnter,A=e.onDragOver,T=k(e,Xy),I=null==s?p:s,O=r.useRef(null),L=r.useRef(null),D=si(),F=function(e){var t=e.align,n=e.showRightBorder,r=e.isEditable,i=e.classes;return N({root:["cell","cell--text".concat(R(t)),r&&"cell--editable",n&&"withBorder"],content:["cellContent"]},Dr,i)}({align:t,showRightBorder:g,isEditable:c,classes:ui().classes}),B=r.useCallback((function(e){return function(t){var n=D.current.getCellParams(d,a||"");D.current.publishEvent(e,n,t),S&&S(t)}}),[D,a,S,d]),z=r.useCallback((function(e){return function(t){var n=D.current.getCellParams(d,a||"");D.current.publishEvent(e,n,t),w&&w(t)}}),[D,a,w,d]),j=r.useCallback((function(e,t){return function(n){if(n.currentTarget.contains(n.target)&&D.current.getRow(d)){var r=D.current.getCellParams(d,a||"");D.current.publishEvent(e,r,n),t&&t(n)}}}),[D,a,d]),H={minWidth:h,maxWidth:h,minHeight:u,maxHeight:"auto"===u?"none":u};r.useEffect((function(){if(l&&o!==lf.Edit){var e=Mf(D.current.rootElementRef.current);if(O.current&&!O.current.contains(e.activeElement)){var t=O.current.querySelector('[tabindex="0"]'),n=L.current||t||O.current;if(void 0===Wy&&document.createElement("div").focus({get preventScroll(){return Wy=!0,!1}}),Wy)n.focus({preventScroll:!0});else{var r=D.current.getScrollPosition();n.focus(),D.current.scroll(r)}}}}),[l,o,D]);var U=T.onFocus,V="actions"===D.current.getColumn(a).type,G=y?null:{onDragEnter:j("cellDragEnter",P),onDragOver:j("cellDragOver",A)};return(0,_.jsx)("div",E({ref:O,className:M(m,F.root),role:"cell","data-field":a,"data-colindex":i,"aria-colindex":i+1,"aria-colspan":v,style:H,tabIndex:"view"!==o&&c||V?-1:f,onClick:j("cellClick",b),onDoubleClick:j("cellDoubleClick",x),onMouseDown:z("cellMouseDown"),onMouseUp:B("cellMouseUp"),onKeyDown:j("cellKeyDown",C)},G,T,{onFocus:U,children:null==n?(0,_.jsx)("div",{className:F.content,children:null==I?void 0:I.toString()}):r.isValidElement(n)&&V?r.cloneElement(n,{focusElementRef:L}):n}))},SkeletonCell:function(e){var t=e.align,n=e.width,r=e.contentWidth,i=k(e,fb),o=function(e){var t=e.align,n=e.classes;return N({root:["cell","cellSkeleton","cell--text".concat(R(t))]},Dr,n)}({classes:ui().classes,align:t});return(0,_.jsx)("div",E({className:o.root,style:{width:n}},i,{children:(0,_.jsx)(db,{width:"".concat(r,"%")})}))},ColumnHeaderFilterIconButton:function(e){var t,n=e.counter,i=e.field,o=e.onClick,a=si(),s=ui(),l=function(e){return N({icon:["filterIcon"]},Dr,e.classes)}(E({},e,{classes:s.classes})),u=r.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=Jh(a.current.state),n=t.open,r=t.openedPanelValue;n&&r===xp.filters?a.current.hideFilterPanel():a.current.showFilterPanel(),o&&o(a.current.getColumnHeaderParams(i),e)}),[a,i,o]);if(!n)return null;var c=(0,_.jsx)($c,{onClick:u,color:"default","aria-label":a.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,children:(0,_.jsx)(s.components.ColumnFilteredIcon,{className:l.icon,fontSize:"small"})});return(0,_.jsx)(s.components.BaseTooltip,E({title:a.current.getLocaleText("columnHeaderFiltersTooltipActive")(n),enterDelay:1e3},null==(t=s.componentsProps)?void 0:t.baseTooltip,{children:(0,_.jsxs)(Mb,{children:[n>1&&(0,_.jsx)(Eb,{badgeContent:n,color:"default",children:c}),1===n&&c]})}))},ColumnMenu:Db,ErrorOverlay:l_,Footer:Wb,Header:$b,Toolbar:null,PreferencesPanel:qb,LoadingOverlay:mx,NoResultsOverlay:u_,NoRowsOverlay:gx,Pagination:rw,FilterPanel:Pw,ColumnsPanel:function(e){var t,n,i,o=si(),a=r.useRef(null),s=oi(o,Zr),l=oi(o,Qr),u=ui(),d=c(r.useState(""),2),f=d[0],p=d[1],h=function(e){return N({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},Dr,e.classes)}({classes:u.classes}),m=e.sort,g=e.searchPredicate,v=void 0===g?Kw:g,y=e.autoFocusSearchField,b=void 0===y||y,x=k(e,Ww),w=r.useMemo((function(){switch(m){case"asc":return z(s).sort((function(e,t){return Xw.compare(e.headerName||e.field,t.headerName||t.field)}));case"desc":return z(s).sort((function(e,t){return-Xw.compare(e.headerName||e.field,t.headerName||t.field)}));default:return s}}),[s,m]),S=function(e){var t=e.target.name;o.current.setColumnVisibility(t,!1===l[t])},C=r.useCallback((function(e){return o.current.unstable_caches.columns.isUsingColumnVisibilityModel?e?o.current.setColumnVisibilityModel({}):o.current.setColumnVisibilityModel(Object.fromEntries(s.filter((function(e){return!1!==e.hideable})).map((function(e){return[e.field,!1]})))):o.current.updateColumns(s.map((function(t){return!1!==t.hideable?{field:t.field,hide:!e}:t})))}),[o,s]),P=r.useCallback((function(e){p(e.target.value)}),[]),M=r.useMemo((function(){if(!f)return w;var e=f.toLowerCase();return w.filter((function(t){return v(t,e)}))}),[w,f,v]),A=r.useRef(null);r.useEffect((function(){b?a.current.focus():A.current&&"function"===typeof A.current.focus&&A.current.focus()}),[b]);var T=!1,R=function(e){return!1===T&&!1!==e.hideable&&(T=!0,!0)};return(0,_.jsxs)(pw,E({},x,{children:[(0,_.jsx)(Gw,{children:(0,_.jsx)(u.components.BaseTextField,E({label:o.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:o.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:a,value:f,onChange:P,variant:"standard",fullWidth:!0},null==(t=u.componentsProps)?void 0:t.baseTextField))}),(0,_.jsx)(aw,{children:(0,_.jsx)($w,{className:h.root,children:M.map((function(e){var t;return(0,_.jsxs)(qw,{className:h.columnsPanelRow,children:[(0,_.jsx)(Hw,{control:(0,_.jsx)(u.components.BaseSwitch,E({disabled:!1===e.hideable,checked:!1!==l[e.field],onClick:S,name:e.field,size:"small",inputRef:R(e)?A:void 0},null==(t=u.componentsProps)?void 0:t.baseSwitch)),label:e.headerName||e.field}),!u.disableColumnReorder&&false]},e.field)}))})}),(0,_.jsxs)(uw,{children:[(0,_.jsx)(u.components.BaseButton,E({onClick:function(){return C(!1)}},null==(n=u.componentsProps)?void 0:n.baseButton,{children:o.current.getLocaleText("columnsPanelHideAllButton")})),(0,_.jsx)(u.components.BaseButton,E({onClick:function(){return C(!0)}},null==(i=u.componentsProps)?void 0:i.baseButton,{children:o.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))},Panel:e_,Row:i_}),d_={apiRef:void 0,disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},f_={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,density:kp.Standard,disableExtendRowFullWidth:!1,disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableMultipleColumnsFiltering:!1,disableMultipleSelection:!1,disableMultipleColumnsSorting:!1,disableSelectionOnClick:!1,disableVirtualization:!1,disableIgnoreModificationsIfProcessingProps:!1,editMode:sf.Cell,filterMode:wh,headerHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:wh,rowHeight:52,rowsPerPageOptions:[25,50,100],rowSpacingType:"margin",showCellRightBorder:!1,showColumnRightBorder:!1,sortingOrder:["asc","desc",null],sortingMode:wh,throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1},p_=["className"],h_=Ar("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:function(e,t){return t.virtualScroller}})({overflow:"auto",position:"relative","@media print":{overflow:"hidden"}}),m_=r.forwardRef((function(e,t){var n=e.className,r=k(e,p_),i=function(e){return N({root:["virtualScroller"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(h_,E({ref:t,className:M(i.root,n)},r))})),g_=["className","style"],v_=Ar("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:function(e,t){return t.virtualScrollerContent}})({}),y_=r.forwardRef((function(e,t){var n=e.className,r=e.style,i=k(e,g_),o=ui(),a=function(e){var t=e.classes;return N({root:["virtualScrollerContent",e.overflowedContent&&"virtualScrollerContent--overflowed"]},Dr,t)}({classes:o.classes,overflowedContent:!o.autoHeight&&"auto"===(null==r?void 0:r.minHeight)});return(0,_.jsx)(v_,E({ref:t,className:M(a.root,n),style:r},i))})),b_=["className"],x_=Ar("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:function(e,t){return t.virtualScrollerRenderZone}})({position:"absolute",display:"flex",flexDirection:"column"}),w_=r.forwardRef((function(e,t){var n=e.className,r=k(e,b_),i=function(e){return N({root:["virtualScrollerRenderZone"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(x_,E({ref:t,className:M(i.root,n)},r))})),__=["style"];function S_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(t.length<=0)return-1;if(n>=r)return n;var i=n+Math.floor((r-n)/2),o=t[i];return e<=o?S_(e,t,n,i):S_(e,t,i+1,r)}var C_=function(e){var t=e.firstIndex,n=e.lastIndex,r=e.buffer,i=e.minFirstIndex,o=e.maxLastIndex;return[Ao(t-r,i,o),Ao(n+r,i,o)]},E_=function(e){var t,n,i=si(),o=ui(),a=oi(i,Jr),s=e.ref,l=e.disableVirtualization,u=e.onRenderZonePositioning,d=e.renderZoneMinColumnIndex,f=void 0===d?0:d,p=e.renderZoneMaxColumnIndex,h=void 0===p?a.length:p,m=e.getRowProps,g=oi(i,ei),v=oi(i,ti),y=oi(i,fi),b=oi(i,Hp),x=oi(i,Gp),w=oi(i,xh),S=oi(i,tm),C=oi(i,Kp),P=Fh(i,o),M=r.useRef(null),A=r.useRef(null),T=L(s,A),R=c(r.useState(null),2),I=R[0],O=R[1],D=r.useRef(I),N=r.useRef({top:0,left:0}),B=c(r.useState({width:null,height:null}),2),z=B[0],j=B[1],H=r.useRef(v),U=r.useCallback((function(e){var t,n,r=i.current.unstable_getLastMeasuredRowIndex(),o=r===1/0;null!=(t=P.range)&&t.lastRowIndex&&!o&&(o=r>=P.range.lastRowIndex);var a=Ao(r-((null==(n=P.range)?void 0:n.firstRowIndex)||0),0,w.positions.length);return o||w.positions[a]>=e?S_(e,w.positions):function(e,t,n){for(var r=1;n<t.length&&t[n]<e;)n+=r,r*=2;return S_(e,t,Math.floor(n/2),Math.min(n,t.length))}(e,w.positions,a)}),[i,null==(t=P.range)?void 0:t.firstRowIndex,null==(n=P.range)?void 0:n.lastRowIndex,w.positions]),V=r.useCallback((function(){if(l)return{firstRowIndex:0,lastRowIndex:P.rows.length,firstColumnIndex:0,lastColumnIndex:a.length};for(var e=N.current,t=e.top,n=e.left,r=Math.min(U(t),w.positions.length-1),s=o.autoHeight?r+P.rows.length:U(t+z.height),u=!1,d=0,f=g.length,p=c(C_({firstIndex:r,lastIndex:s,minFirstIndex:0,maxLastIndex:P.rows.length,buffer:o.rowBuffer}),2),h=p[0],m=p[1],v=h;v<m&&!u;v+=1){var y=P.rows[v];u=i.current.unstable_rowHasAutoHeight(y.id)}return u||(d=S_(n,g),f=S_(n+z.width,g)),{firstRowIndex:r,lastRowIndex:s,firstColumnIndex:d,lastColumnIndex:f}}),[l,U,w.positions.length,o.autoHeight,o.rowBuffer,P.rows,g,a.length,i,z]);F((function(){l?M.current.style.transform="translate3d(0px, 0px, 0px)":(A.current.scrollLeft=0,A.current.scrollTop=0)}),[l]),F((function(){j({width:A.current.clientWidth,height:A.current.clientHeight})}),[w.currentPageTotalHeight]);var G=r.useCallback((function(e){j({width:e.width,height:e.height})}),[]);Wo(i,"resize",G);var W=r.useCallback((function(e){var t=c(C_({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:P.rows.length,buffer:o.rowBuffer}),2),n=t[0],r=t[1],a=Cp({firstColumnToRender:c(C_({firstIndex:e.firstColumnIndex,lastIndex:e.lastColumnIndex,minFirstIndex:f,maxLastIndex:h,buffer:o.columnBuffer}),1)[0],apiRef:i,firstRowToRender:n,lastRowToRender:r,visibleRows:P.rows}),s=xh(i.current.state).positions[n],l=ei(i)[a];M.current.style.transform="translate3d(".concat(l,"px, ").concat(s,"px, 0px)"),"function"===typeof u&&u({top:s,left:l})}),[i,P.rows,u,f,h,o.columnBuffer,o.rowBuffer]);r.useLayoutEffect((function(){I&&W(I)}),[I,W]);var $=r.useCallback((function(e){O(e);var t=c(C_({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:P.rows.length,buffer:o.rowBuffer}),2),n=t[0],r=t[1];i.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:n,lastRowToRender:r}),D.current=e}),[i,O,D,P.rows.length,o.rowBuffer]);F((function(){if(null!=z.width){var e=V();$(e);var t=N.current,n={top:t.top,left:t.left,renderContext:e};i.current.publishEvent("rowsScroll",n)}}),[i,V,z.width,$]);var q=function(e){var t=e.currentTarget,n=t.scrollTop,r=t.scrollLeft;if(N.current.top=n,N.current.left=r,!(r<0||n<0)&&D.current){var a=l?D.current:V(),s=Math.abs(a.firstRowIndex-D.current.firstRowIndex),u=Math.abs(a.lastRowIndex-D.current.lastRowIndex),c=Math.abs(a.firstColumnIndex-D.current.firstColumnIndex),d=Math.abs(a.lastColumnIndex-D.current.lastColumnIndex),f=s>=o.rowThreshold||u>=o.rowThreshold||c>=o.columnThreshold||d>=o.columnThreshold||H.current!==v;i.current.publishEvent("rowsScroll",{top:n,left:r,renderContext:f?a:D.current},e),f&&(fa.flushSync((function(){$(a)})),H.current=v)}},X=function(e){i.current.publishEvent("virtualScrollerWheel",{},e)},K=function(e){i.current.publishEvent("virtualScrollerTouchMove",{},e)},Y=z.width&&v>z.width,Z=r.useMemo((function(){var e=Math.max(w.currentPageTotalHeight,1),t=!1;null!=A&&A.current&&e<=(null==A?void 0:A.current.clientHeight)&&(t=!0);var n={width:Y?v:"auto",height:e,minHeight:t?"100%":"auto"};return o.autoHeight&&0===P.rows.length&&(n.height=2*y),n}),[A,v,w.currentPageTotalHeight,P.rows.length,Y,o.autoHeight,y]);r.useEffect((function(){i.current.publishEvent("virtualScrollerContentSizeChange")}),[i,Z]),o.autoHeight&&0===P.rows.length&&(Z.height=2*y);var Q={};Y||(Q.overflowX="hidden"),o.autoHeight&&(Q.overflowY="hidden");var J=r.useCallback((function(){return D.current}),[]);return i.current.unstable_getRenderContext=J,{renderContext:I,updateRenderZonePosition:W,getRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{renderContext:I},t=e.renderContext,n=e.minFirstColumn,r=void 0===n?f:n,s=e.maxLastColumn,u=void 0===s?h:s,d=e.availableSpace,p=void 0===d?z.width:d,g=e.rowIndexOffset,v=void 0===g?0:g,y=e.position,w=void 0===y?"center":y;if(!t||null==p)return null;var k=l?0:o.rowBuffer,M=l?0:o.columnBuffer,A=C_({firstIndex:t.firstRowIndex,lastIndex:t.lastRowIndex,minFirstIndex:0,maxLastIndex:P.rows.length,buffer:k}),T=c(A,2),R=T[0],O=T[1],L=[];if(e.rows)e.rows.forEach((function(e){L.push(e),i.current.unstable_calculateColSpan({rowId:e.id,minFirstColumn:r,maxLastColumn:u,columns:a})}));else{if(!P.range)return null;for(var D=R;D<O;D+=1){var F=P.rows[D];L.push(F),i.current.unstable_calculateColSpan({rowId:F.id,minFirstColumn:r,maxLastColumn:u,columns:a})}}for(var N=C_({firstIndex:t.firstColumnIndex,lastIndex:t.lastColumnIndex,minFirstIndex:r,maxLastIndex:u,buffer:M}),B=c(N,2),j=B[0],H=B[1],U=Cp({firstColumnToRender:j,apiRef:i,firstRowToRender:R,lastRowToRender:O,visibleRows:P.rows}),V=a.slice(U,H),G=[],W=0;W<L.length;W+=1){var $,q,X=L[W],K=X.id,Y=X.model,Z=R+W===P.rows.length-1,Q=i.current.unstable_rowHasAutoHeight(K)?"auto":i.current.unstable_getRowHeight(K),J=void 0;J=null!=C[K]&&i.current.isRowSelectable(K),G.push((0,_.jsx)(o.components.Row,E({row:Y,rowId:K,rowHeight:Q,cellFocus:b,cellTabIndex:x,editRowsState:S,renderedColumns:V,visibleColumns:a,firstColumnToRender:U,lastColumnToRender:H,selected:J,index:v+((null==P||null==($=P.range)?void 0:$.firstRowIndex)||0)+R+W,containerWidth:p,isLastVisible:Z,position:w},"function"===typeof m?m(K,Y):{},null==(q=o.componentsProps)?void 0:q.row),K))}return G},getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,r=k(e,__);return E({ref:T,onScroll:q,onWheel:X,onTouchMove:K,style:E({},n,Q)},r)},getContentProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t;return{style:E({},n,Z)}},getRenderZoneProps:function(){return{ref:M}}}},k_=["className","disableVirtualization"],P_=r.forwardRef((function(e,t){var n=e.className,r=e.disableVirtualization,i=k(e,k_),o=E_({ref:t,disableVirtualization:r}),a=o.getRootProps,s=o.getContentProps,l=o.getRenderZoneProps,u=o.getRows;return(0,_.jsx)(m_,E({className:n},a(i),{children:(0,_.jsx)(y_,E({},s(),{children:(0,_.jsx)(w_,E({},l(),{children:u()}))}))}))}));function M_(e){var t=e.direction,n=e.index,r=e.sortingOrder,i=si(),o=ui(),a=function(e){return N({icon:["sortIcon"]},Dr,e.classes)}(E({},e,{classes:o.classes})),s=function(e,t,n,r){var i,o={};return"asc"===t?i=e.ColumnSortedAscendingIcon:"desc"===t?i=e.ColumnSortedDescendingIcon:(i=e.ColumnUnsortedIcon,o.sortingOrder=r),i?(0,_.jsx)(i,E({fontSize:"small",className:n},o)):null}(o.components,t,a.icon,r);if(!s)return null;var l=(0,_.jsx)($c,{tabIndex:-1,"aria-label":i.current.getLocaleText("columnHeaderSortIconLabel"),title:i.current.getLocaleText("columnHeaderSortIconLabel"),size:"small",children:s});return(0,_.jsxs)(Mb,{children:[null!=n&&(0,_.jsx)(Eb,{badgeContent:n,color:"default",children:l}),null==n&&l]})}var A_=r.memo(M_),T_=r.memo((function(e){var t=e.column,n=e.open,i=e.columnMenuId,o=e.columnMenuButtonId,a=e.iconButtonRef,s=si(),l=ui(),u=function(e){var t=e.classes;return N({root:["menuIcon",e.open&&"menuOpen"],button:["menuIconButton"]},Dr,t)}(E({},e,{classes:l.classes})),c=r.useCallback((function(e){e.preventDefault(),e.stopPropagation(),s.current.toggleColumnMenu(t.field)}),[s,t.field]);return(0,_.jsx)("div",{className:u.root,children:(0,_.jsx)($c,{ref:a,tabIndex:-1,className:u.button,"aria-label":s.current.getLocaleText("columnMenuLabel"),title:s.current.getLocaleText("columnMenuLabel"),size:"small",onClick:c,"aria-expanded":n?"true":void 0,"aria-haspopup":"true","aria-controls":i,id:o,children:(0,_.jsx)(l.components.ColumnMenuIcon,{fontSize:"small"})})})}));function R_(e){var t=e.columnMenuId,n=e.columnMenuButtonId,i=e.ContentComponent,o=e.contentComponentProps,a=e.field,s=e.open,l=e.target,u=e.onExited,c=si(),d=c.current.getColumn(a),f=r.useCallback((function(e){e.stopPropagation(),c.current.hideColumnMenu()}),[c]);return l?(0,_.jsx)(dp,{placement:"bottom-".concat("right"===d.align?"start":"end"),open:s,target:l,onClickAway:f,onExited:u,children:(0,_.jsx)(i,E({currentColumn:d,hideMenu:f,open:s,id:t,labelledby:n},o))}):null}var I_=["className"],O_=Ar("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:function(e,t){return t.columnHeaderTitle}})((function(e){return{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:e.theme.typography.fontWeightMedium}})),L_=r.forwardRef((function(e,t){var n=e.className,r=k(e,I_),i=function(e){return N({root:["columnHeaderTitle"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(O_,E({ref:t,className:M(i.root,n)},r))}));function D_(e){var t,n=e.label,i=e.description,o=e.columnWidth,a=ui(),s=r.useRef(null),l=c(r.useState(""),2),u=l[0],d=l[1];return r.useEffect((function(){if(!i&&s&&s.current){var e=(t=s.current).scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth;d(e?n:"")}var t}),[s,o,i,n]),(0,_.jsx)(a.components.BaseTooltip,E({title:i||u},null==(t=a.componentsProps)?void 0:t.baseTooltip,{children:(0,_.jsx)(L_,{ref:s,children:n})}))}var F_,N_=["resizable","resizing","height","side"];!function(e){e.Left="left",e.Right="right"}(F_||(F_={}));function B_(e){var t=e.height,n=e.side,i=void 0===n?F_.Right:n,o=k(e,N_),a=ui(),s=function(e){var t=e.resizable,n=e.resizing,r=e.classes,i=e.side;return N({root:["columnSeparator",t&&"columnSeparator--resizable",n&&"columnSeparator--resizing",i&&"columnSeparator--side".concat(R(i))],icon:["iconSeparator"]},Dr,r)}(E({},e,{side:i,classes:a.classes})),l=r.useCallback((function(e){e.preventDefault(),e.stopPropagation()}),[]);return(0,_.jsx)("div",E({className:s.root,style:{minHeight:t,opacity:a.showColumnRightBorder?0:1}},o,{onClick:l,children:(0,_.jsx)(a.components.ColumnResizeIcon,{className:s.icon})}))}var z_=r.memo(B_),j_=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps","disableHeaderSeparator"],H_=r.forwardRef((function(e,t){var n=e.classes,i=e.columnMenuOpen,o=e.colIndex,a=e.height,s=e.isResizing,l=e.sortDirection,u=e.hasFocus,d=e.tabIndex,f=e.separatorSide,p=e.isDraggable,h=e.headerComponent,m=e.description,g=e.width,v=e.columnMenuIconButton,y=void 0===v?null:v,b=e.columnMenu,x=void 0===b?null:b,w=e.columnTitleIconButtons,S=void 0===w?null:w,C=e.headerClassName,P=e.label,A=e.resizable,T=e.draggableContainerProps,R=e.columnHeaderSeparatorProps,I=e.disableHeaderSeparator,O=k(e,j_),D=si(),F=ui(),N=r.useRef(null),B=c(r.useState(i),2),z=B[0],j=B[1],H=L(N,t),U="none";return null!=l&&(U="asc"===l?"ascending":"descending"),r.useEffect((function(){z||j(i)}),[z,i]),r.useLayoutEffect((function(){var e=D.current.state.columnMenu;if(u&&!e.open){var t=N.current.querySelector('[tabindex="0"]')||N.current;null==t||t.focus(),D.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[D,u]),(0,_.jsxs)("div",E({ref:H,className:M(n.root,C),style:{height:a,width:g,minWidth:g,maxWidth:g},role:"columnheader",tabIndex:d,"aria-colindex":o+1,"aria-sort":U,"aria-label":null==h?P:void 0},O,{children:[(0,_.jsxs)("div",E({className:n.draggableContainer,draggable:p},T,{children:[(0,_.jsxs)("div",{className:n.titleContainer,children:[(0,_.jsx)("div",{className:n.titleContainerContent,children:void 0!==h?h:(0,_.jsx)(D_,{label:P,description:m,columnWidth:g})}),S]}),y]})),!I&&(0,_.jsx)(z_,E({resizable:!F.disableColumnResize&&!!A,resizing:s,height:a,side:f},R)),x]}))}));function U_(e){var t,n,i,o,a,s,l=e.column,u=e.columnMenuOpen,d=e.colIndex,f=e.headerHeight,p=e.isResizing,h=e.isLastColumn,m=e.sortDirection,g=e.sortIndex,v=e.filterItemsCounter,y=e.hasFocus,b=e.tabIndex,x=e.extendRowFullWidth,w=e.disableReorder,S=e.separatorSide,C=si(),k=ui(),P=r.useRef(null),M=ks(),A=ks(),T=r.useRef(null),R=c(r.useState(u),2),I=R[0],O=R[1],L=null!=(t=C.current.getRootDimensions())?t:{hasScrollX:!1,hasScrollY:!1},D=L.hasScrollX,F=L.hasScrollY,B=r.useMemo((function(){return!k.disableColumnReorder&&!w&&!l.disableReorder}),[k.disableColumnReorder,w,l.disableReorder]);l.renderHeader&&(s=l.renderHeader(C.current.getColumnHeaderParams(l.field)));var z=h?!(h&&D&&!F)&&!x:k.showColumnRightBorder,j=function(e){var t=e.column,n=e.classes,r=e.isDragging,i=e.sortDirection,o=e.showRightBorder,a=e.filterItemsCounter,s=null!=i,l=null!=a&&a>0,u="number"===t.type;return N({root:["columnHeader","left"===t.headerAlign&&"columnHeader--alignLeft","center"===t.headerAlign&&"columnHeader--alignCenter","right"===t.headerAlign&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",r&&"columnHeader--moving",s&&"columnHeader--sorted",l&&"columnHeader--filtered",u&&"columnHeader--numeric",o&&"withBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]},Dr,n)}(E({},e,{classes:k.classes,showRightBorder:z})),H=r.useCallback((function(e){return function(t){t.currentTarget.contains(t.target)&&C.current.publishEvent(e,C.current.getColumnHeaderParams(l.field),t)}}),[C,l.field]),U=r.useMemo((function(){return{onClick:H("columnHeaderClick"),onDoubleClick:H("columnHeaderDoubleClick"),onMouseOver:H("columnHeaderOver"),onMouseOut:H("columnHeaderOut"),onMouseEnter:H("columnHeaderEnter"),onMouseLeave:H("columnHeaderLeave"),onKeyDown:H("columnHeaderKeyDown"),onFocus:H("columnHeaderFocus"),onBlur:H("columnHeaderBlur")}}),[H]),V=r.useMemo((function(){return B?{onDragStart:H("columnHeaderDragStart"),onDragEnter:H("columnHeaderDragEnter"),onDragOver:H("columnHeaderDragOver"),onDragEnd:H("columnHeaderDragEnd")}:{}}),[B,H]),G=r.useMemo((function(){return{onMouseDown:H("columnSeparatorMouseDown")}}),[H]);r.useEffect((function(){I||O(u)}),[I,u]);var W=r.useCallback((function(){O(!1)}),[]),$=!k.disableColumnMenu&&!l.disableColumnMenu&&(0,_.jsx)(T_,{column:l,columnMenuId:M,columnMenuButtonId:A,open:I,iconButtonRef:T}),q=(0,_.jsx)(R_,{columnMenuId:M,columnMenuButtonId:A,field:l.field,open:u,target:T.current,ContentComponent:k.components.ColumnMenu,contentComponentProps:null==(n=k.componentsProps)?void 0:n.columnMenu,onExited:W}),X=null!=(i=l.sortingOrder)?i:k.sortingOrder,K=(0,_.jsxs)(r.Fragment,{children:[!k.disableColumnFilter&&(0,_.jsx)(k.components.ColumnHeaderFilterIconButton,E({field:l.field,counter:v},null==(o=k.componentsProps)?void 0:o.columnHeaderFilterIconButton)),l.sortable&&!l.hideSortIcons&&(0,_.jsx)(A_,{direction:m,index:g,sortingOrder:X})]});r.useLayoutEffect((function(){var e=C.current.state.columnMenu;if(y&&!e.open){var t=P.current.querySelector('[tabindex="0"]')||P.current;null==t||t.focus(),C.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[C,y]);var Y="function"===typeof l.headerClassName?l.headerClassName({field:l.field,colDef:l}):l.headerClassName,Z=null!=(a=l.headerName)?a:l.field;return(0,_.jsx)(H_,E({ref:P,classes:j,columnMenuOpen:u,colIndex:d,height:f,isResizing:p,sortDirection:m,hasFocus:y,tabIndex:b,separatorSide:S,isDraggable:B,headerComponent:s,description:l.description,elementId:l.field,width:l.computedWidth,columnMenuIconButton:$,columnTitleIconButtons:K,headerClassName:Y,label:Z,resizable:!k.disableColumnResize&&!!l.resizable,"data-field":l.field,columnMenu:q,draggableContainerProps:V,columnHeaderSeparatorProps:G},U))}function V_(e){var t,n,r,i=e.groupId,o=e.width,a=e.depth,s=e.maxDepth,l=e.fields,u=e.height,c=e.colIndex,d=e.isLastColumn,f=e.extendRowFullWidth,p=ui(),h=si(),m=oi(h,Ap),g=null!=(t=h.current.getRootDimensions())?t:{hasScrollX:!1,hasScrollY:!1},v=g.hasScrollX,y=g.hasScrollY,b=i?m[i]:{},x=b.headerName,w=void 0===x?null!=i?i:"":x,S=b.description,C=void 0===S?"":S,k=b.headerAlign,P=void 0===k?void 0:k,M=i&&(null==(n=m[i])?void 0:n.renderHeaderGroup),A={groupId:i,headerName:w,description:C,depth:a,maxDepth:s,fields:l,colIndex:c,isLastColumn:d};i&&M&&(r=M(A));var T=d?!(d&&v&&!y)&&!f:p.showColumnRightBorder,R=p.showColumnRightBorder,I=E({},e,{classes:p.classes,showRightBorder:T,showColumnBorder:R,headerAlign:P,depth:a,isDragging:!1}),O=null!=w?w:i,L=Es(),D=null===i?"empty-group-cell-".concat(L):i,F=function(e){var t=e.classes,n=e.headerAlign;return N({root:["columnHeader","left"===n&&"columnHeader--alignLeft","center"===n&&"columnHeader--alignCenter","right"===n&&"columnHeader--alignRight",e.isDragging&&"columnHeader--moving",e.showRightBorder&&"withBorder",e.showColumnBorder&&"columnHeader--showColumnBorder",null===e.groupId?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]},Dr,t)}(I),B="function"===typeof b.headerClassName?b.headerClassName(A):b.headerClassName;return(0,_.jsx)(H_,{classes:F,columnMenuOpen:!1,colIndex:c,height:u,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:-1,isDraggable:!1,headerComponent:r,headerClassName:B,description:C,elementId:D,width:o,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:O,"aria-colspan":l.length,"data-fields":"|-".concat(l.join("-|-"),"-|"),disableHeaderSeparator:!0})}var G_=Ar("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:function(e,t){return t.columnHeaderRow}})((function(){return{display:"flex"}}));var W_=Ar("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:function(e,t){return[p({},"&.".concat(Fr["scrollArea--left"]),t["scrollArea--left"]),p({},"&.".concat(Fr["scrollArea--right"]),t["scrollArea--right"]),t.scrollArea]}})((function(){var e;return p(e={position:"absolute",top:0,zIndex:101,width:20,bottom:0},"&.".concat(Fr["scrollArea--left"]),{left:0}),p(e,"&.".concat(Fr["scrollArea--right"]),{right:0}),e}));function $_(e){var t=e.scrollDirection,n=r.useRef(null),i=si(),o=r.useRef(),a=c(r.useState(!1),2),s=a[0],l=a[1],u=oi(i,pi),d=r.useRef({left:0,top:0}),f=function(e){var t=e.scrollDirection,n=e.classes;return N({root:["scrollArea","scrollArea--".concat(t)]},Dr,n)}(E({},e,{classes:ui().classes})),p=r.useCallback((function(e){d.current=e}),[]),h=r.useCallback((function(e){var r;if("left"===t)r=e.clientX-n.current.getBoundingClientRect().right;else{if("right"!==t)throw new Error("MUI: Wrong drag direction");r=Math.max(1,e.clientX-n.current.getBoundingClientRect().left)}r=1.5*(r-1)+1,clearTimeout(o.current),o.current=setTimeout((function(){i.current.scroll({left:d.current.left+r,top:d.current.top})}))}),[t,i]);r.useEffect((function(){return function(){clearTimeout(o.current)}}),[]);var m=r.useCallback((function(){l((function(e){return!e}))}),[]);return Wo(i,"rowsScroll",p),Wo(i,"columnHeaderDragStart",m),Wo(i,"columnHeaderDragEnd",m),s?(0,_.jsx)(W_,{ref:n,className:M(f.root),onDragOver:h,style:{height:u}}):null}var q_=r.memo($_),X_=["className"],K_=Ar("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:function(e,t){return t.columnHeaders}})((function(e){var t=e.theme,n="light"===t.palette.mode?Yn(Xn(t.palette.divider,1),.88):Kn(Xn(t.palette.divider,1),.68);return{position:"absolute",top:0,left:0,right:0,overflow:"hidden",display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(n),borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius}})),Y_=r.forwardRef((function(e,t){var n=e.className,r=k(e,X_),i=function(e){return N({root:["columnHeaders"]},Dr,e.classes)}({classes:ui().classes});return(0,_.jsx)(K_,E({ref:t,className:M(n,i.root)},r))})),Z_=["isDragging","className"],Q_=Ar("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:function(e,t){return[p({},"&.".concat(Fr.columnHeaderDropZone),t.columnHeaderDropZone),t.columnHeadersInner]}})((function(){var e;return p(e={display:"flex",alignItems:"flex-start",flexDirection:"column"},"&.".concat(Fr.columnHeaderDropZone," .").concat(Fr.columnHeaderDraggableContainer),{cursor:"move"}),p(e,"&.".concat(Fr["columnHeadersInner--scrollable"]," .").concat(Fr.columnHeader,":last-child"),{borderRight:"none"}),e})),J_=r.forwardRef((function(e,t){var n,r,i=e.isDragging,o=e.className,a=k(e,Z_),s=si(),l=ui(),u=function(e){return N({root:["columnHeadersInner",e.isDragging&&"columnHeaderDropZone",e.hasScrollX&&"columnHeadersInner--scrollable"]},Dr,e.classes)}({isDragging:i,hasScrollX:null!=(n=null==(r=s.current.getRootDimensions())?void 0:r.hasScrollX)&&n,classes:l.classes});return(0,_.jsx)(Q_,E({ref:t,className:M(o,u.root)},a))})),eS=["innerRef","className"],tS=r.forwardRef((function(e,t){var n=e.innerRef,i=k(e,eS),o=function(e){var t=e.innerRef,n=e.minColumnIndex,i=void 0===n?0:n,o=c(r.useState(""),2),a=o[0],s=o[1],l=c(r.useState(""),2),u=l[0],d=l[1],f=si(),p=oi(f,Jr),h=oi(f,ei),m=oi(f,Wp),g=oi(f,Gp),v=oi(f,Up),y=oi(f,pi),b=oi(f,hi),x=oi(f,gi),w=oi(f,wo),S=oi(f,ao),C=oi(f,oa),k=ui(),P=r.useRef(null),M=L(t,P),A=c(r.useState(null),2),T=A[0],R=A[1],I=r.useRef(T),O=r.useRef(0),D=Fh(f,k);r.useEffect((function(){f.current.columnHeadersContainerElementRef.current.scrollLeft=0}),[f]);var F=r.useRef(jr(Ep,{equalityCheck:function(e,t){return["firstColumnIndex","minColumnIndex","columnBuffer"].every((function(n){return e[n]===t[n]}))}})),N=r.useCallback((function(e){var t=c(C_({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:D.rows.length,buffer:k.rowBuffer}),2),n=t[0],r=t[1],o=F.current({firstColumnIndex:e.firstColumnIndex,minColumnIndex:i,columnBuffer:k.columnBuffer,firstRowToRender:n,lastRowToRender:r,apiRef:f,visibleRows:D.rows}),a=o>0?O.current-h[o]:O.current;P.current.style.transform="translate3d(".concat(-a,"px, 0px, 0px)")}),[h,i,k.columnBuffer,f,D.rows,k.rowBuffer]);r.useLayoutEffect((function(){T&&N(T)}),[T,N]);var B=r.useCallback((function(e,t){var n,r,i=e.left,o=e.renderContext,a=void 0===o?null:o;if(P.current&&(O.current!==i||(null==(n=I.current)?void 0:n.firstColumnIndex)!==(null==a?void 0:a.firstColumnIndex)||(null==(r=I.current)?void 0:r.lastColumnIndex)!==(null==a?void 0:a.lastColumnIndex))){O.current=i;var s=!1;a===I.current&&I.current?s=!0:(function(e){return!!e.target}(t)?(fa.flushSync((function(){R(a)})),s=!0):R(a),I.current=a),a&&s&&N(a)}}),[N]),j=r.useCallback((function(e){return d(e.field)}),[]),H=r.useCallback((function(){return d("")}),[]),U=r.useCallback((function(e){return s(e.field)}),[]),V=r.useCallback((function(){return s("")}),[]);Wo(f,"columnResizeStart",j),Wo(f,"columnResizeStop",H),Wo(f,"columnHeaderDragStart",U),Wo(f,"columnHeaderDragEnd",V),Wo(f,"rowsScroll",B);var G=function(e){var t=e||{},n=t.renderContext,r=void 0===n?T:n,o=t.minFirstColumn,a=void 0===o?i:o,s=t.maxLastColumn,l=void 0===s?p.length:s;if(!r)return null;var u=c(C_({firstIndex:r.firstRowIndex,lastIndex:r.lastRowIndex,minFirstIndex:0,maxLastIndex:D.rows.length,buffer:k.rowBuffer}),2),d=u[0],h=u[1],m=F.current({firstColumnIndex:r.firstColumnIndex,minColumnIndex:a,columnBuffer:k.columnBuffer,apiRef:f,firstRowToRender:d,lastRowToRender:h,visibleRows:D.rows}),g=Math.min(r.lastColumnIndex+k.columnBuffer,l);return{renderedColumns:p.slice(m,g),firstColumnToRender:m,lastColumnToRender:g,minFirstColumn:a,maxLastColumn:l}},W=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(0,e+1)},$={minHeight:x,maxHeight:x,lineHeight:"".concat(y,"px")};return{renderContext:T,getColumnHeaders:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=G(e);if(null==n)return null;for(var r=n.renderedColumns,i=n.firstColumnToRender,o=[],s=0;s<r.length;s+=1){var l=r[s],c=i+s,d=0===c,f=!(null===m&&null===g),h=null!==m&&m.field===l.field||d&&!f?0:-1,x=null!==v&&v.field===l.field,P=C.open&&C.field===l.field;o.push((0,_.jsx)(U_,E({},S[l.field],{columnMenuOpen:P,filterItemsCounter:w[l.field]&&w[l.field].length,headerHeight:y,isDragging:l.field===a,column:l,colIndex:c,isResizing:u===l.field,isLastColumn:c===p.length-1,extendRowFullWidth:!k.disableExtendRowFullWidth,hasFocus:x,tabIndex:h},t),l.field))}return(0,_.jsx)(G_,{role:"row","aria-rowindex":b+1,children:o})},getColumnGroupHeaders:function(e){if(0===b)return null;var t=G(e);if(null==t||0===t.renderedColumns.length)return null;for(var n=t.renderedColumns,r=t.firstColumnToRender,o=t.lastColumnToRender,a=t.maxLastColumn,s=[],l=[],u=function(e){for(var t=[],s=0,u=r-1,c=null==(d=p[r])||null==(f=d.groupPath)?void 0:f[e],y=W(null==(h=p[r])?void 0:h.groupPath,e);null!==c&&u>=i&&null!=(m=p[u])&&m.groupPath&&To(W(null==(g=p[u])?void 0:g.groupPath,e),y);){var b=p[u];s+=null!=(v=b.computedWidth)?v:0,0===t.length?t.push({width:null!=(x=b.computedWidth)?x:0,fields:[b.field],groupId:c,groupParents:y,colIndex:u}):(t[0].width+=null!=(w=b.computedWidth)?w:0,t[0].fields.push(b.field),t[0].colIndex=u),u-=1}var _=n.reduce((function(t,n,i){var o,a,s,l,u=t[t.length-1];return n.groupPath&&n.groupPath.length>e?u&&u.groupId===n.groupPath[e]?[].concat(z(t.slice(0,t.length-1)),[E({},u,{width:u.width+(null!=(s=n.computedWidth)?s:0),fields:[].concat(z(u.fields),[n.field])})]):[].concat(z(t),[{groupId:n.groupPath[e],groupParents:W(n.groupPath,e),width:null!=(a=n.computedWidth)?a:0,fields:[n.field],colIndex:r+i}]):u&&null===u.groupId&&To(W(n.groupPath,e),u.groupParents)?[].concat(z(t.slice(0,t.length-1)),[E({},u,{width:u.width+(null!=(l=n.computedWidth)?l:0),fields:[].concat(z(u.fields),[n.field])})]):[].concat(z(t),[{groupId:null,groupParents:W(n.groupPath,e),width:null!=(o=n.computedWidth)?o:0,fields:[n.field],colIndex:r+i}])}),t);u=o;for(var k=_[_.length-1].groupId;null!==k&&u<a&&null!=(S=p[u])&&S.groupPath&&(null==(C=p[u])||null==(P=C.groupPath)?void 0:P[e])===k;){var A=p[u];_[_.length-1].width+=null!=(M=A.computedWidth)?M:0,_[_.length-1].fields.push(A.field),u+=1}l.push({leftOverflow:s,elements:z(_)})},c=0;c<b;c+=1){var d,f,h,m,g,v,x,w,S,C,P,M;u(c)}return l.forEach((function(e,t){s.push((0,_.jsx)(G_,{style:{height:"".concat(y,"px"),transform:"translateX(-".concat(e.leftOverflow,"px)")},role:"row","aria-rowindex":t+1,children:e.elements.map((function(e,n){var r=e.groupId,i=e.width,o=e.fields,a=e.colIndex;return(0,_.jsx)(V_,{groupId:r,width:i,fields:o,colIndex:a,depth:t,isLastColumn:a===p.length-o.length,extendRowFullWidth:!k.disableExtendRowFullWidth,maxDepth:l.length,height:y},n)}))},t))})),s},isDragging:!!a,getRootProps:function(){return E({style:$},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},getInnerProps:function(){return{ref:M,role:"rowgroup"}}}}({innerRef:n}),a=o.isDragging,s=o.getRootProps,l=o.getInnerProps,u=o.getColumnHeaders,d=o.getColumnGroupHeaders;return(0,_.jsxs)(Y_,E({ref:t},s(i),{children:[(0,_.jsx)(q_,{scrollDirection:"left"}),(0,_.jsxs)(J_,E({isDragging:a},l(),{children:[d(),u()]})),(0,_.jsx)(q_,{scrollDirection:"right"})]}))})),nS=r.forwardRef((function(e,t){var n=function(e){if(e.pageSize>100)throw new Error("'props.pageSize' cannot exceed 100 in DataGrid.");var t=Ia({props:e,name:"MuiDataGrid"}),n=r.useMemo((function(){return E({},Im,t.localeText)}),[t.localeText]),i=r.useMemo((function(){var e=t.components;if(!e)return E({},c_);var n={};return Object.entries(c_).forEach((function(t){var r=c(t,2),i=r[0],o=r[1];n[i]=void 0===e[i]?o:e[i]})),n}),[t.components]);return r.useMemo((function(){return E({},f_,t,{localeText:n,components:i},d_)}),[t,n,i])}(e),i=Rm(n);return(0,_.jsx)(ko,{apiRef:i,props:n,children:(0,_.jsx)(Ri,{className:n.className,style:n.style,sx:n.sx,ref:t,children:(0,_.jsxs)($i,{children:[(0,_.jsx)(qi,{}),(0,_.jsx)(Co,{ColumnHeadersComponent:tS,VirtualScrollerComponent:P_}),(0,_.jsx)(Eo,{})]})})})})),rS=r.memo(nS);nS.propTypes={"aria-label":C().string,"aria-labelledby":C().string,autoHeight:C().bool,autoPageSize:C().bool,cellModesModel:C().object,checkboxSelection:C().bool,classes:C().object,columnBuffer:C().number,columnGroupingModel:C().arrayOf(C().object),columns:(C().array.isRequired,function(){return null}),columnThreshold:C().number,columnTypes:C().object,columnVisibilityModel:C().object,components:C().object,componentsProps:C().object,density:C().oneOf(["comfortable","compact","standard"]),disableColumnFilter:C().bool,disableColumnMenu:C().bool,disableColumnSelector:C().bool,disableDensitySelector:C().bool,disableExtendRowFullWidth:C().bool,disableIgnoreModificationsIfProcessingProps:C().bool,disableSelectionOnClick:C().bool,disableVirtualization:C().bool,editMode:C().oneOf(["cell","row"]),editRowsModel:C().object,error:C().any,experimentalFeatures:C().shape({columnGrouping:C().bool,newEditingApi:C().bool,preventCommitWhileValidating:C().bool,warnIfFocusStateIsNotSynced:C().bool}),filterMode:C().oneOf(["client","server"]),filterModel:C().shape({items:C().arrayOf(C().shape({columnField:C().string.isRequired,id:C().oneOfType([C().number,C().string]),operatorValue:C().string,value:C().any})).isRequired,linkOperator:C().oneOf(["and","or"]),quickFilterLogicOperator:C().oneOf(["and","or"]),quickFilterValues:C().array}),getCellClassName:C().func,getDetailPanelContent:C().func,getEstimatedRowHeight:C().func,getRowClassName:C().func,getRowHeight:C().func,getRowId:C().func,getRowSpacing:C().func,headerHeight:C().number,hideFooter:C().bool,hideFooterPagination:C().bool,hideFooterSelectedRowCount:C().bool,initialState:C().object,isCellEditable:C().func,isRowSelectable:C().func,keepNonExistentRowsSelected:C().bool,loading:C().bool,localeText:C().object,logger:C().shape({debug:C().func.isRequired,error:C().func.isRequired,info:C().func.isRequired,warn:C().func.isRequired}),logLevel:C().oneOf(["debug","error","info","warn",!1]),nonce:C().string,onCellClick:C().func,onCellDoubleClick:C().func,onCellEditCommit:C().func,onCellEditStart:C().func,onCellEditStop:C().func,onCellFocusOut:C().func,onCellKeyDown:C().func,onCellModesModelChange:C().func,onColumnHeaderClick:C().func,onColumnHeaderDoubleClick:C().func,onColumnHeaderEnter:C().func,onColumnHeaderLeave:C().func,onColumnHeaderOut:C().func,onColumnHeaderOver:C().func,onColumnOrderChange:C().func,onColumnVisibilityChange:C().func,onColumnVisibilityModelChange:C().func,onEditCellPropsChange:C().func,onEditRowsModelChange:C().func,onError:C().func,onFilterModelChange:C().func,onMenuClose:C().func,onMenuOpen:C().func,onPageChange:C().func,onPageSizeChange:C().func,onPreferencePanelClose:C().func,onPreferencePanelOpen:C().func,onProcessRowUpdateError:C().func,onResize:C().func,onRowClick:C().func,onRowDoubleClick:C().func,onRowEditCommit:C().func,onRowEditStart:C().func,onRowEditStop:C().func,onRowModesModelChange:C().func,onSelectionModelChange:C().func,onSortModelChange:C().func,onStateChange:C().func,page:C().number,pageSize:(C().number,function(){return null}),pagination:function(e){return!1===e.pagination?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join("\n")):null},paginationMode:C().oneOf(["client","server"]),processRowUpdate:C().func,rowBuffer:C().number,rowCount:C().number,rowHeight:C().number,rowModesModel:C().object,rows:C().arrayOf(C().object).isRequired,rowSpacingType:C().oneOf(["border","margin"]),rowsPerPageOptions:C().arrayOf(C().number),rowThreshold:C().number,scrollbarSize:C().number,selectionModel:(C().oneOfType([C().number,C().string,C().array]),function(){return null}),showCellRightBorder:C().bool,showColumnRightBorder:C().bool,sortingMode:C().oneOf(["client","server"]),sortingOrder:C().arrayOf(C().oneOf(["asc","desc"])),sortModel:C().arrayOf(C().shape({field:C().string.isRequired,sort:C().oneOf(["asc","desc"])})),sx:C().oneOfType([C().arrayOf(C().oneOfType([C().func,C().object,C().bool])),C().func,C().object])};var iS=["className","component"];var oS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=e.defaultClassName,i=void 0===n?"MuiBox-root":n,o=e.generateClassName,a=bt("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(kn),s=r.forwardRef((function(e,n){var r=Ta(t),s=Aw(e),l=s.className,u=s.component,c=void 0===u?"div":u,d=k(s,iS);return(0,_.jsx)(a,E({as:c,ref:n,className:M(l,o?o(i):i),theme:r},d))}));return s}({defaultTheme:Er(),defaultClassName:"MuiBox-root",generateClassName:Rr.generate}),aS=oS,sS=["className","children"],lS=Ar("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:function(e,t){return t.toolbarContainer}})((function(e){return{display:"flex",alignItems:"center",flexWrap:"wrap",padding:e.theme.spacing(.5,.5,0)}})),uS=r.forwardRef((function(e,t){var n=e.className,r=e.children,i=k(e,sS),o=function(e){return N({root:["toolbarContainer"]},Dr,e.classes)}({classes:ui().classes});return r?(0,_.jsx)(lS,E({ref:t,className:M(n,o.root)},i,{children:r})):null})),cS=["onClick"],dS=r.forwardRef((function(e,t){var n,r=e.onClick,i=k(e,cS),o=si(),a=ui(),s=oi(o,Jh),l=s.open,u=s.openedPanelValue;return a.disableColumnSelector?null:(0,_.jsx)(a.components.BaseButton,E({ref:t,size:"small","aria-label":o.current.getLocaleText("toolbarColumnsLabel"),startIcon:(0,_.jsx)(a.components.ColumnSelectorIcon,{})},i,{onClick:function(e){l&&u===xp.columns?o.current.hidePreferences():o.current.showPreferences(xp.columns),null==r||r(e)}},null==(n=a.componentsProps)?void 0:n.baseButton,{children:o.current.getLocaleText("toolbarColumns")}))})),fS=["className"],pS=Ar("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((function(e){var t=e.theme,n=e.ownerState;return E({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),hS=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiListItemIcon"}),i=n.className,o=k(n,fS),a=E({},n,{alignItems:r.useContext(Ms).alignItems}),s=function(e){return N({root:["root","flex-start"===e.alignItems&&"alignItemsFlexStart"]},yl,e.classes)}(a);return(0,_.jsx)(pS,E({className:M(s.root,i),ownerState:a,ref:t},o))})),mS=["onClick"],gS=r.forwardRef((function(e,t){var n,i=e.onClick,o=k(e,mS),a=si(),s=ui(),l=oi(a,di),u=ks(),d=ks(),f=c(r.useState(!1),2),p=f[0],h=f[1],m=r.useRef(null),g=L(t,m),v=[{icon:(0,_.jsx)(s.components.DensityCompactIcon,{}),label:a.current.getLocaleText("toolbarDensityCompact"),value:kp.Compact},{icon:(0,_.jsx)(s.components.DensityStandardIcon,{}),label:a.current.getLocaleText("toolbarDensityStandard"),value:kp.Standard},{icon:(0,_.jsx)(s.components.DensityComfortableIcon,{}),label:a.current.getLocaleText("toolbarDensityComfortable"),value:kp.Comfortable}],y=r.useMemo((function(){switch(l){case kp.Compact:return(0,_.jsx)(s.components.DensityCompactIcon,{});case kp.Comfortable:return(0,_.jsx)(s.components.DensityComfortableIcon,{});default:return(0,_.jsx)(s.components.DensityStandardIcon,{})}}),[l,s]);if(s.disableDensitySelector)return null;var b=v.map((function(e,t){return(0,_.jsxs)(El,{onClick:function(){return t=e.value,a.current.setDensity(t),void h(!1);var t},selected:e.value===l,children:[(0,_.jsx)(hS,{children:e.icon}),e.label]},t)}));return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(s.components.BaseButton,E({ref:g,size:"small",startIcon:y,"aria-label":a.current.getLocaleText("toolbarDensityLabel"),"aria-expanded":p?"true":void 0,"aria-haspopup":"menu","aria-controls":d,id:u},o,{onClick:function(e){h((function(e){return!e})),null==i||i(e)}},null==(n=s.componentsProps)?void 0:n.baseButton,{children:a.current.getLocaleText("toolbarDensity")})),(0,_.jsx)(dp,{open:p,target:m.current,onClickAway:function(e){var t;m.current===e.target||null!=(t=m.current)&&t.contains(e.target)||h(!1)},position:"bottom-start",children:(0,_.jsx)(Hf,{id:d,className:Fr.menuList,"aria-labelledby":u,onKeyDown:function(e){nf(e.key)&&e.preventDefault(),gf(e.key)&&h(!1)},autoFocusItem:p,children:b})})]})})),vS=["componentsProps"],yS=Ar("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:function(e,t){return t.toolbarFilterList}})((function(e){var t=e.theme;return{margin:t.spacing(1,1,.5),padding:t.spacing(0,1)}})),bS=r.forwardRef((function(e,t){var n,i,o=e.componentsProps,a=void 0===o?{}:o,s=k(e,vS),l=a.button||{},u=si(),c=ui(),d=oi(u,xo),f=oi(u,Yr),p=oi(u,Jh),h=function(e){return N({root:["toolbarFilterList"]},Dr,e.classes)}({classes:c.classes}),m=r.useMemo((function(){if(p.open)return u.current.getLocaleText("toolbarFiltersTooltipHide");if(0===d.length)return u.current.getLocaleText("toolbarFiltersTooltipShow");var e=function(e){return f[e.columnField].filterOperators.find((function(t){return t.value===e.operatorValue})).label||u.current.getLocaleText("filterOperator".concat(R(e.operatorValue))).toString()};return(0,_.jsxs)("div",{children:[u.current.getLocaleText("toolbarFiltersTooltipActive")(d.length),(0,_.jsx)(yS,{className:h.root,children:d.map((function(t,n){var r;return E({},f[t.columnField]&&(0,_.jsx)("li",{children:"".concat(f[t.columnField].headerName||t.columnField,"\n                  ").concat(e(t),"\n                  ").concat(null!=(r=t.value)?r:"")},n))}))})]})}),[u,p.open,d,f,h]);return c.disableColumnFilter?null:(0,_.jsx)(c.components.BaseTooltip,E({title:m,enterDelay:1e3},s,null==(n=c.componentsProps)?void 0:n.baseTooltip,{children:(0,_.jsx)(c.components.BaseButton,E({ref:t,size:"small","aria-label":u.current.getLocaleText("toolbarFiltersLabel"),startIcon:(0,_.jsx)(Eb,{badgeContent:d.length,color:"primary",children:(0,_.jsx)(c.components.OpenFilterButtonIcon,{})})},l,{onClick:function(e){var t,n=p.open,r=p.openedPanelValue;n&&r===xp.filters?u.current.hideFilterPanel():u.current.showFilterPanel(),null==(t=l.onClick)||t.call(l,e)}},null==(i=c.componentsProps)?void 0:i.baseButton,{children:u.current.getLocaleText("toolbarFilters")}))}))})),xS=["quickFilterParser","quickFilterFormatter","debounceMs"],wS=Ar(gy,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:function(e,t){return t.toolbarQuickFilter}})((function(e){var t,n=e.theme;return p(t={width:"auto",paddingBottom:n.spacing(.5),"& input":{marginLeft:n.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:"1px solid ".concat(n.palette.divider)}},"& input[type=search]::-ms-clear,\n& input[type=search]::-ms-reveal",{display:"none",width:0,height:0}),p(t,'& input[type="search"]::-webkit-search-decoration,\n  & input[type="search"]::-webkit-search-cancel-button,\n  & input[type="search"]::-webkit-search-results-button,\n  & input[type="search"]::-webkit-search-results-decoration',{display:"none"}),t})),_S=function(e){return e.split(" ").filter((function(e){return""!==e}))},SS=function(e){return e.join(" ")};function CS(e){var t,n=e.quickFilterParser,i=void 0===n?_S:n,o=e.quickFilterFormatter,a=void 0===o?SS:o,s=e.debounceMs,l=void 0===s?500:s,u=k(e,xS),d=si(),f=ui(),p=oi(d,uo),h=c(r.useState((function(){return a(null!=p?p:[])})),2),m=h[0],g=h[1],v=c(r.useState(p),2),y=v[0],b=v[1];r.useEffect((function(){To(y,p)||(b(p),g((function(e){return To(i(e),p)?e:a(null!=p?p:[])})))}),[y,p,a,i]);var x=r.useCallback((function(e){d.current.setQuickFilterValues(i(e))}),[d,i]),w=r.useMemo((function(){return Am(x,l)}),[x,l]),S=r.useCallback((function(e){var t=e.target.value;g(t),w(t)}),[w]),C=r.useCallback((function(){g(""),x("")}),[x]);return(0,_.jsx)(wS,E({as:f.components.BaseTextField,variant:"standard",value:m,onChange:S,placeholder:d.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":d.current.getLocaleText("toolbarQuickFilterLabel"),type:"search",InputProps:{startAdornment:(0,_.jsx)(f.components.QuickFilterIcon,{fontSize:"small"}),endAdornment:(0,_.jsx)($c,{"aria-label":d.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:m?"visible":"hidden"},onClick:C,children:(0,_.jsx)(f.components.QuickFilterClearIcon,{fontSize:"small"})})}},u,null==(t=f.componentsProps)?void 0:t.baseTextField))}var ES=["className","csvOptions","printOptions","excelOptions","showQuickFilter","quickFilterProps"],kS=r.forwardRef((function(e,t){var n=e.csvOptions,r=e.printOptions,i=e.excelOptions,o=e.showQuickFilter,a=void 0!==o&&o,s=e.quickFilterProps,l=void 0===s?{}:s,u=k(e,ES),c=ui();return c.disableColumnFilter&&c.disableColumnSelector&&c.disableDensitySelector&&!a?null:(0,_.jsxs)(uS,E({ref:t},u,{children:[(0,_.jsx)(dS,{}),(0,_.jsx)(bS,{}),(0,_.jsx)(gS,{}),(0,_.jsx)(yh,{csvOptions:n,printOptions:r,excelOptions:i}),(0,_.jsx)(aS,{sx:{flex:1}}),a&&(0,_.jsx)(CS,E({},l))]}))})),PS=Ar("a")({textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),MS=r.memo((function(e){return(0,_.jsx)(PS,{tabIndex:e.tabIndex,onClick:function(e){},href:e.href,children:e.children})}));function AS(e){if(null==e.value)return"";var t=c(e.value.split("@"),2),n=t[0],r=t[1];return(0,_.jsx)(MS,{href:n,tabIndex:e.tabIndex,children:r})}var TS=.2,RS=Ar(rS)((function(e){var t=e.theme;return p({},"& .".concat(Fr.row,".even"),{backgroundColor:t.palette.grey[200],"&:hover, &.Mui-hovered":{backgroundColor:Xn(t.palette.primary.main,TS),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:Xn(t.palette.primary.main,TS+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:Xn(t.palette.primary.main,TS+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:Xn(t.palette.primary.main,TS+t.palette.action.selectedOpacity)}}}})}));var IS=function(e){var t=e.columns,n=e.rows,r=t.map((function(e){return e.startsWith("l:")?{headerName:e.substring(2),field:e,flex:1,minWidth:80,renderCell:AS}:{headerName:e,field:e,flex:1,headerClassName:"b",minWidth:80}})),i=n.map((function(e,n){var r={id:n+1};return t.map((function(t,n){return r[t]=e[n]})),r}));return(0,_.jsx)(RS,{rows:i,columns:r,density:"compact",autoHeight:!0,components:{Toolbar:kS},componentsProps:{toolbar:{showQuickFilter:!0,quickFilterProps:{debounceMs:500}}},getRowClassName:function(e){return e.indexRelativeToCurrentPage%2===0?"even":"odd"},sx:{".MuiDataGrid-columnHeaderTitle":{typography:"subtitle1"}}})},OS=n(3051);function LS(e){return Or("MuiCard",e)}Lr("MuiCard",["root"]);var DS=["className","raised"],FS=Ar(jc,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),NS=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiCard"}),r=n.className,i=n.raised,o=void 0!==i&&i,a=k(n,DS),s=E({},n,{raised:o}),l=function(e){return N({root:["root"]},LS,e.classes)}(s);return(0,_.jsx)(FS,E({className:M(l.root,r),elevation:o?8:void 0,ref:t,ownerState:s},a))}));function BS(e){return Or("MuiCardContent",e)}Lr("MuiCardContent",["root"]);var zS=["className","component"],jS=Ar("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),HS=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiCardContent"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=k(n,zS),s=E({},n,{component:o}),l=function(e){return N({root:["root"]},BS,e.classes)}(s);return(0,_.jsx)(jS,E({as:o,className:M(l.root,r),ownerState:s,ref:t},a))}));var US=function(e){var t=e.path,n=e.height,i=void 0===n?"400px":n,o=(0,r.useMemo)((function(){return[{type:"cartoon",params:{colorScheme:"sstruc",smoothSheet:!0}}]}),[]);return(0,_.jsx)(NS,{children:(0,_.jsx)(HS,{children:(0,_.jsx)(OS.Stage,{height:i,params:{backgroundColor:"white"},cameraState:{},children:(0,_.jsx)(OS.Component,{path:t,reprList:o})})})})},VS=n(5586);function GS(e,t,n){return GS=Hi()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Bi(i,n.prototype),i},GS.apply(null,arguments)}function WS(e){var t="function"===typeof Map?new Map:void 0;return WS=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return GS(e,arguments,ji(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Bi(n,e)},WS(e)}function $S(e){return e&&"object"===typeof e?"position"in e||"type"in e?XS(e.position):"start"in e||"end"in e?XS(e):"line"in e||"column"in e?qS(e):"":""}function qS(e){return KS(e&&e.line)+":"+KS(e&&e.column)}function XS(e){return qS(e&&e.start)+"-"+qS(e&&e.end)}function KS(e){return e&&"number"===typeof e?e:1}var YS=function(e){zi(n,e);var t=Gi(n);function n(e,r,i){var o;Di(this,n);var a=[null,null],s={start:{line:null,column:null},end:{line:null,column:null}};if(o=t.call(this),"string"===typeof r&&(i=r,r=void 0),"string"===typeof i){var l=i.indexOf(":");-1===l?a[1]=i:(a[0]=i.slice(0,l),a[1]=i.slice(l+1))}return r&&("type"in r||"position"in r?r.position&&(s=r.position):"start"in r||"end"in r?s=r:("line"in r||"column"in r)&&(s.start=r)),o.name=$S(r)||"1:1",o.message="object"===typeof e?e.message:e,o.stack="","object"===typeof e&&e.stack&&(o.stack=e.stack),o.reason=o.message,o.fatal,o.line=s.start.line,o.column=s.start.column,o.position=s,o.source=a[0],o.ruleId=a[1],o.file,o.actual,o.expected,o.url,o.note,o}return Ni(n)}(WS(Error));YS.prototype.file="",YS.prototype.name="",YS.prototype.reason="",YS.prototype.message="",YS.prototype.stack="",YS.prototype.fatal=null,YS.prototype.column=null,YS.prototype.line=null,YS.prototype.source=null,YS.prototype.ruleId=null,YS.prototype.position=null;var ZS={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');JS(e);var n,r=0,i=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.charCodeAt(o)){if(n){r=o+1;break}}else i<0&&(n=!0,i=o+1);return i<0?"":e.slice(r,i)}if(t===e)return"";var a=-1,s=t.length-1;for(;o--;)if(47===e.charCodeAt(o)){if(n){r=o+1;break}}else a<0&&(n=!0,a=o+1),s>-1&&(e.charCodeAt(o)===t.charCodeAt(s--)?s<0&&(i=o):(s=-1,i=a));r===i?i=a:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(JS(e),0===e.length)return".";var t,n=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)},extname:function(e){JS(e);var t,n=e.length,r=-1,i=0,o=-1,a=0;for(;n--;){var s=e.charCodeAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?o<0?o=n:1!==a&&(a=1):o>-1&&(a=-1);else if(t){i=n+1;break}}if(o<0||r<0||0===a||1===a&&o===r-1&&o===i+1)return"";return e.slice(o,r)},join:function(){for(var e,t=-1,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++t<r.length;)JS(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":QS(e)},sep:"/"};function QS(e){JS(e);var t=47===e.charCodeAt(0),n=function(e,t){var n,r,i="",o=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(i.length<2||2!==o||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){if((r=i.lastIndexOf("/"))!==i.length-1){r<0?(i="",o=0):o=(i=i.slice(0,r)).length-1-i.lastIndexOf("/"),a=l,s=0;continue}}else if(i.length>0){i="",o=0,a=l,s=0;continue}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(a+1,l):i=e.slice(a+1,l),o=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/"),t?"/"+n:n}function JS(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}var eC={cwd:function(){return"/"}};function tC(e){return null!==e&&"object"===typeof e&&e.href&&e.origin}function nC(e){if("string"===typeof e)e=new URL(e);else if(!tC(e)){var t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){var n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return function(e){if(""!==e.hostname){var t=new TypeError('File URL host must be "localhost" or empty on darwin');throw t.code="ERR_INVALID_FILE_URL_HOST",t}var n=e.pathname,r=-1;for(;++r<n.length;)if(37===n.charCodeAt(r)&&50===n.charCodeAt(r+1)){var i=n.charCodeAt(r+2);if(70===i||102===i){var o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(n)}(e)}var rC=["history","path","basename","stem","extname","dirname"],iC=function(){function e(t){var n;Di(this,e),n=t?"string"===typeof t||VS(t)?{value:t}:tC(t)?{path:t}:t:{},this.data={},this.messages=[],this.history=[],this.cwd=eC.cwd(),this.value,this.stored,this.result,this.map;for(var r,i=-1;++i<rC.length;){var o=rC[i];o in n&&void 0!==n[o]&&(this[o]="history"===o?z(n[o]):n[o])}for(r in n)rC.includes(r)||(this[r]=n[r])}return Ni(e,[{key:"path",get:function(){return this.history[this.history.length-1]},set:function(e){tC(e)&&(e=nC(e)),aC(e,"path"),this.path!==e&&this.history.push(e)}},{key:"dirname",get:function(){return"string"===typeof this.path?ZS.dirname(this.path):void 0},set:function(e){sC(this.basename,"dirname"),this.path=ZS.join(e||"",this.basename)}},{key:"basename",get:function(){return"string"===typeof this.path?ZS.basename(this.path):void 0},set:function(e){aC(e,"basename"),oC(e,"basename"),this.path=ZS.join(this.dirname||"",e)}},{key:"extname",get:function(){return"string"===typeof this.path?ZS.extname(this.path):void 0},set:function(e){if(oC(e,"extname"),sC(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ZS.join(this.dirname,this.stem+(e||""))}},{key:"stem",get:function(){return"string"===typeof this.path?ZS.basename(this.path,this.extname):void 0},set:function(e){aC(e,"stem"),oC(e,"stem"),this.path=ZS.join(this.dirname||"",e+(this.extname||""))}},{key:"toString",value:function(e){return(this.value||"").toString(e)}},{key:"message",value:function(e,t,n){var r=new YS(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}},{key:"info",value:function(e,t,n){var r=this.message(e,t,n);return r.fatal=null,r}},{key:"fail",value:function(e,t,n){var r=this.message(e,t,n);throw r.fatal=!0,r}}]),e}();function oC(e,t){if(e&&e.includes(ZS.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ZS.sep+"`")}function aC(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function sC(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function lC(e){return a(e)||B(e)||l(e)||u()}function uC(e){if(e)throw e}var cC=n(1132);function dC(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function fC(e,t){var n;return function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];var s,l=e.length>o.length;l&&o.push(r);try{s=e.apply(this,o)}catch(c){var u=c;if(l&&n)throw u;return r(u)}l||(s instanceof Promise?s.then(i,r):s instanceof Error?r(s):i(s))};function r(e){if(!n){n=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t.apply(void 0,[e].concat(i))}}function i(e){r(null,e)}}var pC=function e(){var t,n=function(){var e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=-1,o=n.pop();if("function"!==typeof o)throw new TypeError("Expected function as last argument, not "+o);function a(t){var r=e[++i],s=-1;if(t)o(t);else{for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];for(;++s<n.length;)null!==u[s]&&void 0!==u[s]||(u[s]=n[s]);n=u,r?fC(r,a).apply(void 0,u):o.apply(void 0,[null].concat(u))}}a.apply(void 0,[null].concat(z(n)))},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}(),r=[],i={},o=-1;return a.data=s,a.Parser=void 0,a.Compiler=void 0,a.freeze=function(){if(t)return a;for(;++o<r.length;){var e=lC(r[o]),i=e[0],s=e.slice(1);if(!1!==s[0]){!0===s[0]&&(s[0]=void 0);var l=i.call.apply(i,[a].concat(z(s)));"function"===typeof l&&n.use(l)}}return t=!0,o=Number.POSITIVE_INFINITY,a},a.attachers=r,a.use=l,a.parse=function(e){a.freeze();var t=wC(e),n=a.Parser;if(gC("parse",n),mC(n,"parse"))return new n(String(t),t).parse();return n(String(t),t)},a.stringify=function(e,t){a.freeze();var n=wC(t),r=a.Compiler;if(vC("stringify",r),bC(e),mC(r,"compile"))return new r(e,n).compile();return r(e,n)},a.run=function(e,t,r){bC(e),a.freeze(),r||"function"!==typeof t||(r=t,t=void 0);if(!r)return new Promise(i);function i(i,o){function a(t,n,a){n=n||e,t?o(t):i?i(n):r(null,n,a)}n.run(e,wC(t),a)}i(null,r)},a.runSync=function(e,t){var n,r;return a.run(e,t,i),xC("runSync","run",r),n;function i(e,t){uC(e),n=t,r=!0}},a.process=function(e,t){if(a.freeze(),gC("process",a.Parser),vC("process",a.Compiler),!t)return new Promise(n);function n(n,r){var i=wC(e);function o(e,i){e||!i?r(e):n?n(i):t(null,i)}a.run(a.parse(i),i,(function(e,t,n){if(!e&&t&&n){var r=a.stringify(t,n);void 0===r||null===r||("string"===typeof(i=r)||VS(i)?n.value=r:n.result=r),o(e,n)}else o(e);var i}))}n(null,t)},a.processSync=function(e){var t;a.freeze(),gC("processSync",a.Parser),vC("processSync",a.Compiler);var n=wC(e);return a.process(n,r),xC("processSync","process",t),n;function r(e){t=!0,uC(e)}},a;function a(){for(var t=e(),n=-1;++n<r.length;)t.use.apply(t,z(r[n]));return t.data(cC(!0,{},i)),t}function s(e,n){return"string"===typeof e?2===arguments.length?(yC("data",t),i[e]=n,a):hC.call(i,e)&&i[e]||null:e?(yC("data",t),i=e,a):i}function l(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];var l;if(yC("use",t),null===e||void 0===e);else if("function"===typeof e)f.apply(void 0,[e].concat(o));else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?d(e):c(e)}return l&&(i.settings=Object.assign(i.settings||{},l)),a;function u(e){if("function"===typeof e)f(e);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){var t=lC(e),n=t[0],r=t.slice(1);f.apply(void 0,[n].concat(z(r)))}else c(e)}}function c(e){d(e.plugins),e.settings&&(l=Object.assign(l||{},e.settings))}function d(e){var t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){u(e[t])}}}function f(e,t){for(var n,i=-1;++i<r.length;)if(r[i][0]===e){n=r[i];break}n?(dC(n[1])&&dC(t)&&(t=cC(!0,n[1],t)),n[1]=t):r.push(Array.prototype.slice.call(arguments))}}}().freeze(),hC={}.hasOwnProperty;function mC(e,t){return"function"===typeof e&&e.prototype&&(function(e){var t;for(t in e)if(hC.call(e,t))return!0;return!1}(e.prototype)||t in e.prototype)}function gC(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function vC(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function yC(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function bC(e){if(!dC(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function xC(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function wC(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new iC(e)}function _C(e,t){var n=(t||{}).includeImageAlt;return SC(e,void 0===n||n)}function SC(e,t){return e&&"object"===typeof e&&(e.value||(t?e.alt:"")||"children"in e&&CC(e.children,t)||Array.isArray(e)&&CC(e,t))||""}function CC(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=SC(e[r],t);return n.join("")}function EC(e,t,n,r){var i,o=e.length,a=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),[].splice.apply(e,i);else for(n&&[].splice.apply(e,[t,n]);a<r.length;)(i=r.slice(a,a+1e4)).unshift(t,0),[].splice.apply(e,i),a+=1e4,t+=1e4}function kC(e,t){return e.length>0?(EC(e,e.length,0,t),e):t}var PC={}.hasOwnProperty;function MC(e){for(var t={},n=-1;++n<e.length;)AC(t,e[n]);return t}function AC(e,t){var n;for(n in t){var r=(PC.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n],o=void 0;for(o in i){PC.call(r,o)||(r[o]=[]);var a=i[o];TC(r[o],Array.isArray(a)?a:a?[a]:[])}}}function TC(e,t){for(var n=-1,r=[];++n<t.length;)("after"===t[n].add?e:r).push(t[n]);EC(e,0,0,r)}var RC=VC(/[A-Za-z]/),IC=VC(/\d/),OC=VC(/[\dA-Fa-f]/),LC=VC(/[\dA-Za-z]/),DC=VC(/[!-/:-@[-`{-~]/),FC=VC(/[#-'*+\--9=?A-Z^-~]/);function NC(e){return null!==e&&(e<32||127===e)}function BC(e){return null!==e&&(e<0||32===e)}function zC(e){return null!==e&&e<-2}function jC(e){return-2===e||-1===e||32===e}var HC=VC(/\s/),UC=VC(/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/);function VC(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function GC(e,t,n,r){var i=r?r-1:Number.POSITIVE_INFINITY,o=0;return function(r){if(jC(r))return e.enter(n),a(r);return t(r)};function a(r){return jC(r)&&o++<i?(e.consume(r),a):(e.exit(n),t(r))}}var WC={tokenize:function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null===t)return void e.consume(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),GC(e,n,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));return n;function r(n){var r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,i(n)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):zC(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};var $C={tokenize:function(e){var t,n,r,i=this,o=[],a=0;return s;function s(t){if(a<o.length){var n=o[a];return i.containerState=n[1],e.attempt(n[0].continuation,l,u)(t)}return u(t)}function l(e){if(a++,i.containerState._closeFlow){i.containerState._closeFlow=void 0,t&&y();for(var n,r=i.events.length,o=r;o--;)if("exit"===i.events[o][0]&&"chunkFlow"===i.events[o][1].type){n=i.events[o][1].end;break}v(a);for(var l=r;l<i.events.length;)i.events[l][1].end=Object.assign({},n),l++;return EC(i.events,o+1,0,i.events.slice(r)),i.events.length=l,u(e)}return s(e)}function u(n){if(a===o.length){if(!t)return f(n);if(t.currentConstruct&&t.currentConstruct.concrete)return h(n);i.interrupt=Boolean(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return i.containerState={},e.check(qC,c,d)(n)}function c(e){return t&&y(),v(a),f(e)}function d(e){return i.parser.lazy[i.now().line]=a!==o.length,r=i.now().offset,h(e)}function f(t){return i.containerState={},e.attempt(qC,p,h)(t)}function p(e){return a++,o.push([i.currentConstruct,i.containerState]),f(e)}function h(r){return null===r?(t&&y(),v(0),void e.consume(r)):(t=t||i.parser.flow(i.now()),e.enter("chunkFlow",{contentType:"flow",previous:n,_tokenizer:t}),m(r))}function m(t){return null===t?(g(e.exit("chunkFlow"),!0),v(0),void e.consume(t)):zC(t)?(e.consume(t),g(e.exit("chunkFlow")),a=0,i.interrupt=void 0,s):(e.consume(t),m)}function g(e,o){var s=i.sliceStream(e);if(o&&s.push(null),e.previous=n,n&&(n.next=e),n=e,t.defineSkip(e.start),t.write(s),i.parser.lazy[e.start.line]){for(var l=t.events.length;l--;)if(t.events[l][1].start.offset<r&&(!t.events[l][1].end||t.events[l][1].end.offset>r))return;for(var u,c,d=i.events.length,f=d;f--;)if("exit"===i.events[f][0]&&"chunkFlow"===i.events[f][1].type){if(u){c=i.events[f][1].end;break}u=!0}for(v(a),l=d;l<i.events.length;)i.events[l][1].end=Object.assign({},c),l++;EC(i.events,f+1,0,i.events.slice(d)),i.events.length=l}}function v(t){for(var n=o.length;n-- >t;){var r=o[n];i.containerState=r[1],r[0].exit.call(i,e)}o.length=t}function y(){t.write([null]),n=void 0,t=void 0,i.containerState._closeFlow=void 0}}},qC={tokenize:function(e,t,n){return GC(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};var XC={tokenize:function(e,t,n){return GC(e,(function(e){return null===e||zC(e)?t(e):n(e)}),"linePrefix")},partial:!0};function KC(e){for(var t,n,r,i,o,a,s,l={},u=-1;++u<e.length;){for(;u in l;)u=l[u];if(t=e[u],u&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[u-1][1].type&&((r=0)<(a=t[1]._tokenizer.events).length&&"lineEndingBlank"===a[r][1].type&&(r+=2),r<a.length&&"content"===a[r][1].type))for(;++r<a.length&&"content"!==a[r][1].type;)"chunkText"===a[r][1].type&&(a[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===t[0])t[1].contentType&&(Object.assign(l,YC(e,u)),u=l[u],s=!0);else if(t[1]._container){for(r=u,n=void 0;r--&&("lineEnding"===(i=e[r])[1].type||"lineEndingBlank"===i[1].type);)"enter"===i[0]&&(n&&(e[n][1].type="lineEndingBlank"),i[1].type="lineEnding",n=r);n&&(t[1].end=Object.assign({},e[n][1].start),(o=e.slice(n,u)).unshift(t),EC(e,n,u-n+1,o))}}return!s}function YC(e,t){for(var n,r,i=e[t][1],o=e[t][2],a=t-1,s=[],l=i._tokenizer||o.parser[i.contentType](i.start),u=l.events,c=[],d={},f=-1,p=i,h=0,m=0,g=[m];p;){for(;e[++a][1]!==p;);s.push(a),p._tokenizer||(n=o.sliceStream(p),p.next||n.push(null),r&&l.defineSkip(p.start),p._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(n),p._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),r=p,p=p.next}for(p=i;++f<u.length;)"exit"===u[f][0]&&"enter"===u[f-1][0]&&u[f][1].type===u[f-1][1].type&&u[f][1].start.line!==u[f][1].end.line&&(m=f+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(l.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),f=g.length;f--;){var v=u.slice(g[f],g[f+1]),y=s.pop();c.unshift([y,y+v.length-1]),EC(e,y,2,v)}for(f=-1;++f<c.length;)d[h+c[f][0]]=h+c[f][1],h+=c[f][1]-c[f][0]-1;return d}var ZC={tokenize:function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):zC(t)?e.check(QC,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return KC(e),e}},QC={tokenize:function(e,t,n){var r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),GC(e,i,"linePrefix")};function i(i){if(null===i||zC(i))return n(i);var o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0};var JC={tokenize:function(e){var t=this,n=e.attempt(XC,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,GC(e,e.attempt(this.parser.constructs.flow,r,e.attempt(ZC,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};var eE={resolveAll:iE()},tE=rE("string"),nE=rE("text");function rE(e){return{tokenize:function(t){var n=this,r=this.parser.constructs[e],i=t.attempt(r,o,a);return o;function o(e){return l(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;var t=r[e],i=-1;if(t)for(;++i<t.length;){var o=t[i];if(!o.previous||o.previous.call(n,n.previous))return!0}return!1}},resolveAll:iE("text"===e?oE:void 0)}}function iE(e){return function(t,n){var r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function oE(e,t){for(var n=0;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){for(var r=e[n-1][1],i=t.sliceStream(r),o=i.length,a=-1,s=0,l=void 0;o--;){var u=i[o];if("string"===typeof u){for(a=u.length;32===u.charCodeAt(a-1);)s++,a--;if(a)break;a=-1}else if(-2===u)l=!0,s++;else if(-1!==u){o++;break}}if(s){var c={type:n===e.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-s,offset:r.end.offset-s,_index:r.start._index+o,_bufferIndex:o?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},c.start),r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}function aE(e,t,n){for(var r=[],i=-1;++i<e.length;){var o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}function sE(e,t,n){var r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},o=[],a=[],s=[],l={consume:function(e){zC(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,y()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e,!0},enter:function(e,t){var n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),s.push(n),n},exit:function(e){var t=s.pop();return t.end=f(),u.events.push(["exit",t,u]),t},attempt:g((function(e,t){v(e,t.from)})),check:g(m),interrupt:g(m,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:function(e,t){return function(e,t){var n,r=-1,i=[];for(;++r<e.length;){var o=e[r],a=void 0;if("string"===typeof o)a=o;else switch(o){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&n)continue;a=" ";break;default:a=String.fromCharCode(o)}n=-2===o,i.push(a)}return i.join("")}(d(e),t)},now:f,defineSkip:function(e){i[e.line]=e.column,y()},write:function(e){if(a=kC(a,e),p(),null!==a[a.length-1])return[];return v(t,0),u.events=aE(o,u.events,u),u.events}},c=t.tokenize.call(u,l);return t.resolveAll&&o.push(t),u;function d(e){return function(e,t){var n,r=t.start._index,i=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;r===o?n=[e[r].slice(i,a)]:(n=e.slice(r,o),i>-1&&(n[0]=n[0].slice(i)),a>0&&n.push(e[o].slice(0,a)));return n}(a,e)}function f(){return Object.assign({},r)}function p(){for(var e;r._index<a.length;){var t=a[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)h(t.charCodeAt(r._bufferIndex));else h(t)}}function h(e){void 0,e,c=c(e)}function m(e,t){t.restore()}function g(e,t){return function(n,i,o){var a,c,d,p;return Array.isArray(n)?h(n):"tokenize"in n?h([n]):function(e){return t;function t(t){var n=null!==t&&e[t],r=null!==t&&e.null;return h([].concat(z(Array.isArray(n)?n:n?[n]:[]),z(Array.isArray(r)?r:r?[r]:[])))(t)}}(n);function h(e){return a=e,c=0,0===e.length?o:m(e[c])}function m(e){return function(n){p=function(){var e=f(),t=u.previous,n=u.currentConstruct,i=u.events.length,o=Array.from(s);return{restore:a,from:i};function a(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,s=o,y()}}(),d=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return v(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,l,g,v)(n)}}function g(t){return!0,e(d,p),i}function v(e){return!0,p.restore(),++c<a.length?m(a[c]):o}}}function v(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&EC(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function y(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}var lE={name:"thematicBreak",tokenize:function(e,t,n){var r,i=0;return function(t){return e.enter("thematicBreak"),r=t,o(t)};function o(s){return s===r?(e.enter("thematicBreakSequence"),a(s)):jC(s)?GC(e,o,"whitespace")(s):i<3||null!==s&&!zC(s)?n(s):(e.exit("thematicBreak"),t(s))}function a(t){return t===r?(e.consume(t),i++,a):(e.exit("thematicBreakSequence"),o(t))}}};var uE={name:"list",tokenize:function(e,t,n){var r=this,i=r.events[r.events.length-1],o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return function(t){var i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:IC(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(lE,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return IC(t)&&++a<10?(e.consume(t),s):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(XC,r.interrupt?n:u,e.attempt(cE,d,c))}function u(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function c(t){return jC(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){var r=this;return r.containerState._closeFlow=void 0,e.check(XC,i,o);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,GC(e,t,"listItemIndent",r.containerState.size+1)(n)}function o(n){return r.containerState.furtherBlankLines||!jC(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(dE,t,a)(n))}function a(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,GC(e,e.attempt(uE,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},cE={tokenize:function(e,t,n){var r=this;return GC(e,(function(e){var i=r.events[r.events.length-1];return!jC(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},dE={tokenize:function(e,t,n){var r=this;return GC(e,(function(e){var i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};var fE={name:"blockQuote",tokenize:function(e,t,n){var r=this;return function(t){if(62===t){var o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return jC(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return GC(e,e.attempt(fE,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},exit:function(e){e.exit("blockQuote")}};function pE(e,t,n,r,i,o,a,s,l){var u=l||Number.POSITIVE_INFINITY,c=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(null===t||41===t||NC(t))return n(t);return e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),h(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),f(n))}function f(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||zC(t)?n(t):(e.consume(t),92===t?p:f)}function p(t){return 60===t||62===t||92===t?(e.consume(t),f):f(t)}function h(i){return 40===i?++c>u?n(i):(e.consume(i),h):41===i?c--?(e.consume(i),h):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(i)):null===i||BC(i)?c?n(i):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(i)):NC(i)?n(i):(e.consume(i),92===i?m:h)}function m(t){return 40===t||41===t||92===t?(e.consume(t),h):h(t)}}function hE(e,t,n,r,i,o){var a,s=this,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),u};function u(d){return null===d||91===d||93===d&&!a||94===d&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs||l>999?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):zC(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(t){return null===t||91===t||93===t||zC(t)||l++>999?(e.exit("chunkString"),u(t)):(e.consume(t),a=a||!jC(t),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,c):c(t)}}function mE(e,t,n,r,i,o){var a;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,s};function s(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),l(n))}function l(t){return t===a?(e.exit(o),s(a)):null===t?n(t):zC(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),GC(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===a||null===t||zC(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?c:u)}function c(t){return t===a||92===t?(e.consume(t),u):u(t)}}function gE(e,t){var n;return function r(i){if(zC(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(jC(i))return GC(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function vE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var yE={name:"definition",tokenize:function(e,t,n){var r,i=this;return function(t){return e.enter("definition"),hE.call(i,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function o(t){return r=vE(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),gE(e,pE(e,e.attempt(bE,GC(e,a,"whitespace"),GC(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function a(o){return null===o||zC(o)?(e.exit("definition"),i.parser.defined.includes(r)||i.parser.defined.push(r),t(o)):n(o)}}},bE={tokenize:function(e,t,n){return function(t){return BC(t)?gE(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?mE(e,GC(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||zC(e)?t(e):n(e)}},partial:!0};var xE={name:"codeIndented",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("codeIndented"),GC(e,i,"linePrefix",5)(t)};function i(e){var t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?s(t):zC(t)?e.attempt(wE,o,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||zC(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},wE={tokenize:function(e,t,n){var r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):zC(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):GC(e,o,"linePrefix",5)(t)}function o(e){var o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):zC(e)?i(e):n(e)}},partial:!0};var _E={name:"headingAtx",tokenize:function(e,t,n){var r=this,i=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(t)};function o(s){return 35===s&&i++<6?(e.consume(s),o):null===s||BC(s)?(e.exit("atxHeadingSequence"),r.interrupt?t(s):a(s)):n(s)}function a(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||zC(n)?(e.exit("atxHeading"),t(n)):jC(n)?GC(e,a,"whitespace")(n):(e.enter("atxHeadingText"),l(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),a(t))}function l(t){return null===t||35===t||BC(t)?(e.exit("atxHeadingText"),a(t)):(e.consume(t),l)}},resolve:function(e,t){var n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&EC(e,o,i-o+1,[["enter",n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},t],["enter",r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},t],["exit",r,t],["exit",n,t]]);return e}};var SE={name:"setextUnderline",tokenize:function(e,t,n){var r,i,o=this,a=o.events.length;for(;a--;)if("lineEnding"!==o.events[a][1].type&&"linePrefix"!==o.events[a][1].type&&"content"!==o.events[a][1].type){i="paragraph"===o.events[a][1].type;break}return function(t){if(!o.parser.lazy[o.now().line]&&(o.interrupt||i))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),r=t,s(t);return n(t)};function s(t){return t===r?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),GC(e,l,"lineSuffix")(t))}function l(r){return null===r||zC(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){var n,r,i,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),i||"definition"!==e[o][1].type||(i=o);var a={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",a,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e}};var CE=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],EE=["pre","script","style","textarea"],kE={name:"htmlFlow",tokenize:function(e,t,n){var r,i,o,a,s,l=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),u};function u(a){return 33===a?(e.consume(a),c):47===a?(e.consume(a),p):63===a?(e.consume(a),r=3,l.interrupt?t:L):RC(a)?(e.consume(a),o=String.fromCharCode(a),i=!0,h):n(a)}function c(i){return 45===i?(e.consume(i),r=2,d):91===i?(e.consume(i),r=5,o="CDATA[",a=0,f):RC(i)?(e.consume(i),r=4,l.interrupt?t:L):n(i)}function d(r){return 45===r?(e.consume(r),l.interrupt?t:L):n(r)}function f(r){return r===o.charCodeAt(a++)?(e.consume(r),a===o.length?l.interrupt?t:k:f):n(r)}function p(t){return RC(t)?(e.consume(t),o=String.fromCharCode(t),h):n(t)}function h(a){return null===a||47===a||62===a||BC(a)?47!==a&&i&&EE.includes(o.toLowerCase())?(r=1,l.interrupt?t(a):k(a)):CE.includes(o.toLowerCase())?(r=6,47===a?(e.consume(a),m):l.interrupt?t(a):k(a)):(r=7,l.interrupt&&!l.parser.lazy[l.now().line]?n(a):i?v(a):g(a)):45===a||LC(a)?(e.consume(a),o+=String.fromCharCode(a),h):n(a)}function m(r){return 62===r?(e.consume(r),l.interrupt?t:k):n(r)}function g(t){return jC(t)?(e.consume(t),g):C(t)}function v(t){return 47===t?(e.consume(t),C):58===t||95===t||RC(t)?(e.consume(t),y):jC(t)?(e.consume(t),v):C(t)}function y(t){return 45===t||46===t||58===t||95===t||LC(t)?(e.consume(t),y):b(t)}function b(t){return 61===t?(e.consume(t),x):jC(t)?(e.consume(t),b):v(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,w):jC(t)?(e.consume(t),x):(s=null,_(t))}function w(t){return null===t||zC(t)?n(t):t===s?(e.consume(t),S):(e.consume(t),w)}function _(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||BC(t)?b(t):(e.consume(t),_)}function S(e){return 47===e||62===e||jC(e)?v(e):n(e)}function C(t){return 62===t?(e.consume(t),E):n(t)}function E(t){return jC(t)?(e.consume(t),E):null===t||zC(t)?k(t):n(t)}function k(t){return 45===t&&2===r?(e.consume(t),T):60===t&&1===r?(e.consume(t),R):62===t&&4===r?(e.consume(t),D):63===t&&3===r?(e.consume(t),L):93===t&&5===r?(e.consume(t),O):!zC(t)||6!==r&&7!==r?null===t||zC(t)?P(t):(e.consume(t),k):e.check(PE,D,P)(t)}function P(t){return e.exit("htmlFlowData"),M(t)}function M(t){return null===t?F(t):zC(t)?e.attempt({tokenize:A,partial:!0},M,F)(t):(e.enter("htmlFlowData"),k(t))}function A(e,t,n){return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r};function r(e){return l.parser.lazy[l.now().line]?n(e):t(e)}}function T(t){return 45===t?(e.consume(t),L):k(t)}function R(t){return 47===t?(e.consume(t),o="",I):k(t)}function I(t){return 62===t&&EE.includes(o.toLowerCase())?(e.consume(t),D):RC(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),I):k(t)}function O(t){return 93===t?(e.consume(t),L):k(t)}function L(t){return 62===t?(e.consume(t),D):45===t&&2===r?(e.consume(t),L):k(t)}function D(t){return null===t||zC(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),D)}function F(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){var t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},PE={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(XC,t,n)}},partial:!0};var ME={name:"codeFenced",tokenize:function(e,t,n){var r,i=this,o={tokenize:function(e,t,n){var i=0;return GC(e,o,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function o(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a(t)}function a(t){return t===r?(e.consume(t),i++,a):i<u?n(t):(e.exit("codeFencedFenceSequence"),GC(e,s,"whitespace")(t))}function s(r){return null===r||zC(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},a={tokenize:function(e,t,n){var r=this;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o}function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},s=this.events[this.events.length-1],l=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,u=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),r=t,c(t)};function c(t){return t===r?(e.consume(t),u++,c):(e.exit("codeFencedFenceSequence"),u<3?n(t):GC(e,d,"whitespace")(t))}function d(t){return null===t||zC(t)?m(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||BC(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),GC(e,p,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),f)}function p(t){return null===t||zC(t)?m(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||zC(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(t)):96===t&&t===r?n(t):(e.consume(t),h)}function m(n){return e.exit("codeFencedFence"),i.interrupt?t(n):g(n)}function g(t){return null===t?y(t):zC(t)?e.attempt(a,e.attempt(o,y,l?GC(e,g,"linePrefix",l+1):g),y)(t):(e.enter("codeFlowValue"),v(t))}function v(t){return null===t||zC(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),v)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};var AE=document.createElement("i");function TE(e){var t="&"+e+";";AE.innerHTML=t;var n=AE.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}var RE={name:"characterReference",tokenize:function(e,t,n){var r,i,o=this,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),r=31,i=LC,u(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,i=OC,u):(e.enter("characterReferenceValue"),r=7,i=IC,u(t))}function u(s){var l;return 59===s&&a?(l=e.exit("characterReferenceValue"),i!==LC||TE(o.sliceSerialize(l))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)):i(s)&&a++<r?(e.consume(s),u):n(s)}}};var IE={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return DC(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};var OE={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),GC(e,t,"linePrefix")}}};var LE={name:"labelEnd",tokenize:function(e,t,n){var r,i,o=this,a=o.events.length;for(;a--;)if(("labelImage"===o.events[a][1].type||"labelLink"===o.events[a][1].type)&&!o.events[a][1]._balanced){r=o.events[a][1];break}return function(t){if(!r)return n(t);return r._inactive?l(t):(i=o.parser.defined.includes(vE(o.sliceSerialize({start:r.end,end:o.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s)};function s(n){return 40===n?e.attempt(DE,t,i?t:l)(n):91===n?e.attempt(FE,t,i?e.attempt(NE,t,l):l)(n):i?t(n):l(n)}function l(e){return r._balanced=!0,n(e)}},resolveTo:function(e,t){var n,r,i,o,a=e.length,s=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=a);var l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},c={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return o=kC(o=[["enter",l,t],["enter",u,t]],e.slice(r+1,r+s+3)),o=kC(o,[["enter",c,t]]),o=kC(o,aE(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),o=kC(o,[["exit",c,t],e[i-2],e[i-1],["exit",u,t]]),o=kC(o,e.slice(i+1)),o=kC(o,[["exit",l,t]]),EC(e,r,e.length,o),e},resolveAll:function(e){var t,n=-1;for(;++n<e.length;)"labelImage"!==(t=e[n][1]).type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},DE={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),gE(e,r)};function r(t){return 41===t?a(t):pE(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return BC(t)?gE(e,o)(t):a(t)}function o(t){return 34===t||39===t||40===t?mE(e,gE(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):a(t)}function a(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},FE={tokenize:function(e,t,n){var r=this;return function(t){return hE.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(vE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}}},NE={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};var BE={name:"labelStartImage",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:LE.resolveAll};function zE(e){return null===e||BC(e)||HC(e)?1:UC(e)?2:void 0}var jE={name:"attention",tokenize:function(e,t){var n,r=this.parser.constructs.attentionMarkers.null,i=this.previous,o=zE(i);return function(t){return e.enter("attentionSequence"),n=t,a(t)};function a(s){if(s===n)return e.consume(s),a;var l=e.exit("attentionSequence"),u=zE(s),c=!u||2===u&&o||r.includes(s),d=!o||2===o&&u||r.includes(i);return l._open=Boolean(42===n?c:c&&(o||!d)),l._close=Boolean(42===n?d:d&&(u||!c)),t(s)}},resolveAll:function(e,t){var n,r,i,o,a,s,l,u,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close)for(n=c;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[n][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;var d=Object.assign({},e[n][1].end),f=Object.assign({},e[c][1].start);HE(d,-s),HE(f,s),o={type:s>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[c][1].start),end:f},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[c][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[n][1].end=Object.assign({},o.start),e[c][1].start=Object.assign({},a.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=kC(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=kC(l,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=kC(l,aE(t.parser.constructs.insideSpan.null,e.slice(n+1,c),t)),l=kC(l,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[c][1].end.offset-e[c][1].start.offset?(u=2,l=kC(l,[["enter",e[c][1],t],["exit",e[c][1],t]])):u=0,EC(e,n-1,c-n+3,l),c=n+l.length-u-2;break}c=-1;for(;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e}};function HE(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}var UE={name:"autolink",tokenize:function(e,t,n){var r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return RC(t)?(e.consume(t),o):FC(t)?l(t):n(t)}function o(e){return 43===e||45===e||46===e||LC(e)?a(e):l(e)}function a(t){return 58===t?(e.consume(t),s):(43===t||45===t||46===t||LC(t))&&r++<32?(e.consume(t),a):l(t)}function s(t){return 62===t?(e.exit("autolinkProtocol"),f(t)):null===t||32===t||60===t||NC(t)?n(t):(e.consume(t),s)}function l(t){return 64===t?(e.consume(t),r=0,u):FC(t)?(e.consume(t),l):n(t)}function u(e){return LC(e)?c(e):n(e)}function c(t){return 46===t?(e.consume(t),r=0,u):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",f(t)):d(t)}function d(t){return(45===t||LC(t))&&r++<63?(e.consume(t),45===t?d:c):n(t)}function f(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};var VE={name:"htmlText",tokenize:function(e,t,n){var r,i,o,a,s=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),u):47===t?(e.consume(t),_):63===t?(e.consume(t),x):RC(t)?(e.consume(t),E):n(t)}function u(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i="CDATA[",o=0,m):RC(t)?(e.consume(t),b):n(t)}function c(t){return 45===t?(e.consume(t),d):n(t)}function d(t){return null===t||62===t?n(t):45===t?(e.consume(t),f):p(t)}function f(e){return null===e||62===e?n(e):p(e)}function p(t){return null===t?n(t):45===t?(e.consume(t),h):zC(t)?(a=p,O(t)):(e.consume(t),p)}function h(t){return 45===t?(e.consume(t),D):p(t)}function m(t){return t===i.charCodeAt(o++)?(e.consume(t),o===i.length?g:m):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),v):zC(t)?(a=g,O(t)):(e.consume(t),g)}function v(t){return 93===t?(e.consume(t),y):g(t)}function y(t){return 62===t?D(t):93===t?(e.consume(t),y):g(t)}function b(t){return null===t||62===t?D(t):zC(t)?(a=b,O(t)):(e.consume(t),b)}function x(t){return null===t?n(t):63===t?(e.consume(t),w):zC(t)?(a=x,O(t)):(e.consume(t),x)}function w(e){return 62===e?D(e):x(e)}function _(t){return RC(t)?(e.consume(t),S):n(t)}function S(t){return 45===t||LC(t)?(e.consume(t),S):C(t)}function C(t){return zC(t)?(a=C,O(t)):jC(t)?(e.consume(t),C):D(t)}function E(t){return 45===t||LC(t)?(e.consume(t),E):47===t||62===t||BC(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),D):58===t||95===t||RC(t)?(e.consume(t),P):zC(t)?(a=k,O(t)):jC(t)?(e.consume(t),k):D(t)}function P(t){return 45===t||46===t||58===t||95===t||LC(t)?(e.consume(t),P):M(t)}function M(t){return 61===t?(e.consume(t),A):zC(t)?(a=M,O(t)):jC(t)?(e.consume(t),M):k(t)}function A(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,T):zC(t)?(a=A,O(t)):jC(t)?(e.consume(t),A):(e.consume(t),r=void 0,I)}function T(t){return t===r?(e.consume(t),R):null===t?n(t):zC(t)?(a=T,O(t)):(e.consume(t),T)}function R(e){return 62===e||47===e||BC(e)?k(e):n(e)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||BC(t)?k(t):(e.consume(t),I)}function O(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),GC(e,L,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function L(t){return e.enter("htmlTextData"),a(t)}function D(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}};var GE={name:"labelStartLink",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:LE.resolveAll};var WE={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return zC(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};var $E,qE,XE,KE,YE,ZE={name:"codeText",tokenize:function(e,t,n){var r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),o++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):96===t?(i=e.enter("codeTextSequence"),r=0,u(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):zC(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||zC(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function u(n){return 96===n?(e.consume(n),r++,u):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}},resolve:function(e){var t,n,r=e.length-4,i=3;if(("lineEnding"===e[i][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};var QE=(p($E={},42,uE),p($E,43,uE),p($E,45,uE),p($E,48,uE),p($E,49,uE),p($E,50,uE),p($E,51,uE),p($E,52,uE),p($E,53,uE),p($E,54,uE),p($E,55,uE),p($E,56,uE),p($E,57,uE),p($E,62,fE),$E),JE=p({},91,yE),ek=(p(qE={},-2,xE),p(qE,-1,xE),p(qE,32,xE),qE),tk=(p(XE={},35,_E),p(XE,42,lE),p(XE,45,[SE,lE]),p(XE,60,kE),p(XE,61,SE),p(XE,95,lE),p(XE,96,ME),p(XE,126,ME),XE),nk=(p(KE={},38,RE),p(KE,92,IE),KE),rk=(p(YE={},-5,OE),p(YE,-4,OE),p(YE,-3,OE),p(YE,33,BE),p(YE,38,RE),p(YE,42,jE),p(YE,60,[UE,VE]),p(YE,91,GE),p(YE,92,[WE,IE]),p(YE,93,LE),p(YE,95,jE),p(YE,96,ZE),YE),ik={null:[jE,eE]},ok={null:[42,95]},ak={null:[]};var sk=/[\0\t\n\r]/g;function lk(e,t){var n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCharCode(n)}var uk=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ck(e){return e.replace(uk,dk)}function dk(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){var r=n.charCodeAt(1),i=120===r||88===r;return lk(n.slice(i?2:1),i?16:10)}return TE(n)||e}var fk={}.hasOwnProperty,pk=function(t,n,r){return"string"!==typeof n&&(r=n,n=void 0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=hk({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(re),autolinkProtocol:M,autolinkEmail:M,atxHeading:l(J),blockQuote:l(X),characterEscape:M,characterReference:M,codeFenced:l(K),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:l(K,u),codeText:l(Y,u),codeTextData:M,data:M,codeFlowValue:M,definition:l(Z),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:l(Q),hardBreakEscape:l(ee),hardBreakTrailing:l(ee),htmlFlow:l(te,u),htmlFlowData:M,htmlText:l(te,u),htmlTextData:M,image:l(ne),label:u,link:l(re),listItem:l(oe),listItemValue:m,listOrdered:l(ie,h),listUnordered:l(ie),paragraph:l(ae),reference:U,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:l(J),strong:l(se),thematicBreak:l(ue)},exit:{atxHeading:d(),atxHeadingSequence:C,autolink:d(),autolinkEmail:q,autolinkProtocol:$,blockQuote:d(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:W,codeFenced:d(b),codeFencedFence:y,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:A,codeIndented:d(x),codeText:d(L),codeTextData:A,data:A,definition:d(),definitionDestinationString:S,definitionLabelString:w,definitionTitleString:_,emphasis:d(),hardBreakEscape:d(R),hardBreakTrailing:d(R),htmlFlow:d(I),htmlFlowData:A,htmlText:d(O),htmlTextData:A,image:d(F),label:B,labelText:N,lineEnding:T,link:d(D),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:V,resourceDestinationString:z,resourceTitleString:j,resource:H,setextHeading:d(P),setextHeadingLineSequence:k,setextHeadingText:E,strong:d(),thematicBreak:d()}},e.mdastExtensions||[]),n={};return r;function r(e){for(var n={type:"root",children:[]},r=[],l=[],d={stack:[n],tokenStack:r,config:t,enter:c,exit:f,buffer:u,resume:p,setData:o,getData:a},h=-1;++h<e.length;){if("listOrdered"===e[h][1].type||"listUnordered"===e[h][1].type)if("enter"===e[h][0])l.push(h);else h=i(e,l.pop(),h)}for(h=-1;++h<e.length;){var m=t[e[h][0]];fk.call(m,e[h][1].type)&&m[e[h][1].type].call(Object.assign({sliceSerialize:e[h][2].sliceSerialize},d),e[h][1])}if(r.length>0){var g=r[r.length-1];(g[1]||gk).call(d,void 0,g[0])}for(n.position={start:s(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:s(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},h=-1;++h<t.transforms.length;)n=t.transforms[h](n)||n;return n}function i(e,t,n){for(var r,i,o,a,s=t-1,l=-1,u=!1;++s<=n;){var c=e[s];if("listUnordered"===c[1].type||"listOrdered"===c[1].type||"blockQuote"===c[1].type?("enter"===c[0]?l++:l--,a=void 0):"lineEndingBlank"===c[1].type?"enter"===c[0]&&(!r||a||l||o||(o=s),a=void 0):"linePrefix"===c[1].type||"listItemValue"===c[1].type||"listItemMarker"===c[1].type||"listItemPrefix"===c[1].type||"listItemPrefixWhitespace"===c[1].type||(a=void 0),!l&&"enter"===c[0]&&"listItemPrefix"===c[1].type||-1===l&&"exit"===c[0]&&("listUnordered"===c[1].type||"listOrdered"===c[1].type)){if(r){var d=s;for(i=void 0;d--;){var f=e[d];if("lineEnding"===f[1].type||"lineEndingBlank"===f[1].type){if("exit"===f[0])continue;i&&(e[i][1].type="lineEndingBlank",u=!0),f[1].type="lineEnding",i=d}else if("linePrefix"!==f[1].type&&"blockQuotePrefix"!==f[1].type&&"blockQuotePrefixWhitespace"!==f[1].type&&"blockQuoteMarker"!==f[1].type&&"listItemIndent"!==f[1].type)break}o&&(!i||o<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:c[1].end),e.splice(i||s,0,["exit",r,c[2]]),s++,n++}"listItemPrefix"===c[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},c[1].start)},e.splice(s,0,["enter",r,c[2]]),s++,n++,o=void 0,a=!0)}}return e[t][1]._spread=u,n}function o(e,t){n[e]=t}function a(e){return n[e]}function s(e){return{line:e.line,column:e.column,offset:e.offset}}function l(e,t){return n;function n(n){c.call(this,e(n),n),t&&t.call(this,n)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:s(t.start)},e}function d(e){return t;function t(t){e&&e.call(this,t),f.call(this,t)}}function f(e,t){var n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+$S({start:e.start,end:e.end})+"): it\u2019s not open");return r[0].type!==e.type&&(t?t.call(this,e,r[0]):(r[1]||gk).call(this,e,r[0])),n.position.end=s(e.end),n}function p(){return _C(this.stack.pop())}function h(){o("expectingFirstListItemValue",!0)}function m(e){a("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),o("expectingFirstListItemValue"))}function g(){var e=this.resume();this.stack[this.stack.length-1].lang=e}function v(){var e=this.resume();this.stack[this.stack.length-1].meta=e}function y(){a("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function b(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),o("flowCodeInside")}function x(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function w(e){var t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=vE(this.sliceSerialize(e)).toLowerCase()}function _(){var e=this.resume();this.stack[this.stack.length-1].title=e}function S(){var e=this.resume();this.stack[this.stack.length-1].url=e}function C(e){var t=this.stack[this.stack.length-1];if(!t.depth){var n=this.sliceSerialize(e).length;t.depth=n}}function E(){o("setextHeadingSlurpLineEnding",!0)}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function P(){o("setextHeadingSlurpLineEnding")}function M(e){var t=this.stack[this.stack.length-1],n=t.children[t.children.length-1];n&&"text"===n.type||((n=le()).position={start:s(e.start)},t.children.push(n)),this.stack.push(n)}function A(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=s(e.end)}function T(e){var n=this.stack[this.stack.length-1];if(a("atHardBreak"))return n.children[n.children.length-1].position.end=s(e.end),void o("atHardBreak");!a("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(M.call(this,e),A.call(this,e))}function R(){o("atHardBreak",!0)}function I(){var e=this.resume();this.stack[this.stack.length-1].value=e}function O(){var e=this.resume();this.stack[this.stack.length-1].value=e}function L(){var e=this.resume();this.stack[this.stack.length-1].value=e}function D(){var e=this.stack[this.stack.length-1];a("inReference")?(e.type+="Reference",e.referenceType=a("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),o("referenceType")}function F(){var e=this.stack[this.stack.length-1];a("inReference")?(e.type+="Reference",e.referenceType=a("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),o("referenceType")}function N(e){var t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=ck(n),t.identifier=vE(n).toLowerCase()}function B(){var e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];o("inReference",!0),"link"===n.type?n.children=e.children:n.alt=t}function z(){var e=this.resume();this.stack[this.stack.length-1].url=e}function j(){var e=this.resume();this.stack[this.stack.length-1].title=e}function H(){o("inReference")}function U(){o("referenceType","collapsed")}function V(e){var t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=vE(this.sliceSerialize(e)).toLowerCase(),o("referenceType","full")}function G(e){o("characterReferenceType",e.type)}function W(e){var t,n=this.sliceSerialize(e),r=a("characterReferenceType");r?(t=lk(n,"characterReferenceMarkerNumeric"===r?10:16),o("characterReferenceType")):t=TE(n);var i=this.stack.pop();i.value+=t,i.position.end=s(e.end)}function $(e){A.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function q(e){A.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function X(){return{type:"blockquote",children:[]}}function K(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function Z(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Q(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:void 0,children:[]}}function ee(){return{type:"break"}}function te(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function re(){return{type:"link",title:null,url:"",children:[]}}function ie(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function oe(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ae(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function le(){return{type:"text",value:""}}function ue(){return{type:"thematicBreak"}}}(r)(function(e){for(;!KC(e););return e}(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=MC([e].concat(t.extensions||[])),r={defined:[],lazy:{},constructs:n,content:i(WC),document:i($C),flow:i(JC),string:i(tE),text:i(nE)};return r;function i(e){return function(t){return sE(r,e,t)}}}(r).document().write(function(){var e,t=1,n="",r=!0;return function(i,o,a){var s,l,u,c,d,f=[];for(i=n+i.toString(o),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(sk.lastIndex=u,c=(s=sk.exec(i))&&void 0!==s.index?s.index:i.length,d=i.charCodeAt(c),!s){n=i.slice(u);break}if(10===d&&u===c&&e)f.push(-3),e=void 0;else switch(e&&(f.push(-5),e=void 0),u<c&&(f.push(i.slice(u,c)),t+=c-u),d){case 0:f.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),f.push(-2);t++<l;)f.push(-1);break;case 10:f.push(-4),t=1;break;default:e=!0,t=1}u=c+1}return a&&(e&&f.push(-5),n&&f.push(n),f.push(null)),f}}()(t,n,!0))))};function hk(e,t){for(var n=-1;++n<t.length;){var r=t[n];Array.isArray(r)?hk(e,r):mk(e,r)}return e}function mk(e,t){var n;for(n in t)if(fk.call(t,n)){var r="canContainEols"===n||"transforms"===n,i=(fk.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),o=t[n];o&&(r?e[n]=[].concat(z(i),z(o)):Object.assign(i,o))}}function gk(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+$S({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+$S({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+$S({start:t.start,end:t.end})+") is still open")}var vk=function(e){var t=this;Object.assign(this,{Parser:function(n){var r=t.data("settings");return pk(n,Object.assign({},r,e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}})},yk=function(e,t,n){var r={type:String(e)};return void 0!==n&&null!==n||"string"!==typeof t&&!Array.isArray(t)?Object.assign(r,t):n=t,Array.isArray(n)?r.children=n:void 0!==n&&null!==n&&(r.value=String(n)),r},bk=function(e){if(void 0===e||null===e)return _k;if("string"===typeof e)return function(e){return wk(t);function t(t){return t&&t.type===e}}(e);if("object"===typeof e)return Array.isArray(e)?xk(e):function(e){return wk(t);function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return wk(e);throw new Error("Expected function, string, or object as test")};function xk(e){for(var t=[],n=-1;++n<e.length;)t[n]=bk(e[n]);return wk((function(){for(var e=-1,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++e<t.length;){var o;if((o=t[e]).call.apply(o,[this].concat(r)))return!0}return!1}))}function wk(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Boolean(e.call.apply(e,[this].concat(n)))}}function _k(){return!0}var Sk=function(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null);var i=bk(t),o=r?-1:1;!function e(a,s,l){var u,c="object"===typeof a&&null!==a?a:{};"string"===typeof c.type&&(u="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+c.type+(u?"<"+u+">":"")+")"}));return d;function d(){var u,c,d,f=[];if((!t||i(a,s,l[l.length-1]||null))&&(f=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[true,e];return[e]}(n(a,l)),false===f[0]))return f;if(a.children&&"skip"!==f[0])for(c=(r?a.children.length:-1)+o,d=l.concat(a);c>-1&&c<a.children.length;){if(false===(u=e(a.children[c],c,d)())[0])return u;c="number"===typeof u[1]?u[1]:c+o}return f}}(e,null,[])()};var Ck=function(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),Sk(e,t,(function(e,t){var r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}),r)},Ek=Pk("start"),kk=Pk("end");function Pk(e){return function(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}var Mk={}.hasOwnProperty;function Ak(e){return String(e||"").toUpperCase()}var Tk={}.hasOwnProperty;function Rk(e,t){var n=t.data||{};return"value"in t&&!(Tk.call(n,"hName")||Tk.call(n,"hProperties")||Tk.call(n,"hChildren"))?e.augment(t,yk("text",t.value)):e(t,"div",Lk(e,t))}function Ik(e,t,n){var r,i=t&&t.type;if(!i)throw new Error("Expected node, got `"+t+"`");return("function"===typeof(r=Tk.call(e.handlers,i)?e.handlers[i]:e.passThrough&&e.passThrough.includes(i)?Ok:e.unknownHandler)?r:Rk)(e,t,n)}function Ok(e,t){return"children"in t?m(m({},t),{},{children:Lk(e,t)}):t}function Lk(e,t){var n=[];if("children"in t)for(var r=t.children,i=-1;++i<r.length;){var o=Ik(e,r[i],t);if(o){if(i&&"break"===r[i-1].type&&(Array.isArray(o)||"text"!==o.type||(o.value=o.value.replace(/^\s+/,"")),!Array.isArray(o)&&"element"===o.type)){var a=o.children[0];a&&"text"===a.type&&(a.value=a.value.replace(/^\s+/,""))}Array.isArray(o)?n.push.apply(n,z(o)):n.push(o)}}return n}function Dk(e){for(var t=[],n=-1,r=0,i=0;++n<e.length;){var o=e.charCodeAt(n),a="";if(37===o&&LC(e.charCodeAt(n+1))&&LC(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){var s=e.charCodeAt(n+1);o<56320&&s>56319&&s<57344?(a=String.fromCharCode(o,s),i=1):a="\ufffd"}else a=String.fromCharCode(o);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Fk(e,t){var n=[],r=-1;for(t&&n.push(yk("text","\n"));++r<e.length;)r&&n.push(yk("text","\n")),n.push(e[r]);return t&&e.length>0&&n.push(yk("text","\n")),n}function Nk(e,t){var n,r=String(t.identifier),i=Dk(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);-1===o?(e.footnoteOrder.push(r),e.footnoteCounts[r]=1,n=e.footnoteOrder.length):(e.footnoteCounts[r]++,n=o+1);var a=e.footnoteCounts[r];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+i,id:e.clobberPrefix+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[yk("text",String(n))])])}function Bk(e,t){var n=t.referenceType,r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return yk("text","!["+t.alt+r);var i=Lk(e,t),o=i[0];o&&"text"===o.type?o.value="["+o.value:i.unshift(yk("text","["));var a=i[i.length-1];return a&&"text"===a.type?a.value+=r:i.push(yk("text",r)),i}function zk(e){var t=e.spread;return void 0===t||null===t?e.children.length>1:t}function jk(e,t,n){var r=0,i=e.length;if(t)for(var o=e.codePointAt(r);9===o||32===o;)r++,o=e.codePointAt(r);if(n)for(var a=e.codePointAt(i-1);9===a||32===a;)i--,a=e.codePointAt(i-1);return i>r?e.slice(r,i):""}var Hk={blockquote:function(e,t){return e(t,"blockquote",Fk(Lk(e,t),!0))},break:function(e,t){return[e(t,"br"),yk("text","\n")]},code:function(e,t){var n=t.value?t.value+"\n":"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);var o=e(t,"code",i,[yk("text",n)]);return t.meta&&(o.data={meta:t.meta}),e(t.position,"pre",[o])},delete:function(e,t){return e(t,"del",Lk(e,t))},emphasis:function(e,t){return e(t,"em",Lk(e,t))},footnoteReference:Nk,footnote:function(e,t){for(var n=e.footnoteById,r=1;r in n;)r++;var i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},Nk(e,{type:"footnoteReference",identifier:i,position:t.position})},heading:function(e,t){return e(t,"h"+t.depth,Lk(e,t))},html:function(e,t){return e.dangerous?e.augment(t,yk("raw",t.value)):null},imageReference:function(e,t){var n=e.definition(t.identifier);if(!n)return Bk(e,t);var r={src:Dk(n.url||""),alt:t.alt};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"img",r)},image:function(e,t){var n={src:Dk(t.url),alt:t.alt};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"img",n)},inlineCode:function(e,t){return e(t,"code",[yk("text",t.value.replace(/\r?\n|\r/g," "))])},linkReference:function(e,t){var n=e.definition(t.identifier);if(!n)return Bk(e,t);var r={href:Dk(n.url||"")};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"a",r,Lk(e,t))},link:function(e,t){var n={href:Dk(t.url)};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"a",n,Lk(e,t))},listItem:function(e,t,n){var r,i=Lk(e,t),o=n?function(e){var t=e.spread,n=e.children,r=-1;for(;!t&&++r<n.length;)t=zk(n[r]);return Boolean(t)}(n):zk(t),a={},s=[];"boolean"===typeof t.checked&&(i[0]&&"element"===i[0].type&&"p"===i[0].tagName?r=i[0]:(r=e(null,"p",[]),i.unshift(r)),r.children.length>0&&r.children.unshift(yk("text"," ")),r.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),a.className=["task-list-item"]);for(var l=-1;++l<i.length;){var u=i[l];(o||0!==l||"element"!==u.type||"p"!==u.tagName)&&s.push(yk("text","\n")),"element"!==u.type||"p"!==u.tagName||o?s.push(u):s.push.apply(s,z(u.children))}var c=i[i.length-1];return!c||!o&&"tagName"in c&&"p"===c.tagName||s.push(yk("text","\n")),e(t,"li",a,s)},list:function(e,t){var n={},r=t.ordered?"ol":"ul",i=Lk(e,t),o=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++o<i.length;){var a=i[o];if("element"===a.type&&"li"===a.tagName&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Fk(i,!0))},paragraph:function(e,t){return e(t,"p",Lk(e,t))},root:function(e,t){return e.augment(t,yk("root",Fk(Lk(e,t))))},strong:function(e,t){return e(t,"strong",Lk(e,t))},table:function(e,t){for(var n=t.children,r=-1,i=t.align||[],o=[];++r<n.length;){for(var a=n[r].children,s=0===r?"th":"td",l=[],u=-1,c=t.align?i.length:a.length;++u<c;){var d=a[u];l.push(e(d,s,{align:i[u]},d?Lk(e,d):[]))}o[r]=e(n[r],"tr",Fk(l,!0))}return e(t,"table",Fk([e(o[0].position,"thead",Fk([o[0]],!0))].concat(o[1]?e({start:Ek(o[1]),end:kk(o[o.length-1])},"tbody",Fk(o.slice(1),!0)):[]),!0))},text:function(e,t){return e.augment(t,yk("text",function(e){for(var t=String(e),n=/\r?\n|\r/g,r=n.exec(t),i=0,o=[];r;)o.push(jk(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(jk(t.slice(i),i>0,!1)),o.join("")}(String(t.value))))},thematicBreak:function(e,t){return e(t,"hr")},toml:Uk,yaml:Uk,definition:Uk,footnoteDefinition:Uk};function Uk(){return null}var Vk={}.hasOwnProperty;function Gk(e,t){var n=t||{},r=n.allowDangerousHtml||!1,i={};return a.dangerous=r,a.clobberPrefix=void 0===n.clobberPrefix||null===n.clobberPrefix?"user-content-":n.clobberPrefix,a.footnoteLabel=n.footnoteLabel||"Footnotes",a.footnoteLabelTagName=n.footnoteLabelTagName||"h2",a.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},a.footnoteBackLabel=n.footnoteBackLabel||"Back to content",a.definition=function(e){var t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return Ck(e,"definition",(function(e){var n=Ak(e.identifier);n&&!Mk.call(t,n)&&(t[n]=e)})),function(e){var n=Ak(e);return n&&Mk.call(t,n)?t[n]:null}}(e),a.footnoteById=i,a.footnoteOrder=[],a.footnoteCounts={},a.augment=o,a.handlers=m(m({},Hk),n.handlers),a.unknownHandler=n.unknownHandler,a.passThrough=n.passThrough,Ck(e,"footnoteDefinition",(function(e){var t=String(e.identifier).toUpperCase();Vk.call(i,t)||(i[t]=e)})),a;function o(e,t){if(e&&"data"in e&&e.data){var n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=m(m({},t.properties),n.hProperties)),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){var r="type"in e?e:{position:e};(function(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column})(r)||(t.position={start:Ek(r),end:kk(r)})}return t}function a(e,t,n,r){return Array.isArray(n)&&(r=n,n={}),o(e,{type:"element",tagName:t,properties:n||{},children:r||[]})}}function Wk(e,t){var n=Gk(e,t),r=Ik(n,e,null),i=function(e){for(var t=-1,n=[];++t<e.footnoteOrder.length;){var r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(r){for(var i=Lk(e,r),o=String(r.identifier),a=Dk(o.toLowerCase()),s=0,l=[];++s<=e.footnoteCounts[o];){var u={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+a+(s>1?"-"+s:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"\u21a9"}]};s>1&&u.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(s)}]}),l.length>0&&l.push({type:"text",value:" "}),l.push(u)}var c=i[i.length-1];if(c&&"element"===c.type&&"p"===c.tagName){var d,f=c.children[c.children.length-1];f&&"text"===f.type?f.value+=" ":c.children.push({type:"text",value:" "}),(d=c.children).push.apply(d,l)}else i.push.apply(i,l);var p={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+a},children:Fk(i,!0)};r.position&&(p.position=r.position),n.push(p)}}return 0===n.length?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:m(m({},JSON.parse(JSON.stringify(e.footnoteLabelProperties))),{},{id:"footnote-label"}),children:[yk("text",e.footnoteLabel)]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:Fk(n,!0)},{type:"text",value:"\n"}]}}(n);return i&&r.children.push(yk("text","\n"),i),Array.isArray(r)?{type:"root",children:r}:r}var $k=function(e,t){return e&&"run"in e?function(e,t){return function(n,r,i){e.run(Wk(n,t),r,(function(e){i(e)}))}}(e,t):function(e){return function(t){return Wk(t,e)}}(e||t)};var qk=Ni((function e(t,n,r){Di(this,e),this.property=t,this.normal=n,r&&(this.space=r)}));function Xk(e,t){for(var n={},r={},i=-1;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new qk(n,r,t)}function Kk(e){return e.toLowerCase()}qk.prototype.property={},qk.prototype.normal={},qk.prototype.space=null;var Yk=Ni((function e(t,n){Di(this,e),this.property=t,this.attribute=n}));Yk.prototype.space=null,Yk.prototype.boolean=!1,Yk.prototype.booleanish=!1,Yk.prototype.overloadedBoolean=!1,Yk.prototype.number=!1,Yk.prototype.commaSeparated=!1,Yk.prototype.spaceSeparated=!1,Yk.prototype.commaOrSpaceSeparated=!1,Yk.prototype.mustUseProperty=!1,Yk.prototype.defined=!1;var Zk=0,Qk=oP(),Jk=oP(),eP=oP(),tP=oP(),nP=oP(),rP=oP(),iP=oP();function oP(){return Math.pow(2,++Zk)}var aP=Object.keys(t),sP=function(e){zi(r,e);var n=Gi(r);function r(e,i,o,a){var s;Di(this,r);var l=-1;if(lP(Ui(s=n.call(this,e,i)),"space",a),"number"===typeof o)for(;++l<aP.length;){var u=aP[l];lP(Ui(s),aP[l],(o&t[u])===t[u])}return s}return Ni(r)}(Yk);function lP(e,t,n){n&&(e[t]=n)}sP.prototype.defined=!0;var uP={}.hasOwnProperty;function cP(e){var t,n={},r={};for(t in e.properties)if(uP.call(e.properties,t)){var i=e.properties[t],o=new sP(t,e.transform(e.attributes||{},t),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(t)&&(o.mustUseProperty=!0),n[t]=o,r[Kk(t)]=t,r[Kk(o.attribute)]=t}return new qk(n,r,e.space)}var dP=cP({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),fP=cP({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function pP(e,t){return t in e?e[t]:t}function hP(e,t){return pP(e,t.toLowerCase())}var mP=cP({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:hP,properties:{xmlns:null,xmlnsXLink:null}}),gP=cP({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Jk,ariaAutoComplete:null,ariaBusy:Jk,ariaChecked:Jk,ariaColCount:tP,ariaColIndex:tP,ariaColSpan:tP,ariaControls:nP,ariaCurrent:null,ariaDescribedBy:nP,ariaDetails:null,ariaDisabled:Jk,ariaDropEffect:nP,ariaErrorMessage:null,ariaExpanded:Jk,ariaFlowTo:nP,ariaGrabbed:Jk,ariaHasPopup:null,ariaHidden:Jk,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nP,ariaLevel:tP,ariaLive:null,ariaModal:Jk,ariaMultiLine:Jk,ariaMultiSelectable:Jk,ariaOrientation:null,ariaOwns:nP,ariaPlaceholder:null,ariaPosInSet:tP,ariaPressed:Jk,ariaReadOnly:Jk,ariaRelevant:null,ariaRequired:Jk,ariaRoleDescription:nP,ariaRowCount:tP,ariaRowIndex:tP,ariaRowSpan:tP,ariaSelected:Jk,ariaSetSize:tP,ariaSort:null,ariaValueMax:tP,ariaValueMin:tP,ariaValueNow:tP,ariaValueText:null,role:null}}),vP=cP({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:hP,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:rP,acceptCharset:nP,accessKey:nP,action:null,allow:null,allowFullScreen:Qk,allowPaymentRequest:Qk,allowUserMedia:Qk,alt:null,as:null,async:Qk,autoCapitalize:null,autoComplete:nP,autoFocus:Qk,autoPlay:Qk,capture:Qk,charSet:null,checked:Qk,cite:null,className:nP,cols:tP,colSpan:null,content:null,contentEditable:Jk,controls:Qk,controlsList:nP,coords:tP|rP,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Qk,defer:Qk,dir:null,dirName:null,disabled:Qk,download:eP,draggable:Jk,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Qk,formTarget:null,headers:nP,height:tP,hidden:Qk,high:tP,href:null,hrefLang:null,htmlFor:nP,httpEquiv:nP,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:Qk,itemId:null,itemProp:nP,itemRef:nP,itemScope:Qk,itemType:nP,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Qk,low:tP,manifest:null,max:null,maxLength:tP,media:null,method:null,min:null,minLength:tP,multiple:Qk,muted:Qk,name:null,nonce:null,noModule:Qk,noValidate:Qk,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Qk,optimum:tP,pattern:null,ping:nP,placeholder:null,playsInline:Qk,poster:null,preload:null,readOnly:Qk,referrerPolicy:null,rel:nP,required:Qk,reversed:Qk,rows:tP,rowSpan:tP,sandbox:nP,scope:null,scoped:Qk,seamless:Qk,selected:Qk,shape:null,size:tP,sizes:null,slot:null,span:tP,spellCheck:Jk,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tP,step:null,style:null,tabIndex:tP,target:null,title:null,translate:null,type:null,typeMustMatch:Qk,useMap:null,value:Jk,width:tP,wrap:null,align:null,aLink:null,archive:nP,axis:null,background:null,bgColor:null,border:tP,borderColor:null,bottomMargin:tP,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Qk,declare:Qk,event:null,face:null,frame:null,frameBorder:null,hSpace:tP,leftMargin:tP,link:null,longDesc:null,lowSrc:null,marginHeight:tP,marginWidth:tP,noResize:Qk,noHref:Qk,noShade:Qk,noWrap:Qk,object:null,profile:null,prompt:null,rev:null,rightMargin:tP,rules:null,scheme:null,scrolling:Jk,standby:null,summary:null,text:null,topMargin:tP,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tP,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Qk,disableRemotePlayback:Qk,prefix:null,property:null,results:tP,security:null,unselectable:null}}),yP=cP({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:pP,properties:{about:iP,accentHeight:tP,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tP,amplitude:tP,arabicForm:null,ascent:tP,attributeName:null,attributeType:null,azimuth:tP,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tP,by:null,calcMode:null,capHeight:tP,className:nP,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tP,diffuseConstant:tP,direction:null,display:null,dur:null,divisor:tP,dominantBaseline:null,download:Qk,dx:null,dy:null,edgeMode:null,editable:null,elevation:tP,enableBackground:null,end:null,event:null,exponent:tP,externalResourcesRequired:null,fill:null,fillOpacity:tP,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:rP,g2:rP,glyphName:rP,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tP,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tP,horizOriginX:tP,horizOriginY:tP,id:null,ideographic:tP,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tP,k:tP,k1:tP,k2:tP,k3:tP,k4:tP,kernelMatrix:iP,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tP,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tP,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tP,overlineThickness:tP,paintOrder:null,panose1:null,path:null,pathLength:tP,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nP,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tP,pointsAtY:tP,pointsAtZ:tP,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:iP,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:iP,rev:iP,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:iP,requiredFeatures:iP,requiredFonts:iP,requiredFormats:iP,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tP,specularExponent:tP,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tP,strikethroughThickness:tP,string:null,stroke:null,strokeDashArray:iP,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tP,strokeOpacity:tP,strokeWidth:null,style:null,surfaceScale:tP,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:iP,tabIndex:tP,tableValues:null,target:null,targetX:tP,targetY:tP,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:iP,to:null,transform:null,u1:null,u2:null,underlinePosition:tP,underlineThickness:tP,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tP,values:null,vAlphabetic:tP,vMathematical:tP,vectorEffect:null,vHanging:tP,vIdeographic:tP,version:null,vertAdvY:tP,vertOriginX:tP,vertOriginY:tP,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tP,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),bP=Xk([fP,dP,mP,gP,vP],"html"),xP=Xk([fP,dP,mP,gP,yP],"svg");function wP(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return function(t){Ck(t,"element",(function(t,n,r){var i,o=r;if(e.allowedElements?i=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(i=e.disallowedElements.includes(t.tagName)),!i&&e.allowElement&&"number"===typeof n&&(i=!e.allowElement(t,n,o)),i&&"number"===typeof n){var a;if(e.unwrapDisallowed&&t.children)(a=o.children).splice.apply(a,[n,1].concat(z(t.children)));else o.children.splice(n,1);return n}}))}}var _P=n(8599);function SP(e){var t=e&&"object"===typeof e&&"text"===e.type?e.value||"":e;return"string"===typeof t&&""===t.replace(/[ \t\n\f\r]/g,"")}var CP=/^data[-\w.:]+$/i,EP=/-[a-z]/g,kP=/[A-Z]/g;function PP(e){return"-"+e.toLowerCase()}function MP(e){return e.charAt(1).toUpperCase()}var AP={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var TP=n(6426),RP=["http","https","mailto","tel"];function IP(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var r=t.indexOf(":");if(-1===r)return t;for(var i=-1;++i<RP.length;){var o=RP[i];if(r===o.length&&t.slice(0,o.length).toLowerCase()===o)return t}return-1!==(i=t.indexOf("?"))&&r>i||-1!==(i=t.indexOf("#"))&&r>i?t:"javascript:void(0)"}var OP={}.hasOwnProperty,LP=new Set(["table","thead","tbody","tfoot","tr"]);function DP(e,t){for(var n,r=[],i=-1;++i<t.children.length;)"element"===(n=t.children[i]).type?r.push(FP(e,n,i,t)):"text"===n.type?"element"===t.type&&LP.has(t.tagName)&&SP(n)||r.push(n.value):"raw"!==n.type||e.options.skipHtml||r.push(n.value);return r}function FP(e,t,n,i){var o,a=e.options,s=void 0===a.transformLinkUri?IP:a.transformLinkUri,l=e.schema,u=t.tagName,c={},d=l;if("html"===l.space&&"svg"===u&&(d=xP,e.schema=d),t.properties)for(o in t.properties)OP.call(t.properties,o)&&BP(c,o,t.properties[o],e);"ol"!==u&&"ul"!==u||e.listDepth++;var f=DP(e,t);"ol"!==u&&"ul"!==u||e.listDepth--,e.schema=l;var p,h=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},m=a.components&&OP.call(a.components,u)?a.components[u]:u,g="string"===typeof m||m===r.Fragment;if(!_P.isValidElementType(m))throw new TypeError("Component for name `".concat(u,"` not defined or is not renderable"));if(c.key=[u,h.start.line,h.start.column,n].join("-"),"a"===u&&a.linkTarget&&(c.target="function"===typeof a.linkTarget?a.linkTarget(String(c.href||""),t.children,"string"===typeof c.title?c.title:null):a.linkTarget),"a"===u&&s&&(c.href=s(String(c.href||""),t.children,"string"===typeof c.title?c.title:null)),g||"code"!==u||"element"!==i.type||"pre"===i.tagName||(c.inline=!0),g||"h1"!==u&&"h2"!==u&&"h3"!==u&&"h4"!==u&&"h5"!==u&&"h6"!==u||(c.level=Number.parseInt(u.charAt(1),10)),"img"===u&&a.transformImageUri&&(c.src=a.transformImageUri(String(c.src||""),String(c.alt||""),"string"===typeof c.title?c.title:null)),!g&&"li"===u&&"element"===i.type){var v=function(e){var t=-1;for(;++t<e.children.length;){var n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);c.checked=v&&v.properties?Boolean(v.properties.checked):null,c.index=NP(i,t),c.ordered="ol"===i.tagName}return g||"ol"!==u&&"ul"!==u||(c.ordered="ol"===u,c.depth=e.listDepth),"td"!==u&&"th"!==u||(c.align&&(c.style||(c.style={}),c.style.textAlign=c.align,delete c.align),g||(c.isHeader="th"===u)),g||"tr"!==u||"element"!==i.type||(c.isHeader=Boolean("thead"===i.tagName)),a.sourcePos&&(c["data-sourcepos"]=[(p=h).start.line,":",p.start.column,"-",p.end.line,":",p.end.column].map(String).join("")),!g&&a.rawSourcePos&&(c.sourcePosition=t.position),!g&&a.includeElementIndex&&(c.index=NP(i,t),c.siblingCount=NP(i)),g||(c.node=t),f.length>0?r.createElement(m,c,f):r.createElement(m,c)}function NP(e,t){for(var n=-1,r=0;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&r++;return r}function BP(e,t,n,r){var i=function(e,t){var n=Kk(t),r=t,i=Yk;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&CP.test(t)){if("-"===t.charAt(4)){var o=t.slice(5).replace(EP,MP);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{var a=t.slice(4);if(!EP.test(a)){var s=a.replace(kP,PP);"-"!==s.charAt(0)&&(s="-"+s),t="data"+s}}i=sP}return new i(r,t)}(r.schema,t),o=n;null!==o&&void 0!==o&&o===o&&(Array.isArray(o)&&(o=i.commaSeparated?function(e,t){var n=t||{};return(""===e[e.length-1]?[].concat(z(e),[""]):e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(o):function(e){return e.join(" ").trim()}(o)),"style"===i.property&&"string"===typeof o&&(o=function(e){var t={};try{TP(e,n)}catch(r){}return t;function n(e,n){var r="-ms-"===e.slice(0,4)?"ms-".concat(e.slice(4)):e;t[r.replace(/-([a-z])/g,zP)]=n}}(o)),i.space&&i.property?e[OP.call(AP,i.property)?AP[i.property]:i.property]=o:i.attribute&&(e[i.attribute]=o))}function zP(e,t){return t.toUpperCase()}var jP={}.hasOwnProperty,HP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function UP(e){for(var t in HP)if(jP.call(HP,t)&&jP.call(e,t)){var n=HP[t];console.warn("[react-markdown] Warning: please ".concat(n.to?"use `".concat(n.to,"` instead of"):"remove"," `").concat(t,"` (see <").concat("https://github.com/remarkjs/react-markdown/blob/main/changelog.md","#").concat(n.id,"> for more info)")),delete HP[t]}var i=pC().use(vk).use(e.remarkPlugins||[]).use($k,m(m({},e.remarkRehypeOptions),{},{allowDangerousHtml:!0})).use(e.rehypePlugins||[]).use(wP,e),o=new iC;"string"===typeof e.children?o.value=e.children:void 0!==e.children&&null!==e.children&&console.warn("[react-markdown] Warning: please pass a string as `children` (not: `".concat(e.children,"`)"));var a=i.runSync(i.parse(o),o);if("root"!==a.type)throw new TypeError("Expected a `root` node");var s=r.createElement(r.Fragment,{},DP({options:e,schema:bP,listDepth:0},a));return e.className&&(s=r.createElement("div",{className:e.className},s)),s}UP.propTypes={children:S.string,className:S.string,allowElement:S.func,allowedElements:S.arrayOf(S.string),disallowedElements:S.arrayOf(S.string),unwrapDisallowed:S.bool,remarkPlugins:S.arrayOf(S.oneOfType([S.object,S.func,S.arrayOf(S.oneOfType([S.bool,S.string,S.object,S.func,S.arrayOf(S.any)]))])),rehypePlugins:S.arrayOf(S.oneOfType([S.object,S.func,S.arrayOf(S.oneOfType([S.bool,S.string,S.object,S.func,S.arrayOf(S.any)]))])),sourcePos:S.bool,rawSourcePos:S.bool,skipHtml:S.bool,includeElementIndex:S.bool,transformLinkUri:S.oneOfType([S.func,S.bool]),linkTarget:S.oneOfType([S.func,S.string]),transformImageUri:S.func,components:S.object};for(var VP={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return 87===t||119===t?(e.consume(t),i):n(t)}function i(t){return 87===t||119===t?(e.consume(t),o):n(t)}function o(t){return 46===t?(e.consume(t),a):n(t)}function a(e){return null===e||zC(e)?n(e):t(e)}},partial:!0},GP={tokenize:function(e,t,n){var r,i;return o;function o(t){return 38===t?e.check(qP,s,a)(t):46===t||95===t?e.check($P,s,a)(t):null===t||NC(t)||HC(t)||45!==t&&UC(t)?s(t):(e.consume(t),o)}function a(t){return 46===t?(i=r,r=void 0,e.consume(t),o):(95===t&&(r=!0),e.consume(t),o)}function s(e){return i||r?n(e):t(e)}},partial:!0},WP={tokenize:function(e,t){var n=0;return r;function r(a){return 38===a?e.check(qP,t,i)(a):(40===a&&n++,41===a?e.check($P,o,i)(a):tM(a)?t(a):eM(a)?e.check($P,t,i)(a):(e.consume(a),r))}function i(t){return e.consume(t),r}function o(e){return--n<0?t(e):i(e)}},partial:!0},$P={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(i){return eM(i)?(e.consume(i),r):tM(i)?t(i):n(i)}},partial:!0},qP={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return RC(t)?(e.consume(t),r):59===t?(e.consume(t),i):n(t)}function i(e){return tM(e)?t(e):n(e)}},partial:!0},XP={tokenize:function(e,t,n){var r=this;return function(t){if(87!==t&&119!==t||!rM(r.previous)||aM(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(VP,e.attempt(GP,e.attempt(WP,i),n),n)(t)};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:rM},KP={tokenize:function(e,t,n){var r=this;return function(t){if(72!==t&&104!==t||!iM(r.previous)||aM(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),i};function i(t){return 84===t||116===t?(e.consume(t),o):n(t)}function o(t){return 84===t||116===t?(e.consume(t),a):n(t)}function a(t){return 80===t||112===t?(e.consume(t),s):n(t)}function s(t){return 83===t||115===t?(e.consume(t),l):l(t)}function l(t){return 58===t?(e.consume(t),u):n(t)}function u(t){return 47===t?(e.consume(t),c):n(t)}function c(t){return 47===t?(e.consume(t),d):n(t)}function d(t){return null===t||NC(t)||HC(t)||UC(t)?n(t):e.attempt(GP,e.attempt(WP,f),n)(t)}function f(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:iM},YP={tokenize:function(e,t,n){var r,i,o=this;return function(t){if(!nM(t)||!oM(o.previous)||aM(o.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return nM(t)?(e.consume(t),a):64===t?(e.consume(t),s):n(t)}function s(t){return 46===t?e.check($P,d,l)(t):45===t||95===t?e.check($P,n,u)(t):LC(t)?(!i&&IC(t)&&(i=!0),e.consume(t),s):d(t)}function l(t){return e.consume(t),r=!0,i=void 0,s}function u(t){return e.consume(t),c}function c(t){return 46===t?e.check($P,n,l)(t):s(t)}function d(o){return r&&!i?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(o)):n(o)}},previous:oM},ZP={},QP={text:ZP},JP=48;JP<123;)ZP[JP]=YP,58===++JP?JP=65:91===JP&&(JP=97);function eM(e){return 33===e||34===e||39===e||41===e||42===e||44===e||46===e||58===e||59===e||60===e||63===e||95===e||126===e}function tM(e){return null===e||60===e||BC(e)}function nM(e){return 43===e||45===e||46===e||95===e||LC(e)}function rM(e){return null===e||40===e||42===e||95===e||126===e||BC(e)}function iM(e){return null===e||!RC(e)}function oM(e){return 47!==e&&iM(e)}function aM(e){for(var t=e.length,n=!1;t--;){var r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}ZP[43]=YP,ZP[45]=YP,ZP[46]=YP,ZP[95]=YP,ZP[72]=[YP,KP],ZP[104]=[YP,KP],ZP[87]=[YP,XP],ZP[119]=[YP,XP];var sM={tokenize:function(e,t,n){var r=this;return GC(e,(function(e){var i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)}),"gfmFootnoteDefinitionIndent",5)},partial:!0};function lM(){var e;return{document:p({},91,{tokenize:fM,continuation:{tokenize:pM},exit:hM}),text:(e={},p(e,91,{tokenize:dM}),p(e,93,{add:"after",tokenize:uM,resolveTo:cM}),e)}}function uM(e,t,n){for(var r,i=this,o=i.events.length,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);o--;){var s=i.events[o][1];if("labelImage"===s.type){r=s;break}if("gfmFootnoteCall"===s.type||"labelLink"===s.type||"label"===s.type||"image"===s.type||"link"===s.type)break}return function(o){if(!r||!r._balanced)return n(o);var s=vE(i.sliceSerialize({start:r.end,end:i.now()}));if(94!==s.charCodeAt(0)||!a.includes(s.slice(1)))return n(o);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),t(o)}}function cM(e,t){for(var n=e.length;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";var r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;var o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},s=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice.apply(e,[n,e.length-n+1].concat(s)),e}function dM(e,t,n){var r,i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]),a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),s};function s(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(s){var c;return null===s||91===s||a++>999?n(s):93===s?r?(e.exit("chunkString"),c=e.exit("gfmFootnoteCallString"),o.includes(vE(i.sliceSerialize(c)))?function(n){return e.enter("gfmFootnoteCallLabelMarker"),e.consume(n),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t}(s):n(s)):n(s):(e.consume(s),BC(s)||(r=!0),92===s?u:l)}function u(t){return 91===t||92===t||93===t?(e.consume(t),a++,l):l(t)}}function fM(e,t,n){var r,i,o=this,a=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]),s=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),u):n(t)}function u(t){var a;return null===t||91===t||s>999?n(t):93===t?i?(a=e.exit("gfmFootnoteDefinitionLabelString"),r=vE(o.sliceSerialize(a)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f):n(t):zC(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s++,u):(e.enter("chunkString").contentType="string",c(t))}function c(t){return null===t||zC(t)||91===t||93===t||s>999?(e.exit("chunkString"),u(t)):(BC(t)||(i=!0),s++,e.consume(t),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),s++,c):c(t)}function f(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),GC(e,p,"gfmFootnoteDefinitionWhitespace")):n(t)}function p(e){return a.includes(r)||a.push(r),t(e)}}function pM(e,t,n){return e.check(XC,t,e.attempt(sM,t,n))}function hM(e){e.exit("gfmFootnoteDefinition")}function mM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.singleTilde,n={tokenize:i,resolveAll:r};return null!==t&&void 0!==t||(t=!0),{text:p({},126,n),insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(e,t){for(var n=-1;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close)for(var r=n;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";var i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},o={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",o,t]];EC(a,a.length,0,aE(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),EC(a,a.length,0,[["exit",o,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),EC(e,r-1,n-r+3,a),n=r+a.length-2;break}for(n=-1;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}function i(e,n,r){var i=this.previous,o=this.events,a=0;return function(t){if(126===i&&"characterEscape"!==o[o.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),s(t)};function s(o){var l=zE(i);if(126===o)return a>1?r(o):(e.consume(o),a++,s);if(a<2&&!t)return r(o);var u=e.exit("strikethroughSequenceTemporary"),c=zE(o);return u._open=!c||2===c&&Boolean(l),u._close=!l||2===l&&Boolean(c),n(o)}}}var gM={flow:{null:{tokenize:function(e,t,n){var r,i,o=this,a=[],s=0;return function(t){if(e.enter("table")._align=a,e.enter("tableHead"),e.enter("tableRow"),124===t)return l(t);return s++,e.enter("temporaryTableCellContent"),d(t)};function l(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,u}function u(t){return null===t||zC(t)?function(t){if(null===t)return n(t);e.exit("tableRow"),e.exit("tableHead");var r=o.interrupt;return o.interrupt=!0,e.attempt({tokenize:M,partial:!0},(function(t){return o.interrupt=r,e.enter("tableDelimiterRow"),p(t)}),(function(e){return o.interrupt=r,n(e)}))(t)}(t):jC(t)?(e.enter("whitespace"),e.consume(t),c):(r&&(r=void 0,s++),124===t?l(t):(e.enter("temporaryTableCellContent"),d(t)))}function c(t){return jC(t)?(e.consume(t),c):(e.exit("whitespace"),u(t))}function d(t){return null===t||124===t||BC(t)?(e.exit("temporaryTableCellContent"),u(t)):(e.consume(t),92===t?f:d)}function f(t){return 92===t||124===t?(e.consume(t),d):d(t)}function p(t){return null===t||zC(t)?y(t):jC(t)?(e.enter("whitespace"),e.consume(t),h):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,a.push("none"),m):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a.push("left"),g):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):n(t)}function h(t){return jC(t)?(e.consume(t),h):(e.exit("whitespace"),p(t))}function m(t){return 45===t?(e.consume(t),m):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),a[a.length-1]="left"===a[a.length-1]?"center":"right",v):p(t))}function g(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),i=!0,m):n(t)}function v(t){return null===t||zC(t)?y(t):jC(t)?(e.enter("whitespace"),e.consume(t),h):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):n(t)}function y(t){return e.exit("tableDelimiterRow"),i&&s===a.length?null===t?b(t):e.check(vM,b,e.attempt({tokenize:M,partial:!0},GC(e,x,"linePrefix",4),b))(t):n(t)}function b(n){return e.exit("table"),t(n)}function x(t){return e.enter("tableBody"),w(t)}function w(t){return e.enter("tableRow"),124===t?_(t):(e.enter("temporaryTableCellContent"),E(t))}function _(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),S}function S(t){return null===t||zC(t)?function(t){if(e.exit("tableRow"),null===t)return P(t);return e.check(vM,P,e.attempt({tokenize:M,partial:!0},GC(e,w,"linePrefix",4),P))(t)}(t):jC(t)?(e.enter("whitespace"),e.consume(t),C):124===t?_(t):(e.enter("temporaryTableCellContent"),E(t))}function C(t){return jC(t)?(e.consume(t),C):(e.exit("whitespace"),S(t))}function E(t){return null===t||124===t||BC(t)?(e.exit("temporaryTableCellContent"),S(t)):(e.consume(t),92===t?k:E)}function k(t){return 92===t||124===t?(e.consume(t),E):E(t)}function P(t){return e.exit("tableBody"),b(t)}function M(e,t,n){return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),GC(e,r,"linePrefix")};function r(r){if(o.parser.lazy[o.now().line]||null===r||zC(r))return n(r);var i=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?n(r):(o._gfmTableDynamicInterruptHack=!0,e.check(o.parser.constructs.flow,(function(e){return o._gfmTableDynamicInterruptHack=!1,n(e)}),(function(e){return o._gfmTableDynamicInterruptHack=!1,t(e)}))(r))}}},resolve:function(e,t){var n,r,i,o,a,s,l,u=-1;for(;++u<e.length;){var c=e[u][1];if(i&&("temporaryTableCellContent"===c.type&&(o=o||u,a=u),("tableCellDivider"===c.type||"tableRow"===c.type)&&a)){var d={type:"tableContent",start:e[o][1].start,end:e[a][1].end},f={type:"chunkText",start:d.start,end:d.end,contentType:"text"};e.splice(o,a-o+1,["enter",d,t],["enter",f,t],["exit",f,t],["exit",d,t]),u-=a-o-3,o=void 0,a=void 0}if("exit"===e[u][0]&&void 0!==s&&s+(l?0:1)<u&&("tableCellDivider"===c.type||"tableRow"===c.type&&(s+3<u||"whitespace"!==e[s][1].type))){var p={type:r?"tableDelimiter":n?"tableHeader":"tableData",start:e[s][1].start,end:e[u][1].end};e.splice(u+("tableCellDivider"===c.type?1:0),0,["exit",p,t]),e.splice(s,0,["enter",p,t]),s=(u+=2)+1,l=!0}"tableRow"===c.type&&(i="enter"===e[u][0])&&(s=u+1,l=!1),"tableDelimiterRow"===c.type&&(r="enter"===e[u][0])&&(s=u+1,l=!1),"tableHead"===c.type&&(n="enter"===e[u][0])}return e}}}},vM={tokenize:function(e,t,n){var r=0;return function(t){return e.enter("check"),e.consume(t),i};function i(o){return-1===o||32===o?(e.consume(o),4===++r?t:i):null===o||BC(o)?t(o):n(o)}},partial:!0};var yM={tokenize:function(e,t,n){var r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return BC(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(r){return 93===r?(e.enter("taskListCheckMarker"),e.consume(r),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:xM},t,n)):n(r)}}},bM={text:p({},91,yM)};function xM(e,t,n){var r=this;return GC(e,(function(e){var i=r.events[r.events.length-1];return(i&&"whitespace"===i[1].type||zC(e))&&null!==e?t(e):n(e)}),"whitespace")}function wM(e){return MC([QP,lM(),mM(e),gM,bM])}function _M(e,t){var n=String(e);if("string"!==typeof t)throw new TypeError("Expected character");for(var r=0,i=n.indexOf(t);-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}var SM={}.hasOwnProperty,CM=function(e,t,n,r){var i,o;"string"===typeof t||t instanceof RegExp?(o=[[t,n]],i=r):(o=t,i=n),i||(i={});for(var a=bk(i.ignore||[]),s=function(e){var t=[];if("object"!==typeof e)throw new TypeError("Expected array or object as schema");if(Array.isArray(e))for(var n=-1;++n<e.length;)t.push([EM(e[n][0]),kM(e[n][1])]);else{var r;for(r in e)SM.call(e,r)&&t.push([EM(r),kM(e[r])])}return t}(o),l=-1;++l<s.length;)Sk(e,"text",u);return e;function u(e,t){for(var n,r=-1;++r<t.length;){var i=t[r];if(a(i,n?n.children.indexOf(i):void 0,n))return;n=i}if(n)return function(e,t){var n,r=t[t.length-1],i=s[l][0],o=s[l][1],a=0,u=r.children.indexOf(e),c=!1,d=[];i.lastIndex=0;var f=i.exec(e.value);for(;f;){n=f.index;var p={index:f.index,input:f.input,stack:[].concat(z(t),[e])},h=o.apply(void 0,z(f).concat([p]));if("string"===typeof h&&(h=h.length>0?{type:"text",value:h}:void 0),!1!==h){var m;if(a!==n&&d.push({type:"text",value:e.value.slice(a,n)}),Array.isArray(h))(m=d).push.apply(m,z(h));else h&&d.push(h);a=n+f[0].length,c=!0}if(!i.global)break;f=i.exec(e.value)}if(c){var g;a<e.value.length&&d.push({type:"text",value:e.value.slice(a)}),(g=r.children).splice.apply(g,[u,1].concat(z(d)))}else d=[e];return u+d.length}(e,t)}};function EM(e){return"string"===typeof e?new RegExp(function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function kM(e){return"function"===typeof e?e:function(){return e}}var PM="phrasing",MM=["autolink","link","image","label"],AM={transforms:[function(e){CM(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,IM],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,OM]],{ignore:["link","linkReference"]})}],enter:{literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:RM,literalAutolinkHttp:RM,literalAutolinkWww:RM},exit:{literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e);var t=this.stack[this.stack.length-1];t.url="http://"+this.sliceSerialize(e)}}},TM={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:PM,notInConstruct:MM},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:PM,notInConstruct:MM},{character:":",before:"[ps]",after:"\\/",inConstruct:PM,notInConstruct:MM}]};function RM(e){this.config.enter.autolinkProtocol.call(this,e)}function IM(e,t,n,r,i){var o="";if(!LM(i))return!1;if(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!function(e){var t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;var a=function(e){var t,n,r,i,o=/[!"&'),.:;<>?\]}]+$/.exec(e);if(o)for(e=e.slice(0,o.index),t=(i=o[0]).indexOf(")"),n=_M(e,"("),r=_M(e,")");-1!==t&&n>r;)e+=i.slice(0,t+1),t=(i=i.slice(t+1)).indexOf(")"),r++;return[e,i]}(n+r);if(!a[0])return!1;var s={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[s,{type:"text",value:a[1]}]:s}function OM(e,t,n,r){return!(!LM(r,!0)||/[_-\d]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function LM(e,t){var n=e.input.charCodeAt(e.index-1);return(0===e.index||HC(n)||UC(n))&&(!t||47!==n)}function DM(e){return e.label||!e.identifier?e.label||"":ck(e.identifier)}function FM(e,t,n){var r=t.indexStack,i=e.children||[],o=t.createTracker(n),a=[],s=-1;for(r.push(-1);++s<i.length;){var l=i[s];r[r.length-1]=s,a.push(o.move(t.handle(l,e,t,m({before:"\n",after:"\n"},o.current())))),"list"!==l.type&&(t.bulletLastUsed=void 0),s<i.length-1&&a.push(o.move(NM(l,i[s+1],e,t)))}return r.pop(),a.join("")}function NM(e,t,n,r){for(var i=r.join.length;i--;){var o=r.join[i](e,t,n,r);if(!0===o||1===o)break;if("number"===typeof o)return"\n".repeat(1+o);if(!1===o)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}var BM=/\r?\n|\r/g;function zM(e,t){for(var n,r=[],i=0,o=0;n=BM.exec(e);)a(e.slice(i,n.index)),r.push(n[0]),i=n.index+n[0].length,o++;return a(e.slice(i)),r.join("");function a(e){r.push(t(e,o,!e))}}function jM(e){if(!e._compiled){var t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function HM(e,t){return UM(e,t.inConstruct,!0)&&!UM(e,t.notInConstruct,!1)}function UM(e,t,n){if("string"===typeof t&&(t=[t]),!t||0===t.length)return n;for(var r=-1;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function VM(e,t,n){for(var r=(n.before||"")+(t||"")+(n.after||""),i=[],o=[],a={},s=-1;++s<e.unsafe.length;){var l=e.unsafe[s];if(HM(e.stack,l))for(var u=jM(l),c=void 0;c=u.exec(r);){var d="before"in l||Boolean(l.atBreak),f="after"in l,p=c.index+(d?c[1].length:0);i.includes(p)?(a[p].before&&!d&&(a[p].before=!1),a[p].after&&!f&&(a[p].after=!1)):(i.push(p),a[p]={before:d,after:f})}}i.sort(GM);var h=n.before?n.before.length:0,m=r.length-(n.after?n.after.length:0);for(s=-1;++s<i.length;){var g=i[s];g<h||g>=m||(g+1<m&&i[s+1]===g+1&&a[g].after&&!a[g+1].before&&!a[g+1].after||i[s-1]===g-1&&a[g].before&&!a[g-1].before&&!a[g-1].after||(h!==g&&o.push(WM(r.slice(h,g),"\\")),h=g,!/[!-/:-@[-`{-~]/.test(r.charAt(g))||n.encode&&n.encode.includes(r.charAt(g))?(o.push("&#x"+r.charCodeAt(g).toString(16).toUpperCase()+";"),h++):o.push("\\")))}return o.push(WM(r.slice(h,m),n.after)),o.join("")}function GM(e,t){return e-t}function WM(e,t){for(var n,r=/\\(?=[!-/:-@[-`{-~])/g,i=[],o=[],a=e+t,s=-1,l=0;n=r.exec(a);)i.push(n.index);for(;++s<i.length;)l!==i[s]&&o.push(e.slice(l,i[s])),o.push("\\"),l=i[s];return o.push(e.slice(l)),o.join("")}function $M(e){var t=e||{},n=t.now||{},r=t.lineShift||0,i=n.line||1,o=n.column||1;return{move:function(e){var t=e||"",n=t.split(/\r?\n|\r/g),a=n[n.length-1];return i+=n.length-1,o=1===n.length?o+a.length:1+a.length+r,t},current:function(){return{now:{line:i,column:o},lineShift:r}},shift:function(e){r+=e}}}function qM(){return e.peek=function(){return"["},{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:function(e,t,n,r){var i=$M(r),o=i.move("[^"),a=n.enter("footnoteDefinition"),s=n.enter("label");return o+=i.move(VM(n,DM(e),m(m({},i.current()),{},{before:o,after:"]"}))),s(),o+=i.move("]:"+(e.children&&e.children.length>0?" ":"")),i.shift(4),o+=i.move(zM(FM(e,n,i.current()),(function(e,t,n){if(t)return(n?"":"    ")+e;return e}))),a(),o},footnoteReference:e}};function e(e,t,n,r){var i=$M(r),o=i.move("[^"),a=n.enter("footnoteReference"),s=n.enter("reference");return o+=i.move(VM(n,DM(e),m(m({},i.current()),{},{before:o,after:"]"}))),s(),a(),o+=i.move("]")}}function XM(e,t,n){var r=t.indexStack,i=e.children||[],o=[],a=-1,s=n.before;r.push(-1);for(var l=t.createTracker(n);++a<i.length;){var u=i[a],c=void 0;if(r[r.length-1]=a,a+1<i.length){var d=t.handle.handlers[i[a+1].type];d&&d.peek&&(d=d.peek),c=d?d(i[a+1],e,t,m({before:"",after:""},l.current())).charAt(0):""}else c=n.after;o.length>0&&("\r"===s||"\n"===s)&&"html"===u.type&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),s=" ",(l=t.createTracker(n)).move(o.join(""))),o.push(l.move(t.handle(u,e,t,m(m({},l.current()),{},{before:s,after:c})))),s=o[o.length-1].slice(-1)}return r.pop(),o.join("")}var KM={canContainEols:["delete"],enter:{strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},exit:{strikethrough:function(e){this.exit(e)}}},YM={unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"]}],handlers:{delete:ZM}};function ZM(e,t,n,r){var i=$M(r),o=n.enter("emphasis"),a=i.move("~~");return a+=XM(e,n,m(m({},i.current()),{},{before:a,after:"~"})),a+=i.move("~~"),o(),a}function QM(e,t,n){for(var r=e.value||"",i="`",o=-1;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){var a=n.unsafe[o],s=jM(a),l=void 0;if(a.atBreak)for(;l=s.exec(r);){var u=l.index;10===r.charCodeAt(u)&&13===r.charCodeAt(u-1)&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function JM(e){return null===e||void 0===e?"":String(e)}function eA(e){return e.length}function tA(e){var t="string"===typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}ZM.peek=function(){return"~"},QM.peek=function(){return"`"};var nA={enter:{table:function(e){var t=e._align;this.enter({type:"table",align:t.map((function(e){return"none"===e?null:e})),children:[]},e),this.setData("inTable",!0)},tableData:iA,tableHeader:iA,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},exit:{codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,oA));var n=this.stack[this.stack.length-1];n.value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:rA,tableHeader:rA,tableRow:rA}};function rA(e){this.exit(e)}function iA(e){this.enter({type:"tableCell",children:[]},e)}function oA(e,t){return"|"===t?t:e}function aA(e){var t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,n,r){return s(function(e,t,n){var r=e.children,i=-1,o=[],a=t.enter("table");for(;++i<r.length;)o[i]=l(r[i],t,n);return a(),o}(e,n,r),e.align)},tableRow:function(e,t,n,r){var i=l(e,n,r),o=s([i]);return o.slice(0,o.indexOf("\n"))},tableCell:a,inlineCode:function(e,t,n){var r=QM(e,0,n);n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r}}};function a(e,t,n,r){var i=n.enter("tableCell"),a=n.enter("phrasing"),s=XM(e,n,m(m({},r),{},{before:o,after:o}));return a(),i(),s}function s(e,t){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.align||[]).concat(),r=t.stringLength||eA,i=[],o=[],a=[],s=[],l=0,u=-1;++u<e.length;){var c=[],d=[],f=-1;for(e[u].length>l&&(l=e[u].length);++f<e[u].length;){var p=JM(e[u][f]);if(!1!==t.alignDelimiters){var h=r(p);d[f]=h,(void 0===s[f]||h>s[f])&&(s[f]=h)}c.push(p)}o[u]=c,a[u]=d}var m=-1;if("object"===typeof n&&"length"in n)for(;++m<l;)i[m]=tA(n[m]);else for(var g=tA(n);++m<l;)i[m]=g;m=-1;for(var v=[],y=[];++m<l;){var b=i[m],x="",w="";99===b?(x=":",w=":"):108===b?x=":":114===b&&(w=":");var _=!1===t.alignDelimiters?1:Math.max(1,s[m]-x.length-w.length),S=x+"-".repeat(_)+w;!1!==t.alignDelimiters&&((_=x.length+_+w.length)>s[m]&&(s[m]=_),y[m]=_),v[m]=S}o.splice(1,0,v),a.splice(1,0,y),u=-1;for(var C=[];++u<o.length;){var E=o[u],k=a[u];m=-1;for(var P=[];++m<l;){var M=E[m]||"",A="",T="";if(!1!==t.alignDelimiters){var R=s[m]-(k[m]||0),I=i[m];114===I?A=" ".repeat(R):99===I?R%2?(A=" ".repeat(R/2+.5),T=" ".repeat(R/2-.5)):T=A=" ".repeat(R/2):T=" ".repeat(R)}!1===t.delimiterStart||m||P.push("|"),!1===t.padding||!1===t.alignDelimiters&&""===M||!1===t.delimiterStart&&!m||P.push(" "),!1!==t.alignDelimiters&&P.push(A),P.push(M),!1!==t.alignDelimiters&&P.push(T),!1!==t.padding&&P.push(" "),!1===t.delimiterEnd&&m===l-1||P.push("|")}C.push(!1===t.delimiterEnd?P.join("").replace(/ +$/,""):P.join(""))}return C.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function l(e,t,n){for(var r=e.children,i=-1,o=[],s=t.enter("tableRow");++i<r.length;)o[i]=a(r[i],0,t,n);return s(),o}}function sA(e,t,n,r){var i=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n),o=n.bulletCurrent||function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}(n);t&&"list"===t.type&&t.ordered&&(o=("number"===typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+o);var a=o.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));var s=n.createTracker(r);s.move(o+" ".repeat(a-o.length)),s.shift(a);var l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,s.current()),(function(e,t,n){if(t)return(n?"":" ".repeat(a))+e;return(n?o:o+" ".repeat(a-o.length))+e}));return l(),u}var lA={exit:{taskListCheckValueChecked:cA,taskListCheckValueUnchecked:cA,paragraph:function(e){var t,n=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],i=n.children,o=r.children[0],a=-1;if(n&&"listItem"===n.type&&"boolean"===typeof n.checked&&o&&"text"===o.type){for(;++a<i.length;){var s=i[a];if("paragraph"===s.type){t=s;break}}t===r&&(o.value=o.value.slice(1),0===o.value.length?r.children.shift():r.position&&o.position&&"number"===typeof o.position.start.offset&&(o.position.start.column++,o.position.start.offset++,r.position.start=Object.assign({},o.position.start)))}this.exit(e)}}},uA={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:function(e,t,n,r){var i=e.children[0],o="boolean"===typeof e.checked&&i&&"paragraph"===i.type,a="["+(e.checked?"x":" ")+"] ",s=$M(r);o&&s.move(a);var l=sA(e,t,n,m(m({},r),s.current()));o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(e){return e+a})));return l}}};function cA(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}function dA(){return[AM,{enter:{gfmFootnoteDefinition:function(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)},gfmFootnoteDefinitionLabelString:function(){this.buffer()},gfmFootnoteCall:function(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)},gfmFootnoteCallString:function(){this.buffer()}},exit:{gfmFootnoteDefinition:function(e){this.exit(e)},gfmFootnoteDefinitionLabelString:function(e){var t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=vE(this.sliceSerialize(e)).toLowerCase()},gfmFootnoteCall:function(e){this.exit(e)},gfmFootnoteCallString:function(e){var t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=vE(this.sliceSerialize(e)).toLowerCase()}}},KM,nA,lA]}function fA(e){return{extensions:[TM,qM(),YM,aA(e),uA]}}function pA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.data();function n(e,n){(t[e]?t[e]:t[e]=[]).push(n)}n("micromarkExtensions",wM(e)),n("fromMarkdownExtensions",dA()),n("toMarkdownExtensions",fA(e))}var hA=function(e){var t=e.markdown;return(0,_.jsx)(UP,{children:t,remarkPlugins:[pA]})},mA=Un(),gA=["className","component","disableGutters","fixed","maxWidth","classes"],vA=Mn(),yA=mA("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat(T(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),bA=function(e){return Ra({props:e,name:"MuiContainer",defaultTheme:vA})},xA=function(e,t){var n=e.classes,r=e.fixed,i=e.disableGutters,o=e.maxWidth;return N({root:["root",o&&"maxWidth".concat(T(String(o))),r&&"fixed",i&&"disableGutters"]},(function(e){return Or(t,e)}),n)};var wA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createStyledComponent,n=void 0===t?yA:t,i=e.useThemeProps,o=void 0===i?bA:i,a=e.componentName,s=void 0===a?"MuiContainer":a,l=n((function(e){var t=e.theme;return E({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!e.ownerState.disableGutters&&p({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}))}),(function(e){var t=e.theme;return e.ownerState.fixed&&Object.keys(t.breakpoints.values).reduce((function(e,n){var r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(i).concat(t.breakpoints.unit)}),e}),{})}),(function(e){var t=e.theme,n=e.ownerState;return E({},"xs"===n.maxWidth&&p({},t.breakpoints.up("xs"),{maxWidth:Math.max(t.breakpoints.values.xs,444)}),n.maxWidth&&"xs"!==n.maxWidth&&p({},t.breakpoints.up(n.maxWidth),{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}))})),u=r.forwardRef((function(e,t){var n=o(e),r=n.className,i=n.component,a=void 0===i?"div":i,u=n.disableGutters,c=void 0!==u&&u,d=n.fixed,f=void 0!==d&&d,p=n.maxWidth,h=void 0===p?"lg":p,m=k(n,gA),g=E({},n,{component:a,disableGutters:c,fixed:f,maxWidth:h}),v=xA(g,s);return(0,_.jsx)(l,E({as:a,ownerState:g,className:M(v.root,r),ref:t},m))}));return u}({createStyledComponent:Ar("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat(R(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:function(e){return Ia({props:e,name:"MuiContainer"})}}),_A=wA;var SA=r.createContext();function CA(e){return Or("MuiGrid",e)}var EA=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],kA=Lr("MuiGrid",["root","container","item","zeroMinWidth"].concat(z([0,1,2,3,4,5,6,7,8,9,10].map((function(e){return"spacing-xs-".concat(e)}))),z(["column-reverse","column","row-reverse","row"].map((function(e){return"direction-xs-".concat(e)}))),z(["nowrap","wrap-reverse","wrap"].map((function(e){return"wrap-xs-".concat(e)}))),z(EA.map((function(e){return"grid-xs-".concat(e)}))),z(EA.map((function(e){return"grid-sm-".concat(e)}))),z(EA.map((function(e){return"grid-md-".concat(e)}))),z(EA.map((function(e){return"grid-lg-".concat(e)}))),z(EA.map((function(e){return"grid-xl-".concat(e)}))))),PA=kA,MA=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function AA(e){var t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function TA(e){var t=e.breakpoints,n=e.values,r="";Object.keys(n).forEach((function(e){""===r&&0!==n[e]&&(r=e)}));var i=Object.keys(t).sort((function(e,n){return t[e]-t[n]}));return i.slice(0,i.indexOf(r))}var RA=Ar("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.container,i=n.direction,o=n.item,a=n.spacing,s=n.wrap,l=n.zeroMinWidth,u=n.breakpoints,c=[];r&&(c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];var r=[];return t.forEach((function(t){var i=e[t];Number(i)>0&&r.push(n["spacing-".concat(t,"-").concat(String(i))])})),r}(a,u,t));var d=[];return u.forEach((function(e){var r=n[e];r&&d.push(t["grid-".concat(e,"-").concat(String(r))])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth].concat(z(c),["row"!==i&&t["direction-xs-".concat(String(i))],"wrap"!==s&&t["wrap-xs-".concat(String(s))]],d)}})((function(e){var t=e.ownerState;return E({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){var t=e.theme;return At({theme:t},It({values:e.ownerState.direction,breakpoints:t.breakpoints.values}),(function(e){var t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(PA.item)]={maxWidth:"none"}),t}))}),(function(e){var t=e.theme,n=e.ownerState,r=n.container,i=n.rowSpacing,o={};if(r&&0!==i){var a,s=It({values:i,breakpoints:t.breakpoints.values});"object"===typeof s&&(a=TA({breakpoints:t.breakpoints.values,values:s})),o=At({theme:t},s,(function(e,n){var r,i=t.spacing(e);return"0px"!==i?p({marginTop:"-".concat(AA(i))},"& > .".concat(PA.item),{paddingTop:AA(i)}):null!=(r=a)&&r.includes(n)?{}:p({marginTop:0},"& > .".concat(PA.item),{paddingTop:0})}))}return o}),(function(e){var t=e.theme,n=e.ownerState,r=n.container,i=n.columnSpacing,o={};if(r&&0!==i){var a,s=It({values:i,breakpoints:t.breakpoints.values});"object"===typeof s&&(a=TA({breakpoints:t.breakpoints.values,values:s})),o=At({theme:t},s,(function(e,n){var r,i=t.spacing(e);return"0px"!==i?p({width:"calc(100% + ".concat(AA(i),")"),marginLeft:"-".concat(AA(i))},"& > .".concat(PA.item),{paddingLeft:AA(i)}):null!=(r=a)&&r.includes(n)?{}:p({width:"100%",marginLeft:0},"& > .".concat(PA.item),{paddingLeft:0})}))}return o}),(function(e){var t,n=e.theme,r=e.ownerState;return n.breakpoints.keys.reduce((function(e,i){var o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var a=It({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[i]:a;if(void 0===s||null===s)return e;var l="".concat(Math.round(t/s*1e8)/1e6,"%"),u={};if(r.container&&r.item&&0!==r.columnSpacing){var c=n.spacing(r.columnSpacing);if("0px"!==c){var d="calc(".concat(l," + ").concat(AA(c),")");u={flexBasis:d,maxWidth:d}}}o=E({flexBasis:l,flexGrow:0,maxWidth:l},u)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));var IA,OA=function(e){var t=e.classes,n=e.container,r=e.direction,i=e.item,o=e.spacing,a=e.wrap,s=e.zeroMinWidth,l=e.breakpoints,u=[];n&&(u=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];var n=[];return t.forEach((function(t){var r=e[t];if(Number(r)>0){var i="spacing-".concat(t,"-").concat(String(r));n.push(i)}})),n}(o,l));var c=[];return l.forEach((function(t){var n=e[t];n&&c.push("grid-".concat(t,"-").concat(String(n)))})),N({root:["root",n&&"container",i&&"item",s&&"zeroMinWidth"].concat(z(u),["row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==a&&"wrap-xs-".concat(String(a))],c)},CA,t)},LA=r.forwardRef((function(e,t){var n=Ia({props:e,name:"MuiGrid"}),i=Jf().breakpoints,o=Aw(n),a=o.className,s=o.columns,l=o.columnSpacing,u=o.component,c=void 0===u?"div":u,d=o.container,f=void 0!==d&&d,p=o.direction,h=void 0===p?"row":p,m=o.item,g=void 0!==m&&m,v=o.rowSpacing,y=o.spacing,b=void 0===y?0:y,x=o.wrap,w=void 0===x?"wrap":x,S=o.zeroMinWidth,C=void 0!==S&&S,P=k(o,MA),A=v||b,T=l||b,R=r.useContext(SA),I=f?s||12:R,O={},L=E({},P);i.keys.forEach((function(e){null!=P[e]&&(O[e]=P[e],delete L[e])}));var D=E({},o,{columns:I,container:f,direction:h,item:g,rowSpacing:A,columnSpacing:T,wrap:w,zeroMinWidth:C,spacing:b},O,{breakpoints:i.keys}),F=OA(D);return(0,_.jsx)(SA.Provider,{value:I,children:(0,_.jsx)(RA,E({ownerState:D,className:M(F.root,a),as:c,ref:t},L))})})),DA=LA,FA=new Uint8Array(16);function NA(){if(!IA&&!(IA="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return IA(FA)}var BA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var zA=function(e){return"string"===typeof e&&BA.test(e)},jA=[],HA=0;HA<256;++HA)jA.push((HA+256).toString(16).substr(1));var UA=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(jA[e[t+0]]+jA[e[t+1]]+jA[e[t+2]]+jA[e[t+3]]+"-"+jA[e[t+4]]+jA[e[t+5]]+"-"+jA[e[t+6]]+jA[e[t+7]]+"-"+jA[e[t+8]]+jA[e[t+9]]+"-"+jA[e[t+10]]+jA[e[t+11]]+jA[e[t+12]]+jA[e[t+13]]+jA[e[t+14]]+jA[e[t+15]]).toLowerCase();if(!zA(n))throw TypeError("Stringified UUID is invalid");return n};var VA,GA=function(e,t,n){var r=(e=e||{}).random||(e.rng||NA)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return UA(r)},WA=function(e){var t=e.data;return(0,_.jsx)(_A,{children:(0,_.jsx)(DA,{container:!0,spacing:2,children:Object.keys(t).map((function(e,n){var i=c(e.split(":"),3),o=i[0],a=(i[1],i[2]),s=void 0===a?12:a,l=t[e];return"page"===o?void 0:"seq"===o?(0,_.jsx)(DA,{item:!0,xs:s,children:(0,_.jsx)(w,{sequence:l,id:GA()},e)},"g:"+e):"table"===o?(0,_.jsx)(DA,{item:!0,xs:s,children:(0,r.createElement)(IS,m(m({},l),{},{key:e}))},"g:"+e):"pdb"===o?(0,_.jsx)(DA,{item:!0,xs:s,children:(0,r.createElement)(US,m(m({},l),{},{key:e}))},"g:"+e):"md"===o?(0,_.jsx)(DA,{item:!0,xs:s,children:(0,_.jsx)(hA,{markdown:l},e)},"g:"+e):(0,_.jsx)(DA,{item:!0,xs:s,children:r.createElement(o,{key:e},l)},"g:"+e)}))})})};function $A(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qA(){return qA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qA.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(VA||(VA={}));var XA,KA="popstate";function YA(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function ZA(e){return{usr:e.state,key:e.key}}function QA(e,t,n,r){return void 0===n&&(n=null),qA({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?eT(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function JA(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function eT(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function tT(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,n="string"===typeof e?e:JA(e);return YA(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function nT(e,t,n,r){void 0===r&&(r={});var i=r,o=i.window,a=void 0===o?document.defaultView:o,s=i.v5Compat,l=void 0!==s&&s,u=a.history,c=VA.Pop,d=null;function f(){c=VA.Pop,d&&d({action:c,location:p.location})}var p={get action(){return c},get location(){return e(a,u)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(KA,f),d=e,function(){a.removeEventListener(KA,f),d=null}},createHref:function(e){return t(a,e)},encodeLocation:function(e){var t=tT("string"===typeof e?e:JA(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=VA.Push;var r=QA(p.location,e,t);n&&n(r,e);var i=ZA(r),o=p.createHref(r);try{u.pushState(i,"",o)}catch(s){a.location.assign(o)}l&&d&&d({action:c,location:p.location})},replace:function(e,t){c=VA.Replace;var r=QA(p.location,e,t);n&&n(r,e);var i=ZA(r),o=p.createHref(r);u.replaceState(i,"",o),l&&d&&d({action:c,location:p.location})},go:function(e){return u.go(e)}};return p}function rT(e,t,n){void 0===n&&(n="/");var r=fT(("string"===typeof t?eT(t):t).pathname||"/",n);if(null==r)return null;var i=iT(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=uT(i[a],dT(r));return o}function iT(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,o){var a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(YA(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var s=vT([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(YA(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),iT(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:lT(s,e.index),routesMeta:l})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,o=$A(oT(e.path));try{for(o.s();!(r=o.n()).done;){var a=r.value;i(e,t,a)}}catch(s){o.e(s)}finally{o.f()}}else i(e,t)})),t}function oT(e){var t=e.split("/");if(0===t.length)return[];var n=lC(t),r=n[0],i=n.slice(1),o=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===i.length)return o?[a,""]:[a];var s=oT(i.join("/")),l=[];return l.push.apply(l,z(s.map((function(e){return""===e?a:[a,e].join("/")})))),o&&l.push.apply(l,z(s)),l.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(XA||(XA={}));var aT=/^:\w+$/,sT=function(e){return"*"===e};function lT(e,t){var n=e.split("/"),r=n.length;return n.some(sT)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!sT(e)})).reduce((function(e,t){return e+(aT.test(t)?3:""===t?1:10)}),r)}function uT(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],l=a===n.length-1,u="/"===i?t:t.slice(i.length)||"/",c=cT({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);var d=s.route;o.push({params:r,pathname:vT([i,c.pathname]),pathnameBase:yT(vT([i,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(i=vT([i,c.pathnameBase]))}return o}function cT(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);pT("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var s=a[0],l=s.replace(/(.)\/+$/,"$1"),u=a.slice(1),d=o.reduce((function(e,t,n){if("*"===t){var r=u[n]||"";l=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return pT(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(u[n]||"",t),e}),{});return{params:d,pathname:s,pathnameBase:l,pattern:e}}function dT(e){try{return decodeURI(e)}catch(t){return pT(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function fT(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function pT(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(rR){}}}function hT(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function mT(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function gT(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=eT(e):(YA(!(i=qA({},e)).pathname||!i.pathname.includes("?"),hT("?","pathname","search",i)),YA(!i.pathname||!i.pathname.includes("#"),hT("#","pathname","hash",i)),YA(!i.search||!i.search.includes("#"),hT("#","search","hash",i)));var o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{var l=t.length-1;if(s.startsWith("..")){for(var u=s.split("/");".."===u[0];)u.shift(),l-=1;i.pathname=u.join("/")}o=l>=0?t[l]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?eT(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,l=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:l,search:bT(o),hash:xT(s)}}(i,o),d=s&&"/"!==s&&s.endsWith("/"),f=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!f||(c.pathname+="/"),c}var vT=function(e){return e.join("/").replace(/\/\/+/g,"/")},yT=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},bT=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},xT=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},wT=function(e){zi(n,e);var t=Gi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Ni(n)}(WS(Error));var _T=Ni((function e(t,n,r,i){Di(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function ST(e){return e instanceof _T}var CT=["post","put","patch","delete"],ET=(new Set(CT),["get"].concat(CT));new Set(ET),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;function kT(){return kT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kT.apply(this,arguments)}var PT="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},MT=r.useState,AT=r.useEffect,TT=r.useLayoutEffect,RT=r.useDebugValue;function IT(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!PT(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var OT=r.createContext(null);var LT=r.createContext(null);var DT=r.createContext(null);var FT=r.createContext(null);var NT=r.createContext(null);var BT=r.createContext({outlet:null,matches:[]});var zT=r.createContext(null);function jT(){return null!=r.useContext(NT)}function HT(){return jT()||YA(!1),r.useContext(NT).location}function UT(){jT()||YA(!1);var e=r.useContext(FT),t=e.basename,n=e.navigator,i=r.useContext(BT).matches,o=HT().pathname,a=JSON.stringify(mT(i).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);r.useEffect((function(){s.current=!0}));var l=r.useCallback((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=gT(e,JSON.parse(a),o,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:vT([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,a,o]);return l}function VT(){var e=function(){var e,t=r.useContext(zT),n=KT(WT.UseRouteError),i=YT(WT.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ST(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unhandled Thrown Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",r.createElement("code",{style:a},"errorElement")," props on\xa0",r.createElement("code",{style:a},"<Route>")))}var GT,WT,$T=function(e){zi(n,e);var t=Gi(n);function n(e){var r;return Di(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return Ni(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(BT.Provider,{value:this.props.routeContext},r.createElement(zT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function qT(e){var t=e.routeContext,n=e.match,i=e.children,o=r.useContext(OT);return o&&o.static&&o.staticContext&&n.route.errorElement&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(BT.Provider,{value:t},i)}function XT(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,o=null==n?void 0:n.errors;if(null!=o){var a=i.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));a>=0||YA(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((function(e,a,s){var l=a.route.id?null==o?void 0:o[a.route.id]:null,u=n?a.route.errorElement||r.createElement(VT,null):null,c=t.concat(i.slice(0,s+1)),d=function(){return r.createElement(qT,{match:a,routeContext:{outlet:e,matches:c}},l?u:void 0!==a.route.element?a.route.element:e)};return n&&(a.route.errorElement||0===s)?r.createElement($T,{location:n.location,component:u,error:l,children:d(),routeContext:{outlet:null,matches:c}}):d()}),null)}function KT(e){var t=r.useContext(LT);return t||YA(!1),t}function YT(e){var t=function(e){var t=r.useContext(BT);return t||YA(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||YA(!1),n.route.id}!function(e){e.UseRevalidator="useRevalidator"}(GT||(GT={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(WT||(WT={}));var ZT;function QT(e){YA(!1)}function JT(e){var t=e.basename,n=void 0===t?"/":t,i=e.children,o=void 0===i?null:i,a=e.location,s=e.navigationType,l=void 0===s?VA.Pop:s,u=e.navigator,c=e.static,d=void 0!==c&&c;jT()&&YA(!1);var f=n.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:f,navigator:u,static:d}}),[f,u,d]);"string"===typeof a&&(a=eT(a));var h=a,m=h.pathname,g=void 0===m?"/":m,v=h.search,y=void 0===v?"":v,b=h.hash,x=void 0===b?"":b,w=h.state,_=void 0===w?null:w,S=h.key,C=void 0===S?"default":S,E=r.useMemo((function(){var e=fT(g,f);return null==e?null:{pathname:e,search:y,hash:x,state:_,key:C}}),[f,g,y,x,_,C]);return null==E?null:r.createElement(FT.Provider,{value:p},r.createElement(NT.Provider,{children:o,value:{location:E,navigationType:l}}))}function eR(e){var t=e.children,n=e.location,i=r.useContext(OT);return function(e,t){jT()||YA(!1);var n,i=r.useContext(FT).navigator,o=r.useContext(LT),a=r.useContext(BT).matches,s=a[a.length-1],l=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/"),c=(s&&s.route,HT());if(t){var d,f="string"===typeof t?eT(t):t;"/"===u||(null==(d=f.pathname)?void 0:d.startsWith(u))||YA(!1),n=f}else n=c;var p=n.pathname||"/",h=rT(e,{pathname:"/"===u?p:p.slice(u.length)||"/"}),m=XT(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:vT([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:vT([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,o||void 0);return t&&m?r.createElement(NT.Provider,{value:{location:kT({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:VA.Pop}},m):m}(i&&!t?i.router.routes:nR(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ZT||(ZT={}));var tR=new Promise((function(){}));r.Component;function nR(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==QT&&YA(!1),e.props.index&&e.props.children&&YA(!1);var o=[].concat(z(t),[i]),a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(a.children=nR(e.props.children,o)),n.push(a)}else n.push.apply(n,nR(e.props.children,t))})),n}var rR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,iR=Object.keys,oR=Array.isArray;function aR(e,t){return"object"!=typeof t||iR(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||rR.Promise||(rR.Promise=Promise);var sR=Object.getPrototypeOf,lR={}.hasOwnProperty;function uR(e,t){return lR.call(e,t)}function cR(e,t){"function"==typeof t&&(t=t(sR(e))),("undefined"==typeof Reflect?iR:Reflect.ownKeys)(t).forEach((function(n){fR(e,n,t[n])}))}var dR=Object.defineProperty;function fR(e,t,n,r){dR(e,t,aR(n&&uR(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function pR(e){return{from:function(t){return e.prototype=Object.create(t.prototype),fR(e.prototype,"constructor",e),{extend:cR.bind(null,e.prototype)}}}}var hR=Object.getOwnPropertyDescriptor;function mR(e,t){var n;return hR(e,t)||(n=sR(e))&&mR(n,t)}var gR=[].slice;function vR(e,t,n){return gR.call(e,t,n)}function yR(e,t){return t(e)}function bR(e){if(!e)throw new Error("Assertion Failed")}function xR(e){rR.setImmediate?setImmediate(e):setTimeout(e,0)}function wR(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function _R(e,t){if(uR(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=_R(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:_R(s,t.substr(a+1))}}function SR(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){bR("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)SR(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?oR(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var l=e[a];l&&uR(e,a)||(l=e[a]={}),SR(l,s,n)}}else void 0===n?oR(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function CR(e){var t={};for(var n in e)uR(e,n)&&(t[n]=e[n]);return t}var ER=[].concat;function kR(e){return ER.apply([],e)}var PR="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(kR([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return rR[e]})),MR=PR.map((function(e){return rR[e]}));wR(PR,(function(e){return[e,!0]}));var AR=null;function TR(e){AR="undefined"!=typeof WeakMap&&new WeakMap;var t=RR(e);return AR=null,t}function RR(e){if(!e||"object"!=typeof e)return e;var t=AR&&AR.get(e);if(t)return t;if(oR(e)){t=[],AR&&AR.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(RR(e[n]))}else if(MR.indexOf(e.constructor)>=0)t=e;else{var i=sR(e);for(var o in t=i===Object.prototype?{}:Object.create(i),AR&&AR.set(e,t),e)uR(e,o)&&(t[o]=RR(e[o]))}return t}var IR={}.toString;function OR(e){return IR.call(e).slice(8,-1)}var LR="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",DR="symbol"==typeof LR?function(e){var t;return null!=e&&(t=e[LR])&&t.apply(e)}:function(){return null},FR={};function NR(e){var t,n,r,i;if(1===arguments.length){if(oR(e))return e.slice();if(this===FR&&"string"==typeof e)return[e];if(i=DR(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var BR="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},zR="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function jR(e,t){zR=e,HR=t}var HR=function(){return!0},UR=!new Error("").stack;function VR(){if(UR)try{throw VR.arguments,new Error}catch(rR){return rR}return new Error}function GR(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(HR).map((function(e){return"\n"+e})).join("")):""}var WR=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$R=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(WR),qR={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function XR(e,t){this._e=VR(),this.name=e,this.message=t}function KR(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function YR(e,t,n,r){this._e=VR(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=KR(e,t)}function ZR(e,t){this._e=VR(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=KR(e,t)}pR(XR).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+GR(this._e,2))}},toString:function(){return this.name+": "+this.message}}),pR(YR).from(XR),pR(ZR).from(XR);var QR=$R.reduce((function(e,t){return e[t]=t+"Error",e}),{}),JR=XR,eI=$R.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=VR(),this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=qR[t]||n,this.inner=null)}return pR(r).from(JR),e[t]=r,e}),{});eI.Syntax=SyntaxError,eI.Type=TypeError,eI.Range=RangeError;var tI=WR.reduce((function(e,t){return e[t+"Error"]=eI[t],e}),{}),nI=$R.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=eI[t]),e}),{});function rI(){}function iI(e){return e}function oI(e,t){return null==e||e===iI?t:function(n){return t(e(n))}}function aI(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function sI(e,t){return e===rI?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?aI(r,this.onsuccess):r),i&&(this.onerror=this.onerror?aI(i,this.onerror):i),void 0!==o?o:n}}function lI(e,t){return e===rI?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?aI(n,this.onsuccess):n),r&&(this.onerror=this.onerror?aI(r,this.onerror):r)}}function uI(e,t){return e===rI?t:function(n){var r=e.apply(this,arguments);aR(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?aI(i,this.onsuccess):i),o&&(this.onerror=this.onerror?aI(o,this.onerror):o),void 0===r?void 0===a?void 0:a:aR(r,a)}}function cI(e,t){return e===rI?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function dI(e,t){return e===rI?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}nI.ModifyError=YR,nI.DexieError=XR,nI.BulkError=ZR;var fI={},pI="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,sR(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,sR(t),e]}(),hI=c(pI,3),mI=hI[0],gI=hI[1],vI=hI[2],yI=gI&&gI.then,bI=mI&&mI.constructor,xI=!!vI,wI=!1,_I=vI?function(){vI.then(WI)}:rR.setImmediate?setImmediate.bind(null,WI):rR.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){WI(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(WI,0)},SI=function(e,t){II.push([e,t]),EI&&(_I(),EI=!1)},CI=!0,EI=!0,kI=[],PI=[],MI=null,AI=iI,TI={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mO,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{mO(e[0],e[1])}catch(e){}}))}},RI=TI,II=[],OI=0,LI=[];function DI(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=rI,this._lib=!1;var t=this._PSD=RI;if(zR&&(this._stackHolder=VR(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==fI)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&zI(this,this._value))}this._state=null,this._value=null,++t.ref,BI(this,e)}var FI={get:function(){var e=RI,t=tO;function n(n,r){var i=this,o=!e.global&&(e!==RI||t!==tO),a=o&&!oO(),s=new DI((function(t,s){HI(i,new NI(pO(n,e,o,a),pO(r,e,o,a),t,s,e))}));return zR&&GI(s,this),s}return n.prototype=fI,n},set:function(e){fR(this,"then",e&&e.prototype===fI?FI:{get:function(){return e},set:FI.set})}};function NI(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function BI(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&$I();t&&"function"==typeof t.then?BI(e,(function(e,n){t instanceof DI?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,jI(e)),n&&qI()}}),zI.bind(null,e))}catch(t){zI(e,t)}}function zI(e,t){if(PI.push(t),null===e._state){var n=e._lib&&$I();t=AI(t),e._state=!1,e._value=t,zR&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((function(){var n=mR(t,"stack");t._promise=e,fR(t,"stack",{get:function(){return wI?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){kI.some((function(t){return t._value===e._value}))||kI.push(e)}(e),jI(e),n&&qI()}}function jI(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)HI(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===OI&&(++OI,SI((function(){0==--OI&&XI()}),[]))}function HI(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++OI,SI(UI,[n,e,t])}else e._listeners.push(t)}function UI(e,t,n){try{MI=t;var r,i=t._value;t._state?r=e(i):(PI.length&&(PI=[]),r=e(i),-1===PI.indexOf(i)&&function(e){for(var t=kI.length;t;)if(kI[--t]._value===e._value)return void kI.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{MI=null,0==--OI&&XI(),--n.psd.ref||n.psd.finalize()}}function VI(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=GR(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return zR&&((r=GR(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&VI(e._prev,t,n)),t}function GI(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function WI(){$I()&&qI()}function $I(){var e=CI;return CI=!1,EI=!1,e}function qI(){var e,t,n;do{for(;II.length>0;)for(e=II,II=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(II.length>0);CI=!0,EI=!0}function XI(){var e=kI;kI=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=LI.slice(0),n=t.length;n;)t[--n]()}function KI(e){return new DI(fI,!1,e)}function YI(e,t){var n=RI;return function(){var r=$I(),i=RI;try{return uO(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{uO(i,!1),r&&qI()}}}cR(DI.prototype,{then:FI,_then:function(e,t){HI(this,new NI(null,null,e,t,RI))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):KI(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):KI(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),KI(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{wI=!0;var e=VI(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{wI=!1}}},timeout:function(e,t){var n=this;return e<1/0?new DI((function(r,i){var o=setTimeout((function(){return i(new eI.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&fR(DI.prototype,Symbol.toStringTag,"Dexie.Promise"),TI.env=cO(),cR(DI,{all:function(){var e=NR.apply(null,arguments).map(aO);return new DI((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return DI.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof DI)return e;if(e&&"function"==typeof e.then)return new DI((function(t,n){e.then(t,n)}));var t=new DI(fI,!0,e);return GI(t,MI),t},reject:KI,race:function(){var e=NR.apply(null,arguments).map(aO);return new DI((function(t,n){e.map((function(e){return DI.resolve(e).then(t,n)}))}))},PSD:{get:function(){return RI},set:function(e){return RI=e}},totalEchoes:{get:function(){return tO}},newPSD:rO,usePSD:dO,scheduler:{get:function(){return SI},set:function(e){SI=e}},rejectionMapper:{get:function(){return AI},set:function(e){AI=e}},follow:function(e,t){return new DI((function(n,r){return rO((function(t,n){var r=RI;r.unhandleds=[],r.onunhandled=n,r.finalize=aI((function(){var e=this;!function(e){LI.push((function t(){e(),LI.splice(LI.indexOf(t),1)})),++OI,SI((function(){0==--OI&&XI()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),bI&&(bI.allSettled&&fR(DI,"allSettled",(function(){var e=NR.apply(null,arguments).map(aO);return new DI((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return DI.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),bI.any&&"undefined"!=typeof AggregateError&&fR(DI,"any",(function(){var e=NR.apply(null,arguments).map(aO);return new DI((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return DI.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var ZI={awaits:0,echoes:0,id:0},QI=0,JI=[],eO=0,tO=0,nO=0;function rO(e,t,n,r){var i=RI,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++nO;var a=TI.env;o.env=xI?{Promise:DI,PromiseProp:{value:DI,configurable:!0,writable:!0},all:DI.all,race:DI.race,allSettled:DI.allSettled,any:DI.any,resolve:DI.resolve,reject:DI.reject,nthen:hO(a.nthen,o),gthen:hO(a.gthen,o)}:{},t&&aR(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=dO(o,e,n,r);return 0===o.ref&&o.finalize(),s}function iO(){return ZI.id||(ZI.id=++QI),++ZI.awaits,ZI.echoes+=100,ZI.id}function oO(){return!!ZI.awaits&&(0==--ZI.awaits&&(ZI.id=0),ZI.echoes=100*ZI.awaits,!0)}function aO(e){return ZI.echoes&&e&&e.constructor===bI?(iO(),e.then((function(e){return oO(),e}),(function(e){return oO(),gO(e)}))):e}function sO(e){++tO,ZI.echoes&&0!=--ZI.echoes||(ZI.echoes=ZI.id=0),JI.push(RI),uO(e,!0)}function lO(){var e=JI[JI.length-1];JI.pop(),uO(e,!1)}function uO(e,t){var n=RI;if((t?!ZI.echoes||eO++&&e===RI:!eO||--eO&&e===RI)||fO(t?sO.bind(null,e):lO),e!==RI&&(RI=e,n===TI&&(TI.env=cO()),xI)){var r=TI.env.Promise,i=e.env;gI.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(rR,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function cO(){var e=rR.Promise;return xI?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(rR,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:gI.then,gthen:e.prototype.then}:{}}function dO(e,t,n,r,i){var o=RI;try{return uO(e,!0),t(n,r,i)}finally{uO(o,!1)}}function fO(e){yI.call(mI,e)}function pO(e,t,n,r){return"function"!=typeof e?e:function(){var i=RI;n&&iO(),uO(t,!0);try{return e.apply(this,arguments)}finally{uO(i,!1),r&&fO(oO)}}}function hO(e,t){return function(n,r){return e.call(this,pO(n,t),pO(r,t))}}function mO(e,t){var n;try{n=t.onuncatched(e)}catch(rR){}if(!1!==n)try{var r,i={promise:t,reason:e};if(rR.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),aR(r,i)):rR.CustomEvent&&aR(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&rR.dispatchEvent&&(dispatchEvent(r),!rR.PromiseRejectionEvent&&rR.onunhandledrejection))try{rR.onunhandledrejection(r)}catch(rR){}zR&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(rR){}}-1===(""+yI).indexOf("[native code]")&&(iO=oO=rI);var gO=DI.reject;function vO(e,t,n,r){if(e.idbdb&&(e._state.openComplete||RI.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===QR.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return vO(e,t,n,r)}))):gO(i)}return i._promise(t,(function(e,t){return rO((function(){return RI.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(e._state.openComplete)return gO(new eI.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return gO(new eI.DatabaseClosed);e.open().catch(rI)}return e._state.dbReadyPromise.then((function(){return vO(e,t,n,r)}))}var yO=String.fromCharCode(65535),bO="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xO=[],wO="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),_O=wO,SO=wO,CO=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function EO(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var kO={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function PO(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=TR(t))[e],t}}var MO=function(){function e(){Di(this,e)}return Ni(e,[{key:"_trans",value:function(e,t,n){var r=this._tx||RI.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new eI.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=$I();try{return r&&r.db===this.db?r===RI.trans?r._promise(e,o,n):rO((function(){return r._promise(e,o,n)}),{trans:r,transless:RI.transless||RI}):vO(this.db,e,[this.name],o)}finally{a&&qI()}}},{key:"get",value:function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)}},{key:"where",value:function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(oR(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=iR(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==yO)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&zR&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit of a compound index [").concat(t.join("+"),"]"));var r=this.schema.idxByName,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var a=t.reduce((function(t,n){var i=c(t,2),a=i[0],s=i[1],l=r[n],u=e[n];return[a||l,a||!l?EO(s,l&&l.multi?function(e){var t=_R(e,n);return oR(t)&&t.some((function(e){return o(u,e)}))}:function(e){return o(u,_R(e,n))}):s]}),[null,null]),s=c(a,2),l=s[0],u=s[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(u):n?this.filter(u):this.where(t).equals("")}},{key:"filter",value:function(e){return this.toCollection().and(e)}},{key:"count",value:function(e){return this.toCollection().count(e)}},{key:"offset",value:function(e){return this.toCollection().offset(e)}},{key:"limit",value:function(e){return this.toCollection().limit(e)}},{key:"each",value:function(e){return this.toCollection().each(e)}},{key:"toArray",value:function(e){return this.toCollection().toArray(e)}},{key:"toCollection",value:function(){return new this.db.Collection(new this.db.WhereClause(this))}},{key:"orderBy",value:function(e){return new this.db.Collection(new this.db.WhereClause(this,oR(e)?"[".concat(e.join("+"),"]"):e))}},{key:"reverse",value:function(){return this.toCollection().reverse()}},{key:"mapToClass",value:function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(uR(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}},{key:"defineClass",value:function(){return this.mapToClass((function(e){aR(this,e)}))}},{key:"add",value:function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=PO(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?DI.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{SR(e,o,t)}catch(e){}return t}))}},{key:"update",value:function(e,t){if("object"!=typeof e||oR(e))return this.where(":id").equals(e).modify(t);var n=_R(e,this.schema.primKey.keyPath);if(void 0===n)return gO(new eI.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?iR(t).forEach((function(n){SR(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}},{key:"put",value:function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=PO(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?DI.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{SR(e,o,t)}catch(e){}return t}))}},{key:"delete",value:function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?DI.reject(e.failures[0]):void 0}))}},{key:"clear",value:function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:kO})})).then((function(e){return e.numFailures?DI.reject(e.failures[0]):void 0}))}},{key:"bulkGet",value:function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))}},{key:"bulkAdd",value:function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new eI.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new eI.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,u=s&&a?e.map(PO(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:u,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new ZR("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(l," operations failed"),a)}))}))}},{key:"bulkPut",value:function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new eI.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new eI.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,u=s&&a?e.map(PO(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:u,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new ZR("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(l," operations failed"),a)}))}))}},{key:"bulkDelete",value:function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new ZR("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),o)}))}}]),e}();function AO(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return a(e);r||(r=cI),i||(i=rI);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function a(e){iR(e).forEach((function(t){var n=e[t];if(oR(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new eI.InvalidArgument("Invalid event config");var r=o(t,iI,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){xR((function(){e.apply(null,t)}))}))}))}}))}}function TO(e,t){return pR(t).from({prototype:e}),t}function RO(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function IO(e,t){e.filter=EO(e.filter,t)}function OO(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return EO(r(),t())}:t,e.justLimit=n&&!r}function LO(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new eI.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function DO(e,t,n){var r=LO(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function FO(e,t,n,r){var i=e.replayFilter?EO(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),uR(o,s)||(o[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),NO(DO(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return NO(DO(e,r,n),EO(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function NO(e,t,n,r){var i=YI(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=rI}),(function(t){e.fail(t),n=rI}))||i(e.value,e,(function(e){return n=e})),n()}))}))}function BO(e,t){try{var n=zO(e),r=zO(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(jO(e),jO(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=BO(e[o],t[o]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function zO(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=OR(e);return"ArrayBuffer"===n?"binary":n}function jO(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var HO=function(){function e(){Di(this,e)}return Ni(e,[{key:"_read",value:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,gO.bind(null,n.error)):n.table._trans("readonly",e).then(t)}},{key:"_write",value:function(e){var t=this._ctx;return t.error?t.table._trans(null,gO.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}},{key:"_addAlgorithm",value:function(e){var t=this._ctx;t.algorithm=EO(t.algorithm,e)}},{key:"_iterate",value:function(e,t){return FO(this._ctx,e,t,this._ctx.table.core)}},{key:"clone",value:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&aR(n,e),t._ctx=n,t}},{key:"raw",value:function(){return this._ctx.valueMapper=null,this}},{key:"each",value:function(e){var t=this._ctx;return this._read((function(n){return FO(t,e,n,t.table.core)}))}},{key:"count",value:function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(RO(n,!0))return r.count({trans:e,query:{index:LO(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return FO(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)}},{key:"sortBy",value:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)}},{key:"toArray",value:function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&RO(n,!0)&&n.limit>0){var r=n.valueMapper,i=LO(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return FO(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)}},{key:"offset",value:function(e){var t=this._ctx;return e<=0||(t.offset+=e,RO(t)?OO(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):OO(t,(function(){var t=e;return function(){return--t<0}}))),this}},{key:"limit",value:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),OO(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}},{key:"until",value:function(e,t){return IO(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}},{key:"first",value:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}},{key:"last",value:function(e){return this.reverse().first(e)}},{key:"filter",value:function(e){var t,n;return IO(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=EO(t.isMatch,n),this}},{key:"and",value:function(e){return this.filter(e)}},{key:"or",value:function(e){return new this.db.WhereClause(this._ctx.table,e,this)}},{key:"reverse",value:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}},{key:"desc",value:function(){return this.reverse()}},{key:"eachKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}},{key:"eachUniqueKey",value:function(e){return this._ctx.unique="unique",this.eachKey(e)}},{key:"eachPrimaryKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}},{key:"keys",value:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}},{key:"primaryKeys",value:function(e){var t=this._ctx;if("next"===t.dir&&RO(t,!0)&&t.limit>0)return this._read((function(e){var n=LO(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}},{key:"uniqueKeys",value:function(e){return this._ctx.unique="unique",this.keys(e)}},{key:"firstKey",value:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}},{key:"lastKey",value:function(e){return this.reverse().firstKey(e)}},{key:"distinct",value:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return IO(this._ctx,(function(e){var t=e.primaryKey.toString(),r=uR(n,t);return n[t]=!0,!r})),this}},{key:"modify",value:function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var o=iR(e),a=o.length;i=function(t){for(var n=!1,r=0;r<a;++r){var i=o[r],s=e[i];_R(t,i)!==s&&(SR(t,i,s),n=!0)}return n}}var s=n.table.core,l=s.schema.primaryKey,u=l.outbound,c=l.extractKey,d=t.db._options.modifyChunkSize||200,f=[],p=0,h=[],m=function(e,t){var n=t.failures,r=t.numFailures;p+=e-r;var i,o=$A(iR(n));try{for(o.s();!(i=o.n()).done;){var a=i.value;f.push(n[a])}}catch(s){o.e(s)}finally{o.f()}};return t.clone().primaryKeys().then((function(t){return function o(a){var l=Math.min(d,t.length-a);return s.getMany({trans:r,keys:t.slice(a,a+l),cache:"immutable"}).then((function(f){for(var p=[],h=[],g=u?[]:null,v=[],y=0;y<l;++y){var b=f[y],x={value:TR(b),primKey:t[a+y]};!1!==i.call(x,x.value,x)&&(null==x.value?v.push(t[a+y]):u||0===BO(c(b),c(x.value))?(h.push(x.value),u&&g.push(t[a+y])):(v.push(t[a+y]),p.push(x.value)))}var w=RO(n)&&n.limit===1/0&&("function"!=typeof e||e===UO)&&{index:n.index,range:n.range};return Promise.resolve(p.length>0&&s.mutate({trans:r,type:"add",values:p}).then((function(e){for(var t in e.failures)v.splice(parseInt(t),1);m(p.length,e)}))).then((function(){return(h.length>0||w&&"object"==typeof e)&&s.mutate({trans:r,type:"put",keys:g,values:h,criteria:w,changeSpec:"function"!=typeof e&&e}).then((function(e){return m(h.length,e)}))})).then((function(){return(v.length>0||w&&e===UO)&&s.mutate({trans:r,type:"delete",keys:v,criteria:w}).then((function(e){return m(v.length,e)}))})).then((function(){return t.length>a+l&&o(a+d)}))}))}(0).then((function(){if(f.length>0)throw new YR("Error modifying one or more objects",f,p,h);return t.length}))}))}))}},{key:"delete",value:function(){var e=this._ctx,t=e.range;return RO(e)&&(e.isPrimKey&&!SO||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new YR("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify(UO)}}]),e}(),UO=function(e,t){return t.value=null};function VO(e,t){return e<t?-1:e===t?0:1}function GO(e,t){return e>t?-1:e===t?0:1}function WO(e,t,n){var r=e instanceof ZO?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function $O(e){return new e.Collection(e,(function(){return YO("")})).limit(0)}function qO(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,l=0;l<a;++l){var u=t[l];if(u!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],u)<0&&(s=l)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function XO(e,t,n,r){var i,o,a,s,l,u,c,d=n.length;if(!n.every((function(e){return"string"==typeof e})))return WO(e,"String expected.");function f(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?VO:GO;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),u=e,c="next"===e?"":r}f("next");var p=new e.Collection(e,(function(){return KO(s[0],l[d-1]+r)}));p._ondirectionchange=function(e){f(e)};var h=0;return p._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var f=o(i);if(t(f,l,h))return!0;for(var p=null,m=h;m<d;++m){var g=qO(i,f,s[m],l[m],a,u);null===g&&null===p?h=m+1:(null===p||a(p,g)>0)&&(p=g)}return n(null!==p?function(){e.continue(p+c)}:r),!1})),p}function KO(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function YO(e){return{type:1,lower:e,upper:e}}var ZO=function(){function e(){Di(this,e)}return Ni(e,[{key:"Collection",get:function(){return this._ctx.table.db.Collection}},{key:"between",value:function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?$O(this):new this.Collection(this,(function(){return KO(e,t,!n,!r)}))}catch(e){return WO(this,bO)}}},{key:"equals",value:function(e){return null==e?WO(this,bO):new this.Collection(this,(function(){return YO(e)}))}},{key:"above",value:function(e){return null==e?WO(this,bO):new this.Collection(this,(function(){return KO(e,void 0,!0)}))}},{key:"aboveOrEqual",value:function(e){return null==e?WO(this,bO):new this.Collection(this,(function(){return KO(e,void 0,!1)}))}},{key:"below",value:function(e){return null==e?WO(this,bO):new this.Collection(this,(function(){return KO(void 0,e,!1,!0)}))}},{key:"belowOrEqual",value:function(e){return null==e?WO(this,bO):new this.Collection(this,(function(){return KO(void 0,e)}))}},{key:"startsWith",value:function(e){return"string"!=typeof e?WO(this,"String expected."):this.between(e,e+yO,!0,!0)}},{key:"startsWithIgnoreCase",value:function(e){return""===e?this.startsWith(e):XO(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],yO)}},{key:"equalsIgnoreCase",value:function(e){return XO(this,(function(e,t){return e===t[0]}),[e],"")}},{key:"anyOfIgnoreCase",value:function(){var e=NR.apply(FR,arguments);return 0===e.length?$O(this):XO(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")}},{key:"startsWithAnyOfIgnoreCase",value:function(){var e=NR.apply(FR,arguments);return 0===e.length?$O(this):XO(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,yO)}},{key:"anyOf",value:function(){var e=this,t=NR.apply(FR,arguments),n=this._cmp;try{t.sort(n)}catch(t){return WO(this,bO)}if(0===t.length)return $O(this);var r=new this.Collection(this,(function(){return KO(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;n(a,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r}},{key:"notEqual",value:function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}},{key:"noneOf",value:function(){var e=NR.apply(FR,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return WO(this,bO)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}},{key:"inAnyRange",value:function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,s=this._max;if(0===e.length)return $O(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return WO(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",eI.InvalidArgument);var l,u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,d=i;function f(e,t){return d(e[0],t[0])}try{l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=s(o[1],t[1]);break}}return n===i&&e.push(t),e}),[]),l.sort(f)}catch(e){return WO(this,bO)}var p=0,h=c?function(e){return i(e,l[p][1])>0}:function(e){return i(e,l[p][1])>=0},m=u?function(e){return o(e,l[p][0])>0}:function(e){return o(e,l[p][0])>=0},g=h,v=new this.Collection(this,(function(){return KO(l[0][0],l[l.length-1][1],!u,!c)}));return v._ondirectionchange=function(e){"next"===e?(g=h,d=i):(g=m,d=o),l.sort(f)},v._addAlgorithm((function(e,t,r){for(var o=e.key;g(o);)if(++p===l.length)return t(r),!1;return!!function(e){return!h(e)&&!m(e)}(o)||(0===n._cmp(o,l[p][1])||0===n._cmp(o,l[p][0])||t((function(){d===i?e.continue(l[p][0]):e.continue(l[p][1])})),!1)})),v}},{key:"startsWithAnyOf",value:function(){var e=NR.apply(FR,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?$O(this):this.inAnyRange(e.map((function(e){return[e,e+yO]}))):WO(this,"startsWithAnyOf() only works with strings")}}]),e}();function QO(e){return YI((function(t){return JO(t),e(t.target.error),!1}))}function JO(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var eL=AO(null,"storagemutated"),tL=function(){function e(){Di(this,e)}return Ni(e,[{key:"_lock",value:function(){return bR(!RI.global),++this._reculock,1!==this._reculock||RI.global||(RI.lockOwnerFor=this),this}},{key:"_unlock",value:function(){if(bR(!RI.global),0==--this._reculock)for(RI.global||(RI.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{dO(e[1],e[0])}catch(e){}}return this}},{key:"_locked",value:function(){return this._reculock&&RI.lockOwnerFor!==this}},{key:"create",value:function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(bR(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new eI.DatabaseClosed(r);case"MissingAPIError":throw new eI.MissingAPI(r.message,r);default:throw new eI.OpenFailed(r)}if(!this.active)throw new eI.TransactionInactive;return bR(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=YI((function(n){JO(n),t._reject(e.error)})),e.onabort=YI((function(n){JO(n),t.active&&t._reject(new eI.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=YI((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&eL.storagemutated.fire(e.mutatedParts)})),this}},{key:"_promise",value:function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return gO(new eI.ReadOnly("Transaction is readonly"));if(!this.active)return gO(new eI.TransactionInactive);if(this._locked())return new DI((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},RI])}));if(n)return rO((function(){var e=new DI((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new DI((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i}},{key:"_root",value:function(){return this.parent?this.parent._root():this}},{key:"waitFor",value:function(e){var t=this._root(),n=DI.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new DI((function(e,r){n.then((function(n){return t._waitingQueue.push(YI(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(YI(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))}},{key:"abort",value:function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new eI.Abort))}},{key:"table",value:function(e){var t=this._memoizedTables||(this._memoizedTables={});if(uR(t,e))return t[e];var n=this.schema[e];if(!n)throw new eI.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}]),e}();function nL(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+rL(t)}}function rL(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function iL(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:wR(n,(function(e){return[e.name,e]}))}}var oL=function(e){try{return e.only([[]]),oL=function(){return[[]]},[[]]}catch(e){return oL=function(){return yO},yO}};function aL(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return _R(t,e)}}(e):function(t){return _R(t,e)}}function sL(e){return[].slice.call(e)}var lL=0;function uL(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function cL(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}var i=function(e,t){var n=sL(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=oR(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:aL(t)},indexes:sL(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,a={name:t,compound:oR(i),keyPath:i,unique:n,multiEntry:r,extractKey:aL(i)};return o[uL(i)]=a,a})),getIndexByKeyPath:function(e){return o[uL(e)]}};return o[":id"]=a.primaryKey,null!=t&&(o[uL(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.schema,a=i.hasGetAll,s=o.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,i=e.type,o=e.keys,a=e.values,s=e.range;return new Promise((function(e,l){e=YI(e);var u=n.objectStore(t),d=null==u.keyPath,f="put"===i||"add"===i;if(!f&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var p,h=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var m=[],g=[],v=0,y=function(e){++v,JO(e)};if("deleteRange"===i){if(4===s.type)return e({numFailures:v,failures:g,results:[],lastResult:void 0});3===s.type?m.push(p=u.clear()):m.push(p=u.delete(r(s)))}else{var b=c(f?d?[a,o]:[a,null]:[o,null],2),x=b[0],w=b[1];if(f)for(var _=0;_<h;++_)m.push(p=w&&void 0!==w[_]?u[i](x[_],w[_]):u[i](x[_])),p.onerror=y;else for(var S=0;S<h;++S)m.push(p=u[i](x[S])),p.onerror=y}var C=function(t){var n=t.target.result;m.forEach((function(e,t){return null!=e.error&&(g[t]=e.error)})),e({numFailures:v,failures:g,results:"delete"===i?o:m.map((function(e){return e.result})),lastResult:n})};p.onerror=function(e){y(e),C(e)},p.onsuccess=C}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=YI(e);for(var o,a=n.objectStore(t),s=r.length,l=new Array(s),u=0,c=0,d=function(t){var n=t.target;l[n._pos]=n.result,++c===u&&e(l)},f=QO(i),p=0;p<s;++p)null!=r[p]&&((o=a.get(r[p]))._pos=p,o.onsuccess=d,o.onerror=f,++u);0===u&&e(l)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=YI(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=QO(i)}))},query:function(e){return function(n){return new Promise((function(i,o){i=YI(i);var a=n.trans,s=n.values,l=n.limit,u=n.query,c=l===1/0?void 0:l,d=u.index,f=u.range,p=a.objectStore(t),h=d.isPrimaryKey?p:p.index(d.name),m=r(f);if(0===l)return i({result:[]});if(e){var g=s?h.getAll(m,c):h.getAllKeys(m,c);g.onsuccess=function(e){return i({result:e.target.result})},g.onerror=QO(o)}else{var v=0,y=s||!("openKeyCursor"in h)?h.openCursor(m):h.openKeyCursor(m),b=[];y.onsuccess=function(e){var t=y.result;return t?(b.push(s?t.value:t.primaryKey),++v===l?i({result:b}):void t.continue()):i({result:b})},y.onerror=QO(o)}}))}}(a),openCursor:function(e){var n=e.trans,i=e.values,o=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,l){e=YI(e);var u=o.index,c=o.range,d=n.objectStore(t),f=u.isPrimaryKey?d:d.index(u.name),p=a?s?"prevunique":"prev":s?"nextunique":"next",h=i||!("openKeyCursor"in f)?f.openCursor(r(c),p):f.openKeyCursor(r(c),p);h.onerror=QO(l),h.onsuccess=YI((function(t){var r=h.result;if(r){r.___id=++lL,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=YI(l),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=YI(e),h.onerror=QO(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=s,e(t)}})),n=function(){if(h.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return h.onsuccess=YI((function(e){h.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,n(),t},e(r)}else e(null)}),l)}))},count:function(e){var n=e.query,i=e.trans,o=n.index,a=n.range;return new Promise((function(e,n){var s=i.objectStore(t),l=o.isPrimaryKey?s:s.index(o.name),u=r(a),c=u?l.count(u):l.count();c.onsuccess=YI((function(t){return e(t.target.result)})),c.onerror=QO(n)}))}}}(e)})),l={};return s.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '".concat(e,"' not found"));return l[e]},MIN_KEY:-1/0,MAX_KEY:oL(t),schema:o}}function dL(e,t){var n=e._novip,r=t.db,i=function(e,t,n,r){var i=n.IDBKeyRange,o=(n.indexedDB,function(e,t){return t.reduce((function(e,t){var n=t.create;return m(m({},e),n(e))}),e)}(cL(t,i,r),e.dbcore));return{dbcore:o}}(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function fL(e,t,n,r){var i=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=mR(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?fR(t,e,{get:function(){return this.table(e)},set:function(t){dR(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function pL(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function hL(e,t){return e._cfg.version-t._cfg.version}function mL(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=RI.transless||RI;rO((function(){RI.trans=o,RI.transless=s,0===t?(iR(i).forEach((function(e){vL(n,e,i[e].primKey,i[e].indexes)})),dL(e,n),DI.follow((function(){return e.on.populate.fire(o)})).catch(a)):function(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=bL(i,i.idbdb,r),l=!1;return a.filter((function(e){return e._cfg.version>=t})).forEach((function(e){o.push((function(){var o=s,a=e._cfg.dbschema;xL(i,o,r),xL(i,a,r),s=i._dbSchema=a;var u=gL(o,a);u.add.forEach((function(e){vL(r,e[0],e[1].primKey,e[1].indexes)})),u.change.forEach((function(e){if(e.recreate)throw new eI.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return yL(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),yL(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>t){dL(i,r),n._memoizedTables={},l=!0;var d=CR(a);u.del.forEach((function(e){d[e]=o[e]})),pL(i,[i.Transaction.prototype]),fL(i,[i.Transaction.prototype],iR(d),d),n.schema=d;var f,p=BR(c);p&&iO();var h=DI.follow((function(){if((f=c(n))&&p){var e=oO.bind(null,null);f.then(e,e)}}));return f&&"function"==typeof f.then?DI.resolve(f):h.then((function(){return f}))}})),o.push((function(t){l&&_O||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(e._cfg.dbschema,t),pL(i,[i.Transaction.prototype]),fL(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema}))})),function e(){return o.length?DI.resolve(o.shift()(n.idbtrans)).then(e):DI.resolve()}().then((function(){var e,t;t=r,iR(e=s).forEach((function(n){t.db.objectStoreNames.contains(n)||vL(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(a)}))}function gL(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!wO)a.recreate=!0,r.change.push(a);else{var s=i.idxByName,l=o.idxByName,u=void 0;for(u in s)l[u]||a.del.push(u);for(u in l){var c=s[u],d=l[u];c?c.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function vL(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return yL(i,e)})),i}function yL(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function bL(e,t,n){var r={};return vR(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=nL(rL(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[],s=0;s<t.indexNames.length;++s){var l=t.index(t.indexNames[s]);i=l.keyPath;var u=nL(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(u)}r[e]=iL(e,o,a)})),r}function xL(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var u=s.indexNames[l],c=s.index(u).keyPath,d="string"==typeof c?c:"["+vR(c).join("+")+"]";if(t[a]){var f=t[a].idxByName[d];f&&(f.name=u,delete t[a].idxByName[d],t[a].idxByName[u]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&rR.WorkerGlobalScope&&rR instanceof rR.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}var wL=function(){function e(){Di(this,e)}return Ni(e,[{key:"_parseStoresSpec",value:function(e,t){iR(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return nL(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),oR(r),0===t)})),i=r.shift();if(i.multi)throw new eI.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new eI.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new eI.Schema("Index must have a name and cannot be an empty string")})),t[n]=iL(n,i,r)}}))}},{key:"stores",value:function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?aR(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){aR(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,pL(t,[t._allTables,t,t.Transaction.prototype]),fL(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],iR(i),i),t._storeNames=iR(i),this}},{key:"upgrade",value:function(e){return this._cfg.contentUpgrade=dI(this._cfg.contentUpgrade||rI,e),this}}]),e}();function _L(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new GL("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function SL(e){return e&&"function"==typeof e.databases}function CL(e){return rO((function(){return RI.letThrough=!0,e()}))}function EL(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function kL(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):oR(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function PL(e,t,n){var r=arguments.length;if(r<2)throw new eI.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=kR(i);return[e,o,n]}function ML(e,t,n,r,i){return DI.resolve().then((function(){var o=RI.transless||RI,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===QR.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return ML(e,t,n,null,i)}))):gO(r)}var l,u=BR(i);u&&iO();var c=DI.follow((function(){if(l=i.call(a,a))if(u){var e=oO.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=kL(l))}),s);return(l&&"function"==typeof l.then?DI.resolve(l).then((function(e){return a.active?e:gO(new eI.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return l}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),gO(e)}))}))}function AL(e,t,n){for(var r=oR(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var TL={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return m(m({},e),{},{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(e,t,n){var r=uL(e),s=i[r]=i[r]||[],l=null==e?0:"string"==typeof e?1:e.length,u=t>0,c=m(m({},n),{},{isVirtual:u,keyTail:t,keyLength:l,extractKey:aL(e),unique:!u&&n.unique});return s.push(c),c.isPrimaryKey||o.push(c),l>1&&a(2===l?e[0]:e.slice(0,l-1),t+1,n),s.sort((function(e,t){return e.keyTail-t.keyTail})),c}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];var l,u=$A(r.indexes);try{for(u.s();!(l=u.n()).done;){var c=l.value;a(c.keyPath,0,c)}}catch(p){u.e(p)}finally{u.f()}function d(t){var n,r,i=t.query.index;return i.isVirtual?m(m({},t),{},{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:AL(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:AL(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}var f=m(m({},n),{},{schema:m(m({},r),{},{primaryKey:s,indexes:o,getIndexByKeyPath:function(e){var t=i[uL(e)];return t&&t[0]}}),count:function(e){return n.count(d(e))},query:function(e){return n.query(d(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,o=r.isVirtual,a=r.keyLength;return o?n.openCursor(d(t)).then((function(n){return n&&function(n){var r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(AL(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(AL(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}});return r}(n)})):n.openCursor(t)}});return f}})}};function RL(e,t,n,r){return n=n||{},r=r||"",iR(e).forEach((function(i){if(uR(t,i)){var o=e[i],a=t[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var s=OR(o);s!==OR(a)?n[r+i]=t[i]:"Object"===s?RL(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),iR(t).forEach((function(i){uR(e,i)||(n[r+i]=t[i])})),n}var IL={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return m(m({},e),{},{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=m(m({},n),{},{mutate:function(e){var i=RI.trans,o=i.table(t).hook,a=o.deleting,s=o.creating,l=o.updating;switch(e.type){case"add":if(s.fire===rI)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"put":if(s.fire===rI&&l.fire===rI)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"delete":if(a.fire===rI)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"deleteRange":if(a.fire===rI)break;return i._promise("readwrite",(function(){return function(e){return c(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function u(e){var t=RI.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?m(m({},e),{},{keys:i}):m({},e)).type&&(e.values=z(e.values)),e.keys&&(e.keys=z(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((function(o){var u=i.map((function(n,i){var u=o[i],c={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(c,n,u,t);else if("add"===e.type||void 0===u){var d=s.fire.call(c,n,e.values[i],t);null==n&&null!=d&&(n=d,e.keys[i]=n,r.outbound||SR(e.values[i],r.keyPath,n))}else{var f=RL(u,e.values[i]),p=l.fire.call(c,f,n,u,t);if(p){var h=e.values[i];Object.keys(p).forEach((function(e){uR(h,e)?h[e]=p[e]:SR(h,e,p[e])}))}}return c}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,a=t.numFailures,s=t.lastResult,l=0;l<i.length;++l){var c=r?r[l]:i[l],d=u[l];null==c?d.onerror&&d.onerror(n[l]):d.onsuccess&&d.onsuccess("put"===e.type&&o[l]?e.values[l]:c)}return{failures:n,results:r,numFailures:a,lastResult:s}})).catch((function(e){return u.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function c(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return u({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:c(e,m(m({},t),{},{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}});return i}})}};function OL(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===BO(t.keys[i],e[o])&&(r.push(n?TR(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}var LL={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return m(m({},n),{},{getMany:function(e){if(!e.cache)return n.getMany(e);var t=OL(e.keys,e.trans._cache,"clone"===e.cache);return t?DI.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?TR(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function DL(e){return!("from"in e)}var FL=function e(t,n){if(!this){var r=new e;return t&&"d"in t&&aR(r,t),r}aR(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0})};function NL(e,t,n){var r=BO(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(DL(e))return aR(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(BO(n,e.from)<0)return i?NL(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},jL(e);if(BO(t,e.to)>0)return o?NL(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},jL(e);BO(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),BO(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&BL(e,i),o&&a&&BL(e,o)}}function BL(e,t){DL(t)||function e(t,n){var r=n.from,i=n.to,o=n.l,a=n.r;NL(t,r,i),o&&e(t,o),a&&e(t,a)}(e,t)}function zL(e){var t=DL(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&BO(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||BO(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function jL(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o="r"===i?"l":"r",a=m({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],a[i]=s[o],e[o]=a,a.d=HL(a)}e.d=HL(e)}function HL(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}cR(FL.prototype,p({add:function(e){return BL(this,e),this},addKey:function(e){return NL(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return NL(t,e,e)})),this}},LR,(function(){return zL(this)})));var UL,VL={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new FL(e.MIN_KEY,e.MAX_KEY);return m(m({},e),{},{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,s=a.extractKey,l=a.outbound,u=m(m({},i),{},{mutate:function(e){var a=e.trans,s=a.mutatedParts||(a.mutatedParts={}),l=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return s[n]||(s[n]=new FL)},u=l(""),d=l(":dels"),f=e.type,p=c("deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],2),h=p[0],m=p[1],g=e.trans._cache;return i.mutate(e).then((function(e){if(oR(h)){"delete"!==f&&(h=e.results),u.addKeys(h);var t=OL(h,g);t||"add"===f||d.addKeys(h),(t||m)&&function(e,t,n,r){t.indexes.forEach((function(t){var i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}var a=function(e){return t.multiEntry&&oR(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(n||r).forEach((function(e,t){var i=n&&o(n[t]),s=r&&o(r[t]);0!==BO(i,s)&&(null!=i&&a(i),null!=s&&a(s))}))}))}(l,o,t,m)}else if(h){var r={from:h.lower,to:h.upper};d.add(r),u.add(r)}else u.add(n),d.add(n),o.indexes.forEach((function(e){return l(e.name).add(n)}));return e}))}}),d=function(t){var n,r,i=t.query,o=i.index,a=i.range;return[o,new FL(null!==(n=a.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=a.upper)&&void 0!==r?r:e.MAX_KEY)]},f={get:function(e){return[a,new FL(e.key)]},getMany:function(e){return[a,(new FL).addKeys(e.keys)]},count:d,query:d,openCursor:d};return iR(f).forEach((function(e){u[e]=function(o){var a=RI,u=a.subscr;if(u){var d=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return u[n]||(u[n]=new FL)},p=d(""),h=d(":dels"),g=f[e](o),v=c(g,2),y=v[0],b=v[1];if(d(y.name||"").add(b),!y.isPrimaryKey){if("count"!==e){var x="query"===e&&l&&o.values&&i.query(m(m({},o),{},{values:!1}));return i[e].apply(this,arguments).then((function(t){if("query"===e){if(l&&o.values)return x.then((function(e){var n=e.result;return p.addKeys(n),t}));var n=o.values?t.result.map(s):t.result;o.values?p.addKeys(n):h.addKeys(n)}else if("openCursor"===e){var r=t,i=o.values;return r&&Object.create(r,{key:{get:function(){return h.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return h.addKey(e),e}},value:{get:function(){return i&&p.addKey(r.primaryKey),r.value}}})}return t}))}h.add(n)}}return i[e].apply(this,arguments)}})),u}})}},GL=function(){function e(t,n){var r=this;Di(this,e),this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=m({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:rI,dbReadyPromise:null,cancelOpen:rI,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};s.dbReadyPromise=new DI((function(e){s.dbReadyResolve=e})),s.openCanceller=new DI((function(e,t){s.cancelOpen=t})),this._state=s,this.name=t,this.on=AO(this,"populate","blocked","versionchange","close",{ready:[dI,rI]}),this.on.ready.subscribe=yR(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||DI.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var o=r;i||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(a=this,TO(HO.prototype,(function(e,t){this.db=a;var n=kO,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table,s=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s!==iI?s:null}}))),this.Table=function(e){return TO(MO.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:AO(null,{creating:[sI,rI],reading:[oI,iI],updating:[uI,rI],deleting:[lI,rI]})}))}(this),this.Transaction=function(e){return TO(tL.prototype,(function(t,n,r,i,o){var a=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=AO(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new DI((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),gO(e)}))}))}(this),this.Version=function(e){return TO(wL.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return TO(ZO.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new eI.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=oL(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),xO.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(TL),this.use(IL),this.use(VL),this.use(LL),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach((function(e){return e(r)}))}return Ni(e,[{key:"version",value:function(e){if(isNaN(e)||e<.1)throw new eI.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new eI.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(hL),n.stores({}),this._state.autoSchema=!1,n)}},{key:"_whenReady",value:function(e){var t=this;return this.idbdb&&(this._state.openComplete||RI.letThrough||this._vip)?e():new DI((function(e,n){if(t._state.openComplete)return n(new eI.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new eI.DatabaseClosed);t.open().catch(rI)}t._state.dbReadyPromise.then(e,n)})).then(e)}},{key:"use",value:function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this}},{key:"unuse",value:function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this}},{key:"open",value:function(){return function(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?gO(t.dbOpenError):e}));zR&&(t.openCanceller._stackHolder=VR()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new eI.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return DI.race([r,("undefined"==typeof navigator?DI.resolve():EL()).then((function(){return new DI((function(r,o){if(i(),!n)throw new eI.MissingAPI;var l=e.name,u=t.autoSchema?n.open(l):n.open(l,Math.round(10*e.verno));if(!u)throw new eI.MissingAPI;u.onerror=QO(o),u.onblocked=YI(e._fireOnBlocked),u.onupgradeneeded=YI((function(r){if(a=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=JO,a.abort(),u.result.close();var i=n.deleteDatabase(l);i.onsuccess=i.onerror=YI((function(){o(new eI.NoSuchDatabase("Database ".concat(l," doesnt exist")))}))}else{a.onerror=QO(o);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;s=c<1,e._novip.idbdb=u.result,mL(e,c/10,a,o)}}),o),u.onsuccess=YI((function(){a=null;var n,i=e._novip.idbdb=u.result,o=vR(i.objectStoreNames);if(o.length>0)try{var c=i.transaction(1===(n=o).length?n[0]:n,"readonly");t.autoSchema?function(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=bL(0,t,n);r._storeNames=vR(t.objectStoreNames,0),fL(r,[r._allTables],iR(i),i)}(e,i,c):(xL(e,e._dbSchema,c),function(e,t){var n=gL(bL(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,c)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),dL(e,c)}catch(e){}xO.push(e),i.onversionchange=YI((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),i.onclose=YI((function(t){e.on("close").fire(t)})),s&&function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!SL(n)&&"__dbnames"!==t&&_L(n,r).put({name:t}).catch(rI)}(e._deps,l),r()}),o)}))}))]).then((function(){return i(),t.onReadyBeingFired=[],DI.resolve(CL((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(dI,rI);return t.onReadyBeingFired=[],DI.resolve(CL((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(n){t.dbOpenError=n;try{a&&a.abort()}catch(e){}return r===t.openCanceller&&e._close(),gO(n)})).finally((function(){t.openComplete=!0,o()}))}(this)}},{key:"_close",value:function(){var e=this._state,t=xO.indexOf(this);if(t>=0&&xO.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new DI((function(t){e.dbReadyResolve=t})),e.openCanceller=new DI((function(t,n){e.cancelOpen=n}))}},{key:"close",value:function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new eI.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}},{key:"delete",value:function(){var e=this,t=arguments.length>0,n=this._state;return new DI((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=YI((function(){!function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!SL(n)&&"__dbnames"!==t&&_L(n,r).delete(t).catch(rI)}(e._deps,e.name),r()})),t.onerror=QO(i),t.onblocked=e._fireOnBlocked};if(t)throw new eI.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))}},{key:"backendDB",value:function(){return this.idbdb}},{key:"isOpen",value:function(){return null!==this.idbdb}},{key:"hasBeenClosed",value:function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}},{key:"hasFailed",value:function(){return null!==this._state.dbOpenError}},{key:"dynamicallyOpened",value:function(){return this._state.autoSchema}},{key:"tables",get:function(){var e=this;return iR(this._allTables).map((function(t){return e._allTables[t]}))}},{key:"transaction",value:function(){var e=PL.apply(this,arguments);return this._transaction.apply(this,e)}},{key:"_transaction",value:function(e,t,n){var r=this,i=RI.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)o="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new eI.InvalidArgument("Invalid transaction mode: "+e);o="readwrite"}if(i){if("readonly"===i.mode&&"readwrite"===o){if(!s)throw new eI.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new eI.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):gO(e)}var l=ML.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):RI.trans?dO(RI.transless,(function(){return r._whenReady(l)})):this._whenReady(l)}},{key:"table",value:function(e){if(!uR(this._allTables,e))throw new eI.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]}}]),e}(),WL="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",$L=function(){function e(t){Di(this,e),this._subscribe=t}return Ni(e,[{key:"subscribe",value:function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}},{key:WL,value:function(){return this}}]),e}();function qL(e,t){return iR(t).forEach((function(n){BL(e[n]||(e[n]=new FL),t[n])})),e}try{UL={indexedDB:rR.indexedDB||rR.mozIndexedDB||rR.webkitIndexedDB||rR.msIndexedDB,IDBKeyRange:rR.IDBKeyRange||rR.webkitIDBKeyRange}}catch(rR){UL={indexedDB:null,IDBKeyRange:null}}var XL=GL;function KL(e){var t=YL;try{YL=!0,eL.storagemutated.fire(e)}finally{YL=t}}cR(XL,m(m({},nI),{},{delete:function(e){return new XL(e,{addons:[]}).delete()},exists:function(e){return new XL(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return SL(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return"__dbnames"!==e}))})):_L(t,n).toCollection().primaryKeys()}(XL.dependencies).then(e)}catch(e){return gO(new eI.MissingAPI)}},defineClass:function(){return function(e){aR(this,e)}},ignoreTransaction:function(e){return RI.trans?dO(RI.transless,e):e()},vip:CL,async:function(e){return function(){try{var t=kL(e.apply(this,arguments));return t&&"function"==typeof t.then?t:DI.resolve(t)}catch(e){return gO(e)}}},spawn:function(e,t,n){try{var r=kL(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:DI.resolve(r)}catch(e){return gO(e)}},currentTransaction:{get:function(){return RI.trans||null}},waitFor:function(e,t){var n=DI.resolve("function"==typeof e?XL.ignoreTransaction(e):e).timeout(t||6e4);return RI.trans?RI.trans.waitFor(n):n},Promise:DI,debug:{get:function(){return zR},set:function(e){jR(e,"dexie"===e?function(){return!0}:CO)}},derive:pR,extend:aR,props:cR,override:yR,Events:AO,on:eL,liveQuery:function(e){return new $L((function(t){var n=BR(e),r=!1,i={},o={},a={get closed(){return r},unsubscribe:function(){r=!0,eL.storagemutated.unsubscribe(c)}};t.start&&t.start(a);var s=!1,l=!1;function u(){return iR(o).some((function(e){return i[e]&&function(e,t){var n=zL(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=zL(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(BO(s.from,i.to)<=0&&BO(s.to,i.from)>=0)return!0;BO(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}(i[e],o[e])}))}var c=function(e){qL(i,e),u()&&d()},d=function d(){if(!s&&!r){i={};var f={},p=function(t){n&&iO();var r=function(){return rO(e,{subscr:t,trans:null})},i=RI.trans?dO(RI.transless,r):r();return n&&i.then(oO,oO),i}(f);l||(eL("storagemutated",c),l=!0),s=!0,Promise.resolve(p).then((function(e){s=!1,r||(u()?d():(i={},o=f,t.next&&t.next(e)))}),(function(e){s=!1,t.error&&t.error(e),a.unsubscribe()}))}};return d(),a}))},extendObservabilitySet:qL,getByKeyPath:_R,setByKeyPath:SR,delByKeyPath:function(e,t){"string"==typeof t?SR(e,t,void 0):"length"in t&&[].map.call(t,(function(t){SR(e,t,void 0)}))},shallowClone:CR,deepClone:TR,getObjectDiff:RL,cmp:BO,asap:xR,minKey:-1/0,addons:[],connections:xO,errnames:QR,dependencies:UL,semVer:"3.2.2",version:"3.2.2".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),XL.maxKey=oL(XL.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(eL("storagemutated",(function(e){var t;YL||(wO?(t=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,e):t=new CustomEvent("x-storagemutated-1",{detail:e}),YL=!0,dispatchEvent(t),YL=!1)})),addEventListener("x-storagemutated-1",(function(e){var t=e.detail;YL||KL(t)})));var YL=!1;if("undefined"!=typeof BroadcastChannel){var ZL=new BroadcastChannel("x-storagemutated-1");eL("storagemutated",(function(e){YL||ZL.postMessage(e)})),ZL.onmessage=function(e){e.data&&KL(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){eL("storagemutated",(function(e){try{YL||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&z(self.clients.matchAll({includeUncontrolled:!0})).forEach((function(t){return t.postMessage({type:"x-storagemutated-1",changedParts:e})})))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(e){if("x-storagemutated-1"===e.key){var t=JSON.parse(e.newValue);t&&KL(t.changedParts)}}));var QL=self.document&&navigator.serviceWorker;QL&&QL.addEventListener("message",(function(e){var t=e.data;t&&"x-storagemutated-1"===t.type&&KL(t.changedParts)}))}DI.rejectionMapper=function(e,t){if(!e||e instanceof XR||e instanceof TypeError||e instanceof SyntaxError||!e.name||!tI[e.name])return e;var n=new tI[e.name](t||e.message,e);return"stack"in e&&fR(n,"stack",{get:function(){return this.inner.stack}}),n},jR(zR,CO);var JL=new GL("myDatabase");function eD(){var e=UT(),t=function(){var e=HT().search;return r.useMemo((function(){return new URLSearchParams(e)}),[e])}(),n=t.get("json"),i=c((0,r.useState)({}),2),o=i[0],a=i[1];(0,r.useEffect)((function(){JL.myObjectStore.get(1).then((function(e){e&&a(JSON.parse(e.data))})).catch((function(e){return console.log("db read error",e)}))}),[]),n&&(console.log("load json from:",n),fetch(n).then((function(e){return e.json()})).then((function(t){JL.myObjectStore.put({id:1,data:JSON.stringify(t)}).then((function(){return console.log("sucsefully data written to db")})).catch((function(e){return console.log("db write error",e)})),a(t),e("/")})).catch((function(e){console.error(e)})));var s=HT().pathname.split("/").filter(Boolean),l=o;return 0===Object.keys(o).length?l={"h2:info":"Waiting for the data..."}:s.forEach((function(e){l=l.hasOwnProperty("page:"+e)?l["page:"+e]:{"h2:notfound":e+" not found!"}})),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("input",{type:"file",onChange:function(t){var n=t.target.files[0],r=new FileReader;r.onload=function(t){JL.myObjectStore.put({id:1,data:t.target.result}).then((function(){return console.log("sucsefully data written to db")})).catch((function(e){return console.log("db write error",e)})),a(JSON.parse(t.target.result)),e("/")},r.readAsText(n)}}),l&&(0,_.jsx)(WA,{data:l})]})}JL.version(1).stores({myObjectStore:"data"});var tD=function(){return(0,_.jsx)("div",{className:"App",children:(0,_.jsx)(eR,{children:(0,_.jsx)(QT,{path:"*",element:(0,_.jsx)(eD,{})})})})};function nD(e){var t,n=e.basename,i=e.children,o=e.window,a=r.useRef();null==a.current&&(a.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),nT((function(e,t){var n=e.location;return QA("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:JA(t)}),null,t)));var s=a.current,l=c(r.useState({action:s.action,location:s.location}),2),u=l[0],d=l[1];return r.useLayoutEffect((function(){return s.listen(d)}),[s]),r.createElement(JT,{basename:n,children:i,location:u.location,navigationType:u.action,navigator:s})}var rD,iD;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(rD||(rD={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(iD||(iD={}));o.createRoot(document.getElementById("root")).render((0,_.jsx)(nD,{basename:"/".concat("react-json-wpbuilder"),children:(0,_.jsx)(tD,{})}))}()}();
//# sourceMappingURL=main.d238705b.js.map