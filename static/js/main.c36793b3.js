/*! For license information please see main.c36793b3.js.LICENSE.txt */
!function(){var e={5296:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function f(e){return e.length}function p(e){return e.length}function h(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,b=0,x="";function w(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:a,return:""}}function _(e,t){return a(w("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return b=y>0?u(x,--y):0,g--,10===b&&(g=1,m--),b}function C(){return b=y<v?u(x,y++):0,g++,10===b&&(g=1,m++),b}function k(){return u(x,y)}function M(){return y}function T(e,t){return d(x,e,t)}function A(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function E(e){return m=g=1,v=f(x=e),y=0,[]}function P(e){return x="",e}function R(e){return s(T(y-1,L(91===e?e+2:40===e?e+1:e)))}function O(e){for(;(b=k())&&b<33;)C();return A(e)>2||A(b)>3?"":" "}function I(e,t){for(;--t&&C()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return T(e,M()+(t<6&&32==k()&&32==C()))}function L(e){for(;C();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&L(b);break;case 40:41===e&&L(e);break;case 92:C()}return y}function D(e,t){for(;C()&&e+b!==57&&(e+b!==84||47!==k()););return"/*"+T(t,y-1)+"*"+o(47===e?e:C())}function N(e){for(;!A(k());)C();return T(e,y)}var F="-ms-",z="-moz-",B="-webkit-",j="comm",Z="rule",H="decl",U="@keyframes";function V(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function G(e,t,n,r){switch(e.type){case"@import":case H:return e.return=e.return||e.value;case j:return"";case U:return e.return=e.value+"{"+V(e.children,r)+"}";case Z:e.value=e.props.join(",")}return f(n=V(e.children,r))?e.return=e.value+"{"+n+"}":""}function W(e){return P($("",null,null,null,[""],e=E(e),0,[0],e))}function $(e,t,n,r,i,a,s,d,p){for(var m=0,g=0,v=s,y=0,b=0,x=0,w=1,_=1,T=1,A=0,E="",P=i,L=a,F=r,z=E;_;)switch(x=A,A=C()){case 40:if(108!=x&&58==u(z,v-1)){-1!=c(z+=l(R(A),"&","&\f"),"&\f")&&(T=-1);break}case 34:case 39:case 91:z+=R(A);break;case 9:case 10:case 13:case 32:z+=O(x);break;case 92:z+=I(M()-1,7);continue;case 47:switch(k()){case 42:case 47:h(Y(D(C(),M()),t,n),p);break;default:z+="/"}break;case 123*w:d[m++]=f(z)*T;case 125*w:case 59:case 0:switch(A){case 0:case 125:_=0;case 59+g:b>0&&f(z)-v&&h(b>32?X(z+";",r,n,v-1):X(l(z," ","")+";",r,n,v-2),p);break;case 59:z+=";";default:if(h(F=q(z,t,n,m,g,i,d,E,P=[],L=[],v),a),123===A)if(0===g)$(z,t,F,F,P,a,v,d,L);else switch(99===y&&110===u(z,3)?100:y){case 100:case 109:case 115:$(e,F,F,r&&h(q(e,F,F,0,0,i,d,E,i,P=[],v),L),i,L,v,d,r?P:L);break;default:$(z,F,F,F,[""],L,0,d,L)}}m=g=b=0,w=T=1,E=z="",v=s;break;case 58:v=1+f(z),b=x;default:if(w<1)if(123==A)--w;else if(125==A&&0==w++&&125==S())continue;switch(z+=o(A),A*w){case 38:T=g>0?1:(z+="\f",-1);break;case 44:d[m++]=(f(z)-1)*T,T=1;break;case 64:45===k()&&(z+=R(C())),y=k(),g=v=f(E=z+=N(M())),A++;break;case 45:45===x&&2==f(z)&&(w=0)}}return a}function q(e,t,n,r,o,a,c,u,f,h,m){for(var g=o-1,v=0===o?a:[""],y=p(v),b=0,x=0,_=0;b<r;++b)for(var S=0,C=d(e,g+1,g=i(x=c[b])),k=e;S<y;++S)(k=s(x>0?v[S]+" "+C:l(C,/&\f/g,v[S])))&&(f[_++]=k);return w(e,t,n,0===o?Z:u,f,h,m)}function Y(e,t,n){return w(e,t,n,j,o(b),d(e,2,-2),0)}function X(e,t,n,r){return w(e,t,n,H,d(e,0,r),d(e,r+1,-1),r)}var K=function(e,t,n){for(var r=0,i=0;r=i,i=k(),38===r&&12===i&&(t[n]=1),!A(i);)C();return T(e,y)},J=function(e,t){return P(function(e,t){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===k()&&(t[n]=1),e[n]+=K(y-1,t,n);break;case 2:e[n]+=R(r);break;case 4:if(44===r){e[++n]=58===k()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=C());return e}(E(e),t))},Q=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Q.get(n))&&!r){Q.set(e,!0);for(var i=[],o=J(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return B+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return B+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return B+e+z+e+F+e+e;case 6828:case 4268:return B+e+F+e+e;case 6165:return B+e+F+"flex-"+e+e;case 5187:return B+e+l(e,/(\w+).+(:[^]+)/,B+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return B+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return B+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return B+e+F+l(e,"shrink","negative")+e;case 5292:return B+e+F+l(e,"basis","preferred-size")+e;case 6060:return B+"box-"+l(e,"-grow","")+B+e+F+l(e,"grow","positive")+e;case 4554:return B+l(e,/([^-])(transform)/g,"$1"+B+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,B+"$1"),/(image-set)/,B+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,B+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,B+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+B+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,B+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+B+"$2-$3$1"+z+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,f(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+B)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+B+(45===u(e,14)?"inline-":"")+"box$3$1"+B+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return B+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return B+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return B+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return B+e+F+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case H:e.return=ne(e.value,e.length);break;case U:return V([_(e,{value:l(e.value,"@","@"+B)})],r);case Z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return V([_(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return V([_(e,{props:[l(t,/:(plac\w+)/,":"+B+"input-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,a,s={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var c,u,d=[G,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],f=function(e){var t=p(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([ee,te].concat(i,d));a=function(e,t,n,r){c=n,V(W(e?e+"{"+t.styles+"}":t.styles),f),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return h.sheet.hydrate(l),h}},1097:function(e,t,n){"use strict";var r=n(1816),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,o=(0,r.Z)((function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.Z=o},1816:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},6132:function(e,t,n){"use strict";n.d(t,{T:function(){return s},w:function(){return a}});var r=n(7313),i=n(5296),o=(n(1529),n(5696),(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null));o.Provider;var a=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(o);return e(t,i,n)}))},s=(0,r.createContext)({})},686:function(e,t,n){"use strict";n.d(t,{F4:function(){return u},iv:function(){return c},xB:function(){return l}});var r=n(7313),i=(n(5296),n(6132)),o=(n(7861),n(4911)),a=n(1529),s=n(5696),l=(0,i.w)((function(e,t){var n=e.styles,l=(0,a.O)([n],void 0,(0,r.useContext)(i.T)),c=(0,r.useRef)();return(0,s.j)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,s.j)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.My)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.O)(t)}var u=function(){var e=c.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},1529:function(e,t,n){"use strict";n.d(t,{O:function(){return m}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(1816),a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,o.Z)((function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===i[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"};function f(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=f(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":c(a)&&(r+=u(o)+":"+d(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=f(e,t,a);switch(o){case"animation":case"animationName":r+=u(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)c(a[l])&&(r+=u(o)+":"+d(o,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=p,o=n(e);return p=i,f(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var p,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,o="";p=void 0;var a=e[0];null==a||void 0===a.raw?(i=!1,o+=f(n,t,a)):o+=a[0];for(var s=1;s<e.length;s++)o+=f(n,t,e[s]),i&&(o+=a[s]);h.lastIndex=0;for(var l,c="";null!==(l=h.exec(o));)c+="-"+l[1];return{name:r(o)+c,styles:o,next:p}}},5696:function(e,t,n){"use strict";var r;n.d(t,{L:function(){return a},j:function(){return s}});var i=n(7313),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,a=o||function(e){return e()},s=o||i.useLayoutEffect},4911:function(e,t,n){"use strict";n.d(t,{My:function(){return o},fp:function(){return r},hC:function(){return i}});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}}},4084:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),"HelpOutline");t.Z=a},1317:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=a},5578:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"}),"ScreenShare");t.Z=a},4487:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile");t.Z=a},5045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(6415)},7999:function(e,t,n){"use strict";n.d(t,{Z:function(){return ee}});var r=n(9439),i=n(4942),o=n(7462),a=n(3366),s=n(7313),l=n(3061),c=n(1921),u=n(7592),d=n(7342),f=n(6983),p=n(3236),h=n(9127),m=n(3433),g=n(168),v=n(7326),y=n(4578),b=n(10);function x(e,t){var n=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,s.isValidElement)(e)?t(e):e}(e)})),n}function w(e,t,n){return null!=n[t]?n[t]:e.props[t]}function _(e,t,n){var r=x(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(o){var a=i[o];if((0,s.isValidElement)(a)){var l=o in t,c=o in r,u=t[o],d=(0,s.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,s.isValidElement)(u)&&(i[o]=(0,s.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:w(a,"exit",e),enter:w(a,"enter",e)})):i[o]=(0,s.cloneElement)(a,{in:!1}):i[o]=(0,s.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:w(a,"exit",e),enter:w(a,"enter",e)})}})),i}var S=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},C=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind((0,v.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,y.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,x(n.children,(function(e){return(0,s.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:w(e,"appear",n),enter:w(e,"enter",n),exit:w(e,"exit",n)})}))):_(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=x(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,o.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,a.Z)(e,["component","childFactory"]),i=this.state.contextValue,o=S(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?s.createElement(b.Z.Provider,{value:i},o):s.createElement(b.Z.Provider,{value:i},s.createElement(t,r,o))},t}(s.Component);C.propTypes={},C.defaultProps={component:"div",childFactory:function(e){return e}};var k=C,M=n(686),T=n(6417);var A=function(e){var t=e.className,n=e.classes,i=e.pulsate,o=void 0!==i&&i,a=e.rippleX,c=e.rippleY,u=e.rippleSize,d=e.in,f=e.onExited,p=e.timeout,h=s.useState(!1),m=(0,r.Z)(h,2),g=m[0],v=m[1],y=(0,l.Z)(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),b={width:u,height:u,top:-u/2+c,left:-u/2+a},x=(0,l.Z)(n.child,g&&n.childLeaving,o&&n.childPulsate);return d||g||v(!0),s.useEffect((function(){if(!d&&null!=f){var e=setTimeout(f,p);return function(){clearTimeout(e)}}}),[f,d,p]),(0,T.jsx)("span",{className:y,style:b,children:(0,T.jsx)("span",{className:x})})},E=n(7430);var P,R,O,I,L,D,N,F,z=(0,E.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),B=["center","classes","className"],j=(0,M.F4)(L||(L=P||(P=(0,g.Z)(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Z=(0,M.F4)(D||(D=R||(R=(0,g.Z)(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),H=(0,M.F4)(N||(N=O||(O=(0,g.Z)(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),U=(0,u.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),V=(0,u.ZP)(A,{name:"MuiTouchRipple",slot:"Ripple"})(F||(F=I||(I=(0,g.Z)(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),z.rippleVisible,j,550,(function(e){return e.theme.transitions.easing.easeInOut}),z.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),z.child,z.childLeaving,Z,550,(function(e){return e.theme.transitions.easing.easeInOut}),z.childPulsate,H,(function(e){return e.theme.transitions.easing.easeInOut})),G=s.forwardRef((function(e,t){var n=(0,d.Z)({props:e,name:"MuiTouchRipple"}),i=n.center,c=void 0!==i&&i,u=n.classes,f=void 0===u?{}:u,p=n.className,h=(0,a.Z)(n,B),g=s.useState([]),v=(0,r.Z)(g,2),y=v[0],b=v[1],x=s.useRef(0),w=s.useRef(null);s.useEffect((function(){w.current&&(w.current(),w.current=null)}),[y]);var _=s.useRef(!1),S=s.useRef(null),C=s.useRef(null),M=s.useRef(null);s.useEffect((function(){return function(){clearTimeout(S.current)}}),[]);var A=s.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;b((function(e){return[].concat((0,m.Z)(e),[(0,T.jsx)(V,{classes:{ripple:(0,l.Z)(f.ripple,z.ripple),rippleVisible:(0,l.Z)(f.rippleVisible,z.rippleVisible),ripplePulsate:(0,l.Z)(f.ripplePulsate,z.ripplePulsate),child:(0,l.Z)(f.child,z.child),childLeaving:(0,l.Z)(f.childLeaving,z.childLeaving),childPulsate:(0,l.Z)(f.childPulsate,z.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},x.current)])})),x.current+=1,w.current=o}),[f]),E=s.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,i=void 0!==r&&r,o=t.center,a=void 0===o?c||t.pulsate:o,s=t.fakeElement,l=void 0!==s&&s;if("mousedown"===(null==e?void 0:e.type)&&_.current)_.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(_.current=!0);var u,d,f,p=l?null:M.current,h=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(a||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)u=Math.round(h.width/2),d=Math.round(h.height/2);else{var m=e.touches&&e.touches.length>0?e.touches[0]:e,g=m.clientX,v=m.clientY;u=Math.round(g-h.left),d=Math.round(v-h.top)}if(a)(f=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(f+=1);else{var y=2*Math.max(Math.abs((p?p.clientWidth:0)-u),u)+2,b=2*Math.max(Math.abs((p?p.clientHeight:0)-d),d)+2;f=Math.sqrt(Math.pow(y,2)+Math.pow(b,2))}null!=e&&e.touches?null===C.current&&(C.current=function(){A({pulsate:i,rippleX:u,rippleY:d,rippleSize:f,cb:n})},S.current=setTimeout((function(){C.current&&(C.current(),C.current=null)}),80)):A({pulsate:i,rippleX:u,rippleY:d,rippleSize:f,cb:n})}}),[c,A]),P=s.useCallback((function(){E({},{pulsate:!0})}),[E]),R=s.useCallback((function(e,t){if(clearTimeout(S.current),"touchend"===(null==e?void 0:e.type)&&C.current)return C.current(),C.current=null,void(S.current=setTimeout((function(){R(e,t)})));C.current=null,b((function(e){return e.length>0?e.slice(1):e})),w.current=t}),[]);return s.useImperativeHandle(t,(function(){return{pulsate:P,start:E,stop:R}}),[P,E,R]),(0,T.jsx)(U,(0,o.Z)({className:(0,l.Z)(z.root,f.root,p),ref:M},h,{children:(0,T.jsx)(k,{component:null,exit:!0,children:y})}))})),W=G,$=n(2298);function q(e){return(0,$.Z)("MuiButtonBase",e)}var Y,X=(0,E.Z)("MuiButtonBase",["root","disabled","focusVisible"]),K=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],J=(0,u.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Y={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,i.Z)(Y,"&.".concat(X.disabled),{pointerEvents:"none",cursor:"default"}),(0,i.Z)(Y,"@media print",{colorAdjust:"exact"}),Y)),Q=s.forwardRef((function(e,t){var n=(0,d.Z)({props:e,name:"MuiButtonBase"}),i=n.action,u=n.centerRipple,m=void 0!==u&&u,g=n.children,v=n.className,y=n.component,b=void 0===y?"button":y,x=n.disabled,w=void 0!==x&&x,_=n.disableRipple,S=void 0!==_&&_,C=n.disableTouchRipple,k=void 0!==C&&C,M=n.focusRipple,A=void 0!==M&&M,E=n.LinkComponent,P=void 0===E?"a":E,R=n.onBlur,O=n.onClick,I=n.onContextMenu,L=n.onDragLeave,D=n.onFocus,N=n.onFocusVisible,F=n.onKeyDown,z=n.onKeyUp,B=n.onMouseDown,j=n.onMouseLeave,Z=n.onMouseUp,H=n.onTouchEnd,U=n.onTouchMove,V=n.onTouchStart,G=n.tabIndex,$=void 0===G?0:G,Y=n.TouchRippleProps,X=n.touchRippleRef,Q=n.type,ee=(0,a.Z)(n,K),te=s.useRef(null),ne=s.useRef(null),re=(0,f.Z)(ne,X),ie=(0,h.Z)(),oe=ie.isFocusVisibleRef,ae=ie.onFocus,se=ie.onBlur,le=ie.ref,ce=s.useState(!1),ue=(0,r.Z)(ce,2),de=ue[0],fe=ue[1];w&&de&&fe(!1),s.useImperativeHandle(i,(function(){return{focusVisible:function(){fe(!0),te.current.focus()}}}),[]);var pe=s.useState(!1),he=(0,r.Z)(pe,2),me=he[0],ge=he[1];s.useEffect((function(){ge(!0)}),[]);var ve=me&&!S&&!w;function ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return(0,p.Z)((function(r){return t&&t(r),!n&&ne.current&&ne.current[e](r),!0}))}s.useEffect((function(){de&&A&&!S&&me&&ne.current.pulsate()}),[S,A,de,me]);var be=ye("start",B),xe=ye("stop",I),we=ye("stop",L),_e=ye("stop",Z),Se=ye("stop",(function(e){de&&e.preventDefault(),j&&j(e)})),Ce=ye("start",V),ke=ye("stop",H),Me=ye("stop",U),Te=ye("stop",(function(e){se(e),!1===oe.current&&fe(!1),R&&R(e)}),!1),Ae=(0,p.Z)((function(e){te.current||(te.current=e.currentTarget),ae(e),!0===oe.current&&(fe(!0),N&&N(e)),D&&D(e)})),Ee=function(){var e=te.current;return b&&"button"!==b&&!("A"===e.tagName&&e.href)},Pe=s.useRef(!1),Re=(0,p.Z)((function(e){A&&!Pe.current&&de&&ne.current&&" "===e.key&&(Pe.current=!0,ne.current.stop(e,(function(){ne.current.start(e)}))),e.target===e.currentTarget&&Ee()&&" "===e.key&&e.preventDefault(),F&&F(e),e.target===e.currentTarget&&Ee()&&"Enter"===e.key&&!w&&(e.preventDefault(),O&&O(e))})),Oe=(0,p.Z)((function(e){A&&" "===e.key&&ne.current&&de&&!e.defaultPrevented&&(Pe.current=!1,ne.current.stop(e,(function(){ne.current.pulsate(e)}))),z&&z(e),O&&e.target===e.currentTarget&&Ee()&&" "===e.key&&!e.defaultPrevented&&O(e)})),Ie=b;"button"===Ie&&(ee.href||ee.to)&&(Ie=P);var Le={};"button"===Ie?(Le.type=void 0===Q?"button":Q,Le.disabled=w):(ee.href||ee.to||(Le.role="button"),w&&(Le["aria-disabled"]=w));var De=(0,f.Z)(t,le,te);var Ne=(0,o.Z)({},n,{centerRipple:m,component:b,disabled:w,disableRipple:S,disableTouchRipple:k,focusRipple:A,tabIndex:$,focusVisible:de}),Fe=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=e.classes,o={root:["root",t&&"disabled",n&&"focusVisible"]},a=(0,c.Z)(o,q,i);return n&&r&&(a.root+=" ".concat(r)),a}(Ne);return(0,T.jsxs)(J,(0,o.Z)({as:Ie,className:(0,l.Z)(Fe.root,v),ownerState:Ne,onBlur:Te,onClick:O,onContextMenu:xe,onFocus:Ae,onKeyDown:Re,onKeyUp:Oe,onMouseDown:be,onMouseLeave:Se,onMouseUp:_e,onDragLeave:we,onTouchEnd:ke,onTouchMove:Me,onTouchStart:Ce,ref:De,tabIndex:w?-1:$,type:Q},Le,ee,{children:[g,ve?(0,T.jsx)(W,(0,o.Z)({ref:re,center:m},Y)):null]}))})),ee=Q},8104:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(4942),i=n(3366),o=n(7462),a=n(7313),s=n(3061),l=n(9023),c=n(1921),u=n(7551),d=n(7592),f=n(7342),p=n(7999),h=n(1615),m=n(2257);var g=a.createContext({}),v=n(6417),y=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],b=function(e){return(0,o.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},x=(0,d.ZP)(p.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,h.Z)(n.color))],t["size".concat((0,h.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,h.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,i,a=e.theme,s=e.ownerState;return(0,o.Z)({},a.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":(0,o.Z)({textDecoration:"none",backgroundColor:a.vars?"rgba(".concat(a.vars.palette.text.primaryChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,u.Fq)(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===s.variant&&"inherit"!==s.color&&{backgroundColor:a.vars?"rgba(".concat(a.vars.palette[s.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,u.Fq)(a.palette[s.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===s.variant&&"inherit"!==s.color&&{border:"1px solid ".concat((a.vars||a).palette[s.color].main),backgroundColor:a.vars?"rgba(".concat(a.vars.palette[s.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,u.Fq)(a.palette[s.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===s.variant&&{backgroundColor:(a.vars||a).palette.grey.A100,boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2],backgroundColor:(a.vars||a).palette.grey[300]}},"contained"===s.variant&&"inherit"!==s.color&&{backgroundColor:(a.vars||a).palette[s.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[s.color].main}}),"&:active":(0,o.Z)({},"contained"===s.variant&&{boxShadow:(a.vars||a).shadows[8]})},(0,r.Z)(t,"&.".concat(m.Z.focusVisible),(0,o.Z)({},"contained"===s.variant&&{boxShadow:(a.vars||a).shadows[6]})),(0,r.Z)(t,"&.".concat(m.Z.disabled),(0,o.Z)({color:(a.vars||a).palette.action.disabled},"outlined"===s.variant&&{border:"1px solid ".concat((a.vars||a).palette.action.disabledBackground)},"outlined"===s.variant&&"secondary"===s.color&&{border:"1px solid ".concat((a.vars||a).palette.action.disabled)},"contained"===s.variant&&{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground})),t),"text"===s.variant&&{padding:"6px 8px"},"text"===s.variant&&"inherit"!==s.color&&{color:(a.vars||a).palette[s.color].main},"outlined"===s.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===s.variant&&"inherit"!==s.color&&{color:(a.vars||a).palette[s.color].main,border:a.vars?"1px solid rgba(".concat(a.vars.palette[s.color].mainChannel," / 0.5)"):"1px solid ".concat((0,u.Fq)(a.palette[s.color].main,.5))},"contained"===s.variant&&{color:a.vars?a.vars.palette.text.primary:null==(n=(i=a.palette).getContrastText)?void 0:n.call(i,a.palette.grey[300]),backgroundColor:(a.vars||a).palette.grey[300],boxShadow:(a.vars||a).shadows[2]},"contained"===s.variant&&"inherit"!==s.color&&{color:(a.vars||a).palette[s.color].contrastText,backgroundColor:(a.vars||a).palette[s.color].main},"inherit"===s.color&&{color:"inherit",borderColor:"currentColor"},"small"===s.size&&"text"===s.variant&&{padding:"4px 5px",fontSize:a.typography.pxToRem(13)},"large"===s.size&&"text"===s.variant&&{padding:"8px 11px",fontSize:a.typography.pxToRem(15)},"small"===s.size&&"outlined"===s.variant&&{padding:"3px 9px",fontSize:a.typography.pxToRem(13)},"large"===s.size&&"outlined"===s.variant&&{padding:"7px 21px",fontSize:a.typography.pxToRem(15)},"small"===s.size&&"contained"===s.variant&&{padding:"4px 10px",fontSize:a.typography.pxToRem(13)},"large"===s.size&&"contained"===s.variant&&{padding:"8px 22px",fontSize:a.typography.pxToRem(15)},s.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,r.Z)(t,"&.".concat(m.Z.focusVisible),{boxShadow:"none"}),(0,r.Z)(t,"&:active",{boxShadow:"none"}),(0,r.Z)(t,"&.".concat(m.Z.disabled),{boxShadow:"none"}),t)})),w=(0,d.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,h.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,o.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},b(t))})),_=(0,d.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,h.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,o.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},b(t))})),S=a.forwardRef((function(e,t){var n=a.useContext(g),r=(0,l.Z)(n,e),u=(0,f.Z)({props:r,name:"MuiButton"}),d=u.children,p=u.color,b=void 0===p?"primary":p,S=u.component,C=void 0===S?"button":S,k=u.className,M=u.disabled,T=void 0!==M&&M,A=u.disableElevation,E=void 0!==A&&A,P=u.disableFocusRipple,R=void 0!==P&&P,O=u.endIcon,I=u.focusVisibleClassName,L=u.fullWidth,D=void 0!==L&&L,N=u.size,F=void 0===N?"medium":N,z=u.startIcon,B=u.type,j=u.variant,Z=void 0===j?"text":j,H=(0,i.Z)(u,y),U=(0,o.Z)({},u,{color:b,component:C,disabled:T,disableElevation:E,disableFocusRipple:R,fullWidth:D,size:F,type:B,variant:Z}),V=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,a=e.variant,s=e.classes,l={root:["root",a,"".concat(a).concat((0,h.Z)(t)),"size".concat((0,h.Z)(i)),"".concat(a,"Size").concat((0,h.Z)(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,h.Z)(i))],endIcon:["endIcon","iconSize".concat((0,h.Z)(i))]},u=(0,c.Z)(l,m.F,s);return(0,o.Z)({},s,u)}(U),G=z&&(0,v.jsx)(w,{className:V.startIcon,ownerState:U,children:z}),W=O&&(0,v.jsx)(_,{className:V.endIcon,ownerState:U,children:O});return(0,v.jsxs)(x,(0,o.Z)({ownerState:U,className:(0,s.Z)(n.className,V.root,k),component:C,disabled:T,focusRipple:!R,focusVisibleClassName:(0,s.Z)(V.focusVisible,I),ref:t,type:B},H,{classes:V,children:[G,d,W]}))}))},2257:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n(7430),i=n(2298);function o(e){return(0,i.Z)("MuiButton",e)}var a=(0,r.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);t.Z=a},3213:function(e,t,n){"use strict";var r=n(4942),i=n(3366),o=n(7462),a=n(7313),s=n(3061),l=n(1921),c=n(7605),u=n(1195),d=n(7342),f=n(7592),p=n(1081),h=n(6417),m=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],g=(0,f.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,r.Z)({},"& .".concat(p.Z.primary),t.primary),(0,r.Z)({},"& .".concat(p.Z.secondary),t.secondary),t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((function(e){var t=e.ownerState;return(0,o.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),v=a.forwardRef((function(e,t){var n=(0,d.Z)({props:e,name:"MuiListItemText"}),r=n.children,f=n.className,v=n.disableTypography,y=void 0!==v&&v,b=n.inset,x=void 0!==b&&b,w=n.primary,_=n.primaryTypographyProps,S=n.secondary,C=n.secondaryTypographyProps,k=(0,i.Z)(n,m),M=a.useContext(u.Z).dense,T=null!=w?w:r,A=S,E=(0,o.Z)({},n,{disableTypography:y,inset:x,primary:!!T,secondary:!!A,dense:M}),P=function(e){var t=e.classes,n=e.inset,r=e.primary,i=e.secondary,o={root:["root",n&&"inset",e.dense&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,l.Z)(o,p.L,t)}(E);return null==T||T.type===c.Z||y||(T=(0,h.jsx)(c.Z,(0,o.Z)({variant:M?"body2":"body1",className:P.primary,component:null!=_&&_.variant?void 0:"span",display:"block"},_,{children:T}))),null==A||A.type===c.Z||y||(A=(0,h.jsx)(c.Z,(0,o.Z)({variant:"body2",className:P.secondary,color:"text.secondary",display:"block"},C,{children:A}))),(0,h.jsxs)(g,(0,o.Z)({className:(0,s.Z)(P.root,f),ownerState:E,ref:t},k,{children:[T,A]}))}));t.Z=v},1081:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var r=n(7430),i=n(2298);function o(e){return(0,i.Z)("MuiListItemText",e)}var a=(0,r.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.Z=a},1195:function(e,t,n){"use strict";var r=n(7313).createContext({});t.Z=r},941:function(e,t,n){"use strict";var r=n(4942),i=n(3366),o=n(7462),a=n(7313),s=n(3061),l=n(1921),c=n(7551),u=n(1615),d=n(7416),f=n(6062),p=n(7342),h=n(7592),m=n(9438),g=n(6417),v=["align","className","component","padding","scope","size","sortDirection","variant"],y=(0,h.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["size".concat((0,u.Z)(n.size))],"normal"!==n.padding&&t["padding".concat((0,u.Z)(n.padding))],"inherit"!==n.align&&t["align".concat((0,u.Z)(n.align))],n.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,n=e.ownerState;return(0,o.Z)({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?(0,c.$n)((0,c.Fq)(t.palette.divider,1),.88):(0,c._j)((0,c.Fq)(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===n.variant&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===n.variant&&{color:(t.vars||t).palette.text.primary},"footer"===n.variant&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===n.size&&(0,r.Z)({padding:"6px 16px"},"&.".concat(m.Z.paddingCheckbox),{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}),"checkbox"===n.padding&&{width:48,padding:"0 0 0 4px"},"none"===n.padding&&{padding:0},"left"===n.align&&{textAlign:"left"},"center"===n.align&&{textAlign:"center"},"right"===n.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===n.align&&{textAlign:"justify"},n.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})})),b=a.forwardRef((function(e,t){var n,r=(0,p.Z)({props:e,name:"MuiTableCell"}),c=r.align,h=void 0===c?"inherit":c,b=r.className,x=r.component,w=r.padding,_=r.scope,S=r.size,C=r.sortDirection,k=r.variant,M=(0,i.Z)(r,v),T=a.useContext(d.Z),A=a.useContext(f.Z),E=A&&"head"===A.variant,P=_;"td"===(n=x||(E?"th":"td"))?P=void 0:!P&&E&&(P="col");var R=k||A&&A.variant,O=(0,o.Z)({},r,{align:h,component:n,padding:w||(T&&T.padding?T.padding:"normal"),size:S||(T&&T.size?T.size:"medium"),sortDirection:C,stickyHeader:"head"===R&&T&&T.stickyHeader,variant:R}),I=function(e){var t=e.classes,n=e.variant,r=e.align,i=e.padding,o=e.size,a={root:["root",n,e.stickyHeader&&"stickyHeader","inherit"!==r&&"align".concat((0,u.Z)(r)),"normal"!==i&&"padding".concat((0,u.Z)(i)),"size".concat((0,u.Z)(o))]};return(0,l.Z)(a,m.U,t)}(O),L=null;return C&&(L="asc"===C?"ascending":"descending"),(0,g.jsx)(y,(0,o.Z)({as:n,ref:t,className:(0,s.Z)(I.root,b),"aria-sort":L,scope:P,ownerState:O},M))}));t.Z=b},9438:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(7430),i=n(2298);function o(e){return(0,i.Z)("MuiTableCell",e)}var a=(0,r.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]);t.Z=a},6759:function(e,t,n){"use strict";var r=n(3366),i=n(7462),o=n(7313),a=n(3061),s=n(1921),l=n(7416),c=n(7342),u=n(7592),d=n(3529),f=n(6417),p=["className","component","padding","size","stickyHeader"],h=(0,u.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,n=e.ownerState;return(0,i.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,i.Z)({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},n.stickyHeader&&{borderCollapse:"separate"})})),m="table",g=o.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiTable"}),u=n.className,g=n.component,v=void 0===g?m:g,y=n.padding,b=void 0===y?"normal":y,x=n.size,w=void 0===x?"medium":x,_=n.stickyHeader,S=void 0!==_&&_,C=(0,r.Z)(n,p),k=(0,i.Z)({},n,{component:v,padding:b,size:w,stickyHeader:S}),M=function(e){var t=e.classes,n={root:["root",e.stickyHeader&&"stickyHeader"]};return(0,s.Z)(n,d.K,t)}(k),T=o.useMemo((function(){return{padding:b,size:w,stickyHeader:S}}),[b,w,S]);return(0,f.jsx)(l.Z.Provider,{value:T,children:(0,f.jsx)(h,(0,i.Z)({as:v,role:v===m?null:"table",ref:t,className:(0,a.Z)(M.root,u),ownerState:k},C))})}));t.Z=g},7416:function(e,t,n){"use strict";var r=n(7313).createContext();t.Z=r},6062:function(e,t,n){"use strict";var r=n(7313).createContext();t.Z=r},3529:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(7430),i=n(2298);function o(e){return(0,i.Z)("MuiTable",e)}var a=(0,r.Z)("MuiTable",["root","stickyHeader"]);t.Z=a},7605:function(e,t,n){"use strict";var r=n(3366),i=n(7462),o=n(7313),a=n(3061),s=n(9028),l=n(1921),c=n(7592),u=n(7342),d=n(1615),f=n(4898),p=n(6417),h=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],m=(0,c.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,d.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return(0,i.Z)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),g={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},v={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},y=o.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiTypography"}),o=function(e){return v[e]||e}(n.color),c=(0,s.Z)((0,i.Z)({},n,{color:o})),y=c.align,b=void 0===y?"inherit":y,x=c.className,w=c.component,_=c.gutterBottom,S=void 0!==_&&_,C=c.noWrap,k=void 0!==C&&C,M=c.paragraph,T=void 0!==M&&M,A=c.variant,E=void 0===A?"body1":A,P=c.variantMapping,R=void 0===P?g:P,O=(0,r.Z)(c,h),I=(0,i.Z)({},c,{align:b,color:o,className:x,component:w,gutterBottom:S,noWrap:k,paragraph:T,variant:E,variantMapping:R}),L=w||(T?"p":R[E]||g[E])||"span",D=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,i=e.paragraph,o=e.variant,a=e.classes,s={root:["root",o,"inherit"!==e.align&&"align".concat((0,d.Z)(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,l.Z)(s,f.f,a)}(I);return(0,p.jsx)(m,(0,i.Z)({as:L,ref:t,ownerState:I,className:(0,a.Z)(D.root,x)},O))}));t.Z=y},4898:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(7430),i=n(2298);function o(e){return(0,i.Z)("MuiTypography",e)}var a=(0,r.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);t.Z=a},5436:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case f:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case h:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},478:function(e,t,n){"use strict";n(5436)},8658:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(7462),i=n(3366),o=n(7219),a=n(3019),s=n(5318),l=n(3232),c=n(3649),u=n(4942);function d(e,t){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,u.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,u.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}var f=n(7551),p={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},m={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},g={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},y={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},b={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},x={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},w=["mode","contrastThreshold","tonalOffset"],_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:p.white,default:p.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},S={text:{primary:p.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:p.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function C(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,f.$n)(e.main,i):"dark"===t&&(e.dark=(0,f._j)(e.main,o)))}function k(e){var t=e.mode,n=void 0===t?"light":t,s=e.contrastThreshold,l=void 0===s?3:s,c=e.tonalOffset,u=void 0===c?.2:c,d=(0,i.Z)(e,w),k=e.primary||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:y[200],light:y[50],dark:y[400]}:{main:y[700],light:y[400],dark:y[800]}}(n),M=e.secondary||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:m[200],light:m[50],dark:m[400]}:{main:m[500],light:m[300],dark:m[700]}}(n),T=e.error||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:g[500],light:g[300],dark:g[700]}:{main:g[700],light:g[400],dark:g[800]}}(n),A=e.info||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:b[400],light:b[300],dark:b[700]}:{main:b[700],light:b[500],dark:b[900]}}(n),E=e.success||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:x[400],light:x[300],dark:x[700]}:{main:x[800],light:x[500],dark:x[900]}}(n),P=e.warning||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:v[400],light:v[300],dark:v[700]}:{main:"#ed6c02",light:v[500],dark:v[900]}}(n);function R(e){return(0,f.mi)(e,S.text.primary)>=l?S.text.primary:_.text.primary}var O=function(e){var t=e.color,n=e.name,i=e.mainShade,a=void 0===i?500:i,s=e.lightShade,l=void 0===s?300:s,c=e.darkShade,d=void 0===c?700:c;if(!(t=(0,r.Z)({},t)).main&&t[a]&&(t.main=t[a]),!t.hasOwnProperty("main"))throw new Error((0,o.Z)(11,n?" (".concat(n,")"):"",a));if("string"!==typeof t.main)throw new Error((0,o.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return C(t,"light",l,u),C(t,"dark",d,u),t.contrastText||(t.contrastText=R(t.main)),t},I={dark:S,light:_};return(0,a.Z)((0,r.Z)({common:(0,r.Z)({},p),mode:n,primary:O({color:k,name:"primary"}),secondary:O({color:M,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:O({color:T,name:"error"}),warning:O({color:P,name:"warning"}),info:O({color:A,name:"info"}),success:O({color:E,name:"success"}),grey:h,contrastThreshold:l,getContrastText:R,augmentColor:O,tonalOffset:u},I[n]),d)}var M=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var T={textTransform:"uppercase"},A='"Roboto", "Helvetica", "Arial", sans-serif';function E(e,t){var n="function"===typeof t?t(e):t,o=n.fontFamily,s=void 0===o?A:o,l=n.fontSize,c=void 0===l?14:l,u=n.fontWeightLight,d=void 0===u?300:u,f=n.fontWeightRegular,p=void 0===f?400:f,h=n.fontWeightMedium,m=void 0===h?500:h,g=n.fontWeightBold,v=void 0===g?700:g,y=n.htmlFontSize,b=void 0===y?16:y,x=n.allVariants,w=n.pxToRem,_=(0,i.Z)(n,M);var S=c/14,C=w||function(e){return"".concat(e/b*S,"rem")},k=function(e,t,n,i,o){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:C(t),lineHeight:n},s===A?{letterSpacing:"".concat((a=i/t,Math.round(1e5*a)/1e5),"em")}:{},o,x);var a},E={h1:k(d,96,1.167,-1.5),h2:k(d,60,1.2,-.5),h3:k(p,48,1.167,0),h4:k(p,34,1.235,.25),h5:k(p,24,1.334,0),h6:k(m,20,1.6,.15),subtitle1:k(p,16,1.75,.15),subtitle2:k(m,14,1.57,.1),body1:k(p,16,1.5,.15),body2:k(p,14,1.43,.15),button:k(m,14,1.75,.4,T),caption:k(p,12,1.66,.4),overline:k(p,12,2.66,1,T)};return(0,a.Z)((0,r.Z)({htmlFontSize:b,pxToRem:C,fontFamily:s,fontSize:c,fontWeightLight:d,fontWeightRegular:p,fontWeightMedium:m,fontWeightBold:v},E),_,{clone:!1})}function P(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var R=["none",P(0,2,1,-1,0,1,1,0,0,1,3,0),P(0,3,1,-2,0,2,2,0,0,1,5,0),P(0,3,3,-2,0,3,4,0,0,1,8,0),P(0,2,4,-1,0,4,5,0,0,1,10,0),P(0,3,5,-1,0,5,8,0,0,1,14,0),P(0,3,5,-1,0,6,10,0,0,1,18,0),P(0,4,5,-2,0,7,10,1,0,2,16,1),P(0,5,5,-3,0,8,10,1,0,3,14,2),P(0,5,6,-3,0,9,12,1,0,3,16,2),P(0,6,6,-3,0,10,14,1,0,4,18,3),P(0,6,7,-4,0,11,15,1,0,4,20,3),P(0,7,8,-4,0,12,17,2,0,5,22,4),P(0,7,8,-4,0,13,19,2,0,5,24,4),P(0,7,9,-4,0,14,21,2,0,5,26,4),P(0,8,9,-5,0,15,22,2,0,6,28,5),P(0,8,10,-5,0,16,24,2,0,6,30,5),P(0,8,11,-5,0,17,26,2,0,6,32,5),P(0,9,11,-5,0,18,28,2,0,7,34,6),P(0,9,12,-6,0,19,29,2,0,7,36,6),P(0,10,13,-6,0,20,31,3,0,8,38,7),P(0,10,13,-6,0,21,33,3,0,8,40,7),P(0,10,14,-6,0,22,35,3,0,8,42,7),P(0,11,14,-7,0,23,36,3,0,9,44,8),P(0,11,15,-7,0,24,38,3,0,9,46,8)],O=["duration","easing","delay"],I={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},L={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function D(e){return"".concat(Math.round(e),"ms")}function N(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function F(e){var t=(0,r.Z)({},I,e.easing),n=(0,r.Z)({},L,e.duration);return(0,r.Z)({getAutoHeightDuration:N,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.duration,a=void 0===o?n.standard:o,s=r.easing,l=void 0===s?t.easeInOut:s,c=r.delay,u=void 0===c?0:c;(0,i.Z)(r,O);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:D(a)," ").concat(l," ").concat("string"===typeof u?u:D(u))})).join(",")}},e,{easing:t,duration:n})}var z={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},B=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,u=e.palette,f=void 0===u?{}:u,p=e.transitions,h=void 0===p?{}:p,m=e.typography,g=void 0===m?{}:m,v=(0,i.Z)(e,B);if(e.vars)throw new Error((0,o.Z)(18));var y=k(f),b=(0,s.Z)(e),x=(0,a.Z)(b,{mixins:d(b.breakpoints,n),palette:y,shadows:R.slice(),typography:E(y,g),transitions:F(h),zIndex:(0,r.Z)({},z)});x=(0,a.Z)(x,v);for(var w=arguments.length,_=new Array(w>1?w-1:0),S=1;S<w;S++)_[S-1]=arguments[S];return(x=_.reduce((function(e,t){return(0,a.Z)(e,t)}),x)).unstable_sxConfig=(0,r.Z)({},l.Z,null==v?void 0:v.unstable_sxConfig),x.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},x}var Z=j},2248:function(e,t,n){"use strict";var r=(0,n(8658).Z)();t.Z=r},7592:function(e,t,n){"use strict";n.d(t,{Dz:function(){return a},FO:function(){return o}});var r=n(6541),i=n(2248),o=function(e){return(0,r.x9)(e)&&"classes"!==e},a=r.x9,s=(0,r.ZP)({defaultTheme:i.Z,rootShouldForwardProp:o});t.ZP=s},7342:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(118),i=n(2248);function o(e){var t=e.props,n=e.name;return(0,r.Z)({props:t,name:n,defaultTheme:i.Z})}},1615:function(e,t,n){"use strict";var r=n(114);t.Z=r.Z},1171:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(7462),i=n(7313),o=n(3366),a=n(3061),s=n(1921),l=n(1615),c=n(7342),u=n(7592),d=n(7430),f=n(2298);function p(e){return(0,f.Z)("MuiSvgIcon",e)}(0,d.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var h=n(6417),m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,l.Z)(n.color))],t["fontSize".concat((0,l.Z)(n.fontSize))]]}})((function(e){var t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=y.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(s=y.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(c=y.typography)||null==(u=c.pxToRem)?void 0:u.call(c,35))||"2.1875rem"}[b.fontSize],color:null!=(d=null==(f=(y.vars||y).palette)||null==(p=f[b.color])?void 0:p.main)?d:{action:null==(h=(y.vars||y).palette)||null==(m=h.action)?void 0:m.active,disabled:null==(g=(y.vars||y).palette)||null==(v=g.action)?void 0:v.disabled,inherit:void 0}[b.color]}})),v=i.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiSvgIcon"}),i=n.children,u=n.className,d=n.color,f=void 0===d?"inherit":d,v=n.component,y=void 0===v?"svg":v,b=n.fontSize,x=void 0===b?"medium":b,w=n.htmlColor,_=n.inheritViewBox,S=void 0!==_&&_,C=n.titleAccess,k=n.viewBox,M=void 0===k?"0 0 24 24":k,T=(0,o.Z)(n,m),A=(0,r.Z)({},n,{color:f,component:y,fontSize:x,instanceFontSize:e.fontSize,inheritViewBox:S,viewBox:M}),E={};S||(E.viewBox=M);var P=function(e){var t=e.color,n=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,l.Z)(t)),"fontSize".concat((0,l.Z)(n))]};return(0,s.Z)(i,p,r)}(A);return(0,h.jsxs)(g,(0,r.Z)({as:y,className:(0,a.Z)(P.root,u),focusable:"false",color:w,"aria-hidden":!C||void 0,role:C?"img":void 0,ref:t},E,T,{ownerState:A,children:[i,C?(0,h.jsx)("title",{children:C}):null]}))}));v.muiName="SvgIcon";var y=v;function b(e,t){function n(n,i){return(0,h.jsx)(y,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))}return n.muiName=y.muiName,i.memo(i.forwardRef(n))}},8706:function(e,t,n){"use strict";var r=n(4312);t.Z=r.Z},6415:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return a.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return l},isMuiElement:function(){return c.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return f},setRef:function(){return p},unstable_ClassNameGenerator:function(){return w},unstable_useEnhancedEffect:function(){return h.Z},unstable_useId:function(){return m.Z},unsupportedProp:function(){return g},useControlled:function(){return v.Z},useEventCallback:function(){return y.Z},useForkRef:function(){return b.Z},useIsFocusVisible:function(){return x.Z}});var r=n(1271),i=n(1615),o=n(4246).Z,a=n(1171),s=n(8706);var l=function(e,t){return function(){return null}},c=n(7816),u=n(6106),d=n(3533);n(7462);var f=function(e,t){return function(){return null}},p=n(9265).Z,h=n(4993),m=n(7677);var g=function(e,t,n,r,i){return null},v=n(3800),y=n(3236),b=n(6983),x=n(9127),w={configure:function(e){r.Z.configure(e)}}},7816:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7313);var i=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},6106:function(e,t,n){"use strict";var r=n(9081);t.Z=r.Z},3533:function(e,t,n){"use strict";var r=n(3282);t.Z=r.Z},3800:function(e,t,n){"use strict";var r=n(782);t.Z=r.Z},4993:function(e,t,n){"use strict";var r=n(2678);t.Z=r.Z},3236:function(e,t,n){"use strict";var r=n(2780);t.Z=r.Z},6983:function(e,t,n){"use strict";var r=n(7472);t.Z=r.Z},7677:function(e,t,n){"use strict";var r=n(3362);t.Z=r.Z},9127:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r,i=n(7313),o=!0,a=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function u(){"hidden"===this.visibilityState&&a&&(o=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var f=function(){var e=i.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",u,!0))}),[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!d(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(a=!0,window.clearTimeout(r),r=window.setTimeout((function(){a=!1}),100),t.current=!1,!0)},ref:e}}},5693:function(e,t,n){"use strict";var r=n(7313).createContext(null);t.Z=r},201:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7313),i=n(5693);function o(){return r.useContext(i.Z)}},8339:function(e,t,n){"use strict";n.d(t,{ZP:function(){return y},Co:function(){return b}});var r=n(7313),i=n(7462),o=n(1097),a=n(6132),s=n(4911),l=n(1529),c=n(5696),u=o.Z,d=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?u:d},p=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},h=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,s.hC)(t,n,r);(0,c.L)((function(){return(0,s.My)(t,n,r)}));return null},m=function e(t,n){var o,c,u=t.__emotion_real===t,d=u&&t.__emotion_base||t;void 0!==n&&(o=n.label,c=n.target);var m=p(t,n,u),g=m||f(d),v=!g("as");return function(){var y=arguments,b=u&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&b.push("label:"+o+";"),null==y[0]||void 0===y[0].raw)b.push.apply(b,y);else{0,b.push(y[0][0]);for(var x=y.length,w=1;w<x;w++)b.push(y[w],y[0][w])}var _=(0,a.w)((function(e,t,n){var i=v&&e.as||d,o="",u=[],p=e;if(null==e.theme){for(var y in p={},e)p[y]=e[y];p.theme=(0,r.useContext)(a.T)}"string"===typeof e.className?o=(0,s.fp)(t.registered,u,e.className):null!=e.className&&(o=e.className+" ");var x=(0,l.O)(b.concat(u),t.registered,p);o+=t.key+"-"+x.name,void 0!==c&&(o+=" "+c);var w=v&&void 0===m?f(i):g,_={};for(var S in e)v&&"as"===S||w(S)&&(_[S]=e[S]);return _.className=o,_.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(h,{cache:t,serialized:x,isStringTag:"string"===typeof i}),(0,r.createElement)(i,_))}));return _.displayName=void 0!==o?o:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",_.defaultProps=t.defaultProps,_.__emotion_real=_,_.__emotion_base=d,_.__emotion_styles=b,_.__emotion_forwardProp=m,Object.defineProperty(_,"toString",{value:function(){return"."+c}}),_.withComponent=function(t,r){return e(t,(0,i.Z)({},n,r,{shouldForwardProp:p(_,r,!0)})).apply(void 0,b)},_}},g=m.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));var v=g;function y(e,t){return v(e,t)}var b=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},4929:function(e,t,n){"use strict";n.d(t,{L7:function(){return s},P$:function(){return l},VO:function(){return r},W8:function(){return a},k9:function(){return o}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,n){var o=e.theme||{};if(Array.isArray(t)){var a=o.breakpoints||i;return t.reduce((function(e,r,i){return e[a.up(a.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var s=o.breakpoints||i;return Object.keys(t).reduce((function(e,i){if(-1!==Object.keys(s.values||r).indexOf(i)){e[s.up(i)]=n(t[i],i)}else{var o=i;e[o]=t[o]}return e}),{})}return n(t)}function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function l(e){var t,n=e.values,r=e.breakpoints,i=e.base||function(e,t){if("object"!==typeof e)return{};var n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((function(t,r){r<e.length&&(n[t]=!0)})):r.forEach((function(t){null!=e[t]&&(n[t]=!0)})),n}(n,r),o=Object.keys(i);return 0===o.length?n:o.reduce((function(e,r,i){return Array.isArray(n)?(e[r]=null!=n[i]?n[i]:n[t],t=i):"object"===typeof n?(e[r]=null!=n[r]?n[r]:n[t],t=r):e[r]=n,e}),{})}},7551:function(e,t,n){"use strict";n.d(t,{$n:function(){return d},Fq:function(){return c},_j:function(){return u},mi:function(){return l}});var r=n(7219);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var i,a=e.substring(t+1,e.length-1);if("color"===n){if(i=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else a=a.split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)})),colorSpace:i}}function a(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=o(e)).type||"hsla"===e.type?o(function(e){var t=(e=o(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",u=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),a({type:c,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function l(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(e,t){return e=o(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,a(e)}function u(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return a(e)}function d(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return a(e)}},6541:function(e,t,n){"use strict";n.d(t,{ZP:function(){return C},x9:function(){return _}});var r=n(3433),i=n(9439),o=n(3366),a=n(7462),s=n(8339),l=n(5318),c=n(114),u=["variant"];function d(e){return 0===e.length}function f(e){var t=e.variant,n=(0,o.Z)(e,u),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?d(r)?e[t]:(0,c.Z)(e[t]):"".concat(d(r)?t:(0,c.Z)(t)).concat((0,c.Z)(e[t].toString()))})),r}var p=n(3649),h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],m=["theme"],g=["theme"];function v(e){return 0===Object.keys(e).length}function y(e){return"string"===typeof e&&e.charCodeAt(0)>96}var b=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},x=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=f(e.props);r[t]=e.style})),r},w=function(e,t,n,r){var i,o,a=e.ownerState,s=void 0===a?{}:a,l=[],c=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&l.push(t[f(n.props)])})),l};function _(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var S=(0,l.Z)();function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?S:t,l=e.rootShouldForwardProp,c=void 0===l?_:l,u=e.slotShouldForwardProp,d=void 0===u?_:u,f=function(e){var t=v(e.theme)?n:e.theme;return(0,p.Z)((0,a.Z)({},e,{theme:t}))};return f.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var l,u=t.name,p=t.slot,S=t.skipVariantsResolver,C=t.skipSx,k=t.overridesResolver,M=(0,o.Z)(t,h),T=void 0!==S?S:p&&"Root"!==p||!1,A=C||!1;var E=_;"Root"===p?E=c:p?E=d:y(e)&&(E=void 0);var P=(0,s.ZP)(e,(0,a.Z)({shouldForwardProp:E,label:l},M)),R=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),l=1;l<t;l++)s[l-1]=arguments[l];var c=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=(0,o.Z)(t,m);return e((0,a.Z)({theme:v(r)?n:r},i))}:e})):[],d=e;u&&k&&c.push((function(e){var t=v(e.theme)?n:e.theme,r=b(u,t);if(r){var o={};return Object.entries(r).forEach((function(n){var r=(0,i.Z)(n,2),s=r[0],l=r[1];o[s]="function"===typeof l?l((0,a.Z)({},e,{theme:t})):l})),k(e,o)}return null})),u&&!T&&c.push((function(e){var t=v(e.theme)?n:e.theme;return w(e,x(u,t),t,u)})),A||c.push(f);var p=c.length-s.length;if(Array.isArray(e)&&p>0){var h=new Array(p).fill("");(d=[].concat((0,r.Z)(e),(0,r.Z)(h))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(h))}else"function"===typeof e&&e.__emotion_real!==e&&(d=function(t){var r=t.theme,i=(0,o.Z)(t,g);return e((0,a.Z)({theme:v(r)?n:r},i))});var y=P.apply(void 0,[d].concat((0,r.Z)(c)));return y};return P.withConfig&&(R.withConfig=P.withConfig),R}}},5318:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(7462),i=n(3366),o=n(3019),a=n(4942),s=["values","unit","step"];function l(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,o=e.unit,l=void 0===o?"px":o,c=e.step,u=void 0===c?5:c,d=(0,i.Z)(e,s),f=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,a.Z)({},t.key,t.val))}),{})}(n),p=Object.keys(f);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(l,")")}function m(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-u/100).concat(l,")")}function g(e,t){var r=p.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(l,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[p[r]]?n[p[r]]:t)-u/100).concat(l,")")}return(0,r.Z)({keys:p,values:f,up:h,down:m,between:g,only:function(e){return p.indexOf(e)+1<p.length?g(e,p[p.indexOf(e)+1]):h(e)},not:function(e){var t=p.indexOf(e);return 0===t?h(p[1]):t===p.length-1?m(p[t]):g(e,p[p.indexOf(e)+1]).replace("@media","@media not all and")},unit:l},d)}var c={borderRadius:4},u=n(6886);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,u.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var f=n(3649),p=n(3232),h=["breakpoints","palette","spacing","shape"];var m=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,a=e.palette,s=void 0===a?{}:a,u=e.spacing,m=e.shape,g=void 0===m?{}:m,v=(0,i.Z)(e,h),y=l(n),b=d(u),x=(0,o.Z)({breakpoints:y,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:b,shape:(0,r.Z)({},c,g)},v),w=arguments.length,_=new Array(w>1?w-1:0),S=1;S<w;S++)_[S-1]=arguments[S];return(x=_.reduce((function(e,t){return(0,o.Z)(e,t)}),x)).unstable_sxConfig=(0,r.Z)({},p.Z,null==v?void 0:v.unstable_sxConfig),x.unstable_sx=function(e){return(0,f.Z)({sx:e,theme:this})},x}},7330:function(e,t,n){"use strict";var r=n(3019);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},6886:function(e,t,n){"use strict";n.d(t,{hB:function(){return m},eI:function(){return h},NA:function(){return g},e6:function(){return b},o3:function(){return x}});var r=n(9439),i=n(4929),o=n(6428),a=n(7330);var s={m:"margin",p:"padding"},l={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!c[e])return[e];e=c[e]}var t=e.split(""),n=(0,r.Z)(t,2),i=n[0],o=n[1],a=s[i],u=l[o]||"";return Array.isArray(u)?u.map((function(e){return a+e})):[a+u]})),d=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],f=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[].concat(d,f);function h(e,t,n,r){var i,a=null!=(i=(0,o.DW)(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function m(e){return h(e,"spacing",8)}function g(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function v(e,t,n,r){if(-1===t.indexOf(n))return null;var o=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=g(t,n),e}),{})}}(u(n),r),a=e[n];return(0,i.k9)(e,a,o)}function y(e,t){var n=m(e.theme);return Object.keys(e).map((function(r){return v(e,t,r,n)})).reduce(a.Z,{})}function b(e){return y(e,d)}function x(e){return y(e,f)}function w(e){return y(e,p)}b.propTypes={},b.filterProps=d,x.propTypes={},x.filterProps=f,w.propTypes={},w.filterProps=p},6428:function(e,t,n){"use strict";n.d(t,{DW:function(){return a},Jq:function(){return s}});var r=n(4942),i=n(114),o=n(4929);function a(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function s(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:a(e,n)||i,t&&(r=t(r,i,e)),r}t.ZP=function(e){var t=e.prop,n=e.cssProperty,l=void 0===n?e.prop:n,c=e.themeKey,u=e.transform,d=function(e){if(null==e[t])return null;var n=e[t],d=a(e.theme,c)||{};return(0,o.k9)(e,n,(function(e){var n=s(d,u,e);return e===n&&"string"===typeof e&&(n=s(d,u,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===l?n:(0,r.Z)({},l,n)}))};return d.propTypes={},d.filterProps=[t],d}},3232:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var r=n(6886),i=n(6428),o=n(7330);var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,o.Z)(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i},s=n(4929);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var c=(0,i.ZP)({prop:"border",themeKey:"borders",transform:l}),u=(0,i.ZP)({prop:"borderTop",themeKey:"borders",transform:l}),d=(0,i.ZP)({prop:"borderRight",themeKey:"borders",transform:l}),f=(0,i.ZP)({prop:"borderBottom",themeKey:"borders",transform:l}),p=(0,i.ZP)({prop:"borderLeft",themeKey:"borders",transform:l}),h=(0,i.ZP)({prop:"borderColor",themeKey:"palette"}),m=(0,i.ZP)({prop:"borderTopColor",themeKey:"palette"}),g=(0,i.ZP)({prop:"borderRightColor",themeKey:"palette"}),v=(0,i.ZP)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,i.ZP)({prop:"borderLeftColor",themeKey:"palette"}),b=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,r.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,r.NA)(t,e)}}))}return null};b.propTypes={},b.filterProps=["borderRadius"];a(c,u,d,f,p,h,m,g,v,y,b);var x=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,r.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,r.NA)(t,e)}}))}return null};x.propTypes={},x.filterProps=["gap"];var w=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,r.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,r.NA)(t,e)}}))}return null};w.propTypes={},w.filterProps=["columnGap"];var _=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,r.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,r.NA)(t,e)}}))}return null};_.propTypes={},_.filterProps=["rowGap"];a(x,w,_,(0,i.ZP)({prop:"gridColumn"}),(0,i.ZP)({prop:"gridRow"}),(0,i.ZP)({prop:"gridAutoFlow"}),(0,i.ZP)({prop:"gridAutoColumns"}),(0,i.ZP)({prop:"gridAutoRows"}),(0,i.ZP)({prop:"gridTemplateColumns"}),(0,i.ZP)({prop:"gridTemplateRows"}),(0,i.ZP)({prop:"gridTemplateAreas"}),(0,i.ZP)({prop:"gridArea"}));function S(e,t){return"grey"===t?t:e}a((0,i.ZP)({prop:"color",themeKey:"palette",transform:S}),(0,i.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:S}),(0,i.ZP)({prop:"backgroundColor",themeKey:"palette",transform:S}));function C(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var k=(0,i.ZP)({prop:"width",transform:C}),M=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||s.VO[t]||C(t)}}))}return null};M.filterProps=["maxWidth"];var T=(0,i.ZP)({prop:"minWidth",transform:C}),A=(0,i.ZP)({prop:"height",transform:C}),E=(0,i.ZP)({prop:"maxHeight",transform:C}),P=(0,i.ZP)({prop:"minHeight",transform:C}),R=((0,i.ZP)({prop:"size",cssProperty:"width",transform:C}),(0,i.ZP)({prop:"size",cssProperty:"height",transform:C}),a(k,M,T,A,E,P,(0,i.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:b},color:{themeKey:"palette",transform:S},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:S},backgroundColor:{themeKey:"palette",transform:S},p:{style:r.o3},pt:{style:r.o3},pr:{style:r.o3},pb:{style:r.o3},pl:{style:r.o3},px:{style:r.o3},py:{style:r.o3},padding:{style:r.o3},paddingTop:{style:r.o3},paddingRight:{style:r.o3},paddingBottom:{style:r.o3},paddingLeft:{style:r.o3},paddingX:{style:r.o3},paddingY:{style:r.o3},paddingInline:{style:r.o3},paddingInlineStart:{style:r.o3},paddingInlineEnd:{style:r.o3},paddingBlock:{style:r.o3},paddingBlockStart:{style:r.o3},paddingBlockEnd:{style:r.o3},m:{style:r.e6},mt:{style:r.e6},mr:{style:r.e6},mb:{style:r.e6},ml:{style:r.e6},mx:{style:r.e6},my:{style:r.e6},margin:{style:r.e6},marginTop:{style:r.e6},marginRight:{style:r.e6},marginBottom:{style:r.e6},marginLeft:{style:r.e6},marginX:{style:r.e6},marginY:{style:r.e6},marginInline:{style:r.e6},marginInlineStart:{style:r.e6},marginInlineEnd:{style:r.e6},marginBlock:{style:r.e6},marginBlockStart:{style:r.e6},marginBlockEnd:{style:r.e6},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:x},rowGap:{style:_},columnGap:{style:w},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:C},maxWidth:{style:M},minWidth:{transform:C},height:{transform:C},maxHeight:{transform:C},minHeight:{transform:C},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},9028:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(3433),i=n(7462),o=n(3366),a=n(3019),s=n(3232),l=["sx"];function c(e){var t,n=e.sx,c=function(e){var t,n,r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.Z;return Object.keys(e).forEach((function(t){i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r}((0,o.Z)(e,l)),u=c.systemProps,d=c.otherProps;return t=Array.isArray(n)?[u].concat((0,r.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,a.P)(e)?(0,i.Z)({},u,e):u}:(0,i.Z)({},u,n),(0,i.Z)({},d,{sx:t})}},3649:function(e,t,n){"use strict";var r=n(4942),i=n(114),o=n(7330),a=n(6428),s=n(4929),l=n(3232);var c=function(){function e(e,t,n,o){var l,c=(l={},(0,r.Z)(l,e,t),(0,r.Z)(l,"theme",n),l),u=o[e];if(!u)return(0,r.Z)({},e,t);var d=u.cssProperty,f=void 0===d?e:d,p=u.themeKey,h=u.transform,m=u.style;if(null==t)return null;var g=(0,a.DW)(n,p)||{};if(m)return m(c);return(0,s.k9)(c,t,(function(t){var n=(0,a.Jq)(g,h,t);return t===n&&"string"===typeof t&&(n=(0,a.Jq)(g,h,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===f?n:(0,r.Z)({},f,n)}))}return function t(n){var i,a=n||{},c=a.sx,u=a.theme,d=void 0===u?{}:u;if(!c)return null;var f=null!=(i=d.unstable_sxConfig)?i:l.Z;function p(n){var i=n;if("function"===typeof n)i=n(d);else if("object"!==typeof n)return n;if(!i)return null;var a=(0,s.W8)(d.breakpoints),l=Object.keys(a),c=a;return Object.keys(i).forEach((function(n){var a,l,u=(a=i[n],l=d,"function"===typeof a?a(l):a);if(null!==u&&void 0!==u)if("object"===typeof u)if(f[n])c=(0,o.Z)(c,e(n,u,d,f));else{var p=(0,s.k9)({theme:d},u,(function(e){return(0,r.Z)({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(p,u)?c=(0,o.Z)(c,p):c[n]=t({sx:u,theme:d})}else c=(0,o.Z)(c,e(n,u,d,f))})),(0,s.L7)(l,c)}return Array.isArray(c)?c.map(p):p(c)}}();c.filterProps=["sx"],t.Z=c},6728:function(e,t,n){"use strict";var r=n(5318),i=n(4976),o=(0,r.Z)();t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,i.Z)(e)}},118:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9023);var i=n(6728);function o(e){var t=e.props,n=e.name,o=e.defaultTheme,a=function(e){var t=e.theme,n=e.name,i=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,i):i}({theme:(0,i.Z)(o),name:n,props:t});return a}},4976:function(e,t,n){"use strict";var r=n(201);function i(e){return 0===Object.keys(e).length}t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,r.Z)();return!t||i(t)?e:t}},1271:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},114:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7219);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},1921:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},4246:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,{Z:function(){return r}})},4312:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=function(){e.apply(r,o)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},3019:function(e,t,n){"use strict";n.d(t,{P:function(){return i},Z:function(){return a}});var r=n(7462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e){if(!i(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=o(e[n])})),t}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},s=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?s[r]=a(e[r],t[r],n):n.clone?s[r]=i(t[r])?o(t[r]):t[r]:s[r]=t[r])})),s}},7219:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},2298:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1271),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",o=i[t];return o?"".concat(n,"-").concat(o):"".concat(r.Z.generate(e),"-").concat(t)}},7430:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2298);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return t.forEach((function(t){i[t]=(0,r.Z)(e,t,n)})),i}},9081:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},3282:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9081);function i(e){return(0,r.Z)(e).defaultView||window}},9023:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7462);function i(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(o){if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.Z)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){var a=e[o]||{},s=t[o];n[o]={},s&&Object.keys(s)?a&&Object.keys(a)?(n[o]=(0,r.Z)({},s),Object.keys(a).forEach((function(e){n[o][e]=i(a[e],s[e])}))):n[o]=s:n[o]=a}else void 0===n[o]&&(n[o]=e[o])})),n}},9265:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},782:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9439),i=n(7313);function o(e){var t=e.controlled,n=e.default,o=(e.name,e.state,i.useRef(void 0!==t).current),a=i.useState(n),s=(0,r.Z)(a,2),l=s[0],c=s[1];return[o?t:l,i.useCallback((function(e){o||c(e)}),[])]}},2678:function(e,t,n){"use strict";var r=n(7313),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},2780:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7313),i=n(2678);function o(e){var t=r.useRef(e);return(0,i.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},7472:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7313),i=n(9265);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){(0,i.Z)(t,e)}))}}),t)}},3362:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return l}});var i=n(9439),o=n(7313),a=0;var s=(r||(r=n.t(o,2))).useId;function l(e){if(void 0!==s){var t=s();return null!=e?e:t}return function(e){var t=o.useState(e),n=(0,i.Z)(t,2),r=n[0],s=n[1],l=e||r;return o.useEffect((function(){null==r&&s("mui-".concat(a+=1))}),[r]),l}(e)}},2358:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(5861),i=n(4165),o=n(7313),a=(0,i.Z)().mark(l),s=function(){};function l(e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),a)}var c=function(e,t){var n=(0,o.useRef)(e);(0,o.useEffect)((function(){n.current=e})),(0,o.useEffect)((function(){var e=!1,t=s,o=s,a=n.current((function(e,n){t=e||s,o=n||s}),l),c=s,u=function(){var n=(0,r.Z)((0,i.Z)().mark((function n(){var r,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r={value:void 0,done:!1},l=void 0;case 2:if(n.prev=2,r=l?a.throw(l):a.next(r.value),l=void 0,!r.value||!r.value.then){n.next=18;break}return n.prev=6,n.next=9,r.value;case 9:r.value=n.sent,n.next=18;break;case 12:if(n.prev=12,n.t0=n.catch(6),!e){n.next=17;break}return o(n.t0),n.abrupt("return");case 17:l=n.t0;case 18:if(!e){n.next=20;break}return n.abrupt("return");case 20:t=s,o=s,n.next=29;break;case 24:return n.prev=24,n.t1=n.catch(2),console.error("[use-async-effect] Unhandled promise rejection."),console.error(n.t1),n.abrupt("return");case 29:if(!1===r.done){n.next=2;break}case 30:r.value&&(c=r.value);case 31:case"end":return n.stop()}}),n,null,[[2,24],[6,12]])})));return function(){return n.apply(this,arguments)}}();return u(),function(){e=!0,t(),c()}}),t)}},2017:function(e,t){!function(){var n=Array.prototype.forEach,r=Object.prototype.hasOwnProperty,i=Array.prototype.slice,o=0;var a,s={keys:Object.keys||function(e){if("object"!==typeof e&&"function"!==typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++o+"";return e?e+t:t},has:function(e,t){return r.call(e,t)},each:function(e,t,r){if(null!=e)if(n&&e.forEach===n)e.forEach(t,r);else if(e.length===+e.length)for(var i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e);else for(var a in e)this.has(e,a)&&t.call(r,e[a],a,e)},once:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments),e=null),t}}};a={on:function(e,t,n){return c(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var r=this,i=s.once((function(){r.off(e,i),t.apply(this,arguments)}));return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,o,a,l,u,d,f;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(l=0,u=(a=e?[e]:s.keys(this._events)).length;l<u;l++)if(e=a[l],o=this._events[e]){if(this._events[e]=r=[],t||n)for(d=0,f=o.length;d<f;d++)i=o[d],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&u(n,t),r&&u(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;for(var o in"object"===typeof t&&(n=this),e&&((r={})[e._listenerId]=e),r)r[o].off(t,n,this),i&&delete this._listeners[o];return this}};var l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if("object"===typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){for(var o=n.split(l),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},u=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}};s.each({listenTo:"on",listenToOnce:"once"},(function(e,t){a[t]=function(t,n,r){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=s.uniqueId("l"))]=t,"object"===typeof n&&(r=this),t[e](n,r,this),this}})),a.bind=a.on,a.unbind=a.off,a.mixin=function(e){return s.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],(function(t){e[t]=this[t]}),this),e},e.exports&&(t=e.exports=a),t.BackboneEvents=a}()},8198:function(e,t,n){e.exports=n(2017)},1398:function(e,t,n){var r=n(8198);r.onAll=function(e,t){return this.on("all",e,t),this},r.oldMixin=r.mixin,r.mixin=function(e){r.oldMixin(e);for(var t=["onAll"],n=0;n<t.length;n++){var i=t[n];e[i]=this[i]}return e},e.exports=r},3061:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},7861:function(e,t,n){"use strict";var r=n(9456),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=f(n,v);try{c(t,v,y)}catch(b){}}}}return t}},229:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case m:case l:return e;default:return t}}case i:return t}}}function _(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||w(e)===u},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v)},t.typeOf=w},9456:function(e,t,n){"use strict";e.exports=n(229)},6666:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,l=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},c=o.push,u=o.indexOf,d={},f=d.toString,p=d.hasOwnProperty,h=p.toString,m=h.call(Object),g={},v=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,i,o=(n=n||b).createElement("script");if(o.text=e,t)for(r in x)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?d[f.call(e)]||"object":typeof e}var S="3.6.3",C=function e(t,n){return new e.fn.init(t,n)};function k(e){var t=!!e&&"length"in e&&e.length,n=_(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}C.fn=C.prototype={jquery:S,constructor:C,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},C.extend=C.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"===typeof a&&(c=a,a=arguments[s]||{},s++),"object"===typeof a||v(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(c&&r&&(C.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||C.isPlainObject(n)?n:{},i=!1,a[t]=C.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},C.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=a(e))||"function"===typeof(n=p.call(t,"constructor")&&t.constructor)&&h.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(k(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(k(Object(e))?C.merge(n,"string"===typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(k(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return l(a)},guid:1,support:g}),"function"===typeof Symbol&&(C.fn[Symbol.iterator]=o[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var M=function(e){var t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x="sizzle"+1*new Date,w=e.document,_=0,S=0,C=le(),k=le(),M=le(),T=le(),A=function(e,t){return e===t&&(d=!0),0},E={}.hasOwnProperty,P=[],R=P.pop,O=P.push,I=P.push,L=P.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",z="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+F+"*("+z+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+F+"*\\]",j=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",Z=new RegExp(F+"+","g"),H=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),U=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),G=new RegExp(F+"|>"),W=new RegExp(j),$=new RegExp("^"+z+"$"),q={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){f()},ae=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{I.apply(P=L.call(w.childNodes),w.childNodes),P[w.childNodes.length].nodeType}catch(ke){I={apply:P.length?function(e,t){O.apply(e,L.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,c,u,d,h,v,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!==typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!i&&(f(t),t=t||p,m)){if(11!==w&&(d=Q.exec(e)))if(o=d[1]){if(9===w){if(!(c=t.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&b(t,c)&&c.id===o)return r.push(c),r}else{if(d[2])return I.apply(r,t.getElementsByTagName(e)),r;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!T[e+" "]&&(!g||!g.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===w&&(G.test(e)||V.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(re,ie):t.setAttribute("id",u=x)),s=(h=a(e)).length;s--;)h[s]=(u?"#"+u:":scope")+" "+be(h[s]);v=h.join(",")}try{if(n.cssSupportsSelector&&!CSS.supports("selector(:is("+v+"))"))throw new Error;return I.apply(r,y.querySelectorAll(v)),r}catch(_){T(e,!0)}finally{u===x&&t.removeAttribute("id")}}}return l(e.replace(H,"$1"),t,r,i)}function le(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ce(e){return e[x]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(ke){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ve(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!=p&&9===a.nodeType&&a.documentElement?(h=(p=a).documentElement,m=!o(p),w!=p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=ue((function(e){return h.appendChild(e).appendChild(p.createElement("div")),"undefined"!==typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.cssSupportsSelector=ue((function(){return CSS.supports("selector(*)")&&p.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(p.getElementsByClassName),n.getById=ue((function(e){return h.appendChild(e).id=x,!p.getElementsByName||!p.getElementsByName(x).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!==typeof t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=J.test(p.querySelectorAll))&&(ue((function(e){var t;h.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=J.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",j)})),n.cssSupportsSelector||g.push(":has"),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(h.compareDocumentPosition),b=t||J.test(h.contains)?function(e,t){var n=9===e.nodeType&&e.documentElement||e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==p||e.ownerDocument==w&&b(w,e)?-1:t==p||t.ownerDocument==w&&b(w,t)?1:u?D(u,e)-D(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==p?-1:t==p?1:i?-1:o?1:u?D(u,e)-D(u,t):0;if(i===o)return fe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?fe(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&m&&!T[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(ke){T(t,!0)}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=p&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=p&&f(e);var i=r.attrHandle[t.toLowerCase()],o=i&&E.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(A),d){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return u=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},r=se.selectors={cacheLength:50,createPseudo:ce,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&C(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(Z," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(b=(p=(c=(u=(d=(f=g)[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){u[e]=[_,p,b];break}}else if(y&&(b=p=(c=(u=(d=(f=t)[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===b)for(;(f=++p&&f&&f[m]||(b=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&((u=(d=f[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[_,b]),f!==t)););return(b-=i)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[x]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=D(e,o[a])]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ce((function(e){var t=[],n=[],r=s(e.replace(H,"$1"));return r[x]?ce((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ce((function(e){return $.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ge((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=S++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var c,u,d,f=[_,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=(d=t[x]||(t[x]={}))[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[o])&&c[0]===_&&c[1]===s)return f[2]=c[2];if(u[o]=f,f[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function Se(e,t,n,r,i,o){return r&&!r[x]&&(r=Se(r)),i&&!i[x]&&(i=Se(i,o)),ce((function(o,a,s,l){var c,u,d,f=[],p=[],h=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:_e(m,f,e,s,l),v=n?i||(o?e:h||r)?[]:a:g;if(n&&n(g,v,s,l),r)for(c=_e(v,p),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[p[u]]=!(g[p[u]]=d));if(o){if(i||e){if(i){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);i(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=i?D(o,d):f[u])>-1&&(o[c]=!(a[c]=d))}}else v=_e(v===a?v.splice(h,v.length):v),i?i(null,a,v,l):I.apply(a,v)}))}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,u=xe((function(e){return e===t}),s,!0),d=xe((function(e){return D(t,e)>-1}),s,!0),f=[function(e,n,r){var i=!a&&(r||n!==c)||((t=n).nodeType?u(e,n,r):d(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])f=[xe(we(f),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[x]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return Se(l>1&&we(f),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(H,"$1"),n,l<i&&Ce(e.slice(l,i)),i<o&&Ce(e=e.slice(i)),i<o&&be(e))}f.push(n)}return we(f)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=se.tokenize=function(e,t){var n,i,o,a,s,l,c,u=k[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=r.preFilter;s;){for(a in n&&!(i=U.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=V.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(H," ")}),s=s.slice(n.length)),r.filter)!(i=q[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):k(e,l).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=M[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ce(t[n]))[x]?i.push(s):o.push(s);s=M(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,l,u){var d,h,g,v=0,y="0",b=o&&[],x=[],w=c,S=o||i&&r.find.TAG("*",u),C=_+=null==w?1:Math.random()||.1,k=S.length;for(u&&(c=a==p||a||u);y!==k&&null!=(d=S[y]);y++){if(i&&d){for(h=0,a||d.ownerDocument==p||(f(d),s=!m);g=e[h++];)if(g(d,a||p,s)){l.push(d);break}u&&(_=C)}n&&((d=!g&&d)&&v--,o&&b.push(d))}if(v+=y,n&&y!==v){for(h=0;g=t[h++];)g(b,x,a,s);if(o){if(v>0)for(;y--;)b[y]||x[y]||(x[y]=R.call(l));x=_e(x)}I.apply(l,x),u&&!o&&x.length>0&&v+t.length>1&&se.uniqueSort(l)}return u&&(_=C,c=w),b};return n?ce(o):o}(o,i)),s.selector=e}return s},l=se.select=function(e,t,n,i){var o,l,c,u,d,f="function"===typeof e&&e,p=!i&&a(e=f.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=q.needsContext.test(e)?0:l.length;o--&&(c=l[o],!r.relative[u=c.type]);)if((d=r.find[u])&&(i=d(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&be(l)))return I.apply(n,i),n;break}}return(f||s(e,p))(i,t,!m,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=x.split("").sort(A).join("")===x,n.detectDuplicates=!!d,f(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(N,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(r);C.find=M,(C.expr=M.selectors)[":"]=C.expr.pseudos,C.uniqueSort=C.unique=M.uniqueSort,C.text=M.getText,C.isXMLDoc=M.isXML,C.contains=M.contains,C.escapeSelector=M.escape;var T=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&C(e).is(n))break;r.push(e)}return r},A=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},E=C.expr.match.needsContext;function P(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,n){return v(t)?C.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?C.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?C.grep(e,(function(e){return u.call(t,e)>-1!==n})):C.filter(t,e,n)}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,(function(e){return 1===e.nodeType})))},C.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(C(e).filter((function(){for(t=0;t<r;t++)if(C.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)C.find(e,i[t],n);return r>1?C.uniqueSort(n):n},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"===typeof e&&E.test(e)?C(e):e||[],!1).length}});var I,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||I,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),R.test(r[1])&&C.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,I=C(b);var D=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!==typeof e&&C(e);if(!E.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?C.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?u.call(C(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(P(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},(function(e,t){C.fn[e]=function(n,r){var i=C.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=C.filter(r,i)),this.length>1&&(N[e]||C.uniqueSort(i),D.test(e)&&i.reverse()),this.pushStack(i)}}));var z=/[^\x20\t\r\n\f]+/g;function B(e){return e}function j(e){throw e}function Z(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}C.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return C.each(e.match(z)||[],(function(e,n){t[n]=!0})),t}(e):C.extend({},e);var t,n,r,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){C.each(n,(function(n,r){v(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==_(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return C.each(arguments,(function(e,t){for(var n;(n=C.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?C.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return C.Deferred((function(n){C.each(t,(function(t,r){var i=v(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var o=0;function a(e,t,n,i){return function(){var s=this,l=arguments,c=function(){var r,c;if(!(e<o)){if((r=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"===typeof r||"function"===typeof r)&&r.then,v(c)?i?c.call(r,a(o,t,B,i),a(o,t,j,i)):(o++,c.call(r,a(o,t,B,i),a(o,t,j,i),a(o,t,B,t.notifyWith))):(n!==B&&(s=void 0,l=[r]),(i||t.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(r){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(r,u.stackTrace),e+1>=o&&(n!==j&&(s=void 0,l=[r]),t.rejectWith(s,l))}};e?u():(C.Deferred.getStackHook&&(u.stackTrace=C.Deferred.getStackHook()),r.setTimeout(u))}}return C.Deferred((function(r){t[0][3].add(a(0,r,v(i)?i:B,r.notifyWith)),t[1][3].add(a(0,r,v(e)?e:B)),t[2][3].add(a(0,r,v(n)?n:j))})).promise()},promise:function(e){return null!=e?C.extend(e,i):i}},o={};return C.each(t,(function(e,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=s.call(arguments),o=C.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(Z(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||v(i[n]&&i[n].then)))return o.then();for(;n--;)Z(i[n],a(n),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&H.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){r.setTimeout((function(){throw e}))};var U=C.Deferred();function V(){b.removeEventListener("DOMContentLoaded",V),r.removeEventListener("load",V),C.ready()}C.fn.ready=function(e){return U.then(e).catch((function(e){C.readyException(e)})),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||U.resolveWith(b,[C]))}}),C.ready.then=U.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(C.ready):(b.addEventListener("DOMContentLoaded",V),r.addEventListener("load",V));var G=function e(t,n,r,i,o,a,s){var l=0,c=t.length,u=null==r;if("object"===_(r))for(l in o=!0,r)e(t,n,l,r[l],!0,a,s);else if(void 0!==i&&(o=!0,v(i)||(s=!0),u&&(s?(n.call(t,i),n=null):(u=n,n=function(e,t,n){return u.call(C(e),n)})),n))for(;l<c;l++)n(t[l],r,s?i:i.call(t[l],l,n(t[l],r)));return o?t:u?n.call(t):c?n(t[0],r):a},W=/^-ms-/,$=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function Y(e){return e.replace(W,"ms-").replace($,q)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=C.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[Y(t)]=n;else for(r in t)i[Y(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in r?[t]:t.match(z)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||C.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var J=new K,Q=new K,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(i){}Q.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return Q.hasData(e)||J.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),C.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Q.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=Y(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){Q.set(this,e)})):G(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))||void 0!==(n=ne(o,e))?n:void 0;this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),C.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=C.queue(e,t=t||"fx"),r=n.length,i=n.shift(),o=C._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){C.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:C.Callbacks("once memory").add((function(){J.remove(e,[t+"queue",n])}))})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each((function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=C.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=b.documentElement,se=function(e){return C.contains(e.ownerDocument,e)},le={composed:!0};ae.getRootNode&&(se=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===C.css(e,"display")};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return C.css(e,t,"")},l=s(),c=n&&n[3]||(C.cssNumber[t]?"":"px"),u=e.nodeType&&(C.cssNumber[t]||"px"!==c&&+l)&&ie.exec(C.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)C.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;C.style(e,t,(u*=2)+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var de={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,i=de[r];return i||(t=n.body.appendChild(n.createElement(r)),i=C.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),de[r]=i,i)}function pe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ce(r)&&(i[o]=fe(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}C.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ce(this)?C(this).show():C(this).hide()}))}});var he=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),g.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",g.option=!!e.lastChild}();var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&P(e,t)?C.merge([e],n):n}function be(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,g.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((o=e[p])||0===o)if("object"===_(o))C.merge(f,o.nodeType?[o]:o);else if(xe.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(me.exec(o)||["",""])[1].toLowerCase(),l=ve[s]||ve._default,a.innerHTML=l[1]+C.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;C.merge(f,a.childNodes),(a=d.firstChild).textContent=""}else f.push(t.createTextNode(o));for(d.textContent="",p=0;o=f[p++];)if(r&&C.inArray(o,r)>-1)i&&i.push(o);else if(c=se(o),a=ye(d.appendChild(o),"script"),c&&be(a),n)for(u=0;o=a[u++];)ge.test(o.type||"")&&n.push(o);return d}var _e=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function Ce(){return!1}function ke(e,t){return e===function(){try{return b.activeElement}catch(e){}}()===("focus"===t)}function Me(e,t,n,r,i,o){var a,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Me(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ce;else if(!i)return e;return 1===o&&(a=i,i=function(e){return C().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=C.guid++)),e.each((function(){C.event.add(this,t,i,r,n)}))}function Te(e,t,n){n?(J.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=J.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=s.call(arguments),J.set(this,t,o),r=n(this,t),this[t](),o!==(i=J.get(this,t))||r?J.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&(J.set(this,t,{value:C.event.trigger(C.extend(o[0],C.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===J.get(e,t)&&C.event.add(e,t,Se)}C.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,p,h,m,g=J.get(e);if(X(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&C.find.matchesSelector(ae,i),n.guid||(n.guid=C.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(z)||[""]).length;c--;)p=m=(s=_e.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=C.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=C.event.special[p]||{},u=C.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,u):f.push(u),C.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,p,h,m,g=J.hasData(e)&&J.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(z)||[""]).length;c--;)if(p=m=(s=_e.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=C.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)u=f[o],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||C.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)C.event.remove(e,p+t[c],n,r,!0);C.isEmptyObject(l)&&J.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),l=C.event.fix(e),c=(J.get(this,"events")||Object.create(null))[l.type]||[],u=C.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=C.event.handlers.call(this,l,c),t=0;(i=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?C(i,this).index(c)>-1:C.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return he.test(t.type)&&t.click&&P(t,"input")&&Te(t,"click",Se),!1},trigger:function(e){var t=this||e;return he.test(t.type)&&t.click&&P(t,"input")&&Te(t,"click"),!0},_default:function(e){var t=e.target;return he.test(t.type)&&t.click&&P(t,"input")&&J.get(t,"click")||P(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0}).prototype={constructor:C.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(e,t){C.event.special[e]={setup:function(){return Te(this,e,ke),!1},trigger:function(){return Te(this,e),!0},_default:function(t){return J.get(t.target,e)},delegateType:t}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||C.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),C.fn.extend({on:function(e,t,n,r){return Me(this,e,t,n,r)},one:function(e,t,n,r){return Me(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each((function(){C.event.remove(this,e,n,t)}))}});var Ae=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return P(e,"table")&&P(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(J.hasData(e)&&(s=J.get(e).events))for(i in J.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)C.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=C.extend({},o),Q.set(t,a))}}function De(e,t){var n=t.nodeName.toLowerCase();"input"===n&&he.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ne(e,t,n,r){t=l(t);var i,o,a,s,c,u,d=0,f=e.length,p=f-1,h=t[0],m=v(h);if(m||f>1&&"string"===typeof h&&!g.checkClone&&Ee.test(h))return e.each((function(i){var o=e.eq(i);m&&(t[0]=h.call(this,i,o.html())),Ne(o,t,n,r)}));if(f&&(o=(i=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=C.map(ye(i,"script"),Oe)).length;d<f;d++)c=i,d!==p&&(c=C.clone(c,!0,!0),s&&C.merge(a,ye(c,"script"))),n.call(e[d],c,d);if(s)for(u=a[a.length-1].ownerDocument,C.map(a,Ie),d=0;d<s;d++)c=a[d],ge.test(c.type||"")&&!J.access(c,"globalEval")&&C.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?C._evalUrl&&!c.noModule&&C._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):w(c.textContent.replace(Pe,""),c,u))}return e}function Fe(e,t,n){for(var r,i=t?C.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||C.cleanData(ye(r)),r.parentNode&&(n&&se(r)&&be(ye(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=se(e);if(!g.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!C.isXMLDoc(e))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)De(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,s);return(a=ye(s,"script")).length>0&&be(a,!l&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=C.event.special,o=0;void 0!==(n=e[o]);o++)if(X(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return G(this,(function(e){return void 0===e?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ne(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)}))},prepend:function(){return Ne(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ne(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ne(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return C.clone(this,e,t)}))},html:function(e){return G(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Ae.test(e)&&!ve[(me.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ne(this,arguments,(function(t){var n=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(ye(this)),n&&n.replaceChild(t,this))}),e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){for(var n,r=[],i=C(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),C(i[a])[t](n),c.apply(r,n.get());return this.pushStack(r)}}));var ze=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),Be=/^--/,je=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ze=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},He=new RegExp(oe.join("|"),"i"),Ue="[\\x20\\t\\r\\n\\f]",Ve=new RegExp("^"+Ue+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ue+"+$","g");function Ge(e,t,n){var r,i,o,a,s=Be.test(t),l=e.style;return(n=n||je(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(Ve,"$1")||void 0),""!==a||se(e)||(a=C.style(e,t)),!g.pixelBoxStyles()&&ze.test(a)&&He.test(t)&&(r=l.width,i=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=r,l.minWidth=i,l.maxWidth=o)),void 0!==a?a+"":a}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(c).appendChild(u);var e=r.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",a=36===t(e.right),i=36===t(e.width),u.style.position="absolute",o=12===t(u.offsetWidth/3),ae.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,i,o,a,s,l,c=b.createElement("div"),u=b.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,C.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,i;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ae.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,ae.removeChild(e)),s}}))}();var $e=["Webkit","Moz","ms"],qe=b.createElement("div").style,Ye={};function Xe(e){var t=C.cssProps[e]||Ye[e];return t||(e in qe?e:Ye[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=$e.length;n--;)if((e=$e[n]+t)in qe)return e}(e)||e)}var Ke=/^(none|table(?!-c[ea]).+)/,Je={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function tt(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=C.css(e,n+oe[a],!0,i)),r?("content"===n&&(l-=C.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(l-=C.css(e,"border"+oe[a]+"Width",!0,i))):(l+=C.css(e,"padding"+oe[a],!0,i),"padding"!==n?l+=C.css(e,"border"+oe[a]+"Width",!0,i):s+=C.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function nt(e,t,n){var r=je(e),i=(!g.boxSizingReliable()||n)&&"border-box"===C.css(e,"boxSizing",!1,r),o=i,a=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&P(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===C.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===C.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+tt(e,t,n||(i?"border":"content"),o,r,a)+"px"}function rt(e,t,n,r,i){return new rt.prototype.init(e,t,n,r,i)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=Y(t),l=Be.test(t),c=e.style;if(l||(t=Xe(s)),a=C.cssHooks[t]||C.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t];"string"===(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"!==o||l||(n+=i&&i[3]||(C.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=Y(t);return Be.test(t)||(t=Xe(s)),(a=C.cssHooks[t]||C.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,n,r){if(n)return!Ke.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,r):Ze(e,Je,(function(){return nt(e,t,r)}))},set:function(e,n,r){var i,o=je(e),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===C.css(e,"boxSizing",!1,o),l=r?tt(e,t,r,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-tt(e,t,"border",!1,o)-.5)),l&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=C.css(e,t)),et(0,n,l)}}})),C.cssHooks.marginLeft=We(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ze(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(C.cssHooks[e+t].set=et)})),C.fn.extend({css:function(e,t){return G(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=je(e),i=t.length;a<i;a++)o[t[a]]=C.css(e,t[a],!1,r);return o}return void 0!==n?C.style(e,t,n):C.css(e,t)}),e,t,arguments.length>1)}}),C.Tween=rt,rt.prototype={constructor:rt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var e=rt.propHooks[this.prop];return e&&e.get?e.get(this):rt.propHooks._default.get(this)},run:function(e){var t,n=rt.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rt.propHooks._default.set(this),this}},rt.prototype.init.prototype=rt.prototype,rt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},rt.propHooks.scrollTop=rt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(C.fx=rt.prototype.init).step={};var it,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function lt(){ot&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(lt):r.setTimeout(lt,C.fx.interval),C.fx.tick())}function ct(){return r.setTimeout((function(){it=void 0})),it=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function dt(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(e,t,n){var r,i,o=0,a=ft.prefilters.length,s=C.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=it||ct(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var r=C.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=Y(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=C.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);o<a;o++)if(r=ft.prefilters[o].call(c,e,u,c.opts))return v(r.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return C.map(u,dt,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),C.fx.timer(C.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}C.Animation=C.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(z);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,c,u,d="width"in t||"height"in t,f=this,p={},h=e.style,m=e.nodeType&&ce(e),g=J.get(e,"fxshow");for(r in n.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],at.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}p[r]=g&&g[r]||C.style(e,r)}if((l=!C.isEmptyObject(t))||!C.isEmptyObject(p))for(r in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=g&&g.display)&&(c=J.get(e,"display")),"none"===(u=C.css(e,"display"))&&(c?u=c:(pe([e],!0),c=e.style.display||c,u=C.css(e,"display"),pe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===C.css(e,"float")&&(l||(f.done((function(){h.display=c})),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=J.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&pe([e],!0),f.done((function(){for(r in m||pe([e]),J.remove(e,"fxshow"),p)C.style(e,r,p[r])}))),l=dt(m?g[r]:0,r,f),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"===typeof e?C.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return C.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in C.fx.speeds?r.duration=C.fx.speeds[r.duration]:r.duration=C.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=C.isEmptyObject(e),o=C.speed(t,n,r),a=function(){var t=ft(this,C.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=C.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&st.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||C.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=C.timers,a=r?r.length:0;for(n.finish=!0,C.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(e,t){var n=C.fn[t];C.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}})),C.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),it=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ot||(ot=!0,lt())},C.fx.stop=function(){ot=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var pt,ht=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return G(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}}),C.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?C.prop(e,t,n):(1===o&&C.isXMLDoc(e)||(i=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&P(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(z);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ht[t]||C.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(z)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(z)||[]}C.fn.extend({prop:function(e,t){return G(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}}),C.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,i=C.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(e){var t,n,r,i,o,a;return v(e)?this.each((function(t){C(this).addClass(e.call(this,t,yt(this)))})):(t=bt(e)).length?this.each((function(){if(r=yt(this),n=1===this.nodeType&&" "+vt(r)+" "){for(o=0;o<t.length;o++)i=t[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=vt(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(e){var t,n,r,i,o,a;return v(e)?this.each((function(t){C(this).removeClass(e.call(this,t,yt(this)))})):arguments.length?(t=bt(e)).length?this.each((function(){if(r=yt(this),n=1===this.nodeType&&" "+vt(r)+" "){for(o=0;o<t.length;o++)for(i=t[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=vt(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,o,a=typeof e,s="string"===a||Array.isArray(e);return v(e)?this.each((function(n){C(this).toggleClass(e.call(this,n,yt(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=bt(e),this.each((function(){if(s)for(o=C(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==a||((r=yt(this))&&J.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":J.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+vt(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;C.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=v(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,C(this).val()):e)?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=C.map(i,(function(e){return null==e?"":e+""}))),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=C.valHooks[i.type]||C.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"===typeof(n=i.value)?n.replace(xt,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:vt(C.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!P(n.parentNode,"optgroup"))){if(t=C(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=C.makeArray(t),a=i.length;a--;)((r=i[a]).selected=C.inArray(C.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},g.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in r;var wt=/^(?:focusinfocus|focusoutblur)$/,_t=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,n,i){var o,a,s,l,c,u,d,f,h=[n||b],m=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(a=f=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!wt.test(m+C.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[C.expando]?e:new C.Event(m,"object"===typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),d=C.event.special[m]||{},i||!d.trigger||!1!==d.trigger.apply(n,t))){if(!i&&!d.noBubble&&!y(n)){for(l=d.delegateType||m,wt.test(l+m)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(n.ownerDocument||b)&&h.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)f=a,e.type=o>1?l:d.bindType||m,(u=(J.get(a,"events")||Object.create(null))[e.type]&&J.get(a,"handle"))&&u.apply(a,t),(u=c&&a[c])&&u.apply&&X(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(h.pop(),t)||!X(n)||c&&v(n[m])&&!y(n)&&((s=n[c])&&(n[c]=null),C.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,_t),n[m](),e.isPropagationStopped()&&f.removeEventListener(m,_t),C.event.triggered=void 0,s&&(n[c]=s)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}}),g.focusin||C.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}}));var St=r.location,Ct={guid:Date.now()},kt=/\?/;C.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(i){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||C.error("Invalid XML: "+(n?C.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Mt=/\[\]$/,Tt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,n,r){var i;if(Array.isArray(t))C.each(t,(function(t,i){n||Mt.test(e)?r(e,i):Pt(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==_(t))r(e,t);else for(i in t)Pt(e+"["+i+"]",t[i],n,r)}C.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,(function(){i(this.name,this.value)}));else for(n in e)Pt(n,e[n],t,i);return r.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&Et.test(this.nodeName)&&!At.test(e)&&(this.checked||!he.test(e))})).map((function(e,t){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}})):{name:t.name,value:n.replace(Tt,"\r\n")}})).get()}});var Rt=/%20/g,Ot=/#.*$/,It=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dt=/^(?:GET|HEAD)$/,Nt=/^\/\//,Ft={},zt={},Bt="*/".concat("*"),jt=b.createElement("a");function Zt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(z)||[];if(v(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ht(e,t,n,r){var i={},o=e===zt;function a(s){var l;return i[s]=!0,C.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!==typeof c||o||i[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Ut(e,t){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&C.extend(!0,e,r),e}jt.href=St.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,C.ajaxSettings),t):Ut(C.ajaxSettings,e)},ajaxPrefilter:Zt(Ft),ajaxTransport:Zt(zt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n,i,o,a,s,l,c,u,d,f,p=C.ajaxSetup({},t=t||{}),h=p.context||p,m=p.context&&(h.nodeType||h.jquery)?C(h):C.event,g=C.Deferred(),v=C.Callbacks("once memory"),y=p.statusCode||{},x={},w={},_="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=Lt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||_;return n&&n.abort(t),k(0,t),this}};if(g.promise(S),p.url=((e||p.url||St.href)+"").replace(Nt,St.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(z)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=jt.protocol+"//"+jt.host!==l.protocol+"//"+l.host}catch(M){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!==typeof p.data&&(p.data=C.param(p.data,p.traditional)),Ht(Ft,p,t,S),c)return S;for(d in(u=C.event&&p.global)&&0===C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Dt.test(p.type),i=p.url.replace(Ot,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Rt,"+")):(f=p.url.slice(i.length),p.data&&(p.processData||"string"===typeof p.data)&&(i+=(kt.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(It,"$1"),f=(kt.test(i)?"&":"?")+"_="+Ct.guid+++f),p.url=i+f),p.ifModified&&(C.lastModified[i]&&S.setRequestHeader("If-Modified-Since",C.lastModified[i]),C.etag[i]&&S.setRequestHeader("If-None-Match",C.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Bt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(h,S,p)||c))return S.abort();if(_="abort",v.add(p.complete),S.done(p.success),S.fail(p.error),n=Ht(zt,p,t,S)){if(S.readyState=1,u&&m.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(s=r.setTimeout((function(){S.abort("timeout")}),p.timeout));try{c=!1,n.send(x,k)}catch(M){if(c)throw M;k(-1,M)}}else k(-1,"No Transport");function k(e,t,a,l){var d,f,b,x,w,_=t;c||(c=!0,s&&r.clearTimeout(s),n=void 0,o=l||"",S.readyState=e>0?4:0,d=e>=200&&e<300||304===e,a&&(x=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,S,a)),!d&&C.inArray("script",p.dataTypes)>-1&&C.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),x=function(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(M){return{state:"parsererror",error:a?M:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,x,S,d),d?(p.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(C.lastModified[i]=w),(w=S.getResponseHeader("etag"))&&(C.etag[i]=w)),204===e||"HEAD"===p.type?_="nocontent":304===e?_="notmodified":(_=x.state,f=x.data,d=!(b=x.error))):(b=_,!e&&_||(_="error",e<0&&(e=0))),S.status=e,S.statusText=(t||_)+"",d?g.resolveWith(h,[f,_,S]):g.rejectWith(h,[S,_,b]),S.statusCode(y),y=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[S,p,d?f:b]),v.fireWith(h,[S,_]),u&&(m.trigger("ajaxComplete",[S,p]),--C.active||C.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],(function(e,t){C[t]=function(e,n,r,i){return v(n)&&(i=i||r,r=n,n=void 0),C.ajax(C.extend({url:e,type:t,dataType:i,data:n,success:r},C.isPlainObject(e)&&e))}})),C.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),C._evalUrl=function(e,t,n){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,n)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){C(this).wrapInner(e.call(this,t))})):this.each((function(){var t=C(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(n){C(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=C.ajaxSettings.xhr();g.cors=!!Gt&&"withCredentials"in Gt,g.ajax=Gt=!!Gt,C.ajaxTransport((function(e){var t,n;if(g.cors||Gt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}})),C.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),C.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Wt=[],$t=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||C.expando+"_"+Ct.guid++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",(function(e,t,n){var i,o,a,s=!1!==e.jsonp&&($t.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace($t,"$1"+i):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||C.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){void 0===o?C(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Wt.push(i)),a&&v(o)&&o(a[0]),a=o=void 0})),"script"})),g.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),C.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),o=!n&&[],(i=R.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&C(o).remove(),C.merge([],i.childNodes)));var r,i,o},C.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),a.length>0&&C.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length},C.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c=C.css(e,"position"),u=C(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=C.css(e,"top"),l=C.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(r=u.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),v(t)&&(t=t.call(e,n,C.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):u.css(d)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){C.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===C.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),i.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-C.css(r,"marginTop",!0),left:t.left-i.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||ae}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;C.fn[e]=function(r){return G(this,(function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),C.each(["top","left"],(function(e,t){C.cssHooks[t]=We(g.pixelPosition,(function(e,n){if(n)return n=Ge(e,t),ze.test(n)?C(e).position()[t]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){C.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!==typeof i),s=n||(!0===i||!0===o?"margin":"border");return G(this,(function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?C.css(t,n,s):C.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}})),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){C.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var qt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),v(e))return r=s.call(arguments,2),i=function(){return e.apply(t||this,r.concat(s.call(arguments)))},i.guid=e.guid=e.guid||C.guid++,i},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=P,C.isFunction=v,C.isWindow=y,C.camelCase=Y,C.type=_,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},C.trim=function(e){return null==e?"":(e+"").replace(qt,"$1")},void 0===(n=function(){return C}.apply(t,[]))||(e.exports=n);var Yt=r.jQuery,Xt=r.$;return C.noConflict=function(e){return r.$===C&&(r.$=Xt),e&&r.jQuery===C&&(r.jQuery=Yt),C},"undefined"===typeof i&&(r.jQuery=r.$=C),C}))},936:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,h=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,l,c=0,u=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function b(e){return c=e,s=setTimeout(w,t),u?y(e):a}function x(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function w(){var e=h();if(x(e))return _(e);s=setTimeout(w,function(e){var n=t-(e-l);return d?p(n,o-(e-c)):n}(e))}function _(e){return s=void 0,v&&r?y(e):(r=i=void 0,a)}function S(){var e=h(),n=x(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return b(l);if(d)return s=setTimeout(w,t),y(l)}return void 0===s&&(s=setTimeout(w,t)),a}return t=g(t)||0,m(n)&&(u=!!n.leading,o=(d="maxWait"in n)?f(g(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},S.flush=function(){return void 0===s?a:_(h())},S}},5079:function(e,t,n){"use strict";n.r(t),n.d(t,{ArrowBuffer:function(){return fb},Assembly:function(){return Ih},Box3:function(){return K},BoxBuffer:function(){return yb},BufferRepresentation:function(){return Im},Collection:function(){return mg},Color:function(){return ie},Colormaker:function(){return cs},ColormakerRegistry:function(){return pl},Component:function(){return pg},ComponentCollection:function(){return Zg},ConeBuffer:function(){return cb},Counter:function(){return Hl},CylinderBuffer:function(){return ay},DatasourceRegistry:function(){return hl},Debug:function(){return sl},DecompressorRegistry:function(){return yl},EllipsoidBuffer:function(){return Cb},Euler:function(){return ce},Frames:function(){return xg},Kdtree:function(){return Ah},KeyActions:function(){return Wp},LeftMouseButton:function(){return Dc},ListingDatasource:function(){return cl},Matrix3:function(){return U},Matrix4:function(){return j},MdsrvDatasource:function(){return fS},MeasurementDefaultParams:function(){return il},MeshBuffer:function(){return Lp},MiddleMouseButton:function(){return Nc},MolecularSurface:function(){return Hy},MouseActions:function(){return Hp},OctahedronBuffer:function(){return Eb},ParserRegistry:function(){return gl},PdbWriter:function(){return Fl},Plane:function(){return Q},PointBuffer:function(){return Ym},Quaternion:function(){return Z},Queue:function(){return ku},RepresentationCollection:function(){return vg},RepresentationRegistry:function(){return ml},RightMouseButton:function(){return Fc},ScriptExtensions:function(){return dl},SdfWriter:function(){return zl},Selection:function(){return Bs},Shape:function(){return Rm},ShapeComponent:function(){return Wg},Signal:function(){return fs},SpatialHash:function(){return md},SphereBuffer:function(){return Gm},Stage:function(){return Gg},StaticDatasource:function(){return dS},StlWriter:function(){return Zl},Structure:function(){return Mm},StructureComponent:function(){return zg},Superposition:function(){return _g},SurfaceComponent:function(){return Bg},TetrahedronBuffer:function(){return Lb},TextBuffer:function(){return Hv},TorusBuffer:function(){return jb},TrajectoryDatasource:function(){return ul},TrajectoryPlayer:function(){return Cg},UIStageParameters:function(){return vS},Vector2:function(){return B},Vector3:function(){return H},Version:function(){return yS},Volume:function(){return kp},VolumeComponent:function(){return jg},WidelineBuffer:function(){return Gv},autoLoad:function(){return Il},concatStructures:function(){return Qh},download:function(){return Pa},flatten:function(){return Ma},getDataInfo:function(){return Ol},getFileInfo:function(){return Rl},getQuery:function(){return _a},guessElement:function(){return Kh},setDebug:function(){return ll},setListingDatasource:function(){return _l},setMeasurementDefaultParams:function(){return ol},setTrajectoryDatasource:function(){return Sl},superpose:function(){return Ng},throttle:function(){return Ra},uniqueArray:function(){return Da}}),"undefined"!==typeof window&&function(){window.console=window.console||{};for(var e,t,n=window.console,r={},i=function(){},o="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)n[e]||(n[e]=r);for(;t=a.pop();)n[t]||(n[t]=i)}(),"undefined"===typeof window.HTMLCanvasElement||window.HTMLCanvasElement.prototype.toBlob||Object.defineProperty(window.HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=window.atob(this.toDataURL(t,n).split(",")[1]),i=r.length,o=i>>2,a=new Uint8Array(i),s=new Uint32Array(a.buffer,0,o),l=0,c=0;l<o;l++)s[l]=r.charCodeAt(c++)|r.charCodeAt(c++)<<8|r.charCodeAt(c++)<<16|r.charCodeAt(c++)<<24;for(var u=3&i;u--;)a[c]=r.charCodeAt(c++);e(new window.Blob([a],{type:t||"image/png"}))}}),Math.cbrt=Math.cbrt||function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t},Math.sign||(Math.sign=function(e){return 0===(e=+e)||isNaN(e)?Number(e):e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&e>-9007199254740992&&e<9007199254740992&&Math.floor(e)===e}),Number.isNaN||(Number.isNaN=function(e){return e!==e}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=arguments;if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n,r=Object(e),i=!1,o=1;o<arguments.length;o++){var a=t[o];if(void 0!==a&&null!==a){for(var s=Object.keys(Object(a)),l=0,c=s.length;l<c;l++){var u=s[l];try{var d=Object.getOwnPropertyDescriptor(a,u);void 0!==d&&d.enumerable&&(r[u]=a[u])}catch(f){i||(i=!0,n=f)}}if(i)throw n}}return r}}),String.prototype.startsWith||function(){var e=function(){var e;try{var t={},n=Object.defineProperty;e=n(t,t,t)&&n}catch(r){}return e}(),t={}.toString,n=function(e){if(null===this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"===t.call(e))throw TypeError();var r=n.length,i=String(e),o=i.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;Number.isNaN(s)&&(s=0);var l=Math.min(Math.max(s,0),r);if(o+l>r)return!1;for(var c=-1;++c<o;)if(n.charCodeAt(l+c)!==i.charCodeAt(c))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}(),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),String.prototype.repeat||(String.prototype.repeat=function(e){if(null===this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if(e=+e,Number.isNaN(e)&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===t.length||0===e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1===(1&e)&&(n+=t),0!==(e>>>=1);)t+=t;return n}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!==typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||(Array.prototype.includes=function(e){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1],10)||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(e===(i=t[r])||Number.isNaN(e)&&Number.isNaN(i))return!0;r++}return!1}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"===typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var s,l=r(i.length),c=t(n)?Object(new n(l)):new Array(l),u=0;u<l;)s=i[u],c[u]=a?"undefined"===typeof o?a(s,u):a.call(o,s,u):s,u+=1;return c.length=l,c}}()),"undefined"!==typeof window&&function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=window.setTimeout((function(){t(n+r)}),r);return e=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),"undefined"!==typeof window&&(void 0===window.performance&&(self.performance={}),void 0===window.performance.now&&function(){var e=Date.now();window.performance.now=function(){return Date.now()-e}}()),void 0!==Object.defineProperty&&(void 0===Number.MAX_SAFE_INTEGER&&Object.defineProperty(Number,"MAX_SAFE_INTEGER",{enumerable:!1,configurable:!1,writable:!1,value:Math.pow(2,53)-1}),void 0===Number.MIN_SAFE_INTEGER&&Object.defineProperty(Number,"MIN_SAFE_INTEGER",{enumerable:!1,configurable:!1,writable:!1,value:-(Math.pow(2,53)-1)}));var r=setTimeout;function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void l(t.promise,i)}s(t.promise,r)}else(1===e._state?s:l)(t.promise,e._value)}))):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"===typeof n)return void d((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(a){l(e,a)}var r,i}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn((function(){e._handled||o._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,s(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(r){if(n)return;n=!0,l(t,r)}}function f(){}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new u(e,t,n)),n},o.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},o.all=function(e){return new o((function(t,n){if(!e||"undefined"===typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,(function(t){o(e,t)}),n)}r[e]=a,0===--i&&t(r)}catch(l){n(l)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},o.resolve=function(e){return e&&"object"===typeof e&&e.constructor===o?e:new o((function(t){t(e)}))},o.reject=function(e){return new o((function(t,n){n(e)}))},o.race=function(e){return new o((function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)}))},o._immediateFn="function"===typeof setImmediate&&function(e){setImmediate(e)}||function(e){r(e,0)},o._unhandledRejectionFn=function(e){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){var t=arguments;if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=t[r];if(void 0!==i&&null!==i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n}),Object.assign(f.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var p=1e3,h=1001,m=1002,g=1003,v=1004,y=1005,b=1006,x=1008,w=1009,_=1012,S=1014,C=1015,k=1016,M=1020,T=1022,A=1023,E=1026,P=1027,R=2300,O=2301,I=2302,L=2400,D=2401,N=2402,F=3e3,z={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*z.DEG2RAD},radToDeg:function(e){return e*z.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function B(e,t){this.x=e||0,this.y=t||0}function j(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Z(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function H(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function U(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(B.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(B.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new B,t=new B;return function(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(j.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,l,c,u,d,f,p,h,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=f,g[7]=p,g[11]=h,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new j).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new H;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){var d=o*c,f=o*u,p=a*c,h=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=f+p*l,t[5]=d-h*l,t[9]=-a*s,t[2]=h-d*l,t[6]=p+f*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,g=s*u,v=l*c,y=l*u;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*c,g=s*u,v=l*c,y=l*u;t[0]=m-y*a,t[4]=-o*u,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*c,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){d=o*c,f=o*u,p=a*c,h=a*u;t[0]=s*c,t[4]=p*l-f,t[8]=d*l+h,t[1]=s*u,t[5]=h*l+d,t[9]=f*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,x=o*l,w=a*s,_=a*l;t[0]=s*c,t[4]=_-b*u,t[8]=w*u+x,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=x*u+w,t[10]=b-_*u}else if("XZY"===e.order){b=o*s,x=o*l,w=a*s,_=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=b*u+_,t[5]=o*c,t[9]=x*u-w,t[2]=w*u-x,t[6]=a*c,t[10]=_*u+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new H(0,0,0),t=new H(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new H,t=new H,n=new H;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],f=n[13],p=n[2],h=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],S=r[8],C=r[12],k=r[1],M=r[5],T=r[9],A=r[13],E=r[2],P=r[6],R=r[10],O=r[14],I=r[3],L=r[7],D=r[11],N=r[15];return i[0]=o*w+a*k+s*E+l*I,i[4]=o*_+a*M+s*P+l*L,i[8]=o*S+a*T+s*R+l*D,i[12]=o*C+a*A+s*O+l*N,i[1]=c*w+u*k+d*E+f*I,i[5]=c*_+u*M+d*P+f*L,i[9]=c*S+u*T+d*R+f*D,i[13]=c*C+u*A+d*O+f*N,i[2]=p*w+h*k+m*E+g*I,i[6]=p*_+h*M+m*P+g*L,i[10]=p*S+h*T+m*R+g*D,i[14]=p*C+h*A+m*O+g*N,i[3]=v*w+y*k+b*E+x*I,i[7]=v*_+y*M+b*P+x*L,i[11]=v*S+y*T+b*R+x*D,i[15]=v*C+y*A+b*O+x*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new H;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],f=e[14];return e[3]*(+i*s*u-r*l*u-i*a*d+n*l*d+r*a*f-n*s*f)+e[7]*(+t*s*f-t*l*d+i*o*d-r*o*f+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*f-i*o*u+n*o*f+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*d+r*o*u-n*o*d+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],d=r[7],f=r[8],p=r[9],h=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15],x=p*y*d-v*h*d+v*u*m-c*y*m-p*u*b+c*h*b,w=g*h*d-f*y*d-g*u*m+l*y*m+f*u*b-l*h*b,_=f*v*d-g*p*d+g*c*m-l*v*m-f*c*b+l*p*b,S=g*p*u-f*v*u-g*c*h+l*v*h+f*c*y-l*p*y,C=i*x+o*w+a*_+s*S;if(0===C){var k="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(k);return console.warn(k),this.identity()}var M=1/C;return n[0]=x*M,n[1]=(v*h*s-p*y*s-v*a*m+o*y*m+p*a*b-o*h*b)*M,n[2]=(c*y*s-v*u*s+v*a*d-o*y*d-c*a*b+o*u*b)*M,n[3]=(p*u*s-c*h*s-p*a*d+o*h*d+c*a*m-o*u*m)*M,n[4]=w*M,n[5]=(f*y*s-g*h*s+g*a*m-i*y*m-f*a*b+i*h*b)*M,n[6]=(g*u*s-l*y*s-g*a*d+i*y*d+l*a*b-i*u*b)*M,n[7]=(l*h*s-f*u*s+f*a*d-i*h*d-l*a*m+i*u*m)*M,n[8]=_*M,n[9]=(g*p*s-f*v*s-g*o*m+i*v*m+f*o*b-i*p*b)*M,n[10]=(l*v*s-g*c*s+g*o*d-i*v*d-l*o*b+i*c*b)*M,n[11]=(f*c*s-l*p*s-f*o*d+i*p*d+l*o*m-i*c*m)*M,n[12]=S*M,n[13]=(f*v*a-g*p*a+g*o*h-i*v*h-f*o*y+i*p*y)*M,n[14]=(g*c*a-l*v*a-g*o*u+i*v*u+l*o*y-i*c*y)*M,n[15]=(l*p*a-f*c*a+f*o*u-i*p*u-l*o*h+i*c*h)*M,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,d=i*l,f=i*c,p=i*u,h=o*c,m=o*u,g=a*u,v=s*l,y=s*c,b=s*u,x=n.x,w=n.y,_=n.z;return r[0]=(1-(h+g))*x,r[1]=(f+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+y)*_,r[9]=(m-v)*_,r[10]=(1-(d+h))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(){var e=new H,t=new j;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var c=1/a,u=1/s,d=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=l,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,d=(n+r)*l,f=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(Z,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3],d=i[o+0],f=i[o+1],p=i[o+2],h=i[o+3];if(u!==h||s!==d||l!==f||c!==p){var m=1-a,g=s*d+l*f+c*p+u*h,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,g*v);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var w=a*v;if(s=s*m+d*w,l=l*m+f*w,c=c*m+p*w,u=u*m+h*w,m===1-a){var _=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=_,l*=_,c*=_,u*=_}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}}),Object.defineProperties(Z.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Z.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),d=s(n/2),f=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=d*c*u+l*f*p,this._y=l*f*u-d*c*p,this._z=l*c*p+d*f*u,this._w=l*c*u-d*f*p):"YXZ"===o?(this._x=d*c*u+l*f*p,this._y=l*f*u-d*c*p,this._z=l*c*p-d*f*u,this._w=l*c*u+d*f*p):"ZXY"===o?(this._x=d*c*u-l*f*p,this._y=l*f*u+d*c*p,this._z=l*c*p+d*f*u,this._w=l*c*u-d*f*p):"ZYX"===o?(this._x=d*c*u-l*f*p,this._y=l*f*u+d*c*p,this._z=l*c*p-d*f*u,this._w=l*c*u+d*f*p):"YZX"===o?(this._x=d*c*u+l*f*p,this._y=l*f*u+d*c*p,this._z=l*c*p-d*f*u,this._w=l*c*u-d*f*p):"XZY"===o&&(this._x=d*c*u-l*f*p,this._y=l*f*u-d*c*p,this._z=l*c*p+d*f*u,this._w=l*c*u+d*f*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],d=n[10],f=r+s+d;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(u-l)*t,this._y=(o-c)*t,this._z=(a-i)*t):r>s&&r>d?(t=2*Math.sqrt(1+r-s-d),this._w=(u-l)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>d?(t=2*Math.sqrt(1+s-r-d),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+d-r-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new H;return function(n,r){return void 0===t&&(t=new H),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(z.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-t;return this._w=l*o+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize()}var c=Math.sqrt(s),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*d+this._w*f,this._x=n*d+this._x*f,this._y=r*d+this._y*f,this._z=i*d+this._z*f,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(H.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Z;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new Z;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,d=-i*t-o*n-a*r;return this.x=l*s+d*-i+c*-a-u*-o,this.y=c*s+d*-o+u*-i-l*-a,this.z=u*s+d*-a+l*-o-c*-i,this},project:function(){var e=new j;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new j;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new H,t=new H;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new H;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new H;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(z.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(U.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,l){var c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new H;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],f=n[5],p=n[8],h=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=o*h+a*v+s*x,i[3]=o*m+a*y+s*w,i[6]=o*g+a*b+s*_,i[1]=l*h+c*v+u*x,i[4]=l*m+c*y+u*w,i[7]=l*g+c*b+u*_,i[2]=d*h+f*v+p*x,i[5]=d*m+f*y+p*w,i[8]=d*g+f*b+p*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],d=n[7],f=n[8],p=f*l-c*d,h=c*u-f*s,m=d*s-l*u,g=i*p+o*h+a*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return r[0]=p*y,r[1]=(a*d-f*o)*y,r[2]=(c*o-a*l)*y,r[3]=h*y,r[4]=(f*i-a*u)*y,r[5]=(a*s-c*i)*y,r[6]=m*y,r[7]=(o*u-d*i)*y,r[8]=(l*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var V={getDataURL:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{"undefined"!==typeof OffscreenCanvas?t=new OffscreenCanvas(e.width,e.height):((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height);var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},G=0;function W(e,t,n,r,i,o,a,s,l,c){Object.defineProperty(this,"id",{value:G++}),this.uuid=z.generateUUID(),this.name="",this.image=void 0!==e?e:W.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:W.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:h,this.wrapT=void 0!==r?r:h,this.magFilter=void 0!==i?i:b,this.minFilter=void 0!==o?o:x,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:A,this.type=void 0!==s?s:w,this.offset=new B(0,0),this.repeat=new B(1,1),this.center=new B(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new U,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:F,this.version=0,this.onUpdate=null}function $(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function q(e,t,n){this.width=e,this.height=t,this.scissor=new $(0,0,e,t),this.scissorTest=!1,this.viewport=new $(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=b),this.texture=new W(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Y(e,t,n){q.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function X(e,t,n,r,i,o,a,s,l,c,u,d){W.call(this,null,o,a,s,l,c,r,i,u,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:g,this.minFilter=void 0!==c?c:g,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function K(e,t){this.min=void 0!==e?e:new H(1/0,1/0,1/0),this.max=void 0!==t?t:new H(-1/0,-1/0,-1/0)}function J(e,t){this.center=void 0!==e?e:new H,this.radius=void 0!==t?t:0}function Q(e,t){this.normal=void 0!==e?e:new H(1,0,0),this.constant=void 0!==t?t:0}function ee(e,t,n,r,i,o){this.planes=[void 0!==e?e:new Q,void 0!==t?t:new Q,void 0!==n?n:new Q,void 0!==r?r:new Q,void 0!==i?i:new Q,void 0!==o?o:new Q]}W.DEFAULT_IMAGE=void 0,W.DEFAULT_MAPPING=300,W.prototype=Object.assign(Object.create(f.prototype),{constructor:W,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=z.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(V.getDataURL(r[o]))}else i=V.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case p:e.x=e.x-Math.floor(e.x);break;case h:e.x=e.x<0?0:1;break;case m:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case p:e.y=e.y-Math.floor(e.y);break;case h:e.y=e.y<0?0:1;break;case m:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(W.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign($.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],d=s[1],f=s[5],p=s[9],h=s[2],m=s[6],g=s[10];if(Math.abs(c-d)<o&&Math.abs(u-h)<o&&Math.abs(p-m)<o){if(Math.abs(c+d)<a&&Math.abs(u+h)<a&&Math.abs(p+m)<a&&Math.abs(l+f+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,y=(f+1)/2,b=(g+1)/2,x=(c+d)/4,w=(u+h)/4,_=(p+m)/4;return v>y&&v>b?v<o?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(v)),i=w/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=_/r):b<o?(n=.707106781,r=.707106781,i=0):(n=w/(i=Math.sqrt(b)),r=_/i),this.set(n,r,i,t),this}var S=Math.sqrt((m-p)*(m-p)+(u-h)*(u-h)+(d-c)*(d-c));return Math.abs(S)<.001&&(S=1),this.x=(m-p)/S,this.y=(u-h)/S,this.z=(d-c)/S,this.w=Math.acos((l+f+g-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new $,t=new $),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),q.prototype=Object.assign(Object.create(f.prototype),{constructor:q,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Y.prototype=Object.create(q.prototype),Y.prototype.constructor=Y,Y.prototype.isWebGLRenderTargetCube=!0,X.prototype=Object.create(W.prototype),X.prototype.constructor=X,X.prototype.isDataTexture=!0,Object.assign(K.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],d=e[s+2];c<t&&(t=c),u<n&&(n=u),d<r&&(r=d),c>i&&(i=c),u>o&&(o=u),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var c=e.getX(s),u=e.getY(s),d=e.getZ(s);c<t&&(t=c),u<n&&(n=u),d<r&&(r=d),c>i&&(i=c),u>o&&(o=u),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new H;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new H),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new H),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new H;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new H),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new H;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new H,t=new H,n=new H,r=new H,i=new H,o=new H,a=new H,s=new H,l=new H,c=new H;function u(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),c=e.dot(a),u=t.dot(a),d=n.dot(a);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var d=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!u(d)&&(!!u(d=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(r,i),u(d=[c.x,c.y,c.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new H),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new H;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new H;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new J),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){if(this.isEmpty())return this;var t=e.elements,n=t[0]*this.min.x,r=t[1]*this.min.x,i=t[2]*this.min.x,o=t[0]*this.max.x,a=t[1]*this.max.x,s=t[2]*this.max.x,l=t[4]*this.min.y,c=t[5]*this.min.y,u=t[6]*this.min.y,d=t[4]*this.max.y,f=t[5]*this.max.y,p=t[6]*this.max.y,h=t[8]*this.min.z,m=t[9]*this.min.z,g=t[10]*this.min.z,v=t[8]*this.max.z,y=t[9]*this.max.z,b=t[10]*this.max.z;return this.min.x=Math.min(n,o)+Math.min(l,d)+Math.min(h,v)+t[12],this.min.y=Math.min(r,a)+Math.min(c,f)+Math.min(m,y)+t[13],this.min.z=Math.min(i,s)+Math.min(u,p)+Math.min(g,b)+t[14],this.max.x=Math.max(n,o)+Math.max(l,d)+Math.max(h,v)+t[12],this.max.y=Math.max(r,a)+Math.max(c,f)+Math.max(m,y)+t[13],this.max.z=Math.max(i,s)+Math.max(u,p)+Math.max(g,b)+t[14],this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(J.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new K;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new H),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new K),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Q.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new H,t=new H;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new H),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new H;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new H);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new H),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new H,t=new U;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(ee.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],f=n[9],p=n[10],h=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,u-s,h-d,y-m).normalize(),t[1].setComponents(a+r,u+s,h+d,y+m).normalize(),t[2].setComponents(a+i,u+l,h+f,y+g).normalize(),t[3].setComponents(a-i,u-l,h-f,y-g).normalize(),t[4].setComponents(a-o,u-c,h-p,y-v).normalize(),t[5].setComponents(a+o,u+c,h+p,y+v).normalize(),this},intersectsObject:function(){var e=new J;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new J;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(){var e=new H;return function(t){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var te={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},ne={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}},re={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ie(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(ie.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=z.euclideanModulo(t,1),n=z.clamp(n,0,1),r=z.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,u=(c=n[1]).length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(c=re[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),l=(s+a)/2;if(s===a)t=0,n=0;else{var c=a-s;switch(n=l<=.5?c/(a+s):c/(2-a-s),a){case r:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-r)/c+2;break;case o:t=(r-i)/c+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var oe={common:{diffuse:{value:new ie(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new U},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new B(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ie(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ie(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new U}},sprite:{diffuse:{value:new ie(15658734)},opacity:{value:1},center:{value:new B(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new U}}},ae={basic:{uniforms:ne.merge([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.fog]),vertexShader:te.meshbasic_vert,fragmentShader:te.meshbasic_frag},lambert:{uniforms:ne.merge([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.fog,oe.lights,{emissive:{value:new ie(0)}}]),vertexShader:te.meshlambert_vert,fragmentShader:te.meshlambert_frag},phong:{uniforms:ne.merge([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.gradientmap,oe.fog,oe.lights,{emissive:{value:new ie(0)},specular:{value:new ie(1118481)},shininess:{value:30}}]),vertexShader:te.meshphong_vert,fragmentShader:te.meshphong_frag},standard:{uniforms:ne.merge([oe.common,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.roughnessmap,oe.metalnessmap,oe.fog,oe.lights,{emissive:{value:new ie(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:te.meshphysical_vert,fragmentShader:te.meshphysical_frag},points:{uniforms:ne.merge([oe.points,oe.fog]),vertexShader:te.points_vert,fragmentShader:te.points_frag},dashed:{uniforms:ne.merge([oe.common,oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:te.linedashed_vert,fragmentShader:te.linedashed_frag},depth:{uniforms:ne.merge([oe.common,oe.displacementmap]),vertexShader:te.depth_vert,fragmentShader:te.depth_frag},normal:{uniforms:ne.merge([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,{opacity:{value:1}}]),vertexShader:te.normal_vert,fragmentShader:te.normal_frag},sprite:{uniforms:ne.merge([oe.sprite,oe.fog]),vertexShader:te.sprite_vert,fragmentShader:te.sprite_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:te.cube_vert,fragmentShader:te.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:te.equirect_vert,fragmentShader:te.equirect_frag},distanceRGBA:{uniforms:ne.merge([oe.common,oe.displacementmap,{referencePosition:{value:new H},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:te.distanceRGBA_vert,fragmentShader:te.distanceRGBA_frag},shadow:{uniforms:ne.merge([oe.lights,oe.fog,{color:{value:new ie(0)},opacity:{value:1}}]),vertexShader:te.shadow_vert,fragmentShader:te.shadow_frag}};function se(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function le(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(!function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,e.STATIC_DRAW):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function ce(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||ce.DefaultOrder}function ue(){this.mask=1}ae.physical={uniforms:ne.merge([ae.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:te.meshphysical_vert,fragmentShader:te.meshphysical_frag},ce.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ce.DefaultOrder="XYZ",Object.defineProperties(ce.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(ce.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=z.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new j;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Z;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new H(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(ue.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var de=0;function fe(){Object.defineProperty(this,"id",{value:de++}),this.uuid=z.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fe.DefaultUp.clone();var e=new H,t=new ce,n=new Z,r=new H(1,1,1);t.onChange((function(){n.setFromEuler(t,!1)})),n.onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new j},normalMatrix:{value:new U}}),this.matrix=new j,this.matrixWorld=new j,this.matrixAutoUpdate=fe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ue,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function pe(){fe.call(this),this.type="Camera",this.matrixWorldInverse=new j,this.projectionMatrix=new j}function he(e,t,n,r,i,o){pe.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function ge(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new H,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new ie,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}fe.DefaultUp=new H(0,1,0),fe.DefaultMatrixAutoUpdate=!0,fe.prototype=Object.assign(Object.create(f.prototype),{constructor:fe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Z;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new Z;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new H(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new H(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new H(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new H;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new H(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new H(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new H(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new j;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new j,t=new H;return function(n,r,i){n.isVector3?t.copy(n):t.set(n,r,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){var t=arguments,n=this;if(arguments.length>1){for(var r=0;r<arguments.length;r++)n.add(t[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){var t=arguments,n=this;if(arguments.length>1){for(var r=0;r<arguments.length;r++)n.remove(t[r]);return this}var i=this.children.indexOf(e);return-1!==i&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new H),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new H,t=new H;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new Z),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new H,t=new Z;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new H),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new Z;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new H),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var c=a[s];i(e.shapes,c)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,l=this.material.length;s<l;s++)u.push(i(e.materials,this.material[s]));r.material=u}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var d=m(e.geometries),f=m(e.materials),p=m(e.textures),h=m(e.images);a=m(e.shapes);d.length>0&&(n.geometries=d),f.length>0&&(n.materials=f),p.length>0&&(n.textures=p),h.length>0&&(n.images=h),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),pe.prototype=Object.assign(Object.create(fe.prototype),{constructor:pe,isCamera:!0,copy:function(e,t){return fe.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Z;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new H),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){fe.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),he.prototype=Object.assign(Object.create(pe.prototype),{constructor:he,isOrthographicCamera:!0,copy:function(e,t){return pe.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;o=(i+=u*(this.view.offsetX/l))+u*(this.view.width/l),s=(a-=d*(this.view.offsetY/c))-d*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(ge.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var ve=0;function ye(){Object.defineProperty(this,"id",{value:ve+=2}),this.uuid=z.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function be(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function xe(e,t,n){be.call(this,new Int8Array(e),t,n)}function we(e,t,n){be.call(this,new Uint8Array(e),t,n)}function _e(e,t,n){be.call(this,new Uint8ClampedArray(e),t,n)}function Se(e,t,n){be.call(this,new Int16Array(e),t,n)}function Ce(e,t,n){be.call(this,new Uint16Array(e),t,n)}function ke(e,t,n){be.call(this,new Int32Array(e),t,n)}function Me(e,t,n){be.call(this,new Uint32Array(e),t,n)}function Te(e,t,n){be.call(this,new Float32Array(e),t,n)}function Ae(e,t,n){be.call(this,new Float64Array(e),t,n)}function Ee(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Pe(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}ye.prototype=Object.assign(Object.create(f.prototype),{constructor:ye,isGeometry:!0,applyMatrix:function(e){for(var t=(new U).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new j;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new j;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new j;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new j;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new j;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new fe;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=[],u=[],d=[],f=0,p=0;f<i.length;f+=3,p+=2)t.vertices.push(new H(i[f],i[f+1],i[f+2])),void 0!==o&&c.push(new H(o[f],o[f+1],o[f+2])),void 0!==a&&t.colors.push(new ie(a[f],a[f+1],a[f+2])),void 0!==s&&u.push(new B(s[p],s[p+1])),void 0!==l&&d.push(new B(l[p],l[p+1]));function h(e,n,r,i){var f=new ge(e,n,r,void 0!==o?[c[e].clone(),c[n].clone(),c[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(f),void 0!==s&&t.faceVertexUvs[0].push([u[e].clone(),u[n].clone(),u[r].clone()]),void 0!==l&&t.faceVertexUvs[1].push([d[e].clone(),d[n].clone(),d[r].clone()])}var m=e.groups;if(m.length>0)for(f=0;f<m.length;f++)for(var g=m[f],v=g.start,y=(p=v,v+g.count);p<y;p+=3)void 0!==n?h(n[p],n[p+1],n[p+2],g.materialIndex):h(p,p+1,p+2,g.materialIndex);else if(void 0!==n)for(f=0;f<n.length;f+=3)h(n[f],n[f+1],n[f+2]);else for(f=0;f<i.length/3;f+=3)h(f,f+1,f+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new H;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new j;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=this,t=new H,n=new H,r=0,i=this.faces.length;r<i;r++){var o=e.faces[r],a=e.vertices[o.a],s=e.vertices[o.b],l=e.vertices[o.c];t.subVectors(l,s),n.subVectors(a,s),t.cross(n),t.normalize(),o.normal.copy(t)}},computeVertexNormals:function(e){var t,n,r,i,o,a,s=this;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new H;if(e){var l,c,u,d=new H,f=new H;for(r=0,i=this.faces.length;r<i;r++)o=s.faces[r],l=s.vertices[o.a],c=s.vertices[o.b],u=s.vertices[o.c],d.subVectors(u,c),f.subVectors(l,c),d.cross(f),a[o.a].add(d),a[o.b].add(d),a[o.c].add(d)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=s.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var p=(o=s.faces[r]).vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i,o=this;for(n=0,r=this.faces.length;n<r;n++)for((i=o.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new ye;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!o.morphNormals[e]){o.morphNormals[e]={},o.morphNormals[e].faceNormals=[],o.morphNormals[e].vertexNormals=[];var s=o.morphNormals[e].faceNormals,l=o.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)c=new H,u={a:new H,b:new H,c:new H},s.push(c),l.push(u)}var c,u,d=o.morphNormals[e];for(a.vertices=o.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=o.faces[n],c=d.faceNormals[n],u=d.vertexNormals[n],c.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=o.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new K),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new J),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],d=this.colors,f=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new U).getNormalMatrix(t));for(var p=0,h=a.length;p<h;p++){var m=a[p].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(p=0,h=f.length;p<h;p++)d.push(f[p].clone());for(p=0,h=l.length;p<h;p++){var g,v,y,b=l[p],x=b.vertexNormals,w=b.vertexColors;(g=new ge(b.a+i,b.b+i,b.c+i)).normal.copy(b.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var _=0,S=x.length;_<S;_++)v=x[_].clone(),void 0!==r&&v.applyMatrix3(r).normalize(),g.vertexNormals.push(v);g.color.copy(b.color);for(_=0,S=w.length;_<S;_++)y=w[_],g.vertexColors.push(y.clone());g.materialIndex=b.materialIndex+n,s.push(g)}for(p=0,h=u.length;p<h;p++){var C=u[p],k=[];if(void 0!==C){for(_=0,S=C.length;_<S;_++)k.push(C[_].clone());c.push(k)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,l=this,c={},u=[],d=[],f=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=l.vertices[n],void 0===c[t=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f)]?(c[t]=n,u.push(l.vertices[n]),d[n]=u.length-1):d[n]=d[c[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){(i=l.faces[n]).a=d[i.a],i.b=d[i.b],i.c=d[i.c],o=[i.a,i.b,i.c];for(var h=0;h<3;h++)if(o[h]===o[(h+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var m=p[n];for(l.faces.splice(m,1),a=0,s=this.faceVertexUvs.length;a<s;a++)l.faceVertexUvs[a].splice(m,1)}var g=this.vertices.length-u.length;return this.vertices=u,g},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new H(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e=this,t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var n=this.parameters;for(var r in n)void 0!==n[r]&&(t[r]=n[r]);return t}for(var i=[],o=0;o<this.vertices.length;o++){var a=e.vertices[o];i.push(a.x,a.y,a.z)}var s=[],l=[],c={},u=[],d={},f=[],p={};for(o=0;o<this.faces.length;o++){var h=e.faces[o],m=void 0!==e.faceVertexUvs[0][o],g=h.normal.length()>0,v=h.vertexNormals.length>0,y=1!==h.color.r||1!==h.color.g||1!==h.color.b,b=h.vertexColors.length>0,x=0;if(x=C(x,0,0),x=C(x,1,!0),x=C(x,2,!1),x=C(x,3,m),x=C(x,4,g),x=C(x,5,v),x=C(x,6,y),x=C(x,7,b),s.push(x),s.push(h.a,h.b,h.c),s.push(h.materialIndex),m){var w=e.faceVertexUvs[0][o];s.push(T(w[0]),T(w[1]),T(w[2]))}if(g&&s.push(k(h.normal)),v){var _=h.vertexNormals;s.push(k(_[0]),k(_[1]),k(_[2]))}if(y&&s.push(M(h.color)),b){var S=h.vertexColors;s.push(M(S[0]),M(S[1]),M(S[2]))}}function C(e,t,n){return n?e|1<<t:e&~(1<<t)}function k(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]||(c[t]=l.length/3,l.push(e.x,e.y,e.z)),c[t]}function M(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==d[t]||(d[t]=u.length,u.push(e.getHex())),d[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=f.length/2,f.push(e.x,e.y)),p[t]}return t.data={},t.data.vertices=i,t.data.normals=l,u.length>0&&(t.data.colors=u),f.length>0&&(t.data.uvs=[f]),t.data.faces=s,t},clone:function(){return(new ye).copy(this)},copy:function(e){var t,n,r,i,o,a,s=this;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var l=e.vertices;for(t=0,n=l.length;t<n;t++)s.vertices.push(l[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)s.colors.push(c[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)s.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var d=e.faceVertexUvs[t];for(void 0===s.faceVertexUvs[t]&&(s.faceVertexUvs[t]=[]),r=0,i=d.length;r<i;r++){var f=d[r],p=[];for(o=0,a=f.length;o<a;o++){var h=f[o];p.push(h.clone())}s.faceVertexUvs[t].push(p)}}var m=e.morphTargets;for(t=0,n=m.length;t<n;t++){var g={};if(g.name=m[t].name,void 0!==m[t].vertices)for(g.vertices=[],r=0,i=m[t].vertices.length;r<i;r++)g.vertices.push(m[t].vertices[r].clone());if(void 0!==m[t].normals)for(g.normals=[],r=0,i=m[t].normals.length;r<i;r++)g.normals.push(m[t].normals[r].clone());s.morphTargets.push(g)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var y={};if(void 0!==v[t].vertexNormals)for(y.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var b=v[t].vertexNormals[r],x={};x.a=b.a.clone(),x.b=b.b.clone(),x.c=b.c.clone(),y.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(y.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)y.faceNormals.push(v[t].faceNormals[r].clone());s.morphNormals.push(y)}var w=e.skinWeights;for(t=0,n=w.length;t<n;t++)s.skinWeights.push(w[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)s.skinIndices.push(_[t].clone());var S=e.lineDistances;for(t=0,n=S.length;t<n;t++)s.lineDistances.push(S[t]);var C=e.boundingBox;null!==C&&(this.boundingBox=C.clone());var k=e.boundingSphere;return null!==k&&(this.boundingSphere=k.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(be.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(be.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ie),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new B),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new H),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new $),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),xe.prototype=Object.create(be.prototype),xe.prototype.constructor=xe,we.prototype=Object.create(be.prototype),we.prototype.constructor=we,_e.prototype=Object.create(be.prototype),_e.prototype.constructor=_e,Se.prototype=Object.create(be.prototype),Se.prototype.constructor=Se,Ce.prototype=Object.create(be.prototype),Ce.prototype.constructor=Ce,ke.prototype=Object.create(be.prototype),ke.prototype.constructor=ke,Me.prototype=Object.create(be.prototype),Me.prototype.constructor=Me,Te.prototype=Object.create(be.prototype),Te.prototype.constructor=Te,Ae.prototype=Object.create(be.prototype),Ae.prototype.constructor=Ae,Object.assign(Ee.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=this,r=e.faces,i=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,l=e.morphTargets,c=l.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]=[];this.morphTargets.position=t}var d,f=e.morphNormals,p=f.length;if(p>0){d=[];for(u=0;u<p;u++)d[u]=[];this.morphTargets.normal=d}var h=e.skinIndices,m=e.skinWeights,g=h.length===i.length,v=m.length===i.length;i.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<r.length;u++){var y=r[u];n.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)n.normals.push(b[0],b[1],b[2]);else{var x=y.normal;n.normals.push(x,x,x)}var w,_=y.vertexColors;if(3===_.length)n.colors.push(_[0],_[1],_[2]);else{var S=y.color;n.colors.push(S,S,S)}if(!0===a)void 0!==(w=o[0][u])?n.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),n.uvs.push(new B,new B,new B));if(!0===s)void 0!==(w=o[1][u])?n.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),n.uvs2.push(new B,new B,new B));for(var C=0;C<c;C++){var k=l[C].vertices;t[C].push(k[y.a],k[y.b],k[y.c])}for(C=0;C<p;C++){var M=f[C].vertexNormals[u];d[C].push(M.a,M.b,M.c)}g&&n.skinIndices.push(h[y.a],h[y.b],h[y.c]),v&&n.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Re=1;function Oe(){Object.defineProperty(this,"id",{value:Re+=2}),this.uuid=z.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Ie(e,t,n,r,i,o){ye.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Le(e,t,n,r,i,o)),this.mergeVertices()}function Le(e,t,n,r,i,o){Oe.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],l=[],c=[],u=[],d=0,f=0;function p(e,t,n,r,i,o,p,h,m,g,v){var y,b,x=o/m,w=p/g,_=o/2,S=p/2,C=h/2,k=m+1,M=g+1,T=0,A=0,E=new H;for(b=0;b<M;b++){var P=b*w-S;for(y=0;y<k;y++){var R=y*x-_;E[e]=R*r,E[t]=P*i,E[n]=C,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=h>0?1:-1,c.push(E.x,E.y,E.z),u.push(y/m),u.push(1-b/g),T+=1}}for(b=0;b<g;b++)for(y=0;y<m;y++){var O=d+y+k*b,I=d+y+k*(b+1),L=d+(y+1)+k*(b+1),D=d+(y+1)+k*b;s.push(O,I,D),s.push(I,L,D),A+=6}a.addGroup(f,A,v),f+=A,d+=T}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Te(l,3)),this.addAttribute("normal",new Te(c,3)),this.addAttribute("uv",new Te(u,2))}function De(e,t,n,r){ye.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Ne(e,t,n,r)),this.mergeVertices()}function Ne(e,t,n,r){Oe.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,c=Math.floor(r)||1,u=l+1,d=c+1,f=e/l,p=t/c,h=[],m=[],g=[],v=[];for(o=0;o<d;o++){var y=o*p-s;for(i=0;i<u;i++){var b=i*f-a;m.push(b,-y,0),g.push(0,0,1),v.push(i/l),v.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<l;i++){var x=i+u*o,w=i+u*(o+1),_=i+1+u*(o+1),S=i+1+u*o;h.push(x,w,S),h.push(w,_,S)}this.setIndex(h),this.addAttribute("position",new Te(m,3)),this.addAttribute("normal",new Te(g,3)),this.addAttribute("uv",new Te(v,2))}Oe.prototype=Object.assign(Object.create(f.prototype),{constructor:Oe,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Pe(e)>65535?Me:Ce)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new be(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new U).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new j;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new j;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new j;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new j;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new j;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new fe;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new H;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Te(3*t.vertices.length,3),r=new Te(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Te(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Te(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ee).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new be(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new be(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new be(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new be(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new be(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],c=0,u=l.length;c<u;c++){var d=l[c],f=new Te(3*d.length,3);s.push(f.copyVector3sArray(d))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new Te(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var h=new Te(4*e.skinWeights.length,4);this.addAttribute("skinWeight",h.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new K);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new K,t=new H;return function(){null===this.boundingSphere&&(this.boundingSphere=new J);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new be(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,l,c,u=t.normal.array,d=new H,f=new H,p=new H,h=new H,m=new H;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var v=0,y=n.length;v<y;++v){var b=n[v],x=b.start;for(o=x,a=x+b.count;o<a;o+=3)s=3*g[o+0],l=3*g[o+1],c=3*g[o+2],d.fromArray(r,s),f.fromArray(r,l),p.fromArray(r,c),h.subVectors(p,f),m.subVectors(d,f),h.cross(m),u[s]+=h.x,u[s+1]+=h.y,u[s+2]+=h.z,u[l]+=h.x,u[l+1]+=h.y,u[l+2]+=h.z,u[c]+=h.x,u[c+1]+=h.y,u[c+2]+=h.z}}else for(o=0,a=r.length;o<a;o+=9)d.fromArray(r,o),f.fromArray(r,o+3),p.fromArray(r,o+6),h.subVectors(p,f),m.subVectors(d,f),h.cross(m),u[o]=h.x,u[o+1]=h.y,u[o+2]=h.z,u[o+3]=h.x,u[o+4]=h.y,u[o+5]=h.z,u[o+6]=h.x,u[o+7]=h.y,u[o+8]=h.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,l=o.itemSize*t;s<a.length;s++,l++)i[l]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new H;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Oe,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),l=0,c=0,u=0,d=t.length;u<d;u++){l=t[u]*a;for(var f=0;f<a;f++)s[c++]=o[l++]}e.addAttribute(r,new be(s,a))}var p=this.groups;for(u=0,d=p.length;u<d;u++){var h=p[u];e.addGroup(h.start,h.count,h.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Oe).copy(this)},copy:function(e){var t,n,r,i=this;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.index;null!==o&&this.setIndex(o.clone());var a=e.attributes;for(t in a){var s=a[t];i.addAttribute(t,s.clone())}var l=e.morphAttributes;for(t in l){var c=[],u=l[t];for(n=0,r=u.length;n<r;n++)c.push(u[n].clone());i.morphAttributes[t]=c}var d=e.groups;for(n=0,r=d.length;n<r;n++){var f=d[n];i.addGroup(f.start,f.count,f.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var h=e.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ie.prototype=Object.create(ye.prototype),Ie.prototype.constructor=Ie,Le.prototype=Object.create(Oe.prototype),Le.prototype.constructor=Le,De.prototype=Object.create(ye.prototype),De.prototype.constructor=De,Ne.prototype=Object.create(Oe.prototype),Ne.prototype.constructor=Ne;var Fe=0;function ze(){Object.defineProperty(this,"id",{value:Fe++}),this.uuid=z.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Be(e){ze.call(this),this.type="MeshBasicMaterial",this.color=new ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function je(e){ze.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Ze(e,t){this.origin=void 0!==e?e:new H,this.direction=void 0!==t?t:new H}function He(e,t,n){this.a=void 0!==e?e:new H,this.b=void 0!==t?t:new H,this.c=void 0!==n?n:new H}function Ue(e,t){fe.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Oe,this.material=void 0!==t?t:new Be({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Ve(e,t,n,r){var i,o,a,s=new ie(0),l=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),c(s,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){c(s,l=e)},render:function(t,r,u,d){var f=r.background;null===f?c(s,l):f&&f.isColor&&(c(f,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&f.isCubeTexture?(void 0===a&&((a=new Ue(new Le(1,1,1),new je({uniforms:ae.cube.uniforms,vertexShader:ae.cube.vertexShader,fragmentShader:ae.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a)),a.material.uniforms.tCube.value=f,t.push(a,a.geometry,a.material,0,null)):f&&f.isTexture&&(void 0===i&&(i=new he(-1,1,1,-1,0,1),o=new Ue(new Ne(2,2),new Be({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o)),o.material.map=f,e.renderBufferDirect(i,null,o.geometry,o.material,o,null))}}}function Ge(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(o,a,s){var l;if(r.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}function We(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),h=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:h,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y}}function $e(){var e=this,t=null,n=0,r=!1,i=!1,o=new Q,a=new U,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,r,i){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=s.value,!0!==i||null===c){var u=r+4*l,d=n.matrixWorldInverse;a.getNormalMatrix(d),(null===c||c.length<u)&&(c=new Float32Array(u));for(var f=0,p=r;f!==l;++f,p+=4)o.copy(t[f]).applyMatrix4(d,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=l,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=c(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,l()},this.setState=function(e,o,a,u,d,f){if(!r||null===e||0===e.length||i&&!a)i?c(null):l();else{var p=i?0:n,h=4*p,m=d.clippingState||null;s.value=m,m=c(e,u,h,f);for(var g=0;g!==h;++g)m[g]=t[g];d.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function qe(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function Ye(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),delete r[a.id];var c=i[s.id];c&&(t.remove(c),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Oe).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],l=0,c=s.length;l<c;l++)t.update(s[l],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var o,a=[],s=n.index,l=n.attributes;if(null!==s)for(var c=0,u=(o=s.array).length;c<u;c+=3){var d=o[c+0],f=o[c+1],p=o[c+2];a.push(d,f,f,p,p,d)}else for(c=0,u=(o=l.position.array).length/3-1;c<u;c+=3){d=c+0,f=c+1,p=c+2;a.push(d,f,f,p,p,d)}return r=new(Pe(a)>65535?Me:Ce)(a,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}function Xe(e,t,n,r){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(s,l,c){var u;if(r.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,c,o,l*a,s.maxInstancedCount),n.update(c,i,s.maxInstancedCount)}}function Ke(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Je(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Qe(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,l=s.length,c=t[i.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];t[i.id]=c}var d=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(u=0;u<l;u++){0!==(p=c[u])[1]&&(d&&i.removeAttribute("morphTarget"+u),f&&i.removeAttribute("morphNormal"+u))}for(u=0;u<l;u++){(p=c[u])[0]=u,p[1]=s[u]}for(c.sort(Je),u=0;u<8;u++){var p;if(p=c[u]){var h=p[0],m=p[1];if(m){d&&i.addAttribute("morphTarget"+u,d[h]),f&&i.addAttribute("morphNormal"+u,f[h]),n[u]=m;continue}}n[u]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function et(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}function tt(e,t,n,r,i,o,a,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:301,W.call(this,e,t,n,r,i,o,a,s,l,c),this.flipY=!1}ze.prototype=Object.assign(Object.create(f.prototype),{constructor:ze,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){var t=this;if(void 0!==e)for(var n in e){var r=e[n];if(void 0!==r)if("shading"!==n){var i=t[n];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):t[n]="overdraw"===n?Number(r):r:console.warn("THREE."+t.type+": '"+n+"' is not a property of this material.")}else console.warn("THREE."+t.type+": .shading has been removed. Use the boolean .flatShading instead."),t.flatShading=1===r;else console.warn("THREE.Material: '"+n+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Be.prototype=Object.create(ze.prototype),Be.prototype.constructor=Be,Be.prototype.isMeshBasicMaterial=!0,Be.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},je.prototype=Object.create(ze.prototype),je.prototype.constructor=je,je.prototype.isShaderMaterial=!0,je.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ne.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},je.prototype.toJSON=function(e){var t=ze.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Ze.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new H),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new H;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new H),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new H;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new H,t=new H,n=new H;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,l,c,u,d=.5*r.distanceTo(i),f=-this.direction.dot(t),p=n.dot(this.direction),h=-n.dot(t),m=n.lengthSq(),g=Math.abs(1-f*f);if(g>0)if(l=f*p-h,u=d*g,(s=f*h-p)>=0)if(l>=-u)if(l<=u){var v=1/g;c=(s*=v)*(s+f*(l*=v)+2*p)+l*(f*s+l+2*h)+m}else l=d,c=-(s=Math.max(0,-(f*l+p)))*s+l*(l+2*h)+m;else l=-d,c=-(s=Math.max(0,-(f*l+p)))*s+l*(l+2*h)+m;else l<=-u?c=-(s=Math.max(0,-(-f*d+p)))*s+(l=s>0?-d:Math.min(Math.max(-d,-h),d))*(l+2*h)+m:l<=u?(s=0,c=(l=Math.min(Math.max(-d,-h),d))*(l+2*h)+m):c=-(s=Math.max(0,-(f*d+p)))*s+(l=s>0?d:Math.min(Math.max(-d,-h),d))*(l+2*h)+m;else l=f>0?-d:d,c=-(s=Math.max(0,-(f*l+p)))*s+l*(l+2*h)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(l).add(e),c}}(),intersectSphere:function(){var e=new H;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,l=r+a;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),u>=0?(a=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new H;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new H,t=new H,n=new H,r=new H;return function(i,o,a,s,l){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var c,u=this.direction.dot(r);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}e.subVectors(this.origin,i);var d=c*this.direction.dot(n.crossVectors(e,n));if(d<0)return null;var f=c*this.direction.dot(t.cross(e));if(f<0)return null;if(d+f>u)return null;var p=-c*e.dot(r);return p<0?null:this.at(p/u,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(He,{getNormal:function(){var e=new H;return function(t,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new H),i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new H,t=new H,n=new H;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var l=e.dot(e),c=e.dot(t),u=e.dot(n),d=t.dot(t),f=t.dot(n),p=l*d-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new H),0===p)return s.set(-2,-1,-1);var h=1/p,m=(d*u-c*f)*h,g=(l*f-c*u)*h;return s.set(1-m-g,g,m)}}(),containsPoint:function(){var e=new H;return function(t,n,r,i){return He.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(He.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new H,t=new H;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new H),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return He.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new H),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return He.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return He.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new H,t=new H,n=new H,r=new H,i=new H,o=new H;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new H);var l,c,u=this.a,d=this.b,f=this.c;e.subVectors(d,u),t.subVectors(f,u),r.subVectors(a,u);var p=e.dot(r),h=t.dot(r);if(p<=0&&h<=0)return s.copy(u);i.subVectors(a,d);var m=e.dot(i),g=t.dot(i);if(m>=0&&g<=m)return s.copy(d);var v=p*g-m*h;if(v<=0&&p>=0&&m<=0)return l=p/(p-m),s.copy(u).addScaledVector(e,l);o.subVectors(a,f);var y=e.dot(o),b=t.dot(o);if(b>=0&&y<=b)return s.copy(f);var x=y*h-p*b;if(x<=0&&h>=0&&b<=0)return c=h/(h-b),s.copy(u).addScaledVector(t,c);var w=m*b-y*g;if(w<=0&&g-m>=0&&y-b>=0)return n.subVectors(f,d),c=(g-m)/(g-m+(y-b)),s.copy(d).addScaledVector(n,c);var _=1/(w+x+v);return l=x*_,c=v*_,s.copy(u).addScaledVector(e,l).addScaledVector(t,c)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Ue.prototype=Object.assign(Object.create(fe.prototype),{constructor:Ue,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return fe.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this,i=this.geometry;if(i.isBufferGeometry){var o=i.morphAttributes,a=Object.keys(o);if(a.length>0){var s=o[a[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),r.morphTargetInfluences.push(0),r.morphTargetDictionary[n]=e}}else{var l=i.morphTargets;if(void 0!==l&&l.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=l.length;e<t;e++)n=l[e].name||String(e),r.morphTargetInfluences.push(0),r.morphTargetDictionary[n]=e}},raycast:function(){var e=new j,t=new Ze,n=new J,r=new H,i=new H,o=new H,a=new H,s=new H,l=new H,c=new B,u=new B,d=new B,f=new H,p=new H,h=new H;function m(e,t,n,r,i,o,a){return He.getBarycoord(e,t,n,r,f),i.multiplyScalar(f.x),o.multiplyScalar(f.y),a.multiplyScalar(f.z),i.add(o).add(a),i.clone()}function g(e,t,n,r,i,o,a,s){if(null===(1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s)))return null;h.copy(s),h.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(h);return l<n.near||l>n.far?null:{distance:l,point:h.clone(),object:e}}function v(e,t,n,a,s,l,f,h,v){r.fromBufferAttribute(s,f),i.fromBufferAttribute(s,h),o.fromBufferAttribute(s,v);var y=g(e,t,n,a,r,i,o,p);if(y){l&&(c.fromBufferAttribute(l,f),u.fromBufferAttribute(l,h),d.fromBufferAttribute(l,v),y.uv=m(p,r,i,o,c,u,d));var b=new ge(f,h,v);He.getNormal(r,i,o,b.normal),y.face=b}return y}return function(f,h){var y,b=this,x=this.geometry,w=this.material,_=this.matrixWorld;if(void 0!==w&&(null===x.boundingSphere&&x.computeBoundingSphere(),n.copy(x.boundingSphere),n.applyMatrix4(_),!1!==f.ray.intersectsSphere(n)&&(e.getInverse(_),t.copy(f.ray).applyMatrix4(e),null===x.boundingBox||!1!==t.intersectsBox(x.boundingBox))))if(x.isBufferGeometry){var S,C,k,M,T,A,E,P,R,O=x.index,I=x.attributes.position,L=x.attributes.uv,D=x.groups,N=x.drawRange;if(null!==O)if(Array.isArray(w))for(M=0,A=D.length;M<A;M++)for(R=w[(P=D[M]).materialIndex],T=Math.max(P.start,N.start),E=Math.min(P.start+P.count,N.start+N.count);T<E;T+=3)S=O.getX(T),C=O.getX(T+1),k=O.getX(T+2),(y=v(b,R,f,t,I,L,S,C,k))&&(y.faceIndex=Math.floor(T/3),h.push(y));else for(M=Math.max(0,N.start),A=Math.min(O.count,N.start+N.count);M<A;M+=3)S=O.getX(M),C=O.getX(M+1),k=O.getX(M+2),(y=v(b,w,f,t,I,L,S,C,k))&&(y.faceIndex=Math.floor(M/3),h.push(y));else if(void 0!==I)if(Array.isArray(w))for(M=0,A=D.length;M<A;M++)for(R=w[(P=D[M]).materialIndex],T=Math.max(P.start,N.start),E=Math.min(P.start+P.count,N.start+N.count);T<E;T+=3)(y=v(b,R,f,t,I,L,S=T,C=T+1,k=T+2))&&(y.faceIndex=Math.floor(T/3),h.push(y));else for(M=Math.max(0,N.start),A=Math.min(I.count,N.start+N.count);M<A;M+=3)(y=v(b,w,f,t,I,L,S=M,C=M+1,k=M+2))&&(y.faceIndex=Math.floor(M/3),h.push(y))}else if(x.isGeometry){var F,z,B,j,Z=Array.isArray(w),H=x.vertices,U=x.faces,V=x.faceVertexUvs[0];V.length>0&&(j=V);for(var G=0,W=U.length;G<W;G++){var $=U[G],q=Z?w[$.materialIndex]:w;if(void 0!==q){if(F=H[$.a],z=H[$.b],B=H[$.c],!0===q.morphTargets){var Y=x.morphTargets,X=b.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var K=0,J=Y.length;K<J;K++){var Q=X[K];if(0!==Q){var ee=Y[K].vertices;r.addScaledVector(a.subVectors(ee[$.a],F),Q),i.addScaledVector(s.subVectors(ee[$.b],z),Q),o.addScaledVector(l.subVectors(ee[$.c],B),Q)}}r.add(F),i.add(z),o.add(B),F=r,z=i,B=o}if(y=g(b,q,f,t,F,z,B,p)){if(j&&j[G]){var te=j[G];c.copy(te[0]),u.copy(te[1]),d.copy(te[2]),y.uv=m(p,F,z,B,c,u,d)}y.face=$,y.faceIndex=G,h.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),tt.prototype=Object.create(W.prototype),tt.prototype.constructor=tt,tt.prototype.isCubeTexture=!0,Object.defineProperty(tt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var nt=new W,rt=new tt;function it(){this.seq=[],this.map={}}var ot=[],at=[],st=new Float32Array(16),lt=new Float32Array(9),ct=new Float32Array(4);function ut(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=ot[i];if(void 0===o&&(o=new Float32Array(i),ot[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function dt(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ft(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function pt(e,t){var n=at[t];void 0===n&&(n=new Int32Array(t),at[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function ht(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function mt(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function gt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(dt(n,t))return;e.uniform2fv(this.addr,t),ft(n,t)}}function vt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(dt(n,t))return;e.uniform3fv(this.addr,t),ft(n,t)}}function yt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(dt(n,t))return;e.uniform4fv(this.addr,t),ft(n,t)}}function bt(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(dt(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ft(n,t)}else{if(dt(n,r))return;ct.set(r),e.uniformMatrix2fv(this.addr,!1,ct),ft(n,r)}}function xt(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(dt(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ft(n,t)}else{if(dt(n,r))return;lt.set(r),e.uniformMatrix3fv(this.addr,!1,lt),ft(n,r)}}function wt(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(dt(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ft(n,t)}else{if(dt(n,r))return;st.set(r),e.uniformMatrix4fv(this.addr,!1,st),ft(n,r)}}function _t(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||nt,i)}function St(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||rt,i)}function Ct(e,t){var n=this.cache;dt(n,t)||(e.uniform2iv(this.addr,t),ft(n,t))}function kt(e,t){var n=this.cache;dt(n,t)||(e.uniform3iv(this.addr,t),ft(n,t))}function Mt(e,t){var n=this.cache;dt(n,t)||(e.uniform4iv(this.addr,t),ft(n,t))}function Tt(e,t){var n=this.cache;dt(n,t)||(e.uniform1fv(this.addr,t),ft(n,t))}function At(e,t){var n=this.cache;dt(n,t)||(e.uniform1iv(this.addr,t),ft(n,t))}function Et(e,t){var n=this.cache,r=ut(t,this.size,2);dt(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function Pt(e,t){var n=this.cache,r=ut(t,this.size,3);dt(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function Rt(e,t){var n=this.cache,r=ut(t,this.size,4);dt(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function Ot(e,t){var n=this.cache,r=ut(t,this.size,4);dt(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function It(e,t){var n=this.cache,r=ut(t,this.size,9);dt(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function Lt(e,t){var n=this.cache,r=ut(t,this.size,16);dt(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function Dt(e,t,n){var r=this.cache,i=t.length,o=pt(n,i);!1===dt(r,o)&&(e.uniform1iv(this.addr,o),ft(r,o));for(var a=0;a!==i;++a)n.setTexture2D(t[a]||nt,o[a])}function Nt(e,t,n){var r=this.cache,i=t.length,o=pt(n,i);!1===dt(r,o)&&(e.uniform1iv(this.addr,o),ft(r,o));for(var a=0;a!==i;++a)n.setTextureCube(t[a]||rt,o[a])}function Ft(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ht;case 35664:return gt;case 35665:return vt;case 35666:return yt;case 35674:return bt;case 35675:return xt;case 35676:return wt;case 35678:case 36198:return _t;case 35680:return St;case 5124:case 35670:return mt;case 35667:case 35671:return Ct;case 35668:case 35672:return kt;case 35669:case 35673:return Mt}}(t.type)}function zt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Tt;case 35664:return Et;case 35665:return Pt;case 35666:return Rt;case 35674:return Ot;case 35675:return It;case 35676:return Lt;case 35678:return Dt;case 35680:return Nt;case 5124:case 35670:return At;case 35667:case 35671:return Ct;case 35668:case 35672:return kt;case 35669:case 35673:return Mt}}(t.type)}function Bt(e){this.id=e,it.call(this)}zt.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ft(t,e)},Bt.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var jt=/([\w\d_]+)(\])?(\[|\.)?/g;function Zt(e,t){e.seq.push(t),e.map[t.id]=t}function Ht(e,t,n){var r=e.name,i=r.length;for(jt.lastIndex=0;;){var o=jt.exec(r),a=jt.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){Zt(n,void 0===c?new Ft(s,e,t):new zt(s,e,t));break}var u=n.map[s];void 0===u&&Zt(n,u=new Bt(s)),n=u}}function Ut(e,t,n){it.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);Ht(o,e.getUniformLocation(t,o.name),this)}}function Vt(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}Ut.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},Ut.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Ut.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},Ut.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Gt=0;function Wt(e){switch(e){case F:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function $t(e,t){var n=Wt(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function qt(e,t){var n=Wt(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Yt(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Xt(e){return""!==e}function Kt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Jt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Qt(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var n=te[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Qt(n)}))}function en(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}))}function tn(e,t,n,r,i,o,a){var s=e.context,l=r.defines,c=i.vertexShader,u=i.fragmentShader,d="SHADOWMAP_TYPE_BASIC";1===o.shadowMapType?d="SHADOWMAP_TYPE_PCF":2===o.shadowMapType&&(d="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",h="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case 301:case 302:f="ENVMAP_TYPE_CUBE";break;case 306:case 307:f="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:f="ENVMAP_TYPE_EQUIREC";break;case 305:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case 302:case 304:p="ENVMAP_MODE_REFRACTION"}switch(r.combine){case 0:h="ENVMAP_BLENDING_MULTIPLY";break;case 1:h="ENVMAP_BLENDING_MIX";break;case 2:h="ENVMAP_BLENDING_ADD"}}var m,g,v=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xt).join("\n")}(r.extensions,o,t),b=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(l),x=s.createProgram();if(r.isRawShaderMaterial?((m=[b].filter(Xt).join("\n")).length>0&&(m+="\n"),(g=[y,b].filter(Xt).join("\n")).length>0&&(g+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Xt).join("\n"),g=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+p:"",o.envMap?"#define "+h:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?te.tonemapping_pars_fragment:"",0!==o.toneMapping?Yt("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?te.encodings_pars_fragment:"",o.mapEncoding?$t("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?$t("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?$t("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?qt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Xt).join("\n")),c=Jt(c=Kt(c=Qt(c),o),o),u=Jt(u=Kt(u=Qt(u),o),o),c=en(c),u=en(u),a.isWebGL2&&!r.isRawShaderMaterial){var w=!1,_=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==c.match(_)&&null!==u.match(_)&&(w=!0,c=c.replace(_,""),u=u.replace(_,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var S=m+c,C=g+u,k=Vt(s,s.VERTEX_SHADER,S),M=Vt(s,s.FRAGMENT_SHADER,C);s.attachShader(x,k),s.attachShader(x,M),void 0!==r.index0AttributeName?s.bindAttribLocation(x,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);var T,A,E=s.getProgramInfoLog(x).trim(),P=s.getShaderInfoLog(k).trim(),R=s.getShaderInfoLog(M).trim(),O=!0,I=!0;return!1===s.getProgramParameter(x,s.LINK_STATUS)?(O=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(x,s.VALIDATE_STATUS),"gl.getProgramInfoLog",E,P,R)):""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==P&&""!==R||(I=!1),I&&(this.diagnostics={runnable:O,material:r,programLog:E,vertexShader:{log:P,prefix:m},fragmentShader:{log:R,prefix:g}}),s.deleteShader(k),s.deleteShader(M),this.getUniforms=function(){return void 0===T&&(T=new Ut(s,x,e)),T},this.getAttributes=function(){return void 0===A&&(A=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(s,x)),A},this.destroy=function(){s.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=Gt++,this.code=n,this.usedTimes=1,this.program=x,this.vertexShader=k,this.fragmentShader=M,this}function nn(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=F,n===F&&t&&(n=3007),n}this.getParameters=function(t,r,o,s,l,c,u){var d=i[t.type],f=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(u):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var h=e.getRenderTarget();return{shaderID:d,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:a(h?h.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(i,o,a,s){for(var l,c=0,u=r.length;c<u;c++){var d=r[c];if(d.code===s){++(l=d).usedTimes;break}}return void 0===l&&(l=new tn(e,t,s,i,o,a,n),r.push(l)),l},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function rn(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function on(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function an(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function sn(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,l){var c=e[t];void 0===c?(c={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:l},e[t]=c):(c.id=i.id,c.object=i,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=i.renderOrder,c.z=s,c.group=l),(!0===a.transparent?r:n).push(c),t++},sort:function(){n.length>1&&n.sort(on),r.length>1&&r.sort(an)}}}function ln(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new sn,e[r]=i),i},dispose:function(){e={}}}}function cn(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new H,color:new ie,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new B};break;case"SpotLight":n={position:new H,direction:new H,color:new ie,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new B};break;case"PointLight":n={position:new H,color:new ie,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new B,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new H,skyColor:new ie,groundColor:new ie};break;case"RectAreaLight":n={color:new ie,position:new H,halfWidth:new H,halfHeight:new H}}return e[t.id]=n,n}}}var un,dn=0;function fn(){var e=new cn,t={id:dn++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new H,r=new j,i=new j;return{setup:function(o,a,s){for(var l=0,c=0,u=0,d=0,f=0,p=0,h=0,m=0,g=s.matrixWorldInverse,v=0,y=o.length;v<y;v++){var b=o[v],x=b.color,w=b.intensity,_=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)l+=x.r*w,c+=x.g*w,u+=x.b*w;else if(b.isDirectionalLight){if((k=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),k.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),k.direction.sub(n),k.direction.transformDirection(g),k.shadow=b.castShadow,b.castShadow){var C=b.shadow;k.shadowBias=C.bias,k.shadowRadius=C.radius,k.shadowMapSize=C.mapSize}t.directionalShadowMap[d]=S,t.directionalShadowMatrix[d]=b.shadow.matrix,t.directional[d]=k,d++}else if(b.isSpotLight){if((k=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(g),k.color.copy(x).multiplyScalar(w),k.distance=_,k.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),k.direction.sub(n),k.direction.transformDirection(g),k.coneCos=Math.cos(b.angle),k.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),k.decay=0===b.distance?0:b.decay,k.shadow=b.castShadow,b.castShadow){C=b.shadow;k.shadowBias=C.bias,k.shadowRadius=C.radius,k.shadowMapSize=C.mapSize}t.spotShadowMap[p]=S,t.spotShadowMatrix[p]=b.shadow.matrix,t.spot[p]=k,p++}else if(b.isRectAreaLight){(k=e.get(b)).color.copy(x).multiplyScalar(w),k.position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(g),i.identity(),r.copy(b.matrixWorld),r.premultiply(g),i.extractRotation(r),k.halfWidth.set(.5*b.width,0,0),k.halfHeight.set(0,.5*b.height,0),k.halfWidth.applyMatrix4(i),k.halfHeight.applyMatrix4(i),t.rectArea[h]=k,h++}else if(b.isPointLight){if((k=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(g),k.color.copy(b.color).multiplyScalar(b.intensity),k.distance=b.distance,k.decay=0===b.distance?0:b.decay,k.shadow=b.castShadow,b.castShadow){C=b.shadow;k.shadowBias=C.bias,k.shadowRadius=C.radius,k.shadowMapSize=C.mapSize,k.shadowCameraNear=C.camera.near,k.shadowCameraFar=C.camera.far}t.pointShadowMap[f]=S,t.pointShadowMatrix[f]=b.shadow.matrix,t.point[f]=k,f++}else if(b.isHemisphereLight){var k;(k=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),k.direction.transformDirection(g),k.direction.normalize(),k.skyColor.copy(b.color).multiplyScalar(w),k.groundColor.copy(b.groundColor).multiplyScalar(w),t.hemi[m]=k,m++}}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=u,t.directional.length=d,t.spot.length=p,t.rectArea.length=h,t.point.length=f,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=d,t.hash.pointLength=f,t.hash.spotLength=p,t.hash.rectAreaLength=h,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}}function pn(){var e=new fn,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function hn(){var e={};return{get:function(t,n){var r;return void 0===e[t.id]?(r=new pn,e[t.id]={},e[t.id][n.id]=r):void 0===e[t.id][n.id]?(r=new pn,e[t.id][n.id]=r):r=e[t.id][n.id],r},dispose:function(){e={}}}}function mn(e){ze.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function gn(e){ze.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new H,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function vn(e,t,n){for(var r=new ee,i=new j,o=new B,a=new B(n,n),s=new H,l=new H,c=new Array(4),u=new Array(4),d={},f={0:1,1:0,2:2},p=[new H(1,0,0),new H(-1,0,0),new H(0,0,1),new H(0,0,-1),new H(0,1,0),new H(0,-1,0)],h=[new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,0,1),new H(0,0,-1)],m=[new $,new $,new $,new $,new $,new $],v=0;4!==v;++v){var y=0!==(1&v),b=0!==(2&v),x=new mn({depthPacking:3201,morphTargets:y,skinning:b});c[v]=x;var w=new gn({morphTargets:y,skinning:b});u[v]=w}var _=this;function S(t,n,r,i,o,a){var s=t.geometry,l=null,p=c,h=t.customDepthMaterial;if(r&&(p=u,h=t.customDistanceMaterial),h)l=h;else{var m=!1;n.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var g=0;m&&(g|=1),t.isSkinnedMesh&&n.skinning&&(g|=2),l=p[g]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var v=l.uuid,y=n.uuid,b=d[v];void 0===b&&(b={},d[v]=b);var x=b[y];void 0===x&&(x=l.clone(),b[y]=x),l=x}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:f[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,r&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(i),l.nearDistance=o,l.farDistance=a),l}function C(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),c=n.material;if(Array.isArray(c))for(var u=s.groups,d=0,f=u.length;d<f;d++){var p=u[d],h=c[p.materialIndex];if(h&&h.visible){var m=S(n,h,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,p)}}else if(c.visible){m=S(n,c,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,null)}}for(var g=n.children,v=0,y=g.length;v<y;v++)C(g[v],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,c){if(!1!==_.enabled&&(!1!==_.autoUpdate||!1!==_.needsUpdate)&&0!==t.length){var u,d=e.context,f=e.state;f.disable(d.BLEND),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var v=0,y=t.length;v<y;v++){var b=t[v],x=b.shadow,w=b&&b.isPointLight;if(void 0!==x){var S=x.camera;if(o.copy(x.mapSize),o.min(a),w){var k=o.x,M=o.y;m[0].set(2*k,M,k,M),m[1].set(0,M,k,M),m[2].set(3*k,M,k,M),m[3].set(k,M,k,M),m[4].set(3*k,0,k,M),m[5].set(k,0,k,M),o.x*=4,o.y*=2}if(null===x.map){var T={minFilter:g,magFilter:g,format:A};x.map=new q(o.x,o.y,T),x.map.texture.name=b.name+".shadowMap",S.updateProjectionMatrix()}x.isSpotLightShadow&&x.update(b);var E=x.map,P=x.matrix;l.setFromMatrixPosition(b.matrixWorld),S.position.copy(l),w?(u=6,P.makeTranslation(-l.x,-l.y,-l.z)):(u=1,s.setFromMatrixPosition(b.target.matrixWorld),S.lookAt(s),S.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(S.projectionMatrix),P.multiply(S.matrixWorldInverse)),e.setRenderTarget(E),e.clear();for(var R=0;R<u;R++){if(w){s.copy(S.position),s.add(p[R]),S.up.copy(h[R]),S.lookAt(s),S.updateMatrixWorld();var O=m[R];f.viewport(O)}i.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),r.setFromMatrix(i),C(n,c,S,w)}}else console.warn("THREE.WebGLShadowMap:",b,"has no shadow.")}_.needsUpdate=!1}}}function yn(e,t,n,r){var i=new function(){var t=!1,n=new $,r=null,i=new $(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?z(e.DEPTH_TEST):B(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){t?z(e.STENCIL_TEST):B(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},s=e.getParameter(e.MAX_VERTEX_ATTRIBS),l=new Uint8Array(s),c=new Uint8Array(s),u=new Uint8Array(s),d={},f=null,p=null,h=null,m=null,g=null,v=null,y=null,b=null,x=null,w=!1,_=null,S=null,C=null,k=null,M=null,T=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),A=!1,E=0,P=e.getParameter(e.VERSION);-1!==P.indexOf("WebGL")?(E=parseFloat(/^WebGL\ ([0-9])/.exec(P)[1]),A=E>=1):-1!==P.indexOf("OpenGL ES")&&(E=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(P)[1]),A=E>=2);var R=null,O={},I=new $,L=new $;function D(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var N={};function F(n,i){(l[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),u[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),u[n]=i)}function z(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function B(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}function j(t,r,i,o,a,s,l,c){if(0!==t?z(e.BLEND):B(e.BLEND),5!==t){if(t!==h||c!==w)switch(t){case 2:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case 3:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case 4:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}m=null,g=null,v=null,y=null,b=null,x=null}else a=a||r,s=s||i,l=l||o,r===m&&a===y||(e.blendEquationSeparate(n.convert(r),n.convert(a)),m=r,y=a),i===g&&o===v&&s===b&&l===x||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(l)),g=i,v=o,b=s,x=l);h=t,w=c}function Z(t){_!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),_=t)}function H(t){0!==t?(z(e.CULL_FACE),t!==S&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):B(e.CULL_FACE),S=t}function U(t,n,r){t?(z(e.POLYGON_OFFSET_FILL),k===n&&M===r||(e.polygonOffset(n,r),k=n,M=r)):B(e.POLYGON_OFFSET_FILL)}function V(t){void 0===t&&(t=e.TEXTURE0+T-1),R!==t&&(e.activeTexture(t),R=t)}return N[e.TEXTURE_2D]=D(e.TEXTURE_2D,e.TEXTURE_2D,1),N[e.TEXTURE_CUBE_MAP]=D(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),z(e.DEPTH_TEST),o.setFunc(3),Z(!1),H(1),z(e.CULL_FACE),z(e.BLEND),j(1),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){F(e,0)},enableAttributeAndDivisor:F,disableUnusedAttributes:function(){for(var t=0,n=c.length;t!==n;++t)c[t]!==l[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:z,disable:B,getCompressedTextureFormats:function(){if(null===f&&(f=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)f.push(n[r]);return f},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:j,setMaterial:function(t,n){2===t.side?B(e.CULL_FACE):z(e.CULL_FACE);var r=1===t.side;n&&(r=!r),Z(r),1===t.blending&&!1===t.transparent?j(0):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite),U(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:Z,setCullFace:H,setLineWidth:function(t){t!==C&&(A&&e.lineWidth(t),C=t)},setPolygonOffset:U,setScissorTest:function(t){t?z(e.SCISSOR_TEST):B(e.SCISSOR_TEST)},activeTexture:V,bindTexture:function(t,n){null===R&&V();var r=O[R];void 0===r&&(r={type:void 0,texture:void 0},O[R]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||N[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);d={},f=null,R=null,O={},p=null,h=null,_=null,S=null,i.reset(),o.reset(),a.reset()}}}function bn(e,t,n,r,i,o,a){var s,l={};function c(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height),r}return e}function u(e){return z.isPowerOfTwo(e.width)&&z.isPowerOfTwo(e.height)}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==g&&e.minFilter!==b}function f(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function p(t,n){if(!i.isWebGL2)return t;if(t===e.RGB){if(n===e.FLOAT)return e.RGB32F;if(n===e.HALF_FLOAT)return e.RGB16F;if(n===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(n===e.FLOAT)return e.RGBA32F;if(n===e.HALF_FLOAT)return e.RGBA16F;if(n===e.UNSIGNED_BYTE)return e.RGBA8}return t}function m(t){return t===g||t===v||t===y?e.NEAREST:e.LINEAR}function x(t){var n=t.target;n.removeEventListener("dispose",x),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete l[n.id],a.memory.textures--}function w(t){var n=t.target;n.removeEventListener("dispose",w),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}(n),a.memory.textures--}function R(t,m){var v=r.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;l[t]!==n&&(l[t]=n,e.update())}(t),t.version>0&&v.__version!==t.version){var y=t.image;if(void 0===y)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==y.complete)return void function(t,r,l){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",x),t.__webglTexture=e.createTexture(),a.memory.textures++);n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var m=c(r.image,i.maxTextureSize);(function(e){return!i.isWebGL2&&(e.wrapS!==h||e.wrapT!==h||e.minFilter!==g&&e.minFilter!==b)})(r)&&!1===u(m)&&(m=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=z.floorPowerOfTwo(e.width),s.height=z.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(m));var v=u(m),y=o.convert(r.format),w=o.convert(r.type),k=p(y,w);O(e.TEXTURE_2D,r,v);var R,I=r.mipmaps;if(r.isDepthTexture){if(k=e.DEPTH_COMPONENT,r.type===C){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");k=e.DEPTH_COMPONENT32F}else i.isWebGL2&&(k=e.DEPTH_COMPONENT16);r.format===E&&k===e.DEPTH_COMPONENT&&r.type!==_&&r.type!==S&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=_,w=o.convert(r.type)),r.format===P&&(k=e.DEPTH_STENCIL,r.type!==M&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=M,w=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,k,m.width,m.height,0,y,w,null)}else if(r.isDataTexture)if(I.length>0&&v){for(var L=0,D=I.length;L<D;L++)R=I[L],n.texImage2D(e.TEXTURE_2D,L,k,R.width,R.height,0,y,w,R.data);r.generateMipmaps=!1,t.__maxMipLevel=I.length-1}else n.texImage2D(e.TEXTURE_2D,0,k,m.width,m.height,0,y,w,m.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(L=0,D=I.length;L<D;L++)R=I[L],r.format!==A&&r.format!==T?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(e.TEXTURE_2D,L,k,R.width,R.height,0,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,L,k,R.width,R.height,0,y,w,R.data);t.__maxMipLevel=I.length-1}else if(I.length>0&&v){for(L=0,D=I.length;L<D;L++)R=I[L],n.texImage2D(e.TEXTURE_2D,L,k,y,w,R);r.generateMipmaps=!1,t.__maxMipLevel=I.length-1}else n.texImage2D(e.TEXTURE_2D,0,k,y,w,m),t.__maxMipLevel=0;d(r,v)&&f(e.TEXTURE_2D,r,m.width,m.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(v,t,m);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(e.TEXTURE0+m),n.bindTexture(e.TEXTURE_2D,v.__webglTexture)}function O(n,a,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===h&&a.wrapT===h||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,m(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,m(a.minFilter)),a.minFilter!==g&&a.minFilter!==b&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===C&&null===t.get("OES_texture_float_linear"))return;if(a.type===k&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function I(t,i,a,s){var l=o.convert(i.texture.format),c=o.convert(i.texture.type),u=p(l,c);n.texImage2D(s,0,u,i.width,i.height,0,l,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function L(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function D(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),R(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===E)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==P)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),L(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),L(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=R,this.setTextureCube=function(t,s){var l=r.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",x),l.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var h=t&&t.isCompressedTexture,m=t.image[0]&&t.image[0].isDataTexture,g=[],v=0;v<6;v++)g[v]=h||m?m?t.image[v].image:t.image[v]:c(t.image[v],i.maxCubemapSize);var y=g[0],b=u(y),w=o.convert(t.format),_=o.convert(t.type),S=p(w,_);O(e.TEXTURE_CUBE_MAP,t,b);for(v=0;v<6;v++)if(h)for(var C,k=g[v].mipmaps,M=0,E=k.length;M<E;M++)C=k[M],t.format!==A&&t.format!==T?n.getCompressedTextureFormats().indexOf(w)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,S,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,S,C.width,C.height,0,w,_,C.data);else m?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,S,g[v].width,g[v].height,0,w,_,g[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,S,w,_,g[v]);l.__maxMipLevel=h?k.length-1:0,d(t,b)&&f(e.TEXTURE_CUBE_MAP,t,y.width,y.height),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",w),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,l=u(t);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),O(e.TEXTURE_CUBE_MAP,t.texture,l);for(c=0;c<6;c++)I(i.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);d(t.texture,l)&&f(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),O(e.TEXTURE_2D,t.texture,l),I(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),d(t.texture,l)&&f(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&D(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(d(i,u(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),f(o,i,t.width,t.height),n.bindTexture(o,null)}}}function xn(e,t,n){return{convert:function(r){var i;if(r===p)return e.REPEAT;if(r===h)return e.CLAMP_TO_EDGE;if(r===m)return e.MIRRORED_REPEAT;if(r===g)return e.NEAREST;if(r===v)return e.NEAREST_MIPMAP_NEAREST;if(r===y)return e.NEAREST_MIPMAP_LINEAR;if(r===b)return e.LINEAR;if(1007===r)return e.LINEAR_MIPMAP_NEAREST;if(r===x)return e.LINEAR_MIPMAP_LINEAR;if(r===w)return e.UNSIGNED_BYTE;if(1017===r)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===r)return e.UNSIGNED_SHORT_5_5_5_1;if(1019===r)return e.UNSIGNED_SHORT_5_6_5;if(1010===r)return e.BYTE;if(1011===r)return e.SHORT;if(r===_)return e.UNSIGNED_SHORT;if(1013===r)return e.INT;if(r===S)return e.UNSIGNED_INT;if(r===C)return e.FLOAT;if(r===k){if(n.isWebGL2)return e.HALF_FLOAT;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(1021===r)return e.ALPHA;if(r===T)return e.RGB;if(r===A)return e.RGBA;if(1024===r)return e.LUMINANCE;if(1025===r)return e.LUMINANCE_ALPHA;if(r===E)return e.DEPTH_COMPONENT;if(r===P)return e.DEPTH_STENCIL;if(100===r)return e.FUNC_ADD;if(101===r)return e.FUNC_SUBTRACT;if(102===r)return e.FUNC_REVERSE_SUBTRACT;if(200===r)return e.ZERO;if(201===r)return e.ONE;if(202===r)return e.SRC_COLOR;if(203===r)return e.ONE_MINUS_SRC_COLOR;if(204===r)return e.SRC_ALPHA;if(205===r)return e.ONE_MINUS_SRC_ALPHA;if(206===r)return e.DST_ALPHA;if(207===r)return e.ONE_MINUS_DST_ALPHA;if(208===r)return e.DST_COLOR;if(209===r)return e.ONE_MINUS_DST_COLOR;if(210===r)return e.SRC_ALPHA_SATURATE;if((33776===r||33777===r||33778===r||33779===r)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===r)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===r||35841===r||35842===r||35843===r)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===r)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return r;if(103===r||104===r){if(n.isWebGL2){if(103===r)return e.MIN;if(104===r)return e.MAX}if(null!==(i=t.get("EXT_blend_minmax"))){if(103===r)return i.MIN_EXT;if(104===r)return i.MAX_EXT}}if(r===M){if(n.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function wn(){fe.call(this),this.type="Group"}function _n(e,t,n,r){pe.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Sn(e){_n.call(this),this.cameras=e||[]}function Cn(e){var t=this,n=null,r=null,i=null,o=[],a=new j,s=new j;"undefined"!==typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",v,!1));var l=new j,c=new Z,u=new H,d=new _n;d.bounds=new $(0,0,.5,1),d.layers.enable(1);var f=new _n;f.bounds=new $(.5,0,.5,1),f.layers.enable(2);var p,h,m=new Sn([d,f]);function g(){return null!==n&&!0===n.isPresenting}function v(){if(g()){var r=n.getEyeParameters("left"),i=r.renderWidth,o=r.renderHeight;h=e.getPixelRatio(),p=e.getSize(),e.setDrawingBufferSize(2*i,o,1),x.start()}else t.enabled&&(e.setDrawingBufferSize(p.width,p.height,h),x.stop())}m.layers.enable(1),m.layers.enable(2);var y=[];function b(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}this.enabled=!1,this.userHeight=1.6,this.getController=function(e){var t=o[e];return void 0===t&&((t=new wn).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),x.setContext(e)},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){if(null===n)return e.position.set(0,t.userHeight,0),e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r);var p=n.stageParameters;p?a.fromArray(p.sittingToStandingTransform):a.makeTranslation(0,t.userHeight,0);var h=r.pose,g=null!==i?i:e;if(g.matrix.copy(a),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==h.orientation&&(c.fromArray(h.orientation),g.quaternion.multiply(c)),null!==h.position&&(c.setFromRotationMatrix(a),u.fromArray(h.position),u.applyQuaternion(c),g.position.add(u)),g.updateMatrixWorld(),!1===n.isPresenting)return e;d.near=e.near,f.near=e.near,d.far=e.far,f.far=e.far,m.matrixWorld.copy(e.matrixWorld),m.matrixWorldInverse.copy(e.matrixWorldInverse),d.matrixWorldInverse.fromArray(r.leftViewMatrix),f.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(a),d.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s);var v=g.parent;null!==v&&(l.getInverse(v.matrixWorld),d.matrixWorldInverse.multiply(l),f.matrixWorldInverse.multiply(l)),d.matrixWorld.getInverse(d.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),d.projectionMatrix.fromArray(r.leftProjectionMatrix),f.projectionMatrix.fromArray(r.rightProjectionMatrix),m.projectionMatrix.copy(d.projectionMatrix);var x=n.getLayers();if(x.length){var w=x[0];null!==w.leftBounds&&4===w.leftBounds.length&&d.bounds.fromArray(w.leftBounds),null!==w.rightBounds&&4===w.rightBounds.length&&f.bounds.fromArray(w.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],n=b(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;y[e]!==n.buttons[i].pressed&&(y[e]=n.buttons[i].pressed,!0===y[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),m},this.getStandingMatrix=function(){return a},this.isPresenting=g;var x=new se;this.setAnimationLoop=function(e){x.setAnimationLoop(e)},this.submitFrame=function(){g()&&n.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",v)}}function kn(e){var t=e.context,n=null,r=null,i=null,o=null,a=[],s=[];function l(){return null!==r&&null!==i}var c=new _n;c.layers.enable(1),c.viewport=new $;var u=new _n;u.layers.enable(2),u.viewport=new $;var d=new Sn([c,u]);function f(e){var t=a[s.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function p(){e.setFramebuffer(null),g.stop()}function h(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}d.layers.enable(1),d.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new wn).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setSession=function(n,o){null!==(r=n)&&(r.addEventListener("select",f),r.addEventListener("selectstart",f),r.addEventListener("selectend",f),r.addEventListener("end",p),r.baseLayer=new XRWebGLLayer(r,t),r.requestFrameOfReference(o.frameOfReferenceType).then((function(t){i=t,e.setFramebuffer(r.baseLayer.framebuffer),g.setContext(r),g.start()})),s=r.getInputSources(),r.addEventListener("inputsourceschange",(function(){s=r.getInputSources(),console.log(s)})))},this.getCamera=function(e){if(l()){var t=e.parent,n=d.cameras;h(d,t);for(var r=0;r<n.length;r++)h(n[r],t);e.matrixWorld.copy(d.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return d}return e},this.isPresenting=l;var m=null;var g=new se;g.setAnimationLoop((function(e,t){if(null!==(o=t.getDevicePose(i)))for(var n=r.baseLayer,l=t.views,c=0;c<l.length;c++){var u=l[c],f=n.getViewport(u),p=o.getViewMatrix(u),h=d.cameras[c];h.matrix.fromArray(p).getInverse(h.matrix),h.projectionMatrix.fromArray(u.projectionMatrix),h.viewport.set(f.x,f.y,f.width,f.height),0===c&&(d.matrix.copy(h.matrix),d.projectionMatrix.copy(h.projectionMatrix))}for(c=0;c<a.length;c++){var g=a[c],v=s[c];if(v){var y=t.getInputPose(v,i);if(null!==y){g.matrix.elements=y.pointerMatrix,g.matrix.decompose(g.position,g.rotation,g.scale),g.visible=!0;continue}}g.visible=!1}m&&m(e)})),this.setAnimationLoop=function(e){m=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function Mn(e){console.log("THREE.WebGLRenderer","95");var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=null,d=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var f,p,h,m,g,v,y,b,x,_,S,M,T,E,P,R,O,I,L=this,D=!1,N=null,F=null,B=null,Z=-1,U={geometry:null,program:null,wireframe:!1},V=null,G=null,W=new $,q=new $,Y=null,K=0,J=t.width,Q=t.height,te=1,re=new $(0,0,J,Q),ie=new $(0,0,J,Q),ce=!1,ue=new ee,de=new $e,fe=!1,pe=!1,he=new j,me=new H;function ge(){return null===F?te:1}try{var ve={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c};if(t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",_e,!1),null===(f=n||t.getContext("webgl",ve)||t.getContext("experimental-webgl",ve)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===f.getShaderPrecisionFormat&&(f.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){console.error("THREE.WebGLRenderer: "+De.message)}function ye(){p=new qe(f),(h=new We(f,p,e)).isWebGL2||(p.get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays")),p.get("OES_texture_float_linear"),I=new xn(f,p,h),(m=new yn(f,p,I,h)).scissor(q.copy(ie).multiplyScalar(te)),m.viewport(W.copy(re).multiplyScalar(te)),g=new Ke(f),v=new rn,y=new bn(f,p,m,v,h,I,g),b=new le(f),x=new Ye(f,b,g),_=new et(x,g),P=new Qe(f),S=new nn(L,p,h),M=new ln,T=new hn,E=new Ve(L,m,_,s),R=new Ge(f,p,g,h),O=new Xe(f,p,g,h),g.programs=S.programs,L.context=f,L.capabilities=h,L.extensions=p,L.properties=v,L.renderLists=M,L.state=m,L.info=g}ye();var be="xr"in navigator?new kn(L):new Cn(L);this.vr=be;var xe=new vn(L,_,h.maxTextureSize);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function _e(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1,ye()}function Se(e){var t=e.target;t.removeEventListener("dispose",Se),function(e){Ce(e),v.remove(e)}(t)}function Ce(e){var t=v.get(e).program;e.program=void 0,void 0!==t&&S.releaseProgram(t)}this.shadowMap=xe,this.getContext=function(){return f},this.getContextAttributes=function(){return f.getContextAttributes()},this.forceContextLoss=function(){var e=p.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=p.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(e){void 0!==e&&(te=e,this.setSize(J,Q,!1))},this.getSize=function(){return{width:J,height:Q}},this.setSize=function(e,n,r){be.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(J=e,Q=n,t.width=e*te,t.height=n*te,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:J*te,height:Q*te}},this.setDrawingBufferSize=function(e,n,r){J=e,Q=n,te=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return W},this.setViewport=function(e,t,n,r){re.set(e,Q-t-r,n,r),m.viewport(W.copy(re).multiplyScalar(te))},this.setScissor=function(e,t,n,r){ie.set(e,Q-t-r,n,r),m.scissor(q.copy(ie).multiplyScalar(te))},this.setScissorTest=function(e){m.setScissorTest(ce=e)},this.getClearColor=function(){return E.getClearColor()},this.setClearColor=function(){E.setClearColor.apply(E,arguments)},this.getClearAlpha=function(){return E.getClearAlpha()},this.setClearAlpha=function(){E.setClearAlpha.apply(E,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=f.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=f.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=f.STENCIL_BUFFER_BIT),f.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",_e,!1),M.dispose(),T.dispose(),v.dispose(),_.dispose(),be.dispose(),Me.stop()},this.renderBufferImmediate=function(e,t){m.initAttributes();var n=v.get(e);e.hasPositions&&!n.position&&(n.position=f.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=f.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=f.createBuffer()),e.hasColors&&!n.color&&(n.color=f.createBuffer());var r=t.getAttributes();e.hasPositions&&(f.bindBuffer(f.ARRAY_BUFFER,n.position),f.bufferData(f.ARRAY_BUFFER,e.positionArray,f.DYNAMIC_DRAW),m.enableAttribute(r.position),f.vertexAttribPointer(r.position,3,f.FLOAT,!1,0,0)),e.hasNormals&&(f.bindBuffer(f.ARRAY_BUFFER,n.normal),f.bufferData(f.ARRAY_BUFFER,e.normalArray,f.DYNAMIC_DRAW),m.enableAttribute(r.normal),f.vertexAttribPointer(r.normal,3,f.FLOAT,!1,0,0)),e.hasUvs&&(f.bindBuffer(f.ARRAY_BUFFER,n.uv),f.bufferData(f.ARRAY_BUFFER,e.uvArray,f.DYNAMIC_DRAW),m.enableAttribute(r.uv),f.vertexAttribPointer(r.uv,2,f.FLOAT,!1,0,0)),e.hasColors&&(f.bindBuffer(f.ARRAY_BUFFER,n.color),f.bufferData(f.ARRAY_BUFFER,e.colorArray,f.DYNAMIC_DRAW),m.enableAttribute(r.color),f.vertexAttribPointer(r.color,3,f.FLOAT,!1,0,0)),m.disableUnusedAttributes(),f.drawArrays(f.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;m.setMaterial(r,a);var s=Re(e,t,r,i),l=!1;U.geometry===n.id&&U.program===s.id&&U.wireframe===(!0===r.wireframe)||(U.geometry=n.id,U.program=s.id,U.wireframe=!0===r.wireframe,l=!0),i.morphTargetInfluences&&(P.update(i,n,r,s),l=!0);var c,u=n.index,d=n.attributes.position,g=1;!0===r.wireframe&&(u=x.getWireframeAttribute(n),g=2);var v=R;null!==u&&(c=b.get(u),(v=O).setIndex(c)),l&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&!h.isWebGL2&&null===p.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var l=r[a];if(void 0!==l){var c=l.normalized,u=l.itemSize,d=b.get(l);if(void 0===d)continue;var g=d.buffer,v=d.type,y=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var x=l.data,w=x.stride,_=l.offset;x&&x.isInstancedInterleavedBuffer?(m.enableAttributeAndDivisor(s,x.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=x.meshPerAttribute*x.count)):m.enableAttribute(s),f.bindBuffer(f.ARRAY_BUFFER,g),f.vertexAttribPointer(s,u,v,c,w*y,_*y)}else l.isInstancedBufferAttribute?(m.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):m.enableAttribute(s),f.bindBuffer(f.ARRAY_BUFFER,g),f.vertexAttribPointer(s,u,v,c,0,0)}else if(void 0!==o){var S=o[a];if(void 0!==S)switch(S.length){case 2:f.vertexAttrib2fv(s,S);break;case 3:f.vertexAttrib3fv(s,S);break;case 4:f.vertexAttrib4fv(s,S);break;default:f.vertexAttrib1fv(s,S)}}}}m.disableUnusedAttributes()}(r,s,n),null!==u&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.buffer));var y=1/0;null!==u?y=u.count:void 0!==d&&(y=d.count);var w=n.drawRange.start*g,_=n.drawRange.count*g,S=null!==o?o.start*g:0,C=null!==o?o.count*g:1/0,k=Math.max(w,S),M=Math.min(y,w+_,S+C)-1,T=Math.max(0,M-k+1);if(0!==T){if(i.isMesh)if(!0===r.wireframe)m.setLineWidth(r.wireframeLinewidth*ge()),v.setMode(f.LINES);else switch(i.drawMode){case 0:v.setMode(f.TRIANGLES);break;case 1:v.setMode(f.TRIANGLE_STRIP);break;case 2:v.setMode(f.TRIANGLE_FAN)}else if(i.isLine){var A=r.linewidth;void 0===A&&(A=1),m.setLineWidth(A*ge()),i.isLineSegments?v.setMode(f.LINES):i.isLineLoop?v.setMode(f.LINE_LOOP):v.setMode(f.LINE_STRIP)}else i.isPoints?v.setMode(f.POINTS):i.isSprite&&v.setMode(f.TRIANGLES);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,k,T):v.render(k,T)}},this.compile=function(e,t){(d=T.get(e,t)).init(),e.traverse((function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Pe(t.material[n],e.fog,t);else Pe(t.material,e.fog,t)}))};var ke=null;var Me=new se;function Te(e,t,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ue.intersectsSprite(e)){n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(he);var r=_.update(e),i=e.material;u.push(e,r,i,me.z,null)}}else if(e.isImmediateRenderObject)n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(he),u.push(e,null,e.material,me.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||ue.intersectsObject(e))){n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(he);r=_.update(e),i=e.material;if(Array.isArray(i))for(var o=r.groups,a=0,s=o.length;a<s;a++){var l=o[a],c=i[l.materialIndex];c&&c.visible&&u.push(e,r,c,me.z,l)}else i.visible&&u.push(e,r,i,me.z,null)}var f=e.children;for(a=0,s=f.length;a<s;a++)Te(f[a],t,n)}}function Ae(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,l=a.geometry,c=void 0===r?a.material:r,u=a.group;if(n.isArrayCamera){G=n;for(var d=n.cameras,f=0,p=d.length;f<p;f++){var h=d[f];if(s.layers.test(h.layers)){if("viewport"in h)m.viewport(W.copy(h.viewport));else{var g=h.bounds,v=g.x*J,y=g.y*Q,b=g.z*J,x=g.w*Q;m.viewport(W.set(v,y,b,x).multiplyScalar(te))}Ee(s,t,h,l,c,u)}}}else G=null,Ee(s,t,n,l,c,u)}}function Ee(e,t,n,r,i,o){if(e.onBeforeRender(L,t,n,r,i,o),d=T.get(t,G||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){m.setMaterial(i);var a=Re(n,t.fog,i,e);U.geometry=null,U.program=null,U.wireframe=!1,function(e,t){e.render((function(e){L.renderBufferImmediate(e,t)}))}(e,a)}else L.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(L,t,n,r,i,o),d=T.get(t,G||n)}function Pe(e,t,n){var r=v.get(e),i=d.state.lights,o=d.state.shadowsArray,a=r.lightsHash,s=i.state.hash,l=S.getParameters(e,i.state,o,t,de.numPlanes,de.numIntersection,n),c=S.getProgramCode(e,l),u=r.program,f=!0;if(void 0===u)e.addEventListener("dispose",Se);else if(u.code!==c)Ce(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,f=!1;else{if(void 0!==l.shaderID)return;f=!1}if(f){if(l.shaderID){var p=ae[l.shaderID];r.shader={name:e.type,uniforms:ne.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,L),c=S.getProgramCode(e,l),u=S.acquireProgram(e,r.shader,l,c),r.program=u,e.program=u}var h=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<L.maxMorphTargets;m++)h["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(m=0;m<L.maxMorphNormals;m++)h["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var g=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=de.numPlanes,r.numIntersection=de.numIntersection,g.clippingPlanes=de.uniform),r.fog=t,void 0===a&&(r.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(g.ambientLightColor.value=i.state.ambient,g.directionalLights.value=i.state.directional,g.spotLights.value=i.state.spot,g.rectAreaLights.value=i.state.rectArea,g.pointLights.value=i.state.point,g.hemisphereLights.value=i.state.hemi,g.directionalShadowMap.value=i.state.directionalShadowMap,g.directionalShadowMatrix.value=i.state.directionalShadowMatrix,g.spotShadowMap.value=i.state.spotShadowMap,g.spotShadowMatrix.value=i.state.spotShadowMatrix,g.pointShadowMap.value=i.state.pointShadowMap,g.pointShadowMatrix.value=i.state.pointShadowMatrix);var y=r.program.getUniforms(),b=Ut.seqWithValue(y.seq,g);r.uniformsList=b}function Re(e,t,n,r){K=0;var i=v.get(n),o=d.state.lights,a=i.lightsHash,s=o.state.hash;if(fe&&(pe||e!==V)){var l=e===V&&n.id===Z;de.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,l)}!1===n.needsUpdate&&(void 0===i.program||n.fog&&i.fog!==t?n.needsUpdate=!0:(!n.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===de.numPlanes&&i.numIntersection===de.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(Pe(n,t,r),n.needsUpdate=!1);var c,u,p=!1,g=!1,y=!1,b=i.program,x=b.getUniforms(),w=i.shader.uniforms;if(m.useProgram(b.program)&&(p=!0,g=!0,y=!0),n.id!==Z&&(Z=n.id,g=!0),p||e!==V){if(x.setValue(f,"projectionMatrix",e.projectionMatrix),h.logarithmicDepthBuffer&&x.setValue(f,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),V!==(G||e)&&(V=G||e,g=!0,y=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var _=x.map.cameraPosition;void 0!==_&&_.setValue(f,me.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&x.setValue(f,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){x.setOptional(f,r,"bindMatrix"),x.setOptional(f,r,"bindMatrixInverse");var S=r.skeleton;if(S){var k=S.bones;if(h.floatVertexTextures){if(void 0===S.boneTexture){var M=Math.sqrt(4*k.length);M=z.ceilPowerOfTwo(M),M=Math.max(M,4);var T=new Float32Array(M*M*4);T.set(S.boneMatrices);var E=new X(T,M,M,A,C);E.needsUpdate=!0,S.boneMatrices=T,S.boneTexture=E,S.boneTextureSize=M}x.setValue(f,"boneTexture",S.boneTexture),x.setValue(f,"boneTextureSize",S.boneTextureSize)}else x.setOptional(f,S,"boneMatrices")}}return g&&(x.setValue(f,"toneMappingExposure",L.toneMappingExposure),x.setValue(f,"toneMappingWhitePoint",L.toneMappingWhitePoint),n.lights&&(u=y,(c=w).ambientLightColor.needsUpdate=u,c.directionalLights.needsUpdate=u,c.pointLights.needsUpdate=u,c.spotLights.needsUpdate=u,c.rectAreaLights.needsUpdate=u,c.hemisphereLights.needsUpdate=u),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(w,t),n.isMeshBasicMaterial?Oe(w,n):n.isMeshLambertMaterial?(Oe(w,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(w,n)):n.isMeshPhongMaterial?(Oe(w,n),n.isMeshToonMaterial?function(e,t){Ie(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(w,n):Ie(w,n)):n.isMeshStandardMaterial?(Oe(w,n),n.isMeshPhysicalMaterial?function(e,t){Le(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(w,n):Le(w,n)):n.isMeshDepthMaterial?(Oe(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshDistanceMaterial?(Oe(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(w,n)):n.isMeshNormalMaterial?(Oe(w,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(w,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(w,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*te,e.scale.value=.5*Q,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(w,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(w,n):n.isShadowMaterial&&(w.color.value=n.color,w.opacity.value=n.opacity),void 0!==w.ltc_1&&(w.ltc_1.value=oe.LTC_1),void 0!==w.ltc_2&&(w.ltc_2.value=oe.LTC_2),Ut.upload(f,i.uniformsList,w,L)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ut.upload(f,i.uniformsList,w,L),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&x.setValue(f,"center",r.center),x.setValue(f,"modelViewMatrix",r.modelViewMatrix),x.setValue(f,"normalMatrix",r.normalMatrix),x.setValue(f,"modelMatrix",r.matrixWorld),b}function Oe(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=v.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Ie(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Le(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}Me.setAnimationLoop((function(e){be.isPresenting()||ke&&ke(e)})),"undefined"!==typeof window&&Me.setContext(window),this.setAnimationLoop=function(e){ke=e,be.setAnimationLoop(e),Me.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!D){U.geometry=null,U.program=null,U.wireframe=!1,Z=-1,V=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),be.enabled&&(t=be.getCamera(t)),(d=T.get(e,t)).init(),e.onBeforeRender(L,e,t,n),he.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ue.setFromMatrix(he),pe=this.localClippingEnabled,fe=de.init(this.clippingPlanes,pe,t),(u=M.get(e,t)).init(),Te(e,t,L.sortObjects),!0===L.sortObjects&&u.sort(),fe&&de.beginShadows();var i=d.state.shadowsArray;xe.render(i,e,t),d.setupLights(t),fe&&de.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),E.render(u,e,t,r);var o=u.opaque,a=u.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&Ae(o,e,t,s),a.length&&Ae(a,e,t,s)}else o.length&&Ae(o,e,t),a.length&&Ae(a,e,t);n&&y.updateRenderTargetMipmap(n),m.buffers.depth.setTest(!0),m.buffers.depth.setMask(!0),m.buffers.color.setMask(!0),m.setPolygonOffset(!1),e.onAfterRender(L,e,t),be.enabled&&be.submitFrame(),u=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=K;return e>=h.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+h.maxTextures),K+=1,e},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),y.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),y.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?y.setTextureCube(t,n):y.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){N=e},this.getRenderTarget=function(){return F},this.setRenderTarget=function(e){F=e,e&&void 0===v.get(e).__webglFramebuffer&&y.setupRenderTarget(e);var t=N,n=!1;if(e){var r=v.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,W.copy(e.viewport),q.copy(e.scissor),Y=e.scissorTest}else W.copy(re).multiplyScalar(te),q.copy(ie).multiplyScalar(te),Y=ce;if(B!==t&&(f.bindFramebuffer(f.FRAMEBUFFER,t),B=t),m.viewport(W),m.scissor(q),m.setScissorTest(Y),n){var i=v.get(e.texture);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=v.get(e).__webglFramebuffer;if(a){var s=!1;a!==B&&(f.bindFramebuffer(f.FRAMEBUFFER,a),s=!0);try{var l=e.texture,c=l.format,u=l.type;if(c!==A&&I.convert(c)!==f.getParameter(f.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(u!==w&&I.convert(u)!==f.getParameter(f.IMPLEMENTATION_COLOR_READ_TYPE)&&(u!==C||!(h.isWebGL2||p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float")))&&(u!==k||!(h.isWebGL2?p.get("EXT_color_buffer_float"):p.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&f.readPixels(t,n,r,i,I.convert(c),I.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&f.bindFramebuffer(f.FRAMEBUFFER,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=I.convert(t.format);this.setTexture2D(t,0),f.copyTexImage2D(f.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=I.convert(n.format),s=I.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?f.texSubImage2D(f.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,t.image.data):f.texSubImage2D(f.TEXTURE_2D,r||0,e.x,e.y,a,s,t.image)}}function Tn(e,t){this.name="",this.color=new ie(e),this.density=void 0!==t?t:25e-5}function An(e,t,n){this.name="",this.color=new ie(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function En(){fe.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Pn(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Rn(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function On(e){ze.call(this),this.type="SpriteMaterial",this.color=new ie(16777215),this.map=null,this.rotation=0,this.lights=!1,this.transparent=!0,this.setValues(e)}function In(e){if(fe.call(this),this.type="Sprite",void 0===un){un=new Oe;var t=new Pn(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);un.setIndex([0,1,2,0,2,3]),un.addAttribute("position",new Rn(t,3,0,!1)),un.addAttribute("uv",new Rn(t,2,3,!1))}this.geometry=un,this.material=void 0!==e?e:new On,this.center=new B(.5,.5)}function Ln(){fe.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Dn(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new j)}}function Nn(){fe.call(this),this.type="Bone"}function Fn(e,t){Ue.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new j,this.bindMatrixInverse=new j;var n=new Dn(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function zn(e){ze.call(this),this.type="LineBasicMaterial",this.color=new ie(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Bn(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),fe.call(this),this.type="Line",this.geometry=void 0!==e?e:new Oe,this.material=void 0!==t?t:new zn({color:16777215*Math.random()})}function jn(e,t){Bn.call(this,e,t),this.type="LineSegments"}function Zn(e,t){Bn.call(this,e,t),this.type="LineLoop"}function Hn(e){ze.call(this),this.type="PointsMaterial",this.color=new ie(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Un(e,t){fe.call(this),this.type="Points",this.geometry=void 0!==e?e:new Oe,this.material=void 0!==t?t:new Hn({color:16777215*Math.random()})}function Vn(e,t,n,r,i,o,a,s,l){W.call(this,e,t,n,r,i,o,a,s,l),this.generateMipmaps=!1}function Gn(e,t,n,r,i,o,a,s,l,c,u,d){W.call(this,null,o,a,s,l,c,r,i,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Wn(e,t,n,r,i,o,a,s,l){W.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}function $n(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:E)!==E&&c!==P)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===E&&(n=_),void 0===n&&c===P&&(n=M),W.call(this,null,r,i,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:g,this.minFilter=void 0!==s?s:g,this.flipY=!1,this.generateMipmaps=!1}function qn(e){Oe.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,l,c,u,d=[],f=[0,0],p={},h=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var g=m[t];for(n=0;n<3;n++)s=g[h[n]],l=g[h[(n+1)%3]],f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===p[c=f[0]+","+f[1]]&&(p[c]={index1:f[0],index2:f[1]})}for(c in p)a=p[c],u=e.vertices[a.index1],d.push(u.x,u.y,u.z),u=e.vertices[a.index2],d.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var v,y,b,x,w,_,S;if(u=new H,null!==e.index){for(v=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(t=w=(x=b[i]).start,r=w+x.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),l=y.getX(t+(n+1)%3),f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===p[c=f[0]+","+f[1]]&&(p[c]={index1:f[0],index2:f[1]});for(c in p)a=p[c],u.fromBufferAttribute(v,a.index1),d.push(u.x,u.y,u.z),u.fromBufferAttribute(v,a.index2),d.push(u.x,u.y,u.z)}else for(t=0,r=(v=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)_=3*t+n,u.fromBufferAttribute(v,_),d.push(u.x,u.y,u.z),S=3*t+(n+1)%3,u.fromBufferAttribute(v,S),d.push(u.x,u.y,u.z)}this.addAttribute("position",new Te(d,3))}function Yn(e,t,n){ye.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Xn(e,t,n)),this.mergeVertices()}function Xn(e,t,n){Oe.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],l=[],c=1e-5,u=new H,d=new H,f=new H,p=new H,h=new H;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var g=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,g,d),a.push(d.x,d.y,d.z),v-c>=0?(e(v-c,g,f),p.subVectors(d,f)):(e(v+c,g,f),p.subVectors(f,d)),g-c>=0?(e(v,g-c,f),h.subVectors(d,f)):(e(v,g+c,f),h.subVectors(f,d)),u.crossVectors(p,h).normalize(),s.push(u.x,u.y,u.z),l.push(v,g)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,b=r*m+i+1,x=(r+1)*m+i+1,w=(r+1)*m+i;o.push(y,b,w),o.push(b,x,w)}this.setIndex(o),this.addAttribute("position",new Te(a,3)),this.addAttribute("normal",new Te(s,3)),this.addAttribute("uv",new Te(l,2))}function Kn(e,t,n,r){ye.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Jn(e,t,n,r)),this.mergeVertices()}function Jn(e,t,n,r){Oe.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),l=[];for(i=0;i<=a;i++){l[i]=[];var c=e.clone().lerp(n,i/a),u=t.clone().lerp(n,i/a),d=a-i;for(o=0;o<=d;o++)l[i][o]=0===o&&i===a?c:c.clone().lerp(u,o/d)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2===0?(s(l[i][f+1]),s(l[i+1][f]),s(l[i][f])):(s(l[i][f+1]),s(l[i+1][f+1]),s(l[i+1][f]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new H,r=new H,i=new H,o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new H,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new H,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=u(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new H,t=new H,n=new H,r=new H,a=new B,s=new B,l=new B,d=0,f=0;d<i.length;d+=9,f+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),l.set(o[f+4],o[f+5]),r.copy(e).add(t).add(n).divideScalar(3);var p=u(r);c(a,f+0,e,p),c(s,f+2,t,p),c(l,f+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new Te(i,3)),this.addAttribute("normal",new Te(i.slice(),3)),this.addAttribute("uv",new Te(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Qn(e,t){ye.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new er(e,t)),this.mergeVertices()}function er(e,t){Jn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function tr(e,t){ye.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new nr(e,t)),this.mergeVertices()}function nr(e,t){Jn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function rr(e,t){ye.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ir(e,t)),this.mergeVertices()}function ir(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Jn.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function or(e,t){ye.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ar(e,t)),this.mergeVertices()}function ar(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Jn.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function sr(e,t,n,r,i,o){ye.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new lr(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function lr(e,t,n,r,i){Oe.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new H,c=new H,u=new B,d=new H,f=[],p=[],h=[],m=[];function g(i){d=e.getPointAt(i/t,d);var a=o.normals[i],u=o.binormals[i];for(s=0;s<=r;s++){var h=s/r*Math.PI*2,m=Math.sin(h),g=-Math.cos(h);c.x=g*a.x+m*u.x,c.y=g*a.y+m*u.y,c.z=g*a.z+m*u.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=d.x+n*c.x,l.y=d.y+n*c.y,l.z=d.z+n*c.z,f.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)g(a);g(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)u.x=a/t,u.y=s/r,h.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(e,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.addAttribute("position",new Te(f,3)),this.addAttribute("normal",new Te(p,3)),this.addAttribute("uv",new Te(h,2))}function cr(e,t,n,r,i,o,a){ye.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ur(e,t,n,r,i,o)),this.mergeVertices()}function ur(e,t,n,r,i,o){Oe.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,l=[],c=[],u=[],d=[],f=new H,p=new H,h=new H,m=new H,g=new H,v=new H,y=new H;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(T(b,i,o,e,h),T(b+.01,i,o,e,m),v.subVectors(m,h),y.addVectors(m,h),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,w=-t*Math.cos(x),_=t*Math.sin(x);f.x=h.x+(w*y.x+_*g.x),f.y=h.y+(w*y.y+_*g.y),f.z=h.z+(w*y.z+_*g.z),c.push(f.x,f.y,f.z),p.subVectors(f,h).normalize(),u.push(p.x,p.y,p.z),d.push(a/n),d.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var S=(r+1)*(s-1)+(a-1),C=(r+1)*s+(a-1),k=(r+1)*s+a,M=(r+1)*(s-1)+a;l.push(S,C,M),l.push(C,k,M)}function T(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new Te(c,3)),this.addAttribute("normal",new Te(u,3)),this.addAttribute("uv",new Te(d,2))}function dr(e,t,n,r,i){ye.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new fr(e,t,n,r,i)),this.mergeVertices()}function fr(e,t,n,r,i){Oe.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],l=[],c=[],u=[],d=new H,f=new H,p=new H;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var h=a/r*i,m=o/n*Math.PI*2;f.x=(e+t*Math.cos(m))*Math.cos(h),f.y=(e+t*Math.cos(m))*Math.sin(h),f.z=t*Math.sin(m),l.push(f.x,f.y,f.z),d.x=e*Math.cos(h),d.y=e*Math.sin(h),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),u.push(a/r),u.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var g=(r+1)*o+a-1,v=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(g,v,b),s.push(v,y,b)}this.setIndex(s),this.addAttribute("position",new Te(l,3)),this.addAttribute("normal",new Te(c,3)),this.addAttribute("uv",new Te(u,2))}mn.prototype=Object.create(ze.prototype),mn.prototype.constructor=mn,mn.prototype.isMeshDepthMaterial=!0,mn.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},gn.prototype=Object.create(ze.prototype),gn.prototype.constructor=gn,gn.prototype.isMeshDistanceMaterial=!0,gn.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},wn.prototype=Object.assign(Object.create(fe.prototype),{constructor:wn,isGroup:!0}),_n.prototype=Object.assign(Object.create(pe.prototype),{constructor:_n,isPerspectiveCamera:!0,copy:function(e,t){return pe.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*z.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*z.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*z.RAD2DEG*Math.atan(Math.tan(.5*z.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*z.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Sn.prototype=Object.assign(Object.create(_n.prototype),{constructor:Sn,isArrayCamera:!0}),Tn.prototype.isFogExp2=!0,Tn.prototype.clone=function(){return new Tn(this.color,this.density)},Tn.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},An.prototype.isFog=!0,An.prototype.clone=function(){return new An(this.color,this.near,this.far)},An.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},En.prototype=Object.assign(Object.create(fe.prototype),{constructor:En,copy:function(e,t){return fe.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(Pn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Pn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Rn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Rn.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),On.prototype=Object.create(ze.prototype),On.prototype.constructor=On,On.prototype.isSpriteMaterial=!0,On.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},In.prototype=Object.assign(Object.create(fe.prototype),{constructor:In,isSprite:!0,raycast:function(){var e=new H,t=new H,n=new H,r=new B,i=new B,o=new j,a=new H,s=new H,l=new H;function c(e,t,n,a,s,l){r.subVectors(e,n).addScalar(.5).multiply(a),void 0!==s?(i.x=l*r.x-s*r.y,i.y=s*r.x+l*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var u,d,f=this.material.rotation;0!==f&&(d=Math.cos(f),u=Math.sin(f));var p=this.center;c(a.set(-.5,-.5,0),n,p,t,u,d),c(s.set(.5,-.5,0),n,p,t,u,d),c(l.set(.5,.5,0),n,p,t,u,d);var h=r.ray.intersectTriangle(a,s,l,!1,e);if(null!==h||(c(s.set(-.5,.5,0),n,p,t,u,d),null!==(h=r.ray.intersectTriangle(a,l,s,!1,e)))){var m=r.ray.origin.distanceTo(e);m<r.near||m>r.far||i.push({distance:m,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return fe.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Ln.prototype=Object.assign(Object.create(fe.prototype),{constructor:Ln,copy:function(e){fe.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new H;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new H,t=new H;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Dn.prototype,{calculateInverses:function(){var e=this;this.boneInverses=[];for(var t=0,n=this.bones.length;t<n;t++){var r=new j;e.bones[t]&&r.getInverse(e.bones[t].matrixWorld),e.boneInverses.push(r)}},pose:function(){var e,t,n,r=this;for(t=0,n=this.bones.length;t<n;t++)(e=r.bones[t])&&e.matrixWorld.getInverse(r.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=r.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new j,t=new j;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var l=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(l,r[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Dn(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Nn.prototype=Object.assign(Object.create(fe.prototype),{constructor:Nn,isBone:!0}),Fn.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Fn,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=this,o=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=i.geometry.bones[n],e=new Nn,o.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(t=i.geometry.bones[n]).parent&&null!==t.parent&&void 0!==o[t.parent]?o[t.parent].add(o[n]):i.add(o[n])}return this.updateMatrixWorld(!0),o},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new $,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),(e=1/r.manhattanLength())!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Ue.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),zn.prototype=Object.create(ze.prototype),zn.prototype.constructor=zn,zn.prototype.isLineBasicMaterial=!0,zn.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Bn.prototype=Object.assign(Object.create(fe.prototype),{constructor:Bn,isLine:!0,computeLineDistances:function(){var e=new H,t=new H;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new Te(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;(i=n.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new j,t=new Ze,n=new J;return function(r,i){var o=this,a=r.linePrecision,s=a*a,l=this.geometry,c=this.matrixWorld;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(c),!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var u=new H,d=new H,f=new H,p=new H,h=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var m=l.index,g=l.attributes.position.array;if(null!==m)for(var v=m.array,y=0,b=v.length-1;y<b;y+=h){var x=v[y],w=v[y+1];if(u.fromArray(g,3*x),d.fromArray(g,3*w),!(t.distanceSqToSegment(u,d,p,f)>s))p.applyMatrix4(o.matrixWorld),(C=r.ray.origin.distanceTo(p))<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(o.matrixWorld),index:y,face:null,faceIndex:null,object:o})}else for(y=0,b=g.length/3-1;y<b;y+=h){if(u.fromArray(g,3*y),d.fromArray(g,3*y+3),!(t.distanceSqToSegment(u,d,p,f)>s))p.applyMatrix4(o.matrixWorld),(C=r.ray.origin.distanceTo(p))<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(o.matrixWorld),index:y,face:null,faceIndex:null,object:o})}}else if(l.isGeometry){var _=l.vertices,S=_.length;for(y=0;y<S-1;y+=h){var C;if(!(t.distanceSqToSegment(_[y],_[y+1],p,f)>s))p.applyMatrix4(o.matrixWorld),(C=r.ray.origin.distanceTo(p))<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(o.matrixWorld),index:y,face:null,faceIndex:null,object:o})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),jn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:jn,isLineSegments:!0,computeLineDistances:function(){var e=new H,t=new H;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new Te(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),Zn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Zn,isLineLoop:!0}),Hn.prototype=Object.create(ze.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isPointsMaterial=!0,Hn.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Un.prototype=Object.assign(Object.create(fe.prototype),{constructor:Un,isPoints:!0,raycast:function(){var e=new j,t=new Ze,n=new J;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,l=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=l,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,d=new H,f=new H;if(a.isBufferGeometry){var p=a.index,h=a.attributes.position.array;if(null!==p)for(var m=p.array,g=0,v=m.length;g<v;g++){var y=m[g];d.fromArray(h,3*y),w(d,y)}else{g=0;for(var b=h.length/3;g<b;g++)d.fromArray(h,3*g),w(d,g)}}else{var x=a.vertices;for(g=0,b=x.length;g<b;g++)w(x[g],g)}}function w(e,n){var a=t.distanceSqToPoint(e);if(a<u){t.closestPointToPoint(e,f),f.applyMatrix4(s);var l=r.ray.origin.distanceTo(f);if(l<r.near||l>r.far)return;i.push({distance:l,distanceToRay:Math.sqrt(a),point:f.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Vn.prototype=Object.assign(Object.create(W.prototype),{constructor:Vn,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Gn.prototype=Object.create(W.prototype),Gn.prototype.constructor=Gn,Gn.prototype.isCompressedTexture=!0,Wn.prototype=Object.create(W.prototype),Wn.prototype.constructor=Wn,Wn.prototype.isCanvasTexture=!0,$n.prototype=Object.create(W.prototype),$n.prototype.constructor=$n,$n.prototype.isDepthTexture=!0,qn.prototype=Object.create(Oe.prototype),qn.prototype.constructor=qn,Yn.prototype=Object.create(ye.prototype),Yn.prototype.constructor=Yn,Xn.prototype=Object.create(Oe.prototype),Xn.prototype.constructor=Xn,Kn.prototype=Object.create(ye.prototype),Kn.prototype.constructor=Kn,Jn.prototype=Object.create(Oe.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(ye.prototype),Qn.prototype.constructor=Qn,er.prototype=Object.create(Jn.prototype),er.prototype.constructor=er,tr.prototype=Object.create(ye.prototype),tr.prototype.constructor=tr,nr.prototype=Object.create(Jn.prototype),nr.prototype.constructor=nr,rr.prototype=Object.create(ye.prototype),rr.prototype.constructor=rr,ir.prototype=Object.create(Jn.prototype),ir.prototype.constructor=ir,or.prototype=Object.create(ye.prototype),or.prototype.constructor=or,ar.prototype=Object.create(Jn.prototype),ar.prototype.constructor=ar,sr.prototype=Object.create(ye.prototype),sr.prototype.constructor=sr,lr.prototype=Object.create(Oe.prototype),lr.prototype.constructor=lr,cr.prototype=Object.create(ye.prototype),cr.prototype.constructor=cr,ur.prototype=Object.create(Oe.prototype),ur.prototype.constructor=ur,dr.prototype=Object.create(ye.prototype),dr.prototype.constructor=dr,fr.prototype=Object.create(Oe.prototype),fr.prototype.constructor=fr;var pr=function(e,t,n){n=n||2;var r,i,o,a,s,l,c,u=t&&t.length,d=u?t[0]*n:e.length,f=hr(e,0,d,n,!0),p=[];if(!f)return p;if(u&&(f=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=hr(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Cr(a));for(s.sort(wr),i=0;i<s.length;i++)_r(s[i],n),n=mr(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var h=n;h<d;h+=n)(s=e[h])<r&&(r=s),(l=e[h+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return gr(f,p,n,r,i,c),p};function hr(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Or(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Or(o,e[o],e[o+1],a);return a&&Ar(a,a.next)&&(Ir(a),a=a.next),a}function mr(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Ar(r,r.next)&&0!==Tr(r.prev,r,r.next))r=r.next;else{if(Ir(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function gr(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Sr(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?yr(e,r,i,o):vr(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Ir(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?gr(e=br(e,t,n),t,n,r,i,o,2):2===a&&xr(e,t,n,r,i,o):gr(mr(e),t,n,r,i,o,1);break}}}function vr(e){var t=e.prev,n=e,r=e.next;if(Tr(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(kr(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Tr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function yr(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Tr(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,d=Sr(s,l,t,n,r),f=Sr(c,u,t,n,r),p=e.nextZ;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&kr(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Tr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&kr(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Tr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function br(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Ar(i,o)&&Er(i,r,r.next,o)&&Pr(i,o)&&Pr(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Ir(r),Ir(r.next),r=e=o),r=r.next}while(r!==e);return r}function xr(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Mr(a,s)){var l=Rr(a,s);return a=mr(a,a.next),l=mr(l,l.next),gr(a,t,n,r,i,o),void gr(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function wr(e,t){return e.x-t.x}function _r(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var l,c=n,u=n.x,d=n.y,f=1/0;r=n.next;for(;r!==c;)i>=r.x&&r.x>=u&&i!==r.x&&kr(o<d?i:a,o,u,d,o<d?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&Pr(r,e)&&(n=r,f=l),r=r.next;return n}(e,t),t){var n=Rr(t,e);mr(n,n.next)}}function Sr(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Cr(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function kr(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Mr(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Er(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Pr(e,t)&&Pr(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Tr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ar(e,t){return e.x===t.x&&e.y===t.y}function Er(e,t,n,r){return!!(Ar(e,t)&&Ar(n,r)||Ar(e,r)&&Ar(n,t))||Tr(e,t,n)>0!==Tr(e,t,r)>0&&Tr(n,r,e)>0!==Tr(n,r,t)>0}function Pr(e,t){return Tr(e.prev,e,e.next)<0?Tr(e,t,e.next)>=0&&Tr(e,e.prev,t)>=0:Tr(e,t,e.prev)<0||Tr(e,e.next,t)<0}function Rr(e,t){var n=new Lr(e.i,e.x,e.y),r=new Lr(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Or(e,t,n,r){var i=new Lr(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ir(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Lr(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Dr={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return Dr.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Nr(e),Fr(n,e);var o=e.length;t.forEach(Nr);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,Fr(n,t[a]);var s=pr(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Nr(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Fr(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function zr(e,t){ye.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Br(e,t)),this.mergeVertices()}function Br(e,t){Oe.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:u-2,f=void 0!==t.bevelSegments?t.bevelSegments:3,p=t.extrudePath,h=void 0!==t.UVGenerator?t.UVGenerator:jr;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var m,g,v,y,b,x,w,_,S=!1;p&&(m=p.getSpacedPoints(s),S=!0,c=!1,g=p.computeFrenetFrames(s,!1),v=new H,y=new H,b=new H),c||(f=0,u=0,d=0);var C=e.extractPoints(a),k=C.shape,M=C.holes;if(!Dr.isClockWise(k))for(k=k.reverse(),w=0,_=M.length;w<_;w++)x=M[w],Dr.isClockWise(x)&&(M[w]=x.reverse());var T=Dr.triangulateShape(k,M),A=k;for(w=0,_=M.length;w<_;w++)x=M[w],k=k.concat(x);function E(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var P,R,O,I,L,D,N=k.length,F=T.length;function z(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,d=a*c-s*l;if(Math.abs(d)>Number.EPSILON){var f=Math.sqrt(u),p=Math.sqrt(l*l+c*c),h=t.x-s/f,m=t.y+a/f,g=((n.x-c/p-h)*c-(n.y+l/p-m)*l)/(a*c-s*l),v=(r=h+a*g-e.x)*r+(i=m+s*g-e.y)*i;if(v<=2)return new B(r,i);o=Math.sqrt(v/2)}else{var y=!1;a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new B(r/o,i/o)}for(var j=[],Z=0,U=A.length,V=U-1,G=Z+1;Z<U;Z++,V++,G++)V===U&&(V=0),G===U&&(G=0),j[Z]=z(A[Z],A[V],A[G]);var W,$,q=[],Y=j.concat();for(w=0,_=M.length;w<_;w++){for(x=M[w],W=[],Z=0,V=(U=x.length)-1,G=Z+1;Z<U;Z++,V++,G++)V===U&&(V=0),G===U&&(G=0),W[Z]=z(x[Z],x[V],x[G]);q.push(W),Y=Y.concat(W)}for(P=0;P<f;P++){for(O=P/f,I=u*Math.cos(O*Math.PI/2),R=d*Math.sin(O*Math.PI/2),Z=0,U=A.length;Z<U;Z++)K((L=E(A[Z],j[Z],R)).x,L.y,-I);for(w=0,_=M.length;w<_;w++)for(x=M[w],W=q[w],Z=0,U=x.length;Z<U;Z++)K((L=E(x[Z],W[Z],R)).x,L.y,-I)}for(R=d,Z=0;Z<N;Z++)L=c?E(k[Z],Y[Z],R):k[Z],S?(y.copy(g.normals[0]).multiplyScalar(L.x),v.copy(g.binormals[0]).multiplyScalar(L.y),b.copy(m[0]).add(y).add(v),K(b.x,b.y,b.z)):K(L.x,L.y,0);for($=1;$<=s;$++)for(Z=0;Z<N;Z++)L=c?E(k[Z],Y[Z],R):k[Z],S?(y.copy(g.normals[$]).multiplyScalar(L.x),v.copy(g.binormals[$]).multiplyScalar(L.y),b.copy(m[$]).add(y).add(v),K(b.x,b.y,b.z)):K(L.x,L.y,l/s*$);for(P=f-1;P>=0;P--){for(O=P/f,I=u*Math.cos(O*Math.PI/2),R=d*Math.sin(O*Math.PI/2),Z=0,U=A.length;Z<U;Z++)K((L=E(A[Z],j[Z],R)).x,L.y,l+I);for(w=0,_=M.length;w<_;w++)for(x=M[w],W=q[w],Z=0,U=x.length;Z<U;Z++)L=E(x[Z],W[Z],R),S?K(L.x,L.y+m[s-1].y,m[s-1].x+I):K(L.x,L.y,l+I)}function X(e,t){var n,r;for(Z=e.length;--Z>=0;){n=Z,(r=Z-1)<0&&(r=e.length-1);var i=0,o=s+2*f;for(i=0;i<o;i++){var a=N*i,l=N*(i+1);Q(t+n+a,t+r+a,t+r+l,t+n+l)}}}function K(e,t,n){o.push(e),o.push(t),o.push(n)}function J(e,t,i){ee(e),ee(t),ee(i);var o=r.length/3,a=h.generateTopUV(n,r,o-3,o-2,o-1);te(a[0]),te(a[1]),te(a[2])}function Q(e,t,i,o){ee(e),ee(t),ee(o),ee(t),ee(i),ee(o);var a=r.length/3,s=h.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);te(s[0]),te(s[1]),te(s[3]),te(s[1]),te(s[2]),te(s[3])}function ee(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function te(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(c){var t=0,i=N*t;for(Z=0;Z<F;Z++)J((D=T[Z])[2]+i,D[1]+i,D[0]+i);for(i=N*(t=s+2*f),Z=0;Z<F;Z++)J((D=T[Z])[0]+i,D[1]+i,D[2]+i)}else{for(Z=0;Z<F;Z++)J((D=T[Z])[2],D[1],D[0]);for(Z=0;Z<F;Z++)J((D=T[Z])[0]+N*s,D[1]+N*s,D[2]+N*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(X(A,t),t+=A.length,w=0,_=M.length;w<_;w++)X(x=M[w],t),t+=x.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new Te(r,3)),this.addAttribute("uv",new Te(i,2)),this.computeVertexNormals()}zr.prototype=Object.create(ye.prototype),zr.prototype.constructor=zr,zr.prototype.toJSON=function(){var e=ye.prototype.toJSON.call(this);return Zr(this.parameters.shapes,this.parameters.options,e)},Br.prototype=Object.create(Oe.prototype),Br.prototype.constructor=Br,Br.prototype.toJSON=function(){var e=Oe.prototype.toJSON.call(this);return Zr(this.parameters.shapes,this.parameters.options,e)};var jr={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new B(o,a),new B(s,l),new B(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],f=t[3*i],p=t[3*i+1],h=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<.01?[new B(a,1-l),new B(c,1-d),new B(f,1-h),new B(m,1-v)]:[new B(s,1-l),new B(u,1-d),new B(p,1-h),new B(g,1-v)]}};function Zr(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Hr(e,t){ye.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Ur(e,t)),this.mergeVertices()}function Ur(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ye;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Br.call(this,r,t),this.type="TextBufferGeometry"}function Vr(e,t,n,r,i,o,a){ye.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Gr(e,t,n,r,i,o,a)),this.mergeVertices()}function Gr(e,t,n,r,i,o,a){Oe.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,l,c=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),u=0,d=[],f=new H,p=new H,h=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var y=[],b=l/n;for(s=0;s<=t;s++){var x=s/t;f.x=-e*Math.cos(r+x*i)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+x*i)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),p.set(f.x,f.y,f.z).normalize(),g.push(p.x,p.y,p.z),v.push(x,1-b),y.push(u++)}d.push(y)}for(l=0;l<n;l++)for(s=0;s<t;s++){var w=d[l][s+1],_=d[l][s],S=d[l+1][s],C=d[l+1][s+1];(0!==l||o>0)&&h.push(w,_,C),(l!==n-1||c<Math.PI)&&h.push(_,S,C)}this.setIndex(h),this.addAttribute("position",new Te(m,3)),this.addAttribute("normal",new Te(g,3)),this.addAttribute("uv",new Te(v,2))}function Wr(e,t,n,r,i,o){ye.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new $r(e,t,n,r,i,o)),this.mergeVertices()}function $r(e,t,n,r,i,o){Oe.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,l,c=[],u=[],d=[],f=[],p=e,h=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new H,g=new B;for(s=0;s<=r;s++){for(l=0;l<=n;l++)a=i+l/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),u.push(m.x,m.y,m.z),d.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,f.push(g.x,g.y);p+=h}for(s=0;s<r;s++){var v=s*(n+1);for(l=0;l<n;l++){var y=a=l+v,b=a+n+1,x=a+n+2,w=a+1;c.push(y,b,w),c.push(b,x,w)}}this.setIndex(c),this.addAttribute("position",new Te(u,3)),this.addAttribute("normal",new Te(d,3)),this.addAttribute("uv",new Te(f,2))}function qr(e,t,n,r){ye.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Yr(e,t,n,r)),this.mergeVertices()}function Yr(e,t,n,r){Oe.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=z.clamp(r,0,2*Math.PI);var i,o,a,s=[],l=[],c=[],u=1/t,d=new H,f=new B;for(o=0;o<=t;o++){var p=n+o*u*r,h=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)d.x=e[a].x*h,d.y=e[a].y,d.z=e[a].x*m,l.push(d.x,d.y,d.z),f.x=o/t,f.y=a/(e.length-1),c.push(f.x,f.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var g=i=a+o*e.length,v=i+e.length,y=i+e.length+1,b=i+1;s.push(g,v,b),s.push(v,y,b)}if(this.setIndex(s),this.addAttribute("position",new Te(l,3)),this.addAttribute("uv",new Te(c,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,w=new H,_=new H,S=new H;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)w.x=x[a+0],w.y=x[a+1],w.z=x[a+2],_.x=x[i+a+0],_.y=x[i+a+1],_.z=x[i+a+2],S.addVectors(w,_).normalize(),x[a+0]=x[i+a+0]=S.x,x[a+1]=x[i+a+1]=S.y,x[a+2]=x[i+a+2]=S.z}}function Xr(e,t){ye.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Kr(e,t)),this.mergeVertices()}function Kr(e,t){Oe.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(a,s,l),a+=s,s=0;function c(e){var a,l,c,u=r.length/3,d=e.extractPoints(t),f=d.shape,p=d.holes;if(!1===Dr.isClockWise(f))for(f=f.reverse(),a=0,l=p.length;a<l;a++)c=p[a],!0===Dr.isClockWise(c)&&(p[a]=c.reverse());var h=Dr.triangulateShape(f,p);for(a=0,l=p.length;a<l;a++)c=p[a],f=f.concat(c);for(a=0,l=f.length;a<l;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=h.length;a<l;a++){var g=h[a],v=g[0]+u,y=g[1]+u,b=g[2]+u;n.push(v,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new Te(r,3)),this.addAttribute("normal",new Te(i,3)),this.addAttribute("uv",new Te(o,2))}function Jr(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Qr(e,t){Oe.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(z.DEG2RAD*t),l=[0,0],c={},u=["a","b","c"];e.isBufferGeometry?(o=new ye).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var d=o.vertices,f=o.faces,p=0,h=f.length;p<h;p++)for(var m=f[p],g=0;g<3;g++)n=m[u[g]],r=m[u[(g+1)%3]],l[0]=Math.min(n,r),l[1]=Math.max(n,r),void 0===c[i=l[0]+","+l[1]]?c[i]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[i].face2=p;for(i in c){var v=c[i];if(void 0===v.face2||f[v.face1].normal.dot(f[v.face2].normal)<=s){var y=d[v.index1];a.push(y.x,y.y,y.z),y=d[v.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new Te(a,3))}function ei(e,t,n,r,i,o,a,s){ye.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new ti(e,t,n,r,i,o,a,s)),this.mergeVertices()}function ti(e,t,n,r,i,o,a,s){Oe.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],u=[],d=[],f=[],p=0,h=[],m=n/2,g=0;function v(n){var i,o,h,v=new B,y=new H,b=0,x=!0===n?e:t,w=!0===n?1:-1;for(o=p,i=1;i<=r;i++)u.push(0,m*w,0),d.push(0,w,0),f.push(.5,.5),p++;for(h=p,i=0;i<=r;i++){var _=i/r*s+a,S=Math.cos(_),C=Math.sin(_);y.x=x*C,y.y=m*w,y.z=x*S,u.push(y.x,y.y,y.z),d.push(0,w,0),v.x=.5*S+.5,v.y=.5*C*w+.5,f.push(v.x,v.y),p++}for(i=0;i<r;i++){var k=o+i,M=h+i;!0===n?c.push(M,M+1,k):c.push(M+1,M,k),b+=3}l.addGroup(g,b,!0===n?1:2),g+=b}!function(){var o,v,y=new H,b=new H,x=0,w=(t-e)/n;for(v=0;v<=i;v++){var _=[],S=v/i,C=S*(t-e)+e;for(o=0;o<=r;o++){var k=o/r,M=k*s+a,T=Math.sin(M),A=Math.cos(M);b.x=C*T,b.y=-S*n+m,b.z=C*A,u.push(b.x,b.y,b.z),y.set(T,w,A).normalize(),d.push(y.x,y.y,y.z),f.push(k,1-S),_.push(p++)}h.push(_)}for(o=0;o<r;o++)for(v=0;v<i;v++){var E=h[v][o],P=h[v+1][o],R=h[v+1][o+1],O=h[v][o+1];c.push(E,P,O),c.push(P,R,O),x+=6}l.addGroup(g,x,0),g+=x}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.addAttribute("position",new Te(u,3)),this.addAttribute("normal",new Te(d,3)),this.addAttribute("uv",new Te(f,2))}function ni(e,t,n,r,i,o,a){ei.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ri(e,t,n,r,i,o,a){ti.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ii(e,t,n,r){ye.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new oi(e,t,n,r)),this.mergeVertices()}function oi(e,t,n,r){Oe.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],l=[],c=[],u=new H,d=new B;for(s.push(0,0,0),l.push(0,0,1),c.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var f=n+o/t*r;u.x=e*Math.cos(f),u.y=e*Math.sin(f),s.push(u.x,u.y,u.z),l.push(0,0,1),d.x=(s[i]/e+1)/2,d.y=(s[i+1]/e+1)/2,c.push(d.x,d.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new Te(s,3)),this.addAttribute("normal",new Te(l,3)),this.addAttribute("uv",new Te(c,2))}Hr.prototype=Object.create(ye.prototype),Hr.prototype.constructor=Hr,Ur.prototype=Object.create(Br.prototype),Ur.prototype.constructor=Ur,Vr.prototype=Object.create(ye.prototype),Vr.prototype.constructor=Vr,Gr.prototype=Object.create(Oe.prototype),Gr.prototype.constructor=Gr,Wr.prototype=Object.create(ye.prototype),Wr.prototype.constructor=Wr,$r.prototype=Object.create(Oe.prototype),$r.prototype.constructor=$r,qr.prototype=Object.create(ye.prototype),qr.prototype.constructor=qr,Yr.prototype=Object.create(Oe.prototype),Yr.prototype.constructor=Yr,Xr.prototype=Object.create(ye.prototype),Xr.prototype.constructor=Xr,Xr.prototype.toJSON=function(){var e=ye.prototype.toJSON.call(this);return Jr(this.parameters.shapes,e)},Kr.prototype=Object.create(Oe.prototype),Kr.prototype.constructor=Kr,Kr.prototype.toJSON=function(){var e=Oe.prototype.toJSON.call(this);return Jr(this.parameters.shapes,e)},Qr.prototype=Object.create(Oe.prototype),Qr.prototype.constructor=Qr,ei.prototype=Object.create(ye.prototype),ei.prototype.constructor=ei,ti.prototype=Object.create(Oe.prototype),ti.prototype.constructor=ti,ni.prototype=Object.create(ei.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(ti.prototype),ri.prototype.constructor=ri,ii.prototype=Object.create(ye.prototype),ii.prototype.constructor=ii,oi.prototype=Object.create(Oe.prototype),oi.prototype.constructor=oi;var ai=Object.freeze({WireframeGeometry:qn,ParametricGeometry:Yn,ParametricBufferGeometry:Xn,TetrahedronGeometry:Qn,TetrahedronBufferGeometry:er,OctahedronGeometry:tr,OctahedronBufferGeometry:nr,IcosahedronGeometry:rr,IcosahedronBufferGeometry:ir,DodecahedronGeometry:or,DodecahedronBufferGeometry:ar,PolyhedronGeometry:Kn,PolyhedronBufferGeometry:Jn,TubeGeometry:sr,TubeBufferGeometry:lr,TorusKnotGeometry:cr,TorusKnotBufferGeometry:ur,TorusGeometry:dr,TorusBufferGeometry:fr,TextGeometry:Hr,TextBufferGeometry:Ur,SphereGeometry:Vr,SphereBufferGeometry:Gr,RingGeometry:Wr,RingBufferGeometry:$r,PlaneGeometry:De,PlaneBufferGeometry:Ne,LatheGeometry:qr,LatheBufferGeometry:Yr,ShapeGeometry:Xr,ShapeBufferGeometry:Kr,ExtrudeGeometry:zr,ExtrudeBufferGeometry:Br,EdgesGeometry:Qr,ConeGeometry:ni,ConeBufferGeometry:ri,CylinderGeometry:ei,CylinderBufferGeometry:ti,CircleGeometry:ii,CircleBufferGeometry:oi,BoxGeometry:Ie,BoxBufferGeometry:Le});function si(e){ze.call(this),this.type="ShadowMaterial",this.color=new ie(0),this.transparent=!0,this.setValues(e)}function li(e){je.call(this,e),this.type="RawShaderMaterial"}function ci(e){ze.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ie(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new B(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ui(e){ci.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function di(e){ze.call(this),this.type="MeshPhongMaterial",this.color=new ie(16777215),this.specular=new ie(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new B(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function fi(e){di.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function pi(e){ze.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new B(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function hi(e){ze.call(this),this.type="MeshLambertMaterial",this.color=new ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function mi(e){zn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}si.prototype=Object.create(ze.prototype),si.prototype.constructor=si,si.prototype.isShadowMaterial=!0,si.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.color.copy(e.color),this},li.prototype=Object.create(je.prototype),li.prototype.constructor=li,li.prototype.isRawShaderMaterial=!0,ci.prototype=Object.create(ze.prototype),ci.prototype.constructor=ci,ci.prototype.isMeshStandardMaterial=!0,ci.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ui.prototype=Object.create(ci.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshPhysicalMaterial=!0,ui.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},di.prototype=Object.create(ze.prototype),di.prototype.constructor=di,di.prototype.isMeshPhongMaterial=!0,di.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},fi.prototype=Object.create(di.prototype),fi.prototype.constructor=fi,fi.prototype.isMeshToonMaterial=!0,fi.prototype.copy=function(e){return di.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},pi.prototype=Object.create(ze.prototype),pi.prototype.constructor=pi,pi.prototype.isMeshNormalMaterial=!0,pi.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},hi.prototype=Object.create(ze.prototype),hi.prototype.constructor=hi,hi.prototype.isMeshLambertMaterial=!0,hi.prototype.copy=function(e){return ze.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},mi.prototype=Object.create(zn.prototype),mi.prototype.constructor=mi,mi.prototype.isLineDashedMaterial=!0,mi.prototype.copy=function(e){return zn.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var gi=Object.freeze({ShadowMaterial:si,SpriteMaterial:On,RawShaderMaterial:li,ShaderMaterial:je,PointsMaterial:Hn,MeshPhysicalMaterial:ui,MeshStandardMaterial:ci,MeshPhongMaterial:di,MeshToonMaterial:fi,MeshNormalMaterial:pi,MeshLambertMaterial:hi,MeshDepthMaterial:mn,MeshDistanceMaterial:gn,MeshBasicMaterial:Be,LineDashedMaterial:mi,LineBasicMaterial:zn,Material:ze}),vi={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function yi(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var bi=new yi,xi={};function wi(e){this.manager=void 0!==e?e:bi}function _i(e){this.manager=void 0!==e?e:bi}function Si(e){this.manager=void 0!==e?e:bi}function Ci(e){this.manager=void 0!==e?e:bi}function ki(){this.type="Curve",this.arcLengthDivisions=200}function Mi(e,t,n,r,i,o,a,s){ki.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ti(e,t,n,r,i,o){Mi.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Ai(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,l*=a,c*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Object.assign(wi.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=vi.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===xi[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],c=a[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var u,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var f=new Uint8Array(c.length),p=0;p<c.length;p++)f[p]=c.charCodeAt(p);u="blob"===d?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var h=new DOMParser;u=h.parseFromString(c,s);break;case"json":u=JSON.parse(c);break;default:u=c}window.setTimeout((function(){t&&t(u),i.manager.itemEnd(e)}),0)}catch(v){window.setTimeout((function(){r&&r(v),i.manager.itemEnd(e),i.manager.itemError(e)}),0)}}else{xi[e]=[],xi[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response;vi.add(e,n);var r=xi[e];if(delete xi[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=xi[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=xi[e];delete xi[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return i.manager.itemStart(e),m}xi[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:bi,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Gn;a.image=o;var s=new wi(this.manager);function l(l){s.load(e[l],(function(e){var n=i._parser(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(a.minFilter=b),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,u=0,d=e.length;u<d;++u)l(u);else s.load(e,(function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=b),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:bi,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,o=new X,a=new wi(this.manager);return a.setResponseType("arraybuffer"),a.load(e,(function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:h,o.wrapT=void 0!==n.wrapT?n.wrapT:h,o.magFilter=void 0!==n.magFilter?n.magFilter:b,o.minFilter=void 0!==n.minFilter?n.minFilter:x,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=b),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}),Object.assign(_i.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=vi.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),vi.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Si.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new tt,o=new _i(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ci.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new W,o=new _i(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?T:A,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ki.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(r[i=l]===n)return i/(o-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n);return this.getPoint(r).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new H,a=[],s=[],l=[],c=new H,u=new j;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new H,l[0]=new H;var d=Number.MAX_VALUE,f=Math.abs(a[0].x),p=Math.abs(a[0].y),h=Math.abs(a[0].z);for(f<=d&&(d=f,o.set(1,0,0)),p<=d&&(d=p,o.set(0,1,0)),h<=d&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),l[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(z.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(u.makeRotationAxis(c,i))),l[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(z.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(u.makeRotationAxis(a[n],i*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Mi.prototype=Object.create(ki.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isEllipseCurve=!0,Mi.prototype.getPoint=function(e,t){for(var n=t||new B,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=s-this.aX,f=l-this.aY;s=d*c-f*u+this.aX,l=d*u+f*c+this.aY}return n.set(s,l)},Mi.prototype.copy=function(e){return ki.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Mi.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Mi.prototype.fromJSON=function(e){return ki.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ti.prototype=Object.create(Mi.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isArcCurve=!0;var Ei=new H,Pi=new Ai,Ri=new Ai,Oi=new Ai;function Ii(e,t,n,r){ki.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Li(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Di(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Ni(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Fi(e,t,n,r){ki.call(this),this.type="CubicBezierCurve",this.v0=e||new B,this.v1=t||new B,this.v2=n||new B,this.v3=r||new B}function zi(e,t,n,r){ki.call(this),this.type="CubicBezierCurve3",this.v0=e||new H,this.v1=t||new H,this.v2=n||new H,this.v3=r||new H}function Bi(e,t){ki.call(this),this.type="LineCurve",this.v1=e||new B,this.v2=t||new B}function ji(e,t){ki.call(this),this.type="LineCurve3",this.v1=e||new H,this.v2=t||new H}function Zi(e,t,n){ki.call(this),this.type="QuadraticBezierCurve",this.v0=e||new B,this.v1=t||new B,this.v2=n||new B}function Hi(e,t,n){ki.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new H,this.v1=t||new H,this.v2=n||new H}function Ui(e){ki.call(this),this.type="SplineCurve",this.points=e||[]}Ii.prototype=Object.create(ki.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isCatmullRomCurve3=!0,Ii.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new H,s=this.points,l=s.length,c=(l-(this.closed?0:1))*e,u=Math.floor(c),d=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/l)+1)*l:0===d&&u===l-1&&(u=l-2,d=1),this.closed||u>0?n=s[(u-1)%l]:(Ei.subVectors(s[0],s[1]).add(s[0]),n=Ei),r=s[u%l],i=s[(u+1)%l],this.closed||u+2<l?o=s[(u+2)%l]:(Ei.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=Ei),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),f),h=Math.pow(r.distanceToSquared(i),f),m=Math.pow(i.distanceToSquared(o),f);h<1e-4&&(h=1),p<1e-4&&(p=h),m<1e-4&&(m=h),Pi.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,h,m),Ri.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,h,m),Oi.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,h,m)}else"catmullrom"===this.curveType&&(Pi.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Ri.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Oi.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Pi.calc(d),Ri.calc(d),Oi.calc(d)),a},Ii.prototype.copy=function(e){ki.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ii.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Ii.prototype.fromJSON=function(e){ki.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new H).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Fi.prototype=Object.create(ki.prototype),Fi.prototype.constructor=Fi,Fi.prototype.isCubicBezierCurve=!0,Fi.prototype.getPoint=function(e,t){var n=t||new B,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ni(e,r.x,i.x,o.x,a.x),Ni(e,r.y,i.y,o.y,a.y)),n},Fi.prototype.copy=function(e){return ki.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Fi.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Fi.prototype.fromJSON=function(e){return ki.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},zi.prototype=Object.create(ki.prototype),zi.prototype.constructor=zi,zi.prototype.isCubicBezierCurve3=!0,zi.prototype.getPoint=function(e,t){var n=t||new H,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ni(e,r.x,i.x,o.x,a.x),Ni(e,r.y,i.y,o.y,a.y),Ni(e,r.z,i.z,o.z,a.z)),n},zi.prototype.copy=function(e){return ki.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},zi.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},zi.prototype.fromJSON=function(e){return ki.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Bi.prototype=Object.create(ki.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isLineCurve=!0,Bi.prototype.getPoint=function(e,t){var n=t||new B;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Bi.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Bi.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Bi.prototype.copy=function(e){return ki.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Bi.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Bi.prototype.fromJSON=function(e){return ki.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ji.prototype=Object.create(ki.prototype),ji.prototype.constructor=ji,ji.prototype.isLineCurve3=!0,ji.prototype.getPoint=function(e,t){var n=t||new H;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ji.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ji.prototype.copy=function(e){return ki.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ji.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ji.prototype.fromJSON=function(e){return ki.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Zi.prototype=Object.create(ki.prototype),Zi.prototype.constructor=Zi,Zi.prototype.isQuadraticBezierCurve=!0,Zi.prototype.getPoint=function(e,t){var n=t||new B,r=this.v0,i=this.v1,o=this.v2;return n.set(Di(e,r.x,i.x,o.x),Di(e,r.y,i.y,o.y)),n},Zi.prototype.copy=function(e){return ki.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Zi.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Zi.prototype.fromJSON=function(e){return ki.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hi.prototype=Object.create(ki.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isQuadraticBezierCurve3=!0,Hi.prototype.getPoint=function(e,t){var n=t||new H,r=this.v0,i=this.v1,o=this.v2;return n.set(Di(e,r.x,i.x,o.x),Di(e,r.y,i.y,o.y),Di(e,r.z,i.z,o.z)),n},Hi.prototype.copy=function(e){return ki.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hi.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hi.prototype.fromJSON=function(e){return ki.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ui.prototype=Object.create(ki.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isSplineCurve=!0,Ui.prototype.getPoint=function(e,t){var n=t||new B,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(Li(a,s.x,l.x,c.x,u.x),Li(a,s.y,l.y,c.y,u.y)),n},Ui.prototype.copy=function(e){ki.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Ui.prototype.toJSON=function(){var e=ki.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Ui.prototype.fromJSON=function(e){ki.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new B).fromArray(r))}return this};var Vi=Object.freeze({ArcCurve:Ti,CatmullRomCurve3:Ii,CubicBezierCurve:Fi,CubicBezierCurve3:zi,EllipseCurve:Mi,LineCurve:Bi,LineCurve3:ji,QuadraticBezierCurve:Zi,QuadraticBezierCurve3:Hi,SplineCurve:Ui});function Gi(){ki.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Wi(e){Gi.call(this),this.type="Path",this.currentPoint=new B,e&&this.setFromPoints(e)}function $i(e){Wi.call(this,e),this.uuid=z.generateUUID(),this.type="Shape",this.holes=[]}function qi(e,t){fe.call(this),this.type="Light",this.color=new ie(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Yi(e,t,n){qi.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(fe.DefaultUp),this.updateMatrix(),this.groundColor=new ie(t)}function Xi(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new B(512,512),this.map=null,this.matrix=new j}function Ki(){Xi.call(this,new _n(50,1,.5,500))}function Ji(e,t,n,r,i,o){qi.call(this,e,t),this.type="SpotLight",this.position.copy(fe.DefaultUp),this.updateMatrix(),this.target=new fe,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Ki}function Qi(e,t,n,r){qi.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Xi(new _n(90,1,.5,500))}function eo(){Xi.call(this,new he(-5,5,5,-5,.5,500))}function to(e,t){qi.call(this,e,t),this.type="DirectionalLight",this.position.copy(fe.DefaultUp),this.updateMatrix(),this.target=new fe,this.shadow=new eo}function no(e,t){qi.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ro(e,t,n,r){qi.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Gi.prototype=Object.assign(Object.create(ki.prototype),{constructor:Gi,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Bi(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){ki.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=ki.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){ki.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Vi[r.type]).fromJSON(r))}return this}}),Wi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Wi,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Bi(this.currentPoint.clone(),new B(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Zi(this.currentPoint.clone(),new B(e,t),new B(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new Fi(this.currentPoint.clone(),new B(e,t),new B(n,r),new B(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new Ui([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+l,t+c,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var l=new Mi(e,t,n,r,i,o,a,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return Gi.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Gi.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Gi.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),$i.prototype=Object.assign(Object.create(Wi.prototype),{constructor:$i,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Wi.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Wi.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Wi.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Wi).fromJSON(r))}return this}}),qi.prototype=Object.assign(Object.create(fe.prototype),{constructor:qi,isLight:!0,copy:function(e){return fe.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=fe.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Yi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Yi,isHemisphereLight:!0,copy:function(e){return qi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Xi.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ki.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ki,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*z.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),Ji.prototype=Object.assign(Object.create(qi.prototype),{constructor:Ji,isSpotLight:!0,copy:function(e){return qi.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Qi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Qi,isPointLight:!0,copy:function(e){return qi.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),eo.prototype=Object.assign(Object.create(Xi.prototype),{constructor:eo}),to.prototype=Object.assign(Object.create(qi.prototype),{constructor:to,isDirectionalLight:!0,copy:function(e){return qi.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),no.prototype=Object.assign(Object.create(qi.prototype),{constructor:no,isAmbientLight:!0}),ro.prototype=Object.assign(Object.create(qi.prototype),{constructor:ro,isRectAreaLight:!0,copy:function(e){return qi.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=qi.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var io={arraySlice:function(e,t,n){return io.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,l=0;l!==t;++l)i[a++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function oo(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function ao(e,t,n,r){oo.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function so(e,t,n,r){oo.call(this,e,t,n,r)}function lo(e,t,n,r){oo.call(this,e,t,n,r)}function co(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=io.convertArray(t,this.TimeBufferType),this.values=io.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function uo(e,t,n){co.call(this,e,t,n)}function fo(e,t,n,r){co.call(this,e,t,n,r)}function po(e,t,n,r){co.call(this,e,t,n,r)}function ho(e,t,n,r){oo.call(this,e,t,n,r)}function mo(e,t,n,r){co.call(this,e,t,n,r)}function go(e,t,n,r){co.call(this,e,t,n,r)}function vo(e,t,n,r){co.call(this,e,t,n,r)}function yo(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=z.generateUUID(),this.duration<0&&this.resetDuration()}function bo(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return po;case"vector":case"vector2":case"vector3":case"vector4":return vo;case"color":return fo;case"quaternion":return mo;case"bool":case"boolean":return uo;case"string":return go}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];io.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function xo(e){this.manager=void 0!==e?e:bi,this.textures={}}function wo(e){this.manager=void 0!==e?e:bi}Object.assign(oo.prototype,{evaluate:function(e){var t=this,n=this.parameterPositions,r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{var a;n:{r:if(!(e<i)){for(var s=r+2;;){if(void 0===i){if(e<o)break r;return r=n.length,t._cachedIndex=r,t.afterEnd_(r-1,e,o)}if(r===s)break;if(o=i,e<(i=n[++r]))break t}a=n.length;break n}if(e>=o)break e;var l=n[1];e<l&&(r=2,o=l);for(s=r-2;;){if(void 0===o)return t._cachedIndex=0,t.beforeStart_(0,e,i);if(r===s)break;if(i=o,e>=(o=n[--r-1]))break t}a=r,r=0}for(;r<a;){var c=r+a>>>1;e<n[c]?a=c:r=c+1}if(i=n[r],void 0===(o=n[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,o,e)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(oo.prototype,{beforeStart_:oo.prototype.copySampleValue_,afterEnd_:oo.prototype.copySampleValue_}),ao.prototype=Object.assign(Object.create(oo.prototype),{constructor:ao,DefaultSettings_:{endingStart:L,endingEnd:L},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case D:i=e,a=2*t-n;break;case N:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case D:o=e,s=2*n-t;break;case N:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(n-t)/(r-t),h=p*p,m=h*p,g=-d*m+2*d*h-d*p,v=(1+d)*m+(-1.5-2*d)*h+(-.5+d)*p+1,y=(-1-f)*m+(1.5+f)*h+.5*p,b=f*m-f*h,x=0;x!==a;++x)i[x]=g*o[c+x]+v*o[l+x]+y*o[s+x]+b*o[u+x];return i}}),so.prototype=Object.assign(Object.create(oo.prototype),{constructor:so,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c,d=0;d!==a;++d)i[d]=o[l+d]*u+o[s+d]*c;return i}}),lo.prototype=Object.assign(Object.create(oo.prototype),{constructor:lo,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(co,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:io.convertArray(e.times,Array),values:io.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(co.prototype,{constructor:co,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:O,InterpolantFactoryMethodDiscrete:function(e){return new lo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new so(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ao(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case R:t=this.InterpolantFactoryMethodDiscrete;break;case O:t=this.InterpolantFactoryMethodLinear;break;case I:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return R;case this.InterpolantFactoryMethodLinear:return O;case this.InterpolantFactoryMethodSmooth:return I}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=io.arraySlice(n,i,o),this.values=io.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=this,t=!0,n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var r=this.times,i=this.values,o=r.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,s=0;s!==o;s++){var l=r[s];if("number"===typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",e,s,l),t=!1;break}if(null!==a&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",e,s,l,a),t=!1;break}a=l}if(void 0!==i&&io.isTypedArray(i)){s=0;for(var c=i.length;s!==c;++s){var u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",e,s,u),t=!1;break}}}return t},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===I,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(r)s=!0;else for(var c=a*n,u=c-n,d=c+n,f=0;f!==n;++f){var p=t[c+f];if(p!==t[u+f]||p!==t[d+f]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var h=a*n,m=i*n;for(f=0;f!==n;++f)t[m+f]=t[h+f]}++i}}if(o>0){e[i]=e[o];for(h=o*n,m=i*n,f=0;f!==n;++f)t[m+f]=t[h+f];++i}return i!==e.length&&(this.times=io.arraySlice(e,0,i),this.values=io.arraySlice(t,0,i*n)),this}}),uo.prototype=Object.assign(Object.create(co.prototype),{constructor:uo,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:R,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fo.prototype=Object.assign(Object.create(co.prototype),{constructor:fo,ValueTypeName:"color"}),po.prototype=Object.assign(Object.create(co.prototype),{constructor:po,ValueTypeName:"number"}),ho.prototype=Object.assign(Object.create(oo.prototype),{constructor:ho,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(n-t)/(r-t),c=s+a;s!==c;s+=4)Z.slerpFlat(i,0,o,s-a,o,s,l);return i}}),mo.prototype=Object.assign(Object.create(co.prototype),{constructor:mo,ValueTypeName:"quaternion",DefaultInterpolation:O,InterpolantFactoryMethodLinear:function(e){return new ho(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),go.prototype=Object.assign(Object.create(co.prototype),{constructor:go,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:R,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),vo.prototype=Object.assign(Object.create(co.prototype),{constructor:vo,ValueTypeName:"vector"}),Object.assign(yo,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(bo(n[i]).scale(r));return new yo(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(co.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);var c=io.getKeyframeOrder(s);s=io.sortedArray(s,1,c),l=io.sortedArray(l,1,c),r||0!==s[0]||(s.push(i),l.push(l[0])),o.push(new po(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new yo(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(i);if(l&&l.length>1){var c=r[d=l[1]];c||(r[d]=c=[]),c.push(s)}}var u=[];for(var d in r)u.push(yo.CreateFromMorphTargetSequence(d,r[d],t,n));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];io.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)u[c[d].morphTargets[f]]=-1;for(var p in u){var h=[],m=[];for(f=0;f!==c[d].morphTargets.length;++f){var g=c[d];h.push(g.time),m.push(g.morphTarget===p?1:0)}r.push(new po(".morphTargetInfluence["+p+"]",h,m))}o=u.length*(a||1)}else{var v=".bones["+t[l].name+"]";n(vo,v+".position",c,"pos",r),n(mo,v+".quaternion",c,"rot",r),n(vo,v+".scale",c,"scl",r)}}return 0===r.length?null:new yo(i,o,r)}}),Object.assign(yo.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(xo.prototype,{load:function(e,t,n,r){var i=this;new wi(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new gi[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new B).fromArray(i)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r}}),Object.assign(wo.prototype,{load:function(e,t,n,r){var i=this;new wi(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=new Oe,n=e.data.index;if(void 0!==n){var r=new _o[n.type](n.array);t.setIndex(new be(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o];r=new _o[a.type](a.array);t.addAttribute(o,new be(r,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,c=s.length;l!==c;++l){var u=s[l];t.addGroup(u.start,u.count,u.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new H;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new J(f,d.radius)}return t}});var _o={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function So(){}So.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(So.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},t=new ie,n=new Ci,r=new xo;return function(i,o,a){var s={};function l(e,t,r,i,l){var c,u=o+e,d=So.Handlers.get(u);null!==d?c=d.load(u):(n.setCrossOrigin(a),c=n.load(u)),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=p),1!==t[1]&&(c.wrapT=p)),void 0!==r&&c.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(c.wrapS=p),"mirror"===i[0]&&(c.wrapS=m),"repeat"===i[1]&&(c.wrapT=p),"mirror"===i[1]&&(c.wrapT=m)),void 0!==l&&(c.anisotropy=l);var f=z.generateUUID();return s[f]=c,f}var c={uuid:z.generateUUID(),type:"MeshLambertMaterial"};for(var u in i){var d=i[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":c.name=d;break;case"blending":c.blending=e[d];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(d).getHex();break;case"colorSpecular":c.specular=t.fromArray(d).getHex();break;case"colorEmissive":c.emissive=t.fromArray(d).getHex();break;case"specularCoef":c.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=l(d,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapEmissive":c.emissiveMap=l(d,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapLight":c.lightMap=l(d,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapAO":c.aoMap=l(d,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapBump":c.bumpMap=l(d,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=d;break;case"mapNormal":c.normalMap=l(d,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=d;break;case"mapSpecular":c.specularMap=l(d,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapMetalness":c.metalnessMap=l(d,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapRoughness":c.roughnessMap=l(d,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapAlpha":c.alphaMap=l(d,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"flipSided":c.side=1;break;case"doubleSided":c.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[u]=d;break;case"vertexColors":!0===d&&(c.vertexColors=2),"face"===d&&(c.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,d)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),r.setTextures(s),r.parse(c)}}()});var Co=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function ko(e){"boolean"===typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:bi,this.withCredentials=!1}Object.assign(ko.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Co(e),a=new wi(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,(function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var l=i.parse(r,o);t(l.geometry,l.materials)}),n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new ye;return function(e,t){function n(e,t){return e&1<<t}var r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C,k,M,T,A=e.faces,E=e.vertices,P=e.normals,R=e.colors,O=e.scale,I=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&I++;for(r=0;r<I;r++)t.faceVertexUvs[r]=[]}for(a=0,s=E.length;a<s;)(x=new H).x=E[a++]*O,x.y=E[a++]*O,x.z=E[a++]*O,t.vertices.push(x);for(a=0,s=A.length;a<s;)if(p=n(f=A[a++],0),h=n(f,1),m=n(f,3),g=n(f,4),v=n(f,5),y=n(f,6),b=n(f,7),p){if((_=new ge).a=A[a],_.b=A[a+1],_.c=A[a+3],(S=new ge).a=A[a+1],S.b=A[a+2],S.c=A[a+3],a+=4,h&&(d=A[a++],_.materialIndex=d,S.materialIndex=d),o=t.faces.length,m)for(r=0;r<I;r++)for(M=e.uvs[r],t.faceVertexUvs[r][o]=[],t.faceVertexUvs[r][o+1]=[],i=0;i<4;i++)T=new B(M[2*(u=A[a++])],M[2*u+1]),2!==i&&t.faceVertexUvs[r][o].push(T),0!==i&&t.faceVertexUvs[r][o+1].push(T);if(g&&(c=3*A[a++],_.normal.set(P[c++],P[c++],P[c]),S.normal.copy(_.normal)),v)for(r=0;r<4;r++)c=3*A[a++],k=new H(P[c++],P[c++],P[c]),2!==r&&_.vertexNormals.push(k),0!==r&&S.vertexNormals.push(k);if(y&&(C=R[l=A[a++]],_.color.setHex(C),S.color.setHex(C)),b)for(r=0;r<4;r++)C=R[l=A[a++]],2!==r&&_.vertexColors.push(new ie(C)),0!==r&&S.vertexColors.push(new ie(C));t.faces.push(_),t.faces.push(S)}else{if((w=new ge).a=A[a++],w.b=A[a++],w.c=A[a++],h&&(d=A[a++],w.materialIndex=d),o=t.faces.length,m)for(r=0;r<I;r++)for(M=e.uvs[r],t.faceVertexUvs[r][o]=[],i=0;i<3;i++)T=new B(M[2*(u=A[a++])],M[2*u+1]),t.faceVertexUvs[r][o].push(T);if(g&&(c=3*A[a++],w.normal.set(P[c++],P[c++],P[c])),v)for(r=0;r<3;r++)c=3*A[a++],k=new H(P[c++],P[c++],P[c]),w.vertexNormals.push(k);if(y&&(l=A[a++],w.color.setHex(R[l])),b)for(r=0;r<3;r++)l=A[a++],w.vertexColors.push(new ie(R[l]));t.faces.push(w)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n){var o=e.skinWeights[r],a=n>1?e.skinWeights[r+1]:0,s=n>2?e.skinWeights[r+2]:0,l=n>3?e.skinWeights[r+3]:0;t.skinWeights.push(new $(o,a,s,l))}if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=n){var c=e.skinIndices[r],u=n>1?e.skinIndices[r+1]:0,d=n>2?e.skinIndices[r+2]:0,f=n>3?e.skinIndices[r+3]:0;t.skinIndices.push(new $(c,u,d,f))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,l=a.length;s<l;s+=3){var c=new H;c.x=a[s]*n,c.y=a[s+1]*n,c.z=a[s+2]*n,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var u=t.faces,d=e.morphColors[0].colors;for(r=0,i=u.length;r<i;r++)u[r].color.fromArray(d,3*r)}}(e,n),function(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=yo.parseAnimation(r[i],t.bones);o&&n.push(o)}if(t.morphTargets){var a=yo.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:So.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(function(e){this.manager=void 0!==e?e:bi,this.texturePath=""}.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new wi(i.manager).load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")}),n,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new $i).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new ko,i=new wo,o=0,a=e.length;o<a;o++){var s,l=e[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new ai[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new ai[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new ai[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new ai[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new ai[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new ai[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new ai[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new ai[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new ai[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new ai[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new ai[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new ai[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],u=0,d=l.shapes.length;u<d;u++){var f=t[l.shapes[u]];c.push(f)}s=new ai[l.type](c,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],u=0,d=l.shapes.length;u<d;u++){f=t[l.shapes[u]];c.push(f)}var p=l.options.extrudePath;void 0!==p&&(l.options.extrudePath=(new Vi[p.type]).fromJSON(p)),s=new ai[l.type](c,l.options);break;case"BufferGeometry":s=i.parse(l);break;case"Geometry":s=r.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),!0===s.isBufferGeometry&&void 0!==l.userData&&(s.userData=l.userData),n[l.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new xo;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=e[i];if("MultiMaterial"===a.type){for(var s=[],l=0;l<a.materials.length;l++)s.push(r.parse(a.materials[l]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=yo.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemEnd(e),n.manager.itemError(e)}))}if(void 0!==e&&e.length>0){var o=new _i(new yi(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],c=l.url;if(Array.isArray(c)){r[l.uuid]=[];for(var u=0,d=c.length;u<d;u++){var f=c[u],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.texturePath+f;r[l.uuid].push(i(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;r[l.uuid]=i(p)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new tt(t[s.image]):new W(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,To)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],Ao),a.wrapT=n(s.wrap[1],Ao)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,Eo)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,Eo)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new En,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new ie(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new An(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Tn(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new _n(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new he(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new no(e.color,e.intensity);break;case"DirectionalLight":r=new to(e.color,e.intensity);break;case"PointLight":r=new Qi(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new ro(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new Ji(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new Yi(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new Fn(a,s):new Ue(a,s);break;case"LOD":r=new Ln;break;case"Line":r=new Bn(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new Zn(i(e.geometry),o(e.material));break;case"LineSegments":r=new jn(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Un(i(e.geometry),o(e.material));break;case"Sprite":r=new In(o(e.material));break;case"Group":r=new wn;break;default:r=new fe}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,c=0;c<l.length;c++)r.add(this.parseObject(l[c],t,n));if("LOD"===e.type)for(var u=e.levels,d=0;d<u.length;d++){var f=u[d],p=r.getObjectByProperty("uuid",f.object);void 0!==p&&r.addLevel(p,f.distance)}return r}});var Mo,To={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Ao={RepeatWrapping:p,ClampToEdgeWrapping:h,MirroredRepeatWrapping:m},Eo={NearestFilter:g,NearestMipMapNearestFilter:v,NearestMipMapLinearFilter:y,LinearFilter:b,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:x};function Po(){this.type="ShapePath",this.color=new ie,this.subPaths=[],this.currentPath=null}function Ro(e){this.type="Font",this.data=e}function Oo(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,l,c,u,d,f,p,h=new Po;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,v=m.length;g<v;){switch(m[g++]){case"m":a=m[g++]*t+n,s=m[g++]*t+r,h.moveTo(a,s);break;case"l":a=m[g++]*t+n,s=m[g++]*t+r,h.lineTo(a,s);break;case"q":l=m[g++]*t+n,c=m[g++]*t+r,u=m[g++]*t+n,d=m[g++]*t+r,h.quadraticCurveTo(u,d,l,c);break;case"b":l=m[g++]*t+n,c=m[g++]*t+r,u=m[g++]*t+n,d=m[g++]*t+r,f=m[g++]*t+n,p=m[g++]*t+r,h.bezierCurveTo(u,d,f,p,l,c)}}return{offsetX:o.ha*t,path:h}}}Object.assign(Po.prototype,{moveTo:function(e,t){this.currentPath=new Wi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new $i;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],l=-l,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=c*(e.x-a.x)-l*(e.y-a.y);if(0===u)return!0;if(u<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=Dr.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,l,c=[];if(1===o.length)return s=o[0],(l=new $i).curves=s.curves,c.push(l),c;var u=!i(o[0].getPoints());u=e?!u:u;var d,f,p=[],h=[],m=[],g=0;h[g]=void 0,m[g]=[];for(var v=0,y=o.length;v<y;v++)a=i(d=(s=o[v]).getPoints()),(a=e?!a:a)?(!u&&h[g]&&g++,h[g]={s:new $i,p:d},h[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:d[0]});if(!h[0])return n(o);if(h.length>1){for(var b=!1,x=[],w=0,_=h.length;w<_;w++)p[w]=[];for(w=0,_=h.length;w<_;w++)for(var S=m[w],C=0;C<S.length;C++){for(var k=S[C],M=!0,T=0;T<h.length;T++)r(k.p,h[T].p)&&(w!==T&&x.push({froms:w,tos:T,hole:C}),M?(M=!1,p[T].push(k)):b=!0);M&&p[w].push(k)}x.length>0&&(b||(m=p))}v=0;for(var A=h.length;v<A;v++){l=h[v].s,c.push(l);for(var E=0,P=(f=m[v]).length;E<P;E++)l.holes.push(f[E].h)}return c}}),Object.assign(Ro.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,l=0,c=0;c<r.length;c++){var u=r[c];if("\n"===u)s=0,l-=o;else{var d=Oo(u,i,s,l,n);s+=d.offsetX,a.push(d.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(function(e){this.manager=void 0!==e?e:bi}.prototype,{load:function(e,t,n,r){var i=this,o=new wi(this.manager);o.setPath(this.path),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new Ro(e)},setPath:function(e){return this.path=e,this}});var Io=function(){return void 0===Mo&&(Mo=new(window.AudioContext||window.webkitAudioContext)),Mo};function Lo(e){this.manager=void 0!==e?e:bi}function Do(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _n,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _n,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function No(e,t,n){fe.call(this),this.type="CubeCamera";var r=90,i=new _n(r,1,e,t);i.up.set(0,-1,0),i.lookAt(new H(1,0,0)),this.add(i);var o=new _n(r,1,e,t);o.up.set(0,-1,0),o.lookAt(new H(-1,0,0)),this.add(o);var a=new _n(r,1,e,t);a.up.set(0,0,1),a.lookAt(new H(0,1,0)),this.add(a);var s=new _n(r,1,e,t);s.up.set(0,0,-1),s.lookAt(new H(0,-1,0)),this.add(s);var l=new _n(r,1,e,t);l.up.set(0,-1,0),l.lookAt(new H(0,0,1)),this.add(l);var c=new _n(r,1,e,t);c.up.set(0,-1,0),c.lookAt(new H(0,0,-1)),this.add(c);var u={format:T,magFilter:b,minFilter:b};this.renderTarget=new Y(n,n,u),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,o,n),n.activeCubeFace=2,e.render(t,a,n),n.activeCubeFace=3,e.render(t,s,n),n.activeCubeFace=4,e.render(t,l,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function Fo(){fe.call(this),this.type="AudioListener",this.context=Io(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function zo(e){fe.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Bo(e){zo.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function jo(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Zo(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(Lo.prototype,{load:function(e,t,n,r){var i=new wi(this.manager);i.setResponseType("arraybuffer"),i.load(e,(function(e){var n=e.slice(0);Io().decodeAudioData(n,(function(e){t(e)}))}),n,r)}}),Object.assign(Do.prototype,{update:function(){var e,t,n,r,i,o,a,s,l=new j,c=new j;return function(u){if(e!==this||t!==u.focus||n!==u.fov||r!==u.aspect*this.aspect||i!==u.near||o!==u.far||a!==u.zoom||s!==this.eyeSep){e=this,t=u.focus,n=u.fov,r=u.aspect*this.aspect,i=u.near,o=u.far,a=u.zoom;var d,f,p=u.projectionMatrix.clone(),h=(s=this.eyeSep/2)*i/t,m=i*Math.tan(z.DEG2RAD*n*.5)/a;c.elements[12]=-s,l.elements[12]=s,d=-m*r+h,f=m*r+h,p.elements[0]=2*i/(f-d),p.elements[8]=(f+d)/(f-d),this.cameraL.projectionMatrix.copy(p),d=-m*r-h,f=m*r-h,p.elements[0]=2*i/(f-d),p.elements[8]=(f+d)/(f-d),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(l)}}()}),No.prototype=Object.create(fe.prototype),No.prototype.constructor=No,Fo.prototype=Object.assign(Object.create(fe.prototype),{constructor:Fo,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new H,t=new Z,n=new H,r=new H;return function(i){fe.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),zo.prototype=Object.assign(Object.create(fe.prototype),{constructor:zo,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Bo.prototype=Object.assign(Object.create(zo.prototype),{constructor:Bo,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new H,t=new Z,n=new H,r=new H;return function(i){fe.prototype.updateMatrixWorld.call(this,i);var o=this.panner;this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(jo.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Zo.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){Z.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var Ho,Uo,Vo="\\[\\]\\.:\\/";function Go(e,t,n){var r=n||Wo.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Wo(e,t,n){this.path=t,this.parsedPath=n||Wo.parseTrackName(t),this.node=Wo.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function $o(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:L,endingEnd:L},s=0;s!==i;++s){var l=r[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function qo(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Yo(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Xo(){Oe.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ko(e,t,n){Pn.call(this,e,t),this.meshPerAttribute=n||1}function Jo(e,t,n){be.call(this,e,t),this.meshPerAttribute=n||1}function Qo(e,t){return e.distance-t.distance}function ea(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)ea(i[o],t,n,!0)}function ta(e,t){this.min=void 0!==e?e:new B(1/0,1/0),this.max=void 0!==t?t:new B(-1/0,-1/0)}function na(e,t){this.start=void 0!==e?e:new H,this.end=void 0!==t?t:new H}function ra(e){fe.call(this),this.material=e,this.render=function(){}}function ia(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new Oe,c=new Te(2*a*3,3);l.addAttribute("position",c),jn.call(this,l,new zn({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function oa(e,t){fe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Oe,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Te(r,3));var l=new zn({fog:!1});this.cone=new jn(n,l),this.add(this.cone),this.update()}function aa(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,aa(e.children[n]));return t}function sa(e){for(var t=aa(e),n=new Oe,r=[],i=[],o=new ie(0,0,1),a=new ie(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new Te(r,3)),n.addAttribute("color",new Te(i,3));var c=new zn({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});jn.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function la(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Gr(t,4,2),i=new Be({wireframe:!0,fog:!1});Ue.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ca(e,t){fe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new zn({fog:!1}),r=new Oe;r.addAttribute("position",new be(new Float32Array(15),3)),this.line=new Bn(r,n),this.add(this.line),this.update()}function ua(e,t,n){fe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new nr(t);r.rotateY(.5*Math.PI),this.material=new Be({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new be(o,3)),this.add(new Ue(r,this.material)),this.update()}function da(e,t,n,r){e=e||10,t=t||10,n=new ie(void 0!==n?n:4473924),r=new ie(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],l=[],c=0,u=0,d=-a;c<=t;c++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);var f=c===i?n:r;f.toArray(l,u),u+=3,f.toArray(l,u),u+=3,f.toArray(l,u),u+=3,f.toArray(l,u),u+=3}var p=new Oe;p.addAttribute("position",new Te(s,3)),p.addAttribute("color",new Te(l,3));var h=new zn({vertexColors:2});jn.call(this,p,h)}function fa(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new ie(void 0!==i?i:4473924),o=new ie(void 0!==o?o:8947848);var a,s,l,c,u,d,f,p=[],h=[];for(c=0;c<=t;c++)l=c/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,s),f=1&c?i:o,h.push(f.r,f.g,f.b),h.push(f.r,f.g,f.b);for(c=0;c<=n;c++)for(f=1&c?i:o,d=e-e/n*c,u=0;u<r;u++)l=u/r*(2*Math.PI),a=Math.sin(l)*d,s=Math.cos(l)*d,p.push(a,0,s),h.push(f.r,f.g,f.b),l=(u+1)/r*(2*Math.PI),a=Math.sin(l)*d,s=Math.cos(l)*d,p.push(a,0,s),h.push(f.r,f.g,f.b);var m=new Oe;m.addAttribute("position",new Te(p,3)),m.addAttribute("color",new Te(h,3));var g=new zn({vertexColors:2});jn.call(this,m,g)}function pa(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Oe,c=new Te(2*a*3,3);l.addAttribute("position",c),jn.call(this,l,new zn({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ha(e,t,n){fe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Oe;r.addAttribute("position",new Te([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new zn({fog:!1});this.lightPlane=new Bn(r,i),this.add(this.lightPlane),(r=new Oe).addAttribute("position",new Te([0,0,0,0,0,1],3)),this.targetLine=new Bn(r,i),this.add(this.targetLine),this.update()}function ma(e){var t=new Oe,n=new zn({color:16777215,vertexColors:1}),r=[],i=[],o={},a=new ie(16755200),s=new ie(16711680),l=new ie(43775),c=new ie(16777215),u=new ie(3355443);function d(e,t,n){f(e,n),f(t,n)}function f(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",c),d("p","c",u),d("cn1","cn2",u),d("cn3","cn4",u),d("cf1","cf2",u),d("cf3","cf4",u),t.addAttribute("position",new Te(r,3)),t.addAttribute("color",new Te(i,3)),jn.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function ga(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Oe;i.setIndex(new be(n,1)),i.addAttribute("position",new be(r,3)),jn.call(this,i,new zn({color:t})),this.matrixAutoUpdate=!1,this.update()}function va(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Oe;i.setIndex(new be(r,1)),i.addAttribute("position",new Te([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),jn.call(this,i,new zn({color:n})),this.geometry.computeBoundingSphere()}function ya(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new Oe;i.addAttribute("position",new Te([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Bn.call(this,i,new zn({color:r}));var o=new Oe;o.addAttribute("position",new Te([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Ue(o,new Be({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function ba(e,t,n,r,i,o){fe.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Ho&&((Ho=new Oe).addAttribute("position",new Te([0,0,0,0,1,0],3)),(Uo=new ti(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Bn(Ho,new zn({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ue(Uo,new Be({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function xa(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Oe;n.addAttribute("position",new Te(t,3)),n.addAttribute("color",new Te([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new zn({vertexColors:2});jn.call(this,n,r)}function wa(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ii.call(this,e),this.type="catmullrom"}function _a(e){if("undefined"!==typeof window){var t=new RegExp(e+"=([^&#=]*)").exec(window.location.search);return t?decodeURIComponent(t[1]):void 0}}function Sa(e,t){return void 0!==e?e:t}function Ca(e,t){var n=Object.assign({},e);for(var r in t){void 0===e[r]&&(n[r]=t[r])}return n}function ka(e,t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}return e}function Ma(e,t){t=Sa(t,[]);for(var n=0;n<e.length;n++)Array.isArray(e[n])?Ma(e[n],t):t.push(e[n]);return t}function Ta(){var e=window.location.protocol;return null===e.match(/http(s)?:/gi)?"http:":e}function Aa(){if("undefined"===typeof window)return!1;var e=window.navigator.userAgent;return/Opera|OPR/.test(e)?"Opera":/Chrome/i.test(e)?"Chrome":/Firefox/i.test(e)?"Firefox":/Mobile(\/.*)? Safari/i.test(e)?"Mobile Safari":/MSIE/i.test(e)?"Internet Explorer":!!/Safari/i.test(e)&&"Safari"}function Ea(e){window.open(e,"_blank")||(window.location.href=e)}function Pa(e,t){if(void 0===t&&(t="download"),e){var n="Safari"===Aa(),r=/CriOS\/[\d]+/.test(window.navigator.userAgent),i=document.createElement("a");if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e,t);else if((n||r)&&FileReader)if(e instanceof Blob){var o=new FileReader;o.onloadend=function(){s(o.result)},o.readAsDataURL(e)}else s(e);else{var a=!1;e instanceof Blob&&(e=URL.createObjectURL(e),a=!0),"download"in i?(i.style.display="hidden",document.body.appendChild(i),i.href=e,i.download=t,i.target="_blank",i.click(),document.body.removeChild(i)):Ea(e),a&&window.URL.revokeObjectURL(e)}}function s(e){Ea(r?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"))}}function Ra(e,t,n){var r,i,o,a=null,s=0;function l(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(r,i),a||(r=i=null)}return n||(n={}),function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return r=this,i=arguments,u<=0||u>t?(a&&(clearTimeout(a),a=null),s=c,o=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(l,u)),o}}function Oa(e,t){return e<t?-1:e>t?1:0}function Ia(e,t,n){void 0===n&&(n=Oa);for(var r=0,i=e.length-1;r<=i;){var o=r+i>>1,a=n(t,e[o]);if(a>0)r=o+1;else{if(!(a<0))return o;i=o-1}}return-r-1}function La(e,t,n){var r=function(e,t){var n=e.length-1;if(e[n]<t)return-1;for(var r=0;r<=n;){var i=r+n>>1;e[i]>=t?n=i-1:r=i+1}return n+1}(e,t),i=function(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length-1;n<=r;){var i=n+r>>1;e[i]>t?r=i-1:n=i+1}return n-1}(e,n);return-1===r||-1===i||r>i?0:i-r+1}function Da(e){return e.sort().filter((function(e,t,n){return 0===t||e!==n[t-1]}))}function Na(e){var t=28672;if(e.length>t){for(var n=[],r=0;r<e.length;r+=t)n.push(String.fromCharCode.apply(null,e.subarray(r,r+t)));return n.join("")}return String.fromCharCode.apply(null,e)}function Fa(e,t){switch(e){case"int8":return new Int8Array(t);case"int16":return new Int16Array(t);case"int32":return new Int32Array(t);case"uint8":return new Uint8Array(t);case"uint16":return new Uint16Array(t);case"uint32":return new Uint32Array(t);case"float32":return new Float32Array(t);default:throw new Error("arrayType unknown: "+e)}}function za(e,t){return new(t>65535?Uint32Array:Uint16Array)(e)}function Ba(e){return e.buffer&&e.buffer instanceof ArrayBuffer?e.buffer:e}function ja(e,t){return void 0===e?e=new t:Array.isArray(e)&&(e=(new t).fromArray(e)),e}function Za(e){return ja(e,H)}function Ha(e){return ja(e,j)}function Ua(e){return ja(e,Z)}function Va(e){return t=e,n=Float32Array,t instanceof n?t:new n(t);var t,n}function Ga(e){return Sa(e,"").toString().toLowerCase()}Object.assign(Go.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Wo,{Composite:Go,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Wo.Composite(e,t,n):new Wo(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+Vo+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Vo+"]",t="[^"+Vo.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),r=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}),Object.assign(Wo.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Wo.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Wo.prototype,{_getValue_unbound:Wo.prototype.getValue,_setValue_unbound:Wo.prototype.setValue}),Object.assign(function(){var e=arguments;this.uuid=z.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[e[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=arguments,t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length,c=void 0,u=0,d=arguments.length;u!==d;++u){var f=e[u],p=f.uuid,h=i[p];if(void 0===h){h=n++,i[p]=h,t.push(f);for(var m=0,g=l;m!==g;++m)s[m].push(new Wo(f,o[m],a[m]))}else if(h<r){c=t[h];var v=--r,y=t[v];i[y.uuid]=h,t[h]=y,i[p]=v,t[v]=f;for(m=0,g=l;m!==g;++m){var b=s[m],x=b[v],w=b[h];b[h]=x,void 0===w&&(w=new Wo(f,o[m],a[m])),b[v]=w}}else t[h]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=arguments,t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var l=e[a],c=l.uuid,u=r[c];if(void 0!==u&&u>=n){var d=n++,f=t[d];r[f.uuid]=u,t[u]=f,r[c]=d,t[d]=l;for(var p=0,h=o;p!==h;++p){var m=i[p],g=m[d],v=m[u];m[u]=g,m[d]=v}}}this.nCachedObjects_=n},uncache:function(){for(var e=arguments,t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,l=arguments.length;s!==l;++s){var c=e[s],u=c.uuid,d=i[u];if(void 0!==d)if(delete i[u],d<r){var f=--r,p=t[f],h=t[b=--n];i[p.uuid]=d,t[d]=p,i[h.uuid]=f,t[f]=h,t.pop();for(var m=0,g=a;m!==g;++m){var v=(x=o[m])[f],y=x[b];x[d]=v,x[f]=y,x.pop()}}else{var b;i[(h=t[b=--n]).uuid]=d,t[d]=h,t.pop();for(m=0,g=a;m!==g;++m){var x;(x=o[m])[d]=x[b],x.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(var d=c,f=s.length;d!==f;++d){var p=s[d];u[d]=new Wo(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign($o.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=2202===r;if(0===e)return-1===i?t:o&&1===(1&i)?n-t:t;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=D,r.endingEnd=D):(r.endingStart=e?this.zeroSlopeAtStart?D:L:N,r.endingEnd=t?this.zeroSlopeAtEnd?D:L:N)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),qo.prototype=Object.assign(Object.create(f.prototype),{constructor:qo,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==i;++u){var d=r[u],f=d.name,p=c[f];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,f));continue}var h=t&&t._propertyBindings[u].binding.parsedPath;++(p=new Zo(Wo.create(n,f,h),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(p,s,f),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i];e:{for(var c in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new so(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?yo.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[r];if(void 0!==l)return l;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new $o(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?yo.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=this,n=e.uuid,r=this._actionsByClip;for(var i in r){var o=r[i].actionByRoot[n];void 0!==o&&(t._deactivateAction(o),t._removeInactiveAction(o))}var a=this._bindingsByRootAndName[n];if(void 0!==a)for(var s in a){var l=a[s];l.restoreOriginalState(),t._removeInactiveBinding(l)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Yo.prototype.clone=function(){return new Yo(void 0===this.value.clone?this.value:this.value.clone())},Xo.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Xo,isInstancedBufferGeometry:!0,copy:function(e){return Oe.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Ko.prototype=Object.assign(Object.create(Pn.prototype),{constructor:Ko,isInstancedInterleavedBuffer:!0,copy:function(e){return Pn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Jo.prototype=Object.assign(Object.create(be.prototype),{constructor:Jo,isInstancedBufferAttribute:!0,copy:function(e){return be.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(function(e,t,n,r){this.ray=new Ze(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return ea(e,this,r,t),r.sort(Qo),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)ea(e[i],this,r,t);return r.sort(Qo),r}}),Object.assign(function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(z.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(ta.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new B;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new B),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new B),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new B),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new B),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new B;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(na.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new H),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new H),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new H),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new H,t=new H;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e)/i;return r&&(o=z.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new H),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),ra.prototype=Object.create(fe.prototype),ra.prototype.constructor=ra,ra.prototype.isImmediateRenderObject=!0,ia.prototype=Object.create(jn.prototype),ia.prototype.constructor=ia,ia.prototype.update=function(){var e=new H,t=new H,n=new U;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,u=0,d=l.length;u<d;u++)for(var f=l[u],p=0,h=f.vertexNormals.length;p<h;p++){var m=s[f[r[p]]],g=f.vertexNormals[p];e.copy(m).applyMatrix4(i),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,y=a.attributes.normal;for(c=0,p=0,h=v.count;p<h;p++)e.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(i),t.set(y.getX(p),y.getY(p),y.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}o.needsUpdate=!0}}(),oa.prototype=Object.create(fe.prototype),oa.prototype.constructor=oa,oa.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},oa.prototype.update=function(){var e=new H,t=new H;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),sa.prototype=Object.create(jn.prototype),sa.prototype.constructor=sa,sa.prototype.updateMatrixWorld=function(){var e=new H,t=new j,n=new j;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(n,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}o.getAttribute("position").needsUpdate=!0,fe.prototype.updateMatrixWorld.call(this,r)}}(),la.prototype=Object.create(Ue.prototype),la.prototype.constructor=la,la.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},la.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ca.prototype=Object.create(fe.prototype),ca.prototype.constructor=ca,ca.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ca.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},ua.prototype=Object.create(fe.prototype),ua.prototype.constructor=ua,ua.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ua.prototype.update=function(){var e=new H,t=new ie,n=new ie;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),da.prototype=Object.create(jn.prototype),da.prototype.constructor=da,fa.prototype=Object.create(jn.prototype),fa.prototype.constructor=fa,pa.prototype=Object.create(jn.prototype),pa.prototype.constructor=pa,pa.prototype.update=function(){var e=new H,t=new H,n=new U;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,u=s.length;c<u;c++){var d=s[c],f=d.normal;e.copy(a[d.a]).add(a[d.b]).add(a[d.c]).divideScalar(3).applyMatrix4(r),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(l,e.x,e.y,e.z),l+=1,i.setXYZ(l,t.x,t.y,t.z),l+=1}i.needsUpdate=!0}}(),ha.prototype=Object.create(fe.prototype),ha.prototype.constructor=ha,ha.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ha.prototype.update=function(){var e=new H,t=new H,n=new H;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),ma.prototype=Object.create(jn.prototype),ma.prototype.constructor=ma,ma.prototype.update=function(){var e,t,n=new H,r=new pe;function i(i,o,a,s){n.set(o,a,s).unproject(r);var l=t[i];if(void 0!==l)for(var c=e.getAttribute("position"),u=0,d=l.length;u<d;u++)c.setXYZ(l[u],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),ga.prototype=Object.create(jn.prototype),ga.prototype.constructor=ga,ga.prototype.update=function(){var e=new K;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ga.prototype.setFromObject=function(e){return this.object=e,this.update(),this},va.prototype=Object.create(jn.prototype),va.prototype.constructor=va,va.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),fe.prototype.updateMatrixWorld.call(this,e))},ya.prototype=Object.create(Bn.prototype),ya.prototype.constructor=ya,ya.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),fe.prototype.updateMatrixWorld.call(this,e)},ba.prototype=Object.create(fe.prototype),ba.prototype.constructor=ba,ba.prototype.setDirection=function(){var e,t=new H;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),ba.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},ba.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},xa.prototype=Object.create(jn.prototype),xa.prototype.constructor=xa,ki.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(ki.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Gi.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new ye,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new H(i.x,i.y,i.z||0))}return t}}),Object.assign(Wi.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),wa.prototype=Object.create(Ii.prototype),Object.assign(wa.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),da.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},sa.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(So.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Co(e)}}),Object.assign(ta.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(K.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),na.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(z,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),z.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),z.ceilPowerOfTwo(e)}}),Object.assign(U.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(j.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new H),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),Q.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Z.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ze.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(He.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(He,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),He.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),He.getNormal(e,t,n,r)}}),Object.assign($i.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new zr(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Xr(this,e)}}),Object.assign(B.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(H.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign($.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ye.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(fe.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(fe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ln.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Dn.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(ki.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),_n.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(qi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(be.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Oe.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Oe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Br.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Yo.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ze.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ie}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(di.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(je.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Mn.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Mn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(vn.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(q.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Cn.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),zo.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Lo).load(e,(function(e){t.setBuffer(e)})),this},jo.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},No.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},V.crossOrigin=void 0,V.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ci;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},V.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Si;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},V.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},V.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Wa=function(e){this.name=e,this._dict={}},$a={names:{configurable:!0}};function qa(e){return.01745*e}Wa.prototype.add=function(e,t){this._dict[Ga(e)]=t},Wa.prototype.get=function(e){return this._dict[Ga(e)]},$a.names.get=function(){return Object.keys(this._dict)},Object.defineProperties(Wa.prototype,$a);var Ya="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Xa=new Array(36);function Ka(){for(var e,t=0,n=0;n<36;n++)8===n||13===n||18===n||23===n?Xa[n]="-":14===n?Xa[n]="4":(t<=2&&(t=33554432+16777216*Math.random()|0),e=15&t,t>>=4,Xa[n]=Ya[19===n?3&e|8:e]);return Xa.join("")}function Ja(e,t,n){return Math.max(t,Math.min(n,e))}function Qa(e){return Ja(e,0,100)}function es(e,t,n){return e+(t-e)*n}function ts(e,t,n,r,i,o){var a=(n-e)*o,s=(r-t)*o,l=i*i;return(2*t-2*n+a+s)*(i*l)+(-3*t+3*n-2*a-s)*l+a*i+t}function ns(e,t,n){var r;return r=function(e,t,n){return(e-t)/(n-t)}(n,e,t),(n=Ja(r,0,1))*n*(3-2*n)}var rs="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function is(e,t){return e(t={exports:{}},t.exports),t.exports}var os=is((function(e,t){(function(){var n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C,k,M,T,A,E,P,R,O,I,L,D,N,F,z,B,j,Z,H,U,V,G,W,$,q,Y,X,K,J,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,fe,pe,he,ge,ve,ye,be,xe,we,_e,Se,Ce,ke,Me,Te,Ae,Ee=[].slice;Ce=function(){var e,t,n,r,i;for(e={},r=0,t=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;r<t;r++)n=i[r],e["[object "+n+"]"]=n.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),q=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),e>n&&(e=n),e},ke=function(e){return e.length>=3?Array.prototype.slice.call(e):e[0]},_=function(e){var t,n;for(e._clipped=!1,e._unclipped=e.slice(0),t=n=0;n<3;t=++n)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e._clipped||delete e._unclipped,e},o=Math.PI,be=Math.round,C=Math.cos,E=Math.floor,ne=Math.pow,Y=Math.log,we=Math.sin,_e=Math.sqrt,m=Math.atan2,J=Math.max,h=Math.abs,l=2*o,a=o/3,r=o/180,s=180/o,w=function(){return arguments[0]instanceof n?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,arguments,(function(){}))},w.default=w,p=[],null!==e&&null!=e.exports&&(e.exports=w),(null!==t?t:this).chroma=w,w.version="1.3.7",f={},u=[],d=!1,n=function(){function e(){var e,t,n,r,i,o,a,s,l,c=arguments;for(o=this,t=[],s=0,r=arguments.length;s<r;s++)null!=(e=c[s])&&t.push(e);if(t.length>1&&(a=t[t.length-1]),null!=f[a])o._rgb=_(f[a](ke(t.slice(0,-1))));else{for(d||(u=u.sort((function(e,t){return t.p-e.p})),d=!0),l=0,i=u.length;l<i&&!(a=(n=u[l]).test.apply(n,t));l++);a&&(o._rgb=_(f[a].apply(f,t)))}null==o._rgb&&console.warn("unknown format: "+t),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e.prototype.clone=function(){return w(me._rgb)},e}(),w._input=f,w.brewer=b={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],b)t.push(b[e.toLowerCase()]=b[e])}(),w.colors=Me={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},U=function(){var e,t,n,r,o,a,s;return r=(t=ke(arguments))[0],e=t[1],n=t[2],a=(r+16)/116,o=isNaN(e)?a:a+e/500,s=isNaN(n)?a:a-n/200,a=i.Yn*V(a),o=i.Xn*V(o),s=i.Zn*V(s),[Ae(3.2404542*o-1.5371385*a-.4985314*s),Ae(-.969266*o+1.8760108*a+.041556*s),n=Ae(.0556434*o-.2040259*a+1.0572252*s),t.length>3?t[3]:1]},Ae=function(e){return 255*(e<=.00304?12.92*e:1.055*ne(e,1/2.4)-.055)},V=function(e){return e>i.t1?e*e*e:i.t2*(e-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ue=function(){var e,t,n,r,i,o,a;return n=(r=ke(arguments))[0],t=r[1],e=r[2],o=(i=ge(n,t,e))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},ve=function(e){return(e/=255)<=.04045?e/12.92:ne((e+.055)/1.055,2.4)},Te=function(e){return e>i.t3?ne(e,1/3):e/i.t2+i.t0},ge=function(){var e,t,n,r;return n=(r=ke(arguments))[0],t=r[1],e=r[2],n=ve(n),t=ve(t),e=ve(e),[Te((.4124564*n+.3575761*t+.1804375*e)/i.Xn),Te((.2126729*n+.7151522*t+.072175*e)/i.Yn),Te((.0193339*n+.119192*t+.9503041*e)/i.Zn)]},w.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["lab"]),(function(){}))},f.lab=U,n.prototype.lab=function(){return ue(this._rgb)},g=function(e){var t,n,r,i,o,a,s,l,c,u,d;return 2===(e=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(w(i));return r}()).length?(c=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=c[0],a=c[1],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push(o[t]+e*(a[t]-o[t]));return r}(),w.lab.apply(w,n)}):3===e.length?(u=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=u[0],a=u[1],s=u[2],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*o[t]+2*(1-e)*e*a[t]+e*e*s[t]);return r}(),w.lab.apply(w,n)}):4===e.length?(d=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=d[0],a=d[1],s=d[2],l=d[3],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]);return r}(),w.lab.apply(w,n)}):5===e.length&&(n=g(e.slice(0,3)),r=g(e.slice(2,5)),t=function(e){return e<.5?n(2*e):r(2*(e-.5))}),t},w.bezier=function(e){var t;return(t=g(e)).scale=function(){return w.scale(t)},t},w.cubehelix=function(e,t,n,r,i){var o,a,s;return null==e&&(e=300),null==t&&(t=-1.5),null==n&&(n=1),null==r&&(r=1),null==i&&(i=[0,1]),o=0,"array"===Ce(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(s=function(s){var c,u,d,f,p;return c=l*((e+120)/360+t*s),f=ne(i[0]+a*s,r),u=(0!==o?n[0]+s*o:n)*f*(1-f)/2,d=C(c),p=we(c),w(_([255*(f+u*(-.14861*d+1.78277*p)),255*(f+u*(-.29227*d-.90649*p)),255*(f+u*(1.97294*d))]))}).start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:("array"===Ce(n=e)?0===(o=n[1]-n[0])&&(n=n[1]):o=0,s)},s.lightness=function(e){return null==e?i:("array"===Ce(e)?(i=e,a=e[1]-e[0]):(i=[e,e],a=0),s)},s.scale=function(){return w.scale(s)},s.hue(n),s},w.random=function(){var e,t;for("0123456789abcdef",e="#",t=0;t<6;++t)e+="0123456789abcdef".charAt(E(16*Math.random()));return new n(e)},p=[],N=function(e,t,n,r){var i,o,a,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==Ce(e)&&(e=w(e)),"object"!==Ce(t)&&(t=w(t)),a=0,o=p.length;a<o;a++)if(r===(i=p[a])[0]){s=i[1](e,t,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(e.alpha()+n*(t.alpha()-e.alpha()))},w.interpolate=N,n.prototype.interpolate=function(e,t,n){return N(this,e,t,n)},w.mix=N,n.prototype.mix=n.prototype.interpolate,f.rgb=function(){var e,t,n,r;for(e in n=[],t=ke(arguments))r=t[e],n.push(r);return n},w.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["rgb"]),(function(){}))},n.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},u.push({p:3,test:function(e){var t;return t=ke(arguments),"array"===Ce(t)&&3===t.length||4===t.length&&"number"===Ce(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),f.lrgb=f.rgb,B=function(e,t,r,i){var o,a;return o=e._rgb,a=t._rgb,new n(_e(ne(o[0],2)*(1-r)+ne(a[0],2)*r),_e(ne(o[1],2)*(1-r)+ne(a[1],2)*r),_e(ne(o[2],2)*(1-r)+ne(a[2],2)*r),i)},c=function(e){var t,r,i,o,a;for(t=1/e.length,a=[0,0,0,0],i=0,r=e.length;i<r;i++)o=e[i]._rgb,a[0]+=ne(o[0],2)*t,a[1]+=ne(o[1],2)*t,a[2]+=ne(o[2],2)*t,a[3]+=o[3]*t;return a[0]=_e(a[0]),a[1]=_e(a[1]),a[2]=_e(a[2]),new n(a)},p.push(["lrgb",B]),w.average=function(e,t){var n,r,i,a,s,l,u,d,f,p,h,g,v;if(null==t&&(t="rgb"),f=e.length,e=e.map((function(e){return w(e)})),u=e.splice(0,1)[0],"lrgb"===t)return c(e);for(d in a=[],s=0,l=0,g=u.get(t))g[d]=g[d]||0,a.push(isNaN(g[d])?0:1),"h"!==t.charAt(d)||isNaN(g[d])||(n=g[d]/180*o,s+=C(n),l+=we(n));for(r=u.alpha(),h=0,p=e.length;h<p;h++)for(d in v=(i=e[h]).get(t),r+=i.alpha(),g)isNaN(v[d])||(a[d]+=1,"h"===t.charAt(d)?(n=v[d]/180*o,s+=C(n),l+=we(n)):g[d]+=v[d]);for(d in g)if("h"===t.charAt(d)){for(n=m(l/a[d],s/a[d])/o*180;n<0;)n+=360;for(;n>=360;)n-=360;g[d]=n}else g[d]=g[d]/a[d];return w(g,t).alpha(r/f)},R=function(e){var t,n;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(n=parseInt(e,16))>>16,n>>8&255,255&n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(n=parseInt(e,16))>>24&255,n>>16&255,n>>8&255,be((255&n)/255*100)/100];if(null!=f.css&&(t=f.css(e)))return t;throw"unknown color: "+e},ae=function(e,t){var n,r,i,o,a,s;return null==t&&(t="rgb"),a=e[0],i=e[1],r=e[2],n=e[3],a=Math.round(a),i=Math.round(i),r=Math.round(r),s=(s="000000"+(a<<16|i<<8|r).toString(16)).substr(s.length-6),o=(o="0"+be(255*n).toString(16)).substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},f.hex=function(e){return R(e)},w.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["hex"]),(function(){}))},n.prototype.hex=function(e){return null==e&&(e="rgb"),ae(this._rgb,e)},u.push({p:4,test:function(e){if(1===arguments.length&&"string"===Ce(e))return"hex"}}),L=function(){var e,t,n,r,i,o,a,s,l,c,u,d,f,p;if(i=(e=ke(arguments))[0],u=e[1],a=e[2],0===u)l=r=t=255*a;else{for(n=[0,0,0],d=2*a-(f=a<.5?a*(1+u):a+u-a*u),(p=[0,0,0])[0]=(i/=360)+1/3,p[1]=i,p[2]=i-1/3,o=s=0;s<=2;o=++s)p[o]<0&&(p[o]+=1),p[o]>1&&(p[o]-=1),6*p[o]<1?n[o]=d+6*(f-d)*p[o]:2*p[o]<1?n[o]=f:3*p[o]<2?n[o]=d+(f-d)*(2/3-p[o])*6:n[o]=d;l=(c=[be(255*n[0]),be(255*n[1]),be(255*n[2])])[0],r=c[1],t=c[2]}return e.length>3?[l,r,t,e[3]]:[l,r,t]},le=function(e,t,n){var r,i,o,a,s;return void 0!==e&&e.length>=3&&(e=(a=e)[0],t=a[1],n=a[2]),e/=255,t/=255,n/=255,o=Math.min(e,t,n),i=((J=Math.max(e,t,n))+o)/2,J===o?(s=0,r=Number.NaN):s=i<.5?(J-o)/(J+o):(J-o)/(2-J-o),e===J?r=(t-n)/(J-o):t===J?r=2+(n-e)/(J-o):n===J&&(r=4+(e-t)/(J-o)),(r*=60)<0&&(r+=360),[r,s,i]},w.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["hsl"]),(function(){}))},f.hsl=L,n.prototype.hsl=function(){return le(this._rgb)},D=function(){var e,t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v;if(i=(e=ke(arguments))[0],m=e[1],v=e[2],v*=255,0===m)l=r=t=v;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=v*(1-m),s=v*(1-m*(n=(i/=60)-(o=E(i)))),g=v*(1-m*(1-n)),o){case 0:l=(c=[v,g,a])[0],r=c[1],t=c[2];break;case 1:l=(u=[s,v,a])[0],r=u[1],t=u[2];break;case 2:l=(d=[a,v,g])[0],r=d[1],t=d[2];break;case 3:l=(f=[a,s,v])[0],r=f[1],t=f[2];break;case 4:l=(p=[g,a,v])[0],r=p[1],t=p[2];break;case 5:l=(h=[v,a,s])[0],r=h[1],t=h[2]}return[l,r,t,e.length>3?e[3]:1]},ce=function(){var e,t,n,r,i,o,a,s,l;return o=(a=ke(arguments))[0],n=a[1],e=a[2],i=Math.min(o,n,e),t=(J=Math.max(o,n,e))-i,l=J/255,0===J?(r=Number.NaN,s=0):(s=t/J,o===J&&(r=(n-e)/t),n===J&&(r=2+(e-o)/t),e===J&&(r=4+(o-n)/t),(r*=60)<0&&(r+=360)),[r,s,l]},w.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["hsv"]),(function(){}))},f.hsv=D,n.prototype.hsv=function(){return ce(this._rgb)},ee=function(e){return"number"===Ce(e)&&e>=0&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},pe=function(){var e;return((e=ke(arguments))[0]<<16)+(e[1]<<8)+e[2]},w.num=function(e){return new n(e,"num")},n.prototype.num=function(e){return null==e&&(e="rgb"),pe(this._rgb,e)},f.num=ee,u.push({p:1,test:function(e){if(1===arguments.length&&"number"===Ce(e)&&e>=0&&e<=16777215)return"num"}}),P=function(){var e,t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b;if(s=(n=ke(arguments))[0],i=n[1],t=n[2],a=a/100*255,e=255*(i/=100),0===i)d=a=r=t;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),u=(c=t*(1-i))+e*(1-(o=(s/=60)-(l=E(s)))),y=c+e*o,b=c+e,l){case 0:d=(f=[b,y,c])[0],a=f[1],r=f[2];break;case 1:d=(p=[u,b,c])[0],a=p[1],r=p[2];break;case 2:d=(h=[c,b,y])[0],a=h[1],r=h[2];break;case 3:d=(m=[c,u,b])[0],a=m[1],r=m[2];break;case 4:d=(g=[y,c,b])[0],a=g[1],r=g[2];break;case 5:d=(v=[b,c,u])[0],a=v[1],r=v[2]}return[d,a,r,n.length>3?n[3]:1]},oe=function(){var e,t,n,r,i,o,a,s,l;return s=(l=ke(arguments))[0],i=l[1],t=l[2],a=Math.min(s,i,t),n=100*(r=(J=Math.max(s,i,t))-a)/255,e=a/(255-r)*100,0===r?o=Number.NaN:(s===J&&(o=(i-t)/r),i===J&&(o=2+(t-s)/r),t===J&&(o=4+(s-i)/r),(o*=60)<0&&(o+=360)),[o,n,e]},w.hcg=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["hcg"]),(function(){}))},f.hcg=P,n.prototype.hcg=function(){return oe(this._rgb)},k=function(e){var t,n,r,i,o,a,s,l;if(e=e.toLowerCase(),null!=w.colors&&w.colors[e])return R(w.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=l=0;l<=3;i=++l)s[i]=+s[i];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=t=0;t<=2;i=++t)s[i]=be(2.55*s[i]);s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=n=0;n<=2;i=++n)s[i]=be(2.55*s[i]);s[3]=+s[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=L(r))[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=L(r))[3]=+o[4]);return s},ie=function(e){var t;return"rgb"===(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(be).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(be).join(",")+","+e[3]+")":void 0},ye=function(e){return be(100*e)/100},I=function(e,t){var n;return n=t<1?"hsla":"hsl",e[0]=ye(e[0]||0),e[1]=ye(100*e[1])+"%",e[2]=ye(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},f.css=function(e){return k(e)},w.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["css"]),(function(){}))},n.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?ie(this._rgb):"hsl"===e.slice(0,3)?I(this.hsl(),this.alpha()):void 0},f.named=function(e){return R(Me[e])},u.push({p:5,test:function(e){if(1===arguments.length&&null!=Me[e])return"named"}}),n.prototype.name=function(e){var t,n;for(n in arguments.length&&(Me[e]&&(this._rgb=R(Me[e])),this._rgb[3]=1),t=this.hex(),Me)if(t===Me[n])return n;return t},G=function(){var e,t,n,i;return n=(i=ke(arguments))[0],e=i[1],t=i[2],[n,C(t*=r)*e,we(t)*e]},W=function(){var e,t,n,r,i,o,a,s,l;return a=(n=ke(arguments))[0],i=n[1],o=n[2],e=(s=G(a,i,o))[0],t=s[1],r=s[2],[(l=U(e,t,r))[0],l[1],r=l[2],n.length>3?n[3]:1]},H=function(){var e,t,n,r,i,o;return i=(o=ke(arguments))[0],e=o[1],t=o[2],n=_e(e*e+t*t),r=(m(t,e)*s+360)%360,0===be(1e4*n)&&(r=Number.NaN),[i,n,r]},de=function(){var e,t,n,r,i,o,a;return i=(o=ke(arguments))[0],n=o[1],t=o[2],r=(a=ue(i,n,t))[0],e=a[1],t=a[2],H(r,e,t)},w.lch=function(){var e;return e=ke(arguments),new n(e,"lch")},w.hcl=function(){var e;return e=ke(arguments),new n(e,"hcl")},f.lch=W,f.hcl=function(){var e,t,n,r;return t=(r=ke(arguments))[0],e=r[1],n=r[2],W([n,e,t])},n.prototype.lch=function(){return de(this._rgb)},n.prototype.hcl=function(){return de(this._rgb).reverse()},re=function(e){var t,n,r,i,o,a;return null==e&&(e="rgb"),o=(a=ke(arguments))[0],r=a[1],t=a[2],r/=255,t/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(r,t))))*(n=i<1?1/(1-i):0),(1-r-i)*n,(1-t-i)*n,i]},S=function(){var e,t,n,r,i,o;return n=(t=ke(arguments))[0],i=t[1],o=t[2],r=t[3],e=t.length>4?t[4]:1,1===r?[0,0,0,e]:[n>=1?0:255*(1-n)*(1-r),i>=1?0:255*(1-i)*(1-r),o>=1?0:255*(1-o)*(1-r),e]},f.cmyk=function(){return S(ke(arguments))},w.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["cmyk"]),(function(){}))},n.prototype.cmyk=function(){return re(this._rgb)},f.gl=function(){var e,t,n,r,i;for(r=function(){var e,n;for(t in n=[],e=ke(arguments))i=e[t],n.push(i);return n}.apply(this,arguments),e=n=0;n<=2;e=++n)r[e]*=255;return r},w.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["gl"]),(function(){}))},n.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},fe=function(e,t,n){var r;return e=(r=ke(arguments))[0],t=r[1],n=r[2],.2126*(e=X(e))+.7152*(t=X(t))+.0722*(n=X(n))},X=function(e){return(e/=255)<=.03928?e/12.92:ne((e+.055)/1.055,2.4)},Z=function(e,t,r,i){var o,a;return o=e._rgb,a=t._rgb,new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},p.push(["rgb",Z]),n.prototype.luminance=function(e,t){var n,r,i,o,a;return null==t&&(t="rgb"),arguments.length?(o=this._rgb,0===e?o=[0,0,0,this._rgb[3]]:1===e?o=[255,255,255,this[3]]:(n=fe(this._rgb),r=1e-7,i=20,a=function(n,o){var s,l;return s=(l=n.interpolate(o,.5,t)).luminance(),Math.abs(e-s)<r||!i--?l:s>e?a(n,l):a(l,o)},o=n>e?a(w("black"),this).rgba():a(this,w("white")).rgba()),w(o).alpha(this.alpha())):fe(this._rgb)},Se=function(e){var t,n,r,i;return(i=e/100)<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*Y(n),t=i<20?0:.8274096064007395*(t=i-10)-254.76935184120902+115.67994401066147*Y(t)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*Y(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*Y(n),t=255),[r,n,t]},he=function(){var e,t,n,r,i,o,a,s;for(i=(o=ke(arguments))[0],o[1],e=o[2],r=1e3,n=4e4,t=.4;n-r>t;)(a=Se(s=.5*(n+r)))[2]/a[0]>=e/i?n=s:r=s;return be(s)},w.temperature=w.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["temperature"]),(function(){}))},f.temperature=f.kelvin=f.K=Se,n.prototype.temperature=function(){return he(this._rgb)},n.prototype.kelvin=n.prototype.temperature,w.contrast=function(e,t){var r,i,o,a;return"string"!==(o=Ce(e))&&"number"!==o||(e=new n(e)),"string"!==(a=Ce(t))&&"number"!==a||(t=new n(t)),(r=e.luminance())>(i=t.luminance())?(r+.05)/(i+.05):(i+.05)/(r+.05)},w.distance=function(e,t,r){var i,o,a,s,l,c,u;for(o in null==r&&(r="lab"),"string"!==(l=Ce(e))&&"number"!==l||(e=new n(e)),"string"!==(c=Ce(t))&&"number"!==c||(t=new n(t)),a=e.get(r),s=t.get(r),u=0,a)u+=(i=(a[o]||0)-(s[o]||0))*i;return Math.sqrt(u)},w.deltaE=function(e,t,r,i){var a,s,l,c,u,d,f,p,g,v,y,b,x,w,_,S,k,M,T,A,E,P,R,O;for(null==r&&(r=1),null==i&&(i=1),"string"!==(_=Ce(e))&&"number"!==_||(e=new n(e)),"string"!==(S=Ce(t))&&"number"!==S||(t=new n(t)),a=(k=e.lab())[0],l=k[1],u=k[2],s=(M=t.lab())[0],c=M[1],d=M[2],f=_e(l*l+u*u),p=_e(c*c+d*d),A=a<16?.511:.040975*a/(1+.01765*a),T=.0638*f/(1+.0131*f)+.638,w=f<1e-6?0:180*m(u,l)/o;w<0;)w+=360;for(;w>=360;)w-=360;return E=w>=164&&w<=345?.56+h(.2*C(o*(w+168)/180)):.36+h(.4*C(o*(w+35)/180)),x=_e((g=f*f*f*f)/(g+1900)),_e((P=(a-s)/(r*A))*P+(R=(b=f-p)/(i*T))*R+((v=l-c)*v+(y=u-d)*y-b*b)/((O=T*(x*E+1-x))*O))},n.prototype.get=function(e){var t,n,r,i,o;return this,r=(i=e.split("."))[0],t=i[1],o=this[r](),t?(n=r.indexOf(t))>-1?o[n]:console.warn("unknown channel "+t+" in mode "+r):o},n.prototype.set=function(e,t){var n,r,i,o,a;if(this,i=(o=e.split("."))[0],n=o[1])if(a=this[i](),(r=i.indexOf(n))>-1)if("string"===Ce(t))switch(t.charAt(0)){case"+":case"-":a[r]+=+t;break;case"*":a[r]*=+t.substr(1);break;case"/":a[r]/=+t.substr(1);break;default:a[r]=+t}else a[r]=t;else console.warn("unknown channel "+n+" in mode "+i);else a=t;return w(a,i).alpha(this.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(e){return arguments.length?w.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},n.prototype.darken=function(e){var t;return null==e&&(e=1),this,(t=this.lab())[0]-=i.Kn*e,w.lab(t).alpha(this.alpha())},n.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(e){var t;return null==e&&(e=1),this,(t=this.lch())[1]+=e*i.Kn,t[1]<0&&(t[1]=0),w.lch(t).alpha(this.alpha())},n.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},n.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),w(t[0]*e,t[1]*e,t[2]*e,e)},Q=function(e,t){return e*t/255},M=function(e,t){return e>t?t:e},$=function(e,t){return e>t?e:t},xe=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},te=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},x=function(e,t){return 255*(1-(1-t/255)/(e/255))},T=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},(v=function(e,t,n){if(!v[n])throw"unknown blend mode "+n;return v[n](e,t)}).normal=(y=function(e){return function(t,n){var r,i;return r=w(n).rgb(),i=w(t).rgb(),w(e(r,i),"rgb")}})((A=function(e){return function(t,n){var r,i,o;for(o=[],r=i=0;i<=3;r=++i)o[r]=e(t[r],n[r]);return o}})((function(e,t){return e}))),v.multiply=y(A(Q)),v.screen=y(A(xe)),v.overlay=y(A(te)),v.darken=y(A(M)),v.lighten=y(A($)),v.dodge=y(A(T)),v.burn=y(A(x)),w.blend=v,w.analyze=function(e){var t,n,r,i;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;n<t;n++)null==(i=e[n])||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return w.limits(r,e,t)},r},w.scale=function(e,t){var n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,_,S;return u="rgb",d=w("#ccc"),m=0,a=[0,1],h=[],p=[0,0],n=!1,i=[],f=!1,c=0,l=1,o=!1,r={},g=!0,s=1,_=function(e){var t,n,r,o,a,s;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===Ce(e)&&null!=w.brewer&&(e=w.brewer[e]||w.brewer[e.toLowerCase()]||e),"array"===Ce(e)){for(t=r=0,o=(e=e.slice(0)).length-1;0<=o?r<=o:r>=o;t=0<=o?++r:--r)n=e[t],"string"===Ce(n)&&(e[t]=w(n));for(h.length=0,t=s=0,a=e.length-1;0<=a?s<=a:s>=a;t=0<=a?++s:--s)h.push(t/(e.length-1))}return x(),i=e},y=function(e){var t,r;if(null!=n){for(r=n.length-1,t=0;t<r&&e>=n[t];)t++;return t-1}return 0},S=function(e){return e},b=function(e,t){var o,a,f,m,v,b,x;if(null==t&&(t=!1),isNaN(e))return d;if(x=t?e:n&&n.length>2?y(e)/(n.length-2):l!==c?(e-c)/(l-c):1,t||(x=S(x)),1!==s&&(x=ne(x,s)),x=p[0]+x*(1-p[0]-p[1]),x=Math.min(1,Math.max(0,x)),f=Math.floor(1e4*x),g&&r[f])o=r[f];else{if("array"===Ce(i))for(a=m=0,b=h.length-1;0<=b?m<=b:m>=b;a=0<=b?++m:--m){if(x<=(v=h[a])){o=i[a];break}if(x>=v&&a===h.length-1){o=i[a];break}if(x>v&&x<h[a+1]){x=(x-v)/(h[a+1]-v),o=w.interpolate(i[a],i[a+1],x,u);break}}else"function"===Ce(i)&&(o=i(x));g&&(r[f]=o)}return o},x=function(){return r={}},_(e),(v=function(e){var t;return t=w(b(e)),f&&t[f]?t[f]():t}).classes=function(e){var t;return null!=e?("array"===Ce(e)?(n=e,a=[e[0],e[e.length-1]]):(t=w.analyze(a),n=0===e?[t.min,t.max]:w.limits(t,"e",e)),v):n},v.domain=function(e){var t,n,r,o,s,u,d;if(!arguments.length)return a;if(c=e[0],l=e[e.length-1],h=[],r=i.length,e.length===r&&c!==l)for(s=0,o=e.length;s<o;s++)n=e[s],h.push((n-c)/(l-c));else for(t=d=0,u=r-1;0<=u?d<=u:d>=u;t=0<=u?++d:--d)h.push(t/(r-1));return a=[c,l],v},v.mode=function(e){return arguments.length?(u=e,x(),v):u},v.range=function(e,t){return _(e),v},v.out=function(e){return f=e,v},v.spread=function(e){return arguments.length?(m=e,v):m},v.correctLightness=function(e){return null==e&&(e=!0),o=e,x(),S=o?function(e){var t,n,r,i,o,a,s,l,c;for(t=b(0,!0).lab()[0],n=b(1,!0).lab()[0],s=t>n,r=b(e,!0).lab()[0],i=r-(o=t+(n-t)*e),l=0,c=1,a=20;Math.abs(i)>.01&&a-- >0;)s&&(i*=-1),i<0?(l=e,e+=.5*(c-e)):(c=e,e+=.5*(l-e)),r=b(e,!0).lab()[0],i=r-o;return e}:function(e){return e},v},v.padding=function(e){return null!=e?("number"===Ce(e)&&(e=[e,e]),p=e,v):p},v.colors=function(t,r){var o,s,l,c,u,d,f,p;if(arguments.length<2&&(r="hex"),u=[],0===arguments.length)u=i.slice(0);else if(1===t)u=[v(.5)];else if(t>1)s=a[0],o=a[1]-s,u=function(){d=[];for(var e=0;0<=t?e<t:e>t;0<=t?e++:e--)d.push(e);return d}.apply(this).map((function(e){return v(s+e/(t-1)*o)}));else{if(e=[],f=[],n&&n.length>2)for(l=p=1,c=n.length;1<=c?p<c:p>c;l=1<=c?++p:--p)f.push(.5*(n[l-1]+n[l]));else f=a;u=f.map((function(e){return v(e)}))}return w[r]&&(u=u.map((function(e){return e[r]()}))),u},v.cache=function(e){return null!=e?(g=e,v):g},v.gamma=function(e){return null!=e?(s=e,v):s},v},null==w.scales&&(w.scales={}),w.scales.cool=function(){return w.scale([w.hsl(180,1,.9),w.hsl(250,.7,.4)])},w.scales.hot=function(){return w.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},w.analyze=function(e,t,n){var r,i,o,a,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},l=function(e,i){if(n(e,i))return null!=t&&"function"===Ce(t)?r(t(e)):null!=t&&"string"===Ce(t)||"number"===Ce(t)?r(e[t]):r(e)},"array"===Ce(e))for(a=0,o=e.length;a<o;a++)l(e[a]);else for(i in e)l(e[i],i);return s.domain=[s.min,s.max],s.limits=function(e,t){return w.limits(s,e,t)},s},w.limits=function(e,t,n){var r,i,o,a,s,l,c,u,d,f,p,m,g,v,y,b,x,_,S,C,k,M,T,A,P,R,O,I,L,D,N,F,z,B,j,Z,H,U,V,G,W,$,q,X,K,Q,ee,te,re,ie,oe,ae,se,le,ce;if(null==t&&(t="equal"),null==n&&(n=7),"array"===Ce(e)&&(e=w.analyze(e)),P=e.min,J=e.max,e.sum,le=e.values.sort((function(e,t){return e-t})),1===n)return[P,J];if(T=[],"c"===t.substr(0,1)&&(T.push(P),T.push(J)),"e"===t.substr(0,1)){for(T.push(P),C=N=1,j=n-1;1<=j?N<=j:N>=j;C=1<=j?++N:--N)T.push(P+C/n*(J-P));T.push(J)}else if("l"===t.substr(0,1)){if(P<=0)throw"Logarithmic scales are only possible for values > 0";for(R=Math.LOG10E*Y(P),A=Math.LOG10E*Y(J),T.push(P),C=ce=1,Z=n-1;1<=Z?ce<=Z:ce>=Z;C=1<=Z?++ce:--ce)T.push(ne(10,R+C/n*(A-R)));T.push(J)}else if("q"===t.substr(0,1)){for(T.push(P),C=r=1,$=n-1;1<=$?r<=$:r>=$;C=1<=$?++r:--r)F=(le.length-1)*C/n,(z=E(F))===F?T.push(le[z]):(B=F-z,T.push(le[z]*(1-B)+le[z+1]*B));T.push(J)}else if("k"===t.substr(0,1)){for(I=le.length,v=new Array(I),_=new Array(n),ie=!0,L=0,b=null,(b=[]).push(P),C=i=1,q=n-1;1<=q?i<=q:i>=q;C=1<=q?++i:--i)b.push(P+C/n*(J-P));for(b.push(J);ie;){for(k=o=0,X=n-1;0<=X?o<=X:o>=X;k=0<=X?++o:--o)_[k]=0;for(C=a=0,K=I-1;0<=K?a<=K:a>=K;C=0<=K?++a:--a){for(se=le[C],O=Number.MAX_VALUE,k=s=0,Q=n-1;0<=Q?s<=Q:s>=Q;k=0<=Q?++s:--s)(S=h(b[k]-se))<O&&(O=S,y=k);_[y]++,v[C]=y}for(D=new Array(n),k=l=0,ee=n-1;0<=ee?l<=ee:l>=ee;k=0<=ee?++l:--l)D[k]=null;for(C=c=0,te=I-1;0<=te?c<=te:c>=te;C=0<=te?++c:--c)null===D[x=v[C]]?D[x]=le[C]:D[x]+=le[C];for(k=u=0,re=n-1;0<=re?u<=re:u>=re;k=0<=re?++u:--u)D[k]*=1/_[k];for(ie=!1,k=d=0,H=n-1;0<=H?d<=H:d>=H;k=0<=H?++d:--d)if(D[k]!==b[C]){ie=!0;break}b=D,++L>200&&(ie=!1)}for(M={},k=f=0,U=n-1;0<=U?f<=U:f>=U;k=0<=U?++f:--f)M[k]=[];for(C=p=0,V=I-1;0<=V?p<=V:p>=V;C=0<=V?++p:--p)M[x=v[C]].push(le[C]);for(oe=[],k=m=0,G=n-1;0<=G?m<=G:m>=G;k=0<=G?++m:--m)oe.push(M[k][0]),oe.push(M[k][M[k].length-1]);for(oe=oe.sort((function(e,t){return e-t})),T.push(oe[0]),C=g=1,W=oe.length-1;g<=W;C=g+=2)ae=oe[C],isNaN(ae)||-1!==T.indexOf(ae)||T.push(ae)}return T},O=function(e,t,n){var r,i,o,s;return e=(r=ke(arguments))[0],t=r[1],n=r[2],isNaN(e)&&(e=0),(e/=360)<1/3?o=1-((i=(1-t)/3)+(s=(1+t*C(l*e)/C(a-l*e))/3)):e<2/3?i=1-((s=(1-t)/3)+(o=(1+t*C(l*(e-=1/3))/C(a-l*e))/3)):s=1-((o=(1-t)/3)+(i=(1+t*C(l*(e-=2/3))/C(a-l*e))/3)),[255*(s=q(n*s*3)),255*(o=q(n*o*3)),255*(i=q(n*i*3)),r.length>3?r[3]:1]},se=function(){var e,t,n,r,i,o,a;return i=(o=ke(arguments))[0],t=o[1],e=o[2],l=2*Math.PI,i/=255,t/=255,e/=255,0===(a=1-Math.min(i,t,e)/(r=(i+t+e)/3))?n=0:(n=(i-t+(i-e))/2,n/=Math.sqrt((i-t)*(i-t)+(i-e)*(t-e)),n=Math.acos(n),e>t&&(n=l-n),n/=l),[360*n,a,r]},w.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(n,Ee.call(arguments).concat(["hsi"]),(function(){}))},f.hsi=O,n.prototype.hsi=function(){return se(this._rgb)},F=function(e,t,n,r){var i,o,a,s,l,c,u,d,f,p;return"hsl"===r?(f=e.hsl(),p=t.hsl()):"hsv"===r?(f=e.hsv(),p=t.hsv()):"hcg"===r?(f=e.hcg(),p=t.hcg()):"hsi"===r?(f=e.hsi(),p=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",f=e.hcl(),p=t.hcl()),"h"===r.substr(0,1)&&(o=f[0],u=f[1],s=f[2],a=p[0],d=p[1],l=p[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===r||(c=d)):(i=o,1!==l&&0!==l||"hsv"===r||(c=u)):i=o+n*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),null==c&&(c=u+n*(d-u)),w[r](i,c,s+n*(l-s))},j=function(e,t,n,r){var i,o;return i=e.num(),o=t.num(),w.num(i+(o-i)*n,"num")},(p=p.concat(function(){var e,t,n,r;for(r=[],t=0,e=(n=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)K=n[t],r.push([K,F]);return r}())).push(["num",j]),z=function(e,t,r,i){var o,a;return o=e.lab(),a=t.lab(),new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},p.push(["lab",z])}).call(rs)})),as=os.scale,ss={scale:"uniform",mode:"hcl",domain:[0,1],value:16777215,reverse:!1},ls=new ie,cs=function(e){void 0===e&&(e={}),this.parameters=Ca(e,ss),"string"===typeof this.parameters.value&&(this.parameters.value=ls.set(this.parameters.value).getHex()),this.parameters.structure&&(this.atomProxy=this.parameters.structure.getAtomProxy())};cs.prototype.getScale=function(e){void 0===e&&(e={});var t=Ca(e,this.parameters);return"rainbow"===t.scale?t.scale=["red","orange","yellow","green","blue"]:"rwb"===t.scale&&(t.scale=["red","white","blue"]),t.reverse&&t.domain.reverse(),as(t.scale).mode(t.mode).domain(t.domain).out("num")},cs.prototype.colorToArray=function(e,t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=(e>>16&255)/255,t[n+1]=(e>>8&255)/255,t[n+2]=(255&e)/255,t},cs.prototype.atomColorToArray=function(e,t,n){return this.colorToArray(this.atomColor?this.atomColor(e):0,t,n)},cs.prototype.bondColor=function(e,t){return this.atomProxy&&this.atomColor?(this.atomProxy.index=t?e.atomIndex1:e.atomIndex2,this.atomColor(this.atomProxy)):0},cs.prototype.bondColorToArray=function(e,t,n,r){return this.colorToArray(this.bondColor(e,t),n,r)},cs.prototype.volumeColorToArray=function(e,t,n){return this.colorToArray(this.volumeColor?this.volumeColor(e):0,t,n)},cs.prototype.positionColorToArray=function(e,t,n){return this.colorToArray(this.positionColor?this.positionColor(e):0,t,n)};var us,ds=is((function(e){!function(t){function n(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function r(e,t){if("function"!==typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function i(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){i.prototype.dispatch.apply(e,arguments)}}n.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},i.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,t,r,i){var o,a=this._indexOfListener(e,r);if(-1!==a){if((o=this._bindings[a]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else o=new n(this,e,t,r,i),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,r=this._bindings.length;r--;)if((n=this._bindings[r])._listener===e&&n.context===t)return r;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,n){return r(e,"add"),this._registerListener(e,!1,t,n)},addOnce:function(e,t,n){return r(e,"addOnce"),this._registerListener(e,!0,t,n)},remove:function(e,t){r(e,"remove");var n=this._indexOfListener(e,t);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){t=this._bindings.slice(),this._shouldPropagate=!0;do{r--}while(t[r]&&this._shouldPropagate&&!1!==t[r].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var o=i;o.Signal=i,e.exports?e.exports=o:t.signals=o}(rs)})),fs=ds.Signal;!function(e){e[e.PROTEIN=1]="PROTEIN",e[e.NUCLEIC=2]="NUCLEIC",e[e.RNA=3]="RNA",e[e.DNA=4]="DNA",e[e.POLYMER=5]="POLYMER",e[e.WATER=6]="WATER",e[e.HELIX=7]="HELIX",e[e.SHEET=8]="SHEET",e[e.TURN=9]="TURN",e[e.BACKBONE=10]="BACKBONE",e[e.SIDECHAIN=11]="SIDECHAIN",e[e.ALL=12]="ALL",e[e.HETERO=13]="HETERO",e[e.ION=14]="ION",e[e.SACCHARIDE=15]="SACCHARIDE",e[e.SUGAR=15]="SUGAR",e[e.BONDED=16]="BONDED",e[e.RING=17]="RING",e[e.AROMATICRING=18]="AROMATICRING",e[e.METAL=19]="METAL",e[e.NONE=20]="NONE"}(us||(us={}));var ps=["*","","ALL"],hs=["NONE"],ms=[us.BACKBONE,us.SIDECHAIN,us.BONDED,us.RING,us.AROMATICRING,us.METAL],gs=[us.POLYMER,us.WATER],vs=["ALA","GLY","SER"],ys=["CYS","SER","THR"],bs=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],xs=["PHE","TRP","TYR","HIS"],ws=["ASN","GLN"],_s=["ASP","GLU"],Ss=["ARG","HIS","LYS"],Cs=["ARG","ASP","GLU","HIS","LYS"],ks=["ASN","ARG","ASP","CYS","GLY","GLN","GLU","HIS","LYS","SER","THR","TYR"],Ms=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],Ts=["HIS","PHE","PRO","TRP","TYR"],As=["ALA","GLY","ILE","LEU","VAL"];function Es(e,t){if(void 0===t.atomname&&void 0===t.element&&void 0===t.altloc&&void 0===t.atomindex&&void 0===t.keyword&&void 0===t.inscode&&void 0===t.resname&&void 0===t.sstruc&&void 0===t.resno&&void 0===t.chainname&&void 0===t.model)return-1;if(void 0!==t.keyword){if(t.keyword===us.BACKBONE&&!e.isBackbone())return!1;if(t.keyword===us.SIDECHAIN&&!e.isSidechain())return!1;if(t.keyword===us.BONDED&&!e.isBonded())return!1;if(t.keyword===us.RING&&!e.isRing())return!1;if(t.keyword===us.AROMATICRING&&!e.isAromatic())return!1;if(t.keyword===us.HETERO&&!e.isHetero())return!1;if(t.keyword===us.PROTEIN&&!e.isProtein())return!1;if(t.keyword===us.NUCLEIC&&!e.isNucleic())return!1;if(t.keyword===us.RNA&&!e.isRna())return!1;if(t.keyword===us.DNA&&!e.isDna())return!1;if(t.keyword===us.POLYMER&&!e.isPolymer())return!1;if(t.keyword===us.WATER&&!e.isWater())return!1;if(t.keyword===us.HELIX&&!e.isHelix())return!1;if(t.keyword===us.SHEET&&!e.isSheet())return!1;if(t.keyword===us.TURN&&!e.isTurn())return!1;if(t.keyword===us.ION&&!e.isIon())return!1;if(t.keyword===us.SACCHARIDE&&!e.isSaccharide())return!1;if(t.keyword===us.METAL&&!e.isMetal())return!1}if(void 0!==t.atomname&&t.atomname!==e.atomname)return!1;if(void 0!==t.element&&t.element!==e.element)return!1;if(void 0!==t.altloc&&t.altloc!==e.altloc)return!1;if(void 0!==t.atomindex&&Ia(t.atomindex,e.index)<0)return!1;if(void 0!==t.resname)if(Array.isArray(t.resname)){if(!t.resname.includes(e.resname))return!1}else if(t.resname!==e.resname)return!1;if(void 0!==t.sstruc&&t.sstruc!==e.sstruc)return!1;if(void 0!==t.resno)if(Array.isArray(t.resno)&&2===t.resno.length){if(t.resno[0]>e.resno||t.resno[1]<e.resno)return!1}else if(t.resno!==e.resno)return!1;return(void 0===t.inscode||t.inscode===e.inscode)&&((void 0===t.chainname||t.chainname===e.chainname)&&(void 0===t.model||t.model===e.modelIndex))}function Ps(e,t){if(void 0===t.resname&&void 0===t.resno&&void 0===t.inscode&&void 0===t.sstruc&&void 0===t.model&&void 0===t.chainname&&void 0===t.atomindex&&(void 0===t.keyword||ms.includes(t.keyword)))return-1;if(void 0!==t.keyword){if(t.keyword===us.HETERO&&!e.isHetero())return!1;if(t.keyword===us.PROTEIN&&!e.isProtein())return!1;if(t.keyword===us.NUCLEIC&&!e.isNucleic())return!1;if(t.keyword===us.RNA&&!e.isRna())return!1;if(t.keyword===us.DNA&&!e.isDna())return!1;if(t.keyword===us.POLYMER&&!e.isPolymer())return!1;if(t.keyword===us.WATER&&!e.isWater())return!1;if(t.keyword===us.HELIX&&!e.isHelix())return!1;if(t.keyword===us.SHEET&&!e.isSheet())return!1;if(t.keyword===us.TURN&&!e.isTurn())return!1;if(t.keyword===us.ION&&!e.isIon())return!1;if(t.keyword===us.SACCHARIDE&&!e.isSaccharide())return!1}if(void 0!==t.atomindex&&0===La(t.atomindex,e.atomOffset,e.atomEnd))return!1;if(void 0!==t.resname)if(Array.isArray(t.resname)){if(!t.resname.includes(e.resname))return!1}else if(t.resname!==e.resname)return!1;if(void 0!==t.sstruc&&t.sstruc!==e.sstruc)return!1;if(void 0!==t.resno)if(Array.isArray(t.resno)&&2===t.resno.length){if(t.resno[0]>e.resno||t.resno[1]<e.resno)return!1}else if(t.resno!==e.resno)return!1;return(void 0===t.inscode||t.inscode===e.inscode)&&((void 0===t.chainname||t.chainname===e.chainname)&&(void 0===t.model||t.model===e.modelIndex))}function Rs(e,t){if(void 0===t.chainname&&void 0===t.model&&void 0===t.atomindex&&(void 0===t.keyword||!gs.includes(t.keyword)||!e.entity))return-1;if(void 0!==t.keyword){if(t.keyword===us.POLYMER&&!e.entity.isPolymer())return!1;if(t.keyword===us.WATER&&!e.entity.isWater())return!1}return(void 0===t.atomindex||0!==La(t.atomindex,e.atomOffset,e.atomEnd))&&((void 0===t.chainname||t.chainname===e.chainname)&&(void 0===t.model||t.model===e.modelIndex))}function Os(e,t){return void 0===t.model&&void 0===t.atomindex?-1:(void 0===t.atomindex||0!==La(t.atomindex,e.atomOffset,e.atomEnd))&&(void 0===t.model||t.model===e.index)}function Is(e,t){if(null===e)return!1;if(e.error)return!1;if(!e.rules||0===e.rules.length)return!1;for(var n=e.rules.length,r=!e.negate,i=!!e.negate,o=[],a=0;a<n;++a){var s=e.rules[a];s.hasOwnProperty("operator")&&(o[a]=Is(s,t))}return function(a){for(var s="AND"===e.operator,l=!1,c=0;c<n;++c){var u=e.rules[c],d=void 0;if(u.hasOwnProperty("operator")){var f=o[c];if(-1===(d=!1!==f?f(a):-1)){l=!0;continue}if(!0===d){if(s)continue;return r}if(s)return i}else{if(u.keyword===us.ALL){if(s)continue;return r}if(u.keyword===us.NONE){if(s)continue;return i}if(-1!==(d=t(a,u))){if(!0===d){if(s)continue;return r}if(s)return i}else l=!0}}return l?-1:s?r:i}}function Ls(e,t){if(e.error)return e;if(!e.rules||0===e.rules.length)return e;var n=e.rules.length,r={operator:e.operator,rules:[]};e.hasOwnProperty("negate")&&(r.negate=e.negate);for(var i=0;i<n;++i){var o=e.rules[i];if(o.hasOwnProperty("operator")){var a=Ls(o,t);null!==a&&r.rules.push(a)}else t(o)||r.rules.push(o)}return r.rules.length>0?e:null}function Ds(e,t){void 0===t&&(t=!1);var n=e;return t&&(n=Ls(e,(function(e){return void 0!==e.keyword&&!ms.includes(e.keyword)||(void 0!==e.model||(void 0!==e.chainname||(void 0!==e.resname||(void 0!==e.resno||void 0!==e.sstruc))))}))),Is(n,Es)}function Ns(e,t){void 0===t&&(t=!1);var n=e;return t&&(n=Ls(e,(function(e){return!(void 0===e.keyword||!ms.includes(e.keyword))||(void 0!==e.model||(void 0!==e.chainname||(void 0!==e.atomname||(void 0!==e.element||void 0!==e.altloc))))}))),Is(n,Ps)}function Fs(e,t){void 0===t&&(t=!1);var n=e;return t&&(n=Ls(e,(function(e){return void 0!==e.keyword&&!gs.includes(e.keyword)||(void 0!==e.resname||(void 0!==e.resno||(void 0!==e.atomname||(void 0!==e.element||(void 0!==e.altloc||(void 0!==e.sstruc||void 0!==e.inscode))))))}))),Is(n,Rs)}function zs(e,t){void 0===t&&(t=!1);var n=e;return t&&(n=Ls(e,(function(e){return void 0!==e.keyword||(void 0!==e.chainname||(void 0!==e.resname||(void 0!==e.resno||(void 0!==e.atomname||(void 0!==e.element||(void 0!==e.altloc||(void 0!==e.sstruc||void 0!==e.inscode)))))))}))),Is(n,Os)}var Bs=function(e){this.signals={stringChanged:new fs},this.setString(e)},js={type:{configurable:!0}};js.type.get=function(){return"selection"},Bs.prototype.setString=function(e,t){if(void 0===e&&(e=this.string||""),e!==this.string){try{this.selection=function(e){var t={operator:void 0,rules:[]};if(!e)return t;var n,r,i=t,o=[];"("===(e=e.replace(/\(/g," ( ").replace(/\)/g," ) ").trim()).charAt(0)&&")"===e.substr(-1)&&(e=e.slice(1,-1).trim());for(var a=e.split(/\s+/),s=function(e){n={operator:e,rules:[]},void 0===i?(i=n,t=n):(i.rules.push(n),o.push(i),i=n)},l=function(e){r=i,void 0===(i=o.pop())&&(s(e),c(r))},c=function(e){i.rules.push(e)},u=!1,d=0;d<a.length;++d){var f=a[d],p=f.toUpperCase();if("("!==f)if(")"!==f){if(u>0)if("NOT"===p)u=1;else if(1===u)u=2;else{if(2!==u)throw new Error("something went wrong with 'not'");u=!1,l()}if("AND"!==p)if("OR"!==p)if("NOT"!==f.toUpperCase()){if(+p!==+p){var h=us[p];if(void 0!==h){c({keyword:h});continue}}if("HYDROGEN"!==p)if("SMALL"!==p)if("NUCLEOPHILIC"!==p)if("HYDROPHOBIC"!==p)if("AROMATIC"!==p)if("AMIDE"!==p)if("ACIDIC"!==p)if("BASIC"!==p)if("CHARGED"!==p)if("POLAR"!==p)if("NONPOLAR"!==p)if("CYCLIC"!==p)if("ALIPHATIC"!==p)if("SIDECHAINATTACHED"!==p)if("LIGAND"!==p)if(-1===ps.indexOf(p))if("@"!==f.charAt(0))if("#"!==f.charAt(0))if("_"!==f.charAt(0))if("["!==f[0]||"]"!==f[f.length-1])if(f.length>=1&&f.length<=4&&"^"!==f[0]&&":"!==f[0]&&"."!==f[0]&&"%"!==f[0]&&"/"!==f[0]&&isNaN(parseInt(f)))c({resname:p});else{var m={operator:"AND",rules:[]},g=f.split("/");if(g.length>1&&g[1]){if(isNaN(parseInt(g[1])))throw new Error("model must be an integer");m.rules.push({model:parseInt(g[1])})}var v=g[0].split("%");v.length>1&&m.rules.push({altloc:v[1]});var y=v[0].split(".");if(y.length>1&&y[1]){if(y[1].length>4)throw new Error("atomname must be one to four characters");m.rules.push({atomname:y[1].substring(0,4).toUpperCase()})}var b=y[0].split(":");b.length>1&&b[1]&&m.rules.push({chainname:b[1]});var x=b[0].split("^");if(x.length>1&&m.rules.push({inscode:x[1]}),x[0]){var w=void 0,_=void 0;"-"===x[0][0]&&(x[0]=x[0].substr(1),w=!0),x[0].includes("--")&&(x[0]=x[0].replace("--","-"),_=!0);var S=x[0].split("-");if(1===S.length){var C=parseInt(S[0]);if(isNaN(C))throw new Error("resi must be an integer");w&&(C*=-1),m.rules.push({resno:C})}else{if(2!==S.length)throw new Error("resi range must contain one '-'");var k=S.map((function(e){return parseInt(e)}));w&&(k[0]*=-1),_&&(k[1]*=-1),m.rules.push({resno:[k[0],k[1]]})}}if(1===m.rules.length)c(m.rules[0]);else{if(!(m.rules.length>1))throw new Error("empty selection chunk");c(m)}}else{var M=p.substr(1,f.length-2).split(","),T=M.length>1?M:M[0];c({resname:T})}else c({element:p.substr(1)});else console.error("# for element selection deprecated, use _"),c({element:p.substr(1)});else{var A=f.substr(1).split(",").map((function(e){return parseInt(e)}));A.sort((function(e,t){return e-t})),c({atomindex:A})}else c({keyword:us.ALL});else c({operator:"AND",rules:[{operator:"OR",rules:[{operator:"AND",rules:[{keyword:us.HETERO},{negate:!0,operator:void 0,rules:[{keyword:us.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{keyword:us.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{operator:"OR",rules:[{keyword:us.WATER},{keyword:us.ION}]}]}]});else c({operator:"OR",rules:[{keyword:us.SIDECHAIN},{operator:"AND",negate:!1,rules:[{keyword:us.PROTEIN},{operator:"OR",negate:!1,rules:[{atomname:"CA"},{atomname:"BB"}]}]},{operator:"AND",negate:!1,rules:[{resname:"PRO"},{atomname:"N"}]},{operator:"AND",negate:!1,rules:[{keyword:us.NUCLEIC},{operator:"OR",negate:!0,rules:[{atomname:"P"},{atomname:"OP1"},{atomname:"OP2"},{atomname:"O3'"},{atomname:"O3*"},{atomname:"O5'"},{atomname:"O5*"},{atomname:"C5'"},{atomname:"C5*"}]}]}]});else c({resname:As});else c({resname:Ts});else c({resname:Ms});else c({resname:ks});else c({resname:Cs});else c({resname:Ss});else c({resname:_s});else c({resname:ws});else c({resname:xs});else c({resname:bs});else c({resname:ys});else c({resname:vs});else c({operator:"OR",rules:[{element:"H"},{element:"D"}]})}else u=1,s(),i.negate=!0;else"AND"===i.operator?l("OR"):i.operator="OR";else if("OR"===i.operator){var E=i.rules.pop();s("AND"),c(E)}else i.operator="AND"}else l(),i.negate&&l();else u=!1,s()}return void 0===t.operator&&1===t.rules.length&&t.rules[0].hasOwnProperty("operator")&&(t=t.rules[0]),t}(e)}catch(r){this.selection={error:r.message}}var n=this.selection;this.string=e,this.test=Ds(n),this.residueTest=Ns(n),this.chainTest=Fs(n),this.modelTest=zs(n),this.atomOnlyTest=Ds(n,!0),this.residueOnlyTest=Ns(n,!0),this.chainOnlyTest=Fs(n,!0),this.modelOnlyTest=zs(n,!0),t||this.signals.stringChanged.dispatch(this.string)}},Bs.prototype.isAllSelection=function(){return ps.includes(this.string.toUpperCase())},Bs.prototype.isNoneSelection=function(){return hs.includes(this.string.toUpperCase())},Object.defineProperties(Bs.prototype,js);var Zs=function(e){function t(t){var n=this;e.call(this,t),this.colormakerList=[],this.selectionList=[],(t.dataList||[]).forEach((function(e){var t=e[0],r=e[1],i=e[2];void 0===i&&(i={}),pl.hasScheme(t)?Object.assign(i,{scheme:t,structure:n.parameters.structure}):Object.assign(i,{scheme:"uniform",value:new ie(t).getHex()}),n.colormakerList.push(pl.getScheme(i)),n.selectionList.push(new Bs(r))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){for(var t=0,n=this.selectionList.length;t<n;++t){var r=this.selectionList[t].test;if(r&&r(e))return this.colormakerList[t].atomColor(e)}return 16777215},t}(cs),Hs={"":"",OrRd:"[S] Orange-Red",PuBu:"[S] Purple-Blue",BuPu:"[S] Blue-Purple",Oranges:"[S] Oranges",BuGn:"[S] Blue-Green",YlOrBr:"[S] Yellow-Orange-Brown",YlGn:"[S] Yellow-Green",Reds:"[S] Reds",RdPu:"[S] Red-Purple",Greens:"[S] Greens",YlGnBu:"[S] Yellow-Green-Blue",Purples:"[S] Purples",GnBu:"[S] Green-Blue",Greys:"[S] Greys",YlOrRd:"[S] Yellow-Orange-Red",PuRd:"[S] Purple-Red",Blues:"[S] Blues",PuBuGn:"[S] Purple-Blue-Green",Viridis:"[D] Viridis",Spectral:"[D] Spectral",RdYlGn:"[D] Red-Yellow-Green",RdBu:"[D] Red-Blue",PiYG:"[D] Pink-Yellowgreen",PRGn:"[D] Purplered-Green",RdYlBu:"[D] Red-Yellow-Blue",BrBG:"[D] Brown-Bluegreen",RdGy:"[D] Red-Grey",PuOr:"[D] Purple-Orange",Set1:"[Q] Set1",Set2:"[Q] Set2",Set3:"[Q] Set3",Dark2:"[Q] Dark2",Paired:"[Q] Paired",Pastel1:"[Q] Pastel1",Pastel2:"[Q] Pastel2",Accent:"[Q] Accent",rainbow:"[?] Rainbow",rwb:"[?] Red-White-Blue"},Us={"":"",rgb:"Red Green Blue",hsv:"Hue Saturation Value",hsl:"Hue Saturation Lightness",hsi:"Hue Saturation Intensity",lab:"CIE L*a*b*",hcl:"Hue Chroma Lightness"},Vs=function(){this.schemes={},this.userSchemes={}};Vs.prototype.getScheme=function(e){var t=((e||{}).scheme||"").toLowerCase();return new(t in this.schemes?this.schemes[t]:t in this.userSchemes?this.userSchemes[t]:cs)(e)},Vs.prototype.getSchemes=function(){var e={};return Object.keys(this.schemes).forEach((function(t){e[t]=t})),Object.keys(this.userSchemes).forEach((function(t){e[t]=t.split("|")[1]})),e},Vs.prototype.getScales=function(){return Hs},Vs.prototype.getModes=function(){return Us},Vs.prototype.add=function(e,t){e=e.toLowerCase(),this.schemes[e]=t},Vs.prototype.addScheme=function(e,t){return e instanceof cs||(e=this._createScheme(e)),this._addUserScheme(e,t)},Vs.prototype._addUserScheme=function(e,t){t=t||"";var n=(Ka()+"|"+t).toLowerCase();return this.userSchemes[n]=e,n},Vs.prototype.removeScheme=function(e){e=e.toLowerCase(),delete this.userSchemes[e]},Vs.prototype._createScheme=function(e){var t=function(t){cs.call(this,t),e.call(this,t)};return(t.prototype=cs.prototype).constructor=cs,t},Vs.prototype.addSelectionScheme=function(e,t){var n=function(t){function n(n){t.call(this,Object.assign({dataList:e},n))}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(Zs);return this._addUserScheme(n,t)},Vs.prototype.hasScheme=function(e){return(e=e.toLowerCase())in this.schemes||e in this.userSchemes};var Gs=function(e){function t(){e.call(this,"parser")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__hasObjName=function(e,t){var n=this.get(e);return n&&n.prototype.__objName===t},t.prototype.isTrajectory=function(e){return this.__hasObjName(e,"frames")},t.prototype.isStructure=function(e){return this.__hasObjName(e,"structure")},t.prototype.isVolume=function(e){return this.__hasObjName(e,"volume")},t.prototype.isSurface=function(e){return this.__hasObjName(e,"surface")},t.prototype.isBinary=function(e){var t=this.get(e);return t&&t.prototype.isBinary},t.prototype.isXml=function(e){var t=this.get(e);return t&&t.prototype.isXml},t.prototype.isJson=function(e){var t=this.get(e);return t&&t.prototype.isJson},t.prototype.getTrajectoryExtensions=function(){var e=this;return this.names.filter((function(t){return e.isTrajectory(t)}))},t.prototype.getStructureExtensions=function(){var e=this;return this.names.filter((function(t){return e.isStructure(t)}))},t.prototype.getVolumeExtensions=function(){var e=this;return this.names.filter((function(t){return e.isVolume(t)}))},t.prototype.getSurfaceExtensions=function(){var e=this;return this.names.filter((function(t){return e.isSurface(t)}))},t}(Wa);function Ws(e){var t=e;return e.forEach((function(e){e.__deps&&Array.prototype.push.apply(t,Ws(e.__deps))})),t}function $s(e){return Da(Ws(e)).map((function(e){return e.toString()})).join("\n\n\n")}function qs(e){var t=e.data.__name,n=e.data.__postId;if(void 0===t)console.error("message __name undefined");else if(void 0===self.func)console.error("worker func undefined",t);else{self.func(e,(function(e,t){e=e||{},void 0!==n&&(e.__postId=n);try{self.postMessage(e,t)}catch(r){console.error("self.postMessage:",r),self.postMessage(e)}}))}}function Ys(e,t){var n="'use strict';\n\n"+$s(t);return n+="\n\n\nself.func = "+e.toString()+";",n+="\n\n\nself.onmessage = "+qs.toString()+";",new Blob([n],{type:"application/javascript"})}var Xs=function(){this.activeWorkerCount=0,this._funcDict={},this._depsDict={},this._blobDict={}};Xs.prototype.add=function(e,t,n){this._funcDict[e]=t,this._depsDict[e]=n},Xs.prototype.get=function(e){return this._blobDict[e]||(this._blobDict[e]=Ys(this._funcDict[e],this._depsDict[e])),this._blobDict[e]};var Ks=Aa(),Js=!1;try{var Qs=Object.defineProperty({},"passive",{get:function(){Js=!0}});window.addEventListener("test",(function(e){}),Qs)}catch(bS){}var el="undefined"!==typeof window&&"undefined"!==typeof window.orientation,tl=!1;var nl=!1;var rl={log:Function.prototype.bind.call(console.log,console),info:Function.prototype.bind.call(console.info,console),warn:Function.prototype.bind.call(console.warn,console),error:Function.prototype.bind.call(console.error,console),time:Function.prototype.bind.call(console.time,console),timeEnd:Function.prototype.bind.call(console.timeEnd,console)},il={color:"green",labelColor:"grey",labelAttachment:"bottom-center",labelSize:.7,labelZOffset:.5,labelYOffset:.1,labelBorder:!0,labelBorderColor:"lightgrey",labelBorderWidth:.25,lineOpacity:.8,linewidth:5,opacity:.6,labelUnit:"angstrom",arcVisible:!0,planeVisible:!1};function ol(e){void 0===e&&(e={}),Object.assign(il,e)}var al,sl=!!(al=_a("debug"))&&("string"!==typeof al||/^1|true|t|yes|y$/i.test(al));function ll(e){sl=e}var cl,ul,dl=["ngl","js"],fl=new Xs,pl=new Vs,hl=new Wa("datasource"),ml=new Wa("representatation"),gl=new Gs,vl=new Wa("shader"),yl=new Wa("decompressor"),bl=new Wa("component"),xl=new Wa("buffer"),wl=new Wa("picker");function _l(e){cl=e}function Sl(e){ul=e}var Cl=function(e,t){void 0===t&&(t={}),this.chunkSize=10485760,this.newline="\n",this.__pointer=0,this.__partialLine="",this.compressed=Sa(t.compressed,!1),this.binary=Sa(t.binary,!1),this.json=Sa(t.json,!1),this.xml=Sa(t.xml,!1),this.src=e};Cl.prototype.isBinary=function(){return this.binary||this.compressed},Cl.prototype.read=function(){var e=this;return this._read().then((function(t){var n=e.compressed?yl.get(e.compressed):void 0;return e.compressed&&n?e.data=n(t):((e.binary||e.compressed)&&t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e.data=t),e.data}))},Cl.prototype._chunk=function(e,t){return t=Math.min(this.data.length,t),0===e&&this.data.length===t?this.data:this.isBinary()?this.data.subarray(e,t):this.data.substring(e,t)},Cl.prototype.chunk=function(e){var t=e+this.chunkSize;return this._chunk(e,t)},Cl.prototype.peekLines=function(e){var t,n=this.data,r=n.length,i=this.isBinary()?this.newline.charCodeAt(0):this.newline,o=0;for(t=0;t<r&&(n[t]===i&&++o,o!==e);++t);var a=this._chunk(0,t+1);return this.chunkToLines(a,"",t>r).lines},Cl.prototype.chunkCount=function(){return Math.floor(this.data.length/this.chunkSize)+1},Cl.prototype.asText=function(){return this.isBinary()?Na(this.data):this.data},Cl.prototype.chunkToLines=function(e,t,n){var r=this.newline;if(!this.isBinary()&&e.length===this.data.length)return{lines:e.split(r),partialLine:""};var i=[],o=this.isBinary()?Na(e):e,a=o.lastIndexOf(r);if(-1===a)t+=o;else{var s=t+o.substr(0,a);i=i.concat(s.split(r)),t=a===o.length-r.length?"":o.substr(a+r.length)}return n&&""!==t&&i.push(t),{lines:i,partialLine:t}},Cl.prototype.nextChunk=function(){var e=this.__pointer;if(!(e>this.data.length))return this.__pointer+=this.chunkSize,this.chunk(e)},Cl.prototype.nextChunkOfLines=function(){var e=this.nextChunk();if(void 0!==e){var t=this.__pointer>this.data.length,n=this.chunkToLines(e,this.__partialLine,t);return this.__partialLine=n.partialLine,n.lines}},Cl.prototype.eachChunk=function(e){for(var t=this.chunkSize,n=this.data.length,r=this.chunkCount(),i=0;i<n;i+=t){e(this.chunk(i),Math.round(i/t),r)}},Cl.prototype.eachChunkOfLines=function(e){var t=this;this.eachChunk((function(n,r,i){var o=r===i+1,a=t.chunkToLines(n,t.__partialLine,o);t.__partialLine=a.partialLine,e(a.lines,r,i)}))},Cl.prototype.dispose=function(){delete this.src};var kl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._read=function(){var e=this;return new Promise((function(t,n){var r=e.src,i=new FileReader;i.onload=function(e){e.target&&t(e.target.result)},i.onerror=function(e){return n(e)},e.binary||e.compressed?i.readAsArrayBuffer(r):i.readAsText(r)}))},t}(Cl),Ml=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._read=function(){var e=this;return new Promise((function(t,n){var r=e.src,i=new XMLHttpRequest;i.open("GET",r,!0),i.addEventListener("load",(function(){if(200===i.status||304===i.status||0===i.status)try{t(i.response)}catch(bS){n(bS)}else n(i.statusText)}),!1),i.addEventListener("error",(function(e){return n("network error")}),!1),e.isBinary()?i.responseType="arraybuffer":e.json?i.responseType="json":e.xml?i.responseType="document":i.responseType="text",i.send()}))},t}(Cl),Tl=function(e,t){void 0===t&&(t={}),this.parameters=Ca(t,{ext:"",compressed:!1,binary:gl.isBinary(t.ext||""),name:"",dir:"",path:"",protocol:""});var n={compressed:this.parameters.compressed,binary:this.parameters.binary,json:gl.isJson(this.parameters.ext),xml:gl.isXml(this.parameters.ext)};"undefined"!==typeof File&&e instanceof File||"undefined"!==typeof Blob&&e instanceof Blob?this.streamer=new kl(e,n):this.streamer=new Ml(e,n)},Al=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parserParams={voxelSize:n.voxelSize,firstModelOnly:n.firstModelOnly,asTrajectory:n.asTrajectory,cAlphaOnly:n.cAlphaOnly,name:this.parameters.name,path:this.parameters.path}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){return new(gl.get(this.parameters.ext))(this.streamer,this.parserParams).parse()},t}(Tl),El=function(e,t,n){this.name=t,this.path=n,this.signals={elementAdded:new fs,elementRemoved:new fs,nameChanged:new fs},this.type="Script",this.dir=n.substring(0,n.lastIndexOf("/")+1);try{this.fn=new Function("stage","__name","__path","__dir",e)}catch(bS){rl.error("Script compilation failed",bS),this.fn=function(){}}};El.prototype.run=function(e){var t=this;return new Promise((function(n,r){try{t.fn.apply(null,[e,t.name,t.path,t.dir]),n()}catch(bS){rl.error("Script.fn",bS),r(bS)}}))};var Pl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;return this.streamer.read().then((function(){return new El(e.streamer.asText(),e.parameters.name,e.parameters.path)}))},t}(Tl);function Rl(e){var t,n,r=yl.names,i="",o=(t=e instanceof File?e.name:e instanceof Blob?"":e).lastIndexOf("?"),a=-1!==o?t.substring(o):"",s=(t=t.substring(0,-1===o?t.length:o)).replace(/^.*[\\/]/,""),l=s.substring(0,s.lastIndexOf(".")),c=s.split("."),u=c.length>1?(c.pop()||"").toLowerCase():"",d=t.match(/^(.+):\/\/(.+)$/);d&&(i=d[1].toLowerCase(),t=d[2]||"");var f=t.substring(0,t.lastIndexOf("/")+1);if(r.includes(u)){n=u;var p=t.length-u.length-1;u=(t.substr(0,p).split(".").pop()||"").toLowerCase();var h=l.length-u.length-1;l=l.substr(0,h)}else n=!1;return{path:t,name:s,ext:u,base:l,dir:f,compressed:n,protocol:i,query:a,src:e}}function Ol(e){var t=Rl(e),n=hl.get(t.protocol);return n&&!(t=Rl(n.getUrl(t.src))).ext&&n.getExt&&(t.ext=n.getExt(e)),t}function Il(e,t){void 0===t&&(t={});var n,r=Object.assign(Ol(e),t);return gl.names.includes(r.ext)?n=new Al(r.src,r):dl.includes(r.ext)&&(n=new Pl(r.src,r)),n?n.load():Promise.reject(new Error("autoLoad: ext '"+r.ext+"' unknown"))}var Ll=is((function(e,t){!function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function n(e){return i(a(e),arguments)}function r(e,t){return n.apply(null,[e].concat(t||[]))}function i(t,r){var i,o,a,s,l,c,u,d,f,p=1,h=t.length,m="";for(o=0;o<h;o++)if("string"===typeof t[o])m+=t[o];else if("object"===typeof t[o]){if((s=t[o]).keys)for(i=r[p],a=0;a<s.keys.length;a++){if(void 0==i)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));i=i[s.keys[a]]}else i=s.param_no?r[s.param_no]:r[p++];if(e.not_type.test(s.type)&&e.not_primitive.test(s.type)&&i instanceof Function&&(i=i()),e.numeric_arg.test(s.type)&&"number"!==typeof i&&isNaN(i))throw new TypeError(n("[sprintf] expecting number but found %T",i));switch(e.number.test(s.type)&&(d=i>=0),s.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,s.width?parseInt(s.width):0);break;case"e":i=s.precision?parseFloat(i).toExponential(s.precision):parseFloat(i).toExponential();break;case"f":i=s.precision?parseFloat(i).toFixed(s.precision):parseFloat(i);break;case"g":i=s.precision?String(Number(i.toPrecision(s.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=s.precision?i.substring(0,s.precision):i;break;case"t":i=String(!!i),i=s.precision?i.substring(0,s.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=s.precision?i.substring(0,s.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=s.precision?i.substring(0,s.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}e.json.test(s.type)?m+=i:(!e.number.test(s.type)||d&&!s.sign?f="":(f=d?"+":"-",i=i.toString().replace(e.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(f+i).length,l=s.width&&u>0?c.repeat(u):"",m+=s.align?f+i+l:"0"===c?f+l+i:l+f+i)}return m}var o=Object.create(null);function a(t){if(o[t])return o[t];for(var n,r=t,i=[],a=0;r;){if(null!==(n=e.text.exec(r)))i.push(n[0]);else if(null!==(n=e.modulo.exec(r)))i.push("%");else{if(null===(n=e.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){a|=1;var s=[],l=n[2],c=[];if(null===(c=e.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=e.key_access.exec(l)))s.push(c[1]);else{if(null===(c=e.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1])}n[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}r=r.substring(n[0].length)}return o[t]=i}t.sprintf=n,t.vsprintf=r,"undefined"!==typeof window&&(window.sprintf=n,window.vsprintf=r)}()})),Dl=Ll.sprintf,Nl=function(){};Nl.prototype.getBlob=function(){return new Blob([this.getData()],{type:this.mimeType})},Nl.prototype.download=function(e,t){e=Sa(e,this.defaultName),t=Sa(t,this.defaultExt),Pa(this.getBlob(),e+"."+t)};var Fl=function(e){function t(t,n){e.call(this),this.mimeType="text/plain",this.defaultName="structure",this.defaultExt="pdb";var r=Object.assign({},n);this.renumberSerial=Sa(r.renumberSerial,!0),this.remarks=function(e){return Array.isArray(e)?e:[e]}(Sa(r.remarks,[])),this.structure=t,this._records=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._writeRecords=function(){this._records.length=0,this._writeTitle(),this._writeRemarks(),this._writeAtoms()},t.prototype._writeTitle=function(){this._records.push(Dl("TITLE %-74s",this.structure.name))},t.prototype._writeRemarks=function(){var e=this;this.remarks.forEach((function(t){e._records.push(Dl("REMARK %-73s",t))})),this.structure.trajectory&&(this._records.push(Dl("REMARK %-73s","Trajectory '"+this.structure.trajectory.name+"'")),this._records.push(Dl("REMARK %-73s","Frame "+this.structure.trajectory.frame)))},t.prototype._writeAtoms=function(){var e=this,t=1,n=1;this.structure.eachModel((function(r){e._records.push(Dl("MODEL %-74d",n++)),r.eachAtom((function(n){var r=n.hetero?"HETATM%5d %-4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s":"ATOM  %5d %-4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s",i=e.renumberSerial?t:n.serial,o=n.atomname;1===o.length&&(o=" "+o),e._records.push(Dl(r,i,o,n.resname,Sa(n.chainname," "),n.resno,n.x,n.y,n.z,Sa(n.occupancy,1),Sa(n.bfactor,0),"",Sa(n.element,""))),t+=1})),e._records.push(Dl("%-80s","ENDMDL")),n+=1})),this._records.push(Dl("%-80s","END"))},t.prototype.getString=function(){return console.warn("PdbWriter.getString() is deprecated, use .getData instead"),this.getData()},t.prototype.getData=function(){return this._writeRecords(),this._records.join("\n")},t}(Nl),zl=function(e){function t(t){e.call(this),this.mimeType="text/plain",this.defaultName="structure",this.defaultExt="sdf",this.structure=t,this._records=[]}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={idString:{configurable:!0},titleString:{configurable:!0},countsString:{configurable:!0},chargeLines:{configurable:!0}};return n.idString.get=function(){return this.structure.id},n.titleString.get=function(){return"  "+this.structure.title},n.countsString.get=function(){return Dl("%3i%3i  0  0  0  0  0  0  0  0999 V2000",this.structure.atomCount,this.structure.bondCount)},n.chargeLines.get=function(){var e=[];this.structure.eachAtom((function(t){null!=t.formalCharge&&0!==t.formalCharge&&e.push([t.index,t.formalCharge])}));for(var t=[],n=0;n<e.length;n+=8){for(var r=Math.min(8,e.length-n),i=Dl("M  CHG%3i",r),o=n;o<n+r;o++)i+=Dl(" %3i %3i",e[o][0]+1,e[o][1]);t.push(i)}return t},t.prototype.formatAtom=function(e){var t=0;null!=e.formalCharge&&0!==e.formalCharge&&(t=4-e.formalCharge);var n=Dl("%10.4f%10.4f%10.4f %-3s 0%3i  0  0  0",e.x,e.y,e.z,e.element,t);if(48!==n.length)throw new Error("Incompatible atom for sdf format");return n},t.prototype.formatBond=function(e){return Dl("%3i%3i%3i  0  0  0",e.atomIndex1+1,e.atomIndex2+1,e.bondOrder)},t.prototype._writeRecords=function(){this._records.length=0,this._writeHeader(),this._writeCTab(),this._writeFooter()},t.prototype._writeHeader=function(){this._records.push(this.idString,this.titleString,"")},t.prototype._writeCTab=function(){var e=this;this._records.push(this.countsString),this.structure.eachAtom((function(t){e._records.push(e.formatAtom(t))})),this.structure.eachBond((function(t){e._records.push(e.formatBond(t))})),this.chargeLines.forEach((function(t){e._records.push(t)})),this._records.push("M  END")},t.prototype._writeFooter=function(){this._records.push("$$$$")},t.prototype.getData=function(){return this._writeRecords(),this._records.join("\n")},Object.defineProperties(t.prototype,n),t}(Nl),Bl=[],jl=function(e,t){void 0===t&&(t={}),this._mark=0,this._marks=[],this.offset=0,this.littleEndian=!0;var n=!1;void 0===e&&(e=8192),"number"===typeof e?e=new ArrayBuffer(e):n=!0;var r=t.offset?t.offset>>>0:0,i=e.byteLength-r,o=r;e instanceof ArrayBuffer||(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+r),e=e.buffer),this._lastWrittenByte=n?i:0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=o,this._data=new DataView(this.buffer,o,i)};jl.prototype.available=function(e){return void 0===e&&(e=1),this.offset+e<=this.length},jl.prototype.isLittleEndian=function(){return this.littleEndian},jl.prototype.setLittleEndian=function(){return this.littleEndian=!0,this},jl.prototype.isBigEndian=function(){return!this.littleEndian},jl.prototype.setBigEndian=function(){return this.littleEndian=!1,this},jl.prototype.skip=function(e){return void 0===e&&(e=1),this.offset+=e,this},jl.prototype.seek=function(e){return this.offset=e,this},jl.prototype.mark=function(){return this._mark=this.offset,this},jl.prototype.reset=function(){return this.offset=this._mark,this},jl.prototype.pushMark=function(){return this._marks.push(this.offset),this},jl.prototype.popMark=function(){var e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this},jl.prototype.rewind=function(){return this.offset=0,this},jl.prototype.ensureAvailable=function(e){if(void 0===e&&(e=1),!this.available(e)){var t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=this.byteLength=t,this._data=new DataView(this.buffer)}return this},jl.prototype.readBoolean=function(){return 0!==this.readUint8()},jl.prototype.readInt8=function(){return this._data.getInt8(this.offset++)},jl.prototype.readUint8=function(){return this._data.getUint8(this.offset++)},jl.prototype.readByte=function(){return this.readUint8()},jl.prototype.readBytes=function(e){void 0===e&&(e=1);for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readByte();return t},jl.prototype.readInt16=function(){var e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},jl.prototype.readUint16=function(){var e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e},jl.prototype.readInt32=function(){var e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},jl.prototype.readUint32=function(){var e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},jl.prototype.readFloat32=function(){var e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},jl.prototype.readFloat64=function(){var e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},jl.prototype.readChar=function(){return String.fromCharCode(this.readInt8())},jl.prototype.readChars=function(e){void 0===e&&(e=1),Bl.length=e;for(var t=0;t<e;t++)Bl[t]=this.readChar();return Bl.join("")},jl.prototype.writeBoolean=function(e){return void 0===e&&(e=!1),this.writeUint8(e?255:0),this},jl.prototype.writeInt8=function(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this},jl.prototype.writeUint8=function(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this},jl.prototype.writeByte=function(e){return this.writeUint8(e)},jl.prototype.writeBytes=function(e){this.ensureAvailable(e.length);for(var t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this},jl.prototype.writeInt16=function(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this},jl.prototype.writeUint16=function(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this},jl.prototype.writeInt32=function(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},jl.prototype.writeUint32=function(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},jl.prototype.writeFloat32=function(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},jl.prototype.writeFloat64=function(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this},jl.prototype.writeChar=function(e){return this.writeUint8(e.charCodeAt(0))},jl.prototype.writeChars=function(e){for(var t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this},jl.prototype.toArray=function(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)},jl.prototype._updateLastWrittenByte=function(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)};var Zl=function(e){function t(t){e.call(this),this.mimeType="application/vnd.ms-pki.stl",this.defaultName="surface",this.defaultExt="stl",this.surface=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getData=function(){var e=this,t=this.surface.index.length/3,n=new jl(2*t+3*t*4*4+80+4);n.skip(80),n.writeUint32(t);for(var r=new H,i=new H,o=new H,a=new H,s=0;s<t;s++){var l=[e.surface.index[3*s],e.surface.index[3*s+1],e.surface.index[3*s+2]];i.fromArray(e.surface.normal,3*l[0]),o.fromArray(e.surface.normal,3*l[1]),a.fromArray(e.surface.normal,3*l[2]),r.addVectors(i,o).add(a).normalize(),n.writeFloat32(r.x),n.writeFloat32(r.y),n.writeFloat32(r.z);for(var c=0;c<3;c++)r.fromArray(e.surface.position,3*l[c]),n.writeFloat32(r.x),n.writeFloat32(r.y),n.writeFloat32(r.z);n.writeUint16(0)}return new DataView(n.buffer)},t}(Nl),Hl=function(){this.count=0,this.signals={countChanged:new fs}};Hl.prototype.clear=function(){this.change(-this.count)},Hl.prototype.change=function(e){this.count+=e,this.signals.countChanged.dispatch(e,this.count),this.count<0&&rl.warn("Counter.count below zero",this.count)},Hl.prototype.increment=function(){this.change(1)},Hl.prototype.decrement=function(){this.change(-1)},Hl.prototype.listen=function(e){this.change(e.count),e.signals.countChanged.add(this.change,this)},Hl.prototype.unlisten=function(e){var t=e.signals.countChanged;t.has(this.change,this)&&t.remove(this.change,this)},Hl.prototype.onZeroOnce=function(e,t){var n=this;if(0===this.count)e.call(t);else{this.signals.countChanged.add((function r(){0===n.count&&(n.signals.countChanged.remove(r,n),e.call(t))}),this)}},Hl.prototype.dispose=function(){this.clear(),this.signals.countChanged.dispose()},vl.add("shader/BasicLine.vert","void main(){\n#include begin_vertex\n#include project_vertex\n}"),vl.add("shader/BasicLine.frag","uniform vec3 uColor;\n#include common\n#include fog_pars_fragment\nvoid main(){\ngl_FragColor = vec4( uColor, 1.0 );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n}"),vl.add("shader/Quad.vert","varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"),vl.add("shader/Quad.frag","varying vec2 vUv;\nuniform sampler2D tForeground;\nuniform float scale;\nvoid main() {\nvec4 foreground = texture2D( tForeground, vUv );\ngl_FragColor = foreground * scale;\n}");var Ul=function(){this.signals={updated:new fs},this.maxDuration=-1/0,this.minDuration=1/0,this.avgDuration=14,this.lastDuration=1/0,this.prevFpsTime=0,this.lastFps=1/0,this.lastFrames=1,this.frames=0,this.count=0,this.begin()};Ul.prototype.update=function(){this.startTime=this.end(),this.currentTime=this.startTime,this.signals.updated.dispatch()},Ul.prototype.begin=function(){this.startTime=window.performance.now(),this.lastFrames=this.frames},Ul.prototype.end=function(){var e=window.performance.now();return this.count+=1,this.frames+=1,this.lastDuration=e-this.startTime,this.minDuration=Math.min(this.minDuration,this.lastDuration),this.maxDuration=Math.max(this.maxDuration,this.lastDuration),this.avgDuration-=this.avgDuration/30,this.avgDuration+=this.lastDuration/30,e>this.prevFpsTime+1e3&&(this.lastFps=this.frames,this.prevFpsTime=e,this.frames=0),e},vl.add("shader/chunk/fog_fragment.glsl","#ifdef USE_FOG\nfloat depth = length( vViewPosition );\n#ifdef FOG_EXP2\nfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif"),vl.add("shader/chunk/interior_fragment.glsl","if( gl_FrontFacing == false ){\n#ifdef USE_INTERIOR_COLOR\noutgoingLight.xyz = interiorColor;\n#else\n#ifdef DIFFUSE_INTERIOR\noutgoingLight.xyz = vColor;\n#endif\n#endif\noutgoingLight.xyz *= 1.0 - interiorDarkening;\n}"),vl.add("shader/chunk/matrix_scale.glsl","float matrixScale( in mat4 m ){\nvec4 r = m[ 0 ];\nreturn sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );\n}"),vl.add("shader/chunk/nearclip_vertex.glsl","#ifdef NEAR_CLIP\nif( vViewPosition.z < clipNear - 5.0 )\ngl_Position.z = 2.0 * gl_Position.w;\n#endif"),vl.add("shader/chunk/nearclip_fragment.glsl","#ifdef NEAR_CLIP\nif( vViewPosition.z < clipNear )\ndiscard;\n#endif"),vl.add("shader/chunk/opaque_back_fragment.glsl","#ifdef OPAQUE_BACK\n#ifdef FLIP_SIDED\nif( gl_FrontFacing == true ){\ngl_FragColor.a = 1.0;\n}\n#else\nif( gl_FrontFacing == false ){\ngl_FragColor.a = 1.0;\n}\n#endif\n#endif"),vl.add("shader/chunk/radiusclip_vertex.glsl","#ifdef RADIUS_CLIP\nif( distance( vViewPosition, vClipCenter ) > clipRadius + 5.0 )\ngl_Position.z = 2.0 * gl_Position.w;\n#endif"),vl.add("shader/chunk/radiusclip_fragment.glsl","#ifdef RADIUS_CLIP\nif( distance( vViewPosition, vClipCenter ) > clipRadius )\ndiscard;\n#endif"),vl.add("shader/chunk/unpack_color.glsl","vec3 unpackColor(float f) {\nvec3 color;\ncolor.r = floor(f / 256.0 / 256.0);\ncolor.g = floor((f - color.r * 256.0 * 256.0) / 256.0);\ncolor.b = floor(f - color.r * 256.0 * 256.0 - color.g * 256.0);\nreturn color / 255.0;\n}");var Vl=/^(?!\/\/)\s*#include\s+(\S+)/gim,Gl={};function Wl(e,t){void 0===t&&(t={});var n=e+"|";for(var r in t)n+=r+":"+t[r];if(!Gl[n]){var i=function(e){if(void 0===e)return"";var t=[];for(var n in e){var r=e[n];r&&t.push("#define "+n+" "+r)}return t.join("\n")+"\n"}(t),o=vl.get("shader/"+e);if(!o)throw new Error("empty shader, '"+e+"'");o=o.replace(Vl,(function(e,t){var n="shader/chunk/"+t+".glsl",r=vl.get(n)||te[t];if(!r)throw new Error("empty chunk, '"+t+"'");return r})),Gl[n]=i+o}return Gl[n]}if("undefined"!==typeof WebGLRenderingContext){var $l=WebGLRenderingContext.prototype,ql=$l.getShaderParameter;$l.getShaderParameter=function(){return!sl||ql.apply(this,arguments)};var Yl=$l.getShaderInfoLog;$l.getShaderInfoLog=function(){return sl?Yl.apply(this,arguments):""};var Xl=$l.getProgramParameter;$l.getProgramParameter=function(e,t){return!sl&&t===$l.LINK_STATUS||Xl.apply(this,arguments)};var Kl=$l.getProgramInfoLog;$l.getProgramInfoLog=function(){return sl?Kl.apply(this,arguments):""}}var Jl=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];Jl.forEach((function(e){e.forEach((function(e){e[0]*=.0625,e[1]*=.0625}))}));var Ql=function(e,t,n,r){this.canvas=document.createElement("canvas"),this._viewer=n,this._factor=Sa(r.factor,2),this._antialias=Sa(r.antialias,!1),this._onProgress=r.onProgress,this._onFinish=r.onFinish,this._antialias&&(this._factor*=2),this._n=this._factor*this._factor,this._width=this._viewer.width,this._height=this._viewer.height,this._antialias?(this.canvas.width=this._width*this._factor/2,this.canvas.height=this._height*this._factor/2):(this.canvas.width=this._width*this._factor,this.canvas.height=this._height*this._factor),this._ctx=this.canvas.getContext("2d"),this._viewerSampleLevel=n.sampleLevel,this._viewer.setSampling(-1)};Ql.prototype._renderTile=function(e){var t=this._viewer,n=this._width,r=this._height,i=this._factor,o=e%i*n,a=Math.floor(e/i)*r;if(t.camera.setViewOffset(n*i,r*i,o,a,n,r),t.render(),this._antialias){var s=Math.round((o+n)/2)-Math.round(o/2),l=Math.round((a+r)/2)-Math.round(a/2);this._ctx.drawImage(t.renderer.domElement,Math.round(o/2),Math.round(a/2),s,l)}else this._ctx.drawImage(t.renderer.domElement,Math.floor(o),Math.floor(a),Math.ceil(n),Math.ceil(r));"function"===typeof this._onProgress&&this._onProgress(e+1,this._n,!1)},Ql.prototype._finalize=function(){this._viewer.setSampling(this._viewerSampleLevel),this._viewer.camera.view=null,"function"===typeof this._onFinish&&this._onFinish(this._n+1,this._n,!1)},Ql.prototype.render=function(){for(var e=this,t=0;t<=this._n;++t)t===e._n?e._finalize():e._renderTile(t)},Ql.prototype.renderAsync=function(){for(var e=this,t=0,n=this._n,r=function(){t===n?e._finalize():e._renderTile(t),t+=1},i=0;i<=n;++i)setTimeout(r,0)};var ec=2*Math.PI,tc=(Math.PI,180/Math.PI);function nc(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=0);var o=i?i.length:e.length/n,a=0,s=0;if(i)for(var l=0;l<o;++l){var c=(e[i[l]*n+r]+t)%t/t*ec-Math.PI;a+=Math.cos(c),s+=Math.sin(c)}else for(var u=r;u<o;u+=n){var d=(e[u]+t)%t/t*ec-Math.PI;a+=Math.cos(d),s+=Math.sin(d)}return a/=o,s/=o,(Math.atan2(s,a)+Math.PI)/ec*t}function rc(e,t,n,r){void 0===r&&(r=0);for(var i=e.length,o=n||new Float32Array(i),a=0;a<i;a+=3)o[r+a+0]=(e[a+0]+t[a+0])/2,o[r+a+1]=(e[a+1]+t[a+1])/2,o[r+a+2]=(e[a+2]+t[a+2])/2;return o}function ic(e,t){for(var n=e.length,r=new Float32Array(n),i=0;i<n;i+=3)r[i+0]=t[i+0]-e[i+0],r[i+1]=t[i+1]-e[i+1],r[i+2]=t[i+2]-e[i+2];return r}function oc(e,t,n){for(var r=n||new Float32Array(e),i=0;i<e;++i)r[i]=t;return r}function ac(e,t,n,r,i){for(var o=i||new Float32Array(3*e),a=0;a<e;++a){var s=3*a;o[s+0]=t,o[s+1]=n,o[s+2]=r}return o}function sc(e){for(var t=new Float32Array(e),n=0;n<e;++n)t[n]=n;return t}function lc(e,t,n,r){void 0===n&&(n=0);for(var i=r||new Float32Array(e*t),o=0;o<e;++o)for(var a=n+o*t,s=0;s<t;++s)i[a+s]=o;return i}function cc(e,t){for(var n=e.length,r=new Float32Array(n*t),i=0;i<n;++i)for(var o=i*t,a=e[i],s=0;s<t;++s)r[o+s]=a;return r}function uc(e,t,n,r,i){for(var o=0;o<i;++o)t[r+o]=e[n+o]}function dc(e,t,n,r){uc(e,e,t,n,r)}function fc(e){for(var t=-1/0,n=0,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function pc(e){for(var t=1/0,n=0,r=e.length;n<r;++n)e[n]<t&&(t=e[n]);return t}function hc(e,t,n){void 0===t&&(t=1),void 0===n&&(n=0);for(var r=e.length,i=0,o=n;o<r;o+=t)i+=e[o];return i}function mc(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=0),hc(e,t,n)/(e.length/t)}var gc={trim:!1,factor:1,antialias:!1,transparent:!1,onProgress:void 0};function vc(e,t){void 0===t&&(t={});var n=Ca(t,gc),r=n.trim,i=n.factor,o=n.antialias,a=n.transparent,s=e.renderer,l=e.camera,c=s.getClearAlpha(),u=s.getClearColor();function d(t){void 0===t&&(t=!1);var n=i;o&&(n*=2),t&&(n=1/n),e.scene.traverse((function(e){var t=e.material;t&&t.linewidth&&(t.linewidth*=n),t&&t.uniforms&&t.uniforms.size&&void 0===t.uniforms.size.__seen&&(t.uniforms.size.value*=n,t.uniforms.size.__seen=!0),t&&t.uniforms&&t.uniforms.linewidth&&void 0===t.uniforms.linewidth.__seen&&(t.uniforms.linewidth.value*=n,t.uniforms.linewidth.__seen=!0)})),e.scene.traverse((function(e){var t=e.material;t&&t.uniforms&&t.uniforms.size&&delete t.uniforms.size.__seen,t&&t.uniforms&&t.uniforms.linewidth&&delete t.uniforms.linewidth.__seen}))}function f(e){if(r){var t=u;return function(e,t,n,r,i){var o,a,s,l,c=e.height,u=e.width,d=e.getContext("2d").getImageData(0,0,u,c).data;for(s=!1,a=0;a<c;a++){for(o=0;o<u;o++)if(d[l=4*(a*u+o)]!==t||d[l+1]!==n||d[l+2]!==r||d[l+3]!==i){s=!0;break}if(s)break}var f=a;for(s=!1,o=0;o<u;o++){for(a=0;a<c;a++)if(d[l=4*(a*u+o)]!==t||d[l+1]!==n||d[l+2]!==r||d[l+3]!==i){s=!0;break}if(s)break}var p=o;for(s=!1,a=c-1;a>=0;a--){for(o=u-1;o>=0;o--)if(d[l=4*(a*u+o)]!==t||d[l+1]!==n||d[l+2]!==r||d[l+3]!==i){s=!0;break}if(s)break}var h=a;for(s=!1,o=u-1;o>=0;o--){for(a=c-1;a>=0;a--)if(d[l=4*(a*u+o)]!==t||d[l+1]!==n||d[l+2]!==r||d[l+3]!==i){s=!0;break}if(s)break}var m=o,g=document.createElement("canvas");return g.width=m-p,g.height=h-f,g.getContext("2d").drawImage(e,p,f,g.width,g.height,0,0,g.width,g.height),g}(e,a?0:255*t.r,a?0:255*t.g,a?0:255*t.b,a?0:255)}return e}function p(e,n,r){"function"===typeof t.onProgress&&t.onProgress(e,n,r)}return new Promise((function(t,n){var r=new Ql(s,l,e,{factor:i,antialias:o,onProgress:p,onFinish:function(i,o){f(r.canvas).toBlob((function(r){s.setClearAlpha(c),d(!0),e.requestRender(),p(o,o,!0),r?t(r):n("error creating image")}),"image/png")}});s.setClearAlpha(a?0:1),d(),r.renderAsync()}))}var yc=new H,bc=new j,xc=new j;var wc=new B,_c=new j,Sc=new j;function Cc(e,t){_c.getInverse(t.projectionMatrix),Sc.copy(t.projectionMatrix).transpose(),e.traverse((function(e){var t=e.material;if(t){var n=t.uniforms;n&&(n.projectionMatrixInverse&&n.projectionMatrixInverse.value.copy(_c),n.projectionMatrixTranspose&&n.projectionMatrixTranspose.value.copy(Sc))}}))}function kc(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log("error compiling shader "+r+": "+e.getShaderInfoLog(r)),e.deleteShader(r),null)}function Mc(e,t){var n=e.getExtension(t);return n||console.log("extension '"+t+"' not available"),n}var Tc=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);function Ac(e){var t=document.createElement("canvas");t.width=16,t.height=16,t.style.width="16px",t.style.height="16px";var n=t.getContext("webgl")||t.getContext("experimental-webgl");if(!n)return console.log("error creating webgl context for "+e),!1;Mc(n,"OES_texture_float"),Mc(n,"OES_texture_half_float"),Mc(n,"WEBGL_color_buffer_float");var r=kc(n,"\nattribute vec4 a_position;\n\nvoid main() {\n  gl_Position = a_position;\n}",n.VERTEX_SHADER),i=kc(n,"\nprecision mediump float;\nuniform vec4 u_color;\nuniform sampler2D u_texture;\n\nvoid main() {\n  gl_FragColor = texture2D(u_texture, vec2(0.5, 0.5)) * u_color;\n}",n.FRAGMENT_SHADER);if(!r||!i)return!1;var o=function(e,t,n,r){var i=e.createProgram();return t.forEach((function(t){return e.attachShader(i,t)})),n&&n.forEach((function(t,n){e.bindAttribLocation(i,r?r[n]:n,t)})),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(console.log("error linking program: "+e.getProgramInfoLog(i)),e.deleteProgram(i),null)}(n,[r,i]);n.useProgram(o);var a=n.getAttribLocation(o,"a_position"),s=n.getUniformLocation(o,"u_color");if(!s)return console.log("error getting 'u_color' uniform location"),!1;var l=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,l),n.bufferData(n.ARRAY_BUFFER,Tc,n.STATIC_DRAW),n.enableVertexAttribArray(a),n.vertexAttribPointer(a,2,n.FLOAT,!1,0,0);var c=n.createTexture(),u=new Uint8Array([255,255,255,255]);n.bindTexture(n.TEXTURE_2D,c),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,u);var d=n.createTexture();n.bindTexture(n.TEXTURE_2D,d),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,e,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);var f=n.createFramebuffer();if(n.bindFramebuffer(n.FRAMEBUFFER,f),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,d,0),n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE)return console.log("error creating framebuffer for "+e),!1;n.bindTexture(n.TEXTURE_2D,c),n.uniform4fv(s,[0,10,20,1]),n.drawArrays(n.TRIANGLES,0,6),n.bindTexture(n.TEXTURE_2D,d),n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(1,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.uniform4fv(s,[0,.1,.05,1]),n.drawArrays(n.TRIANGLES,0,6);var p=new Uint8Array(4);if(n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,p),0!==p[0]||p[1]<248||p[2]<248||p[3]<254)return console.log("not able to actually render to "+e+" texture"),!1;if(e===n.FLOAT){n.bindFramebuffer(n.FRAMEBUFFER,f);var h=new Float32Array(4);n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,h);var m=n.getError();if(m)return console.log("error reading pixels as float: '"+function(e,t){switch(t){case e.NO_ERROR:return"no error";case e.INVALID_ENUM:return"invalid enum";case e.INVALID_VALUE:return"invalid value";case e.INVALID_OPERATION:return"invalid operation";case e.INVALID_FRAMEBUFFER_OPERATION:return"invalid framebuffer operation";case e.OUT_OF_MEMORY:return"out of memory";case e.CONTEXT_LOST_WEBGL:return"context lost"}return"unknown error"}(n,m)+"'"),!1}return!0}var Ec=new Float32Array(100),Pc=new Uint8Array(100),Rc=[12,7,13,17,11,6,8,18,16,2,14,22,10,1,3,9,19,23,21,15,5,0,4,24,20],Oc=new j;function Ic(e,t,n,r,i){var o=i.uniforms,a=[];if(o.objectId&&(o.objectId.value=tl?this.id:this.id/255,a.push("objectId")),(o.modelViewMatrixInverse||o.modelViewMatrixInverseTranspose||o.modelViewProjectionMatrix||o.modelViewProjectionMatrixInverse)&&this.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,this.matrixWorld),o.modelViewMatrixInverse&&(o.modelViewMatrixInverse.value.getInverse(this.modelViewMatrix),a.push("modelViewMatrixInverse")),o.modelViewMatrixInverseTranspose&&(o.modelViewMatrixInverse?o.modelViewMatrixInverseTranspose.value.copy(o.modelViewMatrixInverse.value).transpose():o.modelViewMatrixInverseTranspose.value.getInverse(this.modelViewMatrix).transpose(),a.push("modelViewMatrixInverseTranspose")),o.modelViewProjectionMatrix&&(o.modelViewProjectionMatrix.value.multiplyMatrices(n.projectionMatrix,this.modelViewMatrix),a.push("modelViewProjectionMatrix")),o.modelViewProjectionMatrixInverse&&(o.modelViewProjectionMatrix?(Oc.copy(o.modelViewProjectionMatrix.value),o.modelViewProjectionMatrixInverse.value.getInverse(Oc)):(Oc.multiplyMatrices(n.projectionMatrix,this.modelViewMatrix),o.modelViewProjectionMatrixInverse.value.getInverse(Oc)),a.push("modelViewProjectionMatrixInverse")),a.length){var s=e.properties.get(i);if(s.program){var l=e.getContext(),c=s.program;l.useProgram(c.program);var u=c.getUniforms();a.forEach((function(e){u.setValue(l,e,o[e].value)}))}}}var Lc=function(e){if(this.boundingBox=new K,this.boundingBoxSize=new H,this.boundingBoxLength=0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this.distVector=new H,this.signals={ticked:new fs,rendered:new fs},"string"===typeof e){var t=document.getElementById(e);this.container=null===t?document.createElement("div"):t}else e instanceof HTMLElement?this.container=e:this.container=document.createElement("div");if(this.container===document.body)this.width=window.innerWidth||1,this.height=window.innerHeight||1;else{var n=this.container.getBoundingClientRect();this.width=n.width||1,this.height=n.height||1,this.container.style.overflow="hidden"}this.wrapper=document.createElement("div"),this.wrapper.style.position="relative",this.container.appendChild(this.wrapper),this._initParams(),this._initStats(),this._initCamera(),this._initScene(),!1!==this._initRenderer()?(this._initHelper(),this.setBackground(),this.setFog(),this.animate=this.animate.bind(this)):rl.error("Viewer: could not initialize renderer")};Lc.prototype._initParams=function(){this.parameters={fogColor:new ie(0),fogNear:50,fogFar:100,fogMode:"scene",fogScale:"relative",backgroundColor:new ie(0),cameraType:"perspective",cameraFov:40,cameraEyeSep:.3,cameraZ:-80,clipNear:0,clipFar:100,clipDist:10,clipMode:"scene",clipScale:"relative",lightColor:new ie(14540253),lightIntensity:1,ambientColor:new ie(14540253),ambientIntensity:.2,sampleLevel:0}},Lc.prototype._initCamera=function(){var e=new H(0,0,0),t=this.width,n=this.height;this.perspectiveCamera=new _n(this.parameters.cameraFov,t/n),this.perspectiveCamera.position.z=this.parameters.cameraZ,this.perspectiveCamera.lookAt(e),this.orthographicCamera=new he(t/-2,t/2,n/2,n/-2),this.orthographicCamera.position.z=this.parameters.cameraZ,this.orthographicCamera.lookAt(e),this.stereoCamera=new Do,this.stereoCamera.aspect=.5,this.stereoCamera.eyeSep=this.parameters.cameraEyeSep;var r=this.parameters.cameraType;if("orthographic"===r)this.camera=this.orthographicCamera;else{if("perspective"!==r&&"stereo"!==r)throw new Error("Unknown cameraType '"+r+"'");this.camera=this.perspectiveCamera}this.camera.updateProjectionMatrix()},Lc.prototype._initStats=function(){this.stats=new Ul},Lc.prototype._initScene=function(){this.scene||(this.scene=new En,this.scene.name="scene"),this.rotationGroup=new wn,this.rotationGroup.name="rotationGroup",this.scene.add(this.rotationGroup),this.translationGroup=new wn,this.translationGroup.name="translationGroup",this.rotationGroup.add(this.translationGroup),this.modelGroup=new wn,this.modelGroup.name="modelGroup",this.translationGroup.add(this.modelGroup),this.pickingGroup=new wn,this.pickingGroup.name="pickingGroup",this.translationGroup.add(this.pickingGroup),this.backgroundGroup=new wn,this.backgroundGroup.name="backgroundGroup",this.translationGroup.add(this.backgroundGroup),this.helperGroup=new wn,this.helperGroup.name="helperGroup",this.translationGroup.add(this.helperGroup),this.scene.fog=new An(this.parameters.fogColor.getHex()),this.spotLight=new Ji(this.parameters.lightColor.getHex(),this.parameters.lightIntensity),this.scene.add(this.spotLight),this.ambientLight=new no(this.parameters.ambientColor.getHex(),this.parameters.ambientIntensity),this.scene.add(this.ambientLight)},Lc.prototype._initRenderer=function(){var e=window.devicePixelRatio,t=this.width,n=this.height;try{this.renderer=new Mn({preserveDrawingBuffer:!0,alpha:!0,antialias:!0})}catch(bS){return this.wrapper.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;"><p style="padding:15px;text-align:center;">Your browser/graphics card does not seem to support <a target="_blank" href="https://en.wikipedia.org/wiki/WebGL">WebGL</a>.<br/><br/>Find out how to get it <a target="_blank" href="http://get.webgl.org/">here</a>.</p></div>',!1}this.renderer.setPixelRatio(e),this.renderer.setSize(t,n),this.renderer.autoClear=!1,this.renderer.sortObjects=!0;var r=this.renderer.getContext();!function(e){nl=e}(this.renderer.extensions.get("EXT_frag_depth")),this.renderer.extensions.get("OES_element_index_uint"),function(e){tl=e}(this.renderer.extensions.get("OES_texture_float")&&this.renderer.extensions.get("WEBGL_color_buffer_float")||this.renderer.extensions.get("OES_texture_float")&&Ac(r.FLOAT)),this.wrapper.appendChild(this.renderer.domElement);var i=t*e,o=n*e;this.renderer.extensions.get("OES_texture_float"),this.supportsHalfFloat=this.renderer.extensions.get("OES_texture_half_float")&&Ac(36193),this.renderer.extensions.get("WEBGL_color_buffer_float"),sl&&console.log(JSON.stringify({Browser:Ks,OES_texture_float:!!this.renderer.extensions.get("OES_texture_float"),OES_texture_half_float:!!this.renderer.extensions.get("OES_texture_half_float"),WEBGL_color_buffer_float:!!this.renderer.extensions.get("WEBGL_color_buffer_float"),"testTextureSupport Float":Ac(r.FLOAT),"testTextureSupport HalfFloat":Ac(36193),"this.supportsHalfFloat":this.supportsHalfFloat,SupportsReadPixelsFloat:tl},null,2)),this.pickingTarget=new q(i,o,{minFilter:g,magFilter:g,stencilBuffer:!1,format:A,type:tl?C:w}),this.pickingTarget.texture.generateMipmaps=!1,this.renderer.clearTarget(this.pickingTarget,!0,!0,!0),this.renderer.setRenderTarget(null),this.sampleTarget=new q(i,o,{minFilter:b,magFilter:b,format:A}),this.holdTarget=new q(i,o,{minFilter:g,magFilter:g,format:A,type:w}),this.compositeUniforms={tForeground:new Yo(this.sampleTarget.texture),scale:new Yo(1)},this.compositeMaterial=new je({uniforms:this.compositeUniforms,vertexShader:Wl("Quad.vert"),fragmentShader:Wl("Quad.frag"),premultipliedAlpha:!0,transparent:!0,blending:2,depthTest:!1,depthWrite:!1}),this.compositeCamera=new he(-1,1,1,-1,0,1),this.compositeScene=new En,this.compositeScene.name="compositeScene",this.compositeScene.add(new Ue(new De(2,2),this.compositeMaterial))},Lc.prototype._initHelper=function(){var e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),t=new Float32Array(24),n=new Oe;n.setIndex(new be(e,1)),n.addAttribute("position",new be(t,3));var r=new je({uniforms:{uColor:{value:new ie("skyblue")}},vertexShader:Wl("BasicLine.vert"),fragmentShader:Wl("BasicLine.frag")});this.boundingBoxMesh=new jn(n,r),this.helperGroup.add(this.boundingBoxMesh)},Lc.prototype.updateHelper=function(){var e=this.boundingBoxMesh.geometry.attributes.position,t=e.array,n=this.boundingBox,r=n.min,i=n.max;t[0]=i.x,t[1]=i.y,t[2]=i.z,t[3]=r.x,t[4]=i.y,t[5]=i.z,t[6]=r.x,t[7]=r.y,t[8]=i.z,t[9]=i.x,t[10]=r.y,t[11]=i.z,t[12]=i.x,t[13]=i.y,t[14]=r.z,t[15]=r.x,t[16]=i.y,t[17]=r.z,t[18]=r.x,t[19]=r.y,t[20]=r.z,t[21]=i.x,t[22]=r.y,t[23]=r.z,e.needsUpdate=!0,this.boundingBox.isEmpty()||this.boundingBoxMesh.geometry.computeBoundingSphere()},Lc.prototype.add=function(e,t){var n=this;t?t.forEach((function(t){return n.addBuffer(e,t)})):this.addBuffer(e),e.parameters.background?(this.backgroundGroup.add(e.group),this.backgroundGroup.add(e.wireframeGroup)):(this.modelGroup.add(e.group),this.modelGroup.add(e.wireframeGroup)),e.pickable&&this.pickingGroup.add(e.pickingGroup),sl&&this.updateHelper()},Lc.prototype.addBuffer=function(e,t){function n(r){r instanceof wn?r.children.forEach(n):(r.userData.buffer=e,r.userData.instance=t,r.onBeforeRender=Ic)}var r=e.getMesh();t&&r.applyMatrix(t.matrix),n(r),e.group.add(r);var i=e.getWireframeMesh();if(t&&(i.matrix.copy(r.matrix),i.position.copy(r.position),i.quaternion.copy(r.quaternion),i.scale.copy(r.scale)),n(i),e.wireframeGroup.add(i),e.pickable){var o=e.getPickingMesh();t&&(o.matrix.copy(r.matrix),o.position.copy(r.position),o.quaternion.copy(r.quaternion),o.scale.copy(r.scale)),n(o),e.pickingGroup.add(o)}t?this._updateBoundingBox(e.geometry,e.matrix,t.matrix):this._updateBoundingBox(e.geometry,e.matrix)},Lc.prototype.remove=function(e){this.translationGroup.children.forEach((function(t){t.remove(e.group),t.remove(e.wireframeGroup)})),e.pickable&&this.pickingGroup.remove(e.pickingGroup),this.updateBoundingBox(),sl&&this.updateHelper()},Lc.prototype._updateBoundingBox=function(e,t,n){var r=this.boundingBox;function i(e,t,n){e.boundingBox||e.computeBoundingBox();var i=e.boundingBox.clone();t&&i.applyMatrix4(t),n&&i.applyMatrix4(n),i.min.equals(i.max)&&i.expandByScalar(5),r.union(i)}function o(e){var t,n;void 0!==e.geometry&&(e.userData.buffer&&(t=e.userData.buffer.matrix),e.userData.instance&&(n=e.userData.instance.matrix),i(e.geometry,t,n))}e?i(e,t,n):(r.makeEmpty(),this.modelGroup.traverse(o),this.backgroundGroup.traverse(o)),r.getSize(this.boundingBoxSize),this.boundingBoxLength=this.boundingBoxSize.length()},Lc.prototype.updateBoundingBox=function(){this._updateBoundingBox(),sl&&this.updateHelper()},Lc.prototype.getPickingPixels=function(){var e=this.width,t=this.height,n=e*t*4,r=tl?new Float32Array(n):new Uint8Array(n);return this.render(!0),this.renderer.readRenderTargetPixels(this.pickingTarget,0,0,e,t,r),r},Lc.prototype.getImage=function(e){var t=this;return new Promise((function(n){if(e){var r=t,i=r.width,o=r.height,a=i*o*4,s=t.getPickingPixels();if(tl){for(var l=new Uint8Array(a),c=0;c<a;++c)l[c]=Math.round(255*s[c]);s=l}var u=document.createElement("canvas");u.width=i,u.height=o;var d=u.getContext("2d"),f=d.getImageData(0,0,i,o);f.data.set(s),d.putImageData(f,0,0),u.toBlob(n,"image/png")}else t.renderer.domElement.toBlob(n,"image/png")}))},Lc.prototype.makeImage=function(e){return void 0===e&&(e={}),vc(this,e)},Lc.prototype.setLight=function(e,t,n,r){var i=this.parameters;void 0!==e&&i.lightColor.set(e),void 0!==t&&(i.lightIntensity=t),void 0!==n&&i.ambientColor.set(n),void 0!==r&&(i.ambientIntensity=r),this.requestRender()},Lc.prototype.setFog=function(e,t,n,r,i){var o=this.parameters;void 0!==e&&o.fogColor.set(e),void 0!==t&&(o.fogNear=t),void 0!==n&&(o.fogFar=n),void 0!==r&&(o.fogMode=r),void 0!==i&&(o.fogScale=i),this.requestRender()},Lc.prototype.setBackground=function(e){var t=this.parameters;e&&t.backgroundColor.set(e),this.setFog(t.backgroundColor),this.renderer.setClearColor(t.backgroundColor,0),this.renderer.domElement.style.backgroundColor=t.backgroundColor.getStyle(),this.requestRender()},Lc.prototype.setSampling=function(e){void 0!==e&&(this.parameters.sampleLevel=e,this.sampleLevel=e),this.requestRender()},Lc.prototype.setCamera=function(e,t,n){var r=this.parameters;if(e&&(r.cameraType=e),t&&(r.cameraFov=t),n&&(r.cameraEyeSep=n),"orthographic"===r.cameraType)this.camera!==this.orthographicCamera&&(this.camera=this.orthographicCamera,this.camera.position.copy(this.perspectiveCamera.position),this.camera.up.copy(this.perspectiveCamera.up),this.updateZoom());else{if("perspective"!==r.cameraType&&"stereo"!==r.cameraType)throw new Error("Unknown cameraType '"+r.cameraType+"'");this.camera!==this.perspectiveCamera&&(this.camera=this.perspectiveCamera,this.camera.position.copy(this.orthographicCamera.position),this.camera.up.copy(this.orthographicCamera.up))}this.perspectiveCamera.fov=r.cameraFov,this.stereoCamera.eyeSep=r.cameraEyeSep,this.camera.updateProjectionMatrix(),this.requestRender()},Lc.prototype.setClip=function(e,t,n,r,i){var o=this.parameters;void 0!==e&&(o.clipNear=e),void 0!==t&&(o.clipFar=t),void 0!==n&&(o.clipDist=n),void 0!==r&&(o.clipMode=r),void 0!==i&&(o.clipScale=i),this.requestRender()},Lc.prototype.setSize=function(e,t){this.width=e||1,this.height=t||1,this.perspectiveCamera.aspect=this.width/this.height,this.orthographicCamera.left=-this.width/2,this.orthographicCamera.right=this.width/2,this.orthographicCamera.top=this.height/2,this.orthographicCamera.bottom=-this.height/2,this.camera.updateProjectionMatrix();var n=window.devicePixelRatio;this.renderer.setPixelRatio(n),this.renderer.setSize(e,t);var r=this.width*n,i=this.height*n;this.pickingTarget.setSize(r,i),this.sampleTarget.setSize(r,i),this.holdTarget.setSize(r,i),this.requestRender()},Lc.prototype.handleResize=function(){if(this.container===document.body)this.setSize(window.innerWidth,window.innerHeight);else{var e=this.container.getBoundingClientRect();this.setSize(e.width,e.height)}},Lc.prototype.updateInfo=function(e){var t=this.info,n=t.memory,r=t.render;if(e)n.programs=0,n.geometries=0,n.textures=0,r.calls=0,r.vertices=0,r.points=0;else{var i=this.renderer.info,o=i.memory,a=i.render;n.geometries=o.geometries,n.textures=o.textures,r.calls+=a.calls,r.faces+=a.triangles,r.points+=a.points}},Lc.prototype.animate=function(){if(this.signals.ticked.dispatch(this.stats),window.performance.now()-this.stats.startTime>500&&!this.isStill&&this.sampleLevel<3&&-1!==this.sampleLevel){var e=this.sampleLevel;this.sampleLevel=3,this.renderPending=!0,this.render(),this.isStill=!0,this.sampleLevel=e,sl&&rl.log("rendered still frame")}window.requestAnimationFrame(this.animate)},Lc.prototype.pick=function(e,t){if("stereo"===this.parameters.cameraType)return{pid:0,instance:void 0,picker:void 0};e*=window.devicePixelRatio,t*=window.devicePixelRatio,e=Math.max(e-2,0),t=Math.max(t-2,0);var n,r,i=0,o=tl?Ec:Pc;this.render(!0),this.renderer.readRenderTargetPixels(this.pickingTarget,e,t,5,5,o);for(var a=0;a<Rc.length;a++){var s=4*Rc[a],l=Math.round(o[s+3]),c=this.pickingGroup.getObjectById(l);c&&(n=c.userData.instance,r=c.userData.buffer.picking,i=tl?Math.round(255*o[s])<<16&16711680|Math.round(255*o[s+1])<<8&65280|255&Math.round(255*o[s+2]):o[s]<<16|o[s+1]<<8|o[s+2])}return{pid:i,instance:n,picker:r}},Lc.prototype.requestRender=function(){var e=this;this.renderPending||(window.performance.now()-this.stats.startTime>22&&(this.stats.begin(),this.isStill=!1),this.renderPending=!0,window.requestAnimationFrame((function(){e.render(),e.stats.update()})))},Lc.prototype.updateZoom=function(){var e=qa(this.perspectiveCamera.fov),t=2*Math.tan(e/2)*-this.camera.position.z;this.orthographicCamera.zoom=this.height/t},Lc.prototype.__updateClipping=function(){var e=this.parameters;if(this.cDist=this.distVector.copy(this.camera.position).length(),this.cDist||(this.camera.position.set(0,0,e.cameraZ),this.cDist=Math.abs(e.cameraZ)),"absolute"===e.clipScale&&"absolute"===e.fogScale||(this.bRadius=Math.max(10,.5*this.boundingBoxLength),this.bRadius+=this.boundingBox.getCenter(this.distVector).length(),(this.bRadius===1/0||this.bRadius===-1/0||isNaN(this.bRadius))&&(this.bRadius=50)),"camera"==e.clipMode)this.camera.near=e.clipNear,this.camera.far=e.clipFar;else if("absolute"==e.clipScale)this.camera.near=this.cDist-e.clipNear,this.camera.far=this.cDist+e.clipFar;else{var t=(50-e.clipNear)/50,n=-(50-e.clipFar)/50;this.camera.near=this.cDist-this.bRadius*t,this.camera.far=this.cDist+this.bRadius*n}var r=this.scene.fog;if(r.color.set(e.fogColor),"camera"==e.fogMode)r.near=e.fogNear,r.far=e.fogFar;else if("absolute"==e.fogScale)r.near=this.cDist+e.fogNear,r.far=this.cDist+e.fogFar;else{var i=(50-e.fogNear)/50,o=-(50-e.fogFar)/50;r.near=this.cDist-this.bRadius*i,r.far=this.cDist+this.bRadius*o}"PerspectiveCamera"===this.camera.type?(this.camera.near=Math.max(.1,e.clipDist,this.camera.near),this.camera.far=Math.max(1,this.camera.far),r.near=Math.max(.1,r.near),r.far=Math.max(1,r.far)):"OrthographicCamera"===this.camera.type&&e.clipDist>0&&(this.camera.near=Math.max(e.clipDist,this.camera.near))},Lc.prototype.__updateCamera=function(){var e=this.camera;e.updateMatrix(),e.updateMatrixWorld(!0),e.updateProjectionMatrix(),function(e,t,n,r,i){var o=n.getSize(),a=o.width,s=o.height,l=s,c=n.getPixelRatio(),u="OrthographicCamera"===t.type;wc.set(a,s),_c.getInverse(t.projectionMatrix),Sc.copy(t.projectionMatrix).transpose(),e.traverse((function(e){var t=e.material;if(t){var n=t.uniforms;if(n){if(t.clipNear){var o=(50-t.clipNear)/50,a=r-i*o;n.clipNear.value=a}n.canvasHeight&&(n.canvasHeight.value=l),n.resolution&&n.resolution.value.copy(wc),n.pixelRatio&&(n.pixelRatio.value=c),n.projectionMatrixInverse&&n.projectionMatrixInverse.value.copy(_c),n.projectionMatrixTranspose&&n.projectionMatrixTranspose.value.copy(Sc),n.ortho&&(n.ortho.value=u)}}}))}(this.scene,e,this.renderer,this.cDist,this.bRadius),function(e,t){e.traverseVisible((function(e){if(e instanceof Un&&e.userData.buffer.parameters.sortParticles){var n=e.geometry.attributes,r=n.position.count;if(0!==r){var i,o,a,s,l,c,u;bc.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),xc.multiplyMatrices(t.projectionMatrix,bc),e.userData.sortData?(i=e.userData.sortData,a=i.__zArray,o=i.__sortArray,s=i.__cmpFn):(a=new Float32Array(r),o=new Uint32Array(r),i={__zArray:a,__sortArray:o,__cmpFn:s=function(e,t){var n=a[e],r=a[t];return n>r?1:n<r?-1:0}},e.userData.sortData=i);for(var d=0;d<r;++d)yc.fromArray(n.position.array,3*d),yc.applyMatrix4(xc),a[d]=-yc.z,o[d]=d;for(var f in function(e,t,n,r){void 0===n&&(n=0),t=t||function(e,t){return e>t?1:e<t?-1:0};var i,o,a,s=[],l=-1,c=n,u=r=(r||e.length)-1;function d(t,n){var r=e[t];e[t]=e[n],e[n]=r}for(;;)if(u-c<=25){for(var f=c+1;f<=u;++f){for(i=e[f],o=f-1;o>=c&&t(e[o],i)>0;)e[o+1]=e[o],--o;e[o+1]=i}if(-1===l)break;u=s[l--],c=s[l--]}else{for(a=u,d(c+u>>1,o=c+1),t(e[c],e[u])>0&&d(c,u),t(e[o],e[u])>0&&d(o,u),t(e[c],e[o])>0&&d(c,o),i=e[o];;){do{o++}while(t(e[o],i)<0);do{a--}while(t(e[a],i)>0);if(a<o)break;d(o,a)}e[c+1]=e[a],e[a]=i,u-o+1>=a-c?(s[++l]=o,s[++l]=u,u=a-1):(s[++l]=c,s[++l]=a-1,c=o)}}(o,s),n){var p=n[f],h=p.array,m=p.itemSize;i[f]||(i[f]=new Float32Array(m*r)),u=i[f],i[f]=h;for(var g=0;g<r;++g){l=o[g];for(var v=0;v<m;++v)c=l*m+v,u[g*m+v]=h[c]}n[f].array=u,n[f].needsUpdate=!0}}}}))}(this.scene,e)},Lc.prototype.__setVisibility=function(e,t,n,r){this.modelGroup.visible=e,this.pickingGroup.visible=t,this.backgroundGroup.visible=n,this.helperGroup.visible=r},Lc.prototype.__updateLights=function(){this.spotLight.color.set(this.parameters.lightColor),this.spotLight.intensity=this.parameters.lightIntensity,this.distVector.copy(this.camera.position).setLength(100*this.boundingBoxLength),this.spotLight.position.copy(this.camera.position).add(this.distVector),this.ambientLight.color.set(this.parameters.ambientColor),this.ambientLight.intensity=this.parameters.ambientIntensity},Lc.prototype.__renderPickingGroup=function(e){this.renderer.clearTarget(this.pickingTarget,!0,!0,!0),this.__setVisibility(!1,!0,!1,!1),this.renderer.render(this.scene,e,this.pickingTarget),this.updateInfo(),this.renderer.setRenderTarget(null)},Lc.prototype.__renderModelGroup=function(e,t){t?this.renderer.clearTarget(t,!0,!0,!0):this.renderer.clear(),this.__setVisibility(!1,!1,!0,!1),this.renderer.render(this.scene,e,t),t?this.renderer.clearTarget(t,!1,!0,!1):this.renderer.clearDepth(),this.updateInfo(),this.__setVisibility(!0,!1,!1,sl),this.renderer.render(this.scene,e,t),this.updateInfo()},Lc.prototype.__renderSuperSample=function(e){var t=this,n=Jl[Math.max(0,Math.min(this.sampleLevel,5))],r=1/n.length;this.compositeUniforms.tForeground.value=this.sampleTarget.texture;var i=this.sampleTarget.width,o=this.sampleTarget.height;"stereo"===this.parameters.cameraType&&(i/=2);for(var a=0;a<n.length;++a){var s=n[a];e.setViewOffset(i,o,s[0],s[1],i,o),e.updateProjectionMatrix(),Cc(t.scene,e);var l=r;l+=.03125*((a+.5)/n.length-.5),t.compositeUniforms.scale.value=l,t.__renderModelGroup(e,t.sampleTarget),t.renderer.render(t.compositeScene,t.compositeCamera,t.holdTarget,0===a)}this.compositeUniforms.scale.value=1,this.compositeUniforms.tForeground.value=this.holdTarget.texture,e.clearViewOffset(),this.renderer.render(this.compositeScene,this.compositeCamera,null,!0)},Lc.prototype.__renderStereo=function(e){void 0===e&&(e=!1);var t=this.stereoCamera;t.update(this.perspectiveCamera);var n=this.renderer,r=n.getSize();n.setScissorTest(!0),n.setScissor(0,0,r.width/2,r.height),n.setViewport(0,0,r.width/2,r.height),Cc(this.scene,t.cameraL),this.__render(e,t.cameraL),n.setScissor(r.width/2,0,r.width/2,r.height),n.setViewport(r.width/2,0,r.width/2,r.height),Cc(this.scene,t.cameraR),this.__render(e,t.cameraR),n.setScissorTest(!1),n.setViewport(0,0,r.width,r.height)},Lc.prototype.__render=function(e,t){void 0===e&&(e=!1),e?this.lastRenderedPicking||this.__renderPickingGroup(t):this.sampleLevel>0&&"stereo"!==this.parameters.cameraType?this.__renderSuperSample(t):this.__renderModelGroup(t)},Lc.prototype.render=function(e){void 0===e&&(e=!1),this.rendering?rl.warn("'tried to call 'render' from within 'render'"):(this.rendering=!0,this.__updateClipping(),this.__updateCamera(),this.__updateLights(),this.updateInfo(!0),"stereo"===this.parameters.cameraType?this.__renderStereo(e):this.__render(e,this.camera),this.lastRenderedPicking=e,this.rendering=!1,this.renderPending=!1,this.signals.rendered.dispatch())},Lc.prototype.clear=function(){rl.log("scene cleared"),this.scene.remove(this.rotationGroup),this._initScene(),this.renderer.clear()},Lc.prototype.dispose=function(){this.renderer.dispose()};var Dc=1,Nc=2,Fc=3;function zc(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;return Math.sqrt(t*t+n*n)}var Bc=function(e,t){void 0===t&&(t={}),this.domElement=e,this.signals={moved:new fs,scrolled:new fs,dragged:new fs,dropped:new fs,clicked:new fs,hovered:new fs,doubleClicked:new fs},this.position=new B,this.prevPosition=new B,this.down=new B,this.canvasPosition=new B,this.prevClickCP=new B,this.moving=!1,this.hovering=!0,this.scrolled=!1,this.lastMoved=1/0,this.which=0,this.buttons=0,this.pressed=!1,this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.shiftKey=!1,this.domElement.style.touchAction="none",this.hoverTimeout=Sa(t.hoverTimeout,50),this.handleScroll=Sa(t.handleScroll,!0),this.doubleClickSpeed=Sa(t.doubleClickSpeed,500),this._listen=this._listen.bind(this),this._onMousewheel=this._onMousewheel.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMousedown=this._onMousedown.bind(this),this._onMouseup=this._onMouseup.bind(this),this._onContextmenu=this._onContextmenu.bind(this),this._onTouchstart=this._onTouchstart.bind(this),this._onTouchend=this._onTouchend.bind(this),this._onTouchmove=this._onTouchmove.bind(this),this._listen();var n={passive:!1};document.addEventListener("mousewheel",this._onMousewheel,n),document.addEventListener("wheel",this._onMousewheel,n),document.addEventListener("MozMousePixelScroll",this._onMousewheel,n),document.addEventListener("mousemove",this._onMousemove,n),document.addEventListener("mousedown",this._onMousedown,n),document.addEventListener("mouseup",this._onMouseup,n),document.addEventListener("contextmenu",this._onContextmenu,n),document.addEventListener("touchstart",this._onTouchstart,n),document.addEventListener("touchend",this._onTouchend,n),document.addEventListener("touchmove",this._onTouchmove,n)},jc={key:{configurable:!0}};jc.key.get=function(){var e=0;return this.altKey&&(e+=1),this.ctrlKey&&(e+=2),this.metaKey&&(e+=4),this.shiftKey&&(e+=8),e},Bc.prototype.setParameters=function(e){void 0===e&&(e={}),this.hoverTimeout=Sa(e.hoverTimeout,this.hoverTimeout)},Bc.prototype._listen=function(){var e=window.performance.now(),t=this.canvasPosition;this.doubleClickPending&&e-this.lastClicked>this.doubleClickSpeed&&(this.doubleClickPending=!1),e-this.lastMoved>this.hoverTimeout&&(this.moving=!1),(this.scrolled||!this.moving&&!this.hovering)&&(this.scrolled=!1,-1!==this.hoverTimeout&&this.overElement&&(this.hovering=!0,this.signals.hovered.dispatch(t.x,t.y))),window.requestAnimationFrame(this._listen)},Bc.prototype._onMousewheel=function(e){var t=this;if(e.target===this.domElement&&this.handleScroll){e.preventDefault(),this._setKeys(e);var n=0;n=e.wheelDelta?e.wheelDelta/40:e.detail?-e.detail/3:-e.deltaY/(e.deltaMode?.33:30),this.signals.scrolled.dispatch(n),setTimeout((function(){t.scrolled=!0}),this.hoverTimeout)}},Bc.prototype._onMousemove=function(e){e.target===this.domElement?(e.preventDefault(),this.overElement=!0):this.overElement=!1,this._setKeys(e),this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(e.clientX,e.clientY),this._setCanvasPosition(e);var t=this.prevPosition.x-this.position.x,n=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(t,n),this.pressed&&this.signals.dragged.dispatch(t,n)},Bc.prototype._onMousedown=function(e){e.target===this.domElement&&(e.preventDefault(),this._setKeys(e),this.moving=!1,this.hovering=!1,this.down.set(e.clientX,e.clientY),this.position.set(e.clientX,e.clientY),this.which=e.which,this.buttons=function(e){if("object"===typeof e){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var n=e.button;if(1===n)return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0}(e),this.pressed=!0,this._setCanvasPosition(e))},Bc.prototype._onMouseup=function(e){e.target===this.domElement&&e.preventDefault(),this._setKeys(e);var t=this.canvasPosition;this._distance()<4&&(this.lastClicked=window.performance.now(),this.doubleClickPending&&this.prevClickCP.distanceTo(t)<4&&(this.signals.doubleClicked.dispatch(t.x,t.y),this.doubleClickPending=!1),this.signals.clicked.dispatch(t.x,t.y),this.doubleClickPending=!0,this.prevClickCP.copy(t)),this.which=void 0,this.buttons=void 0,this.pressed=void 0},Bc.prototype._onContextmenu=function(e){e.target===this.domElement&&e.preventDefault()},Bc.prototype._onTouchstart=function(e){if(e.target===this.domElement)switch(e.preventDefault(),this.pressed=!0,e.touches.length){case 1:this.moving=!1,this.hovering=!1,this.down.set(e.touches[0].pageX,e.touches[0].pageY),this.position.set(e.touches[0].pageX,e.touches[0].pageY),this._setCanvasPosition(e.touches[0]);break;case 2:this.down.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),this.position.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),this.lastTouchDistance=zc(e)}},Bc.prototype._onTouchend=function(e){e.target===this.domElement&&e.preventDefault(),this.which=void 0,this.buttons=void 0,this.pressed=void 0},Bc.prototype._onTouchmove=function(e){switch(e.target===this.domElement?(e.preventDefault(),this.overElement=!0):this.overElement=!1,e.touches.length){case 1:this._setKeys(e),this.which=Dc,this.buttons=1,this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(e.touches[0].pageX,e.touches[0].pageY),this._setCanvasPosition(e.touches[0]);var t=this.prevPosition.x-this.position.x,n=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(t,n),this.pressed&&this.signals.dragged.dispatch(t,n);break;case 2:var r=zc(e),i=r-this.lastTouchDistance;if(this.lastTouchDistance=r,this.prevPosition.copy(this.position),this.position.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),Math.abs(i)>2&&this.handleScroll&&this.position.distanceTo(this.prevPosition)<2)this.which=0,this.buttons=0,this.signals.scrolled.dispatch(i/2);else{this.which=Fc,this.buttons=2;var o=this.prevPosition.x-this.position.x,a=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(o,a),this.pressed&&this.signals.dragged.dispatch(o,a)}}},Bc.prototype._distance=function(){return this.position.distanceTo(this.down)},Bc.prototype._setCanvasPosition=function(e){var t,n,r=this.domElement.getBoundingClientRect();"offsetX"in e&&"offsetY"in e?(t=e.offsetX,n=e.offsetY):(t=e.clientX-r.left,n=e.clientY-r.top),this.canvasPosition.set(t,r.height-n)},Bc.prototype._setKeys=function(e){this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey,this.shiftKey=e.shiftKey},Bc.prototype.dispose=function(){document.removeEventListener("mousewheel",this._onMousewheel),document.removeEventListener("wheel",this._onMousewheel),document.removeEventListener("MozMousePixelScroll",this._onMousewheel),document.removeEventListener("mousemove",this._onMousemove),document.removeEventListener("mousedown",this._onMousedown),document.removeEventListener("mouseup",this._onMouseup),document.removeEventListener("contextmenu",this._onContextmenu),document.removeEventListener("touchstart",this._onTouchstart),document.removeEventListener("touchend",this._onTouchend),document.removeEventListener("touchmove",this._onTouchmove)},Object.defineProperties(Bc.prototype,jc);var Zc=new j,Hc=new j,Uc=new j,Vc=new j,Gc=new H,Wc=new Z,$c=new j,qc=new H,Yc=new H,Xc=function(e,t){void 0===t&&(t={}),this.stage=e,this.rotateSpeed=Sa(t.rotateSpeed,2),this.zoomSpeed=Sa(t.zoomSpeed,1.2),this.panSpeed=Sa(t.panSpeed,1),this.viewer=e.viewer,this.mouse=e.mouseObserver,this.controls=e.viewerControls},Kc={component:{configurable:!0},atom:{configurable:!0}};Kc.component.get=function(){return this.stage.transformComponent},Kc.atom.get=function(){return this.stage.transformAtom},Xc.prototype._setPanVector=function(e,t,n){void 0===n&&(n=0);var r=this.controls.getCanvasScaleFactor(n);qc.set(e,t,0),qc.multiplyScalar(this.panSpeed*r)},Xc.prototype._getRotateXY=function(e,t){return[this.rotateSpeed*-e*.01,this.rotateSpeed*t*.01]},Xc.prototype._transformPanVector=function(){this.component&&($c.extractRotation(this.component.transform),$c.premultiply(this.viewer.rotationGroup.matrix),$c.getInverse($c),qc.applyMatrix4($c))},Xc.prototype.zoom=function(e){this.controls.zoom(this.zoomSpeed*e*.02)},Xc.prototype.pan=function(e,t){this._setPanVector(e,t),$c.getInverse(this.viewer.rotationGroup.matrix),qc.applyMatrix4($c),this.controls.translate(qc)},Xc.prototype.panComponent=function(e,t){this.component&&(this._setPanVector(e,t),this._transformPanVector(),this.component.position.add(qc),this.component.updateMatrix())},Xc.prototype.panAtom=function(e,t){this.atom&&this.component&&(this.atom.positionToVector3(Yc),Yc.add(this.viewer.translationGroup.position),Yc.applyMatrix4(this.viewer.rotationGroup.matrix),this._setPanVector(e,t,Yc.z),this._transformPanVector(),this.atom.positionAdd(qc),this.component.updateRepresentations({position:!0}))},Xc.prototype.rotate=function(e,t){var n=this._getRotateXY(e,t),r=n[0],i=n[1];Zc.makeRotationX(i),Hc.makeRotationY(r),Zc.multiply(Hc),this.controls.applyMatrix(Zc)},Xc.prototype.zRotate=function(e,t){var n=this.rotateSpeed*((-e+t)/-2)*.01;Uc.makeRotationZ(n),this.controls.applyMatrix(Uc)},Xc.prototype.rotateComponent=function(e,t){if(this.component){var n=this._getRotateXY(e,t),r=n[0],i=n[1];Vc.extractRotation(this.component.transform),Vc.premultiply(this.viewer.rotationGroup.matrix),Vc.getInverse(Vc),Gc.set(1,0,0),Gc.applyMatrix4(Vc),Zc.makeRotationAxis(Gc,i),Gc.set(0,1,0),Gc.applyMatrix4(Vc),Hc.makeRotationAxis(Gc,r),Zc.multiply(Hc),Wc.setFromRotationMatrix(Zc),this.component.quaternion.premultiply(Wc),this.component.updateMatrix()}},Object.defineProperties(Xc.prototype,Kc);var Jc=new H;var Qc=function(e,t){this.stage=t,this.pid=e.pid,this.picker=e.picker,this.instance=e.instance,this.stage=t,this.controls=t.viewerControls,this.mouse=t.mouseObserver},eu={type:{configurable:!0},altKey:{configurable:!0},ctrlKey:{configurable:!0},metaKey:{configurable:!0},shiftKey:{configurable:!0},canvasPosition:{configurable:!0},component:{configurable:!0},object:{configurable:!0},position:{configurable:!0},closestBondAtom:{configurable:!0},closeAtom:{configurable:!0},arrow:{configurable:!0},atom:{configurable:!0},axes:{configurable:!0},bond:{configurable:!0},box:{configurable:!0},cone:{configurable:!0},clash:{configurable:!0},contact:{configurable:!0},cylinder:{configurable:!0},distance:{configurable:!0},ellipsoid:{configurable:!0},octahedron:{configurable:!0},point:{configurable:!0},mesh:{configurable:!0},slice:{configurable:!0},sphere:{configurable:!0},tetrahedron:{configurable:!0},torus:{configurable:!0},surface:{configurable:!0},unitcell:{configurable:!0},unknown:{configurable:!0},volume:{configurable:!0},wideline:{configurable:!0}};eu.type.get=function(){return this.picker.type},eu.altKey.get=function(){return this.mouse.altKey},eu.ctrlKey.get=function(){return this.mouse.ctrlKey},eu.metaKey.get=function(){return this.mouse.metaKey},eu.shiftKey.get=function(){return this.mouse.shiftKey},eu.canvasPosition.get=function(){return this.mouse.canvasPosition},eu.component.get=function(){return this.stage.getComponentsByObject(this.picker.data).list[0]},eu.object.get=function(){return this.picker.getObject(this.pid)},eu.position.get=function(){return this.picker.getPosition(this.pid,this.instance,this.component)},eu.closestBondAtom.get=function(){if("bond"===this.type&&this.bond){var e,t,n,r=this.bond,i=this.controls,o=this.canvasPosition,a=i.getPositionOnCanvas(r.atom1),s=i.getPositionOnCanvas(r.atom2);return t=a,n=s,(e=o).distanceTo(t)<e.distanceTo(n)?r.atom1:r.atom2}},eu.closeAtom.get=function(){var e=this.canvasPosition,t=this.closestBondAtom;if(t){var n=this.controls.getPositionOnCanvas(t);t.positionToVector3(Jc),this.instance&&Jc.applyMatrix4(this.instance.matrix),Jc.applyMatrix4(this.component.matrix);var r=this.controls.viewer;Jc.add(r.translationGroup.position),Jc.applyMatrix4(r.rotationGroup.matrix);var i=this.controls.getCanvasScaleFactor(Jc.z),o=this.component.getMaxRepresentationRadius(t.index);return e.distanceTo(n)<=o/i?t:void 0}},eu.arrow.get=function(){return this._objectIfType("arrow")},eu.atom.get=function(){return this._objectIfType("atom")},eu.axes.get=function(){return this._objectIfType("axes")},eu.bond.get=function(){return this._objectIfType("bond")},eu.box.get=function(){return this._objectIfType("box")},eu.cone.get=function(){return this._objectIfType("cone")},eu.clash.get=function(){return this._objectIfType("clash")},eu.contact.get=function(){return this._objectIfType("contact")},eu.cylinder.get=function(){return this._objectIfType("cylinder")},eu.distance.get=function(){return this._objectIfType("distance")},eu.ellipsoid.get=function(){return this._objectIfType("ellipsoid")},eu.octahedron.get=function(){return this._objectIfType("octahedron")},eu.point.get=function(){return this._objectIfType("point")},eu.mesh.get=function(){return this._objectIfType("mesh")},eu.slice.get=function(){return this._objectIfType("slice")},eu.sphere.get=function(){return this._objectIfType("sphere")},eu.tetrahedron.get=function(){return this._objectIfType("tetrahedron")},eu.torus.get=function(){return this._objectIfType("torus")},eu.surface.get=function(){return this._objectIfType("surface")},eu.unitcell.get=function(){return this._objectIfType("unitcell")},eu.unknown.get=function(){return this._objectIfType("unknown")},eu.volume.get=function(){return this._objectIfType("volume")},eu.wideline.get=function(){return this._objectIfType("wideline")},Qc.prototype._objectIfType=function(e){return this.type===e?this.object:void 0},Qc.prototype.getLabel=function(){var e=this.atom||this.closeAtom,t="nothing";return this.arrow?t=this.arrow.name:e?t="atom: "+e.qualifiedName()+" ("+e.structure.name+")":this.axes?t="axes":this.bond?t="bond: "+this.bond.atom1.qualifiedName()+" - "+this.bond.atom2.qualifiedName()+" ("+this.bond.structure.name+")":this.box?t=this.box.name:this.cone?t=this.cone.name:this.clash?t="clash: "+this.clash.clash.sele1+" - "+this.clash.clash.sele2:this.contact?t=this.contact.type+": "+this.contact.atom1.qualifiedName()+" - "+this.contact.atom2.qualifiedName()+" ("+this.contact.atom1.structure.name+")":this.cylinder?t=this.cylinder.name:this.distance?t="distance: "+this.distance.atom1.qualifiedName()+" - "+this.distance.atom2.qualifiedName()+" ("+this.distance.structure.name+")":this.ellipsoid?t=this.ellipsoid.name:this.octahedron?t=this.octahedron.name:this.point?t=this.point.name:this.mesh?t="mesh: "+(this.mesh.name||this.mesh.serial)+" ("+this.mesh.shape.name+")":this.slice?t="slice: "+this.slice.value.toPrecision(3)+" ("+this.slice.volume.name+")":this.sphere?t=this.sphere.name:this.surface?t="surface: "+this.surface.surface.name:this.tetrahedron?t=this.tetrahedron.name:this.torus?t=this.torus.name:this.unitcell?t="unitcell: "+this.unitcell.unitcell.spacegroup+" ("+this.unitcell.structure.name+")":this.unknown?t="unknown":this.volume?t="volume: "+this.volume.value.toPrecision(3)+" ("+this.volume.volume.name+")":this.wideline&&(t=this.wideline.name),t},Object.defineProperties(Qc.prototype,eu);var tu=function(e){this.stage=e,this.viewer=e.viewer};tu.prototype.pick=function(e,t){var n=this.viewer.pick(e,t);if(n.picker&&"ignore"!==n.picker.type&&void 0!==n.pid){var r=n.picker.array;if(!(r&&n.pid>=r.length))return new Qc(n,this.stage);console.error("pid >= picker.array.length")}};var nu=new Z,ru=new H,iu=new H,ou=new H,au=new H,su=new j,lu=new H,cu=new j,uu=function(e){this.stage=e,this.signals={changed:new fs},this.viewer=e.viewer},du={position:{configurable:!0},rotation:{configurable:!0}};du.position.get=function(){return this.viewer.translationGroup.position},du.rotation.get=function(){return this.viewer.rotationGroup.quaternion},uu.prototype.changed=function(){this.viewer.requestRender(),this.signals.changed.dispatch()},uu.prototype.getPositionOnCanvas=function(e,t){var n=ja(t,B),r=this.viewer;return ou.copy(e).add(r.translationGroup.position).applyMatrix4(r.rotationGroup.matrix).project(r.camera),n.set((ou.x+1)*r.width/2,(ou.y+1)*r.height/2)},uu.prototype.getCanvasScaleFactor=function(e){void 0===e&&(e=0);var t=this.viewer.camera;if(t instanceof he)return 1/t.zoom;e=-e,e+=t.position.z;var n=qa(t.fov);return-2*e*Math.tan(n/2)/this.viewer.height},uu.prototype.getOrientation=function(e){var t=Ha(e);t.copy(this.viewer.rotationGroup.matrix);var n=-this.viewer.camera.position.z;return t.scale(au.set(n,n,n)),t.setPosition(this.viewer.translationGroup.position),t},uu.prototype.orient=function(e){Ha(e).decompose(ru,nu,iu);var t=this.viewer;t.rotationGroup.setRotationFromQuaternion(nu),t.translationGroup.position.copy(ru),t.camera.position.z=-iu.z,t.updateZoom(),this.changed()},uu.prototype.translate=function(e){this.viewer.translationGroup.position.add(Za(e)),this.changed()},uu.prototype.center=function(e){this.viewer.translationGroup.position.copy(Za(e)).negate(),this.changed()},uu.prototype.zoom=function(e){this.distance(this.viewer.camera.position.z*(1-e))},uu.prototype.distance=function(e){this.viewer.camera.position.z=Math.min(-1,e),this.viewer.updateZoom(),this.changed()},uu.prototype.spin=function(e,t){su.getInverse(this.viewer.rotationGroup.matrix),lu.copy(Za(e)).applyMatrix4(su),this.viewer.rotationGroup.rotateOnAxis(lu,t),this.changed()},uu.prototype.rotate=function(e){this.viewer.rotationGroup.setRotationFromQuaternion(Ua(e)),this.changed()},uu.prototype.align=function(e){cu.getInverse(Ha(e)),this.viewer.rotationGroup.setRotationFromMatrix(cu),this.changed()},uu.prototype.applyMatrix=function(e){this.viewer.rotationGroup.applyMatrix(Ha(e)),this.changed()},Object.defineProperties(uu.prototype,du);var fu=function(e,t){for(var n,r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];this.pausedTime=-1,this.elapsedDuration=0,this.pausedDuration=0,this.ignoreGlobalToggle=!1,this._paused=!1,this._resolveList=[],this.duration=Sa(e,1e3),this.controls=t,this.startTime=window.performance.now(),(n=this)._init.apply(n,r)},pu={done:{configurable:!0},paused:{configurable:!0}};pu.done.get=function(){return 1===this.alpha},pu.paused.get=function(){return this._paused},fu.prototype.tick=function(e){if(!this._paused)return this.elapsedDuration=e.currentTime-this.startTime-this.pausedDuration,0===this.duration?this.alpha=1:this.alpha=ns(0,1,this.elapsedDuration/this.duration),this._tick(e),this.done&&this._resolveList.forEach((function(e){return e()})),this.done},fu.prototype.pause=function(e){e&&(this._hold=!0),-1===this.pausedTime&&(this.pausedTime=window.performance.now()),this._paused=!0},fu.prototype.resume=function(e){!e&&this._hold||(this.pausedDuration+=window.performance.now()-this.pausedTime,this._paused=!1,this._hold=!1,this.pausedTime=-1)},fu.prototype.toggle=function(){this._paused?this.resume():this.pause()},fu.prototype.then=function(e){var t,n=this;return t=this.done?Promise.resolve():new Promise((function(e){return n._resolveList.push(e)})),t.then(e)},Object.defineProperties(fu.prototype,pu);var hu=function(e){function t(t,n){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];e.apply(this,[Sa(t,1/0),n].concat(r))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t){Array.isArray(e)?this.axis=(new H).fromArray(e):this.axis=Sa(e,new H(0,1,0)),this.angle=Sa(t,.01)},t.prototype._tick=function(e){this.axis&&this.angle&&this.controls.spin(this.axis,this.angle*e.lastDuration/16)},t}(fu),mu=function(e){function t(t,n){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];e.apply(this,[Sa(t,1/0),n].concat(r)),this.angleSum=0,this.direction=1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t,n){Array.isArray(e)?this.axis=(new H).fromArray(e):this.axis=Sa(e,new H(0,1,0)),this.angleStep=Sa(t,.01),this.angleEnd=Sa(n,.2)},t.prototype._tick=function(e){if(this.axis&&this.angleStep&&this.angleEnd){var t=ns(0,1,Math.abs(this.angleSum)/this.angleEnd),n=this.angleStep*this.direction*(1.1-t);this.controls.spin(this.axis,n*e.lastDuration/16),this.angleSum+=this.angleStep,this.angleSum>=this.angleEnd&&(this.direction*=-1,this.angleSum=-this.angleEnd)}},t}(fu),gu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t){this.moveFrom=Za(Sa(e,new H)),this.moveTo=Za(Sa(t,new H))},t.prototype._tick=function(){this.controls.position.lerpVectors(this.moveFrom,this.moveTo,this.alpha).negate(),this.controls.changed()},t}(fu),vu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t){this.zoomFrom=e,this.zoomTo=t},t.prototype._tick=function(){this.controls.distance(es(this.zoomFrom,this.zoomTo,this.alpha))},t}(fu),yu=function(e){function t(){e.apply(this,arguments),this._currentRotation=new Z}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t){this.rotateFrom=Ua(e),this.rotateTo=Ua(t),this._currentRotation=new Z},t.prototype._tick=function(){this._currentRotation.copy(this.rotateFrom).slerp(this.rotateTo,this.alpha),this.controls.rotate(this._currentRotation)},t}(fu),bu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e,t,n){this.valueFrom=e,this.valueTo=t,this.callback=n},t.prototype._tick=function(){this.callback(es(this.valueFrom,this.valueTo,this.alpha))},t}(fu),xu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(e){this.callback=e},t.prototype._tick=function(){1===this.alpha&&this.callback()},t}(fu),wu=function(e){void 0===e&&(e=[]),this._resolveList=[],this._list=e},_u={done:{configurable:!0}};_u.done.get=function(){return this._list.every((function(e){return e.done}))},wu.prototype.then=function(e){var t,n=this;return t=this.done?Promise.resolve():new Promise((function(e){n._resolveList.push(e),n._list.forEach((function(e){e.then((function(){n._resolveList.forEach((function(e){e()})),n._resolveList.length=0}))}))})),t.then(e)},Object.defineProperties(wu.prototype,_u);var Su=function(e){this.stage=e,this.animationList=[],this.finishedList=[],this.viewer=e.viewer,this.controls=e.viewerControls},Cu={paused:{configurable:!0}};Cu.paused.get=function(){return this.animationList.every((function(e){return e.paused}))},Su.prototype.add=function(e){return 0===e.duration?e.tick(this.viewer.stats):this.animationList.push(e),e},Su.prototype.remove=function(e){var t=this.animationList,n=t.indexOf(e);n>-1&&t.splice(n,1)},Su.prototype.run=function(e){for(var t=this.finishedList,n=this.animationList,r=n.length,i=0;i<r;++i){var o=n[i];o.tick(e)&&t.push(o)}var a=t.length;if(a){for(var s=0;s<a;++s)this.remove(t[s]);t.length=0}},Su.prototype.spin=function(e,t,n){return this.add(new hu(n,this.controls,e,t))},Su.prototype.rock=function(e,t,n,r){return this.add(new mu(r,this.controls,e,t,n))},Su.prototype.rotate=function(e,t){var n=this.viewer.rotationGroup.quaternion.clone();return this.add(new yu(t,this.controls,n,e))},Su.prototype.move=function(e,t){var n=this.controls.position.clone().negate();return this.add(new gu(t,this.controls,n,e))},Su.prototype.zoom=function(e,t){var n=this.viewer.camera.position.z;return this.add(new vu(t,this.controls,n,e))},Su.prototype.zoomMove=function(e,t,n){return new wu([this.move(e,n),this.zoom(t,n)])},Su.prototype.orient=function(e,t){var n=new H,r=new Z,i=new H;return Ha(e).decompose(n,r,i),new wu([this.move(n.negate(),t),this.rotate(r,t),this.zoom(-i.x,t)])},Su.prototype.value=function(e,t,n,r){return this.add(new bu(r,this.controls,e,t,n))},Su.prototype.timeout=function(e,t){return this.add(new xu(t,this.controls,e))},Su.prototype.spinComponent=function(e,t,n,r){return this.add(new hu(r,e.controls,t,n))},Su.prototype.rockComponent=function(e,t,n,r,i){return this.add(new mu(i,e.controls,t,n,r))},Su.prototype.moveComponent=function(e,t,n){var r=e.controls.position.clone().negate();return this.add(new gu(n,e.controls,r,t))},Su.prototype.pause=function(){this.animationList.forEach((function(e){return e.pause()}))},Su.prototype.resume=function(){this.animationList.forEach((function(e){return e.resume()}))},Su.prototype.toggle=function(){this.paused?this.resume():this.pause()},Su.prototype.clear=function(){this.animationList.length=0},Su.prototype.dispose=function(){this.clear()},Object.defineProperties(Su.prototype,Cu);var ku=function(e,t){if(this.fn=e,this.queue=[],this.pending=!1,this.next=this.next.bind(this),t){for(var n=0,r=t.length;n<r;++n)this.queue.push(t[n]);this.next()}};ku.prototype.run=function(e){this.fn(e,this.next)},ku.prototype.next=function(){var e=this,t=this.queue.shift();void 0!==t?(this.pending=!0,setTimeout((function(){return e.run(t)}))):this.pending=!1},ku.prototype.push=function(e){this.queue.push(e),this.pending||this.next()},ku.prototype.kill=function(){this.queue.length=0},ku.prototype.length=function(){return this.queue.length};var Mu=function(e,t,n){this.type="",this.parameters={lazy:{type:"boolean"},clipNear:{type:"range",step:1,max:100,min:0,buffer:!0},clipRadius:{type:"number",precision:1,max:1e3,min:0,buffer:!0},clipCenter:{type:"vector3",precision:1,buffer:!0},flatShaded:{type:"boolean",buffer:!0},opacity:{type:"range",step:.01,max:1,min:0,buffer:!0},depthWrite:{type:"boolean",buffer:!0},side:{type:"select",buffer:!0,options:{front:"front",back:"back",double:"double"}},wireframe:{type:"boolean",buffer:!0},colorScheme:{type:"select",update:"color",options:{}},colorScale:{type:"select",update:"color",options:pl.getScales()},colorReverse:{type:"boolean",update:"color"},colorValue:{type:"color",update:"color"},colorDomain:{type:"hidden",update:"color"},colorMode:{type:"select",update:"color",options:pl.getModes()},roughness:{type:"range",step:.01,max:1,min:0,buffer:!0},metalness:{type:"range",step:.01,max:1,min:0,buffer:!0},diffuse:{type:"color",buffer:!0},diffuseInterior:{type:"boolean",buffer:!0},useInteriorColor:{type:"boolean",buffer:!0},interiorColor:{type:"color",buffer:!0},interiorDarkening:{type:"range",step:.01,max:1,min:0,buffer:!0},matrix:{type:"hidden",buffer:!0},disablePicking:{type:"boolean",rebuild:!0}},this.viewer=t,this.tasks=new Hl,this.queue=new ku(this.make.bind(this)),this.bufferList=[],this.parameters.colorScheme&&(this.parameters.colorScheme.options=pl.getSchemes()),this.toBePrepared=!1};Mu.prototype.init=function(e){var t=e||{};this.clipNear=Sa(t.clipNear,0),this.clipRadius=Sa(t.clipRadius,0),this.clipCenter=Sa(t.clipCenter,new H),this.flatShaded=Sa(t.flatShaded,!1),this.side=Sa(t.side,"double"),this.opacity=Sa(t.opacity,1),this.depthWrite=Sa(t.depthWrite,!0),this.wireframe=Sa(t.wireframe,!1),this.setColor(t.color,t),this.colorScheme=Sa(t.colorScheme,"uniform"),this.colorScale=Sa(t.colorScale,""),this.colorReverse=Sa(t.colorReverse,!1),this.colorValue=Sa(t.colorValue,9474192),this.colorDomain=Sa(t.colorDomain,void 0),this.colorMode=Sa(t.colorMode,"hcl"),this.visible=Sa(t.visible,!0),this.quality=Sa(t.quality,void 0),this.roughness=Sa(t.roughness,.4),this.metalness=Sa(t.metalness,0),this.diffuse=Sa(t.diffuse,16777215),this.diffuseInterior=Sa(t.diffuseInterior,!1),this.useInteriorColor=Sa(t.useInteriorColor,!1),this.interiorColor=Sa(t.interiorColor,2236962),this.interiorDarkening=Sa(t.interiorDarkening,0),this.lazy=Sa(t.lazy,!1),this.lazyProps={build:!1,bufferParams:{},what:{}},this.matrix=Sa(t.matrix,new j),this.disablePicking=Sa(t.disablePicking,!1);var n=this.parameters;!0===n.sphereDetail&&(n.sphereDetail={type:"integer",max:3,min:0,rebuild:"impostor"}),!0===n.radialSegments&&(n.radialSegments={type:"integer",max:25,min:5,rebuild:"impostor"}),!0===n.openEnded&&(n.openEnded={type:"boolean",rebuild:"impostor",buffer:!0}),!0===n.disableImpostor&&(n.disableImpostor={type:"boolean",rebuild:!0}),"low"===t.quality?(n.sphereDetail&&(this.sphereDetail=0),n.radialSegments&&(this.radialSegments=5)):"medium"===t.quality?(n.sphereDetail&&(this.sphereDetail=1),n.radialSegments&&(this.radialSegments=10)):"high"===t.quality?(n.sphereDetail&&(this.sphereDetail=2),n.radialSegments&&(this.radialSegments=20)):(n.sphereDetail&&(this.sphereDetail=Sa(t.sphereDetail,1)),n.radialSegments&&(this.radialSegments=Sa(t.radialSegments,10))),n.openEnded&&(this.openEnded=Sa(t.openEnded,!0)),n.disableImpostor&&(this.disableImpostor=Sa(t.disableImpostor,!1))},Mu.prototype.getColorParams=function(e){return Object.assign({scheme:this.colorScheme,scale:this.colorScale,reverse:this.colorReverse,value:this.colorValue,domain:this.colorDomain,mode:this.colorMode},e)},Mu.prototype.getBufferParams=function(e){return void 0===e&&(e={}),Object.assign({clipNear:this.clipNear,clipRadius:this.clipRadius,clipCenter:this.clipCenter,flatShaded:this.flatShaded,opacity:this.opacity,depthWrite:this.depthWrite,side:this.side,wireframe:this.wireframe,roughness:this.roughness,metalness:this.metalness,diffuse:this.diffuse,diffuseInterior:this.diffuseInterior,useInteriorColor:this.useInteriorColor,interiorColor:this.interiorColor,interiorDarkening:this.interiorDarkening,matrix:this.matrix,disablePicking:this.disablePicking},e)},Mu.prototype.setColor=function(e,t){var n=Object.keys(pl.getSchemes());if("string"===typeof e&&n.includes(e.toLowerCase()))t?t.colorScheme=e:this.setParameters({colorScheme:e});else if(void 0!==e){var r=new ie(e).getHex();t?(t.colorScheme="uniform",t.colorValue=r):this.setParameters({colorScheme:"uniform",colorValue:r})}return this},Mu.prototype.prepare=function(e){},Mu.prototype.create=function(){},Mu.prototype.update=function(e){this.build()},Mu.prototype.build=function(e){if(!this.lazy||this.visible&&this.opacity){if(!this.toBePrepared)return this.tasks.increment(),void this.make();this.queue.length()>0?(this.tasks.change(1-this.queue.length()),this.queue.kill()):this.tasks.increment(),this.queue.push(e||!1)}else this.lazyProps.build=!0},Mu.prototype.make=function(e,t){var n=this;sl&&rl.time("Representation.make "+this.type);var r=function(){e?(n.update(e),n.viewer.requestRender(),n.tasks.decrement(),t&&t()):(n.clear(),n.create(),n.manualAttach||n.disposed||(sl&&rl.time("Representation.attach "+n.type),n.attach((function(){sl&&rl.timeEnd("Representation.attach "+n.type),n.tasks.decrement(),t&&t()})))),sl&&rl.timeEnd("Representation.make "+n.type)};this.toBePrepared?this.prepare(r):r()},Mu.prototype.attach=function(e){this.setVisibility(this.visible),e()},Mu.prototype.setVisibility=function(e,t){if(this.visible=e,this.visible&&this.opacity){var n=this.lazyProps,r=n.bufferParams,i=n.what;if(n.build)return n.build=!1,this.build(),this;(Object.keys(r).length||Object.keys(i).length)&&(n.bufferParams={},n.what={},this.updateParameters(r,i))}return this.bufferList.forEach((function(t){t.setVisibility(e)})),t||this.viewer.requestRender(),this},Mu.prototype.setParameters=function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1);var i=e||{},o=this.parameters,a={};for(var s in this.opacity||void 0===i.opacity||(this.lazyProps.build?(this.lazyProps.build=!1,n=!0):(Object.assign(a,this.lazyProps.bufferParams),Object.assign(t,this.lazyProps.what),this.lazyProps.bufferParams={},this.lazyProps.what={})),this.setColor(i.color,i),i)if(void 0!==i[s]&&void 0!==o[s]&&(o[s].int&&(i[s]=parseInt(i[s])),o[s].float&&(i[s]=parseFloat(i[s])),i[s]!==r[s]||i[s].equals&&!i[s].equals(r[s]))){if(r[s]&&r[s].copy&&i[s].copy?r[s].copy(i[s]):r[s]&&r[s].set?r[s].set(i[s]):r[s]=i[s],o[s].buffer)if(!0===o[s].buffer)a[s]=i[s];else a[o[s].buffer]=i[s];o[s].update&&(t[o[s].update]=!0),!o[s].rebuild||"impostor"===o[s].rebuild&&nl&&!r.disableImpostor||(n=!0)}return n?this.build():this.updateParameters(a,t),this},Mu.prototype.updateParameters=function(e,t){if(void 0===e&&(e={}),this.lazy&&(!this.visible||!this.opacity)&&!1===e.hasOwnProperty("opacity"))return Object.assign(this.lazyProps.bufferParams,e),void Object.assign(this.lazyProps.what,t);this.bufferList.forEach((function(t){t.setParameters(e)})),Object.keys(t).length&&this.update(t),this.viewer.requestRender()},Mu.prototype.getParameters=function(){var e=this,t={lazy:this.lazy,visible:this.visible,quality:this.quality};return Object.keys(this.parameters).forEach((function(n){null!==e.parameters[n]&&(t[n]=e[n])})),t},Mu.prototype.clear=function(){var e=this;this.bufferList.forEach((function(t){e.viewer.remove(t),t.dispose()})),this.bufferList.length=0,this.viewer.requestRender()},Mu.prototype.dispose=function(){this.disposed=!0,this.queue.kill(),this.tasks.dispose(),this.clear()};var Tu=function(e){var t=this;this.pending=0,this.postCount=0,this.onmessageDict={},this.onerrorDict={},this.name=e,this.blobUrl=window.URL.createObjectURL(fl.get(e)),this.worker=new Worker(this.blobUrl),fl.activeWorkerCount+=1,this.worker.onmessage=function(n){t.pending-=1;var r=n.data.__postId;sl&&rl.timeEnd("Worker.postMessage "+e+" #"+r);var i=t.onmessageDict[r];i&&i.call(t.worker,n),delete t.onmessageDict[r],delete t.onerrorDict[r]},this.worker.onerror=function(n){if(t.pending-=1,n.data){var r=n.data.__postId,i=t.onerrorDict[r];i?i.call(t.worker,n):rl.error("Worker.onerror",r,e,n),delete t.onmessageDict[r],delete t.onerrorDict[r]}else rl.error("Worker.onerror",e,n)}};Tu.prototype.post=function(e,t,n,r){void 0===e&&(e={}),this.onmessageDict[this.postCount]=n,this.onerrorDict[this.postCount]=r,e.__name=this.name,e.__postId=this.postCount,e.__debug=sl,sl&&rl.time("Worker.postMessage "+this.name+" #"+this.postCount);try{this.worker.postMessage(e,t)}catch(i){rl.error("worker.post:",i),this.worker.postMessage(e)}return this.pending+=1,this.postCount+=1,this},Tu.prototype.terminate=function(){this.worker?(this.worker.terminate(),window.URL.revokeObjectURL(this.blobUrl),fl.activeWorkerCount-=1):rl.log("no worker to terminate")};var Au=function(e,t){void 0===t&&(t=2),this.pool=[],this.count=0,this.maxCount=Math.min(8,t),this.name=e};function Eu(e){for(var t=e.length,n=t/3,r=0,i=0,o=0,a=0;a<t;a+=3)r+=e[a+0],i+=e[a+1],o+=e[a+2];return new H(r/n,i/n,o/n)}function Pu(e,t,n){return n?e.sub(n).projectOnVector(t).add(n):e.projectOnVector(t),e}function Ru(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],d=e[s+2];c<t&&(t=c),u<n&&(n=u),d<r&&(r=d),c>i&&(i=c),u>o&&(o=u),d>a&&(a=d)}return[Du([t,n,r]),Du([i,o,a])]}function Ou(e,t){for(var n=0,r=t.length;n<r;n+=3){var i=t[n],o=t[n+1],a=t[n+2];t[n]=e[0]*i+e[4]*o+e[8]*a+e[12],t[n+1]=e[1]*i+e[5]*o+e[9]*a+e[13],t[n+2]=e[2]*i+e[6]*o+e[10]*a+e[14]}}function Iu(e,t){for(var n=0,r=t.length;n<r;n+=3){var i=t[n],o=t[n+1],a=t[n+2];t[n]=e[0]*i+e[3]*o+e[6]*a,t[n+1]=e[1]*i+e[4]*o+e[7]*a,t[n+2]=e[2]*i+e[5]*o+e[8]*a}}function Lu(e){for(var t=0,n=e.length;t<n;t+=3){var r=e[t],i=e[t+1],o=e[t+2],a=1/Math.sqrt(r*r+i*i+o*o);e[t]=r*a,e[t+1]=i*a,e[t+2]=o*a}}function Du(e){return new Float32Array(e||3)}function Nu(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a}function Fu(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function zu(e,t,n){e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2]}function Bu(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}function ju(e,t,n){void 0===n&&(n=0),e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2]}function Zu(e,t,n){void 0===n&&(n=0),t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2]}function Hu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function Uu(e,t,n){Vu(e,t,1/n)}function Vu(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}function Gu(e,t){Vu(e,t,1/Hu(t))}function Wu(e,t,n){e[0]=t[0]-n,e[1]=t[1]-n,e[2]=t[2]-n}function $u(e,t,n){e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n}function qu(e,t){e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2])}function Yu(e,t){e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2])}function Xu(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2]}function Ku(e,t){void 0===t&&(t=9);for(var n=Math.floor(t/2),r=e.position1.length/3,i=3*(n*r),o=1/t,a=ic(e.position1,e.position2),s=new Float32Array(i),l=new Float32Array(i),c=new H,u=0;u<r;++u){var d=3*u;c.set(a[d],a[d+1],a[d+2]);for(var f=e.position1[d],p=e.position1[d+1],h=e.position1[d+2],m=0;m<n;++m){var g=n*d+3*m,v=o*(2*m+1),y=o*(2*m+2);s[g]=f+c.x*v,s[g+1]=p+c.y*v,s[g+2]=h+c.z*v,l[g]=f+c.x*y,l[g+1]=p+c.y*y,l[g+2]=h+c.z*y}}var b=rc(s,l),x=function(e,t){for(var n=e.length/3,r=new Float32Array(n*t*3),i=0;i<n;++i)for(var o=3*i,a=i*t*3,s=e[o+0],l=e[o+1],c=e[o+2],u=0;u<t;++u){var d=a+3*u;r[d+0]=s,r[d+1]=l,r[d+2]=c}return r}(e.color,n),w={position:b,position1:s,position2:l,color:x,color2:x};return e.radius&&(w.radius=cc(e.radius,n)),e.picking&&e.picking.array&&(e.picking.array=cc(e.picking.array,n),w.picking=e.picking),e.primitiveId&&(w.primitiveId=cc(e.primitiveId,n)),w}function Ju(e,t){void 0===t&&(t=.1);for(var n=ic(e.position1,e.position2),r=[],i=[],o=[],a=e.radius?[]:void 0,s=e.picking?[]:void 0,l=e.primitiveId?[]:void 0,c=new H,u=e.position1.length/3,d=0,f=0;f<u;++f){var p=3*f;c.set(n[p],n[p+1],n[p+2]);for(var h=c.length()/t,m=Math.floor(h/2),g=1/h,v=e.position1[p],y=e.position1[p+1],b=e.position1[p+2],x=0;x<m;++x){var w=3*d+3*x,_=g*(2*x+1),S=g*(2*x+2);r[w]=v+c.x*_,r[w+1]=y+c.y*_,r[w+2]=b+c.z*_,i[w]=v+c.x*S,i[w+1]=y+c.y*S,i[w+2]=b+c.z*S,e.color&&(o[w]=e.color[p],o[w+1]=e.color[p+1],o[w+2]=e.color[p+2]),a&&(a[d+x]=e.radius[f]),s&&(e.picking.array?s[d+x]=e.picking.array[f]:s[d+x]=f),l&&(l[d+x]=e.primitiveId[f])}d+=m}var C=new Float32Array(r),k=new Float32Array(i),M=rc(C,k),T=new Float32Array(o),A={position:M,position1:C,position2:k,color:T,color2:T};return a&&(A.radius=new Float32Array(a)),s&&e.picking&&(e.picking.array=new Float32Array(s),A.picking=e.picking),l&&(A.primitiveId=new Float32Array(l)),A}function Qu(e,t){void 0===t&&(t=.1);for(var n=ic(e.position1,e.position2),r=[],i=[],o=[],a=e.radius?[]:void 0,s=e.picking?[]:void 0,l=e.primitiveId?[]:void 0,c=new H,u=e.position1.length/3,d=t,f=!0,p=0,h=0,m=0,g=0;g<u;++g){var v=3*g,y=e.position1[v],b=e.position1[v+1],x=e.position1[v+2];c.set(n[v],n[v+1],n[v+2]);var w=c.length();f&&(r[h]=y,r[h+1]=b,r[h+2]=x);for(var _=d,S=1/w;_<w;){var C=f?i:r;C[h]=y+c.x*_*S,C[h+1]=b+c.y*_*S,C[h+2]=x+c.z*_*S,f&&(h=3*++p),f=!f,d=t,_+=t}f&&(i[h]=e.position2[v],i[h+1]=e.position2[v+1],i[h+2]=e.position2[v+2],h=3*++p),d=_-w;for(var k=m;k<p;k++){if(e.color){var M=3*k;o[M]=e.color[v],o[M+1]=e.color[v+1],o[M+2]=e.color[v+2]}a&&(a[k]=e.radius[g]),s&&(e.picking.array?s[k]=e.picking.array[g]:s[k]=g),l&&(l[k]=e.primitiveId[g])}m=p}if(!f&&u>0){var T=3*p;i[T]=e.position2[3*u-3],i[T+1]=e.position2[3*u-2],i[T+1]=e.position2[3*u-1]}var A=new Float32Array(r),E=new Float32Array(i),P=rc(A,E),R=new Float32Array(o),O={position:P,position1:A,position2:E,color:R,color2:R};return a&&(O.radius=new Float32Array(a)),s&&e.picking&&(e.picking.array=new Float32Array(s),O.picking=e.picking),l&&(O.primitiveId=new Float32Array(l)),O}Au.prototype.post=function(e,t,n,r){void 0===e&&(e={});var i=this.getNextWorker();return i?i.post(e,t,n,r):console.error("unable to get worker from pool"),this},Au.prototype.terminate=function(){this.pool.forEach((function(e){e.terminate()}))},Au.prototype.getNextWorker=function(){for(var e,t=this,n=1/0,r=0;r<this.maxCount;++r){if(r>=t.count){e=new Tu(t.name),t.pool.push(e),t.count+=1;break}var i=t.pool[r];if(0===i.pending){e=i;break}i.pending<n&&(n=i.pending,e=i)}return e},Au.prototype.constructor=Au,Ru.__deps=[Du],Uu.__deps=[Vu],Gu.__deps=[Vu,Hu];var ed=new H,td=function(){},nd={Picker:{configurable:!0},Buffer:{configurable:!0}};nd.Picker.get=function(){return wl.get(this.type)},nd.Buffer.get=function(){return xl.get(this.type)},td.getShapeKey=function(e){return this.type+e[0].toUpperCase()+e.substr(1)},td.expandBoundingBox=function(e,t){},td.valueToShape=function(e,t,n){var r,i,o=e._primitiveData[this.getShapeKey(t)];switch(this.fields[t]){case"v3":case"c":i=o,void 0!==(r=n).toArray?r=r.toArray():void 0!==r.x?r=[r.x,r.y,r.z]:void 0!==r.r&&(r=[r.r,r.g,r.b]),i.push.apply(i,r);break;default:o.push(n)}},td.objectToShape=function(e,t){var n=this;Object.keys(this.fields).forEach((function(r){n.valueToShape(e,r,t[r])})),this.valueToShape(e,"name",t.name),this.expandBoundingBox(e.boundingBox,t)},td.valueFromShape=function(e,t,n){var r=e._primitiveData[this.getShapeKey(n)];switch(this.fields[n]){case"v3":return(new H).fromArray(r,3*t);case"c":return(new ie).fromArray(r,3*t);default:return r[t]}},td.objectFromShape=function(e,t){var n=this,r=this.valueFromShape(e,t,"name");void 0===r&&(r=this.type+": "+t+" ("+e.name+")");var i={shape:e,name:r};return Object.keys(this.fields).forEach((function(r){i[r]=n.valueFromShape(e,t,r)})),i},td.arrayFromShape=function(e,t){var n=e._primitiveData[this.getShapeKey(t)];return"s"===this.fields[t]?n:new Float32Array(n)},td.dataFromShape=function(e){var t=this,n={};return this.Picker&&(n.picking=new this.Picker(e)),Object.keys(this.fields).forEach((function(r){n[r]=t.arrayFromShape(e,r)})),n},td.bufferFromShape=function(e,t){return new this.Buffer(this.dataFromShape(e),t)},Object.defineProperties(td,nd),td.type="",td.fields={};var rd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){return this.valueFromShape(e,t,"position")},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position))},t}(td);rd.type="sphere",rd.fields={position:"v3",color:"c",radius:"f"};var id=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){return this.valueFromShape(e,t,"position")},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position))},t}(td);id.type="box",id.fields={position:"v3",color:"c",size:"f",heightAxis:"v3",depthAxis:"v3"};var od=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(id);od.type="octahedron";var ad=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(id);ad.type="tetrahedron";var sd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){var n=this.valueFromShape(e,t,"position1"),r=this.valueFromShape(e,t,"position2");return n.add(r).multiplyScalar(.5)},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position1)),e.expandByPoint(ed.fromArray(t.position2))},t.bufferFromShape=function(e,t){void 0===t&&(t={});var n=this.dataFromShape(e);return"cylinder"===this.type&&t.dashedCylinder&&(n=Ju(n)),new this.Buffer(n,t)},t}(td);sd.type="cylinder",sd.fields={position1:"v3",position2:"v3",color:"c",radius:"f"};var ld=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(sd);ld.type="arrow";var cd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(sd);cd.type="cone";var ud=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(rd);ud.type="ellipsoid",ud.fields={position:"v3",color:"c",radius:"f",majorAxis:"v3",minorAxis:"v3"};var dd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(ud);dd.type="torus";var fd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){return this.valueFromShape(e,t,"position")},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position))},t}(td);fd.type="text",fd.fields={position:"v3",color:"c",size:"f",text:"s"};var pd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){return this.valueFromShape(e,t,"position")},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position))},t}(td);pd.type="point",pd.fields={position:"v3",color:"c"};var hd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(e,t){var n=this.valueFromShape(e,t,"position1"),r=this.valueFromShape(e,t,"position2");return n.add(r).multiplyScalar(.5)},t.expandBoundingBox=function(e,t){e.expandByPoint(ed.fromArray(t.position1)),e.expandByPoint(ed.fromArray(t.position2))},t}(td);hd.type="wideline",hd.fields={position1:"v3",position2:"v3",color:"c"};var md=function(e,t){var n=this;this.exp=3;var r=t||function(e){for(var t=e.x,n=e.y,r=e.z,i=new K,o=t.length,a=i.min,s=i.max,l=0;l<o;l++)a.x=Math.min(t[l],a.x),a.y=Math.min(n[l],a.y),a.z=Math.min(r[l],a.z),s.x=Math.max(t[l],s.x),s.y=Math.max(n[l],s.y),s.z=Math.max(r[l],s.z);return i}(e);this.minX=r.min.x,this.minY=r.min.y,this.minZ=r.min.z,this.boundX=1+(r.max.x-this.minX>>this.exp),this.boundY=1+(r.max.y-this.minY>>this.exp),this.boundZ=1+(r.max.z-this.minZ>>this.exp);for(var i=this.boundX*this.boundY*this.boundZ,o=void 0!==e.count?e.count:e.x.length,a=e.x,s=e.y,l=e.z,c=0,u=new Uint32Array(i),d=new Int32Array(o),f=0;f<o;++f){var p=a[f]-n.minX>>n.exp,h=s[f]-n.minY>>n.exp,m=l[f]-n.minZ>>n.exp,g=(p*n.boundY+h)*n.boundZ+m;1===(u[g]+=1)&&(c+=1),d[f]=g}for(var v=new Uint16Array(c),y=0,b=0;y<i;++y){var x=u[y];x>0&&(u[y]=b+1,v[b]=x,b+=1)}for(var w=new Uint32Array(c),_=1;_<c;++_)w[_]+=w[_-1]+v[_-1];for(var S=new Uint16Array(c),C=new Int32Array(o),k=0;k<o;++k){var M=u[d[k]];if(M>0){var T=M-1;C[w[T]+S[T]]=k,S[T]+=1}}this.grid=u,this.bucketCount=v,this.bucketOffset=w,this.bucketArray=C,this.xArray=a,this.yArray=s,this.zArray=l};md.prototype.within=function(e,t,n,r){var i=[];return this.eachWithin(e,t,n,r,(function(e){return i.push(e)})),i},md.prototype.eachWithin=function(e,t,n,r,i){for(var o=this,a=r*r,s=Math.max(0,e-r-this.minX>>this.exp),l=Math.max(0,t-r-this.minY>>this.exp),c=Math.max(0,n-r-this.minZ>>this.exp),u=Math.min(this.boundX,1+(e+r-this.minX>>this.exp)),d=Math.min(this.boundY,1+(t+r-this.minY>>this.exp)),f=Math.min(this.boundZ,1+(n+r-this.minZ>>this.exp)),p=s;p<u;++p)for(var h=l;h<d;++h)for(var m=c;m<f;++m){var g=(p*o.boundY+h)*o.boundZ+m,v=o.grid[g];if(v>0)for(var y=v-1,b=o.bucketOffset[y],x=b+o.bucketCount[y],w=b;w<x;++w){var _=o.bucketArray[w],S=o.xArray[_]-e,C=o.yArray[_]-t,k=o.zArray[_]-n,M=S*S+C*C+k*k;M<=a&&i(_,M)}}};var gd=function(e){void 0===e&&(e=0),this._fields=this._defaultFields,this._init(0)};gd.prototype._init=function(e){this.length=e,this.count=0;for(var t=0,n=this._fields.length;t<n;++t){var r=this._fields[t],i=r[0],o=r[1],a=r[2];this._initField(i,o,a)}},gd.prototype._initField=function(e,t,n){this[e]=Fa(n,this.length*t)},gd.prototype.addField=function(e,t,n){this._fields.push([e,t,n]),this._initField(e,t,n)},gd.prototype.resize=function(e){var t=this;this.length=Math.round(e||0),this.count=Math.min(this.count,this.length);for(var n=0,r=this._fields.length;n<r;++n){var i=t._fields[n][0],o=t._fields[n][1],a=t.length*o,s=new t[i].constructor(a);t[i].length>a?s.set(t[i].subarray(0,a)):s.set(t[i]),t[i]=s}},gd.prototype.growIfFull=function(){if(this.count>=this.length){var e=Math.round(1.5*this.length);this.resize(Math.max(256,e))}},gd.prototype.copyFrom=function(e,t,n,r){for(var i=this,o=0,a=this._fields.length;o<a;++o)for(var s=i._fields[o][0],l=i._fields[o][1],c=i[s],u=e[s],d=0;d<r;++d)for(var f=l*(t+d),p=l*(n+d),h=0;h<l;++h)c[f+h]=u[p+h]},gd.prototype.copyWithin=function(e,t,n){for(var r=this,i=0,o=this._fields.length;i<o;++i)for(var a=r._fields[i][0],s=r._fields[i][1],l=r[a],c=0;c<n;++c)for(var u=s*(e+c),d=s*(t+c),f=0;f<s;++f)l[u+f]=l[d+f]},gd.prototype.sort=function(e){rl.time("Store.sort");var t=this,n=new this.constructor(1);!function r(i,o){if(i<o){var a=Math.floor((i+o)/2),s=i,l=o;do{for(;e(s,a)<0;)s+=1;for(;e(l,a)>0;)l-=1;s<=l&&(s===a?a=l:l===a&&(a=s),(c=s)!==(u=l)&&(n.copyFrom(t,0,c,1),t.copyWithin(c,u,1),t.copyFrom(n,u,0,1)),s+=1,l-=1)}while(s<=l);r(i,l),r(s,o)}var c,u}(0,this.count-1),rl.timeEnd("Store.sort")},gd.prototype.clear=function(){this.count=0},gd.prototype.dispose=function(){delete this.length,delete this.count;for(var e=0,t=this._fields.length;e<t;++e){delete this[this._fields[e][0]]}};var vd=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["index1",1,"int32"],["index2",1,"int32"],["type",1,"int8"]]},t.prototype.addContact=function(e,t,n){this.growIfFull();var r=this.count;e<t?(this.index1[r]=e,this.index2[r]=t):(this.index2[r]=e,this.index1[r]=t),n&&(this.type[r]=n),this.count+=1},Object.defineProperties(t.prototype,n),t}(gd);function yd(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}var bd=function(e,t){this.length=e,this._words=new Uint32Array(e+32>>>5),!0===t&&this.setAll()};function xd(e){for(var t=e.edgeCount,n=e.nodeCount,r=e.nodeArray1,i=e.nodeArray2,o=new Uint8Array(n),a=new Int32Array(n),s=0;s<t;++s)o[r[s]]+=1,o[i[s]]+=1;for(var l=1;l<n;++l)a[l]+=a[l-1]+o[l-1];for(var c=2*t,u=new Int32Array(c),d=0;d<c;++d)u[d]=-1;for(var f=0;f<t;++f){for(var p=r[f],h=i[f],m=a[p];-1!==u[m]&&m<c;)m+=1;u[m]=f;for(var g=a[h];-1!==u[g]&&g<c;)g+=1;u[g]=f}return{countArray:o,offsetArray:a,indexArray:u}}function wd(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),{type:e,group:t,x:0,y:0,z:0,atomSet:[]}}function _d(e,t){e.x+=t.x,e.y+=t.y,e.z+=t.z,e.atomSet.push(t.index)}function Sd(e,t){var n=t.atomSet.length;if(n>0){var r=e.types,i=e.groups,o=e.centers,a=e.atomSets;r.push(t.type),i.push(t.group),o.x.push(t.x/n),o.y.push(t.y/n),o.z.push(t.z/n),a.push(t.atomSet)}}bd.prototype.get=function(e){return 0!==(this._words[e>>>5]&1<<e)},bd.prototype.set=function(e){this._words[e>>>5]|=1<<e},bd.prototype.clear=function(e){this._words[e>>>5]&=~(1<<e)},bd.prototype.flip=function(e){this._words[e>>>5]^=1<<e},bd.prototype._assignRange=function(e,t,n){if(!(t<e)){for(var r=this._words,i=!0===n?4294967295:0,o=e>>>5,a=t>>>5,s=o;s<a;++s)r[s]=i;var l=o<<5,c=a<<5;if(!0===n)if(t-e<32)for(var u=e,d=t+1;u<d;++u)r[u>>>5]|=1<<u;else{for(var f=e,p=l;f<p;++f)r[f>>>5]|=1<<f;for(var h=c,m=t+1;h<m;++h)r[h>>>5]|=1<<h}else if(t-e<32)for(var g=e,v=t+1;g<v;++g)r[g>>>5]&=~(1<<g);else{for(var y=e,b=l;y<b;++y)r[y>>>5]&=~(1<<y);for(var x=c,w=t+1;x<w;++x)r[x>>>5]&=~(1<<x)}return this}},bd.prototype.setRange=function(e,t){return this._assignRange(e,t,!0)},bd.prototype.clearRange=function(e,t){return this._assignRange(e,t,!1)},bd.prototype.setBits=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];n[o>>>5]|=1<<o}return this},bd.prototype.clearBits=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];n[o>>>5]&=~(1<<o)}return this},bd.prototype.setAll=function(){return this._assignRange(0,this.length-1,!0)},bd.prototype.clearAll=function(){return this._assignRange(0,this.length-1,!1)},bd.prototype.flipAll=function(){for(var e=this._words.length,t=this._words,n=32-this.length%32,r=0;r<e-1;++r)t[r]=~t[r];return t[e-1]=~(t[e-1]<<n)>>>n,this},bd.prototype._isRangeValue=function(e,t,n){if(!(t<e)){for(var r=this._words,i=!0===n?4294967295:0,o=e>>>5,a=t>>>5,s=o;s<a;++s)if(r[s]!==i)return!1;if(t-e<32){for(var l=e,c=t+1;l<c;++l)if(!!(r[l>>>5]&1<<l)!==n)return!1}else{for(var u=a<<5,d=e,f=o<<5<<5;d<f;++d)if(!!(r[d>>>5]&1<<d)!==n)return!1;for(var p=u,h=t+1;p<h;++p)if(!!(r[p>>>5]&1<<p)!==n)return!1}return!0}},bd.prototype.isRangeSet=function(e,t){return this._isRangeValue(e,t,!0)},bd.prototype.isRangeClear=function(e,t){return this._isRangeValue(e,t,!1)},bd.prototype.isAllSet=function(){return this._isRangeValue(0,this.length-1,!0)},bd.prototype.isAllClear=function(){return this._isRangeValue(0,this.length-1,!1)},bd.prototype.isSet=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];if(0===(n[o>>>5]&1<<o))return!1}return!0},bd.prototype.isClear=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];if(0!==(n[o>>>5]&1<<o))return!1}return!0},bd.prototype.isEqualTo=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)if(t[i]!==n[i])return!1;return!0},bd.prototype.getSize=function(){for(var e=this._words.length,t=this._words,n=0,r=0;r<e;++r)n+=yd(t[r]);return n},bd.prototype.difference=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]=t[i]&~n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},bd.prototype.union=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]|=n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},bd.prototype.intersection=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]&=n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},bd.prototype.intersects=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)if(0!==(t[i]&n[i]))return!0;return!1},bd.prototype.getIntersectionSize=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0,o=0;o<r;++o)i+=yd(t[o]&n[o]);return i},bd.prototype.makeIntersection=function(e){var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=new Uint32Array(r),o=Object.create(bd.prototype);o._words=i,o.length=Math.min(this.length,e.length);for(var a=0;a<r;++a)i[a]=t[a]&n[a];return o},bd.prototype.forEach=function(e){for(var t=this._words.length,n=this._words,r=0,i=0;i<t;++i)for(var o=n[i];0!==o;){var a=o&-o;e((i<<5)+yd(a-1),r),o^=a,++r}},bd.prototype.toArray=function(){for(var e=this._words,t=new Array(this.getSize()),n=this._words.length,r=0,i=0;i<n;++i)for(var o=e[i];0!==o;){var a=o&-o;t[r++]=(i<<5)+yd(a-1),o^=a}return t},bd.prototype.toString=function(){return"{"+this.toArray().join(",")+"}"},bd.prototype.toSeleString=function(){var e=this.toArray().join(",");return e?"@"+e:"NONE"},bd.prototype.clone=function(){var e=Object.create(bd.prototype);return e.length=this.length,e._words=new Uint32Array(this._words),e};var Cd=["D-BETA-PEPTIDE, C-GAMMA LINKING","D-GAMMA-PEPTIDE, C-DELTA LINKING","D-PEPTIDE COOH CARBOXY TERMINUS","D-PEPTIDE NH3 AMINO TERMINUS","D-PEPTIDE LINKING","L-BETA-PEPTIDE, C-GAMMA LINKING","L-GAMMA-PEPTIDE, C-DELTA LINKING","L-PEPTIDE COOH CARBOXY TERMINUS","L-PEPTIDE NH3 AMINO TERMINUS","L-PEPTIDE LINKING","PEPTIDE LINKING","PEPTIDE-LIKE"],kd=["RNA OH 3 PRIME TERMINUS","RNA OH 5 PRIME TERMINUS","RNA LINKING"],Md=["DNA OH 3 PRIME TERMINUS","DNA OH 5 PRIME TERMINUS","DNA LINKING","L-DNA LINKING","L-RNA LINKING"],Td=["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","SACCHARIDE"],Ad=["NON-POLYMER"].concat(["OTHER"],Td),Ed=["h","g","i"],Pd=["e","b"],Rd=["s","t","l",""],Od={H:1,D:1,T:1,HE:2,LI:3,BE:4,B:5,C:6,N:7,O:8,F:9,NE:10,NA:11,MG:12,AL:13,SI:14,P:15,S:16,CL:17,AR:18,K:19,CA:20,SC:21,TI:22,V:23,CR:24,MN:25,FE:26,CO:27,NI:28,CU:29,ZN:30,GA:31,GE:32,AS:33,SE:34,BR:35,KR:36,RB:37,SR:38,Y:39,ZR:40,NB:41,MO:42,TC:43,RU:44,RH:45,PD:46,AG:47,CD:48,IN:49,SN:50,SB:51,TE:52,I:53,XE:54,CS:55,BA:56,LA:57,CE:58,PR:59,ND:60,PM:61,SM:62,EU:63,GD:64,TB:65,DY:66,HO:67,ER:68,TM:69,YB:70,LU:71,HF:72,TA:73,W:74,RE:75,OS:76,IR:77,PT:78,AU:79,HG:80,TL:81,PB:82,BI:83,PO:84,AT:85,RN:86,FR:87,RA:88,AC:89,TH:90,PA:91,U:92,NP:93,PU:94,AM:95,CM:96,BK:97,CF:98,ES:99,FM:100,MD:101,NO:102,LR:103,RF:104,DB:105,SG:106,BH:107,HS:108,MT:109,DS:110,RG:111,CN:112,NH:113,FL:114,MC:115,LV:116,TS:117,OG:118},Id={1:1.1,2:1.4,3:1.81,4:1.53,5:1.92,6:1.7,7:1.55,8:1.52,9:1.47,10:1.54,11:2.27,12:1.73,13:1.84,14:2.1,15:1.8,16:1.8,17:1.75,18:1.88,19:2.75,20:2.31,21:2.3,22:2.15,23:2.05,24:2.05,25:2.05,26:2.05,27:2,28:2,29:2,30:2.1,31:1.87,32:2.11,33:1.85,34:1.9,35:1.83,36:2.02,37:3.03,38:2.49,39:2.4,40:2.3,41:2.15,42:2.1,43:2.05,44:2.05,45:2,46:2.05,47:2.1,48:2.2,49:2.2,50:1.93,51:2.17,52:2.06,53:1.98,54:2.16,55:3.43,56:2.68,57:2.5,58:2.48,59:2.47,60:2.45,61:2.43,62:2.42,63:2.4,64:2.38,65:2.37,66:2.35,67:2.33,68:2.32,69:2.3,70:2.28,71:2.27,72:2.25,73:2.2,74:2.1,75:2.05,76:2,77:2,78:2.05,79:2.1,80:2.05,81:1.96,82:2.02,83:2.07,84:1.97,85:2.02,86:2.2,87:3.48,88:2.83,89:2,90:2.4,91:2,92:2.3,93:2,94:2,95:2,96:2,97:2,98:2,99:2,100:2,101:2,102:2,103:2,104:2,105:2,106:2,107:2,108:2,109:2,110:2,111:2,112:2,113:2,114:2,115:2,116:2,117:2,118:2},Ld={1:.31,2:.28,3:1.28,4:.96,5:.84,6:.76,7:.71,8:.66,9:.57,10:.58,11:1.66,12:1.41,13:1.21,14:1.11,15:1.07,16:1.05,17:1.02,18:1.06,19:2.03,20:1.76,21:1.7,22:1.6,23:1.53,24:1.39,25:1.39,26:1.32,27:1.26,28:1.24,29:1.32,30:1.22,31:1.22,32:1.2,33:1.19,34:1.2,35:1.2,36:1.16,37:2.2,38:1.95,39:1.9,40:1.75,41:1.64,42:1.54,43:1.47,44:1.46,45:1.42,46:1.39,47:1.45,48:1.44,49:1.42,50:1.39,51:1.39,52:1.38,53:1.39,54:1.4,55:2.44,56:2.15,57:2.07,58:2.04,59:2.03,60:2.01,61:1.99,62:1.98,63:1.98,64:1.96,65:1.94,66:1.92,67:1.92,68:1.89,69:1.9,70:1.87,71:1.87,72:1.75,73:1.7,74:1.62,75:1.51,76:1.44,77:1.41,78:1.36,79:1.36,80:1.32,81:1.45,82:1.46,83:1.48,84:1.4,85:1.5,86:1.5,87:2.6,88:2.21,89:2.15,90:2.06,91:2,92:1.96,93:1.9,94:1.87,95:1.8,96:1.69,97:1.6,98:1.6,99:1.6,100:1.6,101:1.6,102:1.6,103:1.6,104:1.6,105:1.6,106:1.6,107:1.6,108:1.6,109:1.6,110:1.6,111:1.6,112:1.6,113:1.6,114:1.6,115:1.6,116:1.6,117:1.6,118:1.6},Dd={1:[1],2:[0],3:[1],4:[2],5:[3],6:[4],7:[3],8:[2],9:[1],10:[0],11:[1],12:[2],13:[6],14:[6],15:[3,5,7],16:[2,4,6],17:[1],18:[0],19:[1],20:[2],31:[3],32:[4],33:[3,5],34:[2,4,6],35:[1],36:[0],37:[1],38:[2],49:[3],50:[4],51:[3,5],52:[2],53:[1,2,5],54:[0,2],55:[1],56:[2],81:[3],82:[4],83:[3],84:[2],85:[1],86:[0],87:[1],88:[2]},Nd={1:1,2:2,3:1,4:2,5:3,6:4,7:5,8:6,9:7,10:8,11:1,12:2,13:3,14:4,15:5,16:6,17:7,18:8,19:1,20:2,21:3,22:4,23:5,24:6,25:7,26:8,27:9,28:10,29:11,30:2,31:3,32:4,33:5,34:6,35:7,36:8,37:1,38:2,39:3,40:4,41:5,42:6,43:7,44:8,45:9,46:10,47:11,48:2,49:3,50:4,51:5,52:6,53:7,54:8,55:1,56:2,57:3,58:4,59:3,60:4,61:5,62:6,63:7,64:8,65:9,66:10,67:11,68:12,69:13,70:14,71:15,72:4,73:5,74:6,75:7,76:8,77:9,78:10,79:11,80:2,81:3,82:4,83:5,84:6,85:7,86:8,87:1,88:2,89:3,90:4,91:3,92:4,93:5,94:6,95:7,96:8,97:9,98:10,99:11,100:12,101:13,102:14,103:15,104:2,105:2,106:2,107:2,108:2,109:2,110:2,111:2,112:2,113:3,114:4,115:5,116:6,117:7,118:8},Fd={ALA:[.17,.5,.33],ARG:[.81,1.81,1],ASN:[.42,.85,.43],ASP:[1.23,3.64,2.41],ASH:[-.07,.43,.5],CYS:[-.24,-.02,.22],GLN:[.58,.77,.19],GLU:[2.02,3.63,1.61],GLH:[-.01,.11,.12],GLY:[.01,1.15,1.14],HIS:[.17,.11,-.06],ILE:[-.31,-1.12,-.81],LEU:[-.56,-1.25,-.69],LYS:[.99,2.8,1.81],MET:[-.23,-.67,-.44],PHE:[-1.13,-1.71,-.58],PRO:[.45,.14,-.31],SER:[.13,.46,.33],THR:[.14,.25,.11],TRP:[-1.85,-2.09,-.24],TYR:[-.94,-.71,.23],VAL:[.07,-.46,-.53]},zd=[0,0,0],Bd={HIS:"H",ARG:"R",LYS:"K",ILE:"I",PHE:"F",LEU:"L",TRP:"W",ALA:"A",MET:"M",PRO:"P",CYS:"C",ASN:"N",VAL:"V",GLY:"G",SER:"S",GLN:"Q",TYR:"Y",ASP:"D",GLU:"E",THR:"T",SEC:"U",PYL:"O"},jd=Object.keys(Bd),Zd=["A","C","T","G","U","I"],Hd=["DA","DC","DT","DG","DU","DI"],Ud=["A","G","I","DA","DG","DI"],Vd=Zd.concat(Hd),Gd=["SOL","WAT","HOH","H2O","W","DOD","D3O","TIP3","TIP4","SPC"],Wd=["118","119","1AL","1CU","2FK","2HP","2OF","3CO","3MT","3NI","3OF","3P8","4MO","4PU","543","6MO","ACT","AG","AL","ALF","AM","ATH","AU","AU3","AUC","AZI","BA","BCT","BEF","BF4","BO4","BR","BS3","BSY","CA","CAC","CD","CD1","CD3","CD5","CE","CHT","CL","CO","CO3","CO5","CON","CR","CS","CSB","CU","CU1","CU3","CUA","CUZ","CYN","DME","DMI","DSC","DTI","DY","E4N","EDR","EMC","ER3","EU","EU3","F","FE","FE2","FPO","GA","GD3","GEP","HAI","HG","HGC","IN","IOD","IR","IR3","IRI","IUM","K","KO4","LA","LCO","LCP","LI","LU","MAC","MG","MH2","MH3","MLI","MLT","MMC","MN","MN3","MN5","MN6","MO1","MO2","MO3","MO4","MO5","MO6","MOO","MOS","MOW","MW1","MW2","MW3","NA","NA2","NA5","NA6","NAO","NAW","NCO","NET","NH4","NI","NI1","NI2","NI3","NO2","NO3","NRU","O4M","OAA","OC1","OC2","OC3","OC4","OC5","OC6","OC7","OC8","OCL","OCM","OCN","OCO","OF1","OF2","OF3","OH","OS","OS4","OXL","PB","PBM","PD","PDV","PER","PI","PO3","PO4","PR","PT","PT4","PTN","RB","RH3","RHD","RU","SB","SCN","SE4","SEK","SM","SMO","SO3","SO4","SR","T1A","TB","TBA","TCN","TEA","TH","THE","TL","TMA","TRA","UNX","V","VN3","VO4","W","WO5","Y1","YB","YB2","YH","YT3","ZCM","ZN","ZN2","ZN3","ZNO","ZO3","OHX"],$d=["045","0AT","0BD","0MK","0NZ","0TS","0V4","0XY","0YT","10M","147","149","14T","15L","16G","18T","18Y","1AR","1BW","1GL","1GN","1JB","1LL","1NA","1S3","26M","26Q","26R","26V","26W","26Y","27C","289","291","293","2DG","2F8","2FG","2FL","2FP","2GL","2M4","2M5","32O","34V","3CM","3DO","3DY","3FM","3LR","3MF","3MG","3SA","3ZW","46D","46M","46Z","48Z","4CQ","4GC","4NN","50A","5DI","5GF","5MM","5RP","5SA","5SP","64K","6PG","6SA","7JZ","7SA","A1Q","A2G","AAB","AAL","AAO","ABC","ABD","ABE","ABF","ABL","ACG","ACI","ACR","ACX","ADA","ADG","ADR","AF1","AFD","AFL","AFO","AFP","AFR","AGC","AGH","AGL","AHR","AIG","ALL","ALX","AMU","AOG","AOS","ARA","ARB","ARE","ARI","ASG","ASO","AXP","AXR","B0D","B16","B2G","B4G","B6D","B8D","B9D","BBK","BCD","BDG","BDP","BDR","BEM","BFP","BGC","BGL","BGP","BGS","BHG","BMA","BMX","BNG","BNX","BOG","BRI","BXF","BXP","BXX","BXY","C3X","C4X","C5X","CAP","CBI","CBK","CBS","CDR","CEG","CGF","CHO","CR1","CR6","CRA","CT3","CTO","CTR","CTT","D6G","DAF","DAG","DDA","DDB","DDL","DEL","DFR","DFX","DG0","DGC","DGD","DGM","DGS","DIG","DLF","DLG","DMU","DNO","DOM","DP5","DQQ","DQR","DR2","DR3","DR4","DRI","DSR","DT6","DVC","E4P","E5G","EAG","EBG","EBQ","EGA","EJT","EPG","ERE","ERI","F1P","F1X","F6P","FBP","FCA","FCB","FCT","FDP","FDQ","FFC","FIX","FMO","FRU","FSI","FU4","FUB","FUC","FUD","FUL","FXP","G16","G1P","G2F","G3I","G4D","G4S","G6D","G6P","G6S","GAC","GAD","GAL","GC1","GC4","GCD","GCN","GCO","GCS","GCT","GCU","GCV","GCW","GCX","GE1","GFG","GFP","GIV","GL0","GL2","GL5","GL6","GL7","GL9","GLA","GLB","GLC","GLD","GLF","GLG","GLO","GLP","GLS","GLT","GLW","GMH","GN1","GNX","GP1","GP4","GPH","GPM","GQ1","GQ2","GQ4","GS1","GS4","GSA","GSD","GTE","GTH","GTK","GTR","GTZ","GU0","GU1","GU2","GU3","GU4","GU5","GU6","GU8","GU9","GUF","GUP","GUZ","GYP","GYV","H2P","HDL","HMS","HS2","HSD","HSG","HSH","HSJ","HSQ","HSR","HSU","HSX","HSY","HSZ","IAB","IDG","IDR","IDS","IDT","IDU","IDX","IDY","IMK","IN1","IPT","ISL","KBG","KD2","KDA","KDM","KDO","KFN","KO1","KO2","KTU","L6S","LAG","LAI","LAK","LAO","LAT","LB2","LBT","LCN","LDY","LGC","LGU","LM2","LMT","LMU","LOG","LOX","LPK","LSM","LTM","LVZ","LXB","LXZ","M1F","M3M","M6P","M8C","MA1","MA2","MA3","MAB","MAG","MAL","MAN","MAT","MAV","MAW","MBG","MCU","MDA","MDM","MDP","MFA","MFB","MFU","MG5","MGA","MGL","MLB","MMA","MMN","MN0","MRP","MTT","MUG","MVP","MXY","N1L","N9S","NAA","NAG","NBG","NDG","NED","NG1","NG6","NGA","NGB","NGC","NGE","NGF","NGL","NGS","NGY","NHF","NM6","NM9","NTF","NTO","NTP","NXD","NYT","OPG","OPM","ORP","OX2","P3M","P53","P6P","PA5","PNA","PNG","PNW","PRP","PSJ","PSV","PTQ","QDK","QPS","QV4","R1P","R1X","R2B","R5P","RAA","RAE","RAF","RAM","RAO","RAT","RB5","RBL","RCD","RDP","REL","RER","RF5","RG1","RGG","RHA","RIB","RIP","RNS","RNT","ROB","ROR","RPA","RST","RUB","RUU","RZM","S6P","S7P","SA0","SCR","SDD","SF6","SF9","SG4","SG5","SG6","SG7","SGA","SGC","SGD","SGN","SGS","SHB","SHG","SI3","SIO","SOE","SOL","SSG","SUC","SUP","SUS","T6P","T6T","TAG","TCB","TDG","TGK","TGY","TH1","TIA","TM5","TM6","TM9","TMR","TMX","TOA","TOC","TRE","TYV","UCD","UDC","VG1","X0X","X1X","X2F","X4S","X5S","X6X","XBP","XDN","XDP","XIF","XIM","XLF","XLS","XMM","XUL","XXR","XYP","XYS","YO5","Z3Q","Z6J","Z9M","ZDC","ZDM"],qd=["CA","C","N","O","O1","O2","OC1","OC2","OX1","OXT","H","H1","H2","H3","HA","HN","BB"],Yd=["P","OP1","OP2","HOP2","HOP3","O2'","O3'","O4'","O5'","C1'","C2'","C3'","C4'","C5'","H1'","H2'","H2''","HO2'","H3'","H4'","H5'","H5''","HO3'","HO5'","O2*","O3*","O4*","O5*","C1*","C2*","C3*","C4*","C5*"],Xd={};function Kd(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;default:return 8}}Xd[1]={trace:"CA",direction1:"C",direction2:["O","OC1","O1","OX1","OXT"],backboneStart:"N",backboneEnd:"C"},Xd[2]={trace:["C4'","C4*"],direction1:["C1'","C1*"],direction2:["C3'","C3*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},Xd[3]={trace:["C3'","C3*"],direction1:["C2'","C2*"],direction2:["O4'","O4*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},Xd[4]={trace:["CA","BB"],backboneStart:["CA","BB"],backboneEnd:["CA","BB"]},Xd[5]={trace:["C4'","C4*","P"],backboneStart:["C4'","C4*","P"],backboneEnd:["C4'","C4*","P"]},Xd[6]={trace:["C3'","C3*","C2'","P"],backboneStart:["C3'","C3*","C2'","P"],backboneEnd:["C3'","C3*","C2'","P"]},Xd[0]={};var Jd=new Map([[2,qa(180)],[3,qa(120)],[4,qa(109.4721)],[6,qa(90)]]);function Qd(e,t){var n=[],r=new H,i=new H;return r.subVectors(t,e),e.eachBondedAtom((function(t){1!==t.number&&(i.subVectors(t,e),n.push(r.angleTo(i)))})),n}function ef(e,t){var n=e.clone(),r=new H;r.subVectors(t,e);var i=[new H,new H],o=0;if(e.eachBondedAtom((function(t){o>1||1!==t.number&&(n.index=t.index,i[o++].subVectors(t,e))})),1===o&&n.eachBondedAtom((function(t){o>1||1!==t.number&&t.index!==e.index&&i[o++].subVectors(t,e)})),2===o){var a=i[0].cross(i[1]);return Math.abs(Math.PI/2-a.angleTo(r))}}function tf(e,t){var n=e.structure,r=n.atomCount,i=new Int8Array(r),o=new Int8Array(r),a=new Int8Array(r),s=new Int8Array(r);return n.eachAtom((function(e){var n=e.index,r=function(e,t){var n=e.bondToElementCount(1),r=e.formalCharge||0,i="always"===t.assignCharge||"auto"===t.assignCharge&&0===r,o="always"===t.assignH||"auto"===t.assignH&&0===n,a=e.bondCount,s=function(e){var t=0;return e.eachBond((function(e){return t+=e.bondOrder})),t}(e),l=function(e){var t=e.structure.getBondProxy(),n=e.number,r=8===n||7===n;if(r&&4===e.bondCount)return!1;var i=!1;return e.eachBond((function(n){if(n.bondOrder>1)i=!0;else if(r){var o=n.getOtherAtom(e);o.eachBond((function(e){if(e.bondOrder>1){var t=o.number;if((15===t||16===t)&&8===e.getOtherAtom(o).number)return;i=!0}}),t)}})),i}(e),c=s-a>0,u=0,d=8;switch(e.number){case 1:i&&(0===a?(r=1,d=0):1===a&&(r=0,d=1));break;case 6:i&&(r=0),o&&(u=Math.max(0,4-s-Math.abs(r))),d=Kd(a+u+Math.max(0,-r));break;case 7:if(i)if(o)if(l&&s<4)r=a-n===1&&s-n===2?1:0;else{var f=!1;e.eachBondedAtom((function(e){(16===e.number||e.isMetal())&&(f=!0)})),r=f?0:1}else r=s-3;o&&(u=Math.max(0,3-s+r)),d=Kd(l&&!c?a+u-r:a+u+1-r);break;case 8:i&&(o||(r=s-2),1===s&&e.eachBondedAtom((function(t){t.eachBond((function(n){var i=n.getOtherAtom(t);i.index!==e.index&&8===i.number&&2===n.bondOrder&&(r=-1)}))}))),o&&(u=Math.max(0,2-s+r)),d=Kd(l&&!c?a+u-r+1:a+u-r+2);break;case 16:i&&(o||(r=s<=3&&!e.bondToElementCount(8)?s-2:0)),o&&s<2&&(u=Math.max(0,2-s+r)),s<=3&&(d=Kd(a+u-r+2));break;case 9:case 17:case 35:case 53:case 85:i&&(r=s-1);break;case 3:case 11:case 19:case 37:case 55:case 87:i&&(r=1-s);break;case 4:case 12:case 20:case 38:case 56:case 88:i&&(r=2-s);break;default:console.warn("Requested charge, protonation for an unhandled element",e.element)}return[r,u,u+n,d]}(e,t),l=r[0],c=r[1],u=r[2],d=r[3];i[n]=l,o[n]=c,a[n]=u,s[n]=d})),{charge:i,implicitH:o,totalH:a,idealGeometry:s}}function nf(e){if(e["@valenceModel"])return e["@valenceModel"];var t=tf(e,{assignCharge:"auto",assignH:"auto"});return e["@valenceModel"]=t,t}function rf(e){return 15===e.number&&e.bondToElementCount(8)===e.bondCount}var of=["ARG","HIS","LYS"],af=["GLU","ASP"];function sf(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxIonicDist,gf.maxIonicDist),i=Sa(n.maxPiStackingDist,gf.maxPiStackingDist),o=Sa(n.maxPiStackingOffset,gf.maxPiStackingOffset),a=Sa(n.maxPiStackingAngle,gf.maxPiStackingAngle),s=Sa(n.maxCationPiDist,gf.maxCationPiDist),l=Sa(n.maxCationPiOffset,gf.maxCationPiOffset),c=Sa(n.masterModelIndex,gf.masterModelIndex),u=Math.max(r+2,i,s),d=i*i,f=s*s,p=t.features,h=t.spatialHash,m=t.contactStore,g=t.featureSet,v=p.types,y=p.centers,b=p.atomSets,x=y.x,w=y.y,_=y.z,S=v.length,C=e.atomStore.x,k=e.atomStore.y,M=e.atomStore.z,T=e.getAtomProxy(),A=e.getAtomProxy(),E=new H,P=new H,R=new H,O=new H,I=new H,L=new H,D=new H,N=function(e,t){E.set(C[e[0]],k[e[0]],M[e[0]]),P.set(C[e[1]],k[e[1]],M[e[1]]),R.set(C[e[2]],k[e[2]],M[e[2]]),O.subVectors(E,P),I.subVectors(E,R),t.crossVectors(O,I)},F=function(e,t,n){return E.set(x[e],w[e],_[e]),P.set(x[t],w[t],_[t]),E.sub(P).projectOnPlane(n).add(P).distanceTo(P)},z=function(e,t,n){g.setBits(e,t),m.addContact(e,t,n)},B=function(e){h.eachWithin(x[e],w[e],_[e],u,(function(t,n){if(!(t<=e)&&(T.index=b[e][0],A.index=b[t][0],!yf(T,A,c))){var i=v[e],s=v[t];if(function(e,t){return 2===e&&1===t||1===e&&2===t}(i,s))(function(e,t,n){for(var r=e.length,i=t.length,o=0;o<r;++o){T.index=e[o];for(var a=0;a<i;++a)if(A.index=t[a],T.distanceTo(A)<=n)return!0}return!1})(b[e],b[t],r)&&z(e,t,1);else if(function(e,t){return 3===e&&3===t}(i,s)){if(n<=d){N(b[e],L),N(b[t],D);var u=57.29578*L.angleTo(D);Math.min(F(e,t,D),F(t,e,L))<=o&&(u<=a||u>=180-a||u<=a+90&&u>=90-a)&&z(e,t,3)}}else if(function(e,t){return 3===e&&1===t||1===e&&3===t}(i,s)&&n<=f){var p=3===i?[e,t]:[t,e],h=p[0],m=p[1];N(b[h],L),F(m,h,L)<=l&&z(h,m,2)}}}))},j=0;j<S;++j)B(j)}function lf(e){return"HIS"===e.resname&&7==e.number&&e.isRing()}var cf=[3,11,19,37,55,12,20,38,56,13,31,49,81,21,50,82,83,51,80];var uf=[17,35,53,85];var df=[7,8,16],ff=[6,7,15,16];var pf=qa(180),hf=qa(120);function mf(e,t,n){return!vf(e,t,n)&&(e.modelIndex!==t.modelIndex||e.altloc&&t.altloc&&e.altloc!==t.altloc)}var gf={maxHydrophobicDist:4,maxHbondDist:3.5,maxHbondSulfurDist:4.1,maxHbondAccAngle:45,maxHbondDonAngle:45,maxHbondAccPlaneAngle:90,maxHbondDonPlaneAngle:30,maxPiStackingDist:5.5,maxPiStackingOffset:2,maxPiStackingAngle:30,maxCationPiDist:6,maxCationPiOffset:2,maxIonicDist:5,maxHalogenBondDist:4,maxHalogenBondAngle:30,maxMetalDist:3,refineSaltBridges:!0,masterModelIndex:-1,lineOfSightDistFactor:1};function vf(e,t,n){return e.modelIndex===n&&t.modelIndex!==n||t.modelIndex===n&&e.modelIndex!==n}function yf(e,t,n){return!vf(e,t,n)&&(e.modelIndex!==t.modelIndex||e.residueIndex===t.residueIndex||e.altloc&&t.altloc&&e.altloc!==t.altloc)}function bf(e){var t={types:[],groups:[],centers:{x:[],y:[],z:[]},atomSets:[]};return sl&&rl.time("calculateFeatures"),function(e,t){var n=nf(e.data).charge,r={};e.eachResidue((function(e){if(of.includes(e.resname)){var i=wd(1);e.eachAtom((function(e){7===e.number&&e.isSidechain()&&_d(i,e)})),Sd(t,i)}else jd.includes(e.resname)||e.isNucleic()||(e.eachAtom((function(e){var n=!1,i=wd(1);!function(e){var t=0;return 6===e.number&&3===e.bondCount&&3===e.bondToElementCount(7)&&e.eachBondedAtom((function(e){e.bondCount-e.bondToElementCount(1)===1&&++t})),2===t}(e)?function(e){var t=0;return 6===e.number&&3===e.bondCount&&2===e.bondToElementCount(7)&&1===e.bondToElementCount(6)&&e.eachBondedAtom((function(e){e.bondCount-e.bondToElementCount(1)===1&&++t})),2===t}(e)&&(i.group=9,n=!0):(i.group=8,n=!0),n&&(e.eachBondedAtom((function(e){7===e.number&&(r[e.index]=!0,_d(i,e))})),Sd(t,i))})),e.eachAtom((function(e){var i=wd(1);n[e.index]>0&&(r[e.index]||(_d(i,e),Sd(t,i)))})))}))}(e,t),function(e,t){var n=nf(e.data).charge,r={};e.eachResidue((function(e){if(af.includes(e.resname)){var i=wd(2);e.eachAtom((function(e){8===e.number&&e.isSidechain()&&_d(i,e)})),Sd(t,i)}else if(Vd.includes(e.resname)){var o=wd(2);e.eachAtom((function(e){rf(e)&&(o.group=6,e.eachBondedAtom((function(e){8===e.number&&_d(o,e)})),Sd(t,o))}))}else jd.includes(e.resname)||Vd.includes(e.resname)||(e.eachAtom((function(e){var n=!1,i=wd(2);!function(e){return 16===e.number&&3===e.bondToElementCount(8)}(e)?rf(e)?(i.group=6,n=!0):function(e){return 16===e.number&&4===e.bondToElementCount(8)}(e)?(i.group=5,n=!0):function(e){var t=0;return 6===e.number&&2===e.bondToElementCount(8)&&1===e.bondToElementCount(6)&&e.eachBondedAtom((function(e){8===e.number&&e.bondCount-e.bondToElementCount(1)===1&&++t})),2===t}(e)&&(i.group=10,n=!0):(i.group=4,n=!0),n&&(e.eachBondedAtom((function(e){8===e.number&&(r[e.index]=!0,_d(i,e))})),Sd(t,i))})),e.eachAtom((function(e){var i=wd(2);n[e.index]<0&&(r[e.index]||(_d(i,e),Sd(t,i)))})))}))}(e,t),function(e,t){var n=e.getAtomProxy();e.eachResidue((function(e){var r=e.getAromaticRings();if(r){var i=e.atomOffset;r.forEach((function(e){var r=wd(3);e.forEach((function(e){n.index=e+i,_d(r,n)})),Sd(t,r)}))}}))}(e,t),function(e,t){var n=nf(e.data),r=n.charge,i=n.implicitH,o=n.idealGeometry;e.eachAtom((function(e){var n=wd(5),a=e.number;if(8===a)_d(n,e),Sd(t,n);else if(7===a){if(lf(e))_d(n,e),Sd(t,n);else if(r[e.index]<1){var s=e.bondCount+i[e.index],l=o[e.index];(4===l&&s<4||3===l&&s<3||2===l&&s<2)&&(_d(n,e),Sd(t,n))}}else 16===a&&("CYS"!==e.resname&&"MET"!==e.resname&&-1!==e.formalCharge||(_d(n,e),Sd(t,n)))}))}(e,t),function(e,t){var n=nf(e.data).totalH;e.eachAtom((function(e){var r=wd(4),i=e.number;(lf(e)||n[e.index]>0&&(7===i||8===i||16===i))&&(_d(r,e),Sd(t,r))}))}(e,t),function(e,t){var n=nf(e.data).totalH;e.eachAtom((function(e){if(6===e.number&&n[e.index]>0&&(e.bondToElementCount(7)>0||e.bondToElementCount(8)>0||function(e){if(!e.isAromatic())return!1;var t=e.residueType.getRings();if(!t)return!1;var n=!1;return t.rings.forEach((function(t){n||t.some((function(t){return e.index-e.residueAtomOffset===t}))&&(n=t.some((function(t){var n=e.residueType.atomTypeIdList[t],r=e.atomMap.get(n).number;return 7===r||8===r})))})),n}(e))){var r=wd(9);_d(r,e),Sd(t,r)}}))}(e,t),function(e,t){e.eachAtom((function(e){var n=!1,r=!1,i=jd.includes(e.resname),o=Vd.includes(e.resname);if(i||o?i?8===e.number?(["ASP","GLU","SER","THR","TYR","ASN","GLN"].includes(e.resname)&&e.isSidechain()||e.isBackbone())&&(n=!0,r=!0):16===e.number&&"CYS"===e.resname?(n=!0,r=!0):7===e.number&&"HIS"===e.resname&&e.isSidechain()&&(n=!0):o&&(8===e.number&&e.isBackbone()?(n=!0,r=!0):["N3","N4","N7"].includes(e.atomname)?n=!0:["O2","O4","O6"].includes(e.atomname)&&(n=!0,r=!0)):e.isHalogen()||8===e.number||16===e.number?(n=!0,r=!0):7===e.number&&(n=!0),n){var a=wd(11);_d(a,e),Sd(t,a)}if(r){var s=wd(10);_d(s,e),Sd(t,s)}}))}(e,t),function(e,t){e.eachAtom((function(e){if(e.isTransitionMetal()||30===e.number||48===e.number){var n=wd(12);_d(n,e),Sd(t,n)}else if(cf.includes(e.number)){var r=wd(13);_d(r,e),Sd(t,r)}}))}(e,t),function(e,t){e.eachAtom((function(e){var n=wd(8),r=!1;6===e.number?(r=!0,e.eachBondedAtom((function(e){var t=e.number;6!==t&&1!==t&&(r=!1)}))):9===e.number&&(r=!0),r&&(_d(n,e),Sd(t,n))}))}(e,t),function(e,t){e.eachAtom((function(e){if(df.includes(e.number)){var n=!1;if(e.eachBondedAtom((function(e){ff.includes(e.number)&&(n=!0)})),n){var r=wd(7);_d(r,e),Sd(t,r)}}}))}(e,t),function(e,t){e.eachAtom((function(e){if(uf.includes(e.number)&&1===e.bondToElementCount(6)){var n=wd(6);_d(n,e),Sd(t,n)}}))}(e,t),sl&&rl.timeEnd("calculateFeatures"),t}function xf(e,t){void 0===t&&(t=gf);var n=function(e){var t=e.types,n=e.centers;return{features:e,spatialHash:new md(n),contactStore:new vd,featureSet:new bd(t.length,!1)}}(bf(e));sl&&rl.time("calculateContacts"),sf(e,n,t),function(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxHbondDist,gf.maxHbondDist),i=Sa(n.maxHbondSulfurDist,gf.maxHbondSulfurDist),o=qa(Sa(n.maxHbondAccAngle,gf.maxHbondAccAngle)),a=qa(Sa(n.maxHbondDonAngle,gf.maxHbondDonAngle)),s=qa(Sa(n.maxHbondAccPlaneAngle,gf.maxHbondAccPlaneAngle)),l=qa(Sa(n.maxHbondDonPlaneAngle,gf.maxHbondDonPlaneAngle)),c=Sa(n.masterModelIndex,gf.masterModelIndex),u=Math.max(r,i),d=r*r,f=t.features,p=t.spatialHash,h=t.contactStore,m=t.featureSet,g=f.types,v=f.centers,y=f.atomSets,b=v.x,x=v.y,w=v.z,_=g.length,S=nf(e.data).idealGeometry,C=e.getAtomProxy(),k=e.getAtomProxy(),M=function(e){p.eachWithin(b[e],x[e],w[e],u,(function(t,n){if(!(t<=e)){var r=g[e],i=g[t],u=function(e,t){return 9===e&&5===t||5===e&&9===t}(r,i);if(u||function(e,t){return 5===e&&4===t||4===e&&5===t}(r,i)){var f=5===i?[e,t]:[t,e],p=f[0],v=f[1];if(C.index=y[p][0],k.index=y[v][0],k.index!==C.index&&!yf(C,k,c)&&!(16!==C.number&&16!==k.number&&n>d)&&!C.connectedTo(k)){var b=Qd(C,k),x=Jd.get(S[C.index])||qa(120);if(!b.some((function(e){return Math.abs(x-e)>a}))){if(3===S[C.index]){var w=ef(C,k);if(void 0!==w&&w>l)return}var _=Qd(k,C),M=Jd.get(S[k.index])||qa(120);if(!_.some((function(e){return M-e>o}))){if(3===S[k.index]){var T=ef(k,C);if(void 0!==T&&T>s)return}m.setBits(p,v);var A,E,P=u?8:function(e,t){return e.isWater()&&t.isWater()}(A=C,E=k)?9:function(e,t){return e.isBackbone()&&t.isBackbone()}(A,E)?10:4;h.addContact(p,v,P)}}}}}}))},T=0;T<_;++T)M(T)}(e,n,t),function(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxMetalDist,gf.maxMetalDist),i=Sa(n.masterModelIndex,gf.masterModelIndex),o=t.features,a=t.spatialHash,s=t.contactStore,l=t.featureSet,c=o.types,u=o.centers,d=o.atomSets,f=u.x,p=u.y,h=u.z,m=c.length,g=e.getAtomProxy(),v=e.getAtomProxy(),y=function(e){a.eachWithin(f[e],p[e],h[e],r,(function(t,n){if(!(t<=e)&&(g.index=d[e][0],v.index=d[t][0],!yf(g,v,i))){var r=g.isMetal(),o=v.isMetal();if(r||o){var a=r?[c[e],c[t]]:[c[t],c[e]];u=a[0],f=a[1],(12===u?11===f||12===f:13===u?10===f:void 0)&&(l.setBits(e,t),s.addContact(e,t,7))}}var u,f}))},b=0;b<m;++b)y(b)}(e,n,t),function(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxHydrophobicDist,gf.maxHydrophobicDist),i=Sa(n.masterModelIndex,gf.masterModelIndex),o=t.features,a=t.spatialHash,s=t.contactStore,l=t.featureSet,c=o.types,u=o.centers,d=o.atomSets,f=u.x,p=u.y,h=u.z,m=c.length,g=e.getAtomProxy(),v=e.getAtomProxy(),y=function(e){a.eachWithin(f[e],p[e],h[e],r,(function(t,n){var r,o;t<=e||(g.index=d[e][0],v.index=d[t][0],yf(g,v,i)||9===g.number&&9===v.number||g.connectedTo(v)||(r=c[e],o=c[t],8===r&&8===o&&(l.setBits(e,t),s.addContact(e,t,6))))}))},b=0;b<m;++b)y(b)}(e,n,t),function(e,t,n){void 0===n&&(n={});for(var r=Sa(n.maxHalogenBondDist,gf.maxHalogenBondDist),i=qa(Sa(n.maxHalogenBondAngle,gf.maxHalogenBondAngle)),o=Sa(n.masterModelIndex,gf.masterModelIndex),a=t.features,s=t.spatialHash,l=t.contactStore,c=t.featureSet,u=a.types,d=a.centers,f=a.atomSets,p=d.x,h=d.y,m=d.z,g=u.length,v=e.getAtomProxy(),y=e.getAtomProxy(),b=function(e){s.eachWithin(p[e],h[e],m[e],r,(function(t,n){if(!(t<=e)&&(v.index=f[e][0],y.index=f[t][0],!yf(v,y,o)&&(r=u[e],a=u[t],7===r&&6===a||6===r&&7===a))){var r,a,s=6===u[e]?[v,y]:[y,v],d=s[0],p=s[1],h=Qd(d,p);if(1===h.length&&!(pf-h[0]>i)){var m=Qd(p,d);0!==m.length&&(m.some((function(e){return hf-e>i}))||(c.setBits(e,t),l.addContact(e,t,5)))}}}))},x=0;x<g;++x)b(x)}(e,n,t);var r=function(e){var t=e.contactStore,n=xd({nodeArray1:t.index1,nodeArray2:t.index2,edgeCount:t.count,nodeCount:e.featureSet.length}),r=new bd(e.contactStore.count,!0);return Object.assign({adjacencyList:n,contactSet:r},e)}(n);return function(e,t,n){void 0===n&&(n={}),sl&&rl.time("refineLineOfSight");var r=Sa(n.lineOfSightDistFactor,gf.lineOfSightDistFactor),i=Sa(n.masterModelIndex,gf.masterModelIndex),o=e.spatialHash,a=t.contactSet,s=t.contactStore,l=t.features,c=s.index1,u=s.index2,d=l.centers,f=l.atomSets,p=d.x,h=d.y,m=d.z,g=e.getAtomProxy(),v=e.getAtomProxy(),y=e.getAtomProxy(),b=new H,x=new H,w=3*r,_=r*r;a.forEach((function(e){b.set(p[c[e]],h[c[e]],m[c[e]]),x.set(p[u[e]],h[u[e]],m[u[e]]);var t=(b.x+x.x)/2,n=(b.y+x.y)/2,r=(b.z+x.z)/2,s=f[c[e]],l=f[u[e]];g.index=s[0],v.index=l[0],o.eachWithin(t,n,r,w,(function(t,n){y.index=t,1!==y.number&&y.vdw*y.vdw*_>n&&!mf(g,y,i)&&!mf(v,y,i)&&!s.includes(t)&&!l.includes(t)&&b.distanceToSquared(y)>1&&x.distanceToSquared(y)>1&&(a.clear(e),sl&&rl.log("removing",g.qualifiedName(),v.qualifiedName(),"because",y.qualifiedName()))}))})),sl&&rl.timeEnd("refineLineOfSight")}(e,r,t),function(e,t){var n=t.contactSet,r=t.contactStore,i=t.features,o=r.type,a=r.index1,s=r.index2,l=i.atomSets,c=e.getAtomProxy(),u=e.getAtomProxy(),d={},f=function(e,t,r){var i=d[r]||[1/0,-1],o=i[0],a=i[1];e<o?(-1!==a&&n.clear(a),d[r]=[e,t]):n.clear(t)};n.forEach((function(e){if(6===o[e]){c.index=l[a[e]][0],u.index=l[s[e]][0];var t=c.distanceTo(u);f(t,e,c.index+"|"+u.residueIndex),f(t,e,u.index+"|"+c.residueIndex)}}))}(e,r),t.refineSaltBridges&&function(e,t){var n=t.contactSet,r=t.contactStore,i=t.features,o=r.type,a=r.index1,s=r.index2,l=i.atomSets,c={},u=function(e,t){c[e]||(c[e]=[]),c[e].push(t)};n.forEach((function(e){1===o[e]&&(l[a[e]].forEach((function(t){return u(t,e)})),l[s[e]].forEach((function(t){return u(t,e)})))})),n.forEach((function(e){if(function(e){return 4===e||9===e||10===e}(o[e])){var t=c[l[a[e]][0]],r=c[l[s[e]][0]];if(t&&r)for(var i=t.length,u=0;u<i;++u)if(r.includes(t[u]))return void n.clear(e)}}))}(0,r),function(e,t){var n=t.contactSet,r=t.contactStore,i=t.features,o=r.type,a=r.index1,s=r.index2,l=i.atomSets,c={},u=function(e,t){c[e]||(c[e]=[]),c[e].push(t)};n.forEach((function(e){3===o[e]&&(l[a[e]].forEach((function(t){return u(t,e)})),l[s[e]].forEach((function(t){return u(t,e)})))})),n.forEach((function(e){if(6===o[e]||2===o[e]){var t=c[l[a[e]][0]],r=c[l[s[e]][0]];if(t&&r)for(var i=t.length,u=0;u<i;++u)if(r.includes(t[u]))return void n.clear(e)}}))}(0,r),function(e,t){var n=t.contactSet,r=t.contactStore,i=t.features,o=r.type,a=r.index1,s=r.index2,l=i.atomSets,c={},u=function(e,t){c[e]||(c[e]=[]),c[e].push(t)};n.forEach((function(e){1===o[e]&&(l[a[e]].forEach((function(t){return u(t,e)})),l[s[e]].forEach((function(t){return u(t,e)})))})),n.forEach((function(e){if(7===o[e]){var t=c[l[a[e]][0]],r=c[l[s[e]][0]];if(t&&r)for(var i=t.length,u=0;u<i;++u)if(r.includes(t[u]))return void n.clear(t[u])}}))}(0,r),sl&&rl.timeEnd("calculateContacts"),r}function wf(e){switch(e){case 4:case 9:case 10:return"hydrogen bond";case 6:return"hydrophobic contact";case 5:return"halogen bond";case 1:return"ionic interaction";case 7:return"metal coordination";case 2:return"cation-pi interaction";case 3:return"pi-pi stacking";case 8:return"weak hydrogen bond";default:return"unknown contact"}}var _f={hydrogenBond:!0,hydrophobic:!0,halogenBond:!0,ionicInteraction:!0,metalCoordination:!0,cationPi:!0,piStacking:!0,weakHydrogenBond:!0,waterHydrogenBond:!0,backboneHydrogenBond:!0,radius:1,filterSele:""},Sf=new ie;function Cf(e,t,n){var r=Ca(n,_f),i=[];r.hydrogenBond&&i.push(4),r.hydrophobic&&i.push(6),r.halogenBond&&i.push(5),r.ionicInteraction&&i.push(1),r.metalCoordination&&i.push(7),r.cationPi&&i.push(2),r.piStacking&&i.push(3),r.weakHydrogenBond&&i.push(8),r.waterHydrogenBond&&i.push(9),r.backboneHydrogenBond&&i.push(10);var o,a=e.features,s=e.contactSet,l=e.contactStore,c=a.centers,u=a.atomSets,d=c.x,f=c.y,p=c.z,h=l.index1,m=l.index2,g=l.type,v=[],y=[],b=[],x=[],w=[];return r.filterSele&&(o=Array.isArray(r.filterSele)?r.filterSele.map((function(e){return t.getAtomSet(new Bs(e))})):t.getAtomSet(new Bs(r.filterSele))),s.forEach((function(e){var t=g[e];if(i.includes(t)){if(o){var n=u[h[e]][0],a=u[m[e]][0];if(Array.isArray(o)){if(!(o[0].isSet(n)&&o[1].isSet(a)||o[1].isSet(n)&&o[0].isSet(a)))return}else if(!o.isSet(n)&&!o.isSet(a))return}var s=h[e],l=m[e];v.push(d[s],f[s],p[s]),y.push(d[l],f[l],p[l]),b.push.apply(b,function(e){switch(e){case 4:case 9:case 10:return Sf.setHex(2851770).toArray();case 6:return Sf.setHex(8421504).toArray();case 5:return Sf.setHex(4259775).toArray();case 1:return Sf.setHex(15779860).toArray();case 7:return Sf.setHex(9191577).toArray();case 2:return Sf.setHex(16744448).toArray();case 3:return Sf.setHex(9220966).toArray();case 8:return Sf.setHex(12967404).toArray();default:return Sf.setHex(13421772).toArray()}}(t)),x.push(r.radius),w.push(e)}})),{position1:new Float32Array(v),position2:new Float32Array(y),color:new Float32Array(b),color2:new Float32Array(b),radius:new Float32Array(x),picking:new If(w,e,t)}}var kf=function(e){this.array=e},Mf={type:{configurable:!0},data:{configurable:!0}};Mf.type.get=function(){return""},Mf.data.get=function(){return{}},kf.prototype.getIndex=function(e){return this.array?this.array[e]:e},kf.prototype.getObject=function(e){return{}},kf.prototype._applyTransformations=function(e,t,n){return t&&e.applyMatrix4(t.matrix),n&&e.applyMatrix4(n.matrix),e},kf.prototype._getPosition=function(e){return new H},kf.prototype.getPosition=function(e,t,n){return this._applyTransformations(this._getPosition(e),t,n)},Object.defineProperties(kf.prototype,Mf);var Tf=function(e){function t(t){e.call(this),this.shape=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0},data:{configurable:!0},type:{configurable:!0}};return n.primitive.get=function(){},n.data.get=function(){return this.shape},n.type.get=function(){return this.primitive.type},t.prototype.getObject=function(e){return this.primitive.objectFromShape(this.shape,this.getIndex(e))},t.prototype._getPosition=function(e){return this.primitive.positionFromShape(this.shape,this.getIndex(e))},Object.defineProperties(t.prototype,n),t}(kf),Af=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return sd},Object.defineProperties(t.prototype,n),t}(Tf),Ef=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return ld},Object.defineProperties(t.prototype,n),t}(Tf),Pf=function(e){function t(t,n){e.call(this,t),this.structure=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"atom"},n.data.get=function(){return this.structure},t.prototype.getObject=function(e){return this.structure.getAtomProxy(this.getIndex(e))},t.prototype._getPosition=function(e){return(new H).copy(this.getObject(e))},Object.defineProperties(t.prototype,n),t}(kf),Rf=function(e){function t(t){e.call(this),this.axes=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"axes"},n.data.get=function(){return this.axes},t.prototype.getObject=function(){return{axes:this.axes}},t.prototype._getPosition=function(){return this.axes.center.clone()},Object.defineProperties(t.prototype,n),t}(kf),Of=function(e){function t(t,n,r){e.call(this,t),this.structure=n,this.bondStore=r||n.bondStore}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"bond"},n.data.get=function(){return this.structure},t.prototype.getObject=function(e){var t=this.structure.getBondProxy(this.getIndex(e));return t.bondStore=this.bondStore,t},t.prototype._getPosition=function(e){var t=this.getObject(e);return(new H).copy(t.atom1).add(t.atom2).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(kf),If=function(e){function t(t,n,r){e.call(this,t),this.contacts=n,this.structure=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"contact"},n.data.get=function(){return this.contacts},t.prototype.getObject=function(e){var t=this.getIndex(e),n=this.contacts,r=n.features,i=n.contactStore,o=r.centers,a=r.atomSets,s=o.x,l=o.y,c=o.z,u=i.index1,d=i.index2,f=i.type,p=u[t],h=d[t];return{center1:new H(s[p],l[p],c[p]),center2:new H(s[h],l[h],c[h]),atom1:this.structure.getAtomProxy(a[p][0]),atom2:this.structure.getAtomProxy(a[h][0]),type:wf(f[t])}},t.prototype._getPosition=function(e){var t=this.getObject(e),n=t.center1,r=t.center2;return(new H).addVectors(n,r).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(kf),Lf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return cd},Object.defineProperties(t.prototype,n),t}(Tf),Df=function(e){function t(t,n,r){e.call(this,t),this.validation=n,this.structure=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"clash"},n.data.get=function(){return this.validation},t.prototype.getObject=function(e){var t=this.validation,n=this.getIndex(e);return{validation:t,index:n,clash:t.clashArray[n]}},t.prototype._getAtomProxyFromSele=function(e){var t=new Bs(e),n=this.structure.getAtomIndices(t)[0];return this.structure.getAtomProxy(n)},t.prototype._getPosition=function(e){var t=this.getObject(e).clash,n=this._getAtomProxyFromSele(t.sele1),r=this._getAtomProxyFromSele(t.sele2);return(new H).copy(n).add(r).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(kf),Nf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"distance"},Object.defineProperties(t.prototype,n),t}(Of),Ff=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return ud},Object.defineProperties(t.prototype,n),t}(Tf),zf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return od},Object.defineProperties(t.prototype,n),t}(Tf),Bf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return id},Object.defineProperties(t.prototype,n),t}(Tf),jf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"ignore"},Object.defineProperties(t.prototype,n),t}(kf),Zf=function(e){function t(t,n){e.call(this,t),this.mesh=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"mesh"},t.prototype.getObject=function(){var e=this.mesh;return{shape:this.shape,name:e.name,serial:e.serial}},t.prototype._getPosition=function(){return this.__position||(this.__position=Eu(this.mesh.position)),this.__position},Object.defineProperties(t.prototype,n),t}(Tf),Hf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return rd},Object.defineProperties(t.prototype,n),t}(Tf),Uf=function(e){function t(t,n){e.call(this,t),this.surface=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"surface"},n.data.get=function(){return this.surface},t.prototype.getObject=function(e){return{surface:this.surface,index:this.getIndex(e)}},t.prototype._getPosition=function(){return this.surface.center.clone()},Object.defineProperties(t.prototype,n),t}(kf),Vf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return ad},Object.defineProperties(t.prototype,n),t}(Tf),Gf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return dd},Object.defineProperties(t.prototype,n),t}(Tf),Wf=function(e){function t(t,n){e.call(this),this.unitcell=t,this.structure=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"unitcell"},n.data.get=function(){return this.unitcell},t.prototype.getObject=function(){return{unitcell:this.unitcell,structure:this.structure}},t.prototype._getPosition=function(){return this.unitcell.getCenter(this.structure)},Object.defineProperties(t.prototype,n),t}(kf),$f=(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};n.type.get=function(){return"unknown"},Object.defineProperties(t.prototype,n)}(kf),function(e){function t(t,n){e.call(this,t),this.volume=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"volume"},n.data.get=function(){return this.volume},t.prototype.getObject=function(e){var t=this.volume,n=this.getIndex(e);return{volume:t,index:n,value:t.data[n]}},t.prototype._getPosition=function(e){var t=this.volume.position,n=this.getIndex(e);return new H(t[3*n],t[3*n+1],t[3*n+2])},Object.defineProperties(t.prototype,n),t}(kf)),qf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"slice"},Object.defineProperties(t.prototype,n),t}($f),Yf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return pd},Object.defineProperties(t.prototype,n),t}(Tf),Xf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return hd},Object.defineProperties(t.prototype,n),t}(Tf);function Kf(){return new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0])}function Jf(){return new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}function Qf(){return[[0,4,4,4,2,0,0,0,2,2,0,0],[4,0,4,4,0,8,0,0,0,8,8,0],[4,4,0,4,0,0,8,0,0,0,8,8],[4,4,4,0,0,0,0,1,1,0,0,1],[2,0,0,0,0,8,8,8,2,2,0,0],[0,8,0,0,8,0,8,8,0,8,8,0],[0,0,8,0,8,8,0,8,0,0,8,8],[0,0,0,1,8,8,8,0,1,0,0,1],[2,0,0,1,2,0,0,1,0,2,0,1],[2,8,0,0,2,8,0,0,2,0,8,0],[0,8,8,0,0,8,8,0,0,8,0,8],[0,0,8,1,0,0,8,1,1,0,8,0]]}function ep(e,t,n,r,i){var o,a,s,l,c,u,d,f=0,p=!1,h=!1,m=!1,g=t*n*r,v=t,y=t*n,b=new Int32Array(12),x=[],w=[],_=[],S=[],C=Kf(),k=Jf(),M=[[0,4,4,4,2,0,0,0,2,2,0,0],[4,0,4,4,0,8,0,0,0,8,8,0],[4,4,0,4,0,0,8,0,0,0,8,8],[4,4,4,0,0,0,0,1,1,0,0,1],[2,0,0,0,0,8,8,8,2,2,0,0],[0,8,0,0,8,0,8,8,0,8,8,0],[0,0,8,0,8,8,0,8,0,0,8,8],[0,0,0,1,8,8,8,0,1,0,0,1],[2,0,0,1,2,0,0,1,0,2,0,1],[2,8,0,0,2,8,0,0,2,0,8,0],[0,8,8,0,0,8,8,0,0,8,0,8],[0,0,8,1,0,0,8,1,1,0,8,0]];function T(e,t,n){return e+(t-e)*n}function A(e,i,o){return y*(o=(o+d)%r)+v*(i=(i+u)%n)+(e=(e+c)%t)}function E(e,t,n,r,l,c,u){var d=3*e;if(a[d]<0){var h=(f-c)/(u-c),m=o,g=3*s;if(x[g+0]=n+h,x[g+1]=r,x[g+2]=l,!p){var v=3*e;w[g]=-T(m[v],m[v+3],h),w[g+1]=-T(m[v+1],m[v+4],h),w[g+2]=-T(m[v+2],m[v+5],h)}i&&(S[s]=i[e+Math.round(h)]),a[d]=s,b[t]=s,s+=1}else b[t]=a[d]}function P(e,t,n,r,l,c,u){var d=3*e+1;if(a[d]<0){var h=(f-c)/(u-c),m=o,g=3*s;if(x[g]=n,x[g+1]=r+h,x[g+2]=l,!p){var y=3*e,_=y+3*v;w[g]=-T(m[y],m[_],h),w[g+1]=-T(m[y+1],m[_+1],h),w[g+2]=-T(m[y+2],m[_+2],h)}i&&(S[s]=i[e+Math.round(h)*v]),a[d]=s,b[t]=s,s+=1}else b[t]=a[d]}function R(e,t,n,r,l,c,u){var d=3*e+2;if(a[d]<0){var h=(f-c)/(u-c),m=o,g=3*s;if(x[g]=n,x[g+1]=r,x[g+2]=l+h,!p){var v=3*e,_=v+3*y;w[g]=-T(m[v],m[_],h),w[g+1]=-T(m[v+1],m[_+1],h),w[g+2]=-T(m[v+2],m[_+2],h)}i&&(S[s]=i[e+Math.round(h)*y]),a[d]=s,b[t]=s,s+=1}else b[t]=a[d]}function O(t){var n=3*t;0===o[n]&&(o[n]=e[(t-1+g)%g]-e[(t+1)%g],o[n+1]=e[(t-v+g)%g]-e[(t+v)%g],o[n+2]=e[(t-y+g)%g]-e[(t+y)%g])}function I(t,n,r,i,o){var a,s,c,u,d,g,x;m?(i=A(t,n,r),a=A(t+1,n,r),s=A(t,n+1,r),c=A(t,n,r+1),u=A(t+1,n+1,r),d=A(t+1,n,r+1),g=A(t,n+1,r+1),x=A(t+1,n+1,r+1)):(a=i+1,u=(s=i+v)+1,d=(c=i+y)+1,x=(g=s+y)+1);var w=0,S=e[i],T=e[a],I=e[s],L=e[u],D=e[c],N=e[d],F=e[g],z=e[x];S<f&&(w|=1),T<f&&(w|=2),I<f&&(w|=8),L<f&&(w|=4),D<f&&(w|=16),N<f&&(w|=32),F<f&&(w|=128),z<f&&(w|=64);var B=C[w];if(0===B)return 0;var j=t+1,Z=n+1,H=r+1;1&B&&(p||(O(i),O(a)),E(i,0,t,n,r,S,T)),2&B&&(p||(O(a),O(u)),P(a,1,j,n,r,T,L)),4&B&&(p||(O(s),O(u)),E(s,2,t,Z,r,I,L)),8&B&&(p||(O(i),O(s)),P(i,3,t,n,r,S,I)),16&B&&(p||(O(c),O(d)),E(c,4,t,n,H,D,N)),32&B&&(p||(O(d),O(x)),P(d,5,j,n,H,N,z)),64&B&&(p||(O(g),O(x)),E(g,6,t,Z,H,F,z)),128&B&&(p||(O(c),O(g)),P(c,7,t,n,H,D,F)),256&B&&(p||(O(i),O(c)),R(i,8,t,n,r,S,D)),512&B&&(p||(O(a),O(d)),R(a,9,j,n,r,T,N)),1024&B&&(p||(O(u),O(x)),R(u,10,j,Z,r,L,z)),2048&B&&(p||(O(s),O(g)),R(s,11,t,Z,r,I,F));for(var U,V,G,W=w<<4,$=0;-1!==k[W+$];)U=k[W+$],V=k[W+$+1],G=k[W+$+2],h?(M[U][V]&o&&(_[l++]=b[U],_[l++]=b[V]),M[V][G]&o&&(_[l++]=b[V],_[l++]=b[G]),M[U][G]&o&&(_[l++]=b[U],_[l++]=b[G])):(_[l++]=b[V],_[l++]=b[U],_[l++]=b[G]),$+=3}function L(i,o,s,l,c,u){var d,h,g,b,x,w,_,S,C,k,M,T,E;if(i=void 0!==i?i:0,o=void 0!==o?o:0,s=void 0!==s?s:0,l=void 0!==l?l:t-1,c=void 0!==c?c:n-1,u=void 0!==u?u:r-1,m||(p?(i=Math.max(0,i),o=Math.max(0,o),s=Math.max(0,s),l=Math.min(t-1,l),c=Math.min(n-1,c),u=Math.min(r-1,u)):(i=Math.max(1,i),o=Math.max(1,o),s=Math.max(1,s),l=Math.min(t-2,l),c=Math.min(n-2,c),u=Math.min(r-2,u))),m)for(S=i-2,C=o-2,M=l+2,T=c+2,E=u+2,x=k=s-2;x<E;++x)for(b=C;b<T;++b)for(g=S;g<M;++g)h=3*A(g,b,x),a[h]=-1,a[h+1]=-1,a[h+2]=-1;else for(S=Math.max(0,i-2),C=Math.max(0,o-2),k=Math.max(0,s-2),M=Math.min(t,l+2),T=Math.min(n,c+2),E=Math.min(r,u+2),x=k;x<E;++x)for(_=y*x,b=C;b<T;++b)for(w=_+v*b,g=S;g<M;++g)a[d=3*(w+g)]=-1,a[d+1]=-1,a[d+2]=-1;if(!m){var P,R=i,O=o,L=s,D=l,N=c,F=u;for(P=!1,x=s;x<u;++x){for(b=o;b<c;++b){for(g=i;g<l;++g)if(e[d=t*n*x+t*b+g]>=f){L=x,P=!0;break}if(P)break}if(P)break}for(P=!1,b=o;b<c;++b){for(x=L;x<u;++x){for(g=i;g<l;++g)if(e[d=t*n*x+t*b+g]>=f){O=b,P=!0;break}if(P)break}if(P)break}for(P=!1,g=i;g<l;++g){for(b=O;b<c;++b){for(x=L;x<u;++x)if(e[d=t*n*x+t*b+g]>=f){R=g,P=!0;break}if(P)break}if(P)break}for(P=!1,x=u;x>=s;--x){for(b=c;b>=o;--b){for(g=l;g>=i;--g)if(e[d=t*n*x+t*b+g]>=f){F=x,P=!0;break}if(P)break}if(P)break}for(P=!1,b=c;b>=o;--b){for(x=F;x>=s;--x){for(g=l;g>=i;--g)if(e[d=t*n*x+t*b+g]>=f){N=b,P=!0;break}if(P)break}if(P)break}for(P=!1,g=l;g>=i;--g){for(b=N;b>=o;--b){for(x=F;x>=s;--x)if(e[d=t*n*x+t*b+g]>=f){D=g,P=!0;break}if(P)break}if(P)break}p?(i=Math.max(0,R-1),o=Math.max(0,O-1),s=Math.max(0,L-1),l=Math.min(t-1,D+1),c=Math.min(n-1,N+1),u=Math.min(r-1,F+1)):(i=Math.max(1,R-1),o=Math.max(1,O-1),s=Math.max(1,L-1),l=Math.min(t-2,D+1),c=Math.min(n-2,N+1),u=Math.min(r-2,F+1))}var z=15;for(x=s;x<u;++x,z&=-5)for(_=y*x,z|=2,b=o;b<c;++b,z&=-3)for(w=_+v*b,z|=1,g=i;g<l;++g,z&=-2)I(g,b,x,d=w+g,z)}this.triangulate=function(e,v,y,b,C){f=e,h=b,m=C,(p=v||h)||o||(o=new Float32Array(3*g));var k=3*g;if(a&&a.length===k||(a=new Int32Array(k)),s=0,l=0,void 0!==y){var M=y[0].map(Math.round),T=y[1].map(Math.round);c=t*Math.ceil(Math.abs(M[0])/t),u=n*Math.ceil(Math.abs(M[1])/n),d=r*Math.ceil(Math.abs(M[2])/r),L(M[0],M[1],M[2],T[0],T[1],T[2])}else c=u=d=0,L();return x.length=3*s,p||(w.length=3*s),_.length=l,i&&(S.length=s),{position:new Float32Array(x),normal:p?void 0:new Float32Array(w),index:za(_,x.length/3),atomindex:i?new Int32Array(S):void 0,contour:h}}}wl.add("arrow",Ef),wl.add("box",Bf),wl.add("cone",Lf),wl.add("cylinder",Af),wl.add("ellipsoid",Ff),wl.add("octahedron",zf),wl.add("sphere",Hf),wl.add("tetrahedron",Vf),wl.add("torus",Gf),wl.add("point",Yf),wl.add("wideline",Xf),Object.assign(ep,{__deps:[Kf,Jf,Qf,za]});var tp=function(e,t){this.cols=e,this.rows=t,this.size=this.cols*this.rows,this.data=new Float32Array(this.size)};function np(e,t){for(var n=0,r=0,i=t.rows,o=t.cols,a=0,s=0,l=0,c=t.data,u=e.data;n<i;s+=1,a+=o,n++)for(l=s,r=0;r<o;l+=i,r++)u[l]=c[a+r]}function rp(e,t,n){for(var r=0,i=0,o=0,a=0,s=0,l=0,c=0,u=t.cols,d=t.rows,f=n.rows,p=t.data,h=n.data,m=e.data,g=0;r<d;a+=u,r++)for(l=0,i=0;i<f;c++,i++){for(s=a,g=0,o=0;o<u;s++,l++,o++)g+=p[s]*h[l];m[c]=g}}function ip(e,t,n){var r=e.data,i=t.data,o=n.data,a=i[0],s=i[1],l=i[2],c=i[3],u=i[4],d=i[5],f=i[6],p=i[7],h=i[8],m=o[0],g=o[1],v=o[2],y=o[3],b=o[4],x=o[5],w=o[6],_=o[7],S=o[8];r[0]=a*m+s*y+l*w,r[1]=a*g+s*b+l*_,r[2]=a*v+s*x+l*S,r[3]=c*m+u*y+d*w,r[4]=c*g+u*b+d*_,r[5]=c*v+u*x+d*S,r[6]=f*m+p*y+h*w,r[7]=f*g+p*b+h*_,r[8]=f*v+p*x+h*S}function op(e){for(var t=e.rows,n=e.cols,r=e.data,i=new Array(n),o=0;o<n;++o)i[o]=0;for(var a=0,s=0;a<t;++a)for(var l=0;l<n;++l,++s)i[l]+=r[s];for(var c=0;c<n;++c)i[c]/=t;return i}function ap(e,t){for(var n=e.rows,r=e.cols,i=e.data,o=0,a=0;o<n;++o)for(var s=0;s<r;++s,++a)i[a]-=t[s]}function sp(e,t,n,r){r=e[t],e[t]=e[n],e[n]=r}function lp(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?(t/=e,e*Math.sqrt(1+t*t)):t>0?(e/=t,t*Math.sqrt(1+e*e)):0}tp.prototype.copyTo=function(e){e.data.set(this.data)};function cp(e,t,n,r){var i=0,o=0,a=e.rows,s=e.cols,l=a,c=s;l<c&&(i=1,o=l,l=c,c=o);var u=new tp(l,l),d=new tp(1,c),f=new tp(c,c);if(0===i)np(u,e);else{for(o=0;o<s*a;o++)u.data[o]=e.data[o];for(;o<c*l;o++)u.data[o]=0}if(function(e,t,n,r,i,o,a,s){for(var l=0,c=0,u=0,d=0,f=Math.max(o,30),p=0,h=0,m=0,g=0,v=0,y=0,b=0,x=0,w=0,_=0,S=0,C=0,k=0,M=0,T=0,A=0,E=0,P=4660,R=0,O=0,I=0,L=new Float64Array(a<<3);l<a;l++){for(u=0,S=0;u<o;u++)S+=(x=e[l*t+u])*x;if(L[l]=S,r){for(u=0;u<a;u++)r[l*i+u]=0;r[l*i+l]=1}}for(;d<f;d++){for(v=0,l=0;l<a-1;l++)for(c=l+1;c<a;c++){for(p=l*t|0,h=c*t|0,T=L[l],A=0,E=L[c],u=2,A+=e[p]*e[h],A+=e[p+1]*e[h+1];u<o;u++)A+=e[p+u]*e[h+u];if(!(Math.abs(A)<=2.384185792e-7*Math.sqrt(T*E))){for(k=lp(A*=2,C=T-E),C<0?(M=.5*(k-C),y=A/(k*(b=Math.sqrt(M/k))*2)):b=A/(k*(y=Math.sqrt((k+C)/(2*k)))*2),T=0,E=0,u=2,w=y*e[p]+b*e[h],_=-b*e[p]+y*e[h],e[p]=w,e[h]=_,T+=w*w,E+=_*_,w=y*e[p+1]+b*e[h+1],_=-b*e[p+1]+y*e[h+1],e[p+1]=w,e[h+1]=_,T+=w*w,E+=_*_;u<o;u++)w=y*e[p+u]+b*e[h+u],_=-b*e[p+u]+y*e[h+u],e[p+u]=w,e[h+u]=_,T+=w*w,E+=_*_;if(L[l]=T,L[c]=E,v=1,r)for(g=c*i|0,u=2,w=y*r[m=l*i|0]+b*r[g],_=-b*r[m]+y*r[g],r[m]=w,r[g]=_,w=y*r[m+1]+b*r[g+1],_=-b*r[m+1]+y*r[g+1],r[m+1]=w,r[g+1]=_;u<a;u++)w=y*r[m+u]+b*r[g+u],_=-b*r[m+u]+y*r[g+u],r[m+u]=w,r[g+u]=_}}if(0===v)break}for(l=0;l<a;l++){for(u=0,S=0;u<o;u++)S+=(x=e[l*t+u])*x;L[l]=Math.sqrt(S)}for(l=0;l<a-1;l++){for(c=l,u=l+1;u<a;u++)L[c]<L[u]&&(c=u);if(l!==c&&(sp(L,l,c,S),r)){for(u=0;u<o;u++)sp(e,l*t+u,c*t+u,x);for(u=0;u<a;u++)sp(r,l*i+u,c*i+u,x)}}for(l=0;l<a;l++)n[l]=L[l];if(r)for(l=0;l<s;l++){for(S=l<a?L[l]:0;S<=1e-37;){for(O=1/o,u=0;u<o;u++)R=0!==(256&(P=214013*P+2531011)>>16)?O:-O,e[l*t+u]=R;for(d=0;d<2;d++)for(c=0;c<l;c++){for(S=0,u=0;u<o;u++)S+=e[l*t+u]*e[c*t+u];for(I=0,u=0;u<o;u++)x=e[l*t+u]-S*e[c*t+u],e[l*t+u]=x,I+=Math.abs(x);for(I=I?1/I:0,u=0;u<o;u++)e[l*t+u]*=I}for(S=0,u=0;u<o;u++)S+=(x=e[l*t+u])*x;S=Math.sqrt(S)}for(b=1/S,u=0;u<o;u++)e[l*t+u]*=b}}(u.data,l,d.data,f.data,c,l,c,l),t){for(o=0;o<c;o++)t.data[o]=d.data[o];for(;o<s;o++)t.data[o]=0}0===i?(n&&np(n,u),r&&np(r,f)):(n&&np(n,f),r&&np(r,u))}function up(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function dp(e,t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g){e[0]=t,e[4]=n,e[8]=r,e[12]=i,e[1]=o,e[5]=a,e[9]=s,e[13]=l,e[2]=c,e[6]=u,e[10]=d,e[14]=f,e[3]=p,e[7]=h,e[11]=m,e[15]=g}function fp(e,t,n){var r=t[0],i=t[4],o=t[8],a=t[12],s=t[1],l=t[5],c=t[9],u=t[13],d=t[2],f=t[6],p=t[10],h=t[14],m=t[3],g=t[7],v=t[11],y=t[15],b=n[0],x=n[4],w=n[8],_=n[12],S=n[1],C=n[5],k=n[9],M=n[13],T=n[2],A=n[6],E=n[10],P=n[14],R=n[3],O=n[7],I=n[11],L=n[15];e[0]=r*b+i*S+o*T+a*R,e[4]=r*x+i*C+o*A+a*O,e[8]=r*w+i*k+o*E+a*I,e[12]=r*_+i*M+o*P+a*L,e[1]=s*b+l*S+c*T+u*R,e[5]=s*x+l*C+c*A+u*O,e[9]=s*w+l*k+c*E+u*I,e[13]=s*_+l*M+c*P+u*L,e[2]=d*b+f*S+p*T+h*R,e[6]=d*x+f*C+p*A+h*O,e[10]=d*w+f*k+p*E+h*I,e[14]=d*_+f*M+p*P+h*L,e[3]=m*b+g*S+v*T+y*R,e[7]=m*x+g*C+v*A+y*O,e[11]=m*w+g*k+v*E+y*I,e[15]=m*_+g*M+v*P+y*L}function pp(e,t,n,r){dp(e,t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1)}function hp(e,t,n,r){dp(e,1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1)}function mp(e,t){var n=Math.cos(t),r=Math.sin(t);dp(e,n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1)}function gp(){return new Float32Array([1,0,0,0,1,0,0,0,1])}function vp(e,t){var n=Du([t[0],t[1],t[2]]),r=Du([t[4],t[5],t[6]]),i=Du([t[8],t[9],t[10]]),o=Du();Nu(o,r,i),e[0]=o[0],e[1]=o[1],e[2]=o[2],Nu(o,i,n),e[3]=o[0],e[4]=o[1],e[5]=o[2],Nu(o,n,r),e[6]=o[0],e[7]=o[1],e[8]=o[2]}function yp(e,t,n,r){n=n||1,r=r||!0;var i,o=e.length/3,a=t.length/3;r&&(i=new Float32Array(3*o));var s,l,c,u,d=new Float32Array(3*o),f=new Array(20);for(s=0;s<20;++s)f[s]=new Uint32Array(o);for(s=0;s<o;++s)f[0][s]=0;for(s=0;s<a;++s){var p=3*s,h=3*s+1,m=3*s+2;for(u=!0,l=0,c=f[0][t[p]];l<c;++l)if(t[h]===f[l+1][t[p]]){u=!1;break}for(u&&(f[0][t[p]]++,f[f[0][t[p]]][t[p]]=t[h]),u=!0,l=0,c=f[0][t[p]];l<c;++l)if(t[m]===f[l+1][t[p]]){u=!1;break}for(u&&(f[0][t[p]]++,f[f[0][t[p]]][t[p]]=t[m]),u=!0,l=0,c=f[0][t[h]];l<c;++l)if(t[p]===f[l+1][t[h]]){u=!1;break}for(u&&(f[0][t[h]]++,f[f[0][t[h]]][t[h]]=t[p]),u=!0,l=0,c=f[0][t[h]];l<c;++l)if(t[m]===f[l+1][t[h]]){u=!1;break}for(u&&(f[0][t[h]]++,f[f[0][t[h]]][t[h]]=t[m]),u=!0,l=0;l<f[0][t[m]];++l)if(t[p]===f[l+1][t[m]]){u=!1;break}for(u&&(f[0][t[m]]++,f[f[0][t[m]]][t[m]]=t[p]),u=!0,l=0,c=f[0][t[m]];l<c;++l)if(t[h]===f[l+1][t[m]]){u=!1;break}u&&(f[0][t[m]]++,f[f[0][t[m]]][t[m]]=t[h])}for(var g,v,y,b,x,w=.5,_=.75/4.5,S=0;S<n;++S){for(s=0;s<o;++s)if(g=3*s,(y=f[0][s])<3)d[g]=e[g],d[g+1]=e[g+1],d[g+2]=e[g+2];else if(3===y||4===y){for(d[g]=0,d[g+1]=0,d[g+2]=0,l=0;l<y;++l)v=3*f[l+1][s],d[g]+=e[v],d[g+1]+=e[v+1],d[g+2]+=e[v+2];d[g]+=w*e[g],d[g+1]+=w*e[g+1],d[g+2]+=w*e[g+2],x=w+y,d[g]/=x,d[g+1]/=x,d[g+2]/=x}else{for(d[g]=0,d[g+1]=0,d[g+2]=0,l=0;l<y;++l)v=3*f[l+1][s],d[g]+=e[v],d[g+1]+=e[v+1],d[g+2]+=e[v+2];d[g]+=1*e[g],d[g+1]+=1*e[g+1],d[g+2]+=1*e[g+2],b=1+y,d[g]/=b,d[g+1]/=b,d[g+2]/=b}if(e.set(d),r){bp(e,t,i);var C=3*o;for(g=0;g<C;g+=3)e[g]+=-1*_*i[g],e[g+1]+=-1*_*i[g+1],e[g+2]+=-1*_*i[g+2]}}}function bp(e,t,n){var r,i;if(void 0===n)n=new Float32Array(e.length);else for(r=0,i=n.length;r<i;r++)n[r]=0;var o=new Float32Array(3),a=new Float32Array(3),s=new Float32Array(3),l=new Float32Array(3),c=new Float32Array(3);if(t)for(r=0,i=t.length;r<i;r+=3){var u=3*t[r],d=3*t[r+1],f=3*t[r+2];ju(o,e,u),ju(a,e,d),ju(s,e,f),zu(l,s,a),zu(c,o,a),Nu(l,l,c),n[u]+=l[0],n[u+1]+=l[1],n[u+2]+=l[2],n[d]+=l[0],n[d+1]+=l[1],n[d+2]+=l[2],n[f]+=l[0],n[f+1]+=l[1],n[f+2]+=l[2]}else for(r=0,i=e.length;r<i;r+=9)ju(o,e,r),ju(a,e,r+3),ju(s,e,r+6),zu(l,s,a),zu(c,o,a),Nu(l,l,c),n[r]=l[0],n[r+1]=l[1],n[r+2]=l[2],n[r+3]=l[0],n[r+4]=l[1],n[r+5]=l[2],n[r+6]=l[0],n[r+7]=l[1],n[r+8]=l[2];return Lu(n),n}function xp(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function wp(e,t,n,r,i){var o=1/r*3;Wu(e,e,i+(o+=n)),$u(t,t,i+o),Vu(e,e,r),qu(e,e),Uu(e,e,r),Vu(t,t,r),Yu(t,t),Uu(t,t,r);var a=new Float32Array(3);zu(a,t,e),Vu(a,a,r),Yu(a,a),$u(a,a,1);var s=256*Math.pow(10,6),l=a[0]*a[1]*a[2]*3;s<=l&&(Vu(e,e,r*=Math.pow(s/l,1/3)),qu(e,e),Uu(e,e,r),Vu(t,t,r),Yu(t,t),Uu(t,t,r),zu(a,t,e),Vu(a,a,r),Yu(a,a),$u(a,a,1));var c=new Float32Array(e);Xu(c,c);var u=up(),d=up();mp(d,qa(90)),fp(u,u,d);var f=up();pp(f,-1/r,1/r,1/r),fp(u,u,f);var p=up();return hp(p,-r*c[2],-r*c[1],-r*c[0]),fp(u,u,p),{dim:a,tran:c,matrix:u,scaleFactor:r}}pp.__deps=[dp],hp.__deps=[dp],mp.__deps=[dp],vp.__deps=[Du,Nu],Object.assign(yp,{__deps:[bp]}),Object.assign(bp,{__deps:[zu,Nu,ju,Lu]}),Object.assign(wp,{__deps:[qa,Wu,$u,Uu,Vu,qu,Yu,zu,Xu,up,fp,hp,pp,mp]});var _p=function(e,t,n){this.name=e||"",this.path=t||"",this.info={},this.center=new H,this.boundingBox=new K,n instanceof ye||n instanceof Oe||n instanceof wn?this.fromGeometry(n):n&&(this.set(n.position,n.index,n.normal,n.color,n.atomindex,n.contour),this.boundingBox.setFromArray(n.position),this.boundingBox.getCenter(this.center))},Sp={type:{configurable:!0}};function Cp(e,t,n,r,i){var o=new ep(e,t,n,r,i);this.getSurface=function(e,t,n,r,i,a){void 0===a&&(a=!1);var s=o.triangulate(e,t,n,i,a);if(t&&!i&&(yp(s.position,s.index,t,!0),s.normal=bp(s.position,s.index)),r&&(Ou(r,s.position),s.normal)){var l=gp();vp(l,r),Iu(l,s.normal)}return s}}Sp.type.get=function(){return"Surface"},_p.prototype.set=function(e,t,n,r,i,o){void 0===o&&(o=!1),this.position=e,this.index=t,this.normal=n,this.color=r,this.atomindex=i,this.size=e.length/3,this.contour=o},_p.prototype.fromGeometry=function(e){var t,n,r,i;if(sl&&rl.time("GeometrySurface.fromGeometry"),e instanceof ye?(e.computeVertexNormals(!0),t=(new Oe).fromGeometry(e)):t=e instanceof Oe?e:e[0],t.boundingBox||t.computeBoundingBox(),this.boundingBox.copy(t.boundingBox),this.boundingBox.getCenter(this.center),t instanceof Oe){var o=t.attributes,a=!!o.normal&&o.normal.array;(!a||0===a[0]&&0===a[1]&&0===a[2])&&t.computeVertexNormals(),n=o.position.array,r=o.index?o.index.array:null,i=o.normal.array}this.set(n,r,i,undefined,void 0),sl&&rl.timeEnd("GeometrySurface.setGeometry")},_p.prototype.getPosition=function(){return this.position},_p.prototype.getColor=function(e){var t=e||{};t.surface=this;var n=this.size,r=new Float32Array(3*n),i=pl.getScheme(t);if(i.volumeColor||"random"===t.scheme)for(var o=0;o<n;++o)i.volumeColorToArray(o,r,3*o);else if(i.positionColor)for(var a=new H,s=this.position,l=0;l<n;++l){var c=3*l;a.set(s[c],s[c+1],s[c+2]),i.positionColorToArray(a,r,c)}else if(i.atomColor&&this.atomindex)for(var u=t.structure.getAtomProxy(),d=this.atomindex,f=0;f<n;++f)u.index=d[f],i.atomColorToArray(u,r,3*f);else{var p=new ie(t.value);ac(n,p.r,p.g,p.b,r)}return r},_p.prototype.getPicking=function(e){return this.atomindex&&e?new Pf(this.atomindex,e):new Uf(sc(this.size),this)},_p.prototype.getNormal=function(){return this.normal},_p.prototype.getSize=function(e,t){return oc(this.size,e*t)},_p.prototype.getIndex=function(){return this.index},_p.prototype.getFilteredIndex=function(e,t){if(e&&this.atomindex){for(var n=new Bs(e),r=t.getAtomSet(n),i=[],o=this.atomindex,a=this.index,s=a.length,l=this.contour?2:3,c=0,u=0;u<s;u+=l){for(var d=!0,f=0;f<l;f++){var p=o[a[u+f]];if(!r.get(p)){d=!1;break}}if(d)for(var h=0;h<l;h++,c++)i[c]=a[u+h]}return za(i,this.position.length/3)}return this.index},_p.prototype.getAtomindex=function(){return this.atomindex},_p.prototype.dispose=function(){},Object.defineProperties(_p.prototype,Sp),Object.assign(Cp,{__deps:[yp,bp,ep,Ou,Iu,gp,vp]}),fl.add("surf",(function(e,t){var n=e.data.args,r=e.data.params;if(n&&(self.volsurf=new Cp(n[0],n[1],n[2],n[3],n[4])),r){var i=self.volsurf.getSurface(r.isolevel,r.smooth,r.box,r.matrix,r.contour,r.wrap),o=[i.position.buffer,i.index.buffer];i.normal&&o.push(i.normal.buffer),i.atomindex&&o.push(i.atomindex.buffer),t({sd:i,p:r},o)}}),[Cp]);var kp=function(e,t,n,r,i,o,a){this.name=e,this.path=t,this.matrix=new j,this.normalMatrix=new U,this.inverseMatrix=new j,this.center=new H,this.boundingBox=new K,this.setData(n,r,i,o,a)},Mp={type:{configurable:!0},position:{configurable:!0},min:{configurable:!0},max:{configurable:!0},sum:{configurable:!0},mean:{configurable:!0},rms:{configurable:!0}};function Tp(e){return"front"===e?0:"back"===e?1:2}Mp.type.get=function(){return"Volume"},kp.prototype.setData=function(e,t,n,r,i){this.nx=t||1,this.ny=n||1,this.nz=r||1,this.data=e||new Float32Array(1),this.setAtomindex(i),delete this._position,delete this._min,delete this._max,delete this._mean,delete this._rms,this.worker&&this.worker.terminate()},kp.prototype.setStats=function(e,t,n,r){this._min=e,this._max=t,this._mean=n,this._rms=r},kp.prototype.setMatrix=function(e){this.matrix.copy(e);var t=this.boundingBox,n=this.center,r=this.nx-1,i=this.ny-1,o=this.nz-1;t.makeEmpty(),t.expandByPoint(n.set(r,i,o)),t.expandByPoint(n.set(r,i,0)),t.expandByPoint(n.set(r,0,o)),t.expandByPoint(n.set(r,0,0)),t.expandByPoint(n.set(0,i,o)),t.expandByPoint(n.set(0,0,o)),t.expandByPoint(n.set(0,i,0)),t.expandByPoint(n.set(0,0,0)),t.applyMatrix4(this.matrix),t.getCenter(this.center);var a=this.matrix.elements,s=new H(a[0],a[1],a[2]),l=new H(a[4],a[5],a[6]),c=new H(a[8],a[9],a[10]),u=new H,d=this.normalMatrix.elements;u.crossVectors(l,c),d[0]=u.x,d[1]=u.y,d[2]=u.z,u.crossVectors(c,s),d[3]=u.x,d[4]=u.y,d[5]=u.z,u.crossVectors(s,l),d[6]=u.x,d[7]=u.y,d[8]=u.z,this.inverseMatrix.getInverse(this.matrix)},kp.prototype.setAtomindex=function(e){this.atomindex=e},kp.prototype.getBox=function(e,t,n){return n||(n=new K),n.set(e,e),n.expandByScalar(t),n.applyMatrix4(this.inverseMatrix),n.min.round(),n.max.round(),n},kp.prototype._getBox=function(e,t){if(e&&t){this.__box||(this.__box=new K);var n=this.getBox(e,t,this.__box);return[n.min.toArray(),n.max.toArray()]}},kp.prototype._makeSurface=function(e,t,n){var r=this.name+"@"+t.toPrecision(2),i=new _p(r,"",e);return i.info.isolevel=t,i.info.smooth=n,i.info.volume=this,i},kp.prototype.getSurface=function(e,t,n,r,i,o){void 0===o&&(o=!1),e=isNaN(e)?this.getValueForSigma(2):e,t=Sa(t,0),void 0===this.volsurf&&(this.volsurf=new Cp(this.data,this.nx,this.ny,this.nz,this.atomindex));var a=this._getBox(n,r),s=this.volsurf.getSurface(e,t,a,this.matrix.elements,i,o);return this._makeSurface(s,e,t)},kp.prototype.getSurfaceWorker=function(e,t,n,r,i,o,a){var s=this;if(e=isNaN(e)?this.getValueForSigma(2):e,t=t||0,window.hasOwnProperty("Worker")){void 0===this.workerPool&&(this.workerPool=new Au("surf",2));var l={},c=this.workerPool.getNextWorker();0===c.postCount&&Object.assign(l,{args:[this.data,this.nx,this.ny,this.nz,this.atomindex]}),Object.assign(l,{params:{isolevel:e,smooth:t,box:this._getBox(n,r),matrix:this.matrix.elements,contour:i,wrap:o}}),c.post(l,void 0,(function(e){var t=e.data.sd,n=e.data.p;a(s._makeSurface(t,n.isolevel,n.smooth))}),(function(l){console.warn("Volume.getSurfaceWorker error - trying without worker",l);var c=s.getSurface(e,t,n,r,i,o);a(c)}))}else{var u=this.getSurface(e,t,n,r,i,o);a(u)}},kp.prototype.getValueForSigma=function(e){return this.mean+Sa(e,2)*this.rms},kp.prototype.getSigmaForValue=function(e){return(Sa(e,0)-this.mean)/this.rms},Mp.position.get=function(){if(!this._position){for(var e=this.nz,t=this.ny,n=this.nx,r=new Float32Array(n*t*e*3),i=0,o=0;o<e;++o)for(var a=0;a<t;++a)for(var s=0;s<n;++s)r[i+0]=s,r[i+1]=a,r[i+2]=o,i+=3;Ou(this.matrix.elements,r),this._position=r}return this._position},kp.prototype.getDataAtomindex=function(){return this.atomindex},kp.prototype.getDataPosition=function(){return this.position},kp.prototype.getDataColor=function(e){var t=e||{};t.volume=this,t.scale=t.scale||"Spectral",t.domain=t.domain||[this.min,this.max];for(var n=pl.getScheme(t),r=this.position.length/3,i=new Float32Array(3*r),o=0;o<r;++o)n.volumeColorToArray(o,i,3*o);return i},kp.prototype.getDataPicking=function(){var e=sc(this.position.length/3);return new $f(e,this)},kp.prototype.getDataSize=function(e,t){var n,r=this.data,i=this.position.length/3;switch(e){case"value":case"deviation":n=new Float32Array(r);break;case"abs-value":n=new Float32Array(r);for(var o=0;o<i;++o)n[o]=Math.abs(n[o]);break;case"value-min":n=new Float32Array(r);for(var a=this.min,s=0;s<i;++s)n[s]-=a;break;default:n=oc(i,e)}if(1!==t)for(var l=0;l<i;++l)n[l]*=t;return n},Mp.min.get=function(){return void 0===this._min&&(this._min=pc(this.data)),this._min},Mp.max.get=function(){return void 0===this._max&&(this._max=fc(this.data)),this._max},Mp.sum.get=function(){return void 0===this._sum&&(this._sum=hc(this.data)),this._sum},Mp.mean.get=function(){return void 0===this._mean&&(this._mean=mc(this.data)),this._mean},Mp.rms.get=function(){return void 0===this._rms&&(this._rms=function(e){for(var t=e.length,n=0,r=0;r<t;++r){var i=e[r];n+=i*i}return Math.sqrt(n/t)}(this.data)),this._rms},kp.prototype.clone=function(){var e=new kp(this.name,this.path,this.data,this.nx,this.ny,this.nz,this.atomindex);return e.matrix.copy(this.matrix),e.header=Object.assign({},this.header),e},kp.prototype.dispose=function(){this.workerPool&&this.workerPool.terminate()},Object.defineProperties(kp.prototype,Mp),vl.add("shader/Mesh.vert","#define STANDARD\nuniform float clipNear;\nuniform vec3 clipCenter;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#elif defined( NOLIGHT )\nvarying vec3 vColor;\n#else\n#include color_pars_vertex\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#endif\n#include common\nvoid main(){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#elif defined( NOLIGHT )\nvColor = color;\n#else\n#include color_vertex\n#include beginnormal_vertex\n#include defaultnormal_vertex\n#ifndef FLAT_SHADED\nvNormal = normalize( transformedNormal );\n#endif\n#endif\n#include begin_vertex\n#include project_vertex\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}"),vl.add("shader/Mesh.frag","#define STANDARD\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 interiorColor;\nuniform float interiorDarkening;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float clipNear;\nuniform float clipRadius;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\n#elif defined( NOLIGHT )\nvarying vec3 vColor;\n#else\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars_begin\n#include lights_physical_pars_fragment\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( PICKING )\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#elif defined( NOLIGHT )\ngl_FragColor = vec4( vColor, opacity );\n#else\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\n#include normal_fragment_begin\n#include lights_physical_fragment\n#include lights_fragment_begin\n#include lights_fragment_end\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\n#include interior_fragment\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#include opaque_back_fragment\n#endif\n}");var Ap={f:1,v2:2,v3:3,c:3};function Ep(e,t){e.matrix.copy(t),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0}var Pp={opaqueBack:!1,side:"double",opacity:1,depthWrite:!0,clipNear:0,clipRadius:0,clipCenter:new H,flatShaded:!1,wireframe:!1,roughness:.4,metalness:0,diffuse:16777215,diffuseInterior:!1,useInteriorColor:!1,interiorColor:14540253,interiorDarkening:0,forceTransparent:!1,matrix:new j,disablePicking:!1,sortParticles:!1,background:!1},Rp={opaqueBack:{updateShader:!0},side:{updateShader:!0,property:!0},opacity:{uniform:!0},depthWrite:{property:!0},clipNear:{updateShader:!0,property:!0},clipRadius:{updateShader:!0,uniform:!0},clipCenter:{uniform:!0},flatShaded:{updateShader:!0},background:{updateShader:!0},wireframe:{updateVisibility:!0},roughness:{uniform:!0},metalness:{uniform:!0},diffuse:{uniform:!0},diffuseInterior:{updateShader:!0},useInteriorColor:{updateShader:!0},interiorColor:{uniform:!0},interiorDarkening:{uniform:!0},matrix:{}},Op=function(e,t){void 0===t&&(t={}),this.parameterTypes=Rp,this.geometry=new Oe,this.indexVersion=0,this.wireframeIndexVersion=-1,this.group=new wn,this.wireframeGroup=new wn,this.pickingGroup=new wn,this.vertexShader="",this.fragmentShader="",this.isImpostor=!1,this.isText=!1,this.isSurface=!1,this.isPoint=!1,this.isLine=!1,this.dynamic=!0,this.visible=!0,this.wireframeIndexCount=0,this.parameters=Ca(t,this.defaultParameters),this.uniforms=ne.merge([oe.common,{fogColor:{value:null},fogNear:{value:0},fogFar:{value:0},opacity:{value:this.parameters.opacity},clipNear:{value:0},clipRadius:{value:this.parameters.clipRadius},clipCenter:{value:this.parameters.clipCenter}},{emissive:{value:new ie(0)},roughness:{value:this.parameters.roughness},metalness:{value:this.parameters.metalness},interiorColor:{value:new ie(this.parameters.interiorColor)},interiorDarkening:{value:this.parameters.interiorDarkening}},oe.lights]),this.uniforms.diffuse.value.set(this.parameters.diffuse),this.pickingUniforms={clipNear:{value:0},objectId:{value:0},opacity:{value:this.parameters.opacity}};var n=e.position||e.position1;this._positionDataSize=n?n.length/3:0,e.primitiveId||(e.primitiveId=sc(this._positionDataSize)),this.addAttributes({position:{type:"v3",value:e.position},color:{type:"c",value:e.color},primitiveId:{type:"f",value:e.primitiveId}}),t.matrix&&(this.matrix=t.matrix),e.index&&this.initIndex(e.index),this.picking=e.picking,this.makeWireframeGeometry()},Ip={defaultParameters:{configurable:!0},matrix:{configurable:!0},transparent:{configurable:!0},size:{configurable:!0},attributeSize:{configurable:!0},pickable:{configurable:!0}};Ip.defaultParameters.get=function(){return Pp},Ip.matrix.set=function(e){this.setMatrix(e)},Ip.matrix.get=function(){return this.group.matrix.clone()},Ip.transparent.get=function(){return this.parameters.opacity<1||this.parameters.forceTransparent},Ip.size.get=function(){return this._positionDataSize},Ip.attributeSize.get=function(){return this.size},Ip.pickable.get=function(){return!!this.picking&&!this.parameters.disablePicking},Op.prototype.setMatrix=function(e){Ep(this.group,e),Ep(this.wireframeGroup,e),Ep(this.pickingGroup,e)},Op.prototype.initIndex=function(e){this.geometry.setIndex(new be(e,1)),this.geometry.getIndex().setDynamic(this.dynamic)},Op.prototype.makeMaterial=function(){var e=Tp(this.parameters.side),t=new je({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.parameters.depthWrite,lights:!0,fog:!0,side:e});t.vertexColors=2,t.extensions.derivatives=this.parameters.flatShaded,t.extensions.fragDepth=this.isImpostor;var n=new je({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.parameters.depthWrite,lights:!1,fog:!0,side:e});n.vertexColors=2;var r=new je({uniforms:this.pickingUniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:!1,depthWrite:this.parameters.depthWrite,lights:!1,fog:!1,side:e,blending:0});r.vertexColors=2,r.extensions.fragDepth=this.isImpostor,t.clipNear=this.parameters.clipNear,n.clipNear=this.parameters.clipNear,r.clipNear=this.parameters.clipNear,this.material=t,this.wireframeMaterial=n,this.pickingMaterial=r,this.updateShader()},Op.prototype.makeWireframeGeometry=function(){this.makeWireframeIndex();var e=this.geometry,t=this.wireframeIndex,n=new Oe;n.attributes=e.attributes,t&&(n.setIndex(new be(t,1).setDynamic(this.dynamic)),n.setDrawRange(0,this.wireframeIndexCount)),this.wireframeGeometry=n},Op.prototype.makeWireframeIndex=function(){var e=[];function t(t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];return void 0===i?(e[t]=[n],!0):!i.includes(n)&&(i.push(n),!0)}var n=this.geometry,r=n.index;if(this.parameters.wireframe)if(r){var i,o=r.array,a=o.length;if(n.drawRange.count!==1/0&&(a=n.drawRange.count),this.wireframeIndex&&this.wireframeIndex.length>2*a)i=this.wireframeIndex;else i=za(2*a,n.attributes.position.count);var s=0;e.length=0;for(var l=0;l<a;l+=3){var c=o[l+0],u=o[l+1],d=o[l+2];t(c,u)&&(i[s+0]=c,i[s+1]=u,s+=2),t(u,d)&&(i[s+0]=u,i[s+1]=d,s+=2),t(d,c)&&(i[s+0]=d,i[s+1]=c,s+=2)}this.wireframeIndex=i,this.wireframeIndexCount=s,this.wireframeIndexVersion=this.indexVersion}else{var f,p=n.attributes.position.count;f=this.wireframeIndex&&this.wireframeIndex.length>2*p?this.wireframeIndex:za(2*p,p);for(var h=0,m=0;h<p;h+=3)f[m+0]=h,f[m+1]=h+1,f[m+2]=h+1,f[m+3]=h+2,f[m+4]=h+2,f[m+5]=h,m+=6;this.wireframeIndex=f,this.wireframeIndexCount=2*p,this.wireframeIndexVersion=this.indexVersion}else this.wireframeIndex=new Uint16Array(0),this.wireframeIndexCount=0},Op.prototype.updateWireframeIndex=function(){if(this.wireframeGeometry&&this.wireframeIndex){if(this.wireframeGeometry.setDrawRange(0,1/0),this.wireframeIndexVersion<this.indexVersion&&this.makeWireframeIndex(),this.wireframeIndex.length>this.wireframeGeometry.index.array.length)this.wireframeGeometry.setIndex(new be(this.wireframeIndex,1).setDynamic(this.dynamic));else{var e=this.wireframeGeometry.getIndex();e.set(this.wireframeIndex),e.needsUpdate=this.wireframeIndexCount>0,e.updateRange.count=this.wireframeIndexCount}this.wireframeGeometry.setDrawRange(0,this.wireframeIndexCount)}},Op.prototype.getRenderOrder=function(){var e=0;return this.isText?e=1:this.transparent&&(e=this.isSurface?3:2),e},Op.prototype._getMesh=function(e){this.material||this.makeMaterial();var t,n=this.geometry,r=this[e];return(t=this.isLine?new jn(n,r):this.isPoint?new Un(n,r):new Ue(n,r)).frustumCulled=!1,t.renderOrder=this.getRenderOrder(),t},Op.prototype.getMesh=function(){return this._getMesh("material")},Op.prototype.getWireframeMesh=function(){var e;return this.material||this.makeMaterial(),this.wireframeGeometry||this.makeWireframeGeometry(),(e=new jn(this.wireframeGeometry,this.wireframeMaterial)).frustumCulled=!1,e.renderOrder=this.getRenderOrder(),e},Op.prototype.getPickingMesh=function(){return this._getMesh("pickingMaterial")},Op.prototype.getShader=function(e,t){return Wl(e,this.getDefines(t))},Op.prototype.getVertexShader=function(e){return this.getShader(this.vertexShader,e)},Op.prototype.getFragmentShader=function(e){return this.getShader(this.fragmentShader,e)},Op.prototype.getDefines=function(e){var t={};return this.parameters.clipNear&&(t.NEAR_CLIP=1),this.parameters.clipRadius&&(t.RADIUS_CLIP=1),"picking"===e?t.PICKING=1:(("background"===e||this.parameters.background)&&(t.NOLIGHT=1),this.parameters.flatShaded&&(t.FLAT_SHADED=1),this.parameters.opaqueBack&&(t.OPAQUE_BACK=1),this.parameters.diffuseInterior&&(t.DIFFUSE_INTERIOR=1),this.parameters.useInteriorColor&&(t.USE_INTERIOR_COLOR=1)),t},Op.prototype.getParameters=function(){return this.parameters},Op.prototype.addUniforms=function(e){this.uniforms=ne.merge([this.uniforms,e]),this.pickingUniforms=ne.merge([this.pickingUniforms,e])},Op.prototype.addAttributes=function(e){var t=this;for(var n in e){var r=void 0,i=e[n],o=t.attributeSize*Ap[i.type];i.value?(o!==i.value.length&&rl.error("attribute value has wrong length",n),r=i.value):r=Fa("float32",o),t.geometry.addAttribute(n,new be(r,Ap[i.type]).setDynamic(t.dynamic))}},Op.prototype.updateRenderOrder=function(){var e=this.getRenderOrder();function t(t){t.renderOrder=e}this.group.children.forEach(t),this.pickingGroup&&this.pickingGroup.children.forEach(t)},Op.prototype.updateShader=function(){var e=this.material,t=this.wireframeMaterial,n=this.pickingMaterial;e.vertexShader=this.getVertexShader(),e.fragmentShader=this.getFragmentShader(),e.needsUpdate=!0,t.vertexShader=this.getShader("Line.vert"),t.fragmentShader=this.getShader("Line.frag"),t.needsUpdate=!0,n.vertexShader=this.getVertexShader("picking"),n.fragmentShader=this.getFragmentShader("picking"),n.needsUpdate=!0},Op.prototype.setParameters=function(e){var t=this,n=e,r=this.parameterTypes,i=this.parameters,o={},a={},s=!1,l=!1;for(var c in n){var u=n[c];void 0!==u&&(i[c]=u,void 0!==r[c]&&(r[c].property&&(!0!==r[c].property?o[r[c].property]=u:o[c]=u),r[c].uniform&&(!0!==r[c].uniform?a[r[c].uniform]=u:a[c]=u),r[c].updateShader&&(s=!0),r[c].updateVisibility&&(l=!0),t.dynamic&&"wireframe"===c&&!0===u&&t.updateWireframeIndex(),"flatShaded"===c&&(t.material.extensions.derivatives=t.parameters.flatShaded||t.isText),"forceTransparent"===c&&(o.transparent=t.transparent),"matrix"===c&&(t.matrix=u)))}this.setProperties(o),this.setUniforms(a),s&&this.updateShader(),l&&this.setVisibility(this.visible)},Op.prototype.setAttributes=function(e){var t=this,n=this.geometry,r=n.attributes;for(var i in e)if("picking"!==i){var o=e[i],a=o.length;if("index"===i){var s=n.getIndex();n.setDrawRange(0,1/0),a>s.array.length?n.setIndex(new be(o,1).setDynamic(t.dynamic)):(s.set(o),s.needsUpdate=a>0,s.updateRange.count=a,n.setDrawRange(0,a)),t.indexVersion++,t.parameters.wireframe&&t.updateWireframeIndex()}else{var l=r[i];a>l.array.length?n.addAttribute(i,new be(o,l.itemSize).setDynamic(t.dynamic)):(r[i].set(o),r[i].needsUpdate=a>0,r[i].updateRange.count=a)}}},Op.prototype.setUniforms=function(e){if(e){var t=this.material.uniforms,n=this.wireframeMaterial.uniforms,r=this.pickingMaterial.uniforms;for(var i in e)"opacity"===i&&this.setProperties({transparent:this.transparent}),void 0!==t[i]&&(t[i].value.isVector3?t[i].value.copy(e[i]):t[i].value.set?t[i].value.set(e[i]):t[i].value=e[i]),void 0!==n[i]&&(n[i].value.isVector3?n[i].value.copy(e[i]):n[i].value.set?n[i].value.set(e[i]):n[i].value=e[i]),void 0!==r[i]&&(r[i].value.isVector3?r[i].value.copy(e[i]):r[i].value.set?r[i].value.set(e[i]):r[i].value=e[i])}},Op.prototype.setProperties=function(e){if(e){var t=this.material,n=this.wireframeMaterial,r=this.pickingMaterial;for(var i in e){var o=i,a=e[o];"transparent"===o?this.updateRenderOrder():"side"===o&&(a=Tp(a)),t[o]=a,n[o]=a,r[o]=a}t.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0}},Op.prototype.setVisibility=function(e){this.visible=e,this.parameters.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=e,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=e,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=e))},Op.prototype.dispose=function(){this.material&&this.material.dispose(),this.wireframeMaterial&&this.wireframeMaterial.dispose(),this.pickingMaterial&&this.pickingMaterial.dispose(),this.geometry.dispose(),this.wireframeGeometry&&this.wireframeGeometry.dispose()},Op.prototype.toJSON=function(){var e={};for(var t in this)"group"!==t&&"wireframeGroup"!==t&&"pickingGroup"!=t&&"picking"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Op.prototype,Ip);var Lp=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.vertexShader="Mesh.vert",this.fragmentShader="Mesh.frag",this.addAttributes({normal:{type:"v3",value:t.normal}}),void 0===t.normal&&this.geometry.computeVertexNormals()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Op),Dp=function(e){function t(){e.apply(this,arguments),this.isSurface=!0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Lp);function Np(e){e.visible=!0}function Fp(e){e.visible=!1}var zp=function(e){this.group=new wn,this.wireframeGroup=new wn,this.pickingGroup=new wn,this.frontMeshes=[],this.backMeshes=[],this.size=e.size,this.side=e.parameters.side,this.visible=e.visible,this.geometry=e.geometry,this.picking=e.picking,this.group=new wn,this.wireframeGroup=new wn,this.pickingGroup=new wn,this.matrix=e.matrix;var t=e,n=new e.constructor({position:new Float32Array(0)});t.makeMaterial(),n.makeMaterial(),n.picking=e.picking,n.geometry=e.geometry,n.wireframeGeometry=e.wireframeGeometry,n.setParameters(e.getParameters()),n.updateShader(),t.setParameters({side:"front"}),n.setParameters({side:"back",opacity:n.parameters.opacity}),this.buffer=e,this.frontBuffer=t,this.backBuffer=n},Bp={matrix:{configurable:!0},pickable:{configurable:!0},parameters:{configurable:!0}};Bp.matrix.set=function(e){Op.prototype.setMatrix.call(this,e)},Bp.matrix.get=function(){return this.group.matrix.clone()},Bp.pickable.get=function(){return!!this.picking&&!this.parameters.disablePicking},Bp.parameters.get=function(){return this.buffer.parameters},zp.prototype.getParameters=function(){var e=Object.assign({},this.buffer.parameters);return e.side=this.side,e},zp.prototype.getMesh=function(e){var t,n;return e?(n=this.backBuffer.getPickingMesh(),t=this.frontBuffer.getPickingMesh()):(n=this.backBuffer.getMesh(),t=this.frontBuffer.getMesh()),this.frontMeshes.push(t),this.backMeshes.push(n),this.setParameters({side:this.side}),(new wn).add(n,t)},zp.prototype.getWireframeMesh=function(){return this.buffer.getWireframeMesh()},zp.prototype.getPickingMesh=function(){return this.getMesh(!0)},zp.prototype.setAttributes=function(e){this.buffer.setAttributes(e)},zp.prototype.setParameters=function(e){"front"===(e=Object.assign({},e)).side?(this.frontMeshes.forEach(Np),this.backMeshes.forEach(Fp)):"back"===e.side?(this.frontMeshes.forEach(Fp),this.backMeshes.forEach(Np)):"double"===e.side&&(this.frontMeshes.forEach(Np),this.backMeshes.forEach(Np)),void 0!==e.side&&(this.side=e.side),delete e.side,void 0!==e.matrix&&(this.matrix=e.matrix),delete e.matrix,this.frontBuffer.setParameters(e),void 0!==e.wireframe&&(this.wireframe=e.wireframe,this.setVisibility(this.visible)),delete e.wireframe,this.backBuffer.setParameters(e)},zp.prototype.setVisibility=function(e){this.visible=e,this.parameters.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=e,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=e,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=e))},zp.prototype.dispose=function(){this.frontBuffer.dispose(),this.backBuffer.dispose()},zp.prototype.toJSON=function(){var e={};for(var t in this)["side","size","visible","matrix","parameters"].includes(t)&&(e[t]=this[t]);return e},Object.defineProperties(zp.prototype,Bp),vl.add("shader/Line.vert","uniform float clipNear;\nuniform vec3 clipCenter;\nvarying vec3 vViewPosition;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#include color_pars_vertex\nvoid main(){\n#include color_vertex\n#include begin_vertex\n#include project_vertex\nvViewPosition = -mvPosition.xyz;\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}"),vl.add("shader/Line.frag","uniform float opacity;\nuniform float clipNear;\nuniform float clipRadius;\nvarying vec3 vViewPosition;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\ngl_FragColor = vec4( vColor, opacity );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n}");var jp=function(e){function t(){e.apply(this,arguments),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Op),Zp=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="surface",this.parameters=Object.assign({isolevelType:{type:"select",options:{value:"value",sigma:"sigma"}},isolevel:{type:"number",precision:2,max:1e3,min:-1e3},negateIsolevel:{type:"boolean"},isolevelScroll:{type:"boolean"},smooth:{type:"integer",precision:1,max:10,min:0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},boxSize:{type:"integer",precision:1,max:100,min:0},colorVolume:{type:"hidden"},contour:{type:"boolean",rebuild:!0},useWorker:{type:"boolean",rebuild:!0},wrap:{type:"boolean",rebuild:!0}},this.parameters),t instanceof kp?(this.surface=void 0,this.volume=t):(this.surface=t,this.volume=void 0),this.boxCenter=new H,this.__boxCenter=new H,this.box=new K,this.__box=new K,this._position=new H,this.setBox=function(){this._position.copy(n.translationGroup.position).negate(),this._position.equals(this.boxCenter)||this.setParameters({boxCenter:this._position})},this.toBePrepared=!0,this.viewer.signals.ticked.add(this.setBox,this),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"uniform"),n.colorValue=Sa(n.colorValue,14540253),this.isolevelType=Sa(n.isolevelType,"sigma"),this.isolevel=Sa(n.isolevel,2),this.negateIsolevel=Sa(n.negateIsolevel,!1),this.isolevelScroll=Sa(n.isolevelScroll,!1),this.smooth=Sa(n.smooth,0),this.background=Sa(n.background,!1),this.opaqueBack=Sa(n.opaqueBack,!0),this.boxSize=Sa(n.boxSize,0),this.colorVolume=Sa(n.colorVolume,void 0),this.contour=Sa(n.contour,!1),this.useWorker=Sa(n.useWorker,!0),this.wrap=Sa(n.wrap,!1),e.prototype.init.call(this,n),this.build()},t.prototype.attach=function(e){var t=this;this.bufferList.forEach((function(e){t.viewer.add(e)})),this.setVisibility(this.visible),e()},t.prototype.prepare=function(e){var t,n=this;if(this.volume)if(t="sigma"===this.isolevelType?this.volume.getValueForSigma(this.isolevel):this.isolevel,this.negateIsolevel&&(t*=-1),!this.surface||this.__isolevel!==t||this.__smooth!==this.smooth||this.__contour!==this.contour||this.__wrap!==this.wrap||this.__boxSize!==this.boxSize||this.boxSize>0&&!this.__boxCenter.equals(this.boxCenter)){this.__isolevel=t,this.__smooth=this.smooth,this.__contour=this.contour,this.__wrap=this.wrap,this.__boxSize=this.boxSize,this.__boxCenter.copy(this.boxCenter),this.__box.copy(this.box);var r=function(t){n.surface=t,e()};this.useWorker?this.volume.getSurfaceWorker(t,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap,r):r(this.volume.getSurface(t,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap))}else e();else e()},t.prototype.create=function(){var e,t={position:this.surface.getPosition(),color:this.surface.getColor(this.getColorParams()),index:this.surface.getIndex()};if(this.contour)e=new jp(t,this.getBufferParams({wireframe:!1}));else{Object.assign(t,{normal:this.surface.getNormal(),picking:this.surface.getPicking()});var n=new Dp(t,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1}));e=new zp(n)}this.bufferList.push(e)},t.prototype.update=function(e){if(0!==this.bufferList.length){var t={};(e=e||{}).position&&(t.position=this.surface.getPosition()),e.color&&(t.color=this.surface.getColor(this.getColorParams())),e.index&&(t.index=this.surface.getIndex()),e.normal&&(t.normal=this.surface.getNormal()),this.bufferList.forEach((function(e){e.setAttributes(t)}))}},t.prototype.setParameters=function(t,n,r){return t&&void 0!==t.isolevelType&&this.volume&&("value"===this.isolevelType&&"sigma"===t.isolevelType?this.isolevel=this.volume.getSigmaForValue(this.isolevel):"sigma"===this.isolevelType&&"value"===t.isolevelType&&(this.isolevel=this.volume.getValueForSigma(this.isolevel)),this.isolevelType=t.isolevelType),t&&t.boxCenter&&(this.boxCenter.copy(t.boxCenter),delete t.boxCenter),t&&t.wireframe&&(t.contour||void 0===t.contour&&this.contour)&&(t.wireframe=!1),e.prototype.setParameters.call(this,t,n,r),this.volume&&this.volume.getBox(this.boxCenter,this.boxSize,this.box),t&&void 0!==t.colorVolume&&n&&(n.color=!0),this.surface&&(void 0!==t.isolevel||void 0!==t.negateIsolevel||void 0!==t.smooth||void 0!==t.wrap||void 0!==t.boxSize||this.boxSize>0&&!this.__box.equals(this.box))&&this.build({position:!0,color:!0,index:!0,normal:!this.contour}),this},t.prototype.getColorParams=function(){var t=e.prototype.getColorParams.call(this);return t.volume=this.colorVolume,t},t.prototype.dispose=function(){this.viewer.signals.ticked.remove(this.setBox,this),e.prototype.dispose.call(this)},t}(Mu),Hp=function(){};Hp.zoomScroll=function(e,t){e.trackballControls.zoom(t)},Hp.clipNearScroll=function(e,t){var n=e.getParameters();e.setParameters({clipNear:n.clipNear+t/10})},Hp.focusScroll=function(e,t){var n=2*e.getParameters().clipNear,r=Math.sign(t)*function(e,t,n){if(e>t)return e;var r=e/t;return((2*n-t)*r+(2*t-3*n))*r*r+n}((100-n)/10,5,.2);e.setFocus(n+r)},Hp.zoomFocusScroll=function(e,t){e.trackballControls.zoom(t);var n=e.viewer.camera.position.z;e.setFocus(100-Math.abs(n/8))},Hp.isolevelScroll=function(e,t){var n=Math.sign(t)/10;e.eachRepresentation((function(e,t){if(e.repr instanceof Zp){var r=e.getParameters();r.isolevelScroll&&e.setParameters({isolevel:r.isolevel+n})}}))},Hp.panDrag=function(e,t,n){e.trackballControls.pan(t,n)},Hp.rotateDrag=function(e,t,n){e.trackballControls.rotate(t,n)},Hp.zRotateDrag=function(e,t,n){e.trackballControls.zRotate(t,n)},Hp.zoomDrag=function(e,t,n){e.trackballControls.zoom((t+n)/-2)},Hp.zoomFocusDrag=function(e,t,n){e.trackballControls.zoom((t+n)/-2);var r=e.viewer.camera.position.z;e.setFocus(100-Math.abs(r/8))},Hp.panComponentDrag=function(e,t,n){e.trackballControls.panComponent(t,n)},Hp.panAtomDrag=function(e,t,n){e.trackballControls.panAtom(t,n)},Hp.rotateComponentDrag=function(e,t,n){e.trackballControls.rotateComponent(t,n)},Hp.movePick=function(e,t){t&&e.animationControls.move(t.position.clone())},Hp.tooltipPick=function(e,t){var n=e.tooltip;if(e.getParameters().tooltip&&t){var r=t.mouse.position;n.innerText=t.getLabel(),n.style.bottom=window.innerHeight-r.y+3+"px",n.style.left=r.x+3+"px",n.style.display="block"}else n.style.display="none"},Hp.measurePick=function(e,t){if(t&&(t.atom||t.bond)){var n=t.atom||t.closestBondAtom;t.component.measurePick(n)}else e.measureClear()};var Up={default:[["scroll",Hp.zoomScroll],["scroll-shift",Hp.focusScroll],["scroll-ctrl",Hp.isolevelScroll],["scroll-shift-ctrl",Hp.zoomFocusScroll],["drag-left",Hp.rotateDrag],["drag-right",Hp.panDrag],["drag-ctrl-left",Hp.panDrag],["drag-ctrl-right",Hp.zRotateDrag],["drag-shift-left",Hp.zoomDrag],["drag-middle",Hp.zoomFocusDrag],["drag-ctrl-shift-right",Hp.panComponentDrag],["drag-ctrl-shift-left",Hp.rotateComponentDrag],["clickPick-right",Hp.measurePick],["clickPick-ctrl-left",Hp.measurePick],["clickPick-middle",Hp.movePick],["clickPick-left",Hp.movePick],["hoverPick",Hp.tooltipPick]],pymol:[["drag-left",Hp.rotateDrag],["drag-middle",Hp.panDrag],["drag-right",Hp.zoomDrag],["drag-shift-right",Hp.focusScroll],["clickPick-ctrl+shift-middle",Hp.movePick],["hoverPick",Hp.tooltipPick]],coot:[["scroll",Hp.isolevelScroll],["drag-left",Hp.rotateDrag],["drag-middle",Hp.panDrag],["drag-ctrl-left",Hp.panDrag],["drag-right",Hp.zoomFocusDrag],["drag-ctrl-right",Hp.focusScroll],["clickPick-middle",Hp.movePick],["hoverPick",Hp.tooltipPick]],astexviewer:[["drag-left",Hp.rotateDrag],["drag-ctrl-left",Hp.panDrag],["drag-shift-left",Hp.zoomDrag],["scroll",Hp.focusScroll],["clickPick-middle",Hp.movePick],["hoverPick",Hp.tooltipPick]]};function Vp(e){var t=e.split(/[-+]/),n="";t.includes("scroll")&&(n="scroll"),t.includes("drag")&&(n="drag"),t.includes("click")&&(n="click"),t.includes("doubleClick")&&(n="doubleClick"),t.includes("hover")&&(n="hover"),t.includes("clickPick")&&(n="clickPick"),t.includes("hoverPick")&&(n="hoverPick");var r=0;t.includes("alt")&&(r+=1),t.includes("ctrl")&&(r+=2),t.includes("meta")&&(r+=4),t.includes("shift")&&(r+=8);var i=0;return t.includes("left")&&(i+=1),t.includes("right")&&(i+=2),t.includes("middle")&&(i+=4),[n,r,i]}var Gp=function(e,t){void 0===t&&(t={}),this.stage=e,this.actionList=[],this.mouse=e.mouseObserver,this.disabled=t.disabled||!1,this.preset(t.preset||"default")};Gp.prototype.run=function(e){for(var t=this,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];if(!this.disabled){var i=this.mouse.key||0,o=this.mouse.buttons||0;this.actionList.forEach((function(r){r.type===e&&r.key===i&&r.button===o&&r.callback.apply(r,[t.stage].concat(n))}))}},Gp.prototype.add=function(e,t){var n=Vp(e),r=n[0],i=n[1],o=n[2];this.actionList.push({type:r,key:i,button:o,callback:t})},Gp.prototype.remove=function(e,t){var n=e.includes("*"),r=Vp(e),i=r[0],o=r[1],a=r[2],s=this.actionList.filter((function(e){return!((e.type===i||n&&""===i)&&(e.key===o||n&&0===o)&&(e.button===a||n&&0===a)&&(e.callback===t||void 0===t))}));this.actionList=s},Gp.prototype.preset=function(e){var t=this;this.clear(),(Up[e]||[]).forEach((function(e){return t.add(e[0],e[1])}))},Gp.prototype.clear=function(){this.actionList.length=0};var Wp=function(){};Wp.autoView=function(e){e.autoView(1e3)},Wp.toggleAnimations=function(e){e.animationControls.toggle()},Wp.toggleRock=function(e){e.toggleRock()},Wp.toggleSpin=function(e){e.toggleSpin()},Wp.toggleAntialiasing=function(e){var t=e.getParameters();e.setParameters({sampleLevel:-1===t.sampleLevel?0:-1})};var $p={default:[["i",Wp.toggleSpin],["k",Wp.toggleRock],["p",Wp.toggleAnimations],["a",Wp.toggleAntialiasing],["r",Wp.autoView]]},qp=function(e,t){void 0===t&&(t={}),this.stage=e,this.actionList=[],this.disabled=t.disabled||!1,this.preset(t.preset||"default")};qp.prototype.run=function(e){var t=this;this.disabled||this.actionList.forEach((function(n){n.key===e&&n.callback(t.stage)}))},qp.prototype.add=function(e,t){this.actionList.push({key:e,callback:t})},qp.prototype.remove=function(e,t){var n=this.actionList.filter((function(n){return!(n.key===e&&(n.callback===t||void 0===t))}));this.actionList=n},qp.prototype.preset=function(e){var t=this;this.clear(),($p[e]||[]).forEach((function(e){return t.add(e[0],e[1])}))},qp.prototype.clear=function(){this.actionList.length=0};var Yp=function(e){this.stage=e,this.stage=e,this.mouse=e.mouseObserver,this.controls=e.mouseControls,this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this)};Yp.prototype._onClick=function(e,t){var n=this.stage.pickingControls.pick(e,t);this.stage.signals.clicked.dispatch(n),this.controls.run("clickPick",n)},Yp.prototype._onHover=function(e,t){var n=this.stage.pickingControls.pick(e,t);n&&this.mouse.down.equals(this.mouse.position)&&(this.stage.transformComponent=n.component,this.stage.transformAtom=n.atom),this.stage.signals.hovered.dispatch(n),this.controls.run("hoverPick",n)},Yp.prototype.dispose=function(){this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)};var Xp=function(e){this.stage=e,this.stage=e,this.mouse=e.mouseObserver,this.controls=e.mouseControls,this.mouse.signals.moved.add(this._onMove,this),this.mouse.signals.scrolled.add(this._onScroll,this),this.mouse.signals.dragged.add(this._onDrag,this),this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this),this.mouse.signals.doubleClicked.add(this._onDblclick,this)};Xp.prototype._onMove=function(){this.stage.tooltip.style.display="none"},Xp.prototype._onScroll=function(e){this.controls.run("scroll",e)},Xp.prototype._onDrag=function(e,t){this.controls.run("drag",e,t)},Xp.prototype._onClick=function(e,t){this.controls.run("click",e,t)},Xp.prototype._onDblclick=function(e,t){this.controls.run("doubleClick",e,t)},Xp.prototype._onHover=function(e,t){this.controls.run("hover",e,t)},Xp.prototype.dispose=function(){this.mouse.signals.moved.remove(this._onMove,this),this.mouse.signals.scrolled.remove(this._onScroll,this),this.mouse.signals.dragged.remove(this._onDrag,this),this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)};var Kp=function(e){this.stage=e,this.viewer=e.viewer,this.animationControls=e.animationControls,this.viewer.signals.ticked.add(this._onTick,this)};Kp.prototype._onTick=function(e){this.animationControls.run(e)},Kp.prototype.dispose=function(){this.viewer.signals.ticked.remove(this._onTick,this)};var Jp=!!Js&&{passive:!0},Qp=function(e){this.stage=e,this.stage=e,this.controls=e.keyControls,this.domElement=e.viewer.renderer.domElement,this.domElement.setAttribute("tabIndex","-1"),this.domElement.style.outline="none",this._focusDomElement=this._focusDomElement.bind(this),this._onKeydown=this._onKeydown.bind(this),this._onKeyup=this._onKeyup.bind(this),this._onKeypress=this._onKeypress.bind(this),this.domElement.addEventListener("mousedown",this._focusDomElement),this.domElement.addEventListener("touchstart",this._focusDomElement,Jp),this.domElement.addEventListener("keydown",this._onKeydown),this.domElement.addEventListener("keyup",this._onKeyup),this.domElement.addEventListener("keypress",this._onKeypress)};Qp.prototype._onKeydown=function(){},Qp.prototype._onKeyup=function(){},Qp.prototype._onKeypress=function(e){var t;t="key"in KeyboardEvent.prototype?e.key:String.fromCharCode(e.which||e.keyCode),this.controls.run(t)},Qp.prototype._focusDomElement=function(){this.domElement.focus()},Qp.prototype.dispose=function(){this.domElement.removeEventListener("mousedown",this._focusDomElement),this.domElement.removeEventListener("touchstart",this._focusDomElement,Jp),this.domElement.removeEventListener("keydown",this._onKeypress),this.domElement.removeEventListener("keyup",this._onKeypress),this.domElement.removeEventListener("keypress",this._onKeypress)};var eh=function(e,t,n,r){void 0===r&&(r={}),this.component=e,this.position=t,this.offsetX=Sa(r.offsetX,0),this.offsetY=Sa(r.offsetY,0),this.visible=Sa(r.visible,!0),this.stage=e.stage,this.viewer=e.stage.viewer,this._viewerPosition=new H,this._updateViewerPosition(),this._canvasPosition=new B,this._cameraPosition=new H,this.element=document.createElement("div"),Object.assign(this.element.style,{display:"block",position:"absolute",pointerEvents:"none",whiteSpace:"nowrap",left:"-10000px"}),this.viewer.wrapper.appendChild(this.element),this.setContent(n),this.updateVisibility(),this.viewer.signals.rendered.add(this._update,this),this.component.signals.matrixChanged.add(this._updateViewerPosition,this)};eh.prototype.setContent=function(e){var t=this.element.style.display;if("none"===t&&(this.element.style.left="-10000px",this.element.style.display="block"),e instanceof HTMLElement)this.element.appendChild(e);else{var n=document.createElement("div");n.innerText=e,Object.assign(n.style,{backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),this.element.appendChild(n)}this._clientRect=this.element.getBoundingClientRect(),"none"===t&&(this.element.style.display=t)},eh.prototype.setVisibility=function(e){this.visible=e,this.updateVisibility()},eh.prototype.getVisibility=function(){return this.visible&&this.component.parameters.visible},eh.prototype.updateVisibility=function(){this.element.style.display=this.getVisibility()?"block":"none"},eh.prototype._updateViewerPosition=function(){this._viewerPosition.copy(this.position).applyMatrix4(this.component.matrix)},eh.prototype._update=function(){if(this.getVisibility()){var e=this.element.style,t=this._canvasPosition,n=this._viewerPosition,r=this._clientRect;if(this._cameraPosition.copy(n).add(this.viewer.translationGroup.position).applyMatrix4(this.viewer.rotationGroup.matrix).sub(this.viewer.camera.position),this._cameraPosition.z<0)e.display="none";else{e.display="block";var i=this._cameraPosition.length(),o=this.viewer.scene.fog;e.opacity=(1-ns(o.near,o.far,i)).toString(),e.zIndex=Math.round(100*(o.far-i)).toString(),this.stage.viewerControls.getPositionOnCanvas(n,t),e.bottom=this.offsetX+t.y+r.height/2+"px",e.left=this.offsetY+t.x-r.width/2+"px"}}},eh.prototype.dispose=function(){this.viewer.wrapper.removeChild(this.element),this.viewer.signals.ticked.remove(this._update,this),this.component.signals.matrixChanged.remove(this._updateViewerPosition,this)};var th=new j,nh=new H,rh=new Z,ih=function(e){this.component=e,this.signals={changed:new fs},this.stage=e.stage,this.viewer=e.stage.viewer},oh={position:{configurable:!0},rotation:{configurable:!0}};oh.position.get=function(){return this.component.position},oh.rotation.get=function(){return this.component.quaternion},ih.prototype.changed=function(){this.component.updateMatrix(),this.viewer.requestRender(),this.signals.changed.dispatch()},ih.prototype.spin=function(e,t){th.getInverse(this.viewer.rotationGroup.matrix),nh.copy(Za(e)).applyMatrix4(th),th.extractRotation(this.component.transform),th.premultiply(this.viewer.rotationGroup.matrix),th.getInverse(th),nh.copy(Za(e)),nh.applyMatrix4(th),th.makeRotationAxis(nh,t),rh.setFromRotationMatrix(th),this.component.quaternion.premultiply(rh),this.changed()},Object.defineProperties(ih.prototype,oh);var ah={"":"",vdw:"by vdW radius",covalent:"by covalent radius",sstruc:"by secondary structure",bfactor:"by bfactor",size:"size",data:"data",explicit:"explicit"},sh=function(e){void 0===e&&(e={}),this.max=10,this.type=Sa(e.type,"size"),this.scale=Sa(e.scale,1),this.size=Sa(e.size,1),this.data=Sa(e.data,{})};sh.prototype.atomRadius=function(e){var t;switch(this.type){case"vdw":t=e.vdw;break;case"covalent":t=e.covalent;break;case"bfactor":t=e.bfactor||1;break;case"sstruc":var n=e.sstruc;t="h"===n||"g"===n||"i"===n||"e"===n||"b"===n?.25:Yd.includes(e.atomname)?.4:.1;break;case"data":t=Sa(this.data[e.index],1);break;case"explicit":null===(t=e.radius)&&(t=this.size);break;default:t=this.size}return Math.min(t*this.scale,this.max)},sh.types=ah;var lh=new H(-1,-1,-1),ch=new j,uh=function(e){var t=e.rows,n=t/3,r=new tp(t,3),i=new tp(3,3),o=new tp(1,3),a=new tp(3,3),s=new tp(3,3),l=op(e);ap(e,l),np(r,e),rp(i,r,r),cp(i,o,a,s);var c=new H(l[0],l[1],l[2]),u=new H(a.data[0],a.data[3],a.data[6]),d=new H(a.data[1],a.data[4],a.data[7]),f=new H(a.data[2],a.data[5],a.data[8]),p=u.clone().multiplyScalar(Math.sqrt(o.data[0]/n)),h=d.clone().multiplyScalar(Math.sqrt(o.data[1]/n)),m=f.clone().multiplyScalar(Math.sqrt(o.data[2]/n));this.begA=c.clone().sub(p),this.endA=c.clone().add(p),this.begB=c.clone().sub(h),this.endB=c.clone().add(h),this.begC=c.clone().sub(m),this.endC=c.clone().add(m),this.center=c,this.vecA=p,this.vecB=h,this.vecC=m,this.normVecA=u,this.normVecB=d,this.normVecC=f};uh.prototype.getBasisMatrix=function(e){void 0===e&&(e=new j);var t=e;return t.makeBasis(this.normVecB,this.normVecA,this.normVecC),t.determinant()<0&&t.scale(lh),t},uh.prototype.getRotationQuaternion=function(e){void 0===e&&(e=new Z);var t=e;return t.setFromRotationMatrix(this.getBasisMatrix(ch)),t.inverse()},uh.prototype.getProjectedScaleForAtoms=function(e){var t=-1/0,n=-1/0,r=-1/0,i=-1/0,o=-1/0,a=-1/0,s=new H,l=new H,c=this.center,u=this.normVecA,d=this.normVecB,f=this.normVecC;return e.eachAtom((function(e){Pu(s.copy(e),u,c);var p=l.subVectors(s,c).normalize().dot(u),h=s.distanceTo(c);p>0?h>t&&(t=h):h>n&&(n=h),Pu(s.copy(e),d,c);var m=l.subVectors(s,c).normalize().dot(d),g=s.distanceTo(c);m>0?g>r&&(r=g):g>i&&(i=g),Pu(s.copy(e),f,c);var v=l.subVectors(s,c).normalize().dot(f),y=s.distanceTo(c);v>0?y>o&&(o=y):y>a&&(a=y)})),{d1a:t,d2a:r,d3a:o,d1b:-n,d2b:-i,d3b:-a}};var dh=function(e,t,n,r){this.volume=e,this.setFilter(t,n,r)},fh={header:{configurable:!0},matrix:{configurable:!0},normalMatrix:{configurable:!0},inverseMatrix:{configurable:!0},center:{configurable:!0},boundingBox:{configurable:!0},min:{configurable:!0},max:{configurable:!0},mean:{configurable:!0},rms:{configurable:!0}};fh.header.get=function(){return this.volume.header},fh.matrix.get=function(){return this.volume.matrix},fh.normalMatrix.get=function(){return this.volume.normalMatrix},fh.inverseMatrix.get=function(){return this.volume.inverseMatrix},fh.center.get=function(){return this.volume.center},fh.boundingBox.get=function(){return this.volume.boundingBox},fh.min.get=function(){return this.volume.min},fh.max.get=function(){return this.volume.max},fh.mean.get=function(){return this.volume.mean},fh.rms.get=function(){return this.volume.rms},dh.prototype._getFilterHash=function(e,t,n){return JSON.stringify([e,t,n])},dh.prototype.setFilter=function(e,t,n){isNaN(e)&&this.header&&(e=this.header.DMEAN+2*this.header.ARMS),e=void 0===e||isNaN(e)?-1/0:e,t=Sa(t,1/0),n=Sa(n,!1);var r=this.volume.data,i=this.volume.position,o=this.volume.atomindex,a=this._getFilterHash(e,t,n);if(a!==this._filterHash){if(e===-1/0&&t===1/0)this.data=r,this.position=i,this.atomindex=o;else{var s=r.length;this._dataBuffer||(this._dataBuffer=new ArrayBuffer(4*s),this._positionBuffer=new ArrayBuffer(3*s*4),o&&(this._atomindexBuffer=new ArrayBuffer(4*s)));var l,c=new Float32Array(this._dataBuffer),u=new Float32Array(this._positionBuffer);o&&(l=new Uint32Array(this._atomindexBuffer));for(var d=0,f=0;f<s;++f){var p=3*f,h=r[f];if(!n&&h>=e&&h<=t||n&&(h<e||h>t)){var m=3*d;c[d]=h,u[m+0]=i[p+0],u[m+1]=i[p+1],u[m+2]=i[p+2],o&&l&&(l[d]=o[f]),d+=1}}this.data=new Float32Array(this._dataBuffer,0,d),this.position=new Float32Array(this._positionBuffer,0,3*d),o&&(this.atomindex=new Int32Array(this._atomindexBuffer,0,d))}this._filterHash=a}},Object.defineProperties(dh.prototype,fh),dh.prototype.getValueForSigma=kp.prototype.getValueForSigma,dh.prototype.getSigmaForValue=kp.prototype.getSigmaForValue,dh.prototype.getDataAtomindex=kp.prototype.getDataAtomindex,dh.prototype.getDataPosition=kp.prototype.getDataPosition,dh.prototype.getDataColor=kp.prototype.getDataColor,dh.prototype.getDataPicking=kp.prototype.getDataPicking,dh.prototype.getDataSize=kp.prototype.getDataSize;var ph=function(e,t){var n=xd({nodeArray1:e.atomIndex1,nodeArray2:e.atomIndex2,edgeCount:e.count,nodeCount:t});this.countArray=n.countArray,this.offsetArray=n.offsetArray,this.indexArray=n.indexArray},hh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["atomIndex1",1,"int32"],["atomIndex2",1,"int32"],["bondOrder",1,"int8"]]},t.prototype.addBond=function(e,t,n){this.growIfFull();var r=this.count,i=e.index,o=t.index;i<o?(this.atomIndex1[r]=i,this.atomIndex2[r]=o):(this.atomIndex2[r]=i,this.atomIndex1[r]=o),n&&(this.bondOrder[r]=n),this.count+=1},t.prototype.addBondIfConnected=function(e,t,n){return!!e.connectedTo(t)&&(this.addBond(e,t,n),!0)},Object.defineProperties(t.prototype,n),t}(gd),mh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["residueIndex",1,"uint32"],["atomTypeId",1,"uint16"],["x",1,"float32"],["y",1,"float32"],["z",1,"float32"],["serial",1,"int32"],["bfactor",1,"float32"],["altloc",1,"uint8"],["occupancy",1,"float32"]]},t.prototype.setAltloc=function(e,t){this.altloc[e]=t.charCodeAt(0)},t.prototype.getAltloc=function(e){var t=this.altloc[e];return t?String.fromCharCode(t):""},Object.defineProperties(t.prototype,n),t}(gd),gh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["chainIndex",1,"uint32"],["atomOffset",1,"uint32"],["atomCount",1,"uint16"],["residueTypeId",1,"uint16"],["resno",1,"int32"],["sstruc",1,"uint8"],["inscode",1,"uint8"]]},t.prototype.setSstruc=function(e,t){this.sstruc[e]=t.charCodeAt(0)},t.prototype.getSstruc=function(e){var t=this.sstruc[e];return t?String.fromCharCode(t):""},t.prototype.setInscode=function(e,t){this.inscode[e]=t.charCodeAt(0)},t.prototype.getInscode=function(e){var t=this.inscode[e];return t?String.fromCharCode(t):""},Object.defineProperties(t.prototype,n),t}(gd),vh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["entityIndex",1,"uint16"],["modelIndex",1,"uint16"],["residueOffset",1,"uint32"],["residueCount",1,"uint32"],["chainname",4,"uint8"],["chainid",4,"uint8"]]},t.prototype.setChainname=function(e,t){var n=4*e;this.chainname[n]=t.charCodeAt(0),this.chainname[n+1]=t.charCodeAt(1),this.chainname[n+2]=t.charCodeAt(2),this.chainname[n+3]=t.charCodeAt(3)},t.prototype.getChainname=function(e){for(var t="",n=0;n<4;++n){var r=this.chainname[4*e+n];if(!r)break;t+=String.fromCharCode(r)}return t},t.prototype.setChainid=function(e,t){var n=4*e;this.chainid[n]=t.charCodeAt(0),this.chainid[n+1]=t.charCodeAt(1),this.chainid[n+2]=t.charCodeAt(2),this.chainid[n+3]=t.charCodeAt(3)},t.prototype.getChainid=function(e){for(var t="",n=0;n<4;++n){var r=this.chainid[4*e+n];if(!r)break;t+=String.fromCharCode(r)}return t},Object.defineProperties(t.prototype,n),t}(gd),yh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["chainOffset",1,"uint32"],["chainCount",1,"uint32"]]},Object.defineProperties(t.prototype,n),t}(gd),bh=function(e){this.polymer=e,this.size=e.residueCount};bh.prototype.getCenterIterator=function(e){void 0===e&&(e=0);var t=this.getPosition().center,n=t.length/3,r=0,i=-1,o=[new H,new H,new H,new H];return{size:n,next:function(){var e=this.get(i);return i+=1,e},get:function(i){i=Math.min(n-1,Math.max(0,i));var a=o[r%4],s=3*i;if(a.fromArray(t,s),e){for(var l=Math.min(e,i,n-i-1),c=1;c<=l;++c){var u=3*c,d=(l+1-c)/(l+1);a.x+=d*t[s-u+0]+d*t[s+u+0],a.y+=d*t[s-u+1]+d*t[s+u+1],a.z+=d*t[s-u+2]+d*t[s+u+2]}a.x/=l+1,a.y/=l+1,a.z/=l+1}return r+=1,a},reset:function(){r=0,i=-1}}},bh.prototype.getColor=function(e){var t=this.polymer,n=t.structure,r=t.residueCount,i=t.residueIndexStart,o=new Float32Array(3*r),a=e||{};a.structure=n;for(var s=pl.getScheme(a),l=n.getResidueProxy(),c=n.getAtomProxy(),u=0;u<r;++u)l.index=i+u,c.index=l.traceAtomIndex,s.atomColorToArray(c,o,3*u);return{color:o}},bh.prototype.getPicking=function(){for(var e=this.polymer,t=e.structure,n=e.residueCount,r=e.residueIndexStart,i=new Float32Array(n),o=t.getResidueProxy(),a=0;a<n;++a)o.index=r+a,i[a]=o.traceAtomIndex;return{picking:new Pf(i,t)}},bh.prototype.getSize=function(e){for(var t=this.polymer,n=t.structure,r=t.residueCount,i=t.residueIndexStart,o=new Float32Array(r),a=new sh(e),s=n.getResidueProxy(),l=n.getAtomProxy(),c=0;c<r;++c)s.index=i+c,l.index=s.traceAtomIndex,o[c]=a.atomRadius(l);return{size:o}},bh.prototype.getPosition=function(){for(var e=this.polymer,t=e.structure,n=e.residueCount,r=n-3,i=new Float32Array(3*n),o=new Float32Array(3*n),a=new Float32Array(n),s=new Float32Array(n),l=new Float32Array(n),c=new Float32Array(n),u=new Float32Array(3*n),d=new H,f=new H,p=new H,h=new H,m=new H,g=new H,v=new H,y=new H,b=new H,x=new H,w=new H,_=new H(0,0,0),S="trace",C=t.getAtomProxy(),k=t.getAtomProxy(e.getAtomIndexByType(0,S)),M=t.getAtomProxy(e.getAtomIndexByType(1,S)),T=t.getAtomProxy(e.getAtomIndexByType(2,S)),A=0;A<r;++A){C.index=k.index,k.index=M.index,M.index=T.index,T.index=e.getAtomIndexByType(A+3,S);var E=3*A;d.subVectors(k,C),f.subVectors(M,k),p.subVectors(T,M),h.subVectors(d,f),m.subVectors(f,p),b.crossVectors(h,m).normalize(),b.toArray(o,E),A>0&&(a[A]=b.angleTo(x));var P=Math.cos(h.angleTo(m));c[A]=180/Math.PI*Math.acos(P);var R=h.length(),O=m.length();s[A]=Math.sqrt(O*R)/Math.max(2,2*(1-P)),l[A]=Math.abs(f.dot(b)),g.copy(h).multiplyScalar(s[A]/R),v.copy(m).multiplyScalar(s[A]/O),g.subVectors(k,g),v.subVectors(M,v),g.toArray(i,E+3),v.toArray(i,E+6),w.subVectors(C,_),w.toArray(u,E),x.copy(b),_.copy(g)}g.fromArray(i,3),v.fromArray(i,6),b.subVectors(g,v).normalize(),C.index=e.getAtomIndexByType(0,S),_.copy(C),y.copy(C),Pu(y,b,g),y.toArray(i,0),w.subVectors(_,g),w.toArray(u,0),g.fromArray(i,3*n-6),v.fromArray(i,3*n-9),b.subVectors(g,v).normalize(),C.index=e.getAtomIndexByType(n-1,S),_.copy(C),y.copy(C),Pu(y,b,g),y.toArray(i,3*n-3);for(var I=n-3;I<n;++I)g.fromArray(i,3*I),C.index=e.getAtomIndexByType(I,S),_.copy(C),w.subVectors(_,g),w.toArray(u,3*I);var L=new Float32Array(n),D=new Float32Array(n),N=new Float32Array(n),F=new Float32Array(n);L[1]=s[0],D[1]=c[0],N[1]=s[0];for(var z=2;z<n-2;++z)L[z]=.5*(s[z-2]+s[z-1]),D[z]=.5*(c[z-2]+c[z-1]),N[z]=.5*(l[z-2]+l[z-1]),g.fromArray(o,3*(z-2)),v.fromArray(o,3*(z-1)),F[z]=180/Math.PI*Math.acos(Math.cos(g.angleTo(v)));L[n-2]=s[n-4],D[n-2]=c[n-4],N[n-2]=l[n-4];var B=new Float32Array(3*n);uc(o,B,0,0,3),uc(o,B,0,3,3);for(var j=2;j<n-2;++j)g.fromArray(o,3*(j-2)),v.fromArray(o,3*(j-1)),b.addVectors(v,g).multiplyScalar(.5).normalize(),b.toArray(B,3*j);return uc(o,B,3*n-12,3*n-6,3),uc(o,B,3*n-12,3*n-3,3),{center:i,axis:B,bending:F,radius:L,rise:N,twist:D,resdir:u}};var xh=function(e){this.polymer=e,this.helixorient=new bh(e),this.position=this.helixorient.getPosition()};xh.prototype.getAxis=function(e,t,n,r,i){e=e||30,t=t||2.5,n=void 0!==n&&n;var o=this.polymer,a=o.structure,s=o.residueCount,l=o.residueIndexStart,c=this.position,u=r||{};u.structure=a;for(var d,f,p=pl.getScheme(u),h=new sh(i),m=0,g=0,v=[],y=[],b=[],x=[],w=[],_=[],S=[],C=[],k=[],M=new Float32Array(3*s),T=new Float32Array(3*s),A=new H,E=new H,P=a.getResidueProxy(),R=a.getResidueProxy(),O=a.getAtomProxy(),I=new H,L=new H,D=!1,N=0;N<s;++N)if(P.index=l+N,I.fromArray(c.center,3*N),N===s-1?D=!0:(R.index=l+N+1,L.fromArray(c.center,3*N+3),(n&&P.sstruc!==R.sstruc||I.distanceTo(L)>t||c.bending[N]>e)&&(D=!0)),D){if(N-m<4){m=N,D=!1;continue}O.index=P.traceAtomIndex,M=c.axis.subarray(3*m+3,3*N),T=c.center.subarray(3*m,3*N+3),d=Eu(M).normalize(),f=Eu(T),A.fromArray(T),Pu(A,d,f),E.fromArray(T,T.length-3),Pu(E,d,f),d.subVectors(E,A),d.toArray(v,g),f.toArray(y,g),A.toArray(b,g),E.toArray(x,g),p.atomColorToArray(O,w,g),_.push(O.index),S.push(h.atomRadius(O)),C.push(l+m),k.push(l+N+1-m),g+=3,m=N,D=!1}var F=new Float32Array(_);return{axis:new Float32Array(v),center:new Float32Array(y),begin:new Float32Array(b),end:new Float32Array(x),color:new Float32Array(w),picking:new Pf(F,a),size:new Float32Array(S),residueOffset:C,residueCount:k}};var wh=function(e){this.scoreFunction=e,this.content=[],this.scoreFunction=e};wh.prototype.push=function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},wh.prototype.pop=function(){var e=this.content[0],t=this.content.pop();return t&&this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},wh.prototype.peek=function(){return this.content[0]},wh.prototype.remove=function(e){for(var t=this,n=this.content.length,r=0;r<n;r++)if(t.content[r]===e){var i=t.content.pop();return void(i&&r!==n-1&&(t.content[r]=i,t.scoreFunction(i)<t.scoreFunction(e)?t.bubbleUp(r):t.sinkDown(r)))}throw new Error("Node not found.")},wh.prototype.size=function(){return this.content.length},wh.prototype.bubbleUp=function(e){for(var t=this,n=this.content[e];e>0;){var r=Math.floor((e+1)/2)-1,i=t.content[r];if(!(t.scoreFunction(n)<t.scoreFunction(i)))break;t.content[r]=n,t.content[e]=i,e=r}},wh.prototype.sinkDown=function(e){for(var t=this,n=this.content.length,r=this.content[e],i=this.scoreFunction(r),o=0;;){var a=2*(e+1),s=a-1,l=null;if(s<n){var c=t.content[s];(o=t.scoreFunction(c))<i&&(l=s)}if(a<n){var u=t.content[a];t.scoreFunction(u)<(null===l?i:o)&&(l=a)}if(null===l)break;t.content[e]=t.content[l],t.content[l]=r,e=l}};var _h=function(e,t){this.points=e,this.metric=t,this.maxDepth=0,this.currentNode=0;for(var n=e.length/3,r=new Uint32Array(n),i=0;i<n;++i)r[i]=i;this.indices=r,this.nodes=new Int32Array(4*n),this.rootIndex=this.buildTree(0,-1,0,n)};_h.prototype.buildTree=function(e,t,n,r){e>this.maxDepth&&(this.maxDepth=e);var i=r-n;if(0===i)return-1;var o=4*this.currentNode,a=this.nodes;if(this.currentNode+=1,1===i)return a[o]=n,a[o+1]=-1,a[o+2]=-1,a[o+3]=t,o;for(var s,l,c,u,d,f=this.indices,p=this.points,h=n+Math.floor(i/2),m=e%3,g=n,v=r-1;v>g;){for(u=p[3*f[c=g+v>>1]+m],l=f[c],f[c]=f[v],f[v]=l,d=g,s=g;s<v;++s)p[3*f[s]+m]<u&&(l=f[d],f[d]=f[s],f[s]=l,++d);if(l=f[v],f[v]=f[d],f[d]=l,h===(c=d))break;h<c?v=c-1:g=c+1}return a[o]=h,a[o+1]=this.buildTree(e+1,o,n,h),a[o+2]=this.buildTree(e+1,o,h+1,r),a[o+3]=t,o},_h.prototype.getNodeDepth=function(e){var t=this.nodes[e+3];return-1===t?0:this.getNodeDepth(t)+1},_h.prototype.nearest=function(e,t,n){var r=this,i=new wh((function(e){return-e[1]})),o=this.nodes,a=this.points,s=this.indices;!function l(c){var u,d,f=r.getNodeDepth(c)%3,p=3*s[o[c]],h=[a[p+0],a[p+1],a[p+2]],m=r.metric(e,h);function g(e,n){i.push([e,n]),i.size()>t&&i.pop()}var v=o[c+1],y=o[c+2];if(-1!==y||-1!==v){l(u=-1===y?v:-1===v?y:e[f]<=a[p+f]?v:y),(i.size()<t||m<i.peek()[1])&&m<=n&&g(c,m);for(var b=[],x=0;x<3;x+=1)b[x]=x===f?e[x]:a[p+x];var w=r.metric(b,h);(i.size()<t||Math.abs(w)<i.peek()[1])&&Math.abs(w)<=n&&-1!==(d=u===v?y:v)&&l(d)}else(i.size()<t||m<i.peek()[1])&&m<=n&&g(c,m)}(this.rootIndex);for(var l=[],c=0,u=Math.min(i.size(),t);c<u;c+=1)l.push(i.content[c]);return l},_h.prototype.verify=function(e,t){void 0===t&&(t=0);var n=1;if(void 0===e&&(e=this.rootIndex),-1===e)throw new Error("node is null");var r=t%3,i=this.nodes,o=this.points,a=this.indices,s=i[e+1],l=i[e+2];if(-1!==s){if(o[3*a[i[s]]+r]>o[3*a[i[e]]+r])throw new Error("left child is > parent!");n+=this.verify(s,t+1)}if(-1!==l){if(o[3*a[i[l]]+r]<o[3*a[i[e]]+r])throw new Error("right child is < parent!");n+=this.verify(l,t+1)}return n};var Sh=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueMap=e.residueMap,this.atomMap=e.atomMap},Ch={bondHash:{configurable:!0},entity:{configurable:!0},entityIndex:{configurable:!0},modelIndex:{configurable:!0},chainIndex:{configurable:!0},residue:{configurable:!0},residueIndex:{configurable:!0},sstruc:{configurable:!0},inscode:{configurable:!0},resno:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0},residueType:{configurable:!0},atomType:{configurable:!0},residueAtomOffset:{configurable:!0},resname:{configurable:!0},hetero:{configurable:!0},atomname:{configurable:!0},number:{configurable:!0},element:{configurable:!0},vdw:{configurable:!0},covalent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},z:{configurable:!0},serial:{configurable:!0},bfactor:{configurable:!0},occupancy:{configurable:!0},altloc:{configurable:!0},partialCharge:{configurable:!0},radius:{configurable:!0},formalCharge:{configurable:!0},aromatic:{configurable:!0},bondCount:{configurable:!0}};function kh(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Mh(e,t){return Math.sqrt(kh(e,t))}Ch.bondHash.get=function(){return this.structure.bondHash},Ch.entity.get=function(){return this.structure.entityList[this.entityIndex]},Ch.entityIndex.get=function(){return this.chainStore.entityIndex[this.chainIndex]},Ch.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},Ch.chainIndex.get=function(){return this.residueStore.chainIndex[this.residueIndex]},Ch.residue.get=function(){return console.warn("residue - might be expensive"),this.structure.getResidueProxy(this.residueIndex)},Ch.residueIndex.get=function(){return this.atomStore.residueIndex[this.index]},Ch.residueIndex.set=function(e){this.atomStore.residueIndex[this.index]=e},Ch.sstruc.get=function(){return this.residueStore.getSstruc(this.residueIndex)},Ch.inscode.get=function(){return this.residueStore.getInscode(this.residueIndex)},Ch.resno.get=function(){return this.residueStore.resno[this.residueIndex]},Ch.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},Ch.chainid.get=function(){return this.chainStore.getChainid(this.chainIndex)},Ch.residueType.get=function(){return this.residueMap.get(this.residueStore.residueTypeId[this.residueIndex])},Ch.atomType.get=function(){return this.atomMap.get(this.atomStore.atomTypeId[this.index])},Ch.residueAtomOffset.get=function(){return this.residueStore.atomOffset[this.residueIndex]},Ch.resname.get=function(){return this.residueType.resname},Ch.hetero.get=function(){return this.residueType.hetero},Ch.atomname.get=function(){return this.atomType.atomname},Ch.number.get=function(){return this.atomType.number},Ch.element.get=function(){return this.atomType.element},Ch.vdw.get=function(){return this.atomType.vdw},Ch.covalent.get=function(){return this.atomType.covalent},Ch.x.get=function(){return this.atomStore.x[this.index]},Ch.x.set=function(e){this.atomStore.x[this.index]=e},Ch.y.get=function(){return this.atomStore.y[this.index]},Ch.y.set=function(e){this.atomStore.y[this.index]=e},Ch.z.get=function(){return this.atomStore.z[this.index]},Ch.z.set=function(e){this.atomStore.z[this.index]=e},Ch.serial.get=function(){return this.atomStore.serial[this.index]},Ch.serial.set=function(e){this.atomStore.serial[this.index]=e},Ch.bfactor.get=function(){return this.atomStore.bfactor[this.index]},Ch.bfactor.set=function(e){this.atomStore.bfactor[this.index]=e},Ch.occupancy.get=function(){return this.atomStore.occupancy[this.index]},Ch.occupancy.set=function(e){this.atomStore.occupancy[this.index]=e},Ch.altloc.get=function(){return this.atomStore.getAltloc(this.index)},Ch.altloc.set=function(e){this.atomStore.setAltloc(this.index,e)},Ch.partialCharge.get=function(){return this.atomStore.partialCharge?this.atomStore.partialCharge[this.index]:null},Ch.partialCharge.set=function(e){this.atomStore.partialCharge&&(this.atomStore.partialCharge[this.index]=e)},Ch.radius.get=function(){return this.atomStore.radius?this.atomStore.radius[this.index]:null},Ch.radius.set=function(e){this.atomStore.radius&&(this.atomStore.radius[this.index]=e)},Ch.formalCharge.get=function(){return this.atomStore.formalCharge?this.atomStore.formalCharge[this.index]:null},Ch.formalCharge.set=function(e){this.atomStore.formalCharge&&(this.atomStore.formalCharge[this.index]=e)},Ch.aromatic.get=function(){return this.atomStore.aromatic?this.atomStore.aromatic[this.index]:this.residueType.isAromatic(this)?1:0},Ch.aromatic.set=function(e){this.atomStore.aromatic&&(this.atomStore.aromatic[this.index]=e)},Ch.bondCount.get=function(){return this.bondHash.countArray[this.index]},Sh.prototype.eachBond=function(e,t){t=t||this.structure._bp;for(var n=this.index,r=this.bondHash,i=r.indexArray,o=r.countArray[n],a=r.offsetArray[n],s=0;s<o;++s)t.index=i[a+s],e(t)},Sh.prototype.eachBondedAtom=function(e,t){var n=t||this.structure._ap,r=this.index;this.eachBond((function(t){n.index=r!==t.atomIndex1?t.atomIndex1:t.atomIndex2,e(n)})),this.index=r},Sh.prototype.hasBondTo=function(e){var t=!1;return this.eachBondedAtom((function(n){e.index===n.index&&(t=!0)})),t},Sh.prototype.bondToElementCount=function(e){var t=0,n=this.index;return this.eachBondedAtom((function(n){n.number===e&&(t+=1)})),this.index=n,t},Sh.prototype.hasBondToElement=function(e){return this.bondToElementCount(e)>0},Sh.prototype.isBackbone=function(){var e=this.residueType.backboneIndexList;return e.length>0&&e.includes(this.index-this.residueAtomOffset)},Sh.prototype.isPolymer=function(){if(this.structure.entityList.length>0)return this.entity.isPolymer();var e=this.residueType.moleculeType;return 3===e||4===e||5===e},Sh.prototype.isSidechain=function(){return this.isPolymer()&&!this.isBackbone()},Sh.prototype.isCg=function(){var e=this.residueType.backboneType;return 4===e||5===e||6===e},Sh.prototype.isTrace=function(){return this.index===this.residueType.traceAtomIndex+this.residueAtomOffset},Sh.prototype.isHetero=function(){return 1===this.residueType.hetero},Sh.prototype.isProtein=function(){return 3===this.residueType.moleculeType},Sh.prototype.isNucleic=function(){var e=this.residueType.moleculeType;return 4===e||5===e},Sh.prototype.isRna=function(){return 4===this.residueType.moleculeType},Sh.prototype.isDna=function(){return 5===this.residueType.moleculeType},Sh.prototype.isWater=function(){return 1===this.residueType.moleculeType},Sh.prototype.isIon=function(){return 2===this.residueType.moleculeType},Sh.prototype.isSaccharide=function(){return 6===this.residueType.moleculeType},Sh.prototype.isHelix=function(){return Ed.includes(this.sstruc)},Sh.prototype.isSheet=function(){return Pd.includes(this.sstruc)},Sh.prototype.isTurn=function(){return Rd.includes(this.sstruc)&&this.isProtein()},Sh.prototype.isBonded=function(){return 0!==this.bondHash.countArray[this.index]},Sh.prototype.isRing=function(){return void 0!==this.residueType.getRings().atomRings[this.index-this.residueAtomOffset]},Sh.prototype.isAromatic=function(){return 1===this.aromatic},Sh.prototype.isMetal=function(){return this.atomType.isMetal()},Sh.prototype.isNonmetal=function(){return this.atomType.isNonmetal()},Sh.prototype.isMetalloid=function(){return this.atomType.isMetalloid()},Sh.prototype.isHalogen=function(){return this.atomType.isHalogen()},Sh.prototype.isDiatomicNonmetal=function(){return this.atomType.isDiatomicNonmetal()},Sh.prototype.isPolyatomicNonmetal=function(){return this.atomType.isPolyatomicNonmetal()},Sh.prototype.isAlkaliMetal=function(){return this.atomType.isAlkaliMetal()},Sh.prototype.isAlkalineEarthMetal=function(){return this.atomType.isAlkalineEarthMetal()},Sh.prototype.isNobleGas=function(){return this.atomType.isNobleGas()},Sh.prototype.isTransitionMetal=function(){return this.atomType.isTransitionMetal()},Sh.prototype.isPostTransitionMetal=function(){return this.atomType.isPostTransitionMetal()},Sh.prototype.isLanthanide=function(){return this.atomType.isLanthanide()},Sh.prototype.isActinide=function(){return this.atomType.isActinide()},Sh.prototype.getDefaultValence=function(){return this.atomType.getDefaultValence()},Sh.prototype.getValenceList=function(){return this.atomType.getValenceList()},Sh.prototype.getOuterShellElectronCount=function(){return this.atomType.getOuterShellElectronCount()},Sh.prototype.distanceTo=function(e){var t=this.atomStore,n=e.atomStore,r=this.index,i=e.index,o=t.x[r]-n.x[i],a=t.y[r]-n.y[i],s=t.z[r]-n.z[i],l=o*o+a*a+s*s;return Math.sqrt(l)},Sh.prototype.connectedTo=function(e){var t=this.atomStore,n=e.atomStore,r=this.index,i=e.index;if(t.altloc&&n.altloc){var o=t.altloc[r],a=n.altloc[i];if(0!==o&&0!==a&&32!==o&&32!==a&&o!==a)return!1}var s=t.x[r]-n.x[i],l=t.y[r]-n.y[i],c=t.z[r]-n.z[i],u=s*s+l*l+c*c;if(u<48&&this.isCg())return!0;if(isNaN(u))return!1;var d=this.covalent+e.covalent,f=d+.3,p=d-.5;return u<f*f&&u>p*p},Sh.prototype.positionFromArray=function(e,t){return void 0===t&&(t=0),this.x=e[t+0],this.y=e[t+1],this.z=e[t+2],this},Sh.prototype.positionToArray=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.index,r=this.atomStore;return e[t+0]=r.x[n],e[t+1]=r.y[n],e[t+2]=r.z[n],e},Sh.prototype.positionToVector3=function(e){return void 0===e&&(e=new H),e.x=this.x,e.y=this.y,e.z=this.z,e},Sh.prototype.positionFromVector3=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},Sh.prototype.positionAdd=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},Sh.prototype.positionSub=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},Sh.prototype.getResidueBonds=function(e){void 0===e&&(e=!1);var t,n,r,i,o=this.residueAtomOffset,a=this.index-this.residueAtomOffset,s=this.residueType.getBonds(),l=s.atomIndices1,c=s.atomIndices2;for(e||(i=[]),t=l.indexOf(a);-1!==t;){if(r=c[t]+o,!i)return r;i.push(r),t=l.indexOf(a,t+1)}for(n=c.indexOf(a);-1!==n;){if(r=l[n]+o,!i)return r;i.push(r),n=c.indexOf(a,n+1)}return i},Sh.prototype.qualifiedName=function(e){void 0===e&&(e=!1);var t="";return this.resname&&!e&&(t+="["+this.resname+"]"),void 0!==this.resno&&(t+=this.resno),this.inscode&&(t+="^"+this.inscode),this.chainname&&(t+=":"+this.chainname),this.atomname&&(t+="."+this.atomname),this.altloc&&(t+="%"+this.altloc),this.structure.modelStore.count>1&&(t+="/"+this.modelIndex),t},Sh.prototype.clone=function(){return new Sh(this.structure,this.index)},Sh.prototype.toObject=function(){return{index:this.index,residueIndex:this.residueIndex,resname:this.resname,x:this.x,y:this.y,z:this.z,element:this.element,chainname:this.chainname,resno:this.resno,serial:this.serial,vdw:this.vdw,covalent:this.covalent,hetero:this.hetero,bfactor:this.bfactor,altloc:this.altloc,atomname:this.atomname,modelIndex:this.modelIndex}},Object.defineProperties(Sh.prototype,Ch);var Th=new Float32Array(3),Ah=function(e,t){void 0===t&&(t=!1),sl&&rl.time("Kdtree build");var n=t?kh:Mh,r=new Float32Array(3*e.atomCount),i=new Uint32Array(e.atomCount),o=0;e.eachAtom((function(e){r[o+0]=e.x,r[o+1]=e.y,r[o+2]=e.z,i[o/3]=e.index,o+=3})),this.atomIndices=i,this.points=r,this.kdtree=new _h(r,n),sl&&rl.timeEnd("Kdtree build")};Ah.prototype.nearest=function(e,t,n){e instanceof H?e.toArray(Th):e instanceof Sh&&e.positionToArray(Th);for(var r=this.kdtree.nearest(Th,t,n),i=this.kdtree.indices,o=this.kdtree.nodes,a=this.atomIndices,s=[],l=0,c=r.length;l<c;++l){var u=r[l],d=u[0],f=u[1];s.push({index:a[i[o[d]]],distance:f})}return s};var Eh={" ":"X","!":"Y","#":"Z",$:"-X","%":"-Y","&":"-Z","'":"Y+1/2","(":"1/2+X",")":"1/2+Y","*":"1/2-X","+":"1/2+Z",",":"1/2-Y","-":"1/2-Z",".":"X+1/2","/":"Z+1/2",0:"-X+1/2",1:"-Y+1/2",2:"-Z+1/2",3:"1/4+X",4:"1/4-Y",5:"1/4+Z",6:"1/4-X",7:"1/4+Y",8:"3/4-Y",9:"3/4+Z",":":"3/4+Y",";":"3/4+X","<":"3/4-X","=":"1/4-Z",">":"3/4-Z","?":"X-Y","@":"Y-X",A:"Z+1/3",B:"Z+2/3",C:"X+2/3",D:"Y+1/3",E:"-Y+2/3",F:"X-Y+1/3",G:"Y-X+2/3",H:"-X+1/3",I:"X+1/3",J:"Y+2/3",K:"-Y+1/3",L:"X-Y+2/3",M:"Y-X+1/3",N:"-X+2/3",O:"2/3+X",P:"1/3+Y",Q:"1/3+Z",R:"2/3-Y",S:"1/3+X-Y",T:"2/3+Y-X",U:"1/3-X",V:"2/3-X",W:"1/3-Y",X:"1/3-Z",Y:"2/3+Y",Z:"1/3+Y-X","[":"2/3+X-Y","]":"1/3+X","^":"2/3+Z",_:"2/3-Z","`":"5/6+Z",a:"1/6+Z",b:"5/6-Z",c:"1/6-Z",d:"Z+5/6",e:"Z+1/6",f:"Z+1/4",g:"+Y"},Ph={"P 1":" !#","P -1":" !#$%&","P 1 2 1":" !#$!&","P 1 21 1":" !#$'&","C 1 2 1":" !#$!&()#*)&","P 1 m 1":" !# %#","P 1 c 1":" !# %+","C 1 m 1":" !# %#()#(,#","C 1 c 1":" !# %+()#(,+","P 1 2/m 1":" !# %#$!&$%&","P 1 21/m 1":" !#$)&$%& ,#","C 1 2/m 1":" !# %#$!&$%&()#(,#*)&*,&","P 1 2/c 1":" !#$!-$%& %+","P 1 21/c 1":" !#$%&$)- ,+","C 1 2/c 1":" !#$!-$%& %+()#*)-*,&(,+","P 2 2 2":" !#$%#$!& %&","P 2 2 21":" !#$%+$!- %&","P 21 21 2":" !#$%#*)&(,&","P 21 21 21":" !#*%+$)-(,&","C 2 2 21":" !#$%+$!- %&()#*,+*)-(,&","C 2 2 2":" !#$%#$!& %&()#*,#*)&(,&","F 2 2 2":" !#$%#$!& %& )+$,+$)- ,-(!+*%+*!-(%-()#*,#*)&(,&","I 2 2 2":" !#$%# %&$!&.'/01/.120'2","I 21 21 21":" !#*%+$)-(,&()+$,#*!& %-","P m m 2":" !#$%# %#$!#","P m c 21":" !#$%+ %+$!#","P c c 2":" !#$%# %+$!+","P m a 2":" !#$%#(%#*!#","P c a 21":" !#$%+(%#*!+","P n c 2":" !#$%# ,+$)+","P m n 21":" !#*%+(%+$!#","P b a 2":" !#$%#(,#*)#","P n a 21":" !#$%+(,#*)+","P n n 2":" !#$%#(,+*)+","C m m 2":" !#$%# %#$!#()#*,#(,#*)#","C m c 21":" !#$%+ %+$!#()#*,+(,+*)#","C c c 2":" !#$%# %+$!+()#*,#(,+*)+","A m m 2":" !#$%# %#$!# )+$,+ ,+$)+","A b m 2":" !#$%# ,#$)# )+$,+ %+$!+","A m a 2":" !#$%#(%#*!# )+$,+(,+*)+","A b a 2":" !#$%#(,#*)# )+$,+(%+*!+","F m m 2":" !#$%# %#$!# )+$,+ ,+$)+(!+*%+(%+*!+()#*,#(,#*)#","F d d 2":" !#$%#345675 )+$,+3896:9(!+*%+;49<79()#*,#;85<:5","I m m 2":" !#$%# %#$!#()+*,+(,+*)+","I b a 2":" !#$%#(,#*)#()+*,+ %+$!+","I m a 2":" !#$%#(%#*!#()+*,+ ,+$)+","P 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#","P 2/n 2/n 2/n":" !#$%#$!& %&*,-()-(,+*)+","P 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+","P 2/b 2/a 2/n":" !#$%#$!& %&*,&()&(,#*)#","P 21/m 2/m 2/a":" !#*%#$!&(%&$%&(!& %#*!#","P 2/n 21/n 2/a":" !#*%#*)- ,-$%&(!&(,+$)+","P 2/m 2/n 21/a":" !#*%+*!- %&$%&(!-(%+$!#","P 21/c 2/c 2/a":" !#*%#$!-(%-$%&(!& %+*!+","P 21/b 21/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#","P 21/c 21/c 2/n":" !#*,#$)-(%-$%&()& ,+*!+","P 2/b 21/c 21/m":" !#$%+$)- ,&$%& !- ,+$)#","P 21/n 21/n 2/m":" !#$%#*)-(,-$%& !&(,+*)+","P 21/m 21/m 2/n":" !#$%#*'&.,&*,&.'& %#$!#","P 21/b 2/c 21/n":" !#*,+$!-(,&$%&()- %+*)#","P 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#","P 21/n 21/m 21/a":" !#0%/$'&.12$%&.!2 1#0'/","C 2/m 2/c 21/m":" !#$%+$!- %&$%& !- %+$!#()#*,+*)-(,&*,&()-(,+*)#","C 2/m 2/c 21/a":" !#$,+$)- %&$%& )- ,+$!#()#*%+*!-(,&*,&(!-(%+*)#","C 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()#*,#*)&(,&*,&()&(,#*)#","C 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+()#*,#*)-(,-*,&()&(,+*)+","C 2/m 2/m 2/a":" !#$,#$)& %&$%& )& ,#$!#()#*%#*!&(,&*,&(!&(%#*)#","C 2/c 2/c 2/a":" !#*,#$!&(,&$,-(!- ,+*!+()#$%#*)& %&*%- )-(%+$)+","F 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!# )+$,+$)- ,-$,- )- ,+$)+(!+*%+*!-(%-*%-(!-(%+*!+()#*,#*)&(,&*,&()&(,#*)#","F 2/d 2/d 2/d":" !#$%#$!& %&64=37=345675 )+$,+$)- ,-68>3:>3896:9(!+*%+*!-(%-<4>;7>;49<79()#*,#*)&(,&<8=;:=;85<:5","I 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()+*,+*)-(,-*,-()-(,+*)+","I 2/b 2/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#()+*,+$!- %-*,-()- %+$!+","I 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#()+$,#*!& %-*,- )&(%#$!+","I 21/m 21/m 21/a":" !#$,#$)& %&$%& )& ,#$!#()+*%+*!-(,-*,-(!-(%+*)+","P 4":" !#$%#% #!$#","P 41":" !#$%+% 5!$9","P 42":" !#$%#% +!$+","P 43":" !#$%+% 9!$5","I 4":" !#$%#% #!$#()+*,+,(+)*+","I 41":" !#*,+%(5)$9()+$%#, 9!*5","P -4":" !#$%#!$&% &","I -4":" !#$%#!$&% &()+*,+)*-,(-","P 4/m":" !#$%#% #!$#$%& !&!$&% &","P 42/m":" !#$%#% +!$+$%& !&!$-% -","P 4/n":" !#$%#,(#)*#*,&()&!$&% &","P 42/n":" !#$%#,(+)*+*,-()-!$&% &","I 4/m":" !#$%#% #!$#$%& !&!$&% &()+*,+,(+)*+*,-()-)*-,(-","I 41/a":" !#*,+%(5)$9$,=(!>!$&,(-()+$%#, 9!*5*%> )=)*-% &","P 4 2 2":" !#$%#% #!$#$!& %&! &%$&","P 4 21 2":" !#$%#,(#)*#*)&(,&! &%$&","P 41 2 2":" !#$%+% 5!$9$!& %-! >%$=","P 41 21 2":" !#$%+,(5)*9*)=(,>! &%$-","P 42 2 2":" !#$%#% +!$+$!& %&! -%$-","P 42 21 2":" !#$%#,(+)*+*)-(,-! &%$&","P 43 2 2":" !#$%+% 9!$5$!& %-! =%$>","P 43 21 2":" !#$%+,(9)*5*)>(,=! &%$-","I 4 2 2":" !#$%#% #!$#$!& %&! &%$&()+*,+,(+)*+*)-(,-)(-,*-","I 41 2 2":" !#*,+%(5)$9*!> ,=)(-%$&()+$%#, 9!*5$)=(%>! &,*-","P 4 m m":" !#$%#% #!$# %#$!#%$#! #","P 4 b m":" !#$%#% #!$#(,#*)#,*#)(#","P 42 c m":" !#$%#% +!$+ %+$!+%$#! #","P 42 n m":" !#$%#,(+)*+(,+*)+%$#! #","P 4 c c":" !#$%#% #!$# %+$!+%$+! +","P 4 n c":" !#$%#% #!$#(,+*)+,*+)(+","P 42 m c":" !#$%#% +!$+ %#$!#%$+! +","P 42 b c":" !#$%#% +!$+(,#*)#,*+)(+","I 4 m m":" !#$%#% #!$# %#$!#%$#! #()+*,+,(+)*+(,+*)+,*+)(+","I 4 c m":" !#$%#% #!$# %+$!+%$+! +()+*,+,(+)*+(,#*)#,*#)(#","I 41 m d":" !#*,+%(5)$9 %#*)+%*5) 9()+$%#, 9!*5(,+$!#,$9!(5","I 41 c d":" !#*,+%(5)$9 %+*)#%*9) 5()+$%#, 9!*5(,#$!+,$5!(9","P -4 2 m":" !#$%#% &!$&$!& %&%$#! #","P -4 2 c":" !#$%#% &!$&$!- %-%$+! +","P -4 21 m":" !#$%#% &!$&*)&(,&,*#)(#","P -4 21 c":" !#$%#% &!$&*)-(,-,*+)(+","P -4 m 2":" !#$%#!$&% & %#$!#! &%$&","P -4 c 2":" !#$%#% &!$& %+$!+! -%$-","P -4 b 2":" !#$%#% &!$&(,#*)#)(&,*&","P -4 n 2":" !#$%#% &!$&(,+*)+)(-,*-","I -4 m 2":" !#$%#% &!$& %#$!#! &%$&()+*,+,(-)*-(,+*)+)(-,*-","I -4 c 2":" !#$%#% &!$& %+$!+! -%$-()+*,+,(-)*-(,#*)#)(&,*&","I -4 2 m":" !#$%#% &!$&$!& %&%$#! #()+*,+,(-)*-*)-(,-,*+)(+","I -4 2 d":" !#$%#% &!$&*!>(%>,$9) 9()+*,+,(-)*-$)= ,=%*5!(5","P 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #","P 4/m 2/c 2/c":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +","P 4/n 2/b 2/m":" !#$%#% #!$#$!& %&! &%$&*,&()&)*&,(&(,#*)#,*#)(#","P 4/n 2/n 2/c":" !#$%#% #!$#$!& %&! &%$&*,-()-)*-,(-(,+*)+,*+)(+","P 4/m 21/b 2/m":" !#$%#% #!$#*)&(,&)(&,*&$%& !&!$&% &(,#*)#,*#)(#","P 4/m 21/n 2/c":" !#$%#% #!$#*)-(,-)(-,*-$%& !&!$&% &(,+*)+,*+)(+","P 4/n 21/m 2/m":" !#$%#,(#)*#*)&(,&! &%$&*,&()&!$&% & %#$!#,*#)(#","P 4/n 2/c 2/c":" !#$%#,(#)*#*)-(,-! -%$-*,&()&!$&% & %+$!+,*+)(+","P 42/m 2/m 2/c":" !#$%#% +!$+$!& %&! -%$-$%& !&!$-% - %#$!#%$+! +","P 42/m 2/c 2/m":" !#$%#% +!$+$!- %-! &%$&$%& !&!$-% - %+$!+%$#! #","P 42/n 2/b 2/c":" !#$%#,(+)*+$!- %-)(&,*&*,-()-!$&% &(,#*)#%$+! +","P 42/n 2/n 2/m":" !#$%#,(+)*+$!& %&)(-,*-*,-()-!$&% &(,+*)+%$#! #","P 42/m 21/b 2/c":" !#$%#% +!$+*)&(,&)(-,*-$%& !&!$-% -(,#*)#,*+)(+","P 42/m 21/n 2/m":" !#$%#,./'*/*'-.,-! &%$&$%& !&'*-,.-.,/*'/%$#! #","P 42/n 21/m 2/c":" !#$%#,(+)*+*)-(,-! &%$&*,-()-!$&% & %#$!#,*+)(+","P 42/n 21/c 2/m":" !#$%#,(+)*+*)&(,&! -%$-*,-()-!$&% & %+$!+,*#)(#","I 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #()+*,+,(+)*+*)-(,-)(-,*-*,-()-)*-,(-(,+*)+,*+)(+","I 4/m 2/c 2/m":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +()+*,+,(+)*+*)&(,&)(&,*&*,-()-)*-,(-(,#*)#,*#)(#","I 41/a 2/m 2/d":" !#*,+%(5)$9*!> ,=)(-%$&$,=(!>!$&,(-(,+$!#,$9!(5()+$%#, 9!*5$)=(%>! &,*-*%> )=)*-% & %#*)+%*5) 9","I 41/a 2/c 2/d":" !#*,+%(5)$9*!= ,>)(&%$-$,=(!>!$&,(-(,#$!+,$5!(9()+$%#, 9!*5$)>(%=! -,*&*%> )=)*-% & %+*)#%*9) 5","P 3":" !#%?#@$#","P 31":" !#%?A@$B","P 32":" !#%?B@$A","H 3":" !#%?#@$#CDAEFAGHAIJBKLBMNB","R 3":" !## !!# ","P -3":" !#%?#@$#$%&!@&? &","H -3":" !#%?#@$#$%&!@&? &OPQRSQTUQVWXYZX[]X]Y^W[^ZV^UR_PT_SO_","R -3":" !## !!# $%&&$%%&$","P 3 1 2":" !#%?#@$#%$&@!& ?&","P 3 2 1":" !#%?#@$#! &?%&$@&","P 31 1 2":" !#%?Q@$^%$_@!X ?&","P 31 2 1":" !#%?A@$B! &?%_$@X","P 32 1 2":" !#%?^@$Q%$X@!_ ?&","P 32 2 1":" !#%?B@$A! &?%X$@_","H 3 2":" !#%?#@$#! &?%&$@&OPQRSQTUQY]X[WXVZX]Y^W[^ZV^PO_SR_UT_","R 3 2":" !## !!# %$&$&%&%$","P 3 m 1":" !#%?#@$#%$#@!# ?#","P 3 1 m":" !#%?#@$#! #?%#$@#","P 3 c 1":" !#%?#@$#%$+@!+ ?+","P 3 1 c":" !#%?#@$#! +?%+$@+","H 3 m":" !#%?#@$#%$#@!# ?#OPQRSQTUQRUQTPQOSQ]Y^W[^ZV^WV^ZY^][^","R 3 m":" !## !!# ! # #!#! ","H 3 c":" !#%?#@$#%$+@!+ ?+OPQRSQTUQRU`TP`OS`]Y^W[^ZV^WVaZYa][a","R 3 c":" !## !!# '././'/'.","P -3 1 2/m":" !#%?#@$#%$&@!& ?&$%&!@&? &! #?%#$@#","P -3 1 2/c":" !#%?#@$#%$-@!- ?-$%&!@&? &! +?%+$@+","P -3 2/m 1":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#","P -3 2/c 1":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+","H -3 2/m":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#OPQRSQTUQY]X[WXVZXVWXYZX[]XRUQTPQOSQ]Y^W[^ZV^PO_SR_UT_UR_PT_SO_WV^ZY^][^","R -3 2/m":" !## !!# %$&$&%&%$$%&&$%%&$! # #!#! ","H -3 2/c":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+OPQRSQTUQY]b[WbVZbVWXYZX[]XRU`TP`OS`]Y^W[^ZV^POcSRcUTcUR_PT_SO_WVaZYa][a","R -3 2/c":" !## !!# 102021210$%&&$%%&$'././'/'.","P 6":" !#%?#@$#$%#!@#? #","P 61":" !#%?A@$B$%/!@d? e","P 65":" !#%?B@$A$%/!@e? d","P 62":" !#%?^@$Q$%#!@^? Q","P 64":" !#%?Q@$^$%#!@Q? ^","P 63":" !#%?#@$#$%+!@+? +","P -6":" !#%?#@$# !&%?&@$&","P 6/m":" !#%?#@$#$%#!@#? #$%&!@&? & !&%?&@$&","P 63/m":" !#%?#@$#$%+!@+? +$%&!@&? & !-%?-@$-","P 6 2 2":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&","P 61 2 2":" !#%?Q@$^$%+!@`? a! X?%&$@_%$b@!- ?c","P 65 2 2":" !#%?^@$Q$%+!@a? `! _?%&$@X%$c@!- ?b","P 62 2 2":" !#%?^@$Q$%#!@^? Q! _?%&$@X%$_@!& ?X","P 64 2 2":" !#%?Q@$^$%#!@Q? ^! X?%&$@_%$X@!& ?_","P 63 2 2":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-","P 6 m m":" !#%?#@$#$%#!@#? #%$#@!# ?#! #?%#$@#","P 6 c c":" !#%?#@$#$%#!@#? #%$+@!+ ?+! +?%+$@+","P 63 c m":" !#%?#@$#$%+!@+? +%$+@!+ ?+! #?%#$@#","P 63 m c":" !#%?#@$#$%+!@+? +%$#@!# ?#! +?%+$@+","P -6 m 2":" !#%?#@$# !&%?&@$&%$#@!# ?#%$&@!& ?&","P -6 c 2":" !#%?#@$# !-%?-@$-%$+@!+ ?+%$&@!& ?&","P -6 2 m":" !#%?#@$# !&%?&@$&! &?%&$@&! #?%#$@#","P -6 2 c":" !#%?#@$# !-%?-@$-! &?%&$@&! +?%+$@+","P 6/m 2/m 2/m":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&$%&!@&? & !&@$&%?&%$#@!# ?#! #?%#$@#","P 6/m 2/c 2/c":" !#%?#@$#$%#!@#? #! -?%-$@-%$-@!- ?-$%&!@&? & !&@$&%?&%$+@!+ ?+! +?%+$@+","P 63/m 2/c 2/m":" !#%?#@$#$%+!@+? +! -?%-$@-%$&@!& ?&$%&!@&? & !-@$-%?-%$+@!+ ?+! #?%#$@#","P 63/m 2/m 2/c":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-$%&!@&? & !-@$-%?-%$#@!# ?#! +?%+$@+","P 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ","F 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%&  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ","I 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(","P 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(","I 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- ","P 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$","P 2/n -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& *,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","F 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-($,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- *,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$","F 2/d -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& 64=37=345675=64=375345674=67=3453756 )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(68>3:>3896:9=<8=;:5;85<:4><7>;49;79<(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(<4>;7>;49<79>68>3:93896:8=<:=;85;:5<()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- <8=;:=;8f<:f><4>;79;49<78>6:>3893:96","I 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","P 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*","I 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*()+$,#*g& %-+()#$,&*!- %)+(,#$!&*%- *,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$","P 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$","P 42 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","F 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$","F 41 3 2":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46 )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<(!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86","I 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","P 43 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7;>46=:<5839398<5:6=4;>75:<983>7;=46","P 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<","I 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46","P -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ","F -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&%  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(+%*+!*-%(- +)$+,$-) -,#)(#,*&)*&,((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() +,$+)$-, -(#)*#,*&)(&,+!(+%*-!*-%(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(#,*#)*&,(&(+!*+%*-!(-%+) +,$-)$-, ","I -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","P -4 3 n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","F -4 3 c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() #,$#)$&, &(#!*#%*&!(&%+! +%$-!$-% (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(#%*#!*&%(& +!$+%$-! -%#) #,$&)$&, ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! +%$+!$-% - #)$#,$&) &,#!(#%*&!*&%(","I -4 3 d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7354<9:6>8;=357<946>:;=857394<>:6=8;()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- :;98657<=43>;9:658<=73>49:;586=7<>43","P 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","P 4/n -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/m -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/n -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","F 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#!  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*%*+!(+%(-!*-$-) -, +)$+,&,(&)*#,*#)((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%**%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*,$+) +, -)$-*&)(&,(#)*#,-%(-!*+%*+!(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$*,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$,*#)(#,(&)*&*-!(-%(+!*+%-, -)$+,$+) ","F 4/m -3 2/c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() &,$&)$#, #(#%*#!*&%(&!+!$+% -! -%$$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*,$#) #, &)$&*&!(&%(#!*#%-% -!$+%$+! (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(&%*&!*#%(# +%$+!$-% -!#)$#, &) &,$*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*%*#!(#%(&!*&$-! -% +!$+%&, &)$#,$#) ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! -%$-!$+% + #,$#)$&, &)#!*#%(&!(&%**,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$%$+! +% -!$-$&) &, #)$#,&%(&!*#%*#!(","F 41/d -3 2/m":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=4664=3:>;85<79=64>3:5;89<74=6:>385;79<,$+! #%(-)*&*&)(-% #!$+,-%(&)*+,$#!  )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<68>37=;49<:5=<8>;753496:4><:=;893756,*#!(+% &)$-*-!(&, +)$#%-, &!$+%*#)((!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<<4>;:=389675>68=379;45<:8=<7>;453:96%$#) +,(&!*-$&! -,(#)*+%&% -)$#,*+!(()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86<8=;7>3456:9><4=;:9385678>67=349;:5<%*+)(#, -!$&$-) &%(+!*#,&,(-!*#%$+) ","F 41/d -3 2/c":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46<8>;7=3496:5><8=;793456:8><7=;493:56%*#)(+, &!$-$-! &,(+)*#%&, -!$#%*+)( )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<<4=;:>385679>64=3:9;85<78=67>345;:9<%$+) #,(-!*&$&) -%(#!*+,&%(-)*#,$+! (!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<68=37>;45<:9=<4>;:5389674>6:=389;75<,*+!(#% -)$&*-)(&% +!$#,-,(&!*+%$#) ()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>8664>3:=;89<75=68>375;49<:4=<:>;853796,$#! +%(&)*-*&!(-, #)$+%-% &)$+,*#!(","I 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","I 41/a -3 2/d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<$%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*4<97358;=:6>6>:;=8357<94=8;>:694<573()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46*,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$865:;943>7<=<=73>4;9:658>43=7<5869:;","P 1 1 2":" !#$%#","P 1 1 21":" !#$%+","B 1 1 2":" !#$%#(g+*%+","A 1 2 1":" !#$!& )+$)-","C 1 21 1":" !#$)&()#*!&","I 1 2 1":" !#$!&.'/0'2","I 1 21 1":" !#$)&.'/0!-","P 1 1 m":" !# !&","P 1 1 b":" !# )&","B 1 1 m":" !# !&(!+(!-","B 1 1 b":" !# )&(!+()-","P 1 1 2/m":" !# !&$%#$%&","P 1 1 21/m":" !#$%+$%& !-","B 1 1 2/m":" !# !&$%#$%&(!+(!-*%+*%-","P 1 1 2/b":" !#$,#$%& )&","P 1 1 21/b":" !#$%&$,+ )-","B 1 1 2/b":" !#$,#$%& )&(!+*,+*%-()-","P 21 2 2":" !#$!&(%&*%#","P 2 21 2":" !# ,&$)&$%#","P 21 21 2 (a)":" !#*,#.%&$'&","P 21 2 21":" !#$!&(%-*%+","P 2 21 21":" !# %&$)-$,+","C 2 2 21a)":" !#*%+(,&$)-()#$,+ %&*!-","C 2 2 2a":" !#*,#.%&$'&()#$%# ,&*!&","F 2 2 2a":" !#*,#.%&$'& '/*%/.12$!2.!/$,/ %20'2.'#$%# 1&0!&","I 2 2 2a":" !#*,#.%&$'&()+$%+*!- ,-","P 21/m 21/m 2/n a":" !#*,#$)&(%&$%&.'& ,#*!#","P 42 21 2a":" !#*,#%.+'$+$'&.%&! -,*-","I 2 3a":" !#*,#.%&$'&!# ,- '&$%/$# !-*!/$%&.%()+$%+ ,-*!-)+(%&(!-*,#*+()&$)#*,- ,"},Rh=/^[1-9]$/;function Oh(e){var t="";return e.length>0&&(t=":"+Da(e).join(" OR :")),new Bs(t)}var Ih=function(e){void 0===e&&(e=""),this.name=e,this.partList=[]},Lh={type:{configurable:!0}};Lh.type.get=function(){return"Assembly"},Ih.prototype.addPart=function(e,t){var n=new Dh(e,t);return this.partList.push(n),n},Ih.prototype.getAtomCount=function(e){return this.partList.reduce((function(t,n){return t+n.getAtomCount(e)}),0)},Ih.prototype.getResidueCount=function(e){return this.partList.reduce((function(t,n){return t+n.getResidueCount(e)}),0)},Ih.prototype.getInstanceCount=function(){var e=0;return this.partList.forEach((function(t){e+=t.matrixList.length})),e},Ih.prototype.isIdentity=function(e){if(1!==this.partList.length)return!1;var t=this.partList[0];if(1!==t.matrixList.length)return!1;if(!(new j).equals(t.matrixList[0]))return!1;var n=[];return e.eachChain((function(e){n.push(e.chainname)})),n=Da(n),t.chainList.length===n.length},Ih.prototype.getBoundingBox=function(e){var t=new K;return this.partList.forEach((function(n){var r=n.getBoundingBox(e);t.expandByPoint(r.min),t.expandByPoint(r.max)})),t},Ih.prototype.getCenter=function(e){return this.getBoundingBox(e).getCenter(new H)},Ih.prototype.getSelection=function(){var e=[];return this.partList.forEach((function(t){e=e.concat(t.chainList)})),Oh(e)},Object.defineProperties(Ih.prototype,Lh);var Dh=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.matrixList=e,this.chainList=t},Nh={type:{configurable:!0}};Nh.type.get=function(){return"AssemblyPart"},Dh.prototype._getCount=function(e,t){var n=this,r=0;return e.eachChain((function(e){(0===n.chainList.length||n.chainList.includes(e.chainname))&&(r+=e[t])})),this.matrixList.length*r},Dh.prototype.getAtomCount=function(e){return this._getCount(e,"atomCount")},Dh.prototype.getResidueCount=function(e){return this._getCount(e,"residueCount")},Dh.prototype.getBoundingBox=function(e){var t=new K,n=new K,r=this.getSelection(),i=e.getBoundingBox(r);return this.matrixList.forEach((function(e){n.copy(i).applyMatrix4(e),t.expandByPoint(n.min),t.expandByPoint(n.max)})),t},Dh.prototype.getSelection=function(){return Oh(this.chainList)},Dh.prototype.getView=function(e){var t=this.getSelection();return t?e.getView(t):e},Dh.prototype.getInstanceList=function(){for(var e=[],t=0,n=this.matrixList.length;t<n;++t)e.push({id:t+1,name:t,matrix:this.matrixList[t]});return e},Object.defineProperties(Dh.prototype,Nh);var Fh=function(e){this.structure=e,this.currentModelindex=null,this.currentChainid=null,this.currentResname=null,this.currentResno=null,this.currentInscode=void 0,this.currentHetero=null,this.previousResname="",this.previousHetero=null,this.ai=-1,this.ri=-1,this.ci=-1,this.mi=-1};function zh(e,t){if(t){sl&&rl.time("assignSecondaryStructure");var n=[];e.eachModel((function(e){e.eachChain((function(e){n.push(e.chainname)}))}));var r=n.slice().sort(),i=[];r.forEach((function(e){i.push(n.indexOf(e))}));var o=t.helices.filter((function(e){return Ia(r,e[0])>=0}));o.sort((function(e,t){var n=e[0],o=t[0],a=e[1],s=t[1];if(n===o)return a===s?0:a<s?-1:1;var l=Ia(r,n),c=Ia(r,o);return i[l]<i[c]?-1:1}));var a=e.residueStore;e.eachModel((function(e){var t=0,n=o.length;if(0!==n){var r=o[t],i=!1,s=!1;e.eachChain((function(e){var l=!1;if(e.chainname===r[0])for(var c=e.residueCount,u=e.residueOffset,d=u+c,f=u;f<d;++f)if(a.resno[f]===r[1]&&a.getInscode(f)===r[2]&&(i=!0),i&&(a.sstruc[f]=r[6],a.resno[f]===r[4]&&a.getInscode(f)===r[5]&&(i=!1,(t+=1)<n?(f=u-1,r=o[t],l=e.chainname!==r[0]):s=!0)),l||s)return}))}}));var s=t.sheets.filter((function(e){return Ia(r,e[0])>=0}));s.sort((function(e,t){var n=e[0],o=t[0];if(n===o)return 0;var a=Ia(r,n),s=Ia(r,o);return i[a]<i[s]?-1:1}));var l="e".charCodeAt(0);e.eachModel((function(e){var t=0,n=s.length;if(0!==n){var r=s[t],i=!1,o=!1;e.eachChain((function(e){var c=!1;if(e.chainname===r[0])for(var u=e.residueCount,d=e.residueOffset,f=d+u,p=d;p<f;++p)if(a.resno[p]===r[1]&&a.getInscode(p)===r[2]&&(i=!0),i&&(a.sstruc[p]=l,a.resno[p]===r[4]&&a.getInscode(p)===r[5]&&(i=!1,(t+=1)<n?(p=d-1,r=s[t],c=e.chainname!==r[0]):o=!0)),c||o)return}))}})),sl&&rl.timeEnd("assignSecondaryStructure")}}Fh.prototype.addResidueType=function(e){for(var t=this.structure.atomStore,n=this.structure.residueStore,r=this.structure.residueMap,i=n.atomCount[e],o=n.atomOffset[e],a=new Array(i),s=0;s<i;++s)a[s]=t.atomTypeId[o+s];n.residueTypeId[e]=r.add(this.previousResname,a,this.previousHetero)},Fh.prototype.addAtom=function(e,t,n,r,i,o,a,s){var l=this.structure.atomStore,c=this.structure.residueStore,u=this.structure.chainStore,d=this.structure.modelStore,f=!1,p=!1,h=!1;this.currentModelindex!==e?(f=!0,p=!0,h=!0,this.mi+=1,this.ci+=1,this.ri+=1):this.currentChainid!==n?(p=!0,h=!0,this.ci+=1,this.ri+=1):this.currentResno===i&&this.currentResname===r&&this.currentInscode===s||(h=!0,this.ri+=1),this.ai+=1,f&&(d.growIfFull(),d.chainOffset[this.mi]=this.ci,d.chainCount[this.mi]=0,d.count+=1,u.modelIndex[this.ci]=this.mi),p&&(u.growIfFull(),u.setChainname(this.ci,t),u.setChainid(this.ci,n),u.residueOffset[this.ci]=this.ri,u.residueCount[this.ci]=0,u.count+=1,u.modelIndex[this.ci]=this.mi,d.chainCount[this.mi]+=1,c.chainIndex[this.ri]=this.ci),h&&(this.previousResname=this.currentResname,this.previousHetero=this.currentHetero,this.ri>0&&this.addResidueType(this.ri-1),c.growIfFull(),c.resno[this.ri]=i,void 0!==a&&(c.sstruc[this.ri]=a.charCodeAt(0)),void 0!==s&&(c.inscode[this.ri]=s.charCodeAt(0)),c.atomOffset[this.ri]=this.ai,c.atomCount[this.ri]=0,c.count+=1,c.chainIndex[this.ri]=this.ci,u.residueCount[this.ci]+=1),l.count+=1,l.residueIndex[this.ai]=this.ri,c.atomCount[this.ri]+=1,this.currentModelindex=e,this.currentChainid=n,this.currentResname=r,this.currentResno=i,this.currentInscode=s,this.currentHetero=o},Fh.prototype.finalize=function(){this.previousResname=this.currentResname,this.previousHetero=this.currentHetero,this.ri>-1&&this.addResidueType(this.ri)};var Bh=function(){var e=function(e,t,n,r){for(var i=e.structure,o=e.residueIndexStart,a=i.getResidueProxy(),s=i.getResidueProxy(),l=i.getAtomProxy(),c=i.getAtomProxy(),u=Math.max(0,t-2);u<=t;++u)for(var d=2;d<5;++d)if(!(u+d>=e.residueCount)){a.index=o+u,s.index=o+u+d,l.index=a.traceAtomIndex,c.index=s.traceAtomIndex;var f=l.distanceTo(c);if(Math.abs(f-n[d-2])>r)return!1}return!0},t=function(t,n){return e(t,n,[5.45,5.18,6.37],2.1)},n=function(t,n){return e(t,n,[6.1,10.4,13],1.42)};return function(e){sl&&rl.time("calculateSecondaryStructure"),e.eachPolymer((function(e){if(!(e.residueCount<4)){if(e.isCg())!function(e){for(var t=e.residueStore,n=e.residueIndexStart,r=new xh(e).position,i=new H,o=new H,a=0,s=e.residueCount;a<s;++a){i.fromArray(r.center,3*a),o.fromArray(r.center,3*a+3);var l=i.distanceTo(o);l<2&&l>1&&r.bending[a]<20&&(t.sstruc[n+a]="h".charCodeAt(0),t.sstruc[n+a+1]="h".charCodeAt(0))}}(e);else{if(!e.isProtein())return;!function(e){for(var r=e.residueStore,i=e.residueIndexStart,o=0,a=e.residueCount;o<a;++o){var s="c";t(e,o)?s="h":n(e,o)&&(s="e"),r.sstruc[i+o]=s.charCodeAt(0)}}(e)}var r,i=0;e.eachResidue((function(e){e.sstruc===r?i+=1:(1===i&&(e.index-=1,e.sstruc="c"),i=1,r=e.sstruc)}))}})),sl&&rl.timeEnd("calculateSecondaryStructure")}}(),jh="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function Zh(e){for(var t=jh.length,n=e,r=0,i=jh[n%t];n>=t;)n=Math.floor(n/t),i+=jh[n%t],r+=1;return r>=5&&rl.warn("chainname overflow"),i}function Hh(e,t){void 0===t&&(t=!1),sl&&rl.time("calculateChainnames");var n=!0;if(e.eachChain((function(e){e.chainname&&(n=!1)})),n){var r=e.modelStore,i=e.chainStore,o=e.residueStore,a=e.getAtomProxy(),s=e.getAtomProxy(),l=0,c=0,u=0,d=0,f=[];1===o.count?f.push({mIndex:0,chainname:"A",rStart:0,rCount:1}):e.eachResidueN(2,(function(e,n){var r=!1,i=e.backboneType,p=n.backboneType;d=e.index,e.modelIndex!==n.modelIndex||e.moleculeType!==n.moleculeType?r=!0:0!==i&&i===p&&(a.index=e.backboneEndAtomIndex,s.index=n.backboneStartAtomIndex,r=t?!a.hasBondTo(s):!a.connectedTo(s)),r||n.index!==o.count-1||(r=!0,d=n.index),r&&(f.push({mIndex:c,chainname:Zh(l),rStart:u,rCount:d-u+1}),l+=1,e.modelIndex!==n.modelIndex&&(l=0,c+=1),n.index===o.count-1&&d!==n.index&&f.push({mIndex:c,chainname:Zh(l),rStart:o.count-1,rCount:1}),u=n.index,d=n.index)})),i.count=0,f.forEach((function(e){!function(e,t,n,a){for(var s=i.count,l=0;l<a;++l)o.chainIndex[n+l]=s;i.growIfFull(),i.modelIndex[s]=e,i.setChainname(s,t),i.setChainid(s,t),i.residueOffset[s]=n,i.residueCount[s]=a,i.count+=1,r.chainCount[e]+=1}(e.mIndex,e.chainname,e.rStart,e.rCount)}));var p=0;e.eachModel((function(e){r.chainOffset[e.index]=p,r.chainCount[e.index]-=1,p+=r.chainCount[e.index]}))}sl&&rl.timeEnd("calculateChainnames")}function Uh(e){sl&&rl.time("calculateBonds"),Wh(e),$h(e),sl&&rl.timeEnd("calculateBonds")}var Vh={"HIS|CD2|CG":2,"HIS|CE1|ND1":2,"ARG|CZ|NH2":2,"PHE|CE1|CZ":2,"PHE|CD2|CE2":2,"PHE|CD1|CG":2,"TRP|CD1|CG":2,"TRP|CD2|CE2":2,"TRP|CE3|CZ3":2,"TRP|CH2|CZ2":2,"ASN|CG|OD1":2,"GLN|CD|OE1":2,"TYR|CD1|CG":2,"TYR|CD2|CE2":2,"TYR|CE1|CZ":2,"ASP|CG|OD1":2,"GLU|CD|OE1":2,"G|C8|N7":2,"G|C4|C5":2,"G|C2|N3":2,"G|C6|O6":2,"C|C4|N3":2,"C|C5|C6":2,"C|C2|O2":2,"A|C2|N3":2,"A|C6|N1":2,"A|C4|C5":2,"A|C8|N7":2,"U|C5|C6":2,"U|C2|O2":2,"U|C4|O4":2,"DG|C8|N7":2,"DG|C4|C5":2,"DG|C2|N3":2,"DG|C6|O6":2,"DC|C4|N3":2,"DC|C5|C6":2,"DC|C2|O2":2,"DA|C2|N3":2,"DA|C6|N1":2,"DA|C4|C5":2,"DA|C8|N7":2,"DT|C5|C6":2,"DT|C2|O2":2,"DT|C4|O4":2};function Gh(e,t,n){var r;return t=(r=t<n?[t,n]:[n,t])[0],n=r[1],jd.includes(e)&&"C"===t&&"O"===n||Vd.includes(e)&&"OP1"===t&&"P"===n?2:Vh[e+"|"+t+"|"+n]||1}function Wh(e,t){void 0===t&&(t=!1),sl&&rl.time("calculateBondsWithin");var n=e.bondStore,r=e.rungBondStore,i=e.getAtomSet(!1),o=e.getAtomProxy(),a=e.getAtomProxy(),s=e.getBondProxy(),l=t?null:function(e){sl&&rl.time("calculateAtomBondMap");var t=[];return e.eachBond((function(e){var n=e.atomIndex1,r=e.atomIndex2;void 0===t[n]&&(t[n]=[]),t[n][r]=e.index})),sl&&rl.timeEnd("calculateAtomBondMap"),t}(e);e.eachResidue((function(e){if(!t&&l){var c=e.atomCount,u=e.atomOffset;if(c>500)return void rl.warn("more than 500 atoms, skip residue for auto-bonding",e.qualifiedName());for(var d=e.getBonds(),f=d.atomIndices1,p=d.atomIndices2,h=d.bondOrders,m=f.length,g=0;g<m;++g){var v=f[g],y=p[g],b=v+u,x=y+u,w=l[b];if(void 0!==w&&void 0!==w[x])s.index=w[x],h[e.residueType.getBondIndex(v,y)]=s.bondOrder;else o.index=b,a.index=x,n.addBond(o,a,h[g])}}var _=e.residueType.traceAtomIndex,S=e.residueType.rungEndAtomIndex;-1!==_&&-1!==S&&(o.index=e.traceAtomIndex,a.index=e.rungEndAtomIndex,r.addBond(o,a),i.set(o.index),i.set(a.index))})),e.atomSetDict.rung=i,sl&&rl.timeEnd("calculateBondsWithin")}function $h(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),sl&&rl.time("calculateBondsBetween");var r=e.bondStore,i=e.backboneBondStore,o=e.getAtomSet(!1),a=e.getAtomProxy(),s=e.getAtomProxy();function l(e,l){var c=e.backboneType,u=l.backboneType;0!==c&&c===u&&(a.index=e.backboneEndAtomIndex,s.index=l.backboneStartAtomIndex,(n&&a.hasBondTo(s)||a.connectedTo(s))&&(t||r.addBond(a,s,1),a.index=e.traceAtomIndex,s.index=l.traceAtomIndex,i.addBond(a,s),o.set(a.index),o.set(s.index)))}0===i.count&&i.resize(e.residueStore.count),e.eachResidueN(2,l);var c=e.getResidueProxy(),u=e.getResidueProxy();if(e.eachChain((function(e){0!==e.residueCount&&(c.index=e.residueOffset,u.index=e.residueOffset+e.residueCount-1,l(u,c))})),e.atomSetDict.backbone=o,!t){sl&&rl.time("calculateBondsBetween inter");var d=e.spatialHash;e.eachResidue((function(e){0!==e.backboneType||e.isWater()||e.eachAtom((function(e){e.isMetal()||d.eachWithin(e.x,e.y,e.z,4,(function(t){s.index=t,e.modelIndex!==s.modelIndex||e.residueIndex===s.residueIndex||s.isMetal()||r.addBondIfConnected(e,s,1)}))}))})),sl&&rl.timeEnd("calculateBondsBetween inter")}sl&&rl.timeEnd("calculateBondsBetween")}function qh(e){if(e.unitcell){sl&&rl.time("buildUnitcellAssembly");var t=e.unitcell,n=e.center.clone().applyMatrix4(t.cartToFrac),r=n.clone().floor(),i=function(e){var t=Ph[e],n={};if(void 0===t)return console.warn("spacegroup '"+e+"' not found in symop library"),n;for(var r=[],i=0,o=t.length;i<o;i+=3){for(var a=[],s=0;s<3;++s)a.push(Eh[t[i+s]]);r.push(a)}return r.forEach((function(e){var t=0,r=(new j).set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),i=r.elements;n[e.toString()]=r,e.forEach((function(e){for(var n=!1,r=!1,o=0,a=e.length;o<a;++o){var s=e[o];if("-"===s)n=!0;else if("+"===s)n=!1;else if("/"===s)r=!0;else if("X"===s)i[0+t]=n?-1:1;else if("Y"===s)i[4+t]=n?-1:1;else if("Z"===s)i[8+t]=n?-1:1;else if(Rh.test(s)){var l=parseInt(s);r?i[12+t]/=l:i[12+t]=l}else rl.warn("getSymmetryOperations: unknown token '"+s+"'")}t+=1}))})),n}(t.spacegroup),o=new H,a=new H,s=new Ih("UNITCELL"),l=m(),c=[];if(e.biomolDict.NCS){c.push.apply(c,[new j].concat(e.biomolDict.NCS.partList[0].matrixList));var u=[];l.forEach((function(e){c.forEach((function(t){u.push(e.clone().multiply(t))}))})),s.addPart(u)}else s.addPart(l);var d=new H,f=new Ih("SUPERCELL"),p=Array.prototype.concat.call(m(d.set(1,0,0)),m(d.set(0,1,0)),m(d.set(0,0,1)),m(d.set(-1,0,0)),m(d.set(0,-1,0)),m(d.set(0,0,-1)),m(d.set(1,1,0)),m(d.set(1,0,1)),m(d.set(0,1,1)),m(d.set(-1,-1,0)),m(d.set(-1,0,-1)),m(d.set(0,-1,-1)),m(d.set(1,-1,-1)),m(d.set(1,1,-1)),m(d.set(1,-1,1)),m(d.set(-1,1,1)),m(d.set(-1,-1,1)),m(d.set(-1,1,-1)),m(d.set(0,1,-1)),m(d.set(0,-1,1)),m(d.set(1,0,-1)),m(d.set(-1,0,1)),m(d.set(1,-1,0)),m(d.set(-1,1,0)),m(),m(d.set(1,1,1)),m(d.set(-1,-1,-1)));if(e.biomolDict.NCS){var h=[];p.forEach((function(e){c.forEach((function(t){h.push(e.clone().multiply(t))}))})),f.addPart(h)}else f.addPart(p);e.biomolDict.UNITCELL=s,e.biomolDict.SUPERCELL=f,sl&&rl.timeEnd("buildUnitcellAssembly")}function m(e){var s=[];return Object.keys(i).forEach((function(l){var c=i[l].clone();o.copy(n).applyMatrix4(c).floor(),a.setFromMatrixPosition(c),a.sub(o),a.add(r),e&&a.add(e),c.setPosition(a),c.multiplyMatrices(t.fracToCart,c),c.multiply(t.cartToFrac),s.push(c)})),s}}var Yh=["H","C","O","N","S","P"],Xh=["NA","CL","FE"];function Kh(e){var t=e.trim().toUpperCase();parseInt(t.charAt(0))&&(t=t.substr(1)),parseInt(t.charAt(0))&&(t=t.substr(1));var n=t.length;if(0===n)return"";if(1===n)return t;if(2===n){if(-1!==Xh.indexOf(t))return t;if(-1!==Yh.indexOf(t[0]))return t[0]}return n>=3&&-1!==Yh.indexOf(t[0])?t[0]:""}function Jh(e){var t=e.bondHash,n=t.countArray,r=t.offsetArray,i=t.indexArray,o=e.getBondProxy();e.eachResidue((function(e){var t=e.residueType;if(void 0===t.bonds){var a=e.atomOffset,s=[],l=[],c=[],u={},d=a+e.atomCount;e.eachAtom((function(e){for(var t=e.index,f=r[t],p=0,h=n[t];p<h;++p){o.index=i[f+p];var m=o.atomIndex1;if(!(m<a||m>=d)){var g=o.atomIndex2;if(!(g<a||g>=d)){if(m>g){var v=g;g=m,m=v}var y=m+"|"+g;void 0===u[y]&&(u[y]=!0,s.push(m-a),l.push(g-a),c.push(o.bondOrder))}}}})),t.bonds={atomIndices1:s,atomIndices2:l,bondOrders:c}}}))}function Qh(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];sl&&rl.time("concatStructures");var r=new Mm(e,""),i=new Fh(r),o=r.atomStore,a=r.atomMap;o.addField("formalCharge",1,"int8"),o.addField("partialCharge",1,"float32");var s={},l=0,c=0,u=0;t.forEach((function(e){e.eachAtom((function(e){o.growIfFull(),o.atomTypeId[l]=a.add(e.atomname,e.element),o.x[l]=e.x,o.y[l]=e.y,o.z[l]=e.z,o.serial[l]=e.serial,o.formalCharge[l]=e.formalCharge,o.partialCharge[l]=e.partialCharge,o.altloc[l]=e.altloc,o.occupancy[l]=e.occupancy,o.bfactor[l]=e.bfactor,i.addAtom(e.modelIndex+u,e.chainname,e.chainid,e.resname,e.resno,1===e.hetero,e.sstruc,e.inscode),s[e.index+c]=l,l+=1})),c+=e.atomStore.count,u+=e.modelStore.count}));var d=r.bondStore,f=r.getAtomProxy(),p=r.getAtomProxy();return c=0,t.forEach((function(e){e.eachBond((function(e){f.index=s[e.atomIndex1+c],p.index=s[e.atomIndex2+c],d.addBond(f,p,e.bondOrder)})),c+=e.atomStore.count})),i.finalize(),$h(r,!0),Wh(r,!0),r.finalizeAtoms(),r.finalizeBonds(),Jh(r),sl&&rl.timeEnd("concatStructures"),r}var em=[3,11,19,37,55,87],tm=[4,12,20,38,56,88],nm=[6,15,16,34],rm=[1,7,8,9,17,35,53],im=[2,10,18,36,54,86],om=[13,30,31,48,49,50,80,81,82,83,84,85,112],am=[5,14,32,33,51,52,85],sm=[9,17,35,53,85],lm=function(e,t,n){this.structure=e,this.atomname=t,n=n||Kh(t),this.element=n,this.number=Od[n]||0,this.vdw=Id[this.number]||2,this.covalent=Ld[this.number]||1.6};lm.prototype.getDefaultValence=function(){var e=Dd[this.number];return e?e[0]:-1},lm.prototype.getValenceList=function(){return Dd[this.number]||[]},lm.prototype.getOuterShellElectronCount=function(){return Nd[this.number]||2},lm.prototype.isMetal=function(){return this.isAlkaliMetal()||this.isAlkalineEarthMetal()||this.isLanthanide()||this.isActinide()||this.isTransitionMetal()||this.isPostTransitionMetal()},lm.prototype.isNonmetal=function(){return this.isDiatomicNonmetal()||this.isPolyatomicNonmetal()||this.isNobleGas()},lm.prototype.isMetalloid=function(){return am.includes(this.number)},lm.prototype.isHalogen=function(){return sm.includes(this.number)},lm.prototype.isDiatomicNonmetal=function(){return rm.includes(this.number)},lm.prototype.isPolyatomicNonmetal=function(){return nm.includes(this.number)},lm.prototype.isAlkaliMetal=function(){return em.includes(this.number)},lm.prototype.isAlkalineEarthMetal=function(){return tm.includes(this.number)},lm.prototype.isNobleGas=function(){return im.includes(this.number)},lm.prototype.isTransitionMetal=function(){var e=this.number;return e>=21&&e<=29||e>=39&&e<=47||e>=72&&e<=79||e>=104&&e<=108},lm.prototype.isPostTransitionMetal=function(){return om.includes(this.number)},lm.prototype.isLanthanide=function(){return this.number>=57&&this.number<=71},lm.prototype.isActinide=function(){return this.number>=89&&this.number<=103};var cm=function(e){this.structure=e,this.dict={},this.list=[],this.structure=e};cm.prototype.add=function(e,t){var n=function(e,t){return e+"|"+t}(e=e.toUpperCase(),t=t?t.toUpperCase():Kh(e)),r=this.dict[n];if(void 0===r){var i=new lm(this.structure,e,t);r=this.list.length,this.dict[n]=r,this.list.push(i)}return r},cm.prototype.get=function(e){return this.list[e]};var um=function(e,t,n,r,i,o){this.structure=e,this.bondReferenceAtomIndices=[],this.resname=t,this.atomTypeIdList=n,this.hetero=r?1:0,this.chemCompType=i,this.bonds=o,this.atomCount=n.length,this.moleculeType=this.getMoleculeType(),this.backboneType=this.getBackboneType(0),this.backboneEndType=this.getBackboneType(-1),this.backboneStartType=this.getBackboneType(1),this.backboneIndexList=this.getBackboneIndexList();var a=Xd[this.backboneType],s=Xd[this.backboneStartType],l=Xd[this.backboneEndType],c=this.getAtomIndexByName(a.trace);this.traceAtomIndex=Sa(c,-1);var u=this.getAtomIndexByName(a.direction1);this.direction1AtomIndex=Sa(u,-1);var d=this.getAtomIndexByName(a.direction2);this.direction2AtomIndex=Sa(d,-1);var f=this.getAtomIndexByName(s.backboneStart);this.backboneStartAtomIndex=Sa(f,-1);var p,h=this.getAtomIndexByName(l.backboneEnd);this.backboneEndAtomIndex=Sa(h,-1),p=Ud.includes(t)?this.getAtomIndexByName("N1"):this.getAtomIndexByName("N3"),this.rungEndAtomIndex=Sa(p,-1)};um.prototype.getBackboneIndexList=function(){var e,t=[];switch(this.moleculeType){case 3:e=qd;break;case 4:case 5:e=Yd;break;default:return t}for(var n=this.structure.atomMap,r=this.atomTypeIdList,i=0,o=this.atomCount;i<o;++i){var a=n.get(r[i]);e.includes(a.atomname)&&t.push(i)}return t},um.prototype.getMoleculeType=function(){return this.isProtein()?3:this.isRna()?4:this.isDna()?5:this.isWater()?1:this.isIon()?2:this.isSaccharide()?6:0},um.prototype.getBackboneType=function(e){return this.hasProteinBackbone(e)?1:this.hasRnaBackbone(e)?2:this.hasDnaBackbone(e)?3:this.hasCgProteinBackbone(e)?4:this.hasCgRnaBackbone(e)?5:this.hasCgDnaBackbone(e)?6:0},um.prototype.isProtein=function(){return this.chemCompType?Cd.includes(this.chemCompType):this.hasAtomWithName("CA","C","N")||jd.includes(this.resname)},um.prototype.isCg=function(){var e=this.backboneType;return 4===e||5===e||6===e},um.prototype.isNucleic=function(){return this.isRna()||this.isDna()},um.prototype.isRna=function(){return this.chemCompType?kd.includes(this.chemCompType):1!==this.hetero&&(this.hasAtomWithName(["P","O3'","O3*"],["C4'","C4*"],["O2'","O2*","F2'","F2*"])||Zd.includes(this.resname)&&this.hasAtomWithName(["O2'","O2*","F2'","F2*"]))},um.prototype.isDna=function(){return this.chemCompType?Md.includes(this.chemCompType):1!==this.hetero&&(this.hasAtomWithName(["P","O3'","O3*"],["C3'","C3*"])&&!this.hasAtomWithName(["O2'","O2*","F2'","F2*"])||Hd.includes(this.resname))},um.prototype.isHetero=function(){return 1===this.hetero},um.prototype.isIon=function(){return Wd.includes(this.resname)},um.prototype.isWater=function(){return Gd.includes(this.resname)},um.prototype.isSaccharide=function(){return this.chemCompType?Td.includes(this.chemCompType):$d.includes(this.resname)},um.prototype.isStandardAminoacid=function(){return jd.includes(this.resname)},um.prototype.isStandardBase=function(){return Vd.includes(this.resname)},um.prototype.hasBackboneAtoms=function(e,t){var n=Xd[t];return-1===e?this.hasAtomWithName(n.trace,n.backboneEnd,n.direction1,n.direction2):0===e?this.hasAtomWithName(n.trace,n.direction1,n.direction2):1===e?this.hasAtomWithName(n.trace,n.backboneStart,n.direction1,n.direction2):this.hasAtomWithName(n.trace,n.backboneStart,n.backboneEnd,n.direction1,n.direction2)},um.prototype.hasProteinBackbone=function(e){return this.isProtein()&&this.hasBackboneAtoms(e,1)},um.prototype.hasRnaBackbone=function(e){return this.isRna()&&this.hasBackboneAtoms(e,2)},um.prototype.hasDnaBackbone=function(e){return this.isDna()&&this.hasBackboneAtoms(e,3)},um.prototype.hasCgProteinBackbone=function(e){return this.atomCount<7&&this.isProtein()&&this.hasBackboneAtoms(e,4)},um.prototype.hasCgRnaBackbone=function(e){return this.atomCount<11&&this.isRna()&&this.hasBackboneAtoms(e,5)},um.prototype.hasCgDnaBackbone=function(e){return this.atomCount<11&&this.isDna()&&this.hasBackboneAtoms(e,6)},um.prototype.hasBackbone=function(e){return this.hasProteinBackbone(e)||this.hasRnaBackbone(e)||this.hasDnaBackbone(e)||this.hasCgProteinBackbone(e)||this.hasCgRnaBackbone(e)||this.hasCgDnaBackbone(e)},um.prototype.getAtomIndexByName=function(e){var t=this.atomCount,n=this.structure.atomMap,r=this.atomTypeIdList;if(Array.isArray(e))for(var i=0;i<t;++i){var o=r[i];if(e.includes(n.get(o).atomname))return i}else for(var a=0;a<t;++a){var s=r[a];if(e===n.get(s).atomname)return a}},um.prototype.hasAtomWithName=function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=t.length,i=0;i<r;++i)if(void 0!==t[i]&&void 0===e.getAtomIndexByName(t[i]))return!1;return!0},um.prototype.getBonds=function(e){return void 0===this.bonds&&(this.bonds=function(e){var t=e.structure,n=t.getAtomProxy(),r=t.getAtomProxy(),i=e.atomCount,o=e.atomOffset,a=o+i-1,s=[],l=[],c=[];if(i>500)sl&&rl.warn("more than 500 atoms, skip residue for auto-bonding",e.qualifiedName());else if(i>50)for(var u=new Ah(e,!0),d=e.isCg()?1.2:2.3,f=o;f<a;++f){n.index=f;for(var p=n.covalent+d+.3,h=u.nearest(n,1/0,p*p),m=h.length,g=0;g<m;++g)r.index=h[g].index,n.index<r.index&&n.connectedTo(r)&&(s.push(n.index-o),l.push(r.index-o),c.push(Gh(n.resname,n.atomname,r.atomname)))}else for(var v=o;v<a;++v){n.index=v;for(var y=v+1;y<=a;++y)r.index=y,n.connectedTo(r)&&(s.push(v-o),l.push(y-o),c.push(Gh(n.resname,n.atomname,r.atomname)))}return{atomIndices1:s,atomIndices2:l,bondOrders:c}}(e)),this.bonds},um.prototype.getRings=function(){return void 0===this.rings&&this.calculateRings(),this.rings},um.prototype.getBondGraph=function(){return void 0===this.bondGraph&&this.calculateBondGraph(),this.bondGraph},um.prototype.getAromatic=function(e){return void 0===this.aromaticAtoms&&this.calculateAromatic(this.structure.getResidueProxy(e.residueIndex)),this.aromaticAtoms},um.prototype.getAromaticRings=function(e){return void 0===this.aromaticRings&&this.calculateAromatic(e),this.aromaticRings},um.prototype.calculateBondGraph=function(){for(var e=this.bondGraph={},t=this.getBonds(),n=t.atomIndices1.length,r=t.atomIndices1,i=t.atomIndices2,o=0;o<n;++o){var a=r[o],s=i[o];(e[a]=e[a]||[]).push(s),(e[s]=e[s]||[]).push(a)}},um.prototype.calculateRings=function(){for(var e=function(e,t){for(var n={count:t,visited:new Int32Array(t),queue:new Int32Array(t),pred:new Int32Array(t),left:new Int32Array(hm),right:new Int32Array(hm),color:new Int32Array(t),currentColor:0,rings:[],atomRings:[],bonds:e},r=0;r<t;r++)n.visited[r]=-1,n.pred[r]=-1;return n}(this.getBondGraph(),this.atomCount),t=0;t<e.count;t++)e.visited[t]>=0||pm(e,t);this.rings={atomRings:e.atomRings,rings:e.rings}},um.prototype.isAromatic=function(e){return this.aromaticAtoms=this.getAromatic(e),1===this.aromaticAtoms[e.index-e.residueAtomOffset]},um.prototype.calculateAromatic=function(e){var t=this,n=this.aromaticAtoms=new Uint8Array(this.atomCount),r=this.getRings().rings,i=r.map((function(n){return function(e){if(e.some((function(e){return!dm.includes(e.number)})))return!1;var t=0,n=new tp(3,e.length),r=n.data;return e.forEach((function(e){r[t+0]=e.x,r[t+1]=e.y,r[t+2]=e.z,t+=3})),new uh(n).vecC.length()<.05}(n.map((function(n){return t.structure.getAtomProxy(n+e.atomOffset)})))})),o=this.aromaticRings=[];r.forEach((function(e,t){i[t]&&(o.push(e),e.forEach((function(e){return n[e]=1})))}))},um.prototype.assignBondReferenceAtomIndices=function(){var e=this.getBondGraph(),t=this.getRings(),n=t.atomRings,r=t.rings,i=this.bonds,o=i.atomIndices1,a=i.atomIndices2,s=i.bondOrders,l=this.bondReferenceAtomIndices,c=i.atomIndices1.length;l.length=0;for(var u=0;u<c;++u)if(!(s[u]<=1)){var d=void 0,f=o[u],p=a[u],h=n[f],m=n[p];if(h&&m)for(var g=0;g<h.length;g++)if(-1!==m.indexOf(h[g])){d=r[h[g]];break}if(e[f].length>1)for(var v=0;v<e[f].length;++v){var y=e[f][v];if(y!==p&&(void 0===d||-1!==d.indexOf(y))){l[u]=y;break}}else if(e[p].length>1)for(var b=0;b<e[p].length;++b){var x=e[p][b];if(x!==f&&(void 0===d||-1!==d.indexOf(x))){l[u]=x;break}}}},um.prototype.getBondIndex=function(e,t){for(var n=this.bonds,r=n.atomIndices1,i=n.atomIndices2,o=r.indexOf(e),a=i.indexOf(t),s=a;-1!==o;){for(;-1!==a;){if(o===a)return o;a=i.indexOf(t,a+1)}o=r.indexOf(e,o+1),a=s}},um.prototype.getBondReferenceAtomIndex=function(e,t){var n=this.getBondIndex(e,t);if(void 0!==n)return 0===this.bondReferenceAtomIndices.length&&this.assignBondReferenceAtomIndices(),this.bondReferenceAtomIndices[n]};var dm=[5,6,7,8,14,15,16,32,33,50,51,83];function fm(e,t,n){if(!(n<t)){for(var r=e.pred,i=e.color,o=e.left,a=e.right,s=++e.currentColor,l=t,c=0;c<hm&&(i[l]=s,!((l=r[l])<0));c++);var u=0,d=0,f=!1,p=0;l=n;for(var h=0;h<hm;h++){if(i[l]===s){p=l,f=!0;break}if(a[d++]=l,(l=r[l])<0)break}if(f){l=t;for(var m=0;m<hm&&(o[u++]=l,p!==l)&&!((l=r[l])<0);m++);for(var g=u+d,v=new Array(g),y=0,b=0;b<u;b++)v[y++]=o[b];for(var x=d-1;x>=0;x--)v[y++]=a[x];for(var w=e.rings.length,_=0;_<g;++_){var S=v[_];e.atomRings[S]?e.atomRings[S].push(w):e.atomRings[S]=[w]}e.rings.push(v)}}}function pm(e,t){var n=e.bonds,r=e.visited,i=e.queue,o=e.pred;r[t]=1,i[0]=t;for(var a=0,s=1;a<s;){var l=i[a++];if(void 0!==n[l])for(var c=n[l].length,u=0;u<c;u++){var d=n[l][u];r[d]>0?o[d]!==l&&o[l]!==d&&fm(e,l,d):(r[d]=1,i[s++]=d,o[d]=l)}}}var hm=4;var mm=function(e){this.structure=e,this.dict={},this.list=[]};mm.prototype.add=function(e,t,n,r,i){void 0===r&&(r="");var o=function(e,t,n,r){return void 0===r&&(r=""),e+"|"+t.join(",")+"|"+(n?1:0)+"|"+r}(e=e.toUpperCase(),t,n,r),a=this.dict[o];if(void 0===a){var s=new um(this.structure,e,t,n,r,i);a=this.list.length,this.dict[o]=a,this.list.push(s)}return a},mm.prototype.get=function(e){return this.list[e]};var gm=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.bondStore=e.bondStore,this._v12=new H,this._v13=new H,this._ap1=this.structure.getAtomProxy(),this._ap2=this.structure.getAtomProxy(),this._ap3=this.structure.getAtomProxy()},vm={atom1:{configurable:!0},atom2:{configurable:!0},atomIndex1:{configurable:!0},atomIndex2:{configurable:!0},bondOrder:{configurable:!0}};vm.atom1.get=function(){return this.structure.getAtomProxy(this.atomIndex1)},vm.atom2.get=function(){return this.structure.getAtomProxy(this.atomIndex2)},vm.atomIndex1.get=function(){return this.bondStore.atomIndex1[this.index]},vm.atomIndex1.set=function(e){this.bondStore.atomIndex1[this.index]=e},vm.atomIndex2.get=function(){return this.bondStore.atomIndex2[this.index]},vm.atomIndex2.set=function(e){this.bondStore.atomIndex2[this.index]=e},vm.bondOrder.get=function(){return this.bondStore.bondOrder[this.index]},vm.bondOrder.set=function(e){this.bondStore.bondOrder[this.index]=e},gm.prototype.getOtherAtomIndex=function(e){return e===this.atomIndex1?this.atomIndex2:this.atomIndex1},gm.prototype.getOtherAtom=function(e){return this.structure.getAtomProxy(this.getOtherAtomIndex(e.index))},gm.prototype.getReferenceAtomIndex=function(){var e=this._ap1,t=this._ap2;if(e.index=this.atomIndex1,t.index=this.atomIndex2,e.residueIndex===t.residueIndex){var n=e.index-e.residueAtomOffset,r=t.index-t.residueAtomOffset,i=e.residueType.getBondReferenceAtomIndex(n,r);if(void 0!==i)return i+e.residueAtomOffset;console.warn("No reference atom found",e.index,t.index)}},gm.prototype.calculateShiftDir=function(e){void 0===e&&(e=new H);var t=this._ap1,n=this._ap2,r=this._ap3,i=this._v12,o=this._v13;t.index=this.atomIndex1,n.index=this.atomIndex2;var a=this.getReferenceAtomIndex();i.subVectors(t,n).normalize(),void 0!==a?(r.index=a,o.subVectors(t,r)):o.copy(t),o.normalize();var s=i.dot(o);return 1-Math.abs(s)<1e-5&&(o.set(1,0,0),s=i.dot(o),1-Math.abs(s)<1e-5&&(o.set(0,1,0),s=i.dot(o))),e.copy(o.sub(i.multiplyScalar(s))).normalize()},gm.prototype.qualifiedName=function(){return this.atomIndex1+"="+this.atomIndex2},gm.prototype.clone=function(){return new gm(this.structure,this.index)},gm.prototype.toObject=function(){return{atomIndex1:this.atomIndex1,atomIndex2:this.atomIndex2,bondOrder:this.bondOrder}},Object.defineProperties(gm.prototype,vm);var ym=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueMap=e.residueMap,this.atomMap=e.atomMap},bm={entity:{configurable:!0},entityIndex:{configurable:!0},chain:{configurable:!0},chainIndex:{configurable:!0},atomOffset:{configurable:!0},atomCount:{configurable:!0},atomEnd:{configurable:!0},modelIndex:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0},resno:{configurable:!0},sstruc:{configurable:!0},inscode:{configurable:!0},residueType:{configurable:!0},resname:{configurable:!0},hetero:{configurable:!0},moleculeType:{configurable:!0},backboneType:{configurable:!0},backboneStartType:{configurable:!0},backboneEndType:{configurable:!0},traceAtomIndex:{configurable:!0},direction1AtomIndex:{configurable:!0},direction2AtomIndex:{configurable:!0},backboneStartAtomIndex:{configurable:!0},backboneEndAtomIndex:{configurable:!0},rungEndAtomIndex:{configurable:!0},x:{configurable:!0},y:{configurable:!0},z:{configurable:!0}};bm.entity.get=function(){return this.structure.entityList[this.entityIndex]},bm.entityIndex.get=function(){return this.chainStore.entityIndex[this.chainIndex]},bm.chain.get=function(){return this.structure.getChainProxy(this.chainIndex)},bm.chainIndex.get=function(){return this.residueStore.chainIndex[this.index]},bm.chainIndex.set=function(e){this.residueStore.chainIndex[this.index]=e},bm.atomOffset.get=function(){return this.residueStore.atomOffset[this.index]},bm.atomOffset.set=function(e){this.residueStore.atomOffset[this.index]=e},bm.atomCount.get=function(){return this.residueStore.atomCount[this.index]},bm.atomCount.set=function(e){this.residueStore.atomCount[this.index]=e},bm.atomEnd.get=function(){return this.atomOffset+this.atomCount-1},bm.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},bm.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},bm.chainid.get=function(){return this.chainStore.getChainid(this.chainIndex)},bm.resno.get=function(){return this.residueStore.resno[this.index]},bm.resno.set=function(e){this.residueStore.resno[this.index]=e},bm.sstruc.get=function(){return this.residueStore.getSstruc(this.index)},bm.sstruc.set=function(e){this.residueStore.setSstruc(this.index,e)},bm.inscode.get=function(){return this.residueStore.getInscode(this.index)},bm.inscode.set=function(e){this.residueStore.setInscode(this.index,e)},bm.residueType.get=function(){return this.residueMap.get(this.residueStore.residueTypeId[this.index])},bm.resname.get=function(){return this.residueType.resname},bm.hetero.get=function(){return this.residueType.hetero},bm.moleculeType.get=function(){return this.residueType.moleculeType},bm.backboneType.get=function(){return this.residueType.backboneType},bm.backboneStartType.get=function(){return this.residueType.backboneStartType},bm.backboneEndType.get=function(){return this.residueType.backboneEndType},bm.traceAtomIndex.get=function(){return this.residueType.traceAtomIndex+this.atomOffset},bm.direction1AtomIndex.get=function(){return this.residueType.direction1AtomIndex+this.atomOffset},bm.direction2AtomIndex.get=function(){return this.residueType.direction2AtomIndex+this.atomOffset},bm.backboneStartAtomIndex.get=function(){return this.residueType.backboneStartAtomIndex+this.atomOffset},bm.backboneEndAtomIndex.get=function(){return this.residueType.backboneEndAtomIndex+this.atomOffset},bm.rungEndAtomIndex.get=function(){return this.residueType.rungEndAtomIndex+this.atomOffset},bm.x.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.x[t];return e/this.atomCount},bm.y.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.y[t];return e/this.atomCount},bm.z.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.z[t];return e/this.atomCount},ym.prototype.eachAtom=function(e,t){var n=this.atomCount,r=this.atomOffset,i=this.structure._ap,o=r+n;if(t&&t.atomOnlyTest)for(var a=t.atomOnlyTest,s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)},ym.prototype.positionToArray=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t+0]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},ym.prototype.isProtein=function(){return 3===this.residueType.moleculeType},ym.prototype.isNucleic=function(){var e=this.residueType.moleculeType;return 4===e||5===e},ym.prototype.isRna=function(){return 4===this.residueType.moleculeType},ym.prototype.isDna=function(){return 5===this.residueType.moleculeType},ym.prototype.isCg=function(){var e=this.residueType.backboneType;return 4===e||5===e||6===e},ym.prototype.isPolymer=function(){if(this.structure.entityList.length>0)return this.entity.isPolymer();var e=this.residueType.moleculeType;return 3===e||4===e||5===e},ym.prototype.isHetero=function(){return 1===this.residueType.hetero},ym.prototype.isWater=function(){return 1===this.residueType.moleculeType},ym.prototype.isIon=function(){return 2===this.residueType.moleculeType},ym.prototype.isSaccharide=function(){return 6===this.residueType.moleculeType},ym.prototype.isStandardAminoacid=function(){return this.residueType.isStandardAminoacid()},ym.prototype.isStandardBase=function(){return this.residueType.isStandardBase()},ym.prototype.isHelix=function(){return Ed.includes(this.sstruc)},ym.prototype.isSheet=function(){return Pd.includes(this.sstruc)},ym.prototype.isTurn=function(){return Rd.includes(this.sstruc)&&this.isProtein()},ym.prototype.getAtomType=function(e){return this.atomMap.get(this.atomStore.atomTypeId[e])},ym.prototype.getResname1=function(){return Bd[this.resname.toUpperCase()]||"X"},ym.prototype.getBackboneType=function(e){switch(e){case-1:return this.residueType.backboneStartType;case 1:return this.residueType.backboneEndType;default:return this.residueType.backboneType}},ym.prototype.getAtomIndexByName=function(e){var t=this.residueType.getAtomIndexByName(e);return void 0!==t&&(t+=this.atomOffset),t},ym.prototype.hasAtomWithName=function(e){return this.residueType.hasAtomWithName(e)},ym.prototype.getAtomnameList=function(){console.warn("getAtomnameList - might be expensive");for(var e=this.atomCount,t=this.atomOffset,n=new Array(e),r=0;r<e;++r)n[r]=this.getAtomType(t+r).atomname;return n},ym.prototype.connectedTo=function(e){var t=this.structure.getAtomProxy(this.backboneEndAtomIndex),n=this.structure.getAtomProxy(e.backboneStartAtomIndex);return!(!t||!n)&&t.connectedTo(n)},ym.prototype.getNextConnectedResidue=function(){var e=this.chainStore.residueOffset[this.chainIndex],t=this.chainStore.residueCount[this.chainIndex],n=this.index+1;if(n<e+t){var r=this.structure.getResidueProxy(n);if(this.connectedTo(r))return r}else if(n===e+t){var i=this.structure.getResidueProxy(e);if(this.connectedTo(i))return i}},ym.prototype.getPreviousConnectedResidue=function(e){var t=this.chainStore.residueOffset[this.chainIndex],n=this.index-1;if(n>=t){var r=Sa(e,this.structure.getResidueProxy());if(r.index=n,r.connectedTo(this))return r}else if(n===t-1){var i=this.chainStore.residueCount[this.chainIndex],o=Sa(e,this.structure.getResidueProxy());if(o.index=t+i-1,o.connectedTo(this))return o}},ym.prototype.getBonds=function(){return this.residueType.getBonds(this)},ym.prototype.getRings=function(){return this.residueType.getRings()},ym.prototype.getAromaticRings=function(){return this.residueType.getAromaticRings(this)},ym.prototype.qualifiedName=function(e){void 0===e&&(e=!1);var t="";return this.resname&&!e&&(t+="["+this.resname+"]"),void 0!==this.resno&&(t+=this.resno),this.inscode&&(t+="^"+this.inscode),this.chain&&(t+=":"+this.chainname),t+="/"+this.modelIndex},ym.prototype.clone=function(){return new ym(this.structure,this.index)},ym.prototype.toObject=function(){return{index:this.index,chainIndex:this.chainIndex,atomOffset:this.atomOffset,atomCount:this.atomCount,resno:this.resno,resname:this.resname,sstruc:this.sstruc}},Object.defineProperties(ym.prototype,bm);var xm=function(e,t,n){this.structure=e,this.residueIndexStart=t,this.residueIndexEnd=n,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueCount=n-t+1;var r=this.structure.getResidueProxy(this.residueIndexStart),i=this.structure.getResidueProxy(this.residueIndexEnd);this.isPrevConnected=void 0!==r.getPreviousConnectedResidue();var o=i.getNextConnectedResidue();this.isNextConnected=void 0!==o,this.isNextNextConnected=void 0!==o&&void 0!==o.getNextConnectedResidue(),this.isCyclic=i.connectedTo(r),this.__residueProxy=this.structure.getResidueProxy()},wm={chainIndex:{configurable:!0},modelIndex:{configurable:!0},chainname:{configurable:!0}};wm.chainIndex.get=function(){return this.residueStore.chainIndex[this.residueIndexStart]},wm.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},wm.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},xm.prototype.isProtein=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isProtein()},xm.prototype.isCg=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isCg()},xm.prototype.isNucleic=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isNucleic()},xm.prototype.getMoleculeType=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.moleculeType},xm.prototype.getBackboneType=function(e){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.getBackboneType(e)},xm.prototype.getAtomIndexByType=function(e,t){this.isCyclic?-1===e?e=this.residueCount-1:e===this.residueCount&&(e=0):(-1!==e||this.isPrevConnected||(e+=1),e!==this.residueCount||this.isNextNextConnected||(e-=1));var n,r=this.__residueProxy;switch(r.index=this.residueIndexStart+e,t){case"trace":n=r.traceAtomIndex;break;case"direction1":n=r.direction1AtomIndex;break;case"direction2":n=r.direction2AtomIndex;break;default:n=r.getAtomIndexByName(t)}return n},xm.prototype.eachAtom=function(e,t){this.eachResidue((function(n){n.eachAtom(e,t)}))},xm.prototype.eachAtomN=function(e,t,n){for(var r=this,i=this.residueCount,o=new Array(e),a=0;a<e;++a)o[a]=r.structure.getAtomProxy(r.getAtomIndexByType(a,n));t.apply(this,o);for(var s=e;s<i;++s){for(var l=1;l<e;++l)o[l-1].index=o[l].index;o[e-1].index=r.getAtomIndexByType(s,n),t.apply(r,o)}},xm.prototype.eachResidue=function(e){for(var t=this.structure.getResidueProxy(),n=this.residueCount,r=this.residueIndexStart,i=0;i<n;++i)t.index=r+i,e(t)},xm.prototype.qualifiedName=function(){var e=this.structure.getResidueProxy(this.residueIndexStart),t=this.structure.getResidueProxy(this.residueIndexEnd);return e.qualifiedName()+" - "+t.qualifiedName()},Object.defineProperties(xm.prototype,wm);var _m=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore},Sm={entity:{configurable:!0},model:{configurable:!0},entityIndex:{configurable:!0},modelIndex:{configurable:!0},residueOffset:{configurable:!0},residueCount:{configurable:!0},residueEnd:{configurable:!0},atomOffset:{configurable:!0},atomEnd:{configurable:!0},atomCount:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0}};Sm.entity.get=function(){return this.structure.entityList[this.entityIndex]},Sm.model.get=function(){return this.structure.getModelProxy(this.modelIndex)},Sm.entityIndex.get=function(){return this.chainStore.entityIndex[this.index]},Sm.entityIndex.set=function(e){this.chainStore.entityIndex[this.index]=e},Sm.modelIndex.get=function(){return this.chainStore.modelIndex[this.index]},Sm.modelIndex.set=function(e){this.chainStore.modelIndex[this.index]=e},Sm.residueOffset.get=function(){return this.chainStore.residueOffset[this.index]},Sm.residueOffset.set=function(e){this.chainStore.residueOffset[this.index]=e},Sm.residueCount.get=function(){return this.chainStore.residueCount[this.index]},Sm.residueCount.set=function(e){this.chainStore.residueCount[this.index]=e},Sm.residueEnd.get=function(){return this.residueOffset+this.residueCount-1},Sm.atomOffset.get=function(){return this.residueStore.atomOffset[this.residueOffset]},Sm.atomEnd.get=function(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1},Sm.atomCount.get=function(){return 0===this.residueCount?0:this.atomEnd-this.atomOffset+1},Sm.chainname.get=function(){return this.chainStore.getChainname(this.index)},Sm.chainname.set=function(e){this.chainStore.setChainname(this.index,e)},Sm.chainid.get=function(){return this.chainStore.getChainid(this.index)},Sm.chainid.set=function(e){this.chainStore.setChainid(this.index,e)},_m.prototype.eachAtom=function(e,t){this.eachResidue((function(n){n.eachAtom(e,t)}),t)},_m.prototype.eachResidue=function(e,t){var n=this.residueCount,r=this.residueOffset,i=this.structure._rp,o=r+n;if(t&&t.test){var a=t.residueOnlyTest;if(a)for(var s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)}else for(var c=r;c<o;++c)i.index=c,e(i)},_m.prototype.eachResidueN=function(e,t){var n=this.residueCount,r=this.residueOffset,i=r+n;if(!(n<e)){for(var o=new Array(e),a=0;a<e;++a)o[a]=this.structure.getResidueProxy(r+a);t.apply(this,o);for(var s=r+e;s<i;++s){for(var l=0;l<e;++l)o[l].index+=1;t.apply(this,o)}}},_m.prototype.eachPolymer=function(e,t){for(var n=0,r=0,i=t?t.residueOnlyTest:void 0,o=this.model.structure,a=this.residueCount,s=this.residueOffset,l=s+a,c=this.structure.getResidueProxy(),u=this.structure.getResidueProxy(s),d=this.structure.getAtomProxy(),f=this.structure.getAtomProxy(),p=!0,h=s+1;h<l;++h){c.index=u.index,u.index=h;var m=p?c.backboneEndType:c.backboneType,g=u.backboneType;p&&(n=c.index,p=!1),r=u.index,0!==m&&m===g?(d.index=c.backboneEndAtomIndex,f.index=u.backboneStartAtomIndex,d&&f&&d.connectedTo(f)&&(!i||i(c)&&i(u))||(c.index-n>1&&e(new xm(o,n,c.index)),n=r)):(0!==m&&c.index-n>1&&e(new xm(o,n,c.index)),n=r)}r-n>1&&this.structure.getResidueProxy(n).backboneEndType&&e(new xm(o,n,r))},_m.prototype.qualifiedName=function(){return":"+this.chainname+"/"+this.modelIndex},_m.prototype.clone=function(){return new _m(this.structure,this.index)},_m.prototype.toObject=function(){return{index:this.index,residueOffset:this.residueOffset,residueCount:this.residueCount,chainname:this.chainname}},Object.defineProperties(_m.prototype,Sm);var Cm=function(e,t){void 0===t&&(t=0),this.structure=e,this.index=t,this.modelStore=e.modelStore,this.chainStore=e.chainStore,this.residueStore=e.residueStore},km={chainOffset:{configurable:!0},chainCount:{configurable:!0},residueOffset:{configurable:!0},atomOffset:{configurable:!0},chainEnd:{configurable:!0},residueEnd:{configurable:!0},atomEnd:{configurable:!0},residueCount:{configurable:!0},atomCount:{configurable:!0}};km.chainOffset.get=function(){return this.modelStore.chainOffset[this.index]},km.chainOffset.set=function(e){this.modelStore.chainOffset[this.index]=e},km.chainCount.get=function(){return this.modelStore.chainCount[this.index]},km.chainCount.set=function(e){this.modelStore.chainCount[this.index]=e},km.residueOffset.get=function(){return this.chainStore.residueOffset[this.chainOffset]},km.atomOffset.get=function(){return this.residueStore.atomOffset[this.residueOffset]},km.chainEnd.get=function(){return this.chainOffset+this.chainCount-1},km.residueEnd.get=function(){return this.chainStore.residueOffset[this.chainEnd]+this.chainStore.residueCount[this.chainEnd]-1},km.atomEnd.get=function(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1},km.residueCount.get=function(){return 0===this.chainCount?0:this.residueEnd-this.residueOffset+1},km.atomCount.get=function(){return 0===this.residueCount?0:this.atomEnd-this.atomOffset+1},Cm.prototype.eachAtom=function(e,t){this.eachChain((function(n){n.eachAtom(e,t)}),t)},Cm.prototype.eachResidue=function(e,t){this.eachChain((function(n){n.eachResidue(e,t)}),t)},Cm.prototype.eachPolymer=function(e,t){if(t&&t.chainOnlyTest){var n=t.chainOnlyTest;this.eachChain((function(r){n(r)&&r.eachPolymer(e,t)}))}else this.eachChain((function(n){n.eachPolymer(e,t)}))},Cm.prototype.eachChain=function(e,t){var n=this.chainCount,r=this.chainOffset,i=this.structure._cp,o=r+n;if(t&&t.test){var a=t.chainOnlyTest;if(a)for(var s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)}else for(var c=r;c<o;++c)i.index=c,e(i)},Cm.prototype.qualifiedName=function(){return"/"+this.index},Cm.prototype.clone=function(){return new Cm(this.structure,this.index)},Cm.prototype.toObject=function(){return{index:this.index,chainOffset:this.chainOffset,chainCount:this.chainCount}},Object.defineProperties(Cm.prototype,km);var Mm=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),this.signals={refreshed:new fs},this.init(e,t)},Tm={type:{configurable:!0}};Mm.prototype.init=function(e,t){this.name=e,this.path=t,this.title="",this.id="",this.data={structure:this,"@spatialLookup":void 0,"@valenceModel":void 0},this.header={},this.extraData={},this.atomSetCache={},this.atomSetDict={},this.biomolDict={},this.entityList=[],this.unitcell=void 0,this.frames=[],this.boxes=[],this.validation=void 0,this.bondStore=new hh(0),this.backboneBondStore=new hh(0),this.rungBondStore=new hh(0),this.atomStore=new mh(0),this.residueStore=new gh(0),this.chainStore=new vh(0),this.modelStore=new yh(0),this.atomMap=new cm(this),this.residueMap=new mm(this),this.bondHash=void 0,this.spatialHash=void 0,this.atomSet=void 0,this.bondSet=void 0,this.center=new H,this.boundingBox=new K,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy()},Tm.type.get=function(){return"Structure"},Mm.prototype.finalizeAtoms=function(){this.atomSet=this.getAtomSet(),this.atomCount=this.atomStore.count,this.boundingBox=this.getBoundingBox(void 0,this.boundingBox),this.center=this.boundingBox.getCenter(new H),this.spatialHash=new md(this.atomStore,this.boundingBox)},Mm.prototype.finalizeBonds=function(){var e=this;for(var t in this.bondSet=this.getBondSet(),this.bondCount=this.bondStore.count,this.bondHash=new ph(this.bondStore,this.atomStore.count),this.atomSetCache={},this.atomSetDict.rung||(this.atomSetDict.rung=this.getAtomSet(!1)),e.atomSetDict)e.atomSetCache["__"+t]=e.atomSetDict[t].clone()},Mm.prototype.getBondProxy=function(e){return new gm(this,e)},Mm.prototype.getAtomProxy=function(e){return new Sh(this,e)},Mm.prototype.getResidueProxy=function(e){return new ym(this,e)},Mm.prototype.getChainProxy=function(e){return new _m(this,e)},Mm.prototype.getModelProxy=function(e){return new Cm(this,e)},Mm.prototype.getBondSet=function(){var e=this.bondStore.count,t=new bd(e),n=this.atomSet;if(n)if(n.isAllSet())t.setAll();else if(n.isAllClear())t.clearAll();else for(var r=this.getBondProxy(),i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index);else t.setAll();return t},Mm.prototype.getBackboneBondSet=function(){var e=this.backboneBondStore.count,t=new bd(e),n=this.atomSetCache.__backbone;if(n){var r=this.getBondProxy();r.bondStore=this.backboneBondStore;for(var i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index)}else t.setAll();return t},Mm.prototype.getRungBondSet=function(){var e=this.rungBondStore.count,t=new bd(e),n=this.atomSetCache.__rung;if(n){var r=this.getBondProxy();r.bondStore=this.rungBondStore;for(var i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index)}else t.setAll();return t},Mm.prototype.getAtomSet=function(e){var t=this.atomStore.count;if(void 0===e)return new bd(t,!0);if(e instanceof bd)return e;if(!0===e)return new bd(t,!0);if(e&&e.test){var n=e.string;if(n in this.atomSetCache)return this.atomSetCache[n];if(""===n)return new bd(t,!0);var r=new bd(t);return this.eachAtom((function(e){r.set(e.index)}),e),this.atomSetCache[n]=r,r}return!1===e?new bd(t):new bd(t,!0)},Mm.prototype.getAtomSetWithinSelection=function(e,t){var n=this.spatialHash,r=this.getAtomSet(!1),i=this.getAtomProxy();return n?(this.getAtomSet(e).forEach((function(e){i.index=e,n.within(i.x,i.y,i.z,t).forEach((function(e){r.set(e)}))})),r):r},Mm.prototype.getAtomSetWithinPoint=function(e,t){var n=e,r=this.getAtomSet(!1);return this.spatialHash?(this.spatialHash.within(n.x,n.y,n.z,t).forEach((function(e){r.set(e)})),r):r},Mm.prototype.getAtomSetWithinVolume=function(e,t,n,r,i){var o=new dh(e,n,r,i),a=o.getDataPosition(),s=a.length,l=o.matrix.getMaxScaleOnAxis(),c=this.getAtomSet(!1);if(!this.spatialHash)return c;for(var u=0;u<s;u+=3)this.spatialHash.within(a[u],a[u+1],a[u+2],l).forEach((function(e){c.set(e)}));return c},Mm.prototype.getAtomSetWithinGroup=function(e){var t=this.atomStore.residueIndex,n=this.getAtomSet(!1),r=this.getResidueProxy();return this.getAtomSet(e).forEach((function(e){r.index=t[e];for(var i=r.atomOffset;i<=r.atomEnd;++i)n.set(i)})),n},Mm.prototype.getSelection=function(){return!1},Mm.prototype.getStructure=function(){return this},Mm.prototype.eachEntity=function(e,t){this.entityList.forEach((function(n){void 0!==t&&n.getEntityType()!==t||e(n)}))},Mm.prototype.eachBond=function(e,t){var n,r=this.getBondProxy();if(t&&t.test&&(n=this.getBondSet(),this.bondSet&&n.intersection(this.bondSet)),n)n.forEach((function(t){r.index=t,e(r)}));else for(var i=this.bondStore.count,o=0;o<i;++o)r.index=o,e(r)},Mm.prototype.eachAtom=function(e,t){if(t&&t.test)this.eachModel((function(n){n.eachAtom(e,t)}),t);else for(var n=this.atomStore.count,r=this.getAtomProxy(),i=0;i<n;++i)r.index=i,e(r)},Mm.prototype.eachResidue=function(e,t){if(t&&t.test){var n=this.modelStore.count,r=this.getModelProxy(),i=t.modelOnlyTest;if(i)for(var o=0;o<n;++o)r.index=o,i(r)&&r.eachResidue(e,t);else for(var a=0;a<n;++a)r.index=a,r.eachResidue(e,t)}else for(var s=this.residueStore.count,l=this.getResidueProxy(),c=0;c<s;++c)l.index=c,e(l)},Mm.prototype.eachResidueN=function(e,t){var n=this.residueStore.count;if(!(n<e)){for(var r=new Array(e),i=0;i<e;++i)r[i]=this.getResidueProxy(i);t.apply(this,r);for(var o=e;o<n;++o){for(var a=0;a<e;++a)r[a].index+=1;t.apply(this,r)}}},Mm.prototype.eachPolymer=function(e,t){if(t&&t.modelOnlyTest){var n=t.modelOnlyTest;this.eachModel((function(r){n(r)&&r.eachPolymer(e,t)}))}else this.eachModel((function(n){n.eachPolymer(e,t)}))},Mm.prototype.eachChain=function(e,t){if(t&&t.test)this.eachModel((function(n){n.eachChain(e,t)}));else for(var n=this.chainStore.count,r=this.getChainProxy(),i=0;i<n;++i)r.index=i,e(r)},Mm.prototype.eachModel=function(e,t){var n=this.modelStore.count,r=this.getModelProxy();if(t&&t.test){var i=t.modelOnlyTest;if(i)for(var o=0;o<n;++o)r.index=o,i(r)&&e(r);else for(var a=0;a<n;++a)r.index=a,e(r)}else for(var s=0;s<n;++s)r.index=s,e(r)},Mm.prototype.getAtomData=function(e){var t=Object.assign({},e);t.colorParams&&(t.colorParams.structure=this.getStructure());var n,r,i=t.what,o=Sa(t.atomSet,this.atomSet),a={},s=this.getAtomProxy(),l=o.getSize();i&&!i.position||(a.position=new Float32Array(3*l)),i&&!i.color||!t.colorParams||(a.color=new Float32Array(3*l),r=pl.getScheme(t.colorParams)),i&&!i.picking||(a.picking=new Pf(new Float32Array(l),this.getStructure())),i&&!i.radius||(a.radius=new Float32Array(l),n=new sh(t.radiusParams)),i&&!i.index||(a.index=new Uint32Array(l));var c=a.position,u=a.color,d=a.picking,f=a.radius,p=a.index;return o.forEach((function(e,t){var i=3*t;s.index=e,c&&s.positionToArray(c,i),u&&r.atomColorToArray(s,u,i),d&&(d.array[t]=e),f&&(f[t]=n.atomRadius(s)),p&&(p[t]=e)})),a},Mm.prototype.getBondData=function(e){var t=Object.assign({},e);t.colorParams&&(t.colorParams.structure=this.getStructure());var n,r,i=t.what,o=Sa(t.bondSet,this.bondSet),a=Sa(t.multipleBond,"off"),s="off"!==a,l="offset"===a,c=Sa(t.bondScale,.4),u=Sa(t.bondSpacing,1),d={},f=this.getBondProxy();t.bondStore&&(f.bondStore=t.bondStore);var p,h=this.getAtomProxy(),m=this.getAtomProxy();if(s){var g=f.bondStore.bondOrder;p=0,o.forEach((function(e){p+=g[e]}))}else p=o.getSize();i&&!i.position||(d.position1=new Float32Array(3*p),d.position2=new Float32Array(3*p)),i&&!i.color||!t.colorParams||(d.color=new Float32Array(3*p),d.color2=new Float32Array(3*p),r=pl.getScheme(t.colorParams)),i&&!i.picking||(d.picking=new Of(new Float32Array(p),this.getStructure(),t.bondStore)),(!i||i.radius||s&&i.position)&&(n=new sh(t.radiusParams)),i&&!i.radius||(d.radius=new Float32Array(p),t.radius2&&(d.radius2=new Float32Array(p)));var v,y,b,x,w,_,S=d.position1,C=d.position2,k=d.color,M=d.color2,T=d.picking,A=d.radius,E=d.radius2,P=0,R=new H,O=new H,I=new H;return o.forEach((function(e){if(y=3*P,f.index=e,h.index=f.atomIndex1,m.index=f.atomIndex2,x=f.bondOrder,S)if(s&&x>1){var t=n.atomRadius(h);_=t*c/(.5*x),f.calculateShiftDir(I),l?(w=2*u*t,I.multiplyScalar(w),I.negate(),O.subVectors(m,h).multiplyScalar(Math.max(.1,w/1.88)),h.positionToArray(S,y),m.positionToArray(C,y),x>=2&&(R.addVectors(h,I).add(O).toArray(S,y+3),R.addVectors(m,I).sub(O).toArray(C,y+3),x>=3&&(R.subVectors(h,I).add(O).toArray(S,y+6),R.subVectors(m,I).sub(O).toArray(C,y+6)))):(w=(u-c)*t,I.multiplyScalar(w),2===x?(R.addVectors(h,I).toArray(S,y),R.subVectors(h,I).toArray(S,y+3),R.addVectors(m,I).toArray(C,y),R.subVectors(m,I).toArray(C,y+3)):3===x?(h.positionToArray(S,y),R.addVectors(h,I).toArray(S,y+3),R.subVectors(h,I).toArray(S,y+6),m.positionToArray(C,y),R.addVectors(m,I).toArray(C,y+3),R.subVectors(m,I).toArray(C,y+6)):(h.positionToArray(S,y),m.positionToArray(C,y)))}else h.positionToArray(S,y),m.positionToArray(C,y);if(k&&M&&(r.bondColorToArray(f,1,k,y),r.bondColorToArray(f,0,M,y),s&&x>1))for(v=1;v<x;++v)dc(k,y,b=3*v+y,3),dc(M,y,b,3);if(T&&T.array&&(T.array[P]=e,s&&x>1))for(v=1;v<x;++v)T.array[P+v]=e;if(A&&(A[P]=n.atomRadius(h),s&&x>1))for(_=A[P]*c/(l?1:.5*x),v=l?1:0;v<x;++v)A[P+v]=_;if(E&&(E[P]=n.atomRadius(m),s&&x>1))for(_=E[P]*c/(l?1:.5*x),v=l?1:0;v<x;++v)E[P+v]=_;P+=s?x:1})),d},Mm.prototype.getBackboneAtomData=function(e){return e=Object.assign({atomSet:this.atomSetCache.__backbone},e),this.getAtomData(e)},Mm.prototype.getBackboneBondData=function(e){return e=Object.assign({bondSet:this.getBackboneBondSet(),bondStore:this.backboneBondStore},e),this.getBondData(e)},Mm.prototype.getRungAtomData=function(e){return e=Object.assign({atomSet:this.atomSetCache.__rung},e),this.getAtomData(e)},Mm.prototype.getRungBondData=function(e){return e=Object.assign({bondSet:this.getRungBondSet(),bondStore:this.rungBondStore},e),this.getBondData(e)},Mm.prototype.getBoundingBox=function(e,t){sl&&rl.time("getBoundingBox"),t=t||new K;var n=1/0,r=1/0,i=1/0,o=-1/0,a=-1/0,s=-1/0;return this.eachAtom((function(e){var t=e.x,l=e.y,c=e.z;t<n&&(n=t),l<r&&(r=l),c<i&&(i=c),t>o&&(o=t),l>a&&(a=l),c>s&&(s=c)}),e),t.min.set(n,r,i),t.max.set(o,a,s),sl&&rl.timeEnd("getBoundingBox"),t},Mm.prototype.getPrincipalAxes=function(e){sl&&rl.time("getPrincipalAxes");var t=0,n=new tp(3,this.atomCount),r=n.data;return this.eachAtom((function(e){r[t+0]=e.x,r[t+1]=e.y,r[t+2]=e.z,t+=3}),e),sl&&rl.timeEnd("getPrincipalAxes"),new uh(n)},Mm.prototype.atomCenter=function(e){return e?this.getBoundingBox(e).getCenter(new H):this.center.clone()},Mm.prototype.hasCoords=function(){if(void 0===this._hasCoords){var e=this.atomStore;this._hasCoords=0!==pc(e.x)||0!==fc(e.x)||0!==pc(e.y)||0!==fc(e.y)||0!==pc(e.z)||0!==fc(e.z)||e.count/this.modelStore.count===1}return this._hasCoords},Mm.prototype.getSequence=function(e){var t=[],n=this.getResidueProxy();return this.eachAtom((function(e){n.index=e.residueIndex,e.index===n.traceAtomIndex&&t.push(n.getResname1())}),e),t},Mm.prototype.getAtomIndices=function(e){if(e&&e.string){var t=[];return this.eachAtom((function(e){t.push(e.index)}),e),new Uint32Array(t)}return this.getAtomData({what:{index:!0}}).index},Mm.prototype.getChainnameCount=function(e){var t=new Set;return this.eachChain((function(e){e.residueCount&&t.add(e.chainname)}),e),t.size},Mm.prototype.updatePosition=function(e){var t=0;this.eachAtom((function(n){n.positionFromArray(e,t),t+=3}),void 0),this._hasCoords=void 0},Mm.prototype.refreshPosition=function(){this.getBoundingBox(void 0,this.boundingBox),this.boundingBox.getCenter(this.center),this.spatialHash=new md(this.atomStore,this.boundingBox)},Mm.prototype.dispose=function(){this.frames&&(this.frames.length=0),this.boxes&&(this.boxes.length=0),this.bondStore.dispose(),this.backboneBondStore.dispose(),this.rungBondStore.dispose(),this.atomStore.dispose(),this.residueStore.dispose(),this.chainStore.dispose(),this.modelStore.dispose(),delete this.bondStore,delete this.atomStore,delete this.residueStore,delete this.chainStore,delete this.modelStore,delete this.frames,delete this.boxes,delete this.bondSet,delete this.atomSet},Object.defineProperties(Mm.prototype,Tm);var Am=new K,Em=[ld,id,cd,sd,ud,od,rd,ad,fd,dd,pd,hd],Pm={aspectRatio:1.5,sphereDetail:2,radialSegments:50,disableImpostor:!1,openEnded:!1,dashedCylinder:!1,labelParams:{},pointSize:2,sizeAttenuation:!1,useTexture:!0,lineWidth:2},Rm=function(e,t){var n=this;void 0===e&&(e="shape"),void 0===t&&(t={}),this.boundingBox=new K,this.bufferList=[],this.meshCount=0,this._primitiveData={},this.name=e,this.parameters=Ca(t,Pm),Em.forEach((function(e){Object.keys(e.fields).forEach((function(t){n._primitiveData[e.getShapeKey(t)]=[]})),n._primitiveData[e.getShapeKey("name")]=[]}))},Om={center:{configurable:!0},type:{configurable:!0}};Rm.prototype.addBuffer=function(e){this.bufferList.push(e);var t=e.geometry;return t.boundingBox||t.computeBoundingBox(),this.boundingBox.union(t.boundingBox),this},Rm.prototype.addMesh=function(e,t,n,r,i){e=Va(e),t=Va(t),Array.isArray(n)&&(n=za(n,e.length)),r&&(r=Va(r));var o={position:e,color:t,index:n,normal:r},a=new Zf(this,Object.assign({serial:this.meshCount,name:i},o)),s=new Lp(Object.assign({picking:a},o));return this.bufferList.push(s),Am.setFromArray(e),this.boundingBox.union(Am),this.meshCount+=1,this},Rm.prototype.addSphere=function(e,t,n,r){return rd.objectToShape(this,{position:e,color:t,radius:n,name:r}),this},Rm.prototype.addEllipsoid=function(e,t,n,r,i,o){return ud.objectToShape(this,{position:e,color:t,radius:n,majorAxis:r,minorAxis:i,name:o}),this},Rm.prototype.addTorus=function(e,t,n,r,i,o){return dd.objectToShape(this,{position:e,color:t,radius:n,majorAxis:r,minorAxis:i,name:o}),this},Rm.prototype.addCylinder=function(e,t,n,r,i){return sd.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},Rm.prototype.addCone=function(e,t,n,r,i){return cd.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},Rm.prototype.addArrow=function(e,t,n,r,i){return ld.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},Rm.prototype.addBox=function(e,t,n,r,i,o){return id.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},Rm.prototype.addOctahedron=function(e,t,n,r,i,o){return od.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},Rm.prototype.addTetrahedron=function(e,t,n,r,i,o){return ad.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},Rm.prototype.addText=function(e,t,n,r){return fd.objectToShape(this,{position:e,color:t,size:n,text:r}),this},Rm.prototype.addPoint=function(e,t,n){return pd.objectToShape(this,{position:e,color:t,name:n}),this},Rm.prototype.addWideline=function(e,t,n,r){return hd.objectToShape(this,{position1:e,position2:t,color:n,name:r}),this},Rm.prototype.addLabel=function(e,t,n,r){return console.warn("Shape.addLabel is deprecated, use .addText instead"),this.addText(e,t,n,r)},Rm.prototype.getBufferList=function(){var e=this,t=[];return Em.forEach((function(n){e._primitiveData[n.getShapeKey("color")].length&&t.push(n.bufferFromShape(e,e.parameters))})),this.bufferList.concat(t)},Rm.prototype.dispose=function(){var e=this;this.bufferList.forEach((function(e){e.dispose()})),this.bufferList.length=0,Em.forEach((function(t){Object.keys(t.fields).forEach((function(n){e._primitiveData[t.getShapeKey(n)].length=0})),e._primitiveData[t.getShapeKey("name")].length=0}))},Om.center.get=function(){return this._center||(this._center=this.boundingBox.getCenter(new H)),this._center},Om.type.get=function(){return"Shape"},Object.defineProperties(Rm.prototype,Om);var Im=function(e){function t(t,n,r){Array.isArray(t)||(t=[t]),e.call(this,t,n,r),this.type="buffer",this.parameters=Object.assign({},this.parameters,{colorScheme:null,colorScale:null,colorValue:null,colorDomain:null,colorMode:null}),this.buffer=t,this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){e.prototype.init.call(this,t),this.build()},t.prototype.create=function(){this.bufferList.push.apply(this.bufferList,this.buffer)},t.prototype.attach=function(e){var t=this;this.bufferList.forEach((function(e){t.viewer.add(e),e.setParameters(t.getBufferParams())})),this.setVisibility(this.visible),e()},t}(Mu),Lm=new j,Dm=new U;var Nm=function(e){function t(t,n,r){void 0===n&&(n={}),e.call(this,function(e,t){var n,r=t.attributes.position.array,i=t.index?t.index.array:void 0,o=e.position.length/3,a=r.length/3,s=o*a,l=new Float32Array(3*s),c=new Float32Array(3*s),u=new Float32Array(3*s);return i&&(n=za(o*i.length,s)),{position:l,color:u,index:n,normal:c,primitiveId:e.primitiveId||lc(o,a),picking:e.picking}}(t,r),n),this.updateNormals=!1;var i=r.attributes.position.array,o=r.attributes.normal.array,a=r.index?r.index.array:void 0;this.geoPosition=i,this.geoNormal=o,this.geoIndex=a,this.positionCount=t.position.length/3,this.geoPositionCount=i.length/3,this.transformedGeoPosition=new Float32Array(3*this.geoPositionCount),this.transformedGeoNormal=new Float32Array(3*this.geoPositionCount);var s=this.geometry.attributes;this.meshPosition=s.position.array,this.meshColor=s.color.array,this.meshNormal=s.normal.array,this.setAttributes(t),a&&(this.meshIndex=this.geometry.getIndex().array,this.makeIndex())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n,r,i,o,a,s,l,c,u,d=this.geometry.attributes,f=this.updateNormals;e.position&&(n=e.position,i=this.geoPosition,l=this.meshPosition,a=this.transformedGeoPosition,d.position.needsUpdate=!0,(f||t)&&(o=this.geoNormal,u=this.meshNormal,s=this.transformedGeoNormal,d.normal.needsUpdate=!0)),e.color&&(r=e.color,c=this.meshColor,d.color.needsUpdate=!0);for(var p=this.positionCount,h=this.geoPositionCount,m=0;m<p;++m){var g=void 0,v=void 0,y=m*h*3,b=3*m;if(n&&a&&l&&u&&i&&o&&(a.set(i),Lm.makeTranslation(n[b],n[b+1],n[b+2]),this.applyPositionTransform(Lm,m,b),Ou(Lm.elements,a),l.set(a,y),f&&s?(s.set(o),Dm.getNormalMatrix(Lm),Iu(Dm.elements,s),u.set(s,y)):t&&u.set(o,y)),r&&c)for(g=0;g<h;++g)c[v=y+3*g]=r[b],c[v+1]=r[b+1],c[v+2]=r[b+2]}},t.prototype.makeIndex=function(){var e=this.geoIndex,t=this.meshIndex;if(e)for(var n=this.positionCount,r=this.geoPositionCount,i=3*(e.length/3),o=0;o<n;++o){var a=o*i,s=a+i;t.set(e,a);for(var l=a;l<s;++l)t[l]+=o*r}},t}(Lp),Fm=new H,zm=Object.assign({sphereDetail:1},Pp),Bm=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new ir(1,Sa(n.sphereDetail,1))),this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return zm},t.prototype.applyPositionTransform=function(e,t){var n=this._radius[t];Fm.set(n,n,n),e.scale(Fm)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.radius&&(this._radius=t.radius),e.prototype.setAttributes.call(this,t,n)},Object.defineProperties(t.prototype,n),t}(Nm);vl.add("shader/SphereImpostor.vert","uniform mat4 projectionMatrixInverse;\nuniform float clipNear;\nvarying float vRadius;\nvarying float vRadiusSq;\nvarying vec3 vPoint;\nvarying vec3 vPointViewPosition;\nattribute vec2 mapping;\nattribute float radius;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#endif\n#include matrix_scale\nconst mat4 D = mat4(\n1.0, 0.0, 0.0, 0.0,\n0.0, 1.0, 0.0, 0.0,\n0.0, 0.0, 1.0, 0.0,\n0.0, 0.0, 0.0, -1.0\n);\nmat4 transpose( in mat4 inMatrix ) {\nvec4 i0 = inMatrix[0];\nvec4 i1 = inMatrix[1];\nvec4 i2 = inMatrix[2];\nvec4 i3 = inMatrix[3];\nmat4 outMatrix = mat4(\nvec4(i0.x, i1.x, i2.x, i3.x),\nvec4(i0.y, i1.y, i2.y, i3.y),\nvec4(i0.z, i1.z, i2.z, i3.z),\nvec4(i0.w, i1.w, i2.w, i3.w)\n);\nreturn outMatrix;\n}\nvoid ComputePointSizeAndPositionInClipCoordSphere(){\nvec2 xbc;\nvec2 ybc;\nmat4 T = mat4(\nradius, 0.0, 0.0, 0.0,\n0.0, radius, 0.0, 0.0,\n0.0, 0.0, radius, 0.0,\nposition.x, position.y, position.z, 1.0\n);\nmat4 R = transpose( projectionMatrix * modelViewMatrix * T );\nfloat A = dot( R[ 3 ], D * R[ 3 ] );\nfloat B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );\nfloat C = dot( R[ 0 ], D * R[ 0 ] );\nxbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nxbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nfloat sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;\nA = dot( R[ 3 ], D * R[ 3 ] );\nB = -2.0 * dot( R[ 1 ], D * R[ 3 ] );\nC = dot( R[ 1 ], D * R[ 1 ] );\nybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nfloat sy = abs( ybc[ 0 ] - ybc[ 1 ] ) * 0.5;\ngl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );\ngl_Position.xy -= mapping * vec2( sx, sy );\ngl_Position.xy *= gl_Position.w;\n}\nvoid main(void){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\nvRadius = radius * matrixScale( modelViewMatrix );\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nmvPosition.z -= vRadius;\ngl_Position = projectionMatrix * vec4( mvPosition.xyz, 1.0 );\nComputePointSizeAndPositionInClipCoordSphere();\nvRadiusSq = vRadius * vRadius;\nvec4 vPoint4 = projectionMatrixInverse * gl_Position;\nvPoint = vPoint4.xyz / vPoint4.w;\nvPointViewPosition = -mvPosition.xyz / mvPosition.w;\n}"),vl.add("shader/SphereImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 interiorColor;\nuniform float interiorDarkening;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float clipNear;\nuniform mat4 projectionMatrix;\nuniform float ortho;\nvarying float vRadius;\nvarying float vRadiusSq;\nvarying vec3 vPoint;\nvarying vec3 vPointViewPosition;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars_begin\n#include lights_physical_pars_fragment\n#endif\nbool flag2 = false;\nbool interior = false;\nvec3 cameraPos;\nvec3 cameraNormal;\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nfloat calcClip( vec3 cameraPos ){\nreturn dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );\n}\nbool Impostor( out vec3 cameraPos, out vec3 cameraNormal ){\nvec3 cameraSpherePos = -vPointViewPosition;\ncameraSpherePos.z += vRadius;\nvec3 rayOrigin = mix( vec3( 0.0, 0.0, 0.0 ), vPoint, ortho );\nvec3 rayDirection = mix( normalize( vPoint ), vec3( 0.0, 0.0, 1.0 ), ortho );\nvec3 cameraSphereDir = mix( cameraSpherePos, rayOrigin - cameraSpherePos, ortho );\nfloat B = dot( rayDirection, cameraSphereDir );\nfloat det = B * B + vRadiusSq - dot( cameraSphereDir, cameraSphereDir );\nif( det < 0.0 ){\ndiscard;\nreturn false;\n}\nfloat sqrtDet = sqrt( det );\nfloat posT = mix( B + sqrtDet, B + sqrtDet, ortho );\nfloat negT = mix( B - sqrtDet, sqrtDet - B, ortho );\ncameraPos = rayDirection * negT + rayOrigin;\n#ifdef NEAR_CLIP\nif( calcDepth( cameraPos ) <= 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\n}else if( calcClip( cameraPos ) > 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\nflag2 = true;\n}\n#else\nif( calcDepth( cameraPos ) <= 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\n}\n#endif\ncameraNormal = normalize( cameraPos - cameraSpherePos );\ncameraNormal *= float(!interior) * 2.0 - 1.0;\nreturn !interior;\n}\nvoid main(void){\nbool flag = Impostor( cameraPos, cameraNormal );\n#ifdef NEAR_CLIP\nif( calcClip( cameraPos ) > 0.0 )\ndiscard;\n#endif\ngl_FragDepthEXT = calcDepth( cameraPos );\nif( !flag ){\n#ifdef NEAR_CLIP\nif( flag2 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\n}else if( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n#else\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n#endif\n}\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\n#ifdef PICKING\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vNormal = cameraNormal;\nvec3 vViewPosition = -cameraPos;\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\n#include normal_fragment_begin\n#include lights_physical_fragment\n#include lights_fragment_begin\n#include lights_fragment_end\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\nif( interior ){\n#ifdef USE_INTERIOR_COLOR\noutgoingLight.xyz = interiorColor;\n#else\n#ifdef DIFFUSE_INTERIOR\noutgoingLight.xyz = vColor;\n#endif\n#endif\noutgoingLight.xyz *= 1.0 - interiorDarkening;\n}\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var jm=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,n,r),this.index=za(this.indexSize,this.attributeSize),this.makeIndex(),this.initIndex(this.index),this.addAttributes({mapping:{type:t,value:null}}),this.setAttributes({primitiveId:sc(this.size)})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={attributeSize:{configurable:!0},indexSize:{configurable:!0}};return n.attributeSize.get=function(){return this.size*this.mappingSize},n.indexSize.get=function(){return this.size*this.mappingIndicesSize},t.prototype.addAttributes=function(t){var n={};for(var r in t){var i=t[r];n[r]={type:i.type,value:null}}e.prototype.addAttributes.call(this,n)},t.prototype.getAttributeIndex=function(e){return 3*e*this.mappingSize},t.prototype.setAttributes=function(e){e&&!e.position&&e.position1&&e.position2&&(e.position=rc(e.position1,e.position2));var t,n,r,i,o,a,s,l=this.size,c=this.mappingSize,u=this.geometry.attributes;for(var d in e)if("index"!==d&&"picking"!==d){n=e[d],r=(t=u[d]).itemSize,i=t.array;for(var f=0;f<l;++f){a=(o=f*r)*c;for(var p=0;p<c;++p){s=a+r*p;for(var h=0;h<r;++h)i[s+h]=n[o+h]}}t.needsUpdate=!0}},t.prototype.makeMapping=function(){for(var e=this.size,t=this.mapping,n=this.mappingSize,r=this.mappingItemSize,i=this.geometry.attributes.mapping.array,o=0;o<e;o++)i.set(t,o*r*n)},t.prototype.makeIndex=function(){for(var e=this.size,t=this.mappingSize,n=this.mappingIndices,r=this.mappingIndicesSize,i=this.index,o=0;o<e;o++){var a=o*r,s=o*t;i.set(n,a);for(var l=0;l<r;++l)i[a+l]+=s}},Object.defineProperties(t.prototype,n),t}(Op),Zm=new Float32Array([-1,1,-1,-1,1,1,1,-1]),Hm=new Uint16Array([0,1,2,1,3,2]),Um=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"v2",t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return Zm},n.mappingIndices.get=function(){return Hm},n.mappingIndicesSize.get=function(){return 6},n.mappingSize.get=function(){return 4},n.mappingItemSize.get=function(){return 2},Object.defineProperties(t.prototype,n),t}(jm),Vm=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.isImpostor=!0,this.vertexShader="SphereImpostor.vert",this.fragmentShader="SphereImpostor.frag",this.addUniforms({projectionMatrixInverse:{value:new j},ortho:{value:0}}),this.addAttributes({radius:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Um),Gm=(Object.assign({disableImpostor:!1},zm),function(e,t){return!nl||t&&t.disableImpostor?new Bm(e,t):new Vm(e,t)});function Wm(e,t,n,r){var i=n-e,o=r-t;return Math.sqrt(i*i+o*o)}xl.add("sphere",Gm),vl.add("shader/Point.vert","uniform float clipNear;\nuniform float clipRadius;\nuniform vec3 clipCenter;\nuniform float size;\nuniform float canvasHeight;\nuniform float pixelRatio;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\nvarying vec3 vViewPosition;\n#endif\n#include common\nvoid main(){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\n#include begin_vertex\n#include project_vertex\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * pixelRatio * ( ( canvasHeight / 2.0 ) / -mvPosition.z );\n#else\ngl_PointSize = size * pixelRatio;\n#endif\n#ifndef PICKING\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n#include radiusclip_vertex\n}"),vl.add("shader/Point.frag","uniform vec3 diffuse;\nuniform float opacity;\nuniform float clipNear;\nuniform float clipRadius;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\nvarying vec3 vViewPosition;\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( PICKING )\n#ifdef USE_MAP\nif( texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) ).a < 0.5 )\ndiscard;\n#endif\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 outgoingLight = vec3( 0.0 );\nvec4 diffuseColor = vec4( diffuse, 1.0 );\n#ifdef USE_MAP\ndiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif\n#include color_fragment\n#include alphatest_fragment\noutgoingLight = diffuseColor.rgb;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var $m=Object.assign({pointSize:1,sizeAttenuation:!0,sortParticles:!1,alphaTest:.5,useTexture:!1,forceTransparent:!1,edgeBleach:0},Pp),qm=Object.assign({pointSize:{uniform:"size"},sizeAttenuation:{updateShader:!0},sortParticles:{},alphaTest:{updateShader:!0},useTexture:{updateShader:!0},forceTransparent:{},edgeBleach:{uniform:!0}},Rp),Ym=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parameterTypes=qm,this.vertexShader="Point.vert",this.fragmentShader="Point.frag",this.isPoint=!0,this.addUniforms({size:{value:this.parameters.pointSize},canvasHeight:{value:1},pixelRatio:{value:1},map:{value:null}})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return $m},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this),this.makeTexture();var t=this.material,n=this.wireframeMaterial,r=this.pickingMaterial;t.uniforms.map.value=this.tex,t.needsUpdate=!0,n.uniforms.map.value=this.tex,n.needsUpdate=!0,r.uniforms.map.value=this.tex,r.needsUpdate=!0},t.prototype.makeTexture=function(){this.tex&&this.tex.dispose(),this.tex=function(e){for(var t=e||{},n=Sa(t.width,256),r=Sa(t.height,256),i=[n/2,r/2],o=Math.min(n/2,r/2),a=Sa(t.delta,1/(o+1))*o,s=0,l=0,c=new Uint8Array(n*r*4),u=0,d=c.length;u<d;u+=4){var f=1-ns(o-a,o,Wm(s,l,i[0],i[1]));c[u]=255*f,c[u+1]=255*f,c[u+2]=255*f,c[u+3]=255*f,++s===n&&(s=0,l++)}var p=new X(c,n,r);return p.needsUpdate=!0,p}({delta:this.parameters.edgeBleach})},t.prototype.getDefines=function(t){var n=e.prototype.getDefines.call(this,t);return this.parameters.sizeAttenuation&&(n.USE_SIZEATTENUATION=1),this.parameters.useTexture&&(n.USE_MAP=1),this.parameters.alphaTest>0&&this.parameters.alphaTest<=1&&(n.ALPHATEST=this.parameters.alphaTest.toPrecision(2)),n},t.prototype.setUniforms=function(t){t&&void 0!==t.edgeBleach&&(this.makeTexture(),t.map=this.tex),e.prototype.setUniforms.call(this,t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.tex&&this.tex.dispose()},Object.defineProperties(t.prototype,n),t}(Op);xl.add("point",Ym);var Xm=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="dot",this.parameters=Object.assign({thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdOut:{type:"boolean",rebuild:!0},dotType:{type:"select",rebuild:!0,options:{"":"",sphere:"sphere",point:"point"}},radiusType:{type:"select",options:{"":"",value:"value","abs-value":"abs-value","value-min":"value-min",deviation:"deviation",size:"size"}},radius:{type:"number",precision:3,max:10,min:.001,property:"size"},scale:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,disableImpostor:!0,pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{colorScheme:{type:"select",update:"color",options:{"":"",value:"value",uniform:"uniform",random:"random"}}}),t instanceof kp?(this.surface=void 0,this.volume=new dh(t)):(this.surface=t,this.volume=void 0),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"uniform"),n.colorValue=Sa(n.colorValue,14540253),this.thresholdType=Sa(n.thresholdType,"sigma"),this.thresholdMin=Sa(n.thresholdMin,2),this.thresholdMax=Sa(n.thresholdMax,1/0),this.thresholdOut=Sa(n.thresholdOut,!1),this.dotType=Sa(n.dotType,"point"),this.radius=Sa(n.radius,.1),this.scale=Sa(n.scale,1),this.pointSize=Sa(n.pointSize,1),this.sizeAttenuation=Sa(n.sizeAttenuation,!0),this.sortParticles=Sa(n.sortParticles,!1),this.useTexture=Sa(n.useTexture,!1),this.alphaTest=Sa(n.alphaTest,.5),this.forceTransparent=Sa(n.forceTransparent,!1),this.edgeBleach=Sa(n.edgeBleach,0),e.prototype.init.call(this,n),this.build()},t.prototype.attach=function(e){var t=this;this.bufferList.forEach((function(e){t.viewer.add(e)})),this.setVisibility(this.visible),e()},t.prototype.create=function(){var e={};if(this.volume){var t,n,r=this.volume;"sigma"===this.thresholdType?(t=r.getValueForSigma(this.thresholdMin),n=r.getValueForSigma(this.thresholdMax)):(t=this.thresholdMin,n=this.thresholdMax),r.setFilter(t,n,this.thresholdOut),Object.assign(e,{position:r.getDataPosition(),color:r.getDataColor(this.getColorParams())}),"sphere"===this.dotType&&Object.assign(e,{radius:r.getDataSize(this.radius,this.scale),picking:r.getDataPicking()})}else{var i=this.surface;Object.assign(e,{position:i.getPosition(),color:i.getColor(this.getColorParams())}),"sphere"===this.dotType&&Object.assign(e,{radius:i.getSize(this.radius,this.scale),picking:i.getPicking()})}"sphere"===this.dotType?this.dotBuffer=new Gm(e,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!1})):this.dotBuffer=new Ym(e,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach})),this.bufferList.push(this.dotBuffer)},t.prototype.update=function(e){if(void 0===e&&(e={}),0!==this.bufferList.length){var t={};e.color&&(this.volume?Object.assign(t,{color:this.volume.getDataColor(this.getColorParams())}):Object.assign(t,{color:this.surface.getColor(this.getColorParams())})),"sphere"===this.dotType&&(e.radius||e.scale)&&(this.volume?Object.assign(t,{radius:this.volume.getDataSize(this.radius,this.scale)}):Object.assign(t,{radius:this.surface.getSize(this.radius,this.scale)})),this.dotBuffer.setAttributes(t)}},t.prototype.setParameters=function(t,n,r){return void 0===n&&(n={}),t&&void 0!==t.thresholdType&&this.volume instanceof kp&&("value"===this.thresholdType&&"sigma"===t.thresholdType?(this.thresholdMin=this.volume.getSigmaForValue(this.thresholdMin),this.thresholdMax=this.volume.getSigmaForValue(this.thresholdMax)):"sigma"===this.thresholdType&&"value"===t.thresholdType&&(this.thresholdMin=this.volume.getValueForSigma(this.thresholdMin),this.thresholdMax=this.volume.getValueForSigma(this.thresholdMax)),this.thresholdType=t.thresholdType),t&&void 0!==t.radiusType&&("radius"===t.radiusType?this.radius=.1:this.radius=parseFloat(t.radiusType),n.radius=!0,"sphere"!==this.dotType||nl&&!this.disableImpostor||(r=!0)),t&&void 0!==t.radius&&(n.radius=!0,"sphere"!==this.dotType||nl&&!this.disableImpostor||(r=!0)),t&&void 0!==t.scale&&(n.scale=!0,"sphere"!==this.dotType||nl&&!this.disableImpostor||(r=!0)),e.prototype.setParameters.call(this,t,n,r),this},t}(Mu);vl.add("shader/Image.vert","uniform float clipRadius;\nuniform vec3 clipCenter;\nvarying vec2 vUv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\nvoid main() {\n#include begin_vertex\n#include project_vertex\nvUv = uv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n}"),vl.add("shader/Image.frag","uniform sampler2D map;\nuniform float opacity;\nuniform vec2 mapSize;\nuniform float clipNear;\nuniform float clipRadius;\nvarying vec2 vUv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform sampler2D pickingMap;\nuniform float objectId;\n#else\n#include fog_pars_fragment\n#endif\n#if defined( CUBIC_INTERPOLATION )\n#if defined( CATMULROM_FILTER ) || defined( MITCHELL_FILTER )\n#if defined( CATMULROM_FILTER )\nconst float B = 0.0;\nconst float C = 0.5;\n#elif defined( MITCHELL_FILTER )\nconst float B = 0.333;\nconst float C = 0.333;\n#endif\nfloat filter( float x ){\nfloat f = x;\nif( f < 0.0 ){\nf = -f;\n}\nif( f < 1.0 ){\nreturn ( ( 12.0 - 9.0 * B - 6.0 * C ) * ( f * f * f ) +\n( -18.0 + 12.0 * B + 6.0 *C ) * ( f * f ) +\n( 6.0 - 2.0 * B ) ) / 6.0;\n}else if( f >= 1.0 && f < 2.0 ){\nreturn ( ( -B - 6.0 * C ) * ( f * f * f )\n+ ( 6.0 * B + 30.0 * C ) * ( f *f ) +\n( - ( 12.0 * B ) - 48.0 * C ) * f +\n8.0 * B + 24.0 * C ) / 6.0;\n}else{\nreturn 0.0;\n}\n}\n#elif defined( BSPLINE_FILTER )\nfloat filter( float x ){\nfloat f = x;\nif( f < 0.0 ){\nf = -f;\n}\nif( f >= 0.0 && f <= 1.0 ){\nreturn ( 2.0 / 3.0 ) + ( 0.5 ) * ( f * f * f ) - ( f * f );\n}else if( f > 1.0 && f <= 2.0 ){\nreturn 1.0 / 6.0 * pow( ( 2.0 - f ), 3.0 );\n}\nreturn 1.0;\n}\n#else\nfloat filter( float x ){\nreturn 1.0;\n}\n#endif\nvec4 biCubic( sampler2D tex, vec2 texCoord ){\nvec2 texelSize = 1.0 / mapSize;\ntexCoord -= texelSize / 2.0;\nvec4 nSum = vec4( 0.0 );\nfloat nDenom = 0.0;\nvec2 cell = fract( texCoord * mapSize );\nfor( float m = -1.0; m <= 2.0; ++m ){\nfor( float n = -1.0; n <= 2.0; ++n ){\nvec4 vecData = texture2D(\ntex, texCoord + texelSize * vec2( m, n )\n);\nfloat c = filter( m - cell.x ) * filter( -n + cell.y );\nnSum += vecData * c;\nnDenom += c;\n}\n}\nreturn nSum / nDenom;\n}\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( CUBIC_INTERPOLATION )\ngl_FragColor = biCubic( map, vUv );\n#else\ngl_FragColor = texture2D( map, vUv );\n#endif\n#if defined( PICKING )\nif( gl_FragColor.a < 0.3 )\ndiscard;\ngl_FragColor = vec4( texture2D( pickingMap, vUv ).xyz, objectId );\n#else\nif( gl_FragColor.a < 0.01 )\ndiscard;\ngl_FragColor.a *= opacity;\n#include fog_fragment\n#endif\n}");var Km=new Uint16Array([0,1,2,1,3,2]),Jm=new Float32Array([0,1,0,0,1,1,1,0]),Qm=Object.assign({filter:"nearest",forceTransparent:!0},Pp),eg=Object.assign({filter:{updateShader:!0,uniform:!0}},Rp),tg=function(e){function t(t,n){e.call(this,{position:t.position,index:Km,picking:t.picking},n),this.parameterTypes=eg,this.alwaysTransparent=!0,this.hasWireframe=!1,this.vertexShader="Image.vert",this.fragmentShader="Image.frag";var r=t.imageData,i=t.width,o=t.height,a=new X(r,i,o);a.flipY=!0,this.tex=a;for(var s=r.length,l=new Uint8Array(s),c=0;c<s;c+=4){var u=c/4;l[c]=u>>16&255,l[c+1]=u>>8&255,l[c+2]=255&u}var d=new X(l,i,o);d.flipY=!0,d.minFilter=g,d.magFilter=g,this.pickingTex=d,this.addUniforms({map:{value:a},pickingMap:{value:d},mapSize:{value:new B(i,o)}}),this.geometry.addAttribute("uv",new be(Jm,2))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Qm},t.prototype.getDefines=function(t){var n=e.prototype.getDefines.call(this,t),r=this.parameters.filter;return r.startsWith("cubic")&&(n.CUBIC_INTERPOLATION=1,r.endsWith("bspline")?n.BSPLINE_FILTER=1:r.endsWith("catmulrom")?n.CATMULROM_FILTER=1:r.endsWith("mitchell")&&(n.MITCHELL_FILTER=1)),n},t.prototype.updateTexture=function(){var e=this.tex,t=this.parameters.filter;t.startsWith("cubic")?(e.minFilter=g,e.magFilter=g):"linear"===t?(e.minFilter=b,e.magFilter=b):(e.minFilter=g,e.magFilter=g),e.needsUpdate=!0,this.pickingTex.needsUpdate=!0},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this),this.updateTexture();var t=this.material;t.uniforms.map.value=this.tex,t.blending=1,t.needsUpdate=!0;var n=this.wireframeMaterial;n.uniforms.map.value=this.tex,n.blending=1,n.needsUpdate=!0;var r=this.pickingMaterial;r.uniforms.map.value=this.tex,r.uniforms.pickingMap.value=this.pickingTex,r.blending=1,r.needsUpdate=!0},t.prototype.setUniforms=function(t){t&&void 0!==t.filter&&(this.updateTexture(),t.map=this.tex),e.prototype.setUniforms.call(this,t)},Object.defineProperties(t.prototype,n),t}(Op),ng=function(e,t){var n=t||{};this.dimension=Sa(n.dimension,"x"),this.positionType=Sa(n.positionType,"percent"),this.position=Sa(n.position,30),this.thresholdType=Sa(n.thresholdType,"sigma"),this.thresholdMin=Sa(n.thresholdMin,-1/0),this.thresholdMax=Sa(n.thresholdMax,1/0),this.normalize=Sa(n.normalize,!1),this.volume=e};ng.prototype.getPositionFromCoordinate=function(e){var t,n=this.dimension,r=this.volume,i=r.matrix,o=(new H).setFromMatrixPosition(i)[n],a=(new H).setFromMatrixScale(i)[n];return t="x"===n?r.nx:"y"===n?r.ny:r.nz,Math.round(((e-o)/(t/100)+1)/a)},ng.prototype.getData=function(e){e=e||{};var t,n=this.volume,r=n.data,i=n.matrix;function o(e){return Math.round(e/100*(t-1))}function a(e,t,r,i){return 3*(r*n.ny*n.nx+t*n.nx+e)+i}t="coordinate"===this.positionType?this.getPositionFromCoordinate(this.position):this.position;var s,l,c,u,d,f=new Float32Array(12),p=new H,h=0,m=0,g=0,v=n.nx,y=n.ny,b=n.nz;function x(e,t,n,r){p.set(e,t,n).applyMatrix4(i).toArray(f,r)}"x"===this.dimension?(c=o(n.nx),u=n.ny-1,d=n.nz-1,s=n.nz,l=n.ny,v=(h=c)+1,x(c,0,0,0),x(c,u,0,3),x(c,0,d,6),x(c,u,d,9)):"y"===this.dimension?(c=n.nx-1,u=o(n.ny),d=n.nz-1,s=n.nz,l=n.nx,y=(m=u)+1,x(0,u,0,0),x(c,u,0,3),x(0,u,d,6),x(c,u,d,9)):"z"===this.dimension&&(c=n.nx-1,u=n.ny-1,d=o(n.nz),s=n.nx,l=n.ny,b=(g=d)+1,x(0,0,d,0),x(0,u,d,3),x(c,0,d,6),x(c,u,d,9));var w,_,S=0,C=0,k=new Uint8Array(s*l*4),M=new Float32Array(s*l);"sigma"===this.thresholdType?(w=n.getValueForSigma(this.thresholdMin),_=n.getValueForSigma(this.thresholdMax)):(w=this.thresholdMin,_=this.thresholdMax);var T=Object.assign({},e.colorParams,{volume:n});this.normalize&&(T.domain=[0,1]);var A,E=pl.getScheme(T),P=new Float32Array(3),R=E.getScale(),O=0,I=0;if(this.normalize){O=1/0,A=-1/0;for(var L=m;L<y;++L)for(var D=h;D<v;++D)for(var N=g;N<b;++N){var F=r[a(D,L,N,0)/3];F<O&&(O=F),F>A&&(A=F)}I=A-O}for(var z=m;z<y;++z)for(var B=h;B<v;++B)for(var j=g;j<b;++j){var Z=a(B,z,j,0)/3,U=r[Z];this.normalize&&(U=(U-O)/I),E.colorToArray(R(U),P),k[S]=Math.round(255*P[0]),k[S+1]=Math.round(255*P[1]),k[S+2]=Math.round(255*P[2]),k[S+3]=U>w&&U<_?255:0,M[C]=Z,++C,S+=4}var V=new qf(M,n);return{position:f,imageData:k,width:s,height:l,picking:V}};var rg=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="slice",this.parameters=Object.assign({filter:{type:"select",buffer:!0,options:{nearest:"nearest",linear:"linear","cubic-bspline":"cubic-bspline","cubic-catmulrom":"cubic-catmulrom","cubic-mitchell":"cubic-mitchell"}},positionType:{type:"select",rebuild:!0,options:{percent:"percent",coordinate:"coordinate"}},position:{type:"range",step:.1,max:100,min:1,rebuild:!0},dimension:{type:"select",rebuild:!0,options:{x:"x",y:"y",z:"z"}},thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},normalize:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null,linewidth:null,colorScheme:null,roughness:null,metalness:null,diffuse:null}),this.volume=t,this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=this.volume,r=t||{};r.colorDomain=Sa(r.colorDomain,[n.min,n.max]),r.colorScheme=Sa(r.colorScheme,"value"),r.colorScale=Sa(r.colorScale,"Spectral"),this.colorScheme="value",this.dimension=Sa(r.dimension,"x"),this.filter=Sa(r.filter,"cubic-bspline"),this.positionType=Sa(r.positionType,"percent"),this.position=Sa(r.position,30),this.thresholdType=Sa(r.thresholdType,"sigma"),this.thresholdMin=Sa(r.thresholdMin,-1/0),this.thresholdMax=Sa(r.thresholdMax,1/0),this.normalize=Sa(r.normalize,!1),e.prototype.init.call(this,r),this.build()},t.prototype.attach=function(e){var t=this;this.bufferList.forEach((function(e){t.viewer.add(e)})),this.setVisibility(this.visible),e()},t.prototype.create=function(){var e=new ng(this.volume,{positionType:this.positionType,position:this.position,dimension:this.dimension,thresholdType:this.thresholdType,thresholdMin:this.thresholdMin,thresholdMax:this.thresholdMax,normalize:this.normalize}),t=new tg(e.getData({colorParams:this.getColorParams()}),this.getBufferParams({filter:this.filter}));this.bufferList.push(t)},t}(Mu);function ig(e){rl.error("makeRepresentation: representation type "+e+" unknown")}var og={name:"some element",status:""},ag=function(e,t){void 0===t&&(t={}),this.stage=e,this.signals={statusChanged:new fs,nameChanged:new fs,disposed:new fs},this.parameters=Ca(t,this.defaultParameters),this.uuid=Ka()},sg={defaultParameters:{configurable:!0},name:{configurable:!0}};sg.defaultParameters.get=function(){return og},sg.name.get=function(){return this.parameters.name},ag.prototype.setStatus=function(e){return this.parameters.status=e,this.signals.statusChanged.dispatch(e),this},ag.prototype.setName=function(e){return this.parameters.name=e,this.signals.nameChanged.dispatch(e),this},ag.prototype.dispose=function(){this.signals.disposed.dispatch()},Object.defineProperties(ag.prototype,sg);var lg=Object.assign({visible:!0},og),cg=function(e){function t(t,n,r,i){void 0===r&&(r={}),e.call(this,t,Object.assign({name:n.type},r)),this.parent=i,this.signals=Object.assign({visibilityChanged:new fs,parametersChanged:new fs},this.signals),this.setRepresentation(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},visible:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return lg},n.visible.get=function(){return this.parameters.visible},n.type.get=function(){return"representation"},t.prototype.getType=function(){return this.repr.type},t.prototype.setRepresentation=function(e){this._disposeRepresentation(),this.repr=e,this.stage.tasks.listen(this.repr.tasks),this.updateVisibility()},t.prototype._disposeRepresentation=function(){this.repr&&(this.stage.tasks.unlisten(this.repr.tasks),this.repr.dispose())},t.prototype.dispose=function(){this.parent&&this.parent.hasRepresentation(this)?this.parent.removeRepresentation(this):(this._disposeRepresentation(),this.signals.disposed.dispatch())},t.prototype.setVisibility=function(e){return this.parameters.visible=e,this.updateVisibility(),this.signals.visibilityChanged.dispatch(this.parameters.visible),this},t.prototype.getVisibility=function(){return this.parent?this.parent.parameters.visible&&this.parameters.visible:this.parameters.visible},t.prototype.toggleVisibility=function(){return this.setVisibility(!this.parameters.visible)},t.prototype.updateVisibility=function(){this.repr.setVisibility(this.getVisibility())},t.prototype.update=function(e){return this.repr.update(e),this},t.prototype.build=function(e){return this.repr.build(e),this},t.prototype.setSelection=function(e){var t=this.repr;return t.setSelection&&t.setSelection(e),this},t.prototype.setParameters=function(e){return this.repr.setParameters(e),this.signals.parametersChanged.dispatch(this.repr.getParameters()),this},t.prototype.getParameters=function(){return this.repr.getParameters()},t.prototype.setColor=function(e){return this.repr.setColor(e),this},Object.defineProperties(t.prototype,n),t}(ag),ug=new j,dg=new H,fg={name:"",status:"",visible:!0},pg=function(e,t,n){void 0===n&&(n={}),this.stage=e,this.object=t,this.signals={representationAdded:new fs,representationRemoved:new fs,visibilityChanged:new fs,matrixChanged:new fs,statusChanged:new fs,nameChanged:new fs,disposed:new fs},this.reprList=[],this.annotationList=[],this.matrix=new j,this.position=new H,this.quaternion=new Z,this.scale=new H(1,1,1),this.transform=new j,this.parameters=Ca(n,this.defaultParameters),this.uuid=Ka(),this.viewer=e.viewer,this.controls=new ih(this)},hg={defaultParameters:{configurable:!0},name:{configurable:!0},status:{configurable:!0},visible:{configurable:!0}};hg.defaultParameters.get=function(){return fg},hg.name.get=function(){return this.parameters.name},hg.status.get=function(){return this.parameters.status},hg.visible.get=function(){return this.parameters.visible},pg.prototype.setPosition=function(e){return Array.isArray(e)?this.position.fromArray(e):this.position.copy(e),this.updateMatrix(),this},pg.prototype.setRotation=function(e){if(Array.isArray(e))if(3===e.length){var t=(new ce).fromArray(e);this.quaternion.setFromEuler(t)}else this.quaternion.fromArray(e);else e instanceof ce?this.quaternion.setFromEuler(e):this.quaternion.copy(e);return this.updateMatrix(),this},pg.prototype.setScale=function(e){return this.scale.set(e,e,e),this.updateMatrix(),this},pg.prototype.setTransform=function(e){return this.transform.copy(e),this.updateMatrix(),this},pg.prototype.updateMatrix=function(){var e=this,t=this.getCenterUntransformed(dg);this.matrix.makeTranslation(-t.x,-t.y,-t.z),ug.makeRotationFromQuaternion(this.quaternion),this.matrix.premultiply(ug),ug.makeScale(this.scale.x,this.scale.y,this.scale.z),this.matrix.premultiply(ug);var n=this.position;ug.makeTranslation(n.x+t.x,n.y+t.y,n.z+t.z),this.matrix.premultiply(ug),this.matrix.premultiply(this.transform),this.reprList.forEach((function(t){t.setParameters({matrix:e.matrix})})),this.stage.viewer.updateBoundingBox(),this.signals.matrixChanged.dispatch(this.matrix)},pg.prototype.addAnnotation=function(e,t,n){var r=new eh(this,e,t,n);return this.annotationList.push(r),r},pg.prototype.eachAnnotation=function(e){this.annotationList.slice().forEach(e)},pg.prototype.removeAnnotation=function(e){var t=this.annotationList.indexOf(e);-1!==t&&(this.annotationList.splice(t,1),e.dispose())},pg.prototype.removeAllAnnotations=function(){this.eachAnnotation((function(e){return e.dispose()})),this.annotationList.length=0},pg.prototype._addRepresentation=function(e,t,n,r){void 0===r&&(r=!1);var i=n||{},o=this.stage.getParameters();i.matrix=this.matrix.clone(),i.quality=i.quality||o.quality,i.disableImpostor=Sa(i.disableImpostor,!o.impostor),i.useWorker=Sa(i.useWorker,o.workerDefault),i.visible=Sa(i.visible,!0);var a=Object.assign({},i,{visible:this.parameters.visible&&i.visible}),s=function(e,t,n,r){var i;if(sl&&rl.time("makeRepresentation "+e),t instanceof Mm){if(!(i=ml.get(e)))return void ig(e)}else if(t instanceof _p)if("surface"===e)i=Zp;else{if("dot"!==e)return void ig(e);i=Xm}else if(t instanceof kp)if("surface"===e)i=Zp;else if("dot"===e)i=Xm;else{if("slice"!==e)return void ig(e);i=rg}else if(t instanceof Rm)i=Im,t=t.getBufferList();else{if("buffer"!==e)return void rl.error("makeRepresentation: object "+t+" unknown");i=Im}var o=new i(t,n,r);return sl&&rl.timeEnd("makeRepresentation "+e),o}(e,t,this.viewer,a),l=new cg(this.stage,s,i,this);return r||(this.reprList.push(l),this.signals.representationAdded.dispatch(l)),l},pg.prototype.addBufferRepresentation=function(e,t){return this._addRepresentation.call(this,"buffer",e,t)},pg.prototype.hasRepresentation=function(e){return-1!==this.reprList.indexOf(e)},pg.prototype.eachRepresentation=function(e){this.reprList.slice().forEach(e)},pg.prototype.removeRepresentation=function(e){var t=this.reprList.indexOf(e);-1!==t&&(this.reprList.splice(t,1),e.dispose(),this.signals.representationRemoved.dispatch(e))},pg.prototype.updateRepresentations=function(e){this.reprList.forEach((function(t){return t.update(e)})),this.stage.viewer.requestRender()},pg.prototype.removeAllRepresentations=function(){this.eachRepresentation((function(e){return e.dispose()}))},pg.prototype.dispose=function(){this.removeAllAnnotations(),this.removeAllRepresentations(),delete this.annotationList,delete this.reprList,this.signals.disposed.dispatch()},pg.prototype.setVisibility=function(e){return this.parameters.visible=e,this.eachRepresentation((function(e){return e.updateVisibility()})),this.eachAnnotation((function(e){return e.updateVisibility()})),this.signals.visibilityChanged.dispatch(e),this},pg.prototype.setStatus=function(e){return this.parameters.status=e,this.signals.statusChanged.dispatch(e),this},pg.prototype.setName=function(e){return this.parameters.name=e,this.signals.nameChanged.dispatch(e),this},pg.prototype.getBox=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this).getBoxUntransformed.apply(e,t).clone().applyMatrix4(this.matrix)},pg.prototype.getCenter=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this).getCenterUntransformed.apply(e,t).clone().applyMatrix4(this.matrix)},pg.prototype.getZoom=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return this.stage.getZoomForBox((e=this).getBox.apply(e,t))},pg.prototype.getBoxUntransformed=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new K},pg.prototype.getCenterUntransformed=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return this.getBoxUntransformed().getCenter(new H)},pg.prototype.autoView=function(e){this.stage.animationControls.zoomMove(this.getCenter(),this.getZoom(),Sa(e,0))},Object.defineProperties(pg.prototype,hg);var mg=function(e){void 0===e&&(e=[]),this.list=e;for(var t=e.length,n=0;n<t;++n){e[n].signals.disposed.add(this._remove,this)}},gg={first:{configurable:!0}};mg.prototype._remove=function(e){var t=this.list.indexOf(e);-1!==t&&this.list.splice(t,1)},gg.first.get=function(){return this.list.length>0?this.list[0]:void 0},mg.prototype.forEach=function(e){return this.list.forEach(e),this},mg.prototype.dispose=function(){return this.forEach((function(e){return e.dispose()}))},Object.defineProperties(mg.prototype,gg);var vg=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setParameters=function(e){return this.forEach((function(t){return t.setParameters(e)}))},t.prototype.setVisibility=function(e){return this.forEach((function(t){return t.setVisibility(e)}))},t.prototype.setSelection=function(e){return this.forEach((function(t){return t.setSelection(e)}))},t.prototype.setColor=function(e){return this.forEach((function(t){return t.setColor(e)}))},t.prototype.update=function(e){return this.forEach((function(t){return t.update(e)}))},t.prototype.build=function(e){return this.forEach((function(t){return t.build(e)}))},t.prototype.dispose=function(e){return this.forEach((function(e){return e.dispose()}))},t}(mg),yg=Object.assign({defaultStep:1,defaultTimeout:50,defaultInterpolateType:"",defaultInterpolateStep:5,defaultMode:"loop",defaultDirection:"forward",initialFrame:0},og),bg=function(e){function t(t,n,r){var i=this;void 0===r&&(r={}),e.call(this,t,Object.assign({name:n.name},r)),this.trajectory=n,this.signals=Object.assign(this.signals,{frameChanged:new fs,playerChanged:new fs,countChanged:new fs,parametersChanged:new fs}),n.signals.frameChanged.add((function(e){i.signals.frameChanged.dispatch(e)})),n.signals.playerChanged.add((function(e){i.signals.playerChanged.dispatch(e)})),n.signals.countChanged.add((function(e){i.signals.countChanged.dispatch(e)})),void 0!==r.initialFrame&&this.setFrame(r.initialFrame)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return yg},n.type.get=function(){return"trajectory"},t.prototype.setFrame=function(e){this.trajectory.setFrame(e)},t.prototype.setParameters=function(e){void 0===e&&(e={}),this.trajectory.setParameters(e),this.signals.parametersChanged.dispatch(e)},t.prototype.dispose=function(){this.trajectory.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(ag),xg=function(e,t){this.name=e,this.path=t,this.coordinates=[],this.boxes=[],this.times=[],this.timeOffset=0,this.deltaTime=1},wg={type:{configurable:!0}};wg.type.get=function(){return"Frames"},Object.defineProperties(xg.prototype,wg);var _g=function(e,t){var n,r;if(this.A=new tp(3,3),this.W=new tp(1,3),this.U=new tp(3,3),this.V=new tp(3,3),this.VH=new tp(3,3),this.R=new tp(3,3),this.tmp=new tp(3,3),this.c=new tp(3,3),e instanceof Mm)n=e.atomCount;else{if(!(e instanceof Float32Array))return;n=e.length/3}if(t instanceof Mm)r=t.atomCount;else{if(!(t instanceof Float32Array))return;r=t.length/3}var i=Math.min(n,r),o=new tp(3,i),a=new tp(3,i);this.coords1t=new tp(i,3),this.coords2t=new tp(i,3),this.transformationMatrix=new j,this.c.data.set([1,0,0,0,1,0,0,0,-1]),this.prepCoords(e,o,i,!1),this.prepCoords(t,a,i,!1),this._superpose(o,a)};_g.prototype._superpose=function(e,t){this.mean1=op(e),this.mean2=op(t),ap(e,this.mean1),ap(t,this.mean2),np(this.coords1t,e),np(this.coords2t,t),rp(this.A,this.coords2t,this.coords1t),cp(this.A,this.W,this.U,this.V),function(e,t){var n=e.data,r=t.data,i=n[4],o=n[8],a=n[5],s=n[7],l=n[0],c=l*i,u=l*a,d=n[3],f=n[1],p=d*f,h=n[2],m=d*h,g=n[6],v=g*f,y=g*h,b=1/(c*o-u*s-p*o+m*s+v*a-y*i);r[0]=(i*o-a*s)*b,r[1]=-(f*o-h*s)*b,r[2]=-(-f*a+h*i)*b,r[3]=-(d*o-a*g)*b,r[4]=(l*o-y)*b,r[5]=-(u-m)*b,r[6]=-(-d*s+i*g)*b,r[7]=-(l*s-v)*b,r[8]=(c-p)*b}(this.V,this.VH),ip(this.R,this.U,this.VH),function(e){var t=e.data;return t[0]*t[4]*t[8]-t[0]*t[5]*t[7]-t[3]*t[1]*t[8]+t[3]*t[2]*t[7]+t[6]*t[1]*t[5]-t[6]*t[2]*t[4]}(this.R)<0&&(sl&&rl.log("R not a right handed system"),ip(this.tmp,this.c,this.VH),ip(this.R,this.U,this.tmp));var n=new tp(4,4),r=new tp(4,4),i=new tp(4,4),o=new tp(4,4),a=new tp(4,4),s=new tp(4,4),l=this.R.data,c=this.mean1,u=this.mean2;o.data.set([1,0,0,-c[0],0,1,0,-c[1],0,0,1,-c[2],0,0,0,1]),a.data.set([l[0],l[1],l[2],0,l[3],l[4],l[5],0,l[6],l[7],l[8],0,0,0,0,1]),s.data.set([1,0,0,u[0],0,1,0,u[1],0,0,1,u[2],0,0,0,1]),np(r,o),rp(n,a,r),np(i,n),rp(r,s,i),np(n,r),this.transformationMatrix.elements=n.data},_g.prototype.prepCoords=function(e,t,n,r){var i=0,o=t.data,a=3,s=3*n;if(r&&(s=4*n,a=4),e instanceof Mm)e.eachAtom((function(e){i<s&&(o[i+0]=e.x,o[i+1]=e.y,o[i+2]=e.z,r&&(o[i+3]=1),i+=a)}));else if(e instanceof Float32Array)for(;i<s;i+=a)i<s&&(o[i]=e[i],o[i+1]=e[i+1],o[i+2]=e[i+2],r&&(o[i+3]=1));else rl.warn("prepCoords: input type unknown")},_g.prototype.transform=function(e){var t;if(e instanceof Mm)t=e.atomCount;else{if(!(e instanceof Float32Array))return;t=e.length/3}var n=new tp(4,t),r=new tp(t,4);this.prepCoords(e,n,t,!0);var i=this.transformationMatrix,o=i.determinant();if(!o)return o;var a=new tp(4,4);a.data=i.elements,function(e,t,n){for(var r=0,i=0,o=0,a=0,s=0,l=0,c=0,u=0,d=t.cols,f=t.rows,p=n.cols,h=t.data,m=n.data,g=e.data,v=0;r<f;a+=d,r++)for(c=0,i=0;i<p;u++,c++,i++){for(l=c,s=a,v=0,o=0;o<d;s++,l+=p,o++)v+=h[s]*m[l];g[u]=v}}(r,n,a);var s=0,l=r.data;if(e instanceof Mm){e.eachAtom((function(e){e.x=l[s],e.y=l[s+1],e.z=l[s+2],s+=4}));var c=new j;c.getInverse(i);var u=e.biomolDict;for(var d in u){if(u.hasOwnProperty(d))u[d].partList.forEach((function(e){e.matrixList.forEach((function(e){e.premultiply(i),e.multiply(c)}))}))}}else if(e instanceof Float32Array)for(var f=4*t;s<f;s+=4)e[s]=l[s],e[s+1]=l[s+1],e[s+2]=l[s+2];else rl.warn("transform: input type unknown");return this.transformationMatrix};var Sg={step:1,timeout:50,start:0,end:0,interpolateType:"",interpolateStep:5,mode:"loop",direction:"forward"},Cg=function(e,t){var n=this;void 0===t&&(t={}),this.signals={startedRunning:new fs,haltedRunning:new fs},this._run=!1,this._previousTime=0,this._currentTime=0,this._currentStep=1,e.signals.playerChanged.add((function(e){e!==n&&n.pause()}),this);var r=Sa(e.frameCount,1);this.traj=e,this.parameters=Ca(t,Sg),this.parameters.end=Math.min(Sa(t.end,r-1),r-1),this.parameters.step=Sa(t.step,Math.ceil((r+1)/100)),this._currentFrame=this.parameters.start,this._direction="bounce"===this.parameters.direction?"forward":this.parameters.direction,e.signals.countChanged.add((function(e){n.parameters.end=Math.min(Sa(n.parameters.end,e-1),e-1)}),this),this._animate=this._animate.bind(this)},kg={isRunning:{configurable:!0}};kg.isRunning.get=function(){return this._run},Cg.prototype.setParameters=function(e){void 0===e&&(e={}),ka(this.parameters,e),void 0!==e.direction&&"bounce"!==this.parameters.direction&&(this._direction=this.parameters.direction)},Cg.prototype._animate=function(){if(this._run){this._currentTime=window.performance.now();var e=this._currentTime-this._previousTime,t=this.parameters.interpolateType?this.parameters.interpolateStep:1,n=this.parameters.timeout/t,r=this.traj;if(r&&r.frameCount&&!r.inProgress&&e>=n)if(this.parameters.interpolateType)if(this._currentStep>this.parameters.interpolateStep&&(this._currentStep=1),1===this._currentStep&&(this._currentFrame=this._nextInterpolated()),r.hasFrame(this._currentFrame)){this._currentStep+=1;var i=this._currentStep/(this.parameters.interpolateStep+1),o=this._currentFrame,a=o[0],s=o[1],l=o[2],c=o[3];r.setFrameInterpolated(a,s,l,c,i,this.parameters.interpolateType),this._previousTime=this._currentTime}else r.loadFrame(this._currentFrame);else{var u=this._next();r.hasFrame(u)?(r.setFrame(u),this._previousTime=this._currentTime):r.loadFrame(u)}window.requestAnimationFrame(this._animate)}},Cg.prototype._next=function(){var e,t=this.parameters;return((e="forward"===this._direction?this.traj.currentFrame+t.step:this.traj.currentFrame-t.step)>t.end||e<t.start)&&("bounce"===t.direction&&("forward"===this._direction?this._direction="backward":this._direction="forward"),"once"===t.mode?(this.pause(),e="forward"===t.direction?t.end:"backward"===t.direction||"forward"===this._direction?t.start:t.end):"forward"===this._direction?(e=t.start,t.interpolateType&&(e=Math.min(t.end,e+t.step))):(e=t.end,t.interpolateType&&(e=Math.max(t.start,e-t.step)))),e},Cg.prototype._nextInterpolated=function(){var e,t,n,r=this.parameters,i=this._next();return"forward"===this._direction?(e=Math.max(r.start,i-r.step),t=Math.max(r.start,i-2*r.step),n=Math.max(r.start,i-3*r.step)):(e=Math.min(r.end,i+r.step),t=Math.min(r.end,i+2*r.step),n=Math.min(r.end,i+3*r.step)),[i,e,t,n]},Cg.prototype.toggle=function(){this._run?this.pause():this.play()},Cg.prototype.play=function(){if(!this._run){this.traj.player!==this&&this.traj.setPlayer(this),this._currentStep=1;var e=this.parameters,t=this.traj.currentFrame,n=Math.ceil(t/e.step)*e.step;"forward"===e.direction&&t>=e.end?n=e.start:"backward"===e.direction&&t<=e.start&&(n=e.end),this.traj.setFrame(n),this._run=!0,this._animate(),this.signals.startedRunning.dispatch()}},Cg.prototype.pause=function(){this._run=!1,this.signals.haltedRunning.dispatch()},Cg.prototype.stop=function(){this.pause(),this.traj.setFrame(this.parameters.start)},Object.defineProperties(Cg.prototype,kg);var Mg=function(e,t,n){var r=this;void 0===n&&(n={}),this.signals={countChanged:new fs,frameChanged:new fs,playerChanged:new fs},this.frameCache={},this.loadQueue={},this.boxCache={},this.pathCache={},this.frameCacheSize=0,this._frameCount=0,this._currentFrame=-1,this._disposed=!1,this.deltaTime=Sa(n.deltaTime,0),this.timeOffset=Sa(n.timeOffset,0),this.centerPbc=Sa(n.centerPbc,!1),this.removePbc=Sa(n.removePbc,!1),this.removePeriodicity=Sa(n.removePeriodicity,!1),this.superpose=Sa(n.superpose,!1),this.name=e.replace(/^.*[\\/]/,""),this.trajPath=e,this.selection=new Bs(Sa(n.sele,"backbone and not hydrogen")),this.selection.signals.stringChanged.add((function(){r.selectionIndices=r.structure.getAtomIndices(r.selection),r._resetCache(),r._saveInitialCoords(),r.setFrame(r._currentFrame)}))},Tg={frameCount:{configurable:!0},currentFrame:{configurable:!0}};Tg.frameCount.get=function(){return this._frameCount},Tg.currentFrame.get=function(){return this._currentFrame},Mg.prototype._init=function(e){this.setStructure(e),this._loadFrameCount(),this.setPlayer(new Cg(this))},Mg.prototype._loadFrameCount=function(){},Mg.prototype.setStructure=function(e){this.structure=e,this.atomCount=e.atomCount,this.backboneIndices=this._getIndices(new Bs("backbone and not hydrogen")),this._makeAtomIndices(),this._saveStructureCoords(),this.selectionIndices=this._getIndices(this.selection),this._resetCache(),this._saveInitialCoords(),this.setFrame(this._currentFrame)},Mg.prototype._saveInitialCoords=function(){var e=this;this.structure.hasCoords()?(this.initialCoords=new Float32Array(this.structureCoords),this._makeSuperposeCoords()):this.frameCache[0]?(this.initialCoords=new Float32Array(this.frameCache[0]),this._makeSuperposeCoords()):this.loadFrame(0,(function(){return e._saveInitialCoords()}))},Mg.prototype._saveStructureCoords=function(){this.structureCoords=this.structure.getAtomData({what:{position:!0}}).position},Mg.prototype.setSelection=function(e){return this.selection.setString(e),this},Mg.prototype._getIndices=function(e){var t=0,n=e.test,r=[];return n&&this.structure.eachAtom((function(e){n(e)&&r.push(t),t+=1})),r},Mg.prototype._makeSuperposeCoords=function(){var e=3*this.selectionIndices.length;this.coords1=new Float32Array(e),this.coords2=new Float32Array(e);for(var t=this.initialCoords,n=this.coords2,r=0;r<e;r+=3){var i=3*this.selectionIndices[r/3];n[r+0]=t[i+0],n[r+1]=t[i+1],n[r+2]=t[i+2]}},Mg.prototype._makeAtomIndices=function(){rl.error("Trajectory._makeAtomIndices not implemented")},Mg.prototype._resetCache=function(){this.frameCache={},this.loadQueue={},this.boxCache={},this.pathCache={},this.frameCacheSize=0,this.initialCoords=new Float32Array(0)},Mg.prototype.setParameters=function(e){void 0===e&&(e={});var t=!1;void 0!==e.centerPbc&&e.centerPbc!==this.centerPbc&&(this.centerPbc=e.centerPbc,t=!0),void 0!==e.removePeriodicity&&e.removePeriodicity!==this.removePeriodicity&&(this.removePeriodicity=e.removePeriodicity,t=!0),void 0!==e.removePbc&&e.removePbc!==this.removePbc&&(this.removePbc=e.removePbc,t=!0),void 0!==e.superpose&&e.superpose!==this.superpose&&(this.superpose=e.superpose,t=!0),this.deltaTime=Sa(e.deltaTime,this.deltaTime),this.timeOffset=Sa(e.timeOffset,this.timeOffset),t&&(this._resetCache(),this.setFrame(this._currentFrame))},Mg.prototype.hasFrame=function(e){var t=this;return Array.isArray(e)?e.every((function(e){return!!t.frameCache[e]})):!!this.frameCache[e]},Mg.prototype.setFrame=function(e,t){var n=this;return void 0===e||(this.inProgress=!0,-1===e||this.frameCache[e]?(this._updateStructure(e),t&&t()):this.loadFrame(e,(function(){n._updateStructure(e),t&&t()}))),this},Mg.prototype._interpolate=function(e,t,n,r,i,o){var a,s=this.frameCache;a="spline"===o?function(e,t,n,r,i){for(var o=e.length,a=new Float32Array(o),s=0;s<o;s+=3){var l=s+1,c=s+2;a[s]=ts(r[s],n[s],t[s],e[s],i,1),a[l]=ts(r[l],n[l],t[l],e[l],i,1),a[c]=ts(r[c],n[c],t[c],e[c],i,1)}return a}(s[e],s[t],s[n],s[r],i):function(e,t,n){for(var r=e.length,i=new Float32Array(r),o=0;o<r;o+=3){var a=o+1,s=o+2;i[o]=es(t[o],e[o],n),i[a]=es(t[a],e[a],n),i[s]=es(t[s],e[s],n)}return i}(s[e],s[t],i),this.structure.updatePosition(a),this._currentFrame=e,this.signals.frameChanged.dispatch(e)},Mg.prototype.setFrameInterpolated=function(e,t,n,r,i,o,a){var s=this;if(void 0===e)return this;var l=this.frameCache,c=[];return l[r]||c.push(r),l[n]||c.push(n),l[t]||c.push(t),l[e]||c.push(e),c.length?this.loadFrame(c,(function(){s._interpolate(e,t,n,r,i,o),a&&a()})):(this._interpolate(e,t,n,r,i,o),a&&a()),this},Mg.prototype.loadFrame=function(e,t){var n=this;Array.isArray(e)?e.forEach((function(e){n.loadQueue[e]||n.frameCache[e]||(n.loadQueue[e]=!0,n._loadFrame(e,(function(){delete n.loadQueue[e]})))})):this.loadQueue[e]||this.frameCache[e]||(this.loadQueue[e]=!0,this._loadFrame(e,(function(){delete n.loadQueue[e],t&&t()})))},Mg.prototype._loadFrame=function(e,t){rl.error("Trajectory._loadFrame not implemented",e,t)},Mg.prototype._updateStructure=function(e){this._disposed?console.error("updateStructure: traj disposed"):(-1===e?this.structureCoords&&this.structure.updatePosition(this.structureCoords):this.structure.updatePosition(this.frameCache[e]),this.structure.trajectory={name:this.trajPath,frame:e},this._currentFrame=e,this.inProgress=!1,this.signals.frameChanged.dispatch(e))},Mg.prototype._doSuperpose=function(e){for(var t=3*this.selectionIndices.length,n=this.coords1,r=this.coords2,i=0;i<t;i+=3){var o=3*this.selectionIndices[i/3];n[i+0]=e[o+0],n[i+1]=e[o+1],n[i+2]=e[o+2]}new _g(n,r).transform(e)},Mg.prototype._process=function(e,t,n,r){if(this._setFrameCount(r),t){if(this.backboneIndices.length>0&&this.centerPbc){var i=[t[0],t[4],t[8]],o=function(e,t,n){return[nc(t,n[0],3,0,e),nc(t,n[1],3,1,e),nc(t,n[2],3,2,e)]}(this.backboneIndices,n,i);!function(e,t,n){if(0!==n[0]&&0!==n[8]&&0!==n[4])for(var r=e.length,i=n[0],o=n[1],a=n[2],s=-t[0]+i+i/2,l=-t[1]+o+o/2,c=-t[2]+a+a/2,u=0;u<r;u+=3)e[u+0]=(e[u+0]+s)%i,e[u+1]=(e[u+1]+l)%o,e[u+2]=(e[u+2]+c)%a}(n,o,i)}if(this.removePeriodicity){var a=function(e){return[mc(e,3,0),mc(e,3,1),mc(e,3,2)]}(n);!function(e,t,n){if(0!==t[0]&&0!==t[8]&&0!==t[4]){for(var r=e.length,i=3;i<r;i+=3)for(var o=0;o<3;++o){var a=(e[i+o]-n[o])/t[3*o+o];Math.abs(a)>.5&&(e[i+o]-=t[3*o+o]*Math.round(a))}}}(n,t,a)}this.removePbc&&function(e,t){if(0!==t[0]&&0!==t[8]&&0!==t[4]){for(var n=e.length,r=3;r<n;r+=3)for(var i=0;i<3;++i){var o=e[r+i]-e[r-3+i];if(Math.abs(o)>.9*t[3*i+i])if(o>0)for(var a=0;a<3;++a)e[r+a]-=t[3*i+a];else for(var s=0;s<3;++s)e[r+s]+=t[3*i+s]}}}(n,t)}this.selectionIndices.length>0&&this.coords1&&this.superpose&&this._doSuperpose(n),this.frameCache[e]=n,this.boxCache[e]=t,this.frameCacheSize+=1},Mg.prototype._setFrameCount=function(e){e!==this._frameCount&&(this._frameCount=e,this.signals.countChanged.dispatch(e))},Mg.prototype.dispose=function(){this._resetCache(),this._disposed=!0,this.player&&this.player.stop()},Mg.prototype.setPlayer=function(e){this.player=e,this.signals.playerChanged.dispatch(e)},Mg.prototype.getFrameTime=function(e){return this.timeOffset+e*this.deltaTime},Object.defineProperties(Mg.prototype,Tg);var Ag=function(e){function t(t,n,r){var i=r||{};i.timeOffset=Sa(i.timeOffset,t.timeOffset),i.deltaTime=Sa(i.deltaTime,t.deltaTime),e.call(this,"",n,i),this.name=t.name,this.path=t.path,this.frames=t.coordinates,this.boxes=t.boxes,this._init(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"frames"},t.prototype._makeAtomIndices=function(){"StructureView"===this.structure.type?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=void 0},t.prototype._loadFrame=function(e,t){var n,r=this.frames[e];if(this.atomIndices){var i=this.atomIndices,o=i.length;n=new Float32Array(3*o);for(var a=0;a<o;++a){var s=3*a,l=3*i[a];n[s+0]=r[l+0],n[s+1]=r[l+1],n[s+2]=r[l+2]}}else n=new Float32Array(r);var c=this.boxes[e],u=this.frames.length;this._process(e,c,n,u),"function"===typeof t&&t()},t.prototype._loadFrameCount=function(){this.frames&&this._setFrameCount(this.frames.length)},Object.defineProperties(t.prototype,n),t}(Mg),Eg=function(e){function t(t,n,r){e.call(this,"",n,r),this._init(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"structure"},t.prototype._makeAtomIndices=function(){this.structure.atomSet&&this.structure.atomSet.getSize()<this.structure.atomStore.count?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=void 0},t.prototype._loadFrame=function(e,t){var n,r=this.structure,i=r.frames[e];if(this.atomIndices){var o=this.atomIndices,a=o.length;n=new Float32Array(3*a);for(var s=0;s<a;++s){var l=3*s,c=3*o[s];n[l+0]=i[c+0],n[l+1]=i[c+1],n[l+2]=i[c+2]}}else n=new Float32Array(i);var u=r.boxes[e],d=r.frames.length;this._process(e,u,n,d),"function"===typeof t&&t()},t.prototype._loadFrameCount=function(){this._setFrameCount(this.structure.frames.length)},Object.defineProperties(t.prototype,n),t}(Mg),Pg=function(e){function t(t,n,r){e.call(this,t,n,r),this._init(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"remote"},t.prototype._makeAtomIndices=function(){var e=[];if("StructureView"===this.structure.type){for(var t=this.structure.getAtomIndices(),n=t.length,r=t[0],i=t[0],o=1;o<n;++o){var a=t[o];i+1<a&&(e.push([r,i+1]),r=a),i=a}e.push([r,i+1])}else e.push([0,this.atomCount]);this.atomIndices=e},t.prototype._loadFrame=function(e,t){var n=this,r=new XMLHttpRequest,i=ul.getFrameUrl(this.trajPath,e),o=ul.getFrameParams(this.trajPath,this.atomIndices);r.open("POST",i,!0),r.responseType="arraybuffer",r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.addEventListener("load",(function(){var o=r.response;if(o){var a=new Int32Array(o,0,1)[0],s=new Float32Array(o,8,9),l=new Float32Array(o,44);n._process(e,s,l,a),"function"===typeof t&&t()}else rl.error("empty arrayBuffer for '"+i+"'")}),!1),r.send(o)},t.prototype._loadFrameCount=function(){var e=this,t=new XMLHttpRequest,n=ul.getCountUrl(this.trajPath);t.open("GET",n,!0),t.addEventListener("load",(function(){e._setFrameCount(parseInt(t.response))}),!1),t.send()},Object.defineProperties(t.prototype,n),t}(Mg);Mm.prototype.getView=function(e){return new Rg(this,e)};var Rg=function(e){function t(t,n){e.call(this),this.structure=t,this.selection=n,this.center=new H,this.boundingBox=new K,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy(),this.selection&&this.selection.signals.stringChanged.add(this.refresh,this),this.structure.signals.refreshed.add(this.refresh,this),this.refresh()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},name:{configurable:!0},path:{configurable:!0},title:{configurable:!0},id:{configurable:!0},data:{configurable:!0},atomSetDict:{configurable:!0},biomolDict:{configurable:!0},entityList:{configurable:!0},unitcell:{configurable:!0},frames:{configurable:!0},boxes:{configurable:!0},validation:{configurable:!0},bondStore:{configurable:!0},backboneBondStore:{configurable:!0},rungBondStore:{configurable:!0},atomStore:{configurable:!0},residueStore:{configurable:!0},chainStore:{configurable:!0},modelStore:{configurable:!0},atomMap:{configurable:!0},residueMap:{configurable:!0},bondHash:{configurable:!0},spatialHash:{configurable:!0},_hasCoords:{configurable:!0}};return t.prototype.init=function(){},n.type.get=function(){return"StructureView"},n.name.get=function(){return this.structure.name},n.path.get=function(){return this.structure.path},n.title.get=function(){return this.structure.title},n.id.get=function(){return this.structure.id},n.data.get=function(){return this.structure.data},n.atomSetDict.get=function(){return this.structure.atomSetDict},n.biomolDict.get=function(){return this.structure.biomolDict},n.entityList.get=function(){return this.structure.entityList},n.unitcell.get=function(){return this.structure.unitcell},n.frames.get=function(){return this.structure.frames},n.boxes.get=function(){return this.structure.boxes},n.validation.get=function(){return this.structure.validation},n.bondStore.get=function(){return this.structure.bondStore},n.backboneBondStore.get=function(){return this.structure.backboneBondStore},n.rungBondStore.get=function(){return this.structure.rungBondStore},n.atomStore.get=function(){return this.structure.atomStore},n.residueStore.get=function(){return this.structure.residueStore},n.chainStore.get=function(){return this.structure.chainStore},n.modelStore.get=function(){return this.structure.modelStore},n.atomMap.get=function(){return this.structure.atomMap},n.residueMap.get=function(){return this.structure.residueMap},n.bondHash.get=function(){return this.structure.bondHash},n.spatialHash.get=function(){return this.structure.spatialHash},n._hasCoords.get=function(){return this.structure._hasCoords},n._hasCoords.set=function(e){this.structure._hasCoords=e},t.prototype.refresh=function(){var e=this;sl&&rl.time("StructureView.refresh"),this.atomSetCache={};var t=this.structure;if(this.selection.isAllSelection()&&t!==this&&t.atomSet&&t.bondSet){for(var n in this.atomSet=t.atomSet.clone(),this.bondSet=t.bondSet.clone(),e.atomSetDict){var r=e.atomSetDict[n];e.atomSetCache["__"+n]=r.clone()}this.atomCount=t.atomCount,this.bondCount=t.bondCount,this.boundingBox.copy(t.boundingBox),this.center.copy(t.center)}else if(this.selection.isNoneSelection()&&t!==this&&t.atomSet&&t.bondSet){for(var i in this.atomSet=new bd(t.atomCount),this.bondSet=new bd(t.bondCount),e.atomSetDict)e.atomSetCache["__"+i]=new bd(t.atomCount);this.atomCount=0,this.bondCount=0,this.boundingBox.makeEmpty(),this.center.set(0,0,0)}else{for(var o in this.atomSet=this.getAtomSet(this.selection,!0),t.atomSet&&(this.atomSet=this.atomSet.intersection(t.atomSet)),this.bondSet=this.getBondSet(),e.atomSetDict){var a=e.atomSetDict[o];e.atomSetCache["__"+o]=a.makeIntersection(e.atomSet)}this.atomCount=this.atomSet.getSize(),this.bondCount=this.bondSet.getSize(),this.boundingBox=this.getBoundingBox(),this.center=this.boundingBox.getCenter(new H)}sl&&rl.timeEnd("StructureView.refresh"),this.signals.refreshed.dispatch()},t.prototype.setSelection=function(e){this.selection=e,this.refresh()},t.prototype.getSelection=function(e){var t=[];e&&e.string&&t.push(e.string);var n=this.structure.getSelection();n&&n.string&&t.push(n.string),this.selection&&this.selection.string&&t.push(this.selection.string);var r="";return t.length>0&&(r="( "+t.join(" ) AND ( ")+" )"),new Bs(r)},t.prototype.getStructure=function(){return this.structure.getStructure()},t.prototype.eachBond=function(e,t){this.structure.eachBond(e,this.getSelection(t))},t.prototype.eachAtom=function(e,t){var n=this.getAtomProxy(),r=this.getAtomSet(t),i=this.atomStore.count;if(r.getSize()<i)r.forEach((function(t){n.index=t,e(n)}));else for(var o=0;o<i;++o)n.index=o,e(n)},t.prototype.eachResidue=function(e,t){this.structure.eachResidue(e,this.getSelection(t))},t.prototype.eachResidueN=function(e,t){console.error("StructureView.eachResidueN() not implemented")},t.prototype.eachChain=function(e,t){this.structure.eachChain(e,this.getSelection(t))},t.prototype.eachModel=function(e,t){this.structure.eachModel(e,this.getSelection(t))},t.prototype.getAtomSet=function(e,t){void 0===t&&(t=!1);var n=this.structure.getAtomSet(e);return!t&&this.atomSet&&(n=n.makeIntersection(this.atomSet)),n},t.prototype.getAtomIndices=function(e){return this.structure.getAtomIndices(this.getSelection(e))},t.prototype.refreshPosition=function(){return this.structure.refreshPosition()},t.prototype.dispose=function(){this.selection&&this.selection.signals.stringChanged.remove(this.refresh,this),this.structure.signals.refreshed.remove(this.refresh,this),delete this.structure,delete this.atomSet,delete this.bondSet,delete this.atomCount,delete this.bondCount},Object.defineProperties(t.prototype,n),t}(Mm),Og=[[4,0,-2,-1,-2,0,-2,-1,-1,-1,-1,-2,-1,-1,-1,1,0,0,-3,-2],[0,9,-3,-4,-2,-3,-3,-1,-3,-1,-1,-3,-3,-3,-3,-1,-1,-1,-2,-2],[-2,-3,6,2,-3,-1,-1,-3,-1,-4,-3,1,-1,0,-2,0,-1,-3,-4,-3],[-1,-4,2,5,-3,-2,0,-3,1,-3,-2,0,-1,2,0,0,-1,-2,-3,-2],[-2,-2,-3,-3,6,-3,-1,0,-3,0,0,-3,-4,-3,-3,-2,-2,-1,1,3],[0,-3,-1,-2,-3,6,-2,-4,-2,-4,-3,0,-2,-2,-2,0,-2,-3,-2,-3],[-2,-3,-1,0,-1,-2,8,-3,-1,-3,-2,1,-2,0,0,-1,-2,-3,-2,2],[-1,-1,-3,-3,0,-4,-3,4,-3,2,1,-3,-3,-3,-3,-2,-1,3,-3,-1],[-1,-3,-1,1,-3,-2,-1,-3,5,-2,-1,0,-1,1,2,0,-1,-2,-3,-2],[-1,-1,-4,-3,0,-4,-3,2,-2,4,2,-3,-3,-2,-2,-2,-1,1,-2,-1],[-1,-1,-3,-2,0,-3,-2,1,-1,2,5,-2,-2,0,-1,-1,-1,1,-1,-1],[-2,-3,1,0,-3,0,1,-3,0,-3,-2,6,-2,0,0,1,0,-3,-4,-2],[-1,-3,-1,-1,-4,-2,-2,-3,-1,-3,-2,-2,7,-1,-2,-1,-1,-2,-4,-3],[-1,-3,0,2,-3,-2,0,-3,1,-2,0,0,-1,5,1,0,-1,-2,-2,-1],[-1,-3,-2,0,-3,-2,0,-3,2,-2,-1,0,-2,1,5,-1,-1,-3,-3,-2],[1,-1,0,0,-2,0,-1,-2,0,-2,-1,1,-1,0,-1,4,1,-2,-3,-2],[0,-1,-1,-1,-2,-2,-2,-1,-1,-1,-1,0,-1,-1,-1,1,5,0,-2,-2],[0,-1,-3,-2,-1,-3,-3,3,-2,1,1,-3,-2,-2,-3,-2,0,4,-3,-1],[-3,-2,-4,-3,1,-2,-2,-3,-3,-2,-1,-4,-4,-2,-3,-3,-2,-3,11,2],[-2,-2,-3,-2,3,-3,2,-1,-2,-1,-1,-2,-3,-1,-2,-2,-2,-1,2,7]];function Ig(e,t){var n,r=0,i={};return t.forEach((function(t){n=0;var o={};t.forEach((function(t){o[e[n++]]=t})),i[e[r++]]=o})),i}var Lg={blosum62:Ig("ARNDCQEGHILKMFPSTWYVBZ?",[[4,-1,-2,-2,0,-1,-1,0,-2,-1,-1,-1,-1,-2,-1,1,0,-3,-2,0,-2,-1,0],[-1,5,0,-2,-3,1,0,-2,0,-3,-2,2,-1,-3,-2,-1,-1,-3,-2,-3,-1,0,-1],[-2,0,6,1,-3,0,0,0,1,-3,-3,0,-2,-3,-2,1,0,-4,-2,-3,3,0,-1],[-2,-2,1,6,-3,0,2,-1,-1,-3,-4,-1,-3,-3,-1,0,-1,-4,-3,-3,4,1,-1],[0,-3,-3,-3,9,-3,-4,-3,-3,-1,-1,-3,-1,-2,-3,-1,-1,-2,-2,-1,-3,-3,-2],[-1,1,0,0,-3,5,2,-2,0,-3,-2,1,0,-3,-1,0,-1,-2,-1,-2,0,3,-1],[-1,0,0,2,-4,2,5,-2,0,-3,-3,1,-2,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-2,0,-1,-3,-2,-2,6,-2,-4,-4,-2,-3,-3,-2,0,-2,-2,-3,-3,-1,-2,-1],[-2,0,1,-1,-3,0,0,-2,8,-3,-3,-1,-2,-1,-2,-1,-2,-2,2,-3,0,0,-1],[-1,-3,-3,-3,-1,-3,-3,-4,-3,4,2,-3,1,0,-3,-2,-1,-3,-1,3,-3,-3,-1],[-1,-2,-3,-4,-1,-2,-3,-4,-3,2,4,-2,2,0,-3,-2,-1,-2,-1,1,-4,-3,-1],[-1,2,0,-1,-3,1,1,-2,-1,-3,-2,5,-1,-3,-1,0,-1,-3,-2,-2,0,1,-1],[-1,-1,-2,-3,-1,0,-2,-3,-2,1,2,-1,5,0,-2,-1,-1,-1,-1,1,-3,-1,-1],[-2,-3,-3,-3,-2,-3,-3,-3,-1,0,0,-3,0,6,-4,-2,-2,1,3,-1,-3,-3,-1],[-1,-2,-2,-1,-3,-1,-1,-2,-2,-3,-3,-1,-2,-4,7,-1,-1,-4,-3,-2,-2,-1,-2],[1,-1,1,0,-1,0,0,0,-1,-2,-2,0,-1,-2,-1,4,1,-3,-2,-2,0,0,0],[0,-1,0,-1,-1,-1,-1,-2,-2,-1,-1,-1,-1,-2,-1,1,5,-2,-2,0,-1,-1,0],[-3,-3,-4,-4,-2,-2,-3,-2,-2,-3,-2,-3,-1,1,-4,-3,-2,11,2,-3,-4,-3,-2],[-2,-2,-2,-3,-2,-1,-2,-3,2,-1,-1,-2,-1,3,-3,-2,-2,2,7,-1,-3,-2,-1],[0,-3,-3,-3,-1,-2,-2,-3,-3,3,1,-2,1,-1,-2,-2,0,-3,-1,4,-3,-2,-1],[-2,-1,3,4,-3,0,1,-1,0,-3,-4,0,-3,-3,-2,0,-1,-4,-3,-3,4,1,-1],[-1,0,0,1,-3,3,4,-2,0,-3,-3,1,-1,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,0,0,-2,-1,-1,-1,-1,-1]]),blosum62x:Ig("ACDEFGHIKLMNPQRSTVWY",Og)},Dg=function(e,t,n,r,i){void 0===n&&(n=-10),void 0===r&&(r=-1),void 0===i&&(i="blosum62"),this.seq1=e,this.seq2=t,this.gapPenalty=n,this.gapExtensionPenalty=r,i&&(this.substMatrix=Lg[i])};function Ng(e,t,n,r,i){var o,a,s,l,c;if(void 0===n&&(n=!1),void 0===r&&(r=""),void 0===i&&(i=""),n){var u=e,d=t;r&&i&&(u=e.getView(new Bs(r)),d=t.getView(new Bs(i)));var f,p,h=u.getSequence(),m=d.getSequence(),g=new Dg(h.join(""),m.join(""));g.calc(),g.trace(),o=0,a=0,s=g.ali1.length;for(var v=[],y=[],b=0;b<s;++b){var x=g.ali1[b],w=g.ali2[b];f=0,p=0,"-"===x?y[a]=!1:(y[a]=!0,f=1),"-"===w?v[o]=!1:(v[o]=!0,p=1),o+=f,a+=p}var _=[],S=[],C=u.getAtomProxy(),k=d.getAtomProxy();o=0,u.eachResidue((function(e){void 0!==e.traceAtomIndex&&e.traceAtomIndex===e.getAtomIndexByName("CA")&&(v[o]&&(C.index=e.getAtomIndexByName("CA"),_.push(C.x,C.y,C.z)),o+=1)})),o=0,d.eachResidue((function(e){void 0!==e.traceAtomIndex&&e.traceAtomIndex===e.getAtomIndexByName("CA")&&(y[o]&&(k.index=e.getAtomIndexByName("CA"),S.push(k.x,k.y,k.z)),o+=1)})),l=new Float32Array(_),c=new Float32Array(S)}else{l=e.getView(new Bs(r+" and .CA")),c=t.getView(new Bs(i+" and .CA"))}var M=new _g(l,c).transform(e);return e.refreshPosition(),M}Dg.prototype.initMatrices=function(){var e=this;this.n=this.seq1.length,this.m=this.seq2.length,this.score=void 0,this.ali="",this.S=[],this.V=[],this.H=[];for(var t=0;t<=this.n;++t){e.S[t]=[],e.V[t]=[],e.H[t]=[];for(var n=0;n<=this.m;++n)e.S[t][n]=0,e.V[t][n]=0,e.H[t][n]=0}for(var r=0;r<=this.n;++r)e.S[r][0]=e.gap(0),e.H[r][0]=-1/0;for(var i=0;i<=this.m;++i)e.S[0][i]=e.gap(0),e.V[0][i]=-1/0;this.S[0][0]=0},Dg.prototype.gap=function(e){return this.gapPenalty+e*this.gapExtensionPenalty},Dg.prototype.makeScoreFn=function(){var e=this.seq1,t=this.seq2,n=this.substMatrix;return n?function(r,i){var o=e[r],a=t[i];try{return n[o][a]}catch(bS){return-4}}:(rl.warn("Alignment: no subst matrix"),function(n,r){return e[n]===t[r]?5:-3})},Dg.prototype.calc=function(){sl&&rl.time("Alignment.calc"),this.initMatrices();for(var e,t,n,r,i,o=this.gap(0),a=this.makeScoreFn(),s=this.gapExtensionPenalty,l=this.V,c=this.H,u=this.S,d=this.n,f=this.m,p=1;p<=d;++p){t=u[p-1],e=l[p-1],n=l[p],r=c[p],i=u[p];for(var h=1;h<=f;++h)n[h]=Math.max(t[h]+o,e[h]+s),r[h]=Math.max(i[h-1]+o,r[h-1]+s),i[h]=Math.max(t[h-1]+a(p-1,h-1),n[h],r[h])}sl&&rl.timeEnd("Alignment.calc"),sl&&rl.log(this.S,this.V,this.H)},Dg.prototype.trace=function(){var e=this;sl&&rl.time("Alignment.trace"),this.ali1="",this.ali2="";var t,n=this.makeScoreFn(),r=this.n,i=this.m;for(this.S[r][i]>=this.V[r][i]?(t="S",this.score=this.S[r][i]):this.V[r][i]>=this.H[r][i]?(t="V",this.score=this.V[r][i]):(t="H",this.score=this.H[r][i]),sl&&rl.log("Alignment: SCORE",this.score),sl&&rl.log("Alignment: S, V, H",this.S[r][i],this.V[r][i],this.H[r][i]);r>0&&i>0;)"S"===t?e.S[r][i]===e.S[r-1][i-1]+n(r-1,i-1)?(e.ali1=e.seq1[r-1]+e.ali1,e.ali2=e.seq2[i-1]+e.ali2,--r,--i,t="S"):e.S[r][i]===e.V[r][i]?t="V":e.S[r][i]===e.H[r][i]?t="H":(--r,--i):"V"===t?e.V[r][i]===e.V[r-1][i]+e.gapExtensionPenalty?(e.ali1=e.seq1[r-1]+e.ali1,e.ali2="-"+e.ali2,--r,t="V"):e.V[r][i]===e.S[r-1][i]+e.gap(0)?(e.ali1=e.seq1[r-1]+e.ali1,e.ali2="-"+e.ali2,--r,t="S"):--r:"H"===t?e.H[r][i]===e.H[r][i-1]+e.gapExtensionPenalty?(e.ali1="-"+e.ali1,e.ali2=e.seq2[i-1]+e.ali2,--i,t="H"):e.H[r][i]===e.S[r][i-1]+e.gap(0)?(e.ali1="-"+e.ali1,e.ali2=e.seq2[i-1]+e.ali2,--i,t="S"):--i:rl.error("Alignment: no matrix");for(;r>0;)e.ali1=e.seq1[r-1]+e.ali1,e.ali2="-"+e.ali2,--r;for(;i>0;)e.ali1="-"+e.ali1,e.ali2=e.seq2[i-1]+e.ali2,--i;sl&&rl.timeEnd("Alignment.trace"),sl&&rl.log([this.ali1,this.ali2])};var Fg=Object.assign({sele:"",defaultAssembly:""},fg),zg=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,t,n,Object.assign({name:n.name},r)),this.structure=n,this.trajList=[],this.signals=Object.assign(this.signals,{trajectoryAdded:new fs,trajectoryRemoved:new fs,defaultAssemblyChanged:new fs}),this.initSelection(this.parameters.sele),this.pickBuffer=function(e){var t=0,n=0,r=[];return{has:function(e){return-1!==r.indexOf(e)},get:function(e){return r[e]},push:function(i){r[t]=i,t=(e+t+1)%e,++n},get count(){return n},get data(){return r.slice(0,Math.min(n,e))},clear:function(){n=0,t=0,r.length=0}}}(4),this.pickDict=function(){var e={};return{has:function(t){return void 0!==e[JSON.stringify(t)]},add:function(t,n){e[JSON.stringify(t)]=n},del:function(t){delete e[JSON.stringify(t)]},get values(){return Object.keys(e).map((function(t){return e[t]}))}}}(),this.spacefillRepresentation=this.addRepresentation("spacefill",{sele:"none",opacity:il.opacity,color:il.color,disablePicking:!0,radiusType:"data"},!0),this.distanceRepresentation=this.addRepresentation("distance",il,!0),this.angleRepresentation=this.addRepresentation("angle",il,!0),this.dihedralRepresentation=this.addRepresentation("dihedral",il,!0),this.measureRepresentations=new vg([this.spacefillRepresentation,this.distanceRepresentation,this.angleRepresentation,this.dihedralRepresentation]),this.setDefaultAssembly(this.parameters.defaultAssembly)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return Fg},n.type.get=function(){return"structure"},t.prototype.initSelection=function(e){var t=this;this.selection=new Bs(e),this.structureView=new Rg(this.structure,this.selection),this.selection.signals.stringChanged.add((function(){t.structureView.setSelection(t.selection),t.rebuildRepresentations(),t.rebuildTrajectories()}))},t.prototype.setSelection=function(e){return this.parameters.sele=e,this.selection.setString(e),this},t.prototype.setDefaultAssembly=function(e){if(void 0===this.structure.biomolDict[e]&&(e=""),this.parameters.defaultAssembly!==e){var t={defaultAssembly:e};this.reprList.forEach((function(e){return e.setParameters(t)})),this.measureRepresentations.setParameters(t),this.parameters.defaultAssembly=e,this.signals.defaultAssemblyChanged.dispatch(e)}return this},t.prototype.rebuildRepresentations=function(){this.reprList.forEach((function(e){e.build()})),this.measureRepresentations.build()},t.prototype.rebuildTrajectories=function(){var e=this;this.trajList.forEach((function(t){t.trajectory.setStructure(e.structureView)}))},t.prototype.updateRepresentations=function(t){e.prototype.updateRepresentations.call(this,t),this.measureRepresentations.update(t)},t.prototype.addRepresentation=function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1),t.defaultAssembly=this.parameters.defaultAssembly;var i=this._addRepresentation(e,this.structureView,t,n);return n||i.signals.parametersChanged.add((function(){return r.measureUpdate()})),i},t.prototype.addTrajectory=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t={});var r=function(e,t,n){return e&&e instanceof xg?new Ag(e,t,n):!e&&t.frames?new Eg(e,t,n):new Pg(e,t,n)}(e,this.structureView,t);r.signals.frameChanged.add((function(){n.updateRepresentations({position:!0})}));var i=new bg(this.stage,r,t);return this.trajList.push(i),this.signals.trajectoryAdded.dispatch(i),i},t.prototype.removeTrajectory=function(e){var t=this.trajList.indexOf(e);-1!==t&&this.trajList.splice(t,1),e.dispose(),this.signals.trajectoryRemoved.dispatch(e)},t.prototype.dispose=function(){this.trajList.slice().forEach((function(e){return e.dispose()})),this.trajList.length=0,this.structure.dispose(),this.measureRepresentations.dispose(),e.prototype.dispose.call(this)},t.prototype.autoView=function(e,t){"number"===typeof e&&(t=e,e=""),this.stage.animationControls.zoomMove(this.getCenter(e),this.getZoom(e),Sa(t,0))},t.prototype.getBoxUntransformed=function(e){return e?this.structureView.getBoundingBox(new Bs(e)):this.structureView.boundingBox},t.prototype.getCenterUntransformed=function(e){return e&&"string"===typeof e?this.structure.atomCenter(new Bs(e)):this.structure.center},t.prototype.superpose=function(e,t,n,r){return Ng(this.structureView,e.structureView,t,n,r),this.updateRepresentations({position:!0}),this},t.prototype.getMaxRepresentationRadius=function(e){var t=0,n=this.structure.getAtomProxy(e);return this.eachRepresentation((function(e){if(e.getVisibility()){var r=e.repr;t=Math.max(r.getAtomRadius(n),t)}})),t},t.prototype.measurePick=function(e){var t=this.pickBuffer.count;if(this.lastPick===e.index&&t>=1){if(t>1){var n=this.pickBuffer.data,r=this.pickBuffer.data.sort();this.pickDict.has(r)?this.pickDict.del(r):this.pickDict.add(r,n),2===t?this.distanceRepresentation.setParameters({atomPair:this.pickDict.values.filter((function(e){return 2===e.length}))}):3===t?this.angleRepresentation.setParameters({atomTriple:this.pickDict.values.filter((function(e){return 3===e.length}))}):4===t&&this.dihedralRepresentation.setParameters({atomQuad:this.pickDict.values.filter((function(e){return 4===e.length}))})}this.pickBuffer.clear(),this.lastPick=void 0}else this.pickBuffer.has(e.index)||this.pickBuffer.push(e.index),this.lastPick=e.index;this.measureUpdate()},t.prototype.measureClear=function(){this.pickBuffer.clear(),this.lastPick=void 0,this.spacefillRepresentation.setSelection("none")},t.prototype.measureBuild=function(){var e=this.measureData();this.distanceRepresentation.setParameters({atomPair:e.distance}),this.angleRepresentation.setParameters({atomTriple:e.angle}),this.dihedralRepresentation.setParameters({atomQuad:e.dihedral})},t.prototype.measureUpdate=function(){var e=this,t=this.pickBuffer.data,n={};t.forEach((function(t){var r=Math.max(.1,e.getMaxRepresentationRadius(t));n[t]=r*(2.3-ns(.1,2,r))})),this.spacefillRepresentation.setSelection(t.length?"@"+t.join(","):"none"),this.spacefillRepresentation.setParameters({radiusData:n})},t.prototype.measureData=function(){var e=this.pickDict.values;return{distance:e.filter((function(e){return 2===e.length})),angle:e.filter((function(e){return 3===e.length})),dihedral:e.filter((function(e){return 4===e.length}))}},t.prototype.removeAllMeasurements=function(e){var t=this.pickDict,n=t.values,r=function(e){n.filter((function(t){return t.length===e})).forEach((function(e){return t.del(e.slice().sort())}))};(!e||1&e)&&r(2),(!e||2&e)&&r(3),(!e||4&e)&&r(4),this.measureBuild()},t.prototype.removeMeasurement=function(e){this.pickDict.del(e.slice().sort()),this.measureBuild()},t.prototype.addMeasurement=function(e){if(!(e.length<2||e.length>4)){var t=e.slice().sort();this.pickDict.has(t)||this.pickDict.add(t,e),this.measureBuild()}},Object.defineProperties(t.prototype,n),t}(pg);bl.add("structure",zg),bl.add("structureview",zg);var Bg=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,t,n,Object.assign({name:n.name},r)),this.surface=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"surface"},t.prototype.addRepresentation=function(e,t){return void 0===t&&(t={}),this._addRepresentation(e,this.surface,t)},t.prototype.getBoxUntransformed=function(){return this.surface.boundingBox},t.prototype.getCenterUntransformed=function(){return this.surface.center},t.prototype.dispose=function(){this.surface.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(pg);bl.add("surface",Bg);var jg=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,t,n,Object.assign({name:n.name},r)),this.volume=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"volume"},t.prototype.addRepresentation=function(e,t){return void 0===t&&(t={}),this._addRepresentation(e,this.volume,t)},t.prototype.getBoxUntransformed=function(){return this.volume.boundingBox},t.prototype.getCenterUntransformed=function(){return this.volume.center},t.prototype.dispose=function(){this.volume.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(pg);bl.add("volume",jg);var Zg=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addRepresentation=function(e,t){return this.forEach((function(n){return n.addRepresentation(e,t)}))},t.prototype.autoView=function(e){return this.forEach((function(t){return t.autoView(e)}))},t}(mg);function Hg(e,t){return e instanceof RegExp?null!==t.name.match(e):t.name===e}var Ug=new H,Vg={impostor:!0,quality:"medium",workerDefault:!0,sampleLevel:0,backgroundColor:"black",rotateSpeed:2,zoomSpeed:1.2,panSpeed:1,clipNear:0,clipFar:100,clipDist:10,clipMode:"scene",clipScale:"relative",fogNear:50,fogFar:100,fogMode:"scene",fogScale:"relative",cameraFov:40,cameraEyeSep:.3,cameraType:"perspective",lightColor:14540253,lightIntensity:1,ambientColor:14540253,ambientIntensity:.2,hoverTimeout:0,tooltip:!0,mousePreset:"default"},Gg=function(e,t){void 0===t&&(t={}),this.signals={parametersChanged:new fs,fullscreenChanged:new fs,componentAdded:new fs,componentRemoved:new fs,clicked:new fs,hovered:new fs},this.tasks=new Hl,this.compList=[],this.defaultFileParams={},this.logList=[],this.viewer=new Lc(e),this.viewer.renderer&&(this.tooltip=document.createElement("div"),Object.assign(this.tooltip.style,{display:"none",position:"fixed",zIndex:"1000000",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),this.viewer.container.appendChild(this.tooltip),this.mouseObserver=new Bc(this.viewer.renderer.domElement),this.viewerControls=new uu(this),this.trackballControls=new Xc(this),this.pickingControls=new tu(this),this.animationControls=new Su(this),this.mouseControls=new Gp(this),this.keyControls=new qp(this),this.pickingBehavior=new Yp(this),this.mouseBehavior=new Xp(this),this.animationBehavior=new Kp(this),this.keyBehavior=new Qp(this),this.spinAnimation=this.animationControls.spin([0,1,0],.005),this.spinAnimation.pause(!0),this.rockAnimation=this.animationControls.rock([0,1,0],.005),this.rockAnimation.pause(!0),this.parameters=Ca(t,Vg),this.setParameters(this.parameters),this.viewer.animate())};Gg.prototype.setParameters=function(e){void 0===e&&(e={}),ka(this.parameters,e);var t=e,n=this.parameters,r=this.viewer,i=this.trackballControls;return void 0!==t.quality&&this.setQuality(n.quality),void 0!==t.impostor&&this.setImpostor(n.impostor),void 0!==t.rotateSpeed&&(i.rotateSpeed=n.rotateSpeed),void 0!==t.zoomSpeed&&(i.zoomSpeed=n.zoomSpeed),void 0!==t.panSpeed&&(i.panSpeed=n.panSpeed),void 0!==t.mousePreset&&this.mouseControls.preset(n.mousePreset),this.mouseObserver.setParameters({hoverTimeout:n.hoverTimeout}),r.setClip(n.clipNear,n.clipFar,n.clipDist,n.clipMode,n.clipScale),r.setFog(void 0,n.fogNear,n.fogFar,n.fogMode,n.fogScale),r.setCamera(n.cameraType,n.cameraFov,n.cameraEyeSep),r.setSampling(n.sampleLevel),r.setBackground(n.backgroundColor),r.setLight(n.lightColor,n.lightIntensity,n.ambientColor,n.ambientIntensity),this.signals.parametersChanged.dispatch(this.getParameters()),this},Gg.prototype.log=function(e){console.log("STAGE LOG",e),this.logList.push(e)},Gg.prototype.getParameters=function(){return Object.assign({},this.parameters)},Gg.prototype.defaultFileRepresentation=function(e){if(e instanceof zg){var t,n,r;e.setSelection("/0");var i=e.structure;if(i.biomolDict.BU1){var o=i.biomolDict.BU1;t=o.getAtomCount(i),n=o.getResidueCount(i),r=o.getInstanceCount(),e.setDefaultAssembly("BU1")}else t=i.getModelProxy(0).atomCount,n=i.getModelProxy(0).residueCount,r=1;var a=t;el&&(a*=4);var s=i.atomStore.count/i.residueStore.count<2;s&&(a*=10);var l="chainname",c="RdYlBu",u=!1;if(1===i.getChainnameCount(new Bs("polymer and /0"))&&(l="residueindex",c="spectral",u=!0),sl&&console.log(a,t,r,s),n/r<4)e.addRepresentation("ball+stick",{colorScheme:"element",radiusScale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"});else if(r>5&&a>15e3||a>7e5){var d=Math.min(1.5,Math.max(.1,2e3/(a/r)));s&&(d=Math.min(d,.15)),e.addRepresentation("surface",{colorScheme:l,colorScale:c,colorReverse:u,sele:"polymer",surfaceType:"sas",probeRadius:1.4,scaleFactor:d,useWorker:!1})}else a>25e4?e.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,lineOnly:!0}):a>1e5?e.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,quality:"low",disableImpostor:!0,radiusScale:2}):a>8e4?e.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,radiusScale:2}):(e.addRepresentation("cartoon",{colorScheme:l,colorScale:c,colorReverse:u,radiusScale:.7,aspectRatio:5,quality:"auto"}),a<5e4&&e.addRepresentation("base",{colorScheme:l,colorScale:c,colorReverse:u,quality:"auto"}),e.addRepresentation("ball+stick",{sele:"ligand",colorScheme:"element",radiusScale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"}));e.structure.frames.length&&e.addTrajectory()}else(e instanceof Bg||e instanceof jg)&&e.addRepresentation("surface");this.tasks.onZeroOnce(this.autoView,this)},Gg.prototype.loadFile=function(e,t){var n=this;void 0===t&&(t={});var r=Object.assign({},this.defaultFileParams,t),i=Rl(e).name;this.tasks.increment(),this.log("loading file '"+i+"'");var o=Sa(r.ext,Rl(e).ext);return(gl.isTrajectory(o)?Promise.reject(new Error("loadFile: ext '"+o+"' is a trajectory and must be loaded into a structure component")):Il(e,r)).then((function(e){n.log("loaded '"+i+"'");var t=n.addComponentFromObject(e,r);return r.defaultRepresentation&&n.defaultFileRepresentation(t),n.tasks.decrement(),t}),(function(e){n.tasks.decrement();var t="error loading file: '"+e+"'";throw n.log(t),t}))},Gg.prototype.loadScript=function(e){var t=this,n=Rl(e).name;return this.log("loading script '"+n+"'"),Il(e).then((function(e){t.tasks.increment(),t.log("running script '"+n+"'"),e.run(t).then((function(){t.tasks.decrement(),t.log("finished script '"+n+"'")})),t.log("called script '"+n+"'")}),(function(e){t.tasks.decrement();var r="errored script '"+n+"' \""+e+'"';throw t.log(r),r}))},Gg.prototype.addComponent=function(e){e?(this.compList.push(e),this.signals.componentAdded.dispatch(e)):rl.warn("Stage.addComponent: no component given")},Gg.prototype.addComponentFromObject=function(e,t){void 0===t&&(t={});var n=bl.get(e.type);if(n){var r=new n(this,e,t);return this.addComponent(r),r}rl.warn("no component for object type",e.type)},Gg.prototype.removeComponent=function(e){var t=this.compList.indexOf(e);-1!==t&&(this.compList.splice(t,1),e.dispose(),this.signals.componentRemoved.dispatch(e))},Gg.prototype.removeAllComponents=function(){var e=this;this.compList.slice().forEach((function(t){return e.removeComponent(t)}))},Gg.prototype.handleResize=function(){this.viewer.handleResize()},Gg.prototype.setSize=function(e,t){var n=this.viewer.container;n!==document.body&&(void 0!==e&&(n.style.width=e),void 0!==t&&(n.style.height=t),this.handleResize())},Gg.prototype.toggleFullscreen=function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled){var t=this;e=e||this.viewer.container,this.lastFullscreenElement=e,n()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e.dataset.normalWidth=e.style.width||"",e.dataset.normalHeight=e.style.height||"",e.style.width=window.screen.width+"px",e.style.height=window.screen.height+"px",e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),document.addEventListener("fullscreenchange",r),document.addEventListener("mozfullscreenchange",r),document.addEventListener("webkitfullscreenchange",r),document.addEventListener("MSFullscreenChange",r),this.handleResize(),this.signals.fullscreenChanged.dispatch(!0),setTimeout((function(){t.handleResize()}),100))}else rl.log("fullscreen mode (currently) not possible");function n(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function r(){if(!n()&&t.lastFullscreenElement){var e=t.lastFullscreenElement;e.style.width=e.dataset.normalWidth||"",e.style.height=e.dataset.normalHeight||"",document.removeEventListener("fullscreenchange",r),document.removeEventListener("mozfullscreenchange",r),document.removeEventListener("webkitfullscreenchange",r),document.removeEventListener("MSFullscreenChange",r),t.handleResize(),t.signals.fullscreenChanged.dispatch(!1)}}},Gg.prototype.setSpin=function(e){e?(this.spinAnimation.resume(!0),this.rockAnimation.pause(!0)):this.spinAnimation.pause(!0)},Gg.prototype.setRock=function(e){e?(this.rockAnimation.resume(!0),this.spinAnimation.pause(!0)):this.rockAnimation.pause(!0)},Gg.prototype.toggleSpin=function(){this.setSpin(this.spinAnimation.paused)},Gg.prototype.toggleRock=function(){this.setRock(this.rockAnimation.paused)},Gg.prototype.setFocus=function(e){var t=Ja(e/2,0,49.9),n=100-t,r=(n-t)/2;"scene"==this.parameters.clipMode&&this.setParameters({clipNear:t,clipFar:n}),"scene"==this.parameters.fogMode&&this.setParameters({fogNear:Qa(n-r),fogFar:Qa(n+r)})},Gg.prototype.getZoomForBox=function(e){var t=e.getSize(Ug),n=Math.max(t.x,t.y,t.z),r=Math.min(t.x,t.y,t.z),i=n+Math.sqrt(r),o=qa(this.viewer.perspectiveCamera.fov),a=this.viewer.width,s=this.viewer.height,l=s<a?1:a/s;return i=Math.abs(.5*i/l/Math.sin(o/2)),-(i+=this.parameters.clipDist)},Gg.prototype.getBox=function(){return this.viewer.boundingBox},Gg.prototype.getZoom=function(){return this.getZoomForBox(this.getBox())},Gg.prototype.getCenter=function(e){return this.getBox().getCenter(e||new H)},Gg.prototype.autoView=function(e){this.animationControls.zoomMove(this.getCenter(),this.getZoom(),Sa(e,0))},Gg.prototype.makeImage=function(e){var t=this;return void 0===e&&(e={}),new Promise((function(n,r){t.tasks.onZeroOnce((function(){t.tasks.increment(),t.viewer.makeImage(e).then((function(e){t.tasks.decrement(),n(e)})).catch((function(e){t.tasks.decrement(),r(e)}))}))}))},Gg.prototype.setImpostor=function(e){this.parameters.impostor=e;var t=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation((function(n){if(t.includes(n.getType())){var r=n.getParameters();r.disableImpostor=!e,n.build(r)}}))},Gg.prototype.setQuality=function(e){this.parameters.quality=e;var t=["tube","cartoon","ribbon","trace","rope"],n=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation((function(r){var i=r.getParameters();if(!t.includes(r.getType())){if(!n.includes(r.getType()))return;if(!i.disableImpostor)return void(r.repr.quality=e)}i.quality=e,r.build(i)}))},Gg.prototype.eachComponent=function(e,t){this.compList.slice().forEach((function(n){void 0!==t&&t!==n.type||e(n)}))},Gg.prototype.eachRepresentation=function(e,t){this.eachComponent((function(n){n.reprList.slice().forEach((function(r){void 0!==t&&t!==r.getType()||e(r,n)}))}))},Gg.prototype.getComponentsByName=function(e){var t=[];return this.eachComponent((function(n){(void 0===e||Hg(e,n))&&t.push(n)})),new Zg(t)},Gg.prototype.getComponentsByObject=function(e){var t=[];return this.eachComponent((function(n){n.object===e&&t.push(n)})),new Zg(t)},Gg.prototype.getRepresentationsByName=function(e){var t=[];return this.eachRepresentation((function(n,r){(void 0===e||Hg(e,n))&&t.push(n)})),new vg(t)},Gg.prototype.measureClear=function(){this.eachComponent((function(e){return e.measureClear()}),"structure")},Gg.prototype.measureUpdate=function(){this.eachComponent((function(e){return e.measureUpdate()}),"structure")},Gg.prototype.dispose=function(){this.tasks.dispose(),this.viewer.dispose()};var Wg=function(e){function t(t,n,r){void 0===r&&(r={}),e.call(this,t,n,Object.assign({name:n.name},r)),this.shape=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"shape"},t.prototype.addRepresentation=function(e,t){return void 0===t&&(t={}),this._addRepresentation(e,this.shape,t)},t.prototype.getBoxUntransformed=function(){return this.shape.boundingBox},t.prototype.getCenterUntransformed=function(){return this.shape.center},t.prototype.dispose=function(){this.shape.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(pg);bl.add("shape",Wg);var $g=function(e){function t(t){var n=this;e.call(this,t),t.scale||(this.parameters.scale="rainbow",this.parameters.reverse=Sa(t.reverse,!0)),this.scalePerModel={},t.structure.eachModel((function(e){n.parameters.domain=[e.atomOffset,e.atomEnd],n.scalePerModel[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.scalePerModel[e.modelIndex](e.index)},t}(cs);pl.add("atomindex",$g);var qg=function(e){function t(t){if(e.call(this,t),t.scale||(this.parameters.scale="OrRd"),!t.domain){var n,r=1/0,i=-1/0;t.sele&&(n=new Bs(t.sele)),t.structure.eachAtom((function(e){var t=e.bfactor;r=Math.min(r,t),i=Math.max(i,t)}),n),this.parameters.domain=[r,i]}this.bfactorScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.bfactorScale(e.bfactor)},t}(cs);pl.add("bfactor",qg);var Yg=function(e){function t(t){var n=this;e.call(this,t),this.chainidDictPerModel={},this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel((function(e){var t=0,r={};e.eachChain((function(e){void 0===r[e.chainid]&&(r[e.chainid]=t,t+=1)})),n.parameters.domain=[0,t-1],n.chainidDictPerModel[e.index]=r,n.scalePerModel[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=this.chainidDictPerModel[e.modelIndex];return this.scalePerModel[e.modelIndex](t[e.chainid])},t}(cs);pl.add("chainid",Yg);var Xg=function(e){function t(t){var n=this;e.call(this,t),this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel((function(e){n.parameters.domain=[e.chainOffset,e.chainEnd],n.scalePerModel[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.scalePerModel[e.modelIndex](e.chainIndex)},t}(cs);pl.add("chainindex",Xg);var Kg=function(e){function t(t){var n=this;e.call(this,t),this.chainnameDictPerModel={},this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel((function(e){var t=0,r={};e.eachChain((function(e){void 0===r[e.chainname]&&(r[e.chainname]=t,t+=1)})),n.parameters.domain=[0,t-1],n.chainnameDictPerModel[e.index]=r,n.scalePerModel[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=this.chainnameDictPerModel[e.modelIndex];return this.scalePerModel[e.modelIndex](t[e.chainname])},t}(cs);pl.add("chainname",Kg);var Jg=function(e){function t(t){e.call(this,t),this.rsrzDict={},this.rsccDict={},t.scale||(this.parameters.scale="RdYlBu"),this.rsrzScale=this.getScale({domain:[2,0]}),this.rsccScale=this.getScale({domain:[.678,1]});var n=t.structure.validation;n&&(this.rsrzDict=n.rsrzDict,this.rsccDict=n.rsccDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=e.resno+"";e.inscode&&(t+="^"+e.inscode),e.chainname&&(t+=":"+e.chainname),t+="/"+e.modelIndex;var n=this.rsrzDict[t];if(void 0!==n)return this.rsrzScale(n);var r=this.rsccDict[t];return void 0!==r?this.rsccScale(r):9474192},t}(cs);pl.add("densityfit",Jg);var Qg={ARG:{CD:.1,CZ:.5,NE:-.1},ASN:{CG:.55,OD1:-.55},ASP:{CB:-.16,CG:.36,OD1:-.6,OD2:-.6},CYS:{CB:.19,SG:-.19},GLN:{CD:.55,OE1:-.55},GLU:{CD:.36,CG:-.16,OE1:-.6,OE2:-.6},HIS:{CB:.1,CD2:.2,CE1:.45,CG:.15,ND1:.05,NE2:.05},LYS:{CE:.25,NZ:.75},MET:{CE:.06,CG:.06,SD:-.12},PTR:{C:.55,CA:.1,CZ:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SEP:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SER:{CB:.25,OG:-.25},THR:{CB:.25,OG1:-.25},TPO:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,OG1:-1.1,O1P:-.85,O2P:-.85,O3P:-.85,P:1.4},TRP:{CD1:.06,CD2:.1,CE2:-.04,CE3:-.03,CG:-.03,NE1:-.06},TYR:{CZ:.25,OH:-.25},backbone:{C:.55,O:-.55,N:-.35,CA:.1}};var ev=function(e){function t(t){var n=this;e.call(this,t),this.delta=new H,this.hCharges=[],t.scale||(this.parameters.scale="rwb"),t.domain||(this.parameters.domain=[-50,50]),this.scale=this.getScale(),this.charges=new Float32Array(t.structure.atomCount);var r=[];t.structure.eachAtom((function(e){var t;if(n.charges[e.index]=(null!==(t=e).partialCharge?t.partialCharge:t.isProtein()&&(Qg[t.resname]&&Qg[t.resname][t.atomname]||Qg.backbone[t.atomname])||0)*e.occupancy,"N"===e.atomname){if(e.bondCount>=3)return;if(e.bondToElementCount(1))return;var i=function(e,t){void 0===t&&(t=new H);var n=!1,r=!1,i=!1;return t.set(2*e.x,2*e.y,2*e.z),e.eachBondedAtom((function(e){if(!n)return"H"===e.atomname?(t.set(e.x,e.y,e.z),void(n=!0)):void(r||"CA"!==e.atomname?i||"C"!==e.atomname||(i=!0,t.sub(e)):(t.sub(e),r=!0))})),n?t:r&&i?(t.normalize(),t.multiplyScalar(1.04),t.add(e),t):void 0}(e);void 0!==i&&(r.push(i),n.hCharges.push(.25*e.occupancy))}}));var i=t.structure.getBoundingBox();i.expandByScalar(1.04),this.hStore=function(e){for(var t=e.length,n=new Float32Array(t),r=new Float32Array(t),i=new Float32Array(t),o=0;o<e.length;o++){var a=e[o];n[o]=a.x,r[o]=a.y,i[o]=a.z}return{x:n,y:r,z:i,count:t}}(r),this.hHash=new md(this.hStore,i),this.hash=new md(t.structure.atomStore,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.positionColor=function(e){var t=this.charges,n=this.hCharges,r=0;return this.hash.eachWithin(e.x,e.y,e.z,12,(function(e,n){var i=t[e];0!==i&&(r+=i/n)})),this.hHash.eachWithin(e.x,e.y,e.z,12,(function(e,t){var i=n[e];0!==i&&(r+=i/t)})),this.scale(332*r)},t}(cs);pl.add("electrostatic",ev);var tv={H:16777215,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578e4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:9699476,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32e3,AC:7384058,TH:47871,PA:41471,U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998,DS:16777215,RG:16777215,CN:16777215,UUT:16777215,FL:16777215,UUP:16777215,LV:16777215,UUH:16777215,D:16777152,T:16777120},nv=function(e){function t(t){t.value=Sa(t.value,tv.C),e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=e.element;return"C"===t?this.parameters.value:tv[t]||16777215},t}(cs);pl.add("element",nv);var rv=function(e){function t(t){e.call(this,t),t.scale||(this.parameters.scale="Spectral"),t.domain||(this.parameters.domain=[0,t.structure.entityList.length-1]),this.entityindexScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.entityindexScale(e.entityIndex)},t}(cs);pl.add("entityindex",rv);var iv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=e.entity;switch(t?t.entityType:void 0){case 1:return 8374655;case 2:return 16629894;case 3:return 12496596;case 4:return 3697840;default:return 16777113}},t}(cs);pl.add("entitytype",iv);var ov=function(e){function t(t){e.call(this,t),this.geoAtomDict={},this.geoDict={};var n=t.structure.validation;n&&(this.geoAtomDict=n.geoAtomDict,this.geoDict=n.geoDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t,n=e.resno+"";e.inscode&&(n+="^"+e.inscode),e.chainname&&(n+=":"+e.chainname),n+="/"+e.modelIndex;var r=this.geoAtomDict[n];void 0!==r?t=function(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24}(r[e.atomname]||0):t=this.geoDict[n]||0;return 0===t?2188972:1===t?16703627:2===t?16018755:t>=3?10813478:9474192},t}(cs);pl.add("geoquality",ov);var av=function(e){function t(t){var n=this;e.call(this,t),this.resHF={},t.scale||(this.parameters.scale="RdYlGn");for(var r in Fd)n.resHF[r]=Fd[r][0];if(this.defaultResidueHydrophobicity=zd[0],!t.domain){var i=1/0,o=-1/0;for(var a in n.resHF){var s=n.resHF[a];i=Math.min(i,s),o=Math.max(o,s)}this.parameters.domain=[i,0,o]}this.hfScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.hfScale(this.resHF[e.resname]||this.defaultResidueHydrophobicity)},t}(cs);pl.add("hydrophobicity",av);var sv=function(e){function t(t){e.call(this,t),t.scale||(this.parameters.scale="rainbow"),t.domain||(this.parameters.domain=[0,t.structure.modelStore.count]),this.modelindexScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.modelindexScale(e.modelIndex)},t}(cs);pl.add("modelindex",sv);var lv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){switch(e.residueType.moleculeType){case 1:return 3697840;case 2:return 15729279;case 3:return 12496596;case 4:return 16629894;case 5:return 12540695;case 6:return 8374655;default:return 16777113}},t}(cs);pl.add("moleculetype",lv);var cv=function(e){function t(t){e.call(this,t),t.scale||(this.parameters.scale="PuBu"),t.domain||(this.parameters.domain=[0,1]),this.occupancyScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.occupancyScale(e.occupancy)},t}(cs);pl.add("occupancy",cv);var uv=function(e){function t(t){e.call(this,t),t.scale||(this.parameters.scale="rwb"),t.domain||(this.parameters.domain=[-1,1]),this.partialchargeScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.partialchargeScale(e.partialCharge||0)},t}(cs);function dv(){return 16777215*Math.random()}pl.add("partialcharge",uv);var fv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(){return dv()},t.prototype.volumeColor=function(){return dv()},t.prototype.positionColor=function(){return dv()},t}(cs);pl.add("random",fv);var pv=function(e){function t(t){e.call(this,t),this.rciDict={},t.scale||(this.parameters.scale="RdYlBu"),this.rciScale=this.getScale({domain:[.6,0]});var n=t.structure.validation;n&&(this.rciDict=n.rciDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t="["+e.resname+"]"+e.resno;e.chainname&&(t+=":"+e.chainname);var n=this.rciDict[t];return void 0!==n?this.rciScale(n):9474192},t}(cs);pl.add("randomcoilindex",pv);var hv=function(e){function t(t){var n=this;e.call(this,t),this.scalePerChain={},t.scale||(this.parameters.scale="rainbow",this.parameters.reverse=Sa(t.reverse,!0)),t.structure.eachChain((function(e){n.parameters.domain=[e.residueOffset,e.residueEnd],n.scalePerChain[e.index]=n.getScale()}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return this.scalePerChain[e.chainIndex](e.residueIndex)},t}(cs);pl.add("residueindex",hv);var mv={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935,ASH:16711935,GLH:16711935,A:14423100,G:3329330,I:10145074,X:8190976,C:16766720,T:4286945,U:4251856,D:35723,DA:14423100,DG:3329330,DI:10145074,DX:8190976,DC:16766720,DT:4286945,DU:4251856,DD:35723},gv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){return mv[e.resname]||16711935},t}(cs);pl.add("resname",gv);var vv=16711808,yv=10485888,bv=6291584,xv=16762880,wv=6324479,_v=16777215,Sv=11403518,Cv=16580962,kv=10921722,Mv=function(e){function t(t){e.call(this,t),this.residueProxy=t.structure.getResidueProxy()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(e){var t=e.sstruc,n=this.residueProxy;return"h"===t?vv:"g"===t?yv:"i"===t?bv:"e"===t||"b"===t?xv:"t"===t?wv:(n.index=e.residueIndex,n.isDna()?Sv:n.isRna()?Cv:n.isSaccharide()?kv:n.isProtein()||"s"===t||"l"===t?_v:8421504)},t}(cs);pl.add("sstruc",Mv);var Tv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(){return this.parameters.value},t.prototype.bondColor=function(){return this.parameters.value},t.prototype.valueColor=function(){return this.parameters.value},t.prototype.volumeColor=function(){return this.parameters.value},t}(cs);pl.add("uniform",Tv);var Av=function(e){function t(t){e.call(this,t),this.valueScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.volumeColor=function(e){return this.valueScale(this.parameters.volume.data[e])},t}(cs);pl.add("value",Av);var Ev=function(e){function t(t){e.call(this,t),this.vec=new H,this.valueScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.positionColor=function(e){var t=this.parameters.volume;if(!t||!t.inverseMatrix)return this.parameters.value;var n=this.vec,r=t.data,i=t.nx,o=t.ny,a=i*o;n.copy(e),n.applyMatrix4(t.inverseMatrix);var s=Math.floor(n.x),l=Math.floor(n.y),c=Math.floor(n.z),u=(c*o+l)*i+s,d=u+1,f=u+i,p=u+a,h=f+1,m=p+1,g=f+a,v=g+1,y=r[u],b=r[d],x=r[f],w=r[p],_=r[h],S=r[m],C=r[g],k=r[v],M=n.x-s,T=n.y-l,A=n.z-c,E=es(y,b,M),P=es(w,S,M),R=es(x,_,M),O=es(C,k,M),I=es(E,R,T),L=es(P,O,T),D=es(I,L,A);return this.valueScale(D)},t}(cs);pl.add("volume",Ev);var Pv=function(e){function t(t,n,r){var i=r||{};if(e.call(this,t,n,i),this.type="structure",this.parameters=Object.assign({radiusType:{type:"select",options:sh.types},radiusData:{type:"hidden"},radiusSize:{type:"number",precision:3,max:10,min:.001},radiusScale:{type:"number",precision:3,max:10,min:.001},assembly:null,defaultAssembly:{type:"hidden"}},this.parameters),this.selection=new Bs(i.sele),this.dataList=[],this.structure=t,this.structureView=this.structure.getView(this.selection),t.biomolDict){var o={default:"default","":t.unitcell?"AU":"FULL"};Object.keys(t.biomolDict).forEach((function(e){o[e]=e})),this.parameters.assembly={type:"select",options:o,rebuild:!0}}else this.parameters.assembly=null}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultScale:{configurable:!0}};return n.defaultScale.get=function(){return{vdw:1,covalent:1,bfactor:.01,sstruc:1}},t.prototype.init=function(t){var n=this,r=t||{};r.colorScheme=Sa(r.colorScheme,"element"),this.setRadius(r.radius,r),this.radiusType=Sa(r.radiusType,"vdw"),this.radiusData=Sa(r.radiusData,{}),this.radiusSize=Sa(r.radiusSize,1),this.radiusScale=Sa(r.radiusScale,1),this.assembly=Sa(r.assembly,"default"),this.defaultAssembly=Sa(r.defaultAssembly,""),"auto"===r.quality&&(r.quality=this.getQuality()),e.prototype.init.call(this,r),this.selection.signals.stringChanged.add((function(){n.build()})),this.build()},t.prototype.setRadius=function(e,t){var n=Object.keys(ah);return"string"===typeof e&&n.includes(e.toLowerCase())?t.radiusType=e:void 0!==e&&(t.radiusType="size",t.radiusSize=e),this},t.prototype.getAssembly=function(){var e="default"===this.assembly?this.defaultAssembly:this.assembly;return this.structure.biomolDict[e]},t.prototype.getQuality=function(){var e,t=this.structureView,n=this.getAssembly();return e=n?n.getAtomCount(t):t.atomCount,el&&(e*=4),t.atomStore.count/t.residueStore.count<2&&(e*=10),e<15e3?"high":e<8e4?"medium":"low"},t.prototype.create=function(){var e=this;if(0!==this.structureView.atomCount)if(this.structureView.hasCoords()){this.needsBuild=!1;var t=this.getAssembly();if(t)t.partList.forEach((function(t,n){var r=t.getView(e.structureView);if(0!==r.atomCount){var i=e.createData(r,n);i&&(i.sview=r,i.instanceList=t.getInstanceList(),e.dataList.push(i))}}));else{var n=this.createData(this.structureView,0);n&&(n.sview=this.structureView,this.dataList.push(n))}}else this.needsBuild=!0},t.prototype.update=function(e){var t=this;!this.lazy||this.visible?this.needsBuild?this.build():this.dataList.forEach((function(n){n.bufferList.length>0&&t.updateData(e,n)}),this):Object.assign(this.lazyProps.what,e)},t.prototype.updateData=function(e,t){this.build()},t.prototype.getColorParams=function(){return Object.assign({},e.prototype.getColorParams.call(this),{structure:this.structure})},t.prototype.getRadiusParams=function(e){return{type:this.radiusType,scale:this.radiusScale,size:this.radiusSize,data:this.radiusData}},t.prototype.getAtomParams=function(e,t){return Object.assign({what:e,colorParams:this.getColorParams(),radiusParams:this.getRadiusParams()},t)},t.prototype.getBondParams=function(e,t){return Object.assign({what:e,colorParams:this.getColorParams(),radiusParams:this.getRadiusParams()},t)},t.prototype.getAtomRadius=function(e){return this.structureView.atomSet.isSet(e.index)?new sh(this.getRadiusParams()).atomRadius(e):0},t.prototype.setSelection=function(e,t){return this.selection.setString(e,t),this},t.prototype.setParameters=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=!1);var i=t||{};return this.setRadius(i.radius,i),void 0===i.radiusType&&void 0===i.radiusData&&void 0===i.radiusSize&&void 0===i.radiusScale||(n.radius=!0,nl&&!this.disableImpostor||(r=!0)),void 0!==i.defaultAssembly&&i.defaultAssembly!==this.defaultAssembly&&("default"===this.assembly&&void 0===i.assembly||"default"===i.assembly)&&(r=!0),e.prototype.setParameters.call(this,i,n,r),this},t.prototype.getParameters=function(){return Object.assign(e.prototype.getParameters.call(this),{sele:this.selection?this.selection.string:void 0,defaultAssembly:this.defaultAssembly})},t.prototype.attach=function(e){var t=this.viewer,n=this.bufferList;this.dataList.forEach((function(e){e.bufferList.forEach((function(r){n.push(r),t.add(r,e.instanceList)}))})),this.setVisibility(this.visible),e()},t.prototype.clear=function(){this.dataList.length=0,e.prototype.clear.call(this)},t.prototype.dispose=function(){this.structureView.dispose(),delete this.structure,delete this.structureView,e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(Mu),Rv=function(e){function t(t,n,r){e.call(this,t,n,r),this.n=0,this.parameters=Object.assign({labelVisible:{type:"boolean"},labelSize:{type:"number",precision:3,max:10,min:.001},labelColor:{type:"color"},labelFontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:"fontFamily"},labelFontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:"fontStyle"},labelFontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:"fontWeight"},labelsdf:{type:"boolean",buffer:"sdf"},labelXOffset:{type:"number",precision:1,max:20,min:-20,buffer:"xOffset"},labelYOffset:{type:"number",precision:1,max:20,min:-20,buffer:"yOffset"},labelZOffset:{type:"number",precision:1,max:20,min:-20,buffer:"zOffset"},labelAttachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},labelBorder:{type:"boolean",buffer:"showBorder"},labelBorderColor:{type:"color",buffer:"borderColor"},labelBorderWidth:{type:"number",precision:2,max:.3,min:0,buffer:"borderWidth"},labelBackground:{type:"boolean",rebuild:!0},labelBackgroundColor:{type:"color",buffer:"backgroundColor"},labelBackgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},labelBackgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:"backgroundOpacity"},labelFixedSize:{type:"boolean",buffer:"fixedSize"},lineOpacity:{type:"range",min:0,max:1,step:.01},linewidth:{type:"integer",max:50,min:1,buffer:!0}},this.parameters,{flatShaded:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};this.labelVisible=Sa(n.labelVisible,!0),this.labelSize=Sa(n.labelSize,2),this.labelColor=Sa(n.labelColor,16777215),this.labelFontFamily=Sa(n.labelFontFamily,"sans-serif"),this.labelFontStyle=Sa(n.labelFontstyle,"normal"),this.labelFontWeight=Sa(n.labelFontWeight,"bold"),this.labelsdf=Sa(n.labelsdf,"Chrome"===Ks),this.labelXOffset=Sa(n.labelXOffset,0),this.labelYOffset=Sa(n.labelYOffset,0),this.labelZOffset=Sa(n.labelZOffset,.5),this.labelAttachment=Sa(n.labelAttachment,"bottom-left"),this.labelBorder=Sa(n.labelBorder,!1),this.labelBorderColor=Sa(n.labelBorderColor,"lightgrey"),this.labelBorderWidth=Sa(n.labelBorderWidth,.15),this.labelBackground=Sa(n.labelBackground,!1),this.labelBackgroundColor=Sa(n.labelBackgroundColor,"lightgrey"),this.labelBackgroundMargin=Sa(n.labelBackgroundMargin,.5),this.labelBackgroundOpacity=Sa(n.labelBackgroundOpacity,1),this.labelFixedSize=Sa(n.labelFixedSize,!1),this.lineOpacity=Sa(n.lineOpacity,1),this.linewidth=Sa(n.linewidth,2),e.prototype.init.call(this,n)},t.prototype.update=function(t){t.position?this.build():e.prototype.update.call(this,t)},t.prototype.updateData=function(e,t){var n={};if(e&&!e.labelSize||Object.assign(n,{size:oc(this.n,this.labelSize)}),!e||e.labelColor){var r=new ie(this.labelColor);Object.assign(n,{color:ac(this.n,r.r,r.g,r.b)})}this.textBuffer.setAttributes(n)},t.prototype.setParameters=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r=!1),t&&t.labelSize&&(n.labelSize=!0),t&&(t.labelColor||0===t.labelColor)&&(n.labelColor=!0),e.prototype.setParameters.call(this,t,n,r),t&&void 0!==t.opacity&&this.textBuffer.setParameters({opacity:1}),t&&void 0!==t.labelVisible&&this.setVisibility(this.visible),this},t.prototype.setVisibility=function(t,n){return e.prototype.setVisibility.call(this,t,!0),this.textBuffer&&this.textBuffer.setVisibility(this.labelVisible&&this.visible),n||this.viewer.requestRender(),this},t.prototype.getLabelBufferParams=function(t){return void 0===t&&(t={}),e.prototype.getBufferParams.call(this,Object.assign({fontFamily:this.labelFontFamily,fontStyle:this.labelFontStyle,fontWeight:this.labelFontWeight,sdf:this.labelsdf,xOffset:this.labelXOffset,yOffset:this.labelYOffset,zOffset:this.labelZOffset,attachment:this.labelAttachment,showBorder:this.labelBorder,borderColor:this.labelBorderColor,borderWidth:this.labelBorderWidth,showBackground:this.labelBackground,backgroundColor:this.labelBackgroundColor,backgroundMargin:this.labelBackgroundMargin,backgroundOpacity:this.labelBackgroundOpacity,fixedSize:this.labelFixedSize,disablePicking:!0,visible:this.labelVisible},t,{opacity:1}))},t.prototype.getAtomRadius=function(){return 0},t}(Pv);function Ov(e,t){var n=e.getAtomProxy(),r=new Bs,i=t.length;if(0===i)return new Float32Array(0);var o=t[0].length,a=e.getAtomSet(),s=new Float32Array(i*o*3),l=0;return t.forEach((function(t){for(var i=!1,c=0;c<o;c++){var u=t[c];if("number"===typeof u&&Number.isInteger(u)){if(!a.get(u)){i=!0;break}n.index=u}else{r.setString(u);var d=e.getAtomIndices(r);if(!d.length){i=!0;break}n.index=d[0]}var f=l+3*c;s[f++]=n.x,s[f++]=n.y,s[f++]=n.z}i||(l+=3*o)})),s.subarray(0,l)}function Iv(e,t,n,r,i){var o=Math.cos(i),a=Math.sin(i);e[0]=t[0]+n[0]*o+r[0]*a,e[1]=t[1]+n[1]*o+r[1]*a,e[2]=t[2]+n[2]*o+r[2]*a}function Lv(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var l=0;l<n;l++)r[l]=e[l*t+s];Dv(r,i,o,a,n);for(var c=0;c<n;c++)e[c*t+s]=i[c]}for(var u=0;u<n;u++){for(var d=0;d<t;d++)r[d]=e[u*t+d];Dv(r,i,o,a,t);for(var f=0;f<t;f++)e[u*t+f]=Math.sqrt(i[f])}}function Dv(e,t,n,r,i){n[0]=0,r[0]=Number.MIN_SAFE_INTEGER,r[1]=Number.MAX_SAFE_INTEGER;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=Number.MAX_SAFE_INTEGER}for(var l=0,c=0;l<i;l++){for(;r[c+1]<l;)c++;t[l]=(l-n[c])*(l-n[c])+e[n[c]]}}vl.add("shader/SDFFont.vert","uniform float clipNear;\nuniform float clipRadius;\nuniform vec3 clipCenter;\nuniform float xOffset;\nuniform float yOffset;\nuniform float zOffset;\nuniform bool ortho;\nuniform float canvasHeight;\nuniform float pixelRatio;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\nvarying vec2 texCoord;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#endif\nattribute vec2 mapping;\nattribute vec2 inputTexCoord;\nattribute float inputSize;\n#include matrix_scale\n#include common\nvoid main(void){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\ntexCoord = inputTexCoord;\nfloat scale = matrixScale( modelViewMatrix );\nfloat _xOffset = xOffset * scale;\nfloat _yOffset = yOffset * scale;\nfloat _zOffset = zOffset * scale;\nif( texCoord.x == 10.0 ){\n_zOffset -= 0.001;\n}\nvec4 cameraPos = modelViewMatrix * vec4( position, 1.0 );\n#ifdef FIXED_SIZE\nif ( ortho ) {\nscale /= pixelRatio * (( canvasHeight / 2.0 ) / -cameraPosition.z) * 0.1;\n} else {\nscale /= pixelRatio * (( canvasHeight / 2.0 ) / -cameraPos.z) * 0.1;\n}\n#endif\nvec4 cameraCornerPos = vec4( cameraPos.xyz, 1.0 );\ncameraCornerPos.xy += mapping * inputSize * 0.01 * scale;\ncameraCornerPos.x += _xOffset;\ncameraCornerPos.y += _yOffset;\nif( ortho ){\ncameraCornerPos.xyz += normalize( -cameraPosition ) * _zOffset;\n} else {\ncameraCornerPos.xyz += normalize( -cameraCornerPos.xyz ) * _zOffset;\n}\ngl_Position = projectionMatrix * cameraCornerPos;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvViewPosition = -cameraCornerPos.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n#include radiusclip_vertex\n}"),vl.add("shader/SDFFont.frag","uniform sampler2D fontTexture;\nuniform float opacity;\nuniform bool showBorder;\nuniform vec3 borderColor;\nuniform float borderWidth;\nuniform vec3 backgroundColor;\nuniform float backgroundOpacity;\nuniform float clipNear;\nuniform float clipRadius;\nvarying vec3 vViewPosition;\nvarying vec2 texCoord;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\nconst vec3 vColor = vec3( 0.0 );\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#endif\nconst float gamma = 2.2 * 1.4142 / 128.0;\nconst float padding = 0.75;\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\nif( texCoord.x > 1.0 ){\ngl_FragColor = vec4( backgroundColor, backgroundOpacity );\n}else{\nfloat sdf = texture2D( fontTexture, texCoord ).a;\nif( showBorder ) sdf += borderWidth;\nfloat a = smoothstep(padding - gamma, padding + gamma, sdf);\nif( a < 0.2 ) discard;\na *= opacity;\nvec3 outgoingLight = vColor;\nif( showBorder && sdf < ( padding + borderWidth ) ){\noutgoingLight = borderColor;\n}\ngl_FragColor = vec4( outgoingLight, a );\n}\n#if defined( PICKING )\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var Nv={};var Fv={font:"sans-serif",size:36,style:"normal",variant:"normal",weight:"normal",outline:3,width:1024,height:1024},zv=function(e){void 0===e&&(e={}),this.gamma=1,this.mapped={},this.scratchW=0,this.scratchH=0,this.currentX=0,this.currentY=0,this.cutoff=.25,this.parameters=Ca(e,Fv);var t=this.parameters;this.radius=t.size/8,this.padding=t.size/3;var n=this.lineHeight=t.size+2*t.outline+Math.round(t.size/4),r=this.maxWidth=t.width/4,i=this.canvas=document.createElement("canvas");i.width=r,i.height=n;var o=this.context=this.canvas.getContext("2d");o.font=t.style+" "+t.variant+" "+t.weight+" "+t.size+"px "+t.font,o.fillStyle="black",o.textAlign="left",o.textBaseline="bottom",o.lineJoin="round",this.gridOuter=new Float64Array(n*r),this.gridInner=new Float64Array(n*r),this.f=new Float64Array(Math.max(n,r)),this.d=new Float64Array(Math.max(n,r)),this.z=new Float64Array(Math.max(n,r)+1),this.v=new Int16Array(Math.max(n,r)),this.data=new Uint8Array(t.width*t.height*4),this.canvas2=document.createElement("canvas"),this.canvas2.width=t.width,this.canvas2.height=t.height,this.context2=this.canvas2.getContext("2d"),this.placeholder=this.map(String.fromCharCode(65533));for(var a=32;a<=126;++a)this.map(String.fromCharCode(a));this.map(String.fromCharCode(176)),this.map(String.fromCharCode(8491)),this.texture=new Wn(this.canvas2),this.texture.flipY=!1,this.texture.needsUpdate=!0};zv.prototype.map=function(e){var t=this.parameters;return void 0===this.mapped[e]&&(this.draw(e),this.currentX+this.scratchW>t.width&&(this.currentX=0,this.currentY+=this.scratchH),this.currentY+this.scratchH>t.height&&console.warn("canvas to small"),this.mapped[e]={x:this.currentX,y:this.currentY,w:this.scratchW,h:this.scratchH},this.context2.drawImage(this.canvas,0,0,this.scratchW,this.scratchH,this.currentX,this.currentY,this.scratchW,this.scratchH),this.currentX+=this.scratchW),this.mapped[e]},zv.prototype.get=function(e){return this.mapped[e]||this.placeholder},zv.prototype.draw=function(e){var t=this,n=this.parameters,r=this.lineHeight,i=n.outline,o=this.context,a=this.maxWidth,s=i,l=r-n.outline,c=o.measureText(e),u=Math.min(a,Math.ceil(c.width+2*s+1)),d=u*r;o.clearRect(0,0,u,r),o.fillText(e,s,l);for(var f=o.getImageData(0,0,u,r),p=f.data,h=0;h<d;h++){var m=f.data[4*h+3]/255;t.gridOuter[h]=1===m?0:0===m?Number.MAX_SAFE_INTEGER:Math.pow(Math.max(0,.5-m),2),t.gridInner[h]=1===m?Number.MAX_SAFE_INTEGER:0===m?0:Math.pow(Math.max(0,m-.5),2)}Lv(this.gridOuter,u,r,this.f,this.d,this.v,this.z),Lv(this.gridInner,u,r,this.f,this.d,this.v,this.z);for(var g=0;g<d;g++){var v=t.gridOuter[g]-t.gridInner[g];p[4*g+3]=Math.max(0,Math.min(255,Math.round(255-255*(v/t.radius+t.cutoff))))}o.putImageData(f,0,0),this.scratchW=u,this.scratchH=r};var Bv=Object.assign({fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"bold",fontSize:36,xOffset:0,yOffset:0,zOffset:.5,attachment:"bottom-left",showBorder:!1,borderColor:"lightgrey",borderWidth:.15,showBackground:!1,backgroundColor:"lightgrey",backgroundMargin:.5,backgroundOpacity:1,forceTransparent:!0,fixedSize:!1},Pp),jv=Object.assign({fontFamily:{uniform:!0},fontStyle:{uniform:!0},fontWeight:{uniform:!0},fontSize:{uniform:!0},xOffset:{uniform:!0},yOffset:{uniform:!0},zOffset:{uniform:!0},showBorder:{uniform:!0},borderColor:{uniform:!0},borderWidth:{uniform:!0},backgroundColor:{uniform:!0},backgroundOpacity:{uniform:!0},fixedSize:{updateShader:!0}},Rp);function Zv(e,t){for(var n=e.position.length/3,r=0,i=0;i<n;++i)r+=e.text[i].length;return t.showBackground&&(r+=n),r}var Hv=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(3*Zv(t,n)),color:new Float32Array(3*Zv(t,n)),picking:new jf},n),this.parameterTypes=jv,this.alwaysTransparent=!0,this.hasWireframe=!1,this.isText=!0,this.vertexShader="SDFFont.vert",this.fragmentShader="SDFFont.frag",this.text=t.text,this.positionCount=t.position.length/3,this.addUniforms({fontTexture:{value:null},xOffset:{value:this.parameters.xOffset},yOffset:{value:this.parameters.yOffset},zOffset:{value:this.parameters.zOffset},ortho:{value:!1},showBorder:{value:this.parameters.showBorder},borderColor:{value:new ie(this.parameters.borderColor)},borderWidth:{value:this.parameters.borderWidth},backgroundColor:{value:new ie(this.parameters.backgroundColor)},backgroundOpacity:{value:this.parameters.backgroundOpacity},canvasHeight:{value:1},pixelRatio:{value:1}}),this.addAttributes({inputTexCoord:{type:"v2",value:null},inputSize:{type:"f",value:null}}),this.setAttributes(t),this.makeTexture(),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Bv},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this);var t=this.texture,n=this.material;n.transparent=!0,n.extensions.derivatives=!0,n.lights=!1,n.uniforms.fontTexture.value=t,n.needsUpdate=!0;var r=this.wireframeMaterial;r.transparent=!0,r.extensions.derivatives=!0,r.lights=!1,r.uniforms.fontTexture.value=t,r.needsUpdate=!0;var i=this.pickingMaterial;i.extensions.derivatives=!0,i.lights=!1,i.uniforms.fontTexture.value=t,i.needsUpdate=!0},t.prototype.setAttributes=function(e){var t,n,r,i,o,a;void 0===e&&(e={});var s=this.text,l=this.geometry.attributes;e.position&&(t=e.position,i=l.position.array,l.position.needsUpdate=!0),e.size&&(n=e.size,o=l.inputSize.array,l.inputSize.needsUpdate=!0),e.color&&(r=e.color,a=l.color.array,l.color.needsUpdate=!0);for(var c,u,d,f,p=this.positionCount,h=0,m=0;m<p;++m)for(u=3*m,f=s[m].length,this.parameters.showBackground&&(f+=1),d=0;d<f;++d,++h)for(var g=0;g<4;g++)c=4*h*3+3*g,t&&(i[c]=t[u],i[c+1]=t[u+1],i[c+2]=t[u+2]),n&&(o[4*h+g]=n[m]),r&&(a[c]=r[u],a[c+1]=r[u+1],a[c+2]=r[u+2])},t.prototype.makeTexture=function(){this.textAtlas=function(e){var t=JSON.stringify(e);return void 0===Nv[t]&&(Nv[t]=new zv(e)),Nv[t]}({font:this.parameters.fontFamily,style:this.parameters.fontStyle,weight:this.parameters.fontWeight,size:this.parameters.fontSize}),this.texture=this.textAtlas.texture},t.prototype.makeMapping=function(){for(var e,t,n,r,i,o,a,s,l=this.textAtlas,c=this.text,u=this.parameters.attachment,d=l.lineHeight*this.parameters.backgroundMargin*.1-10,f=this.geometry.attributes,p=f.inputTexCoord.array,h=f.mapping.array,m=this.positionCount,g=0,v=0;v<m;++v){for(r=0,o=(n=c[v]).length,i=0;i<o;++i)r+=(e=l.get(n[i])).w-2*l.parameters.outline;for(s=u.startsWith("top")?l.lineHeight/1.25:u.startsWith("middle")?l.lineHeight/2.5:0,a=u.endsWith("right")?r:u.endsWith("center")?r/2:0,a+=l.parameters.outline,s+=l.parameters.outline,this.parameters.showBackground&&(h[(t=2*g*4)+0]=-l.lineHeight/6-a-d,h[t+1]=l.lineHeight-s+d,h[t+2]=-l.lineHeight/6-a-d,h[t+3]=0-s-d,h[t+4]=r+l.lineHeight/6-a+2*l.parameters.outline+d,h[t+5]=l.lineHeight-s+d,h[t+6]=r+l.lineHeight/6-a+2*l.parameters.outline+d,h[t+7]=0-s-d,p[t+0]=10,p[t+2]=10,p[t+4]=10,p[t+6]=10,g+=1),r=0,i=0;i<o;++i,++g){e=l.get(n[i]),h[(t=2*g*4)+0]=r-a,h[t+1]=e.h-s,h[t+2]=r-a,h[t+3]=0-s,h[t+4]=r+e.w-a,h[t+5]=e.h-s,h[t+6]=r+e.w-a,h[t+7]=0-s;var y=l.parameters.width,b=l.parameters.height,x=[e.x/y,e.y/b,e.x/y,(e.y+e.h)/b,(e.x+e.w)/y,e.y/b,(e.x+e.w)/y,(e.y+e.h)/b];p.set(x,t),r+=e.w-2*l.parameters.outline}}f.inputTexCoord.needsUpdate=!0,f.mapping.needsUpdate=!0},t.prototype.getDefines=function(t){var n=e.prototype.getDefines.call(this,t);return this.parameters.fixedSize&&(n.FIXED_SIZE=1),n},t.prototype.setUniforms=function(t){!t||void 0===t.fontFamily&&void 0===t.fontStyle&&void 0===t.fontWeight&&void 0===t.fontSize||(this.makeTexture(),this.makeMapping(),this.texture.needsUpdate=!0,t.fontTexture=this.texture),e.prototype.setUniforms.call(this,t)},Object.defineProperties(t.prototype,n),t}(Um);xl.add("text",Hv),vl.add("shader/WideLine.vert","\nuniform float clipNear;\nuniform vec3 clipCenter;\nuniform float linewidth;\nuniform vec2 resolution;\nuniform mat4 projectionMatrixInverse;\nattribute vec2 mapping;\nattribute vec3 position1;\nattribute vec3 position2;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\nattribute vec3 color2;\nvarying vec3 vColor;\nvarying vec3 vColor2;\nvarying float flag;\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\nvoid trimSegment( const in vec4 start, inout vec4 end ) {\nfloat a = projectionMatrix[ 2 ][ 2 ]; float b = projectionMatrix[ 3 ][ 2 ]; float nearEstimate = - 0.5 * b / a;\nfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\nend.xyz = mix( start.xyz, end.xyz, alpha );\n}\nvoid main() {\nfloat aspect = resolution.x / resolution.y;\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\nflag = mapping.y;\nvColor = color;\nvColor2 = color2;\n#endif\nvec4 start = modelViewMatrix * vec4( position1, 1.0 );\nvec4 end = modelViewMatrix * vec4( position2, 1.0 );\nbool perspective = ( projectionMatrix[ 2 ][ 3 ] == -1.0 ); if ( perspective ) {\nif ( start.z < 0.0 && end.z >= 0.0 ) {\ntrimSegment( start, end );\n} else if ( end.z < 0.0 && start.z >= 0.0 ) {\ntrimSegment( end, start );\n}\n}\nvec4 clipStart = projectionMatrix * start;\nvec4 clipEnd = projectionMatrix * end;\nvec2 ndcStart = clipStart.xy / clipStart.w;\nvec2 ndcEnd = clipEnd.xy / clipEnd.w;\nvec2 dir = ndcEnd - ndcStart;\ndir.x *= aspect;\ndir = normalize( dir );\nvec2 offset = vec2( dir.y, - dir.x );\ndir.x /= aspect;\noffset.x /= aspect;\nif ( mapping.x < 0.0 ) offset *= - 1.0;\noffset *= linewidth;\noffset /= resolution.y;\nvec4 clip = ( mapping.y < 0.5 ) ? clipStart : clipEnd;\noffset *= clip.w;\nclip.xy += offset;\ngl_Position = clip;\n#ifndef PICKING\nvViewPosition = ( projectionMatrixInverse * clip ).xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}"),vl.add("shader/WideLine.frag","uniform vec3 diffuse;\nuniform float opacity;\nuniform float clipNear;\nuniform float clipRadius;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\n#include common\n#include fog_pars_fragment\nvarying vec3 vViewPosition;\nvarying vec3 vColor;\nvarying vec3 vColor2;\nvarying float flag;\n#endif\nvoid main() {\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( PICKING )\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 outgoingLight = vec3( 0.0 );\nvec4 diffuseColor = vec4( diffuse, 1.0 );\nif ( flag < 0.0 ) {\ndiffuseColor.rgb *= vColor;\n} else {\ndiffuseColor.rgb *= vColor2;\n}\n#include alphatest_fragment\noutgoingLight = diffuseColor.rgb;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var Uv=Object.assign({linewidth:2},Pp),Vv=Object.assign({linewidth:{uniform:!0}},Rp),Gv=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parameterTypes=Vv,this.vertexShader="WideLine.vert",this.fragmentShader="WideLine.frag",!t.color2&&t.color&&(t.color2=t.color),this.addUniforms({linewidth:{value:this.parameters.linewidth},resolution:{value:new B},projectionMatrixInverse:{value:new j}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null}}),this.setAttributes(t),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Uv},t.prototype.setParameters=function(t){e.prototype.setParameters.call(this,t)},Object.defineProperties(t.prototype,n),t}(Um);xl.add("wideline",Gv);var Wv=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="angle",this.parameters=Object.assign({atomTriple:{type:"hidden",rebuild:!0},vectorVisible:{type:"boolean",default:!0},arcVisible:{type:"boolean",default:!0},sectorVisible:{type:"boolean",default:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.side=Sa(n.side,"double"),n.opacity=Sa(n.opacity,.5),this.atomTriple=Sa(n.atomTriple,[]),this.arcVisible=Sa(n.arcVisible,!0),this.sectorVisible=Sa(n.sectorVisible,!0),this.vectorVisible=Sa(n.vectorVisible,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){if(e.atomCount&&this.atomTriple.length){var t=function(e,t){return function(e){for(var t=[],n=e.length/9,r=0;r<n;r++){for(var i=!0,o=r;o<r+3;o+=3)e[o]===e[o+3]&&e[o+1]===e[o+4]&&e[o+2]===e[o+5]&&(i=!1);i&&t.push(r)}var a=new Float32Array(9*t.length),s=0;return t.forEach((function(t){uc(e,a,9*t,9*s,9),s++})),a}(Ov(e,t))}(e,this.atomTriple),n=function(e,t){void 0===t&&(t={});for(var n=Sa(t.angleStep,Math.PI/90),r=e.length/9,i=new Float32Array(r),o=new Float32Array(3*r),a=new Array(r),s=new Float32Array(6*r),l=new Float32Array(6*r),c=new Array(r),u=new Array(r),d=new Array(r),f=0,p=Du(),h=Du(),m=Du(),g=Du(),v=Du(),y=Du(),b=Du(),x=Du(),w=Du(),_=function(t){var r=9*t;ju(p,e,r),ju(h,e,r+3),ju(m,e,r+6);var _=6*t;Zu(p,s,_),Zu(h,l,_),Zu(h,s,_+3),Zu(m,l,_+3),zu(g,p,h),zu(v,m,h),Gu(g,g),Gu(v,v),Nu(y,g,v);var S=Hu(y),C=Fu(g,v),k=i[t]=Math.atan2(S,C);a[t]=(tc*k).toFixed(1)+String.fromCharCode(176),0===Hu(y)&&(y[0]=1,y[1]=0,y[2]=0),Nu(b,y,g),Gu(b,b),Iv(x,h,g,b,k/2),Zu(x,o,3*t);var M=Math.ceil(k/n),T=new Float32Array(9*M);d[t]=T;var A=new Float32Array(3*M),E=new Float32Array(3*M);c[t]=A,u[t]=E,Bu(w,h,g);for(var P=function(e,t){var n=9*t,r=3*t;Zu(h,T,n),Zu(w,T,n+3),Zu(w,A,r),Iv(w,h,g,b,e),Zu(w,T,n+6),Zu(w,E,r)},R=0,O=n;O<k;O+=n)P(O,R),R++;P(k,R),f+=M},S=0;S<r;S++)_(S);for(var C=3*f,k=9*f,M=new Float32Array(C),T=new Float32Array(C),A=new Float32Array(k),E=0,P=0,R=0;R<r;R++){var O=c[R],I=u[R];uc(O,M,0,P,O.length),uc(I,T,0,P,I.length),P+=O.length;var L=d[R];uc(L,A,0,E,L.length),E+=L.length}return{labelPosition:o,labelText:a,vectorPosition1:s,vectorPosition2:l,arcPosition1:M,arcPosition2:T,sectorPosition:A}}(t),r=this.n=n.labelPosition.length/3,i=new ie(this.labelColor);this.textBuffer=new Hv({position:n.labelPosition,size:oc(r,this.labelSize),color:ac(r,i.r,i.g,i.b),text:n.labelText},this.getLabelBufferParams());var o=new ie(this.colorValue);return this.vectorBuffer=new Gv(Qu({position1:n.vectorPosition1,position2:n.vectorPosition2,color:ac(2*r,o.r,o.g,o.b),color2:ac(2*r,o.r,o.g,o.b)}),this.getBufferParams({linewidth:this.linewidth,visible:this.vectorVisible,opacity:this.lineOpacity})),this.arcLength=n.arcPosition1.length/3,this.arcBuffer=new Gv(Qu({position1:n.arcPosition1,position2:n.arcPosition2,color:ac(this.arcLength,o.r,o.g,o.b),color2:ac(this.arcLength,o.r,o.g,o.b)}),this.getBufferParams({linewidth:this.linewidth,visible:this.arcVisible,opacity:this.lineOpacity})),this.sectorLength=n.sectorPosition.length/3,this.sectorBuffer=new Lp({position:n.sectorPosition,color:ac(this.sectorLength,o.r,o.g,o.b)},this.getBufferParams({visible:this.sectorVisible})),{bufferList:[this.textBuffer,this.vectorBuffer,this.arcBuffer,this.sectorBuffer]}}},t.prototype.updateData=function(t,n){e.prototype.updateData.call(this,t,n);var r={},i={},o={};if(t.color){var a=new ie(this.colorValue);Object.assign(r,{color:ac(2*this.n,a.r,a.g,a.b),color2:ac(2*this.n,a.r,a.g,a.b)}),Object.assign(i,{color:ac(this.arcLength,a.r,a.g,a.b),color2:ac(this.arcLength,a.r,a.g,a.b)}),Object.assign(o,{color:ac(this.sectorLength,a.r,a.g,a.b)})}this.vectorBuffer.setAttributes(r),this.arcBuffer.setAttributes(i),this.sectorBuffer.setAttributes(o)},t.prototype.setParameters=function(t){return e.prototype.setParameters.call(this,t,{},!1),!t||void 0===t.vectorVisible&&void 0===t.arcVisible&&void 0===t.sectorVisible||this.setVisibility(this.visible),t&&t.lineOpacity&&(this.vectorBuffer.setParameters({opacity:t.lineOpacity}),this.arcBuffer.setParameters({opacity:t.lineOpacity})),t&&void 0!==t.opacity&&(this.vectorBuffer.setParameters({opacity:this.lineOpacity}),this.arcBuffer.setParameters({opacity:this.lineOpacity})),t&&t.linewidth&&(this.vectorBuffer.setParameters({linewidth:t.linewidth}),this.arcBuffer.setParameters({linewidth:t.linewidth})),this},t.prototype.setVisibility=function(t,n){return e.prototype.setVisibility.call(this,t,!0),this.vectorBuffer&&this.vectorBuffer.setVisibility(this.vectorVisible&&this.visible),this.arcBuffer&&this.arcBuffer.setVisibility(this.arcVisible&&this.visible),this.sectorBuffer&&this.sectorBuffer.setVisibility(this.sectorVisible&&this.visible),n||this.viewer.requestRender(),this},t}(Rv);ml.add("angle",Wv);var $v=new H,qv=new H,Yv=new H,Xv=new H(0,1,0),Kv=Object.assign({radialSegments:1,openEnded:!0},Pp);function Jv(e){void 0===e&&(e={});var t=Sa(e.radialSegments,10),n=Sa(e.openEnded,!0),r=(new j).makeRotationX(Math.PI/2),i=new ti(1,1,1,t,1,n);return i.applyMatrix(r),i}var Qv=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,function(e,t){void 0===t&&(t={});var n=Jv(t),r=e.position1.length,i=n.attributes.position.array.length/3,o=r/3,a=new Float32Array(2*o*i);return lc(o,i,0,a),lc(o,i,o*i,a),{position:new Float32Array(2*r),color:new Float32Array(2*r),primitiveId:a,picking:e.picking}}(t,n),n,Jv(n)),this.updateNormals=!0;var r=t.position1.length,i=t.radius.length;this.__center=new Float32Array(r),this._position=new Float32Array(2*r),this._color=new Float32Array(2*r),this._from=new Float32Array(2*r),this._to=new Float32Array(2*r),this._radius=new Float32Array(2*i),this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Kv},t.prototype.applyPositionTransform=function(e,t,n){qv.fromArray(this._from,n),Yv.fromArray(this._to,n),e.lookAt(qv,Yv,Xv);var r=this._radius[t];$v.set(r,r,qv.distanceTo(Yv)),e.scale($v)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={});var r={};t.position1&&t.position2&&(rc(t.position1,t.position2,this.__center),rc(t.position1,this.__center,this._position),rc(this.__center,t.position2,this._position,t.position1.length),this._from.set(t.position1),this._from.set(this.__center,t.position1.length),this._to.set(this.__center),this._to.set(t.position2,this.__center.length),r.position=this._position),t.color&&t.color2&&(this._color.set(t.color),this._color.set(t.color2,t.color.length),r.color=this._color),t.radius&&(this._radius.set(t.radius),this._radius.set(t.radius,t.radius.length),r.radius=this._radius),e.prototype.setAttributes.call(this,r,n)},Object.defineProperties(t.prototype,n),t}(Nm);vl.add("shader/CylinderImpostor.vert","\nattribute vec3 mapping;\nattribute vec3 position1;\nattribute vec3 position2;\nattribute float radius;\nvarying vec3 axis;\nvarying vec4 base_radius;\nvarying vec4 end_b;\nvarying vec3 U;\nvarying vec3 V;\nvarying vec4 w;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\nattribute vec3 color2;\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#endif\nuniform mat4 modelViewMatrixInverse;\nuniform float ortho;\n#include matrix_scale\nvoid main(){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\nvColor1 = color;\nvColor2 = color2;\n#endif\nbase_radius.w = radius * matrixScale( modelViewMatrix );\nvec3 center = position;\nvec3 dir = normalize( position2 - position1 );\nfloat ext = length( position2 - position1 ) / 2.0;\nvec3 cam_dir;\nif( ortho == 0.0 ){\ncam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 0, 1 ) ).xyz - center;\n}else{\ncam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 1, 0 ) ).xyz;\n}\ncam_dir = normalize( cam_dir );\nvec3 ldir;\nfloat b = dot( cam_dir, dir );\nend_b.w = b;\nif( b < 0.0 )\nldir = -ext * dir;\nelse\nldir = ext * dir;\nvec3 left = normalize( cross( cam_dir, ldir ) );\nleft = radius * left;\nvec3 up = radius * normalize( cross( left, ldir ) );\naxis = normalize( normalMatrix * ldir );\nU = normalize( normalMatrix * up );\nV = normalize( normalMatrix * left );\nvec4 base4 = modelViewMatrix * vec4( center - ldir, 1.0 );\nbase_radius.xyz = base4.xyz / base4.w;\nvec4 top_position = modelViewMatrix * vec4( center + ldir, 1.0 );\nvec4 end4 = top_position;\nend_b.xyz = end4.xyz / end4.w;\nw = modelViewMatrix * vec4(\ncenter + mapping.x*ldir + mapping.y*left + mapping.z*up, 1.0\n);\ngl_Position = projectionMatrix * w;\ngl_Position.z = 0.99;\n}"),vl.add("shader/CylinderImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 interiorColor;\nuniform float interiorDarkening;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float clipNear;\nuniform mat4 projectionMatrix;\nuniform float ortho;\nvarying vec3 axis;\nvarying vec4 base_radius;\nvarying vec4 end_b;\nvarying vec3 U;\nvarying vec3 V;\nvarying vec4 w;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#include common\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars_begin\n#include lights_physical_pars_fragment\n#endif\nbool interior = false;\nfloat distSq3( vec3 v3a, vec3 v3b ){\nreturn (\n( v3a.x - v3b.x ) * ( v3a.x - v3b.x ) +\n( v3a.y - v3b.y ) * ( v3a.y - v3b.y ) +\n( v3a.z - v3b.z ) * ( v3a.z - v3b.z )\n);\n}\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nfloat calcClip( vec3 cameraPos ){\nreturn dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );\n}\nvoid main(){\nvec3 point = w.xyz / w.w;\nvec3 base = base_radius.xyz;\nfloat vRadius = base_radius.w;\nvec3 end = end_b.xyz;\nfloat b = end_b.w;\nvec3 end_cyl = end;\nvec3 surface_point = point;\nvec3 ray_target = surface_point;\nvec3 ray_origin = vec3(0.0);\nvec3 ray_direction = mix(normalize(ray_origin - ray_target), vec3(0.0, 0.0, 1.0), ortho);\nmat3 basis = mat3( U, V, axis );\nvec3 diff = ray_target - 0.5 * (base + end_cyl);\nvec3 P = diff * basis;\nfloat dz = dot( axis, ray_direction );\nfloat radius2 = vRadius*vRadius;\nvec3 D = vec3(dot(U, ray_direction),\ndot(V, ray_direction),\ndz);\nfloat a0 = P.x*P.x + P.y*P.y - radius2;\nfloat a1 = P.x*D.x + P.y*D.y;\nfloat a2 = D.x*D.x + D.y*D.y;\nfloat d = a1*a1 - a0*a2;\nif (d < 0.0)\ndiscard;\nfloat dist = (-a1 + sqrt(d)) / a2;\nvec3 new_point = ray_target + dist * ray_direction;\nvec3 tmp_point = new_point - base;\nvec3 _normal = normalize( tmp_point - axis * dot(tmp_point, axis) );\nray_origin = mix( ray_origin, surface_point, ortho );\nfloat front_cap_test = dot( tmp_point, axis );\nfloat end_cap_test = dot((new_point - end_cyl), axis);\n#ifndef CAP\nvec3 new_point2 = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\nvec3 tmp_point2 = new_point2 - base;\n#endif\nif (front_cap_test < 0.0)\n{\nfloat dNV = dot(-axis, ray_direction);\nif (dNV < 0.0)\ndiscard;\nfloat near = dot(-axis, (base)) / dNV;\nvec3 front_point = ray_direction * near + ray_origin;\nif (dot(front_point - base, front_point-base) > radius2)\ndiscard;\n#ifdef CAP\nnew_point = front_point;\n_normal = axis;\n#else\nnew_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\ndNV = dot(-axis, ray_direction);\nnear = dot(axis, end_cyl) / dNV;\nnew_point2 = ray_direction * near + ray_origin;\nif (dot(new_point2 - end_cyl, new_point2-base) < radius2)\ndiscard;\ninterior = true;\n#endif\n}\nif( end_cap_test > 0.0 )\n{\nfloat dNV = dot(axis, ray_direction);\nif (dNV < 0.0)\ndiscard;\nfloat near = dot(axis, end_cyl) / dNV;\nvec3 end_point = ray_direction * near + ray_origin;\nif( dot(end_point - end_cyl, end_point-base) > radius2 )\ndiscard;\n#ifdef CAP\nnew_point = end_point;\n_normal = axis;\n#else\nnew_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\ndNV = dot(-axis, ray_direction);\nnear = dot(-axis, (base)) / dNV;\nnew_point2 = ray_direction * near + ray_origin;\nif (dot(new_point2 - base, new_point2-base) < radius2)\ndiscard;\ninterior = true;\n#endif\n}\ngl_FragDepthEXT = calcDepth( new_point );\n#ifdef NEAR_CLIP\nif( calcClip( new_point ) > 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\nif( calcClip( new_point ) > 0.0 )\ndiscard;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\n}\n}else if( gl_FragDepthEXT <= 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n}\n#else\nif( gl_FragDepthEXT <= 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n}\n#endif\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\n#ifdef PICKING\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vViewPosition = -new_point;\nvec3 vNormal = _normal;\nvec3 vColor;\nif( distSq3( new_point, end_cyl ) < distSq3( new_point, base ) ){\nif( b < 0.0 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\n}else{\nif( b > 0.0 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\n}\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\nvec3 normal = normalize( vNormal );\n#include lights_physical_fragment\n#include lights_fragment_begin\n#include lights_fragment_end\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\nif( interior ){\n#ifdef USE_INTERIOR_COLOR\noutgoingLight.xyz = interiorColor;\n#else\n#ifdef DIFFUSE_INTERIOR\noutgoingLight.xyz = vColor;\n#endif\n#endif\noutgoingLight.xyz *= 1.0 - interiorDarkening;\n}\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var ey=new Float32Array([-1,1,-1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]),ty=new Uint16Array([0,1,2,1,4,2,2,4,3,4,5,3]),ny=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"v3",t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return ey},n.mappingIndices.get=function(){return ty},n.mappingIndicesSize.get=function(){return 12},n.mappingSize.get=function(){return 6},n.mappingItemSize.get=function(){return 3},Object.defineProperties(t.prototype,n),t}(jm),ry=Object.assign({openEnded:!1},Pp),iy=Object.assign({openEnded:{updateShader:!0}},Rp),oy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parameterTypes=iy,this.isImpostor=!0,this.vertexShader="CylinderImpostor.vert",this.fragmentShader="CylinderImpostor.frag",this.addUniforms({modelViewMatrixInverse:{value:new j},ortho:{value:0}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return ry},t.prototype.getDefines=function(t){var n=e.prototype.getDefines.call(this,t);return this.parameters.openEnded||(n.CAP=1),n},Object.defineProperties(t.prototype,n),t}(ny),ay=(Object.assign({disableImpostor:!1},Kv,ry),function(e,t){return void 0===t&&(t={}),!e.color2&&e.color&&(e.color2=e.color),!nl||t&&t.disableImpostor?new Qv(e,t):new oy(e,t)});xl.add("cylinder",ay);var sy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="axes",this.parameters=Object.assign({radiusSize:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0,showAxes:{type:"boolean",rebuild:!0},showBox:{type:"boolean",rebuild:!0}},this.parameters,{assembly:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.radiusSize=Sa(n.radiusSize,.5),n.colorValue=Sa(n.colorValue,"lightgreen"),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.showAxes=Sa(n.showAxes,!0),this.showBox=Sa(n.showBox,!1),e.prototype.init.call(this,n)},t.prototype.getPrincipalAxes=function(){var e,t=this.getAssembly();return t&&(e=t.partList[0].getSelection()),this.structureView.getPrincipalAxes(e)},t.prototype.getAxesData=function(e){var t=this.getPrincipalAxes(),n=new ie(this.colorValue),r=0,i=0;this.showAxes&&(r+=6,i+=3),this.showBox&&(r+=8,i+=12);var o=new Float32Array(3*r),a=ac(r,n.r,n.g,n.b),s=oc(r,this.radiusSize),l=new Float32Array(3*i),c=new Float32Array(3*i),u=ac(i,n.r,n.g,n.b),d=oc(i,this.radiusSize),f=0;if(this.showAxes){var p=function(e,t){e.toArray(o,2*f),t.toArray(o,2*f+3),e.toArray(l,f),t.toArray(c,f),f+=3};p(t.begA,t.endA),p(t.begB,t.endB),p(t.begC,t.endC)}if(this.showBox){var h=new H,m=t.getProjectedScaleForAtoms(e),g=m.d1a,v=m.d2a,y=m.d3a,b=m.d1b,x=m.d2b,w=m.d3b,_=2*f,S=function(e,n,r){h.copy(t.center).addScaledVector(t.normVecA,e).addScaledVector(t.normVecB,n).addScaledVector(t.normVecC,r),h.toArray(o,_),_+=3};S(g,v,y),S(g,v,w),S(g,x,w),S(g,x,y),S(b,x,w),S(b,x,y),S(b,v,y),S(b,v,w);var C=f,k=function(e,t){h.fromArray(o,2*f+3*e).toArray(l,C),h.fromArray(o,2*f+3*t).toArray(c,C),C+=3};k(0,1),k(0,3),k(0,6),k(1,2),k(1,7),k(2,3),k(2,4),k(3,5),k(4,5),k(4,7),k(5,6),k(6,7)}var M=new Rf(t);return{vertex:{position:o,color:a,radius:s,picking:M},edge:{position1:l,position2:c,color:u,color2:u,radius:d,picking:M}}},t.prototype.create=function(){var e=this.getAxesData(this.structureView);this.sphereBuffer=new Gm(e.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new ay(e.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})},t.prototype.createData=function(e){},t.prototype.updateData=function(e,t){var n=this.getAxesData(t.sview),r={},i={};e&&!e.position||(Object.assign(r,{position:n.vertex.position}),Object.assign(i,{position1:n.edge.position1,position2:n.edge.position2})),e&&!e.color||(Object.assign(r,{color:n.vertex.color}),Object.assign(i,{color:n.edge.color,color2:n.edge.color})),e&&!e.radius||(Object.assign(r,{radius:n.vertex.radius}),Object.assign(i,{radius:n.edge.radius})),this.sphereBuffer.setAttributes(r),this.cylinderBuffer.setAttributes(i)},t}(Pv);ml.add("axes",sy);var ly=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="ball+stick",this.parameters=Object.assign({sphereDetail:!0,radialSegments:!0,openEnded:!0,disableImpostor:!0,aspectRatio:{type:"number",precision:1,max:10,min:1},lineOnly:{type:"boolean",rebuild:!0},cylinderOnly:{type:"boolean",rebuild:!0},multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondScale:{type:"number",precision:2,max:1,min:.01},bondSpacing:{type:"number",precision:2,max:2,min:.5},linewidth:{type:"integer",max:50,min:1,buffer:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.radiusType=Sa(n.radiusType,"size"),n.radiusSize=Sa(n.radiusSize,.15),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.aspectRatio=Sa(n.aspectRatio,2),this.lineOnly=Sa(n.lineOnly,!1),this.cylinderOnly=Sa(n.cylinderOnly,!1),this.multipleBond=Sa(n.multipleBond,"off"),this.bondSpacing=Sa(n.bondSpacing,1),this.bondScale=Sa(n.bondScale,.4),this.linewidth=Sa(n.linewidth,2),e.prototype.init.call(this,n)},t.prototype.getAtomRadius=function(t){return this.aspectRatio*e.prototype.getAtomRadius.call(this,t)},t.prototype.getAtomParams=function(t,n){var r=e.prototype.getAtomParams.call(this,t,n);return r.radiusParams.scale*=this.aspectRatio,r},t.prototype.getAtomData=function(e,t,n){return e.getAtomData(this.getAtomParams(t,n))},t.prototype.getBondParams=function(t,n){return n=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,bondScale:this.bondScale},n),e.prototype.getBondParams.call(this,t,n)},t.prototype.getBondData=function(e,t,n){return e.getBondData(this.getBondParams(t,n))},t.prototype.createData=function(e){var t=[];if(this.lineOnly)this.lineBuffer=new Gv(this.getBondData(e,{position:!0,color:!0,picking:!0}),this.getBufferParams({linewidth:this.linewidth})),t.push(this.lineBuffer);else{var n=new ay(this.getBondData(e),this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}));if(t.push(n),!this.cylinderOnly){var r=new Gm(this.getAtomData(e),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));t.push(r)}}return{bufferList:t}},t.prototype.updateData=function(e,t){"off"!==this.multipleBond&&e&&e.radius&&(e.position=!0);var n=this.getBondData(t.sview,e);if(this.lineOnly){var r={};e&&!e.position||Object.assign(r,{position1:n.position1,position2:n.position2}),e&&!e.color||Object.assign(r,{color:n.color,color2:n.color2}),t.bufferList[0].setAttributes(r)}else{var i={};if(e&&!e.position||Object.assign(i,{position1:n.position1,position2:n.position2}),e&&!e.color||Object.assign(i,{color:n.color,color2:n.color2}),e&&!e.radius||Object.assign(i,{radius:n.radius}),t.bufferList[0].setAttributes(i),!this.cylinderOnly){var o=this.getAtomData(t.sview,e),a={};e&&!e.position||Object.assign(a,{position:o.position}),e&&!e.color||Object.assign(a,{color:o.color}),e&&!e.radius||Object.assign(a,{radius:o.radius}),t.bufferList[1].setAttributes(a)}}},t.prototype.setParameters=function(t){void 0===t&&(t={});var n=!1,r={};return(t.aspectRatio||t.bondSpacing||t.bondScale)&&(Object.assign(r,{radius:!0}),nl&&!this.disableImpostor||(n=!0)),e.prototype.setParameters.call(this,t,r,n),this},t}(Pv);ml.add("ball+stick",ly);var cy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="backbone",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=Sa(n.aspectRatio,1),n.radiusSize=Sa(n.radiusSize,.25),e.prototype.init.call(this,n)},t.prototype.getAtomRadius=function(t){return t.isTrace()?e.prototype.getAtomRadius.call(this,t):0},t.prototype.getAtomData=function(e,t,n){return e.getBackboneAtomData(this.getAtomParams(t,n))},t.prototype.getBondData=function(e,t,n){return e.getBackboneBondData(this.getBondParams(t,n))},t}(ly);ml.add("backbone",cy);var uy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="base",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=Sa(n.aspectRatio,1),n.radiusSize=Sa(n.radiusSize,.3),e.prototype.init.call(this,n)},t.prototype.getAtomData=function(e,t,n){return e.getRungAtomData(this.getAtomParams(t,n))},t.prototype.getBondData=function(e,t,n){var r=this.getBondParams(t,n);return Object.assign(r.colorParams,{rung:!0}),e.getRungBondData(r)},t}(ly);ml.add("base",uy);var dy=function(e,t){this.m=e,this.tension=t,this.dt=1/this.m,this.delta=1e-4,this.vec1=new H,this.vec2=new H,this.vDir=new H,this.vTan=new H,this.vNorm=new H,this.vBin=new H,this.m2=Math.ceil(this.m/2)};dy.prototype.interpolateToArr=function(e,t,n,r,i,o,a){o[a+0]=ts(e.x,t.x,n.x,r.x,i,this.tension),o[a+1]=ts(e.y,t.y,n.y,r.y,i,this.tension),o[a+2]=ts(e.z,t.z,n.z,r.z,i,this.tension)},dy.prototype.interpolateToVec=function(e,t,n,r,i,o){o.x=ts(e.x,t.x,n.x,r.x,i,this.tension),o.y=ts(e.y,t.y,n.y,r.y,i,this.tension),o.z=ts(e.z,t.z,n.z,r.z,i,this.tension)},dy.prototype.interpolatePosition=function(e,t,n,r,i,o){for(var a=0;a<this.m;++a){var s=o+3*a,l=this.dt*a;this.interpolateToArr(e,t,n,r,l,i,s)}},dy.prototype.interpolateTangent=function(e,t,n,r,i,o){for(var a=this,s=0;s<this.m;++s){var l=a.dt*s,c=l-a.delta,u=l+a.delta,d=o+3*s;c<0&&(c=0),u>1&&(u=1),a.interpolateToVec(e,t,n,r,c,a.vec1),a.interpolateToVec(e,t,n,r,u,a.vec2),a.vec2.sub(a.vec1).normalize(),a.vec2.toArray(i,d)}},dy.prototype.vectorSubdivide=function(e,t,n,r,i){for(var o,a=t.next(),s=t.next(),l=t.next(),c=t.size,u=c-1,d=r||0,f=0;f<u;++f)o=a,a=s,s=l,l=t.next(),e.apply(this,[o,a,s,l,n,d]),d+=3*this.m;i&&(o=t.get(c-2),a=t.get(c-1),s=t.get(0),l=t.get(1),e.apply(this,[o,a,s,l,n,d]),d+=3*this.m)},dy.prototype.getPosition=function(e,t,n,r){e.reset(),this.vectorSubdivide(this.interpolatePosition,e,t,n,r);var i=e.size-1,o=i*this.m*3;r&&(o+=3*this.m);var a=e.get(r?0:i);t[o]=a.x,t[o+1]=a.y,t[o+2]=a.z},dy.prototype.getTangent=function(e,t,n,r){e.reset(),this.vectorSubdivide(this.interpolateTangent,e,t,n,r);var i=(e.size-1)*this.m*3;r&&(i+=3*this.m),uc(t,t,i-3,i,3)},dy.prototype.interpolateNormalDir=function(e,t,n,r,i,o,a,s,l,c,u,d,f){for(var p=this,h=0;h<this.m;++h){var m=d+3*h;f&&(m+=3*p.m2);var g=p.dt*h;p.interpolateToVec(e,t,n,r,g,p.vec1),p.interpolateToVec(i,o,a,s,g,p.vec2),p.vDir.subVectors(p.vec2,p.vec1).normalize(),p.vTan.fromArray(l,m),p.vBin.crossVectors(p.vDir,p.vTan).normalize(),p.vBin.toArray(u,m),p.vNorm.crossVectors(p.vTan,p.vBin).normalize(),p.vNorm.toArray(c,m)}},dy.prototype.interpolateNormal=function(e,t,n,r,i){for(var o=this,a=0;a<this.m;++a){var s=i+3*a;e.copy(o.vNorm),o.vTan.fromArray(t,s),o.vBin.crossVectors(e,o.vTan).normalize(),o.vBin.toArray(r,s),o.vNorm.crossVectors(o.vTan,o.vBin).normalize(),o.vNorm.toArray(n,s)}},dy.prototype.getNormal=function(e,t,n,r,i,o){var a=this;this.vNorm.set(0,0,1);for(var s=e-1,l=i||0,c=0;c<s;++c)a.interpolateNormal(a.vDir,t,n,r,l),l+=3*a.m;o&&(this.interpolateNormal(this.vDir,t,n,r,l),l+=3*this.m),this.vBin.toArray(r,l),this.vNorm.toArray(n,l)},dy.prototype.getNormalDir=function(e,t,n,r,i,o,a,s){var l=this;e.reset(),t.reset();var c=new H,u=new H,d=new H,f=new H,p=new H,h=(new H).copy(e.next()),m=(new H).copy(e.next()),g=(new H).copy(e.next()),v=new H,y=(new H).copy(t.next()),b=(new H).copy(t.next()),x=(new H).copy(t.next());this.vNorm.set(0,0,1);for(var w=e.size,_=w-1,S=o||0,C=0;C<_;++C)p.copy(h),h.copy(m),m.copy(g),g.copy(e.next()),v.copy(y),y.copy(b),b.copy(x),x.copy(t.next()),0===C?(c.subVectors(v,p),u.subVectors(y,h),c.dot(u)<0&&(u.multiplyScalar(-1),y.addVectors(h,u)),d.subVectors(b,m),u.dot(d)<0&&(d.multiplyScalar(-1),b.addVectors(m,d))):d.copy(f),f.subVectors(x,g),d.dot(f)<0&&(f.multiplyScalar(-1),x.addVectors(g,f)),l.interpolateNormalDir(p,h,m,g,v,y,b,x,n,r,i,S,s),S+=3*l.m;if(a&&(p.copy(e.get(w-2)),h.copy(e.get(w-1)),m.copy(e.get(0)),g.copy(e.get(1)),v.copy(t.get(w-2)),y.copy(t.get(w-1)),b.copy(t.get(0)),x.copy(t.get(1)),d.copy(f),f.subVectors(x,g),d.dot(f)<0&&(f.multiplyScalar(-1),x.addVectors(g,f)),this.interpolateNormalDir(p,h,m,g,v,y,b,x,n,r,i,S,s),S+=3*this.m),s){this.vBin.fromArray(i,3*this.m2),this.vNorm.fromArray(r,3*this.m2);for(var k=0;k<this.m2;++k)l.vBin.toArray(i,3*k),l.vNorm.toArray(r,3*k)}else this.vBin.toArray(i,S),this.vNorm.toArray(r,S)},dy.prototype.interpolateColor=function(e,t,n,r,i){var o,a;for(o=0;o<this.m2;++o)a=i+3*o,n.apply(this,[e,r,a]);for(o=this.m2;o<this.m;++o)a=i+3*o,n.apply(this,[t,r,a])},dy.prototype.getColor=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,c=r||0,u=0;u<l;++u)o=a,a=e.next(),this.interpolateColor(o,a,t,n,c),c+=3*this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolateColor(o,a,t,n,c),c+=3*this.m),n[c]=n[c-3],n[c+1]=n[c-2],n[c+2]=n[c-1]},dy.prototype.interpolatePicking=function(e,t,n,r,i){var o;for(o=0;o<this.m2;++o)r[i+o]=n.apply(this,[e]);for(o=this.m2;o<this.m;++o)r[i+o]=n.apply(this,[t])},dy.prototype.getPicking=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,c=r||0,u=0;u<l;++u)o=a,a=e.next(),this.interpolatePicking(o,a,t,n,c),c+=this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolatePicking(o,a,t,n,c),c+=this.m),n[c]=n[c-1]},dy.prototype.interpolateSize=function(e,t,n,r,i){for(var o=n.apply(this,[e]),a=n.apply(this,[t]),s=0;s<this.m;++s){var l=s/this.m;r[i+s]=(1-l)*o+l*a}},dy.prototype.getSize=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,c=r||0,u=0;u<l;++u)o=a,a=e.next(),this.interpolateSize(o,a,t,n,c),c+=this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolateSize(o,a,t,n,c),c+=this.m),n[c]=n[c-1]};var fy=function(e,t){this.polymer=e,this.size=e.residueCount;var n=t||{};this.directional=n.directional||!1,this.positionIterator=n.positionIterator||!1,this.subdiv=n.subdiv||1,this.smoothSheet=n.smoothSheet||!1,n.tension?this.tension=n.tension:this.tension=this.polymer.isNucleic()?.5:.9,this.interpolator=new dy(this.subdiv,this.tension)};fy.prototype.getAtomIterator=function(e,t){var n=this.polymer,r=n.structure,i=n.residueCount,o=0,a=-1,s=[r.getAtomProxy(),r.getAtomProxy(),r.getAtomProxy(),r.getAtomProxy()],l=[new H,new H,new H,new H];var c=r.getAtomProxy(),u=r.getAtomProxy();function d(r){var a=s[o%4];if(a.index=n.getAtomIndexByType(r,e),t&&r>0&&r<i&&"e"===a.sstruc){var d=l[o%4];return c.index=n.getAtomIndexByType(r+1,e),u.index=n.getAtomIndexByType(r-1,e),d.addVectors(c,u).add(a).add(a).multiplyScalar(.25),o+=1,d}return o+=1,a}return{size:i,next:function(){var e=d(a);return a+=1,e},get:d,reset:function(){o=0,a=-1}}},fy.prototype.getSubdividedColor=function(e){var t=this.subdiv,n=this.polymer,r=(n.residueCount-1)*t*3+3;n.isCyclic&&(r+=3*t);var i=new Float32Array(r),o=this.getAtomIterator("trace"),a=e||{};a.structure=n.structure;var s=pl.getScheme(a);return this.interpolator.getColor(o,(function(e,t,n){s.atomColorToArray(e,t,n)}),i,0,n.isCyclic),{color:i}},fy.prototype.getSubdividedPicking=function(){var e=this.subdiv,t=this.polymer,n=(t.residueCount-1)*e+1;t.isCyclic&&(n+=e);var r=t.structure,i=this.getAtomIterator("trace"),o=new Float32Array(n);return this.interpolator.getPicking(i,(function(e){return e.index}),o,0,t.isCyclic),{picking:new Pf(o,r)}},fy.prototype.getSubdividedPosition=function(){return{position:this.getPosition()}},fy.prototype.getSubdividedOrientation=function(){var e=this.getTangent(),t=this.getNormals(e);return{tangent:e,normal:t.normal,binormal:t.binormal}},fy.prototype.getSubdividedSize=function(e){var t=this.subdiv,n=this.polymer,r=(n.residueCount-1)*t+1;n.isCyclic&&(r+=t);var i=new Float32Array(r),o=this.getAtomIterator("trace"),a=new sh(e);return this.interpolator.getSize(o,(function(e){return a.atomRadius(e)}),i,0,n.isCyclic),{size:i}},fy.prototype.getPosition=function(){var e=this.subdiv,t=this.polymer,n=(t.residueCount-1)*e*3+3;t.isCyclic&&(n+=3*e);var r=new Float32Array(n),i=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getPosition(i,r,0,t.isCyclic),r},fy.prototype.getTangent=function(){var e=this.subdiv,t=this.polymer,n=(this.size-1)*e*3+3;t.isCyclic&&(n+=3*e);var r=new Float32Array(n),i=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getTangent(i,r,0,t.isCyclic),r},fy.prototype.getNormals=function(e){var t=this.subdiv,n=this.polymer,r=n.isProtein(),i=this.size,o=(i-1)*t*3+3;n.isCyclic&&(o+=3*t);var a=new Float32Array(o),s=new Float32Array(o);if(this.directional&&!this.polymer.isCg()){var l=this.getAtomIterator("direction1"),c=this.getAtomIterator("direction2");this.interpolator.getNormalDir(l,c,e,a,s,0,n.isCyclic,r)}else this.interpolator.getNormal(i,e,a,s,0,n.isCyclic);return{normal:a,binormal:s}};var py=new H,hy=new H,my=Object.assign({radialSegments:4,capped:!1,aspectRatio:1},Pp);var gy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,function(e,t){void 0===t&&(t={});var n=Sa(t.radialSegments,4),r=Sa(t.capped,!1),i=r?n:0,o=r?n-2:0,a=e.position.length/3,s=a*n*3+2*i*3,l=2*(a-1)*n*3+2*o*3;return{position:new Float32Array(s),color:new Float32Array(s),index:za(l,s/3),normal:new Float32Array(s),picking:e.picking}}(t,n),n),this.capVertices=this.parameters.capped?this.parameters.radialSegments:0,this.capTriangles=this.parameters.capped?this.parameters.radialSegments-2:0,this.size2=t.position.length/3,t.primitiveId=sc(this.size2),this.setAttributes(t),this.makeIndex()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return my},t.prototype.setAttributes=function(e){void 0===e&&(e={});var t,n,r,i,o,a,s,l,c,u,d,f,p,h=this.parameters.aspectRatio,m=this.size2,g=m-1,v=this.parameters.radialSegments,y=this.geometry.attributes;e.position&&(t=e.position,n=e.normal,r=e.binormal,i=e.tangent,a=e.size,l=y.position.array,u=y.normal.array,y.position.needsUpdate=!0,y.normal.needsUpdate=!0),e.color&&(o=e.color,c=y.color.array,y.color.needsUpdate=!0),e.primitiveId&&(s=e.primitiveId,d=y.primitiveId.array,y.primitiveId.needsUpdate=!0);var b=0,x=0,w=0,_=0,S=0,C=0,k=0,M=0,T=0,A=0,E=[],P=[],R=[],O=[],I=[],L=[];if(t)for(var D=0;D<v;++D){var N=D/v*2*Math.PI;E[D]=h*Math.cos(N),P[D]=Math.sin(N),R[D]=h*Math.cos(N-.01),O[D]=Math.sin(N-.01),I[D]=h*Math.cos(N+.01),L[D]=Math.sin(N+.01)}for(var F=0;F<m;++F){p=(f=3*F)*v,t&&i&&n&&r&&a&&(py.set(i[f],i[f+1],i[f+2]),x=n[f],w=n[f+1],_=n[f+2],S=r[f],C=r[f+1],k=r[f+2],M=t[f],T=t[f+1],A=t[f+2],b=a[F]);for(var z=0;z<v;++z){var B=p+3*z;if(t){var j=-b*E[z],Z=b*P[z],H=-b*R[z],U=b*O[z],V=-b*I[z],G=b*L[z];l[B]=M+j*x+Z*S,l[B+1]=T+j*w+Z*C,l[B+2]=A+j*_+Z*k,hy.set(V*x+G*S-(H*x+U*S),V*w+G*C-(H*w+U*C),V*_+G*k-(H*_+U*k)).cross(py),u[B]=hy.x,u[B+1]=hy.y,u[B+2]=hy.z}o&&(c[B]=o[f],c[B+1]=o[f+1],c[B+2]=o[f+2]),s&&(d[F*v+z]=s[F])}}f=0,p=3*m*v;for(var W=0;W<v;++W){var $=f+3*W,q=p+3*W;t&&i&&(l[q]=l[$],l[q+1]=l[$+1],l[q+2]=l[$+2],u[q]=i[f],u[q+1]=i[f+1],u[q+2]=i[f+2]),o&&(c[q]=c[$],c[q+1]=c[$+1],c[q+2]=c[$+2]),s&&(d[m*v+W]=d[0+W])}f=3*(m-1)*v,p=3*(m+1)*v;for(var Y=0;Y<v;++Y){var X=f+3*Y,K=p+3*Y;t&&i&&(l[K]=l[X],l[K+1]=l[X+1],l[K+2]=l[X+2],u[K]=i[3*g],u[K+1]=i[3*g+1],u[K+2]=i[3*g+2]),o&&(c[K]=c[X],c[K+1]=c[X+1],c[K+2]=c[X+2]),s&&(d[(m+1)*v+Y]=d[(m-1)*v+Y])}},t.prototype.makeIndex=function(){for(var e,t,n=this.geometry.getIndex().array,r=this.size2,i=r-1,o=this.capTriangles,a=this.parameters.radialSegments,s=this.parameters.radialSegments+1,l=0;l<i;++l)for(var c=l*a*3*2,u=l*a,d=(l+1)*a,f=0;f<a;++f)n[t=c+3*f*2]=u+f,n[t+1]=u+(f+1)%a,n[t+2]=d+f,n[t+3]=d+f,n[t+4]=u+(f+1)%a,n[t+5]=d+(f+1)%a;for(var p=[0],h=1;h<s/2;++h)p.push(h),a-h!==h&&p.push(a-h);t=i*a*3*2,e=r*a;for(var m=0;m<p.length-2;++m)m%2===0?(n[t+3*m+0]=e+p[m+0],n[t+3*m+1]=e+p[m+1],n[t+3*m+2]=e+p[m+2]):(n[t+3*m+0]=e+p[m+2],n[t+3*m+1]=e+p[m+1],n[t+3*m+2]=e+p[m+0]);t=i*a*3*2+3*o,e=r*a+a;for(var g=0;g<p.length-2;++g)g%2===0?(n[t+3*g+0]=e+p[g+0],n[t+3*g+1]=e+p[g+1],n[t+3*g+2]=e+p[g+2]):(n[t+3*g+0]=e+p[g+2],n[t+3*g+1]=e+p[g+1],n[t+3*g+2]=e+p[g+0])},Object.defineProperties(t.prototype,n),t}(Lp),vy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="cartoon",this.parameters=Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1,rebuild:!0},subdiv:{type:"integer",max:50,min:1,rebuild:!0},radialSegments:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},capped:{type:"boolean",rebuild:!0},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"chainname"),n.colorScale=Sa(n.colorScale,"RdYlBu"),n.radiusType=Sa(n.radiusType,"sstruc"),n.radiusScale=Sa(n.radiusScale,.7),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.aspectRatio=Sa(n.aspectRatio,5),this.tension=Sa(n.tension,NaN),this.capped=Sa(n.capped,!0),this.smoothSheet=Sa(n.smoothSheet,!1),"low"===n.quality?(this.subdiv=3,this.radialSegments=6):"medium"===n.quality?this.subdiv=6:"high"===n.quality?this.subdiv=12:this.subdiv=Sa(n.subdiv,6),e.prototype.init.call(this,n)},t.prototype.getSplineParams=function(e){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:1!==this.aspectRatio,smoothSheet:this.smoothSheet},e)},t.prototype.getSpline=function(e){return new fy(e,this.getSplineParams())},t.prototype.getAspectRatio=function(e){return e.isCg()?1:this.aspectRatio},t.prototype.getAtomRadius=function(t){return t.isTrace()?e.prototype.getAtomRadius.call(this,t):0},t.prototype.createData=function(e){var t=this,n=[],r=[];return this.structure.eachPolymer((function(e){if(!(e.residueCount<4)){r.push(e);var i=t.getSpline(e),o=t.getAspectRatio(e),a=i.getSubdividedPosition(),s=i.getSubdividedOrientation(),l=i.getSubdividedColor(t.getColorParams()),c=i.getSubdividedPicking(),u=i.getSubdividedSize(t.getRadiusParams());n.push(new gy(Object.assign({},a,s,l,c,u),t.getBufferParams({radialSegments:t.radialSegments,aspectRatio:o,capped:t.capped})))}}),e.getSelection()),{bufferList:n,polymerList:r}},t.prototype.updateData=function(e,t){var n=this;sl&&rl.time(this.type+" repr update"),e=e||{};for(var r=0,i=t.polymerList.length;r<i;++r){var o={},a=t.polymerList[r],s=n.getSpline(a),l=n.getAspectRatio(a);if(Object.assign(t.bufferList[r],{aspectRatio:l}),e.position||e.radius){var c=s.getSubdividedPosition(),u=s.getSubdividedOrientation(),d=s.getSubdividedSize(n.getRadiusParams(l));o.position=c.position,o.normal=u.normal,o.binormal=u.binormal,o.tangent=u.tangent,o.size=d.size}if(e.color){var f=s.getSubdividedColor(n.getColorParams());o.color=f.color}if(e.picking){var p=s.getSubdividedPicking();o.picking=p.picking}t.bufferList[r].setAttributes(o)}sl&&rl.timeEnd(this.type+" repr update")},t.prototype.setParameters=function(t){var n={};return t&&t.aspectRatio&&(n.radius=!0),t&&t.tension&&(n.position=!0),e.prototype.setParameters.call(this,t,n,!1),this},t}(Pv);ml.add("cartoon",vy);var yy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="contact",this.parameters=Object.assign({hydrogenBond:{type:"boolean",rebuild:!0},weakHydrogenBond:{type:"boolean",rebuild:!0},waterHydrogenBond:{type:"boolean",rebuild:!0},backboneHydrogenBond:{type:"boolean",rebuild:!0},hydrophobic:{type:"boolean",rebuild:!0},halogenBond:{type:"boolean",rebuild:!0},ionicInteraction:{type:"boolean",rebuild:!0},metalCoordination:{type:"boolean",rebuild:!0},cationPi:{type:"boolean",rebuild:!0},piStacking:{type:"boolean",rebuild:!0},filterSele:{type:"text",rebuild:!0},labelVisible:{type:"boolean",rebuild:!0},labelFixedSize:{type:"boolean",buffer:"fixedSize"},labelSize:{type:"number",precision:3,max:10,min:.001,rebuild:!0},labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},maxHydrophobicDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondSulfurDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondAccAngle:{type:"integer",max:180,min:0,rebuild:!0},maxHbondDonAngle:{type:"integer",max:180,min:0,rebuild:!0},maxHbondAccPlaneAngle:{type:"integer",max:90,min:0,rebuild:!0},maxHbondDonPlaneAngle:{type:"integer",max:90,min:0,rebuild:!0},maxPiStackingDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxPiStackingOffset:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxPiStackingAngle:{type:"integer",max:180,min:0,rebuild:!0},maxCationPiDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxCationPiOffset:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxIonicDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHalogenBondDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHalogenBondAngle:{type:"integer",max:180,min:0,rebuild:!0},maxMetalDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},refineSaltBridges:{type:"boolean",rebuild:!0},masterModelIndex:{type:"integer",max:1e3,min:-1,rebuild:!0},lineOfSightDistFactor:{type:"number",precision:1,max:10,min:0,rebuild:!0},radialSegments:!0,disableImpostor:!0},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.radiusSize=Sa(n.radiusSize,.05),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.hydrogenBond=Sa(n.hydrogenBond,!0),this.weakHydrogenBond=Sa(n.weakHydrogenBond,!1),this.waterHydrogenBond=Sa(n.waterHydrogenBond,!1),this.backboneHydrogenBond=Sa(n.backboneHydrogenBond,!1),this.hydrophobic=Sa(n.hydrophobic,!1),this.halogenBond=Sa(n.halogenBond,!0),this.ionicInteraction=Sa(n.ionicInteraction,!0),this.metalCoordination=Sa(n.metalCoordination,!0),this.cationPi=Sa(n.cationPi,!0),this.piStacking=Sa(n.piStacking,!0),this.filterSele=Sa(n.filterSele,""),this.labelVisible=Sa(n.labelVisible,!1),this.labelFixedSize=Sa(n.labelFixedSize,!1),this.labelSize=Sa(n.labelSize,2),this.labelUnit=Sa(n.labelUnit,""),this.maxHydrophobicDist=Sa(n.maxHydrophobicDist,4),this.maxHbondDist=Sa(n.maxHbondDist,3.5),this.maxHbondSulfurDist=Sa(n.maxHbondSulfurDist,4.1),this.maxHbondAccAngle=Sa(n.maxHbondAccAngle,45),this.maxHbondDonAngle=Sa(n.maxHbondDonAngle,45),this.maxHbondAccPlaneAngle=Sa(n.maxHbondAccPlaneAngle,90),this.maxHbondDonPlaneAngle=Sa(n.maxHbondDonPlaneAngle,30),this.maxPiStackingDist=Sa(n.maxPiStackingDist,5.5),this.maxPiStackingOffset=Sa(n.maxPiStackingOffset,2),this.maxPiStackingAngle=Sa(n.maxPiStackingAngle,30),this.maxCationPiDist=Sa(n.maxCationPiDist,6),this.maxCationPiOffset=Sa(n.maxCationPiOffset,2),this.maxIonicDist=Sa(n.maxIonicDist,5),this.maxHalogenBondDist=Sa(n.maxHalogenBondDist,3.5),this.maxHalogenBondAngle=Sa(n.maxHalogenBondAngle,30),this.maxMetalDist=Sa(n.maxMetalDist,3),this.refineSaltBridges=Sa(n.refineSaltBridges,!0),this.masterModelIndex=Sa(n.masterModelIndex,-1),this.lineOfSightDistFactor=Sa(n.lineOfSightDistFactor,1),e.prototype.init.call(this,n)},t.prototype.getAtomRadius=function(){return 0},t.prototype.getContactData=function(e){var t={maxHydrophobicDist:this.maxHydrophobicDist,maxHbondDist:this.maxHbondDist,maxHbondSulfurDist:this.maxHbondSulfurDist,maxHbondAccAngle:this.maxHbondAccAngle,maxHbondDonAngle:this.maxHbondDonAngle,maxHbondAccPlaneAngle:this.maxHbondAccPlaneAngle,maxHbondDonPlaneAngle:this.maxHbondDonPlaneAngle,maxPiStackingDist:this.maxPiStackingDist,maxPiStackingOffset:this.maxPiStackingOffset,maxPiStackingAngle:this.maxPiStackingAngle,maxCationPiDist:this.maxCationPiDist,maxCationPiOffset:this.maxCationPiOffset,maxIonicDist:this.maxIonicDist,maxHalogenBondDist:this.maxHalogenBondDist,maxHalogenBondAngle:this.maxHalogenBondAngle,maxMetalDist:this.maxMetalDist,refineSaltBridges:this.refineSaltBridges,masterModelIndex:this.masterModelIndex,lineOfSightDistFactor:this.lineOfSightDistFactor},n={hydrogenBond:this.hydrogenBond,weakHydrogenBond:this.weakHydrogenBond,waterHydrogenBond:this.waterHydrogenBond,backboneHydrogenBond:this.backboneHydrogenBond,hydrophobic:this.hydrophobic,halogenBond:this.halogenBond,ionicInteraction:this.ionicInteraction,metalCoordination:this.metalCoordination,cationPi:this.cationPi,piStacking:this.piStacking,radius:this.radiusSize*this.radiusScale,filterSele:this.filterSele};return Cf(xf(e,t),e,n)},t.prototype.createData=function(e){var t=this.getContactData(e),n=[new ay(Ku(t),this.getBufferParams({sphereDetail:1,dullInterior:!0,disableImpostor:this.disableImpostor}))];if(this.labelVisible){var r={size:this.labelSize,unit:this.labelUnit};n.push(new Hv(function(e,t){for(var n=rc(e.position1,e.position2),r=[],i=ic(e.position1,e.position2),o=i.length/3,a=0;a<o;a++){var s=3*a,l=Math.sqrt(Math.pow(i[s],2)+Math.pow(i[s+1],2)+Math.pow(i[s+2],2));switch(t.unit){case"angstrom":r[a]=l.toFixed(2)+" "+String.fromCharCode(8491);break;case"nm":r[a]=(l/10).toFixed(2)+" nm";break;default:r[a]=l.toFixed(2)}}return{position:n,size:oc(n.length/3,t.size),color:e.color,text:r}}(t,r),{fixedSize:this.labelFixedSize}))}return{bufferList:n}},t}(Pv);ml.add("contact",yy);var by=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="dihedral",this.parameters=Object.assign({atomQuad:{type:"hidden",rebuild:!0},extendLine:{type:"boolean",rebuild:!0,default:!0},lineVisible:{type:"boolean",default:!0},planeVisible:{type:"boolean",default:!0},sectorVisible:{type:"boolean",default:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.side=Sa(n.side,"double"),n.opacity=Sa(n.opacity,.5),this.atomQuad=Sa(n.atomQuad,[]),this.extendLine=Sa(n.extendLine,!0),this.lineVisible=Sa(n.lineVisible,!0),this.planeVisible=Sa(n.planeVisible,!0),this.sectorVisible=Sa(n.sectorVisible,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){if(e.atomCount&&this.atomQuad.length){var t=function(e,t){void 0===t&&(t={});for(var n=Sa(t.angleStep,Math.PI/90),r=e.length,i=e.length/12,o=new Float32Array(i),a=new Float32Array(3*i),s=new Array(i),l=new Array(i),c=new Array(i),u=new Array(i),d=new Array(i),f=0,p=0,h=0,m=Du(),g=Du(),v=Du(),y=Du(),b=Du(),x=Du(),w=Du(),_=Du(),S=Du(),C=Du(),k=Du(),M=Du(),T=Du(),A=Du(),E=Du(),P=0,R=function(r){if(ju(m,e,r),ju(g,e,r+3),ju(v,e,r+6),ju(y,e,r+9),zu(b,m,g),zu(x,v,g),0!==Hu(x)){zu(w,y,v),Vu(_,x,.5),Bu(S,g,_),Gu(b,b),Gu(x,x),Gu(w,w),zu(_,m,S);var i=Fu(_,x)>0;zu(_,y,S);var R=Fu(_,x)<0;if(Vu(_,x,Fu(x,b)),zu(C,b,_),Vu(_,x,Fu(x,w)),zu(k,w,_),0!==Hu(C)&&0!==Hu(k)){Gu(C,C),Gu(k,k);var O=o[P]=Math.acos(Fu(C,k));s[P]=(tc*O).toFixed(1)+String.fromCharCode(176),Nu(A,C,x),Gu(A,A),Fu(A,k)<0&&Xu(A,A),Iv(_,S,C,A,O/2),Zu(_,a,3*P);var I=Math.ceil(O/n),L=I+(t.extendLine?4:2),D=t.extendLine?36:0,N=new Float32Array(3*L),F=new Float32Array(3*L),z=new Float32Array(9*I),B=new Float32Array(D);l[P]=N,c[P]=F,u[P]=z,d[P]=B,t.extendLine&&(i?(zu(_,m,v),Gu(_,_),Vu(M,_,1/Fu(C,_)),Bu(M,M,v)):(Vu(M,b,1/Fu(C,b)),Bu(M,M,g)),R?(zu(_,y,g),Gu(_,_),Vu(T,_,1/Fu(k,_)),Bu(T,T,g)):(Vu(T,w,1/Fu(k,w)),Bu(T,T,v))),Bu(E,S,C);var j=0;t.extendLine?(Zu(m,N,j),Zu(M,F,j),Zu(M,N,j+=3),Zu(E,F,j),j+=3,Zu(M,B,0),Zu(E,B,3),Zu(i?v:g,B,6),Zu(i?v:g,B,9),Zu(E,B,12),Zu(S,B,15)):(Zu(S,N,j),Zu(E,F,j),j+=3);for(var Z=function(e,t){var n=9*t;Zu(S,z,n),Zu(E,z,n+3),Zu(E,N,j),Iv(E,S,C,A,e),Zu(E,z,n+6),Zu(E,F,j),j+=3},H=0,U=n;U<O;U+=n)Z(U,H++);Z(O,H++),t.extendLine?(Zu(E,N,3*(L-2)),Zu(T,F,3*(L-2)),Zu(T,N,3*(L-1)),Zu(y,F,3*(L-1)),Zu(T,B,18),Zu(E,B,21),Zu(R?g:v,B,24),Zu(R?g:v,B,27),Zu(E,B,30),Zu(S,B,33)):(Zu(E,N,j),Zu(S,F,j),j+=3),f+=3*L,p+=9*I,h+=D,P+=1}}},O=0;O<r;O+=12)R(O);for(var I=P,L=new Float32Array(f),D=new Float32Array(f),N=new Float32Array(p),F=new Float32Array(h),z=0,B=0,j=0,Z=0;Z<I;Z++){var H=l[Z],U=c[Z],V=u[Z],G=d[Z];uc(H,L,0,z,H.length),uc(U,D,0,z,U.length),uc(V,N,0,B,V.length),uc(G,F,0,j,G.length),z+=H.length,B+=V.length,j+=G.length}return{labelPosition:a.subarray(0,3*I),labelText:s.slice(0,I),linePosition1:L,linePosition2:D,planePosition:F,sectorPosition:N}}(Ov(e,this.atomQuad),{extendLine:this.extendLine}),n=this.n=t.labelText.length,r=new ie(this.labelColor);this.textBuffer=new Hv({position:t.labelPosition,size:oc(n,this.labelSize),color:ac(n,r.r,r.g,r.b),text:t.labelText},this.getLabelBufferParams());var i=new ie(this.colorValue);this.lineLength=t.linePosition1.length/3;var o=ac(this.lineLength,i.r,i.g,i.b);return this.lineBuffer=new Gv(Qu({position1:t.linePosition1,position2:t.linePosition2,color:o,color2:o}),this.getBufferParams({linewidth:this.linewidth,visible:this.lineVisible,opacity:this.lineOpacity})),this.planeLength=t.planePosition.length/3,this.planeBuffer=new Lp({position:t.planePosition,color:ac(this.planeLength,i.r,i.g,i.b)},this.getBufferParams({visible:this.planeVisible})),this.sectorLength=t.sectorPosition.length/3,this.sectorBuffer=new Lp({position:t.sectorPosition,color:ac(this.sectorLength,i.r,i.g,i.b)},this.getBufferParams({visible:this.sectorVisible})),{bufferList:[this.textBuffer,this.lineBuffer,this.planeBuffer,this.sectorBuffer]}}},t.prototype.updateData=function(t,n){e.prototype.updateData.call(this,t,n);var r={},i={},o={};if(t.color){var a=new ie(this.colorValue);Object.assign(r,{color:ac(this.lineLength,a.r,a.g,a.b),color2:ac(this.lineLength,a.r,a.g,a.b)}),Object.assign(i,{color:ac(this.planeLength,a.r,a.g,a.b)}),Object.assign(o,{color:ac(this.sectorLength,a.r,a.g,a.b)})}this.lineBuffer.setAttributes(r),this.planeBuffer.setAttributes(i),this.sectorBuffer.setAttributes(o)},t.prototype.setParameters=function(t){return e.prototype.setParameters.call(this,t,{},!1),!t||void 0===t.lineVisible&&void 0===t.sectorVisible&&void 0===t.planeVisible||this.setVisibility(this.visible),t&&t.lineOpacity&&this.lineBuffer.setParameters({opacity:t.lineOpacity}),t&&void 0!==t.opacity&&this.lineBuffer.setParameters({opacity:this.lineOpacity}),t&&t.linewidth&&this.lineBuffer.setParameters({linewidth:t.linewidth}),this},t.prototype.setVisibility=function(t,n){return e.prototype.setVisibility.call(this,t,!0),this.lineBuffer&&this.lineBuffer.setVisibility(this.lineVisible&&this.visible),this.planeBuffer&&this.planeBuffer.setVisibility(this.planeVisible&&this.visible),this.sectorBuffer&&this.sectorBuffer.setVisibility(this.sectorVisible&&this.visible),n||this.viewer.requestRender(),this},t}(Rv);ml.add("dihedral",by);var xy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="distance",this.parameters=Object.assign({radialSegments:!0,openEnded:!0,disableImpostor:!0,labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},useCylinder:{type:"boolean",rebuild:!0},atomPair:{type:"hidden",rebuild:!0}},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.linewidth=Sa(n.linewidth,5),n.radiusType=Sa(n.radiusType,"size"),n.radiusSize=Sa(n.radiusSize,.2),this.labelUnit=Sa(n.labelUnit,""),this.useCylinder=Sa(n.useCylinder,!1),this.atomPair=Sa(n.atomPair,[]),e.prototype.init.call(this,n)},t.prototype.getDistanceData=function(e,t){var n=this,r=t.length,i=new Array(r),o=new Float32Array(3*r),a=new Bs,s=new Bs,l=new hh,c=e.getAtomProxy(),u=e.getAtomProxy(),d=0,f=e.getAtomSet();t.forEach((function(t,r){var p=t[0],h=t[1];if("number"===typeof p&&Number.isInteger(p)&&"number"===typeof h&&Number.isInteger(h)){if(!f.get(p)||!f.get(h))return void(d+=1);c.index=p,u.index=h}else{a.setString(p),s.setString(h);var m=e.getAtomIndices(a),g=e.getAtomIndices(s);if(!m.length||!g.length)return void(d+=1);c.index=m[0],u.index=g[0]}l.addBond(c,u,1),r-=d;var v=c.distanceTo(u);switch(n.labelUnit){case"angstrom":i[r]=v.toFixed(2)+" "+String.fromCharCode(8491);break;case"nm":i[r]=(v/10).toFixed(2)+" nm";break;default:i[r]=v.toFixed(2)}var y=3*r;o[y+0]=(c.x+u.x)/2,o[y+1]=(c.y+u.y)/2,o[y+2]=(c.z+u.z)/2})),d>0&&(r-=d,o=o.subarray(0,3*r));var p=new bd(l.count,!0);return{text:i,position:o,bondSet:p,bondStore:l}},t.prototype.getBondData=function(e,t,n){var r=e.getBondData(this.getBondParams(t,n));return r.picking&&(r.picking=new Nf(r.picking.array,r.picking.structure,n.bondStore)),r},t.prototype.createData=function(e){if(e.atomCount&&this.atomPair.length){var t=this.atomPair.length,n=new ie(this.labelColor),r=this.getDistanceData(e,this.atomPair);this.textBuffer=new Hv({position:r.position,size:oc(t,this.labelSize),color:ac(t,n.r,n.g,n.b),text:r.text},this.getLabelBufferParams());var i={bondSet:r.bondSet,bondStore:r.bondStore},o=this.getBondData(e,{position:!0,color:!0,picking:!0,radius:this.useCylinder},i);return this.useCylinder?this.distanceBuffer=new ay(o,this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})):this.distanceBuffer=new Gv(Ju(o),this.getBufferParams({linewidth:this.linewidth,visible:this.lineVisible,opacity:this.lineOpacity})),{bondSet:r.bondSet,bondStore:r.bondStore,position:r.position,bufferList:[this.textBuffer,this.distanceBuffer]}}},t.prototype.updateData=function(t,n){e.prototype.updateData.call(this,t,n);var r={bondSet:n.bondSet,bondStore:n.bondStore},i=this.getBondData(n.sview,t,r),o={};t&&!t.color||Object.assign(o,{color:i.color,color2:i.color2}),t&&!t.radius||Object.assign(o,{radius:i.radius}),this.distanceBuffer.setAttributes(o)},t.prototype.setParameters=function(t){return e.prototype.setParameters.call(this,t,{},!1),this.useCylinder||(t&&t.lineOpacity&&this.distanceBuffer.setParameters({opacity:t.lineOpacity}),t&&void 0!==t.opacity&&this.distanceBuffer.setParameters({opacity:this.lineOpacity}),t&&t.linewidth&&this.distanceBuffer.setParameters({linewidth:t.linewidth})),this},t}(Rv);function wy(e){return 2*(e.position.length/3)*3}ml.add("distance",xy);var _y=Object.assign({scale:1,color:"grey"},Pp),Sy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(wy(t)),color:new Float32Array(wy(t))},n),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag";var r=new ie(this.parameters.color),i=this.geometry.attributes;ac(wy(t)/3,r.r,r.g,r.b,i.color.array),this.setAttributes(t)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return _y},t.prototype.setAttributes=function(e){void 0===e&&(e={});var t,n,r,i=this.geometry.attributes;e.position&&e.vector&&(t=e.position,n=e.vector,r=i.position.array,i.position.needsUpdate=!0);var o=this.size/2,a=this.parameters.scale;if(t&&n)for(var s=0;s<o;s++){var l=2*s*3,c=3*s;r[l+0]=t[c+0],r[l+1]=t[c+1],r[l+2]=t[c+2],r[l+3]=t[c+0]+n[c+0]*a,r[l+4]=t[c+1]+n[c+1]*a,r[l+5]=t[c+2]+n[c+2]*a}},Object.defineProperties(t.prototype,n),t}(Op),Cy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="helixorient",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"sstruc"),n.radiusType=Sa(n.radiusType,"size"),n.radiusSize=Sa(n.radiusSize,.15),n.radiusScale=Sa(n.radiusScale,1),n.useInteriorColor=Sa(n.useInteriorColor,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){var t=this,n=[],r=[];return this.structure.eachPolymer((function(e){if(!(e.residueCount<4)){r.push(e);var i=new bh(e),o=i.getPosition(),a=i.getColor(t.getColorParams()),s=i.getSize(t.getRadiusParams()),l=i.getPicking();n.push(new Gm({position:o.center,color:a.color,radius:s.size,picking:l.picking},t.getBufferParams({sphereDetail:t.sphereDetail,disableImpostor:t.disableImpostor,dullInterior:!0})),new Sy({position:o.center,vector:o.axis},t.getBufferParams({color:"skyblue",scale:1})),new Sy({position:o.center,vector:o.resdir},t.getBufferParams({color:"lightgreen",scale:1})))}}),e.getSelection()),{bufferList:n,polymerList:r}},t.prototype.updateData=function(e,t){sl&&rl.time(this.type+" repr update"),e=e||{};for(var n=0,r=t.polymerList.length;n<r;++n){var i=3*n,o={},a=t.polymerList[n],s=new bh(a);if(e.position){var l=s.getPosition();Object.assign(o,{position:l.center}),t.bufferList[i+1].setAttributes({position:l.center,vector:l.axis}),t.bufferList[i+2].setAttributes({position:l.center,vector:l.resdir})}t.bufferList[i].setAttributes(o)}sl&&rl.timeEnd(this.type+" repr update")},t}(Pv);ml.add("helixorient",Cy);var ky=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="licorice",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=1,e.prototype.init.call(this,n)},t}(ly);ml.add("licorice",ky),vl.add("shader/HyperballStickImpostor.vert","\nattribute vec3 mapping;\nattribute float radius;\nattribute float radius2;\nattribute vec3 position1;\nattribute vec3 position2;\nvarying mat4 matrix_near;\nvarying vec4 prime1;\nvarying vec4 prime2;\nvarying float vRadius;\nvarying float vRadius2;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\nattribute vec3 color2;\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#endif\nuniform float shrink;\nuniform mat4 modelViewProjectionMatrix;\nuniform mat4 modelViewProjectionMatrixInverse;\nvoid main(){\nvRadius = radius;\nvRadius2 = radius2;\nvec4 spaceposition;\nvec3 position_atom1;\nvec3 position_atom2;\nvec4 vertex_position;\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\nvColor1 = color;\nvColor2 = color2;\n#endif\nfloat radius1 = radius;\nposition_atom1 = position1;\nposition_atom2 = position2;\nfloat distance = distance( position_atom1, position_atom2 );\nspaceposition.z = mapping.z * distance;\nif (radius1 > radius2) {\nspaceposition.y = mapping.y * 1.5 * radius1;\nspaceposition.x = mapping.x * 1.5 * radius1;\n} else {\nspaceposition.y = mapping.y * 1.5 * radius2;\nspaceposition.x = mapping.x * 1.5 * radius2;\n}\nspaceposition.w = 1.0;\nvec4 e3 = vec4( 1.0 );\nvec3 e1, e1_temp, e2, e2_temp;\ne3.xyz = normalize(position_atom1-position_atom2);\nif (e3.z == 0.0) { e3.z = 0.0000000000001;}\nif ( (position_atom1.x - position_atom2.x) == 0.0) { position_atom1.x += 0.001;}\nif ( (position_atom1.y - position_atom2.y) == 0.0) { position_atom1.y += 0.001;}\nif ( (position_atom1.z - position_atom2.z) == 0.0) { position_atom1.z += 0.001;}\nvec4 focus = vec4( 1.0 );\nfocus.x = ( position_atom1.x*position_atom1.x - position_atom2.x*position_atom2.x +\n( radius2*radius2 - radius1*radius1 )*e3.x*e3.x/shrink )/(2.0*(position_atom1.x - position_atom2.x));\nfocus.y = ( position_atom1.y*position_atom1.y - position_atom2.y*position_atom2.y +\n( radius2*radius2 - radius1*radius1 )*e3.y*e3.y/shrink )/(2.0*(position_atom1.y - position_atom2.y));\nfocus.z = ( position_atom1.z*position_atom1.z - position_atom2.z*position_atom2.z +\n( radius2*radius2 - radius1*radius1 )*e3.z*e3.z/shrink )/(2.0*(position_atom1.z - position_atom2.z));\ne1.x = 1.0;\ne1.y = 1.0;\ne1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;\ne1_temp = e1 - focus.xyz;\ne1 = normalize(e1_temp);\ne2_temp = e1.yzx * e3.zxy - e1.zxy * e3.yzx;\ne2 = normalize(e2_temp);\nmat3 R= mat3( e1.xyz, e2.xyz, e3.xyz );\nvertex_position.xyz = R * spaceposition.xyz;\nvertex_position.w = 1.0;\nvertex_position.x += (position_atom1.x+position_atom2.x) / 2.0;\nvertex_position.y += (position_atom1.y+position_atom2.y) / 2.0;\nvertex_position.z += (position_atom1.z+position_atom2.z) / 2.0;\ngl_Position = modelViewProjectionMatrix * vertex_position;\nvec4 i_near, i_far;\nvec4 near = gl_Position;\nnear.z = 0.0 ;\nnear = modelViewProjectionMatrixInverse * near;\ni_near = near;\nvec4 far = gl_Position;\nfar.z = far.w ;\ni_far = modelViewProjectionMatrixInverse * far;\nprime1 = vec4( position_atom1 - (position_atom1 - focus.xyz)*shrink, 1.0 );\nprime2 = vec4( position_atom2 - (position_atom2 - focus.xyz)*shrink, 1.0 );\nfloat Rsquare = (radius1*radius1/shrink) - (\n(position_atom1.x - focus.x)*(position_atom1.x - focus.x) +\n(position_atom1.y - focus.y)*(position_atom1.y - focus.y) +\n(position_atom1.z - focus.z)*(position_atom1.z - focus.z)\n);\nfocus.w = Rsquare;\nmatrix_near = mat4( i_near, i_far, focus, e3 );\ngl_Position.z = 1.0;\n}"),vl.add("shader/HyperballStickImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 interiorColor;\nuniform float interiorDarkening;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float clipNear;\nuniform float shrink;\nuniform mat4 modelViewMatrix;\nuniform mat4 modelViewProjectionMatrix;\nuniform mat4 modelViewMatrixInverseTranspose;\nuniform mat4 projectionMatrix;\nvarying mat4 matrix_near;\nvarying vec4 prime1;\nvarying vec4 prime2;\nvarying float vRadius;\nvarying float vRadius2;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#include common\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars_begin\n#include lights_physical_pars_fragment\n#endif\nbool interior = false;\nfloat calcClip( vec4 cameraPos ){\nreturn dot( cameraPos, vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );\n}\nfloat calcClip( vec3 cameraPos ){\nreturn calcClip( vec4( cameraPos, 1.0 ) );\n}\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nstruct Ray {\nvec3 origin ;\nvec3 direction ;\n};\nbool cutoff_plane (vec3 M, vec3 cutoff, vec3 x3){\nfloat a = x3.x;\nfloat b = x3.y;\nfloat c = x3.z;\nfloat d = -x3.x*cutoff.x-x3.y*cutoff.y-x3.z*cutoff.z;\nfloat l = a*M.x+b*M.y+c*M.z+d;\nif (l<0.0) {return true;}\nelse{return false;}\n}\nvec3 isect_surf(Ray r, mat4 matrix_coef){\nvec4 direction = vec4(r.direction, 0.0);\nvec4 origin = vec4(r.origin, 1.0);\nfloat a = dot(direction,(matrix_coef*direction));\nfloat b = dot(origin,(matrix_coef*direction));\nfloat c = dot(origin,(matrix_coef*origin));\nfloat delta =b*b-a*c;\ngl_FragColor.a = 1.0;\nif (delta<0.0){\ndiscard;\n}\nfloat t1 =(-b-sqrt(delta))/a;\nreturn r.origin+t1*r.direction;\n}\nvec3 isect_surf2(Ray r, mat4 matrix_coef){\nvec4 direction = vec4(r.direction, 0.0);\nvec4 origin = vec4(r.origin, 1.0);\nfloat a = dot(direction,(matrix_coef*direction));\nfloat b = dot(origin,(matrix_coef*direction));\nfloat c = dot(origin,(matrix_coef*origin));\nfloat delta =b*b-a*c;\ngl_FragColor.a = 1.0;\nif (delta<0.0){\ndiscard;\n}\nfloat t2 =(-b+sqrt(delta))/a;\nreturn r.origin+t2*r.direction;\n}\nRay primary_ray(vec4 near1, vec4 far1){\nvec3 near=near1.xyz/near1.w;\nvec3 far=far1.xyz/far1.w;\nreturn Ray(near,far-near);\n}\nfloat update_z_buffer(vec3 M, mat4 ModelViewP){\nfloat depth1;\nvec4 Ms=(ModelViewP*vec4(M,1.0));\nreturn depth1=(1.0+Ms.z/Ms.w)/2.0;\n}\nvoid main(){\nfloat radius = max( vRadius, vRadius2 );\nvec4 i_near, i_far, focus;\nvec3 e3, e1, e1_temp, e2;\ni_near = vec4(matrix_near[0][0],matrix_near[0][1],matrix_near[0][2],matrix_near[0][3]);\ni_far = vec4(matrix_near[1][0],matrix_near[1][1],matrix_near[1][2],matrix_near[1][3]);\nfocus = vec4(matrix_near[2][0],matrix_near[2][1],matrix_near[2][2],matrix_near[2][3]);\ne3 = vec3(matrix_near[3][0],matrix_near[3][1],matrix_near[3][2]);\ne1.x = 1.0;\ne1.y = 1.0;\ne1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;\ne1_temp = e1 - focus.xyz;\ne1 = normalize(e1_temp);\ne2 = normalize(cross(e1,e3));\nvec4 equation = focus;\nfloat shrinkfactor = shrink;\nfloat t1 = -1.0/(1.0-shrinkfactor);\nfloat t2 = 1.0/(shrinkfactor);\nvec4 colonne1, colonne2, colonne3, colonne4;\nmat4 mat;\nvec3 equation1 = vec3(t2,t2,t1);\nfloat A1 = - e1.x*equation.x - e1.y*equation.y - e1.z*equation.z;\nfloat A2 = - e2.x*equation.x - e2.y*equation.y - e2.z*equation.z;\nfloat A3 = - e3.x*equation.x - e3.y*equation.y - e3.z*equation.z;\nfloat A11 = equation1.x*e1.x*e1.x + equation1.y*e2.x*e2.x + equation1.z*e3.x*e3.x;\nfloat A21 = equation1.x*e1.x*e1.y + equation1.y*e2.x*e2.y + equation1.z*e3.x*e3.y;\nfloat A31 = equation1.x*e1.x*e1.z + equation1.y*e2.x*e2.z + equation1.z*e3.x*e3.z;\nfloat A41 = equation1.x*e1.x*A1 + equation1.y*e2.x*A2 + equation1.z*e3.x*A3;\nfloat A22 = equation1.x*e1.y*e1.y + equation1.y*e2.y*e2.y + equation1.z*e3.y*e3.y;\nfloat A32 = equation1.x*e1.y*e1.z + equation1.y*e2.y*e2.z + equation1.z*e3.y*e3.z;\nfloat A42 = equation1.x*e1.y*A1 + equation1.y*e2.y*A2 + equation1.z*e3.y*A3;\nfloat A33 = equation1.x*e1.z*e1.z + equation1.y*e2.z*e2.z + equation1.z*e3.z*e3.z;\nfloat A43 = equation1.x*e1.z*A1 + equation1.y*e2.z*A2 + equation1.z*e3.z*A3;\nfloat A44 = equation1.x*A1*A1 + equation1.y*A2*A2 + equation1.z*A3*A3 - equation.w;\ncolonne1 = vec4(A11,A21,A31,A41);\ncolonne2 = vec4(A21,A22,A32,A42);\ncolonne3 = vec4(A31,A32,A33,A43);\ncolonne4 = vec4(A41,A42,A43,A44);\nmat = mat4(colonne1,colonne2,colonne3,colonne4);\nRay ray = primary_ray(i_near,i_far) ;\nvec3 M;\nM = isect_surf(ray, mat);\nif (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }\nvec4 M1 = vec4(M,1.0);\nvec4 M2 = mat*M1;\nvec3 _normal = ( modelViewMatrixInverseTranspose * M2 ).xyz;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\n#ifdef NEAR_CLIP\nif( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 ){\nM = isect_surf2(ray, mat);\nif( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 )\ndiscard;\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / radius ) );\n}\n}else if( gl_FragDepthEXT <= 0.0 ){\nM = isect_surf2(ray, mat);\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix);\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );\n}\n}\n#else\nif( gl_FragDepthEXT <= 0.0 ){\nM = isect_surf2(ray, mat);\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );\n}\n}\n#endif\nif (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\nfloat distance_ratio = ((M.x-prime2.x)*e3.x + (M.y-prime2.y)*e3.y +(M.z-prime2.z)*e3.z) /\ndistance(prime2.xyz,prime1.xyz);\n#ifdef PICKING\nif( opacity < 0.3 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vViewPosition = -( modelViewMatrix * vec4( M, 1.0 ) ).xyz;\nvec3 vNormal = _normal;\nvec3 vColor;\nif( distance_ratio>0.5 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\nvec3 normal = normalize( vNormal );\n#include lights_physical_fragment\n#include lights_fragment_begin\n#include lights_fragment_end\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\nif( interior ){\n#ifdef USE_INTERIOR_COLOR\noutgoingLight.xyz = interiorColor;\n#else\n#ifdef DIFFUSE_INTERIOR\noutgoingLight.xyz = vColor;\n#endif\n#endif\noutgoingLight.xyz *= 1.0 - interiorDarkening;\n}\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var My=new Float32Array([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1]),Ty=new Uint16Array([0,1,2,0,2,3,1,5,6,1,6,2,4,6,5,4,7,6,0,7,4,0,3,7,0,5,1,0,4,5,3,2,6,3,6,7]),Ay=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"v3",t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return My},n.mappingIndices.get=function(){return Ty},n.mappingIndicesSize.get=function(){return 36},n.mappingSize.get=function(){return 8},n.mappingItemSize.get=function(){return 3},Object.defineProperties(t.prototype,n),t}(jm),Ey=Object.assign({shrink:.14},Pp),Py=Object.assign({shrink:{uniform:!0}},Rp),Ry=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n),this.parameterTypes=Py,this.isImpostor=!0,this.vertexShader="HyperballStickImpostor.vert",this.fragmentShader="HyperballStickImpostor.frag",this.addUniforms({modelViewProjectionMatrix:{value:new j},modelViewProjectionMatrixInverse:{value:new j},modelViewMatrixInverseTranspose:{value:new j},shrink:{value:this.parameters.shrink}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null},radius2:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Ey},Object.defineProperties(t.prototype,n),t}(Ay),Oy=(Object.assign({disableImpostor:!1},Kv,Ey),function(e,t){return void 0===t&&(t={}),!nl||t&&t.disableImpostor?(e.radius=function(e,t){for(var n=e.length,r=new Float32Array(n),i=0;i<n;i++)r[i]=Math.min(e[i],t[i]);return r}(e.radius,e.radius2),new Qv(e,t)):new Ry(e,t)}),Iy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="hyperball",this.parameters=Object.assign({shrink:{type:"number",precision:3,max:1,min:.001,buffer:!0}},this.parameters,{multipleBond:null,bondSpacing:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.radiusScale=Sa(n.radiusScale,.2),n.radiusType=Sa(n.radiusType,"vdw"),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.shrink=Sa(n.shrink,.12),e.prototype.init.call(this,n)},t.prototype.getBondParams=function(t,n){return t&&!t.radius||(n=Object.assign({radius2:!0},n)),e.prototype.getBondParams.call(this,t,n)},t.prototype.createData=function(e){var t=new Gm(e.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));return this.__center=new Float32Array(3*e.bondCount),{bufferList:[t,new Oy(e.getBondData(this.getBondParams()),this.getBufferParams({shrink:this.shrink,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))]}},t.prototype.updateData=function(e,t){var n=t.sview.getAtomData(this.getAtomParams()),r=t.sview.getBondData(this.getBondParams()),i={},o={};if(!e||e.position){Object.assign(i,{position:n.position});var a=r.position1,s=r.position2;Object.assign(o,{position:rc(a,s,this.__center),position1:a,position2:s})}e&&!e.color||(Object.assign(i,{color:n.color}),Object.assign(o,{color:r.color,color2:r.color2})),e&&!e.radius||(Object.assign(i,{radius:n.radius}),Object.assign(o,{radius:r.radius,radius2:r.radius2})),t.bufferList[0].setAttributes(i),t.bufferList[1].setAttributes(o)},t}(ky);ml.add("hyperball",Iy);var Ly=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=""),this.type=e,this.text=t,this.format=n};Ly.prototype.atomLabel=function(e){var t;switch(this.type){case"atomname":t=e.atomname;break;case"atomindex":t=""+e.index;break;case"occupancy":t=e.occupancy.toFixed(2);break;case"bfactor":t=e.bfactor.toFixed(2);break;case"serial":t=""+e.serial;break;case"element":t=e.element;break;case"atom":t=e.atomname+"|"+e.index;break;case"resname":t=e.resname;break;case"resno":t=""+e.resno;break;case"res":t=""+(Bd[e.resname.toUpperCase()]||e.resname)+e.resno;break;case"residue":var n=Bd[e.resname.toUpperCase()];t=n&&!e.inscode?""+n+e.resno:"["+e.resname+"]"+e.resno+e.inscode;break;case"text":t=this.text[e.index];break;case"format":t=Dl(this.format,e);break;default:t=e.qualifiedName()}return void 0===t?"":t},Ly.types={"":"",atomname:"atom name",atomindex:"atom index",occupancy:"occupancy",bfactor:"b-factor",serial:"serial",element:"element",atom:"atom name + index",resname:"residue name",resno:"residue no",res:"one letter code + no",residue:"[residue name] + no + inscode",text:"text",format:"format",qualified:"qualified name"};var Dy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="label",this.parameters=Object.assign({labelType:{type:"select",options:Ly.types,rebuild:!0},labelText:{type:"hidden",rebuild:!0},labelFormat:{type:"text",rebuild:!0},labelGrouping:{type:"select",options:{atom:"atom",residue:"residue"},rebuild:!0},fontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:!0},fontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:!0},fontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:!0},xOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},yOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},zOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},attachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},showBorder:{type:"boolean",buffer:!0},borderColor:{type:"color",buffer:!0},borderWidth:{type:"number",precision:2,max:.3,min:0,buffer:!0},showBackground:{type:"boolean",rebuild:!0},backgroundColor:{type:"color",buffer:!0},backgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},backgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:!0},fixedSize:{type:"boolean",buffer:!0}},this.parameters,{side:null,flatShaded:null,wireframe:null,linewidth:null,roughness:null,metalness:null,diffuse:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};this.labelType=Sa(n.labelType,"res"),this.labelText=Sa(n.labelText,{}),this.labelFormat=Sa(n.labelFormat,""),this.labelGrouping=Sa(n.labelGrouping,"atom"),this.fontFamily=Sa(n.fontFamily,"sans-serif"),this.fontStyle=Sa(n.fontStyle,"normal"),this.fontWeight=Sa(n.fontWeight,"bold"),this.xOffset=Sa(n.xOffset,0),this.yOffset=Sa(n.yOffset,0),this.zOffset=Sa(n.zOffset,.5),this.attachment=Sa(n.attachment,"bottom-left"),this.showBorder=Sa(n.showBorder,!1),this.borderColor=Sa(n.borderColor,"lightgrey"),this.borderWidth=Sa(n.borderWidth,.15),this.showBackground=Sa(n.showBackground,!1),this.backgroundColor=Sa(n.backgroundColor,"lightgrey"),this.backgroundMargin=Sa(n.backgroundMargin,.5),this.backgroundOpacity=Sa(n.backgroundOpacity,1),this.fixedSize=Sa(n.fixedSize,!1),e.prototype.init.call(this,n)},t.prototype.getTextData=function(e,t){var n,r,i,o,a,s,l,c=this.getAtomParams(t),u=new Ly(this.labelType,this.labelText,this.labelFormat);if("atom"===this.labelGrouping){var d=e.getAtomData(c);n=d.position,r=d.radius,i=d.color,t&&!t.text||(o=[],e.eachAtom((function(e){return o.push(u.atomLabel(e))})))}else if("residue"===this.labelGrouping){t&&!t.position||(a=[]),t&&!t.color||(l=[]),t&&!t.radius||(s=[]),t&&!t.text||(o=[]),c.colorParams&&(c.colorParams.structure=e.getStructure());var f=pl.getScheme(c.colorParams),p=new sh(c.radiusParams),h=e.getAtomProxy(),m=0;e.eachResidue((function(e){var n=3*m;e.isProtein()||e.isNucleic()?(h.index=e.traceAtomIndex,t&&!t.position||h.positionToArray(a,n)):(h.index=e.atomOffset,t&&!t.position||e.positionToArray(a,n)),t&&!t.color||f.atomColorToArray(h,l,n),t&&!t.radius||(s[m]=p.atomRadius(h)),t&&!t.text||o.push(u.atomLabel(h)),++m})),t&&!t.position||(n=new Float32Array(a)),t&&!t.color||(i=new Float32Array(l)),t&&!t.radius||(r=new Float32Array(s))}return{position:n,size:r,color:i,text:o}},t.prototype.createData=function(e){return{bufferList:[new Hv(this.getTextData(e,{position:!0,color:!0,radius:!0,text:!0}),this.getBufferParams({fontFamily:this.fontFamily,fontStyle:this.fontStyle,fontWeight:this.fontWeight,xOffset:this.xOffset,yOffset:this.yOffset,zOffset:this.zOffset,attachment:this.attachment,showBorder:this.showBorder,borderColor:this.borderColor,borderWidth:this.borderWidth,showBackground:this.showBackground,backgroundColor:this.backgroundColor,backgroundMargin:this.backgroundMargin,backgroundOpacity:this.backgroundOpacity,fixedSize:this.fixedSize}))]}},t.prototype.updateData=function(e,t){t.bufferList[0].setAttributes(this.getTextData(t.sview,e))},t.prototype.getAtomRadius=function(){return 0},t}(Pv);function Ny(e){var t=e.getAtomSet(),n=e.getBondSet(),r=e.getBondProxy();return n.forEach((function(e){r.index=e,t.clear(r.atomIndex1),t.clear(r.atomIndex2)})),t}ml.add("label",Dy);var Fy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="line",this.parameters=Object.assign({multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondSpacing:{type:"number",precision:2,max:2,min:.5},linewidth:{type:"integer",max:50,min:1,buffer:!0},lines:{type:"boolean",rebuild:!0},crosses:{type:"select",rebuild:!0,options:{off:"off",lone:"lone",all:"all"}},crossSize:{type:"number",precision:2,max:2,min:.1}},this.parameters,{flatShaded:null,side:null,wireframe:null,roughness:null,metalness:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};this.multipleBond=Sa(n.multipleBond,"off"),this.bondSpacing=Sa(n.bondSpacing,1),this.linewidth=Sa(n.linewidth,2),this.lines=Sa(n.lines,!0),this.crosses=Sa(n.crosses,"lone"),this.crossSize=Sa(n.crossSize,.4),e.prototype.init.call(this,n)},t.prototype.getAtomRadius=function(e){return.1},t.prototype.getBondParams=function(t,n){return n=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,radiusParams:{type:"size",size:.1,scale:1}},n),e.prototype.getBondParams.call(this,t,n)},t.prototype._crossData=function(e,t){if(!e||e.position||e.color){var n={};"lone"===this.crosses&&Object.assign(n,{atomSet:Ny(t)});var r,i=t.getAtomData(this.getAtomParams(e,n)),o={},a=i.position,s=i.color,l=i.picking,c=(a||s).length,u=3*c,d=new Float32Array(0),f=new Float32Array(0),p=new Float32Array(0),h=new Float32Array(0),m=new Float32Array(0);e&&!e.position||(d=o.position1=new Float32Array(u),f=o.position2=new Float32Array(u),r=this.crossSize/2),e&&!e.color||(p=o.color=new Float32Array(u),h=o.color2=new Float32Array(u)),e&&!e.picking||(m=new Float32Array(3*i.picking.array.length));for(var g=0;g<c;g++){var v=3*g,y=3*v;if(!e||e.position){var b=a[v],x=a[v+1],w=a[v+2];d[y]=b-r,d[y+1]=x,d[y+2]=w,f[y]=b+r,f[y+1]=x,f[y+2]=w,d[y+3]=b,d[y+4]=x-r,d[y+5]=w,f[y+3]=b,f[y+4]=x+r,f[y+5]=w,d[y+6]=b,d[y+7]=x,d[y+8]=w-r,f[y+6]=b,f[y+7]=x,f[y+8]=w+r}if(!e||e.color)for(var _=y+9,S=y;S<_;S+=3)p[S]=h[S]=s[v],p[S+1]=h[S+1]=s[v+1],p[S+2]=h[S+2]=s[v+2];e&&!e.picking||(m[v]=m[v+1]=m[v+2]=l.array[g])}return e&&!e.picking||(o.picking=new Pf(m,l.structure)),o}},t.prototype.createData=function(e){var t={position:!0,color:!0,picking:!0},n=[];if(this.lines){var r=e.getBondData(this.getBondParams(t)),i=new Gv(r,this.getBufferParams({linewidth:this.linewidth}));n.push(i)}if("off"!==this.crosses){var o=new Gv(this._crossData(t,e),this.getBufferParams({linewidth:this.linewidth}));n.push(o)}return{bufferList:n}},t.prototype.updateData=function(e,t){var n=0;if(this.lines){var r=t.sview.getBondData(this.getBondParams(e)),i={};e&&!e.position||Object.assign(i,{position1:r.position1,position2:r.position2}),e&&!e.color||Object.assign(i,{color:r.color,color2:r.color2}),t.bufferList[n++].setAttributes(i)}if("off"!==this.crosses){var o=this._crossData(e,t.sview),a={};e&&!e.position||Object.assign(a,{position1:o.position1,position2:o.position2}),e&&!e.color||Object.assign(a,{color:o.color,color2:o.color2}),t.bufferList[n++].setAttributes(a)}},t.prototype.setParameters=function(t){var n={};return t&&(t.bondSpacing||t.crossSize)&&Object.assign(n,{position:!0}),e.prototype.setParameters.call(this,t,n,!1),this},t}(Pv);function zy(e,t,n,r,i){var o=new(r=r||Int32Array)(e*t*n*(i=i||1));function a(e,r,o){return((e*t+r)*n+o)*i}return{data:o,index:a,set:function(e,t,n){for(var r=[],s=arguments.length-3;s-- >0;)r[s]=arguments[s+3];for(var l=a(e,t,n),c=0;c<i;++c)o[l+c]=r[c]},toArray:function(e,t,n,r,s){void 0===r&&(r=[]),void 0===s&&(s=0);for(var l=a(e,t,n),c=0;c<i;++c)r[s+c]=o[l+c]},fromArray:function(e,t,n,r,s){void 0===s&&(s=0);for(var l=a(e,t,n),c=0;c<i;++c)o[l+c]=r[s+c]},copy:function(e){o.set(e.data)}}}function By(e,t,n){var r=xp(t),i=Ru(e);0===e.length&&(i[0].set([0,0,0]),i[1].set([0,0,0]));var o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x=i[0],w=i[1];function _(e,t,n,i,_){o=t||1.4,a=n||2,g=_||!0;var S=0;for(var k in r)S=Math.max(S,k);var M=wp(x,w,S,a,e?o:0);l=M.dim[0],c=M.dim[1],u=M.dim[2],d=M.matrix,f=M.tran,a=M.scaleFactor,p={},h={},C(e),m=o*a,s=i||o/a,v=new Uint8Array(l*c*u),e&&(y=new Float64Array(l*c*u)),g&&(b=new Int32Array(l*c*u))}var S=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];function C(e){var t,n,i,s,l,c,u,d,f,m;for(var g in r)if(t=parseFloat(g),!p[g]){for(c=(u=e?(t+o)*a+.5:t*a+.5)*u,d=Math.floor(u)+1,f=new Int32Array(d*d),m=0,n=0;n<d;++n)for(i=0;i<d;++i)(s=n*n+i*i)>c?f[m]=-1:(l=Math.sqrt(c-s),f[m]=Math.floor(l)),++m;h[g]=d,p[g]=f}}function k(n){var r,i,o,s,d,m,y,x,w,_,S,C,k,M,T,A,E,P,R=3*n,O=n;r=Math.floor(.5+a*(e[R]+f[0])),i=Math.floor(.5+a*(e[R+1]+f[1])),o=Math.floor(.5+a*(e[R+2]+f[2]));var I,L=t[O],D=p[L],N=0,F=c*u,z=h[L];for(_=0;_<z;++_)for(S=0;S<z;++S){if(-1!==(I=D[N]))for(A=-1;A<2;++A)for(E=-1;E<2;++E)for(P=-1;P<2;++P)if(0!==A&&0!==E&&0!==P)for(y=A*_,w=P*S,C=0;C<=I;++C)if(M=i+(x=C*E),T=o+w,!((k=r+y)<0||M<0||T<0||k>=l||M>=c||T>=u)){var B=k*F+M*u+T;if(g)if(1&v[B]){if(1&v[B]){var j=b[B];j!==R&&y*y+x*x+w*w<(s=r+y-Math.floor(.5+a*(e[j]+f[0])))*s+(d=i+x-Math.floor(.5+a*(e[j+1]+f[1])))*d+(m=o+w-Math.floor(.5+a*(e[j+2]+f[2])))*m&&(b[B]=n)}}else v[B]|=1,b[B]=n;else v[B]|=1}N++}}function M(t){var n,r;for(console.time("EDTSurface fillvoxels"),n=0,r=v.length;n<r;++n)v[n]=0,t&&(y[n]=-1),g&&(b[n]=-1);for(n=0,r=e.length/3;n<r;++n)k(n);for(n=0,r=v.length;n<r;++n)1&v[n]&&(v[n]|=2);console.timeEnd("EDTSurface fillvoxels")}function T(n){var r,i,o,s,d,m,y,x,w,_,S,C,k,M,T,A,E,P,R,O=3*n,I=n,L=0;r=Math.floor(.5+a*(e[O]+f[0])),i=Math.floor(.5+a*(e[O+1]+f[1])),o=Math.floor(.5+a*(e[O+2]+f[2]));var D=t[I],N=c*u;for(k=0,R=h[D];k<R;++k)for(M=0;M<R;++M){if(-1!==p[D][L])for(A=-1;A<2;++A)for(E=-1;E<2;++E)for(P=-1;P<2;++P)if(0!==A&&0!==E&&0!==P)for(y=A*k,w=P*M,T=0;T<=p[D][L];++T)if(S=i+(x=T*E),C=o+w,!((_=r+y)<0||S<0||C<0||_>=l||S>=c||C>=u)){var F=_*N+S*u+C;if(2&v[F]){if(g){var z=b[F];y*y+x*x+w*w<(s=Math.floor(.5+a*(e[z]+f[0])))*s+(d=Math.floor(.5+a*(e[z+1]+f[1])))*d+(m=Math.floor(.5+a*(e[z+2]+f[2])))*m&&(b[F]=n)}}else v[F]|=2,g&&(b[F]=n)}L++}}function A(){var e,t,n,r;console.time("EDTSurface fastdistancemap");var i,o=zy(l,c,u,Uint16Array,3),a=c*u,d=m*m,f=0;for(e=0;e<l;++e)for(t=0;t<c;++t)for(n=0;n<u;++n)v[i=e*a+t*u+n]&=-3,1&v[i]&&4&v[i]&&(o.set(e,t,n,e,t,n),y[i]=0,v[i]|=2,f+=1);var p=new Int32Array(3*f),h=0,x=new Int32Array(3*f),w=0;for(e=0;e<l;++e)for(t=0;t<c;++t)for(n=0;n<u;++n)4&v[i=e*a+t*u+n]&&(p[h]=e,p[h+1]=t,p[h+2]=n,h+=3,v[i]&=-5);do{for(w=E(p,o,h,x),h=0,e=0,r=w;e<r;e+=3)i=a*x[e]+u*x[e+1]+x[e+2],v[i]&=-5,y[i]<=1.0404*d&&(p[h]=x[e],p[h+1]=x[e+1],p[h+2]=x[e+2],h+=3)}while(h>0);var _,S=s*s,C=new Uint16Array(3);for(e=0;e<l;++e)for(t=0;t<c;++t)for(n=0;n<u;++n)v[i=e*a+t*u+n]&=-5,1&v[i]&&(2&v[i]&&!(2&v[i]&&y[i]>=S)||(v[i]|=4,g&&2&v[i]&&(o.toArray(e,t,n,C),_=C[0]*a+C[1]*u+C[2],b[i]=b[_])));console.timeEnd("EDTSurface fastdistancemap")}function E(e,t,n,r){var i,o,a,s,d,f,p,h,m,g,b,x,w=new Uint16Array(3),_=0;if(0===n)return _;var C=-1,k=-1,M=-1,T=c*u;for(p=0,m=n;p<m;p+=3)for(i=e[p],o=e[p+1],a=e[p+2],t.toArray(i,o,a,w),h=0;h<6;++h)C=i+(x=S[h])[0],k=o+x[1],M=a+x[2],C<l&&C>-1&&k<c&&k>-1&&M<u&&M>-1&&(1&v[b=C*T+u*k+M]&&!(2&v[b])?(t.fromArray(C,k,M,w),g=(s=C-w[0])*s+(d=k-w[1])*d+(f=M-w[2])*f,y[b]=g,v[b]|=2,v[b]|=4,r[_]=C,r[_+1]=k,r[_+2]=M,_+=3):1&v[b]&&2&v[b]&&(g=(s=C-w[0])*s+(d=k-w[1])*d+(f=M-w[2])*f)<y[b]&&(t.fromArray(C,k,M,w),y[b]=g,4&v[b]||(v[b]|=4,r[_]=C,r[_+1]=k,r[_+2]=M,_+=3)));for(p=0,m=n;p<m;p+=3)for(i=e[p],o=e[p+1],a=e[p+2],t.toArray(i,o,a,w),h=6;h<18;h++)C=i+(x=S[h])[0],k=o+x[1],M=a+x[2],C<l&&C>-1&&k<c&&k>-1&&M<u&&M>-1&&(1&v[b=C*T+u*k+M]&&!(2&v[b])?(t.fromArray(C,k,M,w),g=(s=C-w[0])*s+(d=k-w[1])*d+(f=M-w[2])*f,y[b]=g,v[b]|=2,v[b]|=4,r[_]=C,r[_+1]=k,r[_+2]=M,_+=3):1&v[b]&&2&v[b]&&(g=(s=C-w[0])*s+(d=k-w[1])*d+(f=M-w[2])*f)<y[b]&&(t.fromArray(C,k,M,w),y[b]=g,4&v[b]||(v[b]|=4,r[_]=C,r[_+1]=k,r[_+2]=M,_+=3)));for(p=0,m=n;p<m;p+=3)for(i=e[p],o=e[p+1],a=e[p+2],t.toArray(i,o,a,w),h=18;h<26;h++)C=i+(x=S[h])[0],k=o+x[1],M=a+x[2],C<l&&C>-1&&k<c&&k>-1&&M<u&&M>-1&&(1&v[b=C*T+u*k+M]&&!(2&v[b])?(t.fromArray(C,k,M,w),g=(s=C-w[0])*s+(d=k-w[1])*d+(f=M-w[2])*f,y[b]=g,v[b]|=2,v[b]|=4,r[_]=C,r[_+1]=k,r[_+2]=M,_+=3):1&v[b]&&2&v[b]&&(g=(s=C-w[0])*s+(d=k-w[1])*d+(f=M-w[2])*f)<y[b]&&(t.fromArray(C,k,M,w),y[b]=g,4&v[b]||(v[b]|=4,r[_]=C,r[_+1]=k,r[_+2]=M,_+=3)));return _}this.getVolume=function(t,r,i,o,a){console.time("EDTSurface.getVolume");var s="vws"!==t;_(s,r,i,o,a),M(s),function(){var e,t,n,r=c*u;for(e=0;e<l;++e)for(t=0;t<u;++t)for(n=0;n<c;++n){var i=e*r+n*u+t;if(1&v[i])for(var o=0;o<26;){var a=e+S[o][0],s=t+S[o][2],d=n+S[o][1];if(a>-1&&a<l&&d>-1&&d<c&&s>-1&&s<u&&!(1&v[a*r+d*u+s])){v[i]|=4;break}o++}}}(),"ms"!==t&&"ses"!==t||A(),"ses"===t&&(C(!1),function(){var t,n;for(t=0,n=v.length;t<n;++t)v[t]&=-3;for(t=0,n=e.length/3;t<n;++t)T(t)}()),function(e){var t,n=v.length;if("vws"===e)for(t=0;t<n;++t)v[t]&=-5,v[t]=2&v[t]?1:0;else if("ms"===e)for(t=0;t<n;++t)v[t]&=-3,4&v[t]&&(v[t]|=2),v[t]&=-5,v[t]=2&v[t]?1:0;else if("ses"===e)for(t=0;t<n;++t)4&v[t]&&2&v[t]?v[t]&=-5:4&v[t]&&!(2&v[t])&&(v[t]|=2),v[t]=2&v[t]?1:0;else if("sas"===e)for(t=0;t<n;++t)v[t]&=-5,v[t]=2&v[t]?1:0}(t);for(var d=0,f=b.length;d<f;++d)b[d]=n[b[d]];return console.timeEnd("EDTSurface.getVolume"),{data:v,nx:u,ny:c,nz:l,atomindex:b}},this.getSurface=function(e,t,n,r,i,o,a){var s=this.getVolume(e,t,n,r,i);return new Cp(s.data,s.nx,s.ny,s.nz,s.atomindex).getSurface(1,o,void 0,d,a)}}function jy(e,t,n,r,i,o,a){var s=e.length,l=i[0],c=i[1],u=i[2],d=o[0],f=o[1],p=o[2];function h(e,t){return Math.floor((e-t)/a)}for(var m,g,v,y=h(d,l)+1,b=h(f,c)+1,x=h(p,u)+1,w=y*b*x,_=b*x,S=[],C=0;C<s;C++){var k=(m=e[C],g=t[C],v=n[C],(h(m,l)*b+h(g,c))*x+h(v,u));void 0===S[k]?S[k]=[C]:S[k].push(C)}var M=new Uint32Array(w),T=new Uint16Array(w),A=new Uint32Array(s),E=0,P=0;for(C=0;C<w;C++){var R=M[C]=E,O=S[C];if(void 0!==O)for(var I=0;I<O.length;I++)A[E]=O[I],E++;var L=E-R;T[C]=L,L>P&&(P=L)}return{neighbourListLength:27*P+1,withinRadii:function(i,o,a,s,d){for(var f=0,p=h(i,l),m=h(o,c),g=h(a,u),v=Math.max(0,p-1),w=Math.max(0,m-1),S=Math.max(0,g-1),C=Math.min(y,p+2),k=Math.min(b,m+2),E=Math.min(x,g+2),P=v;P<C;++P)for(var R=P*_,O=w;O<k;++O)for(var I=O*x,L=S;L<E;++L)for(var D=R+I+L,N=M[D],F=N+T[D],z=N;z<F;z++){var B=A[z],j=e[B]-i,Z=t[B]-o,H=n[B]-a,U=r[B]+s;j*j+Z*Z+H*H<=U*U&&(d[f++]=A[z])}d[f]=-1}}}function Zy(e,t,n){for(var r=t.length,i=new Float32Array(r),o=new Float32Array(r),a=new Float32Array(r),s=0;s<r;s++){var l=3*s;i[s]=e[l],o[s]=e[l+1],a[s]=e[l+2]}var c=Ru(e);0===e.length&&(c[0].set([0,0,0]),c[1].set([0,0,0]));var u,d,f,p,h,m,g,v,y,b,x,w,_,S,C,k,M,T,A,E=c[0],P=c[1],R=-1,O=new Float32Array([0,0,0]),I=new Float32Array([0,0,0]),L=new Float32Array([0,0,0]),D=new Float32Array([0,0,0]);function N(e,n,s,l){p=Sa(e,1.4),h=Sa(n,2),m=Sa(s,!0),g=Sa(l,30),u=new Float32Array(r),d=new Float32Array(r);for(var c=0;c<u.length;++c){var O=t[c]+p;u[c]=O,d[c]=O*O}f=0;for(var I=0;I<u.length;++I)u[I]>f&&(f=u[I]);!function(){var e=wp(E,P,f,h,0);h=e.scaleFactor,v=e.dim,y=e.matrix,A=Math.max(5,2+Math.floor(p*h)),b=oc(v[0]*v[1]*v[2],-1001),x=new Int32Array(b.length),w=new Float32Array(v[0]),_=new Float32Array(v[1]),S=new Float32Array(v[2]),F(w,E[0],1/h),F(_,E[1],1/h),F(S,E[2],1/h)}(),function(){var e=0,t=2*Math.PI/g;k=new Float32Array(g),C=new Float32Array(g);for(var n=0;n<g;n++)k[n]=Math.cos(e),C[n]=Math.sin(e),e+=t}(),M=jy(i,o,a,u,E,P,2.01*f),T=new Int32Array(M.neighbourListLength),R=-1}function F(e,t,n){for(var r=0;r<e.length;r++)e[r]=t+n*r}function z(e,t,n,r,i){var o;if(-1!==R){if((o=R)!==r&&o!==i&&B(o,e,t,n))return o;R=-1}var a=0;for(o=T[a];o>=0;){if(o!==r&&o!==i&&B(o,e,t,n))return R=o,o;o=T[++a]}return R=-1,-1}function B(t,n,r,i){var o=3*t,a=d[t],s=e[o]-n,l=e[o+1]-r,c=e[o+2]-i;return s*s+l*l+c*c<a}function j(){for(var e=0;e<r;e++){var t=i[e],n=o[e],s=a[e],l=u[e],c=d[e];M.withinRadii(t,n,s,l,T);for(var f=Math.ceil(l*h),p=Math.floor(h*(t-E[0])),g=Math.floor(h*(n-E[1])),y=Math.floor(h*(s-E[2])),C=Math.max(0,p-f),k=Math.max(0,g-f),A=Math.max(0,y-f),P=Math.min(v[0],p+f+2),R=Math.min(v[1],g+f+2),O=Math.min(v[2],y+f+2),I=C;I<P;I++)for(var L=w[I]-t,D=v[1]*v[2]*I,N=k;N<R;N++)for(var F=_[N]-n,B=L*L+F*F,j=D+v[2]*N,Z=A;Z<O;Z++){var H=S[Z]-s,U=B+H*H;if(U<c){var V=Z+j;b[V]<0&&(b[V]=-b[V]);var G=Math.sqrt(U),W=l/G,$=L*W,q=F*W,Y=H*W;if(-1===z($+=t,q+=n,Y+=s,e,-1)){var X=l-G;X<b[V]&&(b[V]=X,m&&(x[V]=e))}}}}}function Z(e,t){var n=u[e],r=u[t],s=O[0]=i[t]-i[e],l=O[1]=o[t]-o[e],c=O[2]=a[t]-a[e],d=s*s+l*l+c*c,f=Math.sqrt(d),p=n*((n*n+f*f-r*r)/(2*n*f));Gu(O,O),function(e,t){e[0]=e[1]=e[2]=1,0!==t[0]?e[0]=(t[1]+t[2])/-t[0]:0!==t[1]?e[1]=(t[0]+t[2])/-t[1]:0!==t[2]&&(e[2]=(t[0]+t[1])/-t[2])}(L,O),Gu(L,L),Nu(D,O,L),Gu(D,D);var y=Math.sqrt(n*n-p*p);Vu(L,L,y),Vu(D,D,y),Vu(O,O,p),I[0]=O[0]+i[e],I[1]=O[1]+o[e],I[2]=O[2]+a[e],R=-1;for(var M=A,T=0;T<g;T++){var P=k[T],N=C[T],F=I[0]+P*L[0]+N*D[0],B=I[1]+P*L[1]+N*D[1],j=I[2]+P*L[2]+N*D[2];if(-1===z(F,B,j,e,t))for(var Z=Math.floor(h*(F-E[0])),H=Math.floor(h*(B-E[1])),U=Math.floor(h*(j-E[2])),V=Math.max(0,Z-M),G=Math.max(0,H-M),W=Math.max(0,U-M),$=Math.min(v[0],Z+M+2),q=Math.min(v[1],H+M+2),Y=Math.min(v[2],U+M+2),X=V;X<$;X++){s=F-w[X];for(var K=v[1]*v[2]*X,J=G;J<q;J++)for(var Q=s*s+(l=B-_[J])*l,ee=K+v[2]*J,te=W;te<Y;te++){d=Q+(c=j-S[te])*c;var ne=te+ee,re=b[ne];if(re>0&&d<re*re&&(b[ne]=Math.sqrt(d),m)){var ie=s*O[0]+l*O[1]+c*O[2];x[ne]=ie<0?t:e}}}}}function H(e,t,s){console.time("AVSurface.getVolume"),console.time("AVSurface.init"),N(e,t,s),console.timeEnd("AVSurface.init"),console.time("AVSurface.projectPoints"),j(),console.timeEnd("AVSurface.projectPoints"),console.time("AVSurface.projectTorii"),function(){for(var e=0;e<r;e++){M.withinRadii(i[e],o[e],a[e],u[e],T);for(var t=0,n=T[t];n>=0;)e<n&&Z(e,n),n=T[++t]}}(),console.timeEnd("AVSurface.projectTorii"),function(){for(var e=0;e<b.length;e++)b[e]<0&&(b[e]=0)}(),function(){for(var e=0;e<x.length;e++)x[e]=n[x[e]]}(),console.timeEnd("AVSurface.getVolume")}this.getSurface=function(e,t,n,r,i,o,a){return H(t,n,i),new Cp(b,v[2],v[1],v[0],x).getSurface(t,!1,void 0,y,a)}}ml.add("line",Fy),Object.assign(By,{__deps:[wp,xp,Cp,Ru,zy]}),Object.assign(Zy,{__deps:[wp,Cp,oc,Ru,Vu,Nu,Gu,jy,Sa]}),fl.add("molsurf",(function(e,t){var n=e.data.args,r=e.data.params;if(n&&r){var i=new("av"===r.type?Zy:By)(n.coordList,n.radiusList,n.indexList).getSurface(r.type,r.probeRadius,r.scaleFactor,r.cutoff,!0,r.smooth,r.contour),o=[i.position.buffer,i.index.buffer];i.normal&&o.push(i.normal.buffer),i.atomindex&&o.push(i.atomindex.buffer),t({sd:i,p:r},o)}}),[By,Zy]);var Hy=function(e){this.structure=e};Hy.prototype._getAtomData=function(e){return this.structure.getAtomData({what:{position:!0,radius:!0,index:!0},radiusParams:Sa(e.radiusParams,{type:"vdw",scale:1})})},Hy.prototype._makeSurface=function(e,t){var n=new _p(t.name,"",e);return n.info.type=t.type,n.info.probeRadius=t.probeRadius,n.info.scaleFactor=t.scaleFactor,n.info.smooth=t.smooth,n.info.cutoff=t.cutoff,n},Hy.prototype.getSurface=function(e){var t=e||{},n=this._getAtomData(e),r=n.position,i=n.radius,o=n.index,a=new("av"===t.type?Zy:By)(r,i,o).getSurface(t.type,t.probeRadius,t.scaleFactor,t.cutoff,!0,t.smooth,t.contour);return this._makeSurface(a,t)},Hy.prototype.getSurfaceWorker=function(e,t){var n=this,r=Object.assign({},e);if(window.hasOwnProperty("Worker")){void 0===this.worker&&(this.worker=new Tu("molsurf"));var i=this._getAtomData(e),o=i.position,a=i.radius,s=i.index,l={args:{coordList:o,radiusList:a,indexList:s},params:r},c=[o.buffer,a.buffer,s.buffer];this.worker.post(l,c,(function(e){t(n._makeSurface(e.data.sd,r))}),(function(e){console.warn("MolecularSurface.getSurfaceWorker error - trying without worker",e),n.worker.terminate(),n.worker=void 0;var i=n.getSurface(r);t(i)}))}else{var u=this.getSurface(r);t(u)}},Hy.prototype.dispose=function(){this.worker&&this.worker.terminate()};var Uy=function(e){function t(t,n,r){var i=this;e.call(this,t,n,r),this.type="surface",this.parameters=Object.assign({surfaceType:{type:"select",rebuild:!0,options:{vws:"vws",sas:"sas",ms:"ms",ses:"ses",av:"av"}},probeRadius:{type:"number",precision:1,max:20,min:0,rebuild:!0},smooth:{type:"integer",precision:1,max:10,min:0,rebuild:!0},scaleFactor:{type:"number",precision:1,max:5,min:0,rebuild:!0},cutoff:{type:"number",precision:2,max:50,min:0,rebuild:!0},contour:{type:"boolean",rebuild:!0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},filterSele:{type:"text",rebuild:!0},colorVolume:{type:"hidden"},useWorker:{type:"boolean",rebuild:!0}},this.parameters,{radius:null,scale:null}),this.__infoList=[],this.structure.signals.refreshed.add((function(){i.__forceNewMolsurf=!0})),this.toBePrepared=!0,this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"uniform"),n.colorValue=Sa(n.colorValue,14540253),n.disablePicking=Sa(n.disablePicking,!0),this.surfaceType=Sa(n.surfaceType,"ms"),this.probeRadius=Sa(n.probeRadius,1.4),this.smooth=Sa(n.smooth,2),this.scaleFactor=Sa(n.scaleFactor,2),this.cutoff=Sa(n.cutoff,0),this.contour=Sa(n.contour,!1),this.background=Sa(n.background,!1),this.opaqueBack=Sa(n.opaqueBack,!0),this.filterSele=Sa(n.filterSele,""),this.colorVolume=Sa(n.colorVolume,void 0),this.useWorker=Sa(n.useWorker,!0),e.prototype.init.call(this,t)},t.prototype.prepareData=function(e,t,n){var r=this.__infoList[t];if(r||(r={},this.__infoList[t]=r),r.molsurf&&r.sele===e.selection.string)n(t);else{if(this.filterSele){var i=e.structure.getView(new Bs(this.filterSele)),o=i.boundingBox.getSize(new H),a=Math.max(o.x,o.y,o.z),s=e.getAtomSetWithinPoint(i.center,a/2+6);e=e.getView(new Bs(e.getAtomSetWithinSelection(s,3).toSeleString()))}r.sele=e.selection.string,r.molsurf=new Hy(e);var l=this.getSurfaceParams(),c=function(e){r.surface=e,n(t)};this.useWorker?r.molsurf.getSurfaceWorker(l,c):c(r.molsurf.getSurface(l))}},t.prototype.prepare=function(e){var t=this;if((this.__forceNewMolsurf||this.__sele!==this.selection.string||this.__surfaceParams!==JSON.stringify(this.getSurfaceParams()))&&(this.__infoList.forEach((function(e){e.molsurf.dispose()})),this.__infoList.length=0),0!==this.structureView.atomCount){var n=function(){t.__sele=t.selection.string,t.__surfaceParams=JSON.stringify(t.getSurfaceParams()),t.__forceNewMolsurf=!1,e()},r="default"===this.assembly?this.defaultAssembly:this.assembly,i=this.structure.biomolDict[r];i?i.partList.forEach((function(e,r){var o=e.getView(t.structureView);t.prepareData(o,r,(function(e){e===i.partList.length-1&&n()}))})):this.prepareData(this.structureView,0,n)}else e()},t.prototype.createData=function(e,t){var n=this.__infoList[t],r=n.surface,i={position:r.getPosition(),color:r.getColor(this.getColorParams()),index:r.getFilteredIndex(this.filterSele,e)},o=[];if(r.contour){var a=new jp(i,this.getBufferParams({wireframe:!1}));o.push(a)}else{Object.assign(i,{normal:r.getNormal(),picking:r.getPicking(e.getStructure())});var s=new Dp(i,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1})),l=new zp(s);o.push(l)}return{bufferList:o,info:n}},t.prototype.updateData=function(e,t){var n={};if(e.position||e.radius)return this.__forceNewMolsurf=!0,void this.build();e.color&&(n.color=t.info.surface.getColor(this.getColorParams())),e.index&&(n.index=t.info.surface.getFilteredIndex(this.filterSele,t.sview)),t.bufferList[0].setAttributes(n)},t.prototype.setParameters=function(t,n,r){return void 0===n&&(n={}),t&&t.filterSele&&(n.index=!0),t&&void 0!==t.colorVolume&&(n.color=!0),t&&t.wireframe&&(t.contour||void 0===t.contour&&this.contour)&&(t.wireframe=!1),e.prototype.setParameters.call(this,t,n,r),this},t.prototype.getSurfaceParams=function(e){return void 0===e&&(e={}),Object.assign({type:this.surfaceType,probeRadius:this.probeRadius,scaleFactor:this.scaleFactor,smooth:this.smooth&&!this.contour,cutoff:this.cutoff,contour:this.contour,useWorker:this.useWorker,radiusParams:this.getRadiusParams()},e)},t.prototype.getColorParams=function(){var t=e.prototype.getColorParams.call(this);return t.volume=this.colorVolume,t},t.prototype.getAtomRadius=function(){return 0},t.prototype.clear=function(){e.prototype.clear.call(this)},t.prototype.dispose=function(){this.__infoList.forEach((function(e){e.molsurf.dispose()})),this.__infoList.length=0,e.prototype.dispose.call(this)},t}(Pv);ml.add("surface",Uy);var Vy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="point",this.parameters=Object.assign({pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{flatShaded:null,wireframe:null,linewidth:null,side:null,roughness:null,metalness:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};this.pointSize=Sa(n.pointSize,1),this.sizeAttenuation=Sa(n.sizeAttenuation,!0),this.sortParticles=Sa(n.sortParticles,!1),this.useTexture=Sa(n.useTexture,!1),this.alphaTest=Sa(n.alphaTest,.5),this.forceTransparent=Sa(n.forceTransparent,!1),this.edgeBleach=Sa(n.edgeBleach,0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){var t=e.getAtomData(this.getAtomParams({position:!0,color:!0,picking:!0}));return{bufferList:[new Ym(t,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach}))]}},t.prototype.updateData=function(e,t){var n=t.sview.getAtomData(this.getAtomParams(e)),r={};e&&!e.position||Object.assign(r,{position:n.position}),e&&!e.color||Object.assign(r,{color:n.color}),t.bufferList[0].setAttributes(r)},t.prototype.getAtomRadius=function(){return.1},t}(Pv);ml.add("point",Vy),vl.add("shader/Ribbon.vert","#define STANDARD\nuniform float clipNear;\nuniform vec3 clipCenter;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\nattribute vec3 dir;\nattribute float size;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#endif\n#include common\nvoid main(void){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#include beginnormal_vertex\n#include defaultnormal_vertex\n#ifndef FLAT_SHADED\nvNormal = normalize( transformedNormal );\n#endif\n#endif\n#include begin_vertex\ntransformed += normalize( dir ) * size;\n#include project_vertex\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}");var Gy=new Uint16Array([0,1,2,1,3,2]);function Wy(e){return 3*(4*(e.position.length/3-1))}var $y=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(Wy(t)),color:new Float32Array(Wy(t)),index:za(Wy(t),Wy(t)/3),normal:new Float32Array(Wy(t)),picking:t.picking},n),this.vertexShader="Ribbon.vert";var r=t.position.length/3-1,i=4*r,o=3*i;this.addAttributes({dir:{type:"v3",value:new Float32Array(o)}}),this.addAttributes({size:{type:"f",value:new Float32Array(i)}}),t.primitiveId=sc(r),this.setAttributes(t),this.makeIndex()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(e){void 0===e&&(e={});var t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x=this.size/4,w=this.geometry.attributes;e.position&&(t=e.position,s=w.position.array,w.position.needsUpdate=!0),e.normal&&(n=e.normal,l=w.normal.array,w.normal.needsUpdate=!0),e.size&&(r=e.size,c=w.size.array,w.size.needsUpdate=!0),e.dir&&(i=e.dir,u=w.dir.array,w.dir.needsUpdate=!0),e.color&&(o=e.color,d=w.color.array,w.color.needsUpdate=!0),e.primitiveId&&(a=e.primitiveId,f=w.primitiveId.array,w.primitiveId.needsUpdate=!0);var _=r?r[0]:null;for(p=0;p<x;++p){for(y=3*p,m=3*p*4,v=4*p,t&&(s[m]=s[m+3]=t[y],s[m+1]=s[m+4]=t[y+1],s[m+2]=s[m+5]=t[y+2],s[m+6]=s[m+9]=t[y+3],s[m+7]=s[m+10]=t[y+4],s[m+8]=s[m+11]=t[y+5]),n&&(l[m]=l[m+3]=-n[y],l[m+1]=l[m+4]=-n[y+1],l[m+2]=l[m+5]=-n[y+2],l[m+6]=l[m+9]=-n[y+3],l[m+7]=l[m+10]=-n[y+4],l[m+8]=l[m+11]=-n[y+5]),h=0;h<4;++h)g=m+3*h,o&&(d[g]=o[y],d[g+1]=o[y+1],d[g+2]=o[y+2]),a&&(f[v+h]=a[p]);r&&(b=r[p],_!==r[p]?(c[v]=_,c[v+1]=_,c[v+2]=b,c[v+3]=b):(c[v]=b,c[v+1]=b,c[v+2]=b,c[v+3]=b),_=b),i&&(u[m]=i[y],u[m+1]=i[y+1],u[m+2]=i[y+2],u[m+3]=-i[y],u[m+4]=-i[y+1],u[m+5]=-i[y+2],u[m+6]=i[y+3],u[m+7]=i[y+4],u[m+8]=i[y+5],u[m+9]=-i[y+3],u[m+10]=-i[y+4],u[m+11]=-i[y+5])}},t.prototype.makeIndex=function(){for(var e=this.geometry.getIndex().array,t=e.length/4/3,n=0;n<t;++n){var r=6*n,i=4*n;e.set(Gy,r);for(var o=0;o<6;++o)e[r+o]+=i}},t}(Lp),qy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="ribbon",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{side:null,wireframe:null,linewidth:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"chainname"),n.colorScale=Sa(n.colorScale,"RdYlBu"),n.radiusType=Sa(n.radiusType,"sstruc"),n.radiusScale=Sa(n.radiusScale,4),"low"===n.quality?this.subdiv=3:"medium"===n.quality?this.subdiv=6:"high"===n.quality?this.subdiv=12:this.subdiv=Sa(n.subdiv,6),this.tension=Sa(n.tension,NaN),this.smoothSheet=Sa(n.smoothSheet,!1),e.prototype.init.call(this,n)},t.prototype.getSplineParams=function(e){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!0,smoothSheet:this.smoothSheet},e)},t.prototype.getAtomRadius=function(t){return t.isTrace()?e.prototype.getAtomRadius.call(this,t):0},t.prototype.createData=function(e){var t=this,n=[],r=[];return this.structure.eachPolymer((function(e){if(!(e.residueCount<4)){r.push(e);var i=new fy(e,t.getSplineParams()),o=i.getSubdividedPosition(),a=i.getSubdividedOrientation(),s=i.getSubdividedColor(t.getColorParams()),l=i.getSubdividedPicking(),c=i.getSubdividedSize(t.getRadiusParams());n.push(new $y({position:o.position,normal:a.binormal,dir:a.normal,color:s.color,size:c.size,picking:l.picking},t.getBufferParams()))}}),e.getSelection()),{bufferList:n,polymerList:r}},t.prototype.updateData=function(e,t){var n=this;e=e||{};var r=0,i=t.polymerList.length;for(r=0;r<i;++r){var o={},a=new fy(t.polymerList[r],n.getSplineParams());if(e.position){var s=a.getSubdividedPosition(),l=a.getSubdividedOrientation();Object.assign(o,{position:s.position,normal:l.binormal,dir:l.normal})}if(e.radius||e.scale){var c=a.getSubdividedSize(n.getRadiusParams());Object.assign(o,{size:c.size})}if(e.color){var u=a.getSubdividedColor(n.getColorParams());Object.assign(o,{color:u.color})}t.bufferList[r].setAttributes(o)}},t.prototype.setParameters=function(t){var n={};return t&&t.tension&&Object.assign(n,{position:!0}),e.prototype.setParameters.call(this,t,n,!1),this},t}(Pv);ml.add("ribbon",qy);var Yy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="rocket",this.parameters=Object.assign({localAngle:{type:"integer",max:180,min:0,rebuild:!0},centerDist:{type:"number",precision:1,max:10,min:0,rebuild:!0},ssBorder:{type:"boolean",rebuild:!0},radialSegments:!0,openEnded:!0,disableImpostor:!0},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"sstruc"),n.radiusSize=Sa(n.radiusSize,1.5),n.radiusScale=Sa(n.radiusScale,1),n.openEnded=Sa(n.openEnded,!1),n.useInteriorColor=Sa(n.useInteriorColor,!0),this.localAngle=Sa(n.localAngle,30),this.centerDist=Sa(n.centerDist,2.5),this.ssBorder=Sa(n.ssBorder,!1),e.prototype.init.call(this,n)},t.prototype.createData=function(e){var t=this,n=0,r=[],i=[];this.structure.eachPolymer((function(e){if(!(e.residueCount<4||e.isNucleic())){var o=new xh(e),a=o.getAxis(t.localAngle,t.centerDist,t.ssBorder,t.getColorParams(),t.getRadiusParams());n+=a.size.length,r.push(a),i.push(o)}}),e.getSelection());var o={begin:new Float32Array(3*n),end:new Float32Array(3*n),size:new Float32Array(n),color:new Float32Array(3*n),picking:{}},a=new Float32Array(n),s=0;return r.forEach((function(e){o.begin.set(e.begin,3*s),o.end.set(e.end,3*s),o.size.set(e.size,s),o.color.set(e.color,3*s),a.set(e.picking.array,s),s+=e.size.length})),n&&(o.picking=new Pf(a,e.getStructure())),{bufferList:[new ay({position1:o.begin,position2:o.end,color:o.color,color2:o.color,radius:o.size,picking:o.picking},this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))],axisList:r,helixbundleList:i,axisData:o}},t.prototype.updateData=function(e,t){var n=this;if((e=e||{}).position)this.build();else{var r={};if(e.color||e.radius){var i=0;t.helixbundleList.forEach((function(r){var o=r.getAxis(n.localAngle,n.centerDist,n.ssBorder,n.getColorParams(),n.getRadiusParams());e.color&&t.axisData.color.set(o.color,3*i),(e.radius||e.scale)&&t.axisData.size.set(o.size,i),i+=o.size.length})),e.color&&Object.assign(r,{color:t.axisData.color,color2:t.axisData.color}),(e.radius||e.scale)&&Object.assign(r,{radius:t.axisData.size})}t.bufferList[0].setAttributes(r)}},t}(Pv);ml.add("rocket",Yy);var Xy=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="rope",this.parameters=Object.assign({smooth:{type:"integer",max:15,min:0,rebuild:!0}},this.parameters,{aspectRatio:null,smoothSheet:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=1,n.tension=Sa(n.tension,.5),n.radiusScale=Sa(n.radiusScale,5),n.smoothSheet=!1,this.smooth=Sa(n.smooth,2),e.prototype.init.call(this,n)},t.prototype.getSpline=function(e){var t=new bh(e);return new fy(e,this.getSplineParams({directional:!1,positionIterator:t.getCenterIterator(this.smooth)}))},t}(vy);ml.add("rope",Xy);var Ky=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="spacefill",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.useInteriorColor=Sa(n.useInteriorColor,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){return{bufferList:[new Gm(e.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,dullInterior:!0,disableImpostor:this.disableImpostor}))]}},t.prototype.updateData=function(e,t){var n=t.sview.getAtomData(this.getAtomParams(e)),r={};e&&!e.position||Object.assign(r,{position:n.position}),e&&!e.color||Object.assign(r,{color:n.color}),e&&!e.radius||Object.assign(r,{radius:n.radius}),t.bufferList[0].setAttributes(r)},t}(Pv);function Jy(e){return 3*(e.position.length/3-1)*2}ml.add("spacefill",Ky);var Qy=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(Jy(t)),color:new Float32Array(Jy(t))},n),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag",this.setAttributes(t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(e){var t,n,r,i,o=this.geometry.attributes;if(e.position&&(t=e.position,r=o.position.array,o.position.needsUpdate=!0),e.color&&(n=e.color,i=o.color.array,o.color.needsUpdate=!0),t||n)for(var a,s,l=this.size-1,c=0;c<l;++c)a=3*c,s=3*c*2,t&&(r[s]=t[a],r[s+1]=t[a+1],r[s+2]=t[a+2],r[s+3]=t[a+3],r[s+4]=t[a+4],r[s+5]=t[a+5]),n&&(i[s]=n[a],i[s+1]=n[a+1],i[s+2]=n[a+2],i[s+3]=n[a+3],i[s+4]=n[a+4],i[s+5]=n[a+5]);else rl.warn("TraceBuffer.prototype.setAttributes no data")},t}(Op),eb=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="trace",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorScheme=Sa(n.colorScheme,"chainname"),n.colorScale=Sa(n.colorScale,"RdYlBu"),"low"===n.quality?this.subdiv=3:"medium"===n.quality?this.subdiv=6:"high"===n.quality?this.subdiv=12:this.subdiv=Sa(n.subdiv,6),this.tension=Sa(n.tension,NaN),this.smoothSheet=Sa(n.smoothSheet,!1),e.prototype.init.call(this,n)},t.prototype.getSplineParams=function(e){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!1,smoothSheet:this.smoothSheet},e)},t.prototype.getAtomRadius=function(e){return e.isTrace()?.1:0},t.prototype.createData=function(e){var t=this,n=[],r=[];return this.structure.eachPolymer((function(e){if(!(e.residueCount<4)){r.push(e);var i=new fy(e,t.getSplineParams()),o=i.getSubdividedPosition(),a=i.getSubdividedColor(t.getColorParams());n.push(new Qy(Object.assign({},o,a),t.getBufferParams()))}}),e.getSelection()),{bufferList:n,polymerList:r}},t.prototype.updateData=function(e,t){e=e||{};var n=0,r=t.polymerList.length;for(n=0;n<r;++n){var i={},o=new fy(t.polymerList[n],this.getSplineParams());if(e.position){var a=o.getSubdividedPosition();Object.assign(i,{position:a.position})}if(e.color){var s=o.getSubdividedColor(this.getColorParams());Object.assign(i,{color:s.color})}t.bufferList[n].setAttributes(i)}},t.prototype.setParameters=function(t){var n={};return t&&t.tension&&Object.assign(n,{position:!0}),e.prototype.setParameters.call(this,t,n,!1),this},t}(Pv);ml.add("trace",eb);var tb=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="tube",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.aspectRatio=1,n.radiusScale=Sa(n.radiusScale,2),"low"===n.quality&&(this.radialSegments=5),e.prototype.init.call(this,n)},t.prototype.getSplineParams=function(){return e.prototype.getSplineParams.call(this,{directional:!1})},t}(vy);ml.add("tube",tb);var nb=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="unitcell",this.parameters=Object.assign({radiusSize:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0},this.parameters,{assembly:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{},r=.5;this.structure.unitcell&&(r=Math.cbrt(this.structure.unitcell.volume)/200),n.radiusSize=Sa(n.radiusSize,r),n.colorValue=Sa(n.colorValue,"orange"),n.useInteriorColor=Sa(n.useInteriorColor,!0),e.prototype.init.call(this,n)},t.prototype.getUnitcellData=function(e){return e.unitcell.getData(e)},t.prototype.create=function(){var e=this.structureView.getStructure();if(e.unitcell){var t=this.getUnitcellData(e);this.sphereBuffer=new Gm(t.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new ay(t.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})}},t.prototype.createData=function(e){},t.prototype.updateData=function(e,t){var n=t.sview.getStructure();if(n.unitcell){var r=this.getUnitcellData(n),i={},o={};e&&!e.position||(Object.assign(i,{position:r.vertex.position}),Object.assign(o,{position1:r.edge.position1,position2:r.edge.position2})),e&&!e.color||(Object.assign(i,{color:r.vertex.color}),Object.assign(o,{color:r.edge.color,color2:r.edge.color2})),e&&!e.radius||(Object.assign(i,{radius:r.vertex.radius}),Object.assign(o,{radius:r.edge.radius})),this.sphereBuffer.setAttributes(i),this.cylinderBuffer.setAttributes(o)}},t}(Pv);ml.add("unitcell",nb);var rb=function(e){function t(t,n,r){e.call(this,t,n,r),this.type="validation",this.parameters=Object.assign({},this.parameters,{radiusType:null,radiusSize:null,radiusScale:null}),this.init(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(t){var n=t||{};n.colorValue=Sa(n.colorValue,"#f0027f"),n.useInteriorColor=Sa(n.useInteriorColor,!0),e.prototype.init.call(this,n)},t.prototype.createData=function(e){if(e.validation){var t=e.validation.getClashData({structure:e,color:this.colorValue});return{bufferList:[new ay(t,this.getBufferParams({openEnded:!1}))]}}},t}(Pv);ml.add("validation",rb);var ib=new H,ob=new H,ab=new H,sb=new H(0,1,0);var lb=Object.assign({radialSegments:60,openEnded:!1},Pp),cb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,{position:new Float32Array(t.position1.length),color:t.color,picking:t.picking},n,function(e){void 0===e&&(e={});var t=new ri(1,1,Sa(e.radialSegments,60),1,Sa(e.openEnded,!1));return t.applyMatrix((new j).makeRotationX(-Math.PI/2)),t}(n)),this.updateNormals=!0,this._position=new Float32Array(t.position1.length),this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return lb},t.prototype.applyPositionTransform=function(e,t,n){ob.fromArray(this._position1,n),ab.fromArray(this._position2,n),e.lookAt(ob,ab,sb);var r=this._radius[t];ib.set(r,r,ob.distanceTo(ab)),e.scale(ib)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.position1&&t.position2&&(rc(t.position1,t.position2,this._position),this._position1=t.position1,this._position2=t.position2,t.position=this._position),t.radius&&(this._radius=t.radius),e.prototype.setAttributes.call(this,t,n)},Object.defineProperties(t.prototype,n),t}(Nm);xl.add("cone",cb);var ub=function(e){void 0===e&&(e=[]),this.geometryList=e};ub.prototype.computeBoundingBox=function(){var e=this;this.boundingBox?this.boundingBox.empty():this.boundingBox=new K,this.geometryList.forEach((function(t){t.boundingBox||t.computeBoundingBox(),e.boundingBox.union(t.boundingBox)}))};var db=Object.assign({aspectRatio:1.5,radialSegments:50,openEnded:!1,disableImpostor:!1},Pp),fb=function(e,t){void 0===t&&(t={}),this.group=new wn,this.wireframeGroup=new wn,this.pickingGroup=new wn,this.visible=!0,this.parameters=Ca(t,this.defaultParameters),this.splitPosition=new Float32Array(e.position1.length),this.cylinderRadius=new Float32Array(e.radius.length);var n=this.makeAttributes(e),r={radialSegments:this.parameters.radialSegments,openEnded:this.parameters.openEnded,disableImpostor:this.parameters.disableImpostor};this.cylinderBuffer=new ay(n.cylinder,r),this.coneBuffer=new cb(n.cone,r),this.geometry=new ub([this.cylinderBuffer.geometry,this.coneBuffer.geometry]),this.matrix=Sa(t.matrix,new j),this.picking=e.picking},pb={defaultParameters:{configurable:!0},matrix:{configurable:!0},pickable:{configurable:!0}};pb.defaultParameters.get=function(){return db},pb.matrix.set=function(e){Op.prototype.setMatrix.call(this,e)},pb.matrix.get=function(){return this.group.matrix.clone()},pb.pickable.get=function(){return!!this.picking},fb.prototype.makeAttributes=function(e){void 0===e&&(e={});var t,n,r=this.splitPosition,i=this.cylinderRadius,o=this.parameters.aspectRatio,a={},s={};if(e.radius){for(t=0,n=i.length;t<n;++t)i[t]=e.radius[t]/o;a.radius=i,s.radius=e.radius}if(e.position1&&e.position2){var l=new H,c=new H,u=new H,d=new H;for(t=0,n=r.length;t<n;t+=3){l.fromArray(e.position1,t),c.fromArray(e.position2,t),u.subVectors(l,c);var f=u.length(),p=i[t/3]*o*2,h=Math.min(f,p);u.setLength(h),d.copy(c).add(u),d.toArray(r,t)}a.position1=e.position1,a.position2=r,s.position1=r,s.position2=e.position2}return e.color&&(a.color=e.color,a.color2=e.color,s.color=e.color),{cylinder:a,cone:s}},fb.prototype.getMesh=function(){return(new wn).add(this.cylinderBuffer.getMesh(),this.coneBuffer.getMesh())},fb.prototype.getWireframeMesh=function(){return(new wn).add(this.cylinderBuffer.getWireframeMesh(),this.coneBuffer.getWireframeMesh())},fb.prototype.getPickingMesh=function(){return(new wn).add(this.cylinderBuffer.getPickingMesh(),this.coneBuffer.getPickingMesh())},fb.prototype.setAttributes=function(e){void 0===e&&(e={});var t=this.makeAttributes(e);this.cylinderBuffer.setAttributes(t.cylinder),this.coneBuffer.setAttributes(t.cone)},fb.prototype.setParameters=function(e){void 0===e&&(e={}),(e=Object.assign({},e))&&void 0!==e.matrix&&(this.matrix=e.matrix),delete e.matrix,e&&void 0!==e.wireframe&&(this.parameters.wireframe=e.wireframe,this.setVisibility(this.visible)),this.cylinderBuffer.setParameters(e),this.coneBuffer.setParameters(e)},fb.prototype.setVisibility=function(e){Op.prototype.setVisibility.call(this,e)},fb.prototype.dispose=function(){this.cylinderBuffer.dispose(),this.coneBuffer.dispose()},Object.defineProperties(fb.prototype,pb),xl.add("arrow",fb);var hb=new H,mb=new H,gb=new H,vb=new H(0,0,0),yb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new Le(1,1,1)),this.updateNormals=!0,this.setAttributes(t,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(e,t,n){mb.fromArray(this._heightAxis,n),gb.fromArray(this._depthAxis,n),e.lookAt(vb,mb,gb),hb.set(this._size[t],gb.length(),mb.length()),e.scale(hb)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),e.prototype.setAttributes.call(this,t,n)},t}(Nm);xl.add("box",yb);var bb=new H,xb=new H,wb=new H,_b=new H(0,0,0),Sb=Object.assign({sphereDetail:2},Pp),Cb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new ir(1,Sa(n.sphereDetail,2))),this.updateNormals=!0,this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Sb},t.prototype.applyPositionTransform=function(e,t,n){xb.fromArray(this._majorAxis,n),wb.fromArray(this._minorAxis,n),e.lookAt(_b,xb,wb),bb.set(this._radius[t],wb.length(),xb.length()),e.scale(bb)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.radius&&(this._radius=t.radius),t.majorAxis&&(this._majorAxis=t.majorAxis),t.minorAxis&&(this._minorAxis=t.minorAxis),e.prototype.setAttributes.call(this,t,n)},Object.defineProperties(t.prototype,n),t}(Nm);xl.add("ellipsoid",Cb);var kb=new H,Mb=new H,Tb=new H,Ab=new H(0,0,0),Eb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new nr(1,0)),this.updateNormals=!0,this.setAttributes(t,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(e,t,n){Mb.fromArray(this._heightAxis,n),Tb.fromArray(this._depthAxis,n),e.lookAt(Ab,Mb,Tb),kb.set(this._size[t],Tb.length(),Mb.length()),e.scale(kb)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),e.prototype.setAttributes.call(this,t,n)},t}(Nm);xl.add("octahedron",Eb);var Pb=new H,Rb=new H,Ob=new H,Ib=new H(0,0,0),Lb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new er(1,0)),this.updateNormals=!0,this.setAttributes(t,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(e,t,n){Rb.fromArray(this._heightAxis,n),Ob.fromArray(this._depthAxis,n),e.lookAt(Ib,Rb,Ob),Pb.set(this._size[t],Ob.length(),Rb.length()),e.scale(Pb)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),e.prototype.setAttributes.call(this,t,n)},t}(Nm);xl.add("tetrahedron",Lb);var Db=new H,Nb=new H,Fb=new H,zb=new H(0,0,0),Bb=Object.assign({radiusRatio:.2,radialSegments:16,tubularSegments:32},Pp),jb=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,t,n,new fr(1,Sa(n.radiusRatio,.2),Sa(n.radialSegments,16),Sa(n.tubularSegments,32))),this.updateNormals=!0,this.setAttributes(t,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Bb},t.prototype.applyPositionTransform=function(e,t,n){Nb.fromArray(this._majorAxis,n),Fb.fromArray(this._minorAxis,n),e.lookAt(zb,Nb,Fb);var r=this._radius[t];Db.set(r,r,r),e.scale(Db)},t.prototype.setAttributes=function(t,n){void 0===t&&(t={}),t.radius&&(this._radius=t.radius),t.majorAxis&&(this._majorAxis=t.majorAxis),t.minorAxis&&(this._minorAxis=t.minorAxis),e.prototype.setAttributes.call(this,t,n)},Object.defineProperties(t.prototype,n),t}(Nm);xl.add("torus",jb);var Zb=function(e,t){var n=t||{};this.streamer=e,this.name=Sa(n.name,""),this.path=Sa(n.path,"")},Hb={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0},isJson:{configurable:!0},isXml:{configurable:!0}};Hb.type.get=function(){return""},Hb.__objName.get=function(){return""},Hb.isBinary.get=function(){return!1},Hb.isJson.get=function(){return!1},Hb.isXml.get=function(){return!1},Zb.prototype.parse=function(){var e=this;return this.streamer.read().then((function(){return e._beforeParse(),e._parse(),e._afterParse(),e[e.__objName]}))},Zb.prototype._parse=function(){},Zb.prototype._beforeParse=function(){},Zb.prototype._afterParse=function(){sl&&rl.log(this[this.__objName])},Object.defineProperties(Zb.prototype,Hb);var Ub=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.firstModelOnly=Sa(r.firstModelOnly,!1),this.asTrajectory=Sa(r.asTrajectory,!1),this.cAlphaOnly=Sa(r.cAlphaOnly,!1),this.structure=new Mm(this.name,this.path),this.structureBuilder=new Fh(this.structure)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"structure"},n.__objName.get=function(){return"structure"},Object.defineProperties(t.prototype,n),t}(Zb);var Vb=function(e,t,n,r,i){void 0===n&&(n=""),void 0===i&&(i=[]),this.structure=e,this.index=t,this.description=n,this.entityType=function(e){switch(e=e.toLowerCase()){case"polymer":return 1;case"non-polymer":return 2;case"macrolide":return 3;case"water":return 4;default:return 0}}(r||""),this.chainIndexList=i,i.forEach((function(n){e.chainStore.entityIndex[n]=t}))},Gb={type:{configurable:!0}};Gb.type.get=function(){return function(e){switch(e){case 1:return"polymer";case 2:return"non-polymer";case 3:return"macrolide";case 4:return"water";default:return}}(this.entityType)},Vb.prototype.getEntityType=function(){return this.entityType},Vb.prototype.isPolymer=function(){return 1===this.entityType},Vb.prototype.isNonPolymer=function(){return 2===this.entityType},Vb.prototype.isMacrolide=function(){return 3===this.entityType},Vb.prototype.isWater=function(){return 4===this.entityType},Vb.prototype.eachChain=function(e){var t=this.structure.getChainProxy();this.chainIndexList.forEach((function(n){t.index=n,e(t)}))},Object.defineProperties(Vb.prototype,Gb);var Wb={a:1,b:1,c:1,alpha:90,beta:90,gamma:90,spacegroup:"P 1"},$b=function(e){void 0===e&&(e=Wb),this.cartToFrac=new j,this.fracToCart=new j,this.a=e.a,this.b=e.b,this.c=e.c,this.alpha=e.alpha,this.beta=e.beta,this.gamma=e.gamma,this.spacegroup=e.spacegroup;var t=qa(this.alpha),n=qa(this.beta),r=qa(this.gamma),i=Math.cos(t),o=Math.cos(n),a=Math.cos(r),s=Math.sin(n),l=Math.sin(r);if(this.volume=this.a*this.b*this.c*Math.sqrt(1-i*i-o*o-a*a+2*i*o*a),void 0===e.cartToFrac){var c=this.a*this.b*l/this.volume,u=(o*a-i)/(s*l);this.fracToCart.set(this.a,0,0,0,this.b*a,this.b*l,0,0,this.c*o,-this.c*s*u,1/c,0,0,0,0,1).transpose(),this.cartToFrac.getInverse(this.fracToCart)}else this.cartToFrac.copy(e.cartToFrac),this.fracToCart.getInverse(this.cartToFrac)};$b.prototype.getPosition=function(e){var t=new Float32Array(24);if(e.unitcell){var n=e.unitcell,r=e.center.clone().applyMatrix4(n.cartToFrac).floor(),i=new H,o=0,a=function(e,a,s){i.set(e,a,s).add(r).applyMatrix4(n.fracToCart).toArray(t,o),o+=3};a(0,0,0),a(1,0,0),a(0,1,0),a(0,0,1),a(1,1,0),a(1,0,1),a(0,1,1),a(1,1,1)}return t},$b.prototype.getCenter=function(e){return function(e,t){void 0===t&&(t=new H);for(var n=e.length,r=0;r<n;r+=3)t.x+=e[r],t.y+=e[r+1],t.z+=e[r+2];return t.divideScalar(n/3),t}(this.getPosition(e))},$b.prototype.getData=function(e,t){void 0===t&&(t={});var n=Sa(t.colorValue,"orange"),r=Sa(t.radius,Math.cbrt(this.volume)/200),i=new ie(n),o=new H,a=this.getPosition(e),s=ac(8,i.r,i.g,i.b),l=oc(8,r),c=new Float32Array(36),u=new Float32Array(36),d=ac(12,i.r,i.g,i.b),f=oc(12,r),p=0;function h(e,t){o.fromArray(a,3*e).toArray(c,p),o.fromArray(a,3*t).toArray(u,p),p+=3}h(0,1),h(0,2),h(0,3),h(1,4),h(1,5),h(2,6),h(3,5),h(4,7),h(5,7),h(2,4),h(7,6),h(3,6);var m=new Wf(this,e);return{vertex:{position:a,color:s,radius:l,picking:m},edge:{position1:c,position2:u,color:d,color2:d,radius:f,picking:m}}};var qb={1:"h",2:"h",3:"i",4:"h",5:"g",6:"h",7:"h",8:"h",9:"h",10:"h",0:"h"},Yb=["DAL","DAR","DSG","DAS","DCY","DGL","DGN","DHI","DIL","DLE","DLY","MED","DPN","DPR","DSN","DTH","DTR","DTY","DVA","DNE"],Xb=["MOL_ID","MOLECULE","CHAIN","FRAGMENT","SYNONYM","EC","ENGINEERED","MUTATION","OTHER_DETAILS"],Kb=/\s+/;function Jb(e,t,n){var r=""+e;return t&&(r+=":"+t),n&&(r+="^"+n),r}var Qb=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.hex=Sa(r.hex,!1)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pdb"},t.prototype._parse=function(){sl&&rl.time("PdbParser._parse "+this.name);var e=!1,t=this.streamer.peekLines(1)[0],n=t.substr(62,4),r=t.substr(72,4);n===r&&r.trim()&&(e=!0);var i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C,k,M,T,A,E,P,R,O,I,L,D,N,F="pqr"===this.type,z="pdbqt"===this.type,B=this.structure,Z=this.structureBuilder,H=this.hex,U=10,V=10,G=this.firstModelOnly,W=this.asTrajectory,$=this.cAlphaOnly,q=B.frames,Y=B.boxes,X=!1,K=B.biomolDict,J={},Q={},ee={},te=[],ne={},re={},ie={},oe={},ae={helices:[],sheets:[]},se=ae.helices,le=ae.sheets,ce=B.atomMap,ue=B.atomStore;ue.resize(Math.round(this.streamer.data.length/80)),(F||z)&&ue.addField("partialCharge",1,"float32"),F&&ue.addField("radius",1,"float32");var de=B.getAtomProxy(),fe=B.getAtomProxy(),pe=0,he=0,me=!0;this.streamer.eachChunkOfLines((function(t){!function(t,n,r){for(var ae,ge=t;ge<n;++ge)if(c=r[ge],"ATOM  "===(u=c.substr(0,6))||"HETATM"===u){if(me&&(W?(X?(i=new Float32Array(3*ue.count),q.push(i)):i=[],o=0):G||(J={}),P=(E=1).toString(),R=!0,me=!1),G&&he>0)continue;var ve=void 0,ye=void 0,be=void 0,xe=void 0,we=void 0;if(F){if(we=10===(xe=c.split(Kb)).length?1:0,v=xe[2],$&&"CA"!==v)continue;ve=parseFloat(xe[6-we]),ye=parseFloat(xe[7-we]),be=parseFloat(xe[8-we])}else{if(v=c.substr(12,4).trim(),$&&"CA"!==v)continue;ve=parseFloat(c.substr(30,8)),ye=parseFloat(c.substr(38,8)),be=parseFloat(c.substr(46,8))}if(W){var _e=3*o;if(i[_e+0]=ve,i[_e+1]=ye,i[_e+2]=be,o+=1,X)continue}var Se=void 0;F?(d=parseInt(xe[1]),Se="",y="H"===c[0]?1:0,f=we?"":xe[4],p=parseInt(xe[5-we]),g="",h=xe[3],x="",m=1):(d=parseInt(c.substr(6,5),U),H&&99999===d&&(U=16),y="H"===c[0]?1:0,f=c[21].trim(),p=parseInt(c.substr(22,4),V),H&&9999===p&&(V=16),g=c[26].trim(),h=c.substr(17,4).trim()||"MOL",b=parseFloat(c.substr(60,6)),x=c[16].trim(),m=parseFloat(c.substr(54,6)),e||(z?Se=c.substr(12,2).trim():(Se=c.substr(76,2).trim(),f||(f=c.substr(72,4).trim())))),ue.growIfFull(),ue.atomTypeId[pe]=ce.add(v,Se),ue.x[pe]=ve,ue.y[pe]=ye,ue.z[pe]=be,ue.serial[pe]=d,ue.altloc[pe]=x.charCodeAt(0),ue.occupancy[pe]=isNaN(m)?0:m,F?(ue.partialCharge[pe]=parseFloat(xe[9-we]),ue.radius[pe]=parseFloat(xe[10-we])):(ue.bfactor[pe]=isNaN(b)?0:b,z&&(ue.partialCharge[pe]=parseFloat(c.substr(70,6))));var Ce=Jb(p,f,g);!y||re[Ce]||Yb.includes(h)?R||O===f||(P=(E+=1).toString()):O===f&&L===h&&(Gd.includes(h)||I===p&&D===g)||(P=(E+=1).toString(),I=p,L=h,D=g),Z.addAtom(he,f,P,h,p,y,void 0,g),J[d]=pe,pe+=1,R=!1,O=f}else if("CONECT"===u){var ke=J[parseInt(c.substr(6,5))],Me=[11,16,21,26],Te={};if(void 0===ke)continue;for(var Ae=0;Ae<4;++Ae){var Ee=parseInt(c.substr(Me[Ae],5));if(!Number.isNaN(Ee)&&void 0!==(Ee=J[Ee]))if(ke<Ee?(de.index=ke,fe.index=Ee):(de.index=Ee,fe.index=ke),void 0!==Te[Ee])B.bondStore.bondOrder[Te[Ee]]+=1;else{var Pe=de.index+"|"+fe.index;void 0===ee[Pe]&&(ee[Pe]=!0,Te[Ee]=B.bondStore.count,B.bondStore.addBond(de,fe,1))}}}else if("HELIX "===u){w=c[19].trim(),_=parseInt(c.substr(21,4)),S=c[25].trim(),C=c[31].trim(),k=parseInt(c.substr(33,4)),M=c[37].trim();var Re=parseInt(c.substr(39,1));Re=(qb[Re]||qb[0]).charCodeAt(0),se.push([w,_,S,C,k,M,Re])}else if("SHEET "===u)w=c[21].trim(),_=parseInt(c.substr(22,4)),S=c[26].trim(),C=c[32].trim(),k=parseInt(c.substr(33,4)),M=c[37].trim(),le.push([w,_,S,C,k,M]);else if("HETNAM"===u)ne[c.substr(11,3)]=c.substr(15).trim();else if("SEQRES"===u){var Oe=c[11].trim();Oe!==N&&(oe[Oe]=[],N=Oe),(ae=oe[Oe]).push.apply(ae,c.substr(19).trim().split(Kb))}else if("MODRES"===u){var Ie=c.substr(12,3).trim(),Le=c[16].trim(),De=c[22].trim(),Ne=parseInt(c.substr(18,4).trim()),Fe=Jb(Ne,Le,De);re[Fe]={resname:Ie,chainname:Le,inscode:De,resno:Ne}}else if("COMPND"===u){var ze=c.substr(10,70).trim(),Be=ze.indexOf(":"),je=ze.substring(0,Be),Ze=void 0;Xb.includes(je)?(A=je,Ze=ze.substring(Be+2)):Ze=ze,Ze=Ze.replace(/;$/,""),"MOL_ID"===A?(T={chainList:[],name:""},te.push(T)):"MOLECULE"===A?(T.name&&(T.name+=" "),T.name+=Ze):"CHAIN"===A&&Array.prototype.push.apply(T.chainList,Ze.split(/\s*,\s*/))}else if(c.startsWith("TER")){var He=B.getChainProxy(B.chainStore.count-1);ie[He.chainname]=He.index,P=(E+=1).toString(),R=!0}else if("REMARK"===u&&"350"===c.substr(7,3)){if("BIOMOLECULE:"===c.substr(11,12)){var Ue=c.substr(23).trim();/^(0|[1-9][0-9]*)$/.test(Ue)&&(Ue="BU"+Ue),a=new Ih(Ue),K[Ue]=a}else if("BIOMT"===c.substr(13,5)){var Ve=c.split(/\s+/),Ge=parseInt(c[18])-1;0===Ge&&(l=new j,s.matrixList.push(l));var We=l.elements;We[0+Ge]=parseFloat(Ve[4]),We[4+Ge]=parseFloat(Ve[5]),We[8+Ge]=parseFloat(Ve[6]),We[12+Ge]=parseFloat(Ve[7])}else if("APPLY THE FOLLOWING TO CHAINS:"===c.substr(11,30)||"                   AND CHAINS:"===c.substr(11,30)){"APPLY"===c.substr(11,5)&&(s=a.addPart());for(var $e=c.substr(41,30).split(","),qe=0,Ye=$e.length;qe<Ye;++qe){var Xe=$e[qe].trim();Xe&&s.chainList.push(Xe)}}}else if("HEADER"===u)B.id=c.substr(62,4);else if("TITLE "===u)B.title+=(B.title?" ":"")+c.substr(10,70).trim();else if("MODEL "===u)me=!0;else if("ENDMDL"===u||"END"===c.trim()){if(me)continue;W&&!X&&(q.push(new Float32Array(i)),X=!0),he+=1,me=!0}else if("MTRIX"===c.substr(0,5)){if("1"===c[59])continue;a&&"NCS"===a.name||(a=new Ih("NCS"),K.NCS=a,s=a.addPart());var Ke=c.split(/\s+/),Je=parseInt(c[5])-1;0===Je&&(l=new j,s.matrixList.push(l));var Qe=l.elements;Qe[0+Je]=parseFloat(Ke[2]),Qe[4+Je]=parseFloat(Ke[3]),Qe[8+Je]=parseFloat(Ke[4]),Qe[12+Je]=parseFloat(Ke[5])}else if("ORIGX"===c.substr(0,5)){Q.origx||(Q.origx=new j);var et=c.split(/\s+/),tt=parseInt(c[5])-1,nt=Q.origx.elements;nt[0+tt]=parseFloat(et[1]),nt[4+tt]=parseFloat(et[2]),nt[8+tt]=parseFloat(et[3]),nt[12+tt]=parseFloat(et[4])}else if("SCALE"===c.substr(0,5)){Q.scale||(Q.scale=new j);var rt=c.split(/\s+/),it=parseInt(c[5])-1,ot=Q.scale.elements;ot[0+it]=parseFloat(rt[1]),ot[4+it]=parseFloat(rt[2]),ot[8+it]=parseFloat(rt[3]),ot[12+it]=parseFloat(rt[4])}else if("CRYST1"===u){var at=parseFloat(c.substr(6,9)),st=parseFloat(c.substr(15,9)),lt=parseFloat(c.substr(24,9)),ct=parseFloat(c.substr(33,7)),ut=parseFloat(c.substr(40,7)),dt=parseFloat(c.substr(47,7)),ft=c.substr(55,11).trim(),pt=new Float32Array(9);pt[0]=at,pt[4]=st,pt[8]=lt,Y.push(pt),0===he&&(Q.a=at,Q.b=st,Q.c=lt,Q.alpha=ct,Q.beta=ut,Q.gamma=dt,Q.spacegroup=ft)}}(0,t.length,t)})),Z.finalize();var ge=te.length;if(ge){B.eachChain((function(e){e.entityIndex=ge})),te.forEach((function(e,t){var n=e.chainList.map((function(e){return ie[e]}));B.entityList.push(new Vb(B,t,e.name,"polymer",n))}));var ve=te.length,ye=B.getResidueProxy(),be={};B.eachChain((function(e){e.entityIndex===ge&&(ye.index=e.residueOffset,be[ye.resname]||(be[ye.resname]=[]),be[ye.resname].push(e.index))})),Object.keys(be).forEach((function(e){var t=be[e],n="non-polymer",r=ne[e]||e;Gd.includes(e)&&(r="water",n="water"),B.entityList.push(new Vb(B,ve,r,n,t)),ve+=1}))}void 0!==Q.a?B.unitcell=new $b(Q):B.unitcell=void 0,(se.length||le.length)&&zh(B,ae),B.finalizeAtoms(),e||Hh(B),Uh(B),B.finalizeBonds(),se.length||le.length||Bh(B),qh(B),sl&&rl.timeEnd("PdbParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("pdb",Qb),gl.add("pdb1",Qb),gl.add("ent",Qb);var ex=/\s+/,tx=/'((?:(?!'\s).)*)'|"((?:(?!"\s).)*)"|(\S+)/g,nx=/"/g,rx=/^['"]+|['"]+$/g;function ix(e){return!e||e[0]!==e[e.length-1]||"'"!==e[0]&&'"'!==e[0]?e:e.substring(1,e.length-1)}function ox(e,t){Array.isArray(e[t])||Object.keys(e).forEach((function(t){e[t]=[e[t]]}))}function ax(e){return"?"!==e}function sx(e,t){return ax(e)?e:t}function lx(e){switch(e.toLowerCase()){case"?":case"sing":return 1;case"doub":return 2;case"trip":return 3;case"quad":return 4}return 0}var cx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"cif"},t.prototype._parse=function(){rl.time("CifParser._parse "+this.name);var e,t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w=this.structure,_=this.structureBuilder,S=this.firstModelOnly,C=this.asTrajectory,k=this.cAlphaOnly,M=w.frames,T={},A={},E={},P=!1,R=null,O=!1,I=!1,L=!1,D=[],N=null,F=null,z=null,B=null,Z=[],U=w.atomMap,V=w.atomStore;V.resize(this.streamer.data.length/100);var G,W=0,$=0;if(this.streamer.eachChunkOfLines((function(j){!function(j,H,q){for(var Y=j;Y<H;++Y)if(n=q[Y],((r=n.trim())||P||I)&&"#"!==r[0])if("data_"===r.substring(0,5))T.data=r.substring(5).trim();else if(";"===r[0])P?(I?(N===D.length&&(N=0),D[N].push(R),N+=1):!1===z?T[F]=R:T[F][z]=R,P=!1,R=null):(P=!0,R=r.substring(1));else if("loop_"===r)I=!0,L=!0,D.length=0,Z.length=0,N=0;else if("_"===r[0]){var X,K,J;if(I&&!L&&(I=!1),I)K=(X=r.split("."))[0].substring(1),J=X[1],1===X.length?(J=!1,T[K]||(T[K]=[]),D.push(T[K])):(T[K]||(T[K]={}),T[K][J]?sl&&rl.warn(K,J,"already exists"):(T[K][J]=[],D.push(T[K][J]),Z.push(J))),F=K,z=J,B=!0;else{var Q=r.match(tx),ee=Q[0],te=Q[1];K=(X=ee.split("."))[0].substring(1),J=X[1],1===X.length?(J=!1,T[K]=te):(T[K]||(T[K]={}),T[K][J]?sl&&rl.warn(K,J,"already exists"):T[K][J]=te),te||(O=!0),F=K,z=J}}else if(P)R+=n;else if(I){if(!r)continue;if("atom_site"===F){var ne=r.split(ex);B&&(i=Z.indexOf("auth_asym_id"),o=Z.indexOf("auth_seq_id"),a=Z.indexOf("label_atom_id"),s=Z.indexOf("label_comp_id"),l=Z.indexOf("label_asym_id"),c=Z.indexOf("label_entity_id"),u=Z.indexOf("label_alt_id"),g=Z.indexOf("Cartn_x"),v=Z.indexOf("Cartn_y"),y=Z.indexOf("Cartn_z"),f=Z.indexOf("id"),p=Z.indexOf("type_symbol"),d=Z.indexOf("group_PDB"),b=Z.indexOf("B_iso_or_equiv"),h=Z.indexOf("pdbx_PDB_model_num"),m=Z.indexOf("pdbx_PDB_ins_code"),x=Z.indexOf("occupancy"),B=!1,G=parseInt(ne[h]),C&&(e=[],t=0));var re=parseInt(ne[h]);if(G!==re&&(C&&(0===$&&M.push(new Float32Array(e)),e=new Float32Array(3*V.count),M.push(e),t=0),$+=1),G=re,S&&$>0)continue;var ie=ne[a].replace(nx,"");if(k&&"CA"!==ie)continue;var oe=parseFloat(ne[g]),ae=parseFloat(ne[v]),se=parseFloat(ne[y]);if(C){var le=3*t;if(e[le+0]=oe,e[le+1]=ae,e[le+2]=se,t+=1,$>0)continue}var ce=ne[s],ue=parseInt(ne[o]),de=ne[m];de="?"===de?"":de;var fe=ne[i],pe=ne[l],he="H"===ne[d][0]?1:0,me=ne[p],ge=parseFloat(ne[b]),ve=parseFloat(ne[x]),ye=ne[u];if(ye="."===ye?"":ye,V.growIfFull(),V.atomTypeId[W]=U.add(ie,me),V.x[W]=oe,V.y[W]=ae,V.z[W]=se,V.serial[W]=parseInt(ne[f]),V.bfactor[W]=isNaN(ge)?0:ge,V.occupancy[W]=isNaN(ve)?0:ve,V.altloc[W]=ye.charCodeAt(0),_.addAtom($,fe,pe,ce,ue,he,void 0,de),sl){var be=A[pe];void 0!==be&&be!==fe&&sl&&rl.warn(be,fe)}A[pe]=fe;var xe=ne[c];E[xe]||(E[xe]=new Set),E[xe].add(w.chainStore.count-1),W+=1}else{var we=r.match(tx),_e=we.length;N===D.length&&(N=0);for(var Se=0;Se<_e;++Se)D[N+Se].push(we[Se]);N+=_e}L=!1}else if("'"===r[0]&&"'"===r[r.length-1]){var Ce=r.substring(1,r.length-1);!1===z?T[F]=Ce:T[F][z]=Ce}else O?!1===z?T[F]=r:T[F][z]=r:sl&&rl.log("CifParser._parse: unknown state",r);else P=!1,I=!1,O=!1,D.length=0,N=null,F=null,z=null,B=null,Z.length=0}(0,j.length,j)})),T.chem_comp&&T.chem_comp_atom)!function(e,t,n){var r,i,o=t.atomStore,a=t.atomMap,s=e.chem_comp,l=e.chem_comp_atom,c=e.chem_comp_bond;s&&(s.name&&(t.title=s.name.trim().replace(rx,"")),s.id&&(t.id=s.id.trim().replace(rx,"")));var u={};if(l){var d,f,p,h;for(ox(l,"comp_id"),i=l.comp_id.length,r=0;r<i;++r)o.growIfFull(),d=l.atom_id[r].replace(nx,""),f=l.type_symbol[r],u[d]=r,o.atomTypeId[r]=a.add(d,f),o.x[r]=l.model_Cartn_x[r],o.y[r]=l.model_Cartn_y[r],o.z[r]=l.model_Cartn_z[r],o.serial[r]=r,p=l.pdbx_component_comp_id[r],h=l.pdbx_residue_numbering?l.pdbx_residue_numbering[r]:1,n.addAtom(0,"","",p,h,!0);for(r=0;r<i;++r){var m=r+i;o.growIfFull(),d=l.atom_id[r].replace(nx,""),f=l.type_symbol[r],o.atomTypeId[m]=a.add(d,f),o.x[m]=l.pdbx_model_Cartn_x_ideal[r],o.y[m]=l.pdbx_model_Cartn_y_ideal[r],o.z[m]=l.pdbx_model_Cartn_z_ideal[r],o.serial[m]=m,p=l.pdbx_component_comp_id[r],h=l.pdbx_residue_numbering?l.pdbx_residue_numbering[r]:1,n.addAtom(1,"","",p,h,!0)}}if(l&&c){var g,v,y;ox(c,"comp_id"),i=c.comp_id.length;var b=l.comp_id.length,x=t.getAtomProxy(),w=t.getAtomProxy();for(r=0;r<i;++r)g=c.atom_id_1[r].replace(nx,""),v=c.atom_id_2[r].replace(nx,""),y=lx(c.value_order[r]),x.index=u[g],w.index=u[v],t.bondStore.growIfFull(),t.bondStore.addBond(x,w,y),x.index+=b,w.index+=b,t.bondStore.growIfFull(),t.bondStore.addBond(x,w,y)}}(T,w,_),_.finalize(),w.finalizeAtoms(),w.finalizeBonds(),Jh(w);else if(T.atom_site_type_symbol&&T.atom_site_label&&T.atom_site_fract_x)!function(e,t,n){var r=t.atomStore,i=t.atomMap;e.data&&(t.id=e.data,t.name=e.data),t.unitcell=new $b({a:parseFloat(e.cell_length_a),b:parseFloat(e.cell_length_b),c:parseFloat(e.cell_length_c),alpha:parseFloat(e.cell_angle_alpha),beta:parseFloat(e.cell_angle_beta),gamma:parseFloat(e.cell_angle_gamma),spacegroup:ix(e["symmetry_space_group_name_H-M"])});for(var o=new H,a=new H,s=e.atom_site_type_symbol.length,l=0;l<s;++l){r.growIfFull();var c=e.atom_site_label[l],u=e.atom_site_type_symbol[l];r.atomTypeId[l]=i.add(c,u),o.set(e.atom_site_fract_x[l],e.atom_site_fract_y[l],e.atom_site_fract_z[l]),o.applyMatrix4(t.unitcell.fracToCart),a.add(o),r.x[l]=o.x,r.y[l]=o.y,r.z[l]=o.z,e.atom_site_occupancy&&(r.occupancy[l]=parseFloat(e.atom_site_occupancy[l])),r.serial[l]=l,n.addAtom(0,"","","HET",1,!0)}a.divideScalar(s),t.center=a,qh(t);var d=new H,f=new H,p=t.biomolDict.SUPERCELL.partList[0].matrixList,h=s;function m(e){return i.get(r.atomTypeId[e]).covalent}for(var g=new j,v=function(e){var t=m(e);o.set(r.x[e],r.y[e],r.z[e]),p.forEach((function(i){if(!g.equals(i)){d.copy(o),d.applyMatrix4(i);for(var a=0;a<s;++a){f.set(r.x[a],r.y[a],r.z[a]);var l=d.distanceToSquared(f),c=m(a)+t,u=c+.3,p=c-.5;if(l<u*u&&l>p*p)return r.growIfFull(),r.atomTypeId[h]=r.atomTypeId[e],r.x[h]=d.x,r.y[h]=d.y,r.z[h]=d.z,r.occupancy[h]=r.occupancy[e],r.serial[h]=h,r.altloc[h]="A".charCodeAt(0),n.addAtom(0,"","","HET",1,!0),void(h+=1)}}}))},y=0;y<s;++y)v(y)}(T,w,_),_.finalize(),w.finalizeAtoms(),Uh(w),w.finalizeBonds();else{var q=function(e,t,n){var r,i,o,a,s=[],l=[],c=e.struct_conf;if(c)for(ox(c,"id"),r=0,i=c.beg_auth_seq_id.length;r<i;++r){var u=parseInt(c.pdbx_PDB_helix_class[r]);Number.isNaN(u)||(o=c.pdbx_beg_PDB_ins_code[r],a=c.pdbx_end_PDB_ins_code[r],s.push([n[c.beg_label_asym_id[r]],parseInt(c.beg_auth_seq_id[r]),sx(o,""),n[c.end_label_asym_id[r]],parseInt(c.end_auth_seq_id[r]),sx(a,""),(qb[u]||qb[0]).charCodeAt(0)]))}var d=e.struct_sheet_range;if(d)for(ox(d,"id"),r=0,i=d.beg_auth_seq_id.length;r<i;++r)o=d.pdbx_beg_PDB_ins_code[r],a=d.pdbx_end_PDB_ins_code[r],l.push([n[d.beg_label_asym_id[r]],parseInt(d.beg_auth_seq_id[r]),sx(o,""),n[d.end_label_asym_id[r]],parseInt(d.end_auth_seq_id[r]),sx(a,"")]);return!(!c&&!d)&&{helices:s,sheets:l}}(T,0,A);if(function(e,t,n){var r={},i=t.biomolDict;if(e.pdbx_struct_oper_list){var o=e.pdbx_struct_oper_list;ox(o,"id"),o.id.forEach((function(e,t){var n=new j,i=n.elements;i[0]=parseFloat(o["matrix[1][1]"][t]),i[1]=parseFloat(o["matrix[1][2]"][t]),i[2]=parseFloat(o["matrix[1][3]"][t]),i[4]=parseFloat(o["matrix[2][1]"][t]),i[5]=parseFloat(o["matrix[2][2]"][t]),i[6]=parseFloat(o["matrix[2][3]"][t]),i[8]=parseFloat(o["matrix[3][1]"][t]),i[9]=parseFloat(o["matrix[3][2]"][t]),i[10]=parseFloat(o["matrix[3][3]"][t]),i[3]=parseFloat(o["vector[1]"][t]),i[7]=parseFloat(o["vector[2]"][t]),i[11]=parseFloat(o["vector[3]"][t]),n.transpose(),r[e]=n}))}if(e.pdbx_struct_assembly_gen){var a=e.pdbx_struct_assembly_gen;ox(a,"assembly_id");var s=function(e){var t={};return e.replace(/[()']/g,"").split(",").forEach((function(e){if(e.includes("-"))for(var n=e.split("-"),i=parseInt(n[0]),o=parseInt(n[1]);i<=o;++i)t[i]=r[i];else t[e]=r[e]})),t};a.assembly_id.forEach((function(e,t){var r={},o=a.oper_expression[t].replace(/['"]\(|['"]/g,"");if(o.includes(")(")||o.indexOf("(")>0){o=o.split("(");var l=s(o[0]),c=s(o[1]);Object.keys(l).forEach((function(e){Object.keys(c).forEach((function(t){var n=new j;n.multiplyMatrices(l[e],c[t]),r[e+"x"+t]=n}))}))}else r=s(o);var u=[];for(var d in r)u.push(r[d]);var f=e;/^(0|[1-9][0-9]*)$/.test(f)&&(f="BU"+f);for(var p=a.asym_id_list[t].split(","),h=0,m=p.length;h<m;++h)p[h]=n[p[h]];void 0===i[f]&&(i[f]=new Ih(f)),i[f].addPart(u,p)}))}if(e.struct_ncs_oper){var l=e.struct_ncs_oper;ox(l,"id");var c="NCS";i[c]=new Ih(c);var u=i[c].addPart();l.id.forEach((function(e,t){if("given"!==l.code[t]){var n=new j,r=n.elements;r[0]=parseFloat(l["matrix[1][1]"][t]),r[1]=parseFloat(l["matrix[1][2]"][t]),r[2]=parseFloat(l["matrix[1][3]"][t]),r[4]=parseFloat(l["matrix[2][1]"][t]),r[5]=parseFloat(l["matrix[2][2]"][t]),r[6]=parseFloat(l["matrix[2][3]"][t]),r[8]=parseFloat(l["matrix[3][1]"][t]),r[9]=parseFloat(l["matrix[3][2]"][t]),r[10]=parseFloat(l["matrix[3][3]"][t]),r[3]=parseFloat(l["vector[1]"][t]),r[7]=parseFloat(l["vector[2]"][t]),r[11]=parseFloat(l["vector[3]"][t]),n.transpose(),u.matrixList.push(n)}})),0===u.matrixList.length&&delete i[c]}var d={};if(e.cell){var f=e.cell,p=parseFloat(f.length_a),h=parseFloat(f.length_b),m=parseFloat(f.length_c),g=new Float32Array(9);g[0]=p,g[4]=h,g[8]=m,t.boxes.push(g),d.a=p,d.b=h,d.c=m,d.alpha=parseFloat(f.angle_alpha),d.beta=parseFloat(f.angle_beta),d.gamma=parseFloat(f.angle_gamma)}e.symmetry&&(d.spacegroup=ix(e.symmetry["space_group_name_H-M"]));var v=new j;if(e.database_PDB_matrix){var y=e.database_PDB_matrix,b=v.elements;b[0]=parseFloat(y["origx[1][1]"]),b[1]=parseFloat(y["origx[1][2]"]),b[2]=parseFloat(y["origx[1][3]"]),b[4]=parseFloat(y["origx[2][1]"]),b[5]=parseFloat(y["origx[2][2]"]),b[6]=parseFloat(y["origx[2][3]"]),b[8]=parseFloat(y["origx[3][1]"]),b[9]=parseFloat(y["origx[3][2]"]),b[10]=parseFloat(y["origx[3][3]"]),b[3]=parseFloat(y["origx_vector[1]"]),b[7]=parseFloat(y["origx_vector[2]"]),b[11]=parseFloat(y["origx_vector[3]"]),v.transpose(),d.origx=v}var x=new j;if(e.atom_sites){var w=e.atom_sites,_=x.elements;_[0]=parseFloat(w["fract_transf_matrix[1][1]"]),_[1]=parseFloat(w["fract_transf_matrix[1][2]"]),_[2]=parseFloat(w["fract_transf_matrix[1][3]"]),_[4]=parseFloat(w["fract_transf_matrix[2][1]"]),_[5]=parseFloat(w["fract_transf_matrix[2][2]"]),_[6]=parseFloat(w["fract_transf_matrix[2][3]"]),_[8]=parseFloat(w["fract_transf_matrix[3][1]"]),_[9]=parseFloat(w["fract_transf_matrix[3][2]"]),_[10]=parseFloat(w["fract_transf_matrix[3][3]"]),_[3]=parseFloat(w["fract_transf_vector[1]"]),_[7]=parseFloat(w["fract_transf_vector[2]"]),_[11]=parseFloat(w["fract_transf_vector[3]"]),x.transpose(),d.scale=x}void 0!==d.a?t.unitcell=new $b(d):t.unitcell=void 0}(T,w,A),function(e,t,n){var r=e.struct_conn;if(r){ox(r,"id");for(var i=/"/g,o=t.getAtomProxy(),a=t.getAtomProxy(),s={},l=0,c=r.id.length;l<c;++l){var u=r.conn_type_id[l];if("hydrog"!==u&&"mismat"!==u&&"saltbr"!==u&&"1_555"===r.ptnr1_symmetry[l]&&"1_555"===r.ptnr2_symmetry[l]){var d=r.pdbx_ptnr1_PDB_ins_code[l],f=r.pdbx_ptnr1_label_alt_id[l],p=r.ptnr1_auth_seq_id[l]+(ax(d)?"^"+d:"")+":"+n[r.ptnr1_label_asym_id[l]]+"."+r.ptnr1_label_atom_id[l].replace(i,"")+(ax(f)?"%"+f:""),h=s[p];if(!h){var m=new Bs(p);if(m.selection.error){sl&&rl.warn("invalid selection for connection",p);continue}h=t.getAtomIndices(m),s[p]=h}var g=r.pdbx_ptnr2_PDB_ins_code[l],v=r.pdbx_ptnr2_label_alt_id[l],y=r.ptnr2_auth_seq_id[l]+(ax(g)?"^"+g:"")+":"+n[r.ptnr2_label_asym_id[l]]+"."+r.ptnr2_label_atom_id[l].replace(i,"")+(ax(v)?"%"+v:""),b=s[y];if(!b){var x=new Bs(y);if(x.selection.error){sl&&rl.warn("invalid selection for connection",y);continue}b=t.getAtomIndices(x),s[y]=b}var w=h.length,_=b.length;if(w>_){var S=w;w=_,_=S;var C=h;h=b,b=C}if(0!==w&&0!==_)for(var k=0;k<_;++k)o.index=h[k%w],a.index=b[k],o&&a?t.bondStore.addBond(o,a,lx(r.pdbx_value_order[l])):rl.log("atoms for connection not found");else sl&&rl.warn("no atoms found for",p,y)}}}}(T,w,A),function(e,t,n){if(e.entity){ox(e.entity,"id");for(var r=e.entity,i=r.id.length,o=0;o<i;++o){var a=r.pdbx_description[o],s=r.type[o],l=Array.from(n[r.id[o]]);t.entityList[o]=new Vb(t,o,a,s,l)}}}(T,w,E),T.struct&&T.struct.title&&(w.title=T.struct.title.trim().replace(rx,"")),T.entry&&T.entry.id&&(w.id=T.entry.id.trim().replace(rx,"")),T.pdbx_audit_revision_history){if(T.pdbx_audit_revision_history.revision_date){ox(T.pdbx_audit_revision_history,"revision_date");var Y=T.pdbx_audit_revision_history.revision_date.filter(ax);Y.length&&(w.header.releaseDate=Y[0])}if(T.pdbx_database_status.recvd_initial_deposition_date){ox(T.pdbx_database_status,"recvd_initial_deposition_date");var X=T.pdbx_database_status.recvd_initial_deposition_date.filter(ax);X.length&&(w.header.depositionDate=X[0])}}else if(T.database_PDB_rev){if(T.database_PDB_rev.date){ox(T.database_PDB_rev,"date");var K=T.database_PDB_rev.date.filter(ax);K.length&&(w.header.releaseDate=K[0])}if(T.database_PDB_rev.date_original){ox(T.database_PDB_rev,"date_original");var J=T.database_PDB_rev.date_original.filter(ax);J.length&&(w.header.depositionDate=J[0])}}T.reflns&&T.reflns.d_resolution_high?ax(T.reflns.d_resolution_high)&&(w.header.resolution=parseFloat(T.reflns.d_resolution_high)):T.refine&&T.refine.ls_d_res_high&&ax(T.refine.ls_d_res_high)&&(w.header.resolution=parseFloat(T.refine.ls_d_res_high)),T.refine&&T.refine.ls_R_factor_R_free&&ax(T.refine.ls_R_factor_R_free)&&(w.header.rFree=parseFloat(T.refine.ls_R_factor_R_free)),T.refine&&T.refine.ls_R_factor_R_work&&ax(T.refine.ls_R_factor_R_work)&&(w.header.rWork=parseFloat(T.refine.ls_R_factor_R_work)),T.exptl&&T.exptl.method&&(ox(T.exptl,"method"),w.header.experimentalMethods=T.exptl.method.map((function(e){return e.replace(rx,"")}))),_.finalize(),w.finalizeAtoms(),Uh(w),w.finalizeBonds(),q?zh(w,q):Bh(w),qh(w),w.extraData.cif=T}sl&&rl.timeEnd("CifParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("cif",cx),gl.add("mcif",cx),gl.add("mmcif",cx);var ux=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"gro"},t.prototype._parse=function(){sl&&rl.time("GroParser._parse "+this.name);var e,t,n=this.structure,r=this.structureBuilder,i=this.firstModelOnly,o=this.asTrajectory,a=this.cAlphaOnly,s=n.frames,l=n.boxes,c=this.streamer.peekLines(3);n.title=c[0].trim();var u,d,f,p,h=5+(c[2].length-c[2].lastIndexOf(".")-1),m=20+h,g=20+2*h,v=parseInt(c[1]),y=v+3,b=n.atomMap,x=n.atomStore;x.resize(v);var w=0,_=0,S=0;this.streamer.eachChunkOfLines((function(n){!function(n,c,C){for(var k=n;k<c;++k){var M=++S-1,T=C[k];if(T)if(M%y===0)o&&(e=new Float32Array(3*v),s.push(e),t=0);else if(M%y===1);else if(M%y===y-1){var A=T.trim().split(/\s+/),E=new Float32Array(9);if(E[0]=10*parseFloat(A[0]),E[4]=10*parseFloat(A[1]),E[8]=10*parseFloat(A[2]),l.push(E),i)return!0;_+=1}else{if(u=T.substr(10,5).trim(),a&&"CA"!==u)continue;var P=10*parseFloat(T.substr(20,h)),R=10*parseFloat(T.substr(m,h)),O=10*parseFloat(T.substr(g,h));if(o){var I=3*t;if(e[I+0]=P,e[I+1]=R,e[I+2]=O,t+=1,M>y)continue}d=T.substr(5,5).trim(),f=parseInt(T.substr(0,5)),p=parseInt(T.substr(15,5)),x.growIfFull(),x.atomTypeId[w]=b.add(u),x.x[w]=P,x.y[w]=R,x.z[w]=O,x.serial[w]=p,r.addAtom(_,"","",d,f,0,"l"),w+=1}}}(0,n.length,n)})),r.finalize(),n.finalizeAtoms(),Hh(n),Uh(n),n.finalizeBonds(),Bh(n),sl&&rl.timeEnd("GroParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("gro",ux);var dx=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"].concat(["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"]);function fx(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function px(e){return fx(DataView,e)}function hx(e){return fx(Int8Array,e)}function mx(e){return fx(Int32Array,e,4)}function gx(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,i=0;r<n;++r,i+=2)t[r]=e[i]<<8^e[i+1]<<0;return t}function vx(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,i=0;r<n;++r,i+=4)t[r]=e[i]<<24^e[i+1]<<16^e[i+2]<<8^e[i+3]<<0;return t}function yx(e,t,n){var r=e.length,i=1/t;n||(n=new Float32Array(r));for(var o=0;o<r;++o)n[o]=e[o]*i;return n}function bx(e,t){var n,r;if(!t){var i=0;for(n=0,r=e.length;n<r;n+=2)i+=e[n+1];t=new e.constructor(i)}var o=0;for(n=0,r=e.length;n<r;n+=2)for(var a=e[n],s=e[n+1],l=0;l<s;++l)t[o]=a,++o;return t}function xx(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;r<n;++r)t[r]=e[r]+t[r-1];return t}function wx(e,t){var n,r,i=e instanceof Int8Array?127:32767,o=-i-1,a=e.length;if(!t){var s=0;for(n=0;n<a;++n)e[n]<i&&e[n]>o&&++s;t=new Int32Array(s)}for(n=0,r=0;n<a;){for(var l=0;e[n]===i||e[n]===o;)l+=e[n],++n;l+=e[n],++n,t[r]=l,++r}return t}function _x(e,t,n){return yx(wx(e,mx(n)),t,n)}function Sx(e,t,n){var r=wx(e,mx(n));return function(e,t,n){return yx(xx(e,mx(n)),t,n)}(r,t,fx(Float32Array,r,4))}function Cx(e){var t=0,n=new DataView(e.buffer);function r(e){for(var t={},n=0;n<e;n++){t[s()]=s()}return t}function i(n){var r=e.subarray(t,t+n);return t+=n,r}function o(n){var r=e.subarray(t,t+n);t+=n;var i=65535;if(n>i){for(var o=[],a=0;a<r.length;a+=i)o.push(String.fromCharCode.apply(null,r.subarray(a,a+i)));return o.join("")}return String.fromCharCode.apply(null,r)}function a(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=s();return t}function s(){var s,l,c=e[t];if(0===(128&c))return t++,c;if(128===(240&c))return t++,r(l=15&c);if(144===(240&c))return t++,a(l=15&c);if(160===(224&c))return t++,o(l=31&c);if(224===(224&c))return s=n.getInt8(t),t++,s;switch(c){case 192:return t++,null;case 194:return t++,!1;case 195:return t++,!0;case 196:return l=n.getUint8(t+1),t+=2,i(l);case 197:return l=n.getUint16(t+1),t+=3,i(l);case 198:return l=n.getUint32(t+1),t+=5,i(l);case 202:return s=n.getFloat32(t+1),t+=5,s;case 203:return s=n.getFloat64(t+1),t+=9,s;case 204:return s=e[t+1],t+=2,s;case 205:return s=n.getUint16(t+1),t+=3,s;case 206:return s=n.getUint32(t+1),t+=5,s;case 208:return s=n.getInt8(t+1),t+=2,s;case 209:return s=n.getInt16(t+1),t+=3,s;case 210:return s=n.getInt32(t+1),t+=5,s;case 217:return l=n.getUint8(t+1),t+=2,o(l);case 218:return l=n.getUint16(t+1),t+=3,o(l);case 219:return l=n.getUint32(t+1),t+=5,o(l);case 220:return l=n.getUint16(t+1),t+=3,a(l);case 221:return l=n.getUint32(t+1),t+=5,a(l);case 222:return l=n.getUint16(t+1),t+=3,r(l);case 223:return l=n.getUint32(t+1),t+=5,r(l)}throw new Error("Unknown type 0x"+c.toString(16))}return s()}function kx(e,t,n,r){switch(e){case 1:return function(e,t){var n=e.length;t||(t=new Float32Array(n/4));for(var r=px(t),i=px(e),o=0,a=0,s=n/4;o<s;++o,a+=4)r.setFloat32(a,i.getFloat32(a),!0);return t}(t);case 2:return hx(t);case 3:return gx(t);case 4:return vx(t);case 5:return fx(Uint8Array,t);case 6:return bx(vx(t),new Uint8Array(n));case 7:return bx(vx(t));case 8:return xx(bx(vx(t)),i);case 9:return function(e,t,n){return yx(bx(e,mx(n)),t,n)}(vx(t),vx(r)[0]);case 10:return Sx(gx(t),vx(r)[0]);case 11:return yx(gx(t),vx(r)[0]);case 12:return _x(gx(t),vx(r)[0]);case 13:return _x(hx(t),vx(r)[0]);case 14:return wx(gx(t));case 15:return wx(hx(t))}var i}function Mx(e,t){var n=(t=t||{}).ignoreFields,r={};return dx.forEach((function(t){var i=!!n&&-1!==n.indexOf(t),o=e[t];i||void 0===o||(o instanceof Uint8Array?r[t]=kx.apply(null,function(e){var t=px(e),n=t.getInt32(0),r=t.getInt32(4),i=e.subarray(8,12);return[n,e=e.subarray(12),r,i]}(o)):r[t]=o)})),r}var Tx={0:"i".charCodeAt(0),1:"s".charCodeAt(0),2:"h".charCodeAt(0),3:"e".charCodeAt(0),4:"g".charCodeAt(0),5:"b".charCodeAt(0),6:"t".charCodeAt(0),7:"l".charCodeAt(0),"-1":"".charCodeAt(0)},Ax=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"mmtf"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){var e,t,n,r,i;sl&&rl.time("MmtfParser._parse "+this.name);var o,a,s,l,c,u,d=this.structure,f=Mx(Cx(this.streamer.data));if(["depositionDate","releaseDate","resolution","rFree","rWork","experimentalMethods"].forEach((function(e){void 0!==f[e]&&(d.header[e]=f[e])})),d.id=f.structureId,d.title=f.title,d.atomStore.addField("formalCharge",1,"int8"),this.firstModelOnly||this.asTrajectory){for(c=1,s=0,e=0,t=l=f.chainsPerModel[0];e<t;++e)s+=f.groupsPerChain[e];for(a=0,e=0,t=s;e<t;++e)a+=(i=f.groupList[f.groupTypeList[e]]).atomNameList.length;o=f.numBonds,u=[l]}else o=f.numBonds,a=f.numAtoms,s=f.numGroups,l=f.numChains,c=f.numModels,u=f.chainsPerModel;if(o+=s,this.asTrajectory)for(e=0,t=f.numModels;e<t;++e){var p=new Float32Array(3*a),h=a*e;for(n=0;n<a;++n){var m=3*n,g=n+h;p[m]=f.xCoordList[g],p[m+1]=f.yCoordList[g],p[m+2]=f.zCoordList[g]}d.frames.push(p)}var v=new Uint32Array(o),y=new Uint32Array(o),b=new Uint8Array(o),x=new Uint32Array(a),w=new Int8Array(a),_=new Uint32Array(s),S=new Uint32Array(s),C=new Uint16Array(s),k=new Uint16Array(l),M=new Uint32Array(l),T=new Uint32Array(l),A=new Uint32Array(c),E=new Uint32Array(c),P=0;for(e=0,t=c;e<t;++e){var R=u[e];for(A[e]=P,E[e]=R,n=0;n<R;++n)k[n+P]=e;P+=R}var O=f.groupsPerChain,I=0;for(e=0,t=l;e<t;++e){var L=O[e];for(M[e]=I,T[e]=L,n=0;n<L;++n)_[n+I]=e;I+=L}var D=0,N=0;for(e=0,t=s;e<t;++e){var F=(i=f.groupList[f.groupTypeList[e]]).atomNameList.length,z=i.formalChargeList,B=i.bondAtomList,Z=i.bondOrderList;for(n=0,r=Z.length;n<r;++n)v[N]=D+B[2*n],y[N]=D+B[2*n+1],b[N]=Z[n],N+=1;for(S[e]=D,C[e]=F,n=0;n<F;++n)x[D]=e,w[D]=z[n],D+=1}var H=f.bondAtomList;if(H)for(f.bondOrderList&&b.set(f.bondOrderList,N),e=0,t=H.length;e<t;e+=2){var U=H[e],V=H[e+1];U<a&&V<a&&(v[N]=U,y[N]=V,N+=1)}d.bondStore.length=b.length,d.bondStore.count=N,d.bondStore.atomIndex1=v,d.bondStore.atomIndex2=y,d.bondStore.bondOrder=b,d.atomStore.length=a,d.atomStore.count=a,d.atomStore.residueIndex=x,d.atomStore.atomTypeId=new Uint16Array(a),d.atomStore.x=f.xCoordList.subarray(0,a),d.atomStore.y=f.yCoordList.subarray(0,a),d.atomStore.z=f.zCoordList.subarray(0,a),d.atomStore.serial=f.atomIdList.subarray(0,a),d.atomStore.bfactor=f.bFactorList.subarray(0,a),d.atomStore.altloc=f.altLocList.subarray(0,a),d.atomStore.occupancy=f.occupancyList.subarray(0,a),d.atomStore.formalCharge=w,d.residueStore.length=s,d.residueStore.count=s,d.residueStore.chainIndex=_,d.residueStore.residueTypeId=f.groupTypeList,d.residueStore.atomOffset=S,d.residueStore.atomCount=C,d.residueStore.resno=f.groupIdList.subarray(0,s),d.residueStore.sstruc=f.secStructList.subarray(0,s),d.residueStore.inscode=f.insCodeList.subarray(0,s),d.chainStore.length=l,d.chainStore.count=l,d.chainStore.entityIndex=new Uint16Array(l),d.chainStore.modelIndex=k,d.chainStore.residueOffset=M,d.chainStore.residueCount=T,d.chainStore.chainname=f.chainNameList.subarray(0,4*l),d.chainStore.chainid=f.chainIdList.subarray(0,4*l),d.modelStore.length=c,d.modelStore.count=c,d.modelStore.chainOffset=A,d.modelStore.chainCount=E;var G={};for(e=0,t=f.groupList.length;e<t;++e){var W=f.groupList[e],$=[];for(n=0,r=W.atomNameList.length;n<r;++n){var q=W.elementList[n].toUpperCase(),Y=W.atomNameList[n];$.push(d.atomMap.add(Y,q))}var X=W.chemCompType.toUpperCase(),K=Ad.includes(X),J=W.bondOrderList.length,Q=new Array(J),ee=new Array(J);for(n=0;n<J;++n)Q[n]=W.bondAtomList[2*n],ee[n]=W.bondAtomList[2*n+1];var te={atomIndices1:Q,atomIndices2:ee,bondOrders:W.bondOrderList};G[e]=d.residueMap.add(W.groupName,$,K,X,te)}for(e=0,t=s;e<t;++e)d.residueStore.residueTypeId[e]=G[d.residueStore.residueTypeId[e]];for(e=0,t=d.atomStore.count;e<t;++e){var ne=d.atomStore.residueIndex[e],re=d.residueMap.list[d.residueStore.residueTypeId[ne]],ie=d.residueStore.atomOffset[ne];d.atomStore.atomTypeId[e]=re.atomTypeIdList[e-ie]}if(f.secStructList){var oe=f.secStructList.length;for(e=0,t=d.residueStore.count;e<t;++e){var ae=Tx[d.residueStore.sstruc[e%oe]];void 0!==ae&&(d.residueStore.sstruc[e]=ae)}}if(f.entityList&&f.entityList.forEach((function(e,t){d.entityList[t]=new Vb(d,t,e.description,e.type,e.chainIndexList)})),f.bioAssemblyList&&f.bioAssemblyList.forEach((function(e,t){var n=t+1,r=new Ih(""+n);d.biomolDict["BU"+n]=r;var i={};e.transformList.forEach((function(e){var t=(new j).fromArray(e.matrix).transpose(),n=e.chainIndexList.map((function(e){for(var t="",n=0;n<4;++n){var r=f.chainNameList[4*e+n];if(!r)break;t+=String.fromCharCode(r)}return t})),o=i[n.toString()];o?o.matrixList.push(t):i[n.toString()]=r.addPart([t],n)}))})),f.ncsOperatorList){var se=new Ih("NCS"),le=se.addPart();f.ncsOperatorList.forEach((function(e){var t=(new j).fromArray(e).transpose();le.matrixList.push(t)})),le.matrixList.length>0&&(d.biomolDict.NCS=se)}var ce=f.unitCell;ce&&Array.isArray(ce)&&ce[0]?d.unitcell=new $b({a:ce[0],b:ce[1],c:ce[2],alpha:ce[3],beta:ce[4],gamma:ce[5],spacegroup:f.spaceGroup}):d.unitcell=void 0,$h(d,!0),Wh(d,!0),d.finalizeAtoms(),d.finalizeBonds(),qh(d),sl&&rl.timeEnd("MmtfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("mmtf",Ax);var Ex=/\s+/,Px={1:1,2:2,3:3,am:1,ar:1,du:1,un:1,nc:0},Rx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"mol2"},t.prototype._parse=function(){sl&&rl.time("Mol2Parser._parse "+this.name);var e,t,n=this.structure,r=this.structureBuilder,i=this.firstModelOnly,o=this.asTrajectory,a=n.frames,s=!1,l=n.atomMap,c=n.atomStore;c.resize(Math.round(this.streamer.data.length/60)),c.addField("partialCharge",1,"float32");var u=0,d=0,f=0,p=-1,h=0,m=0,g=n.getAtomProxy(),v=n.getAtomProxy();this.streamer.eachChunkOfLines((function(y){!function(y,b,x){for(var w=y;w<b;++w){var _=x[w].trim();if(""!==_&&"#"!==_[0])if("@"===_[0])"@<TRIPOS>MOLECULE"===_?(m=1,d=0,++p):"@<TRIPOS>ATOM"===_?(m=2,f=c.count,o&&(t=0,e=new Float32Array(3*h),a.push(e),p>0&&(s=!0))):m="@<TRIPOS>BOND"===_?3:0;else if(1===m){if(0===d)n.title=_,n.id=_;else if(1===d){var S=_.split(Ex);h=parseInt(S[0])}++d}else if(2===m){var C=_.split(Ex);if(i&&p>0)continue;var k=parseFloat(C[2]),M=parseFloat(C[3]),T=parseFloat(C[4]);if(o){var A=3*t;if(e[A+0]=k,e[A+1]=M,e[A+2]=T,t+=1,s)continue}var E=C[0],P=C[1],R=C[5].split(".")[0],O=C[6]?parseInt(C[6]):1,I=C[7]?C[7]:"",L=C[8]?parseFloat(C[8]):0;c.growIfFull(),c.atomTypeId[u]=l.add(P,R),c.x[u]=k,c.y[u]=M,c.z[u]=T,c.serial[u]=E,c.partialCharge[u]=L,r.addAtom(p,"","",I,O,1),u+=1}else if(3===m){if(i&&p>0)continue;if(o&&p>0)continue;var D=_.split(Ex);g.index=parseInt(D[1])-1+f,v.index=parseInt(D[2])-1+f;var N=Px[D[3]];n.bondStore.addBond(g,v,N)}}}(0,y.length,y)})),r.finalize(),n.finalizeAtoms(),Hh(n),Wh(n,!0),$h(n,!0),n.finalizeBonds(),Jh(n),Bh(n),sl&&rl.timeEnd("Mol2Parser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("mol2",Rx);var Ox=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pdbqt"},Object.defineProperties(t.prototype,n),t}(Qb);gl.add("pdbqt",Ox);var Ix=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pqr"},Object.defineProperties(t.prototype,n),t}(Qb);gl.add("pqr",Ix);var Lx=/> <(.+)>/,Dx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"sdf"},t.prototype._parse=function(){sl&&rl.time("SdfParser._parse "+this.name);var e=this.structure,t=this.structureBuilder,n=this.firstModelOnly,r=this.asTrajectory,i=this.streamer.peekLines(2);e.id=i[0].trim(),e.title=i[1].trim();var o,a,s=e.frames,l=!1,c=e.atomMap,u=e.atomStore;u.resize(Math.round(this.streamer.data.length/50)),u.addField("formalCharge",1,"int8");var d,f,p,h,m,g,v,y=e.getAtomProxy(),b=e.getAtomProxy(),x=0,w=0,_=0,S=0,C=[],k=!1,M={};e.extraData.sdf=C,this.streamer.eachChunkOfLines((function(i){!function(i,T,A){for(var E=i;E<T;++E){var P=A[E];if("$$$$"===P.substr(0,4))w=-1,++_,S=u.count,C.push(M),M={},k=!1;else if(3===w)f=parseInt(P.substr(0,3)),p=parseInt(P.substr(3,3)),v=(g=m=(h=4)+f)+p,r&&(a=0,o=new Float32Array(3*f),s.push(o),_>0&&(l=!0));else if(w>=h&&w<m){if(n&&_>0)continue;var R=parseFloat(P.substr(0,10)),O=parseFloat(P.substr(10,10)),I=parseFloat(P.substr(20,10));if(r){var L=3*a;if(o[L+0]=R,o[L+1]=O,o[L+2]=I,a+=1,l)continue}var D=P.substr(31,3).trim(),N=D+(x+1);u.growIfFull(),u.atomTypeId[x]=c.add(N,D),u.x[x]=R,u.y[x]=O,u.z[x]=I,u.serial[x]=x,u.formalCharge[x]=0,t.addAtom(_,"","","HET",1,1),x+=1}else if(w>=g&&w<v){if(n&&_>0)continue;if(r&&_>0)continue;y.index=parseInt(P.substr(0,3))-1+S,b.index=parseInt(P.substr(3,3))-1+S;var F=parseInt(P.substr(6,3));e.bondStore.addBond(y,b,F)}else if(P.match(/M {2}CHG/))for(var z=parseInt(P.substr(6,3)),B=0,j=10;B<z;++B,j+=8){var Z=parseInt(P.substr(j,3))-1+S,H=parseInt(P.substr(j+4,3));u.formalCharge[Z]=H}else(d=P.match(Lx))?(k=d[1],M[k]=[]):!1!==k&&P&&M[k].push(P);++w}}(0,i.length,i)})),t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),Jh(e),sl&&rl.timeEnd("SdfParser._parse "+this.name)},t.prototype._postProcess=function(){Jh(this.structure)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("sdf",Dx),gl.add("sd",Dx),gl.add("mol",Dx);function Nx(e,t,n){return parseInt(e.substr(t,n).trim())}var Fx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"prmtop"},t.prototype._parse=function(){sl&&rl.time("PrmtopParser._parse "+this.name);var e=this.structure,t=this.structureBuilder,n=e.atomMap,r=e.atomStore;r.addField("partialCharge",1,"float32"),r.addField("radius",1,"float32");var i,o,a,s,l,c,u,d,f,p,h,m=[],g={},v=["NATOM","NTYPES","NBONH","MBONA","NTHETH","MTHETA","NPHIH","MPHIA","NHPARM","NPARM","NNB","NRES","NBONA","NTHETA","NPHIA","NUMBND","NUMANG","NPTRA","NATYP","NPHB","IFPERT","NBPER","NGPER","NDPER","MBPER","MGPER","MDPER","IFBOX","NMXRS","IFCAP","NUMEXTRA","NCOPY"];v.forEach((function(e){g[e]=0})),this.streamer.eachChunkOfLines((function(e){!function(e,t,n){for(var y=e;y<t;++y){var b=n[y],x=b.trim();if(x)if(b.startsWith("%FORMAT"));else if(b.startsWith("%FLAG")){var w=b.substr(5).trim();p=0,"TITLE"===w?f=0:"POINTERS"===w?f=1:"ATOM_NAME"===w?f=2:"CHARGE"===w?f=3:"MASS"===w?f=4:"RESIDUE_LABEL"===w?f=5:"RESIDUE_POINTER"===w?f=6:"BONDS_INC_HYDROGEN"===w?(h=0,f=7):"BONDS_WITHOUT_HYDROGEN"===w?(h=g.NBONH,f=8):f="RADII"===w?9:void 0}else if(0===f)m.push(x);else if(1===f){for(var _=Math.min(p+10,32),S=0;p<_;++S,++p)g[v[p]]=parseInt(b.substr(8*S,8).trim());i=new Array(g.NATOM),o=new Float32Array(g.NATOM),a=new Float32Array(g.NATOM),r.resize(g.NATOM);var C=g.NBONH+g.MBONA;s=new Uint32Array(C),l=new Uint32Array(C),c=new Uint8Array(C),u=new Array(g.NRES),d=new Uint32Array(g.NRES)}else if(2===f)for(var k=Math.min(p+20,g.NATOM),M=0;p<k;++M,++p)i[p]=b.substr(4*M,4).trim();else if(3===f)for(var T=Math.min(p+5,g.NATOM),A=0;p<T;++A,++p)o[p]=parseFloat(b.substr(16*A,16))/18.2223;else if(4===f);else if(5===f)for(var E=Math.min(p+20,g.NRES),P=0;p<E;++P,++p)u[p]=b.substr(4*P,4).trim();else if(6===f)for(var R=Math.min(p+10,g.NRES),O=0;p<R;++O,++p)d[p]=Nx(b,8*O,8);else if(7===f)for(var I=Math.min(p+10,3*g.NBONH),L=0;p<I;++L,++p){var D=p%3;0===D&&(s[h]=Nx(b,8*L,8)/3),1===D&&(l[h]=Nx(b,8*L,8)/3,c[h]=1,++h)}else if(8===f)for(var N=Math.min(p+10,3*g.MBONA),F=0;p<N;++F,++p){var z=p%3;0===z&&(s[h]=Nx(b,8*F,8)/3),1===z&&(l[h]=Nx(b,8*F,8)/3,c[h]=1,++h)}else if(9===f)for(var B=Math.min(p+5,g.NATOM),j=0;p<B;++j,++p)a[p]=parseFloat(b.substr(16*j,16))}}(0,e.length,e)})),e.title=m.join(" ");for(var y=g.NATOM,b=0,x=u[0],w=1,_=0;_<y;++_)_+1===d[b+1]&&(++b,x=u[b],w=b+1),r.atomTypeId[_]=n.add(i[_]),r.serial[_]=_+1,t.addAtom(0,"","",x,w);r.partialCharge.set(o),r.radius.set(a),e.bondStore.length=c.length,e.bondStore.count=c.length,e.bondStore.atomIndex1=s,e.bondStore.atomIndex2=l,e.bondStore.bondOrder=c,t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),Wh(e,!0),$h(e,!0,!0),Hh(e,!0),Jh(e),sl&&rl.timeEnd("PrmtopParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("prmtop",Fx),gl.add("parm7",Fx);var zx=/\s+/,Bx=/(^\*|REMARK)*/,jx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"psf"},t.prototype._parse=function(){sl&&rl.time("PsfParser._parse "+this.name);var e=this.structure,t=this.structureBuilder,n=e.atomMap,r=e.atomStore;r.addField("partialCharge",1,"float32");var i,o,a,s,l,c,u=[],d=0,f=0,p=0;this.streamer.eachChunkOfLines((function(e){!function(e,h,m){for(var g=e;g<h;++g){var v=m[g].trim();if(v)if(2===i){var y=v.split(zx),b=parseInt(y[0]),x=y[1],w=parseInt(y[2]),_=y[3],S=y[4],C=parseFloat(y[6]);x!==a&&(o=Zh(f),++f),r.growIfFull(),r.atomTypeId[d]=n.add(S),r.serial[d]=b,r.partialCharge[d]=C,t.addAtom(0,o,o,_,w),d+=1,a=x}else if(3===i)for(var k=v.split(zx),M=0,T=k.length;M<T;M+=2)s[p]=parseInt(k[M])-1,l[p]=parseInt(k[M+1])-1,c[p]=1,p+=1;else if(1===i)u.push(v.replace(Bx,"").trim());else if(4===i);else if(5===i);else if(6===i);else if(v.includes("!NATOM")){i=2;var A=parseInt(v.split(zx)[0]);r.resize(A)}else if(v.includes("!NBOND")){i=3;var E=parseInt(v.split(zx)[0]);s=new Uint32Array(E),l=new Uint32Array(E),c=new Uint8Array(E)}else v.includes("!NTITLE")?i=1:v.includes("!NTHETA")?i=4:v.includes("!NPHI")?i=5:v.includes("!NIMPHI")&&(i=6);else i=void 0}}(0,e.length,e)})),e.title=u.join(" "),e.bondStore.length=c.length,e.bondStore.count=p,e.bondStore.atomIndex1=s,e.bondStore.atomIndex2=l,e.bondStore.bondOrder=c,t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),Wh(e,!0),$h(e,!0,!0),Jh(e),sl&&rl.timeEnd("PsfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("psf",jx);var Zx=/\[ (.+) \]/,Hx=/\s+/,Ux=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"top"},t.prototype._parse=function(){sl&&rl.time("TopParser._parse "+this.name);var e=this.structure,t=this.structureBuilder,n=e.atomMap,r=e.bondStore,i=e.atomStore;i.addField("partialCharge",1,"float32");var o,a,s=[],l={};this.streamer.eachChunkOfLines((function(t){!function(t,n,r){for(var i=t;i<n;++i){var c=r[i],u=c.trim();if(u&&"*"!==u[0]&&";"!==u[0]){if(u.startsWith("#include"))throw new Error("TopParser: #include statements not allowed");var d=c.match(Zx);if(null===d){var f=u.indexOf(";");if(-1!==f&&(u=u.substring(0,f).trim()),2===a){var p=u.split(Hx)[0];l[p]=o}else if(3===a){var h=u.split(Hx);o.atoms.push([parseInt(h[2]),h[3],h[4],parseFloat(h[6])])}else if(4===a){var m=u.split(Hx);o.bonds.push([parseInt(m[0]),parseInt(m[1])])}else if(0===a)e.title=u;else if(1===a){var g=u.split(Hx);s.push([g[0],parseInt(g[1])])}}else{var v=d[1];"moleculetype"===v?(a=2,o={atoms:[],bonds:[]}):a="atoms"===v?3:"bonds"===v?4:"system"===v?0:"molecules"===v?1:void 0}}}}(0,t.length,t)}));var c=0,u=0;s.forEach((function(e){var t=e[0],n=e[1],r=l[t];c+=n*r.atoms.length,u+=n*r.bonds.length})),i.resize(c),r.resize(u);var d,f=0,p=0,h=0,m=0,g=0,v=0;s.forEach((function(e){for(var o=e[0],a=e[1],s=l[o],c=Zh(m),u=function(e){d=-1;var a=Gd.includes(o)?c:Zh(h);s.atoms.forEach((function(e){var r=e[0],o=e[1],s=e[2],l=e[3];r!==d&&++p,i.atomTypeId[f]=n.add(s),i.serial[f]=f+1,i.partialCharge[f]=l,t.addAtom(0,c,a,o,p+1),++f,d=r})),s.bonds.forEach((function(e){r.atomIndex1[g]=v+e[0]-1,r.atomIndex2[g]=v+e[1]-1,++g})),++h,v+=s.atoms.length},y=0;y<a;++y)u();++m})),r.count=u,t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),Wh(e,!0),$h(e,!0,!0),Jh(e),sl&&rl.timeEnd("TopParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Ub);gl.add("top",Ux);var Vx=function(e){function t(t,n){e.call(this,t,n),this.frames=new xg(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"trajectory"},n.__objName.get=function(){return"frames"},Object.defineProperties(t.prototype,n),t}(Zb),Gx=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dcd"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("DcdParser._parse "+this.name);var e=Ba(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o={},a=0,s=new Int32Array(e,0,23),l=s[0]!==t.getInt32(0);if(84!==s[0])for(var c=e.byteLength,u=0;u<c;u+=4)t.setFloat32(u,t.getFloat32(u),!0);84!==s[0]&&rl.error("dcd bad format, header block start"),"CORD"!==String.fromCharCode(t.getUint8(4),t.getUint8(5),t.getUint8(6),t.getUint8(7))&&rl.error("dcd bad format, format string");var d=!1,f=!1,p=!1;0!==s[22]&&(d=!0,0!==s[12]&&(f=!0),1===s[13]&&(p=!0)),o.NSET=s[2],o.ISTART=s[3],o.NSAVC=s[4],o.NAMNF=s[10],o.DELTA=d?t.getFloat32(44,l):t.getFloat64(44,l),84!==s[22]&&rl.error("dcd bad format, header block end"),a=a+84+8;var h=t.getInt32(a,l),m=a+1;if((h-4)%80!==0&&rl.error("dcd bad format, title block start"),o.TITLE=Na(new Uint8Array(e,m,h)),t.getInt32(m+h+4-1,l)!==h&&rl.error("dcd bad format, title block end"),a=a+h+8,4!==t.getInt32(a,l)&&rl.error("dcd bad format, natom block start"),o.NATOM=t.getInt32(a+4,l),4!==t.getInt32(a+8,l)&&rl.error("dcd bad format, natom block end"),a=a+4+8,o.NAMNF>0)rl.error("dcd format with fixed atoms unsupported, aborting");else{for(var g=o.NATOM,v=4*g,y=0,b=o.NSET;y<b;++y){if(f){a+=4;var x=new Float32Array(9);x[0]=t.getFloat64(a,l),x[4]=t.getFloat64(a+16,l),x[8]=t.getFloat64(a+40,l),i.push(x),a+=48,a+=4}for(var w=new Float32Array(3*g),_=0;_<3;++_){t.getInt32(a,l)!==v&&rl.error("dcd bad format, coord block start",y,_),a+=4;for(var S=new Float32Array(e,a,g),C=0;C<g;++C)w[3*C+_]=S[C];a+=v,t.getInt32(a,l)!==v&&rl.error("dcd bad format, coord block end",y,_),a+=4}if(r.push(w),p)a+=4+t.getInt32(a,l)+4}o.DELTA&&(n.deltaTime=20.45482949774598*o.DELTA),o.ISTART>=1&&(n.timeOffset=(o.ISTART-1)*n.deltaTime),sl&&rl.timeEnd("DcdParser._parse "+this.name)}},Object.defineProperties(t.prototype,n),t}(Vx);function Wx(e,t){if(e)throw new TypeError("Not a valid NetCDF v3.x file: "+t)}function $x(e){e.offset%4!==0&&e.skip(4-e.offset%4)}function qx(e){var t=e.readUint32(),n=e.readChars(t);return $x(e),n}gl.add("dcd",Gx);var Yx=1,Xx=2,Kx=3,Jx=4,Qx=5,ew=6;function tw(e){switch(Number(e)){case Yx:return"byte";case Xx:return"char";case Kx:return"short";case Jx:return"int";case Qx:return"float";case ew:return"double";default:return"undefined"}}function nw(e){switch(Number(e)){case Yx:case Xx:return 1;case Kx:return 2;case Jx:case Qx:return 4;case ew:return 8;default:return-1}}function rw(e){switch(String(e)){case"byte":return Yx;case"char":return Xx;case"short":return Kx;case"int":return Jx;case"float":return Qx;case"double":return ew;default:return-1}}function iw(e,t){if(1!==e){for(var n=new Array(e),r=0;r<e;r++)n[r]=t();return n}return t()}function ow(e,t,n){switch(t){case Yx:return e.readBytes(n);case Xx:return function(e){if(0===e.charCodeAt(e.length-1))return e.substring(0,e.length-1);return e}(e.readChars(n));case Kx:return iw(n,e.readInt16.bind(e));case Jx:return iw(n,e.readInt32.bind(e));case Qx:return iw(n,e.readFloat32.bind(e));case ew:return iw(n,e.readFloat64.bind(e));default:return void Wx(!0,"non valid type "+t)}}function aw(e,t){var n={recordDimension:{length:e.readUint32()}};n.version=t;var r=function(e){var t,n,r,i=e.readUint32();if(0===i)return Wx(0!==e.readUint32(),"wrong empty tag for list of dimensions"),[];Wx(10!==i,"wrong tag for list of dimensions");var o=e.readUint32();t=new Array(o);for(var a=0;a<o;a++){var s=qx(e),l=e.readUint32();0===l&&(n=a,r=s),t[a]={name:s,size:l}}return{dimensions:t,recordId:n,recordName:r}}(e);n.recordDimension.id=r.recordId,n.recordDimension.name=r.recordName,n.dimensions=r.dimensions,n.globalAttributes=sw(e);var i=function(e,t,n){var r,i=e.readUint32(),o=0;if(0===i)return Wx(0!==e.readUint32(),"wrong empty tag for list of variables"),[];Wx(11!==i,"wrong tag for list of variables");var a=e.readUint32();r=new Array(a);for(var s=0;s<a;s++){for(var l=qx(e),c=e.readUint32(),u=new Array(c),d=0;d<c;d++)u[d]=e.readUint32();var f=sw(e),p=e.readUint32();Wx(p<1&&p>6,"non valid type "+p);var h=e.readUint32(),m=e.readUint32();2===n&&(Wx(m>0,"offsets larger than 4GB not supported"),m=e.readUint32()),u[0]===t&&(o+=h),r[s]={name:l,dimensions:u,attributes:f,type:tw(p),size:h,offset:m,record:u[0]===t}}return{variables:r,recordStep:o}}(e,r.recordId,t);return n.variables=i.variables,n.recordDimension.recordStep=i.recordStep,n}function sw(e){var t,n=e.readUint32();if(0===n)return Wx(0!==e.readUint32(),"wrong empty tag for list of attributes"),[];Wx(12!==n,"wrong tag for list of attributes");var r=e.readUint32();t=new Array(r);for(var i=0;i<r;i++){var o=qx(e),a=e.readUint32();Wx(a<1||a>6,"non valid type "+a);var s=e.readUint32(),l=ow(e,a,s);$x(e),t[i]={name:o,type:tw(a),value:l}}return t}var lw=function(e){var t=new jl(e);t.setBigEndian(),Wx("CDF"!==t.readChars(3),"should start with CDF");var n=t.readByte();Wx(n>2,"unknown version"),this.header=aw(t,n),this.buffer=t},cw={version:{configurable:!0},recordDimension:{configurable:!0},dimensions:{configurable:!0},globalAttributes:{configurable:!0},variables:{configurable:!0}};cw.version.get=function(){return 1===this.header.version?"classic format":"64-bit offset format"},cw.recordDimension.get=function(){return this.header.recordDimension},cw.dimensions.get=function(){return this.header.dimensions},cw.globalAttributes.get=function(){return this.header.globalAttributes},cw.variables.get=function(){return this.header.variables},lw.prototype.hasDataVariable=function(e){return-1!==this.header.variables.findIndex((function(t){return t.name===e}))},lw.prototype.getDataVariable=function(e){var t;return Wx(void 0===(t="string"===typeof e?this.header.variables.find((function(t){return t.name===e})):e),"variable not found"),this.buffer.seek(t.offset),t.record?function(e,t,n){for(var r=rw(t.type),i=t.size?t.size/nw(r):1,o=n.length,a=new Array(o),s=n.recordStep,l=0;l<o;l++){var c=e.offset;a[l]=ow(e,r,i),e.seek(c+s)}return a}(this.buffer,t,this.header.recordDimension):function(e,t){for(var n=rw(t.type),r=t.size/nw(n),i=new Array(r),o=0;o<r;o++)i[o]=ow(e,n,1);return i}(this.buffer,t)},Object.defineProperties(lw.prototype,cw);var uw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"nctraj"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("NctrajParser._parse "+this.name);var e=new lw(this.streamer.data),t=this.frames,n=t.coordinates,r=t.boxes,i=t.times;e.getDataVariable("coordinates").forEach((function(e){n.push(new Float32Array(e))})),e.hasDataVariable("cell_lengths")&&e.getDataVariable("cell_lengths").forEach((function(e){r.push(new Float32Array(e))})),e.hasDataVariable("time")&&e.getDataVariable("time").forEach((function(e){i.push(e)})),i.length>=1&&(t.timeOffset=i[0]),i.length>=2&&(t.deltaTime=i[1]-i[0]),sl&&rl.timeEnd("NctrajParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vx);gl.add("nctraj",uw),gl.add("ncdf",uw),gl.add("nc",uw);var dw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"trr"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("TrrParser._parse "+this.name);for(var e=Ba(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o=n.times,a=0;;){a+=8;var s=t.getInt32(a);a+=4,a+=s;var l=t.getInt32(a+8),c=t.getInt32(a+12),u=t.getInt32(a+16),d=t.getInt32(a+28),f=t.getInt32(a+32),p=t.getInt32(a+36),h=t.getInt32(a+40);a+=52;var m=l/9,g=3*h;if(8===m?o.push(t.getFloat64(a)):o.push(t.getFloat32(a)),a+=2*m,l){var v=new Float32Array(9);if(8===m)for(var y=0;y<9;++y)v[y]=10*t.getFloat64(a),a+=8;else for(var b=0;b<9;++b)v[b]=10*t.getFloat32(a),a+=4;i.push(v)}if(a+=c,a+=u,d){var x=void 0;if(8===m){x=new Float32Array(g);for(var w=0;w<g;++w)x[w]=10*t.getFloat64(a),a+=8}else{for(var _=new Uint32Array(e,a,g),S=0;S<g;++S){var C=_[S];_[S]=(255&C)<<24|(65280&C)<<8|C>>8&65280|C>>24&255}x=new Float32Array(e,a,g);for(var k=0;k<g;++k)x[k]*=10,a+=4}r.push(x)}if(a+=f,(a+=p)>=e.byteLength)break}o.length>=1&&(n.timeOffset=o[0]),o.length>=2&&(n.deltaTime=o[1]-o[0]),sl&&rl.timeEnd("TrrParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vx);gl.add("trr",dw);var fw=new Uint32Array([0,0,0,0,0,0,0,0,0,8,10,12,16,20,25,32,40,50,64,80,101,128,161,203,256,322,406,512,645,812,1024,1290,1625,2048,2580,3250,4096,5060,6501,8192,10321,13003,16384,20642,26007,32768,41285,52015,65536,82570,104031,131072,165140,208063,262144,330280,416127,524287,660561,832255,1048576,1321122,1664510,2097152,2642245,3329021,4194304,5284491,6658042,8388607,10568983,13316085,16777216]);function pw(e){for(var t=1,n=0;e>=t&&n<32;)n++,t<<=1;return n}var hw=new Uint8Array(32);function mw(e,t){var n=1,r=0;hw[0]=1;for(var i=0;i<e;i++){var o=void 0,a=0;for(o=0;o<n;o++)a+=hw[o]*t[i],hw[o]=255&a,a>>=8;for(;0!==a;)hw[o++]=255&a,a>>=8;n=o}var s=1;for(n--;hw[n]>=s;)r++,s*=2;return r+8*n}function gw(e,t,n,r){for(var i=(1<<n)-1,o=r[1],a=r[2],s=e[0],l=0;n>=8;)l|=(a=a<<8|t[s++])>>o<<n-8,n-=8;return n>0&&(o<n&&(o+=8,a=a<<8|t[s++]),l|=a>>(o-=n)&(1<<n)-1),l&=i,e[0]=s,e[1]=o,e[2]=a,l}var vw=new Int32Array(32);function yw(e,t,n,r,i,o,a){var s=0;for(vw[1]=0,vw[2]=0,vw[3]=0;r>8;)vw[s++]=gw(e,t,8,a),r-=8;r>0&&(vw[s++]=gw(e,t,r,a));for(var l=n-1;l>0;l--){for(var c=0,u=s-1;u>=0;u--){var d=(c=c<<8|vw[u])/i[l]|0;vw[u]=d,c-=d*i[l]}o[l]=c}o[0]=vw[0]|vw[1]<<8|vw[2]<<16|vw[3]<<24}var bw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"xtc"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("XtcParser._parse "+this.name);for(var e=Ba(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o=n.times,a=new Int32Array(6),s=new Int32Array(3),l=new Int32Array(3),c=new Uint32Array(3),u=new Float32Array(3),d=new Float32Array(3),f=0,p=new Int32Array(3),h=new Uint32Array(p.buffer);;){var m=void 0,g=t.getInt32(f+4);f+=12;var v=3*g;o.push(t.getFloat32(f)),f+=4;for(var y=new Float32Array(9),b=0;b<9;++b)y[b]=10*t.getFloat32(f),f+=4;if(i.push(y),g<=9){m=new Float32Array(g);for(var x=0;x<g;++x)m[x]=t.getFloat32(f),f+=4}else{p[0]=p[1]=p[2]=0,s[0]=s[1]=s[2]=0,c[0]=c[1]=c[2]=0,l[0]=l[1]=l[2]=0,u[0]=u[1]=u[2]=0,d[0]=d[1]=d[2]=0,m=new Float32Array(v);var w=0,_=t.getInt32(f);f+=4;var S=t.getFloat32(f);f+=4,a[0]=t.getInt32(f),a[1]=t.getInt32(f+4),a[2]=t.getInt32(f+8),a[3]=t.getInt32(f+12),a[4]=t.getInt32(f+16),a[5]=t.getInt32(f+20),s[0]=a[3]-a[0]+1,s[1]=a[4]-a[1]+1,s[2]=a[5]-a[2]+1,f+=24;var C=void 0;(s[0]|s[1]|s[2])>16777215?(l[0]=pw(s[0]),l[1]=pw(s[1]),l[2]=pw(s[2]),C=0):C=mw(3,s);var k=t.getInt32(f);f+=4;var M=k-1,T=fw[M=9>M?9:M]/2|0,A=fw[k]/2|0;c[0]=c[1]=c[2]=fw[k];var E=4*Math.ceil(t.getInt32(f)/4);f+=4;var P=1/S,R=0,O=0,I=new Uint8Array(e,f);for(u[0]=u[1]=u[2]=0;O<_;){0===C?(u[0]=gw(p,I,l[0],h),u[1]=gw(p,I,l[1],h),u[2]=gw(p,I,l[2],h)):yw(p,I,3,C,s,u,h),O++,u[0]+=a[0],u[1]+=a[1],u[2]+=a[2],d[0]=u[0],d[1]=u[1],d[2]=u[2];var L=0;if(1===gw(p,I,1,h)&&(R=gw(p,I,5,h),R-=L=R%3,L--),R>0){u[0]=u[1]=u[2]=0;for(var D=0;D<R;D+=3){if(yw(p,I,3,k,c,u,h),O++,u[0]+=d[0]-A,u[1]+=d[1]-A,u[2]+=d[2]-A,0===D){var N=u[0];u[0]=d[0],d[0]=N,N=u[1],u[1]=d[1],d[1]=N,N=u[2],u[2]=d[2],d[2]=N,m[w++]=d[0]*P,m[w++]=d[1]*P,m[w++]=d[2]*P}else d[0]=u[0],d[1]=u[1],d[2]=u[2];m[w++]=u[0]*P,m[w++]=u[1]*P,m[w++]=u[2]*P}}else m[w++]=u[0]*P,m[w++]=u[1]*P,m[w++]=u[2]*P;if(k+=L,L<0?(A=T,T=k>9?fw[k-1]/2|0:0):L>0&&(T=A,A=fw[k]/2|0),c[0]=c[1]=c[2]=fw[k],0===c[0]||0===c[1]||0===c[2])return void console.error("(xdrfile error) Undefined error.")}f+=E}for(var F=0;F<v;F++)m[F]*=10;if(r.push(m),f>=e.byteLength)break}o.length>=1&&(n.timeOffset=o[0]),o.length>=2&&(n.deltaTime=o[1]-o[0]),sl&&rl.timeEnd("XtcParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Vx);gl.add("xtc",bw);var xw=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.volume=new kp(this.name,this.path),this.voxelSize=Sa(r.voxelSize,1)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"volume"},n.__objName.get=function(){return"volume"},t.prototype._afterParse=function(){this.volume.setMatrix(this.getMatrix()),e.prototype._afterParse.call(this)},t.prototype.getMatrix=function(){return new j},Object.defineProperties(t.prototype,n),t}(Zb),ww=/\s+/,_w=/-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,Sw=.529177210859,Cw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"cube"},t.prototype._parse=function(){sl&&rl.time("CubeParser._parse "+this.name);var e=this.volume,t=this.streamer.peekLines(6),n={},r=Sw*this.voxelSize;function i(e,n){var r=t[e].trim().split(ww)[n];return parseFloat(r)}n.atomCount=Math.abs(i(2,0)),n.originX=i(2,1)*Sw,n.originY=i(2,2)*Sw,n.originZ=i(2,3)*Sw,n.NVX=i(3,0),n.NVY=i(4,0),n.NVZ=i(5,0),n.basisX=new H(i(3,1),i(3,2),i(3,3)).multiplyScalar(r),n.basisY=new H(i(4,1),i(4,2),i(4,3)).multiplyScalar(r),n.basisZ=new H(i(5,1),i(5,2),i(5,3)).multiplyScalar(r);var o=new Float32Array(n.NVX*n.NVY*n.NVZ),a=0,s=0,l=i(2,0)>0?0:1;this.streamer.eachChunkOfLines((function(e){!function(e,t,r){for(var i=e;i<t;++i){var c=r[i].trim();if(""!==c&&s>=n.atomCount+6+l)for(var u=c.match(_w),d=0,f=u.length;d<f;++d)o[a]=parseFloat(u[d]),++a;++s}}(0,e.length,e)})),e.header=n,e.setData(o,n.NVZ,n.NVY,n.NVX),sl&&rl.timeEnd("CubeParser._parse "+this.name)},t.prototype.getMatrix=function(){var e=this.volume.header,t=new j;return t.multiply((new j).makeTranslation(e.originX,e.originY,e.originZ)),t.multiply((new j).makeBasis(e.basisZ,e.basisY,e.basisX)),t},Object.defineProperties(t.prototype,n),t}(xw);gl.add("cub",Cw),gl.add("cube",Cw);var kw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dsn6"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("Dsn6Parser._parse "+this.name);var e,t,n=this.volume,r={},i=Ba(this.streamer.data),o=new Int16Array(i),a=new Uint8Array(i),s=String.fromCharCode.apply(null,a.subarray(0,512));if(s.startsWith(":-)"))r.xStart=parseInt(s.substr(10,5)),r.yStart=parseInt(s.substr(15,5)),r.zStart=parseInt(s.substr(20,5)),r.xExtent=parseInt(s.substr(32,5)),r.yExtent=parseInt(s.substr(38,5)),r.zExtent=parseInt(s.substr(42,5)),r.xRate=parseInt(s.substr(52,5)),r.yRate=parseInt(s.substr(58,5)),r.zRate=parseInt(s.substr(62,5)),r.xlen=parseFloat(s.substr(73,10))*this.voxelSize,r.ylen=parseFloat(s.substr(83,10))*this.voxelSize,r.zlen=parseFloat(s.substr(93,10))*this.voxelSize,r.alpha=parseFloat(s.substr(103,10)),r.beta=parseFloat(s.substr(113,10)),r.gamma=parseFloat(s.substr(123,10)),e=parseFloat(s.substr(138,12))/100,t=parseInt(s.substr(155,8)),r.sigma=100*parseFloat(s.substr(170,12));else{if(100!==o[18])for(var l=0,c=o.length;l<c;++l){var u=o[l];o[l]=(255&u)<<8|u>>8&255}r.xStart=o[0],r.yStart=o[1],r.zStart=o[2],r.xExtent=o[3],r.yExtent=o[4],r.zExtent=o[5],r.xRate=o[6],r.yRate=o[7],r.zRate=o[8];var d=1/o[17],f=d*this.voxelSize;r.xlen=o[9]*f,r.ylen=o[10]*f,r.zlen=o[11]*f,r.alpha=o[12]*d,r.beta=o[13]*d,r.gamma=o[14]*d,e=o[15]/100,t=o[16],r.gamma=o[14]*d}n.header=r,sl&&rl.log(r,e,t);for(var p=new Float32Array(r.xExtent*r.yExtent*r.zExtent),h=512,m=Math.ceil(r.xExtent/8),g=Math.ceil(r.yExtent/8),v=Math.ceil(r.zExtent/8),y=0;y<v;++y)for(var b=0;b<g;++b)for(var x=0;x<m;++x)for(var w=0;w<8;++w)for(var _=8*y+w,S=0;S<8;++S)for(var C=8*b+S,k=0;k<8;++k){var M=8*x+k;if(!(M<r.xExtent&&C<r.yExtent&&_<r.zExtent)){h+=8-k;break}p[(M*r.yExtent+C)*r.zExtent+_]=(a[h]-t)/e,++h}n.setData(p,r.zExtent,r.yExtent,r.xExtent),r.sigma&&n.setStats(void 0,void 0,void 0,r.sigma),sl&&rl.timeEnd("Dsn6Parser._parse "+this.name)},t.prototype.getMatrix=function(){var e=this.volume.header,t=[e.xlen,0,0],n=[e.ylen*Math.cos(Math.PI/180*e.gamma),e.ylen*Math.sin(Math.PI/180*e.gamma),0],r=[e.zlen*Math.cos(Math.PI/180*e.beta),e.zlen*(Math.cos(Math.PI/180*e.alpha)-Math.cos(Math.PI/180*e.gamma)*Math.cos(Math.PI/180*e.beta))/Math.sin(Math.PI/180*e.gamma),0];r[2]=Math.sqrt(e.zlen*e.zlen*Math.sin(Math.PI/180*e.beta)*Math.sin(Math.PI/180*e.beta)-r[1]*r[1]);var i=[[],t,n,r],o=[0,e.xRate,e.yRate,e.zRate],a=[0,1,2,3],s=new j;return s.set(i[a[1]][0]/o[a[1]],i[a[2]][0]/o[a[2]],i[a[3]][0]/o[a[3]],0,i[a[1]][1]/o[a[1]],i[a[2]][1]/o[a[2]],i[a[3]][1]/o[a[3]],0,i[a[1]][2]/o[a[1]],i[a[2]][2]/o[a[2]],i[a[3]][2]/o[a[3]],0,0,0,0,1),s.multiply((new j).makeRotationY(qa(90))),s.multiply((new j).makeTranslation(-e.zStart,e.yStart,e.xStart)),s.multiply((new j).makeScale(-1,1,1)),s},Object.defineProperties(t.prototype,n),t}(xw);gl.add("dsn6",kw),gl.add("brix",kw);var Mw=/\s+/,Tw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"dx"},t.prototype._parse=function(){sl&&rl.time("DxParser._parse "+this.name);var e=this.volume,t=this.streamer.peekLines(30),n=this.parseHeaderLines(t),r=this.volume.header,i=n.dataLineStart,o=r.nx*r.ny*r.nz,a=new Float32Array(o),s=0,l=0;this.streamer.eachChunkOfLines((function(e){!function(e,t,n){for(var r=e;r<t;++r){if(s<o&&l>i){var c=n[r].trim();if(""!==c)for(var u=c.split(Mw),d=0,f=u.length;d<f;++d)a[s]=parseFloat(u[d]),++s}++l}}(0,e.length,e)})),e.setData(a,r.nz,r.ny,r.nx),sl&&rl.timeEnd("DxParser._parse "+this.name)},t.prototype.parseHeaderLines=function(e){for(var t=this,n={},r=e.length,i=0,o=0,a=0,s=0;s<r;++s){var l=void 0,c=e[s];if(c.startsWith("object 1"))l=c.split(Mw),n.nx=parseInt(l[5]),n.ny=parseInt(l[6]),n.nz=parseInt(l[7]);else if(c.startsWith("origin"))l=c.split(Mw),n.xmin=parseFloat(l[1]),n.ymin=parseFloat(l[2]),n.zmin=parseFloat(l[3]);else if(c.startsWith("delta"))l=c.split(Mw),0===a?n.hx=parseFloat(l[1])*t.voxelSize:1===a?n.hy=parseFloat(l[2])*t.voxelSize:2===a&&(n.hz=parseFloat(l[3])*t.voxelSize),a+=1;else if(c.startsWith("object 3")){i=s,o+=c.length+1;break}o+=c.length+1}return this.volume.header=n,{dataLineStart:i,headerByteCount:o}},t.prototype.getMatrix=function(){var e=this.volume.header,t=new j;return t.multiply((new j).makeRotationY(qa(90))),t.multiply((new j).makeTranslation(-e.zmin,e.ymin,e.xmin)),t.multiply((new j).makeScale(-e.hz,e.hy,e.hx)),t},Object.defineProperties(t.prototype,n),t}(xw);gl.add("dx",Tw);var Aw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dxbin"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("DxbinParser._parse "+this.name);for(var e=Ba(this.streamer.data),t=function(e,t,n){void 0===t&&(t=10485760),void 0===n&&(n="\n");for(var r="",i=[],o=0;o<e.length;o+=t){var a=Na(e.subarray(o,o+t)),s=a.lastIndexOf(n);if(-1===s)r+=a;else{var l=r+a.substr(0,s);i=i.concat(l.split(n)),r=s===a.length-n.length?"":a.substr(s+n.length)}}return""!==r&&i.push(r),i}(new Uint8Array(e,0,1e3)),n=this.parseHeaderLines(t),r=this.volume.header,i=n.headerByteCount,o=r.nx*r.ny*r.nz,a=new DataView(e),s=new Float32Array(o),l=0;l<o;++l)s[l]=a.getFloat64(8*l+i,!0);this.volume.setData(s,r.nz,r.ny,r.nx),sl&&rl.timeEnd("DxbinParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Tw);gl.add("dxbin",Aw);var Ew=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"mrc"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("MrcParser._parse "+this.name);var e,t=this.volume,n={},r=Ba(this.streamer.data),i=new Int32Array(r,0,56),o=new Float32Array(r,0,56),a=new DataView(r);if(n.MAP=String.fromCharCode(a.getUint8(208),a.getUint8(209),a.getUint8(210),a.getUint8(211)),n.MACHST=[a.getUint8(212),a.getUint8(213)],17===n.MACHST[0]&&17===n.MACHST[1])for(var s=r.byteLength,l=0;l<s;l+=4)a.setFloat32(l,a.getFloat32(l),!0);if(n.NX=i[0],n.NY=i[1],n.NZ=i[2],n.MODE=i[3],n.NXSTART=i[4],n.NYSTART=i[5],n.NZSTART=i[6],n.MX=i[7],n.MY=i[8],n.MZ=i[9],n.xlen=o[10]*this.voxelSize,n.ylen=o[11]*this.voxelSize,n.zlen=o[12]*this.voxelSize,n.alpha=o[13],n.beta=o[14],n.gamma=o[15],n.MAPC=i[16],n.MAPR=i[17],n.MAPS=i[18],n.DMIN=o[19],n.DMAX=o[20],n.DMEAN=o[21],n.ISPG=i[22],n.NSYMBT=i[23],n.LSKFLG=i[24],n.originX=o[49],n.originY=o[50],n.originZ=o[51],n.ARMS=o[54],t.header=n,2===n.MODE)e=new Float32Array(r,1024+n.NSYMBT,n.NX*n.NY*n.NZ);else if(0===n.MODE){if(e=new Float32Array(new Int8Array(r,1024+n.NSYMBT,n.NX*n.NY*n.NZ)),-128===i[39]&&127===i[40])for(var c=(n.DMAX-n.DMIN)/255,u=.5*(n.DMIN+n.DMAX+c),d=0,f=e.length;d<f;++d)e[d]=c*e[d]+u}else rl.error("MrcParser unknown mode",n.MODE);t.setData(e,n.NX,n.NY,n.NZ),0!==n.ARMS&&t.setStats(n.DMIN,n.DMAX,n.DMEAN,n.ARMS),sl&&rl.timeEnd("MrcParser._parse "+this.name)},t.prototype.getMatrix=function(){var e=this.volume.header,t=[e.xlen,0,0],n=[e.ylen*Math.cos(Math.PI/180*e.gamma),e.ylen*Math.sin(Math.PI/180*e.gamma),0],r=[e.zlen*Math.cos(Math.PI/180*e.beta),e.zlen*(Math.cos(Math.PI/180*e.alpha)-Math.cos(Math.PI/180*e.gamma)*Math.cos(Math.PI/180*e.beta))/Math.sin(Math.PI/180*e.gamma),0];r[2]=Math.sqrt(e.zlen*e.zlen*Math.sin(Math.PI/180*e.beta)*Math.sin(Math.PI/180*e.beta)-r[1]*r[1]);var i=[[],t,n,r],o=[0,e.MX,e.MY,e.MZ],a=[0,e.MAPC,e.MAPR,e.MAPS],s=new j;return s.set(i[a[1]][0]/o[a[1]],i[a[2]][0]/o[a[2]],i[a[3]][0]/o[a[3]],0,i[a[1]][1]/o[a[1]],i[a[2]][1]/o[a[2]],i[a[3]][1]/o[a[3]],0,i[a[1]][2]/o[a[1]],i[a[2]][2]/o[a[2]],i[a[3]][2]/o[a[3]],0,0,0,0,1),s.setPosition(new H(e.originX,e.originY,e.originZ)),s.multiply((new j).makeTranslation(e.NXSTART,e.NYSTART,e.NZSTART)),s},Object.defineProperties(t.prototype,n),t}(xw);gl.add("mrc",Ew),gl.add("ccp4",Ew),gl.add("map",Ew);var Pw=/\s+/;function Rw(e){return e.trim().split(Pw).map(parseFloat)}var Ow=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"xplor"},t.prototype._parse=function(){sl&&rl.time("XplorParser._parse "+this.name);var e,t=this.volume,n=this.streamer.peekLines(8),r={},i=(e=n[2].startsWith("REMARKS")?parseInt(n[1].substring(0,8))+2:5)+3,o=Rw(n[e]);r.NA=o[0],r.AMIN=o[1],r.AMAX=o[2],r.NB=o[3],r.BMIN=o[4],r.BMAX=o[5],r.NC=o[6],r.CMIN=o[7],r.CMAX=o[8];var a=Rw(n[e+1]);r.a=a[0]*this.voxelSize,r.b=a[1]*this.voxelSize,r.c=a[2]*this.voxelSize,r.alpha=a[3],r.beta=a[4],r.gamma=a[5];var s=r.AMAX-r.AMIN+1,l=r.BMAX-r.BMIN+1,c=r.CMAX-r.CMIN+1,u=s*l*c,d=new Float32Array(u),f=Math.ceil(1+s*l/6),p=0,h=0;this.streamer.eachChunkOfLines((function(e){!function(e,t,n){for(var o=e;o<t;++o){var a=n[o];if(h>=i&&(h-i)%f!==0&&p<u)for(var s=0;s<6;++s){var l=parseFloat(a.substr(12*s,12));if(isNaN(l))break;d[p++]=l}else if(p===u){var c=a.trim();if(c&&"-9999"!==c){var m=Rw(a);r.RAVE=m[0],r.RSIGMA=m[1]}}++h}}(0,e.length,e)})),t.header=r,t.setData(d,s,l,c),0!==r.RAVE&&1!==r.RSIGMA&&t.setStats(void 0,void 0,r.RAVE,r.RSIGMA),sl&&rl.timeEnd("XplorParser._parse "+this.name)},t.prototype.getMatrix=function(){var e=this.volume.header,t=[e.a,0,0],n=[e.b*Math.cos(Math.PI/180*e.gamma),e.b*Math.sin(Math.PI/180*e.gamma),0],r=[e.c*Math.cos(Math.PI/180*e.beta),e.c*(Math.cos(Math.PI/180*e.alpha)-Math.cos(Math.PI/180*e.gamma)*Math.cos(Math.PI/180*e.beta))/Math.sin(Math.PI/180*e.gamma),0];r[2]=Math.sqrt(e.c*e.c*Math.sin(Math.PI/180*e.beta)*Math.sin(Math.PI/180*e.beta)-r[1]*r[1]);var i=[[],t,n,r],o=[0,e.NA,e.NB,e.NC],a=[0,1,2,3],s=new j;return s.set(i[a[1]][0]/o[a[1]],i[a[2]][0]/o[a[2]],i[a[3]][0]/o[a[3]],0,i[a[1]][1]/o[a[1]],i[a[2]][1]/o[a[2]],i[a[3]][1]/o[a[3]],0,i[a[1]][2]/o[a[1]],i[a[2]][2]/o[a[2]],i[a[3]][2]/o[a[3]],0,0,0,0,1),s.multiply((new j).makeTranslation(e.AMIN,e.BMIN,e.CMIN)),s},Object.defineProperties(t.prototype,n),t}(xw);function Iw(e,t,n){var r,i,o;e/=360,t/=100,n/=100;var a=Math.floor(6*e),s=6*e-a,l=n*(1-t),c=n*(1-s*t),u=n*(1-(1-s)*t);switch(a%6){case 0:r=n,i=u,o=l;break;case 1:r=c,i=n,o=l;break;case 2:r=l,i=n,o=u;break;case 3:r=l,i=c,o=n;break;case 4:r=u,i=l,o=n;break;case 5:r=n,i=l,o=c}return[r,i,o]}gl.add("xplor",Ow),gl.add("cns",Ow);var Lw={red:Iw(0,100,100),orange:Iw(20,100,100),gold:Iw(40,100,100),yellow:Iw(60,100,100),lime:Iw(80,100,100),green:Iw(120,80,100),sea:Iw(150,100,100),cyan:Iw(180,100,85),sky:Iw(210,75,95),blue:Iw(240,70,100),purple:Iw(275,75,100),magenta:Iw(300,95,100),hotpink:Iw(335,100,100),pink:Iw(350,55,100),peach:Iw(25,75,100),lilac:Iw(275,55,100),pinktint:Iw(340,30,100),peachtint:Iw(25,50,100),yellowtint:Iw(60,50,100),greentint:Iw(135,40,100),bluetint:Iw(220,40,100),lilactint:Iw(275,35,100),white:Iw(0,0,100),gray:Iw(0,0,50),brown:Iw(20,45,75),deadwhite:[1,1,1],deadblack:[0,0,0],invisible:[0,0,0]},Dw=/[\s,]+/,Nw=/[^{}\s]*{[^{}]+}|[^{}\s]+/g,Fw=/^{+|}+$/g,zw=/^['"]+|['"]+$/g,Bw=/\s*=\s*/g;function jw(e){for(var t,n,r,i=[],o=(e=e.replace(Bw,"=")).match(Nw),a=1;a<o.length;++a){var s=o[a];if("{"===s[0])t=s.substring(1,s.length-1);else{var l=s.split("=");2===l.length&&("color"===l[0]?n=Lw[l[1]]:"width"===l[0]?r=parseInt(l[1]):"master"===l[0]&&i.push(l[1].replace(Fw,"")))}}return{listName:t,listColor:n,listMasters:i,listWidth:r}}function Zw(e){for(var t,n,r,i=(e=e.trim()).indexOf("{"),o=e.indexOf("}"),a=e.substr(o+1).split(Dw),s=e.substr(i+1,o-1),l=[parseFloat(a[a.length-3]),parseFloat(a[a.length-2]),parseFloat(a[a.length-1])],c=4;c<=a.length;c++){var u=a[a.length-c];u in Lw&&(t=Lw[a[a.length-c]]),u.startsWith("width")&&(n=parseInt(u.substring(5))),u.startsWith("r=")&&(r=parseFloat(u.split("=")[1]))}return{label:s,position:l,color:t,radius:r,width:n}}function Hw(e){var t=e.indexOf("{"),n=e.indexOf("}");return e.substring(-1!==t?t+1:0,-1!==n?n:void 0).trim()}function Uw(e){var t=e.indexOf("}");return-1===t?void 0:e.substr(t+1).trim()}function Vw(e){for(var t,n={},r=(e=e.replace(Bw,"=")).match(Nw),i=1;i<r.length;++i){var o=r[i];if("{"===o[0])t=o.substring(1,o.length-1);else{var a=o.split("=");2===a.length?n[a[0]]=a[1].replace(Fw,""):n[a[0]]=!0}}return[t,n]}var Gw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"kin"},n.__objName.get=function(){return"kinemage"},t.prototype._parse=function(){sl&&rl.time("KinParser._parse "+this.name);var e={kinemage:void 0,onewidth:void 0,"1viewid":void 0,pdbfile:void 0,texts:[],text:"",captions:[],caption:"",groupDict:{},subgroupDict:{},masterDict:{},pointmasterDict:{},dotLists:[],vectorLists:[],ballLists:[],ribbonLists:[]};this.kinemage=e;var t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C=!1,k="",M=!1,T="",A=!1,E="",P=!1,R="",O=!1,I=!1;if(this.streamer.eachChunkOfLines((function(L){!function(L,D,N){for(var F=L;F<D;++F){var z=N[F];if("@"===z[0]&&(C=!1,M=!1,A=!1,P=!1,O=!1,I=!1),z)if(z.startsWith("@dotlist")){var B=jw(z),j=B.listColor,Z=B.listName,H=B.listMasters;C=!0,k="",n=[],r=[],i=[],t=j,e.dotLists.push({name:Z,masterArray:H,labelArray:n,positionArray:r,colorArray:i})}else if(z.startsWith("@vectorlist")){var U=jw(z),V=U.listMasters,G=U.listName,W=U.listWidth,$=U.listColor;V&&V.forEach((function(t){e.masterDict[t]||(e.masterDict[t]={indent:!1,visible:!1})})),M=!0,T="",o=null,a=null,c=[],u=[],d=[],f=[],p=[],h=[],s=$,l=[],W&&l.push(W),e.vectorLists.push({name:G,masterArray:V,label1Array:c,label2Array:u,position1Array:d,position2Array:f,color1Array:p,color2Array:h,width:l})}else if(z.startsWith("@balllist")){var q=jw(z),Y=q.listName,X=q.listColor,K=q.listMasters;K&&K.forEach((function(t){e.masterDict[t]||(e.masterDict[t]={indent:!1,visible:!1})})),A=!0,E="",v=[],m=[],y=[],b=[],g=X,e.ballLists.push({name:Y,masterArray:K,labelArray:v,radiusArray:m,positionArray:y,colorArray:b})}else if(z.startsWith("@ribbonlist")){var J=jw(z),Q=J.listMasters,ee=J.listName,te=J.listColor;Q&&Q.forEach((function(t){e.masterDict[t]||(e.masterDict[t]={indent:!1,visible:!1})})),P=!0,R="",w=[],_=[],S=[],x=te,e.ribbonLists.push({name:ee,masterArray:Q,labelArray:w,positionArray:_,colorArray:S})}else if(z.startsWith("@text"))O=!0,e.texts.push(z.substr(5));else if(z.startsWith("@caption"))I=!0,e.captions.push(z.substr(8));else if(C){var ne=Zw(z),re=ne.label,ie=ne.color,oe=ne.position;'"'===re?re=k:k=re,void 0===ie&&(ie=t),n.push(re),r.push.apply(r,oe),i.push.apply(i,ie)}else if(M){var ae=z.indexOf("{"),se=z.indexOf("{",ae+1),le=void 0,ce=void 0;-1===se?(le=z,ce=z):(le=z.substr(0,se),ce=z.substr(se));var ue=Zw(le),de=ue.label,fe=ue.color,pe=ue.width,he=ue.position;if('"'===de?de=T:T=de,void 0===fe&&(fe=s),pe&&l.push(pe),c.push(de),d.push.apply(d,he),p.push.apply(p,fe),-1===se&&o)u.push(T),f.push.apply(f,o),h.push.apply(h,a),T=de,o=he,a=fe;else{var me=Zw(ce),ge=me.label,ve=me.color,ye=me.position;'"'===ge?ge=T:T=ge,void 0===ve&&(ve=s),u.push(ge),f.push.apply(f,ye),h.push.apply(h,ve),o=ye,a=ve}}else if(A){var be=Zw(z),xe=be.label,we=be.radius,_e=be.color,Se=be.position;'"'===xe?xe=E:E=xe,void 0===we&&(we=1),void 0===_e&&(_e=g),v.push(xe),m.push(we),y.push.apply(y,Se),b.push.apply(b,_e)}else if(P){var Ce=Zw(z),ke=Ce.label,Me=Ce.color,Te=Ce.position;'"'===ke?ke=R:R=ke,void 0===Me&&(Me=x),w.push(ke),_.push.apply(_,Te),S.push.apply(S,Me)}else if(O)e.texts.push(z);else if(I)e.captions.push(z);else if(z.startsWith("@kinemage"))e.kinemage=parseInt(z.substr(9).trim());else if(z.startsWith("@onewidth"))e.onewidth=!0;else if(z.startsWith("@1viewid"))e["1viewid"]=Hw(z);else if(z.startsWith("@pdbfile"))e.pdbfile=Hw(z);else if(z.startsWith("@group")){var Ae=Vw(z),Ee=Ae[0],Pe=Ae[1];for(var Re in e.groupDict[Ee]||(e.groupDict[Ee]={dominant:!1,animate:!1}),Pe)e.groupDict[Ee][Re]=Pe[Re]}else if(z.startsWith("@subgroup")){var Oe=Vw(z),Ie=Oe[0],Le=Oe[1];for(var De in e.subgroupDict[Ie]||(e.subgroupDict[Ie]={dominant:!1,animate:!1,master:void 0}),Le)e.subgroupDict[Ie][De]=Le[De]}else if(z.startsWith("@master")){var Ne=Hw(z),Fe=Uw(z);e.masterDict[Ne]||(e.masterDict[Ne]={indent:!1,visible:!1}),"on"===Fe?e.masterDict[Ne].visible=!0:"off"===Fe?e.masterDict[Ne].visible=!1:"indent"===Fe&&(e.masterDict[Ne].indent=!0)}else if(z.startsWith("@pointmaster")){var ze=Vw(z),Be=ze[0],je=ze[1];e.pointmasterDict[Be]={id:Object.keys(je)[0].replace(zw,"")}}else console.log(z);else C=!1,M=!1,A=!1,P=!1}}(0,L.length,L)})),e.text=e.texts.join("\n").trim(),e.caption=e.captions.join("\n").trim(),e.ribbonLists){var L=[];e.ribbonLists.forEach((function(e){L.push(function(e){for(var t=e.labelArray,n=e.positionArray,r=e.colorArray,i=[],o=0;o<3*(t.length-2);++o)i[o]=t[o-2*Math.floor(o/3)];for(var a=[],s=0;s<9*(n.length/3-2);++s)a[s]=n[s-6*Math.floor(s/9)];for(var l=[],c=0;c<9*(r.length/3-2);++c)l[c]=r[c-6*Math.floor(c/9)];return{name:e.name,masterArray:e.masterArray,labelArray:i,positionArray:a,colorArray:l}}(e))})),e.ribbonLists=L}sl&&rl.timeEnd("KinParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Zb);gl.add("kin",Gw);var Ww=function(e){function t(t,n){e.call(this,t,n),this.loader=this.getLoader(),this.surface=new _p(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"surface"},n.__objName.get=function(){return"surface"},t.prototype._parse=function(){var e=this.loader.parse(this.streamer.asText());this.surface.fromGeometry(e)},Object.defineProperties(t.prototype,n),t}(Zb),$w=function(){this.regexp={vertex_pattern:/^v\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,normal_pattern:/^vn\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,uv_pattern:/^vt\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}};$w.prototype={constructor:$w,setPath:function(e){this.path=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);this.object={name:e||"",geometry:{vertices:[],normals:[]},fromDeclaration:!1!==t},this.objects.push(this.object)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0]),i.push(r[e+1]),i.push(r[e+2]),i.push(r[t+0]),i.push(r[t+1]),i.push(r[t+2]),i.push(r[n+0]),i.push(r[n+1]),i.push(r[n+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0]),n.push(t[e+1]),n.push(t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0]),i.push(r[e+1]),i.push(r[e+2]),i.push(r[t+0]),i.push(r[t+1]),i.push(r[t+2]),i.push(r[n+0]),i.push(r[n+1]),i.push(r[n+2])},addFace:function(e,t,n,r,i,o,a,s){var l,c=this.vertices.length,u=this.parseVertexIndex(e,c),d=this.parseVertexIndex(t,c),f=this.parseVertexIndex(n,c);if(void 0===r?this.addVertex(u,d,f):(l=this.parseVertexIndex(r,c),this.addVertex(u,d,l),this.addVertex(d,f,l)),void 0!==i){var p=this.normals.length;u=this.parseNormalIndex(i,p),d=i===o?u:this.parseNormalIndex(o,p),f=i===a?u:this.parseNormalIndex(a,p),void 0===r?this.addNormal(u,d,f):(l=this.parseNormalIndex(s,p),this.addNormal(u,d,l),this.addNormal(d,f,l))}},addLineGeometry:function(e){this.object.geometry.type="Line";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexLine(this.parseVertexIndex(e[n],t))}};return e.startObject("",!1),e},parse:function(e){var t,n,r=this,i=this._createParserState();-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));var o=e.split("\n"),a="",s="",l="",c=[],u="function"===typeof"".trimLeft;for(t=0,n=o.length;t<n;t++)if(a=o[t],0!==(a=u?a.trimLeft():a.trim()).length&&"#"!==(s=a.charAt(0)))if("v"===s){if(" "===(l=a.charAt(1))&&null!==(c=r.regexp.vertex_pattern.exec(a)))i.vertices.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));else if("n"===l&&null!==(c=r.regexp.normal_pattern.exec(a)))i.normals.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));else if("t"!==l||null===r.regexp.uv_pattern.exec(a))throw new Error("Unexpected vertex/normal/uv line: '"+a+"'")}else if("f"===s)if(null!==(c=r.regexp.face_vertex_uv_normal.exec(a)))i.addFace(c[1],c[4],c[7],c[10],c[3],c[6],c[9],c[12]);else if(null!==r.regexp.face_vertex_uv.exec(a));else if(null!==(c=r.regexp.face_vertex_normal.exec(a)))i.addFace(c[1],c[3],c[5],c[7],c[2],c[4],c[6],c[8]);else{if(null===(c=r.regexp.face_vertex.exec(a)))throw new Error("Unexpected face line: '"+a+"'");i.addFace(c[1],c[2],c[3],c[4])}else if("l"===s){var d=a.substring(1).trim().split(" "),f=[],p=[];if(-1===a.indexOf("/"))f=d;else for(var h=0,m=d.length;h<m;h++){var g=d[h].split("/");""!==g[0]&&f.push(g[0]),""!==g[1]&&p.push(g[1])}i.addLineGeometry(f,p)}else if(null!==(c=r.regexp.object_pattern.exec(a))){var v=c[0].substr(1).trim();i.startObject(v)}else if(r.regexp.material_use_pattern.test(a));else if(r.regexp.material_library_pattern.test(a));else if(null===r.regexp.smoothing_pattern.exec(a)){if("\0"===a)continue;throw new Error("Unexpected line: '"+a+"'")}var y=[];for(t=0,n=i.objects.length;t<n;t++){var b=i.objects[t].geometry;if(0!==b.vertices.length){var x=new Oe;x.addAttribute("position",new be(new Float32Array(b.vertices),3)),b.normals.length>0?x.addAttribute("normal",new be(new Float32Array(b.normals),3)):x.computeVertexNormals(),y.push(x)}}return y}};var qw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"obj"},t.prototype.getLoader=function(){return new $w},Object.defineProperties(t.prototype,n),t}(Ww);gl.add("obj",qw);var Yw=function(){this.propertyNameMapping={}};Yw.prototype={constructor:Yw,setPropertyNameMapping:function(e){this.propertyNameMapping=e},bin2str:function(e){for(var t=new Uint8Array(e),n="",r=0;r<e.byteLength;r++)n+=String.fromCharCode(t[r]);return n},isASCII:function(e){return"ascii"===this.parseHeader(this.bin2str(e)).format},parse:function(e){return e instanceof ArrayBuffer?this.isASCII(e)?this.parseASCII(this.bin2str(e)):this.parseBinary(e):this.parseASCII(e)},parseHeader:function(e){var t="",n=0,r=/ply([\s\S]*)end_header\s/.exec(e);null!==r&&(t=r[1],n=r[0].length);var i,o,a,s={comments:[],elements:[],headerLength:n},l=t.split("\n");function c(e,t){var n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],n.name in t&&(n.name=t[n.name]),n}for(var u=0;u<l.length;u++){var d=l[u];if(""!==(d=d.trim()))switch(o=(a=d.split(/\s+/)).shift(),d=a.join(" "),o){case"format":s.format=a[0],s.version=a[1];break;case"comment":s.comments.push(d);break;case"element":void 0!==i&&s.elements.push(i),(i={}).name=a[0],i.count=parseInt(a[1]),i.properties=[];break;case"property":i.properties.push(c(a,this.propertyNameMapping));break;default:console.log("unhandled",o,a)}}return void 0!==i&&s.elements.push(i),s},parseASCIINumber:function(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}},parseASCIIElement:function(e,t){for(var n=this,r=t.split(/\s+/),i={},o=0;o<e.length;o++)if("list"===e[o].type){for(var a=[],s=n.parseASCIINumber(r.shift(),e[o].countType),l=0;l<s;l++)a.push(n.parseASCIINumber(r.shift(),e[o].itemType));i[e[o].name]=a}else i[e[o].name]=n.parseASCIINumber(r.shift(),e[o].type);return i},parseASCII:function(e){var t,n=new ye,r=this.parseHeader(e),i="";null!==(t=/end_header\s([\s\S]*)$/.exec(e))&&(i=t[1]);var o=i.split("\n"),a=0,s=0;n.useColor=!1;for(var l=0;l<o.length;l++){var c=o[l];if(""!==(c=c.trim())){s>=r.elements[a].count&&(a++,s=0);var u=this.parseASCIIElement(r.elements[a].properties,c);this.handleElement(n,r.elements[a].name,u),s++}}return this.postProcess(n)},postProcess:function(e){if(e.useColor){for(var t=0;t<e.faces.length;t++)e.faces[t].vertexColors=[e.colors[e.faces[t].a],e.colors[e.faces[t].b],e.colors[e.faces[t].c]];e.elementsNeedUpdate=!0}return e.computeBoundingSphere(),e},handleElement:function(e,t,n){if("vertex"===t){if(e.vertices.push(new H(n.x,n.y,n.z)),"red"in n&&"green"in n&&"blue"in n){e.useColor=!0;var r=new ie;r.setRGB(n.red/255,n.green/255,n.blue/255),e.colors.push(r)}}else if("face"===t){var i=n.vertex_indices;3===i.length?e.faces.push(new ge(i[0],i[1],i[2])):4===i.length&&e.faces.push(new ge(i[0],i[1],i[3]),new ge(i[1],i[2],i[3]))}},binaryRead:function(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8]}},binaryReadElement:function(e,t,n,r){for(var i,o=this,a={},s=0,l=0;l<n.length;l++)if("list"===n[l].type){var c=[],u=(i=o.binaryRead(e,t+s,n[l].countType,r))[0];s+=i[1];for(var d=0;d<u;d++)i=o.binaryRead(e,t+s,n[l].itemType,r),c.push(i[0]),s+=i[1];a[n[l].name]=c}else i=o.binaryRead(e,t+s,n[l].type,r),a[n[l].name]=i[0],s+=i[1];return[a,s]},parseBinary:function(e){for(var t,n=new ye,r=this.parseHeader(this.bin2str(e)),i="binary_little_endian"===r.format,o=new DataView(e,r.headerLength),a=0,s=0;s<r.elements.length;s++)for(var l=0;l<r.elements[s].count;l++){a+=(t=this.binaryReadElement(o,a,r.elements[s].properties,i))[1];var c=t[0];this.handleElement(n,r.elements[s].name,c)}return this.postProcess(n)}};var Xw=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"ply"},t.prototype.getLoader=function(){return new Yw},Object.defineProperties(t.prototype,n),t}(Ww);gl.add("ply",Xw);var Kw=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.delimiter=Sa(r.delimiter,","),this.comment=Sa(r.comment,"#"),this.columnNames=Sa(r.columnNames,!1),this.table={name:this.name,path:this.path,columnNames:[],data:[]}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"csv"},n.__objName.get=function(){return"table"},t.prototype._parse=function(){var e=this,t=this.table.data,n=new RegExp("\\s*"+this.delimiter+"\\s*"),r=0;this.streamer.eachChunkOfLines((function(i){for(var o=i.length,a=0;a<o;++a){var s=i[a].trim();if(!s.startsWith(e.comment)){var l=s.split(n);0===r?e.table.columnNames=l:s&&t.push(l),++r}}}))},Object.defineProperties(t.prototype,n),t}(Zb);gl.add("csv",Kw);var Jw=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.string=Sa(r.string,!1),this.json={name:this.name,path:this.path,data:{}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isJson:{configurable:!0}};return n.type.get=function(){return"json"},n.__objName.get=function(){return"json"},n.isJson.get=function(){return!0},t.prototype._parse=function(){this.streamer.isBinary()||this.string?this.json.data=JSON.parse(this.streamer.asText()):this.json.data=this.streamer.data},Object.defineProperties(t.prototype,n),t}(Zb);gl.add("json",Jw);var Qw=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.msgpack={name:this.name,path:this.path,data:void 0}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"msgpack"},n.__objName.get=function(){return"msgpack"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("MsgpackParser._parse "+this.name),this.msgpack.data=Cx(this.streamer.data),sl&&rl.timeEnd("MsgpackParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Zb);gl.add("msgpack",Qw);var e_=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.netcdf={name:this.name,path:this.path,data:void 0}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"netcdf"},n.__objName.get=function(){return"netcdf"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){sl&&rl.time("NetcdfParser._parse "+this.name),this.netcdf.data=new lw(this.streamer.data),sl&&rl.timeEnd("NetcdfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Zb);gl.add("netcdf",e_);var t_=function(e){function t(t,n){e.call(this,t,n),this.text={name:this.name,path:this.path,data:""}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"text"},n.__objName.get=function(){return"text"},t.prototype._parse=function(){this.text.data=this.streamer.asText()},Object.defineProperties(t.prototype,n),t}(Zb);gl.add("txt",t_),gl.add("text",t_);var n_=/^['"]|['"]$/g,r_=/^<([\w-:.]+)\s*/,i_=/^([^<]*)/,o_=/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/;function a_(e){return e=e.trim().replace(/<!--[\s\S]*?-->/g,""),{declaration:t(),root:n()};function t(){if(i(/^<\?xml\s*/)){for(var e={attributes:{}};!o()&&!a("?>");){var t=r();if(!t)return e;e.attributes[t.name]=t.value}return i(/\?>\s*/),e}}function n(){var e=i(r_);if(e){for(var t,s={name:e[1],attributes:{},children:[]};!(o()||a(">")||a("?>")||a("/>"));){var l=r();if(!l)return s;s.attributes[l.name]=l.value}if(i(/^\s*\/>\s*/))return s;for(i(/\??>\s*/),s.content=function(){var e=i(i_);if(e)return e[1];return""}();t=n();)s.children.push(t);return i(/^<\/[\w-:.]+>\s*/),s}}function r(){var e,t=i(o_);if(t)return{name:t[1],value:(e=t[2],e.replace(n_,""))}}function i(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function o(){return 0===e.length}function a(t){return 0===e.indexOf(t)}}var s_=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.useDomParser=Sa(r.useDomParser,!1),this.xml={name:this.name,path:this.path,data:{}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isXml:{configurable:!0}};return n.type.get=function(){return"xml"},n.__objName.get=function(){return"xml"},n.isXml.get=function(){return!0},t.prototype.__xmlParser=function(e){return a_(e)},t.prototype.__domParser=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")},t.prototype._parse=function(){sl&&rl.time("XmlParser._parse "+this.name),this.useDomParser?this.streamer.data instanceof Document?this.xml.data=this.streamer.data:this.xml.data=this.__domParser(this.streamer.asText()):this.xml.data=this.__xmlParser(this.streamer.asText()),sl&&rl.timeEnd("XmlParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(Zb);function l_(e,t){var n=e.getNamedItem(t);return null!==n?n.value:""}function c_(e,t,n){void 0===n&&(n=!1);var r=l_(e,"icode").trim(),i=l_(e,"chain").trim(),o=l_(e,"altcode"),a=l_(e,"resnum");return r&&(a+="^"+r),i&&(a+=":"+i),t&&(a+="."+t),n&&o.trim()&&(a+="%"+o),a+="/"+(parseInt(l_(e,"model"))-1)}function u_(e){var t=l_(e,"chain").trim(),n="["+l_(e,"rescode")+"]"+l_(e,"resnum");return t&&(n+=":"+t),n}function d_(e,t,n){void 0===e[t]?e[t]=n:e[t]|=n}function f_(e,t){return null!==e&&e.value===t}function p_(e,t,n){for(var r=0,i=t.getElementsByTagName("clash"),o=0,a=i.length;o<a;++o)if(e[l_(i[o].attributes,"cid")]){r+=1;break}return t.getElementsByTagName("angle-outlier").length>0&&(r+=1),t.getElementsByTagName("bond-outlier").length>0&&(r+=1),t.getElementsByTagName("plane-outlier").length>0&&(r+=1),f_(n.getNamedItem("rota"),"OUTLIER")&&(r+=1),f_(n.getNamedItem("rama"),"OUTLIER")&&(r+=1),f_(n.getNamedItem("RNApucker"),"outlier")&&(r+=1),r}gl.add("xml",s_);var h_=function(e,t){this.name=e,this.path=t,this.rsrzDict={},this.rsccDict={},this.rciDict={},this.clashDict={},this.clashArray=[],this.geoDict={},this.geoAtomDict={},this.atomDict={},this.clashSele="NONE"},m_={type:{configurable:!0}};m_.type.get=function(){return"validation"},h_.prototype.fromXml=function(e){sl&&rl.time("Validation.fromXml");var t=this.rsrzDict,n=this.rsccDict,r=this.rciDict,i=this.clashDict,o=this.clashArray,a=this.geoDict,s=this.geoAtomDict,l=this.atomDict,c=e.getElementsByTagName("Entry");if(1===c.length){var u=c[0].getElementsByTagName("chemical_shift_list");if(1===u.length)for(var d=u[0].getElementsByTagName("random_coil_index"),f=0,p=d.length;f<p;++f){var h=d[f].attributes;r[u_(h)]=parseFloat(l_(h,"value"))}}var m=e.getElementsByTagName("ModelledSubgroup"),g={},v=[];sl&&rl.time("Validation.fromXml#clashDict");for(var y=0,b=m.length;y<b;++y){var x=m[y],w=x.attributes,_=c_(w);null!==w.getNamedItem("rsrz")&&(t[_]=parseFloat(l_(w,"rsrz"))),null!==w.getNamedItem("rscc")&&(n[_]=parseFloat(l_(w,"rscc")));var S=e.createAttribute("sele");S.value=_,w.setNamedItem(S);for(var C=x.getElementsByTagName("clash"),k=0,M=C.length;k<M;++k){var T=C[k].attributes,A=l_(T,"atom");if("H"!==Kh(A)){var E=l_(T,"cid"),P=c_(w,A,!0);if(l[P]=!0,void 0===g[E])g[E]={sele1:P,res1:_};else{var R=g[E];R.res1!==_&&(R.sele2=P,R.res2=_,v.push(R.res1,_),i[E]=R,o.push(R))}}}}sl&&rl.timeEnd("Validation.fromXml#clashDict");for(var O=0,I=m.length;O<I;++O){var L=m[O],D=L.attributes,N=l_(D,"sele");if("."!==l_(D,"seq")){var F=p_(i,L,D);F>0&&(a[N]=F)}else{var z=L.getElementsByTagName("clash"),B=L.getElementsByTagName("mog-bond-outlier"),j=L.getElementsByTagName("mog-angle-outlier");if(B.length>0||j.length>0||z.length>0){var Z={};s[N]=Z;for(var H=0,U=z.length;H<U;++H){var V=z[H].attributes;i[l_(V,"cid")]&&d_(Z,l_(V,"atom"),1)}for(var G=0,W=B.length;G<W;++G){l_(B[G].attributes,"atoms").split(",").forEach((function(e){d_(Z,e,2)}))}for(var $=0,q=j.length;$<q;++$){l_(j[$].attributes,"atoms").split(",").forEach((function(e){d_(Z,e,4)}))}}}}this.clashSele=v.length?v.join(" OR "):"NONE",sl&&rl.timeEnd("Validation.fromXml")},h_.prototype.getClashData=function(e){sl&&rl.time("Validation.getClashData");var t=e||{},n=t.structure,r=n.atomSet,i=new ie(Sa(t.color,"#f0027f")),o=n.getAtomProxy(),a=n.getAtomProxy(),s=new H,l=new H,c=new H,u=this.clashArray,d=u.length,f=new Float32Array(3*d),p=new Float32Array(3*d),h=ac(d,i.r,i.g,i.b),m=new Float32Array(d),g=new Float32Array(d);sl&&rl.time("Validation.getClashData#atomDict");var v=this.atomDict;n.eachAtom((function(e){var t=function(e){var t=e.inscode,n=e.chainname,r=e.atomname,i=e.altloc,o=e.resno+"";return t&&(o+="^"+t),n&&(o+=":"+n),r&&(o+="."+r),i&&(o+="%"+i),o+"/"+e.modelIndex}(e);!0===v[t]&&(v[t]=e.index)})),sl&&rl.timeEnd("Validation.getClashData#atomDict");var y=0;return u.forEach((function(e,t){if(o.index=v[e.sele1],a.index=v[e.sele2],void 0!==o.index&&void 0!==a.index&&r.isSet(o.index,a.index)){s.subVectors(a,o).setLength(o.vdw),l.copy(o).add(s),s.subVectors(o,a).setLength(a.vdw),c.copy(a).add(s);var n=o.distanceTo(a)/2,i=Math.sqrt(o.vdw*o.vdw-n*n),u=Math.sqrt(a.vdw*a.vdw-n*n);l.toArray(f,3*y),c.toArray(p,3*y),m[y]=(i+u)/2,g[y]=t,++y}})),sl&&rl.timeEnd("Validation.getClashData"),{position1:f.subarray(0,3*y),position2:p.subarray(0,3*y),color:h.subarray(0,3*y),color2:h.subarray(0,3*y),radius:m.subarray(0,y),picking:new Df(g.subarray(0,y),this,n)}},Object.defineProperties(h_.prototype,m_);var g_=function(e){function t(t,n){var r=n||{};e.call(this,t,r),this.useDomParser=!0,this.validation=new h_(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={__objName:{configurable:!0},isXml:{configurable:!0}};return n.__objName.get=function(){return"validation"},n.isXml.get=function(){return!0},t.prototype._parse=function(){e.prototype._parse.call(this),sl&&rl.time("ValidationParser._parse "+this.name),this.validation.fromXml(this.xml.data),sl&&rl.timeEnd("ValidationParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(s_);function v_(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)}function y_(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]}function b_(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}gl.add("validation",g_);var x_=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function w_(e,t,n,r){var i=x_,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}function __(e,t){var n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C,k,M;n=e.state,r=e.next_in,k=e.input,i=r+(e.avail_in-5),o=e.next_out,M=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(p+=k[r++]<<h,h+=8,p+=k[r++]<<h,h+=8),b=m[p&v];t:for(;;){if(p>>>=x=b>>>24,h-=x,0===(x=b>>>16&255))M[o++]=65535&b;else{if(!(16&x)){if(0===(64&x)){b=m[(65535&b)+(p&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(x&=15)&&(h<x&&(p+=k[r++]<<h,h+=8),w+=p&(1<<x)-1,p>>>=x,h-=x),h<15&&(p+=k[r++]<<h,h+=8,p+=k[r++]<<h,h+=8),b=g[p&y];n:for(;;){if(p>>>=x=b>>>24,h-=x,!(16&(x=b>>>16&255))){if(0===(64&x)){b=g[(65535&b)+(p&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(_=65535&b,h<(x&=15)&&(p+=k[r++]<<h,(h+=8)<x&&(p+=k[r++]<<h,h+=8)),(_+=p&(1<<x)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=x,h-=x,_>(x=o-a)){if((x=_-x)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,C=f,0===d){if(S+=c-x,x<w){w-=x;do{M[o++]=f[S++]}while(--x);S=o-_,C=M}}else if(d<x){if(S+=c+d-x,(x-=d)<w){w-=x;do{M[o++]=f[S++]}while(--x);if(S=0,d<w){w-=x=d;do{M[o++]=f[S++]}while(--x);S=o-_,C=M}}}else if(S+=d-x,x<w){w-=x;do{M[o++]=f[S++]}while(--x);S=o-_,C=M}for(;w>2;)M[o++]=C[S++],M[o++]=C[S++],M[o++]=C[S++],w-=3;w&&(M[o++]=C[S++],w>1&&(M[o++]=C[S++]))}else{S=o-_;do{M[o++]=M[S++],M[o++]=M[S++],M[o++]=M[S++],w-=3}while(w>2);w&&(M[o++]=M[S++],w>1&&(M[o++]=M[S++]))}break}}break}}while(r<i&&o<s);r-=w=h>>3,p&=(1<<(h-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=h}var S_=15,C_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],M_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],T_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function A_(e,t,n,r,i,o,a,s){var l,c,u,d,f,p,h,m,g,v=s.bits,y=0,b=0,x=0,w=0,_=0,S=0,C=0,k=0,M=0,T=0,A=null,E=0,P=new Uint16Array(16),R=new Uint16Array(16),O=null,I=0;for(y=0;y<=S_;y++)P[y]=0;for(b=0;b<r;b++)P[t[n+b]]++;for(_=v,w=S_;w>=1&&0===P[w];w--);if(_>w&&(_=w),0===w)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(x=1;x<w&&0===P[x];x++);for(_<x&&(_=x),k=1,y=1;y<=S_;y++)if(k<<=1,(k-=P[y])<0)return-1;if(k>0&&(0===e||1!==w))return-1;for(R[1]=0,y=1;y<S_;y++)R[y+1]=R[y]+P[y];for(b=0;b<r;b++)0!==t[n+b]&&(a[R[t[n+b]]++]=b);if(0===e?(A=O=a,p=19):1===e?(A=C_,E-=257,O=k_,I-=257,p=256):(A=M_,O=T_,p=-1),T=0,b=0,y=x,f=o,S=_,C=0,u=-1,d=(M=1<<_)-1,1===e&&M>852||2===e&&M>592)return 1;for(;;){h=y-C,a[b]<p?(m=0,g=a[b]):a[b]>p?(m=O[I+a[b]],g=A[E+a[b]]):(m=96,g=0),l=1<<y-C,x=c=1<<S;do{i[f+(T>>C)+(c-=l)]=h<<24|m<<16|g|0}while(0!==c);for(l=1<<y-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,b++,0===--P[y]){if(y===w)break;y=t[n+a[b]]}if(y>_&&(T&d)!==u){for(0===C&&(C=_),f+=x,k=1<<(S=y-C);S+C<w&&!((k-=P[S+C])<=0);)S++,k<<=1;if(M+=1<<S,1===e&&M>852||2===e&&M>592)return 1;i[u=T&d]=_<<24|S<<16|f-o|0}}return 0!==T&&(i[f+T]=y-C<<24|64<<16|0),s.bits=_,0}var E_=-2,P_=12,R_=30;function O_(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function I_(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L_(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,0):E_}(e)):E_}function D_(e,t){var n,r;return e?(r=new I_,e.state=r,r.window=null,n=function(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?E_:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,L_(e))):E_}(e,t),0!==n&&(e.state=null),n):E_}var N_,F_,z_=!0;function B_(e){if(z_){var t;for(N_=new Int32Array(512),F_=new Int32Array(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(A_(1,e.lens,0,288,N_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;A_(2,e.lens,0,32,F_,0,e.work,{bits:5}),z_=!1}e.lencode=N_,e.lenbits=9,e.distcode=F_,e.distbits=5}function j_(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(y_(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),y_(o.window,t,n-r,i,o.wnext),(r-=i)?(y_(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function Z_(e,t){var n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C,k,M=0,T=new Uint8Array(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return E_;(n=e.state).mode===P_&&(n.mode=13),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,d=s,f=l,S=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(2&n.wrap&&35615===c){n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=w_(n.check,T,2,0),c=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=R_;break}if(8!==(15&c)){e.msg="unknown compression method",n.mode=R_;break}if(u-=4,_=8+(15&(c>>>=4)),0===n.wbits)n.wbits=_;else if(_>n.wbits){e.msg="invalid window size",n.mode=R_;break}n.dmax=1<<_,e.adler=n.check=1,n.mode=512&c?10:P_,c=0,u=0;break;case 2:for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(n.flags=c,8!==(255&n.flags)){e.msg="unknown compression method",n.mode=R_;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=R_;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(T[0]=255&c,T[1]=c>>>8&255,n.check=w_(n.check,T,2,0)),c=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=w_(n.check,T,4,0)),c=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(T[0]=255&c,T[1]=c>>>8&255,n.check=w_(n.check,T,2,0)),c=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(T[0]=255&c,T[1]=c>>>8&255,n.check=w_(n.check,T,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=n.length)>s&&(p=s),p&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y_(n.head.extra,r,o,p,_)),512&n.flags&&(n.check=w_(n.check,r,p,o)),s-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;p=0;do{_=r[o+p++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_))}while(_&&p<s);if(512&n.flags&&(n.check=w_(n.check,r,p,o)),s-=p,o+=p,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;p=0;do{_=r[o+p++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_))}while(_&&p<s);if(512&n.flags&&(n.check=w_(n.check,r,p,o)),s-=p,o+=p,_)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=R_;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=P_;break;case 10:for(;u<32;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}e.adler=n.check=O_(c),c=0,u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,2;e.adler=n.check=1,n.mode=P_;case P_:if(5===t||6===t)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}switch(n.last=1&c,u-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(B_(n),n.mode=20,6===t){c>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=R_}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=R_;break}if(n.length=65535&c,c=0,u=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(p=n.length){if(p>s&&(p=s),p>l&&(p=l),0===p)break e;y_(i,r,o,p,a),s-=p,o+=p,l-=p,a+=p,n.length-=p;break}n.mode=P_;break;case 17:for(;u<14;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=R_;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.lens[A[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},S=A_(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid code lengths set",n.mode=R_;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(M=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&M,!((g=M>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(y<16)c>>>=g,u-=g,n.lens[n.have++]=y;else{if(16===y){for(k=g+2;u<k;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(c>>>=g,u-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=R_;break}_=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===y){for(k=g+3;u<k;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}u-=g,_=0,p=3+(7&(c>>>=g)),c>>>=3,u-=3}else{for(k=g+7;u<k;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}u-=g,_=0,p=11+(127&(c>>>=g)),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=R_;break}for(;p--;)n.lens[n.have++]=_}}if(n.mode===R_)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=R_;break}if(n.lenbits=9,C={bits:n.lenbits},S=A_(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid literal/lengths set",n.mode=R_;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},S=A_(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,S){e.msg="invalid distances set",n.mode=R_;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,__(e,f),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===P_&&(n.back=-1);break}for(n.back=0;v=(M=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&M,!((g=M>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(v&&0===(240&v)){for(b=g,x=v,w=y;v=(M=n.lencode[w+((c&(1<<b+x)-1)>>b)])>>>16&255,y=65535&M,!(b+(g=M>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,n.length=y,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=P_;break}if(64&v){e.msg="invalid literal/length code",n.mode=R_;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(k=n.extra;u<k;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(M=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&M,!((g=M>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(0===(240&v)){for(b=g,x=v,w=y;v=(M=n.distcode[w+((c&(1<<b+x)-1)>>b)])>>>16&255,y=65535&M,!(b+(g=M>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=R_;break}n.offset=y,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(k=n.extra;u<k;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=R_;break}n.mode=25;case 25:if(0===l)break e;if(p=f-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=R_;break}p>n.wnext?(p-=n.wnext,h=n.wsize-p):h=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,h=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{i[a++]=m[h++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===s)break e;s--,c|=r[o++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?w_(n.check,i,f,a-f):b_(n.check,i,f,a-f)),f=l,(n.flags?c:O_(c))!==n.check){e.msg="incorrect data check",n.mode=R_;break}c=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=R_;break}c=0,u=0}n.mode=29;case 29:S=1;break e;case R_:S=-3;break e;case 31:return-4;default:return E_}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<R_&&(n.mode<27||4!==t))&&j_(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?w_(n.check,i,f,e.next_out-f):b_(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===P_?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===f||4===t)&&0===S&&(S=-5),S}function H_(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?E_:11===n.mode&&b_(1,t,r,0)!==n.check?-3:j_(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):E_}var U_=!0,V_=!0;try{String.fromCharCode.apply(null,[0])}catch(xS){U_=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(xS){V_=!1}for(var G_=new Uint8Array(256),W_=0;W_<256;W_++)G_[W_]=W_>=252?6:W_>=248?5:W_>=240?4:W_>=224?3:W_>=192?2:1;function $_(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}function q_(e,t){var n,r,i,o,a=t||e.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)s[r++]=i;else if((o=G_[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return function(e,t){if(t<65537&&(e.subarray&&V_||!e.subarray&&U_))return String.fromCharCode.apply(null,v_(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}(s,r)}function Y_(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+G_[e[n]]>t?n:t}G_[254]=G_[254]=1;var X_={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function K_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function J_(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Q_=Object.prototype.toString;function eS(e){if(!(this instanceof eS))return new eS(e);this.options=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e}({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new K_,this.strm.avail_out=0;var n=D_(this.strm,t.windowBits);if(0!==n)throw new Error(X_[n]);this.header=new J_,function(e,t){var n;e&&e.state&&(0===(2&(n=e.state).wrap)||(n.head=t,t.done=!1))}(this.strm,this.header)}eS.prototype.push=function(e,t){var n,r,i,o,a,s,l=this,c=this.strm,u=this.options.chunkSize,d=this.options.dictionary,f=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"===typeof e?c.input=function(e){for(var t=new Uint8Array(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t}(e):"[object ArrayBuffer]"===Q_.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new Uint8Array(u),c.next_out=0,c.avail_out=u),2===(n=Z_(c,0))&&d&&(s="string"===typeof d?$_(d):"[object ArrayBuffer]"===Q_.call(d)?new Uint8Array(d):d,n=H_(l.strm,s)),-5===n&&!0===f&&(n=0,f=!1),1!==n&&0!==n)return l.onEnd(n),l.ended=!0,!1;c.next_out&&(0!==c.avail_out&&1!==n&&(0!==c.avail_in||4!==r&&2!==r)||("string"===l.options.to?(i=Y_(c.output,c.next_out),o=c.next_out-i,a=q_(c.output,i),c.next_out=o,c.avail_out=u-o,o&&y_(c.output,c.output,i,o,0),l.onData(a)):l.onData(v_(c.output,c.next_out)))),0===c.avail_in&&0===c.avail_out&&(f=!0)}while((c.avail_in>0||0===c.avail_out)&&1!==n);return 1===n&&(r=4),4===r?(n=function(e){if(!e||!e.state)return E_;var t=e.state;return t.window&&(t.window=null),e.state=null,0}(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),c.avail_out=0,!0)},eS.prototype.onData=function(e){this.chunks.push(e)},eS.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},yl.add("gz",(function(e){var t;e instanceof ArrayBuffer&&(e=new Uint8Array(e));try{t=function(e,t){var n=new eS(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}(e)}catch(bS){t=e}return t}));var tS=function(){},nS="//mmtf.rcsb.org/v1.0/",rS=nS+"full/",iS=nS+"reduced/",oS=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(e){var t,n=Rl(e),r=n.name.substr(0,4);return!["pdb","cif"].includes(n.ext)||!1!==n.compressed&&"gz"!==n.compressed?"mmtf"===n.ext?t=n.base.endsWith(".bb")?iS+r:rS+r:n.ext?(rl.warn("unsupported ext",n.ext),t=rS+r):t=rS+r:t="//files.rcsb.org/download/"+n.path,Ta()+t},t.prototype.getExt=function(e){var t=Rl(e).ext;return t||"mmtf"},t}(tS);hl.add("rcsb",new oS);var aS="//pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/",sS="/SDF?record_type=3d",lS=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(e){var t,n=Rl(e),r=n.name;return n.ext&&"sdf"!==n.ext?(rl.warn("unsupported ext",n.ext),t=aS+r+sS):t=aS+r+sS,Ta()+t},t.prototype.getExt=function(e){var t=Rl(e).ext;return t||"sdf"},t}(tS);hl.add("pubchem",new lS);var cS=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(e){return e},t.prototype.getExt=function(e){return Rl(e).ext},t}(tS);hl.add("ftp",new cS),hl.add("http",new cS),hl.add("https",new cS);var uS=/^((http|https|ftp):)*\/\//,dS=function(e){function t(t){void 0===t&&(t=""),e.call(this),this.baseUrl=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(e){var t=Rl(e),n=this.baseUrl+t.path;return uS.test(this.baseUrl)||(n=function(e){var t=window.location,n=t.pathname,r=n.substring(0,n.lastIndexOf("/")+1);return t.origin+r+e}(n)),n},t.prototype.getExt=function(e){return Rl(e).ext},t}(tS),fS=function(e){function t(t){void 0===t&&(t=""),e.call(this),this.baseUrl=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getListing=function(e){void 0===e&&(e="");var t=this.baseUrl+"dir/"+e;return"/"!==t[t.length-1]&&(t+="/"),Il(t,{ext:"json"}).then((function(t){return{path:e,data:t.data}}))},t.prototype.getUrl=function(e){var t=Rl(e);return this.baseUrl+"file/"+t.path+t.query},t.prototype.getCountUrl=function(e){var t=Rl(e);return this.baseUrl+"traj/numframes/"+t.path+t.query},t.prototype.getFrameUrl=function(e,t){var n=Rl(e);return this.baseUrl+"traj/frame/"+t+"/"+n.path+n.query},t.prototype.getFrameParams=function(e,t){return"atomIndices="+t.join(";")},t.prototype.getPathUrl=function(e,t){var n=Rl(e);return this.baseUrl+"traj/path/"+t+"/"+n.path+n.query},t.prototype.getExt=function(e){return Rl(e).ext},t}(tS);function pS(e,t){return{type:"integer",max:e,min:t}}function hS(e,t,n){return{type:"number",precision:e,max:t,min:n}}function mS(e,t,n){return{type:"range",step:e,max:t,min:n}}function gS(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return{type:"select",options:e.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=t,n))}),{})}}var vS={backgroundColor:{type:"color"},quality:gS("auto","low","medium","high"),sampleLevel:mS(1,5,-1),impostor:{type:"boolean"},workerDefault:{type:"boolean"},rotateSpeed:hS(1,10,0),zoomSpeed:hS(1,10,0),panSpeed:hS(1,10,0),clipNear:mS(1,100,0),clipFar:mS(1,100,0),clipDist:pS(200,0),clipMode:gS("scene","camera"),clipScale:gS("relative","absolute"),fogNear:mS(1,100,0),fogFar:mS(1,100,0),fogMode:gS("scene","camera"),fogScale:gS("relative","absolute"),cameraType:gS("perspective","orthographic","stereo"),cameraEyeSep:hS(3,1,.01),cameraFov:mS(1,120,15),lightColor:{type:"color"},lightIntensity:hS(2,10,0),ambientColor:{type:"color"},ambientIntensity:hS(2,10,0),hoverTimeout:pS(1e4,-1),tooltip:{type:"boolean"},mousePreset:gS.apply(void 0,Object.keys(Up))},yS="2.0.0-dev.37";window.Promise||(window.Promise=o)},4174:function(e){self,e.exports=function(){var e={8847:function(e,t,n){"use strict";var r=n(1828),i={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in i){var a=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(a,i[o])}},8222:function(e,t,n){"use strict";e.exports=n(2887)},7206:function(e,t,n){"use strict";e.exports=n(822)},9509:function(e,t,n){"use strict";e.exports=n(2201)},9548:function(e,t,n){"use strict";e.exports=n(8729)},1039:function(e,t,n){"use strict";e.exports=n(4382)},4296:function(e,t,n){"use strict";e.exports=n(3102)},2576:function(e,t,n){"use strict";var r=n(9548);r.register([n(7206),n(4201),n(8222),n(1039),n(4296),n(6398),n(9509)]),e.exports=r},4201:function(e,t,n){"use strict";e.exports=n(8810)},6398:function(e,t,n){"use strict";e.exports=n(2275)},2884:function(e){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},215:function(e,t,n){"use strict";var r=n(2884),i=n(1940),o=n(5555),a=n(4467).templatedArray;n(4695),e.exports=a("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(e,t,n){"use strict";var r=n(1828),i=n(9298),o=n(2605).draw;function a(e){var t=e._fullLayout;r.filterVisible(t.annotations).forEach((function(t){var n=i.getFromId(e,t.xref),r=i.getFromId(e,t.yref),o=i.getRefType(t.xref),a=i.getRefType(t.yref);t._extremes={},"range"===o&&s(t,n),"range"===a&&s(t,r)}))}function s(e,t){var n,r=t._id,o=r.charAt(0),a=e[o],s=e["a"+o],l=e[o+"ref"],c=e["a"+o+"ref"],u=e["_"+o+"padplus"],d=e["_"+o+"padminus"],f={x:1,y:-1}[o]*e[o+"shift"],p=3*e.arrowsize*e.arrowwidth||0,h=p+f,m=p-f,g=3*e.startarrowsize*e.arrowwidth||0,v=g+f,y=g-f;if(c===l){var b=i.findExtremes(t,[t.r2c(a)],{ppadplus:h,ppadminus:m}),x=i.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(u,v),ppadminus:Math.max(d,y)});n={min:[b.min[0],x.min[0]],max:[b.max[0],x.max[0]]}}else v=s?v+s:v,y=s?y-s:y,n=i.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(u,h,v),ppadminus:Math.max(d,m,y)});e._extremes[r]=n}e.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([o,a],e)}},4317:function(e,t,n){"use strict";var r=n(1828),i=n(3972),o=n(4467).arrayEditor;function a(e,t){var n,r,i,o,a,l,c,u=e._fullLayout.annotations,d=[],f=[],p=[],h=(t||[]).length;for(n=0;n<u.length;n++)if(o=(i=u[n]).clicktoshow){for(r=0;r<h;r++)if(l=(a=t[r]).xaxis,c=a.yaxis,l._id===i.xref&&c._id===i.yref&&l.d2r(a.x)===s(i._xclick,l)&&c.d2r(a.y)===s(i._yclick,c)){(i.visible?"onout"===o?f:p:d).push(n);break}r===h&&i.visible&&"onout"===o&&f.push(n)}return{on:d,off:f,explicitOff:p}}function s(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}e.exports={hasClickToShow:function(e,t){var n=a(e,t);return n.on.length>0||n.explicitOff.length>0},onClick:function(e,t){var n,s,l=a(e,t),c=l.on,u=l.off.concat(l.explicitOff),d={},f=e._fullLayout.annotations;if(c.length||u.length){for(n=0;n<c.length;n++)(s=o(e.layout,"annotations",f[c[n]])).modifyItem("visible",!0),r.extendFlat(d,s.getUpdateObj());for(n=0;n<u.length;n++)(s=o(e.layout,"annotations",f[u[n]])).modifyItem("visible",!1),r.extendFlat(d,s.getUpdateObj());return i.call("update",e,{},d)}}}},5625:function(e,t,n){"use strict";var r=n(1828),i=n(7901);e.exports=function(e,t,n,o){o("opacity");var a=o("bgcolor"),s=o("bordercolor"),l=i.opacity(s);o("borderpad");var c=o("borderwidth"),u=o("showarrow");if(o("text",u?" ":n._dfltTitle.annotation),o("textangle"),r.coerceFont(o,"font",n.font),o("width"),o("align"),o("height")&&o("valign"),u){var d,f,p=o("arrowside");-1!==p.indexOf("end")&&(d=o("arrowhead"),f=o("arrowsize")),-1!==p.indexOf("start")&&(o("startarrowhead",d),o("startarrowsize",f)),o("arrowcolor",l?t.bordercolor:i.defaultLine),o("arrowwidth",2*(l&&c||1)),o("standoff"),o("startstandoff")}var h=o("hovertext"),m=n.hoverlabel||{};if(h){var g=o("hoverlabel.bgcolor",m.bgcolor||(i.opacity(a)?i.rgb(a):i.defaultLine)),v=o("hoverlabel.bordercolor",m.bordercolor||i.contrast(g));r.coerceFont(o,"hoverlabel.font",{family:m.font.family,size:m.font.size,color:m.font.color||v})}o("captureevents",!!h)}},4128:function(e,t,n){"use strict";var r=n(2770),i=n(8163);e.exports=function(e,t,n,o){t=t||{};var a="log"===n&&"linear"===t.type,s="linear"===n&&"log"===t.type;if(a||s)for(var l,c,u=e._fullLayout.annotations,d=t._id.charAt(0),f=0;f<u.length;f++)l=u[f],c="annotations["+f+"].",l[d+"ref"]===t._id&&p(d),l["a"+d+"ref"]===t._id&&p("a"+d);function p(e){var n=l[e],s=null;s=a?i(n,t.range):Math.pow(10,n),r(s)||(s=null),o(c+e,s)}}},4046:function(e,t,n){"use strict";var r=n(1828),i=n(9298),o=n(5501),a=n(5625),s=n(215);function l(e,t,n){function o(n,i){return r.coerce(e,t,s,n,i)}var l=o("visible"),c=o("clicktoshow");if(l||c){a(e,t,n,o);for(var u=t.showarrow,d=["x","y"],f=[-10,-30],p={_fullLayout:n},h=0;h<2;h++){var m=d[h],g=i.coerceRef(e,t,p,m,"","paper");if("paper"!==g&&i.getFromId(p,g)._annIndices.push(t._index),i.coercePosition(t,p,o,g,m,.5),u){var v="a"+m,y=i.coerceRef(e,t,p,v,"pixel",["pixel","paper"]);"pixel"!==y&&y!==g&&(y=t[v]="pixel");var b="pixel"===y?f[h]:.4;i.coercePosition(t,p,o,y,v,b)}o(m+"anchor"),o(m+"shift")}if(r.noneOrAll(e,t,["x","y"]),u&&r.noneOrAll(e,t,["ax","ay"]),c){var x=o("xclick"),w=o("yclick");t._xclick=void 0===x?t.x:i.cleanPosition(x,p,t.xref),t._yclick=void 0===w?t.y:i.cleanPosition(w,p,t.yref)}}}e.exports=function(e,t){o(e,t,{name:"annotations",handleItemDefaults:l})}},2605:function(e,t,n){"use strict";var r=n(9898),i=n(3972),o=n(4875),a=n(1828),s=a.strTranslate,l=n(9298),c=n(7901),u=n(1424),d=n(211),f=n(3893),p=n(6964),h=n(8569),m=n(4467).arrayEditor,g=n(3011);function v(e,t){var n=e._fullLayout.annotations[t]||{},r=l.getFromId(e,n.xref),i=l.getFromId(e,n.yref);r&&r.setScale(),i&&i.setScale(),b(e,n,t,!1,r,i)}function y(e,t,n,r,i){var o=i[n],a=i[n+"ref"],s=-1!==n.indexOf("y"),c="domain"===l.getRefType(a),u=s?r.h:r.w;return e?c?o+(s?-t:t)/e._length:e.p2r(e.r2p(o)+t):o+(s?-t:t)/u}function b(e,t,n,o,v,b){var x,w,_=e._fullLayout,S=e._fullLayout._size,C=e._context.edits;o?(x="annotation-"+o,w=o+".annotations"):(x="annotation",w="annotations");var k=m(e.layout,w,t),M=k.modifyBase,T=k.modifyItem,A=k.getUpdateObj;_._infolayer.selectAll("."+x+'[data-index="'+n+'"]').remove();var E="clip"+_._uid+"_ann"+n;if(t._input&&!1!==t.visible){var P={x:{},y:{}},R=+t.textangle||0,O=_._infolayer.append("g").classed(x,!0).attr("data-index",String(n)).style("opacity",t.opacity),I=O.append("g").classed("annotation-text-g",!0),L=C[t.showarrow?"annotationTail":"annotationPosition"],D=t.captureevents||C.annotationText||L,N=I.append("g").style("pointer-events",D?"all":null).call(p,"pointer").on("click",(function(){e._dragging=!1,e.emit("plotly_clickannotation",W(r.event))}));t.hovertext&&N.on("mouseover",(function(){var n=t.hoverlabel,r=n.font,i=this.getBoundingClientRect(),o=e.getBoundingClientRect();d.loneHover({x0:i.left-o.left,x1:i.right-o.left,y:(i.top+i.bottom)/2-o.top,text:t.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:e})})).on("mouseout",(function(){d.loneUnhover(_._hoverlayer.node())}));var F=t.borderwidth,z=t.borderpad,B=F+z,j=N.append("rect").attr("class","bg").style("stroke-width",F+"px").call(c.stroke,t.bordercolor).call(c.fill,t.bgcolor),Z=t.width||t.height,H=_._topclips.selectAll("#"+E).data(Z?[0]:[]);H.enter().append("clipPath").classed("annclip",!0).attr("id",E).append("rect"),H.exit().remove();var U=t.font,V=_._meta?a.templateString(t.text,_._meta):t.text,G=N.append("text").classed("annotation-text",!0).text(V);C.annotationText?G.call(f.makeEditable,{delegate:N,gd:e}).call($).on("edit",(function(n){t.text=n,this.call($),T("text",n),v&&v.autorange&&M(v._name+".autorange",!0),b&&b.autorange&&M(b._name+".autorange",!0),i.call("_guiRelayout",e,A())})):G.call($)}else r.selectAll("#"+E).remove();function W(e){var r={index:n,annotation:t._input,fullAnnotation:t,event:e};return o&&(r.subplotId=o),r}function $(n){return n.call(u.font,U).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),f.convertToTspans(n,e,q),n}function q(){var n=G.selectAll("a");1===n.size()&&n.text()===G.text()&&N.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(j.node());var r=N.select(".annotation-text-math-group"),d=!r.empty(),m=u.bBox((d?r:G).node()),x=m.width,w=m.height,k=t.width||x,D=t.height||w,z=Math.round(k+2*B),U=Math.round(D+2*B);function V(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}for(var $=!1,q=["x","y"],Y=0;Y<q.length;Y++){var X,K,J,Q,ee,te=q[Y],ne=t[te+"ref"]||te,re=t["a"+te+"ref"],ie={x:v,y:b}[te],oe=(R+("x"===te?0:-90))*Math.PI/180,ae=z*Math.cos(oe),se=U*Math.sin(oe),le=Math.abs(ae)+Math.abs(se),ce=t[te+"anchor"],ue=t[te+"shift"]*("x"===te?1:-1),de=P[te],fe=l.getRefType(ne);if(ie&&"domain"!==fe){var pe=ie.r2fraction(t[te]);(pe<0||pe>1)&&(re===ne?((pe=ie.r2fraction(t["a"+te]))<0||pe>1)&&($=!0):$=!0),X=ie._offset+ie.r2p(t[te]),Q=.5}else{var he="domain"===fe;"x"===te?(J=t[te],X=he?ie._offset+ie._length*J:X=S.l+S.w*J):(J=1-t[te],X=he?ie._offset+ie._length*J:X=S.t+S.h*J),Q=t.showarrow?.5:J}if(t.showarrow){de.head=X;var me=t["a"+te];if(ee=ae*V(.5,t.xanchor)-se*V(.5,t.yanchor),re===ne){var ge=l.getRefType(re);"domain"===ge?("y"===te&&(me=1-me),de.tail=ie._offset+ie._length*me):"paper"===ge?"y"===te?(me=1-me,de.tail=S.t+S.h*me):de.tail=S.l+S.w*me:de.tail=ie._offset+ie.r2p(me),K=ee}else de.tail=X+me,K=ee+me;de.text=de.tail+ee;var ve=_["x"===te?"width":"height"];if("paper"===ne&&(de.head=a.constrain(de.head,1,ve-1)),"pixel"===re){var ye=-Math.max(de.tail-3,de.text),be=Math.min(de.tail+3,de.text)-ve;ye>0?(de.tail+=ye,de.text+=ye):be>0&&(de.tail-=be,de.text-=be)}de.tail+=ue,de.head+=ue}else K=ee=le*V(Q,ce),de.text=X+ee;de.text+=ue,ee+=ue,K+=ue,t["_"+te+"padplus"]=le/2+K,t["_"+te+"padminus"]=le/2-K,t["_"+te+"size"]=le,t["_"+te+"shift"]=ee}if($)N.remove();else{var xe=0,we=0;if("left"!==t.align&&(xe=(k-x)*("center"===t.align?.5:1)),"top"!==t.valign&&(we=(D-w)*("middle"===t.valign?.5:1)),d)r.select("svg").attr({x:B+xe-1,y:B+we}).call(u.setClipUrl,Z?E:null,e);else{var _e=B+we-m.top,Se=B+xe-m.left;G.call(f.positionText,Se,_e).call(u.setClipUrl,Z?E:null,e)}H.select("rect").call(u.setRect,B,B,k,D),j.call(u.setRect,F/2,F/2,z-F,U-F),N.call(u.setTranslate,Math.round(P.x.text-z/2),Math.round(P.y.text-U/2)),I.attr({transform:"rotate("+R+","+P.x.text+","+P.y.text+")"});var Ce,ke=function(n,r){O.selectAll(".annotation-arrow-g").remove();var l=P.x.head,d=P.y.head,f=P.x.tail+n,p=P.y.tail+r,m=P.x.text+n,x=P.y.text+r,w=a.rotationXYMatrix(R,m,x),_=a.apply2DTransform(w),k=a.apply2DTransform2(w),E=+j.attr("width"),L=+j.attr("height"),D=m-.5*E,F=D+E,z=x-.5*L,B=z+L,Z=[[D,z,D,B],[D,B,F,B],[F,B,F,z],[F,z,D,z]].map(k);if(!Z.reduce((function(e,t){return e^!!a.segmentsIntersect(l,d,l+1e6,d+1e6,t[0],t[1],t[2],t[3])}),!1)){Z.forEach((function(e){var t=a.segmentsIntersect(f,p,l,d,e[0],e[1],e[2],e[3]);t&&(f=t.x,p=t.y)}));var H=t.arrowwidth,U=t.arrowcolor,V=t.arrowside,G=O.append("g").style({opacity:c.opacity(U)}).classed("annotation-arrow-g",!0),W=G.append("path").attr("d","M"+f+","+p+"L"+l+","+d).style("stroke-width",H+"px").call(c.stroke,c.rgb(U));if(g(W,V,t),C.annotationPosition&&W.node().parentNode&&!o){var $=l,q=d;if(t.standoff){var Y=Math.sqrt(Math.pow(l-f,2)+Math.pow(d-p,2));$+=t.standoff*(f-l)/Y,q+=t.standoff*(p-d)/Y}var X,K,J=G.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(f-$)+","+(p-q),transform:s($,q)}).style("stroke-width",H+6+"px").call(c.stroke,"rgba(0,0,0,0)").call(c.fill,"rgba(0,0,0,0)");h.init({element:J.node(),gd:e,prepFn:function(){var e=u.getTranslate(N);X=e.x,K=e.y,v&&v.autorange&&M(v._name+".autorange",!0),b&&b.autorange&&M(b._name+".autorange",!0)},moveFn:function(e,n){var r=_(X,K),i=r[0]+e,o=r[1]+n;N.call(u.setTranslate,i,o),T("x",y(v,e,"x",S,t)),T("y",y(b,n,"y",S,t)),t.axref===t.xref&&T("ax",y(v,e,"ax",S,t)),t.ayref===t.yref&&T("ay",y(b,n,"ay",S,t)),G.attr("transform",s(e,n)),I.attr({transform:"rotate("+R+","+i+","+o+")"})},doneFn:function(){i.call("_guiRelayout",e,A());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};t.showarrow&&ke(0,0),L&&h.init({element:N.node(),gd:e,prepFn:function(){Ce=I.attr("transform")},moveFn:function(e,n){var r="pointer";if(t.showarrow)t.axref===t.xref?T("ax",y(v,e,"ax",S,t)):T("ax",t.ax+e),t.ayref===t.yref?T("ay",y(b,n,"ay",S.w,t)):T("ay",t.ay+n),ke(e,n);else{if(o)return;var i,a;if(v)i=y(v,e,"x",S,t);else{var l=t._xsize/S.w,c=t.x+(t._xshift-t.xshift)/S.w-l/2;i=h.align(c+e/S.w,l,0,1,t.xanchor)}if(b)a=y(b,n,"y",S,t);else{var u=t._ysize/S.h,d=t.y-(t._yshift+t.yshift)/S.h-u/2;a=h.align(d-n/S.h,u,0,1,t.yanchor)}T("x",i),T("y",a),v&&b||(r=h.getCursor(v?.5:i,b?.5:a,t.xanchor,t.yanchor))}I.attr({transform:s(e,n)+Ce}),p(N,r)},clickFn:function(n,r){t.captureevents&&e.emit("plotly_clickannotation",W(r))},doneFn:function(){p(N),i.call("_guiRelayout",e,A());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}}e.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&v(e,n);return o.previousPromises(e)},drawOne:v,drawRaw:b}},3011:function(e,t,n){"use strict";var r=n(9898),i=n(7901),o=n(2884),a=n(1828),s=a.strScale,l=a.strRotate,c=a.strTranslate;e.exports=function(e,t,n){var a,u,d,f,p=e.node(),h=o[n.arrowhead||0],m=o[n.startarrowhead||0],g=(n.arrowwidth||1)*(n.arrowsize||1),v=(n.arrowwidth||1)*(n.startarrowsize||1),y=t.indexOf("start")>=0,b=t.indexOf("end")>=0,x=h.backoff*g+n.standoff,w=m.backoff*v+n.startstandoff;if("line"===p.nodeName){a={x:+e.attr("x1"),y:+e.attr("y1")},u={x:+e.attr("x2"),y:+e.attr("y2")};var _=a.x-u.x,S=a.y-u.y;if(f=(d=Math.atan2(S,_))+Math.PI,x&&w&&x+w>Math.sqrt(_*_+S*S))return void L();if(x){if(x*x>_*_+S*S)return void L();var C=x*Math.cos(d),k=x*Math.sin(d);u.x+=C,u.y+=k,e.attr({x2:u.x,y2:u.y})}if(w){if(w*w>_*_+S*S)return void L();var M=w*Math.cos(d),T=w*Math.sin(d);a.x-=M,a.y-=T,e.attr({x1:a.x,y1:a.y})}}else if("path"===p.nodeName){var A=p.getTotalLength(),E="";if(A<x+w)return void L();var P=p.getPointAtLength(0),R=p.getPointAtLength(.1);d=Math.atan2(P.y-R.y,P.x-R.x),a=p.getPointAtLength(Math.min(w,A)),E="0px,"+w+"px,";var O=p.getPointAtLength(A),I=p.getPointAtLength(A-.1);f=Math.atan2(O.y-I.y,O.x-I.x),u=p.getPointAtLength(Math.max(0,A-x)),E+=A-(E?w+x:x)+"px,"+A+"px",e.style("stroke-dasharray",E)}function L(){e.style("stroke-dasharray","0px,100px")}function D(t,o,a,u){t.path&&(t.noRotate&&(a=0),r.select(p.parentNode).append("path").attr({class:e.attr("class"),d:t.path,transform:c(o.x,o.y)+l(180*a/Math.PI)+s(u)}).style({fill:i.rgb(n.arrowcolor),"stroke-width":0}))}y&&D(m,a,d,v),b&&D(h,u,f,g)}},2745:function(e,t,n){"use strict";var r=n(2605),i=n(4317);e.exports={moduleType:"component",name:"annotations",layoutAttributes:n(215),supplyLayoutDefaults:n(4046),includeBasePlot:n(6325)("annotations"),calcAutorange:n(3749),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:n(4128)}},6997:function(e,t,n){"use strict";var r=n(215),i=n(962).overrideAll,o=n(4467).templatedArray;e.exports=i(o("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},5485:function(e,t,n){"use strict";var r=n(1828),i=n(9298);function o(e,t){var n=t.fullSceneLayout.domain,o=t.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},r.extendFlat(e._xa,a),i.setConvert(e._xa),e._xa._offset=o.l+n.x[0]*o.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*o.w*(n.x[1]-n.x[0])},e._ya={},r.extendFlat(e._ya,a),i.setConvert(e._ya),e._ya._offset=o.t+(1-n.y[1])*o.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*o.h*(n.y[1]-n.y[0])}}e.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)o(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},226:function(e,t,n){"use strict";var r=n(1828),i=n(9298),o=n(5501),a=n(5625),s=n(6997);function l(e,t,n,o){function l(n,i){return r.coerce(e,t,s,n,i)}function c(e){var r=e+"axis",o={_fullLayout:{}};return o._fullLayout[r]=n[r],i.coercePosition(t,o,l,e,e,.5)}l("visible")&&(a(e,t,o.fullLayout,l),c("x"),c("y"),c("z"),r.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",l("ax",-10),l("ay",-30),r.noneOrAll(e,t,["ax","ay"])))}e.exports=function(e,t,n){o(e,t,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})}},2188:function(e,t,n){"use strict";var r=n(2605).drawRaw,i=n(3538),o=["x","y","z"];e.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,a=t.annotations,s=0;s<a.length;s++){for(var l=a[s],c=!1,u=0;u<3;u++){var d=o[u],f=l[d],p=t[d+"axis"].r2fraction(f);if(p<0||p>1){c=!0;break}}c?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+s+'"]').remove():(l._pdata=i(e.glplot.cameraParams,[t.xaxis.r2l(l.x)*n[0],t.yaxis.r2l(l.y)*n[1],t.zaxis.r2l(l.z)*n[2]]),r(e.graphDiv,l,s,e.id,l._xa,l._ya))}}},2468:function(e,t,n){"use strict";var r=n(3972),i=n(1828);e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:n(6997)}}},layoutAttributes:n(6997),handleDefaults:n(226),includeBasePlot:function(e,t){var n=r.subplotsRegistry.gl3d;if(n)for(var o=n.attrRegex,a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];o.test(l)&&(e[l].annotations||[]).length&&(i.pushUnique(t._basePlotModules,n),i.pushUnique(t._subplots.gl3d,l))}},convert:n(5485),draw:n(2188)}},7561:function(e,t,n){"use strict";e.exports=n(3489),n(4338),n(3961),n(8751),n(6825),n(7715),n(9384),n(3805),n(8874),n(3290),n(9108),n(5422),n(4320),n(1320),n(1367),n(1457)},2201:function(e,t,n){"use strict";var r=n(7561),i=n(1828),o=n(606),a=o.EPOCHJD,s=o.ONEDAY,l={valType:"enumerated",values:i.sortObjectKeys(r.calendars),editType:"calc",dflt:"gregorian"},c=function(e,t,n,r){var o={};return o[n]=l,i.coerce(e,t,o,n,r)},u="##",d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:u,w:u,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},f={};function p(e){return f[e]||(f[e]=r.instance(e))}function h(e){return i.extendFlat({},l,{description:e})}function m(e){return"Sets the calendar system to use with `"+e+"` date data."}var g={xcalendar:h(m("x"))},v=i.extendFlat({},g,{ycalendar:h(m("y"))}),y=i.extendFlat({},v,{zcalendar:h(m("z"))}),b=h(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));e.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:v,bar:v,box:v,heatmap:v,contour:v,histogram:v,histogram2d:v,histogram2dcontour:v,scatter3d:y,surface:y,mesh3d:y,scattergl:v,ohlc:g,candlestick:g},layout:{calendar:h(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:h(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:h(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:l,handleDefaults:c,handleTraceDefaults:function(e,t,n,r){for(var i=0;i<n.length;i++)c(e,t,n[i]+"calendar",r.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:p,worldCalFmt:function(e,t,n){for(var r,i,o,l,c,f=Math.floor((t+.05)/s)+a,h=p(n).fromJD(f),m=0;-1!==(m=e.indexOf("%",m));)"0"===(r=e.charAt(m+1))||"-"===r||"_"===r?(o=3,i=e.charAt(m+2),"_"===r&&(r="-")):(i=r,r="0",o=2),(l=d[i])?(c=l===u?u:h.formatDate(l[r]),e=e.substr(0,m)+c+e.substr(m+o),m+=c.length):m+=o;return e}}},2399:function(e,t){"use strict";t.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],t.defaultLine="#444",t.lightLine="#eee",t.background="#fff",t.borderLine="#BEC8D9",t.lightFraction=1e3/11},7901:function(e,t,n){"use strict";var r=n(4267),i=n(2770),o=n(3627).isTypedArray,a=e.exports={},s=n(2399);a.defaults=s.defaults;var l=a.defaultLine=s.defaultLine;a.lightLine=s.lightLine;var c=a.background=s.background;function u(e){if(i(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),o="a"===t.charAt(3)&&4===r.length;if(!o&&3!==r.length)return e;for(var a=0;a<r.length;a++){if(!r[a].length)return e;if(r[a]=Number(r[a]),!(r[a]>=0))return e;if(3===a)r[a]>1&&(r[a]=1);else if(r[a]>=1)return e}var s=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return o?"rgba("+s+", "+r[3]+")":"rgb("+s+")"}a.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},a.rgb=function(e){return a.tinyRGB(r(e))},a.opacity=function(e){return e?r(e).getAlpha():0},a.addOpacity=function(e,t){var n=r(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},a.combine=function(e,t){var n=r(e).toRgb();if(1===n.a)return r(e).toRgbString();var i=r(t||c).toRgb(),o=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},a={r:o.r*(1-n.a)+n.r*n.a,g:o.g*(1-n.a)+n.g*n.a,b:o.b*(1-n.a)+n.b*n.a};return r(a).toRgbString()},a.contrast=function(e,t,n){var i=r(e);return 1!==i.getAlpha()&&(i=r(a.combine(e,c))),(i.isDark()?t?i.lighten(t):c:n?i.darken(n):l).toString()},a.stroke=function(e,t){var n=r(t);e.style({stroke:a.tinyRGB(n),"stroke-opacity":n.getAlpha()})},a.fill=function(e,t){var n=r(t);e.style({fill:a.tinyRGB(n),"fill-opacity":n.getAlpha()})},a.clean=function(e){if(e&&"object"==typeof e){var t,n,r,i,s=Object.keys(e);for(t=0;t<s.length;t++)if(i=e[r=s[t]],"color"===r.substr(r.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=u(i[n]);else e[r]=u(i);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=u(i[n][1]));else if(Array.isArray(i)){var l=i[0];if(!Array.isArray(l)&&l&&"object"==typeof l)for(n=0;n<i.length;n++)a.clean(i[n])}else i&&"object"==typeof i&&!o(i)&&a.clean(i)}}},3583:function(e,t,n){"use strict";var r=n(3838),i=n(1940),o=n(1426).extendFlat,a=n(962).overrideAll;e.exports=a({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.minor.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:o({},r.ticks,{dflt:""}),ticklabeloverflow:o({},r.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,ticklabelstep:r.ticklabelstep,showticklabels:r.showticklabels,tickfont:i({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:i({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},939:function(e){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},2499:function(e,t,n){"use strict";var r=n(1828),i=n(4467),o=n(6218),a=n(8701),s=n(6115),l=n(9426),c=n(3583);e.exports=function(e,t,n){var u=i.newContainer(t,"colorbar"),d=e.colorbar||{};function f(e,t){return r.coerce(d,u,c,e,t)}var p=n.margin||{t:0,b:0,l:0,r:0},h=n.width-p.l-p.r,m=n.height-p.t-p.b,g="v"===f("orientation"),v=f("thicknessmode");f("thickness","fraction"===v?30/(g?h:m):30);var y=f("lenmode");f("len","fraction"===y?1:g?m:h),f("x",g?1.02:.5),f("xanchor",g?"left":"center"),f("xpad"),f("y",g?.5:1.02),f("yanchor",g?"middle":"bottom"),f("ypad"),r.noneOrAll(d,u,["x","y"]),f("outlinecolor"),f("outlinewidth"),f("bordercolor"),f("borderwidth"),f("bgcolor");var b=r.coerce(d,u,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:g?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");f("ticklabeloverflow",-1!==b.indexOf("inside")?"hide past domain":"hide past div"),o(d,u,f,"linear");var x=n.font,w={outerTicks:!1,font:x};-1!==b.indexOf("inside")&&(w.bgColor="black"),l(d,u,f,"linear",w),s(d,u,f,"linear",w),a(d,u,f,"linear",w),f("title.text",n._dfltTitle.colorbar);var _=u.tickfont,S=r.extendFlat({},_,{color:x.color,size:r.bigFont(_.size)});r.coerceFont(f,"title.font",S),f("title.side",g?"top":"right")}},8981:function(e,t,n){"use strict";var r=n(9898),i=n(4267),o=n(4875),a=n(3972),s=n(9298),l=n(8569),c=n(1828),u=c.strTranslate,d=n(1426).extendFlat,f=n(6964),p=n(1424),h=n(7901),m=n(2998),g=n(3893),v=n(2869).flipScale,y=n(1453),b=n(2830),x=n(3838),w=n(8783),_=w.LINE_SPACING,S=w.FROM_TL,C=w.FROM_BR,k=n(939).cn;e.exports={draw:function(e){var t=e._fullLayout._infolayer.selectAll("g."+k.colorbar).data(function(e){var t,n,r,i,o=e._fullLayout,a=e.calcdata,s=[];function l(e){return d(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof i.calc?i.calc(e,r,t):(t._fillgradient=n.reversescale?v(n.colorscale):n.colorscale,t._zrange=[n[i.min],n[i.max]])}for(var u=0;u<a.length;u++){var f=a[u],p=(r=f[0].trace)._module.colorbar;if(!0===r.visible&&p)for(var h=Array.isArray(p),m=h?p:[p],g=0;g<m.length;g++){var y=(i=m[g]).container;(n=y?r[y]:r)&&n.showscale&&((t=l(n.colorbar))._id="cb"+r.uid+(h&&y?"-"+y:""),t._traceIndex=r.index,t._propPrefix=(y?y+".":"")+"colorbar.",t._meta=r._meta,c(),s.push(t))}}for(var b in o._colorAxes)if((n=o[b]).showscale){var x=o._colorAxes[b];(t=l(n.colorbar))._id="cb"+b,t._propPrefix=b+".colorbar.",t._meta=o._meta,i={min:"cmin",max:"cmax"},"heatmap"!==x[0]&&(r=x[1],i.calc=r._module.colorbar.calc),c(),s.push(t)}return s}(e),(function(e){return e._id}));t.enter().append("g").attr("class",(function(e){return e._id})).classed(k.colorbar,!0),t.each((function(t){var n=r.select(this);c.ensureSingle(n,"rect",k.cbbg),c.ensureSingle(n,"g",k.cbfills),c.ensureSingle(n,"g",k.cblines),c.ensureSingle(n,"g",k.cbaxis,(function(e){e.classed(k.crisp,!0)})),c.ensureSingle(n,"g",k.cbtitleunshift,(function(e){e.append("g").classed(k.cbtitle,!0)})),c.ensureSingle(n,"rect",k.cboutline);var v=function(e,t,n){var a="v"===t.orientation,l=t.len,f=t.lenmode,v=t.thickness,w=t.thicknessmode,M=t.outlinewidth,T=t.borderwidth,A=t.bgcolor,E=t.xanchor,P=t.yanchor,R=t.xpad,O=t.ypad,I=t.x,L=a?t.y:1-t.y,D=n._fullLayout,N=D._size,F=t._fillcolor,z=t._line,B=t.title,j=B.side,Z=t._zrange||r.extent(("function"==typeof F?F:z.color).domain()),H="function"==typeof z.color?z.color:function(){return z.color},U="function"==typeof F?F:function(){return F},V=t._levels,G=function(e,t,n){var r,i,o=t._levels,a=[],s=[],l=o.end+o.size/100,c=o.size,u=1.001*n[0]-.001*n[1],d=1.001*n[1]-.001*n[0];for(i=0;i<1e5&&(r=o.start+i*c,!(c>0?r>=l:r<=l));i++)r>u&&r<d&&a.push(r);if(t._fillgradient)s=[0];else if("function"==typeof t._fillcolor){var f=t._filllevels;if(f)for(l=f.end+f.size/100,c=f.size,i=0;i<1e5&&(r=f.start+i*c,!(c>0?r>=l:r<=l));i++)r>n[0]&&r<n[1]&&s.push(r);else(s=a.map((function(e){return e-o.size/2}))).push(s[s.length-1]+o.size)}else t._fillcolor&&"string"==typeof t._fillcolor&&(s=[0]);return o.size<0&&(a.reverse(),s.reverse()),{line:a,fill:s}}(0,t,Z),W=G.fill,$=G.line,q=Math.round(v*("fraction"===w?a?N.w:N.h:1)),Y=q/(a?N.w:N.h),X=Math.round(l*("fraction"===f?a?N.h:N.w:1)),K=X/(a?N.h:N.w),J=Math.round(a?I*N.w+R:L*N.h+O),Q={center:.5,right:1}[E]||0,ee={top:1,middle:.5}[P]||0,te=a?I-Q*Y:L-ee*Y,ne=a?L-ee*K:I-Q*K,re=Math.round(a?N.h*(1-ne):N.w*ne);t._lenFrac=K,t._thickFrac=Y,t._uFrac=te,t._vFrac=ne;var ie=t._axis=function(e,t,n){var r=e._fullLayout,i="v"===t.orientation,o={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:i?"right":"bottom",position:1},a=i?"y":"x",s={type:"linear",_id:a+t._id},l={letter:a,font:r.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:r.calendar};function u(e,t){return c.coerce(o,s,x,e,t)}return y(o,s,u,l,r),b(o,s,u,l),s}(n,t,Z);ie.position=Y+(a?I+R/N.w:L+O/N.h);var oe=-1!==["top","bottom"].indexOf(j);if(a&&oe&&(ie.title.side=j,ie.titlex=I+R/N.w,ie.titley=ne+("top"===B.side?K-O/N.h:O/N.h)),a||oe||(ie.title.side=j,ie.titley=L+O/N.h,ie.titlex=ne+R/N.w),z.color&&"auto"===t.tickmode){ie.tickmode="linear",ie.tick0=V.start;var ae=V.size,se=c.constrain(X/50,4,15)+1,le=(Z[1]-Z[0])/((t.nticks||se)*ae);if(le>1){var ce=Math.pow(10,Math.floor(Math.log(le)/Math.LN10));ae*=ce*c.roundUp(le/ce,[2,5,10]),(Math.abs(V.start)/V.size+1e-6)%1<2e-6&&(ie.tick0=0)}ie.dtick=ae}ie.domain=a?[ne+O/N.h,ne+K-O/N.h]:[ne+R/N.w,ne+K-R/N.w],ie.setScale(),e.attr("transform",u(Math.round(N.l),Math.round(N.t)));var ue,de=e.select("."+k.cbtitleunshift).attr("transform",u(-Math.round(N.l),-Math.round(N.t))),fe=ie.ticklabelposition,pe=ie.title.font.size,he=e.select("."+k.cbaxis),me=0,ge=0;function ve(r,i){var o={propContainer:ie,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:D._dfltTitle.colorbar,containerGroup:e.select("."+k.cbtitle)},a="h"===r.charAt(0)?r.substr(1):"h"+r;e.selectAll("."+a+",."+a+"-math-group").remove(),m.draw(n,r,d(o,i||{}))}return c.syncOrAsync([o.previousPromises,function(){var e,t;(a&&oe||!a&&!oe)&&("top"===j&&(e=R+N.l+N.w*I,t=O+N.t+N.h*(1-ne-K)+3+.75*pe),"bottom"===j&&(e=R+N.l+N.w*I,t=O+N.t+N.h*(1-ne)-3-.25*pe),"right"===j&&(t=O+N.t+N.h*L+3+.75*pe,e=R+N.l+N.w*ne),ve(ie._id+"title",{attributes:{x:e,y:t,"text-anchor":a?"start":"middle"}}))},function(){if(!a&&!oe||a&&oe){var o,l=e.select("."+k.cbtitle),d=l.select("text"),f=[-M/2,M/2],h=l.select(".h"+ie._id+"title-math-group").node(),m=15.6;if(d.node()&&(m=parseInt(d.node().style.fontSize,10)*_),h?(o=p.bBox(h),ge=o.width,(me=o.height)>m&&(f[1]-=(me-m)/2)):d.node()&&!d.classed(k.jsPlaceholder)&&(o=p.bBox(d.node()),ge=o.width,me=o.height),a){if(me){if(me+=5,"top"===j)ie.domain[1]-=me/N.h,f[1]*=-1;else{ie.domain[0]+=me/N.h;var v=g.lineCount(d);f[1]+=(1-v)*m}l.attr("transform",u(f[0],f[1])),ie.setScale()}}else ge&&("right"===j&&(ie.domain[0]+=(ge+pe/2)/N.w),l.attr("transform",u(f[0],f[1])),ie.setScale())}e.selectAll("."+k.cbfills+",."+k.cblines).attr("transform",a?u(0,Math.round(N.h*(1-ie.domain[1]))):u(Math.round(N.w*ie.domain[0]),0)),he.attr("transform",a?u(0,Math.round(-N.t)):u(Math.round(-N.l),0));var y=e.select("."+k.cbfills).selectAll("rect."+k.cbfill).attr("style","").data(W);y.enter().append("rect").classed(k.cbfill,!0).style("stroke","none"),y.exit().remove();var b=Z.map(ie.c2p).map(Math.round).sort((function(e,t){return e-t}));y.each((function(e,o){var s=[0===o?Z[0]:(W[o]+W[o-1])/2,o===W.length-1?Z[1]:(W[o]+W[o+1])/2].map(ie.c2p).map(Math.round);a&&(s[1]=c.constrain(s[1]+(s[1]>s[0])?1:-1,b[0],b[1]));var l=r.select(this).attr(a?"x":"y",J).attr(a?"y":"x",r.min(s)).attr(a?"width":"height",Math.max(q,2)).attr(a?"height":"width",Math.max(r.max(s)-r.min(s),2));if(t._fillgradient)p.gradient(l,n,t._id,a?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var u=U(e).replace("e-","");l.attr("fill",i(u).toHexString())}}));var x=e.select("."+k.cblines).selectAll("path."+k.cbline).data(z.color&&z.width?$:[]);x.enter().append("path").classed(k.cbline,!0),x.exit().remove(),x.each((function(e){var t=J,n=Math.round(ie.c2p(e))+z.width/2%1;r.select(this).attr("d","M"+(a?t+","+n:n+","+t)+(a?"h":"v")+q).call(p.lineGroupStyle,z.width,H(e),z.dash)})),he.selectAll("g."+ie._id+"tick,path").remove();var w=J+q+(M||0)/2-("outside"===t.ticks?1:0),S=s.calcTicks(ie),C=s.getTickSigns(ie)[2];return s.drawTicks(n,ie,{vals:"inside"===ie.ticks?s.clipEnds(ie,S):S,layer:he,path:s.makeTickPath(ie,w,C),transFn:s.makeTransTickFn(ie)}),s.drawLabels(n,ie,{vals:S,layer:he,transFn:s.makeTransTickLabelFn(ie),labelFns:s.makeLabelFns(ie,w)})},function(){if(a&&!oe||!a&&oe){var e,i,o=ie.position||0,s=ie._offset+ie._length/2;if("right"===j)i=s,e=N.l+N.w*o+10+pe*(ie.showticklabels?1:.5);else if(e=s,"bottom"===j&&(i=N.t+N.h*o+10+(-1===fe.indexOf("inside")?ie.tickfont.size:0)+("intside"!==ie.ticks&&t.ticklen||0)),"top"===j){var l=B.text.split("<br>").length;i=N.t+N.h*o+10-q-_*pe*l}ve((a?"h":"v")+ie._id+"title",{avoid:{selection:r.select(n).selectAll("g."+ie._id+"tick"),side:j,offsetTop:a?0:N.t,offsetLeft:a?N.l:0,maxShift:a?D.width:D.height},attributes:{x:e,y:i,"text-anchor":"middle"},transform:{rotate:a?-90:0,offset:0}})}},o.previousPromises,function(){var r,s=q+M/2;-1===fe.indexOf("inside")&&(r=p.bBox(he.node()),s+=a?r.width:r.height),ue=de.select("text");var c=0,d=a&&"top"===j,m=!a&&"right"===j,g=0;if(ue.node()&&!ue.classed(k.jsPlaceholder)){var y,b=de.select(".h"+ie._id+"title-math-group").node();b&&(a&&oe||!a&&!oe)?(c=(r=p.bBox(b)).width,y=r.height):(c=(r=p.bBox(de.node())).right-N.l-(a?J:re),y=r.bottom-N.t-(a?re:J),a||"top"!==j||(s+=r.height,g=r.height)),m&&(ue.attr("transform",u(c/2+pe/2,0)),c*=2),s=Math.max(s,a?c:y)}var x=2*(a?R:O)+s+T+M/2,_=0;!a&&B.text&&"bottom"===P&&L<=0&&(x+=_=x/2,g+=_),D._hColorbarMoveTitle=_,D._hColorbarMoveCBTitle=g;var F=T+M;e.select("."+k.cbbg).attr("x",(a?J:re)-F/2-(a?R:0)).attr("y",(a?re:J)-(a?X:O+g-_)).attr(a?"width":"height",Math.max(x-_,2)).attr(a?"height":"width",Math.max(X+F,2)).call(h.fill,A).call(h.stroke,t.bordercolor).style("stroke-width",T);var z=m?Math.max(c-10,0):0;if(e.selectAll("."+k.cboutline).attr("x",(a?J:re+R)+z).attr("y",(a?re+O-X:J)+(d?me:0)).attr(a?"width":"height",Math.max(q,2)).attr(a?"height":"width",Math.max(X-(a?2*O+me:2*R+z),2)).call(h.stroke,t.outlinecolor).style({fill:"none","stroke-width":M}),e.attr("transform",u(N.l-(a?Q*x:0),N.t-(a?0:(1-ee)*x-g))),!a&&(T||i(A).getAlpha()&&!i.equals(D.paper_bgcolor,A))){var Z=he.selectAll("text"),H=Z[0].length,U=e.select("."+k.cbbg).node(),V=p.bBox(U),G=p.getTranslate(e);Z.each((function(e,t){var n=H-1;if(0===t||t===n){var r,i=p.bBox(this),o=p.getTranslate(this);if(t===n){var a=i.right+o.x;(r=V.right+G.x+re-T-2+I-a)>0&&(r=0)}else if(0===t){var s=i.left+o.x;(r=V.left+G.x+re+T+2-s)<0&&(r=0)}r&&(H<3?this.setAttribute("transform","translate("+r+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}}))}var W={},$=S[E],Y=C[E],K=S[P],te=C[P],ne=x-q;a?("pixels"===f?(W.y=L,W.t=X*K,W.b=X*te):(W.t=W.b=0,W.yt=L+l*K,W.yb=L-l*te),"pixels"===w?(W.x=I,W.l=x*$,W.r=x*Y):(W.l=ne*$,W.r=ne*Y,W.xl=I-v*$,W.xr=I+v*Y)):("pixels"===f?(W.x=I,W.l=X*$,W.r=X*Y):(W.l=W.r=0,W.xl=I+l*$,W.xr=I-l*Y),"pixels"===w?(W.y=1-L,W.t=x*K,W.b=x*te):(W.t=ne*K,W.b=ne*te,W.yt=L-v*K,W.yb=L+v*te)),o.autoMargin(n,t._id,W)}],n)}(n,t,e);v&&v.then&&(e._promises||[]).push(v),e._context.edits.colorbarPosition&&function(e,t,n){var r,i,o,s="v"===t.orientation,c=n._fullLayout._size;l.init({element:e.node(),gd:n,prepFn:function(){r=e.attr("transform"),f(e)},moveFn:function(n,a){e.attr("transform",r+u(n,a)),i=l.align((s?t._uFrac:t._vFrac)+n/c.w,s?t._thickFrac:t._lenFrac,0,1,t.xanchor),o=l.align((s?t._vFrac:1-t._uFrac)-a/c.h,s?t._lenFrac:t._thickFrac,0,1,t.yanchor);var d=l.getCursor(i,o,t.xanchor,t.yanchor);f(e,d)},doneFn:function(){if(f(e),void 0!==i&&void 0!==o){var r={};r[t._propPrefix+"x"]=i,r[t._propPrefix+"y"]=o,void 0!==t._traceIndex?a.call("_guiRestyle",n,r,t._traceIndex):a.call("_guiRelayout",n,r)}}})}(n,t,e)})),t.exit().each((function(t){o.autoMargin(e,t._id)})).remove(),t.order()}}},6228:function(e,t,n){"use strict";var r=n(1828);e.exports=function(e){return r.isPlainObject(e.colorbar)}},2311:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"colorbar",attributes:n(3583),supplyDefaults:n(2499),draw:n(8981).draw,hasColorbar:n(6228)}},693:function(e,t,n){"use strict";var r=n(3583),i=n(587).counter,o=n(8607),a=n(3282).scales;function s(e){return"`"+e+"`"}o(a),e.exports=function(e,t){e=e||"";var n,o=(t=t||{}).cLetter||"c",l=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),c="showScaleDflt"in t?t.showScaleDflt:"z"===o,u="string"==typeof t.colorscaleDflt?a[t.colorscaleDflt]:null,d=t.editTypeOverride||"",f=e?e+".":"";"colorAttr"in t?(n=t.colorAttr,t.colorAttr):s(f+(n={z:"z",c:"color"}[o]));var p=o+"auto",h=o+"min",m=o+"max",g=o+"mid",v=(s(f+p),s(f+h),s(f+m),{});v[h]=v[m]=void 0;var y={};y[p]=!1;var b={};return"color"===n&&(b.color={valType:"color",arrayOk:!0,editType:d||"style"},t.anim&&(b.color.anim=!0)),b[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:v},b[h]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:y},b[m]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:y},b[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:v},b.colorscale={valType:"colorscale",editType:"calc",dflt:u,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},l||(b.showscale={valType:"boolean",dflt:c,editType:"calc"},b.colorbar=r),t.noColorAxis||(b.coloraxis={valType:"subplotid",regex:i("coloraxis"),dflt:null,editType:"calc"}),b}},8803:function(e,t,n){"use strict";var r=n(2770),i=n(1828),o=n(2869).extractOpts;e.exports=function(e,t,n){var a,s=e._fullLayout,l=n.vals,c=n.containerStr,u=c?i.nestedProperty(t,c).get():t,d=o(u),f=!1!==d.auto,p=d.min,h=d.max,m=d.mid,g=function(){return i.aggNums(Math.min,null,l)},v=function(){return i.aggNums(Math.max,null,l)};void 0===p?p=g():f&&(p=u._colorAx&&r(p)?Math.min(p,g()):g()),void 0===h?h=v():f&&(h=u._colorAx&&r(h)?Math.max(h,v()):v()),f&&void 0!==m&&(h-m>m-p?p=m-(h-m):h-m<m-p&&(h=m+(m-p))),p===h&&(p-=.5,h+=.5),d._sync("min",p),d._sync("max",h),d.autocolorscale&&(a=p*h<0?s.colorscale.diverging:p>=0?s.colorscale.sequential:s.colorscale.sequentialminus,d._sync("colorscale",a))}},3046:function(e,t,n){"use strict";var r=n(1828),i=n(2869).hasColorscale,o=n(2869).extractOpts;e.exports=function(e,t){function n(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function a(e,i){var a=i.container?r.nestedProperty(e,i.container).get():e;if(a)if(a.coloraxis)a._colorAx=t[a.coloraxis];else{var s=o(a),l=s.auto;(l||void 0===s.min)&&n(a,i.min),(l||void 0===s.max)&&n(a,i.max),s.autocolorscale&&n(a,"colorscale")}}for(var s=0;s<e.length;s++){var l=e[s],c=l._module.colorbar;if(c)if(Array.isArray(c))for(var u=0;u<c.length;u++)a(l,c[u]);else a(l,c);i(l,"marker.line")&&a(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var d in t._colorAxes)a(t[d],{min:"cmin",max:"cmax"})}},1586:function(e,t,n){"use strict";var r=n(2770),i=n(1828),o=n(6228),a=n(2499),s=n(3282).isValid,l=n(3972).traceIs;function c(e,t){var n=t.slice(0,t.length-1);return t?i.nestedProperty(e,n).get()||{}:e}e.exports=function e(t,n,u,d,f){var p=f.prefix,h=f.cLetter,m="_module"in n,g=c(t,p),v=c(n,p),y=c(n._template||{},p)||{},b=function(){return delete t.coloraxis,delete n.coloraxis,e(t,n,u,d,f)};if(m){var x=u._colorAxes||{},w=d(p+"coloraxis");if(w){var _=l(n,"contour")&&i.nestedProperty(n,"contours.coloring").get()||"heatmap",S=x[w];return void(S?(S[2].push(b),S[0]!==_&&(S[0]=!1,i.warn(["Ignoring coloraxis:",w,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[w]=[_,n,[b]])}}var C=g[h+"min"],k=g[h+"max"],M=r(C)&&r(k)&&C<k;d(p+h+"auto",!M)?d(p+h+"mid"):(d(p+h+"min"),d(p+h+"max"));var T,A,E=g.colorscale,P=y.colorscale;void 0!==E&&(T=!s(E)),void 0!==P&&(T=!s(P)),d(p+"autocolorscale",T),d(p+"colorscale"),d(p+"reversescale"),"marker.line."!==p&&(p&&m&&(A=o(g)),d(p+"showscale",A)&&(p&&y&&(v._template=y),a(g,v,u)))}},2869:function(e,t,n){"use strict";var r=n(9898),i=n(4267),o=n(2770),a=n(1828),s=n(7901),l=n(3282).isValid,c=["showscale","autocolorscale","colorscale","reversescale","colorbar"],u=["min","max","mid","auto"];function d(e){var t,n,r,i=e._colorAx,o=i||e,a={};for(n=0;n<c.length;n++)a[r=c[n]]=o[r];if(i)for(t="c",n=0;n<u.length;n++)a[r=u[n]]=o["c"+r];else{var s;for(n=0;n<u.length;n++)((s="c"+(r=u[n]))in o||(s="z"+r)in o)&&(a[r]=o[s]);t=s.charAt(0)}return a._sync=function(e,n){var r=-1!==u.indexOf(e)?t+e:e;o[r]=o["_"+r]=n},a}function f(e){for(var t=d(e),n=t.min,r=t.max,i=t.reversescale?p(t.colorscale):t.colorscale,o=i.length,a=new Array(o),s=new Array(o),l=0;l<o;l++){var c=i[l];a[l]=n+c[0]*(r-n),s[l]=c[1]}return{domain:a,range:s}}function p(e){for(var t=e.length,n=new Array(t),r=t-1,i=0;r>=0;r--,i++){var o=e[r];n[i]=[1-o[0],o[1]]}return n}function h(e,t){t=t||{};for(var n=e.domain,a=e.range,l=a.length,c=new Array(l),u=0;u<l;u++){var d=i(a[u]).toRgb();c[u]=[d.r,d.g,d.b,d.a]}var f,p=r.scale.linear().domain(n).range(c).clamp(!0),h=t.noNumericCheck,g=t.returnArray;return(f=h&&g?p:h?function(e){return m(p(e))}:g?function(e){return o(e)?p(e):i(e).isValid()?e:s.defaultLine}:function(e){return o(e)?m(p(e)):i(e).isValid()?e:s.defaultLine}).domain=p.domain,f.range=function(){return a},f}function m(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return i(t).toRgbString()}e.exports={hasColorscale:function(e,t,n){var r=t?a.nestedProperty(e,t).get()||{}:e,i=r[n||"color"],s=!1;if(a.isArrayOrTypedArray(i))for(var c=0;c<i.length;c++)if(o(i[c])){s=!0;break}return a.isPlainObject(r)&&(s||!0===r.showscale||o(r.cmin)&&o(r.cmax)||l(r.colorscale)||a.isPlainObject(r.colorbar))},extractOpts:d,extractScale:f,flipScale:p,makeColorScaleFunc:h,makeColorScaleFuncFromTrace:function(e,t){return h(f(e),t)}}},1081:function(e,t,n){"use strict";var r=n(3282),i=n(2869);e.exports={moduleType:"component",name:"colorscale",attributes:n(693),layoutAttributes:n(2673),supplyLayoutDefaults:n(959),handleDefaults:n(1586),crossTraceDefaults:n(3046),calc:n(8803),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},2673:function(e,t,n){"use strict";var r=n(1426).extendFlat,i=n(693),o=n(3282).scales;e.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},959:function(e,t,n){"use strict";var r=n(1828),i=n(4467),o=n(2673),a=n(1586);e.exports=function(e,t){function n(n,i){return r.coerce(e,t,o,n,i)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var s,l,c=t._colorAxes;function u(e,t){return r.coerce(s,l,o.coloraxis,e,t)}for(var d in c){var f=c[d];if(f[0])s=e[d]||{},(l=i.newContainer(t,d,"coloraxis"))._name=d,a(s,l,t,u,{prefix:"",cLetter:"c"});else{for(var p=0;p<f[2].length;p++)f[2][p]();delete t._colorAxes[d]}}}},3282:function(e,t,n){"use strict";var r=n(4267),i={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=i.RdBu;function a(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var i=e[n];if(2!==i.length||+i[0]<t||!r(i[1]).isValid())return!1;t=+i[0]}return!0}e.exports={scales:i,defaultScale:o,get:function(e,t){if(t||(t=o),!e)return t;function n(){try{e=i[e]||JSON.parse(e)}catch(n){e=t}}return"string"==typeof e&&(n(),"string"==typeof e&&n()),a(e)?e:t},isValid:function(e){return void 0!==i[e]||a(e)}}},2807:function(e){"use strict";e.exports=function(e,t,n,r,i){var o=(e-n)/(r-n),a=o+t/(r-n),s=(o+a)/2;return"left"===i||"bottom"===i?o:"center"===i||"middle"===i?s:"right"===i||"top"===i?a:o<2/3-s?o:a>4/3-s?a:s}},461:function(e,t,n){"use strict";var r=n(1828),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(e,t,n,o){return e="left"===n?0:"center"===n?1:"right"===n?2:r.constrain(Math.floor(3*e),0,2),t="bottom"===o?0:"middle"===o?1:"top"===o?2:r.constrain(Math.floor(3*t),0,2),i[t][e]}},4505:function(e,t){"use strict";t.selectMode=function(e){return"lasso"===e||"select"===e},t.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},t.openMode=function(e){return"drawline"===e||"drawopenpath"===e},t.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},t.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},t.selectingOrDrawing=function(e){return t.freeMode(e)||t.rectMode(e)}},8569:function(e,t,n){"use strict";var r=n(8956),i=n(7035),o=n(8520),a=n(1828).removeElement,s=n(5555),l=e.exports={};l.align=n(2807),l.getCursor=n(461);var c=n(6041);function u(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function d(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}l.unhover=c.wrapped,l.unhoverRaw=c.raw,l.init=function(e){var t,n,r,c,f,p,h,m,g=e.gd,v=1,y=g._context.doubleClickDelay,b=e.element;g._mouseDownTime||(g._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=w,o?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=w,b.addEventListener("touchstart",w,{passive:!1})):b.ontouchstart=w;var x=e.clampFn||function(e,t,n){return Math.abs(e)<n&&(e=0),Math.abs(t)<n&&(t=0),[e,t]};function w(o){g._dragged=!1,g._dragging=!0;var a=d(o);t=a[0],n=a[1],h=o.target,p=o,m=2===o.buttons||o.ctrlKey,void 0===o.clientX&&void 0===o.clientY&&(o.clientX=t,o.clientY=n),(r=(new Date).getTime())-g._mouseDownTime<y?v+=1:(v=1,g._mouseDownTime=r),e.prepFn&&e.prepFn(o,t,n),i&&!m?(f=u()).style.cursor=window.getComputedStyle(b).cursor:i||(f=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),!1!==e.dragmode&&(o.preventDefault(),document.addEventListener("mousemove",_),document.addEventListener("touchmove",_,{passive:!1}))}function _(r){r.preventDefault();var i=d(r),o=e.minDrag||s.MINDRAG,a=x(i[0]-t,i[1]-n,o),c=a[0],u=a[1];(c||u)&&(g._dragged=!0,l.unhover(g,r)),g._dragged&&e.moveFn&&!m&&(g._dragdata={element:b,dx:c,dy:u},e.moveFn(c,u))}function S(t){if(delete g._dragdata,!1!==e.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",_),document.removeEventListener("touchmove",_)),document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S),i?a(f):c&&(f.documentElement.style.cursor=c,c=null),g._dragging){if(g._dragging=!1,(new Date).getTime()-g._mouseDownTime>y&&(v=Math.max(v-1,1)),g._dragged)e.doneFn&&e.doneFn();else if(e.clickFn&&e.clickFn(v,p),!m){var n;try{n=new MouseEvent("click",t)}catch(e){var r=d(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}h.dispatchEvent(n)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},l.coverSlip=u},6041:function(e,t,n){"use strict";var r=n(1086),i=n(9990),o=n(4401).getGraphDiv,a=n(6675),s=e.exports={};s.wrapped=function(e,t,n){(e=o(e))._fullLayout&&i.clear(e._fullLayout._uid+a.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,i=e._hoverdata;t||(t={}),t.target&&!e._dragged&&!1===r.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&i&&e.emit("plotly_unhover",{event:t,points:i}))}},9952:function(e,t){"use strict";t.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},t.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},1424:function(e,t,n){"use strict";var r=n(9898),i=n(1828),o=i.numberFormat,a=n(2770),s=n(4267),l=n(3972),c=n(7901),u=n(1081),d=i.strTranslate,f=n(3893),p=n(7922),h=n(8783).LINE_SPACING,m=n(7822).DESELECTDIM,g=n(4098),v=n(9984),y=n(3469).appendArrayPointValue,b=e.exports={};function x(e,t,n){var r=t.fillpattern,i=r&&b.getPatternAttr(r.shape,0,"");if(i){var o=b.getPatternAttr(r.bgcolor,0,null),a=b.getPatternAttr(r.fgcolor,0,null),s=r.fgopacity,l=b.getPatternAttr(r.size,0,8),u=b.getPatternAttr(r.solidity,0,.3),d=t.uid;b.pattern(e,"point",n,d,i,l,u,void 0,r.fillmode,o,a,s)}else t.fillcolor&&e.call(c.fill,t.fillcolor)}b.font=function(e,t,n,r){i.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(c.fill,r)},b.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},b.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},b.setRect=function(e,t,n,r,i){e.call(b.setPosition,t,n).call(b.setSize,r,i)},b.translatePoint=function(e,t,n,r){var i=n.c2p(e.x),o=r.c2p(e.y);return!!(a(i)&&a(o)&&t.node())&&("text"===t.node().nodeName?t.attr("x",i).attr("y",o):t.attr("transform",d(i,o)),!0)},b.translatePoints=function(e,t,n){e.each((function(e){var i=r.select(this);b.translatePoint(e,i,t,n)}))},b.hideOutsideRangePoint=function(e,t,n,r,i,o){t.attr("display",n.isPtWithinRange(e,i)&&r.isPtWithinRange(e,o)?null:"none")},b.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var n=t.xaxis,i=t.yaxis;e.each((function(t){var o=t[0].trace,a=o.xcalendar,s=o.ycalendar,c=l.traceIs(o,"bar-like")?".bartext":".point,.textpoint";e.selectAll(c).each((function(e){b.hideOutsideRangePoint(e,r.select(this),n,i,a,s)}))}))}},b.crispRound=function(e,t,n){return t&&a(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},b.singleLineStyle=function(e,t,n,r,i){t.style("fill","none");var o=(((e||[])[0]||{}).trace||{}).line||{},a=n||o.width||0,s=i||o.dash||"";c.stroke(t,r||o.color),b.dashLine(t,s,a)},b.lineGroupStyle=function(e,t,n,i){e.style("fill","none").each((function(e){var o=(((e||[])[0]||{}).trace||{}).line||{},a=t||o.width||0,s=i||o.dash||"";r.select(this).call(c.stroke,n||o.color).call(b.dashLine,s,a)}))},b.dashLine=function(e,t,n){n=+n||0,t=b.dashStyle(t,n),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},b.dashStyle=function(e,t){t=+t||1;var n=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=n+"px,"+n+"px":"dash"===e?e=3*n+"px,"+3*n+"px":"longdash"===e?e=5*n+"px,"+5*n+"px":"dashdot"===e?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===e&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e},b.singleFillStyle=function(e,t){var n=r.select(e.node());x(e,((n.data()[0]||[])[0]||{}).trace||{},t)},b.fillGroupStyle=function(e,t){e.style("stroke-width",0).each((function(e){var n=r.select(this);e[0].trace&&x(n,e[0].trace,t)}))};var w=n(998);b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(w).forEach((function(e){var t=w[e],n=t.n;b.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),b.symbolNames[n]=e,b.symbolFuncs[n]=t.f,b.symbolBackOffs[n]=t.backoff||0,t.needLine&&(b.symbolNeedLines[n]=!0),t.noDot?b.symbolNoDot[n]=!0:b.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(b.symbolNoFill[n]=!0)}));var _=b.symbolNames.length;function S(e,t,n,r){var i=e%100;return b.symbolFuncs[i](t,n,r)+(e>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}b.symbolNumber=function(e){if(a(e))e=+e;else if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),(e=b.symbolNames.indexOf(e))>=0&&(e+=t)}return e%100>=_||e>=400?0:Math.floor(Math.max(e,0))};var C={x1:1,x2:0,y1:0,y2:0},k={x1:0,x2:0,y1:1,y2:0},M=o("~f"),T={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:C},horizontalreversed:{node:"linearGradient",attrs:C,reversed:!0},vertical:{node:"linearGradient",attrs:k},verticalreversed:{node:"linearGradient",attrs:k,reversed:!0}};b.gradient=function(e,t,n,o,a,l){for(var u=a.length,d=T[o],f=new Array(u),p=0;p<u;p++)d.reversed?f[u-1-p]=[M(100*(1-a[p][0])),a[p][1]]:f[p]=[M(100*a[p][0]),a[p][1]];var h=t._fullLayout,m="g"+h._uid+"-"+n,g=h._defs.select(".gradients").selectAll("#"+m).data([o+f.join(";")],i.identity);g.exit().remove(),g.enter().append(d.node).each((function(){var e=r.select(this);d.attrs&&e.attr(d.attrs),e.attr("id",m);var t=e.selectAll("stop").data(f);t.exit().remove(),t.enter().append("stop"),t.each((function(e){var t=s(e[1]);r.select(this).attr({offset:e[0]+"%","stop-color":c.tinyRGB(t),"stop-opacity":t.getAlpha()})}))})),e.style(l,H(m,t)).style(l+"-opacity",null),e.classed("gradient_filled",!0)},b.pattern=function(e,t,n,o,a,l,u,d,f,p,h,m){var g="legend"===t;d&&("overlay"===f?(p=d,h=c.contrast(p)):(p=void 0,h=d));var v,y,b,x,w,_,S,C,k,M=n._fullLayout,T="p"+M._uid+"-"+o,A={},E=s(h),P=c.tinyRGB(E),R=m*E.getAlpha();switch(a){case"/":v=l*Math.sqrt(2),y=l*Math.sqrt(2),_="path",A={d:b="M-"+v/4+","+y/4+"l"+v/2+",-"+y/2+"M0,"+y+"L"+v+",0M"+v/4*3+","+y/4*5+"l"+v/2+",-"+y/2,opacity:R,stroke:P,"stroke-width":(x=u*l)+"px"};break;case"\\":v=l*Math.sqrt(2),y=l*Math.sqrt(2),_="path",A={d:b="M"+v/4*3+",-"+y/4+"l"+v/2+","+y/2+"M0,0L"+v+","+y+"M-"+v/4+","+y/4*3+"l"+v/2+","+y/2,opacity:R,stroke:P,"stroke-width":(x=u*l)+"px"};break;case"x":v=l*Math.sqrt(2),y=l*Math.sqrt(2),b="M-"+v/4+","+y/4+"l"+v/2+",-"+y/2+"M0,"+y+"L"+v+",0M"+v/4*3+","+y/4*5+"l"+v/2+",-"+y/2+"M"+v/4*3+",-"+y/4+"l"+v/2+","+y/2+"M0,0L"+v+","+y+"M-"+v/4+","+y/4*3+"l"+v/2+","+y/2,x=l-l*Math.sqrt(1-u),_="path",A={d:b,opacity:R,stroke:P,"stroke-width":x+"px"};break;case"|":_="path",_="path",A={d:b="M"+(v=l)/2+",0L"+v/2+","+(y=l),opacity:R,stroke:P,"stroke-width":(x=u*l)+"px"};break;case"-":_="path",_="path",A={d:b="M0,"+(y=l)/2+"L"+(v=l)+","+y/2,opacity:R,stroke:P,"stroke-width":(x=u*l)+"px"};break;case"+":_="path",b="M"+(v=l)/2+",0L"+v/2+","+(y=l)+"M0,"+y/2+"L"+v+","+y/2,x=l-l*Math.sqrt(1-u),_="path",A={d:b,opacity:R,stroke:P,"stroke-width":x+"px"};break;case".":v=l,y=l,u<Math.PI/4?w=Math.sqrt(u*l*l/Math.PI):(S=u,C=Math.PI/4,w=(k=l/2)+(l/Math.sqrt(2)-k)*(S-C)/(1-C)),_="circle",A={cx:v/2,cy:y/2,r:w,opacity:R,fill:P}}var O=[a||"noSh",p||"noBg",h||"noFg",l,u].join(";"),I=M._defs.select(".patterns").selectAll("#"+T).data([O],i.identity);I.exit().remove(),I.enter().append("pattern").each((function(){var e=r.select(this);if(e.attr({id:T,width:v+"px",height:y+"px",patternUnits:"userSpaceOnUse",patternTransform:g?"scale(0.8)":""}),p){var t=s(p),n=c.tinyRGB(t),i=t.getAlpha(),o=e.selectAll("rect").data([0]);o.exit().remove(),o.enter().append("rect").attr({width:v+"px",height:y+"px",fill:n,"fill-opacity":i})}var a=e.selectAll(_).data([0]);a.exit().remove(),a.enter().append(_).attr(A)})),e.style("fill",H(T,n)).style("fill-opacity",null),e.classed("pattern_filled",!0)},b.initGradients=function(e){var t=e._fullLayout;i.ensureSingle(t._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),r.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(e){var t=e._fullLayout;i.ensureSingle(t._defs,"g","patterns").selectAll("pattern").remove(),r.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(e,t,n){return e&&i.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},b.pointStyle=function(e,t,n){if(e.size()){var i=b.makePointStyleFns(t);e.each((function(e){b.singlePointStyle(e,r.select(this),t,i,n)}))}},b.singlePointStyle=function(e,t,n,r,o){var a=n.marker,s=a.line;if(t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?a.opacity:e.mo),r.ms2mrc){var l;l="various"===e.ms||"various"===a.size?3:r.ms2mrc(e.ms),e.mrc=l,r.selectedSizeFn&&(l=e.mrc=r.selectedSizeFn(e));var u=b.symbolNumber(e.mx||a.symbol)||0;e.om=u%200>=100;var d=ne(e,n),f=G(e,n);t.attr("d",S(u,l,d,f))}var p,h,m,g=!1;if(e.so)m=s.outlierwidth,h=s.outliercolor,p=a.outliercolor;else{var v=(s||{}).width;m=(e.mlw+1||v+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,h="mlc"in e?e.mlcc=r.lineScale(e.mlc):i.isArrayOrTypedArray(s.color)?c.defaultLine:s.color,i.isArrayOrTypedArray(a.color)&&(p=c.defaultLine,g=!0),p="mc"in e?e.mcc=r.markerScale(e.mc):a.color||"rgba(0,0,0,0)",r.selectedColorFn&&(p=r.selectedColorFn(e))}if(e.om)t.call(c.stroke,p).style({"stroke-width":(m||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:m)+"px");var y=a.gradient,x=e.mgt;x?g=!0:x=y&&y.type,i.isArrayOrTypedArray(x)&&(x=x[0],T[x]||(x=0));var w=a.pattern,_=w&&b.getPatternAttr(w.shape,e.i,"");if(x&&"none"!==x){var C=e.mgc;C?g=!0:C=y.color;var k=n.uid;g&&(k+="-"+e.i),b.gradient(t,o,k,x,[[0,C],[1,p]],"fill")}else if(_){var M=b.getPatternAttr(w.bgcolor,e.i,null),A=b.getPatternAttr(w.fgcolor,e.i,null),E=w.fgopacity,P=b.getPatternAttr(w.size,e.i,8),R=b.getPatternAttr(w.solidity,e.i,.3),O=e.mcc||i.isArrayOrTypedArray(w.shape)||i.isArrayOrTypedArray(w.bgcolor)||i.isArrayOrTypedArray(w.size)||i.isArrayOrTypedArray(w.solidity),I=n.uid;O&&(I+="-"+e.i),b.pattern(t,"point",o,I,_,P,R,e.mcc,w.fillmode,M,A,E)}else c.fill(t,p);m&&c.stroke(t,h)}},b.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=b.tryColorscale(n,""),t.lineScale=b.tryColorscale(n,"line"),l.traceIs(e,"symbols")&&(t.ms2mrc=g.isBubble(e)?v(e):function(){return(n.size||6)/2}),e.selectedpoints&&i.extendFlat(t,b.makeSelectedPointStyleFns(e)),t},b.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},o=e.marker||{},a=n.marker||{},s=r.marker||{},c=o.opacity,u=a.opacity,d=s.opacity,f=void 0!==u,p=void 0!==d;(i.isArrayOrTypedArray(c)||f||p)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?o.opacity:e.mo;return e.selected?f?u:t:p?d:m*t});var h=o.color,g=a.color,v=s.color;(g||v)&&(t.selectedColorFn=function(e){var t=e.mcc||h;return e.selected?g||t:v||t});var y=o.size,b=a.size,x=s.size,w=void 0!==b,_=void 0!==x;return l.traceIs(e,"symbols")&&(w||_)&&(t.selectedSizeFn=function(e){var t=e.mrc||y/2;return e.selected?w?b/2:t:_?x/2:t}),t},b.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},i=e.textfont||{},o=n.textfont||{},a=r.textfont||{},s=i.color,l=o.color,u=a.color;return t.selectedTextColorFn=function(e){var t=e.tc||s;return e.selected?l||t:u||(l?t:c.addOpacity(t,m))},t},b.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=b.makeSelectedPointStyleFns(t),i=t.marker||{},o=[];n.selectedOpacityFn&&o.push((function(e,t){e.style("opacity",n.selectedOpacityFn(t))})),n.selectedColorFn&&o.push((function(e,t){c.fill(e,n.selectedColorFn(t))})),n.selectedSizeFn&&o.push((function(e,r){var o=r.mx||i.symbol||0,a=n.selectedSizeFn(r);e.attr("d",S(b.symbolNumber(o),a,ne(r,t),G(r,t))),r.mrc2=a})),o.length&&e.each((function(e){for(var t=r.select(this),n=0;n<o.length;n++)o[n](t,e)}))}},b.tryColorscale=function(e,t){var n=t?i.nestedProperty(e,t).get():e;if(n){var r=n.color;if((n.colorscale||n._colorAx)&&i.isArrayOrTypedArray(r))return u.makeColorScaleFuncFromTrace(n)}return i.identity};var A,E,P={start:1,end:-1,middle:0,bottom:1,top:-1};function R(e,t,n,i,o){var a=r.select(e.node().parentNode),s=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",l=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",c=i?i/.8+1:0,u=(f.lineCount(e)-1)*h+1,p=P[l]*c,m=.75*n+P[s]*c+(P[s]-1)*u*n/2;e.attr("text-anchor",l),o||a.attr("transform",d(p,m))}function O(e,t){var n=e.ts||t.textfont.size;return a(n)&&n>0?n:0}function I(e,t,n){return n&&(e=B(e)),t?D(e[1]):L(e[0])}function L(e){var t=r.round(e,2);return A=t,t}function D(e){var t=r.round(e,2);return E=t,t}function N(e,t,n,r){var i=e[0]-t[0],o=e[1]-t[1],a=n[0]-t[0],s=n[1]-t[1],l=Math.pow(i*i+o*o,.25),c=Math.pow(a*a+s*s,.25),u=(c*c*i-l*l*a)*r,d=(c*c*o-l*l*s)*r,f=3*c*(l+c),p=3*l*(l+c);return[[L(t[0]+(f&&u/f)),D(t[1]+(f&&d/f))],[L(t[0]-(p&&u/p)),D(t[1]-(p&&d/p))]]}b.textPointStyle=function(e,t,n){if(e.size()){var o;if(t.selectedpoints){var a=b.makeSelectedTextStyleFns(t);o=a.selectedTextColorFn}var s=t.texttemplate,l=n._fullLayout;e.each((function(e){var a=r.select(this),c=s?i.extractOption(e,t,"txt","texttemplate"):i.extractOption(e,t,"tx","text");if(c||0===c){if(s){var u=t._module.formatLabels,d=u?u(e,t,l):{},p={};y(p,t,e.i);var h=t._meta||{};c=i.texttemplateString(c,d,l._d3locale,p,e,h)}var m=e.tp||t.textposition,g=O(e,t),v=o?o(e):e.tc||t.textfont.color;a.call(b.font,e.tf||t.textfont.family,g,v).text(c).call(f.convertToTspans,n).call(R,m,g,e.mrc)}else a.remove()}))}},b.selectedTextStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=b.makeSelectedTextStyleFns(t);e.each((function(e){var i=r.select(this),o=n.selectedTextColorFn(e),a=e.tp||t.textposition,s=O(e,t);c.fill(i,o);var u=l.traceIs(t,"bar-like");R(i,a,s,e.mrc2||e.mrc,u)}))}},b.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,r="M"+e[0],i=[];for(n=1;n<e.length-1;n++)i.push(N(e[n-1],e[n],e[n+1],t));for(r+="Q"+i[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+e[n];return r+"Q"+i[e.length-3][1]+" "+e[e.length-1]},b.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,r="M"+e[0],i=e.length-1,o=[N(e[i],e[0],e[1],t)];for(n=1;n<i;n++)o.push(N(e[n-1],e[n],e[n+1],t));for(o.push(N(e[i-1],e[i],e[0],t)),n=1;n<=i;n++)r+="C"+o[n-1][1]+" "+o[n][0]+" "+e[n];return r+"C"+o[i][1]+" "+o[0][0]+" "+e[0]+"Z"};var F={hv:function(e,t,n){return"H"+L(t[0])+"V"+I(t,1,n)},vh:function(e,t,n){return"V"+D(t[1])+"H"+I(t,0,n)},hvh:function(e,t,n){return"H"+L((e[0]+t[0])/2)+"V"+D(t[1])+"H"+I(t,0,n)},vhv:function(e,t,n){return"V"+D((e[1]+t[1])/2)+"H"+L(t[0])+"V"+I(t,1,n)}},z=function(e,t,n){return"L"+I(t,0,n)+","+I(t,1,n)};function B(e,t){var n=e.backoff,r=e.trace,o=e.d,a=e.i;if(n&&r&&r.marker&&r.marker.angle%360==0&&r.line&&"spline"!==r.line.shape){var s=i.isArrayOrTypedArray(n),l=e,c=t?t[0]:A||0,u=t?t[1]:E||0,d=l[0],f=l[1],p=d-c,h=f-u,m=Math.atan2(h,p),g=s?n[a]:n;if("auto"===g){var v=l.i;"scatter"===r.type&&v--;var y=l.marker,x=y.symbol;i.isArrayOrTypedArray(x)&&(x=x[v]);var w=y.size;i.isArrayOrTypedArray(w)&&(w=w[v]),g=y?b.symbolBackOffs[b.symbolNumber(x)]*w:0,g+=b.getMarkerStandoff(o[v],r)||0}var _=d-g*Math.cos(m),S=f-g*Math.sin(m);(_<=d&&_>=c||_>=d&&_<=c)&&(S<=f&&S>=u||S>=f&&S<=u)&&(e=[_,S])}return e}b.steps=function(e){var t=F[e]||z;return function(e){for(var n="M"+L(e[0][0])+","+D(e[0][1]),r=e.length,i=1;i<r;i++)n+=t(e[i-1],e[i],i===r-1);return n}},b.applyBackoff=B,b.makeTester=function(){var e=i.ensureSingleById(r.select("body"),"svg","js-plotly-tester",(function(e){e.attr(p.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})})),t=i.ensureSingle(e,"path","js-reference-point",(function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})}));b.tester=e,b.testref=t},b.savedBBoxes={};var j=0;function Z(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function H(e,t){if(!e)return null;var n=t._context,r=n._exportedPlot?"":n._baseUrl||"";return r?"url('"+r+"#"+e+"')":"url(#"+e+")"}b.bBox=function(e,t,n){var o,a,s;if(n||(n=Z(e)),n){if(o=b.savedBBoxes[n])return i.extendFlat({},o)}else if(1===e.childNodes.length){var l=e.childNodes[0];if(n=Z(l)){var c=+l.getAttribute("x")||0,u=+l.getAttribute("y")||0,d=l.getAttribute("transform");if(!d){var p=b.bBox(l,!1,n);return c&&(p.left+=c,p.right+=c),u&&(p.top+=u,p.bottom+=u),p}if(n+="~"+c+"~"+u+"~"+d,o=b.savedBBoxes[n])return i.extendFlat({},o)}}t?a=e:(s=b.tester.node(),a=e.cloneNode(!0),s.appendChild(a)),r.select(a).attr("transform",null).call(f.positionText,0,0);var h=a.getBoundingClientRect(),m=b.testref.node().getBoundingClientRect();t||s.removeChild(a);var g={height:h.height,width:h.width,left:h.left-m.left,top:h.top-m.top,right:h.right-m.left,bottom:h.bottom-m.top};return j>=1e4&&(b.savedBBoxes={},j=0),n&&(b.savedBBoxes[n]=g),j++,i.extendFlat({},g)},b.setClipUrl=function(e,t,n){e.attr("clip-path",H(t,n))},b.getTranslate=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,(function(e,t,n){return[t,n].join(" ")})).split(" ");return{x:+t[0]||0,y:+t[1]||0}},b.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[r]("transform")||"";return t=t||0,n=n||0,o=o.replace(/(\btranslate\(.*?\);?)/,"").trim(),o=(o+=d(t,n)).trim(),e[i]("transform",o),o},b.getScale=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,(function(e,t,n){return[t,n].join(" ")})).split(" ");return{x:+t[0]||1,y:+t[1]||1}},b.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[r]("transform")||"";return t=t||1,n=n||1,o=o.replace(/(\bscale\(.*?\);?)/,"").trim(),o=(o+="scale("+t+","+n+")").trim(),e[i]("transform",o),o};var U=/\s*sc.*/;b.setPointGroupScale=function(e,t,n){if(t=t||1,n=n||1,e){var r=1===t&&1===n?"":"scale("+t+","+n+")";e.each((function(){var e=(this.getAttribute("transform")||"").replace(U,"");e=(e+=r).trim(),this.setAttribute("transform",e)}))}};var V=/translate\([^)]*\)\s*$/;function G(e,t){var n;return e&&(n=e.mf),void 0===n&&(n=t.marker&&t.marker.standoff||0),t._geo||t._xA?n:-n}b.setTextPointsScale=function(e,t,n){e&&e.each((function(){var e,i=r.select(this),o=i.select("text");if(o.node()){var a=parseFloat(o.attr("x")||0),s=parseFloat(o.attr("y")||0),l=(i.attr("transform")||"").match(V);e=1===t&&1===n?[]:[d(a,s),"scale("+t+","+n+")",d(-a,-s)],l&&e.push(l),i.attr("transform",e.join(""))}}))},b.getMarkerStandoff=G;var W,$,q,Y,X,K,J=Math.atan2,Q=Math.cos,ee=Math.sin;function te(e,t){var n=t[0],r=t[1];return[n*Q(e)-r*ee(e),n*ee(e)+r*Q(e)]}function ne(e,t){var n,r,i=e.ma;void 0===i&&(i=t.marker.angle||0);var o=t.marker.angleref;if("previous"===o||"north"===o){if(t._geo){var s=t._geo.project(e.lonlat);n=s[0],r=s[1]}else{var l=t._xA,c=t._yA;if(!l||!c)return 90;n=l.c2p(e.x),r=c.c2p(e.y)}if(t._geo){var u,d=e.lonlat[0],f=e.lonlat[1],p=t._geo.project([d,f+1e-5]),h=t._geo.project([d+1e-5,f]),m=J(h[1]-r,h[0]-n),g=J(p[1]-r,p[0]-n);if("north"===o)u=i/180*Math.PI;else if("previous"===o){var v=d/180*Math.PI,y=f/180*Math.PI,b=W/180*Math.PI,x=$/180*Math.PI,w=b-v,_=Q(x)*ee(w),S=ee(x)*Q(y)-Q(x)*ee(y)*Q(w);u=-J(_,S)-Math.PI,W=d,$=f}var C=te(m,[Q(u),0]),k=te(g,[ee(u),0]);i=J(C[1]+k[1],C[0]+k[0])/Math.PI*180,"previous"!==o||K===t.uid&&e.i===X+1||(i=null)}if("previous"===o&&!t._geo)if(K===t.uid&&e.i===X+1&&a(n)&&a(r)){var M=n-q,T=r-Y,A=t.line&&t.line.shape||"",E=A.slice(A.length-1);"h"===E&&(T=0),"v"===E&&(M=0),i+=J(T,M)/Math.PI*180+90}else i=null}return q=n,Y=r,X=e.i,K=t.uid,i}b.getMarkerAngle=ne},998:function(e,t,n){"use strict";var r,i,o,a,s=n(5616),l=n(9898).round,c="M0,0Z",u=Math.sqrt(2),d=Math.sqrt(3),f=Math.PI,p=Math.cos,h=Math.sin;function m(e){return null===e}function g(e,t,n){if(!(e&&e%360!=0||t))return n;if(o===e&&a===t&&r===n)return i;function l(e,n){var r=p(e),i=h(e),o=n[0],a=n[1]+(t||0);return[o*r-a*i,o*i+a*r]}o=e,a=t,r=n;for(var c=e/180*f,u=0,d=0,m=s(n),g="",v=0;v<m.length;v++){var y=m[v],b=y[0],x=u,w=d;if("M"===b||"L"===b)u=+y[1],d=+y[2];else if("m"===b||"l"===b)u+=+y[1],d+=+y[2];else if("H"===b)u=+y[1];else if("h"===b)u+=+y[1];else if("V"===b)d=+y[1];else if("v"===b)d+=+y[1];else if("A"===b){u=+y[1],d=+y[2];var _=l(c,[+y[6],+y[7]]);y[6]=_[0],y[7]=_[1],y[3]=+y[3]+e}"H"!==b&&"V"!==b||(b="L"),"h"!==b&&"v"!==b||(b="l"),"m"!==b&&"l"!==b||(u-=x,d-=w);var S=l(c,[u,d]);"H"!==b&&"V"!==b||(b="L"),"M"!==b&&"L"!==b&&"m"!==b&&"l"!==b||(y[1]=S[0],y[2]=S[1]),y[0]=b,g+=y[0]+y.slice(1).join(",")}return i=g,g}e.exports={circle:{n:0,f:function(e,t,n){if(m(t))return c;var r=l(e,2),i="M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z";return n?g(t,n,i):i}},square:{n:1,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")}},diamond:{n:2,f:function(e,t,n){if(m(t))return c;var r=l(1.3*e,2);return g(t,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"Z")}},cross:{n:3,f:function(e,t,n){if(m(t))return c;var r=l(.4*e,2),i=l(1.2*e,2);return g(t,n,"M"+i+","+r+"H"+r+"V"+i+"H-"+r+"V"+r+"H-"+i+"V-"+r+"H-"+r+"V-"+i+"H"+r+"V-"+r+"H"+i+"Z")}},x:{n:4,f:function(e,t,n){if(m(t))return c;var r=l(.8*e/u,2),i="l"+r+","+r,o="l"+r+",-"+r,a="l-"+r+",-"+r,s="l-"+r+","+r;return g(t,n,"M0,"+r+i+o+a+o+a+s+a+s+i+s+i+"Z")}},"triangle-up":{n:5,f:function(e,t,n){if(m(t))return c;var r=l(2*e/d,2);return g(t,n,"M-"+r+","+l(e/2,2)+"H"+r+"L0,-"+l(e,2)+"Z")}},"triangle-down":{n:6,f:function(e,t,n){if(m(t))return c;var r=l(2*e/d,2);return g(t,n,"M-"+r+",-"+l(e/2,2)+"H"+r+"L0,"+l(e,2)+"Z")}},"triangle-left":{n:7,f:function(e,t,n){if(m(t))return c;var r=l(2*e/d,2);return g(t,n,"M"+l(e/2,2)+",-"+r+"V"+r+"L-"+l(e,2)+",0Z")}},"triangle-right":{n:8,f:function(e,t,n){if(m(t))return c;var r=l(2*e/d,2);return g(t,n,"M-"+l(e/2,2)+",-"+r+"V"+r+"L"+l(e,2)+",0Z")}},"triangle-ne":{n:9,f:function(e,t,n){if(m(t))return c;var r=l(.6*e,2),i=l(1.2*e,2);return g(t,n,"M-"+i+",-"+r+"H"+r+"V"+i+"Z")}},"triangle-se":{n:10,f:function(e,t,n){if(m(t))return c;var r=l(.6*e,2),i=l(1.2*e,2);return g(t,n,"M"+r+",-"+i+"V"+r+"H-"+i+"Z")}},"triangle-sw":{n:11,f:function(e,t,n){if(m(t))return c;var r=l(.6*e,2),i=l(1.2*e,2);return g(t,n,"M"+i+","+r+"H-"+r+"V-"+i+"Z")}},"triangle-nw":{n:12,f:function(e,t,n){if(m(t))return c;var r=l(.6*e,2),i=l(1.2*e,2);return g(t,n,"M-"+r+","+i+"V-"+r+"H"+i+"Z")}},pentagon:{n:13,f:function(e,t,n){if(m(t))return c;var r=l(.951*e,2),i=l(.588*e,2),o=l(-e,2),a=l(-.309*e,2);return g(t,n,"M"+r+","+a+"L"+i+","+l(.809*e,2)+"H-"+i+"L-"+r+","+a+"L0,"+o+"Z")}},hexagon:{n:14,f:function(e,t,n){if(m(t))return c;var r=l(e,2),i=l(e/2,2),o=l(e*d/2,2);return g(t,n,"M"+o+",-"+i+"V"+i+"L0,"+r+"L-"+o+","+i+"V-"+i+"L0,-"+r+"Z")}},hexagon2:{n:15,f:function(e,t,n){if(m(t))return c;var r=l(e,2),i=l(e/2,2),o=l(e*d/2,2);return g(t,n,"M-"+i+","+o+"H"+i+"L"+r+",0L"+i+",-"+o+"H-"+i+"L-"+r+",0Z")}},octagon:{n:16,f:function(e,t,n){if(m(t))return c;var r=l(.924*e,2),i=l(.383*e,2);return g(t,n,"M-"+i+",-"+r+"H"+i+"L"+r+",-"+i+"V"+i+"L"+i+","+r+"H-"+i+"L-"+r+","+i+"V-"+i+"Z")}},star:{n:17,f:function(e,t,n){if(m(t))return c;var r=1.4*e,i=l(.225*r,2),o=l(.951*r,2),a=l(.363*r,2),s=l(.588*r,2),u=l(-r,2),d=l(-.309*r,2),f=l(.118*r,2),p=l(.809*r,2);return g(t,n,"M"+i+","+d+"H"+o+"L"+a+","+f+"L"+s+","+p+"L0,"+l(.382*r,2)+"L-"+s+","+p+"L-"+a+","+f+"L-"+o+","+d+"H-"+i+"L0,"+u+"Z")}},hexagram:{n:18,f:function(e,t,n){if(m(t))return c;var r=l(.66*e,2),i=l(.38*e,2),o=l(.76*e,2);return g(t,n,"M-"+o+",0l-"+i+",-"+r+"h"+o+"l"+i+",-"+r+"l"+i+","+r+"h"+o+"l-"+i+","+r+"l"+i+","+r+"h-"+o+"l-"+i+","+r+"l-"+i+",-"+r+"h-"+o+"Z")}},"star-triangle-up":{n:19,f:function(e,t,n){if(m(t))return c;var r=l(e*d*.8,2),i=l(.8*e,2),o=l(1.6*e,2),a=l(4*e,2),s="A "+a+","+a+" 0 0 1 ";return g(t,n,"M-"+r+","+i+s+r+","+i+s+"0,-"+o+s+"-"+r+","+i+"Z")}},"star-triangle-down":{n:20,f:function(e,t,n){if(m(t))return c;var r=l(e*d*.8,2),i=l(.8*e,2),o=l(1.6*e,2),a=l(4*e,2),s="A "+a+","+a+" 0 0 1 ";return g(t,n,"M"+r+",-"+i+s+"-"+r+",-"+i+s+"0,"+o+s+r+",-"+i+"Z")}},"star-square":{n:21,f:function(e,t,n){if(m(t))return c;var r=l(1.1*e,2),i=l(2*e,2),o="A "+i+","+i+" 0 0 1 ";return g(t,n,"M-"+r+",-"+r+o+"-"+r+","+r+o+r+","+r+o+r+",-"+r+o+"-"+r+",-"+r+"Z")}},"star-diamond":{n:22,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2),i=l(1.9*e,2),o="A "+i+","+i+" 0 0 1 ";return g(t,n,"M-"+r+",0"+o+"0,"+r+o+r+",0"+o+"0,-"+r+o+"-"+r+",0Z")}},"diamond-tall":{n:23,f:function(e,t,n){if(m(t))return c;var r=l(.7*e,2),i=l(1.4*e,2);return g(t,n,"M0,"+i+"L"+r+",0L0,-"+i+"L-"+r+",0Z")}},"diamond-wide":{n:24,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2),i=l(.7*e,2);return g(t,n,"M0,"+i+"L"+r+",0L0,-"+i+"L-"+r+",0Z")}},hourglass:{n:25,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"H-"+r+"L"+r+",-"+r+"H-"+r+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"V-"+r+"L-"+r+","+r+"V-"+r+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,n){if(m(t))return c;var r=l(e,2),i=l(e/u,2);return g(t,n,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,n){if(m(t))return c;var r=l(1.3*e,2);return g(t,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM0,-"+r+"V"+r+"M-"+r+",0H"+r)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,n){if(m(t))return c;var r=l(1.3*e,2),i=l(.65*e,2);return g(t,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM-"+i+",-"+i+"L"+i+","+i+"M-"+i+","+i+"L"+i+",-"+i)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2);return g(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(.85*e,2);return g(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,n){if(m(t))return c;var r=l(e/2,2),i=l(e,2);return g(t,n,"M"+r+","+i+"V-"+i+"M"+(r-i)+",-"+i+"V"+i+"M"+i+","+r+"H-"+i+"M-"+i+","+(r-i)+"H"+i)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(1.6*e,2),o=l(.8*e,2);return g(t,n,"M-"+r+","+o+"L0,0M"+r+","+o+"L0,0M0,-"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(1.6*e,2),o=l(.8*e,2);return g(t,n,"M-"+r+",-"+o+"L0,0M"+r+",-"+o+"L0,0M0,"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(1.6*e,2),o=l(.8*e,2);return g(t,n,"M"+o+","+r+"L0,0M"+o+",-"+r+"L0,0M-"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(1.6*e,2),o=l(.8*e,2);return g(t,n,"M-"+o+","+r+"L0,0M-"+o+",-"+r+"L0,0M"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2);return g(t,n,"M"+r+",0H-"+r)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2);return g(t,n,"M0,"+r+"V-"+r)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"L-"+r+",-"+r)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M0,0L-"+r+","+l(2*e,2)+"H"+r+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M0,0L-"+r+",-"+l(2*e,2)+"H"+r+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,n){if(m(t))return c;var r=l(2*e,2),i=l(e,2);return g(t,n,"M0,0L"+r+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,n){if(m(t))return c;var r=l(2*e,2),i=l(e,2);return g(t,n,"M0,0L-"+r+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M-"+r+",0H"+r+"M0,0L-"+r+","+l(2*e,2)+"H"+r+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M-"+r+",0H"+r+"M0,0L-"+r+",-"+l(2*e,2)+"H"+r+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,n){if(m(t))return c;var r=l(2*e,2),i=l(e,2);return g(t,n,"M0,-"+i+"V"+i+"M0,0L"+r+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,n){if(m(t))return c;var r=l(2*e,2),i=l(e,2);return g(t,n,"M0,-"+i+"V"+i+"M0,0L-"+r+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,n){if(m(t))return c;var r=f/2.5,i=2*e*p(r),o=2*e*h(r);return g(t,n,"M0,0L"+-i+","+o+"L"+i+","+o+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,n){if(m(t))return c;var r=f/4,i=2*e*p(r),o=2*e*h(r);return g(t,n,"M0,0L"+-i+","+o+"A "+2*e+","+2*e+" 0 0 1 "+i+","+o+"Z")},backoff:.4,noDot:!0}}},5673:function(e){"use strict";e.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},4532:function(e,t,n){"use strict";var r=n(2770),i=n(3972),o=n(9298),a=n(1828),s=n(5827);function l(e,t,n,i){var l=t["error_"+i]||{},c=[];if(l.visible&&-1!==["linear","log"].indexOf(n.type)){for(var u=s(l),d=0;d<e.length;d++){var f=e[d],p=f.i;if(void 0===p)p=d;else if(null===p)continue;var h=f[i];if(r(n.c2l(h))){var m=u(h,p);if(r(m[0])&&r(m[1])){var g=f[i+"s"]=h-m[0],v=f[i+"h"]=h+m[1];c.push(g,v)}}}var y=n._id,b=t._extremes[y],x=o.findExtremes(n,c,a.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(x.min),b.max=b.max.concat(x.max)}}e.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r=t[n],a=r[0].trace;if(!0===a.visible&&i.traceIs(a,"errorBarsOK")){var s=o.getFromId(e,a.xaxis),c=o.getFromId(e,a.yaxis);l(r,a,s,"x"),l(r,a,c,"y")}}}},5827:function(e){"use strict";function t(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}e.exports=function(e){var n=e.type,r=e.symmetric;if("data"===n){var i=e.array||[];if(r)return function(e,t){var n=+i[t];return[n,n]};var o=e.arrayminus||[];return function(e,t){var n=+i[t],r=+o[t];return isNaN(n)&&isNaN(r)?[NaN,NaN]:[r||0,n||0]}}var a=t(n,e.value),s=t(n,e.valueminus);return r||void 0===e.valueminus?function(e){var t=a(e);return[t,t]}:function(e){return[s(e),a(e)]}}},7587:function(e,t,n){"use strict";var r=n(2770),i=n(3972),o=n(1828),a=n(4467),s=n(5673);e.exports=function(e,t,n,l){var c="error_"+l.axis,u=a.newContainer(t,c),d=e[c]||{};function f(e,t){return o.coerce(d,u,s,e,t)}if(!1!==f("visible",void 0!==d.array||void 0!==d.value||"sqrt"===d.type)){var p=f("type","array"in d?"data":"percent"),h=!0;"sqrt"!==p&&(h=f("symmetric",!(("data"===p?"arrayminus":"valueminus")in d))),"data"===p?(f("array"),f("traceref"),h||(f("arrayminus"),f("tracerefminus"))):"percent"!==p&&"constant"!==p||(f("value"),h||f("valueminus"));var m="copy_"+l.inherit+"style";l.inherit&&(t["error_"+l.inherit]||{}).visible&&f(m,!(d.color||r(d.thickness)||r(d.width))),l.inherit&&u[m]||(f("color",n),f("thickness"),f("width",i.traceIs(t,"gl3d")?0:4))}}},7369:function(e,t,n){"use strict";var r=n(1828),i=n(962).overrideAll,o=n(5673),a={error_x:r.extendFlat({},o),error_y:r.extendFlat({},o)};delete a.error_x.copy_zstyle,delete a.error_y.copy_zstyle,delete a.error_y.copy_ystyle;var s={error_x:r.extendFlat({},o),error_y:r.extendFlat({},o),error_z:r.extendFlat({},o)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:a,bar:a,histogram:a,scatter3d:i(s,"calc","nested"),scattergl:i(a,"calc","nested")}},supplyDefaults:n(7587),calc:n(4532),makeComputeError:n(5827),plot:n(9398),style:n(2662),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},9398:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=n(1424),a=n(4098);e.exports=function(e,t,n,s){var l=n.xaxis,c=n.yaxis,u=s&&s.duration>0;t.each((function(t){var d,f=t[0].trace,p=f.error_x||{},h=f.error_y||{};f.ids&&(d=function(e){return e.id});var m=a.hasMarkers(f)&&f.marker.maxdisplayed>0;h.visible||p.visible||(t=[]);var g=r.select(this).selectAll("g.errorbar").data(t,d);if(g.exit().remove(),t.length){p.visible||g.selectAll("path.xerror").remove(),h.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var v=g.enter().append("g").classed("errorbar",!0);u&&v.style("opacity",0).transition().duration(s.duration).style("opacity",1),o.setClipUrl(g,n.layerClipId,e),g.each((function(e){var t=r.select(this),n=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};return void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),i(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0))),void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),i(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0))),r}(e,l,c);if(!m||e.vis){var o,a=t.select("path.yerror");if(h.visible&&i(n.x)&&i(n.yh)&&i(n.ys)){var d=h.width;o="M"+(n.x-d)+","+n.yh+"h"+2*d+"m-"+d+",0V"+n.ys,n.noYS||(o+="m-"+d+",0h"+2*d),a.size()?u&&(a=a.transition().duration(s.duration).ease(s.easing)):a=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),a.attr("d",o)}else a.remove();var f=t.select("path.xerror");if(p.visible&&i(n.y)&&i(n.xh)&&i(n.xs)){var g=(p.copy_ystyle?h:p).width;o="M"+n.xh+","+(n.y-g)+"v"+2*g+"m0,-"+g+"H"+n.xs,n.noXS||(o+="m0,-"+g+"v"+2*g),f.size()?u&&(f=f.transition().duration(s.duration).ease(s.easing)):f=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),f.attr("d",o)}else f.remove()}}))}}))}},2662:function(e,t,n){"use strict";var r=n(9898),i=n(7901);e.exports=function(e){e.each((function(e){var t=e[0].trace,n=t.error_y||{},o=t.error_x||{},a=r.select(this);a.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),o.copy_ystyle&&(o=n),a.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(i.stroke,o.color)}))}},7914:function(e,t,n){"use strict";var r=n(1940),i=n(528).hoverlabel,o=n(1426).extendFlat;e.exports={hoverlabel:{bgcolor:o({},i.bgcolor,{arrayOk:!0}),bordercolor:o({},i.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:o({},i.align,{arrayOk:!0}),namelength:o({},i.namelength,{arrayOk:!0}),editType:"none"}}},732:function(e,t,n){"use strict";var r=n(1828),i=n(3972);function o(e,t,n,i){i=i||r.identity,Array.isArray(e)&&(t[0][n]=i(e))}e.exports=function(e){var t=e.calcdata,n=e._fullLayout;function a(e){return function(t){return r.coerceHoverinfo({hoverinfo:t},{_module:e._module},n)}}for(var s=0;s<t.length;s++){var l=t[s],c=l[0].trace;if(!i.traceIs(c,"pie-like")){var u=i.traceIs(c,"2dMap")?o:r.fillArray;u(c.hoverinfo,l,"hi",a(c)),c.hovertemplate&&u(c.hovertemplate,l,"ht"),c.hoverlabel&&(u(c.hoverlabel.bgcolor,l,"hbg"),u(c.hoverlabel.bordercolor,l,"hbc"),u(c.hoverlabel.font.size,l,"hts"),u(c.hoverlabel.font.color,l,"htc"),u(c.hoverlabel.font.family,l,"htf"),u(c.hoverlabel.namelength,l,"hnl"),u(c.hoverlabel.align,l,"hta"))}}}},5914:function(e,t,n){"use strict";var r=n(3972),i=n(8335).hover;e.exports=function(e,t,n){var o=r.getComponentMethod("annotations","onClick")(e,e._hoverdata);function a(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&i(e,t,n,!0),e._hoverdata&&t&&t.target&&(o&&o.then?o.then(a):a(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},6675:function(e){"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},4268:function(e,t,n){"use strict";var r=n(1828),i=n(7914),o=n(8048);e.exports=function(e,t,n,a){var s=r.extendFlat({},a.hoverlabel);t.hovertemplate&&(s.namelength=-1),o(e,t,(function(n,o){return r.coerce(e,t,i,n,o)}),s)}},3469:function(e,t,n){"use strict";var r=n(1828);t.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},t.isTraceInSubplots=function(e,n){if("splom"===e.type){for(var r=e.xaxes||[],i=e.yaxes||[],o=0;o<r.length;o++)for(var a=0;a<i.length;a++)if(-1!==n.indexOf(r[o]+i[a]))return!0;return!1}return-1!==n.indexOf(t.getSubplot(e))},t.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},t.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},t.getDistanceFunction=function(e,n,r,i){return"closest"===e?i||t.quadrature(n,r):"x"===e.charAt(0)?n:r},t.getClosest=function(e,t,n){if(!1!==n.index)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},t.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},t.quadrature=function(e,t){return function(n){var r=e(n),i=t(n);return Math.sqrt(r*r+i*i)}},t.makeEventData=function(e,n,r){var i="index"in e?e.index:e.pointNumber,o={data:n._input,fullData:n,curveNumber:n.index,pointNumber:i};if(n._indexToPoints){var a=n._indexToPoints[i];1===a.length?o.pointIndex=a[0]:o.pointIndices=a}else o.pointIndex=i;return n._module.eventData?o=n._module.eventData(o,e,n,r,i):("xVal"in e?o.x=e.xVal:"x"in e&&(o.x=e.x),"yVal"in e?o.y=e.yVal:"y"in e&&(o.y=e.y),e.xa&&(o.xaxis=e.xa),e.ya&&(o.yaxis=e.ya),void 0!==e.zLabelVal&&(o.z=e.zLabelVal)),t.appendArrayPointValue(o,n,i),o},t.appendArrayPointValue=function(e,t,n){var i=t._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=o(l);if(void 0===e[c]){var u=a(r.nestedProperty(t,l).get(),n);void 0!==u&&(e[c]=u)}}},t.appendArrayMultiPointValues=function(e,t,n){var i=t._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=o(l);if(void 0===e[c]){for(var u=r.nestedProperty(t,l).get(),d=new Array(n.length),f=0;f<n.length;f++)d[f]=a(u,n[f]);e[c]=d}}};var i={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(e){return i[e]||e}function a(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var s={x:!0,y:!0},l={"x unified":!0,"y unified":!0};t.isUnifiedHover=function(e){return"string"==typeof e&&!!l[e]},t.isXYhover=function(e){return"string"==typeof e&&!!s[e]}},8335:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=n(4267),a=n(1828),s=a.strTranslate,l=a.strRotate,c=n(1086),u=n(3893),d=n(9918),f=n(1424),p=n(7901),h=n(8569),m=n(9298),g=n(3972),v=n(3469),y=n(6675),b=n(9017),x=n(3969),w=y.YANGLE,_=Math.PI*w/180,S=1/Math.sin(_),C=Math.cos(_),k=Math.sin(_),M=y.HOVERARROWSIZE,T=y.HOVERTEXTPAD,A={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function P(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}t.hover=function(e,t,n,o){e=a.getGraphDiv(e);var s=t.target;a.throttle(e._fullLayout._uid+y.HOVERID,y.HOVERMINTIME,(function(){!function(e,t,n,o,s){n||(n="xy");var l=Array.isArray(n)?n:[n],u=e._fullLayout,f=u._plots||[],m=f[n],y=u._has("cartesian");if(m){var b=m.overlays.map((function(e){return e.id}));l=l.concat(b)}for(var x=l.length,w=new Array(x),_=new Array(x),C=!1,k=0;k<x;k++){var M=l[k];if(f[M])C=!0,w[k]=f[M].xaxis,_[k]=f[M].yaxis;else{if(!u[M]||!u[M]._subplot)return void a.warn("Unrecognized subplot: "+M);var T=u[M]._subplot;w[k]=T.xaxis,_[k]=T.yaxis}}var R=t.hovermode||u.hovermode;if(R&&!C&&(R="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(R)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return h.unhoverRaw(e,t);var I=u.hoverdistance;-1===I&&(I=1/0);var z=u.spikedistance;-1===z&&(z=1/0);var H,U,V,G,W,$,q,Y,X,K,J,Q,ee,te=[],ne=[],re={hLinePoint:null,vLinePoint:null},ie=!1;if(Array.isArray(t))for(R="array",V=0;V<t.length;V++)(W=e.calcdata[t[V].curveNumber||0])&&($=W[0].trace,"skip"!==W[0].trace.hoverinfo&&(ne.push(W),"h"===$.orientation&&(ie=!0)));else{for(G=0;G<e.calcdata.length;G++)W=e.calcdata[G],"skip"!==($=W[0].trace).hoverinfo&&v.isTraceInSubplots($,l)&&(ne.push(W),"h"===$.orientation&&(ie=!0));var oe,ae;if(s){if(!1===c.triggerHandler(e,"plotly_beforehover",t))return;var se=s.getBoundingClientRect();oe=t.clientX-se.left,ae=t.clientY-se.top,u._calcInverseTransform(e);var le=a.apply3DTransform(u._invTransform)(oe,ae);if(oe=le[0],ae=le[1],oe<0||oe>w[0]._length||ae<0||ae>_[0]._length)return h.unhoverRaw(e,t)}else oe="xpx"in t?t.xpx:w[0]._length/2,ae="ypx"in t?t.ypx:_[0]._length/2;if(t.pointerX=oe+w[0]._offset,t.pointerY=ae+_[0]._offset,H="xval"in t?v.flat(l,t.xval):v.p2c(w,oe),U="yval"in t?v.flat(l,t.yval):v.p2c(_,ae),!i(H[0])||!i(U[0]))return a.warn("Fx.hover failed",t,e),h.unhoverRaw(e,t)}var ce=1/0;function ue(e,n){for(G=0;G<ne.length;G++)if((W=ne[G])&&W[0]&&W[0].trace&&!0===($=W[0].trace).visible&&0!==$._length&&-1===["carpet","contourcarpet"].indexOf($._module.name)){if("splom"===$.type?q=l[Y=0]:(q=v.getSubplot($),Y=l.indexOf(q)),X=R,v.isUnifiedHover(X)&&(X=X.charAt(0)),Q={cd:W,trace:$,xa:w[Y],ya:_[Y],maxHoverDistance:I,maxSpikeDistance:z,index:!1,distance:Math.min(ce,I),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:p.defaultLine,name:$.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[q]&&(Q.subplot=u[q]._subplot),u._splomScenes&&u._splomScenes[$.uid]&&(Q.scene=u._splomScenes[$.uid]),ee=te.length,"array"===X){var r=t[G];"pointNumber"in r?(Q.index=r.pointNumber,X="closest"):(X="","xval"in r&&(K=r.xval,X="x"),"yval"in r&&(J=r.yval,X=X?"closest":"y"))}else void 0!==e&&void 0!==n?(K=e,J=n):(K=H[Y],J=U[Y]);if(0!==I)if($._module&&$._module.hoverPoints){var o=$._module.hoverPoints(Q,K,J,X,{finiteRange:!0,hoverLayer:u._hoverlayer});if(o)for(var s,c=0;c<o.length;c++)s=o[c],i(s.x0)&&i(s.y0)&&te.push(D(s,R))}else a.log("Unrecognized trace type in hover:",$);if("closest"===R&&te.length>ee&&(te.splice(0,ee),ce=te[0].distance),y&&0!==z&&0===te.length){Q.distance=z,Q.index=!1;var d=$._module.hoverPoints(Q,K,J,"closest",{hoverLayer:u._hoverlayer});if(d&&(d=d.filter((function(e){return e.spikeDistance<=z}))),d&&d.length){var f,h=d.filter((function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap}));if(h.length){var m=h[0];i(m.x0)&&i(m.y0)&&(f=fe(m),(!re.vLinePoint||re.vLinePoint.spikeDistance>f.spikeDistance)&&(re.vLinePoint=f))}var g=d.filter((function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap}));if(g.length){var b=g[0];i(b.x0)&&i(b.y0)&&(f=fe(b),(!re.hLinePoint||re.hLinePoint.spikeDistance>f.spikeDistance)&&(re.hLinePoint=f))}}}}}function de(e,t,n){for(var r,i=null,o=1/0,a=0;a<e.length;a++)r=e[a].spikeDistance,n&&0===a&&(r=-1/0),r<=o&&r<=t&&(i=e[a],o=r);return i}function fe(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}ue();var pe={fullLayout:u,container:u._hoverlayer,event:t},he=e._spikepoints,me={vLinePoint:re.vLinePoint,hLinePoint:re.hLinePoint};e._spikepoints=me;var ge=function(){te.sort((function(e,t){return e.distance-t.distance})),te=function(e,t){for(var n=t.charAt(0),r=[],i=[],o=[],a=0;a<e.length;a++){var s=e[a];g.traceIs(s.trace,"bar-like")||g.traceIs(s.trace,"box-violin")?o.push(s):s.trace[n+"period"]?i.push(s):r.push(s)}return r.concat(i).concat(o)}(te,R)};ge();var ve=R.charAt(0),ye=("x"===ve||"y"===ve)&&te[0]&&E[te[0].trace.type];if(y&&0!==z&&0!==te.length){var be=de(te.filter((function(e){return e.ya.showspikes})),z,ye);re.hLinePoint=fe(be);var xe=de(te.filter((function(e){return e.xa.showspikes})),z,ye);re.vLinePoint=fe(xe)}if(0===te.length){var we=h.unhoverRaw(e,t);return!y||null===re.hLinePoint&&null===re.vLinePoint||F(he)&&N(e,re,pe),we}if(y&&F(he)&&N(e,re,pe),v.isXYhover(X)&&0!==te[0].length&&"splom"!==te[0].trace.type){var _e=te[0],Se=(te=A[_e.trace.type]?te.filter((function(e){return e.trace.index===_e.trace.index})):[_e]).length;ue(B("x",_e,u),B("y",_e,u));var Ce,ke=[],Me={},Te=0,Ae=function(e){var t=A[e.trace.type]?P(e):e.trace.index;if(Me[t]){var n=Me[t]-1,r=ke[n];n>0&&Math.abs(e.distance)<Math.abs(r.distance)&&(ke[n]=e)}else Te++,Me[t]=Te,ke.push(e)};for(Ce=0;Ce<Se;Ce++)Ae(te[Ce]);for(Ce=te.length-1;Ce>Se-1;Ce--)Ae(te[Ce]);te=ke,ge()}var Ee=e._hoverdata,Pe=[],Re=j(e),Oe=Z(e);for(V=0;V<te.length;V++){var Ie=te[V],Le=v.makeEventData(Ie,Ie.trace,Ie.cd);if(!1!==Ie.hovertemplate){var De=!1;Ie.cd[Ie.index]&&Ie.cd[Ie.index].ht&&(De=Ie.cd[Ie.index].ht),Ie.hovertemplate=De||Ie.trace.hovertemplate||!1}if(Ie.xa&&Ie.ya){var Ne=Ie.x0+Ie.xa._offset,Fe=Ie.x1+Ie.xa._offset,ze=Ie.y0+Ie.ya._offset,Be=Ie.y1+Ie.ya._offset,je=Math.min(Ne,Fe),Ze=Math.max(Ne,Fe),He=Math.min(ze,Be),Ue=Math.max(ze,Be);Le.bbox={x0:je+Oe,x1:Ze+Oe,y0:He+Re,y1:Ue+Re}}Ie.eventData=[Le],Pe.push(Le)}e._hoverdata=Pe;var Ve="y"===R&&(ne.length>1||te.length>1)||"closest"===R&&ie&&te.length>1,Ge=p.combine(u.plot_bgcolor||p.background,u.paper_bgcolor),We=O(te,{gd:e,hovermode:R,rotateLabels:Ve,bgColor:Ge,container:u._hoverlayer,outerContainer:u._paper.node(),commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance});if(v.isUnifiedHover(R)||(function(e,t,n){var r,i,o,a,s,l,c,u=0,d=1,f=e.size(),p=new Array(f),h=0;function m(e){var t=e[0],n=e[e.length-1];if(i=t.pmin-t.pos-t.dp+t.size,o=n.pos+n.dp+n.size-t.pmax,i>.01){for(s=e.length-1;s>=0;s--)e[s].dp+=i;r=!1}if(!(o<.01)){if(i<-.01){for(s=e.length-1;s>=0;s--)e[s].dp-=o;r=!1}if(r){var c=0;for(a=0;a<e.length;a++)(l=e[a]).pos+l.dp+l.size>t.pmax&&c++;for(a=e.length-1;a>=0&&!(c<=0);a--)(l=e[a]).pos>t.pmax-1&&(l.del=!0,c--);for(a=0;a<e.length&&!(c<=0);a++)if((l=e[a]).pos<t.pmin+1)for(l.del=!0,c--,o=2*l.size,s=e.length-1;s>=0;s--)e[s].dp-=o;for(a=e.length-1;a>=0&&!(c<=0);a--)(l=e[a]).pos+l.dp+l.size>t.pmax&&(l.del=!0,c--)}}}for(e.each((function(e){var r=e[t],i="x"===r._id.charAt(0),o=r.range;0===h&&o&&o[0]>o[1]!==i&&(d=-1),p[h++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(i?S:1)/2,pmin:0,pmax:i?n.width:n.height}]})),p.sort((function(e,t){return e[0].posref-t[0].posref||d*(t[0].traceIndex-e[0].traceIndex)}));!r&&u<=f;){for(u++,r=!0,a=0;a<p.length-1;){var g=p[a],v=p[a+1],y=g[g.length-1],b=v[0];if((i=y.pos+y.dp+y.size-b.pos-b.dp+b.size)>.01&&y.pmin===b.pmin&&y.pmax===b.pmax){for(s=v.length-1;s>=0;s--)v[s].dp+=i;for(g.push.apply(g,v),p.splice(a+1,1),c=0,s=g.length-1;s>=0;s--)c+=g[s].dp;for(o=c/g.length,s=g.length-1;s>=0;s--)g[s].dp-=o;r=!1}else a++}p.forEach(m)}for(a=p.length-1;a>=0;a--){var x=p[a];for(s=x.length-1;s>=0;s--){var w=x[s],_=w.datum;_.offset=w.dp,_.del=w.del}}}(We,Ve?"xa":"ya",u),L(We,Ve,u._invScaleX,u._invScaleY)),s&&s.tagName){var $e=g.getComponentMethod("annotations","hasClickToShow")(e,Pe);d(r.select(s),$e?"pointer":"")}s&&!o&&function(e,t,n){if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],o=e._hoverdata[r];if(i.curveNumber!==o.curveNumber||String(i.pointNumber)!==String(o.pointNumber)||String(i.pointNumbers)!==String(o.pointNumbers))return!0}return!1}(e,0,Ee)&&(Ee&&e.emit("plotly_unhover",{event:t,points:Ee}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:w,yaxes:_,xvals:H,yvals:U}))}(e,t,n,o,s)}))},t.loneHover=function(e,t){var n=!0;Array.isArray(e)||(n=!1,e=[e]);var i=t.gd,o=j(i),a=Z(i),s=O(e.map((function(e){var n=e._x0||e.x0||e.x||0,r=e._x1||e.x1||e.x||0,s=e._y0||e.y0||e.y||0,l=e._y1||e.y1||e.y||0,c=e.eventData;if(c){var u=Math.min(n,r),d=Math.max(n,r),f=Math.min(s,l),h=Math.max(s,l),m=e.trace;if(g.traceIs(m,"gl3d")){var v=i._fullLayout[m.scene]._scene.container,y=v.offsetLeft,b=v.offsetTop;u+=y,d+=y,f+=b,h+=b}c.bbox={x0:u+a,x1:d+a,y0:f+o,y1:h+o},t.inOut_bbox&&t.inOut_bbox.push(c.bbox)}else c=!1;return{color:e.color||p.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,hovertemplateLabels:e.hovertemplateLabels||!1,eventData:c}})),{gd:i,hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||p.background,container:r.select(t.container),outerContainer:t.outerContainer||t.container}),l=0,c=0;return s.sort((function(e,t){return e.y0-t.y0})).each((function(e,n){var r=e.y0-e.by/2;e.offset=r-5<l?l-r+5:0,l=r+e.by+e.offset,n===t.anchorIndex&&(c=e.offset)})).each((function(e){e.offset-=c})),L(s,!1,i._fullLayout._invScaleX,i._fullLayout._invScaleY),n?s:s.node()};var R=/<extra>([\s\S]*)<\/extra>/;function O(e,t){var n=t.gd,i=n._fullLayout,o=t.hovermode,c=t.rotateLabels,d=t.bgColor,h=t.container,m=t.outerContainer,_=t.commonLabelOpts||{};if(0===e.length)return[[]];var S=t.fontFamily||y.HOVERFONT,C=t.fontSize||y.HOVERFONTSIZE,k=e[0],A=k.xa,E=k.ya,R=o.charAt(0),O=R+"Label",L=k[O];if(void 0===L&&"multicategory"===A.type)for(var D=0;D<e.length&&void 0===(L=e[D][O]);D++);var N=H(n,m),F=N.top,z=N.width,B=N.height,j=void 0!==L&&k.distance<=t.hoverdistance&&("x"===o||"y"===o);if(j){var Z,U,V=!0;for(Z=0;Z<e.length;Z++)if(V&&void 0===e[Z].zLabel&&(V=!1),U=e[Z].hoverinfo||e[Z].trace.hoverinfo){var G=Array.isArray(U)?U:U.split("+");if(-1===G.indexOf("all")&&-1===G.indexOf(o)){j=!1;break}}V&&(j=!1)}var W=h.selectAll("g.axistext").data(j?[0]:[]);if(W.enter().append("g").classed("axistext",!0),W.exit().remove(),W.each((function(){var e=r.select(this),t=a.ensureSingle(e,"path","",(function(e){e.style({"stroke-width":"1px"})})),l=a.ensureSingle(e,"text","",(function(e){e.attr("data-notex",1)})),c=_.bgcolor||p.defaultLine,d=_.bordercolor||p.contrast(c),h=p.contrast(c),m={family:_.font.family||S,size:_.font.size||C,color:_.font.color||h};t.style({fill:c,stroke:d}),l.text(L).call(f.font,m).call(u.positionText,0,0).call(u.convertToTspans,n),e.attr("transform","");var g,v,y=H(n,l.node());if("x"===o){var b="top"===A.side?"-":"";l.attr("text-anchor","middle").call(u.positionText,0,"top"===A.side?F-y.bottom-M-T:F-y.top+M+T),g=A._offset+(k.x0+k.x1)/2,v=E._offset+("top"===A.side?0:E._length);var x=y.width/2+T;g<x?(g=x,t.attr("d","M-"+(x-M)+",0L-"+(x-2*M)+","+b+M+"H"+(T+y.width/2)+"v"+b+(2*T+y.height)+"H-"+x+"V"+b+M+"Z")):g>i.width-x?(g=i.width-x,t.attr("d","M"+(x-M)+",0L"+x+","+b+M+"v"+b+(2*T+y.height)+"H-"+x+"V"+b+M+"H"+(x-2*M)+"Z")):t.attr("d","M0,0L"+M+","+b+M+"H"+(T+y.width/2)+"v"+b+(2*T+y.height)+"H-"+(T+y.width/2)+"V"+b+M+"H-"+M+"Z")}else{var w,P,R;"right"===E.side?(w="start",P=1,R="",g=A._offset+A._length):(w="end",P=-1,R="-",g=A._offset),v=E._offset+(k.y0+k.y1)/2,l.attr("text-anchor",w),t.attr("d","M0,0L"+R+M+","+M+"V"+(T+y.height/2)+"h"+R+(2*T+y.width)+"V-"+(T+y.height/2)+"H"+R+M+"V-"+M+"Z");var O,I=y.height/2,D=F-y.top-I,N="clip"+i._uid+"commonlabel"+E._id;if(g<y.width+2*T+M){O="M-"+(M+T)+"-"+I+"h-"+(y.width-T)+"V"+I+"h"+(y.width-T)+"Z";var z=y.width-g+T;u.positionText(l,z,D),"end"===w&&l.selectAll("tspan").each((function(){var e=r.select(this),t=f.tester.append("text").text(e.text()).call(f.font,m),i=H(n,t.node());Math.round(i.width)<Math.round(y.width)&&e.attr("x",z-i.width),t.remove()}))}else u.positionText(l,P*(T+M),D),O=null;var B=i._topclips.selectAll("#"+N).data(O?[0]:[]);B.enter().append("clipPath").attr("id",N).append("path"),B.exit().remove(),B.select("path").attr("d",O),f.setClipUrl(l,O?N:null,n)}e.attr("transform",s(g,v))})),v.isUnifiedHover(o)){h.selectAll("g.hovertext").remove();var $=e.filter((function(e){return"none"!==e.hoverinfo}));if(0===$.length)return;var q=i.hoverlabel,Y=q.font,X={showlegend:!0,legend:{title:{text:L,font:Y},font:Y,bgcolor:q.bgcolor,bordercolor:q.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},K={font:Y};b(X,K,n._fullData);var J=K.legend;J.entries=[];for(var Q=0;Q<$.length;Q++){var ee=$[Q];if("none"!==ee.hoverinfo){var te=I(ee,!0,o,i,L),ne=te[0],re=te[1];ee.name=re,ee.text=""!==re?re+" : "+ne:ne;var ie=ee.cd[ee.index];ie&&(ie.mc&&(ee.mc=ie.mc),ie.mcc&&(ee.mc=ie.mcc),ie.mlc&&(ee.mlc=ie.mlc),ie.mlcc&&(ee.mlc=ie.mlcc),ie.mlw&&(ee.mlw=ie.mlw),ie.mrc&&(ee.mrc=ie.mrc),ie.dir&&(ee.dir=ie.dir)),ee._distinct=!0,J.entries.push([ee])}}J.entries.sort((function(e,t){return e[0].trace.index-t[0].trace.index})),J.layer=h,J._inHover=!0,J._groupTitleFont=q.grouptitlefont,x(n,J);var oe,ae,se,le,ce=h.select("g.legend"),ue=H(n,ce.node()),de=ue.width+2*T,fe=ue.height+2*T,pe=$[0],he=(pe.x0+pe.x1)/2,me=(pe.y0+pe.y1)/2,ge=!(g.traceIs(pe.trace,"bar-like")||g.traceIs(pe.trace,"box-violin"));"y"===R?ge?(ae=me-T,oe=me+T):(ae=Math.min.apply(null,$.map((function(e){return Math.min(e.y0,e.y1)}))),oe=Math.max.apply(null,$.map((function(e){return Math.max(e.y0,e.y1)})))):ae=oe=a.mean($.map((function(e){return(e.y0+e.y1)/2})))-fe/2,"x"===R?ge?(se=he+T,le=he-T):(se=Math.max.apply(null,$.map((function(e){return Math.max(e.x0,e.x1)}))),le=Math.min.apply(null,$.map((function(e){return Math.min(e.x0,e.x1)})))):se=le=a.mean($.map((function(e){return(e.x0+e.x1)/2})))-de/2;var ve,ye,be=A._offset,xe=E._offset;return le+=be-de,ae+=xe-fe,ve=(se+=be)+de<z&&se>=0?se:le+de<z&&le>=0?le:be+de<z?be:se-he<he-le+de?z-de:0,ve+=T,ye=(oe+=xe)+fe<B&&oe>=0?oe:ae+fe<B&&ae>=0?ae:xe+fe<B?xe:oe-me<me-ae+fe?B-fe:0,ye+=T,ce.attr("transform",s(ve-1,ye-1)),ce}var we=h.selectAll("g.hovertext").data(e,(function(e){return P(e)}));return we.enter().append("g").classed("hovertext",!0).each((function(){var e=r.select(this);e.append("rect").call(p.fill,p.addOpacity(d,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(f.font,S,C)})),we.exit().remove(),we.each((function(e){var t=r.select(this).attr("transform",""),a=e.color;Array.isArray(a)&&(a=a[e.eventData[0].pointNumber]);var h=e.bgcolor||a,m=p.combine(p.opacity(h)?h:p.defaultLine,d),g=p.combine(p.opacity(a)?a:p.defaultLine,d),v=e.borderColor||p.contrast(m),y=I(e,j,o,i,L,t),b=y[0],x=y[1],_=t.select("text.nums").call(f.font,e.fontFamily||S,e.fontSize||C,e.fontColor||v).text(b).attr("data-notex",1).call(u.positionText,0,0).call(u.convertToTspans,n),k=t.select("text.name"),A=0,E=0;if(x&&x!==b){k.call(f.font,e.fontFamily||S,e.fontSize||C,g).text(x).attr("data-notex",1).call(u.positionText,0,0).call(u.convertToTspans,n);var P=H(n,k.node());A=P.width+2*T,E=P.height+2*T}else k.remove(),t.select("rect").remove();t.select("path").style({fill:m,stroke:v});var R=e.xa._offset+(e.x0+e.x1)/2,O=e.ya._offset+(e.y0+e.y1)/2,D=Math.abs(e.x1-e.x0),N=Math.abs(e.y1-e.y0),Z=H(n,_.node()),U=Z.width/i._invScaleX,V=Z.height/i._invScaleY;e.ty0=(F-Z.top)/i._invScaleY,e.bx=U+2*T,e.by=Math.max(V+2*T,E),e.anchor="start",e.txwidth=U,e.tx2width=A,e.offset=0;var G,W,$=(U+M+T+A)*i._invScaleX;if(c)e.pos=R,G=O+N/2+$<=B,W=O-N/2-$>=0,"top"!==e.idealAlign&&G||!W?G?(O+=N/2,e.anchor="start"):e.anchor="middle":(O-=N/2,e.anchor="end");else if(e.pos=O,G=R+D/2+$<=z,W=R-D/2-$>=0,"left"!==e.idealAlign&&G||!W)if(G)R+=D/2,e.anchor="start";else{e.anchor="middle";var q=$/2,Y=R+q-z,X=R-q;Y>0&&(R-=Y),X<0&&(R+=-X)}else R-=D/2,e.anchor="end";_.attr("text-anchor",e.anchor),A&&k.attr("text-anchor",e.anchor),t.attr("transform",s(R,O)+(c?l(w):""))})),we}function I(e,t,n,r,i,o){var s="",l="";void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=a.templateString(e.name,e.trace._meta)),s=z(e.name,e.nameLength));var c=n.charAt(0),u="x"===c?"y":"x";void 0!==e.zLabel?(void 0!==e.xLabel&&(l+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(l+="y: "+e.yLabel+"<br>"),"choropleth"!==e.trace.type&&"choroplethmapbox"!==e.trace.type&&(l+=(l?"z: ":"")+e.zLabel)):t&&e[c+"Label"]===i?l=e[u+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&"scattercarpet"!==e.trace.type&&(l=e.yLabel):l=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",!e.text&&0!==e.text||Array.isArray(e.text)||(l+=(l?"<br>":"")+e.text),void 0!==e.extraText&&(l+=(l?"<br>":"")+e.extraText),o&&""===l&&!e.hovertemplate&&(""===s&&o.remove(),l=s);var d=e.hovertemplate||!1;if(d){var f=e.hovertemplateLabels||e;e[c+"Label"]!==i&&(f[c+"other"]=f[c+"Val"],f[c+"otherLabel"]=f[c+"Label"]),l=(l=a.hovertemplateString(d,f,r._d3locale,e.eventData[0]||{},e.trace._meta)).replace(R,(function(t,n){return s=z(n,e.nameLength),""}))}return[l,s]}function L(e,t,n,i){var o=function(e){return e*n},a=function(e){return e*i};e.each((function(e){var n=r.select(this);if(e.del)return n.remove();var i=n.select("text.nums"),s=e.anchor,l="end"===s?-1:1,c={start:1,end:-1,middle:0}[s],d=c*(M+T),p=d+c*(e.txwidth+T),h=0,m=e.offset,g="middle"===s;g&&(d-=e.tx2width/2,p+=e.txwidth/2+T),t&&(m*=-k,h=e.offset*C),n.select("path").attr("d",g?"M-"+o(e.bx/2+e.tx2width/2)+","+a(m-e.by/2)+"h"+o(e.bx)+"v"+a(e.by)+"h-"+o(e.bx)+"Z":"M0,0L"+o(l*M+h)+","+a(M+m)+"v"+a(e.by/2-M)+"h"+o(l*e.bx)+"v-"+a(e.by)+"H"+o(l*M+h)+"V"+a(m-M)+"Z");var v=h+d,y=m+e.ty0-e.by/2+T,b=e.textAlign||"auto";"auto"!==b&&("left"===b&&"start"!==s?(i.attr("text-anchor","start"),v=g?-e.bx/2-e.tx2width/2+T:-e.bx-T):"right"===b&&"end"!==s&&(i.attr("text-anchor","end"),v=g?e.bx/2-e.tx2width/2-T:e.bx+T)),i.call(u.positionText,o(v),a(y)),e.tx2width&&(n.select("text.name").call(u.positionText,o(p+c*T+h),a(m+e.ty0-e.by/2+T)),n.select("rect").call(f.setRect,o(p+(c-1)*e.tx2width/2+h),a(m-e.by/2-1),o(e.tx2width),a(e.by+2)))}))}function D(e,t){var n=e.index,r=e.trace||{},o=e.cd[0],s=e.cd[n]||{};function l(e){return e||i(e)&&0===e}var c=Array.isArray(n)?function(e,t){var i=a.castOption(o,n,e);return l(i)?i:a.extractOption({},r,"",t)}:function(e,t){return a.extractOption(s,r,e,t)};function u(t,n,r){var i=c(n,r);l(i)&&(e[t]=i)}if(u("hoverinfo","hi","hoverinfo"),u("bgcolor","hbg","hoverlabel.bgcolor"),u("borderColor","hbc","hoverlabel.bordercolor"),u("fontFamily","htf","hoverlabel.font.family"),u("fontSize","hts","hoverlabel.font.size"),u("fontColor","htc","hoverlabel.font.color"),u("nameLength","hnl","hoverlabel.namelength"),u("textAlign","hta","hoverlabel.align"),e.posref="y"===t||"closest"===t&&"h"===r.orientation?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=a.constrain(e.x0,0,e.xa._length),e.x1=a.constrain(e.x1,0,e.xa._length),e.y0=a.constrain(e.y0,0,e.ya._length),e.y1=a.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:m.hoverLabelText(e.xa,e.xLabelVal,r.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:m.hoverLabelText(e.ya,e.yLabelVal,r.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0)){var d=m.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+d+" / -"+m.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xb1 "+d,"x"===t&&(e.distance+=1)}if(!(isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0)){var f=m.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+f+" / -"+m.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xb1 "+f,"y"===t&&(e.distance+=1)}var p=e.hoverinfo||e.trace.hoverinfo;return p&&"all"!==p&&(-1===(p=Array.isArray(p)?p:p.split("+")).indexOf("x")&&(e.xLabel=void 0),-1===p.indexOf("y")&&(e.yLabel=void 0),-1===p.indexOf("z")&&(e.zLabel=void 0),-1===p.indexOf("text")&&(e.text=void 0),-1===p.indexOf("name")&&(e.name=void 0)),e}function N(e,t,n){var r,i,a=n.container,s=n.fullLayout,l=s._size,c=n.event,u=!!t.hLinePoint,d=!!t.vLinePoint;if(a.selectAll(".spikeline").remove(),d||u){var h=p.combine(s.plot_bgcolor,s.paper_bgcolor);if(u){var g,v,y=t.hLinePoint;r=y&&y.xa,"cursor"===(i=y&&y.ya).spikesnap?(g=c.pointerX,v=c.pointerY):(g=r._offset+y.x,v=i._offset+y.y);var b,x,w=o.readability(y.color,h)<1.5?p.contrast(h):y.color,_=i.spikemode,S=i.spikethickness,C=i.spikecolor||w,k=m.getPxPosition(e,i);if(-1!==_.indexOf("toaxis")||-1!==_.indexOf("across")){if(-1!==_.indexOf("toaxis")&&(b=k,x=g),-1!==_.indexOf("across")){var M=i._counterDomainMin,T=i._counterDomainMax;"free"===i.anchor&&(M=Math.min(M,i.position),T=Math.max(T,i.position)),b=l.l+M*l.w,x=l.l+T*l.w}a.insert("line",":first-child").attr({x1:b,x2:x,y1:v,y2:v,"stroke-width":S,stroke:C,"stroke-dasharray":f.dashStyle(i.spikedash,S)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:b,x2:x,y1:v,y2:v,"stroke-width":S+2,stroke:h}).classed("spikeline",!0).classed("crisp",!0)}-1!==_.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:k+("right"!==i.side?S:-S),cy:v,r:S,fill:C}).classed("spikeline",!0)}if(d){var A,E,P=t.vLinePoint;r=P&&P.xa,i=P&&P.ya,"cursor"===r.spikesnap?(A=c.pointerX,E=c.pointerY):(A=r._offset+P.x,E=i._offset+P.y);var R,O,I=o.readability(P.color,h)<1.5?p.contrast(h):P.color,L=r.spikemode,D=r.spikethickness,N=r.spikecolor||I,F=m.getPxPosition(e,r);if(-1!==L.indexOf("toaxis")||-1!==L.indexOf("across")){if(-1!==L.indexOf("toaxis")&&(R=F,O=E),-1!==L.indexOf("across")){var z=r._counterDomainMin,B=r._counterDomainMax;"free"===r.anchor&&(z=Math.min(z,r.position),B=Math.max(B,r.position)),R=l.t+(1-B)*l.h,O=l.t+(1-z)*l.h}a.insert("line",":first-child").attr({x1:A,x2:A,y1:R,y2:O,"stroke-width":D,stroke:N,"stroke-dasharray":f.dashStyle(r.spikedash,D)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:A,x2:A,y1:R,y2:O,"stroke-width":D+2,stroke:h}).classed("spikeline",!0).classed("crisp",!0)}-1!==L.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:A,cy:F-("top"!==r.side?D:-D),r:D,fill:N}).classed("spikeline",!0)}}}function F(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function z(e,t){return u.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function B(e,t,n){var r=t[e+"a"],i=t[e+"Val"],o=t.cd[0];if("category"===r.type||"multicategory"===r.type)i=r._categoriesMap[i];else if("date"===r.type){var a=t.trace[e+"periodalignment"];if(a){var s=t.cd[t.index],l=s[e+"Start"];void 0===l&&(l=s[e]);var c=s[e+"End"];void 0===c&&(c=s[e]);var u=c-l;"end"===a?i+=u:"middle"===a&&(i+=u/2)}i=r.d2c(i)}return o&&o.t&&o.t.posLetter===r._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(i+=o.t.dPos)),i}function j(e){return e.offsetTop+e.clientTop}function Z(e){return e.offsetLeft+e.clientLeft}function H(e,t){var n=e._fullLayout,r=t.getBoundingClientRect(),i=r.x,o=r.y,s=i+r.width,l=o+r.height,c=a.apply3DTransform(n._invTransform)(i,o),u=a.apply3DTransform(n._invTransform)(s,l),d=c[0],f=c[1],p=u[0],h=u[1];return{x:d,y:f,width:p-d,height:h-f,top:Math.min(f,h),left:Math.min(d,p),right:Math.max(d,p),bottom:Math.max(f,h)}}},8048:function(e,t,n){"use strict";var r=n(1828),i=n(7901),o=n(3469).isUnifiedHover;e.exports=function(e,t,n,a){a=a||{};var s=t.legend;function l(e){a.font[e]||(a.font[e]=s?t.legend.font[e]:t.font[e])}t&&o(t.hovermode)&&(a.font||(a.font={}),l("size"),l("family"),l("color"),s?(a.bgcolor||(a.bgcolor=i.combine(t.legend.bgcolor,t.paper_bgcolor)),a.bordercolor||(a.bordercolor=t.legend.bordercolor)):a.bgcolor||(a.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",a.bgcolor),n("hoverlabel.bordercolor",a.bordercolor),n("hoverlabel.namelength",a.namelength),r.coerceFont(n,"hoverlabel.font",a.font),n("hoverlabel.align",a.align)}},8212:function(e,t,n){"use strict";var r=n(1828),i=n(528);e.exports=function(e,t){function n(n,o){return void 0!==t[n]?t[n]:r.coerce(e,t,i,n,o)}return n("clickmode"),n("hovermode")}},211:function(e,t,n){"use strict";var r=n(9898),i=n(1828),o=n(8569),a=n(3469),s=n(528),l=n(8335);e.exports={moduleType:"component",name:"fx",constants:n(6675),schema:{layout:s},attributes:n(7914),layoutAttributes:s,supplyLayoutGlobalDefaults:n(2774),supplyDefaults:n(4268),supplyLayoutDefaults:n(4938),calc:n(732),getDistanceFunction:a.getDistanceFunction,getClosest:a.getClosest,inbox:a.inbox,quadrature:a.quadrature,appendArrayPointValue:a.appendArrayPointValue,castHoverOption:function(e,t,n){return i.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(e,t,n){return i.castOption(e,n,"hoverinfo",(function(n){return i.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)}))},hover:l.hover,unhover:o.unhover,loneHover:l.loneHover,loneUnhover:function(e){var t=i.isD3Selection(e)?e:r.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:n(5914)}},528:function(e,t,n){"use strict";var r=n(6675),i=n(1940),o=i({editType:"none"});o.family.dflt=r.HOVERFONT,o.size.dflt=r.HOVERFONTSIZE,e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:i({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},4938:function(e,t,n){"use strict";var r=n(1828),i=n(528),o=n(8212),a=n(8048);e.exports=function(e,t){function n(n,o){return r.coerce(e,t,i,n,o)}o(e,t)&&(n("hoverdistance"),n("spikedistance")),"select"===n("dragmode")&&n("selectdirection");var s=t._has("mapbox"),l=t._has("geo"),c=t._basePlotModules.length;"zoom"===t.dragmode&&((s||l)&&1===c||s&&l&&2===c)&&(t.dragmode="pan"),a(e,t,n),r.coerceFont(n,"hoverlabel.grouptitlefont",t.hoverlabel.font)}},2774:function(e,t,n){"use strict";var r=n(1828),i=n(8048),o=n(528);e.exports=function(e,t){i(e,t,(function(n,i){return r.coerce(e,t,o,n,i)}))}},3312:function(e,t,n){"use strict";var r=n(1828),i=n(587).counter,o=n(7670).Y,a=n(5555).idRegex,s=n(4467),l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[i("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function c(e,t,n){var r=t[n+"axes"],i=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(r)?r:i.length?i:void 0}function u(e,t,n,r,i,o){var a=t(e+"gap",n),s=t("domain."+e);t(e+"side",r);for(var l=new Array(i),c=s[0],u=(s[1]-c)/(i-a),d=u*(1-a),f=0;f<i;f++){var p=c+u*f;l[o?i-1-f:f]=[p,p+d]}return l}function d(e,t,n,r,i){var o,a=new Array(n);function s(e,n){-1!==t.indexOf(n)&&void 0===r[n]?(a[e]=n,r[n]=e):a[e]=""}if(Array.isArray(e))for(o=0;o<n;o++)s(o,e[o]);else for(s(0,i),o=1;o<n;o++)s(o,i+(o+1));return a}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(e,t){var n=e.grid||{},i=c(t,n,"x"),o=c(t,n,"y");if(e.grid||i||o){var a,d,f=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),p=Array.isArray(i),h=Array.isArray(o),m=p&&i!==n.xaxes&&h&&o!==n.yaxes;f?(a=n.subplots.length,d=n.subplots[0].length):(h&&(a=o.length),p&&(d=i.length));var g=s.newContainer(t,"grid"),v=C("rows",a),y=C("columns",d);if(v*y>1){f||p||h||"independent"===C("pattern")&&(f=!0),g._hasSubplotGrid=f;var b,x,w="top to bottom"===C("roworder"),_=f?.2:.1,S=f?.3:.1;m&&t._splomGridDflt&&(b=t._splomGridDflt.xside,x=t._splomGridDflt.yside),g._domains={x:u("x",C,_,b,y),y:u("y",C,S,x,v,w)}}else delete t.grid}function C(e,t){return r.coerce(n,g,l,e,t)}},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,i,o,a,s,l,u,f=e.grid||{},p=t._subplots,h=n._hasSubplotGrid,m=n.rows,g=n.columns,v="independent"===n.pattern,y=n._axisMap={};if(h){var b=f.subplots||[];l=n.subplots=new Array(m);var x=1;for(r=0;r<m;r++){var w=l[r]=new Array(g),_=b[r]||[];for(i=0;i<g;i++)if(v?(s=1===x?"xy":"x"+x+"y"+x,x++):s=_[i],w[i]="",-1!==p.cartesian.indexOf(s)){if(u=s.indexOf("y"),o=s.slice(0,u),a=s.slice(u),void 0!==y[o]&&y[o]!==i||void 0!==y[a]&&y[a]!==r)continue;w[i]=s,y[o]=i,y[a]=r}}}else{var S=c(t,f,"x"),C=c(t,f,"y");n.xaxes=d(S,p.xaxis,g,y,"x"),n.yaxes=d(C,p.yaxis,m,y,"y")}var k=n._anchors={},M="top to bottom"===n.roworder;for(var T in y){var A,E,P,R=T.charAt(0),O=n[R+"side"];if(O.length<8)k[T]="free";else if("x"===R){if("t"===O.charAt(0)===M?(A=0,E=1,P=m):(A=m-1,E=-1,P=-1),h){var I=y[T];for(r=A;r!==P;r+=E)if((s=l[r][I])&&(u=s.indexOf("y"),s.slice(0,u)===T)){k[T]=s.slice(u);break}}else for(r=A;r!==P;r+=E)if(a=n.yaxes[r],-1!==p.cartesian.indexOf(T+a)){k[T]=a;break}}else if("l"===O.charAt(0)?(A=0,E=1,P=g):(A=g-1,E=-1,P=-1),h){var L=y[T];for(r=A;r!==P;r+=E)if((s=l[L][r])&&(u=s.indexOf("y"),s.slice(u)===T)){k[T]=s.slice(0,u);break}}else for(r=A;r!==P;r+=E)if(o=n.xaxes[r],-1!==p.cartesian.indexOf(o+T)){k[T]=o;break}}}}}},9819:function(e,t,n){"use strict";var r=n(5555),i=n(4467).templatedArray;n(4695),e.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},5378:function(e,t,n){"use strict";var r=n(2770),i=n(8163);e.exports=function(e,t,n,o){t=t||{};var a="log"===n&&"linear"===t.type,s="linear"===n&&"log"===t.type;if(a||s)for(var l,c,u=e._fullLayout.images,d=t._id.charAt(0),f=0;f<u.length;f++)if(c="images["+f+"].",(l=u[f])[d+"ref"]===t._id){var p=l[d],h=l["size"+d],m=null,g=null;if(a){m=i(p,t.range);var v=h/Math.pow(10,m)/2;g=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else g=(m=Math.pow(10,p))*(Math.pow(10,h/2)-Math.pow(10,-h/2));r(m)?r(g)||(g=null):(m=null,g=null),o(c+d,m),o(c+"size"+d,g)}}},1603:function(e,t,n){"use strict";var r=n(1828),i=n(9298),o=n(5501),a=n(9819);function s(e,t,n){function o(n,i){return r.coerce(e,t,a,n,i)}var s=o("source");if(!o("visible",!!s))return t;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var l={_fullLayout:n},c=["x","y"],u=0;u<2;u++){var d=c[u],f=i.coerceRef(e,t,l,d,"paper",void 0);"paper"!==f&&i.getFromId(l,f)._imgIndices.push(t._index),i.coercePosition(t,l,o,f,d,0)}return t}e.exports=function(e,t){o(e,t,{name:"images",handleItemDefaults:s})}},750:function(e,t,n){"use strict";var r=n(9898),i=n(1424),o=n(9298),a=n(1675),s=n(7922);e.exports=function(e){var t,n,l=e._fullLayout,c=[],u={},d=[];for(n=0;n<l.images.length;n++){var f=l.images[n];if(f.visible)if("below"===f.layer&&"paper"!==f.xref&&"paper"!==f.yref){t=a.ref2id(f.xref)+a.ref2id(f.yref);var p=l._plots[t];if(!p){d.push(f);continue}p.mainplot&&(t=p.mainplot.id),u[t]||(u[t]=[]),u[t].push(f)}else"above"===f.layer?c.push(f):d.push(f)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},m={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function g(t){var n=r.select(this);if(this._imgSrc!==t.source)if(n.attr("xmlns",s.svg),t.source&&"data:"===t.source.slice(0,5))n.attr("xlink:href",t.source),this._imgSrc=t.source;else{var i=new Promise(function(e){var r=new Image;function i(){n.remove(),e()}this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=i,r.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var r=t.toDataURL("image/png");n.attr("xlink:href",r),e()},n.on("error",i),r.src=t.source,this._imgSrc=t.source}.bind(this));e._promises.push(i)}}function v(t){var n,a,s=r.select(this),c=o.getFromId(e,t.xref),u=o.getFromId(e,t.yref),d="domain"===o.getRefType(t.xref),f="domain"===o.getRefType(t.yref),p=l._size;n=void 0!==c?"string"==typeof t.xref&&d?c._length*t.sizex:Math.abs(c.l2p(t.sizex)-c.l2p(0)):t.sizex*p.w,a=void 0!==u?"string"==typeof t.yref&&f?u._length*t.sizey:Math.abs(u.l2p(t.sizey)-u.l2p(0)):t.sizey*p.h;var g,v,y=n*h[t.xanchor].offset,b=a*m[t.yanchor].offset,x=h[t.xanchor].sizing+m[t.yanchor].sizing;switch(g=void 0!==c?"string"==typeof t.xref&&d?c._length*t.x+c._offset:c.r2p(t.x)+c._offset:t.x*p.w+p.l,g+=y,v=void 0!==u?"string"==typeof t.yref&&f?u._length*(1-t.y)+u._offset:u.r2p(t.y)+u._offset:p.h-t.y*p.h+p.t,v+=b,t.sizing){case"fill":x+=" slice";break;case"stretch":x="none"}s.attr({x:g,y:v,width:n,height:a,preserveAspectRatio:x,opacity:t.opacity});var w=(c&&"domain"!==o.getRefType(t.xref)?c._id:"")+(u&&"domain"!==o.getRefType(t.yref)?u._id:"");i.setClipUrl(s,w?"clip"+l._uid+w:null,e)}var y=l._imageLowerLayer.selectAll("image").data(d),b=l._imageUpperLayer.selectAll("image").data(c);y.enter().append("image"),b.enter().append("image"),y.exit().remove(),b.exit().remove(),y.each((function(e){g.bind(this)(e),v.bind(this)(e)})),b.each((function(e){g.bind(this)(e),v.bind(this)(e)}));var x=Object.keys(l._plots);for(n=0;n<x.length;n++){t=x[n];var w=l._plots[t];if(w.imagelayer){var _=w.imagelayer.selectAll("image").data(u[t]||[]);_.enter().append("image"),_.exit().remove(),_.each((function(e){g.bind(this)(e),v.bind(this)(e)}))}}}},8804:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:n(9819),supplyLayoutDefaults:n(1603),includeBasePlot:n(6325)("images"),draw:n(750),convertCoords:n(5378)}},3030:function(e,t,n){"use strict";var r=n(1940),i=n(2399);e.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),grouptitlefont:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},4928:function(e){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},9017:function(e,t,n){"use strict";var r=n(3972),i=n(1828),o=n(4467),a=n(9012),s=n(3030),l=n(820),c=n(130);e.exports=function(e,t,n){var u,d=e.legend||{},f=o.newContainer(t,"legend");function p(e,t){return i.coerce(d,f,s,e,t)}for(var h=function(e,t){var n=u._input,r=u;return i.coerce(n,r,a,e,t)},m=t.font||{},g=i.coerceFont(p,"grouptitlefont",i.extendFlat({},m,{size:Math.round(1.1*m.size)})),v=0,y=!1,b="normal",x=0;x<n.length;x++)(u=n[x]).visible&&((u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&!1===u._module.attributes.showlegend.dflt))&&(v++,u.showlegend&&(y=!0,(r.traceIs(u,"pie-like")||!0===u._input.showlegend)&&v++),i.coerceFont(h,"legendgrouptitle.font",g)),(r.traceIs(u,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(u.fill))&&(b=c.isGrouped({traceorder:b})?"grouped+reversed":"reversed"),void 0!==u.legendgroup&&""!==u.legendgroup&&(b=c.isReversed({traceorder:b})?"reversed+grouped":"grouped"));var w=i.coerce(e,t,l,"showlegend",y&&v>1);if(!1===w&&(t.legend=void 0),(!1!==w||d.uirevision)&&(p("uirevision",t.uirevision),!1!==w)){p("bgcolor",t.paper_bgcolor),p("bordercolor"),p("borderwidth");var _,S,C,k=i.coerceFont(p,"font",t.font),M="h"===p("orientation");if(M?(_=0,r.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(S=1.1,C="bottom"):(S=-.1,C="top")):(_=1.02,S=1,C="auto"),p("traceorder",b),c.isGrouped(t.legend)&&p("tracegroupgap"),p("entrywidth"),p("entrywidthmode"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("x",_),p("xanchor"),p("y",S),p("yanchor",C),p("valign"),i.noneOrAll(d,f,["x","y"]),p("title.text")){p("title.side",M?"left":"top");var T=i.extendFlat({},k,{size:i.bigFont(k.size)});i.coerceFont(p,"title.font",T)}}}},3969:function(e,t,n){"use strict";var r=n(9898),i=n(1828),o=n(4875),a=n(3972),s=n(1086),l=n(8569),c=n(1424),u=n(7901),d=n(3893),f=n(5167),p=n(4928),h=n(8783),m=h.LINE_SPACING,g=h.FROM_TL,v=h.FROM_BR,y=n(2424),b=n(3630),x=n(130);function w(e,t,n){var r=e[0],i=r.width,o=t.entrywidthmode,a=r.trace.legendwidth||t.entrywidth;return"fraction"===o?t._maxWidth*a:n+(a||i)}function _(e,t,n,r,i){var o=n.data()[0][0].trace,l={event:i,node:n.node(),curveNumber:o.index,expandedIndex:o._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};o._group&&(l.group=o._group),a.traceIs(o,"pie-like")&&(l.label=n.datum()[0].label),!1!==s.triggerHandler(e,"plotly_legendclick",l)&&(1===r?t._clickTimeout=setTimeout((function(){e._fullLayout&&f(n,e,r)}),e._context.doubleClickDelay):2===r&&(t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==s.triggerHandler(e,"plotly_legenddoubleclick",l)&&f(n,e,r)))}function S(e,t,n){var r,o,s=e.data()[0][0],l=s.trace,u=a.traceIs(l,"pie-like"),f=!n._inHover&&t._context.edits.legendText&&!u,h=n._maxNameLength;s.groupTitle?(r=s.groupTitle.text,o=s.groupTitle.font):(o=n.font,n.entries?r=s.text:(r=u?s.label:l.name,l._meta&&(r=i.templateString(r,l._meta))));var m=i.ensureSingle(e,"text","legendtext");m.attr("text-anchor","start").call(c.font,o).text(f?C(r,h):r);var g=n.itemwidth+2*p.itemGap;d.positionText(m,g,0),f?m.call(d.makeEditable,{gd:t,text:r}).call(M,e,t,n).on("edit",(function(r){this.text(C(r,h)).call(M,e,t,n);var o=s.trace._fullInput||{},c={};if(a.hasTransform(o,"groupby")){var u=a.getTransformIndices(o,"groupby"),d=u[u.length-1],f=i.keyedContainer(o,"transforms["+d+"].styles","target","value.name");f.set(s.trace._group,r),c=f.constructUpdate()}else c.name=r;return a.call("_guiRestyle",t,c,l.index)})):M(m,e,t,n)}function C(e,t){var n=Math.max(4,t);if(e&&e.trim().length>=n/2)return e;for(var r=n-(e=e||"").length;r>0;r--)e+=" ";return e}function k(e,t){var n,o=t._context.doubleClickDelay,a=1,s=i.ensureSingle(e,"rect","legendtoggle",(function(e){t._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(u.fill,"rgba(0,0,0,0)")}));t._context.staticPlot||(s.on("mousedown",(function(){(n=(new Date).getTime())-t._legendMouseDownTime<o?a+=1:(a=1,t._legendMouseDownTime=n)})),s.on("mouseup",(function(){if(!t._dragged&&!t._editing){var n=t._fullLayout.legend;(new Date).getTime()-t._legendMouseDownTime>o&&(a=Math.max(a-1,1)),_(t,n,e,a,r.event)}})))}function M(e,t,n,r,i){r._inHover&&e.attr("data-notex",!0),d.convertToTspans(e,n,(function(){!function(e,t,n,r){var i=e.data()[0][0];if(n._inHover||!i||i.trace.showlegend){var o=e.select("g[class*=math-group]"),a=o.node();n||(n=t._fullLayout.legend);var s,l,u=n.borderwidth,f=(1===r?n.title.font:i.groupTitle?i.groupTitle.font:n.font).size*m;if(a){var h=c.bBox(a);s=h.height,l=h.width,1===r?c.setTranslate(o,u,u+.75*s):c.setTranslate(o,0,.25*s)}else{var g=e.select(1===r?".legendtitletext":".legendtext"),v=d.lineCount(g),y=g.node();if(s=f*v,l=y?c.bBox(y).width:0,1===r)"left"===n.title.side&&(l+=2*p.itemGap),d.positionText(g,u+p.titlePad,u+f);else{var b=2*p.itemGap+n.itemwidth;i.groupTitle&&(b=p.itemGap,l-=n.itemwidth),d.positionText(g,b,-f*((v-1)/2-.3))}}1===r?(n._titleWidth=l,n._titleHeight=s):(i.lineHeight=f,i.height=Math.max(s,16)+3,i.width=l)}else e.remove()}(t,n,r,i)}))}function T(e){return i.isRightAnchor(e)?"right":i.isCenterAnchor(e)?"center":"left"}function A(e){return i.isBottomAnchor(e)?"bottom":i.isMiddleAnchor(e)?"middle":"top"}e.exports=function(e,t){return t||(t=e._fullLayout.legend||{}),function(e,t){var n,s,d=e._fullLayout,f="legend"+d._uid,h=t._inHover;if(h?(n=t.layer,f+="-hover"):n=d._infolayer,n){if(e._legendMouseDownTime||(e._legendMouseDownTime=0),h){if(!t.entries)return;s=y(t.entries,t)}else{if(!e.calcdata)return;s=d.showlegend&&y(e.calcdata,t)}var m=d.hiddenlabels||[];if(!(h||d.showlegend&&s.length))return n.selectAll(".legend").remove(),d._topdefs.select("#"+f).remove(),o.autoMargin(e,"legend");var C=i.ensureSingle(n,"g","legend",(function(e){h||e.attr("pointer-events","all")})),E=i.ensureSingleById(d._topdefs,"clipPath",f,(function(e){e.append("rect")})),P=i.ensureSingle(C,"rect","bg",(function(e){e.attr("shape-rendering","crispEdges")}));P.call(u.stroke,t.bordercolor).call(u.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");var R=i.ensureSingle(C,"g","scrollbox"),O=t.title;if(t._titleWidth=0,t._titleHeight=0,O.text){var I=i.ensureSingle(R,"text","legendtitletext");I.attr("text-anchor","start").call(c.font,O.font).text(O.text),M(I,R,e,t,1)}else R.selectAll(".legendtitletext").remove();var L=i.ensureSingle(C,"rect","scrollbar",(function(e){e.attr(p.scrollBarEnterAttrs).call(u.fill,p.scrollBarColor)})),D=R.selectAll("g.groups").data(s);D.enter().append("g").attr("class","groups"),D.exit().remove();var N=D.selectAll("g.traces").data(i.identity);N.enter().append("g").attr("class","traces"),N.exit().remove(),N.style("opacity",(function(e){var t=e[0].trace;return a.traceIs(t,"pie-like")?-1!==m.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1})).each((function(){r.select(this).call(S,e,t)})).call(b,e,t).each((function(){h||r.select(this).call(k,e)})),i.syncOrAsync([o.previousPromises,function(){return function(e,t,n,i){var o=e._fullLayout;i||(i=o.legend);var a=o._size,s=x.isVertical(i),l=x.isGrouped(i),u="fraction"===i.entrywidthmode,d=i.borderwidth,f=2*d,h=p.itemGap,m=i.itemwidth+2*h,g=2*(d+h),v=A(i),y=i.y<0||0===i.y&&"top"===v,b=i.y>1||1===i.y&&"bottom"===v,_=i.tracegroupgap,S={};i._maxHeight=Math.max(y||b?o.height/2:a.h,30);var C=0;i._width=0,i._height=0;var k=function(e){var t=0,n=0,r=e.title.side;return r&&(-1!==r.indexOf("left")&&(t=e._titleWidth),-1!==r.indexOf("top")&&(n=e._titleHeight)),[t,n]}(i);if(s)n.each((function(e){var t=e[0].height;c.setTranslate(this,d+k[0],d+k[1]+i._height+t/2+h),i._height+=t,i._width=Math.max(i._width,e[0].width)})),C=m+i._width,i._width+=h+m+f,i._height+=g,l&&(t.each((function(e,t){c.setTranslate(this,0,t*i.tracegroupgap)})),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var M=T(i),E=i.x<0||0===i.x&&"right"===M,P=i.x>1||1===i.x&&"left"===M,R=b||y,O=o.width/2;i._maxWidth=Math.max(E?R&&"left"===M?a.l+a.w:O:P?R&&"right"===M?a.r+a.w:O:a.w,2*m);var I=0,L=0;n.each((function(e){var t=w(e,i,m);I=Math.max(I,t),L+=t})),C=null;var D=0;if(l){var N=0,F=0,z=0;t.each((function(){var e=0,t=0;r.select(this).selectAll("g.traces").each((function(n){var r=w(n,i,m),o=n[0].height;c.setTranslate(this,k[0],k[1]+d+h+o/2+t),t+=o,e=Math.max(e,r),S[n[0].trace.legendgroup]=e}));var n=e+h;F>0&&n+d+F>i._maxWidth?(D=Math.max(D,F),F=0,z+=N+_,N=t):N=Math.max(N,t),c.setTranslate(this,F,z),F+=n})),i._width=Math.max(D,F)+d,i._height=z+N+g}else{var B=n.size(),j=L+f+(B-1)*h<i._maxWidth,Z=0,H=0,U=0,V=0;n.each((function(e){var t=e[0].height,n=w(e,i,m),r=j?n:I;u||(r+=h),r+d+H-h>=i._maxWidth&&(D=Math.max(D,V),H=0,U+=Z,i._height+=Z,Z=0),c.setTranslate(this,k[0]+d+H,k[1]+d+U+t/2+h),V=H+n+h,H+=r,Z=Math.max(Z,t)})),j?(i._width=H+f,i._height=Z+g):(i._width=Math.max(D,V)+f,i._height+=Z+g)}}i._width=Math.ceil(Math.max(i._width+k[0],i._titleWidth+2*(d+p.titlePad))),i._height=Math.ceil(Math.max(i._height+k[1],i._titleHeight+2*(d+p.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var G=e._context.edits,W=G.legendText||G.legendPosition;n.each((function(e){var t=r.select(this).select(".legendtoggle"),n=e[0].height,o=e[0].trace.legendgroup,a=w(e,i,m);l&&""!==o&&(a=S[o]);var d=W?m:C||a;s||u||(d+=h/2),c.setRect(t,0,-n/2,d,n)}))}(e,D,N,t)},function(){var s,u,m,y,b=d._size,x=t.borderwidth;if(!h){var w=function(e){var t=e._fullLayout.legend,n=T(t),r=A(t);return o.autoMargin(e,"legend",{x:t.x,y:t.y,l:t._width*g[n],r:t._width*v[n],b:t._effHeight*v[r],t:t._effHeight*g[r]})}(e);if(w)return;var S=b.l+b.w*t.x-g[T(t)]*t._width,k=b.t+b.h*(1-t.y)-g[A(t)]*t._effHeight;if(d.margin.autoexpand){var M=S,O=k;S=i.constrain(S,0,d.width-t._width),k=i.constrain(k,0,d.height-t._effHeight),S!==M&&i.log("Constrain legend.x to make legend fit inside graph"),k!==O&&i.log("Constrain legend.y to make legend fit inside graph")}c.setTranslate(C,S,k)}if(L.on(".drag",null),C.on("wheel",null),h||t._height<=t._maxHeight||e._context.staticPlot){var I=t._effHeight;h&&(I=t._height),P.attr({width:t._width-x,height:I-x,x:x/2,y:x/2}),c.setTranslate(R,0,0),E.select("rect").attr({width:t._width-2*x,height:I-2*x,x:x,y:x}),c.setClipUrl(R,f,e),c.setRect(L,0,0,0,0),delete t._scrollY}else{var D,N,F,z=Math.max(p.scrollBarMinHeight,t._effHeight*t._effHeight/t._height),B=t._effHeight-z-2*p.scrollBarMargin,j=t._height-t._effHeight,Z=B/j,H=Math.min(t._scrollY||0,j);P.attr({width:t._width-2*x+p.scrollBarWidth+p.scrollBarMargin,height:t._effHeight-x,x:x/2,y:x/2}),E.select("rect").attr({width:t._width-2*x+p.scrollBarWidth+p.scrollBarMargin,height:t._effHeight-2*x,x:x,y:x+H}),c.setClipUrl(R,f,e),G(H,z,Z),C.on("wheel",(function(){G(H=i.constrain(t._scrollY+r.event.deltaY/B*j,0,j),z,Z),0!==H&&H!==j&&r.event.preventDefault()}));var U=r.behavior.drag().on("dragstart",(function(){var e=r.event.sourceEvent;D="touchstart"===e.type?e.changedTouches[0].clientY:e.clientY,F=H})).on("drag",(function(){var e=r.event.sourceEvent;2===e.buttons||e.ctrlKey||(N="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,G(H=function(e,t,n){var r=(n-t)/Z+e;return i.constrain(r,0,j)}(F,D,N),z,Z))}));L.call(U);var V=r.behavior.drag().on("dragstart",(function(){var e=r.event.sourceEvent;"touchstart"===e.type&&(D=e.changedTouches[0].clientY,F=H)})).on("drag",(function(){var e=r.event.sourceEvent;"touchmove"===e.type&&(N=e.changedTouches[0].clientY,G(H=function(e,t,n){var r=(t-n)/Z+e;return i.constrain(r,0,j)}(F,D,N),z,Z))}));R.call(V)}function G(n,r,i){t._scrollY=e._fullLayout.legend._scrollY=n,c.setTranslate(R,0,-n),c.setRect(L,t._width,p.scrollBarMargin+n*i,p.scrollBarWidth,r),E.select("rect").attr("y",x+n)}e._context.edits.legendPosition&&(C.classed("cursor-move",!0),l.init({element:C.node(),gd:e,prepFn:function(){var e=c.getTranslate(C);m=e.x,y=e.y},moveFn:function(e,n){var r=m+e,i=y+n;c.setTranslate(C,r,i),s=l.align(r,0,b.l,b.l+b.w,t.xanchor),u=l.align(i,0,b.t+b.h,b.t,t.yanchor)},doneFn:function(){void 0!==s&&void 0!==u&&a.call("_guiRelayout",e,{"legend.x":s,"legend.y":u})},clickFn:function(t,r){var i=n.selectAll("g.traces").filter((function(){var e=this.getBoundingClientRect();return r.clientX>=e.left&&r.clientX<=e.right&&r.clientY>=e.top&&r.clientY<=e.bottom}));i.size()>0&&_(e,C,i,t,r)}}))}],e)}}(e,t)}},2424:function(e,t,n){"use strict";var r=n(3972),i=n(130);e.exports=function(e,t){var n,o,a=t._inHover,s=i.isGrouped(t),l=i.isReversed(t),c={},u=[],d=!1,f={},p=0,h=0;function m(e,n){if(""!==e&&i.isGrouped(t))-1===u.indexOf(e)?(u.push(e),d=!0,c[e]=[n]):c[e].push(n);else{var r="~~i"+p;u.push(r),c[r]=[n],p++}}for(n=0;n<e.length;n++){var g=e[n],v=g[0],y=v.trace,b=y.legendgroup;if(a||y.visible&&y.showlegend)if(r.traceIs(y,"pie-like"))for(f[b]||(f[b]={}),o=0;o<g.length;o++){var x=g[o].label;f[b][x]||(m(b,{label:x,color:g[o].color,i:g[o].i,trace:y,pts:g[o].pts}),f[b][x]=!0,h=Math.max(h,(x||"").length))}else m(b,v),h=Math.max(h,(y.name||"").length)}if(!u.length)return[];var w=!d||!s,_=[];for(n=0;n<u.length;n++){var S=c[u[n]];w?_.push(S[0]):_.push(S)}for(w&&(_=[_]),n=0;n<_.length;n++){var C=1/0;for(o=0;o<_[n].length;o++){var k=_[n][o].trace.legendrank;C>k&&(C=k)}_[n][0]._groupMinRank=C,_[n][0]._preGroupSort=n}var M=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};for(_.forEach((function(e,t){e[0]._preGroupSort=t})),_.sort((function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort})),n=0;n<_.length;n++){_[n].forEach((function(e,t){e._preSort=t})),_[n].sort(M);var T=_[n][0].trace,A=null;for(o=0;o<_[n].length;o++){var E=_[n][o].trace.legendgrouptitle;if(E&&E.text){A=E,a&&(E.font=t._groupTitleFont);break}}if(l&&_[n].reverse(),A){var P=!1;for(o=0;o<_[n].length;o++)if(r.traceIs(_[n][o].trace,"pie-like")){P=!0;break}_[n].unshift({i:-1,groupTitle:A,noClick:P,trace:{showlegend:T.showlegend,legendgroup:T.legendgroup,visible:"toggleitem"===t.groupclick||T.visible}})}for(o=0;o<_[n].length;o++)_[n][o]=[_[n][o]]}return t._lgroupsLength=_.length,t._maxNameLength=h,_}},5167:function(e,t,n){"use strict";var r=n(1828),i=n(3972),o=!0;e.exports=function(e,t,n){var a=t._fullLayout;if(!t._dragged&&!t._editing){var s,l=a.legend.itemclick,c=a.legend.itemdoubleclick,u=a.legend.groupclick;if(1===n&&"toggle"===l&&"toggleothers"===c&&o&&t.data&&t._context.showTips?(r.notifier(r._(t,"Double-click on legend to isolate one trace"),"long"),o=!1):o=!1,1===n?s=l:2===n&&(s=c),s){var d="togglegroup"===u,f=a.hiddenlabels?a.hiddenlabels.slice():[],p=e.data()[0][0];if(!p.groupTitle||!p.noClick){var h,m,g,v,y,b=t._fullData,x=p.trace,w=x.legendgroup,_={},S=[],C=[],k=[];if(i.traceIs(x,"pie-like")){var M=p.label,T=f.indexOf(M);"toggle"===s?-1===T?f.push(M):f.splice(T,1):"toggleothers"===s&&(f=[],t.calcdata[0].forEach((function(e){M!==e.label&&f.push(e.label)})),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===f.length&&-1===T&&(f=[])),i.call("_guiRelayout",t,"hiddenlabels",f)}else{var A,E=w&&w.length,P=[];if(E)for(h=0;h<b.length;h++)(A=b[h]).visible&&A.legendgroup===w&&P.push(h);if("toggle"===s){var R;switch(x.visible){case!0:R="legendonly";break;case!1:R=!1;break;case"legendonly":R=!0}if(E)if(d)for(h=0;h<b.length;h++)!1!==b[h].visible&&b[h].legendgroup===w&&j(b[h],R);else j(x,R);else j(x,R)}else if("toggleothers"===s){var O,I,L,D,N=!0;for(h=0;h<b.length;h++)if(O=b[h]===x,L=!0!==b[h].showlegend,!(O||L||(I=E&&b[h].legendgroup===w)||!0!==b[h].visible||i.traceIs(b[h],"notLegendIsolatable"))){N=!1;break}for(h=0;h<b.length;h++)if(!1!==b[h].visible&&!i.traceIs(b[h],"notLegendIsolatable"))switch(x.visible){case"legendonly":j(b[h],!0);break;case!0:D=!!N||"legendonly",O=b[h]===x,L=!0!==b[h].showlegend&&!b[h].legendgroup,I=O||E&&b[h].legendgroup===w,j(b[h],!(!I&&!L)||D)}}for(h=0;h<C.length;h++)if(g=C[h]){var F=g.constructUpdate(),z=Object.keys(F);for(m=0;m<z.length;m++)v=z[m],(_[v]=_[v]||[])[k[h]]=F[v]}for(y=Object.keys(_),h=0;h<y.length;h++)for(v=y[h],m=0;m<S.length;m++)_[v].hasOwnProperty(m)||(_[v][m]=void 0);i.call("_guiRestyle",t,_,S)}}}}function B(e,t,n){var r=S.indexOf(e),i=_[t];return i||(i=_[t]=[]),-1===S.indexOf(e)&&(S.push(e),r=S.length-1),i[r]=n,r}function j(e,t){if(!p.groupTitle||d){var n=e._fullInput;if(i.hasTransform(n,"groupby")){var o=C[n.index];if(!o){var a=i.getTransformIndices(n,"groupby"),s=a[a.length-1];o=r.keyedContainer(n,"transforms["+s+"].styles","target","value.visible"),C[n.index]=o}var l=o.get(e._group);void 0===l&&(l=!0),!1!==l&&o.set(e._group,t),k[n.index]=B(n.index,"visible",!1!==n.visible)}else{var c=!1!==n.visible&&t;B(n.index,"visible",c)}}}}},130:function(e,t){"use strict";t.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},t.isVertical=function(e){return"h"!==e.orientation},t.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},2199:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:n(3030),supplyLayoutDefaults:n(9017),draw:n(3969),style:n(3630)}},3630:function(e,t,n){"use strict";var r=n(9898),i=n(3972),o=n(1828),a=o.strTranslate,s=n(1424),l=n(7901),c=n(2869).extractOpts,u=n(4098),d=n(3463),f=n(3581).castOption,p=n(4928);function h(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function m(e){var t=e[0].trace,n=t.contours,r=u.hasLines(t),i=u.hasMarkers(t),o=t.visible&&t.fill&&"none"!==t.fill,a=!1,s=!1;if(n){var l=n.coloring;"lines"===l?a=!0:r="none"===l||"heatmap"===l||n.showlines,"constraint"===n.type?o="="!==n._operation:"fill"!==l&&"heatmap"!==l||(s=!0)}return{showMarker:i,showLine:r,showFill:o,showGradientLine:a,showGradientFill:s,anyLine:r||a,anyFill:o||s}}function g(e,t,n){return e&&o.isArrayOrTypedArray(e)?t:e>n?n:e}e.exports=function(e,t,n){var v=t._fullLayout;n||(n=v.legend);var y="constant"===n.itemsizing,b=n.itemwidth,x=(b+2*p.itemGap)/2,w=a(x,0),_=function(e,t,n,r){var i;if(e+1)i=e;else{if(!(t&&t.width>0))return 0;i=t.width}return y?r:Math.min(i,n)};function S(e,o,a){var u=e[0].trace,d=u.marker||{},f=d.line||{},p=a?u.visible&&u.type===a:i.traceIs(u,"bar"),h=r.select(o).select("g.legendpoints").selectAll("path.legend"+a).data(p?[e]:[]);h.enter().append("path").classed("legend"+a,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),h.exit().remove(),h.each((function(e){var i=r.select(this),o=e[0],a=_(o.mlw,d.line,5,2);i.style("stroke-width",a+"px");var p=o.mcc;if(!n._inHover&&"mc"in o){var h=c(d),m=h.mid;void 0===m&&(m=(h.max+h.min)/2),p=s.tryColorscale(d,"")(m)}var v=p||o.mc||d.color,y=d.pattern,b=y&&s.getPatternAttr(y.shape,0,"");if(b){var x=s.getPatternAttr(y.bgcolor,0,null),w=s.getPatternAttr(y.fgcolor,0,null),S=y.fgopacity,C=g(y.size,8,10),k=g(y.solidity,.5,1),M="legend-"+u.uid;i.call(s.pattern,"legend",t,M,b,C,k,p,y.fillmode,x,w,S)}else i.call(l.fill,v);a&&l.stroke(i,o.mlc||f.color)}))}function C(e,t,n){var a=e[0],s=a.trace,l=n?s.visible&&s.type===n:i.traceIs(s,n),c=r.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(l?[e]:[]);if(c.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),c.exit().remove(),c.size()){var u=(s.marker||{}).line,p=_(f(u.width,a.pts),u,5,2),h=o.minExtend(s,{marker:{line:{width:p}}});h.marker.line.color=u.color;var m=o.minExtend(a,{trace:h});d(c,m,h)}}e.each((function(e){var t=r.select(this),i=o.ensureSingle(t,"g","layers");i.style("opacity",e[0].trace.opacity);var s=n.valign,l=e[0].lineHeight,c=e[0].height;if("middle"!==s&&l&&c){var u={top:1,bottom:-1}[s]*(.5*(l-c+3));i.attr("transform",a(0,u))}else i.attr("transform",null);i.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),i.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var d=i.selectAll("g.legendsymbols").data([e]);d.enter().append("g").classed("legendsymbols",!0),d.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)})).each((function(e){var n,i=e[0].trace,a=[];if(i.visible)switch(i.type){case"histogram2d":case"heatmap":a=[["M-15,-2V4H15V-2Z"]],n=!0;break;case"choropleth":case"choroplethmapbox":a=[["M-6,-6V6H6V-6Z"]],n=!0;break;case"densitymapbox":a=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],n="radial";break;case"cone":a=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],n=!1;break;case"streamtube":a=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],n=!1;break;case"surface":a=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],n=!0;break;case"mesh3d":a=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!1;break;case"volume":a=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!0;break;case"isosurface":a=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],n=!1}var u=r.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(a);u.enter().append("path").classed("legend3dandfriends",!0).attr("transform",w).style("stroke-miterlimit",1),u.exit().remove(),u.each((function(e,a){var u,d=r.select(this),f=c(i),p=f.colorscale,m=f.reversescale;if(p){if(!n){var g=p.length;u=0===a?p[m?g-1:0][1]:1===a?p[m?0:g-1][1]:p[Math.floor((g-1)/2)][1]}}else{var v=i.vertexcolor||i.facecolor||i.color;u=o.isArrayOrTypedArray(v)?v[a]||v[0]:v}d.attr("d",e[0]),u?d.call(l.fill,u):d.call((function(e){if(e.size()){var r="legendfill-"+i.uid;s.gradient(e,t,r,h(m,"radial"===n),p,"fill")}}))}))})).each((function(e){var t=e[0].trace,n="waterfall"===t.type;if(e[0]._distinct&&n){var i=e[0].trace[e[0].dir].marker;return e[0].mc=i.color,e[0].mlw=i.line.width,e[0].mlc=i.line.color,S(e,this,"waterfall")}var o=[];t.visible&&n&&(o=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var a=r.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(o);a.enter().append("path").classed("legendwaterfall",!0).attr("transform",w).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(e){var n=r.select(this),i=t[e[0]].marker,o=_(void 0,i.line,5,2);n.attr("d",e[1]).style("stroke-width",o+"px").call(l.fill,i.color),o&&n.call(l.stroke,i.line.color)}))})).each((function(e){S(e,this,"funnel")})).each((function(e){S(e,this)})).each((function(e){var n=e[0].trace,a=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&i.traceIs(n,"box-violin")?[e]:[]);a.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),a.exit().remove(),a.each((function(){var e=r.select(this);if("all"!==n.boxpoints&&"all"!==n.points||0!==l.opacity(n.fillcolor)||0!==l.opacity((n.line||{}).color)){var i=_(void 0,n.line,5,2);e.style("stroke-width",i+"px").call(l.fill,n.fillcolor),i&&l.stroke(e,n.line.color)}else{var c=o.minExtend(n,{marker:{size:y?12:o.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});a.call(s.pointStyle,c,t)}}))})).each((function(e){C(e,this,"funnelarea")})).each((function(e){C(e,this,"pie")})).each((function(e){var n,i,a=m(e),l=a.showFill,d=a.showLine,f=a.showGradientLine,p=a.showGradientFill,g=a.anyFill,v=a.anyLine,y=e[0],x=y.trace,w=c(x),S=w.colorscale,C=w.reversescale,k=u.hasMarkers(x)||!g?"M5,0":v?"M5,-2":"M5,-3",M=r.select(this),T=M.select(".legendfill").selectAll("path").data(l||p?[e]:[]);if(T.enter().append("path").classed("js-fill",!0),T.exit().remove(),T.attr("d",k+"h"+b+"v6h-"+b+"z").call((function(e){if(e.size())if(l)s.fillGroupStyle(e,t);else{var n="legendfill-"+x.uid;s.gradient(e,t,n,h(C),S,"fill")}})),d||f){var A=_(void 0,x.line,10,5);i=o.minExtend(x,{line:{width:A}}),n=[o.minExtend(y,{trace:i})]}var E=M.select(".legendlines").selectAll("path").data(d||f?[n]:[]);E.enter().append("path").classed("js-line",!0),E.exit().remove(),E.attr("d",k+(f?"l"+b+",0.0001":"h"+b)).call(d?s.lineGroupStyle:function(e){if(e.size()){var n="legendline-"+x.uid;s.lineGroupStyle(e),s.gradient(e,t,n,h(C),S,"stroke")}})})).each((function(e){var n,i,a=m(e),l=a.anyFill,c=a.anyLine,d=a.showLine,f=a.showMarker,p=e[0],h=p.trace,g=!f&&!c&&!l&&u.hasText(h);function v(e,t,n,r){var i=o.nestedProperty(h,e).get(),a=o.isArrayOrTypedArray(i)&&t?t(i):i;if(y&&a&&void 0!==r&&(a=r),n){if(a<n[0])return n[0];if(a>n[1])return n[1]}return a}function b(e){return p._distinct&&p.index&&e[p.index]?e[p.index]:e[0]}if(f||g||d){var x={},_={};if(f){x.mc=v("marker.color",b),x.mx=v("marker.symbol",b),x.mo=v("marker.opacity",o.mean,[.2,1]),x.mlc=v("marker.line.color",b),x.mlw=v("marker.line.width",o.mean,[0,5],2),_.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var S=v("marker.size",o.mean,[2,16],12);x.ms=S,_.marker.size=S}d&&(_.line={width:v("line.width",b,[0,10],5)}),g&&(x.tx="Aa",x.tp=v("textposition",b),x.ts=10,x.tc=v("textfont.color",b),x.tf=v("textfont.family",b)),n=[o.minExtend(p,x)],(i=o.minExtend(h,_)).selectedpoints=null,i.texttemplate=null}var C=r.select(this).select("g.legendpoints"),k=C.selectAll("path.scatterpts").data(f?n:[]);k.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",w),k.exit().remove(),k.call(s.pointStyle,i,t),f&&(n[0].mrc=3);var M=C.selectAll("g.pointtext").data(g?n:[]);M.enter().append("g").classed("pointtext",!0).append("text").attr("transform",w),M.exit().remove(),M.selectAll("text").call(s.textPointStyle,i,t)})).each((function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.visible&&"candlestick"===t.type?[e,e]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",(function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"})).attr("transform",w).style("stroke-miterlimit",1),n.exit().remove(),n.each((function(e,n){var i=r.select(this),o=t[n?"increasing":"decreasing"],a=_(void 0,o.line,5,2);i.style("stroke-width",a+"px").call(l.fill,o.fillcolor),a&&l.stroke(i,o.line.color)}))})).each((function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.visible&&"ohlc"===t.type?[e,e]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",(function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"})).attr("transform",w).style("stroke-miterlimit",1),n.exit().remove(),n.each((function(e,n){var i=r.select(this),o=t[n?"increasing":"decreasing"],a=_(void 0,o.line,5,2);i.style("fill","none").call(s.dashLine,o.line.dash,a),a&&l.stroke(i,o.line.color)}))}))}},2068:function(e,t,n){"use strict";n(3348),e.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},6023:function(e,t,n){"use strict";var r=n(3972),i=n(4875),o=n(1675),a=n(4255),s=n(4031).eraseActiveShape,l=n(1828),c=l._,u=e.exports={};function d(e,t){var n,i,a=t.currentTarget,s=a.getAttribute("data-attr"),l=a.getAttribute("data-val")||!0,c=e._fullLayout,u={},d=o.list(e,null,!0),f=c._cartesianSpikesEnabled;if("zoom"===s){var p,h="in"===l?.5:2,m=(1+h)/2,g=(1-h)/2;for(i=0;i<d.length;i++)if(!(n=d[i]).fixedrange)if(p=n._name,"auto"===l)u[p+".autorange"]=!0;else if("reset"===l){if(void 0===n._rangeInitial)u[p+".autorange"]=!0;else{var v=n._rangeInitial.slice();u[p+".range[0]"]=v[0],u[p+".range[1]"]=v[1]}void 0!==n._showSpikeInitial&&(u[p+".showspikes"]=n._showSpikeInitial,"on"!==f||n._showSpikeInitial||(f="off"))}else{var y=[n.r2l(n.range[0]),n.r2l(n.range[1])],b=[m*y[0]+g*y[1],m*y[1]+g*y[0]];u[p+".range[0]"]=n.l2r(b[0]),u[p+".range[1]"]=n.l2r(b[1])}}else"hovermode"!==s||"x"!==l&&"y"!==l||(l=c._isHoriz?"y":"x",a.setAttribute("data-val",l)),u[s]=l;c._cartesianSpikesEnabled=f,r.call("_guiRelayout",e,u)}function f(e,t){for(var n=t.currentTarget,i=n.getAttribute("data-attr"),o=n.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],s={},l=i.split("."),c=0;c<a.length;c++)s[a[c]+"."+l[1]]=o;var u="pan"===o?o:"zoom";s.dragmode=u,r.call("_guiRelayout",e,s)}function p(e,t){for(var n=t.currentTarget.getAttribute("data-attr"),i="resetLastSave"===n,o="resetDefault"===n,a=e._fullLayout,s=a._subplots.gl3d||[],l={},c=0;c<s.length;c++){var u,d=s[c],f=d+".camera",p=d+".aspectratio",h=d+".aspectmode",m=a[d]._scene;i?(l[f+".up"]=m.viewInitial.up,l[f+".eye"]=m.viewInitial.eye,l[f+".center"]=m.viewInitial.center,u=!0):o&&(l[f+".up"]=null,l[f+".eye"]=null,l[f+".center"]=null,u=!0),u&&(l[p+".x"]=m.viewInitial.aspectratio.x,l[p+".y"]=m.viewInitial.aspectratio.y,l[p+".z"]=m.viewInitial.aspectratio.z,l[h]=m.viewInitial.aspectmode)}r.call("_guiRelayout",e,l)}function h(e,t){var n=t.currentTarget,r=n._previousVal,i=e._fullLayout,o=i._subplots.gl3d||[],a=["xaxis","yaxis","zaxis"],s={},l={};if(r)l=r,n._previousVal=null;else{for(var c=0;c<o.length;c++){var u=o[c],d=i[u],f=u+".hovermode";s[f]=d.hovermode,l[f]=!1;for(var p=0;p<3;p++){var h=a[p],m=u+"."+h+".showspikes";l[m]=!1,s[m]=d[h].showspikes}}n._previousVal=s}return l}function m(e,t){for(var n=t.currentTarget,i=n.getAttribute("data-attr"),o=n.getAttribute("data-val")||!0,a=e._fullLayout,s=a._subplots.geo||[],l=0;l<s.length;l++){var c=s[l],u=a[c];if("zoom"===i){var d=u.projection.scale,f="in"===o?2*d:.5*d;r.call("_guiRelayout",e,c+".projection.scale",f)}}"reset"===i&&b(e,"geo")}function g(e){var t=e._fullLayout;return!t.hovermode&&(t._has("cartesian")?t._isHoriz?"y":"x":"closest")}function v(e){var t=g(e);r.call("_guiRelayout",e,"hovermode",t)}function y(e,t){for(var n=t.currentTarget.getAttribute("data-val"),i=e._fullLayout,o=i._subplots.mapbox||[],a={},s=0;s<o.length;s++){var l=o[s],c=i[l].zoom,u="in"===n?1.05*c:c/1.05;a[l+".zoom"]=u}r.call("_guiRelayout",e,a)}function b(e,t){for(var n=e._fullLayout,i=n._subplots[t]||[],o={},a=0;a<i.length;a++)for(var s=i[a],l=n[s]._subplot.viewInitial,c=Object.keys(l),u=0;u<c.length;u++){var d=c[u];o[s+"."+d]=l[d]}r.call("_guiRelayout",e,o)}u.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return c(e,"png"===t?"Download plot as a png":"Download plot")},icon:a.camera,click:function(e){var t=e._context.toImageButtonOptions,n={format:t.format||"png"};l.notifier(c(e,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&l.isIE()&&(l.notifier(c(e,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach((function(e){e in t&&(n[e]=t[e])})),r.call("downloadImage",e,n).then((function(t){l.notifier(c(e,"Snapshot succeeded")+" - "+t,"long")})).catch((function(){l.notifier(c(e,"Sorry, there was a problem downloading your snapshot!"),"long")}))}},u.sendDataToCloud={name:"sendDataToCloud",title:function(e){return c(e,"Edit in Chart Studio")},icon:a.disk,click:function(e){i.sendDataToCloud(e)}},u.editInChartStudio={name:"editInChartStudio",title:function(e){return c(e,"Edit in Chart Studio")},icon:a.pencil,click:function(e){i.sendDataToCloud(e)}},u.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return c(e,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:d},u.pan2d={name:"pan2d",_cat:"pan",title:function(e){return c(e,"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:d},u.select2d={name:"select2d",_cat:"select",title:function(e){return c(e,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:d},u.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return c(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:d},u.drawclosedpath={name:"drawclosedpath",title:function(e){return c(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:a.drawclosedpath,click:d},u.drawopenpath={name:"drawopenpath",title:function(e){return c(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:a.drawopenpath,click:d},u.drawline={name:"drawline",title:function(e){return c(e,"Draw line")},attr:"dragmode",val:"drawline",icon:a.drawline,click:d},u.drawrect={name:"drawrect",title:function(e){return c(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:a.drawrect,click:d},u.drawcircle={name:"drawcircle",title:function(e){return c(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:a.drawcircle,click:d},u.eraseshape={name:"eraseshape",title:function(e){return c(e,"Erase active shape")},icon:a.eraseshape,click:s},u.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return c(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:d},u.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return c(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:d},u.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return c(e,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:d},u.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return c(e,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:d},u.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return c(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:d},u.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return c(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:d},u.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return c(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:f},u.pan3d={name:"pan3d",_cat:"pan",title:function(e){return c(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:f},u.orbitRotation={name:"orbitRotation",title:function(e){return c(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:a["3d_rotate"],click:f},u.tableRotation={name:"tableRotation",title:function(e){return c(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:f},u.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return c(e,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:p},u.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return c(e,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:p},u.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){var n=h(e,t);r.call("_guiRelayout",e,n)}},u.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return c(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:m},u.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return c(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:m},u.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return c(e,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:m},u.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:v},u.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:v},u.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:v},u.resetViewSankey={name:"resetSankeyGroup",title:function(e){return c(e,"Reset view")},icon:a.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var i=e._fullData[n]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}r.call("restyle",e,t)}},u.toggleHover={name:"toggleHover",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){var n=h(e,t);n.hovermode=g(e),r.call("_guiRelayout",e,n)}},u.resetViews={name:"resetViews",title:function(e){return c(e,"Reset views")},icon:a.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),d(e,t),n.setAttribute("data-attr","resetLastSave"),p(e,t),b(e,"geo"),b(e,"mapbox")}},u.toggleSpikelines={name:"toggleSpikelines",title:function(e){return c(e,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",r.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=o.list(e,null,!0),r={},i=0;i<n.length;i++){var a=n[i];r[a._name+".showspikes"]=!!t||a._showSpikeInitial}return r}(e))}},u.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return c(e,"Reset view")},attr:"reset",icon:a.home,click:function(e){b(e,"mapbox")}},u.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return c(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:y},u.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return c(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:y}},3348:function(e,t,n){"use strict";var r=n(6023),i=Object.keys(r),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],a=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),s=[];i.forEach((function(e){!function(e){if(-1===a.indexOf(e._cat||e.name)){var t=e.name,n=(e._cat||e.name).toLowerCase();-1===s.indexOf(t)&&s.push(t),-1===s.indexOf(n)&&s.push(n)}}(r[e])})),s.sort(),e.exports={DRAW_MODES:o,backButtons:a,foreButtons:s}},5750:function(e,t,n){"use strict";var r=n(1828),i=n(7901),o=n(4467),a=n(2068);e.exports=function(e,t){var n=e.modebar||{},s=o.newContainer(t,"modebar");function l(e,t){return r.coerce(n,s,a,e,t)}l("orientation"),l("bgcolor",i.addOpacity(t.paper_bgcolor,.5));var c=i.contrast(i.rgb(t.modebar.bgcolor));l("color",i.addOpacity(c,.3)),l("activecolor",i.addOpacity(c,.7)),l("uirevision",t.uirevision),l("add"),l("remove")}},4168:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"modebar",layoutAttributes:n(2068),supplyLayoutDefaults:n(5750),manage:n(4192)}},4192:function(e,t,n){"use strict";var r=n(1675),i=n(4098),o=n(3972),a=n(3469).isUnifiedHover,s=n(7676),l=n(6023),c=n(3348).DRAW_MODES,u=n(1828).extendDeep;e.exports=function(e){var t=e._fullLayout,n=e._context,d=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var f,p=n.modeBarButtons;f=Array.isArray(p)&&p.length?function(e){for(var t=u([],e),n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++){var o=r[i];if("string"==typeof o){if(void 0===l[o])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[n][i]=l[o]}}return t}(p):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,s=e._context;function u(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return!0}else{var n=t.name,r=t._cat||t.name;if(n===e||r===e.toLowerCase())return!0}return!1}var d=t.modebar.add;"string"==typeof d&&(d=[d]);var f=t.modebar.remove;"string"==typeof f&&(f=[f]);var p=s.modeBarButtonsToAdd.concat(d.filter((function(e){for(var t=0;t<s.modeBarButtonsToRemove.length;t++)if(u(e,s.modeBarButtonsToRemove[t]))return!1;return!0}))),h=s.modeBarButtonsToRemove.concat(f.filter((function(e){for(var t=0;t<s.modeBarButtonsToAdd.length;t++)if(u(e,s.modeBarButtonsToAdd[t]))return!1;return!0}))),m=t._has("cartesian"),g=t._has("gl3d"),v=t._has("geo"),y=t._has("pie"),b=t._has("funnelarea"),x=t._has("gl2d"),w=t._has("ternary"),_=t._has("mapbox"),S=t._has("polar"),C=t._has("smith"),k=t._has("sankey"),M=function(e){for(var t=r.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),T=a(t.hovermode),A=[];function E(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],i=l[r],o=i.name.toLowerCase(),a=(i._cat||i.name).toLowerCase(),s=!1,c=0;c<h.length;c++){var u=h[c].toLowerCase();if(u===o||u===a){s=!0;break}}s||t.push(l[r])}A.push(t)}}var P=["toImage"];s.showEditInChartStudio?P.push("editInChartStudio"):s.showSendToCloud&&P.push("sendDataToCloud"),E(P);var R=[],O=[],I=[],L=[];(m||x||y||b||w)+v+g+_+S+C>1?(O=["toggleHover"],I=["resetViews"]):v?(R=["zoomInGeo","zoomOutGeo"],O=["hoverClosestGeo"],I=["resetGeo"]):g?(O=["hoverClosest3d"],I=["resetCameraDefault3d","resetCameraLastSave3d"]):_?(R=["zoomInMapbox","zoomOutMapbox"],O=["toggleHover"],I=["resetViewMapbox"]):x?O=["hoverClosestGl2d"]:y?O=["hoverClosestPie"]:k?(O=["hoverClosestCartesian","hoverCompareCartesian"],I=["resetViewSankey"]):O=["toggleHover"],m&&(O=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(e){for(var t=0;t<e.length;t++)if(!o.traceIs(e[t],"noHover"))return!1;return!0}(n)||T)&&(O=[]),!m&&!x||M||(R=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==I[0]&&(I=["resetScale2d"])),g?L=["zoom3d","pan3d","orbitRotation","tableRotation"]:(m||x)&&!M||w?L=["zoom2d","pan2d"]:_||v?L=["pan2d"]:S&&(L=["zoom2d"]),function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(o.traceIs(r,"scatter-like")?(i.hasMarkers(r)||i.hasText(r))&&(t=!0):o.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t}(n)&&L.push("select2d","lasso2d");var D=[],N=function(e){-1===D.indexOf(e)&&-1!==O.indexOf(e)&&D.push(e)};if(Array.isArray(p)){for(var F=[],z=0;z<p.length;z++){var B=p[z];"string"==typeof B?(B=B.toLowerCase(),-1!==c.indexOf(B)?(t._has("mapbox")||t._has("cartesian"))&&L.push(B):"togglespikelines"===B?N("toggleSpikelines"):"togglehover"===B?N("toggleHover"):"hovercompare"===B?N("hoverCompareCartesian"):"hoverclosest"===B?(N("hoverClosestCartesian"),N("hoverClosestGeo"),N("hoverClosest3d"),N("hoverClosestGl2d"),N("hoverClosestPie")):"v1hovermode"===B&&(N("toggleHover"),N("hoverClosestCartesian"),N("hoverCompareCartesian"),N("hoverClosestGeo"),N("hoverClosest3d"),N("hoverClosestGl2d"),N("hoverClosestPie"))):F.push(B)}p=F}return E(L),E(R.concat(I)),E(D),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(A,p)}(e),d?d.update(e,f):t._modeBar=s(e,f)}else d&&(d.destroy(),delete t._modeBar)}},7676:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=n(1828),a=n(4255),s=n(1506).version,l=new DOMParser;function c(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var u=c.prototype;u.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var a=r.modebar,s="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(i),o.addRelatedStyleRule(i,s+"#"+i+" .modebar-group","background-color: "+a.bgcolor),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+a.color),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+a.activecolor),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+a.activecolor);var l=!this.hasButtons(t),c=this.hasLogo!==n.displaylogo,u=this.locale!==n.locale;if(this.locale=n.locale,(l||c||u)&&(this.removeAllButtons(),this.updateButtons(t),n.watermark||n.displaylogo)){var d=this.getLogo();n.watermark&&(d.className=d.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(d,this.element.childNodes[0]):this.element.appendChild(d),this.hasLogo=!0}this.updateActiveButton()},u.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach((function(e){var n=t.createGroup();e.forEach((function(e){var r=e.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==t.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");t.buttonsNames.push(r);var i=t.createButton(e);t.buttonElements.push(i),n.appendChild(i)})),t.element.appendChild(n)}))},u.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},u.createButton=function(e){var t=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=e.title;void 0===i?i=e.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&n.setAttribute("data-title",i),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var o=e.val;if(void 0!==o&&("function"==typeof o&&(o=o(this.graphInfo)),n.setAttribute("data-val",o)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",(function(n){e.click(t.graphInfo,n),t.updateActiveButton(n.currentTarget)})),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&r.select(n).classed("active",!0);var s=e.icon;return"function"==typeof s?n.appendChild(s()):n.appendChild(this.createIcon(s||a.question)),n.setAttribute("data-gravity",e.gravity||"n"),n},u.createIcon=function(e){var t,n=i(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";if(e.path){(t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon");var o=document.createElementNS(r,"path");o.setAttribute("d",e.path),e.transform?o.setAttribute("transform",e.transform):void 0!==e.ascent&&o.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(o)}return e.svg&&(t=l.parseFromString(e.svg,"application/xml").childNodes[0]),t.setAttribute("height","1em"),t.setAttribute("width","1em"),t},u.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach((function(e){var i=e.getAttribute("data-val")||!0,a=e.getAttribute("data-attr"),s="true"===e.getAttribute("data-toggle"),l=r.select(e);if(s)a===n&&l.classed("active",!l.classed("active"));else{var c=null===a?a:o.nestedProperty(t,a).get();l.classed("active",c===i)}}))},u.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},u.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+s+")"),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(a.newplotlylogo)),e.appendChild(t),e},u.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},u.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},e.exports=function(e,t){var n=e._fullLayout,i=new c({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&r.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},7113:function(e,t,n){"use strict";var r=n(1940),i=n(2399),o=(0,n(4467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});e.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},9573:function(e){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},8674:function(e,t,n){"use strict";var r=n(1828),i=n(7901),o=n(4467),a=n(5501),s=n(7113),l=n(9573);function c(e,t,n,i){var o=i.calendar;function a(n,i){return r.coerce(e,t,s.buttons,n,i)}if(a("visible")){var l=a("step");"all"!==l&&(!o||"gregorian"===o||"month"!==l&&"year"!==l?a("stepmode"):t.stepmode="backward",a("count")),a("label")}}e.exports=function(e,t,n,u,d){var f=e.rangeselector||{},p=o.newContainer(t,"rangeselector");function h(e,t){return r.coerce(f,p,s,e,t)}if(h("visible",a(f,p,{name:"buttons",handleItemDefaults:c,calendar:d}).length>0)){var m=function(e,t,n){for(var r=n.filter((function(n){return t[n].anchor===e._id})),i=0,o=0;o<r.length;o++){var a=t[r[o]].domain;a&&(i=Math.max(a[1],i))}return[e.domain[0],i+l.yPad]}(t,n,u);h("x",m[0]),h("y",m[1]),r.noneOrAll(e,t,["x","y"]),h("xanchor"),h("yanchor"),r.coerceFont(h,"font",n.font);var g=h("bgcolor");h("activecolor",i.contrast(g,l.lightAmount,l.darkAmount)),h("bordercolor"),h("borderwidth")}}},1598:function(e,t,n){"use strict";var r=n(9898),i=n(3972),o=n(4875),a=n(7901),s=n(1424),l=n(1828),c=l.strTranslate,u=n(3893),d=n(1675),f=n(8783),p=f.LINE_SPACING,h=f.FROM_TL,m=f.FROM_BR,g=n(9573),v=n(7917);function y(e){return e._id}function b(e,t,n){var r=l.ensureSingle(e,"rect","selector-rect",(function(e){e.attr("shape-rendering","crispEdges")}));r.attr({rx:g.rx,ry:g.ry}),r.call(a.stroke,t.bordercolor).call(a.fill,function(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}(t,n)).style("stroke-width",t.borderwidth+"px")}function x(e,t,n,r){var i,o;l.ensureSingle(e,"text","selector-text",(function(e){e.attr("text-anchor","middle")})).call(s.font,t.font).text((i=n,o=r._fullLayout._meta,i.label?o?l.templateString(i.label,o):i.label:"all"===i.step?"all":i.count+i.step.charAt(0))).call((function(e){u.convertToTspans(e,r)}))}e.exports=function(e){var t=e._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=d.list(e,"x",!0),n=[],r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(e),y);t.enter().append("g").classed("rangeselector",!0),t.exit().remove(),t.style({cursor:"pointer","pointer-events":"all"}),t.each((function(t){var n=r.select(this),a=t,d=a.rangeselector,f=n.selectAll("g.button").data(l.filterVisible(d.buttons));f.enter().append("g").classed("button",!0),f.exit().remove(),f.each((function(t){var n=r.select(this),o=v(a,t);t._isActive=function(e,t,n){if("all"===t.step)return!0===e.autorange;var r=Object.keys(n);return e.range[0]===n[r[0]]&&e.range[1]===n[r[1]]}(a,t,o),n.call(b,d,t),n.call(x,d,t,e),n.on("click",(function(){e._dragged||i.call("_guiRelayout",e,o)})),n.on("mouseover",(function(){t._isHovered=!0,n.call(b,d,t)})),n.on("mouseout",(function(){t._isHovered=!1,n.call(b,d,t)}))})),function(e,t,n,i,a){var d=0,f=0,v=n.borderwidth;t.each((function(){var e=r.select(this).select(".selector-text"),t=n.font.size*p,i=Math.max(t*u.lineCount(e),16)+3;f=Math.max(f,i)})),t.each((function(){var e=r.select(this),t=e.select(".selector-rect"),i=e.select(".selector-text"),o=i.node()&&s.bBox(i.node()).width,a=n.font.size*p,l=u.lineCount(i),h=Math.max(o+10,g.minButtonWidth);e.attr("transform",c(v+d,v)),t.attr({x:0,y:0,width:h,height:f}),u.positionText(i,h/2,f/2-(l-1)*a/2+3),d+=h+5}));var y=e._fullLayout._size,b=y.l+y.w*n.x,x=y.t+y.h*(1-n.y),w="left";l.isRightAnchor(n)&&(b-=d,w="right"),l.isCenterAnchor(n)&&(b-=d/2,w="center");var _="top";l.isBottomAnchor(n)&&(x-=f,_="bottom"),l.isMiddleAnchor(n)&&(x-=f/2,_="middle"),d=Math.ceil(d),f=Math.ceil(f),b=Math.round(b),x=Math.round(x),o.autoMargin(e,i+"-range-selector",{x:n.x,y:n.y,l:d*h[w],r:d*m[w],b:f*m[_],t:f*h[_]}),a.attr("transform",c(b,x))}(e,f,d,a._name,n)}))}},7917:function(e,t,n){"use strict";var r=n(1041),i=n(1828).titleCase;e.exports=function(e,t){var n=e._name,o={};if("all"===t.step)o[n+".autorange"]=!0;else{var a=function(e,t){var n,o=e.range,a=new Date(e.r2l(o[1])),s=t.step,l=r["utc"+i(s)],c=t.count;switch(t.stepmode){case"backward":n=e.l2r(+l.offset(a,-c));break;case"todate":var u=l.offset(a,-c);n=e.l2r(+l.ceil(u))}return[n,o[1]]}(e,t);o[n+".range[0]"]=a[0],o[n+".range[1]"]=a[1]}return o}},7218:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:n(7113)}}},layoutAttributes:n(7113),handleDefaults:n(8674),draw:n(1598)}},5148:function(e,t,n){"use strict";var r=n(2399);e.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},8443:function(e,t,n){"use strict";var r=n(1675).list,i=n(1739).getAutoRange,o=n(3251);e.exports=function(e){for(var t=r(e,"x",!0),n=0;n<t.length;n++){var a=t[n],s=a[o.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=i(e,a))}}},3251:function(e){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},6377:function(e,t,n){"use strict";var r=n(1828),i=n(4467),o=n(1675),a=n(5148),s=n(7850);e.exports=function(e,t,n){var l=e[n],c=t[n];if(l.rangeslider||t._requestRangeslider[c._id]){r.isPlainObject(l.rangeslider)||(l.rangeslider={});var u,d,f=l.rangeslider,p=i.newContainer(c,"rangeslider");if(w("visible")){w("bgcolor",t.plot_bgcolor),w("bordercolor"),w("borderwidth"),w("thickness"),w("autorange",!c.isValidRange(f.range)),w("range");var h=t._subplots;if(h)for(var m=h.cartesian.filter((function(e){return e.substr(0,e.indexOf("y"))===o.name2id(n)})).map((function(e){return e.substr(e.indexOf("y"),e.length)})),g=r.simpleMap(m,o.id2name),v=0;v<g.length;v++){var y=g[v];u=f[y]||{},d=i.newContainer(p,y,"yaxis");var b,x=t[y];u.range&&x.isValidRange(u.range)&&(b="fixed"),"match"!==_("rangemode",b)&&_("range",x.range.slice())}p._input=f}}function w(e,t){return r.coerce(f,p,a,e,t)}function _(e,t){return r.coerce(u,d,s,e,t)}}},2413:function(e,t,n){"use strict";var r=n(9898),i=n(3972),o=n(4875),a=n(1828),s=a.strTranslate,l=n(1424),c=n(7901),u=n(2998),d=n(3612),f=n(1675),p=n(8569),h=n(6964),m=n(3251);function g(e,t,n,r){var i=a.ensureSingle(e,"rect",m.bgClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})})),o=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,u=-r._offsetShift,d=l.crispRound(t,r.borderwidth);i.attr({width:r._width+o,height:r._height+o,transform:s(u,u),"stroke-width":d}).call(c.stroke,r.bordercolor).call(c.fill,r.bgcolor)}function v(e,t,n,r){var i=t._fullLayout;a.ensureSingleById(i._topdefs,"clipPath",r._clipId,(function(e){e.append("rect").attr({x:0,y:0})})).select("rect").attr({width:r._width,height:r._height})}function y(e,t,n,i){var s,c=t.calcdata,u=e.selectAll("g."+m.rangePlotClassName).data(n._subplotsWith,a.identity);u.enter().append("g").attr("class",(function(e){return m.rangePlotClassName+" "+e})).call(l.setClipUrl,i._clipId,t),u.order(),u.exit().remove(),u.each((function(e,a){var l=r.select(this),u=0===a,p=f.getFromId(t,e,"y"),h=p._name,m=i[h],g={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};n.rangebreaks&&(g.layout.xaxis.rangebreaks=n.rangebreaks),g.layout[h]={type:p.type,domain:[0,1],range:"match"!==m.rangemode?m.range.slice():p.range.slice(),calendar:p.calendar},p.rangebreaks&&(g.layout[h].rangebreaks=p.rangebreaks),o.supplyDefaults(g);var v=g._fullLayout.xaxis,y=g._fullLayout[h];v.clearCalc(),v.setScale(),y.clearCalc(),y.setScale();var b={id:e,plotgroup:l,xaxis:v,yaxis:y,isRangePlot:!0};u?s=b:(b.mainplot="xy",b.mainplotinfo=s),d.rangePlot(t,b,function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i[0].trace;o.xaxis+o.yaxis===t&&n.push(i)}return n}(c,e))}))}function b(e,t,n,r,i){a.ensureSingle(e,"rect",m.maskMinClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})})).attr("height",r._height).call(c.fill,m.maskColor),a.ensureSingle(e,"rect",m.maskMaxClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})})).attr("height",r._height).call(c.fill,m.maskColor),"match"!==i.rangemode&&(a.ensureSingle(e,"rect",m.maskMinOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})})).attr("width",r._width).call(c.fill,m.maskOppAxisColor),a.ensureSingle(e,"rect",m.maskMaxOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})})).attr("width",r._width).style("border-top",m.maskOppBorder).call(c.fill,m.maskOppAxisColor))}function x(e,t,n,r){t._context.staticPlot||a.ensureSingle(e,"rect",m.slideBoxClassName,(function(e){e.attr({y:0,cursor:m.slideBoxCursor,"shape-rendering":"crispEdges"})})).attr({height:r._height,fill:m.slideBoxFill})}function w(e,t,n,r){var i=a.ensureSingle(e,"g",m.grabberMinClassName),o=a.ensureSingle(e,"g",m.grabberMaxClassName),s={x:0,width:m.handleWidth,rx:m.handleRadius,fill:c.background,stroke:c.defaultLine,"stroke-width":m.handleStrokeWidth,"shape-rendering":"crispEdges"},l={y:Math.round(r._height/4),height:Math.round(r._height/2)};a.ensureSingle(i,"rect",m.handleMinClassName,(function(e){e.attr(s)})).attr(l),a.ensureSingle(o,"rect",m.handleMaxClassName,(function(e){e.attr(s)})).attr(l);var u={width:m.grabAreaWidth,x:0,y:0,fill:m.grabAreaFill,cursor:t._context.staticPlot?void 0:m.grabAreaCursor};a.ensureSingle(i,"rect",m.grabAreaMinClassName,(function(e){e.attr(u)})).attr("height",r._height),a.ensureSingle(o,"rect",m.grabAreaMaxClassName,(function(e){e.attr(u)})).attr("height",r._height)}e.exports=function(e){for(var t=e._fullLayout,n=t._rangeSliderData,o=0;o<n.length;o++){var l=n[o][m.name];l._clipId=l._id+"-"+t._uid}var c=t._infolayer.selectAll("g."+m.containerClassName).data(n,(function(e){return e._name}));c.exit().each((function(e){var n=e[m.name];t._topdefs.select("#"+n._clipId).remove()})).remove(),0!==n.length&&(c.enter().append("g").classed(m.containerClassName,!0).attr("pointer-events","all"),c.each((function(n){var o=r.select(this),l=n[m.name],c=t[f.id2name(n.anchor)],d=l[f.id2name(n.anchor)];if(l.range){var _,S=a.simpleMap(l.range,n.r2l),C=a.simpleMap(n.range,n.r2l);_=C[0]<C[1]?[Math.min(S[0],C[0]),Math.max(S[1],C[1])]:[Math.max(S[0],C[0]),Math.min(S[1],C[1])],l.range=l._input.range=a.simpleMap(_,n.l2r)}n.cleanRange("rangeslider.range");var k=t._size,M=n.domain;l._width=k.w*(M[1]-M[0]);var T=Math.round(k.l+k.w*M[0]),A=Math.round(k.t+k.h*(1-n._counterDomainMin)+("bottom"===n.side?n._depth:0)+l._offsetShift+m.extraPad);o.attr("transform",s(T,A)),l._rl=a.simpleMap(l.range,n.r2l);var E=l._rl[0],P=l._rl[1],R=P-E;if(l.p2d=function(e){return e/l._width*R+E},l.d2p=function(e){return(e-E)/R*l._width},n.rangebreaks){var O=n.locateBreaks(E,P);if(O.length){var I,L,D=0;for(I=0;I<O.length;I++)D+=(L=O[I]).max-L.min;var N=l._width/(P-E-D),F=[-N*E];for(I=0;I<O.length;I++)L=O[I],F.push(F[F.length-1]-N*(L.max-L.min));for(l.d2p=function(e){for(var t=F[0],n=0;n<O.length;n++){var r=O[n];if(e>=r.max)t=F[n+1];else if(e<r.min)break}return t+N*e},I=0;I<O.length;I++)(L=O[I]).pmin=l.d2p(L.min),L.pmax=l.d2p(L.max);l.p2d=function(e){for(var t=F[0],n=0;n<O.length;n++){var r=O[n];if(e>=r.pmax)t=F[n+1];else if(e<r.pmin)break}return(e-t)/N}}}if("match"!==d.rangemode){var z=c.r2l(d.range[0]),B=c.r2l(d.range[1])-z;l.d2pOppAxis=function(e){return(e-z)/B*l._height}}o.call(g,e,n,l).call(v,e,n,l).call(y,e,n,l).call(b,e,n,l,d).call(x,e,n,l).call(w,e,n,l),function(e,t,n,o){if(!t._context.staticPlot){var s=e.select("rect."+m.slideBoxClassName).node(),l=e.select("rect."+m.grabAreaMinClassName).node(),c=e.select("rect."+m.grabAreaMaxClassName).node();e.on("mousedown",u),e.on("touchstart",u)}function u(){var u=r.event,d=u.target,f=u.clientX||u.touches[0].clientX,m=f-e.node().getBoundingClientRect().left,g=o.d2p(n._rl[0]),v=o.d2p(n._rl[1]),y=p.coverSlip();function b(e){var u,p,b,x=+(e.clientX||e.touches[0].clientX)-f;switch(d){case s:b="ew-resize",u=g+x,p=v+x;break;case l:b="col-resize",u=g+x,p=v;break;case c:b="col-resize",u=g,p=v+x;break;default:b="ew-resize",u=m,p=m+x}if(p<u){var w=p;p=u,u=w}o._pixelMin=u,o._pixelMax=p,h(r.select(y),b),function(e,t,n,r){function o(e){return n.l2r(a.constrain(e,r._rl[0],r._rl[1]))}var s=o(r.p2d(r._pixelMin)),l=o(r.p2d(r._pixelMax));window.requestAnimationFrame((function(){i.call("_guiRelayout",t,n._name+".range",[s,l])}))}(0,t,n,o)}function x(){y.removeEventListener("mousemove",b),y.removeEventListener("mouseup",x),this.removeEventListener("touchmove",b),this.removeEventListener("touchend",x),a.removeElement(y)}this.addEventListener("touchmove",b),this.addEventListener("touchend",x),y.addEventListener("mousemove",b),y.addEventListener("mouseup",x)}}(o,e,n,l),function(e,t,n,r,i,o){var l=m.handleWidth/2;function c(e){return a.constrain(e,0,r._width)}function u(e){return a.constrain(e,0,r._height)}function d(e){return a.constrain(e,-l,r._width+l)}var f=c(r.d2p(n._rl[0])),p=c(r.d2p(n._rl[1]));if(e.select("rect."+m.slideBoxClassName).attr("x",f).attr("width",p-f),e.select("rect."+m.maskMinClassName).attr("width",f),e.select("rect."+m.maskMaxClassName).attr("x",p).attr("width",r._width-p),"match"!==o.rangemode){var h=r._height-u(r.d2pOppAxis(i._rl[1])),g=r._height-u(r.d2pOppAxis(i._rl[0]));e.select("rect."+m.maskMinOppAxisClassName).attr("x",f).attr("height",h).attr("width",p-f),e.select("rect."+m.maskMaxOppAxisClassName).attr("x",f).attr("y",g).attr("height",r._height-g).attr("width",p-f),e.select("rect."+m.slideBoxClassName).attr("y",h).attr("height",g-h)}var v=.5,y=Math.round(d(f-l))-v,b=Math.round(d(p-l))+v;e.select("g."+m.grabberMinClassName).attr("transform",s(y,v)),e.select("g."+m.grabberMaxClassName).attr("transform",s(b,v))}(o,0,n,l,c,d),"bottom"===n.side&&u.draw(e,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:t._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:A+l._height+l._offsetShift+10+1.5*n.title.font.size,"text-anchor":"middle"}})})))}},549:function(e,t,n){"use strict";var r=n(1675),i=n(3893),o=n(3251),a=n(8783).LINE_SPACING,s=o.name;function l(e){var t=e&&e[s];return t&&t.visible}t.isVisible=l,t.makeData=function(e){var t=r.list({_fullLayout:e},"x",!0),n=e.margin,i=[];if(!e._has("gl2d"))for(var o=0;o<t.length;o++){var a=t[o];if(l(a)){i.push(a);var c=a[s];c._id=s+a._id,c._height=(e.height-n.b-n.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}e._rangeSliderData=i},t.autoMarginOpts=function(e,t){var n=e._fullLayout,r=t[s],l=t._id.charAt(0),c=0,u=0;return"bottom"===t.side&&(c=t._depth,t.title.text!==n._dfltTitle[l]&&(u=1.5*t.title.font.size+10+r._offsetShift,u+=(t.title.text.match(i.BR_TAG_ALL)||[]).length*t.title.font.size*a)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+c+Math.max(n.margin.b,u),pad:o.extraPad+2*r._offsetShift}}},3137:function(e,t,n){"use strict";var r=n(1828),i=n(5148),o=n(7850),a=n(549);e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:o})}}},layoutAttributes:n(5148),handleDefaults:n(6377),calcAutorange:n(8443),draw:n(2413),isVisible:a.isVisible,makeData:a.makeData,autoMarginOpts:a.autoMarginOpts}},7850:function(e){"use strict";e.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(e,t,n){"use strict";var r=n(215),i=n(2196).line,o=n(9952).P,a=n(1426).extendFlat,s=n(962).overrideAll,l=n(4467).templatedArray;n(4695),e.exports=s(l("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:a({},r.xref,{}),yref:a({},r.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:i.color,width:a({},i.width,{min:1,dflt:1}),dash:a({},o,{dflt:"dot"})}}),"arraydraw","from-root")},4122:function(e){"use strict";e.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},9402:function(e,t,n){"use strict";var r=n(1828),i=n(9298),o=n(5501),a=n(8389),s=n(477);function l(e,t,n){function o(n,i){return r.coerce(e,t,a,n,i)}var l=o("path"),c="path"!==o("type",l?"path":"rect");c&&delete t.path,o("opacity"),o("line.color"),o("line.width"),o("line.dash");for(var u=["x","y"],d=0;d<2;d++){var f,p,h,m=u[d],g={_fullLayout:n},v=i.coerceRef(e,t,g,m);if((f=i.getFromId(g,v))._selectionIndices.push(t._index),h=s.rangeToShapePosition(f),p=s.shapePositionToRange(f),c){var y=m+"0",b=m+"1",x=e[y],w=e[b];e[y]=p(e[y],!0),e[b]=p(e[b],!0),i.coercePosition(t,g,o,v,y),i.coercePosition(t,g,o,v,b);var _=t[y],S=t[b];void 0!==_&&void 0!==S&&(t[y]=h(_),t[b]=h(S),e[y]=x,e[b]=w)}}c&&r.noneOrAll(e,t,["x0","x1","y0","y1"])}e.exports=function(e,t){o(e,t,{name:"selections",handleItemDefaults:l});for(var n=t.selections,r=0;r<n.length;r++){var i=n[r];i&&void 0===i.path&&(void 0!==i.x0&&void 0!==i.x1&&void 0!==i.y0&&void 0!==i.y1||(t.selections[r]=null))}}},2485:function(e,t,n){"use strict";var r=n(165).readPaths,i=n(2359),o=n(1873).clearOutlineControllers,a=n(7901),s=n(1424),l=n(4467).arrayEditor,c=n(477),u=c.getPathString;function d(e){var t=e._fullLayout;for(var n in o(e),t._selectionLayer.selectAll("path").remove(),t._plots){var r=t._plots[n].selectionLayer;r&&r.selectAll("path").remove()}for(var i=0;i<t.selections.length;i++)p(e,i)}function f(e){return e._context.editSelection}function p(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var n=c.makeSelectionsOptionsAndPlotinfo(e,t),o=n.options,p=n.plotinfo;o._input&&function(n){var c=u(e,o),g={"data-index":t,"fill-rule":"evenodd",d:c},v=o.opacity,y="rgba(0,0,0,0)",b=o.line.color||a.contrast(e._fullLayout.plot_bgcolor),x=o.line.width,w=o.line.dash;x||(x=5,w="solid");var _=f(e)&&e._fullLayout._activeSelectionIndex===t;_&&(y=e._fullLayout.activeselection.fillcolor,v=e._fullLayout.activeselection.opacity);for(var S=[],C=1;C>=0;C--){var k=n.append("path").attr(g).style("opacity",C?.1:v).call(a.stroke,b).call(a.fill,y).call(s.dashLine,C?"solid":w,C?4+x:x);if(h(k,e,o),_){var M=l(e.layout,"selections",o);k.style({cursor:"move"});var T={element:k.node(),plotinfo:p,gd:e,editHelpers:M,isActiveSelection:!0},A=r(c,e);i(A,k,T)}else k.style("pointer-events",C?"all":"none");S[C]=k}var E=S[0];S[1].node().addEventListener("click",(function(){return function(e,t){if(f(e)){var n=+t.node().getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeSelectionIndex)return void m(e);e._fullLayout._activeSelectionIndex=n,e._fullLayout._deactivateSelection=m,d(e)}}}(e,E)}))}(e._fullLayout._selectionLayer)}function h(e,t,n){var r=n.xref+n.yref;s.setClipUrl(e,"clip"+t._fullLayout._uid+r,t)}function m(e){f(e)&&e._fullLayout._activeSelectionIndex>=0&&(o(e),delete e._fullLayout._activeSelectionIndex,d(e))}e.exports={draw:d,drawOne:p,activateLastSelection:function(e){if(f(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=m,d(e)}}}},3777:function(e,t,n){"use strict";var r=n(9952).P,i=n(1426).extendFlat;e.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:i({},r,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},849:function(e){"use strict";e.exports=function(e,t,n){n("newselection.mode"),n("newselection.line.width")&&(n("newselection.line.color"),n("newselection.line.dash")),n("activeselection.fillcolor"),n("activeselection.opacity")}},5855:function(e,t,n){"use strict";var r=n(4505).selectMode,i=n(1873).clearOutline,o=n(165),a=o.readPaths,s=o.writePaths,l=o.fixDatesForPaths;e.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var o=n.getAttribute("d"),c=t.gd,u=c._fullLayout.newselection,d=t.plotinfo,f=d.xaxis,p=d.yaxis,h=t.isActiveSelection,m=t.dragmode,g=(c.layout||{}).selections||[];if(!r(m)&&void 0!==h){var v=c._fullLayout._activeSelectionIndex;if(v<g.length)switch(c._fullLayout.selections[v].type){case"rect":m="select";break;case"path":m="lasso"}}var y,b=a(o,c,d,h),x={xref:f._id,yref:p._id,opacity:u.opacity,line:{color:u.line.color,width:u.line.width,dash:u.line.dash}};1===b.length&&(y=b[0]),y&&5===y.length&&"select"===m?(x.type="rect",x.x0=y[0][1],x.y0=y[0][2],x.x1=y[2][1],x.y1=y[2][2]):(x.type="path",f&&p&&l(b,f,p),x.path=s(b),y=null),i(c);for(var w=t.editHelpers,_=(w||{}).modifyItem,S=[],C=0;C<g.length;C++){var k=c._fullLayout.selections[C];if(k){if(S[C]=k._input,void 0!==h&&C===c._fullLayout._activeSelectionIndex){var M=x;switch(k.type){case"rect":_("x0",M.x0),_("x1",M.x1),_("y0",M.y0),_("y1",M.y1);break;case"path":_("path",M.path)}}}else S[C]=k}return void 0===h?(S.push(x),S):w?w.getUpdateObj():{}}}}},5549:function(e,t,n){"use strict";var r=n(1828).strTranslate;function i(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}e.exports={p2r:i,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(e){var t="y"===e._id.charAt(0)?1:0;return function(n){return i(e,n[t])}},getTransform:function(e){return r(e.xaxis._offset,e.yaxis._offset)}}},7322:function(e,t,n){"use strict";var r=n(2485),i=n(3937);e.exports={moduleType:"component",name:"selections",layoutAttributes:n(8389),supplyLayoutDefaults:n(9402),supplyDrawNewSelectionDefaults:n(849),includeBasePlot:n(6325)("selections"),draw:r.draw,drawOne:r.drawOne,reselect:i.reselect,prepSelect:i.prepSelect,clearOutline:i.clearOutline,clearSelectionsCache:i.clearSelectionsCache,selectOnClick:i.selectOnClick}},3937:function(e,t,n){"use strict";var r=n(2142),i=n(8258),o=n(3972),a=n(1424).dashStyle,s=n(7901),l=n(211),c=n(3469).makeEventData,u=n(4505),d=u.freeMode,f=u.rectMode,p=u.drawMode,h=u.openMode,m=u.selectMode,g=n(477),v=n(1459),y=n(2359),b=n(1873).clearOutline,x=n(165),w=x.handleEllipse,_=x.readPaths,S=n(551),C=n(5855),k=n(2485).activateLastSelection,M=n(1828),T=M.sorterAsc,A=n(1082),E=n(9990),P=n(1675).getFromId,R=n(3306),O=n(1549).redrawReglTraces,I=n(4122),L=I.MINSELECT,D=A.filter,N=A.tester,F=n(5549),z=F.p2r,B=F.axValue,j=F.getTransform;function Z(e){return void 0!==e.subplot}function H(e,t,n,r,i,o,a){var s,l,c,u,d,f,p,m,g,v=t._hoverdata,b=t._fullLayout.clickmode.indexOf("event")>-1,x=[];if(function(e){return e&&Array.isArray(e)&&!0!==e[0].hoverOnBox}(v)){W(e,t,o);var w=function(e,t){var n,r,i=e[0],o=-1,a=[];for(r=0;r<t.length;r++)if(n=t[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?o=i.pointNumber:void 0!==i.binNumber&&(o=i.binNumber,a=i.pointNumbers);break}return{pointNumber:o,pointNumbers:a,searchInfo:n}}(v,s=Y(t,n,r,i));if(w.pointNumbers.length>0?function(e,t){var n,r,i,o=[];for(i=0;i<e.length;i++)(n=e[i]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&o.push(n);if(1===o.length&&o[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(i=0;i<t.pointNumbers.length;i++)if(r.selectedpoints.indexOf(t.pointNumbers[i])<0)return!1;return!0}return!1}(s,w):function(e){var t,n,r=0;for(n=0;n<e.length;n++)if((t=e[n].cd[0].trace).selectedpoints){if(t.selectedpoints.length>1)return!1;if((r+=t.selectedpoints.length)>1)return!1}return 1===r}(s)&&(f=K(w))){for(a&&a.remove(),g=0;g<s.length;g++)(l=s[g])._module.selectPoints(l,!1);J(t,s),$(o),b&&fe(t)}else{for(p=e.shiftKey&&(void 0!==f?f:K(w)),c=function(e,t,n){return{pointNumber:e,searchInfo:t,subtract:!!n}}(w.pointNumber,w.searchInfo,p),u=G(o.selectionDefs.concat([c])),g=0;g<s.length;g++)if(d=ee(s[g]._module.selectPoints(s[g],u),s[g]),x.length)for(var _=0;_<d.length;_++)x.push(d[_]);else x=d;if(J(t,s,m={points:x}),c&&o&&o.selectionDefs.push(c),a){var S=o.mergedPolygons,C=h(o.dragmode);y(te(S,C),a,o)}b&&de(t,m)}}}function U(e){return"pointNumber"in e&&"searchInfo"in e}function V(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,n,r,i){var o=e.searchInfo.cd[0].trace._expandedIndex;return i.cd[0].trace._expandedIndex===o&&r===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function G(e){if(e.length){for(var t=[],n=U(e[0])?0:e[0][0][0],r=n,i=U(e[0])?0:e[0][0][1],o=i,a=0;a<e.length;a++)if(U(e[a]))t.push(V(e[a]));else{var s=N(e[a]);s.subtract=!!e[a].subtract,t.push(s),n=Math.min(n,s.xmin),r=Math.max(r,s.xmax),i=Math.min(i,s.ymin),o=Math.max(o,s.ymax)}return{xmin:n,xmax:r,ymin:i,ymax:o,pts:[],contains:function(e,n,r,i){for(var o=!1,a=0;a<t.length;a++)t[a].contains(e,n,r,i)&&(o=!t[a].subtract);return o},isRect:!1,degenerate:!1}}}function W(e,t,n){var r=t._fullLayout,i=n.plotinfo,o=n.dragmode,a=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,s=(e.shiftKey||e.altKey)&&!(p(o)&&h(o));a&&s&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):s&&i.selection||$(n),a||(b(t),r._lastSelectedSubplot=i.id)}function $(e,t){var n=e.dragmode,r=e.plotinfo,i=e.gd;(function(e){return e._fullLayout._activeShapeIndex>=0})(i)&&i._fullLayout._deactivateShape(i),function(e){return e._fullLayout._activeSelectionIndex>=0}(i)&&i._fullLayout._deactivateSelection(i);var a=i._fullLayout._zoomlayer,s=p(n),l=m(n);if(s||l){var c,u,d=a.selectAll(".select-outline-"+r.id);d&&i._fullLayout._outlining&&(s&&(c=S(d,e)),c&&o.call("_guiRelayout",i,{shapes:c}),l&&!Z(e)&&(u=C(d,e)),u&&(i._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",i,{selections:u}).then((function(){t&&k(i)}))),i._fullLayout._outlining=!1)}r.selection={},r.selection.selectionDefs=e.selectionDefs=[],r.selection.mergedPolygons=e.mergedPolygons=[]}function q(e){return e._id}function Y(e,t,n,r){if(!e.calcdata)return[];var i,o,a,s=[],l=t.map(q),c=n.map(q);for(a=0;a<e.calcdata.length;a++)if(!0===(o=(i=e.calcdata[a])[0].trace).visible&&o._module&&o._module.selectPoints)if(!Z({subplot:r})||o.subplot!==r&&o.geo!==r)if("splom"===o.type){if(o._xaxes[l[0]]&&o._yaxes[c[0]]){var u=X(o._module,i,t[0],n[0]);u.scene=e._fullLayout._splomScenes[o.uid],s.push(u)}}else if("sankey"===o.type){var d=X(o._module,i,t[0],n[0]);s.push(d)}else{if(-1===l.indexOf(o.xaxis))continue;if(-1===c.indexOf(o.yaxis))continue;s.push(X(o._module,i,P(e,o.xaxis),P(e,o.yaxis)))}else s.push(X(o._module,i,t[0],n[0]));return s}function X(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}function K(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,r=e.pointNumbers,i=r.length>0?r[0]:n;return!!t.selectedpoints&&t.selectedpoints.indexOf(i)>-1}function J(e,t,n){var r,i;for(r=0;r<t.length;r++){var a=t[r].cd[0].trace._fullInput,s=e._fullLayout._tracePreGUI[a.uid]||{};void 0===s.selectedpoints&&(s.selectedpoints=a._input.selectedpoints||null)}if(n){var l=n.points||[];for(r=0;r<t.length;r++)(i=t[r].cd[0].trace)._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(var c=0;c<l.length;c++){var u=l[c],d=u.data,f=u.fullData,p=u.pointIndex,h=u.pointIndices;h?([].push.apply(d.selectedpoints,h),i._fullInput!==i&&[].push.apply(f.selectedpoints,h)):(d.selectedpoints.push(p),i._fullInput!==i&&f.selectedpoints.push(p))}}else for(r=0;r<t.length;r++)delete(i=t[r].cd[0].trace).selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;!function(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r],a=i.cd;o.traceIs(a[0].trace,"regl")&&(n=!0);var s=i._module,l=s.styleOnSelect||s.style;l&&(l(e,a,a[0].node3),a[0].nodeRangePlot3&&l(e,a,a[0].nodeRangePlot3))}n&&(R(e),O(e))}(e,t)}function Q(e,t,n){for(var i=(n?r.difference:r.union)({regions:e},{regions:[t]}).regions.reverse(),o=0;o<i.length;o++){var a=i[o];a.subtract=se(a,i.slice(0,o))}return i}function ee(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,i=0;i<e.length;i++)e[i]=c(e[i],r,n);return e}function te(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var i=0;i<e[r].length;i++){n[r][i]=[],n[r][i][0]=i?"L":"M";for(var o=0;o<e[r][i].length;o++)n[r][i].push(e[r][i][o])}t||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}function ne(e,t){for(var n,r,i=[],o=[],a=0;a<t.length;a++){var s=t[a];r=s._module.selectPoints(s,e),o.push(r),n=ee(r,s),i=i.concat(n)}return i}function re(e,t,n,r,i){var o,a,s,l=!!r;i&&(o=i.plotinfo,a=i.xaxes[0]._id,s=i.yaxes[0]._id);var c=[],u=[],d=ae(e),f=e._fullLayout;if(o){var h=f._zoomlayer,g=f.dragmode,v=p(g),y=m(g);if(v||y){var b=P(e,a,"x"),x=P(e,s,"y");if(b&&x){var w=h.selectAll(".select-outline-"+o.id);if(w&&e._fullLayout._outlining&&w.length){for(var S=w[0][0].getAttribute("d"),C=_(S,e,o),k=[],M=0;M<C.length;M++){for(var T=C[M],A=[],E=0;E<T.length;E++)A.push([le(b,T[E][1]),le(x,T[E][2])]);A.xref=a,A.yref=s,A.subtract=se(A,k),k.push(A)}d=d.concat(k)}}}}var R=a&&s?[a+s]:f._subplots.cartesian;!function(e){var t=e.calcdata;if(t)for(var n=0;n<t.length;n++){var r=t[n][0].trace,i=e._fullLayout._splomScenes;if(i){var o=i[r.uid];o&&(o.selectBatch=[])}}}(e);for(var O={},I=0;I<R.length;I++){var L=R[I],D=L.indexOf("y"),N=L.slice(0,D),F=L.slice(D),z=a&&s?n:void 0;if(z=oe(d,N,F,z)){var B=r;if(!l){var j=P(e,N,"x"),Z=P(e,F,"y");B=Y(e,[j],[Z],L);for(var H=0;H<B.length;H++){var U=B[H],V=U.cd[0],G=V.trace;if("scattergl"===U._module.name&&!V.t.xpx){var W=G.x,$=G.y,q=G._length;V.t.xpx=[],V.t.ypx=[];for(var X=0;X<q;X++)V.t.xpx[X]=j.c2p(W[X]),V.t.ypx[X]=Z.c2p($[X])}"splom"===U._module.name&&(O[G.uid]||(O[G.uid]=!0))}}var K=ne(z,B);c=c.concat(K),u=u.concat(B)}}var Q={points:c};J(e,u,Q);var ee=f.clickmode.indexOf("event")>-1&&t;if(!o&&t){var te=ae(e,!0);if(te.length){var re=te[0].xref,pe=te[0].yref;if(re&&pe){var he=ce(te);ue([P(e,re,"x"),P(e,pe,"y")])(Q,he)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:ee&&de(e,Q),f._reselect=!1}if(!o&&f._deselect){var me=f._deselect;(function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];if(i.xaxis&&i.xaxis._id===e&&i.yaxis&&i.yaxis._id===t)return!0}return!1})(a=me.xref,s=me.yref,u)||ie(e,a,s,r),ee&&(Q.points.length?de(e,Q):fe(e)),f._deselect=!1}return{eventData:Q,selectionTesters:n}}function ie(e,t,n,r){r=Y(e,[P(e,t,"x")],[P(e,n,"y")],t+n);for(var i=0;i<r.length;i++){var o=r[i];o._module.selectPoints(o,!1)}J(e,r)}function oe(e,t,n,r){for(var i,o=0;o<e.length;o++){var a=e[o];t===a.xref&&n===a.yref&&(i?r=G(i=Q(i,a,!!a.subtract)):(i=[a],r=N(a)))}return r}function ae(e,t){for(var n=[],r=e._fullLayout,i=r.selections,o=i.length,a=0;a<o;a++)if(!t||a===r._activeSelectionIndex){var s=i[a];if(s){var l,c,u,d,f,p=s.xref,h=s.yref,m=P(e,p,"x"),y=P(e,h,"y");if("rect"===s.type){f=[];var b=le(m,s.x0),x=le(m,s.x1),w=le(y,s.y0),_=le(y,s.y1);f=[[b,w],[b,_],[x,_],[x,w]],l=Math.min(b,x),c=Math.max(b,x),u=Math.min(w,_),d=Math.max(w,_),f.xmin=l,f.xmax=c,f.ymin=u,f.ymax=d,f.xref=p,f.yref=h,f.subtract=!1,f.isRect=!0,n.push(f)}else if("path"===s.type)for(var S=s.path.split("Z"),C=[],k=0;k<S.length;k++){var M=S[k];if(M){M+="Z";var T=g.extractPathCoords(M,v.paramIsX,"raw"),A=g.extractPathCoords(M,v.paramIsY,"raw");l=1/0,c=-1/0,u=1/0,d=-1/0,f=[];for(var E=0;E<T.length;E++){var R=le(m,T[E]),O=le(y,A[E]);f.push([R,O]),l=Math.min(R,l),c=Math.max(R,c),u=Math.min(O,u),d=Math.max(O,d)}f.xmin=l,f.xmax=c,f.ymin=u,f.ymax=d,f.xref=p,f.yref=h,f.subtract=se(f,C),C.push(f),n.push(f)}}}}return n}function se(e,t){for(var n=!1,r=0;r<t.length;r++)for(var o=t[r],a=0;a<e.length;a++)if(i(e[a],o)){n=!n;break}return n}function le(e,t){return"date"===e.type&&(t=t.replace("_"," ")),"log"===e.type?e.c2p(t):e.r2p(t,null,e.calendar)}function ce(e){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];n=(n=n.concat(i)).concat([i[0]])}return(o=n).isRect=5===o.length&&o[0][0]===o[4][0]&&o[0][1]===o[4][1]&&o[0][0]===o[1][0]&&o[2][0]===o[3][0]&&o[0][1]===o[3][1]&&o[1][1]===o[2][1]||o[0][1]===o[1][1]&&o[2][1]===o[3][1]&&o[0][0]===o[3][0]&&o[1][0]===o[2][0],o.isRect&&(o.xmin=Math.min(o[0][0],o[2][0]),o.xmax=Math.max(o[0][0],o[2][0]),o.ymin=Math.min(o[0][1],o[2][1]),o.ymax=Math.max(o[0][1],o[2][1])),o;var o}function ue(e){return function(t,n){for(var r,i,o=0;o<e.length;o++){var a=e[o],s=a._id,l=s.charAt(0);if(n.isRect){r||(r={});var c=n[l+"min"],u=n[l+"max"];void 0!==c&&void 0!==u&&(r[s]=[z(a,c),z(a,u)].sort(T))}else i||(i={}),i[s]=n.map(B(a))}r&&(t.range=r),i&&(t.lassoPoints=i)}}function de(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function fe(e){e.emit("plotly_deselect",null)}e.exports={reselect:re,prepSelect:function(e,t,n,r,i){var c=!Z(r),u=d(i),g=f(i),v=h(i),b=p(i),x=m(i),_="drawcircle"===i,S="drawline"===i||_,C=r.gd,k=C._fullLayout,T=x&&"immediate"===k.newselection.mode&&c,A=k._zoomlayer,P=r.element.getBoundingClientRect(),R=r.plotinfo,O=j(R),F=t-P.left,z=n-P.top;k._calcInverseTransform(C);var B=M.apply3DTransform(k._invTransform)(F,z);F=B[0],z=B[1];var U,V,q,X,K,ee,oe,ae=k._invScaleX,se=k._invScaleY,le=F,pe=z,he="M"+F+","+z,me=r.xaxes[0],ge=r.yaxes[0],ve=me._length,ye=ge._length,be=e.altKey&&!(p(i)&&v);W(e,C,r),u&&(U=D([[F,z]],I.BENDPX));var xe=A.selectAll("path.select-outline-"+R.id).data([1]),we=b?k.newshape:k.newselection,_e=b&&!v?we.fillcolor:"rgba(0,0,0,0)",Se=we.line.color||(c?s.contrast(C._fullLayout.plot_bgcolor):"#7f7f7f");xe.enter().append("path").attr("class","select-outline select-outline-"+R.id).style({opacity:b?we.opacity/2:1,"stroke-dasharray":a(we.line.dash,we.line.width),"stroke-width":we.line.width+"px","shape-rendering":"crispEdges"}).call(s.stroke,Se).call(s.fill,_e).attr("fill-rule","evenodd").classed("cursor-move",!!b).attr("transform",O).attr("d",he+"Z");var Ce=A.append("path").attr("class","zoombox-corners").style({fill:s.background,stroke:s.defaultLine,"stroke-width":1}).attr("transform",O).attr("d","M0,0Z"),ke=k._uid+I.SELECTID,Me=[],Te=Y(C,r.xaxes,r.yaxes,r.subplot);T&&!e.shiftKey&&(r._clearSubplotSelections=function(){if(c){var e=me._id,t=ge._id;ie(C,e,t,Te);for(var n=(C.layout||{}).selections||[],r=[],i=!1,a=0;a<n.length;a++){var s=k.selections[a];s.xref!==e||s.yref!==t?r.push(n[a]):i=!0}i&&(C._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",C,{selections:r}))}});var Ae=function(e){return e.plotinfo.fillRangeItems||ue(e.xaxes.concat(e.yaxes))}(r);r.moveFn=function(e,t){r._clearSubplotSelections&&(r._clearSubplotSelections(),r._clearSubplotSelections=void 0),le=Math.max(0,Math.min(ve,ae*e+F)),pe=Math.max(0,Math.min(ye,se*t+z));var n=Math.abs(le-F),i=Math.abs(pe-z);if(g){var o,a,s;if(x){var l=k.selectdirection;switch(o="any"===l?i<Math.min(.6*n,L)?"h":n<Math.min(.6*i,L)?"v":"d":l){case"h":a=_?ye/2:0,s=ye;break;case"v":a=_?ve/2:0,s=ve}}if(b)switch(k.newshape.drawdirection){case"vertical":o="h",a=_?ye/2:0,s=ye;break;case"horizontal":o="v",a=_?ve/2:0,s=ve;break;case"ortho":n<i?(o="h",a=z,s=pe):(o="v",a=F,s=le);break;default:o="d"}"h"===o?((X=S?w(_,[le,a],[le,s]):[[F,a],[F,s],[le,s],[le,a]]).xmin=S?le:Math.min(F,le),X.xmax=S?le:Math.max(F,le),X.ymin=Math.min(a,s),X.ymax=Math.max(a,s),Ce.attr("d","M"+X.xmin+","+(z-L)+"h-4v"+2*L+"h4ZM"+(X.xmax-1)+","+(z-L)+"h4v"+2*L+"h-4Z")):"v"===o?((X=S?w(_,[a,pe],[s,pe]):[[a,z],[a,pe],[s,pe],[s,z]]).xmin=Math.min(a,s),X.xmax=Math.max(a,s),X.ymin=S?pe:Math.min(z,pe),X.ymax=S?pe:Math.max(z,pe),Ce.attr("d","M"+(F-L)+","+X.ymin+"v-4h"+2*L+"v4ZM"+(F-L)+","+(X.ymax-1)+"v4h"+2*L+"v-4Z")):"d"===o&&((X=S?w(_,[F,z],[le,pe]):[[F,z],[F,pe],[le,pe],[le,z]]).xmin=Math.min(F,le),X.xmax=Math.max(F,le),X.ymin=Math.min(z,pe),X.ymax=Math.max(z,pe),Ce.attr("d","M0,0Z"))}else u&&(U.addPt([le,pe]),X=U.filtered);if(r.selectionDefs&&r.selectionDefs.length?(q=Q(r.mergedPolygons,X,be),X.subtract=be,V=G(r.selectionDefs.concat([X]))):(q=[X],V=N(X)),y(te(q,v),xe,r),x){var c,d=re(C,!1),f=d.eventData?d.eventData.points.slice():[];d=re(C,!1,V,Te,r),V=d.selectionTesters,oe=d.eventData,c=U?U.filtered:ce(q),E.throttle(ke,I.SELECTDELAY,(function(){for(var e=(Me=ne(V,Te)).slice(),t=0;t<f.length;t++){for(var n=f[t],r=!1,i=0;i<e.length;i++)if(e[i].curveNumber===n.curveNumber&&e[i].pointNumber===n.pointNumber){r=!0;break}r||e.push(n)}e.length&&(oe||(oe={}),oe.points=e),Ae(oe,c),function(e,t){e.emit("plotly_selecting",t)}(C,oe)}))}},r.clickFn=function(e,t){if(Ce.remove(),C._fullLayout._activeShapeIndex>=0)C._fullLayout._deactivateShape(C);else if(!b){var n=k.clickmode;E.done(ke).then((function(){if(E.clear(ke),2===e){for(xe.remove(),K=0;K<Te.length;K++)(ee=Te[K])._module.selectPoints(ee,!1);if(J(C,Te),$(r),fe(C),Te.length){var i=Te[0].xaxis,a=Te[0].yaxis;if(i&&a){for(var s=[],c=C._fullLayout.selections,u=0;u<c.length;u++){var d=c[u];d&&(d.xref===i._id&&d.yref===a._id||s.push(d))}s.length<c.length&&(C._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",C,{selections:s}))}}}else n.indexOf("select")>-1&&H(t,C,r.xaxes,r.yaxes,r.subplot,r,xe),"event"===n&&de(C,void 0);l.click(C,t)})).catch(M.error)}},r.doneFn=function(){Ce.remove(),E.done(ke).then((function(){E.clear(ke),!T&&X&&r.selectionDefs&&(X.subtract=be,r.selectionDefs.push(X),r.mergedPolygons.length=0,[].push.apply(r.mergedPolygons,q)),(T||b)&&$(r,T),r.doneFnCompleted&&r.doneFnCompleted(Me),x&&de(C,oe)})).catch(M.error)}},clearOutline:b,clearSelectionsCache:$,selectOnClick:H}},9827:function(e,t,n){"use strict";var r=n(215),i=n(2196).line,o=n(9952).P,a=n(1426).extendFlat,s=n(4467).templatedArray;n(4695),e.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:a({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:a({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:a({},i.color,{editType:"arraydraw"}),width:a({},i.width,{editType:"calc+arraydraw"}),dash:a({},o,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},5627:function(e,t,n){"use strict";var r=n(1828),i=n(9298),o=n(1459),a=n(477);function s(e){return c(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function l(e){return c(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function c(e,t,n,i,s,l){var c=e/2,u=l;if("pixel"===t){var d=s?a.extractPathCoords(s,l?o.paramIsY:o.paramIsX):[n,i],f=r.aggNums(Math.max,null,d),p=r.aggNums(Math.min,null,d),h=p<0?Math.abs(p)+c:c,m=f>0?f+c:c;return{ppad:c,ppadplus:u?h:m,ppadminus:u?m:h}}return{ppad:c}}function u(e,t,n,r,i){var s="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[s(t),s(n)];if(r){var l,c,u,d,f=1/0,p=-1/0,h=r.match(o.segmentRE);for("date"===e.type&&(s=a.decodeDate(s)),l=0;l<h.length;l++)void 0!==(c=i[h[l].charAt(0)].drawn)&&(!(u=h[l].substr(1).match(o.paramRE))||u.length<c||((d=s(u[c]))<f&&(f=d),d>p&&(p=d)));return p>=f?[f,p]:void 0}}e.exports=function(e){var t=e._fullLayout,n=r.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var a=0;a<n.length;a++){var c,d,f=n[a];f._extremes={};var p=i.getRefType(f.xref),h=i.getRefType(f.yref);if("paper"!==f.xref&&"domain"!==p){var m="pixel"===f.xsizemode?f.xanchor:f.x0,g="pixel"===f.xsizemode?f.xanchor:f.x1;(d=u(c=i.getFromId(e,f.xref),m,g,f.path,o.paramIsX))&&(f._extremes[c._id]=i.findExtremes(c,d,s(f)))}if("paper"!==f.yref&&"domain"!==h){var v="pixel"===f.ysizemode?f.yanchor:f.y0,y="pixel"===f.ysizemode?f.yanchor:f.y1;(d=u(c=i.getFromId(e,f.yref),v,y,f.path,o.paramIsY))&&(f._extremes[c._id]=i.findExtremes(c,d,l(f)))}}}},1459:function(e){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},4726:function(e,t,n){"use strict";var r=n(1828),i=n(9298),o=n(5501),a=n(9827),s=n(477);function l(e,t,n){function o(n,i){return r.coerce(e,t,a,n,i)}if(o("visible")){var l=o("path"),c="path"!==o("type",l?"path":"rect");c&&delete t.path,o("editable"),o("layer"),o("opacity"),o("fillcolor"),o("fillrule"),o("line.width")&&(o("line.color"),o("line.dash"));for(var u=o("xsizemode"),d=o("ysizemode"),f=["x","y"],p=0;p<2;p++){var h,m,g,v=f[p],y=v+"anchor",b="x"===v?u:d,x={_fullLayout:n},w=i.coerceRef(e,t,x,v,void 0,"paper");if("range"===i.getRefType(w)?((h=i.getFromId(x,w))._shapeIndices.push(t._index),g=s.rangeToShapePosition(h),m=s.shapePositionToRange(h)):m=g=r.identity,c){var _=v+"0",S=v+"1",C=e[_],k=e[S];e[_]=m(e[_],!0),e[S]=m(e[S],!0),"pixel"===b?(o(_,0),o(S,10)):(i.coercePosition(t,x,o,w,_,.25),i.coercePosition(t,x,o,w,S,.75)),t[_]=g(t[_]),t[S]=g(t[S]),e[_]=C,e[S]=k}if("pixel"===b){var M=e[y];e[y]=m(e[y],!0),i.coercePosition(t,x,o,w,y,.25),t[y]=g(t[y]),e[y]=M}}c&&r.noneOrAll(e,t,["x0","x1","y0","y1"])}}e.exports=function(e,t){o(e,t,{name:"shapes",handleItemDefaults:l})}},2359:function(e,t,n){"use strict";var r=n(1828).strTranslate,i=n(8569),o=n(4505),a=o.drawMode,s=o.selectMode,l=n(3972),c=n(7901),u=n(9995),d=u.i000,f=u.i090,p=u.i180,h=u.i270,m=n(1873).clearOutlineControllers,g=n(165),v=g.pointsOnRectangle,y=g.pointsOnEllipse,b=g.writePaths,x=n(551),w=n(5855);function _(e,t){var n,r,i,o=e[t][1],a=e[t][2],s=e.length;return r=e[n=(t+1)%s][1],i=e[n][2],r===o&&i===a&&(r=e[n=(t+2)%s][1],i=e[n][2]),[n,r,i]}e.exports=function e(t,n,o,u){u||(u=0);var g=o.gd;function S(){e(t,n,o,u++),y(t[0])&&C({redrawing:!0})}function C(e){var t={};void 0!==o.isActiveShape&&(o.isActiveShape=!1,t=x(n,o)),void 0!==o.isActiveSelection&&(o.isActiveSelection=!1,t=w(n,o),g._fullLayout._reselect=!0),Object.keys(t).length&&l.call((e||{}).redrawing?"relayout":"_guiRelayout",g,t)}var k,M,T,A,E,P=g._fullLayout._zoomlayer,R=o.dragmode,O=a(R),I=s(R);function L(e){T=+e.srcElement.getAttribute("data-i"),A=+e.srcElement.getAttribute("data-j"),k[T][A].moveFn=D}function D(e,n){if(t.length){var r=E[T][A][1],i=E[T][A][2],a=t[T],s=a.length;if(v(a)){var l=e,c=n;o.isActiveSelection&&(_(a,A)[1]===a[A][1]?c=0:l=0);for(var u=0;u<s;u++)if(u!==A){var d=a[u];d[1]===a[A][1]&&(d[1]=r+l),d[2]===a[A][2]&&(d[2]=i+c)}if(a[A][1]=r+l,a[A][2]=i+c,!v(a))for(var f=0;f<s;f++)for(var p=0;p<a[f].length;p++)a[f][p]=E[T][f][p]}else a[A][1]=r+e,a[A][2]=i+n;S()}}function N(){C()}function F(e,n){if(2===e){T=+n.srcElement.getAttribute("data-i"),A=+n.srcElement.getAttribute("data-j");var r=t[T];v(r)||y(r)||function(){if(t.length&&t[T]&&t[T].length){for(var e=[],n=0;n<t[T].length;n++)n!==A&&e.push(t[T][n]);e.length>1&&(2!==e.length||"Z"!==e[1][0])&&(0===A&&(e[0][0]="M"),t[T]=e,S(),C())}}()}}function z(e,n){!function(e,n){if(t.length)for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)for(var o=0;o+2<t[r][i].length;o+=2)t[r][i][o+1]=E[r][i][o+1]+e,t[r][i][o+2]=E[r][i][o+2]+n}(e,n),S()}function B(e){(T=+e.srcElement.getAttribute("data-i"))||(T=0),M[T].moveFn=z}function j(){C()}function Z(e){2===e&&function(e){if(s(e._fullLayout.dragmode)){m(e);var t=e._fullLayout._activeSelectionIndex,n=(e.layout||{}).selections||[];if(t<n.length){for(var r=[],i=0;i<n.length;i++)i!==t&&r.push(n[i]);delete e._fullLayout._activeSelectionIndex;var o=e._fullLayout.selections[t];e._fullLayout._deselect={xref:o.xref,yref:o.yref},l.call("_guiRelayout",e,{selections:r})}}}(g)}(O||I)&&(g._fullLayout._outlining=!0),m(g),n.attr("d",b(t)),u||!o.isActiveShape&&!o.isActiveSelection||(E=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[n]=[];for(var i=0;i<r.length;i++){e[n][i]=[];for(var o=0;o<r[i].length;o++)e[n][i][o]=r[i][o]}}return e}([],t),function(e){k=[];for(var n=0;n<t.length;n++){var a=t[n],s=v(a),l=!s&&y(a);k[n]=[];for(var u=a.length,m=0;m<u;m++)if("Z"!==a[m][0]&&(!l||m===d||m===f||m===p||m===h)){var b,x=s&&o.isActiveSelection;x&&(b=_(a,m));var w=a[m][1],S=a[m][2],C=e.append(x?"rect":"circle").attr("data-i",n).attr("data-j",m).style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(x){var M=b[1]-w,T=b[2]-S,A=T?5:Math.max(Math.min(25,Math.abs(M)-5),5),E=M?5:Math.max(Math.min(25,Math.abs(T)-5),5);C.classed(T?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",A).attr("height",E).attr("x",w-A/2).attr("y",S-E/2).attr("transform",r(M/2,T/2))}else C.classed("cursor-grab",!0).attr("r",5).attr("cx",w).attr("cy",S);k[n][m]={element:C.node(),gd:g,prepFn:L,doneFn:N,clickFn:F},i.init(k[n][m])}}}(P.append("g").attr("class","outline-controllers")),M=[],t.length&&(M[0]={element:n[0][0],gd:g,prepFn:B,doneFn:j,clickFn:Z},i.init(M[0])))}},4031:function(e,t,n){"use strict";var r=n(3972),i=n(1828),o=n(9298),a=n(165).readPaths,s=n(2359),l=n(1873).clearOutlineControllers,c=n(7901),u=n(1424),d=n(4467).arrayEditor,f=n(8569),p=n(6964),h=n(1459),m=n(477),g=m.getPathString;function v(e){var t=e._fullLayout;for(var n in t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._plots){var r=t._plots[n].shapelayer;r&&r.selectAll("path").remove()}for(var i=0;i<t.shapes.length;i++)t.shapes[i].visible&&x(e,i)}function y(e){return!!e._fullLayout._outlining}function b(e){return!e._context.edits.shapePosition}function x(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var n=m.makeShapesOptionsAndPlotinfo(e,t),l=n.options,x=n.plotinfo;function C(n){var C=g(e,l),k={"data-index":t,"fill-rule":l.fillrule,d:C},M=l.opacity,T=l.fillcolor,A=l.line.width?l.line.color:"rgba(0,0,0,0)",E=l.line.width,P=l.line.dash;E||!0!==l.editable||(E=5,P="solid");var R="Z"!==C[C.length-1],O=b(e)&&l.editable&&e._fullLayout._activeShapeIndex===t;O&&(T=R?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,M=e._fullLayout.activeshape.opacity);var I,L=n.append("path").attr(k).style("opacity",M).call(c.stroke,A).call(c.fill,T).call(u.dashLine,P,E);if(w(L,e,l),(O||e._context.edits.shapePosition)&&(I=d(e.layout,"shapes",l)),O){L.style({cursor:"move"});var D={element:L.node(),plotinfo:x,gd:e,editHelpers:I,isActiveShape:!0},N=a(C,e);s(N,L,D)}else e._context.edits.shapePosition?function(e,t,n,a,s,l){var c,d,v,b,x,S,C,k,M,T,A,E,P,R,O,I,L="pixel"===n.xsizemode,D="pixel"===n.ysizemode,N="line"===n.type,F="path"===n.type,z=l.modifyItem,B=o.getFromId(e,n.xref),j=o.getRefType(n.xref),Z=o.getFromId(e,n.yref),H=o.getRefType(n.yref),U=m.getDataToPixel(e,B,!1,j),V=m.getDataToPixel(e,Z,!0,H),G=m.getPixelToData(e,B,!1,j),W=m.getPixelToData(e,Z,!0,H),$=N?function(){var e=10,r=Math.max(n.line.width,e),i=s.append("g").attr("data-index",a);i.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":r,"stroke-opacity":"0"});var o={"fill-opacity":"0"},l=Math.max(r/2,e);return i.append("circle").attr({"data-line-point":"start-point",cx:L?U(n.xanchor)+n.x0:U(n.x0),cy:D?V(n.yanchor)-n.y0:V(n.y0),r:l}).style(o).classed("cursor-grab",!0),i.append("circle").attr({"data-line-point":"end-point",cx:L?U(n.xanchor)+n.x1:U(n.x1),cy:D?V(n.yanchor)-n.y1:V(n.y1),r:l}).style(o).classed("cursor-grab",!0),i}():t,q={element:$.node(),gd:e,prepFn:function(r){y(e)||(L&&(x=U(n.xanchor)),D&&(S=V(n.yanchor)),"path"===n.type?O=n.path:(c=L?n.x0:U(n.x0),d=D?n.y0:V(n.y0),v=L?n.x1:U(n.x1),b=D?n.y1:V(n.y1)),c<v?(M=c,P="x0",T=v,R="x1"):(M=v,P="x1",T=c,R="x0"),!D&&d<b||D&&d>b?(C=d,A="y0",k=b,E="y1"):(C=b,A="y1",k=d,E="y0"),Y(r),J(s,n),function(e,t,n){var r=t.xref,i=t.yref,a=o.getFromId(n,r),s=o.getFromId(n,i),l="";"paper"===r||a.autorange||(l+=r),"paper"===i||s.autorange||(l+=i),u.setClipUrl(e,l?"clip"+n._fullLayout._uid+l:null,n)}(t,n,e),q.moveFn="move"===I?X:K,q.altKey=r.altKey)},doneFn:function(){y(e)||(p(t),Q(s),w(t,e,n),r.call("_guiRelayout",e,l.getUpdateObj()))},clickFn:function(){y(e)||Q(s)}};function Y(n){if(y(e))I=null;else if(N)I="path"===n.target.tagName?"move":"start-point"===n.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var r=q.element.getBoundingClientRect(),i=r.right-r.left,o=r.bottom-r.top,a=n.clientX-r.left,s=n.clientY-r.top,l=!F&&i>10&&o>10&&!n.shiftKey?f.getCursor(a/i,1-s/o):"move";p(t,l),I=l.split("-")[0]}}function X(r,i){if("path"===n.type){var o=function(e){return e},a=o,l=o;L?z("xanchor",n.xanchor=G(x+r)):(a=function(e){return G(U(e)+r)},B&&"date"===B.type&&(a=m.encodeDate(a))),D?z("yanchor",n.yanchor=W(S+i)):(l=function(e){return W(V(e)+i)},Z&&"date"===Z.type&&(l=m.encodeDate(l))),z("path",n.path=_(O,a,l))}else L?z("xanchor",n.xanchor=G(x+r)):(z("x0",n.x0=G(c+r)),z("x1",n.x1=G(v+r))),D?z("yanchor",n.yanchor=W(S+i)):(z("y0",n.y0=W(d+i)),z("y1",n.y1=W(b+i)));t.attr("d",g(e,n)),J(s,n)}function K(r,i){if(F){var o=function(e){return e},a=o,l=o;L?z("xanchor",n.xanchor=G(x+r)):(a=function(e){return G(U(e)+r)},B&&"date"===B.type&&(a=m.encodeDate(a))),D?z("yanchor",n.yanchor=W(S+i)):(l=function(e){return W(V(e)+i)},Z&&"date"===Z.type&&(l=m.encodeDate(l))),z("path",n.path=_(O,a,l))}else if(N){if("resize-over-start-point"===I){var u=c+r,f=D?d-i:d+i;z("x0",n.x0=L?u:G(u)),z("y0",n.y0=D?f:W(f))}else if("resize-over-end-point"===I){var p=v+r,h=D?b-i:b+i;z("x1",n.x1=L?p:G(p)),z("y1",n.y1=D?h:W(h))}}else{var y=function(e){return-1!==I.indexOf(e)},w=y("n"),j=y("s"),H=y("w"),$=y("e"),q=w?C+i:C,Y=j?k+i:k,X=H?M+r:M,K=$?T+r:T;D&&(w&&(q=C-i),j&&(Y=k-i)),(!D&&Y-q>10||D&&q-Y>10)&&(z(A,n[A]=D?q:W(q)),z(E,n[E]=D?Y:W(Y))),K-X>10&&(z(P,n[P]=L?X:G(X)),z(R,n[R]=L?K:G(K)))}t.attr("d",g(e,n)),J(s,n)}function J(e,t){(L||D)&&function(){var n="path"!==t.type,r=e.selectAll(".visual-cue").data([0]);r.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var o=U(L?t.xanchor:i.midRange(n?[t.x0,t.x1]:m.extractPathCoords(t.path,h.paramIsX))),a=V(D?t.yanchor:i.midRange(n?[t.y0,t.y1]:m.extractPathCoords(t.path,h.paramIsY)));if(o=m.roundPositionForSharpStrokeRendering(o,1),a=m.roundPositionForSharpStrokeRendering(a,1),L&&D){var s="M"+(o-1-1)+","+(a-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";r.attr("d",s)}else if(L){var l="M"+(o-1-1)+","+(a-9-1)+"v18 h2 v-18 Z";r.attr("d",l)}else{var c="M"+(o-9-1)+","+(a-1-1)+"h18 v2 h-18 Z";r.attr("d",c)}}()}function Q(e){e.selectAll(".visual-cue").remove()}f.init(q),$.node().onmousemove=Y}(e,L,l,t,n,I):!0===l.editable&&L.style("pointer-events",R||c.opacity(T)*M<=.5?"stroke":"all");L.node().addEventListener("click",(function(){return function(e,t){if(b(e)){var n=+t.node().getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeShapeIndex)return void S(e);e._fullLayout._activeShapeIndex=n,e._fullLayout._deactivateShape=S,v(e)}}}(e,L)}))}l._input&&!1!==l.visible&&("below"!==l.layer?C(e._fullLayout._shapeUpperLayer):"paper"===l.xref||"paper"===l.yref?C(e._fullLayout._shapeLowerLayer):x._hadPlotinfo?C((x.mainplotinfo||x).shapelayer):C(e._fullLayout._shapeLowerLayer))}function w(e,t,n){var r=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");u.setClipUrl(e,r?"clip"+t._fullLayout._uid+r:null,t)}function _(e,t,n){return e.replace(h.segmentRE,(function(e){var r=0,i=e.charAt(0),o=h.paramIsX[i],a=h.paramIsY[i],s=h.numParams[i];return i+e.substr(1).replace(h.paramRE,(function(e){return r>=s||(o[r]?e=t(e):a[r]&&(e=n(e)),r++),e}))}))}function S(e){b(e)&&e._fullLayout._activeShapeIndex>=0&&(l(e),delete e._fullLayout._activeShapeIndex,v(e))}e.exports={draw:v,drawOne:x,eraseActiveShape:function(e){if(b(e)){l(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var i=[],o=0;o<n.length;o++)o!==t&&i.push(n[o]);delete e._fullLayout._activeShapeIndex,r.call("_guiRelayout",e,{shapes:i})}}}}},9241:function(e,t,n){"use strict";var r=n(9952).P,i=n(1426).extendFlat;e.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:i({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},9995:function(e){"use strict";e.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},5547:function(e,t,n){"use strict";var r=n(7901);e.exports=function(e,t,n){if(n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")){var i=(e||{}).plot_bgcolor||"#FFF";n("newshape.line.color",r.contrast(i)),n("newshape.line.dash")}n("activeshape.fillcolor"),n("activeshape.opacity")}},165:function(e,t,n){"use strict";var r=n(5616),i=n(9995),o=i.CIRCLE_SIDES,a=i.SQRT2,s=n(5549),l=s.p2r,c=s.r2p,u=[0,3,4,5,6,1,2],d=[0,3,4,1,2];function f(e,t){return Math.abs(e-t)<=1e-6}function p(e,t){var n=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+r*r)}t.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",r=0;r<t;r++)for(var i=e[r].length,o=0;o<i;o++){var a=e[r][o][0];if("Z"===a)n+="Z";else for(var s=e[r][o].length,l=0;l<s;l++){var c=l;"Q"===a||"S"===a?c=d[l]:"C"===a&&(c=u[l]),n+=e[r][o][c],l>0&&l<s-1&&(n+=",")}}return n},t.readPaths=function(e,t,n,i){var a,s,u,d=r(e),f=[],p=-1,h=0,m=0,g=function(){s=h,u=m};g();for(var v=0;v<d.length;v++){var y,b,x,w,_=[],S=d[v][0],C=S;switch(S){case"M":f[++p]=[],h=+d[v][1],m=+d[v][2],_.push([C,h,m]),g();break;case"Q":case"S":y=+d[v][1],x=+d[v][2],h=+d[v][3],m=+d[v][4],_.push([C,h,m,y,x]);break;case"C":y=+d[v][1],x=+d[v][2],b=+d[v][3],w=+d[v][4],h=+d[v][5],m=+d[v][6],_.push([C,h,m,y,x,b,w]);break;case"T":case"L":h=+d[v][1],m=+d[v][2],_.push([C,h,m]);break;case"H":C="L",h=+d[v][1],_.push([C,h,m]);break;case"V":C="L",m=+d[v][1],_.push([C,h,m]);break;case"A":C="L";var k=+d[v][1],M=+d[v][2];+d[v][4]||(k=-k,M=-M);var T=h-k,A=m;for(a=1;a<=o/2;a++){var E=2*Math.PI*a/o;_.push([C,T+k*Math.cos(E),A+M*Math.sin(E)])}break;case"Z":h===s&&m===u||(h=s,m=u,_.push([C,h,m]))}for(var P=(n||{}).domain,R=t._fullLayout._size,O=n&&"pixel"===n.xsizemode,I=n&&"pixel"===n.ysizemode,L=!1===i,D=0;D<_.length;D++){for(a=0;a+2<7;a+=2){var N=_[D][a+1],F=_[D][a+2];void 0!==N&&void 0!==F&&(h=N,m=F,n&&(n.xaxis&&n.xaxis.p2r?(L&&(N-=n.xaxis._offset),N=O?c(n.xaxis,n.xanchor)+N:l(n.xaxis,N)):(L&&(N-=R.l),P?N=P.x[0]+N/R.w:N/=R.w),n.yaxis&&n.yaxis.p2r?(L&&(F-=n.yaxis._offset),F=I?c(n.yaxis,n.yanchor)-F:l(n.yaxis,F)):(L&&(F-=R.t),F=P?P.y[1]-F/R.h:1-F/R.h)),_[D][a+1]=N,_[D][a+2]=F)}f[p].push(_[D].slice())}}return f},t.pointsOnRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!f(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!f(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!f(e[0][1],e[1][1])&&!f(e[0][1],e[3][1])||!(p(e[0],e[1])*p(e[0],e[3])))},t.pointsOnEllipse=function(e){var t=e.length;if(t!==o+1)return!1;t=o;for(var n=0;n<t;n++){var r=(2*t-n)%t,i=(t/2+r)%t,a=(t/2+n)%t;if(!f(p(e[n],e[a]),p(e[r],e[i])))return!1}return!0},t.handleEllipse=function(e,n,r){if(!e)return[n,r];var i=t.ellipseOver({x0:n[0],y0:n[1],x1:r[0],y1:r[1]}),s=(i.x1+i.x0)/2,l=(i.y1+i.y0)/2,c=(i.x1-i.x0)/2,u=(i.y1-i.y0)/2;c||(c=u/=a),u||(u=c/=a);for(var d=[],f=0;f<o;f++){var p=2*f*Math.PI/o;d.push([s+c*Math.cos(p),l+u*Math.sin(p)])}return d},t.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,i=e.y1,o=r-t,s=i-n,l=((t-=o)+r)/2,c=((n-=s)+i)/2;return{x0:l-(o*=a),y0:c-(s*=a),x1:l+o,y1:c+s}},t.fixDatesForPaths=function(e,t,n){var r="date"===t.type,i="date"===n.type;if(!r&&!i)return e;for(var o=0;o<e.length;o++)for(var a=0;a<e[o].length;a++)for(var s=0;s+2<e[o][a].length;s+=2)r&&(e[o][a][s+1]=e[o][a][s+1].replace(" ","_")),i&&(e[o][a][s+2]=e[o][a][s+2].replace(" ","_"));return e}},551:function(e,t,n){"use strict";var r=n(4505),i=r.drawMode,o=r.openMode,a=n(9995),s=a.i000,l=a.i090,c=a.i180,u=a.i270,d=a.cos45,f=a.sin45,p=n(5549),h=p.p2r,m=p.r2p,g=n(1873).clearOutline,v=n(165),y=v.readPaths,b=v.writePaths,x=v.ellipseOver,w=v.fixDatesForPaths;e.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var r=n.getAttribute("d"),a=t.gd,p=a._fullLayout.newshape,v=t.plotinfo,_=v.xaxis,S=v.yaxis,C=!!v.domain||!v.xaxis,k=!!v.domain||!v.yaxis,M=t.isActiveShape,T=t.dragmode,A=(a.layout||{}).shapes||[];if(!i(T)&&void 0!==M){var E=a._fullLayout._activeShapeIndex;if(E<A.length)switch(a._fullLayout.shapes[E].type){case"rect":T="drawrect";break;case"circle":T="drawcircle";break;case"line":T="drawline";break;case"path":var P=A[E].path||"";T="Z"===P[P.length-1]?"drawclosedpath":"drawopenpath"}}var R,O=o(T),I=y(r,a,v,M),L={editable:!0,xref:C?"paper":_._id,yref:k?"paper":S._id,layer:p.layer,opacity:p.opacity,line:{color:p.line.color,width:p.line.width,dash:p.line.dash}};if(O||(L.fillcolor=p.fillcolor,L.fillrule=p.fillrule),1===I.length&&(R=I[0]),R&&5===R.length&&"drawrect"===T)L.type="rect",L.x0=R[0][1],L.y0=R[0][2],L.x1=R[2][1],L.y1=R[2][2];else if(R&&"drawline"===T)L.type="line",L.x0=R[0][1],L.y0=R[0][2],L.x1=R[1][1],L.y1=R[1][2];else if(R&&"drawcircle"===T){L.type="circle";var D=R[s][1],N=R[l][1],F=R[c][1],z=R[u][1],B=R[s][2],j=R[l][2],Z=R[c][2],H=R[u][2],U=v.xaxis&&("date"===v.xaxis.type||"log"===v.xaxis.type),V=v.yaxis&&("date"===v.yaxis.type||"log"===v.yaxis.type);U&&(D=m(v.xaxis,D),N=m(v.xaxis,N),F=m(v.xaxis,F),z=m(v.xaxis,z)),V&&(B=m(v.yaxis,B),j=m(v.yaxis,j),Z=m(v.yaxis,Z),H=m(v.yaxis,H));var G=(N+z)/2,W=(B+Z)/2,$=x({x0:G,y0:W,x1:G+(z-N+F-D)/2*d,y1:W+(H-j+Z-B)/2*f});U&&($.x0=h(v.xaxis,$.x0),$.x1=h(v.xaxis,$.x1)),V&&($.y0=h(v.yaxis,$.y0),$.y1=h(v.yaxis,$.y1)),L.x0=$.x0,L.y0=$.y0,L.x1=$.x1,L.y1=$.y1}else L.type="path",_&&S&&w(I,_,S),L.path=b(I),R=null;g(a);for(var q=t.editHelpers,Y=(q||{}).modifyItem,X=[],K=0;K<A.length;K++){var J=a._fullLayout.shapes[K];if(X[K]=J._input,void 0!==M&&K===a._fullLayout._activeShapeIndex){var Q=L;switch(J.type){case"line":case"rect":case"circle":Y("x0",Q.x0),Y("x1",Q.x1),Y("y0",Q.y0),Y("y1",Q.y1);break;case"path":Y("path",Q.path)}}}return void 0===M?(X.push(L),X):q?q.getUpdateObj():{}}}}},1873:function(e){"use strict";e.exports={clearOutlineControllers:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()},clearOutline:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}}},477:function(e,t,n){"use strict";var r=n(1459),i=n(1828),o=n(9298);t.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},t.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},t.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},t.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},t.extractPathCoords=function(e,t,n){var o=[];return e.match(r.segmentRE).forEach((function(e){var a=t[e.charAt(0)].drawn;if(void 0!==a){var s=e.substr(1).match(r.paramRE);if(s&&!(s.length<a)){var l=s[a],c=n?l:i.cleanNumber(l);o.push(c)}}})),o},t.getDataToPixel=function(e,n,r,i){var o,a=e._fullLayout._size;if(n)if("domain"===i)o=function(e){return n._length*(r?1-e:e)+n._offset};else{var s=t.shapePositionToRange(n);o=function(e){return n._offset+n.r2p(s(e,!0))},"date"===n.type&&(o=t.decodeDate(o))}else o=r?function(e){return a.t+a.h*(1-e)}:function(e){return a.l+a.w*e};return o},t.getPixelToData=function(e,n,r,i){var o,a=e._fullLayout._size;if(n)if("domain"===i)o=function(e){var t=(e-n._offset)/n._length;return r?1-t:t};else{var s=t.rangeToShapePosition(n);o=function(e){return s(n.p2r(e-n._offset))}}else o=r?function(e){return 1-(e-a.t)/a.h}:function(e){return(e-a.l)/a.w};return o},t.roundPositionForSharpStrokeRendering=function(e,t){var n=1===Math.round(t%2),r=Math.round(e);return n?r+.5:r},t.makeShapesOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},r=e._fullLayout._plots[n.xref+n.yref];return r?r._hadPlotinfo=!0:(r={},n.xref&&"paper"!==n.xref&&(r.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(r.yaxis=e._fullLayout[n.yref+"axis"])),r.xsizemode=n.xsizemode,r.ysizemode=n.ysizemode,r.xanchor=n.xanchor,r.yanchor=n.yanchor,{options:n,plotinfo:r}},t.makeSelectionsOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.selections[t]||{},r=e._fullLayout._plots[n.xref+n.yref];return r?r._hadPlotinfo=!0:(r={},n.xref&&(r.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&(r.yaxis=e._fullLayout[n.yref+"axis"])),{options:n,plotinfo:r}},t.getPathString=function(e,n){var a,s,l,c,u,d,f,p,h=n.type,m=o.getRefType(n.xref),g=o.getRefType(n.yref),v=o.getFromId(e,n.xref),y=o.getFromId(e,n.yref),b=e._fullLayout._size;if(v?"domain"===m?s=function(e){return v._offset+v._length*e}:(a=t.shapePositionToRange(v),s=function(e){return v._offset+v.r2p(a(e,!0))}):s=function(e){return b.l+b.w*e},y?"domain"===g?c=function(e){return y._offset+y._length*(1-e)}:(l=t.shapePositionToRange(y),c=function(e){return y._offset+y.r2p(l(e,!0))}):c=function(e){return b.t+b.h*(1-e)},"path"===h)return v&&"date"===v.type&&(s=t.decodeDate(s)),y&&"date"===y.type&&(c=t.decodeDate(c)),function(e,t,n){var o=e.path,a=e.xsizemode,s=e.ysizemode,l=e.xanchor,c=e.yanchor;return o.replace(r.segmentRE,(function(e){var o=0,u=e.charAt(0),d=r.paramIsX[u],f=r.paramIsY[u],p=r.numParams[u],h=e.substr(1).replace(r.paramRE,(function(e){return d[o]?e="pixel"===a?t(l)+Number(e):t(e):f[o]&&(e="pixel"===s?n(c)-Number(e):n(e)),++o>p&&(e="X"),e}));return o>p&&(h=h.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+e)),u+h}))}(n,s,c);if("pixel"===n.xsizemode){var x=s(n.xanchor);u=x+n.x0,d=x+n.x1}else u=s(n.x0),d=s(n.x1);if("pixel"===n.ysizemode){var w=c(n.yanchor);f=w-n.y0,p=w-n.y1}else f=c(n.y0),p=c(n.y1);if("line"===h)return"M"+u+","+f+"L"+d+","+p;if("rect"===h)return"M"+u+","+f+"H"+d+"V"+p+"H"+u+"Z";var _=(u+d)/2,S=(f+p)/2,C=Math.abs(_-u),k=Math.abs(S-f),M="A"+C+","+k,T=_+C+","+S;return"M"+T+M+" 0 1,1 "+_+","+(S-k)+M+" 0 0,1 "+T+"Z"}},9853:function(e,t,n){"use strict";var r=n(4031);e.exports={moduleType:"component",name:"shapes",layoutAttributes:n(9827),supplyLayoutDefaults:n(4726),supplyDrawNewShapeDefaults:n(5547),includeBasePlot:n(6325)("shapes"),calcAutorange:n(5627),draw:r.draw,drawOne:r.drawOne}},5067:function(e,t,n){"use strict";var r=n(1940),i=n(5025),o=n(1426).extendDeepAll,a=n(962).overrideAll,s=n(5594),l=n(4467).templatedArray,c=n(8292),u=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});e.exports=a(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:u,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(i({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},8292:function(e){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},2343:function(e,t,n){"use strict";var r=n(1828),i=n(5501),o=n(5067),a=n(8292).name,s=o.steps;function l(e,t,n){function a(n,i){return r.coerce(e,t,o,n,i)}for(var s=i(e,t,{name:"steps",handleItemDefaults:c}),l=0,u=0;u<s.length;u++)s[u].visible&&l++;if(l<2?t.visible=!1:a("visible")){t._stepCount=l;var d=t._visibleSteps=r.filterVisible(s);(s[a("active")]||{}).visible||(t.active=d[0]._index),a("x"),a("y"),r.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),a("len"),a("lenmode"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),r.coerceFont(a,"font",n.font),a("currentvalue.visible")&&(a("currentvalue.xanchor"),a("currentvalue.prefix"),a("currentvalue.suffix"),a("currentvalue.offset"),r.coerceFont(a,"currentvalue.font",t.font)),a("transition.duration"),a("transition.easing"),a("bgcolor"),a("activebgcolor"),a("bordercolor"),a("borderwidth"),a("ticklen"),a("tickwidth"),a("tickcolor"),a("minorticklen")}}function c(e,t){function n(n,i){return r.coerce(e,t,s,n,i)}if("skip"===e.method||Array.isArray(e.args)?n("visible"):t.visible=!1){n("method"),n("args");var i=n("label","step-"+t._index);n("value",i),n("execute")}}e.exports=function(e,t){i(e,t,{name:a,handleItemDefaults:l})}},4504:function(e,t,n){"use strict";var r=n(9898),i=n(4875),o=n(7901),a=n(1424),s=n(1828),l=s.strTranslate,c=n(3893),u=n(4467).arrayEditor,d=n(8292),f=n(8783),p=f.LINE_SPACING,h=f.FROM_TL,m=f.FROM_BR;function g(e){return d.autoMarginIdRoot+e._index}function v(e){return e._index}function y(e,t){var n=a.tester.selectAll("g."+d.labelGroupClass).data(t._visibleSteps);n.enter().append("g").classed(d.labelGroupClass,!0);var o=0,l=0;n.each((function(e){var n=w(r.select(this),{step:e},t).node();if(n){var i=a.bBox(n);l=Math.max(l,i.height),o=Math.max(o,i.width)}})),n.remove();var u=t._dims={};u.inputAreaWidth=Math.max(d.railWidth,d.gripHeight);var f=e._fullLayout._size;u.lx=f.l+f.w*t.x,u.ly=f.t+f.h*(1-t.y),"fraction"===t.lenmode?u.outerLength=Math.round(f.w*t.len):u.outerLength=t.len,u.inputAreaStart=0,u.inputAreaLength=Math.round(u.outerLength-t.pad.l-t.pad.r);var p=(u.inputAreaLength-2*d.stepInset)/(t._stepCount-1),v=o+d.labelPadding;if(u.labelStride=Math.max(1,Math.ceil(v/p)),u.labelHeight=l,u.currentValueMaxWidth=0,u.currentValueHeight=0,u.currentValueTotalHeight=0,u.currentValueMaxLines=1,t.currentvalue.visible){var y=a.tester.append("g");n.each((function(e){var n=b(y,t,e.label),r=n.node()&&a.bBox(n.node())||{width:0,height:0},i=c.lineCount(n);u.currentValueMaxWidth=Math.max(u.currentValueMaxWidth,Math.ceil(r.width)),u.currentValueHeight=Math.max(u.currentValueHeight,Math.ceil(r.height)),u.currentValueMaxLines=Math.max(u.currentValueMaxLines,i)})),u.currentValueTotalHeight=u.currentValueHeight+t.currentvalue.offset,y.remove()}u.height=u.currentValueTotalHeight+d.tickOffset+t.ticklen+d.labelOffset+u.labelHeight+t.pad.t+t.pad.b;var x="left";s.isRightAnchor(t)&&(u.lx-=u.outerLength,x="right"),s.isCenterAnchor(t)&&(u.lx-=u.outerLength/2,x="center");var _="top";s.isBottomAnchor(t)&&(u.ly-=u.height,_="bottom"),s.isMiddleAnchor(t)&&(u.ly-=u.height/2,_="middle"),u.outerLength=Math.ceil(u.outerLength),u.height=Math.ceil(u.height),u.lx=Math.round(u.lx),u.ly=Math.round(u.ly);var S={y:t.y,b:u.height*m[_],t:u.height*h[_]};"fraction"===t.lenmode?(S.l=0,S.xl=t.x-t.len*h[x],S.r=0,S.xr=t.x+t.len*m[x]):(S.x=t.x,S.l=u.outerLength*h[x],S.r=u.outerLength*m[x]),i.autoMargin(e,g(t),S)}function b(e,t,n){if(t.currentvalue.visible){var r,i,o=t._dims;switch(t.currentvalue.xanchor){case"right":r=o.inputAreaLength-d.currentValueInset-o.currentValueMaxWidth,i="left";break;case"center":r=.5*o.inputAreaLength,i="middle";break;default:r=d.currentValueInset,i="left"}var l=s.ensureSingle(e,"text",d.labelClass,(function(e){e.attr({"text-anchor":i,"data-notex":1})})),u=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"==typeof n)u+=n;else{var f=t.steps[t.active].label,h=t._gd._fullLayout._meta;h&&(f=s.templateString(f,h)),u+=f}t.currentvalue.suffix&&(u+=t.currentvalue.suffix),l.call(a.font,t.currentvalue.font).text(u).call(c.convertToTspans,t._gd);var m=c.lineCount(l),g=(o.currentValueMaxLines+1-m)*t.currentvalue.font.size*p;return c.positionText(l,r,g),l}}function x(e,t,n){s.ensureSingle(e,"rect",d.gripRectClass,(function(r){r.call(k,t,e,n).style("pointer-events","all")})).attr({width:d.gripWidth,height:d.gripHeight,rx:d.gripRadius,ry:d.gripRadius}).call(o.stroke,n.bordercolor).call(o.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function w(e,t,n){var r=s.ensureSingle(e,"text",d.labelClass,(function(e){e.attr({"text-anchor":"middle","data-notex":1})})),i=t.step.label,o=n._gd._fullLayout._meta;return o&&(i=s.templateString(i,o)),r.call(a.font,n.font).text(i).call(c.convertToTspans,n._gd),r}function _(e,t){var n=s.ensureSingle(e,"g",d.labelsClass),i=t._dims,o=n.selectAll("g."+d.labelGroupClass).data(i.labelSteps);o.enter().append("g").classed(d.labelGroupClass,!0),o.exit().remove(),o.each((function(e){var n=r.select(this);n.call(w,e,t),a.setTranslate(n,A(t,e.fraction),d.tickOffset+t.ticklen+t.font.size*p+d.labelOffset+i.currentValueTotalHeight)}))}function S(e,t,n,r,i){var o=Math.round(r*(n._stepCount-1)),a=n._visibleSteps[o]._index;a!==n.active&&C(e,t,n,a,!0,i)}function C(e,t,n,r,o,a){var s=n.active;n.active=r,u(e.layout,d.name,n).applyUpdate("active",r);var l=n.steps[n.active];t.call(T,n,a),t.call(b,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:o,previousActive:s}),l&&l.method&&o&&(t._nextMethod?(t._nextMethod.step=l,t._nextMethod.doCallback=o,t._nextMethod.doTransition=a):(t._nextMethod={step:l,doCallback:o,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame((function(){var n=t._nextMethod.step;n.method&&(n.execute&&i.executeAPICommand(e,n.method,n.args),t._nextMethod=null,t._nextMethodRaf=null)}))))}function k(e,t,n){if(!t._context.staticPlot){var i=n.node(),a=r.select(t);e.on("mousedown",l),e.on("touchstart",l)}function s(){return n.data()[0]}function l(){var e=s();t.emit("plotly_sliderstart",{slider:e});var l=n.select("."+d.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),l.call(o.fill,e.activebgcolor);var c=E(e,r.mouse(i)[0]);function u(){var e=s(),o=E(e,r.mouse(i)[0]);S(t,n,e,o,!1)}function f(){var e=s();e._dragging=!1,l.call(o.fill,e.bgcolor),a.on("mouseup",null),a.on("mousemove",null),a.on("touchend",null),a.on("touchmove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})}S(t,n,e,c,!0),e._dragging=!0,a.on("mousemove",u),a.on("touchmove",u),a.on("mouseup",f),a.on("touchend",f)}}function M(e,t){var n=e.selectAll("rect."+d.tickRectClass).data(t._visibleSteps),i=t._dims;n.enter().append("rect").classed(d.tickRectClass,!0),n.exit().remove(),n.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),n.each((function(e,n){var s=n%i.labelStride==0,l=r.select(this);l.attr({height:s?t.ticklen:t.minorticklen}).call(o.fill,t.tickcolor),a.setTranslate(l,A(t,n/(t._stepCount-1))-.5*t.tickwidth,(s?d.tickOffset:d.minorTickOffset)+i.currentValueTotalHeight)}))}function T(e,t,n){for(var r=e.select("rect."+d.gripRectClass),i=0,o=0;o<t._stepCount;o++)if(t._visibleSteps[o]._index===t.active){i=o;break}var a=A(t,i/(t._stepCount-1));if(!t._invokingCommand){var s=r;n&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform",l(a-.5*d.gripWidth,t._dims.currentValueTotalHeight))}}function A(e,t){var n=e._dims;return n.inputAreaStart+d.stepInset+(n.inputAreaLength-2*d.stepInset)*Math.min(1,Math.max(0,t))}function E(e,t){var n=e._dims;return Math.min(1,Math.max(0,(t-d.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*d.stepInset-2*n.inputAreaStart)))}function P(e,t,n){var r=n._dims,i=s.ensureSingle(e,"rect",d.railTouchRectClass,(function(r){r.call(k,t,e,n).style("pointer-events","all")}));i.attr({width:r.inputAreaLength,height:Math.max(r.inputAreaWidth,d.tickOffset+n.ticklen+r.labelHeight)}).call(o.fill,n.bgcolor).attr("opacity",0),a.setTranslate(i,0,r.currentValueTotalHeight)}function R(e,t){var n=t._dims,r=n.inputAreaLength-2*d.railInset,i=s.ensureSingle(e,"rect",d.railRectClass);i.attr({width:r,height:d.railWidth,rx:d.railRadius,ry:d.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,t.bordercolor).call(o.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),a.setTranslate(i,d.railInset,.5*(n.inputAreaWidth-d.railWidth)+n.currentValueTotalHeight)}e.exports=function(e){var t=e._context.staticPlot,n=e._fullLayout,o=function(e,t){for(var n=e[d.name],r=[],i=0;i<n.length;i++){var o=n[i];o.visible&&(o._gd=t,r.push(o))}return r}(n,e),s=n._infolayer.selectAll("g."+d.containerClassName).data(o.length>0?[0]:[]);function l(t){t._commandObserver&&(t._commandObserver.remove(),delete t._commandObserver),i.autoMargin(e,g(t))}if(s.enter().append("g").classed(d.containerClassName,!0).style("cursor",t?null:"ew-resize"),s.exit().each((function(){r.select(this).selectAll("g."+d.groupClassName).each(l)})).remove(),0!==o.length){var c=s.selectAll("g."+d.groupClassName).data(o,v);c.enter().append("g").classed(d.groupClassName,!0),c.exit().each(l).remove();for(var u=0;u<o.length;u++){var f=o[u];y(e,f)}c.each((function(t){var n=r.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(t),i.manageCommandObserver(e,t,t._visibleSteps,(function(t){var r=n.data()[0];r.active!==t.index&&(r._dragging||C(e,n,r,t.index,!1,!0))})),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),t.call(b,n).call(R,n).call(_,n).call(M,n).call(P,e,n).call(x,e,n);var r=n._dims;a.setTranslate(t,r.lx+n.pad.l,r.ly+n.pad.t),t.call(T,n,!1),t.call(b,n)}(e,r.select(this),t)}))}}},3243:function(e,t,n){"use strict";var r=n(8292);e.exports={moduleType:"component",name:r.name,layoutAttributes:n(5067),supplyLayoutDefaults:n(2343),draw:n(4504)}},2998:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=n(4875),a=n(3972),s=n(1828),l=s.strTranslate,c=n(1424),u=n(7901),d=n(3893),f=n(7822),p=n(8783).OPPOSITE_SIDE,h=/ [XY][0-9]* /;e.exports={draw:function(e,t,n){var m,g=n.propContainer,v=n.propName,y=n.placeholder,b=n.traceIndex,x=n.avoid||{},w=n.attributes,_=n.transform,S=n.containerGroup,C=e._fullLayout,k=1,M=!1,T=g.title,A=(T&&T.text?T.text:"").trim(),E=T&&T.font?T.font:{},P=E.family,R=E.size,O=E.color;"title.text"===v?m="titleText":-1!==v.indexOf("axis")?m="axisTitleText":v.indexOf(!0)&&(m="colorbarTitleText");var I=e._context.edits[m];""===A?k=0:A.replace(h," % ")===y.replace(h," % ")&&(k=.2,M=!0,I||(A="")),n._meta?A=s.templateString(A,n._meta):C._meta&&(A=s.templateString(A,C._meta));var L,D=A||I;S||(S=s.ensureSingle(C._infolayer,"g","g-"+t),L=C._hColorbarMoveTitle);var N=S.selectAll("text").data(D?[0]:[]);if(N.enter().append("text"),N.text(A).attr("class",t),N.exit().remove(),!D)return S;function F(e){s.syncOrAsync([z,B],e)}function z(t){var n;return!_&&L&&(_={}),_?(n="",_.rotate&&(n+="rotate("+[_.rotate,w.x,w.y]+")"),(_.offset||L)&&(n+=l(0,(_.offset||0)-(L||0)))):n=null,t.attr("transform",n),t.style({"font-family":P,"font-size":r.round(R,2)+"px",fill:u.rgb(O),opacity:k*u.opacity(O),"font-weight":o.fontWeight}).attr(w).call(d.convertToTspans,e),o.previousPromises(e)}function B(e){var t=r.select(e.node().parentNode);if(x&&x.selection&&x.side&&A){t.attr("transform",null);var n=p[x.side],o="left"===x.side||"top"===x.side?-1:1,a=i(x.pad)?x.pad:2,u=c.bBox(t.node()),d={left:0,top:0,right:C.width,bottom:C.height},f=x.maxShift||o*(d[x.side]-u[x.side]),h=0;if(f<0)h=f;else{var m=x.offsetLeft||0,v=x.offsetTop||0;u.left-=m,u.right-=m,u.top-=v,u.bottom-=v,x.selection.each((function(){var e=c.bBox(this);s.bBoxIntersect(u,e,a)&&(h=Math.max(h,o*(e[x.side]-u[n])+a))})),h=Math.min(f,h),g._titleScoot=Math.abs(h)}if(h>0||f<0){var y={left:[-h,0],right:[h,0],top:[0,-h],bottom:[0,h]}[x.side];t.attr("transform",l(y[0],y[1]))}}}return N.call(F),I&&(A?N.on(".opacity",null):(k=0,M=!0,N.text(y).on("mouseover.opacity",(function(){r.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)})).on("mouseout.opacity",(function(){r.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)}))),N.call(d.makeEditable,{gd:e}).on("edit",(function(t){void 0!==b?a.call("_guiRestyle",e,v,t,b):a.call("_guiRelayout",e,v,t)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(F)})).on("input",(function(e){this.text(e||" ").call(d.positionText,w.x,w.y)}))),N.classed("js-placeholder",M),S}}},7163:function(e,t,n){"use strict";var r=n(1940),i=n(2399),o=n(1426).extendFlat,a=n(962).overrideAll,s=n(5025),l=n(4467).templatedArray,c=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});e.exports=a(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},5909:function(e){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},4897:function(e,t,n){"use strict";var r=n(1828),i=n(5501),o=n(7163),a=n(5909).name,s=o.buttons;function l(e,t,n){function a(n,i){return r.coerce(e,t,o,n,i)}a("visible",i(e,t,{name:"buttons",handleItemDefaults:c}).length>0)&&(a("active"),a("direction"),a("type"),a("showactive"),a("x"),a("y"),r.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),r.coerceFont(a,"font",n.font),a("bgcolor",n.paper_bgcolor),a("bordercolor"),a("borderwidth"))}function c(e,t){function n(n,i){return r.coerce(e,t,s,n,i)}n("visible","skip"===e.method||Array.isArray(e.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}e.exports=function(e,t){i(e,t,{name:a,handleItemDefaults:l})}},3689:function(e,t,n){"use strict";var r=n(9898),i=n(4875),o=n(7901),a=n(1424),s=n(1828),l=n(3893),c=n(4467).arrayEditor,u=n(8783).LINE_SPACING,d=n(5909),f=n(5849);function p(e){return e._index}function h(e,t){return+e.attr(d.menuIndexAttrName)===t._index}function m(e,t,n,r,i,o,a,s){t.active=a,c(e.layout,d.name,t).applyUpdate("active",a),"buttons"===t.type?v(e,r,null,null,t):"dropdown"===t.type&&(i.attr(d.menuIndexAttrName,"-1"),g(e,r,i,o,t),s||v(e,r,i,o,t))}function g(e,t,n,r,i){var o=s.ensureSingle(t,"g",d.headerClassName,(function(e){e.style("pointer-events","all")})),l=i._dims,c=i.active,u=i.buttons[c]||d.blankHeaderOpts,f={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},p={width:l.headerWidth,height:l.headerHeight};o.call(y,i,u,e).call(M,i,f,p),s.ensureSingle(t,"text",d.headerArrowClassName,(function(e){e.attr("text-anchor","end").call(a.font,i.font).text(d.arrowSymbol[i.direction])})).attr({x:l.headerWidth-d.arrowOffsetX+i.pad.l,y:l.headerHeight/2+d.textOffsetY+i.pad.t}),o.on("click",(function(){n.call(T,String(h(n,i)?-1:i._index)),v(e,t,n,r,i)})),o.on("mouseover",(function(){o.call(_)})),o.on("mouseout",(function(){o.call(S,i)})),a.setTranslate(t,l.lx,l.ly)}function v(e,t,n,o,a){n||(n=t).attr("pointer-events","all");var l=function(e){return-1==+e.attr(d.menuIndexAttrName)}(n)&&"buttons"!==a.type?[]:a.buttons,c="dropdown"===a.type?d.dropdownButtonClassName:d.buttonClassName,u=n.selectAll("g."+c).data(s.filterVisible(l)),f=u.enter().append("g").classed(c,!0),p=u.exit();"dropdown"===a.type?(f.attr("opacity","0").transition().attr("opacity","1"),p.transition().attr("opacity","0").remove()):p.remove();var h=0,g=0,v=a._dims,b=-1!==["up","down"].indexOf(a.direction);"dropdown"===a.type&&(b?g=v.headerHeight+d.gapButtonHeader:h=v.headerWidth+d.gapButtonHeader),"dropdown"===a.type&&"up"===a.direction&&(g=-d.gapButtonHeader+d.gapButton-v.openHeight),"dropdown"===a.type&&"left"===a.direction&&(h=-d.gapButtonHeader+d.gapButton-v.openWidth);var x={x:v.lx+h+a.pad.l,y:v.ly+g+a.pad.t,yPad:d.gapButton,xPad:d.gapButton,index:0},C={l:x.x+a.borderwidth,t:x.y+a.borderwidth};u.each((function(s,l){var c=r.select(this);c.call(y,a,s,e).call(M,a,x),c.on("click",(function(){r.event.defaultPrevented||(s.execute&&(s.args2&&a.active===l?(m(e,a,0,t,n,o,-1),i.executeAPICommand(e,s.method,s.args2)):(m(e,a,0,t,n,o,l),i.executeAPICommand(e,s.method,s.args))),e.emit("plotly_buttonclicked",{menu:a,button:s,active:a.active}))})),c.on("mouseover",(function(){c.call(_)})),c.on("mouseout",(function(){c.call(S,a),u.call(w,a)}))})),u.call(w,a),b?(C.w=Math.max(v.openWidth,v.headerWidth),C.h=x.y-C.t):(C.w=x.x-C.l,C.h=Math.max(v.openHeight,v.headerHeight)),C.direction=a.direction,o&&(u.size()?function(e,t,n,r,i,o){var a,s,l,c=i.direction,u="up"===c||"down"===c,f=i._dims,p=i.active;if(u)for(s=0,l=0;l<p;l++)s+=f.heights[l]+d.gapButton;else for(a=0,l=0;l<p;l++)a+=f.widths[l]+d.gapButton;r.enable(o,a,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1"),r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,o,a,C):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",(function(){t=!1,n||e.disable()})),n&&e.vbar.transition().attr("opacity","0").each("end",(function(){n=!1,t||e.disable()}))}(o))}function y(e,t,n,r){e.call(b,t).call(x,t,n,r)}function b(e,t){s.ensureSingle(e,"rect",d.itemRectClassName,(function(e){e.attr({rx:d.rx,ry:d.ry,"shape-rendering":"crispEdges"})})).call(o.stroke,t.bordercolor).call(o.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function x(e,t,n,r){var i=s.ensureSingle(e,"text",d.itemTextClassName,(function(e){e.attr({"text-anchor":"start","data-notex":1})})),o=n.label,c=r._fullLayout._meta;c&&(o=s.templateString(o,c)),i.call(a.font,t.font).text(o).call(l.convertToTspans,r)}function w(e,t){var n=t.active;e.each((function(e,i){var a=r.select(this);i===n&&t.showactive&&a.select("rect."+d.itemRectClassName).call(o.fill,d.activeColor)}))}function _(e){e.select("rect."+d.itemRectClassName).call(o.fill,d.hoverColor)}function S(e,t){e.select("rect."+d.itemRectClassName).call(o.fill,t.bgcolor)}function C(e,t){var n=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},o=a.tester.selectAll("g."+d.dropdownButtonClassName).data(s.filterVisible(t.buttons));o.enter().append("g").classed(d.dropdownButtonClassName,!0);var c=-1!==["up","down"].indexOf(t.direction);o.each((function(i,o){var s=r.select(this);s.call(y,t,i,e);var f=s.select("."+d.itemTextClassName),p=f.node()&&a.bBox(f.node()).width,h=Math.max(p+d.textPadX,d.minWidth),m=t.font.size*u,g=l.lineCount(f),v=Math.max(m*g,d.minHeight)+d.textOffsetY;v=Math.ceil(v),h=Math.ceil(h),n.widths[o]=h,n.heights[o]=v,n.height1=Math.max(n.height1,v),n.width1=Math.max(n.width1,h),c?(n.totalWidth=Math.max(n.totalWidth,h),n.openWidth=n.totalWidth,n.totalHeight+=v+d.gapButton,n.openHeight+=v+d.gapButton):(n.totalWidth+=h+d.gapButton,n.openWidth+=h+d.gapButton,n.totalHeight=Math.max(n.totalHeight,v),n.openHeight=n.totalHeight)})),c?n.totalHeight-=d.gapButton:n.totalWidth-=d.gapButton,n.headerWidth=n.width1+d.arrowPadX,n.headerHeight=n.height1,"dropdown"===t.type&&(c?(n.width1+=d.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=d.arrowPadX),o.remove();var f=n.totalWidth+t.pad.l+t.pad.r,p=n.totalHeight+t.pad.t+t.pad.b,h=e._fullLayout._size;n.lx=h.l+h.w*t.x,n.ly=h.t+h.h*(1-t.y);var m="left";s.isRightAnchor(t)&&(n.lx-=f,m="right"),s.isCenterAnchor(t)&&(n.lx-=f/2,m="center");var g="top";s.isBottomAnchor(t)&&(n.ly-=p,g="bottom"),s.isMiddleAnchor(t)&&(n.ly-=p/2,g="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),i.autoMargin(e,k(t),{x:t.x,y:t.y,l:f*({right:1,center:.5}[m]||0),r:f*({left:1,center:.5}[m]||0),b:p*({top:1,middle:.5}[g]||0),t:p*({bottom:1,middle:.5}[g]||0)})}function k(e){return d.autoMarginIdRoot+e._index}function M(e,t,n,r){r=r||{};var i=e.select("."+d.itemRectClassName),o=e.select("."+d.itemTextClassName),s=t.borderwidth,c=n.index,f=t._dims;a.setTranslate(e,s+n.x,s+n.y);var p=-1!==["up","down"].indexOf(t.direction),h=r.height||(p?f.heights[c]:f.height1);i.attr({x:0,y:0,width:r.width||(p?f.width1:f.widths[c]),height:h});var m=t.font.size*u,g=(l.lineCount(o)-1)*m/2;l.positionText(o,d.textOffsetX,h/2-g+d.textOffsetY),p?n.y+=f.heights[c]+n.yPad:n.x+=f.widths[c]+n.xPad,n.index++}function T(e,t){e.attr(d.menuIndexAttrName,t||"-1").selectAll("g."+d.dropdownButtonClassName).remove()}e.exports=function(e){var t=e._fullLayout,n=s.filterVisible(t[d.name]);function o(t){i.autoMargin(e,k(t))}var a=t._menulayer.selectAll("g."+d.containerClassName).data(n.length>0?[0]:[]);if(a.enter().append("g").classed(d.containerClassName,!0).style("cursor","pointer"),a.exit().each((function(){r.select(this).selectAll("g."+d.headerGroupClassName).each(o)})).remove(),0!==n.length){var l=a.selectAll("g."+d.headerGroupClassName).data(n,p);l.enter().append("g").classed(d.headerGroupClassName,!0);for(var c=s.ensureSingle(a,"g",d.dropdownButtonGroupClassName,(function(e){e.style("pointer-events","all")})),u=0;u<n.length;u++){var y=n[u];C(e,y)}var b="updatemenus"+t._uid,x=new f(e,c,b);l.enter().size()&&(c.node().parentNode.appendChild(c.node()),c.call(T)),l.exit().each((function(e){c.call(T),o(e)})).remove(),l.each((function(t){var n=r.select(this),o="dropdown"===t.type?c:null;i.manageCommandObserver(e,t,t.buttons,(function(r){m(e,t,t.buttons[r.index],n,o,x,r.index,!0)})),"dropdown"===t.type?(g(e,n,c,x,t),h(c,t)&&v(e,n,c,x,t)):v(e,n,null,null,t)}))}}},763:function(e,t,n){"use strict";var r=n(5909);e.exports={moduleType:"component",name:r.name,layoutAttributes:n(7163),supplyLayoutDefaults:n(4897),draw:n(3689)}},5849:function(e,t,n){"use strict";e.exports=s;var r=n(9898),i=n(7901),o=n(1424),a=n(1828);function s(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(e,t,n){var a=this.gd._fullLayout,l=a.width,c=a.height;this.position=e;var u,d,f,p,h=this.position.l,m=this.position.w,g=this.position.t,v=this.position.h,y=this.position.direction,b="down"===y,x="left"===y,w="up"===y,_=m,S=v;b||x||"right"===y||w||(this.position.direction="down",b=!0),b||w?(d=(u=h)+_,b?(f=g,S=(p=Math.min(f+S,c))-f):S=(p=g+S)-(f=Math.max(p-S,0))):(p=(f=g)+S,x?_=(d=h+_)-(u=Math.max(d-_,0)):(u=h,_=(d=Math.min(u+_,l))-u)),this._box={l:u,t:f,w:_,h:S};var C=m>_,k=s.barLength+2*s.barPad,M=s.barWidth+2*s.barPad,T=h,A=g+v;A+M>c&&(A=c-M);var E=this.container.selectAll("rect.scrollbar-horizontal").data(C?[0]:[]);E.exit().on(".drag",null).remove(),E.enter().append("rect").classed("scrollbar-horizontal",!0).call(i.fill,s.barColor),C?(this.hbar=E.attr({rx:s.barRadius,ry:s.barRadius,x:T,y:A,width:k,height:M}),this._hbarXMin=T+k/2,this._hbarTranslateMax=_-k):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var P=v>S,R=s.barWidth+2*s.barPad,O=s.barLength+2*s.barPad,I=h+m,L=g;I+R>l&&(I=l-R);var D=this.container.selectAll("rect.scrollbar-vertical").data(P?[0]:[]);D.exit().on(".drag",null).remove(),D.enter().append("rect").classed("scrollbar-vertical",!0).call(i.fill,s.barColor),P?(this.vbar=D.attr({rx:s.barRadius,ry:s.barRadius,x:I,y:L,width:R,height:O}),this._vbarYMin=L+O/2,this._vbarTranslateMax=S-O):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var N=this.id,F=u-.5,z=P?d+R+.5:d+.5,B=f-.5,j=C?p+M+.5:p+.5,Z=a._topdefs.selectAll("#"+N).data(C||P?[0]:[]);if(Z.exit().remove(),Z.enter().append("clipPath").attr("id",N).append("rect"),C||P?(this._clipRect=Z.select("rect").attr({x:Math.floor(F),y:Math.floor(B),width:Math.ceil(z)-Math.floor(F),height:Math.ceil(j)-Math.floor(B)}),this.container.call(o.setClipUrl,N,this.gd),this.bg.attr({x:h,y:g,width:m,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),C||P){var H=r.behavior.drag().on("dragstart",(function(){r.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(H);var U=r.behavior.drag().on("dragstart",(function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));C&&this.hbar.on(".drag",null).call(U),P&&this.vbar.on(".drag",null).call(U)}this.setTranslate(t,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=r.event.dx),this.vbar&&(t-=r.event.dy),this.setTranslate(e,t)},s.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=r.event.deltaY),this.vbar&&(t+=r.event.deltaY),this.setTranslate(e,t)},s.prototype._onBarDrag=function(){var e=this.translateX,t=this.translateY;if(this.hbar){var n=e+this._hbarXMin,i=n+this._hbarTranslateMax;e=(a.constrain(r.event.x,n,i)-n)/(i-n)*(this.position.w-this._box.w)}if(this.vbar){var o=t+this._vbarYMin,s=o+this._vbarTranslateMax;t=(a.constrain(r.event.y,o,s)-o)/(s-o)*(this.position.h-this._box.h)}this.setTranslate(e,t)},s.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(e=a.constrain(e||0,0,n),t=a.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(o.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var i=e/n;this.hbar.call(o.setTranslate,e+i*this._hbarTranslateMax,t)}if(this.vbar){var s=t/r;this.vbar.call(o.setTranslate,e,t+s*this._vbarTranslateMax)}}},8783:function(e){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},4695:function(e){"use strict";e.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},1562:function(e){"use strict";e.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},4808:function(e){"use strict";e.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},7822:function(e){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},606:function(e){"use strict";e.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},7922:function(e,t){"use strict";t.xmlns="http://www.w3.org/2000/xmlns/",t.svg="http://www.w3.org/2000/svg",t.xlink="http://www.w3.org/1999/xlink",t.svgAttrs={xmlns:t.svg,"xmlns:xlink":t.xlink}},8729:function(e,t,n){"use strict";t.version=n(1506).version,n(7417),n(8847);for(var r=n(3972),i=t.register=r.register,o=n(641),a=Object.keys(o),s=0;s<a.length;s++){var l=a[s];"_"!==l.charAt(0)&&(t[l]=o[l]),i({moduleType:"apiMethod",name:l,fn:o[l]})}i(n(7368)),i([n(2199),n(211),n(2745),n(2468),n(7322),n(9853),n(8804),n(763),n(3243),n(3137),n(7218),n(3312),n(7369),n(1081),n(2311),n(4168)]),i([n(2177),n(7815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),t.Icons=n(4255);var c=n(211),u=n(4875);t.Plots={resize:u.resize,graphJson:u.graphJson,sendDataToCloud:u.sendDataToCloud},t.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover},t.Snapshot=n(4511),t.PlotSchema=n(6281)},4255:function(e){"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},9863:function(e,t){"use strict";t.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},t.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},t.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},t.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},t.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},t.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},6348:function(e,t,n){"use strict";var r=n(4872),i=r.mod,o=r.modHalf,a=Math.PI,s=2*a;function l(e){return Math.abs(e[1]-e[0])>s-1e-14}function c(e,t){return o(t-e,s)}function u(e,t){if(l(t))return!0;var n,r;t[0]<t[1]?(n=t[0],r=t[1]):(n=t[1],r=t[0]),(n=i(n,s))>(r=i(r,s))&&(r+=s);var o=i(e,s),a=o+s;return o>=n&&o<=r||a>=n&&a<=r}function d(e,t,n,r,i,o,c){i=i||0,o=o||0;var u,d,f,p,h,m=l([n,r]);function g(e,t){return[e*Math.cos(t)+i,o-e*Math.sin(t)]}m?(u=0,d=a,f=s):n<r?(u=n,f=r):(u=r,f=n),e<t?(p=e,h=t):(p=t,h=e);var v,y=Math.abs(f-u)<=a?0:1;function b(e,t,n){return"A"+[e,e]+" "+[0,y,n]+" "+g(e,t)}return m?v=null===p?"M"+g(h,u)+b(h,d,0)+b(h,f,0)+"Z":"M"+g(p,u)+b(p,d,0)+b(p,f,0)+"ZM"+g(h,u)+b(h,d,1)+b(h,f,1)+"Z":null===p?(v="M"+g(h,u)+b(h,f,0),c&&(v+="L0,0Z")):v="M"+g(p,u)+"L"+g(h,u)+b(h,f,0)+"L"+g(p,f)+b(p,u,1)+"Z",v}e.exports={deg2rad:function(e){return e/180*a},rad2deg:function(e){return e/a*180},angleDelta:c,angleDist:function(e,t){return Math.abs(c(e,t))},isFullCircle:l,isAngleInsideSector:u,isPtInsideSector:function(e,t,n,r){return!!u(t,r)&&(n[0]<n[1]?(i=n[0],o=n[1]):(i=n[1],o=n[0]),e>=i&&e<=o);var i,o},pathArc:function(e,t,n,r,i){return d(null,e,t,n,r,i,0)},pathSector:function(e,t,n,r,i){return d(null,e,t,n,r,i,1)},pathAnnulus:function(e,t,n,r,i,o){return d(e,t,n,r,i,o,1)}}},3627:function(e,t){"use strict";var n=Array.isArray,r=ArrayBuffer,i=DataView;function o(e){return r.isView(e)&&!(e instanceof i)}function a(e){return n(e)||o(e)}function s(e,t,n){if(a(e)){if(a(e[0])){for(var r=n,i=0;i<e.length;i++)r=t(r,e[i].length);return r}return e.length}return 0}t.isTypedArray=o,t.isArrayOrTypedArray=a,t.isArray1D=function(e){return!a(e[0])},t.ensureArray=function(e,t){return n(e)||(e=[]),e.length=t,e},t.concat=function(){var e,t,r,i,o,a,s,l,c=[],u=!0,d=0;for(r=0;r<arguments.length;r++)(a=(i=arguments[r]).length)&&(t?c.push(i):(t=i,o=a),n(i)?e=!1:(u=!1,d?e!==i.constructor&&(e=!1):e=i.constructor),d+=a);if(!d)return[];if(!c.length)return t;if(u)return t.concat.apply(t,c);if(e){for((s=new e(d)).set(t),r=0;r<c.length;r++)i=c[r],s.set(i,o),o+=i.length;return s}for(s=new Array(d),l=0;l<t.length;l++)s[l]=t[l];for(r=0;r<c.length;r++){for(i=c[r],l=0;l<i.length;l++)s[o+l]=i[l];o+=l}return s},t.maxRowLength=function(e){return s(e,Math.max,0)},t.minRowLength=function(e){return s(e,Math.min,1/0)}},5218:function(e,t,n){"use strict";var r=n(2770),i=n(606).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(e){return"string"==typeof e&&(e=e.replace(o,"")),r(e)?Number(e):i}},3306:function(e){"use strict";e.exports=function(e){var t=e._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each((function(e){e.regl&&e.regl.clear({color:!0,depth:!0})}))}},6367:function(e){"use strict";e.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},6554:function(e,t,n){"use strict";var r=n(2770),i=n(4267),o=n(9012),a=n(3282),s=n(7901),l=n(7822).DESELECTDIM,c=n(5487),u=n(587).counter,d=n(4872).modHalf,f=n(3627).isArrayOrTypedArray;function p(e,n){var r=t.valObjectMeta[n.valType];if(n.arrayOk&&f(e))return!0;if(r.validateFunction)return r.validateFunction(e,n);var i={},o=i,a={set:function(e){o=e}};return r.coerceFunction(e,a,i,n),o!==i}t.valObjectMeta={data_array:{coerceFunction:function(e,t,n){f(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,i){!r(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,i){e%1||!r(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){if("string"!=typeof e){var i="number"==typeof e;!0!==r.strict&&i?t.set(String(e)):t.set(n)}else r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){i(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every((function(e){return i(e).isValid()}))?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(a.get(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):r(e)?t.set(d(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){var i=r.regex||u(n);"string"==typeof e&&i.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){var n=t.dflt;return e===n||"string"==typeof e&&!!u(n).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if(-1===(r.extras||[]).indexOf(e))if("string"==typeof e){for(var i=e.split("+"),o=0;o<i.length;){var a=i[o];-1===r.flags.indexOf(a)||i.indexOf(a)<o?i.splice(o,1):o++}i.length?t.set(i.join("+")):t.set(n)}else t.set(n);else t.set(e)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,n,r,i){function o(e,n,r){var i,o={set:function(e){i=e}};return void 0===r&&(r=n.dflt),t.valObjectMeta[n.valType].coerceFunction(e,o,r,n),i}var a=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var s,l,c,u,d,f,p=i.items,h=[],m=Array.isArray(p),g=m&&a&&Array.isArray(p[0]),v=a&&m&&!g,y=m&&!v?p.length:e.length;if(r=Array.isArray(r)?r:[],a)for(s=0;s<y;s++)for(h[s]=[],c=Array.isArray(e[s])?e[s]:[],d=v?p.length:m?p[s].length:c.length,l=0;l<d;l++)u=v?p[l]:m?p[s][l]:p,void 0!==(f=o(c[l],u,(r[s]||[])[l]))&&(h[s][l]=f);else for(s=0;s<y;s++)void 0!==(f=o(e[s],m?p[s]:p,r[s]))&&(h[s]=f);n.set(h)}else n.set(r)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),i=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var o=0;o<e.length;o++)if(i){if(!Array.isArray(e[o])||!t.freeLength&&e[o].length!==n[o].length)return!1;for(var a=0;a<e[o].length;a++)if(!p(e[o][a],r?n[o][a]:n))return!1}else if(!p(e[o],r?n[o]:n))return!1;return!0}}},t.coerce=function(e,n,r,i,o){var a=c(r,i).get(),s=c(e,i),l=c(n,i),u=s.get(),d=n._template;if(void 0===u&&d&&(u=c(d,i).get(),d=0),void 0===o&&(o=a.dflt),a.arrayOk&&f(u))return l.set(u),u;var h=t.valObjectMeta[a.valType].coerceFunction;h(u,l,o,a);var m=l.get();return d&&m===o&&!p(u,a)&&(h(u=c(d,i).get(),l,o,a),m=l.get()),m},t.coerce2=function(e,n,r,i,o){var a=c(e,i),s=t.coerce(e,n,r,i,o);return null!=a.get()&&s},t.coerceFont=function(e,t,n){var r={};return n=n||{},r.family=e(t+".family",n.family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},t.coercePattern=function(e,t,n,r){if(e(t+".shape")){e(t+".solidity"),e(t+".size");var i="overlay"===e(t+".fillmode");if(!r){var o=e(t+".bgcolor",i?n:void 0);e(t+".fgcolor",i?s.contrast(o):n)}e(t+".fgopacity",i?.5:1)}},t.coerceHoverinfo=function(e,n,r){var i,a=n._module.attributes,s=a.hoverinfo?a:o,l=s.hoverinfo;if(1===r._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),i=c.join("+")}return t.coerce(e,n,s,"hoverinfo",i)},t.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var n,r,i=e.marker.opacity;void 0!==i&&(f(i)||e.selected||e.unselected||(n=i,r=l*i),t("selected.marker.opacity",n),t("unselected.marker.opacity",r))}},t.validate=p},1631:function(e,t,n){"use strict";var r,i,o=n(4096).i$,a=n(2770),s=n(7769),l=n(4872).mod,c=n(606),u=c.BADNUM,d=c.ONEDAY,f=c.ONEHOUR,p=c.ONEMIN,h=c.ONESEC,m=c.EPOCHJD,g=n(3972),v=n(4096).g0,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function w(e){return e&&g.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function _(e,t){return String(e+Math.pow(10,t)).substr(1)}t.dateTick0=function(e,n){var r=function(e,t){return w(e)?t?g.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:g.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}(e,!!n);if(n<2)return r;var i=t.dateTime2ms(r,e);return i+=d*(n-1),t.ms2DateTime(i,0,e)},t.dfltRange=function(e){return w(e)?g.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},t.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},t.dateTime2ms=function(e,n){if(t.isJSDate(e)){var o=e.getTimezoneOffset()*p,a=(e.getUTCMinutes()-e.getMinutes())*p+(e.getUTCSeconds()-e.getSeconds())*h+(e.getUTCMilliseconds()-e.getMilliseconds());if(a){var s=3*p;o=o-s/2+l(a-o+s/2,s)}return(e=Number(e)-o)>=r&&e<=i?e:u}if("string"!=typeof e&&"number"!=typeof e)return u;e=String(e);var c=w(n),v=e.charAt(0);!c||"G"!==v&&"g"!==v||(e=e.substr(1),n="");var _=c&&"chinese"===n.substr(0,7),S=e.match(_?b:y);if(!S)return u;var C=S[1],k=S[3]||"1",M=Number(S[5]||1),T=Number(S[7]||0),A=Number(S[9]||0),E=Number(S[11]||0);if(c){if(2===C.length)return u;var P;C=Number(C);try{var R=g.getComponentMethod("calendars","getCal")(n);if(_){var O="i"===k.charAt(k.length-1);k=parseInt(k,10),P=R.newDate(C,R.toMonthIndex(C,k,O),M)}else P=R.newDate(C,Number(k),M)}catch(e){return u}return P?(P.toJD()-m)*d+T*f+A*p+E*h:u}C=2===C.length?(Number(C)+2e3-x)%100+x:Number(C),k-=1;var I=new Date(Date.UTC(2e3,k,M,T,A));return I.setUTCFullYear(C),I.getUTCMonth()!==k||I.getUTCDate()!==M?u:I.getTime()+E*h},r=t.MIN_MS=t.dateTime2ms("-9999"),i=t.MAX_MS=t.dateTime2ms("9999-12-31 23:59:59.9999"),t.isDateTime=function(e,n){return t.dateTime2ms(e,n)!==u};var S=90*d,C=3*f,k=5*p;function M(e,t,n,r,i){if((t||n||r||i)&&(e+=" "+_(t,2)+":"+_(n,2),(r||i)&&(e+=":"+_(r,2),i))){for(var o=4;i%10==0;)o-=1,i/=10;e+="."+_(i,o)}return e}t.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(e>=r&&e<=i))return u;t||(t=0);var o,a,s,c,y,b,x=Math.floor(10*l(e+.05,1)),_=Math.round(e-x/10);if(w(n)){var T=Math.floor(_/d)+m,A=Math.floor(l(e,d));try{o=g.getComponentMethod("calendars","getCal")(n).fromJD(T).formatDate("yyyy-mm-dd")}catch(e){o=v("G%Y-%m-%d")(new Date(_))}if("-"===o.charAt(0))for(;o.length<11;)o="-0"+o.substr(1);else for(;o.length<10;)o="0"+o;a=t<S?Math.floor(A/f):0,s=t<S?Math.floor(A%f/p):0,c=t<C?Math.floor(A%p/h):0,y=t<k?A%h*10+x:0}else b=new Date(_),o=v("%Y-%m-%d")(b),a=t<S?b.getUTCHours():0,s=t<S?b.getUTCMinutes():0,c=t<C?b.getUTCSeconds():0,y=t<k?10*b.getUTCMilliseconds()+x:0;return M(o,a,s,c,y)},t.ms2DateTimeLocal=function(e){if(!(e>=r+d&&e<=i-d))return u;var t=Math.floor(10*l(e+.05,1)),n=new Date(Math.round(e-t/10));return M(o("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+t)},t.cleanDate=function(e,n,r){if(e===u)return n;if(t.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(w(r))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),n;if(!(e=t.ms2DateTimeLocal(+e))&&void 0!==n)return n}else if(!t.isDateTime(e,r))return s.error("unrecognized date",e),n;return e};var T=/%\d?f/g,A=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function P(e,t,n,r){e=e.replace(T,(function(e){var n=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"}));var i=new Date(Math.floor(t+.05));if(e=e.replace(A,(function(){return E[n("%q")(i)]})),w(r))try{e=g.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(i)}var R=[59,59.9,59.99,59.999,59.9999];t.formatDate=function(e,t,n,r,i,o){if(i=w(i)&&i,!t)if("y"===n)t=o.year;else if("m"===n)t=o.month;else{if("d"!==n)return function(e,t){var n=l(e+.05,d),r=_(Math.floor(n/f),2)+":"+_(l(Math.floor(n/p),60),2);if("M"!==t){a(t)||(t=0);var i=(100+Math.min(l(e/h,60),R[t])).toFixed(t).substr(1);t>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+i}return r}(e,n)+"\n"+P(o.dayMonthYear,e,r,i);t=o.dayMonth+"\n"+o.year}return P(t,e,r,i)};var O=3*d;t.incrementMonth=function(e,t,n){n=w(n)&&n;var r=l(e,d);if(e=Math.round(e-r),n)try{var i=Math.round(e/d)+m,o=g.getComponentMethod("calendars","getCal")(n),a=o.fromJD(i);return t%12?o.add(a,t,"m"):o.add(a,t/12,"y"),(a.toJD()-m)*d+r}catch(t){s.error("invalid ms "+e+" in calendar "+n)}var c=new Date(e+O);return c.setUTCMonth(c.getUTCMonth()+t)+r-O},t.findExactDates=function(e,t){for(var n,r,i=0,o=0,s=0,l=0,c=w(t)&&g.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++)if(r=e[u],a(r)){if(!(r%d))if(c)try{1===(n=c.fromJD(r/d+m)).day()?1===n.month()?i++:o++:s++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:o++:s++}else l++;s+=o+=i;var f=e.length-l;return{exactYears:i/f,exactMonths:o/f,exactDays:s/f}}},4401:function(e,t,n){"use strict";var r=n(9898),i=n(7769),o=n(5657),a=n(9576);function s(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var r="plotly.js-style-"+e,o=document.getElementById(r);o||((o=document.createElement("style")).setAttribute("id",r),o.appendChild(document.createTextNode("")),document.head.appendChild(o));var a=o.sheet;a.insertRule?a.insertRule(t+"{"+n+"}",0):a.addRule?a.addRule(t,n,0):i.warn("addStyleRule failed")}function c(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return"none"===n?null:n.replace("matrix","").replace("3d","").slice(1,-1).split(",").map((function(e){return+e}))}function u(e){for(var t=[];d(e);)t.push(e),e=e.parentNode;return t}function d(e){return e&&(e instanceof Element||e instanceof HTMLElement)}e.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){var t=r.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(e,t){l("global",e,t)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(e){var t="plotly.js-style-"+e,n=document.getElementById(t);n&&s(n)},getFullTransformMatrix:function(e){var t=u(e),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(e){var t=c(e);if(t){var r=o.convertCssMatrix(t);n=a.multiply(n,n,r)}})),n},getElementTransformMatrix:c,getElementAndAncestors:u,equalDomRects:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},1086:function(e,t,n){"use strict";var r=n(5398).EventEmitter,i={init:function(e){if(e._ev instanceof r)return e;var t=new r,n=new r;return e._ev=t,e._internalEv=n,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=n.on.bind(n),e._internalOnce=n.once.bind(n),e._removeInternalListener=n.removeListener.bind(n),e._removeAllInternalListeners=n.removeAllListeners.bind(n),e.emit=function(r,i){"undefined"!=typeof jQuery&&jQuery(e).trigger(r,i),t.emit(r,i),n.emit(r,i)},e},triggerHandler:function(e,t,n){var r,i;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var o=e._ev;if(!o)return r;var a,s=o._events[t];if(!s)return r;function l(e){return e.listener?(o.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(o,[n]))):e.apply(o,[n])}for(s=Array.isArray(s)?s:[s],a=0;a<s.length-1;a++)l(s[a]);return i=l(s[a]),void 0!==r?r:i},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};e.exports=i},1426:function(e,t,n){"use strict";var r=n(1965),i=Array.isArray;function o(e,t,n,a){var s,l,c,u,d,f,p,h=e[0],m=e.length;if(2===m&&i(h)&&i(e[1])&&0===h.length){if(p=function(e,t){var n,r;for(n=0;n<e.length;n++){if(null!==(r=e[n])&&"object"==typeof r)return!1;void 0!==r&&(t[n]=r)}return!0}(e[1],h),p)return h;h.splice(0,h.length)}for(var g=1;g<m;g++)for(l in s=e[g])c=h[l],u=s[l],a&&i(u)?h[l]=u:t&&u&&(r(u)||(d=i(u)))?(d?(d=!1,f=c&&i(c)?c:[]):f=c&&r(c)?c:{},h[l]=o([f,u],t,n,a)):(void 0!==u||n)&&(h[l]=u);return h}t.extendFlat=function(){return o(arguments,!1,!1,!1)},t.extendDeep=function(){return o(arguments,!0,!1,!1)},t.extendDeepAll=function(){return o(arguments,!0,!0,!1)},t.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},5744:function(e){"use strict";e.exports=function(e){for(var t={},n=[],r=0,i=0;i<e.length;i++){var o=e[i];1!==t[o]&&(t[o]=1,n[r++]=o)}return n}},6756:function(e){"use strict";function t(e){return!0===e.visible}function n(e){var t=e[0].trace;return!0===t.visible&&0!==t._length}e.exports=function(e){for(var r,i=(r=e,Array.isArray(r)&&Array.isArray(r[0])&&r[0][0]&&r[0][0].trace?n:t),o=[],a=0;a<e.length;a++){var s=e[a];i(s)&&o.push(s)}return o}},7642:function(e,t,n){"use strict";var r,i,o,a=n(4872).mod;function s(e,t,n,r,i,o,a,s){var l=n-e,c=i-e,u=a-i,d=r-t,f=o-t,p=s-o,h=l*p-u*d;if(0===h)return null;var m=(c*p-u*f)/h,g=(c*d-l*f)/h;return g<0||g>1||m<0||m>1?null:{x:e+l*m,y:t+d*m}}function l(e,t,n,r,i){var o=r*e+i*t;if(o<0)return r*r+i*i;if(o>n){var a=r-e,s=i-t;return a*a+s*s}var l=r*t-i*e;return l*l/n}t.segmentsIntersect=s,t.segmentDistance=function(e,t,n,r,i,o,a,c){if(s(e,t,n,r,i,o,a,c))return 0;var u=n-e,d=r-t,f=a-i,p=c-o,h=u*u+d*d,m=f*f+p*p,g=Math.min(l(u,d,h,i-e,o-t),l(u,d,h,a-e,c-t),l(f,p,m,e-i,t-o),l(f,p,m,n-i,r-o));return Math.sqrt(g)},t.getTextLocation=function(e,t,n,s){if(e===i&&s===o||(r={},i=e,o=s),r[n])return r[n];var l=e.getPointAtLength(a(n-s/2,t)),c=e.getPointAtLength(a(n+s/2,t)),u=Math.atan((c.y-l.y)/(c.x-l.x)),d=e.getPointAtLength(a(n,t)),f={x:(4*d.x+l.x+c.x)/6,y:(4*d.y+l.y+c.y)/6,theta:u};return r[n]=f,f},t.clearLocationCache=function(){i=null},t.getVisibleSegment=function(e,t,n){var r,i,o=t.left,a=t.right,s=t.top,l=t.bottom,c=0,u=e.getTotalLength(),d=u;function f(t){var n=e.getPointAtLength(t);0===t?r=n:t===u&&(i=n);var c=n.x<o?o-n.x:n.x>a?n.x-a:0,d=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(c*c+d*d)}for(var p=f(c);p;){if((c+=p+n)>d)return;p=f(c)}for(p=f(d);p;){if(c>(d-=p+n))return;p=f(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},t.findPointOnPath=function(e,t,n,r){for(var i,o,a,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,f=0,p=s;d<c;){if(i=(f+p)/2,a=(o=e.getPointAtLength(i))[n]-t,Math.abs(a)<l)return o;u*a>0?p=i:f=i,d++}return o}},3389:function(e){"use strict";e.exports=function(e){return e}},9240:function(e){"use strict";e.exports=function(e,t){if(!t)return e;var n=1/Math.abs(t),r=n>1?(n*e+n*t)/n:e+t,i=String(r).length;if(i>16){var o=String(t).length;if(i>=String(e).length+o){var a=parseFloat(r).toPrecision(12);-1===a.indexOf("e+")&&(r=+a)}}return r}},1828:function(e,t,n){"use strict";var r=n(9898),i=n(4096).g0,o=n(721).WU,a=n(2770),s=n(606),l=s.FP_SAFE,c=-l,u=s.BADNUM,d=e.exports={};d.adjustFormat=function(e){return!e||/^\d[.]\df/.test(e)||/[.]\d%/.test(e)?e:"0.f"===e?"~f":/^\d%/.test(e)?"~%":/^\ds/.test(e)?"~s":!/^[~,.0$]/.test(e)&&/[&fps]/.test(e)?"~"+e:e};var f={};d.warnBadFormat=function(e){var t=String(e);f[t]||(f[t]=1,d.warn('encountered bad format: "'+t+'"'))},d.noFormat=function(e){return String(e)},d.numberFormat=function(e){var t;try{t=o(d.adjustFormat(e))}catch(t){return d.warnBadFormat(e),d.noFormat}return t},d.nestedProperty=n(5487),d.keyedContainer=n(6636),d.relativeAttr=n(6962),d.isPlainObject=n(1965),d.toLogRange=n(8163),d.relinkPrivateKeys=n(1332);var p=n(3627);d.isTypedArray=p.isTypedArray,d.isArrayOrTypedArray=p.isArrayOrTypedArray,d.isArray1D=p.isArray1D,d.ensureArray=p.ensureArray,d.concat=p.concat,d.maxRowLength=p.maxRowLength,d.minRowLength=p.minRowLength;var h=n(4872);d.mod=h.mod,d.modHalf=h.modHalf;var m=n(6554);d.valObjectMeta=m.valObjectMeta,d.coerce=m.coerce,d.coerce2=m.coerce2,d.coerceFont=m.coerceFont,d.coercePattern=m.coercePattern,d.coerceHoverinfo=m.coerceHoverinfo,d.coerceSelectionMarkerOpacity=m.coerceSelectionMarkerOpacity,d.validate=m.validate;var g=n(1631);d.dateTime2ms=g.dateTime2ms,d.isDateTime=g.isDateTime,d.ms2DateTime=g.ms2DateTime,d.ms2DateTimeLocal=g.ms2DateTimeLocal,d.cleanDate=g.cleanDate,d.isJSDate=g.isJSDate,d.formatDate=g.formatDate,d.incrementMonth=g.incrementMonth,d.dateTick0=g.dateTick0,d.dfltRange=g.dfltRange,d.findExactDates=g.findExactDates,d.MIN_MS=g.MIN_MS,d.MAX_MS=g.MAX_MS;var v=n(5888);d.findBin=v.findBin,d.sorterAsc=v.sorterAsc,d.sorterDes=v.sorterDes,d.distinctVals=v.distinctVals,d.roundUp=v.roundUp,d.sort=v.sort,d.findIndexOfMin=v.findIndexOfMin,d.sortObjectKeys=n(8607);var y=n(38);d.aggNums=y.aggNums,d.len=y.len,d.mean=y.mean,d.median=y.median,d.midRange=y.midRange,d.variance=y.variance,d.stdev=y.stdev,d.interp=y.interp;var b=n(5657);d.init2dArray=b.init2dArray,d.transposeRagged=b.transposeRagged,d.dot=b.dot,d.translationMatrix=b.translationMatrix,d.rotationMatrix=b.rotationMatrix,d.rotationXYMatrix=b.rotationXYMatrix,d.apply3DTransform=b.apply3DTransform,d.apply2DTransform=b.apply2DTransform,d.apply2DTransform2=b.apply2DTransform2,d.convertCssMatrix=b.convertCssMatrix,d.inverseTransformMatrix=b.inverseTransformMatrix;var x=n(6348);d.deg2rad=x.deg2rad,d.rad2deg=x.rad2deg,d.angleDelta=x.angleDelta,d.angleDist=x.angleDist,d.isFullCircle=x.isFullCircle,d.isAngleInsideSector=x.isAngleInsideSector,d.isPtInsideSector=x.isPtInsideSector,d.pathArc=x.pathArc,d.pathSector=x.pathSector,d.pathAnnulus=x.pathAnnulus;var w=n(9863);d.isLeftAnchor=w.isLeftAnchor,d.isCenterAnchor=w.isCenterAnchor,d.isRightAnchor=w.isRightAnchor,d.isTopAnchor=w.isTopAnchor,d.isMiddleAnchor=w.isMiddleAnchor,d.isBottomAnchor=w.isBottomAnchor;var _=n(7642);d.segmentsIntersect=_.segmentsIntersect,d.segmentDistance=_.segmentDistance,d.getTextLocation=_.getTextLocation,d.clearLocationCache=_.clearLocationCache,d.getVisibleSegment=_.getVisibleSegment,d.findPointOnPath=_.findPointOnPath;var S=n(1426);d.extendFlat=S.extendFlat,d.extendDeep=S.extendDeep,d.extendDeepAll=S.extendDeepAll,d.extendDeepNoArrays=S.extendDeepNoArrays;var C=n(7769);d.log=C.log,d.warn=C.warn,d.error=C.error;var k=n(587);d.counterRegex=k.counter;var M=n(9990);d.throttle=M.throttle,d.throttleDone=M.done,d.clearThrottle=M.clear;var T=n(4401);function A(e){var t={};for(var n in e)for(var r=e[n],i=0;i<r.length;i++)t[r[i]]=+n;return t}d.getGraphDiv=T.getGraphDiv,d.isPlotDiv=T.isPlotDiv,d.removeElement=T.removeElement,d.addStyleRule=T.addStyleRule,d.addRelatedStyleRule=T.addRelatedStyleRule,d.deleteRelatedStyleRule=T.deleteRelatedStyleRule,d.getFullTransformMatrix=T.getFullTransformMatrix,d.getElementTransformMatrix=T.getElementTransformMatrix,d.getElementAndAncestors=T.getElementAndAncestors,d.equalDomRects=T.equalDomRects,d.clearResponsive=n(6367),d.preserveDrawingBuffer=n(5142),d.makeTraceGroups=n(7310),d._=n(5867),d.notifier=n(5046),d.filterUnique=n(5744),d.filterVisible=n(6756),d.pushUnique=n(5138),d.increment=n(9240),d.cleanNumber=n(5218),d.ensureNumber=function(e){return a(e)?(e=Number(e))>l||e<c?u:e:u},d.isIndex=function(e,t){return!(void 0!==t&&e>=t)&&a(e)&&e>=0&&e%1==0},d.noop=n(4213),d.identity=n(3389),d.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},d.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var i=0;i<t.length;i++){var o=t[i],a=d.nestedProperty(e,o.replace("?",n)),s=d.nestedProperty(e,o.replace("?",r)),l=a.get();a.set(s.get()),s.set(l)}},d.raiseToTop=function(e){e.parentNode.appendChild(e)},d.cancelTransition=function(e){return e.transition().duration(0)},d.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},d.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},d.simpleMap=function(e,t,n,r,i){for(var o=e.length,a=new Array(o),s=0;s<o;s++)a[s]=t(e[s],n,r,i);return a},d.randstr=function e(t,n,r,i){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var o,a,s=Math.log(Math.pow(2,n))/Math.log(r),l="";for(o=2;s===1/0;o*=2)s=Math.log(Math.pow(2,n/o))/Math.log(r)*o;var c=s-Math.floor(s);for(o=0;o<Math.floor(s);o++)l=Math.floor(Math.random()*r).toString(r)+l;c&&(a=Math.pow(r,c),l=Math.floor(Math.random()*a).toString(r)+l);var u=parseInt(l,r);return t&&t[l]||u!==1/0&&u>=Math.pow(2,n)?i>10?(d.warn("randstr failed uniqueness"),l):e(t,n,r,(i||0)+1):l},d.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={optionList:[],_newoption:function(r){r[t]=e,n[r.name]=r,n.optionList.push(r)}};return n["_"+t]=e,n},d.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var n,r,i,o,a=e.length,s=2*a,l=2*t-1,c=new Array(l),u=new Array(a);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;n<a;n++){for(o=0,r=0;r<l;r++)(i=n+r+1-t)<-a?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=a&&(i=s-1-i),o+=e[i]*c[r];u[n]=o}return u},d.syncOrAsync=function(e,t,n){var r;function i(){return d.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(i);return n&&n(t)},d.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},d.noneOrAll=function(e,t,n){if(e){var r,i=!1,o=!0;for(r=0;r<n.length;r++)null!=e[n[r]]?i=!0:o=!1;if(i&&!o)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]]}},d.mergeArray=function(e,t,n,r){var i="function"==typeof r;if(d.isArrayOrTypedArray(e))for(var o=Math.min(e.length,t.length),a=0;a<o;a++){var s=e[a];t[a][n]=i?r(s):s}},d.mergeArrayCastPositive=function(e,t,n){return d.mergeArray(e,t,n,(function(e){var t=+e;return isFinite(t)&&t>0?t:0}))},d.fillArray=function(e,t,n,r){if(r=r||d.identity,d.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][n]=r(e[i])},d.castOption=function(e,t,n,r){r=r||d.identity;var i=d.nestedProperty(e,n).get();return d.isArrayOrTypedArray(i)?Array.isArray(t)&&d.isArrayOrTypedArray(i[t[0]])?r(i[t[0]][t[1]]):r(i[t]):i},d.extractOption=function(e,t,n,r){if(n in e)return e[n];var i=d.nestedProperty(t,r).get();return Array.isArray(i)?void 0:i},d.tagSelected=function(e,t,n){var r,i,o=t.selectedpoints,a=t._indexToPoints;a&&(r=A(a));for(var s=0;s<o.length;s++){var l=o[s];if(d.isIndex(l)||d.isArrayOrTypedArray(l)&&d.isIndex(l[0])&&d.isIndex(l[1])){var c=r?r[l]:l,u=n?n[c]:c;void 0!==(i=u)&&i<e.length&&(e[u].selected=1)}}},d.selIndices2selPoints=function(e){var t=e.selectedpoints,n=e._indexToPoints;if(n){for(var r=A(n),i=[],o=0;o<t.length;o++){var a=t[o];if(d.isIndex(a)){var s=r[a];d.isIndex(s)&&i.push(s)}}return i}return t},d.getTargetArray=function(e,t){var n=t.target;if("string"==typeof n&&n){var r=d.nestedProperty(e,n).get();return!!Array.isArray(r)&&r}return!!Array.isArray(n)&&n},d.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});var r,i,o,a=Object.keys(e);for(r=0;r<a.length;r++)o=e[i=a[r]],"_"!==i.charAt(0)&&"function"!=typeof o&&("module"===i?n[i]=o:Array.isArray(o)?n[i]="colorscale"===i?o.slice():o.slice(0,3):d.isTypedArray(o)?n[i]=o.subarray(0,3):n[i]=o&&"object"==typeof o?d.minExtend(e[i],t[i]):o);for(a=Object.keys(t),r=0;r<a.length;r++)"object"==typeof(o=t[i=a[r]])&&i in n&&"object"==typeof n[i]||(n[i]=o);return n},d.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},d.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},d.isIE=function(){return void 0!==window.navigator.msSaveBlob};var E=/Version\/[\d\.]+.*Safari/;d.isSafari=function(){return E.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;d.isIOS=function(){return P.test(window.navigator.userAgent)};var R=/Firefox\/(\d+)\.\d+/;d.getFirefoxVersion=function(){var e=R.exec(window.navigator.userAgent);if(e&&2===e.length){var t=parseInt(e[1]);if(!isNaN(t))return t}return null},d.isD3Selection=function(e){return e instanceof r.selection},d.ensureSingle=function(e,t,n,r){var i=e.select(t+(n?"."+n:""));if(i.size())return i;var o=e.append(t);return n&&o.classed(n,!0),r&&o.call(r),o},d.ensureSingleById=function(e,t,n,r){var i=e.select(t+"#"+n);if(i.size())return i;var o=e.append(t).attr("id",n);return r&&o.call(r),o},d.objectFromPath=function(e,t){for(var n,r=e.split("."),i=n={},o=0;o<r.length;o++){var a=r[o],s=null,l=r[o].match(/(.*)\[([0-9]+)\]/);l?(a=l[1],s=l[2],n=n[a]=[],o===r.length-1?n[s]=t:n[s]={},n=n[s]):(o===r.length-1?n[a]=t:n[a]={},n=n[a])}return i};var O=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;d.expandObjectPaths=function(e){var t,n,r,i,o,a,s;if("object"==typeof e&&!Array.isArray(e))for(n in e)e.hasOwnProperty(n)&&((t=n.match(O))?(i=e[n],r=t[1],delete e[n],e[r]=d.extendDeepNoArrays(e[r]||{},d.objectFromPath(n,d.expandObjectPaths(i))[r])):(t=n.match(I))?(i=e[n],r=t[1],o=parseInt(t[2]),delete e[n],e[r]=e[r]||[],"."===t[3]?(s=t[4],a=e[r][o]=e[r][o]||{},d.extendDeepNoArrays(a,d.objectFromPath(s,d.expandObjectPaths(i)))):e[r][o]=d.expandObjectPaths(i)):e[n]=d.expandObjectPaths(e[n]));return e},d.numSeparate=function(e,t,n){if(n||(n=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,i=t.charAt(0),o=t.charAt(1),a=e.split("."),s=a[0],l=a.length>1?i+a[1]:"";if(o&&(a.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+o+"$2");return s+l},d.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var L=/^\w*$/;d.templateString=function(e,t){var n={};return e.replace(d.TEMPLATE_STRING_REGEX,(function(e,r){var i;return L.test(r)?i=t[r]:(n[r]=n[r]||d.nestedProperty(t,r).get,i=n[r]()),d.isValidTextValue(i)?i:""}))};var D={max:10,count:0,name:"hovertemplate"};d.hovertemplateString=function(){return z.apply(D,arguments)};var N={max:10,count:0,name:"texttemplate"};d.texttemplateString=function(){return z.apply(N,arguments)};var F=/^[:|\|]/;function z(e,t,n){var r=this,o=arguments;t||(t={});var a={};return e.replace(d.TEMPLATE_STRING_REGEX,(function(e,s,l){var c,u,f,p="_xother"===s||"_yother"===s,h="_xother_"===s||"_yother_"===s,m="xother_"===s||"yother_"===s,g="xother"===s||"yother"===s||p||m||h,v=s;if((p||h)&&(v=v.substring(1)),(m||h)&&(v=v.substring(0,v.length-1)),g){if(void 0===(c=t[v]))return""}else for(f=3;f<o.length;f++)if(u=o[f]){if(u.hasOwnProperty(v)){c=u[v];break}if(L.test(v)||(c=d.nestedProperty(u,v).get(),(c=a[v]||d.nestedProperty(u,v).get())&&(a[v]=c)),void 0!==c)break}if(void 0===c&&r)return r.count<r.max&&(d.warn("Variable '"+v+"' in "+r.name+" could not be found!"),c=e),r.count===r.max&&d.warn("Too many "+r.name+" warnings - additional warnings will be suppressed"),r.count++,e;if(l){var y;if(":"===l[0]&&(c=(y=n?n.numberFormat:d.numberFormat)(l.replace(F,""))(c)),"|"===l[0]){y=n?n.timeFormat:i;var b=d.dateTime2ms(c);c=d.formatDate(b,l.replace(F,""),!1,y)}}else{var x=v+"Label";t.hasOwnProperty(x)&&(c=t[x])}return g&&(c="("+c+")",(p||h)&&(c=" "+c),(m||h)&&(c+=" ")),c}))}d.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,i=0,o=0;o<n;o++){var a=e.charCodeAt(o)||0,s=t.charCodeAt(o)||0,l=a>=48&&a<=57,c=s>=48&&s<=57;if(l&&(r=10*r+a-48),c&&(i=10*i+s-48),!l||!c){if(r!==i)return r-i;if(a!==s)return a-s}}return i-r};var B=2e9;d.seedPseudoRandom=function(){B=2e9},d.pseudoRandom=function(){var e=B;return B=(69069*B+1)%4294967296,Math.abs(B-e)<429496729?d.pseudoRandom():B/4294967296},d.fillText=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},i=d.extractOption(e,t,"htx","hovertext");if(d.isValidTextValue(i))return r(i);var o=d.extractOption(e,t,"tx","text");return d.isValidTextValue(o)?r(o):void 0},d.isValidTextValue=function(e){return e||0===e},d.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",r=0;r<t;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},d.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||"none"===t},d.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},d.strRotate=function(e){return e?"rotate("+e+")":""},d.strScale=function(e){return 1!==e?"scale("+e+")":""},d.getTextTransform=function(e){var t=e.noCenter,n=e.textX,r=e.textY,i=e.targetX,o=e.targetY,a=e.anchorX||0,s=e.anchorY||0,l=e.rotate,c=e.scale;return c?c>1&&(c=1):c=0,d.strTranslate(i-c*(n+a),o-c*(r+s))+d.strScale(c)+(l?"rotate("+l+(t?"":" "+n+" "+r)+")":"")},d.setTransormAndDisplay=function(e,t){e.attr("transform",d.getTextTransform(t)),e.style("display",t.scale?null:"none")},d.ensureUniformFontSize=function(e,t){var n=d.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},d.join2=function(e,t,n){var r=e.length;return r>1?e.slice(0,-1).join(t)+n+e[r-1]:e.join(t)},d.bigFont=function(e){return Math.round(1.2*e)};var j=d.getFirefoxVersion(),Z=null!==j&&j<86;d.getPositionFromD3Event=function(){return Z?[r.event.layerX,r.event.layerY]:[r.event.offsetX,r.event.offsetY]}},1965:function(e){"use strict";e.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},6636:function(e,t,n){"use strict";var r=n(5487),i=/^\w*$/;e.exports=function(e,t,n,o){var a,s,l;n=n||"name",o=o||"value";var c={};t&&t.length?(l=r(e,t),s=l.get()):s=e,t=t||"";var u={};if(s)for(a=0;a<s.length;a++)u[s[a][n]]=a;var d=i.test(o),f={set:function(e,t){var i=null===t?4:0;if(!s){if(!l||4===i)return;s=[],l.set(s)}var a=u[e];if(void 0===a){if(4===i)return;i|=3,a=s.length,u[e]=a}else t!==(d?s[a][o]:r(s[a],o).get())&&(i|=2);var p=s[a]=s[a]||{};return p[n]=e,d?p[o]=t:r(p,o).set(t),null!==t&&(i&=-5),c[a]=c[a]|i,f},get:function(e){if(s){var t=u[e];return void 0===t?void 0:d?s[t][o]:r(s[t],o).get()}},rename:function(e,t){var r=u[e];return void 0===r||(c[r]=1|c[r],u[t]=r,delete u[e],s[r][n]=t),f},remove:function(e){var t=u[e];if(void 0===t)return f;var i=s[t];if(Object.keys(i).length>2)return c[t]=2|c[t],f.set(e,null);if(d){for(a=t;a<s.length;a++)c[a]=3|c[a];for(a=t;a<s.length;a++)u[s[a][n]]--;s.splice(t,1),delete u[e]}else r(i,o).set(null),c[t]=6|c[t];return f},constructUpdate:function(){for(var e,i,a={},l=Object.keys(c),u=0;u<l.length;u++)i=l[u],e=t+"["+i+"]",s[i]?(1&c[i]&&(a[e+"."+n]=s[i][n]),2&c[i]&&(a[e+"."+o]=d?4&c[i]?null:s[i][o]:4&c[i]?null:r(s[i],o).get())):a[e]=null;return a}};return f}},5867:function(e,t,n){"use strict";var r=n(3972);e.exports=function(e,t){for(var n=e._context.locale,i=0;i<2;i++){for(var o=e._context.locales,a=0;a<2;a++){var s=(o[n]||{}).dictionary;if(s){var l=s[t];if(l)return l}o=r.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return t}},7769:function(e,t,n){"use strict";var r=n(2075).dfltConfig,i=n(5046),o=e.exports={};o.log=function(){var e;if(r.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(r.notifyOnLogging>1){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"long")}},o.warn=function(){var e;if(r.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(r.notifyOnLogging>0){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"stick")}},o.error=function(){var e;if(r.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(r.notifyOnLogging>0){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"stick")}}},7310:function(e,t,n){"use strict";var r=n(9898);e.exports=function(e,t,n){var i=e.selectAll("g."+n.replace(/\s/g,".")).data(t,(function(e){return e[0].trace.uid}));i.exit().remove(),i.enter().append("g").attr("class",n),i.order();var o=e.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each((function(e){e[0][o]=r.select(this)})),i}},5657:function(e,t,n){"use strict";var r=n(9576);t.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},t.transposeRagged=function(e){var t,n,r=0,i=e.length;for(t=0;t<i;t++)r=Math.max(r,e[t].length);var o=new Array(r);for(t=0;t<r;t++)for(o[t]=new Array(i),n=0;n<i;n++)o[t][n]=e[n][t];return o},t.dot=function(e,n){if(!e.length||!n.length||e.length!==n.length)return null;var r,i,o=e.length;if(e[0].length)for(r=new Array(o),i=0;i<o;i++)r[i]=t.dot(e[i],n);else if(n[0].length){var a=t.transposeRagged(n);for(r=new Array(a.length),i=0;i<a.length;i++)r[i]=t.dot(e,a[i])}else for(r=0,i=0;i<o;i++)r+=e[i]*n[i];return r},t.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},t.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},t.rotationXYMatrix=function(e,n,r){return t.dot(t.dot(t.translationMatrix(n,r),t.rotationMatrix(e)),t.translationMatrix(-n,-r))},t.apply3DTransform=function(e){return function(){var n=arguments,r=1===arguments.length?n[0]:[n[0],n[1],n[2]||0];return t.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}},t.apply2DTransform=function(e){return function(){var n=arguments;3===n.length&&(n=n[0]);var r=1===arguments.length?n[0]:[n[0],n[1]];return t.dot(e,[r[0],r[1],1]).slice(0,2)}},t.apply2DTransform2=function(e){var n=t.apply2DTransform(e);return function(e){return n(e.slice(0,2)).concat(n(e.slice(2,4)))}},t.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.inverseTransformMatrix=function(e){var t=[];return r.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},4872:function(e){"use strict";e.exports={mod:function(e,t){var n=e%t;return n<0?n+t:n},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},5487:function(e,t,n){"use strict";var r=n(2770),i=n(3627).isArrayOrTypedArray;function o(e,t){return function(){var n,r,a,s,l,c=e;for(s=0;s<t.length-1;s++){if(-1===(n=t[s])){for(r=!0,a=[],l=0;l<c.length;l++)a[l]=o(c[l],t.slice(s+1))(),a[l]!==a[0]&&(r=!1);return r?a[0]:a}if("number"==typeof n&&!i(c))return;if("object"!=typeof(c=c[n])||null===c)return}if("object"==typeof c&&null!==c&&null!==(a=c[t[s]]))return a}}e.exports=function(e,t){if(r(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,i,a,s=0,c=t.split(".");s<c.length;){if(n=String(c[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])c[s]=n[1];else{if(0!==s)throw"bad property string";c.splice(0,1)}for(i=n[2].substr(1,n[2].length-2).split("]["),a=0;a<i.length;a++)s++,c.splice(s,0,Number(i[a]))}s++}return"object"!=typeof e?function(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}(e,t,c):{set:l(e,c,t),get:o(e,c),astr:t,parts:c,obj:e}};var a=/(^|\.)args\[/;function s(e,t){return void 0===e||null===e&&!t.match(a)}function l(e,t,n){return function(r){var o,a,l=e,f="",p=[[e,f]],h=s(r,n);for(a=0;a<t.length-1;a++){if("number"==typeof(o=t[a])&&!i(l))throw"array index but container is not an array";if(-1===o){if(h=!u(l,t.slice(a+1),r,n))break;return}if(!d(l,o,t[a+1],h))break;if("object"!=typeof(l=l[o])||null===l)throw"container is not an object";f=c(f,o),p.push([l,f])}if(h){if(a===t.length-1&&(delete l[t[a]],Array.isArray(l)&&+t[a]==l.length-1))for(;l.length&&void 0===l[l.length-1];)l.pop()}else l[t[a]]=r}}function c(e,t){var n=t;return r(t)?n="["+t+"]":e&&(n="."+t),e+n}function u(e,t,n,r){var o,a=i(n),c=!0,u=n,f=r.replace("-1",0),p=!a&&s(n,f),h=t[0];for(o=0;o<e.length;o++)f=r.replace("-1",o),a&&(p=s(u=n[o%n.length],f)),p&&(c=!1),d(e,o,h,p)&&l(e[o],t,r.replace("-1",o))(u);return c}function d(e,t,n,r){if(void 0===e[t]){if(r)return!1;e[t]="number"==typeof n?[]:{}}return!0}},4213:function(e){"use strict";e.exports=function(){}},5046:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=[];e.exports=function(e,t){if(-1===o.indexOf(e)){o.push(e);var n=1e3;i(t)?n=t:"long"===t&&(n=3e3);var a=r.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each((function(e){var i=r.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",(function(){i.transition().call(s)}));for(var o=i.append("p"),a=e.split(/<br\s*\/?>/g),l=0;l<a.length;l++)l&&o.append("br"),o.append("span").text(a[l]);"stick"===t?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(n).call(s)}))}function s(e){e.duration(700).style("opacity",0).each("end",(function(e){var t=o.indexOf(e);-1!==t&&o.splice(t,1),r.select(this).remove()}))}}},9918:function(e,t,n){"use strict";var r=n(6964),i="data-savedcursor";e.exports=function(e,t){var n=e.attr(i);if(t){if(!n){for(var o=(e.attr("class")||"").split(" "),a=0;a<o.length;a++){var s=o[a];0===s.indexOf("cursor-")&&e.attr(i,s.substr(7)).classed(s,!1)}e.attr(i)||e.attr(i,"!!")}r(e,t)}else n&&(e.attr(i,null),"!!"===n?r(e):r(e,n))}},1082:function(e,t,n){"use strict";var r=n(5657).dot,i=n(606).BADNUM,o=e.exports={};o.tester=function(e){var t,n=e.slice(),r=n[0][0],o=r,a=n[0][1],s=a;for(n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),t=1;t<n.length;t++)r=Math.min(r,n[t][0]),o=Math.max(o,n[t][0]),a=Math.min(a,n[t][1]),s=Math.max(s,n[t][1]);var l,c=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(c=!0,l=function(e){return e[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(c=!0,l=function(e){return e[1]===n[0][1]}));var u=!0,d=n[0];for(t=1;t<n.length;t++)if(d[0]!==n[t][0]||d[1]!==n[t][1]){u=!1;break}return{xmin:r,xmax:o,ymin:a,ymax:s,pts:n,contains:c?function(e,t){var n=e[0],c=e[1];return!(n===i||n<r||n>o||c===i||c<a||c>s||t&&l(e))}:function(e,t){var l=e[0],c=e[1];if(l===i||l<r||l>o||c===i||c<a||c>s)return!1;var u,d,f,p,h,m=n.length,g=n[0][0],v=n[0][1],y=0;for(u=1;u<m;u++)if(d=g,f=v,g=n[u][0],v=n[u][1],!(l<(p=Math.min(d,g))||l>Math.max(d,g)||c>Math.max(f,v)))if(c<Math.min(f,v))l!==p&&y++;else{if(c===(h=g===d?c:f+(l-d)*(v-f)/(g-d)))return 1!==u||!t;c<=h&&l!==p&&y++}return y%2==1},isRect:c,degenerate:u}},o.isSegmentBent=function(e,t,n,i){var o,a,s,l=e[t],c=[e[n][0]-l[0],e[n][1]-l[1]],u=r(c,c),d=Math.sqrt(u),f=[-c[1]/d,c[0]/d];for(o=t+1;o<n;o++)if(a=[e[o][0]-l[0],e[o][1]-l[1]],(s=r(a,c))<0||s>u||Math.abs(r(a,f))>i)return!0;return!1},o.filter=function(e,t){var n=[e[0]],r=0,i=0;function a(a){e.push(a);var s=n.length,l=r;n.splice(i+1);for(var c=l+1;c<e.length;c++)(c===e.length-1||o.isSegmentBent(e,l,c+1,t))&&(n.push(e[c]),n.length<s-2&&(r=c,i=n.length-1),l=c)}return e.length>1&&a(e.pop()),{addPt:a,raw:e,filtered:n}}},5142:function(e,t,n){"use strict";var r=n(2770),i=n(5791);e.exports=function(e){var t;if("string"!=typeof(t=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;return"undefined"!=typeof navigator&&(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),e}()))return!0;var n=i({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!n)for(var o=t.split(" "),a=1;a<o.length;a++)if(-1!==o[a].indexOf("Safari"))for(var s=a-1;s>-1;s--){var l=o[s];if("Version/"===l.substr(0,8)){var c=l.substr(8).split(".")[0];if(r(c)&&(c=+c),c>=13)return!0}}return n}},5138:function(e){"use strict";e.exports=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),r=0;r<e.length;r++)if(e[r]instanceof RegExp&&e[r].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},847:function(e,t,n){"use strict";var r=n(1828),i=n(2075).dfltConfig,o={add:function(e,t,n,r,o){var a,s;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,a),e.undoQueue.index+=1):a=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(n),a.redo.calls.push(r),a.redo.args.push(o)),e.undoQueue.queue.length>i.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)o.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)o.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}},plotDo:function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,i=[],o=0;o<t.length;o++)n=t[o],i[o]=n===e?n:"object"==typeof n?Array.isArray(n)?r.extendDeep([],n):r.extendDeepAll({},n):n;return i}(e,n),t.apply(null,n)}};e.exports=o},587:function(e,t){"use strict";t.counter=function(e,t,n,r){var i=(t||"")+(n?"":"$"),o=!1===r?"":"^";return"xy"===e?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+i):new RegExp(o+e+"([2-9]|[1-9][0-9]+)?"+i)}},6962:function(e){"use strict";var t=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,n=/^[^\.\[\]]+$/;e.exports=function(e,r){for(;r;){var i=e.match(t);if(i)e=i[1];else{if(!e.match(n))throw new Error("bad relativeAttr call:"+[e,r]);e=""}if("^"!==r.charAt(0))break;r=r.slice(1)}return e&&"["!==r.charAt(0)?e+"."+r:e+r}},1332:function(e,t,n){"use strict";var r=n(3627).isArrayOrTypedArray,i=n(1965);e.exports=function e(t,n){for(var o in n){var a=n[o],s=t[o];if(s!==a)if("_"===o.charAt(0)||"function"==typeof a){if(o in t)continue;t[o]=a}else if(r(a)&&r(s)&&i(a[0])){if("customdata"===o||"ids"===o)continue;for(var l=Math.min(a.length,s.length),c=0;c<l;c++)s[c]!==a[c]&&i(a[c])&&i(s[c])&&e(s[c],a[c])}else i(a)&&i(s)&&(e(s,a),Object.keys(s).length||delete t[o])}}},5888:function(e,t,n){"use strict";var r=n(2770),i=n(7769),o=n(3389),a=n(606).BADNUM,s=1e-9;function l(e,t){return e<t}function c(e,t){return e<=t}function u(e,t){return e>t}function d(e,t){return e>=t}t.findBin=function(e,t,n){if(r(t.start))return n?Math.ceil((e-t.start)/t.size-s)-1:Math.floor((e-t.start)/t.size+s);var o,a,f=0,p=t.length,h=0,m=p>1?(t[p-1]-t[0])/(p-1):1;for(a=m>=0?n?l:c:n?d:u,e+=m*s*(n?-1:1)*(m>=0?1:-1);f<p&&h++<100;)a(t[o=Math.floor((f+p)/2)],e)?f=o+1:p=o;return h>90&&i.log("Long binary search..."),f-1},t.sorterAsc=function(e,t){return e-t},t.sorterDes=function(e,t){return t-e},t.distinctVals=function(e){var n,r=e.slice();for(r.sort(t.sorterAsc),n=r.length-1;n>-1&&r[n]===a;n--);for(var i,o=r[n]-r[0]||1,s=o/(n||1)/1e4,l=[],c=0;c<=n;c++){var u=r[c],d=u-i;void 0===i?(l.push(u),i=u):d>s&&(o=Math.min(o,d),l.push(u),i=u)}return{vals:l,minDiff:o}},t.roundUp=function(e,t,n){for(var r,i=0,o=t.length-1,a=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;i<o&&a++<100;)t[r=c((i+o)/2)]<=e?i=r+s:o=r-l;return t[i]},t.sort=function(e,t){for(var n=0,r=0,i=1;i<e.length;i++){var o=t(e[i],e[i-1]);if(o<0?n=1:o>0&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},t.findIndexOfMin=function(e,t){t=t||o;for(var n,r=1/0,i=0;i<e.length;i++){var a=t(e[i]);a<r&&(r=a,n=i)}return n}},6964:function(e){"use strict";e.exports=function(e,t){(e.attr("class")||"").split(" ").forEach((function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)})),t&&e.classed("cursor-"+t,!0)}},8607:function(e){"use strict";e.exports=function(e){return Object.keys(e).sort()}},38:function(e,t,n){"use strict";var r=n(2770),i=n(3627).isArrayOrTypedArray;t.aggNums=function(e,n,o,a){var s,l;if((!a||a>o.length)&&(a=o.length),r(n)||(n=!1),i(o[0])){for(l=new Array(a),s=0;s<a;s++)l[s]=t.aggNums(e,n,o[s]);o=l}for(s=0;s<a;s++)r(n)?r(o[s])&&(n=e(+n,+o[s])):n=o[s];return n},t.len=function(e){return t.aggNums((function(e){return e+1}),0,e)},t.mean=function(e,n){return n||(n=t.len(e)),t.aggNums((function(e,t){return e+t}),0,e)/n},t.midRange=function(e){if(void 0!==e&&0!==e.length)return(t.aggNums(Math.max,null,e)+t.aggNums(Math.min,null,e))/2},t.variance=function(e,n,i){return n||(n=t.len(e)),r(i)||(i=t.mean(e,n)),t.aggNums((function(e,t){return e+Math.pow(t-i,2)}),0,e)/n},t.stdev=function(e,n,r){return Math.sqrt(t.variance(e,n,r))},t.median=function(e){var n=e.slice().sort();return t.interp(n,.5)},t.interp=function(e,t){if(!r(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},3893:function(e,t,n){"use strict";var r=n(9898),i=n(1828),o=i.strTranslate,a=n(7922),s=n(8783).LINE_SPACING,l=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;t.convertToTspans=function(e,n,g){var T=e.text(),A=!e.attr("data-notex")&&n&&n._context.typesetMath&&"undefined"!=typeof MathJax&&T.match(l),R=r.select(e.node().parentNode);if(!R.empty()){var O=e.attr("class")?e.attr("class").split(" ")[0]:"text";return O+="-math",R.selectAll("svg."+O).remove(),R.selectAll("g."+O+"-group").remove(),e.style("display",null).attr({"data-unformatted":T,"data-math":"N"}),A?(n&&n._promises||[]).push(new Promise((function(t){e.style("display","none");var n=parseInt(e.node().style.fontSize,10),a={fontSize:n};!function(e,t,n){var o,a,s,l,f=parseInt((MathJax.version||"").split(".")[0]);if(2===f||3===f){var p=function(){var n="math-output-"+i.randstr({},64),o=(l=r.select("body").append("div").attr({id:n}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(e.replace(c,"\\lt ").replace(u,"\\gt "))).node();return 2===f?MathJax.Hub.Typeset(o):MathJax.typeset([o])},h=function(){var t=l.select(2===f?".MathJax_SVG":".MathJax"),o=!t.empty()&&l.select("svg").node();if(o){var a,s=o.getBoundingClientRect();a=2===f?r.select("body").select("#MathJax_SVG_glyphs"):t.select("defs"),n(t,a,s)}else i.log("There was an error in the tex syntax.",e),n();l.remove()};2===f?MathJax.Hub.Queue((function(){return a=i.extendDeepAll({},MathJax.Hub.config),s=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:d},displayAlign:"left"})}),(function(){if("SVG"!==(o=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")}),p,h,(function(){if("SVG"!==o)return MathJax.Hub.setRenderer(o)}),(function(){return void 0!==s&&(MathJax.Hub.processSectionDelay=s),MathJax.Hub.Config(a)})):3===f&&(a=i.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=d,"svg"!==(o=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then((function(){p(),h(),"svg"!==o&&(MathJax.config.startup.output=o),MathJax.config=a})))}else i.warn("No MathJax version:",MathJax.version)}(A[2],a,(function(r,i,a){R.selectAll("svg."+O).remove(),R.selectAll("g."+O+"-group").remove();var s=r&&r.select("svg");if(!s||!s.node())return I(),void t();var l=R.append("g").classed(O+"-group",!0).attr({"pointer-events":"none","data-unformatted":T,"data-math":"Y"});l.node().appendChild(s.node()),i&&i.node()&&s.node().insertBefore(i.node().cloneNode(!0),s.node().firstChild);var c=a.width,u=a.height;s.attr({class:O,height:u,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var d=e.node().style.fill||"black",f=s.select("g");f.attr({fill:d,stroke:d});var p=f.node().getBoundingClientRect(),h=p.width,m=p.height;(h>c||m>u)&&(s.style("overflow","hidden"),h=(p=s.node().getBoundingClientRect()).width,m=p.height);var v=+e.attr("x"),y=+e.attr("y"),b=-(n||e.node().getBoundingClientRect().height)/4;if("y"===O[0])l.attr({transform:"rotate("+[-90,v,y]+")"+o(-h/2,b-m/2)});else if("l"===O[0])y=b-m/2;else if("a"===O[0]&&0!==O.indexOf("atitle"))v=0,y=b;else{var x=e.attr("text-anchor");v-=h*("middle"===x?.5:"end"===x?1:0),y=y+b-m/2}s.attr({x:v,y:y}),g&&g.call(e,l),t(l)}))}))):I(),e}function I(){R.empty()||(O=e.attr("class")+"-math",R.select("svg."+O).remove()),e.text("").style("white-space","pre");var n=function(e,t){t=t.replace(v," ");var n,o=!1,l=[],c=-1;function u(){c++;var t=document.createElementNS(a.svg,"tspan");r.select(t).attr({class:"line",dy:c*s+"em"}),e.appendChild(t),n=t;var i=l;if(l=[{node:t}],i.length>1)for(var o=1;o<i.length;o++)d(i[o])}function d(e){var t,i=e.type,o={};if("a"===i){t="a";var s=e.target,c=e.href,u=e.popup;c&&(o={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":c},u&&(o.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else t="tspan";e.style&&(o.style=e.style);var d=document.createElementNS(a.svg,t);if("sup"===i||"sub"===i){g(n,m),n.appendChild(d);var f=document.createElementNS(a.svg,"tspan");g(f,m),r.select(f).attr("dy",h[i]),o.dy=p[i],n.appendChild(d),n.appendChild(f)}else n.appendChild(d);r.select(d).attr(o),n=e.node=d,l.push(e)}function g(e,t){e.appendChild(document.createTextNode(t))}function T(e){if(1!==l.length){var r=l.pop();e!==r.type&&i.log("Start tag <"+r.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t),n=l[l.length-1].node}else i.log("Ignoring unexpected end tag </"+e+">.",t)}x.test(t)?u():(n=e,l=[{node:e}]);for(var A=t.split(y),R=0;R<A.length;R++){var O=A[R],I=O.match(b),L=I&&I[2].toLowerCase(),D=f[L];if("br"===L)u();else if(void 0===D)g(n,E(O));else if(I[1])T(L);else{var N=I[4],F={type:L},z=k(N,w);if(z?(z=z.replace(M,"$1 fill:"),D&&(z+=";"+D)):D&&(z=D),z&&(F.style=z),"a"===L){o=!0;var B=k(N,_);if(B){var j=P(B);j&&(F.href=j,F.target=k(N,S)||"_blank",F.popup=k(N,C))}}d(F)}}return o}(e.node(),T);n&&e.style("pointer-events","all"),t.positionText(e),g&&g.call(e)}};var c=/(<|&lt;|&#60;)/g,u=/(>|&gt;|&#62;)/g,d=[["$","$"],["\\(","\\)"]],f={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},p={sub:"0.3em",sup:"-0.6em"},h={sub:"-0.21em",sup:"0.42em"},m="\u200b",g=["http:","https:","mailto:","",void 0,":"],v=t.NEWLINES=/(\r\n?|\n)/g,y=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,x=/<br(\s+.*)?>/i;t.BR_TAG_ALL=/<br(\s+.*)?>/gi;var w=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,S=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,C=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function k(e,t){if(!e)return null;var n=e.match(t),r=n&&(n[3]||n[4]);return r&&E(r)}var M=/(^|;)\s*color:/;t.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,r=void 0!==t.allowedTags?t.allowedTags:["br"],i="...".length,o=e.split(y),a=[],s="",l=0,c=0;c<o.length;c++){var u=o[c],d=u.match(b),f=d&&d[2].toLowerCase();if(f)-1!==r.indexOf(f)&&(a.push(u),s=f);else{var p=u.length;if(l+p<n)a.push(u),l+=p;else if(l<n){var h=n-l;s&&("br"!==s||h<=i||p<=i)&&a.pop(),n>i?a.push(u.substr(0,h-i)+"..."):a.push(u.substr(0,h));break}s=""}}return a.join("")};var T={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},A=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(e){return e.replace(A,(function(e,t){return("#"===t.charAt(0)?function(e){if(!(e>1114111)){var t=String.fromCodePoint;if(t)return t(e);var n=String.fromCharCode;return e<=65535?n(e):n(55232+(e>>10),e%1024+56320)}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):T[t])||e}))}function P(e){var t=encodeURI(decodeURI(e)),n=document.createElement("a"),r=document.createElement("a");n.href=e,r.href=t;var i=n.protocol,o=r.protocol;return-1!==g.indexOf(i)&&-1!==g.indexOf(o)?t:""}function R(e,t,n){var r,o,a,s=n.horizontalAlign,l=n.verticalAlign||"top",c=e.node().getBoundingClientRect(),u=t.node().getBoundingClientRect();return o="bottom"===l?function(){return c.bottom-r.height}:"middle"===l?function(){return c.top+(c.height-r.height)/2}:function(){return c.top},a="right"===s?function(){return c.right-r.width}:"center"===s?function(){return c.left+(c.width-r.width)/2}:function(){return c.left},function(){r=this.node().getBoundingClientRect();var e=a()-u.left,t=o()-u.top,s=n.gd||{};if(n.gd){s._fullLayout._calcInverseTransform(s);var l=i.apply3DTransform(s._fullLayout._invTransform)(e,t);e=l[0],t=l[1]}return this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}t.convertEntities=E,t.sanitizeHTML=function(e){e=e.replace(v," ");for(var t=document.createElement("p"),n=t,i=[],o=e.split(y),a=0;a<o.length;a++){var s=o[a],l=s.match(b),c=l&&l[2].toLowerCase();if(c in f)if(l[1])i.length&&(n=i.pop());else{var u=l[4],d=k(u,w),p=d?{style:d}:{};if("a"===c){var h=k(u,_);if(h){var m=P(h);if(m){p.href=m;var g=k(u,S);g&&(p.target=g)}}}var x=document.createElement(c);n.appendChild(x),r.select(x).attr(p),n=x,i.push(x)}else n.appendChild(document.createTextNode(E(s)))}return t.innerHTML},t.lineCount=function(e){return e.selectAll("tspan.line").size()||1},t.positionText=function(e,t,n){return e.each((function(){var e=r.select(this);function i(t,n){return void 0===n?null===(n=e.attr(t))&&(e.attr(t,0),n=0):e.attr(t,n),n}var o=i("x",t),a=i("y",n);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:o,y:a})}))};var O="1px ";t.makeTextShadow=function(e){return"1px 1px 1px "+e+", -1px -"+O+O+e+", 1px -"+O+O+e+", -"+O+O+O+e},t.makeEditable=function(e,t){var n=t.gd,i=t.delegate,o=r.dispatch("edit","input","cancel"),a=i||e;if(e.style({"pointer-events":i?"none":"all"}),1!==e.size())throw new Error("boo");function s(){var i,s,c,u,d;i=r.select(n).select(".svg-container"),s=i.append("div"),c=e.node().style,u=parseFloat(c.fontSize||12),void 0===(d=t.text)&&(d=e.attr("data-unformatted")),s.classed("plugin-editable editable",!0).style({position:"absolute","font-family":c.fontFamily||"Arial","font-size":u,color:t.fill||c.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-u/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(d).call(R(e,i,t)).on("blur",(function(){n._editing=!1,e.text(this.textContent).style({opacity:1});var t,i=r.select(this).attr("class");(t=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(e.node().parentNode).select(t).style({opacity:0});var a=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),o.edit.call(e,a)})).on("focus",(function(){var e=this;n._editing=!0,r.select(document).on("mouseup",(function(){if(r.event.target===e)return!1;document.activeElement===s.node()&&s.node().blur()}))})).on("keyup",(function(){27===r.event.which?(n._editing=!1,e.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",(function(){return!1})).transition().remove(),o.cancel.call(e,this.textContent)):(o.input.call(e,this.textContent),r.select(this).call(R(e,i,t)))})).on("keydown",(function(){13===r.event.which&&this.blur()})).call(l),e.style({opacity:0});var f,p=a.attr("class");(f=p?"."+p.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(e.node().parentNode).select(f).style({opacity:0})}function l(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}return t.immediate?s():a.on("click",s),r.rebind(e,o,"on")}},9990:function(e,t){"use strict";var n={};function r(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}t.throttle=function(e,t,i){var o=n[e],a=Date.now();if(!o){for(var s in n)n[s].ts<a-6e4&&delete n[s];o=n[e]={ts:0,timer:null}}function l(){i(),o.ts=Date.now(),o.onDone&&(o.onDone(),o.onDone=null)}r(o),a>o.ts+t?l():o.timer=setTimeout((function(){l(),o.timer=null}),t)},t.done=function(e){var t=n[e];return t&&t.timer?new Promise((function(e){var n=t.onDone;t.onDone=function(){n&&n(),e(),t.onDone=null}})):Promise.resolve()},t.clear=function(e){if(e)r(n[e]),delete n[e];else for(var i in n)t.clear(i)}},8163:function(e,t,n){"use strict";var r=n(2770);e.exports=function(e,t){if(e>0)return Math.log(e)/Math.LN10;var n=Math.log(Math.min(t[0],t[1]))/Math.LN10;return r(n)||(n=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),n}},7815:function(e){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},2177:function(e){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},4458:function(e,t,n){"use strict";var r=n(3972);e.exports=function(e){for(var t,n,i=r.layoutArrayContainers,o=r.layoutArrayRegexes,a=e.split("[")[0],s=0;s<o.length;s++)if((n=e.match(o[s]))&&0===n.index){t=n[0];break}if(t||(t=i[i.indexOf(a)]),!t)return!1;var l=e.substr(t.length);return l?!!(n=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},962:function(e,t,n){"use strict";var r=n(1828),i=r.extendFlat,o=r.isPlainObject,a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},s={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},l=a.flags.slice().concat(["fullReplot"]),c=s.flags.slice().concat("layoutReplot");function u(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function d(e,t,n){var r=i({},e);for(var a in r){var s=r[a];o(s)&&(r[a]=f(s,t,0,a))}return"from-root"===n&&(r.editType=t),r}function f(e,t,n,r){if(e.valType){var o=i({},e);if(o.editType=t,Array.isArray(e.items)){o.items=new Array(e.items.length);for(var a=0;a<e.items.length;a++)o.items[a]=f(e.items[a],t)}return o}return d(e,t,"_"===r.charAt(0)?"nested":"from-root")}e.exports={traces:a,layout:s,traceFlags:function(){return u(l)},layoutFlags:function(){return u(c)},update:function(e,t){var n=t.editType;if(n&&"none"!==n)for(var r=n.split("+"),i=0;i<r.length;i++)e[r[i]]=!0},overrideAll:d}},8377:function(e,t,n){"use strict";var r=n(2770),i=n(7812),o=n(3972),a=n(1828),s=n(4875),l=n(1675),c=n(7901),u=l.cleanId,d=l.getFromTrace,f=o.traceIs;function p(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=u(n,r,!0))}function h(e){function t(t,n){var r=e[t],i=e.title&&e.title[n];r&&!i&&(e.title||(e.title={}),e.title[n]=e[t],delete e[t])}e&&("string"!=typeof e.title&&"number"!=typeof e.title||(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"))}function m(e){if(!a.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function g(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var i,o=Math.min(e.length,t.length);for(i=0;i<o&&e.charAt(i)===t.charAt(i);i++);return e.substr(0,i).trim()}function v(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function y(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}t.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&a.log("Clearing previous rejected promises from queue."),e._promises=[]},t.cleanLayout=function(e){var n,r;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var o=(s.subplotsRegistry.cartesian||{}).attrRegex,l=(s.subplotsRegistry.polar||{}).attrRegex,d=(s.subplotsRegistry.ternary||{}).attrRegex,f=(s.subplotsRegistry.gl3d||{}).attrRegex,m=Object.keys(e);for(n=0;n<m.length;n++){var g=m[n];if(o&&o.test(g)){var v=e[g];v.anchor&&"free"!==v.anchor&&(v.anchor=u(v.anchor)),v.overlaying&&(v.overlaying=u(v.overlaying)),v.type||(v.isdate?v.type="date":v.islog?v.type="log":!1===v.isdate&&!1===v.islog&&(v.type="linear")),"withzero"!==v.autorange&&"tozero"!==v.autorange||(v.autorange=!0,v.rangemode="tozero"),delete v.islog,delete v.isdate,delete v.categories,y(v,"domain")&&delete v.domain,void 0!==v.autotick&&(void 0===v.tickmode&&(v.tickmode=v.autotick?"auto":"linear"),delete v.autotick),h(v)}else if(l&&l.test(g))h(e[g].radialaxis);else if(d&&d.test(g)){var b=e[g];h(b.aaxis),h(b.baxis),h(b.caxis)}else if(f&&f.test(g)){var x=e[g],w=x.cameraposition;if(Array.isArray(w)&&4===w[0].length){var _=w[0],S=w[1],C=w[2],k=i([],_),M=[];for(r=0;r<3;++r)M[r]=S[r]+C*k[2+4*r];x.camera={eye:{x:M[0],y:M[1],z:M[2]},center:{x:S[0],y:S[1],z:S[2]},up:{x:0,y:0,z:1}},delete x.cameraposition}h(x.xaxis),h(x.yaxis),h(x.zaxis)}}var T=Array.isArray(e.annotations)?e.annotations.length:0;for(n=0;n<T;n++){var A=e.annotations[n];a.isPlainObject(A)&&(A.ref&&("paper"===A.ref?(A.xref="paper",A.yref="paper"):"data"===A.ref&&(A.xref="x",A.yref="y"),delete A.ref),p(A,"xref"),p(A,"yref"))}var E=Array.isArray(e.shapes)?e.shapes.length:0;for(n=0;n<E;n++){var P=e.shapes[n];a.isPlainObject(P)&&(p(P,"xref"),p(P,"yref"))}var R=Array.isArray(e.images)?e.images.length:0;for(n=0;n<R;n++){var O=e.images[n];a.isPlainObject(O)&&(p(O,"xref"),p(O,"yref"))}var I=e.legend;return I&&(I.x>3?(I.x=1.02,I.xanchor="left"):I.x<-2&&(I.x=-.02,I.xanchor="right"),I.y>3?(I.y=1.02,I.yanchor="bottom"):I.y<-2&&(I.y=-.02,I.yanchor="top")),h(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),c.clean(e),e.template&&e.template.layout&&t.cleanLayout(e.template.layout),e},t.cleanData=function(e){for(var n=0;n<e.length;n++){var r,i=e[n];if("histogramy"===i.type&&"xbins"in i&&!("ybins"in i)&&(i.ybins=i.xbins,delete i.xbins),i.error_y&&"opacity"in i.error_y){var l=c.defaults,d=i.error_y.color||(f(i,"bar")?c.defaultLine:l[n%l.length]);i.error_y.color=c.addOpacity(c.rgb(d),c.opacity(d)*i.error_y.opacity),delete i.error_y.opacity}if("bardir"in i&&("h"!==i.bardir||!f(i,"bar")&&"histogram"!==i.type.substr(0,9)||(i.orientation="h",t.swapXYData(i)),delete i.bardir),"histogramy"===i.type&&t.swapXYData(i),"histogramx"!==i.type&&"histogramy"!==i.type||(i.type="histogram"),"scl"in i&&!("colorscale"in i)&&(i.colorscale=i.scl,delete i.scl),"reversescl"in i&&!("reversescale"in i)&&(i.reversescale=i.reversescl,delete i.reversescl),i.xaxis&&(i.xaxis=u(i.xaxis,"x")),i.yaxis&&(i.yaxis=u(i.yaxis,"y")),f(i,"gl3d")&&i.scene&&(i.scene=s.subplotsRegistry.gl3d.cleanId(i.scene)),!f(i,"pie-like")&&!f(i,"bar-like"))if(Array.isArray(i.textposition))for(r=0;r<i.textposition.length;r++)i.textposition[r]=v(i.textposition[r]);else i.textposition&&(i.textposition=v(i.textposition));var p=o.getModule(i);if(p&&p.colorbar){var b=p.colorbar.container,x=b?i[b]:i;x&&x.colorscale&&("YIGnBu"===x.colorscale&&(x.colorscale="YlGnBu"),"YIOrRd"===x.colorscale&&(x.colorscale="YlOrRd"))}if("surface"===i.type&&a.isPlainObject(i.contours)){var w=["x","y","z"];for(r=0;r<w.length;r++){var _=i.contours[w[r]];a.isPlainObject(_)&&(_.highlightColor&&(_.highlightcolor=_.highlightColor,delete _.highlightColor),_.highlightWidth&&(_.highlightwidth=_.highlightWidth,delete _.highlightWidth))}}if("candlestick"===i.type||"ohlc"===i.type){var S=!1!==(i.increasing||{}).showlegend,C=!1!==(i.decreasing||{}).showlegend,k=m(i.increasing),M=m(i.decreasing);if(!1!==k&&!1!==M){var T=g(k,M,S,C);T&&(i.name=T)}else!k&&!M||i.name||(i.name=k||M)}if(Array.isArray(i.transforms)){var A=i.transforms;for(r=0;r<A.length;r++){var E=A[r];if(a.isPlainObject(E))switch(E.type){case"filter":E.filtersrc&&(E.target=E.filtersrc,delete E.filtersrc),E.calendar&&(E.valuecalendar||(E.valuecalendar=E.calendar),delete E.calendar);break;case"groupby":if(E.styles=E.styles||E.style,E.styles&&!Array.isArray(E.styles)){var P=E.styles,R=Object.keys(P);E.styles=[];for(var O=0;O<R.length;O++)E.styles.push({target:R[O],value:P[R[O]]})}}}}y(i,"line")&&delete i.line,"marker"in i&&(y(i.marker,"line")&&delete i.marker.line,y(i,"marker")&&delete i.marker),c.clean(i),i.autobinx&&(delete i.autobinx,delete i.xbins),i.autobiny&&(delete i.autobiny,delete i.ybins),h(i),i.colorbar&&h(i.colorbar),i.marker&&i.marker.colorbar&&h(i.marker.colorbar),i.line&&i.line.colorbar&&h(i.line.colorbar),i.aaxis&&h(i.aaxis),i.baxis&&h(i.baxis)}},t.swapXYData=function(e){var t;if(a.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);a.swapAttrs(e,["error_?.copy_ystyle"]),r&&a.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof e.hoverinfo){var i=e.hoverinfo.split("+");for(t=0;t<i.length;t++)"x"===i[t]?i[t]="y":"y"===i[t]&&(i[t]="x");e.hoverinfo=i.join("+")}},t.coerceTraceIndices=function(e,t){if(r(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map((function(e,t){return t}));if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++)a.isIndex(t[i],e.data.length)?n.push(t[i]):a.warn("trace index (",t[i],") is not a number or is out of bounds");return n}return t},t.manageArrayContainers=function(e,t,n){var i=e.obj,o=e.parts,s=o.length,l=o[s-1],c=r(l);if(c&&null===t){var u=o.slice(0,s-1).join(".");a.nestedProperty(i,u).get().splice(l,1)}else c&&void 0===e.get()?(void 0===e.get()&&(n[e.astr]=null),e.set(t)):e.set(t)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function x(e){var t=e.search(b);if(t>0)return e.substr(0,t)}t.hasParent=function(e,t){for(var n=x(t);n;){if(n in e)return!0;n=x(n)}return!1};var w=["x","y","z"];t.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var i=e._fullData[r],o=0;o<3;o++){var s=d(e,i,w[o]);if(s&&"log"!==s.type){var l=s._name,c=s._id.substr(1);if("scene"===c.substr(0,5)){if(void 0!==n[c])continue;l=c+"."+l}var u=l+".type";void 0===n[l]&&void 0===n[u]&&a.nestedProperty(e.layout,u).set(null)}}}},641:function(e,t,n){"use strict";var r=n(2391);t._doPlot=r._doPlot,t.newPlot=r.newPlot,t.restyle=r.restyle,t.relayout=r.relayout,t.redraw=r.redraw,t.update=r.update,t._guiRestyle=r._guiRestyle,t._guiRelayout=r._guiRelayout,t._guiUpdate=r._guiUpdate,t._storeDirectGUIEdit=r._storeDirectGUIEdit,t.react=r.react,t.extendTraces=r.extendTraces,t.prependTraces=r.prependTraces,t.addTraces=r.addTraces,t.deleteTraces=r.deleteTraces,t.moveTraces=r.moveTraces,t.purge=r.purge,t.addFrames=r.addFrames,t.deleteFrames=r.deleteFrames,t.animate=r.animate,t.setPlotConfig=r.setPlotConfig,t.toImage=n(403),t.validate=n(4936),t.downloadImage=n(7239);var i=n(6318);t.makeTemplate=i.makeTemplate,t.validateTemplate=i.validateTemplate},6611:function(e,t,n){"use strict";var r=n(1965),i=n(4213),o=n(7769),a=n(5888).sorterAsc,s=n(3972);t.containerArrayMatch=n(4458);var l=t.isAddVal=function(e){return"add"===e||r(e)},c=t.isRemoveVal=function(e){return null===e||"remove"===e};t.applyContainerArrayChanges=function(e,t,n,r,u){var d=t.astr,f=s.getComponentMethod(d,"supplyLayoutDefaults"),p=s.getComponentMethod(d,"draw"),h=s.getComponentMethod(d,"drawOne"),m=r.replot||r.recalc||f===i||p===i,g=e.layout,v=e._fullLayout;if(n[""]){Object.keys(n).length>1&&o.warn("Full array edits are incompatible with other edits",d);var y=n[""][""];if(c(y))t.set(null);else{if(!Array.isArray(y))return o.warn("Unrecognized full array edit value",d,y),!0;t.set(y)}return!m&&(f(g,v),p(e),!0)}var b,x,w,_,S,C,k,M,T=Object.keys(n).map(Number).sort(a),A=t.get(),E=A||[],P=u(v,d).get(),R=[],O=-1,I=E.length;for(b=0;b<T.length;b++)if(_=n[w=T[b]],S=Object.keys(_),C=_[""],k=l(C),w<0||w>E.length-(k?0:1))o.warn("index out of range",d,w);else if(void 0!==C)S.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",d,w),c(C)?R.push(w):k?("add"===C&&(C={}),E.splice(w,0,C),P&&P.splice(w,0,{})):o.warn("Unrecognized full object edit value",d,w,C),-1===O&&(O=w);else for(x=0;x<S.length;x++)M=d+"["+w+"].",u(E[w],S[x],M).set(_[S[x]]);for(b=R.length-1;b>=0;b--)E.splice(R[b],1),P&&P.splice(R[b],1);if(E.length?A||t.set(E):t.set(null),m)return!1;if(f(g,v),h!==i){var L;if(-1===O)L=T;else{for(I=Math.max(E.length,I),L=[],b=0;b<T.length&&!((w=T[b])>=O);b++)L.push(w);for(b=O;b<I;b++)L.push(b)}for(b=0;b<L.length;b++)h(e,L[b])}else p(e);return!0}},2391:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=n(7035),a=n(1828),s=a.nestedProperty,l=n(1086),c=n(847),u=n(3972),d=n(6281),f=n(4875),p=n(9298),h=n(1424),m=n(7901),g=n(4305).initInteractions,v=n(7922),y=n(7322).clearOutline,b=n(2075).dfltConfig,x=n(6611),w=n(8377),_=n(1549),S=n(962),C=n(5555).AX_NAME_PATTERN,k=0;function M(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function T(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){a.error(e)}}function A(e,t){T(e,m.combine(t,"white"))}function E(e,t){if(!e._context){e._context=a.extendDeep({},b);var n=r.select("base");e._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:""}var i,s,l,c=e._context;if(t){for(s=Object.keys(t),i=0;i<s.length;i++)"editable"!==(l=s[i])&&"edits"!==l&&l in c&&("setBackground"===l&&"opaque"===t[l]?c[l]=A:c[l]=t[l]);t.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio);var u=t.editable;if(void 0!==u)for(c.editable=u,s=Object.keys(c.edits),i=0;i<s.length;i++)c.edits[s[i]]=u;if(t.edits)for(s=Object.keys(t.edits),i=0;i<s.length;i++)(l=s[i])in c.edits&&(c.edits[l]=t.edits[l]);c._exportedPlot=t._exportedPlot}c.staticPlot&&(c.editable=!1,c.edits={},c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1),"hover"!==c.displayModeBar||o||(c.displayModeBar=!0),"transparent"!==c.setBackground&&"function"==typeof c.setBackground||(c.setBackground=T),c._hasZeroHeight=c._hasZeroHeight||0===e.clientHeight,c._hasZeroWidth=c._hasZeroWidth||0===e.clientWidth;var d=c.scrollZoom,f=c._scrollZoom={};if(!0===d)f.cartesian=1,f.gl3d=1,f.geo=1,f.mapbox=1;else if("string"==typeof d){var p=d.split("+");for(i=0;i<p.length;i++)f[p[i]]=1}else!1!==d&&(f.gl3d=1,f.geo=1,f.mapbox=1)}function P(e,t){var n,r,i=t+1,o=[];for(n=0;n<e.length;n++)(r=e[n])<0?o.push(i+r):o.push(r);return o}function R(e,t,n){var r,i;for(r=0;r<t.length;r++){if((i=t[r])!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=e.data.length||i<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(i,r+1)>-1||i>=0&&t.indexOf(-e.data.length+i)>-1||i<0&&t.indexOf(e.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function O(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),R(e,t,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&R(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function I(e,t,n,r,o){!function(e,t,n,r){var i=a.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!a.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var o in R(e,n,"indices"),t){if(!Array.isArray(t[o])||t[o].length!==n.length)throw new Error("attribute "+o+" must be an array of length equal to indices array length");if(i&&(!(o in r)||!Array.isArray(r[o])||r[o].length!==t[o].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var l=function(e,t,n,r){var o,l,c,u,d,f=a.isPlainObject(r),p=[];for(var h in Array.isArray(n)||(n=[n]),n=P(n,e.data.length-1),t)for(var m=0;m<n.length;m++){if(o=e.data[n[m]],l=(c=s(o,h)).get(),u=t[h][m],!a.isArrayOrTypedArray(u))throw new Error("attribute: "+h+" index: "+m+" must be an array");if(!a.isArrayOrTypedArray(l))throw new Error("cannot extend missing or non-array attribute: "+h);if(l.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+h);d=f?r[h][m]:r,i(d)||(d=-1),p.push({prop:c,target:l,insert:u,maxp:Math.floor(d)})}return p}(e,t,n,r),c={},u={},d=0;d<l.length;d++){var f=l[d].prop,p=l[d].maxp,h=o(l[d].target,l[d].insert,p);f.set(h[0]),Array.isArray(c[f.astr])||(c[f.astr]=[]),c[f.astr].push(h[1]),Array.isArray(u[f.astr])||(u[f.astr]=[]),u[f.astr].push(l[d].target.length)}return{update:c,maxPoints:u}}function L(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function D(e,n,r,i){e=a.getGraphDiv(e),w.clearPromiseQueue(e);var o={};if("string"==typeof n)o[n]=r;else{if(!a.isPlainObject(n))return a.warn("Restyle fail.",n,r,i),Promise.reject();o=a.extendFlat({},n),void 0===i&&(i=r)}Object.keys(o).length&&(e.changed=!0);var s=w.coerceTraceIndices(e,i),l=B(e,o,s),u=l.flags;u.calc&&(e.calcdata=void 0),u.clearAxisTypes&&w.clearAxisTypes(e,s,{});var d=[];u.fullReplot?d.push(t._doPlot):(d.push(f.previousPromises),f.supplyDefaults(e),u.markerSize&&(f.doCalcdata(e),U(d)),u.style&&d.push(_.doTraceStyle),u.colorbars&&d.push(_.doColorBars),d.push(M)),d.push(f.rehover,f.redrag,f.reselect),c.add(e,D,[e,l.undoit,l.traces],D,[e,l.redoit,l.traces]);var p=a.syncOrAsync(d,e);return p&&p.then||(p=Promise.resolve()),p.then((function(){return e.emit("plotly_restyle",l.eventData),e}))}function N(e){return void 0===e?null:e}function F(e,t){return t?function(t,n,r){var i=s(t,n),o=i.set;return i.set=function(t){z((r||"")+n,i.get(),t,e),o(t)},i}:s}function z(e,t,n,r){if(Array.isArray(t)||Array.isArray(n))for(var i=Array.isArray(t)?t:[],o=Array.isArray(n)?n:[],s=Math.max(i.length,o.length),l=0;l<s;l++)z(e+"["+l+"]",i[l],o[l],r);else if(a.isPlainObject(t)||a.isPlainObject(n)){var c=a.isPlainObject(t)?t:{},u=a.isPlainObject(n)?n:{},d=a.extendFlat({},c,u);for(var f in d)z(e+"."+f,c[f],u[f],r)}else void 0===r[e]&&(r[e]=N(t))}function B(e,t,n){var r,i=e._fullLayout,o=e._fullData,l=e.data,c=i._guiEditing,h=F(i._preGUI,c),m=a.extendDeepAll({},t);j(t);var g,v=S.traceFlags(),y={},b={};function x(){return n.map((function(){}))}function _(e){var t=p.id2name(e);-1===g.indexOf(t)&&g.push(t)}function C(e){return"LAYOUT"+e+".autorange"}function k(e){return"LAYOUT"+e+".range"}function M(e){for(var t=e;t<o.length;t++)if(o[t]._input===l[e])return o[t]}function T(r,o,a){if(Array.isArray(r))r.forEach((function(e){T(e,o,a)}));else if(!(r in t)&&!w.hasParent(t,r)){var s;if("LAYOUT"===r.substr(0,6))s=h(e.layout,r.replace("LAYOUT",""));else{var u=n[a];s=F(i._tracePreGUI[M(u)._fullInput.uid],c)(l[u],r)}r in b||(b[r]=x()),void 0===b[r][a]&&(b[r][a]=N(s.get())),void 0!==o&&s.set(o)}}function A(e){return function(t){return o[t][e]}}function E(e){return function(t,r){return!1===t?o[n[r]][e]:null}}for(var P in t){if(w.hasParent(t,P))throw new Error("cannot set "+P+" and a parent attribute simultaneously");var R,O,I,L,D,z,B=t[P];if("autobinx"!==P&&"autobiny"!==P||(P=P.charAt(P.length-1)+"bins",B=Array.isArray(B)?B.map(E(P)):!1===B?n.map(A(P)):null),y[P]=B,"LAYOUT"!==P.substr(0,6)){for(b[P]=x(),r=0;r<n.length;r++)if(R=l[n[r]],O=M(n[r]),L=(I=F(i._tracePreGUI[O._fullInput.uid],c)(R,P)).get(),void 0!==(D=Array.isArray(B)?B[r%B.length]:B)){var Z=I.parts[I.parts.length-1],H=P.substr(0,P.length-Z.length-1),U=H?H+".":"",V=H?s(O,H).get():O;if((z=d.getTraceValObject(O,I.parts))&&z.impliedEdits&&null!==D)for(var G in z.impliedEdits)T(a.relativeAttr(P,G),z.impliedEdits[G],r);else if("thicknessmode"!==Z&&"lenmode"!==Z||L===D||"fraction"!==D&&"pixels"!==D||!V){if("type"===P&&("pie"===D!=("pie"===L)||"funnelarea"===D!=("funnelarea"===L))){var W="x",$="y";"bar"!==D&&"bar"!==L||"h"!==R.orientation||(W="y",$="x"),a.swapAttrs(R,["?","?src"],"labels",W),a.swapAttrs(R,["d?","?0"],"label",W),a.swapAttrs(R,["?","?src"],"values",$),"pie"===L||"funnelarea"===L?(s(R,"marker.color").set(s(R,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):u.traceIs(R,"cartesian")&&s(R,"marker.colors").set(s(R,"marker.color").get())}}else{var q=i._size,Y=V.orient,X="top"===Y||"bottom"===Y;if("thicknessmode"===Z){var K=X?q.h:q.w;T(U+"thickness",V.thickness*("fraction"===D?1/K:K),r)}else{var J=X?q.w:q.h;T(U+"len",V.len*("fraction"===D?1/J:J),r)}}if(b[P][r]=N(L),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(P)){if("orientation"===P){I.set(D);var Q=R.x&&!R.y?"h":"v";if((I.get()||Q)===O.orientation)continue}else"orientationaxes"===P&&(R.orientation={v:"h",h:"v"}[O.orientation]);w.swapXYData(R),v.calc=v.clearAxisTypes=!0}else-1!==f.dataArrayContainers.indexOf(I.parts[0])?(w.manageArrayContainers(I,D,b),v.calc=!0):(z?z.arrayOk&&!u.traceIs(O,"regl")&&(a.isArrayOrTypedArray(D)||a.isArrayOrTypedArray(L))?v.calc=!0:S.update(v,z):v.calc=!0,I.set(D))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(P)&&p.swap(e,n),"orientationaxes"===P){var ee=s(e.layout,"hovermode"),te=ee.get();"x"===te?ee.set("y"):"y"===te?ee.set("x"):"x unified"===te?ee.set("y unified"):"y unified"===te&&ee.set("x unified")}if(-1!==["orientation","type"].indexOf(P)){for(g=[],r=0;r<n.length;r++){var ne=l[n[r]];u.traceIs(ne,"cartesian")&&(_(ne.xaxis||"x"),_(ne.yaxis||"y"))}T(g.map(C),!0,0),T(g.map(k),[0,1],0)}}else I=h(e.layout,P.replace("LAYOUT","")),b[P]=[N(I.get())],I.set(Array.isArray(B)?B[0]:B),v.calc=!0}return(v.calc||v.plot)&&(v.fullReplot=!0),{flags:v,undoit:b,redoit:y,traces:n,eventData:a.extendDeepNoArrays([],[m,n])}}function j(e){var t,n,r,i=a.counterRegex("axis",".title",!1,!1),o=/colorbar\.title$/,s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r=e[n],"title"!==n&&!i.test(n)&&!o.test(n)||"string"!=typeof r&&"number"!=typeof r?n.indexOf("titlefont")>-1&&-1===n.indexOf("grouptitlefont")?l(n,n.replace("titlefont","title.font")):n.indexOf("titleposition")>-1?l(n,n.replace("titleposition","title.position")):n.indexOf("titleside")>-1?l(n,n.replace("titleside","title.side")):n.indexOf("titleoffset")>-1&&l(n,n.replace("titleoffset","title.offset")):l(n,n.replace("title","title.text"));function l(t,n){e[n]=e[t],delete e[t]}}function Z(e,t,n){e=a.getGraphDiv(e),w.clearPromiseQueue(e);var r={};if("string"==typeof t)r[t]=n;else{if(!a.isPlainObject(t))return a.warn("Relayout fail.",t,n),Promise.reject();r=a.extendFlat({},t)}Object.keys(r).length&&(e.changed=!0);var i=$(e,r),o=i.flags;o.calc&&(e.calcdata=void 0);var s=[f.previousPromises];o.layoutReplot?s.push(_.layoutReplot):Object.keys(r).length&&(H(e,o,i)||f.supplyDefaults(e),o.legend&&s.push(_.doLegend),o.layoutstyle&&s.push(_.layoutStyles),o.axrange&&U(s,i.rangesAltered),o.ticks&&s.push(_.doTicksRelayout),o.modebar&&s.push(_.doModeBar),o.camera&&s.push(_.doCamera),o.colorbars&&s.push(_.doColorBars),s.push(M)),s.push(f.rehover,f.redrag,f.reselect),c.add(e,Z,[e,i.undoit],Z,[e,i.redoit]);var l=a.syncOrAsync(s,e);return l&&l.then||(l=Promise.resolve(e)),l.then((function(){return e.emit("plotly_relayout",i.eventData),e}))}function H(e,t,n){var r=e._fullLayout;if(!t.axrange)return!1;for(var i in t)if("axrange"!==i&&t[i])return!1;for(var o in n.rangesAltered){var a=p.id2name(o),s=e.layout[a],l=r[a];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)if(c!==o){var u=r[p.id2name(c)];u.autorange=l.autorange,u.range=l.range.slice(),u._input.range=l.range.slice()}}return!0}function U(e,t){var n=t?function(e){var n=[];for(var r in t){var i=p.getFromId(e,r);if(n.push(r),-1!==(i.ticklabelposition||"").indexOf("inside")&&i._anchorAxis&&n.push(i._anchorAxis._id),i._matchGroup)for(var o in i._matchGroup)t[o]||n.push(o)}return p.draw(e,n,{skipTitle:!0})}:function(e){return p.draw(e,"redraw")};e.push(y,_.doAutoRangeAndConstraints,n,_.drawData,_.finalDraw)}var V=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,G=/^[xyz]axis[0-9]*\.autorange$/,W=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function $(e,t){var n,r,i,o=e.layout,l=e._fullLayout,c=l._guiEditing,f=F(l._preGUI,c),h=Object.keys(t),m=p.list(e),g=a.extendDeepAll({},t),v={};for(j(t),h=Object.keys(t),r=0;r<h.length;r++)if(0===h[r].indexOf("allaxes")){for(i=0;i<m.length;i++){var y=m[i]._id.substr(1),b=-1!==y.indexOf("scene")?y+".":"",_=h[r].replace("allaxes",b+m[i]._name);t[_]||(t[_]=t[h[r]])}delete t[h[r]]}var k=S.layoutFlags(),M={},T={};function A(e,n){if(Array.isArray(e))e.forEach((function(e){A(e,n)}));else if(!(e in t)&&!w.hasParent(t,e)){var r=f(o,e);e in T||(T[e]=N(r.get())),void 0!==n&&r.set(n)}}var E,P={};function R(e){var t=p.name2id(e.split(".")[0]);return P[t]=1,t}for(var O in t){if(w.hasParent(t,O))throw new Error("cannot set "+O+" and a parent attribute simultaneously");for(var I=f(o,O),L=t[O],D=I.parts.length-1;D>0&&"string"!=typeof I.parts[D];)D--;var z=I.parts[D],B=I.parts[D-1]+"."+z,Z=I.parts.slice(0,D).join("."),H=s(e.layout,Z).get(),U=s(l,Z).get(),$=I.get();if(void 0!==L){M[O]=L,T[O]="reverse"===z?L:N($);var Y=d.getLayoutValObject(l,I.parts);if(Y&&Y.impliedEdits&&null!==L)for(var X in Y.impliedEdits)A(a.relativeAttr(O,X),Y.impliedEdits[X]);if(-1!==["width","height"].indexOf(O))if(L){A("autosize",null);var K="height"===O?"width":"height";A(K,l[K])}else l[O]=e._initialAutoSize[O];else if("autosize"===O)A("width",L?null:l.width),A("height",L?null:l.height);else if(B.match(V))R(B),s(l,Z+"._inputRange").set(null);else if(B.match(G)){R(B),s(l,Z+"._inputRange").set(null);var J=s(l,Z).get();J._inputDomain&&(J._input.domain=J._inputDomain.slice())}else B.match(W)&&s(l,Z+"._inputDomain").set(null);if("type"===z){E=H;var Q="linear"===U.type&&"log"===L,ee="log"===U.type&&"linear"===L;if(Q||ee){if(E&&E.range)if(U.autorange)Q&&(E.range=E.range[1]>E.range[0]?[1,2]:[2,1]);else{var te=E.range[0],ne=E.range[1];Q?(te<=0&&ne<=0&&A(Z+".autorange",!0),te<=0?te=ne/1e6:ne<=0&&(ne=te/1e6),A(Z+".range[0]",Math.log(te)/Math.LN10),A(Z+".range[1]",Math.log(ne)/Math.LN10)):(A(Z+".range[0]",Math.pow(10,te)),A(Z+".range[1]",Math.pow(10,ne)))}else A(Z+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[I.parts[0]]&&"radialaxis"===I.parts[1]&&delete l[I.parts[0]]._subplot.viewInitial["radialaxis.range"],u.getComponentMethod("annotations","convertCoords")(e,U,L,A),u.getComponentMethod("images","convertCoords")(e,U,L,A)}else A(Z+".autorange",!0),A(Z+".range",null);s(l,Z+"._inputRange").set(null)}else if(z.match(C)){var re=s(l,O).get(),ie=(L||{}).type;ie&&"-"!==ie||(ie="linear"),u.getComponentMethod("annotations","convertCoords")(e,re,ie,A),u.getComponentMethod("images","convertCoords")(e,re,ie,A)}var oe=x.containerArrayMatch(O);if(oe){n=oe.array,r=oe.index;var ae=oe.property,se=Y||{editType:"calc"};""!==r&&""===ae&&(x.isAddVal(L)?T[O]=null:x.isRemoveVal(L)?T[O]=(s(o,n).get()||[])[r]:a.warn("unrecognized full object value",t)),S.update(k,se),v[n]||(v[n]={});var le=v[n][r];le||(le=v[n][r]={}),le[ae]=L,delete t[O]}else"reverse"===z?(H.range?H.range.reverse():(A(Z+".autorange",!0),H.range=[1,0]),U.autorange?k.calc=!0:k.plot=!0):("dragmode"===O&&(!1===L&&!1!==$||!1!==L&&!1===$)||l._has("scatter-like")&&l._has("regl")&&"dragmode"===O&&("lasso"===L||"select"===L)&&"lasso"!==$&&"select"!==$||l._has("gl2d")?k.plot=!0:Y?S.update(k,Y):k.calc=!0,I.set(L))}}for(n in v)x.applyContainerArrayChanges(e,f(o,n),v[n],k,f)||(k.plot=!0);for(var ce in P){var ue=(E=p.getFromId(e,ce))&&E._constraintGroup;if(ue)for(var de in k.calc=!0,ue)P[de]||(p.getFromId(e,de)._constraintShrinkable=!0)}return(q(e)||t.height||t.width)&&(k.plot=!0),(k.plot||k.calc)&&(k.layoutReplot=!0),{flags:k,rangesAltered:P,undoit:T,redoit:M,eventData:g}}function q(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&f.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function Y(e,n,r,i){e=a.getGraphDiv(e),w.clearPromiseQueue(e),a.isPlainObject(n)||(n={}),a.isPlainObject(r)||(r={}),Object.keys(n).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var o=w.coerceTraceIndices(e,i),s=B(e,a.extendFlat({},n),o),l=s.flags,u=$(e,a.extendFlat({},r)),d=u.flags;(l.calc||d.calc)&&(e.calcdata=void 0),l.clearAxisTypes&&w.clearAxisTypes(e,o,r);var p=[];d.layoutReplot?p.push(_.layoutReplot):l.fullReplot?p.push(t._doPlot):(p.push(f.previousPromises),H(e,d,u)||f.supplyDefaults(e),l.style&&p.push(_.doTraceStyle),(l.colorbars||d.colorbars)&&p.push(_.doColorBars),d.legend&&p.push(_.doLegend),d.layoutstyle&&p.push(_.layoutStyles),d.axrange&&U(p,u.rangesAltered),d.ticks&&p.push(_.doTicksRelayout),d.modebar&&p.push(_.doModeBar),d.camera&&p.push(_.doCamera),p.push(M)),p.push(f.rehover,f.redrag,f.reselect),c.add(e,Y,[e,s.undoit,u.undoit,s.traces],Y,[e,s.redoit,u.redoit,s.traces]);var h=a.syncOrAsync(p,e);return h&&h.then||(h=Promise.resolve(e)),h.then((function(){return e.emit("plotly_update",{data:s.eventData,layout:u.eventData}),e}))}function X(e){return function(t){t._fullLayout._guiEditing=!0;var n=e.apply(null,arguments);return t._fullLayout._guiEditing=!1,n}}var K=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],J=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=e.match(r.pattern);if(i){var o=i[1]||"";return{head:o,tail:e.substr(o.length+1),attr:r.attr}}}}function ee(e,t){var n=s(t,e).get();if(void 0!==n)return n;var r=e.split(".");for(r.pop();r.length>1;)if(r.pop(),void 0!==(n=s(t,r.join(".")+".uirevision").get()))return n;return t.uirevision}function te(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}function ne(e,t,n){for(var r=0;r<t.length;r++)if(t[r].uid===e)return r;return!t[n]||t[n].uid?-1:n}function re(e,t){var n=a.isPlainObject(e),r=Array.isArray(e);return n||r?(n&&a.isPlainObject(t)||r&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function ie(e,t,n,r){var i,o,l,c=r.getValObject,u=r.flags,d=r.immutable,f=r.inArray,p=r.arrayIndex;function h(){var e=i.editType;f&&-1!==e.indexOf("arraydraw")?a.pushUnique(u.arrays[f],p):(S.update(u,i),"none"!==e&&u.nChanges++,r.transition&&i.anim&&u.nChangesAnim++,(V.test(l)||G.test(l))&&(u.rangesAltered[n[0]]=1),W.test(l)&&s(t,"_inputDomain").set(null),"datarevision"===o&&(u.newDataRevision=1))}function m(e){return"data_array"===e.valType||e.arrayOk}for(o in e){if(u.calc&&!r.transition)return;var g=e[o],v=t[o],y=n.concat(o);if(l=y.join("."),"_"!==o.charAt(0)&&"function"!=typeof g&&g!==v){if(("tick0"===o||"dtick"===o)&&"geo"!==n[0]){var b=t.tickmode;if("auto"===b||"array"===b||!b)continue}if(("range"!==o||!t.autorange)&&("zmin"!==o&&"zmax"!==o||"contourcarpet"!==t.type)&&(i=c(y))&&(!i._compareAsJSON||JSON.stringify(g)!==JSON.stringify(v))){var x,w=i.valType,_=m(i),C=Array.isArray(g),k=Array.isArray(v);if(C&&k){var M="_input_"+o,T=e[M],A=t[M];if(Array.isArray(T)&&T===A)continue}if(void 0===v)_&&C?u.calc=!0:h();else if(i._isLinkedToArray){var E=[],P=!1;f||(u.arrays[o]=E);var R=Math.min(g.length,v.length),O=Math.max(g.length,v.length);if(R!==O){if("arraydraw"!==i.editType){h();continue}P=!0}for(x=0;x<R;x++)ie(g[x],v[x],y.concat(x),a.extendFlat({inArray:o,arrayIndex:x},r));if(P)for(x=R;x<O;x++)E.push(x)}else!w&&a.isPlainObject(g)?ie(g,v,y,r):_?C&&k?(d&&(u.calc=!0),(d||r.newDataRevision)&&h()):C!==k?u.calc=!0:h():C&&k&&g.length===v.length&&String(g)===String(v)||h()}}}for(o in t)if(!(o in e)&&"_"!==o.charAt(0)&&"function"!=typeof t[o]){if(m(i=c(n.concat(o)))&&Array.isArray(t[o]))return void(u.calc=!0);h()}}function oe(e,t){var n;for(n in e)if("_"!==n.charAt(0)){var r=e[n],i=t[n];if(r!==i)if(a.isPlainObject(r)&&a.isPlainObject(i)){if(oe(r,i))return!0}else{if(!Array.isArray(r)||!Array.isArray(i))return!0;if(r.length!==i.length)return!0;for(var o=0;o<r.length;o++)if(r[o]!==i[o]){if(!a.isPlainObject(r[o])||!a.isPlainObject(i[o]))return!0;if(oe(r[o],i[o]))return!0}}}}function ae(e){var t=e._fullLayout,n=e.getBoundingClientRect();if(!a.equalDomRects(n,t._lastBBox)){var r=t._invTransform=a.inverseTransformMatrix(a.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[0][2]*r[0][2]),t._invScaleY=Math.sqrt(r[1][0]*r[1][0]+r[1][1]*r[1][1]+r[1][2]*r[1][2]),t._lastBBox=n}}t.animate=function(e,t,n){if(e=a.getGraphDiv(e),!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var r=e._transitionData;r._frameQueue||(r._frameQueue=[]);var i=(n=f.supplyAnimationDefaults(n)).transition,o=n.frame;function s(e){return Array.isArray(i)?e>=i.length?i[0]:i[e]:i}function l(e){return Array.isArray(o)?e>=o.length?o[0]:o[e]:o}function c(e,t){var n=0;return function(){if(e&&++n===t)return e()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise((function(o,u){function d(){e.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null;var t=function t(){r._animationRaf=window.requestAnimationFrame(t),Date.now()-r._lastFrameAt>r._timeToNext&&function(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var t=r._currentFrame=r._frameQueue.shift();if(t){var n=t.name?t.name.toString():null;e._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=t.frameOpts.duration,f.transition(e,t.frame.data,t.frame.layout,w.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then((function(){t.onComplete&&t.onComplete()})),e.emit("plotly_animatingframe",{name:n,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else e.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}()};t()}var p,h,m=0;function g(e){return Array.isArray(i)?m>=i.length?e.transitionOpts=i[m]:e.transitionOpts=i[0]:e.transitionOpts=i,m++,e}var v=[],y=null==t,b=Array.isArray(t);if(y||b||!a.isPlainObject(t)){if(y||-1!==["string","number"].indexOf(typeof t))for(p=0;p<r._frames.length;p++)(h=r._frames[p])&&(y||String(h.group)===String(t))&&v.push({type:"byname",name:String(h.name),data:g({name:h.name})});else if(b)for(p=0;p<t.length;p++){var x=t[p];-1!==["number","string"].indexOf(typeof x)?(x=String(x),v.push({type:"byname",name:x,data:g({name:x})})):a.isPlainObject(x)&&v.push({type:"object",data:g(a.extendFlat({},x))})}}else v.push({type:"object",data:g(a.extendFlat({},t))});for(p=0;p<v.length;p++)if("byname"===(h=v[p]).type&&!r._frameHash[h.data.name])return a.warn('animate failure: frame not found: "'+h.data.name+'"'),void u();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var t=r._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&v.reverse();var _=e._fullLayout._currentFrame;if(_&&n.fromcurrent){var S=-1;for(p=0;p<v.length;p++)if("byname"===(h=v[p]).type&&h.name===_){S=p;break}if(S>0&&S<v.length-1){var C=[];for(p=0;p<v.length;p++)h=v[p],("byname"!==v[p].type||p>S)&&C.push(h);v=C}}v.length>0?function(t){if(0!==t.length){for(var i=0;i<t.length;i++){var a;a="byname"===t[i].type?f.computeFrame(e,t[i].name):t[i].data;var p=l(i),h=s(i);h.duration=Math.min(h.duration,p.duration);var m={frame:a,name:t[i].name,frameOpts:p,transitionOpts:h};i===t.length-1&&(m.onComplete=c(o,2),m.onInterrupt=u),r._frameQueue.push(m)}"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||d()}}(v):(e.emit("plotly_animated"),o())}))},t.addFrames=function(e,t,n){if(e=a.getGraphDiv(e),null==t)return Promise.resolve();if(!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,i,o,s,l=e._transitionData._frames,u=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var d=l.length+2*t.length,p=[],h={};for(r=t.length-1;r>=0;r--)if(a.isPlainObject(t[r])){var m=t[r].name,g=(u[m]||h[m]||{}).name,v=t[r].name,y=u[g]||h[g];g&&v&&"number"==typeof v&&y&&k<5&&(k++,a.warn('addFrames: overwriting frame "'+(u[g]||h[g]).name+'" with a frame whose name of type "number" also equates to "'+g+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===k&&a.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),h[m]={name:m},p.push({frame:f.supplyFrameDefaults(t[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:d+r})}p.sort((function(e,t){return e.index>t.index?-1:e.index<t.index?1:0}));var b=[],x=[],w=l.length;for(r=p.length-1;r>=0;r--){if("number"==typeof(i=p[r].frame).name&&a.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;u[i.name="frame "+e._transitionData._counter++];);if(u[i.name]){for(o=0;o<l.length&&(l[o]||{}).name!==i.name;o++);b.push({type:"replace",index:o,value:i}),x.unshift({type:"replace",index:o,value:l[o]})}else s=Math.max(0,Math.min(p[r].index,w)),b.push({type:"insert",index:s,value:i}),x.unshift({type:"delete",index:s}),w++}var _=f.modifyFrames,S=f.modifyFrames,C=[e,x],M=[e,b];return c&&c.add(e,_,C,S,M),f.modifyFrames(e,b)},t.deleteFrames=function(e,t){if(e=a.getGraphDiv(e),!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,i=e._transitionData._frames,o=[],s=[];if(!t)for(t=[],n=0;n<i.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;n>=0;n--)r=t[n],o.push({type:"delete",index:r}),s.unshift({type:"insert",index:r,value:i[r]});var l=f.modifyFrames,u=f.modifyFrames,d=[e,s],p=[e,o];return c&&c.add(e,l,d,u,p),f.modifyFrames(e,o)},t.addTraces=function e(n,r,i){n=a.getGraphDiv(n);var o,s,l=[],u=t.deleteTraces,d=e,f=[n,l],p=[n,r];for(function(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(i=t[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(n,r,i),Array.isArray(r)||(r=[r]),r=r.map((function(e){return a.extendFlat({},e)})),w.cleanData(r),o=0;o<r.length;o++)n.data.push(r[o]);for(o=0;o<r.length;o++)l.push(-r.length+o);if(void 0===i)return s=t.redraw(n),c.add(n,u,f,d,p),s;Array.isArray(i)||(i=[i]);try{O(n,l,i)}catch(e){throw n.data.splice(n.data.length-r.length,r.length),e}return c.startSequence(n),c.add(n,u,f,d,p),s=t.moveTraces(n,l,i),c.stopSequence(n),s},t.deleteTraces=function e(n,r){n=a.getGraphDiv(n);var i,o,s=[],l=t.addTraces,u=e,d=[n,s,r],f=[n,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),R(n,r,"indices"),(r=P(r,n.data.length-1)).sort(a.sorterDes),i=0;i<r.length;i+=1)o=n.data.splice(r[i],1)[0],s.push(o);var p=t.redraw(n);return c.add(n,l,d,u,f),p},t.extendTraces=function e(n,r,i,o){function s(e,t,n){var r,i;if(a.isTypedArray(e))if(n<0){var o=new e.constructor(0),s=L(e,t);n<0?(r=s,i=o):(r=o,i=s)}else if(r=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),i.set(e);else if(n<t.length){var l=t.length-n;r.set(t.subarray(l)),i.set(e),i.set(t.subarray(0,l),e.length)}else{var c=n-t.length,u=e.length-c;r.set(e.subarray(u)),r.set(t,c),i.set(e.subarray(0,u))}else r=e.concat(t),i=n>=0&&n<r.length?r.splice(0,r.length-n):[];return[r,i]}var l=I(n=a.getGraphDiv(n),r,i,o,s),u=t.redraw(n),d=[n,l.update,i,l.maxPoints];return c.add(n,t.prependTraces,d,e,arguments),u},t.moveTraces=function e(n,r,i){var o,s=[],l=[],u=e,d=e,f=[n=a.getGraphDiv(n),i,r],p=[n,r,i];if(O(n,r,i),r=Array.isArray(r)?r:[r],void 0===i)for(i=[],o=0;o<r.length;o++)i.push(-r.length+o);for(i=Array.isArray(i)?i:[i],r=P(r,n.data.length-1),i=P(i,n.data.length-1),o=0;o<n.data.length;o++)-1===r.indexOf(o)&&s.push(n.data[o]);for(o=0;o<r.length;o++)l.push({newIndex:i[o],trace:n.data[r[o]]});for(l.sort((function(e,t){return e.newIndex-t.newIndex})),o=0;o<l.length;o+=1)s.splice(l[o].newIndex,0,l[o].trace);n.data=s;var h=t.redraw(n);return c.add(n,u,f,d,p),h},t.prependTraces=function e(n,r,i,o){function s(e,t,n){var r,i;if(a.isTypedArray(e))if(n<=0){var o=new e.constructor(0),s=L(t,e);n<0?(r=s,i=o):(r=o,i=s)}else if(r=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),i.set(e);else if(n<t.length){var l=t.length-n;r.set(t.subarray(0,l)),i.set(t.subarray(l)),i.set(e,l)}else{var c=n-t.length;r.set(t),r.set(e.subarray(0,c),t.length),i.set(e.subarray(c))}else r=t.concat(e),i=n>=0&&n<r.length?r.splice(n,r.length):[];return[r,i]}var l=I(n=a.getGraphDiv(n),r,i,o,s),u=t.redraw(n),d=[n,l.update,i,l.maxPoints];return c.add(n,t.extendTraces,d,e,arguments),u},t.newPlot=function(e,n,r,i){return e=a.getGraphDiv(e),f.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),f.purge(e),t._doPlot(e,n,r,i)},t._doPlot=function(e,n,i,o){var s;if(e=a.getGraphDiv(e),l.init(e),a.isPlainObject(n)){var c=n;n=c.data,i=c.layout,o=c.config,s=c.frames}if(!1===l.triggerHandler(e,"plotly_beforeplot",[n,i,o]))return Promise.reject();n||i||a.isPlotDiv(e)||a.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e),E(e,o),i||(i={}),r.select(e).classed("js-plotly-plot",!0),h.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var d=0===(e.data||[]).length&&Array.isArray(n);Array.isArray(n)&&(w.cleanData(n),d?e.data=n:e.data.push.apply(e.data,n),e.empty=!1),e.layout&&!d||(e.layout=w.cleanLayout(i)),f.supplyDefaults(e);var m=e._fullLayout,y=m._has("cartesian");m._replotting=!0,(d||m._shouldCreateBgLayer)&&(function(e){var t=r.select(e),n=e._fullLayout;if(n._calcInverseTransform=ae,n._calcInverseTransform(e),n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var i={};r.selectAll("defs").each((function(){this.id&&(i[this.id.split("-")[1]]=1)})),n._uid=a.randstr(i)}n._paperdiv.selectAll(".main-svg").attr(v.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var o=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=o.append("g").classed("imagelayer",!0),n._shapeLowerLayer=o.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._smithlayer=n._paper.append("g").classed("smithlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var s=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._selectionLayer=n._toppaper.append("g").classed("selectionlayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(e),m._shouldCreateBgLayer&&delete m._shouldCreateBgLayer),h.initGradients(e),h.initPatterns(e),d&&p.saveShowSpikeInitial(e);var b=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;b&&f.doCalcdata(e);for(var x=0;x<e.calcdata.length;x++)e.calcdata[x][0].trace=e._fullData[x];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){a.isHidden(e)||f.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):a.clearResponsive(e);var S=a.extendFlat({},m._size),C=0;function k(){if(f.clearAutoMarginIds(e),_.drawMarginPushers(e),p.allowAutoMargin(e),m._has("pie"))for(var t=e._fullData,n=0;n<t.length;n++){var r=t[n];"pie"===r.type&&r.automargin&&f.allowAutoMargin(e,"pie."+r.uid+".automargin")}return f.doAutoMargin(e),f.previousPromises(e)}function T(){e._transitioning||(_.doAutoRangeAndConstraints(e),d&&p.saveRangeInitial(e),u.getComponentMethod("rangeslider","calcAutorange")(e))}var A=[f.previousPromises,function(){if(s)return t.addFrames(e,s)},function t(){for(var n=m._basePlotModules,r=0;r<n.length;r++)n[r].drawFramework&&n[r].drawFramework(e);!m._glcanvas&&m._has("gl")&&(m._glcanvas=m._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],(function(e){return e.key})),m._glcanvas.enter().append("canvas").attr("class",(function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var i=e._context.plotGlPixelRatio;if(m._glcanvas){m._glcanvas.attr("width",m.width*i).attr("height",m.height*i).style("width",m.width+"px").style("height",m.height+"px");var o=m._glcanvas.data()[0].regl;if(o&&(Math.floor(m.width*i)!==o._gl.drawingBufferWidth||Math.floor(m.height*i)!==o._gl.drawingBufferHeight)){var s="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!C)return a.log(s+" Clearing graph and plotting again."),f.cleanPlot([],{},e._fullData,m),f.supplyDefaults(e),m=e._fullLayout,f.doCalcdata(e),C++,t();a.error(s)}}return"h"===m.modebar.orientation?m._modebardiv.style("height",null).style("width","100%"):m._modebardiv.style("width",null).style("height",m.height+"px"),f.previousPromises(e)},k,function(){if(f.didMarginChange(S,m._size))return a.syncOrAsync([k,_.layoutStyles],e)}];y&&A.push((function(){if(b)return a.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),T],e);T()})),A.push(_.layoutStyles),y&&A.push((function(){return p.draw(e,d?"":"redraw")}),(function(e){e._fullLayout._insideTickLabelsAutorange&&Z(e,e._fullLayout._insideTickLabelsAutorange).then((function(){e._fullLayout._insideTickLabelsAutorange=void 0}))})),A.push(_.drawData,_.finalDraw,g,f.addLinks,f.rehover,f.redrag,f.reselect,f.doAutoMargin,(function(e){e._fullLayout._insideTickLabelsAutorange&&d&&p.saveRangeInitial(e,!0)}),f.previousPromises);var P=a.syncOrAsync(A,e);return P&&P.then||(P=Promise.resolve()),P.then((function(){return M(e),e}))},t.purge=function(e){var t=(e=a.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return f.cleanPlot([],{},n,t),f.purge(e),l.purge(e),t._container&&t._container.remove(),delete e._context,e},t.react=function(e,n,r,i){var o,l;e=a.getGraphDiv(e),w.clearPromiseQueue(e);var c=e._fullData,p=e._fullLayout;if(a.isPlotDiv(e)&&c&&p){if(a.isPlainObject(n)){var h=n;n=h.data,r=h.layout,i=h.config,o=h.frames}var m=!1;if(i){var g=a.extendDeep({},e._context);e._context=void 0,E(e,i),m=oe(g,e._context)}e.data=n||[],w.cleanData(e.data),e.layout=r||{},w.cleanLayout(e.layout),function(e,t,n,r){var i,o,l,c,u,d,f,p,h,m,g=r._preGUI,v=[],y={},b={};for(i in g){if(u=Q(i,K)){if(h=u.head,m=u.tail,o=u.attr||h+".uirevision",(c=(l=s(r,o).get())&&ee(o,t))&&c===l){if(null===(d=g[i])&&(d=void 0),re(p=(f=s(t,i)).get(),d)){void 0===p&&"autorange"===m&&v.push(h),f.set(N(s(r,i).get()));continue}if("autorange"===m||"range["===m.substr(0,6)){var x=g[h+".range[0]"],w=g[h+".range[1]"],_=g[h+".autorange"];if(_||null===_&&null===x&&null===w){if(!(h in y)){var S=s(t,h).get();y[h]=S&&(S.autorange||!1!==S.autorange&&(!S.range||2!==S.range.length))}if(y[h]){f.set(N(s(r,i).get()));continue}}}}}else a.warn("unrecognized GUI edit: "+i);delete g[i],u&&"range["===u.tail.substr(0,6)&&(b[u.head]=1)}for(var C=0;C<v.length;C++){var k=v[C];if(b[k]){var M=s(t,k).get();M&&delete M.autorange}}var T=r._tracePreGUI;for(var A in T){var E,P=T[A],R=null;for(i in P){if(!R){var O=te(A,n);if(O<0){delete T[A];break}var I=ne(A,e,(E=n[O]._fullInput).index);if(I<0){delete T[A];break}R=e[I]}if(u=Q(i,J)){if(u.attr?c=(l=s(r,u.attr).get())&&ee(u.attr,t):(l=E.uirevision,void 0===(c=R.uirevision)&&(c=t.uirevision)),c&&c===l&&(null===(d=P[i])&&(d=void 0),re(p=(f=s(R,i)).get(),d))){f.set(N(s(E,i).get()));continue}}else a.warn("unrecognized GUI edit: "+i+" in trace uid "+A);delete P[i]}}}(e.data,e.layout,c,p),f.supplyDefaults(e,{skipUpdateCalc:!0});var v=e._fullData,y=e._fullLayout,b=void 0===y.datarevision,x=y.transition,C=function(e,t,n,r,i){var o=S.layoutFlags();return o.arrays={},o.rangesAltered={},o.nChanges=0,o.nChangesAnim=0,ie(t,n,[],{getValObject:function(e){return d.getLayoutValObject(n,e)},flags:o,immutable:r,transition:i,gd:e}),(o.plot||o.calc)&&(o.layoutReplot=!0),i&&o.nChanges&&o.nChangesAnim&&(o.anim=o.nChanges===o.nChangesAnim?"all":"some"),o}(e,p,y,b,x),k=C.newDataRevision,T=function(e,t,n,r,i,o){var a=t.length===n.length;if(!i&&!a)return{fullReplot:!0,calc:!0};var s,l,c=S.traceFlags();c.arrays={},c.nChanges=0,c.nChangesAnim=0;var u={getValObject:function(e){var t=d.getTraceValObject(l,e);return!l._module.animatable&&t.anim&&(t.anim=!1),t},flags:c,immutable:r,transition:i,newDataRevision:o,gd:e},p={};for(s=0;s<t.length;s++)if(n[s]){if(l=n[s]._fullInput,f.hasMakesDataTransform(l)&&(l=n[s]),p[l.uid])continue;p[l.uid]=1,ie(t[s]._fullInput,l,[],u)}return(c.calc||c.plot)&&(c.fullReplot=!0),i&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&a?"all":"some"),c}(e,c,v,b,x,k);if(q(e)&&(C.layoutReplot=!0),T.calc||C.calc){e.calcdata=void 0;for(var A=Object.getOwnPropertyNames(y),P=0;P<A.length;P++){var R=A[P],O=R.substring(0,5);if("xaxis"===O||"yaxis"===O){var I=y[R]._emptyCategories;I&&I()}}}else f.supplyDefaultsUpdateCalc(e.calcdata,v);var L=[];if(o&&(e._transitionData={},f.createTransitionData(e),L.push((function(){return t.addFrames(e,o)}))),y.transition&&!m&&(T.anim||C.anim))C.ticks&&L.push(_.doTicksRelayout),f.doCalcdata(e),_.doAutoRangeAndConstraints(e),L.push((function(){return f.transitionFromReact(e,T,C,p)}));else if(T.fullReplot||C.layoutReplot||m)e._fullLayout._skipDefaults=!0,L.push(t._doPlot);else{for(var D in C.arrays){var F=C.arrays[D];if(F.length){var z=u.getComponentMethod(D,"drawOne");if(z!==a.noop)for(var B=0;B<F.length;B++)z(e,F[B]);else{var j=u.getComponentMethod(D,"draw");if(j===a.noop)throw new Error("cannot draw components: "+D);j(e)}}}L.push(f.previousPromises),T.style&&L.push(_.doTraceStyle),(T.colorbars||C.colorbars)&&L.push(_.doColorBars),C.legend&&L.push(_.doLegend),C.layoutstyle&&L.push(_.layoutStyles),C.axrange&&U(L),C.ticks&&L.push(_.doTicksRelayout),C.modebar&&L.push(_.doModeBar),C.camera&&L.push(_.doCamera),L.push(M)}L.push(f.rehover,f.redrag,f.reselect),(l=a.syncOrAsync(L,e))&&l.then||(l=Promise.resolve(e))}else l=t.newPlot(e,n,r,i);return l.then((function(){return e.emit("plotly_react",{data:n,layout:r}),e}))},t.redraw=function(e){if(e=a.getGraphDiv(e),!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return w.cleanData(e.data),w.cleanLayout(e.layout),e.calcdata=void 0,t._doPlot(e).then((function(){return e.emit("plotly_redraw"),e}))},t.relayout=Z,t.restyle=D,t.setPlotConfig=function(e){return a.extendFlat(b,e)},t.update=Y,t._guiRelayout=X(Z),t._guiRestyle=X(D),t._guiUpdate=X(Y),t._storeDirectGUIEdit=function(e,t,n){for(var r in n)z(r,s(e,r).get(),n[r],t)}},2075:function(e){"use strict";var t={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},n={};!function e(t,n){for(var r in t){var i=t[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),e(i,n[r]))}}(t,n),e.exports={configAttributes:t,dfltConfig:n}},6281:function(e,t,n){"use strict";var r=n(3972),i=n(1828),o=n(9012),a=n(820),s=n(1391),l=n(5594),c=n(2075).configAttributes,u=n(962),d=i.extendDeepAll,f=i.isPlainObject,p=i.isArrayOrTypedArray,h=i.nestedProperty,m=i.valObjectMeta,g="_isSubplotObj",v="_isLinkedToArray",y="_deprecated",b=[g,v,"_arrayAttrRegexps",y];function x(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(w(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!f(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!w(t[++n]))return!1}else if("info_array"===e.valType){var i=t[++n];if(!w(i))return!1;var o=e.items;if(Array.isArray(o)){if(i>=o.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;var a=t[n];if(!w(a))return!1;e=o[i][a]}else e=o[i]}else e=o}}return e}function w(e){return e===Math.round(e)&&e>=0}function _(){var e,t,n={};for(e in d(n,a),r.subplotsRegistry)if((t=r.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var i=0;i<t.attr.length;i++)C(n,t,t.attr[i]);else C(n,t,"subplot"===t.attr?t.name:t.attr);for(e in r.componentsRegistry){var o=(t=r.componentsRegistry[e]).schema;if(o&&(o.subplots||o.layout)){var s=o.subplots;if(s&&s.xaxis&&!s.yaxis)for(var l in s.xaxis)delete n.yaxis[l];delete n.xaxis.shift,delete n.xaxis.autoshift}else"colorscale"===t.name?d(n,t.layoutAttributes):t.layoutAttributes&&k(n,t.layoutAttributes,t.name)}return{layoutAttributes:S(n)}}function S(e){return function(e){t.crawl(e,(function(e,n,r){t.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(r[n+"src"]={valType:"string",editType:"none"}):f(e)&&(e.role="object")}))}(e),function(e){t.crawl(e,(function(e,t,n){if(e){var r=e._isLinkedToArray;r&&(delete e._isLinkedToArray,n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}}))}(e),function(e){!function e(t){for(var n in t)if(f(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e)}(e),e}function C(e,t,n){var r=h(e,n),i=d({},t.layoutAttributes);i._isSubplotObj=!0,r.set(i)}function k(e,t,n){var r=h(e,n);r.set(d(r.get()||{},t))}t.IS_SUBPLOT_OBJ=g,t.IS_LINKED_TO_ARRAY=v,t.DEPRECATED=y,t.UNDERSCORE_ATTRS=b,t.get=function(){var e={};r.allTypes.forEach((function(n){e[n]=function(e){var n,i;i=(n=r.modules[e]._module).basePlotModule;var a={type:null},s=d({},o),l=d({},n.attributes);t.crawl(l,(function(e,t,n,r,i){h(s,i).set(void 0),void 0===e&&h(l,i).set(void 0)})),d(a,s),r.traceIs(e,"noOpacity")&&delete a.opacity,r.traceIs(e,"showLegend")||(delete a.showlegend,delete a.legendgroup),r.traceIs(e,"noHover")&&(delete a.hoverinfo,delete a.hoverlabel),n.selectPoints||delete a.selectedpoints,d(a,l),i.attributes&&d(a,i.attributes),a.type=e;var c={meta:n.meta||{},categories:n.categories||{},animatable:Boolean(n.animatable),type:e,attributes:S(a)};if(n.layoutAttributes){var u={};d(u,n.layoutAttributes),c.layoutAttributes=S(u)}return n.animatable||t.crawl(c,(function(e){t.isValObject(e)&&"anim"in e&&delete e.anim})),c}(n)}));var n,i={};return Object.keys(r.transformsRegistry).forEach((function(e){i[e]=function(e){var t=r.transformsRegistry[e],n=d({},t.attributes);return Object.keys(r.componentsRegistry).forEach((function(t){var i=r.componentsRegistry[t];i.schema&&i.schema.transforms&&i.schema.transforms[e]&&Object.keys(i.schema.transforms[e]).forEach((function(t){k(n,i.schema.transforms[e][t],t)}))})),{attributes:S(n)}}(e)})),{defs:{valObjects:m,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:u.traces,layout:u.layout},impliedEdits:{}},traces:e,layout:_(),transforms:i,frames:(n={frames:d({},s)},S(n),n.frames),animation:S(l),config:S(c)}},t.crawl=function(e,n,r,i){var o=r||0;i=i||"",Object.keys(e).forEach((function(r){var a=e[r];if(-1===b.indexOf(r)){var s=(i?i+".":"")+r;n(a,r,e,o,s),t.isValObject(a)||f(a)&&"impliedEdits"!==r&&t.crawl(a,n,o+1,s)}}))},t.isValObject=function(e){return e&&void 0!==e.valType},t.findArrayAttributes=function(e){var n,r,i=[],a=[],s=[];function l(e,t,r,i){a=a.slice(0,i).concat([t]),s=s.slice(0,i).concat([e&&e._isLinkedToArray]),e&&("data_array"===e.valType||!0===e.arrayOk)&&("colorbar"!==a[i-1]||"ticktext"!==t&&"tickvals"!==t)&&c(n,0,"")}function c(e,t,n){var o=e[a[t]],l=n+a[t];if(t===a.length-1)p(o)&&i.push(r+l);else if(s[t]){if(Array.isArray(o))for(var u=0;u<o.length;u++)f(o[u])&&c(o[u],t+1,l+"["+u+"].")}else f(o)&&c(o,t+1,l+".")}n=e,r="",t.crawl(o,l),e._module&&e._module.attributes&&t.crawl(e._module.attributes,l);var u=e.transforms;if(u)for(var d=0;d<u.length;d++){var h=u[d],m=h._module;m&&(r="transforms["+d+"].",n=h,t.crawl(m.attributes,l))}return i},t.getTraceValObject=function(e,t){var n,i,a=t[0],s=1;if("transforms"===a){if(1===t.length)return o.transforms;var l=e.transforms;if(!Array.isArray(l)||!l.length)return!1;var c=t[1];if(!w(c)||c>=l.length)return!1;i=(n=(r.transformsRegistry[l[c].type]||{}).attributes)&&n[t[2]],s=3}else{var u=e._module;if(u||(u=(r.modules[e.type||o.type.dflt]||{})._module),!u)return!1;if(!(i=(n=u.attributes)&&n[a])){var d=u.basePlotModule;d&&d.attributes&&(i=d.attributes[a])}i||(i=o[a])}return x(i,t,s)},t.getLayoutValObject=function(e,t){var n=function(e,t){var n,i,o,s,l=e._basePlotModules;if(l){var c;for(n=0;n<l.length;n++){if((o=l[n]).attrRegex&&o.attrRegex.test(t)){if(o.layoutAttrOverrides)return o.layoutAttrOverrides;!c&&o.layoutAttributes&&(c=o.layoutAttributes)}var u=o.baseLayoutAttrOverrides;if(u&&t in u)return u[t]}if(c)return c}var d=e._modules;if(d)for(n=0;n<d.length;n++)if((s=d[n].layoutAttributes)&&t in s)return s[t];for(i in r.componentsRegistry){if("colorscale"===(o=r.componentsRegistry[i]).name&&0===t.indexOf("coloraxis"))return o.layoutAttributes[t];if(!o.schema&&t===o.name)return o.layoutAttributes}return t in a&&a[t]}(e,t[0]);return x(n,t,1)}},4467:function(e,t,n){"use strict";var r=n(1828),i=n(9012),o={name:{valType:"string",editType:"none"}};function a(e){return e&&"string"==typeof e}function s(e){var t=e.length-1;return"s"!==e.charAt(t)&&r.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}o.templateitemname={valType:"string",editType:"calc"},t.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=o.name,t.templateitemname=o.templateitemname,t},t.traceTemplater=function(e){var t,n,o={};for(t in e)n=e[t],Array.isArray(n)&&n.length&&(o[t]=0);return{newTrace:function(a){var s={type:t=r.coerce(a,{},i,"type"),_template:null};if(t in o){n=e[t];var l=o[t]%n.length;o[t]++,s._template=n[l]}return s}}},t.newContainer=function(e,t,n){var i=e._template,o=i&&(i[t]||n&&i[n]);return r.isPlainObject(o)||(o=null),e[t]={_template:o}},t.arrayTemplater=function(e,t,n){var r=e._template,i=r&&r[s(t)],o=r&&r[t];Array.isArray(o)&&o.length||(o=[]);var l={};return{newItem:function(e){var t={name:e.name,_input:e},r=t.templateitemname=e.templateitemname;if(!a(r))return t._template=i,t;for(var s=0;s<o.length;s++){var c=o[s];if(c.name===r)return l[r]=1,t._template=c,t}return t[n]=e[n]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<o.length;t++){var n=o[t],r=n.name;if(a(r)&&!l[r]){var i={_template:n,name:r,_input:{_templateitemname:r}};i.templateitemname=n.templateitemname,e.push(i),l[r]=1}}return e}}},t.arrayDefaultKey=s,t.arrayEditor=function(e,t,n){var i=(r.nestedProperty(e,t).get()||[]).length,o=n._index,a=o>=i&&(n._input||{})._templateitemname;a&&(o=i);var s,l=t+"["+o+"]";function c(){s={},a&&(s[l]={},s[l].templateitemname=a)}function u(e,t){a?r.nestedProperty(s[l],e).set(t):s[l+"."+e]=t}function d(){var e=s;return c(),e}return c(),{modifyBase:function(e,t){s[e]=t},modifyItem:u,getUpdateObj:d,applyUpdate:function(t,n){t&&u(t,n);var i=d();for(var o in i)r.nestedProperty(e,o).set(i[o])}}}},1549:function(e,t,n){"use strict";var r=n(9898),i=n(3972),o=n(4875),a=n(1828),s=n(3306),l=n(7901),c=n(1424),u=n(2998),d=n(4168),f=n(9298),p=n(8783),h=n(9082),m=h.enforce,g=h.clean,v=n(1739).doAutoRange,y="start";function b(e,t,n){for(var r=0;r<n.length;r++){var i=n[r][0],o=n[r][1];if(!(i[0]>=e[1]||i[1]<=e[0])&&o[0]<t[1]&&o[1]>t[0])return!0}return!1}function x(e){var n,i,s,u,h,m,g=e._fullLayout,v=g._size,y=v.p,x=f.list(e,"",!0);if(g._paperdiv.style({width:e._context.responsive&&g.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":g.width+"px",height:e._context.responsive&&g.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":g.height+"px"}).selectAll(".main-svg").call(c.setSize,g.width,g.height),e._context.setBackground(e,g.paper_bgcolor),t.drawMainTitle(e),d.manage(e),!g._has("cartesian"))return o.previousPromises(e);function _(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-y-r:t._offset+t._length+y+r:v.t+v.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+y+r:t._offset-y-r:v.l+v.w*(e.position||0)+r%1}for(n=0;n<x.length;n++){var C=(u=x[n])._anchorAxis;u._linepositions={},u._lw=c.crispRound(e,u.linewidth,1),u._mainLinePosition=_(u,C,u.side),u._mainMirrorPosition=u.mirror&&C?_(u,C,p.OPPOSITE_SIDE[u.side]):null}var k=[],M=[],T=[],A=1===l.opacity(g.paper_bgcolor)&&1===l.opacity(g.plot_bgcolor)&&g.paper_bgcolor===g.plot_bgcolor;for(i in g._plots)if((s=g._plots[i]).mainplot)s.bg&&s.bg.remove(),s.bg=void 0;else{var E=s.xaxis.domain,P=s.yaxis.domain,R=s.plotgroup;if(b(E,P,T)){var O=R.node(),I=s.bg=a.ensureSingle(R,"rect","bg");O.insertBefore(I.node(),O.childNodes[0]),M.push(i)}else R.select("rect.bg").remove(),T.push([E,P]),A||(k.push(i),M.push(i))}var L,D,N,F,z,B,j,Z,H,U,V,G,W,$=g._bgLayer.selectAll(".bg").data(k);for($.enter().append("rect").classed("bg",!0),$.exit().remove(),$.each((function(e){g._plots[e].bg=r.select(this)})),n=0;n<M.length;n++)s=g._plots[M[n]],h=s.xaxis,m=s.yaxis,s.bg&&void 0!==h._offset&&void 0!==m._offset&&s.bg.call(c.setRect,h._offset-y,m._offset-y,h._length+2*y,m._length+2*y).call(l.fill,g.plot_bgcolor).style("stroke-width",0);if(!g._hasOnlyLargeSploms)for(i in g._plots){s=g._plots[i],h=s.xaxis,m=s.yaxis;var q,Y,X=s.clipId="clip"+g._uid+i+"plot",K=a.ensureSingleById(g._clips,"clipPath",X,(function(e){e.classed("plotclip",!0).append("rect")}));s.clipRect=K.select("rect").attr({width:h._length,height:m._length}),c.setTranslate(s.plot,h._offset,m._offset),s._hasClipOnAxisFalse?(q=null,Y=X):(q=X,Y=null),c.setClipUrl(s.plot,q,e),s.layerClipId=Y}function J(e){return"M"+L+","+e+"H"+D}function Q(e){return"M"+h._offset+","+e+"h"+h._length}function ee(e){return"M"+e+","+Z+"V"+j}function te(e){return void 0!==m._shift&&(e+=m._shift),"M"+e+","+m._offset+"v"+m._length}function ne(e,t,n){if(!e.showline||i!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var r=t(e._mainLinePosition);return e.mirror&&(r+=t(e._mainMirrorPosition)),r}for(i in g._plots){s=g._plots[i],h=s.xaxis,m=s.yaxis;var re="M0,0";w(h,i)&&(z=S(h,"left",m,x),L=h._offset-(z?y+z:0),B=S(h,"right",m,x),D=h._offset+h._length+(B?y+B:0),N=_(h,m,"bottom"),F=_(h,m,"top"),!(W=!h._anchorAxis||i!==h._mainSubplot)||"allticks"!==h.mirror&&"all"!==h.mirror||(h._linepositions[i]=[N,F]),re=ne(h,J,Q),W&&h.showline&&("all"===h.mirror||"allticks"===h.mirror)&&(re+=J(N)+J(F)),s.xlines.style("stroke-width",h._lw+"px").call(l.stroke,h.showline?h.linecolor:"rgba(0,0,0,0)")),s.xlines.attr("d",re);var ie="M0,0";w(m,i)&&(V=S(m,"bottom",h,x),j=m._offset+m._length+(V?y:0),G=S(m,"top",h,x),Z=m._offset-(G?y:0),H=_(m,h,"left"),U=_(m,h,"right"),!(W=!m._anchorAxis||i!==m._mainSubplot)||"allticks"!==m.mirror&&"all"!==m.mirror||(m._linepositions[i]=[H,U]),ie=ne(m,ee,te),W&&m.showline&&("all"===m.mirror||"allticks"===m.mirror)&&(ie+=ee(H)+ee(U)),s.ylines.style("stroke-width",m._lw+"px").call(l.stroke,m.showline?m.linecolor:"rgba(0,0,0,0)")),s.ylines.attr("d",ie)}return f.makeClipPaths(e),o.previousPromises(e)}function w(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function _(e,t,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var i=p.FROM_BL[t];return n.side===t?r.domain[i]===e.domain[i]:n.mirror&&r.domain[1-i]===e.domain[1-i]}function S(e,t,n,r){if(_(e,t,n))return n._lw;for(var i=0;i<r.length;i++){var o=r[i];if(o._mainAxis===n._mainAxis&&_(e,t,o))return o._lw}return 0}function C(e,t){var n=e.title,r=e._size,i=0;return t===y?i=n.pad.l:"end"===t&&(i=-n.pad.r),"paper"===n.xref?r.l+r.w*n.x+i:e.width*n.x+i}function k(e,t){var n=e.title,r=e._size,i=0;return"0em"!==t&&t?t===p.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b,"auto"===n.y?r.t/2:"paper"===n.yref?r.t+r.h-r.h*n.y+i:e.height-e.height*n.y+i}t.layoutStyles=function(e){return a.syncOrAsync([o.doAutoMargin,x],e)},t.drawMainTitle=function(e){var t=e._fullLayout,n=function(e){var t=e.title,n="middle";return a.isRightAnchor(t)?n="end":a.isLeftAnchor(t)&&(n=y),n}(t),r=function(e){var t=e.title,n="0em";return a.isTopAnchor(t)?n=p.CAP_SHIFT+"em":a.isMiddleAnchor(t)&&(n=p.MID_SHIFT+"em"),n}(t);u.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:C(t,n),y:k(t,r),"text-anchor":n,dy:r}})},t.doTraceStyle=function(e){var n,r=e.calcdata,a=[];for(n=0;n<r.length;n++){var l=r[n],c=l[0]||{},u=c.trace||{},d=u._module||{},f=d.arraysToCalcdata;f&&f(l,u);var p=d.editStyle;p&&a.push({fn:p,cd0:c})}if(a.length){for(n=0;n<a.length;n++){var h=a[n];h.fn(e,h.cd0)}s(e),t.redrawReglTraces(e)}return o.style(e),i.getComponentMethod("legend","draw")(e),o.previousPromises(e)},t.doColorBars=function(e){return i.getComponentMethod("colorbar","draw")(e),o.previousPromises(e)},t.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,i.call("_doPlot",e,"",t)},t.doLegend=function(e){return i.getComponentMethod("legend","draw")(e),o.previousPromises(e)},t.doTicksRelayout=function(e){return f.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(i.subplotsRegistry.splom.updateGrid(e),s(e),t.redrawReglTraces(e)),t.drawMainTitle(e),o.previousPromises(e)},t.doModeBar=function(e){var t=e._fullLayout;d.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return o.previousPromises(e)},t.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var i=t[n[r]];i._scene.setViewport(i)}},t.drawData=function(e){var n=e._fullLayout;s(e);for(var r=n._basePlotModules,a=0;a<r.length;a++)r[a].plot(e);return t.redrawReglTraces(e),o.style(e),i.getComponentMethod("selections","draw")(e),i.getComponentMethod("shapes","draw")(e),i.getComponentMethod("annotations","draw")(e),i.getComponentMethod("images","draw")(e),n._replotting=!1,o.previousPromises(e)},t.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,i=e._fullData,o=[],s=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<i.length;n++){var l=i[n];!0===l.visible&&0!==l._length&&("splom"===l.type?t._splomScenes[l.uid].draw():"scattergl"===l.type?a.pushUnique(o,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&a.pushUnique(s,l.subplot))}for(n=0;n<o.length;n++)(r=t._plots[o[n]])._scene&&r._scene.draw();for(n=0;n<s.length;n++)(r=t[s[n]]._subplot)._scene&&r._scene.draw()}},t.doAutoRangeAndConstraints=function(e){for(var t,n=f.list(e,"",!0),r={},i=0;i<n.length;i++)if(!r[(t=n[i])._id]){r[t._id]=1,g(e,t),v(e,t);var o=t._matchGroup;if(o)for(var a in o){var s=f.getFromId(e,a);v(e,s,t.range),r[a]=1}}m(e)},t.finalDraw=function(e){i.getComponentMethod("rangeslider","draw")(e),i.getComponentMethod("rangeselector","draw")(e)},t.drawMarginPushers=function(e){i.getComponentMethod("legend","draw")(e),i.getComponentMethod("rangeselector","draw")(e),i.getComponentMethod("sliders","draw")(e),i.getComponentMethod("updatemenus","draw")(e),i.getComponentMethod("colorbar","draw")(e)}},6318:function(e,t,n){"use strict";var r=n(1828),i=r.isPlainObject,o=n(6281),a=n(4875),s=n(9012),l=n(4467),c=n(2075).dfltConfig;function u(e,t){e=r.extendDeep({},e);var n,o,a=Object.keys(e).sort();function s(t,n,r){if(i(n)&&i(t))u(t,n);else if(Array.isArray(n)&&Array.isArray(t)){var a=l.arrayTemplater({_template:e},r);for(o=0;o<n.length;o++){var s=n[o],c=a.newItem(s)._template;c&&u(c,s)}var d=a.defaultItems();for(o=0;o<d.length;o++)n.push(d[o]._template);for(o=0;o<n.length;o++)delete n[o].templateitemname}}for(n=0;n<a.length;n++){var c=a[n],f=e[c];if(c in t?s(f,t[c],c):t[c]=f,d(c)===c)for(var p in t){var h=d(p);p===h||h!==c||p in e||s(f,t[p],c)}}}function d(e){return e.replace(/[0-9]+$/,"")}function f(e,t,n,o,a){var s=a&&n(a);for(var c in e){var u=e[c],p=m(e,c,o),h=m(e,c,a),g=n(h);if(!g){var v=d(c);v!==c&&(g=n(h=m(e,v,a)))}if(!(s&&s===g||!g||g._noTemplating||"data_array"===g.valType||g.arrayOk&&Array.isArray(u)))if(!g.valType&&i(u))f(u,t,n,p,h);else if(g._isLinkedToArray&&Array.isArray(u))for(var y=!1,b=0,x={},w=0;w<u.length;w++){var _=u[w];if(i(_)){var S=_.name;if(S)x[S]||(f(_,t,n,m(u,b,p),m(u,b,h)),b++,x[S]=1);else if(!y){var C=m(e,l.arrayDefaultKey(c),o),k=m(u,b,p);f(_,t,n,k,m(u,b,h));var M=r.nestedProperty(t,k);r.nestedProperty(t,C).set(M.get()),M.set(null),y=!0}}}else r.nestedProperty(t,p).set(u)}}function p(e,t){return o.getLayoutValObject(e,r.nestedProperty({},t).parts)}function h(e,t){return o.getTraceValObject(e,r.nestedProperty({},t).parts)}function m(e,t,n){return n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t}function g(e){for(var t=0;t<e.length;t++)if(i(e[t]))return!0}function v(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}t.makeTemplate=function(e){e=r.isPlainObject(e)?e:r.getGraphDiv(e),e=r.extendDeep({_context:c},{data:e.data,layout:e.layout}),a.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var o={data:{},layout:{}};t.forEach((function(e){var t={};f(e,t,h.bind(null,e));var n=r.coerce(e,{},s,"type"),i=o.data[n];i||(i=o.data[n]=[]),i.push(t)})),f(n,o.layout,p.bind(null,n)),delete o.layout.template;var l=n.template;if(i(l)){var d,m,g,v,y,b,x=l.layout;i(x)&&u(x,o.layout);var w=l.data;if(i(w)){for(m in o.data)if(g=w[m],Array.isArray(g)){for(b=(y=o.data[m]).length,v=g.length,d=0;d<b;d++)u(g[d%v],y[d]);for(d=b;d<v;d++)y.push(r.extendDeep({},g[d]))}for(m in w)m in o.data||(o.data[m]=r.extendDeep([],w[m]))}}return o},t.validateTemplate=function(e,t){var n=r.extendDeep({},{_context:c,data:e.data,layout:e.layout}),o=n.layout||{};i(t)||(t=o.template||{});var s=t.layout,l=t.data,u=[];n.layout=o,n.layout.template=t,a.supplyDefaults(n);var f=n._fullLayout,p=n._fullData,h={};if(i(s)?(function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&i(t[r])){var o,a=d(r),s=[];for(o=0;o<n.length;o++)s.push(m(t,r,n[o])),a!==r&&s.push(m(t,a,n[o]));for(o=0;o<s.length;o++)h[s[o]]=1;e(t[r],s)}}(f,["layout"]),function e(t,n){for(var r in t)if(-1===r.indexOf("defaults")&&i(t[r])){var o=m(t,r,n);h[o]?e(t[r],o):u.push({code:"unused",path:o})}}(s,"layout")):u.push({code:"layout"}),i(l)){for(var y,b={},x=0;x<p.length;x++){var w=p[x];b[y=w.type]=(b[y]||0)+1,w._fullInput._template||u.push({code:"missing",index:w._fullInput.index,traceType:y})}for(y in l){var _=l[y].length,S=b[y]||0;_>S?u.push({code:"unused",traceType:y,templateCount:_,dataCount:S}):S>_&&u.push({code:"reused",traceType:y,templateCount:_,dataCount:S})}}else u.push({code:"data"});if(function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var o=t[r],a=m(t,r,n);i(o)?(Array.isArray(t)&&!1===o._template&&o.templateitemname&&u.push({code:"missing",path:a,templateitemname:o.templateitemname}),e(o,a)):Array.isArray(o)&&g(o)&&e(o,a)}}({data:p,layout:f},""),u.length)return u.map(v)}},403:function(e,t,n){"use strict";var r=n(2770),i=n(2391),o=n(4875),a=n(1828),s=n(5095),l=n(5900),c=n(942),u=n(1506).version,d={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};e.exports=function(e,t){var n,f,p,h;function m(e){return!(e in t)||a.validate(t[e],d[e])}if(t=t||{},a.isPlainObject(e)?(n=e.data||[],f=e.layout||{},p=e.config||{},h={}):(e=a.getGraphDiv(e),n=a.extendDeep([],e.data),f=a.extendDeep({},e.layout),p=e._context,h=e._fullLayout||{}),!m("width")&&null!==t.width||!m("height")&&null!==t.height)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+a.join2(d.format.values,", "," or ")+".");var g={};function v(e,n){return a.coerce(t,g,d,e,n)}var y=v("format"),b=v("width"),x=v("height"),w=v("scale"),_=v("setBackground"),S=v("imageDataOnly"),C=document.createElement("div");C.style.position="absolute",C.style.left="-5000px",document.body.appendChild(C);var k=a.extendFlat({},f);b?k.width=b:null===t.width&&r(h.width)&&(k.width=h.width),x?k.height=x:null===t.height&&r(h.height)&&(k.height=h.height);var M=a.extendFlat({},p,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),T=s.getRedrawFunc(C);function A(){return new Promise((function(e){setTimeout(e,s.getDelay(C._fullLayout))}))}function E(){return new Promise((function(e,t){var n=l(C,y,w),r=C._fullLayout.width,d=C._fullLayout.height;function f(){i.purge(C),document.body.removeChild(C)}if("full-json"===y){var p=o.graphJson(C,!1,"keepdata","object",!0,!0);return p.version=u,p=JSON.stringify(p),f(),e(S?p:s.encodeJSON(p))}if(f(),"svg"===y)return e(S?n:s.encodeSVG(n));var h=document.createElement("canvas");h.id=a.randstr(),c({format:y,width:r,height:d,scale:w,canvas:h,svg:n,promise:!0}).then(e).catch(t)}))}return new Promise((function(e,t){i.newPlot(C,n,k,M).then(T).then(A).then(E).then((function(t){e(function(e){return S?e.replace(s.IMAGE_URL_PREFIX,""):e}(t))})).catch((function(e){t(e)}))}))}},4936:function(e,t,n){"use strict";var r=n(1828),i=n(4875),o=n(6281),a=n(2075).dfltConfig,s=r.isPlainObject,l=Array.isArray,c=r.isArrayOrTypedArray;function u(e,t,n,i,o,a){a=a||[];for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];if("transforms"!==p){var v=a.slice();v.push(p);var y=e[p],b=t[p],x=g(n,p),w=(x||{}).valType,_="info_array"===w,S="colorscale"===w,C=(x||{}).items;if(m(n,p))if(s(y)&&s(b)&&"any"!==w)u(y,b,x,i,o,v);else if(_&&l(y)){y.length>b.length&&i.push(h("unused",o,v.concat(b.length)));var k,M,T,A,E,P=b.length,R=Array.isArray(C);if(R&&(P=Math.min(P,C.length)),2===x.dimensions)for(M=0;M<P;M++)if(l(y[M])){y[M].length>b[M].length&&i.push(h("unused",o,v.concat(M,b[M].length)));var O=b[M].length;for(k=0;k<(R?Math.min(O,C[M].length):O);k++)T=R?C[M][k]:C,A=y[M][k],E=b[M][k],r.validate(A,T)?E!==A&&E!==+A&&i.push(h("dynamic",o,v.concat(M,k),A,E)):i.push(h("value",o,v.concat(M,k),A))}else i.push(h("array",o,v.concat(M),y[M]));else for(M=0;M<P;M++)T=R?C[M]:C,A=y[M],E=b[M],r.validate(A,T)?E!==A&&E!==+A&&i.push(h("dynamic",o,v.concat(M),A,E)):i.push(h("value",o,v.concat(M),A))}else if(x.items&&!_&&l(y)){var I,L,D=C[Object.keys(C)[0]],N=[];for(I=0;I<b.length;I++){var F=b[I]._index||I;if((L=v.slice()).push(F),s(y[F])&&s(b[I])){N.push(F);var z=y[F],B=b[I];s(z)&&!1!==z.visible&&!1===B.visible?i.push(h("invisible",o,L)):u(z,B,D,i,o,L)}}for(I=0;I<y.length;I++)(L=v.slice()).push(I),s(y[I])?-1===N.indexOf(I)&&i.push(h("unused",o,L)):i.push(h("object",o,L,y[I]))}else!s(y)&&s(b)?i.push(h("object",o,v,y)):c(y)||!c(b)||_||S?p in t?r.validate(y,x)?"enumerated"===x.valType&&(x.coerceNumber&&y!==+b||y!==b)&&i.push(h("dynamic",o,v,y,b)):i.push(h("value",o,v,y)):i.push(h("unused",o,v,y)):i.push(h("array",o,v,y));else i.push(h("schema",o,v))}}return i}function d(e,t){for(var n=e.layout.layoutAttributes,i=0;i<t.length;i++){var o=t[i],a=e.traces[o.type],s=a.layoutAttributes;s&&(o.subplot?r.extendFlat(n[a.attributes.subplot.dflt],s):r.extendFlat(n,s))}return n}e.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n,c,f=o.get(),p=[],m={_context:r.extendFlat({},a)};l(e)?(m.data=r.extendDeep([],e),n=e):(m.data=[],n=[],p.push(h("array","data"))),s(t)?(m.layout=r.extendDeep({},t),c=t):(m.layout={},c={},arguments.length>1&&p.push(h("object","layout"))),i.supplyDefaults(m);for(var g=m._fullData,v=n.length,y=0;y<v;y++){var b=n[y],x=["data",y];if(s(b)){var w=g[y],_=w.type,S=f.traces[_].attributes;S.type={valType:"enumerated",values:[_]},!1===w.visible&&!1!==b.visible&&p.push(h("invisible",x)),u(b,w,S,p,x);var C=b.transforms,k=w.transforms;if(C){l(C)||p.push(h("array",x,["transforms"])),x.push("transforms");for(var M=0;M<C.length;M++){var T=["transforms",M],A=C[M].type;if(s(C[M])){var E=f.transforms[A]?f.transforms[A].attributes:{};E.type={valType:"enumerated",values:Object.keys(f.transforms)},u(C[M],k[M],E,p,x,T)}else p.push(h("object",x,T))}}}else p.push(h("object",x))}return u(c,m._fullLayout,d(f,g),p,"layout"),0===p.length?void 0:p};var f={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":p(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":p(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return p(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var r=s(n)?"container":"key";return p(e)+r+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[p(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?p(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[p(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function p(e){return l(e)?"In data trace "+e[1]+", ":"In "+e+", "}function h(e,t,n,i,o){var a,s;n=n||"",l(t)?(a=t[0],s=t[1]):(a=t,s=null);var c=function(e){if(!l(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),u=f[e](t,c,i,o);return r.log(u),{code:e,container:a,trace:s,path:n,astr:c,msg:u}}function m(e,t){var n=y(t),r=n.keyMinusId,i=n.id;return!!(r in e&&e[r]._isSubplotObj&&i)||t in e}function g(e,t){return t in e?e[t]:e[y(t).keyMinusId]}var v=r.counterRegex("([a-z]+)");function y(e){var t=e.match(v);return{keyMinusId:t&&t[1],id:t&&t[2]}}},5594:function(e){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},5501:function(e,t,n){"use strict";var r=n(1828),i=n(4467);e.exports=function(e,t,n){var o,a,s=n.name,l=n.inclusionAttr||"visible",c=t[s],u=r.isArrayOrTypedArray(e[s])?e[s]:[],d=t[s]=[],f=i.arrayTemplater(t,s,l);for(o=0;o<u.length;o++){var p=u[o];r.isPlainObject(p)?a=f.newItem(p):(a=f.newItem({}))[l]=!1,a._index=o,!1!==a[l]&&n.handleItemDefaults(p,a,t,n),d.push(a)}var h=f.defaultItems();for(o=0;o<h.length;o++)(a=h[o])._index=d.length,n.handleItemDefaults({},a,t,n,{}),d.push(a);if(r.isArrayOrTypedArray(c)){var m=Math.min(c.length,d.length);for(o=0;o<m;o++)r.relinkPrivateKeys(d[o],c[o])}return d}},9012:function(e,t,n){"use strict";var r=n(1940),i=n(7914);e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:r({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:i.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},2973:function(e,t,n){"use strict";var r=n(2770),i=n(1828),o=i.dateTime2ms,a=i.incrementMonth,s=n(606).ONEAVGMONTH;e.exports=function(e,t,n,i){if("date"!==t.type)return{vals:i};var l=e[n+"periodalignment"];if(!l)return{vals:i};var c,u=e[n+"period"];if(r(u)){if((u=+u)<=0)return{vals:i}}else if("string"==typeof u&&"M"===u.charAt(0)){var d=+u.substring(1);if(!(d>0&&Math.round(d)===d))return{vals:i};c=d}for(var f=t.calendar,p="start"===l,h="end"===l,m=e[n+"period0"],g=o(m,f)||0,v=[],y=[],b=[],x=i.length,w=0;w<x;w++){var _,S,C,k=i[w];if(c){for(_=Math.round((k-g)/(c*s)),C=a(g,c*_,f);C>k;)C=a(C,-c,f);for(;C<=k;)C=a(C,c,f);S=a(C,-c,f)}else{for(C=g+(_=Math.round((k-g)/u))*u;C>k;)C-=u;for(;C<=k;)C+=u;S=C-u}v[w]=p?S:h?C:(S+C)/2,y[w]=S,b[w]=C}return{vals:v,starts:y,ends:b}}},9502:function(e){"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},1739:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=n(1828),a=n(606).FP_SAFE,s=n(3972),l=n(1424),c=n(1675),u=c.getFromId,d=c.isLinked;function f(e,t){var n,r,i=[],a=e._fullLayout,s=h(a,t,0),l=h(a,t,1),c=m(e,t),u=c.min,d=c.max;if(0===u.length||0===d.length)return o.simpleMap(t.range,t.r2l);var f=u[0].val,g=d[0].val;for(n=1;n<u.length&&f===g;n++)f=Math.min(f,u[n].val);for(n=1;n<d.length&&f===g;n++)g=Math.max(g,d[n].val);var v=!1;if(t.range){var y=o.simpleMap(t.range,t.r2l);v=y[1]<y[0]}"reversed"===t.autorange&&(v=!0,t.autorange=!0);var b,x,w,_,S,C,k=t.rangemode,M="tozero"===k,T="nonnegative"===k,A=t._length,E=A/10,P=0;for(n=0;n<u.length;n++)for(b=u[n],r=0;r<d.length;r++)(C=(x=d[r]).val-b.val-p(t,b.val,x.val))>0&&((S=A-s(b)-l(x))>E?C/S>P&&(w=b,_=x,P=C/S):C/A>P&&(w={val:b.val,nopad:1},_={val:x.val,nopad:1},P=C/A));if(f===g){var R=f-1,O=f+1;if(M)if(0===f)i=[0,1];else{var I=(f>0?d:u).reduce((function(e,t){return Math.max(e,l(t))}),0),L=f/(1-Math.min(.5,I/A));i=f>0?[0,L]:[L,0]}else i=T?[Math.max(0,R),Math.max(1,O)]:[R,O]}else M?(w.val>=0&&(w={val:0,nopad:1}),_.val<=0&&(_={val:0,nopad:1})):T&&(w.val-P*s(w)<0&&(w={val:0,nopad:1}),_.val<=0&&(_={val:1,nopad:1})),P=(_.val-w.val-p(t,b.val,x.val))/(A-s(w)-l(_)),i=[w.val-P*s(w),_.val+P*l(_)];return v&&i.reverse(),o.simpleMap(i,t.l2r||Number)}function p(e,t,n){var r=0;if(e.rangebreaks)for(var i=e.locateBreaks(t,n),o=0;o<i.length;o++){var a=i[o];r+=a.max-a.min}return r}function h(e,t,n){var i=.05*t._length,a=t._anchorAxis||{};if(-1!==(t.ticklabelposition||"").indexOf("inside")||-1!==(a.ticklabelposition||"").indexOf("inside")){var s="reversed"===t.autorange;if(!s){var c=o.simpleMap(t.range,t.r2l);s=c[1]<c[0]}s&&(n=!n)}var u=0;return d(e,t._id)||(u=function(e,t,n){var i=0,a="x"===t._id.charAt(0);for(var s in e._plots){var c=e._plots[s];if(t._id===c.xaxis._id||t._id===c.yaxis._id){var u=(a?c.yaxis:c.xaxis)||{};if(-1!==(u.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===u.side||"bottom"===u.side)||n&&("top"===u.side||"right"===u.side))){if(u._vals){var d=o.deg2rad(u._tickAngles[u._id+"tick"]||0),f=Math.abs(Math.cos(d)),p=Math.abs(Math.sin(d));if(!u._vals[0].bb){var h=u._id+"tick";u._selections[h].each((function(e){var t=r.select(this);t.select(".text-math-group").empty()&&(e.bb=l.bBox(t.node()))}))}for(var m=0;m<u._vals.length;m++){var g=u._vals[m].bb;if(g){var v=6+g.width,y=6+g.height;i=Math.max(i,a?Math.max(v*f,y*p):Math.max(y*f,v*p))}}}"inside"===u.ticks&&"inside"===u.ticklabelposition&&(i+=u.ticklen||0)}}}return i}(e,t,n)),i=Math.max(u,i),"domain"===t.constrain&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?i:u)}}function m(e,t,n){var r,i,o,a=t._id,s=e._fullData,l=e._fullLayout,c=[],d=[];function f(e,t){for(r=0;r<t.length;r++){var n=e[t[r]],s=(n._extremes||{})[a];if(!0===n.visible&&s){for(i=0;i<s.min.length;i++)o=s.min[i],g(c,o.val,o.pad,{extrapad:o.extrapad});for(i=0;i<s.max.length;i++)o=s.max[i],v(d,o.val,o.pad,{extrapad:o.extrapad})}}}if(f(s,t._traceIndices),f(l.annotations||[],t._annIndices||[]),f(l.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var p in t._matchGroup)if(p!==t._id){var h=u(e,p),y=m(e,h,!0),b=t._length/h._length;for(i=0;i<y.min.length;i++)o=y.min[i],g(c,o.val,o.pad*b,{extrapad:o.extrapad});for(i=0;i<y.max.length;i++)o=y.max[i],v(d,o.val,o.pad*b,{extrapad:o.extrapad})}return{min:c,max:d}}function g(e,t,n,r){y(e,t,n,r,x)}function v(e,t,n,r){y(e,t,n,r,w)}function y(e,t,n,r,i){for(var o=r.tozero,a=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(i(c.val,t)&&c.pad>=n&&(c.extrapad||!a)){s=!1;break}i(t,c.val)&&c.pad<=n&&(a||!c.extrapad)&&(e.splice(l,1),l--)}if(s){var u=o&&0===t;e.push({val:t,pad:u?0:n,extrapad:!u&&a})}}function b(e){return i(e)&&Math.abs(e)<a}function x(e,t){return e<=t}function w(e,t){return e>=t}e.exports={getAutoRange:f,makePadFn:h,doAutoRange:function(e,t,n){if(t.setScale(),t.autorange){t.range=n?n.slice():f(e,t),t._r=t.range.slice(),t._rl=o.simpleMap(t._r,t.r2l);var r=t._input,i={};i[t._attr+".range"]=t.range,i[t._attr+".autorange"]=t.autorange,s.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,i),r.range=t.range.slice(),r.autorange=t.autorange}var a=t._anchorAxis;if(a&&a.rangeslider){var l=a.rangeslider[t._name];l&&"auto"===l.rangemode&&(l.range=f(e,t)),a._input.rangeslider[t._name]=o.extendFlat({},l)}},findExtremes:function(e,t,n){n||(n={}),e._m||e.setScale();var r,o,s,l,c,u,d,f,p,h=[],m=[],y=t.length,x=n.padded||!1,w=n.tozero&&("linear"===e.type||"-"===e.type),_="log"===e.type,S=!1,C=n.vpadLinearized||!1;function k(e){if(Array.isArray(e))return S=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}var M=k((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),T=k((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),A=k(n.vpadplus||n.vpad),E=k(n.vpadminus||n.vpad);if(!S){if(f=1/0,p=-1/0,_)for(r=0;r<y;r++)(o=t[r])<f&&o>0&&(f=o),o>p&&o<a&&(p=o);else for(r=0;r<y;r++)(o=t[r])<f&&o>-a&&(f=o),o>p&&o<a&&(p=o);t=[f,p],y=2}var P={tozero:w,extrapad:x};function R(n){s=t[n],i(s)&&(u=M(n),d=T(n),C?(l=e.c2l(s)-E(n),c=e.c2l(s)+A(n)):(f=s-E(n),p=s+A(n),_&&f<p/10&&(f=p/10),l=e.c2l(f),c=e.c2l(p)),w&&(l=Math.min(0,l),c=Math.max(0,c)),b(l)&&g(h,l,d,P),b(c)&&v(m,c,u,P))}var O=Math.min(6,y);for(r=0;r<O;r++)R(r);for(r=y-1;r>=O;r--)R(r);return{min:h,max:m,opts:n}},concatExtremes:m}},9298:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=n(4875),a=n(3972),s=n(1828),l=s.strTranslate,c=n(3893),u=n(2998),d=n(7901),f=n(1424),p=n(3838),h=n(6287),m=n(606),g=m.ONEMAXYEAR,v=m.ONEAVGYEAR,y=m.ONEMINYEAR,b=m.ONEMAXQUARTER,x=m.ONEAVGQUARTER,w=m.ONEMINQUARTER,_=m.ONEMAXMONTH,S=m.ONEAVGMONTH,C=m.ONEMINMONTH,k=m.ONEWEEK,M=m.ONEDAY,T=M/2,A=m.ONEHOUR,E=m.ONEMIN,P=m.ONESEC,R=m.MINUS_SIGN,O=m.BADNUM,I={K:"zeroline"},L={K:"gridline",L:"path"},D={K:"minor-gridline",L:"path"},N={K:"tick",L:"path"},F={K:"tick",L:"text"},z={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},B=n(8783),j=B.MID_SHIFT,Z=B.CAP_SHIFT,H=B.LINE_SPACING,U=B.OPPOSITE_SIDE,V=e.exports={};V.setConvert=n(1994);var G=n(4322),W=n(1675),$=W.idSort,q=W.isLinked;V.id2name=W.id2name,V.name2id=W.name2id,V.cleanId=W.cleanId,V.list=W.list,V.listIds=W.listIds,V.getFromId=W.getFromId,V.getFromTrace=W.getFromTrace;var Y=n(1739);function X(e){var t=1e-4*(e[1]-e[0]);return[e[0]-t,e[1]+t]}V.getAutoRange=Y.getAutoRange,V.findExtremes=Y.findExtremes,V.coerceRef=function(e,t,n,r,i,o){var a=r.charAt(r.length-1),l=n._fullLayout._subplots[a+"axis"],c=r+"ref",u={};return i||(i=l[0]||("string"==typeof o?o:o[0])),o||(o=i),l=l.concat(l.map((function(e){return e+" domain"}))),u[c]={valType:"enumerated",values:l.concat(o?"string"==typeof o?[o]:o:[]),dflt:i},s.coerce(e,t,u,c)},V.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},V.coercePosition=function(e,t,n,r,i,o){var a,l;if("range"!==V.getRefType(r))a=s.ensureNumber,l=n(i,o);else{var c=V.getFromId(t,r);l=n(i,o=c.fraction2r(o)),a=c.cleanPos}e[i]=a(l)},V.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?s.ensureNumber:V.getFromId(t,n).cleanPos)(e)},V.redrawComponents=function(e,t){t=t||V.listIds(e);var n=e._fullLayout;function r(r,i,o,s){for(var l=a.getComponentMethod(r,i),c={},u=0;u<t.length;u++)for(var d=n[V.id2name(t[u])][o],f=0;f<d.length;f++){var p=d[f];if(!c[p]&&(l(e,p),c[p]=1,s))return}}r("annotations","drawOne","_annIndices"),r("shapes","drawOne","_shapeIndices"),r("images","draw","_imgIndices",!0),r("selections","drawOne","_selectionIndices")};var K=V.getDataConversions=function(e,t,n,r){var i,o="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(o)){if(i={type:G(r,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},V.setConvert(i),"category"===i.type)for(var a=0;a<r.length;a++)i.d2c(r[a])}else i=V.getFromTrace(e,t,o);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===o?{d2c:Q,c2d:Q}:{d2c:J,c2d:J}};function J(e){return+e}function Q(e){return String(e)}function ee(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function te(e,t){return Math.abs(e/t-1)<.001}function ne(e){return+e.substring(1)}function re(e,t){return e.rangebreaks&&(t=t.filter((function(t){return e.maskBreaks(t.x)!==O}))),t}function ie(e){var t=e._mainAxis,n=[];if(t._vals)for(var r=0;r<t._vals.length;r++)if(!t._vals[r].noTick){var i=t.l2p(t._vals[r].x),o=e.p2l(i),a=V.tickText(e,o);t._vals[r].minor&&(a.minor=!0,a.text=""),n.push(a)}return re(e,n)}function oe(e){var t=X(s.simpleMap(e.range,e.r2l)),n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i="category"===e.type?e.d2l_noadd:e.d2l;"log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var o=[],a=0;a<=1;a++)if(!a||e.minor){var l=a?e.minor.tickvals:e.tickvals,c=a?[]:e.ticktext;if(l){Array.isArray(c)||(c=[]);for(var u=0;u<l.length;u++){var d=i(l[u]);if(d>n&&d<r){var f=void 0===c[u]?V.tickText(e,d):me(e,d,String(c[u]));a&&(f.minor=!0,f.text=""),o.push(f)}}}}return re(e,o)}V.getDataToCoordFunc=function(e,t,n,r){return K(e,t,n,r).d2c},V.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},V.minDtick=function(e,t,n,r){-1===["log","category","multicategory"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},V.saveRangeInitial=function(e,t){for(var n=V.list(e,"",!0),r=!1,i=0;i<n.length;i++){var o=n[i],a=void 0===o._rangeInitial,s=a||!(o.range[0]===o._rangeInitial[0]&&o.range[1]===o._rangeInitial[1]);(a&&!1===o.autorange||t&&s)&&(o._rangeInitial=o.range.slice(),r=!0)}return r},V.saveShowSpikeInitial=function(e,t){for(var n=V.list(e,"",!0),r=!1,i="on",o=0;o<n.length;o++){var a=n[o],s=void 0===a._showSpikeInitial,l=s||!(a.showspikes===a._showspikes);(s||t&&l)&&(a._showSpikeInitial=a.showspikes,r=!0),"on"!==i||a.showspikes||(i="off")}return e._fullLayout._cartesianSpikesEnabled=i,r},V.autoBin=function(e,t,n,r,o,a){var l,c=s.aggNums(Math.min,null,e),u=s.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:c-.5,end:u+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:u-c};if(o||(o=t.calendar),l="log"===t.type?{type:"linear",range:[c,u]}:{type:t.type,range:s.simpleMap([c,u],t.c2r,0,o),calendar:o},V.setConvert(l),a=a&&h.dtick(a,l.type))l.dtick=a,l.tick0=h.tick0(void 0,l.type,o);else{var d;if(n)d=(u-c)/n;else{var f=s.distinctVals(e),p=Math.pow(10,Math.floor(Math.log(f.minDiff)/Math.LN10)),m=p*s.roundUp(f.minDiff/p,[.9,1.9,4.9,9.9],!0);d=Math.max(m,2*s.stdev(e)/Math.pow(e.length,r?.25:.4)),i(d)||(d=1)}V.autoTicks(l,d)}var g,v=l.dtick,y=V.tickIncrement(V.tickFirst(l),v,"reverse",o);if("number"==typeof v)y=function(e,t,n,r,o){var a=0,s=0,l=0,c=0;function u(t){return(1+100*(t-e)/n.dtick)%100<2}for(var d=0;d<t.length;d++)t[d]%1==0?l++:i(t[d])||c++,u(t[d])&&a++,u(t[d]+n.dtick/2)&&s++;var f=t.length-c;if(l===f&&"date"!==n.type)n.dtick<1?e=r-.5*n.dtick:(e-=.5)+n.dtick<r&&(e+=n.dtick);else if(s<.1*f&&(a>.3*f||u(r)||u(o))){var p=n.dtick/2;e+=e+p<r?p:-p}return e}(y,e,l,c,u),g=y+(1+Math.floor((u-y)/v))*v;else for("M"===l.dtick.charAt(0)&&(y=function(e,t,n,r,i){var o=s.findExactDates(t,i);if(o.exactDays>.8){var a=Number(n.substr(1));o.exactYears>.8&&a%12==0?e=V.tickIncrement(e,"M6","reverse")+1.5*M:o.exactMonths>.8?e=V.tickIncrement(e,"M1","reverse")+15.5*M:e-=T;var l=V.tickIncrement(e,n);if(l<=r)return l}return e}(y,e,v,c,o)),g=y;g<=u;)g=V.tickIncrement(g,v,!1,o);return{start:t.c2r(y,0,o),end:t.c2r(g,0,o),size:v,_dataSpan:u-c}},V.prepMinorTicks=function(e,t,n){if(!t.minor.dtick){delete e.dtick;var r,o=t.dtick&&i(t._tmin);if(o){var a=V.tickIncrement(t._tmin,t.dtick,!0);r=[t._tmin,.99*a+.01*t._tmin]}else{var l=s.simpleMap(t.range,t.r2l);r=[l[0],.8*l[0]+.2*l[1]]}if(e.range=s.simpleMap(r,t.l2r),e._isMinor=!0,V.prepTicks(e,n),o){var c=i(t.dtick),u=i(e.dtick),d=c?t.dtick:+t.dtick.substring(1),f=u?e.dtick:+e.dtick.substring(1);c&&u?ee(d,f)?d===2*k&&f===2*M&&(e.dtick=k):d===2*k&&f===3*M?e.dtick=k:d!==k||(t._input.minor||{}).nticks?te(d/f,2.5)?e.dtick=d/2:e.dtick=d:e.dtick=M:"M"===String(t.dtick).charAt(0)?u?e.dtick="M1":ee(d,f)?d>=12&&2===f&&(e.dtick="M3"):e.dtick=t.dtick:"L"===String(e.dtick).charAt(0)?"L"===String(t.dtick).charAt(0)?ee(d,f)||(e.dtick=te(d/f,2.5)?t.dtick/2:t.dtick):e.dtick="D1":"D2"===e.dtick&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}void 0===t.minor._tick0Init&&(e.tick0=t.tick0)},V.prepTicks=function(e,t){var n=s.simpleMap(e.range,e.r2l,void 0,void 0,t);if("auto"===e.tickmode||!e.dtick){var r,o=e.nticks;o||("category"===e.type||"multicategory"===e.type?(r=e.tickfont?s.bigFont(e.tickfont.size||12):15,o=e._length/r):(r="y"===e._id.charAt(0)?40:80,o=s.constrain(e._length/r,4,9)+1),"radialaxis"===e._name&&(o*=2)),e.minor&&"array"!==e.minor.tickmode||"array"===e.tickmode&&(o*=100),e._roughDTick=Math.abs(n[1]-n[0])/o,V.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}"period"===e.ticklabelmode&&function(e){var t;function n(){return!(i(e.dtick)||"M"!==e.dtick.charAt(0))}var r=n(),o=V.getTickFormat(e);if(o){var a=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(o)||(/%[HI]/.test(o)?(t=A,a&&!r&&e.dtick<A&&(e.dtick=A)):/%p/.test(o)?(t=T,a&&!r&&e.dtick<T&&(e.dtick=T)):/%[Aadejuwx]/.test(o)?(t=M,a&&!r&&e.dtick<M&&(e.dtick=M)):/%[UVW]/.test(o)?(t=k,a&&!r&&e.dtick<k&&(e.dtick=k)):/%[Bbm]/.test(o)?(t=S,a&&(r?ne(e.dtick)<1:e.dtick<C)&&(e.dtick="M1")):/%[q]/.test(o)?(t=x,a&&(r?ne(e.dtick)<3:e.dtick<w)&&(e.dtick="M3")):/%[Yy]/.test(o)&&(t=v,a&&(r?ne(e.dtick)<12:e.dtick<y)&&(e.dtick="M12")))}(r=n())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),he(e)},V.calcTicks=function(e,t){for(var n,r,o=e.type,a=e.calendar,l=e.ticklabelstep,c="period"===e.ticklabelmode,u=s.simpleMap(e.range,e.r2l,void 0,void 0,t),d=u[1]<u[0],f=Math.min(u[0],u[1]),p=Math.max(u[0],u[1]),h=Math.max(1e3,e._length||0),m=[],E=[],P=[],R=[],I=e.minor&&(e.minor.ticks||e.minor.showgrid),L=1;L>=(I?0:1);L--){var D=!L;L?(e._dtickInit=e.dtick,e._tick0Init=e.tick0):(e.minor._dtickInit=e.minor.dtick,e.minor._tick0Init=e.minor.tick0);var N=L?e:s.extendFlat({},e,e.minor);if(D?V.prepMinorTicks(N,e,t):V.prepTicks(N,t),"array"!==N.tickmode)if("sync"!==N.tickmode){var F=X(u),z=F[0],B=F[1],j=i(N.dtick),Z="log"===o&&!(j||"L"===N.dtick.charAt(0)),H=V.tickFirst(N,t);if(L){if(e._tmin=H,H<z!==d)break;"category"!==o&&"multicategory"!==o||(B=d?Math.max(-.5,B):Math.min(e._categories.length-.5,B))}var U,G,W=null,$=H;L&&(j?G=e.dtick:"date"===o?"string"==typeof e.dtick&&"M"===e.dtick.charAt(0)&&(G=S*e.dtick.substring(1)):G=e._roughDTick,U=Math.round((e.r2l($)-e.r2l(e.tick0))/G)-1);var q=N.dtick;for(N.rangebreaks&&N._tick0Init!==N.tick0&&($=Le($,e),d||($=V.tickIncrement($,q,!d,a))),L&&c&&($=V.tickIncrement($,q,!d,a),U--);d?$>=B:$<=B;$=V.tickIncrement($,q,d,a)){if(L&&U++,N.rangebreaks&&!d){if($<z)continue;if(N.maskBreaks($)===O&&Le($,N)>=p)break}if(P.length>h||$===W)break;W=$;var Y={value:$};L?(Z&&$!==(0|$)&&(Y.simpleLabel=!0),l>1&&U%l&&(Y.skipLabel=!0),P.push(Y)):(Y.minor=!0,R.push(Y))}}else P=[],m=ie(e);else L?(P=[],m=oe(e)):(R=[],E=oe(e))}if(I&&!("inside"===e.minor.ticks&&"outside"===e.ticks||"outside"===e.minor.ticks&&"inside"===e.ticks)){for(var K=P.map((function(e){return e.value})),J=[],Q=0;Q<R.length;Q++){var ee=R[Q],te=ee.value;if(-1===K.indexOf(te)){for(var ne=!1,re=0;!ne&&re<P.length;re++)1e7+P[re].value===1e7+te&&(ne=!0);ne||J.push(ee)}}R=J}if(c&&function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r].value,o=r,a=r+1;r<e.length-1?(o=r,a=r+1):r>0?(o=r-1,a=r):(o=r,a=r);var s,l=e[o].value,c=e[a].value,u=Math.abs(c-l),d=n||u,f=0;d>=y?f=u>=y&&u<=g?u:v:n===x&&d>=w?f=u>=w&&u<=b?u:x:d>=C?f=u>=C&&u<=_?u:S:n===k&&d>=k?f=k:d>=M?f=M:n===T&&d>=T?f=T:n===A&&d>=A&&(f=A),f>=u&&(f=u,s=!0);var p=i+f;if(t.rangebreaks&&f>0){for(var h=0,m=0;m<84;m++){var E=(m+.5)/84;t.maskBreaks(i*(1-E)+E*p)!==O&&h++}(f*=h/84)||(e[r].drop=!0),s&&u>k&&(f=u)}(f>0||0===r)&&(e[r].periodX=i+f/2)}}(P,e,e._definedDelta),e.rangebreaks){var ae="y"===e._id.charAt(0),se=1;"auto"===e.tickmode&&(se=e.tickfont?e.tickfont.size:12);var le=NaN;for(n=P.length-1;n>-1;n--)if(P[n].drop)P.splice(n,1);else{P[n].value=Le(P[n].value,e);var ce=e.c2p(P[n].value);(ae?le>ce-se:le<ce+se)?P.splice(d?n+1:n,1):le=ce}}Ie(e)&&360===Math.abs(u[1]-u[0])&&P.pop(),e._tmax=(P[P.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var ue,de,fe=function(t){t.text="",e._prevDateHead=r};for(P=P.concat(R),n=0;n<P.length;n++){var pe=P[n].minor,he=P[n].value;pe?E.push({x:he,minor:!0}):(r=e._prevDateHead,ue=V.tickText(e,he,!1,P[n].simpleLabel),void 0!==(de=P[n].periodX)&&(ue.periodX=de,(de>p||de<f)&&(de>p&&(ue.periodX=p),de<f&&(ue.periodX=f),fe(ue))),P[n].skipLabel&&fe(ue),m.push(ue))}return m=m.concat(E),e._inCalcTicks=!1,c&&m.length&&(m[0].noTick=!0),m};var ae=[2,5,10],se=[1,2,3,6,12],le=[1,2,5,10,15,30],ce=[1,2,3,7,14],ue=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],de=[-.301,0,.301,.699,1],fe=[15,30,45,90,180];function pe(e,t,n){return t*s.roundUp(e/t,n)}function he(e){var t=e.dtick;if(e._tickexponent=0,i(t)||"string"==typeof t||(t=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type){var n=e.r2l(e.tick0),r=e.l2r(n).replace(/(^-|i)/g,""),o=r.length;if("M"===String(t).charAt(0))o>10||"01-01"!==r.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m";else if(t>=M&&o<=10||t>=15*M)e._tickround="d";else if(t>=E&&o<=16||t>=A)e._tickround="M";else if(t>=P&&o<=19||t>=E)e._tickround="S";else{var a=e.l2r(n+t).replace(/^-/,"").length;e._tickround=Math.max(o,a)-20,e._tickround<0&&(e._tickround=4)}}else if(i(t)||"L"===t.charAt(0)){var s=e.range.map(e.r2d||Number);i(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),c=Math.floor(Math.log(l)/Math.LN10+.01),u=void 0===e.minexponent?3:e.minexponent;Math.abs(c)>u&&(ve(e.exponentformat)&&!ye(c)?e._tickexponent=3*Math.round((c-1)/3):e._tickexponent=c)}else e._tickround=null}function me(e,t,n){var r=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}V.autoTicks=function(e,t,n){var r;function o(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type){e.tick0=s.dateTick0(e.calendar,0);var a=2*t;if(a>v)t/=v,r=o(10),e.dtick="M"+12*pe(t,r,ae);else if(a>S)t/=S,e.dtick="M"+pe(t,1,se);else if(a>M){if(e.dtick=pe(t,M,e._hasDayOfWeekBreaks?[1,2,7,14]:ce),!n){var l=V.getTickFormat(e),c="period"===e.ticklabelmode;c&&(e._rawTick0=e.tick0),/%[uVW]/.test(l)?e.tick0=s.dateTick0(e.calendar,2):e.tick0=s.dateTick0(e.calendar,1),c&&(e._dowTick0=e.tick0)}}else a>A?e.dtick=pe(t,A,se):a>E?e.dtick=pe(t,E,le):a>P?e.dtick=pe(t,P,le):(r=o(10),e.dtick=pe(t,r,ae))}else if("log"===e.type){e.tick0=0;var u=s.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(u[1]-u[0])<1){var d=1.5*Math.abs((u[1]-u[0])/t);t=Math.abs(Math.pow(10,u[1])-Math.pow(10,u[0]))/d,r=o(10),e.dtick="L"+pe(t,r,ae)}else e.dtick=t>.3?"D2":"D1"}else"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):Ie(e)?(e.tick0=0,r=1,e.dtick=pe(t,r,fe)):(e.tick0=0,r=o(10),e.dtick=pe(t,r,ae));if(0===e.dtick&&(e.dtick=1),!i(e.dtick)&&"string"!=typeof e.dtick){var f=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(f)}},V.tickIncrement=function(e,t,n,o){var a=n?-1:1;if(i(t))return s.increment(e,a*t);var l=t.charAt(0),c=a*Number(t.substr(1));if("M"===l)return s.incrementMonth(e,c,o);if("L"===l)return Math.log(Math.pow(10,e)+c)/Math.LN10;if("D"===l){var u="D2"===t?de:ue,d=e+.01*a,f=s.roundUp(s.mod(d,1),u,n);return Math.floor(d)+Math.log(r.round(Math.pow(10,f),1))/Math.LN10}throw"unrecognized dtick "+String(t)},V.tickFirst=function(e,t){var n=e.r2l||Number,o=s.simpleMap(e.range,n,void 0,void 0,t),a=o[1]<o[0],l=a?Math.floor:Math.ceil,c=X(o)[0],u=e.dtick,d=n(e.tick0);if(i(u)){var f=l((c-d)/u)*u+d;return"category"!==e.type&&"multicategory"!==e.type||(f=s.constrain(f,0,e._categories.length-1)),f}var p=u.charAt(0),h=Number(u.substr(1));if("M"===p){for(var m,g,v,y=0,b=d;y<10;){if(((m=V.tickIncrement(b,u,a,e.calendar))-c)*(b-c)<=0)return a?Math.min(b,m):Math.max(b,m);g=(c-(b+m)/2)/(m-b),v=p+(Math.abs(Math.round(g))||1)*h,b=V.tickIncrement(b,v,g<0?!a:a,e.calendar),y++}return s.error("tickFirst did not converge",e),b}if("L"===p)return Math.log(l((Math.pow(10,c)-d)/h)*h+d)/Math.LN10;if("D"===p){var x="D2"===u?de:ue,w=s.roundUp(s.mod(c,1),x,a);return Math.floor(c)+Math.log(r.round(Math.pow(10,w),1))/Math.LN10}throw"unrecognized dtick "+String(u)},V.tickText=function(e,t,n,r){var o,a=me(e,t),l="array"===e.tickmode,c=n||l,u=e.type,d="category"===u?e.d2l_noadd:e.d2l;if(l&&Array.isArray(e.ticktext)){var f=s.simpleMap(e.range,e.r2l),p=(Math.abs(f[1]-f[0])-(e._lBreaks||0))/1e4;for(o=0;o<e.ticktext.length&&!(Math.abs(t-d(e.tickvals[o]))<p);o++);if(o<e.ticktext.length)return a.text=String(e.ticktext[o]),a}function h(r){if(void 0===r)return!0;if(n)return"none"===r;var i={first:e._tmin,last:e._tmax}[r];return"all"!==r&&t!==i}var m=n?"never":"none"!==e.exponentformat&&h(e.showexponent)?"hide":"";if("date"===u?function(e,t,n,r){var o=e._tickround,a=n&&e.hoverformat||V.getTickFormat(e);r&&(o=i(o)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[o]);var l,c=s.formatDate(t.x,a,o,e._dateFormat,e.calendar,e._extraFormat),u=c.indexOf("\n");if(-1!==u&&(l=c.substr(u+1),c=c.substr(0,u)),r&&("00:00:00"===c||"00:00"===c?(c=l,l=""):8===c.length&&(c=c.replace(/:00$/,""))),l)if(n)"d"===o?c+=", "+l:c=l+(c?", "+c:"");else if(e._inCalcTicks&&e._prevDateHead===l){var d=De(e),f=e._trueSide||e.side;(!d&&"top"===f||d&&"bottom"===f)&&(c+="<br> ")}else e._prevDateHead=l,c+="<br>"+l;t.text=c}(e,a,n,c):"log"===u?function(e,t,n,r,o){var a=e.dtick,l=t.x,c=e.tickformat,u="string"==typeof a&&a.charAt(0);if("never"===o&&(o=""),r&&"L"!==u&&(a="L3",u="L"),c||"L"===u)t.text=be(Math.pow(10,l),e,o,r);else if(i(a)||"D"===u&&s.mod(l+.01,1)<.1){var d=Math.round(l),f=Math.abs(d),p=e.exponentformat;"power"===p||ve(p)&&ye(d)?(t.text=0===d?1:1===d?"10":"10<sup>"+(d>1?"":R)+f+"</sup>",t.fontSize*=1.25):("e"===p||"E"===p)&&f>2?t.text="1"+p+(d>0?"+":R)+f:(t.text=be(Math.pow(10,l),e,"","fakehover"),"D1"===a&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==u)throw"unrecognized dtick "+String(a);t.text=String(Math.round(Math.pow(10,s.mod(l,1)))),t.fontSize*=.75}if("D1"===e.dtick){var h=String(t.text).charAt(0);"0"!==h&&"1"!==h||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)))}}(e,a,0,c,m):"category"===u?function(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n=""),t.text=String(n)}(e,a):"multicategory"===u?function(e,t,n){var r=Math.round(t.x),i=e._categories[r]||[],o=void 0===i[1]?"":String(i[1]),a=void 0===i[0]?"":String(i[0]);n?t.text=a+" - "+o:(t.text=o,t.text2=a)}(e,a,n):Ie(e)?function(e,t,n,r,i){if("radians"!==e.thetaunit||n)t.text=be(t.x,e,i,r);else{var o=t.x/180;if(0===o)t.text="0";else{var a=function(e){function t(e,t){return Math.abs(e-t)<=1e-6}var n=function(e){for(var n=1;!t(Math.round(e*n)/n,e);)n*=10;return n}(e),r=e*n,i=Math.abs(function e(n,r){return t(r,0)?n:e(r,n%r)}(r,n));return[Math.round(r/i),Math.round(n/i)]}(o);if(a[1]>=100)t.text=be(s.deg2rad(t.x),e,i,r);else{var l=t.x<0;1===a[1]?1===a[0]?t.text="\u03c0":t.text=a[0]+"\u03c0":t.text=["<sup>",a[0],"</sup>","\u2044","<sub>",a[1],"</sub>","\u03c0"].join(""),l&&(t.text=R+t.text)}}}}(e,a,n,c,m):function(e,t,n,r,i){"never"===i?i="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(i="hide"),t.text=be(t.x,e,i,r)}(e,a,0,c,m),r||(e.tickprefix&&!h(e.showtickprefix)&&(a.text=e.tickprefix+a.text),e.ticksuffix&&!h(e.showticksuffix)&&(a.text+=e.ticksuffix)),"boundaries"===e.tickson||e.showdividers){var g=function(t){var n=e.l2p(t);return n>=0&&n<=e._length?t:null};a.xbnd=[g(a.x-.5),g(a.x+e.dtick-.5)]}return a},V.hoverLabelText=function(e,t,n){n&&(e=s.extendFlat({},e,{hoverformat:n}));var r=Array.isArray(t)?t[0]:t,i=Array.isArray(t)?t[1]:void 0;if(void 0!==i&&i!==r)return V.hoverLabelText(e,r,n)+" - "+V.hoverLabelText(e,i,n);var o="log"===e.type&&r<=0,a=V.tickText(e,e.c2l(o?-r:r),"hover").text;return o?0===r?"0":R+a:a};var ge=["f","p","n","\u03bc","m","","k","M","G","T"];function ve(e){return"SI"===e||"B"===e}function ye(e){return e>14||e<-15}function be(e,t,n,r){var o=e<0,a=t._tickround,l=n||t.exponentformat||"B",c=t._tickexponent,u=V.getTickFormat(t),d=t.separatethousands;if(r){var f={exponentformat:l,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:i(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};he(f),a=(Number(f._tickround)||0)+4,c=f._tickexponent,t.hoverformat&&(u=t.hoverformat)}if(u)return t._numFormat(u)(e).replace(/-/g,R);var p,h=Math.pow(10,-a)/2;if("none"===l&&(c=0),(e=Math.abs(e))<h)e="0",o=!1;else{if(e+=h,c&&(e*=Math.pow(10,-c),a+=c),0===a)e=String(Math.floor(e));else if(a<0){e=(e=String(Math.round(e))).substr(0,e.length+a);for(var m=a;m<0;m++)e+="0"}else{var g=(e=String(e)).indexOf(".")+1;g&&(e=e.substr(0,g+a).replace(/\.?0+$/,""))}e=s.numSeparate(e,t._separators,d)}return c&&"hide"!==l&&(ve(l)&&ye(c)&&(l="power"),p=c<0?R+-c:"power"!==l?"+"+c:String(c),"e"===l||"E"===l?e+=l+p:"power"===l?e+="\xd710<sup>"+p+"</sup>":"B"===l&&9===c?e+="B":ve(l)&&(e+=ge[c/3+5])),o?R+e:e}function xe(e,t){if(e){var n=Object.keys(z).reduce((function(e,n){return-1!==t.indexOf(n)&&z[n].forEach((function(t){e[t]=1})),e}),{});Object.keys(e).forEach((function(t){n[t]||(1===t.length?e[t]=0:delete e[t])}))}}function we(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i];r[o.text2]?r[o.text2].push(o.x):r[o.text2]=[o.x]}for(var a in r)n.push(me(e,s.interp(r[a],.5),a));return n}function _e(e){return void 0!==e.periodX?e.periodX:e.x}function Se(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function Ce(e){var t=e.title.font.size,n=(e.title.text.match(c.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?n?t*(Z+n*H):t*Z:n?t*(n+1)*H:t}function ke(e,t){var n=e.l2p(t);return n>1&&n<e._length-1}function Me(e){var t=r.select(e),n=t.select(".text-math-group");return n.empty()?t.select("text"):n}function Te(e){return e._id+".automargin"}function Ae(e){return Te(e)+".mirror"}function Ee(e){return e._id+".rangeslider"}function Pe(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function Re(e,t,n){var r,i,o=[],a=[],l=e.layout;for(r=0;r<t.length;r++)o.push(V.getFromId(e,t[r]));for(r=0;r<n.length;r++)a.push(V.getFromId(e,n[r]));var c=Object.keys(p),u=["anchor","domain","overlaying","position","side","tickangle","editType"],d=["linear","log"];for(r=0;r<c.length;r++){var f=c[r],h=o[0][f],m=a[0][f],g=!0,v=!1,y=!1;if("_"!==f.charAt(0)&&"function"!=typeof h&&-1===u.indexOf(f)){for(i=1;i<o.length&&g;i++){var b=o[i][f];"type"===f&&-1!==d.indexOf(h)&&-1!==d.indexOf(b)&&h!==b?v=!0:b!==h&&(g=!1)}for(i=1;i<a.length&&g;i++){var x=a[i][f];"type"===f&&-1!==d.indexOf(m)&&-1!==d.indexOf(x)&&m!==x?y=!0:a[i][f]!==m&&(g=!1)}g&&(v&&(l[o[0]._name].type="linear"),y&&(l[a[0]._name].type="linear"),Oe(l,f,o,a,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var w=e._fullLayout.annotations[r];-1!==t.indexOf(w.xref)&&-1!==n.indexOf(w.yref)&&s.swapAttrs(l.annotations[r],["?"])}}function Oe(e,t,n,r,i){var o,a=s.nestedProperty,l=a(e[n[0]._name],t).get(),c=a(e[r[0]._name],t).get();for("title"===t&&(l&&l.text===i.x&&(l.text=i.y),c&&c.text===i.y&&(c.text=i.x)),o=0;o<n.length;o++)a(e,n[o]._name+"."+t).set(c);for(o=0;o<r.length;o++)a(e,r[o]._name+"."+t).set(l)}function Ie(e){return"angularaxis"===e._id}function Le(e,t){for(var n=t._rangebreaks.length,r=0;r<n;r++){var i=t._rangebreaks[r];if(e>=i.min&&e<i.max)return i.max}return e}function De(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function Ne(e,t){De(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function Fe(e,t,n,r){var i,o="free"===e.anchor||void 0!==e.overlaying&&!1!==e.overlaying?e.overlaying:e._id;i=r?"right"===e.side?t:-t:t,o in n||(n[o]={}),e.side in n[o]||(n[o][e.side]=0),n[o][e.side]+=i}V.getTickFormat=function(e){var t,n,r,i,o,a,s,l;function c(e){return"string"!=typeof e?e:Number(e.replace("M",""))*S}function u(e,t){var n=["L","D"];if(typeof e==typeof t){if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),i=n.indexOf(t.charAt(0));return r===i?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-i}return"number"==typeof e?1:-1}function d(e,t){var n=null===t[0],r=null===t[1],i=u(e,t[0])>=0,o=u(e,t[1])<=0;return(n||i)&&(r||o)}if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(i=e.dtick,a=void 0,a=c||function(e){return e},s=(o=r.dtickrange)[0],l=o[1],(!s&&"number"!=typeof s||a(s)<=a(i))&&(!l&&"number"!=typeof l||a(l)>=a(i)))){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&d(e.dtick,r.dtickrange)){n=r;break}}return n?n.value:e.tickformat},V.getSubplots=function(e,t){var n=e._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),i=t?V.findSubplotsWithAxis(r,t):r;return i.sort((function(e,t){var n=e.substr(1).split("y"),r=t.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]})),i},V.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var o=e[i];n.test(o)&&r.push(o)}return r},V.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var n,i,o={_offset:0,_length:t.width,_id:""},a={_offset:0,_length:t.height,_id:""},s=V.list(e,"x",!0),l=V.list(e,"y",!0),c=[];for(n=0;n<s.length;n++)for(c.push({x:s[n],y:a}),i=0;i<l.length;i++)0===n&&c.push({x:o,y:l[i]}),c.push({x:s[n],y:l[i]});var u=t._clips.selectAll(".axesclip").data(c,(function(e){return e.x._id+e.y._id}));u.enter().append("clipPath").classed("axesclip",!0).attr("id",(function(e){return"clip"+t._uid+e.x._id+e.y._id})).append("rect"),u.exit().remove(),u.each((function(e){r.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})}))}},V.draw=function(e,t,n){var r=e._fullLayout;"redraw"===t&&r._paper.selectAll("g.subplot").each((function(e){var t=e[0],n=r._plots[t];if(n){var i=n.xaxis,o=n.yaxis;n.xaxislayer.selectAll("."+i._id+"tick").remove(),n.yaxislayer.selectAll("."+o._id+"tick").remove(),n.xaxislayer.selectAll("."+i._id+"tick2").remove(),n.yaxislayer.selectAll("."+o._id+"tick2").remove(),n.xaxislayer.selectAll("."+i._id+"divider").remove(),n.yaxislayer.selectAll("."+o._id+"divider").remove(),n.minorGridlayer&&n.minorGridlayer.selectAll("path").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),r._infolayer.select(".g-"+i._id+"title").remove(),r._infolayer.select(".g-"+o._id+"title").remove()}}));var i=t&&"redraw"!==t?t:V.listIds(e),o=V.list(e).filter((function(e){return e.autoshift})).map((function(e){return e.overlaying}));i.map((function(t){var n=V.getFromId(e,t);if("sync"===n.tickmode&&n.overlaying){var r=i.findIndex((function(e){return e===n.overlaying}));r>=0&&i.unshift(i.splice(r,1).shift())}}));var a={false:{left:0,right:0}};return s.syncOrAsync(i.map((function(t){return function(){if(t){var r=V.getFromId(e,t);n||(n={}),n.axShifts=a,n.overlayingShiftedAx=o;var i=V.drawOne(e,r,n);return r._shiftPusher&&Fe(r,r._fullDepth||0,a,!0),r._r=r.range.slice(),r._rl=s.simpleMap(r._r,r.r2l),i}}})))},V.drawOne=function(e,t,n){var r,i,l,c=(n=n||{}).axShifts||{},p=n.overlayingShiftedAx||[];t.setScale();var h=e._fullLayout,m=t._id,g=m.charAt(0),v=V.counterLetter(m),y=h._plots[t._mainSubplot];if(y){if(t._shiftPusher=t.autoshift||-1!==p.indexOf(t._id)||-1!==p.indexOf(t.overlaying),t._shiftPusher&"free"===t.anchor){var b=t.linewidth/2||0;"inside"===t.ticks&&(b+=t.ticklen),Fe(t,b,c,!0),Fe(t,t.shift||0,c,!1)}!0===n.skipTitle&&void 0!==t._shift||(t._shift=function(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}(t,c));var x=y[g+"axislayer"],w=t._mainLinePosition,_=w+=t._shift,S=t._mainMirrorPosition,C=t._vals=V.calcTicks(t),k=[t.mirror,_,S].join("_");for(r=0;r<C.length;r++)C[r].axInfo=k;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var M={};if(t.visible){var T,A,E=V.makeTransTickFn(t),P=V.makeTransTickLabelFn(t),R="inside"===t.ticks,O="outside"===t.ticks;if("boundaries"===t.tickson){var I=function(e,t){var n,r=[],i=function(e,t){var n=e.xbnd[t];null!==n&&r.push(s.extendFlat({},e,{x:n}))};if(t.length){for(n=0;n<t.length;n++)i(t[n],0);i(t[n-1],1)}return r}(0,C);A=V.clipEnds(t,I),T=R?A:I}else A=V.clipEnds(t,C),T=R&&"period"!==t.ticklabelmode?A:C;var L,D=t._gridVals=A,N=function(e,t){var n,r,i=[],o=t.length&&t[t.length-1].x<t[0].x,a=function(e,t){var n=e.xbnd[t];null!==n&&i.push(s.extendFlat({},e,{x:n}))};if(e.showdividers&&t.length){for(n=0;n<t.length;n++){var l=t[n];l.text2!==r&&a(l,o?1:0),r=l.text2}a(t[n-1],o?0:1)}return i}(t,C);if(!h._hasOnlyLargeSploms){var F=t._subplotsWith,z={};for(r=0;r<F.length;r++){i=F[r];var B=(l=h._plots[i])[v+"axis"],j=B._mainAxis._id;if(!z[j]){z[j]=1;var Z="x"===g?"M0,"+B._offset+"v"+B._length:"M"+B._offset+",0h"+B._length;V.drawGrid(e,t,{vals:D,counterAxis:B,layer:l.gridlayer.select("."+m),minorLayer:l.minorGridlayer.select("."+m),path:Z,transFn:E}),V.drawZeroLine(e,t,{counterAxis:B,layer:l.zerolinelayer,path:Z,transFn:E})}}}var G=V.getTickSigns(t),W=V.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var $,q,Y,X,K=V.makeTickPath(t,_,G[2]),J=V.makeTickPath(t,_,W[2],{minor:!0});if(t._anchorAxis&&t.mirror&&!0!==t.mirror?($=V.makeTickPath(t,S,G[3]),q=V.makeTickPath(t,S,W[3],{minor:!0}),Y=K+$,X=J+q):($="",q="",Y=K,X=J),t.showdividers&&O&&"boundaries"===t.tickson){var Q={};for(r=0;r<N.length;r++)Q[N[r].x]=1;L=function(e){return Q[e.x]?$:Y}}else L=function(e){return e.minor?X:Y}}if(V.drawTicks(e,t,{vals:T,layer:x,path:L,transFn:E}),"allticks"===t.mirror){var ee=Object.keys(t._linepositions||{});for(r=0;r<ee.length;r++){i=ee[r],l=h._plots[i];var te=t._linepositions[i]||[],ne=te[0],re=te[1],ie=te[2],oe=V.makeTickPath(t,ne,ie?G[0]:W[0],{minor:ie})+V.makeTickPath(t,re,ie?G[1]:W[1],{minor:ie});V.drawTicks(e,t,{vals:T,layer:l[g+"axislayer"],path:oe,transFn:E})}}var ae=[];if(ae.push((function(){return V.drawLabels(e,t,{vals:C,layer:x,plotinfo:l,transFn:P,labelFns:V.makeLabelFns(t,_)})})),"multicategory"===t.type){var se={x:2,y:10}[g];ae.push((function(){var n={x:"height",y:"width"}[g],r=ce()[n]+se+(t._tickAngles[m+"tick"]?t.tickfont.size*H:0);return V.drawLabels(e,t,{vals:we(t,C),layer:x,cls:m+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:E,labelFns:V.makeLabelFns(t,_+r*G[4])})})),ae.push((function(){return t._depth=G[4]*(ce("tick2")[t.side]-_),function(e,t,n){var r=t._id+"divider",i=n.vals,o=n.layer.selectAll("path."+r).data(i,Se);o.exit().remove(),o.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(d.stroke,t.dividercolor).style("stroke-width",f.crispRound(e,t.dividerwidth,1)+"px"),o.attr("transform",n.transFn).attr("d",n.path)}(e,t,{vals:N,layer:x,path:V.makeTickPath(t,_,G[4],{len:t._depth}),transFn:E})}))}else t.title.hasOwnProperty("standoff")&&ae.push((function(){t._depth=G[4]*(ce()[t.side]-_)}));var le=a.getComponentMethod("rangeslider","isVisible")(t);return n.skipTitle||le&&"bottom"===t.side||ae.push((function(){return function(e,t){var n,r=e._fullLayout,i=t._id,o=i.charAt(0),a=t.title.font.size;if(t.title.hasOwnProperty("standoff"))n=t._depth+t.title.standoff+Ce(t);else{var s=De(t);if("multicategory"===t.type)n=t._depth;else{var l=1.5*a;s&&(l=.5*a,"outside"===t.ticks&&(l+=t.ticklen)),n=10+l+(t.linewidth?t.linewidth-1:0)}s||(n+="x"===o?"top"===t.side?a*(t.showticklabels?1:0):a*(t.showticklabels?1.5:.5):"right"===t.side?a*(t.showticklabels?1:.5):a*(t.showticklabels?.5:0))}var c,d,p,h,m=V.getPxPosition(e,t);if("x"===o?(d=t._offset+t._length/2,p="top"===t.side?m-n:m+n):(p=t._offset+t._length/2,d="right"===t.side?m+n:m-n,c={rotate:"-90",offset:0}),"multicategory"!==t.type){var g=t._selections[t._id+"tick"];if(h={selection:g,side:t.side},g&&g.node()&&g.node().parentNode){var v=f.getTranslate(g.node().parentNode);h.offsetLeft=v.x,h.offsetTop=v.y}t.title.hasOwnProperty("standoff")&&(h.pad=0)}return t._titleStandoff=n,u.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[o],avoid:h,transform:c,attributes:{x:d,y:p,"text-anchor":"middle"}})}(e,t)})),ae.push((function(){var n,r,i,s,l=t.side.charAt(0),c=U[t.side].charAt(0),u=V.getPxPosition(e,t),d=O?t.ticklen:0;(t.automargin||le||t._shiftPusher)&&("multicategory"===t.type?n=ce("tick2"):(n=ce(),"x"===g&&"b"===l&&(t._depth=Math.max(n.width>0?n.bottom-u:0,d))));var f=0,p=0;if(t._shiftPusher&&(f=Math.max(d,n.height>0?"l"===l?u-n.left:n.right-u:0),t.title.text!==h._dfltTitle[g]&&(p=(t._titleStandoff||0)+(t._titleScoot||0),"l"===l&&(p+=Ce(t))),t._fullDepth=Math.max(f,p)),t.automargin){r={x:0,y:0,r:0,l:0,t:0,b:0};var m=[0,1],y="number"==typeof t._shift?t._shift:0;if("x"===g){if("b"===l?r[l]=t._depth:(r[l]=t._depth=Math.max(n.width>0?u-n.top:0,d),m.reverse()),n.width>0){var b=n.right-(t._offset+t._length);b>0&&(r.xr=1,r.r=b);var x=t._offset-n.left;x>0&&(r.xl=0,r.l=x)}}else if("l"===l?(t._depth=Math.max(n.height>0?u-n.left:0,d),r[l]=t._depth-y):(t._depth=Math.max(n.height>0?n.right-u:0,d),r[l]=t._depth+y,m.reverse()),n.height>0){var w=n.bottom-(t._offset+t._length);w>0&&(r.yb=0,r.b=w);var _=t._offset-n.top;_>0&&(r.yt=1,r.t=_)}r[v]="free"===t.anchor?t.position:t._anchorAxis.domain[m[0]],t.title.text!==h._dfltTitle[g]&&(r[l]+=Ce(t)+(t.title.standoff||0)),t.mirror&&"free"!==t.anchor&&((i={x:0,y:0,r:0,l:0,t:0,b:0})[c]=t.linewidth,t.mirror&&!0!==t.mirror&&(i[c]+=d),!0===t.mirror||"ticks"===t.mirror?i[v]=t._anchorAxis.domain[m[1]]:"all"!==t.mirror&&"allticks"!==t.mirror||(i[v]=[t._counterDomainMin,t._counterDomainMax][m[1]]))}le&&(s=a.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),"string"==typeof t.automargin&&(xe(r,t.automargin),xe(i,t.automargin)),o.autoMargin(e,Te(t),r),o.autoMargin(e,Ae(t),i),o.autoMargin(e,Ee(t),s)})),s.syncOrAsync(ae)}}function ce(e){var n=m+(e||"tick");return M[n]||(M[n]=function(e,t){var n,r,i,o;return e._selections[t].size()?(n=1/0,r=-1/0,i=1/0,o=-1/0,e._selections[t].each((function(){var e=Me(this),t=f.bBox(e.node().parentNode);n=Math.min(n,t.top),r=Math.max(r,t.bottom),i=Math.min(i,t.left),o=Math.max(o,t.right)}))):(n=0,r=0,i=0,o=0),{top:n,bottom:r,left:i,right:o,height:r-n,width:o-i}}(t,n)),M[n]}},V.getTickSigns=function(e,t){var n=e._id.charAt(0),r={x:"top",y:"right"}[n],i=e.side===r?1:-1,o=[-1,1,i,-i];return"inside"!==(t?(e.minor||{}).ticks:e.ticks)==("x"===n)&&(o=o.map((function(e){return-e}))),e.side&&o.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),o},V.makeTransTickFn=function(e){return"x"===e._id.charAt(0)?function(t){return l(e._offset+e.l2p(t.x),0)}:function(t){return l(0,e._offset+e.l2p(t.x))}},V.makeTransTickLabelFn=function(e){var t=function(e){var t=e.ticklabelposition||"",n=function(e){return-1!==t.indexOf(e)},r=n("top"),i=n("left"),o=n("right"),a=n("bottom"),s=n("inside"),l=a||i||r||o;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,d=3,f=e.tickfont?e.tickfont.size:12;return(a||r)&&(u+=f*Z,d+=(e.linewidth||0)/2),(i||o)&&(u+=(e.linewidth||0)/2,d+=3),s&&"top"===c&&(d-=f*(1-Z)),(i||r)&&(u=-u),"bottom"!==c&&"right"!==c||(d=-d),[l?u:0,s?d:0]}(e),n=t[0],r=t[1];return"x"===e._id.charAt(0)?function(t){return l(n+e._offset+e.l2p(_e(t)),r)}:function(t){return l(r,n+e._offset+e.l2p(_e(t)))}},V.makeTickPath=function(e,t,n,r){r||(r={});var i=r.minor;if(i&&!e.minor)return"";var o=void 0!==r.len?r.len:i?e.minor.ticklen:e.ticklen,a=e._id.charAt(0),s=(e.linewidth||1)/2;return"x"===a?"M0,"+(t+s*n)+"v"+o*n:"M"+(t+s*n)+",0h"+o*n},V.makeLabelFns=function(e,t,n){var r=e.ticklabelposition||"",o=function(e){return-1!==r.indexOf(e)},a=o("top"),l=o("left"),c=o("right"),u=o("bottom")||l||a||c,d=o("inside"),f="inside"===r&&"inside"===e.ticks||!d&&"outside"===e.ticks&&"boundaries"!==e.tickson,p=0,h=0,m=f?e.ticklen:0;if(d?m*=-1:u&&(m=0),f&&(p+=m,n)){var g=s.deg2rad(n);p=m*Math.cos(g)+1,h=m*Math.sin(g)}e.showticklabels&&(f||e.showline)&&(p+=.2*e.tickfont.size);var v,y,b,x,w,_={labelStandoff:p+=(e.linewidth||1)/2*(d?-1:1),labelShift:h},S=0,C=e.side,k=e._id.charAt(0),M=e.tickangle;if("x"===k)x=(w=!d&&"bottom"===C||d&&"top"===C)?1:-1,d&&(x*=-1),v=h*x,y=t+p*x,b=w?1:-.2,90===Math.abs(M)&&(d?b+=j:b=-90===M&&"bottom"===C?Z:90===M&&"top"===C?j:.5,S=j/2*(M/90)),_.xFn=function(e){return e.dx+v+S*e.fontSize},_.yFn=function(e){return e.dy+y+e.fontSize*b},_.anchorFn=function(e,t){if(u){if(l)return"end";if(c)return"start"}return i(t)&&0!==t&&180!==t?t*x<0!==d?"end":"start":"middle"},_.heightFn=function(t,n,r){return n<-60||n>60?-.5*r:"top"===e.side!==d?-r:0};else if("y"===k){if(x=(w=!d&&"left"===C||d&&"right"===C)?1:-1,d&&(x*=-1),v=p,y=h*x,b=0,d||90!==Math.abs(M)||(b=-90===M&&"left"===C||90===M&&"right"===C?Z:.5),d){var T=i(M)?+M:0;if(0!==T){var A=s.deg2rad(T);S=Math.abs(Math.sin(A))*Z*x,b=0}}_.xFn=function(e){return e.dx+t-(v+e.fontSize*b)*x+S*e.fontSize},_.yFn=function(e){return e.dy+y+e.fontSize*j},_.anchorFn=function(e,t){return i(t)&&90===Math.abs(t)?"middle":w?"end":"start"},_.heightFn=function(t,n,r){return"right"===e.side&&(n*=-1),n<-30?-r:n<30?-.5*r:0}}return _},V.drawTicks=function(e,t,n){n=n||{};var i=t._id+"tick",o=[].concat(t.minor&&t.minor.ticks?n.vals.filter((function(e){return e.minor&&!e.noTick})):[]).concat(t.ticks?n.vals.filter((function(e){return!e.minor&&!e.noTick})):[]),a=n.layer.selectAll("path."+i).data(o,Se);a.exit().remove(),a.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",!1!==n.crisp).each((function(e){return d.stroke(r.select(this),e.minor?t.minor.tickcolor:t.tickcolor)})).style("stroke-width",(function(n){return f.crispRound(e,n.minor?t.minor.tickwidth:t.tickwidth,1)+"px"})).attr("d",n.path).style("display",null),Ne(t,[N]),a.attr("transform",n.transFn)},V.drawGrid=function(e,t,n){if(n=n||{},"sync"!==t.tickmode){var i=t._id+"grid",o=t.minor&&t.minor.showgrid,a=o?n.vals.filter((function(e){return e.minor})):[],s=t.showgrid?n.vals.filter((function(e){return!e.minor})):[],l=n.counterAxis;if(l&&V.shouldShowZeroLine(e,t,l))for(var c="array"===t.tickmode,u=0;u<s.length;u++){var p=s[u].x;if(c?!p:Math.abs(p)<t.dtick/100){if(s=s.slice(0,u).concat(s.slice(u+1)),!c)break;u--}}t._gw=f.crispRound(e,t.gridwidth,1);for(var h=o?f.crispRound(e,t.minor.gridwidth,1):0,m=n.layer,g=n.minorLayer,v=1;v>=0;v--){var y=v?m:g;if(y){var b=y.selectAll("path."+i).data(v?s:a,Se);b.exit().remove(),b.enter().append("path").classed(i,1).classed("crisp",!1!==n.crisp),b.attr("transform",n.transFn).attr("d",n.path).each((function(e){return d.stroke(r.select(this),e.minor?t.minor.gridcolor:t.gridcolor||"#ddd")})).style("stroke-dasharray",(function(e){return f.dashStyle(e.minor?t.minor.griddash:t.griddash,e.minor?t.minor.gridwidth:t.gridwidth)})).style("stroke-width",(function(e){return(e.minor?h:t._gw)+"px"})).style("display",null),"function"==typeof n.path&&b.attr("d",n.path)}}Ne(t,[L,D])}},V.drawZeroLine=function(e,t,n){n=n||n;var r=t._id+"zl",i=V.shouldShowZeroLine(e,t,n.counterAxis),o=n.layer.selectAll("path."+r).data(i?[{x:0,id:t._id}]:[]);o.exit().remove(),o.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each((function(){n.layer.selectAll("path").sort((function(e,t){return $(e.id,t.id)}))})),o.attr("transform",n.transFn).attr("d",n.path).call(d.stroke,t.zerolinecolor||d.defaultLine).style("stroke-width",f.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),Ne(t,[I])},V.drawLabels=function(e,t,n){n=n||{};var o=e._fullLayout,a=t._id,u=a.charAt(0),d=n.cls||a+"tick",p=n.vals.filter((function(e){return e.text})),h=n.labelFns,m=n.secondary?0:t.tickangle,g=(t._prevTickAngles||{})[d],v=n.layer.selectAll("g."+d).data(t.showticklabels?p:[],Se),y=[];function b(e,o){e.each((function(e){var a=r.select(this),s=a.select(".text-math-group"),u=h.anchorFn(e,o),d=n.transFn.call(a.node(),e)+(i(o)&&0!=+o?" rotate("+o+","+h.xFn(e)+","+(h.yFn(e)-e.fontSize/2)+")":""),p=c.lineCount(a),m=H*e.fontSize,g=h.heightFn(e,i(o)?+o:0,(p-1)*m);if(g&&(d+=l(0,g)),s.empty()){var v=a.select("text");v.attr({transform:d,"text-anchor":u}),v.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var y=f.bBox(s.node()).width*{end:-.5,start:.5}[u];s.attr("transform",d+l(y,0))}}))}v.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each((function(t){var n=r.select(this),i=e._promises.length;n.call(c.positionText,h.xFn(t),h.yFn(t)).call(f.font,t.font,t.fontSize,t.fontColor).text(t.text).call(c.convertToTspans,e),e._promises[i]?y.push(e._promises.pop().then((function(){b(n,m)}))):b(n,m)})),Ne(t,[F]),v.exit().remove(),n.repositionOnUpdate&&v.each((function(e){r.select(this).select("text").call(c.positionText,h.xFn(e),h.yFn(e))})),t._adjustTickLabelsOverflow=function(){var n=t.ticklabeloverflow;if(n&&"allow"!==n){var i=-1!==n.indexOf("hide"),a="x"===t._id.charAt(0),l=0,c=a?e._fullLayout.width:e._fullLayout.height;if(-1!==n.indexOf("domain")){var u=s.simpleMap(t.range,t.r2l);l=t.l2p(u[0])+t._offset,c=t.l2p(u[1])+t._offset}var d=Math.min(l,c),p=Math.max(l,c),h=t.side,m=1/0,g=-1/0;for(var y in v.each((function(e){var n=r.select(this);if(n.select(".text-math-group").empty()){var o=f.bBox(n.node()),s=0;a?(o.right>p||o.left<d)&&(s=1):(o.bottom>p||o.top+(t.tickangle?0:e.fontSize/4)<d)&&(s=1);var l=n.select("text");s?i&&l.style("opacity",0):(l.style("opacity",1),m="bottom"===h||"right"===h?Math.min(m,a?o.top:o.left):-1/0,g="top"===h||"left"===h?Math.max(g,a?o.bottom:o.right):1/0)}})),o._plots){var b=o._plots[y];if(t._id===b.xaxis._id||t._id===b.yaxis._id){var x=a?b.yaxis:b.xaxis;x&&(x["_visibleLabelMin_"+t._id]=m,x["_visibleLabelMax_"+t._id]=g)}}}},t._hideCounterAxisInsideTickLabels=function(e){var n="x"===t._id.charAt(0),i=[];for(var a in o._plots){var s=o._plots[a];t._id!==s.xaxis._id&&t._id!==s.yaxis._id||i.push(n?s.yaxis:s.xaxis)}i.forEach((function(n,i){n&&De(n)&&(e||[I,D,L,N,F]).forEach((function(e){var a="tick"===e.K&&"text"===e.L&&"period"===t.ticklabelmode,s=o._plots[t._mainSubplot];(e.K===I.K?s.zerolinelayer.selectAll("."+t._id+"zl"):e.K===D.K?s.minorGridlayer.selectAll("."+t._id):e.K===L.K?s.gridlayer.selectAll("."+t._id):s[t._id.charAt(0)+"axislayer"]).each((function(){var o=r.select(this);e.L&&(o=o.selectAll(e.L)),o.each((function(o){var s=t.l2p(a?_e(o):o.x)+t._offset,l=r.select(this);s<t["_visibleLabelMax_"+n._id]&&s>t["_visibleLabelMin_"+n._id]?l.style("display","none"):"tick"!==e.K||i||l.style("display",null)}))}))}))}))},b(v,g+1?g:m);var x=null;t._selections&&(t._selections[d]=v);var w=[function(){return y.length&&Promise.all(y)}];t.automargin&&o._redrawFromAutoMarginCount&&90===g?(x=90,w.push((function(){b(v,g)}))):w.push((function(){if(b(v,m),p.length&&"x"===u&&!i(m)&&("log"!==t.type||"D"!==String(t.dtick).charAt(0))){x=0;var e,r=0,o=[];if(v.each((function(e){r=Math.max(r,e.fontSize);var n=t.l2p(e.x),i=Me(this),a=f.bBox(i.node());o.push({top:0,bottom:10,height:10,left:n-a.width/2,right:n+a.width/2+2,width:a.width+2})})),"boundaries"!==t.tickson&&!t.showdividers||n.secondary){var a=p.length,l=Math.abs((p[a-1].x-p[0].x)*t._m)/(a-1),c=t.ticklabelposition||"",d=function(e){return-1!==c.indexOf(e)},h=d("top"),g=d("left"),y=d("right"),w=d("bottom")||g||h||y?(t.tickwidth||0)+6:0,_=l<2.5*r||"multicategory"===t.type||"realaxis"===t._name;for(e=0;e<o.length-1;e++)if(s.bBoxIntersect(o[e],o[e+1],w)){x=_?90:30;break}}else{var S=2;for(t.ticks&&(S+=t.tickwidth/2),e=0;e<o.length;e++){var C=p[e].xbnd,k=o[e];if(null!==C[0]&&k.left-t.l2p(C[0])<S||null!==C[1]&&t.l2p(C[1])-k.right<S){x=90;break}}}x&&b(v,x)}})),t._tickAngles&&w.push((function(){t._tickAngles[d]=null===x?i(m)?m:0:x}));var _=t._anchorAxis;_&&_.autorange&&De(t)&&!q(o,t._id)&&(o._insideTickLabelsAutorange||(o._insideTickLabelsAutorange={}),o._insideTickLabelsAutorange[_._name+".autorange"]=_.autorange,w.push((function(){v.each((function(e,n){var r=Me(this);r.select(".text-math-group").empty()&&(t._vals[n].bb=f.bBox(r.node()))}))})));var S=s.syncOrAsync(w);return S&&S.then&&e._promises.push(S),S},V.getPxPosition=function(e,t){var n,r=e._fullLayout._size,i=t._id.charAt(0),o=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===i?n={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}),"top"===o||"left"===o?n._offset:"bottom"===o||"right"===o?n._offset+n._length:void 0},V.shouldShowZeroLine=function(e,t,n){var r=s.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===O)&&(ke(t,0)||!function(e,t,n,r){var i=n._mainAxis;if(i){var o=e._fullLayout,a=t._id.charAt(0),s=V.counterLetter(t._id),l=t._offset+(Math.abs(r[0])<Math.abs(r[1])==("x"===a)?0:t._length),c=o._plots[n._mainSubplot];if(!(c.mainplotinfo||c).overlays.length)return p(n);for(var u=V.list(e,s),d=0;d<u.length;d++){var f=u[d];if(f._mainAxis===i&&p(f))return!0}}function p(e){if(!e.showline||!e.linewidth)return!1;var n=Math.max((e.linewidth+t.zerolinewidth)/2,1);function r(e){return"number"==typeof e&&Math.abs(e-l)<n}if(r(e._mainLinePosition)||r(e._mainMirrorPosition))return!0;var i=e._linepositions||{};for(var o in i)if(r(i[o][0])||r(i[o][1]))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,i=t._id.charAt(0),o=0;o<n.length;o++){var s=n[o];if(!0===s.visible&&s.xaxis+s.yaxis===r){if(a.traceIs(s,"bar-like")&&s.orientation==={x:"h",y:"v"}[i])return!0;if(s.fill&&s.fill.charAt(s.fill.length-1)===i)return!0}}return!1}(e,t))},V.clipEnds=function(e,t){return t.filter((function(t){return ke(e,t.x)}))},V.allowAutoMargin=function(e){for(var t=V.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&(o.allowAutoMargin(e,Te(r)),r.mirror&&o.allowAutoMargin(e,Ae(r))),a.getComponentMethod("rangeslider","isVisible")(r)&&o.allowAutoMargin(e,Ee(r))}},V.swap=function(e,t){for(var n=function(e,t){var n,r,i=[];for(n=0;n<t.length;n++){var o=[],a=e._fullData[t[n]].xaxis,s=e._fullData[t[n]].yaxis;if(a&&s){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(a)&&-1===i[r].y.indexOf(s)||o.push(r);if(o.length){var l,c=i[o[0]];if(o.length>1)for(r=1;r<o.length;r++)l=i[o[r]],Pe(c.x,l.x),Pe(c.y,l.y);Pe(c.x,[a]),Pe(c.y,[s])}else i.push({x:[a],y:[s]})}}return i}(e,t),r=0;r<n.length;r++)Re(e,n[r].x,n[r].y)}},4322:function(e,t,n){"use strict";var r=n(2770),i=n(1828),o=n(606).BADNUM,a=i.isArrayOrTypedArray,s=i.isDateTime,l=i.cleanNumber,c=Math.round;function u(e,t){return t?r(e):"number"==typeof e}function d(e){return Math.max(1,(e-1)/1e3)}e.exports=function(e,t,n){var i=e,f=n.noMultiCategory;if(a(i)&&!i.length)return"-";if(!f&&function(e){return a(e[0])&&a(e[1])}(i))return"multicategory";if(f&&Array.isArray(i[0])){for(var p=[],h=0;h<i.length;h++)if(a(i[h]))for(var m=0;m<i[h].length;m++)p.push(i[h][m]);i=p}if(function(e,t){for(var n=e.length,i=d(n),o=0,a=0,l={},u=0;u<n;u+=i){var f=e[c(u)],p=String(f);l[p]||(l[p]=1,s(f,t)&&o++,r(f)&&a++)}return o>2*a}(i,t))return"date";var g="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=d(n),i=0,a=0,s={},u=0;u<n;u+=r){var f=e[c(u)],p=String(f);if(!s[p]){s[p]=1;var h=typeof f;"boolean"===h?a++:(t?l(f)!==o:"number"===h)?i++:"string"===h&&a++}}return a>2*i}(i,g)?"category":function(e,t){for(var n=e.length,r=0;r<n;r++)if(u(e[r],t))return!0;return!1}(i,g)?"linear":"-"}},1453:function(e,t,n){"use strict";var r=n(2770),i=n(3972),o=n(1828),a=n(4467),s=n(5501),l=n(3838),c=n(6218),u=n(8701),d=n(6115),f=n(9426),p=n(5258),h=n(2128),m=n(1994),g=n(5555).WEEKDAY_PATTERN,v=n(5555).HOUR_PATTERN;function y(e,t,n){function i(n,r){return o.coerce(e,t,l.rangebreaks,n,r)}if(i("enabled")){var a=i("bounds");if(a&&a.length>=2){var s,c,u="";if(2===a.length)for(s=0;s<2;s++)if(c=x(a[s])){u=g;break}var d=i("pattern",u);if(d===g)for(s=0;s<2;s++)(c=x(a[s]))&&(t.bounds[s]=a[s]=c-1);if(d)for(s=0;s<2;s++)switch(c=a[s],d){case g:if(!r(c))return void(t.enabled=!1);if((c=+c)!==Math.floor(c)||c<0||c>=7)return void(t.enabled=!1);t.bounds[s]=a[s]=c;break;case v:if(!r(c))return void(t.enabled=!1);if((c=+c)<0||c>24)return void(t.enabled=!1);t.bounds[s]=a[s]=c}if(!1===n.autorange){var f=n.range;if(f[0]<f[1]){if(a[0]<f[0]&&a[1]>f[1])return void(t.enabled=!1)}else if(a[0]>f[0]&&a[1]<f[1])return void(t.enabled=!1)}}else{var p=i("values");if(!p||!p.length)return void(t.enabled=!1);i("dvalue")}}}e.exports=function(e,t,n,r,v){var b,x=r.letter,w=r.font||{},_=r.splomStash||{},S=n("visible",!r.visibleDflt),C=t._template||{},k=t.type||C.type||"-";"date"===k&&(i.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar),r.noTicklabelmode||(b=n("ticklabelmode")));var M="";r.noTicklabelposition&&"multicategory"!==k||(M=o.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===b?["outside","inside"]:"x"===x?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==M.indexOf("inside")?"hide past domain":"category"===k||"multicategory"===k?"allow":"hide past div"),m(t,v);var T=!t.isValidRange(e.range);T&&r.reverseDflt&&(T="reversed"),!n("autorange",T)||"linear"!==k&&"-"!==k||n("rangemode"),n("range"),t.cleanRange(),p(e,t,n,r),"category"===k||r.noHover||n("hoverformat");var A=n("color"),E=A!==l.color.dflt?A:w.color,P=_.label||v._dfltTitle[x];if(f(e,t,n,k,r),!S)return t;n("title.text",P),o.coerceFont(n,"title.font",{family:w.family,size:o.bigFont(w.size),color:E}),c(e,t,n,k);var R=r.hasMinor;if(R&&(a.newContainer(t,"minor"),c(e,t,n,k,{isMinor:!0})),d(e,t,n,k,r),u(e,t,n,r),R){var O=r.isMinor;r.isMinor=!0,u(e,t,n,r),r.isMinor=O}h(e,t,n,{dfltColor:A,bgColor:r.bgColor,showGrid:r.showGrid,hasMinor:R,attributes:l}),!R||t.minor.ticks||t.minor.showgrid||delete t.minor,(t.showline||t.ticks)&&n("mirror");var I,L="multicategory"===k;if(r.noTickson||"category"!==k&&!L||!t.ticks&&!t.showgrid||(L&&(I="boundaries"),"boundaries"===n("tickson",I)&&delete t.ticklabelposition),L&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===k)if(s(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:y}),t.rangebreaks.length){for(var D=0;D<t.rangebreaks.length;D++)if(t.rangebreaks[D].pattern===g){t._hasDayOfWeekBreaks=!0;break}if(m(t,v),v._has("scattergl")||v._has("splom"))for(var N=0;N<r.data.length;N++){var F=r.data[N];"scattergl"!==F.type&&"splom"!==F.type||(F.visible=!1,o.warn(F.type+" traces do not work on axes with rangebreaks. Setting trace "+F.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};var b={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function x(e){if("string"==typeof e)return b[e.substr(0,3).toLowerCase()]}},2663:function(e,t,n){"use strict";var r=n(1562),i=r.FORMAT_LINK,o=r.DATE_FORMAT_LINK;function a(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+i+"."].join(" ")}function s(e,t){return a(e,t)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}e.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?a:s)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:a,descriptionWithDates:s}},1675:function(e,t,n){"use strict";var r=n(3972),i=n(5555);function o(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}t.id2name=function(e){if("string"==typeof e&&e.match(i.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},t.name2id=function(e){if(e.match(i.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},t.cleanId=function(e,t,n){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(i.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!r||n)){var o=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===o&&(o=""),e.charAt(0)+o+(r&&n?" domain":"")}},t.list=function(e,n,r){var i=e._fullLayout;if(!i)return[];var o,a=t.listIds(e,n),s=new Array(a.length);for(o=0;o<a.length;o++){var l=a[o];s[o]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var c=i._subplots.gl3d||[];for(o=0;o<c.length;o++){var u=i[c[o]];n?s.push(u[n+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},t.listIds=function(e,t){var n=e._fullLayout;if(!n)return[];var r=n._subplots;return t?r[t+"axis"]:r.xaxis.concat(r.yaxis)},t.getFromId=function(e,n,r){var i=e._fullLayout;return n=void 0===n||"string"!=typeof n?n:n.replace(" domain",""),"x"===r?n=n.replace(/y[0-9]*/,""):"y"===r&&(n=n.replace(/x[0-9]*/,"")),i[t.id2name(n)]},t.getFromTrace=function(e,n,i){var o=e._fullLayout,a=null;if(r.traceIs(n,"gl3d")){var s=n.scene;"scene"===s.substr(0,5)&&(a=o[s][i+"axis"])}else a=t.getFromId(e,n[i+"axis"]||i);return a},t.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?n>r?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},t.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},t.isLinked=function(e,t){return o(t,e._axisMatchGroups)||o(t,e._axisConstraintGroups)}},5258:function(e){"use strict";e.exports=function(e,t,n,r){if("category"===t.type){var i,o=e.categoryarray,a=Array.isArray(o)&&o.length>0;a&&(i="array");var s,l=n("categoryorder",i);"array"===l&&(s=n("categoryarray")),a||"array"!==l||(l=t.categoryorder="trace"),"trace"===l?t._initialCategories=[]:"array"===l?t._initialCategories=s.slice():(s=function(e,t){var n,r,i,o=t.dataAttr||e._id.charAt(0),a={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var s=t.data[r];s[o+"axis"]===e._id&&n.push(s)}for(r=0;r<n.length;r++){var l=n[r][o];for(i=0;i<l.length;i++){var c=l[i];null!=c&&(a[c]=1)}}return Object.keys(a)}(t,r).sort(),"category ascending"===l?t._initialCategories=s:"category descending"===l&&(t._initialCategories=s.reverse()))}}},6287:function(e,t,n){"use strict";var r=n(2770),i=n(1828),o=n(606),a=o.ONEDAY,s=o.ONEWEEK;t.dtick=function(e,t){var n="log"===t,i="date"===t,o="category"===t,s=i?a:1;if(!e)return s;if(r(e))return(e=Number(e))<=0?s:o?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if("string"!=typeof e||!i&&!n)return s;var l=e.charAt(0),c=e.substr(1);return(c=r(c)?Number(c):0)<=0||!(i&&"M"===l&&c===Math.round(c)||n&&"L"===l||n&&"D"===l&&(1===c||2===c))?s:e},t.tick0=function(e,t,n,o){return"date"===t?i.cleanDate(e,i.dateTick0(n,o%s==0?1:0)):"D1"!==o&&"D2"!==o?r(e)?Number(e):0:void 0}},5555:function(e,t,n){"use strict";var r=n(587).counter;e.exports={idRegex:{x:r("x","( domain)?"),y:r("y","( domain)?")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},9082:function(e,t,n){"use strict";var r=n(1828),i=n(1739),o=n(1675).id2name,a=n(3838),s=n(2449),l=n(1994),c=n(606).ALMOST_EQUAL,u=n(8783).FROM_BL;function d(e,t,n){var i=n.axIds,s=n.layoutOut,l=n.hasImage,c=s._axisConstraintGroups,u=s._axisMatchGroups,d=t._id,m=d.charAt(0),g=((s._splomAxes||{})[m]||{})[d]||{},v=t._id,y="x"===v.charAt(0);function b(n,i){return r.coerce(e,t,a,n,i)}t._matchGroup=null,t._constraintGroup=null,b("constrain",l?"domain":"range"),r.coerce(e,t,{constraintoward:{valType:"enumerated",values:y?["left","center","right"]:["bottom","middle","top"],dflt:y?"center":"middle"}},"constraintoward");var x,w,_=t.type,S=[];for(x=0;x<i.length;x++)(w=i[x])!==v&&s[o(w)].type===_&&S.push(w);var C=p(c,v);if(C){var k=[];for(x=0;x<S.length;x++)C[w=S[x]]||k.push(w);S=k}var M,T,A=S.length;A&&(e.matches||g.matches)&&(M=r.coerce(e,t,{matches:{valType:"enumerated",values:S,dflt:-1!==S.indexOf(g.matches)?g.matches:void 0}},"matches"));var E=l&&!y?t.anchor:void 0;if(A&&!M&&(e.scaleanchor||E)&&(T=r.coerce(e,t,{scaleanchor:{valType:"enumerated",values:S}},"scaleanchor",E)),M){t._matchGroup=h(u,v,M,1);var P=s[o(M)],R=f(s,t)/f(s,P);y!==("x"===M.charAt(0))&&(R=(y?"x":"y")+R),h(c,v,M,R)}else e.matches&&-1!==i.indexOf(e.matches)&&r.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(T){var O=b("scaleratio");O||(O=t.scaleratio=1),h(c,v,T,O)}else e.scaleanchor&&-1!==i.indexOf(e.scaleanchor)&&r.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(e,t){var n=t.domain;return n||(n=e[o(t.overlaying)].domain),n[1]-n[0]}function p(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function h(e,t,n,r){var i,o,a,s,l,c=p(e,t);null===c?((c={})[t]=1,l=e.length,e.push(c)):l=e.indexOf(c);var u=Object.keys(c);for(i=0;i<e.length;i++)if(a=e[i],i!==l&&a[n]){var d=a[n];for(o=0;o<u.length;o++)a[s=u[o]]=m(d,m(r,c[s]));return void e.splice(l,1)}if(1!==r)for(o=0;o<u.length;o++){var f=u[o];c[f]=m(r,c[f])}c[n]=1}function m(e,t){var n,r,i="",o="";"string"==typeof e&&(n=(i=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(r=(o=t.match(/^[xy]*/)[0]).length,t=+t.substr(r));var a=e*t;return n||r?n&&r&&i.charAt(0)!==o.charAt(0)?n===r?a:(n>r?i.substr(r):o.substr(n))+a:i+o+e*t:a}function g(e,t){for(var n=t._size,r=n.h/n.w,i={},o=Object.keys(e),a=0;a<o.length;a++){var s=o[a],l=e[s];if("string"==typeof l){var c=l.match(/^[xy]*/)[0],u=c.length;l=+l.substr(u);for(var d="y"===c.charAt(0)?r:1/r,f=0;f<u;f++)l*=d}i[s]=l}return i}function v(e,t){var n=e._inputDomain,r=u[e.constraintoward],i=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[i+(n[0]-i)/t,i+(n[1]-i)/t],e.setScale()}t.handleDefaults=function(e,t,n){var i,a,s,c,u,f,p,h,m=n.axIds,g=n.axHasImage,v=t._axisConstraintGroups=[],y=t._axisMatchGroups=[];for(i=0;i<m.length;i++)d(u=e[c=o(m[i])],f=t[c],{axIds:m,layoutOut:t,hasImage:g[c]});function b(e,n){for(i=0;i<e.length;i++)for(s in a=e[i])t[o(s)][n]=a}for(b(y,"_matchGroup"),i=0;i<v.length;i++)for(s in a=v[i])if((f=t[o(s)]).fixedrange){for(var x in a){var w=o(x);!1===(e[w]||{}).fixedrange&&r.warn("fixedrange was specified as false for axis "+w+" but was overridden because another axis in its constraint group has fixedrange true"),t[w].fixedrange=!0}break}for(i=0;i<v.length;){for(s in a=v[i]){(f=t[o(s)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(a).length&&(v.splice(i,1),i--);break}i++}b(v,"_constraintGroup");var _=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],S=!1,C=!1;function k(){h=f[p],"rangebreaks"===p&&(C=f._hasDayOfWeekBreaks)}for(i=0;i<y.length;i++){a=y[i];for(var M=0;M<_.length;M++){var T;for(s in p=_[M],h=null,a)if(u=e[c=o(s)],f=t[c],p in f){if(!f.matches&&(T=f,p in u)){k();break}null===h&&p in u&&k()}if("range"===p&&h&&(S=!0),"autorange"===p&&null===h&&S&&(h=!1),null===h&&p in T&&(h=T[p]),null!==h)for(s in a)(f=t[o(s)])[p]="range"===p?h.slice():h,"rangebreaks"===p&&(f._hasDayOfWeekBreaks=C,l(f,t))}}},t.enforce=function(e){var t,n,r,a,l,u,d,f,p=e._fullLayout,h=p._axisConstraintGroups||[];for(t=0;t<h.length;t++){r=g(h[t],p);var m=Object.keys(r),y=1/0,b=0,x=1/0,w={},_={},S=!1;for(n=0;n<m.length;n++)_[a=m[n]]=l=p[o(a)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),w[a]=u=Math.abs(l._m)/r[a],y=Math.min(y,u),"domain"!==l.constrain&&l._constraintShrinkable||(x=Math.min(x,u)),delete l._constraintShrinkable,b=Math.max(b,u),"domain"===l.constrain&&(S=!0);if(!(y>c*b)||S)for(n=0;n<m.length;n++)if(u=w[a=m[n]],d=(l=_[a]).constrain,u!==x||"domain"===d)if(f=u/x,"range"===d)s(l,f);else{var C=l._inputDomain,k=(l.domain[1]-l.domain[0])/(C[1]-C[0]),M=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if((f/=k)*M<1){l.domain=l._input.domain=C.slice(),s(l,f);continue}if(M<1&&(l.range=l._input.range=l._inputRange.slice(),f*=M),l.autorange){var T=l.r2l(l.range[0]),A=l.r2l(l.range[1]),E=(T+A)/2,P=E,R=E,O=Math.abs(A-E),I=E-O*f*1.0001,L=E+O*f*1.0001,D=i.makePadFn(p,l,0),N=i.makePadFn(p,l,1);v(l,f);var F,z,B=Math.abs(l._m),j=i.concatExtremes(e,l),Z=j.min,H=j.max;for(z=0;z<Z.length;z++)(F=Z[z].val-D(Z[z])/B)>I&&F<P&&(P=F);for(z=0;z<H.length;z++)(F=H[z].val+N(H[z])/B)<L&&F>R&&(R=F);f/=(R-P)/(2*O),P=l.l2r(P),R=l.l2r(R),l.range=l._input.range=T<A?[P,R]:[R,P]}v(l,f)}}},t.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,r=0;r<n.length;r++)if(n[r][t])return"g"+r;return t},t.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,i=e._fullLayout._axisConstraintGroups,o=0;o<i.length;o++)if(i[o][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},9323:function(e,t,n){"use strict";var r=n(9898),i=n(1828),o=i.numberFormat,a=n(4267),s=n(8520),l=n(3972),c=i.strTranslate,u=n(3893),d=n(7901),f=n(1424),p=n(211),h=n(9298),m=n(6964),g=n(8569),v=n(4505),y=v.selectingOrDrawing,b=v.freeMode,x=n(8783).FROM_TL,w=n(3306),_=n(1549).redrawReglTraces,S=n(4875),C=n(1675).getFromId,k=n(7322).prepSelect,M=n(7322).clearOutline,T=n(7322).selectOnClick,A=n(2449),E=n(5555),P=E.MINDRAG,R=E.MINZOOM,O=!0;function I(e,t,n,r){var o=i.ensureSingle(e.draglayer,t,n,(function(t){t.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)}));return o.call(m,r),o.node()}function L(e,t,n,i,o,a,s){var l=I(e,"rect",t,n);return r.select(l).call(f.setRect,i,o,a,s),l}function D(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function N(e,t,n,r,i){for(var o=0;o<e.length;o++){var a=e[o];if(!a.fixedrange)if(a.rangebreaks){var s="y"===a._id.charAt(0),l=s?1-t:t,c=s?1-n:n;r[a._name+".range[0]"]=a.l2r(a.p2l(l*a._length)),r[a._name+".range[1]"]=a.l2r(a.p2l(c*a._length))}else{var u=a._rl[0],d=a._rl[1]-u;r[a._name+".range[0]"]=a.l2r(u+d*t),r[a._name+".range[1]"]=a.l2r(u+d*n)}}if(i&&i.length){var f=(t+(1-n))/2;N(i,f,1-f,r,[])}}function F(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!r.fixedrange)if(r.rangebreaks){var i=r._length,o=(r.p2l(0+t)-r.p2l(0)+(r.p2l(i+t)-r.p2l(i)))/2;r.range=[r.l2r(r._rl[0]-o),r.l2r(r._rl[1]-o)]}else r.range=[r.l2r(r._rl[0]-t/r._m),r.l2r(r._rl[1]-t/r._m)]}}function z(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function B(e,t,n,r,i){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",c(n,r)).attr("d",i+"Z")}function j(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:d.background,stroke:d.defaultLine,"stroke-width":1,opacity:0}).attr("transform",c(t,n)).attr("d","M0,0Z")}function Z(e,t,n,r,i,o){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),H(e,t,i,o)}function H(e,t,n,r){n||(e.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function U(e){r.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function V(e){O&&e.data&&e._context.showTips&&(i.notifier(i._(e,"Double-click to zoom back out"),"long"),O=!1)}function G(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,R)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function W(e,t,n,r,o){for(var a,s,l,c,u=!1,d={},f={},p=(o||{}).xaHash,h=(o||{}).yaHash,m=0;m<t.length;m++){var g=t[m];for(a in n)if(g[a]){for(l in g)o&&(p[l]||h[l])||("x"===l.charAt(0)?n:r)[l]||(d[l]=a);for(s in r)o&&(p[s]||h[s])||!g[s]||(u=!0)}for(s in r)if(g[s])for(c in g)o&&(p[c]||h[c])||("x"===c.charAt(0)?n:r)[c]||(f[c]=s)}u&&(i.extendFlat(d,f),f={});var v={},y=[];for(l in d){var b=C(e,l);y.push(b),v[b._id]=b}var x={},w=[];for(c in f){var _=C(e,c);w.push(_),x[_._id]=_}return{xaHash:v,yaHash:x,xaxes:y,yaxes:w,xLinks:d,yLinks:f,isSubplotConstrained:u}}function $(e,t){if(s){var n=void 0!==e.onwheel?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})}else void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function q(e){var t=[];for(var n in e)t.push(e[n]);return t}e.exports={makeDragBox:function(e,t,n,s,c,d,m,v){var O,I,H,Y,X,K,J,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,fe,pe,he,me=e._fullLayout._zoomlayer,ge=m+v==="nsew",ve=1===(m+v).length;function ye(){if(O=t.xaxis,I=t.yaxis,ee=O._length,te=I._length,J=O._offset,Q=I._offset,(H={})[O._id]=O,(Y={})[I._id]=I,m&&v)for(var n=t.overlays,r=0;r<n.length;r++){var i=n[r].xaxis;H[i._id]=i;var o=n[r].yaxis;Y[o._id]=o}X=q(H),K=q(Y),ie=D(X,v),oe=D(K,m),ae=!oe&&!ie,re=W(e,e._fullLayout._axisMatchGroups,H,Y);var a=(ne=W(e,e._fullLayout._axisConstraintGroups,H,Y,re)).isSubplotConstrained||re.isSubplotConstrained;se=v||a,le=m||a;var s=e._fullLayout;ce=s._has("scattergl"),ue=s._has("splom"),de=s._has("svg")}n+=t.yaxis._shift,ye();var be=function(e,t,n){return e?"nsew"===e?n?"":"pan"===t?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}(oe+ie,e._fullLayout.dragmode,ge),xe=L(t,m+v+"drag",be,n,s,c,d);if(ae&&!ge)return xe.onmousedown=null,xe.style.pointerEvents="none",xe;var we,_e,Se,Ce,ke,Me,Te,Ae,Ee,Pe,Re={element:xe,gd:e,plotinfo:t};function Oe(){Re.plotinfo.selection=!1,M(e)}function Ie(e,n){var i=Re.gd;if(i._fullLayout._activeShapeIndex>=0)i._fullLayout._deactivateShape(i);else{var a=i._fullLayout.clickmode;if(U(i),2!==e||ve||Ve(),ge)a.indexOf("select")>-1&&T(n,i,X,K,t.id,Re),a.indexOf("event")>-1&&p.click(i,n,t.id);else if(1===e&&ve){var s=m?I:O,c="s"===m||"w"===v?0:1,d=s._name+".range["+c+"]",f=function(e,t){var n,r=e.range[t],i=Math.abs(r-e.range[1-t]);return"date"===e.type?r:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,o("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,o("."+String(n)+"g")(r))}(s,c),h="left",g="middle";if(s.fixedrange)return;m?(g="n"===m?"top":"bottom","right"===s.side&&(h="right")):"e"===v&&(h="right"),i._context.showAxisRangeEntryBoxes&&r.select(xe).call(u.makeEditable,{gd:i,immediate:!0,background:i._fullLayout.paper_bgcolor,text:String(f),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:h,verticalAlign:g}).on("edit",(function(e){var t=s.d2r(e);void 0!==t&&l.call("_guiRelayout",i,d,t)}))}}}function Le(t,n){if(e._transitioningWithDuration)return!1;var r=Math.max(0,Math.min(ee,pe*t+we)),i=Math.max(0,Math.min(te,he*n+_e)),o=Math.abs(r-we),a=Math.abs(i-_e);function s(){Te="",Se.r=Se.l,Se.t=Se.b,Ee.attr("d","M0,0Z")}if(Se.l=Math.min(we,r),Se.r=Math.max(we,r),Se.t=Math.min(_e,i),Se.b=Math.max(_e,i),ne.isSubplotConstrained)o>R||a>R?(Te="xy",o/ee>a/te?(a=o*te/ee,_e>i?Se.t=_e-a:Se.b=_e+a):(o=a*ee/te,we>r?Se.l=we-o:Se.r=we+o),Ee.attr("d",G(Se))):s();else if(re.isSubplotConstrained)if(o>R||a>R){Te="xy";var l=Math.min(Se.l/ee,(te-Se.b)/te),c=Math.max(Se.r/ee,(te-Se.t)/te);Se.l=l*ee,Se.r=c*ee,Se.b=(1-l)*te,Se.t=(1-c)*te,Ee.attr("d",G(Se))}else s();else!oe||a<Math.min(Math.max(.6*o,P),R)?o<P||!ie?s():(Se.t=0,Se.b=te,Te="x",Ee.attr("d",function(e,t){return"M"+(e.l-.5)+","+(t-R-.5)+"h-3v"+(2*R+1)+"h3ZM"+(e.r+.5)+","+(t-R-.5)+"h3v"+(2*R+1)+"h-3Z"}(Se,_e))):!ie||o<Math.min(.6*a,R)?(Se.l=0,Se.r=ee,Te="y",Ee.attr("d",function(e,t){return"M"+(t-R-.5)+","+(e.t-.5)+"v-3h"+(2*R+1)+"v3ZM"+(t-R-.5)+","+(e.b+.5)+"v3h"+(2*R+1)+"v-3Z"}(Se,we))):(Te="xy",Ee.attr("d",G(Se)));Se.w=Se.r-Se.l,Se.h=Se.b-Se.t,Te&&(Pe=!0),e._dragged=Pe,Z(Ae,Ee,Se,ke,Me,Ce),De(),e.emit("plotly_relayouting",fe),Me=!0}function De(){fe={},"xy"!==Te&&"x"!==Te||(N(X,Se.l/ee,Se.r/ee,fe,ne.xaxes),He("x",fe)),"xy"!==Te&&"y"!==Te||(N(K,(te-Se.b)/te,(te-Se.t)/te,fe,ne.yaxes),He("y",fe))}function Ne(){De(),U(e),Ge(),V(e)}Re.prepFn=function(t,n,r){var o=Re.dragmode,s=e._fullLayout.dragmode;s!==o&&(Re.dragmode=s),ye(),pe=e._fullLayout._invScaleX,he=e._fullLayout._invScaleY,ae||(ge?t.shiftKey?"pan"===s?s="zoom":y(s)||(s="pan"):t.ctrlKey&&(s="pan"):s="pan"),b(s)?Re.minDrag=1:Re.minDrag=void 0,y(s)?(Re.xaxes=X,Re.yaxes=K,k(t,n,r,Re,s)):(Re.clickFn=Ie,y(o)&&Oe(),ae||("zoom"===s?(Re.moveFn=Le,Re.doneFn=Ne,Re.minDrag=1,function(t,n,r){var o=xe.getBoundingClientRect();we=n-o.left,_e=r-o.top,e._fullLayout._calcInverseTransform(e);var s=i.apply3DTransform(e._fullLayout._invTransform)(we,_e);we=s[0],_e=s[1],Se={l:we,r:we,w:0,t:_e,b:_e,h:0},Ce=e._hmpixcount?e._hmlumcount/e._hmpixcount:a(e._fullLayout.plot_bgcolor).getLuminance(),Me=!1,Te="xy",Pe=!1,Ae=B(me,Ce,J,Q,ke="M0,0H"+ee+"V"+te+"H0V0"),Ee=j(me,J,Q)}(0,n,r)):"pan"===s&&(Re.moveFn=Ze,Re.doneFn=Ge))),e._fullLayout._redrag=function(){var t=e._dragdata;if(t&&t.element===xe){var n=e._fullLayout.dragmode;y(n)||(ye(),We([0,0,ee,te]),Re.moveFn(t.dx,t.dy))}}},g.init(Re);var Fe=[0,0,ee,te],ze=null,Be=E.REDRAWDELAY,je=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function Ze(t,n){if(t*=pe,n*=he,!e._transitioningWithDuration){if(e._fullLayout._replotting=!0,"ew"===ie||"ns"===oe){var r=ie?-t:0,i=oe?-n:0;if(re.isSubplotConstrained){if(ie&&oe){var o=(t/ee-n/te)/2;r=-(t=o*ee),i=-(n=-o*te)}oe?r=-i*ee/te:i=-r*te/ee}return ie&&(F(X,t),He("x")),oe&&(F(K,n),He("y")),We([r,i,ee,te]),Ue(),void e.emit("plotly_relayouting",fe)}var a,s,l="w"===ie==("n"===oe)?1:-1;if(ie&&oe&&(ne.isSubplotConstrained||re.isSubplotConstrained)){var c=(t/ee+l*n/te)/2;t=c*ee,n=l*c*te}if("w"===ie?t=p(X,0,t):"e"===ie?t=p(X,1,-t):ie||(t=0),"n"===oe?n=p(K,1,n):"s"===oe?n=p(K,0,-n):oe||(n=0),a="w"===ie?t:0,s="n"===oe?n:0,ne.isSubplotConstrained&&!re.isSubplotConstrained||re.isSubplotConstrained&&ie&&oe&&l>0){var u;if(re.isSubplotConstrained||!ie&&1===oe.length){for(u=0;u<X.length;u++)X[u].range=X[u]._r.slice(),A(X[u],1-n/te);a=(t=n*ee/te)/2}if(re.isSubplotConstrained||!oe&&1===ie.length){for(u=0;u<K.length;u++)K[u].range=K[u]._r.slice(),A(K[u],1-t/ee);s=(n=t*te/ee)/2}}re.isSubplotConstrained&&oe||He("x"),re.isSubplotConstrained&&ie||He("y");var d=ee-t,f=te-n;!re.isSubplotConstrained||ie&&oe||(ie?(s=a?0:t*te/ee,f=d*te/ee):(a=s?0:n*ee/te,d=f*ee/te)),We([a,s,d,f]),Ue(),e.emit("plotly_relayouting",fe)}function p(e,t,n){for(var r,i,o=1-t,a=0;a<e.length;a++){var s=e[a];if(!s.fixedrange){r=s,i=s._rl[o]+(s._rl[t]-s._rl[o])/z(n/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[t]=l)}}return r._length*(r._rl[t]-i)/(r._rl[t]-r._rl[o])}}function He(e,t){for(var n=re.isSubplotConstrained?{x:K,y:X}[e]:re[e+"axes"],r=re.isSubplotConstrained?{x:X,y:K}[e]:[],i=0;i<n.length;i++){var o=n[i],a=o._id,s=re.xLinks[a]||re.yLinks[a],l=r[0]||H[s]||Y[s];l&&(t?(t[o._name+".range[0]"]=t[l._name+".range[0]"],t[o._name+".range[1]"]=t[l._name+".range[1]"]):o.range=l.range.slice())}}function Ue(){var n,r=[];function i(e){for(n=0;n<e.length;n++)e[n].fixedrange||r.push(e[n]._id)}function o(e,t){for(n=0;n<e.length;n++){var i=e[n],o=i[t];i.fixedrange||"sync"!==o.tickmode||r.push(o._id)}}for(se&&(i(X),i(ne.xaxes),i(re.xaxes),o(t.overlays,"xaxis")),le&&(i(K),i(ne.yaxes),i(re.yaxes),o(t.overlays,"yaxis")),fe={},n=0;n<r.length;n++){var a=r[n],s=C(e,a);h.drawOne(e,s,{skipTitle:!0}),fe[s._name+".range[0]"]=s.range[0],fe[s._name+".range[1]"]=s.range[1]}h.redrawComponents(e,r)}function Ve(){if(!e._transitioningWithDuration){var t=e._context.doubleClick,n=[];ie&&(n=n.concat(X)),oe&&(n=n.concat(K)),re.xaxes&&(n=n.concat(re.xaxes)),re.yaxes&&(n=n.concat(re.yaxes));var r,i,o,a={};if("reset+autosize"===t)for(t="autosize",i=0;i<n.length;i++)if((r=n[i])._rangeInitial&&(r.range[0]!==r._rangeInitial[0]||r.range[1]!==r._rangeInitial[1])||!r._rangeInitial&&!r.autorange){t="reset";break}if("autosize"===t)for(i=0;i<n.length;i++)(r=n[i]).fixedrange||(a[r._name+".autorange"]=!0);else if("reset"===t)for((ie||ne.isSubplotConstrained)&&(n=n.concat(ne.xaxes)),oe&&!ne.isSubplotConstrained&&(n=n.concat(ne.yaxes)),ne.isSubplotConstrained&&(ie?oe||(n=n.concat(K)):n=n.concat(X)),i=0;i<n.length;i++)(r=n[i]).fixedrange||(r._rangeInitial?(o=r._rangeInitial,a[r._name+".range[0]"]=o[0],a[r._name+".range[1]"]=o[1]):a[r._name+".autorange"]=!0);e.emit("plotly_doubleclick",null),l.call("_guiRelayout",e,a)}}function Ge(){We([0,0,ee,te]),i.syncOrAsync([S.previousPromises,function(){e._fullLayout._replotting=!1,l.call("_guiRelayout",e,fe)}],e)}function We(t){var n,r,o,a,s=e._fullLayout,c=s._plots,u=s._subplots.cartesian;if(ue&&l.subplotsRegistry.splom.drag(e),ce)for(n=0;n<u.length;n++)if(o=(r=c[u[n]]).xaxis,a=r.yaxis,r._scene){var d=i.simpleMap(o.range,o.r2l),p=i.simpleMap(a.range,a.r2l);r._scene.update({range:[d[0],p[0],d[1],p[1]]})}if((ue||ce)&&(w(e),_(e)),de){var h=t[2]/O._length,g=t[3]/I._length;for(n=0;n<u.length;n++){o=(r=c[u[n]]).xaxis,a=r.yaxis;var y,b,x,S,C=(se||re.isSubplotConstrained)&&!o.fixedrange&&H[o._id],k=(le||re.isSubplotConstrained)&&!a.fixedrange&&Y[a._id];if(C?(y=h,x=v||re.isSubplotConstrained?t[0]:Ye(o,y)):re.xaHash[o._id]?(y=h,x=t[0]*o._length/O._length):re.yaHash[o._id]?(y=g,x="ns"===oe?-t[1]*o._length/I._length:Ye(o,y,{n:"top",s:"bottom"}[oe])):x=qe(o,y=$e(o,h,g)),k?(b=g,S=m||re.isSubplotConstrained?t[1]:Ye(a,b)):re.yaHash[a._id]?(b=g,S=t[1]*a._length/I._length):re.xaHash[a._id]?(b=h,S="ew"===ie?-t[0]*a._length/O._length:Ye(a,b,{e:"right",w:"left"}[ie])):S=qe(a,b=$e(a,h,g)),y||b){y||(y=1),b||(b=1);var M=o._offset-x/y,T=a._offset-S/b;r.clipRect.call(f.setTranslate,x,S).call(f.setScale,y,b),r.plot.call(f.setTranslate,M,T).call(f.setScale,1/y,1/b),y===r.xScaleFactor&&b===r.yScaleFactor||(f.setPointGroupScale(r.zoomScalePts,y,b),f.setTextPointsScale(r.zoomScaleTxt,y,b)),f.hideOutsideRangePoints(r.clipOnAxisFalseTraces,r),r.xScaleFactor=y,r.yScaleFactor=b}}}}function $e(e,t,n){return e.fixedrange?0:se&&ne.xaHash[e._id]?t:le&&(ne.isSubplotConstrained?ne.xaHash:ne.yaHash)[e._id]?n:0}function qe(e,t){return t?(e.range=e._r.slice(),A(e,t),Ye(e,t)):0}function Ye(e,t,n){return e._length*(1-t)*x[n||e.constraintoward||"middle"]}return m.length*v.length!=1&&$(xe,(function(t){if(e._context._scrollZoom.cartesian||e._fullLayout._enablescrollzoom){if(Oe(),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();ye(),clearTimeout(ze);var n=-t.deltaY;if(isFinite(n)||(n=t.wheelDelta/10),isFinite(n)){var r,o=Math.exp(-Math.min(Math.max(n,-20),20)/200),a=je.draglayer.select(".nsewdrag").node().getBoundingClientRect(),s=(t.clientX-a.left)/a.width,l=(a.bottom-t.clientY)/a.height;if(se){for(v||(s=.5),r=0;r<X.length;r++)c(X[r],s,o);He("x"),Fe[2]*=o,Fe[0]+=Fe[2]*s*(1/o-1)}if(le){for(m||(l=.5),r=0;r<K.length;r++)c(K[r],l,o);He("y"),Fe[3]*=o,Fe[1]+=Fe[3]*(1-l)*(1/o-1)}We(Fe),Ue(),e.emit("plotly_relayouting",fe),ze=setTimeout((function(){e._fullLayout&&(Fe=[0,0,ee,te],Ge())}),Be),t.preventDefault()}else i.log("Did not find wheel motion attributes: ",t)}function c(e,t,n){if(!e.fixedrange){var r=i.simpleMap(e.range,e.r2l),o=r[0]+(r[1]-r[0])*t;e.range=r.map((function(t){return e.l2r(o+(t-o)*n)}))}}})),xe},makeDragger:I,makeRectDragger:L,makeZoombox:B,makeCorners:j,updateZoombox:Z,xyCorners:G,transitionZoombox:H,removeZoombox:U,showDoubleClickNotifier:V,attachWheelEventHandler:$}},4305:function(e,t,n){"use strict";var r=n(9898),i=n(211),o=n(8569),a=n(6964),s=n(9323).makeDragBox,l=n(5555).DRAGGERSIZE;t.initInteractions=function(e){var n=e._fullLayout;if(e._context.staticPlot)r.select(e).selectAll(".drag").remove();else if(n._has("cartesian")||n._has("splom")){Object.keys(n._plots||{}).sort((function(e,t){if((n._plots[e].mainplot&&!0)===(n._plots[t].mainplot&&!0)){var r=e.split("y"),i=t.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return n._plots[e].mainplot?1:-1})).forEach((function(t){var r=n._plots[t],a=r.xaxis,c=r.yaxis;if(!r.mainplot){var u=s(e,r,a._offset,c._offset,a._length,c._length,"ns","ew");u.onmousemove=function(n){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===t&&e._fullLayout._plots[t]&&i.hover(e,n,t)},i.hover(e,n,t),e._fullLayout._lasthover=u,e._fullLayout._hoversubplot=t},u.onmouseout=function(t){e._dragging||(e._fullLayout._hoversubplot=null,o.unhover(e,t))},e._context.showAxisDragHandles&&(s(e,r,a._offset-l,c._offset-l,l,l,"n","w"),s(e,r,a._offset+a._length,c._offset-l,l,l,"n","e"),s(e,r,a._offset-l,c._offset+c._length,l,l,"s","w"),s(e,r,a._offset+a._length,c._offset+c._length,l,l,"s","e"))}if(e._context.showAxisDragHandles){if(t===a._mainSubplot){var d=a._mainLinePosition;"top"===a.side&&(d-=l),s(e,r,a._offset+.1*a._length,d,.8*a._length,l,"","ew"),s(e,r,a._offset,d,.1*a._length,l,"","w"),s(e,r,a._offset+.9*a._length,d,.1*a._length,l,"","e")}if(t===c._mainSubplot){var f=c._mainLinePosition;"right"!==c.side&&(f-=l),s(e,r,f,c._offset+.1*c._length,l,.8*c._length,"ns",""),s(e,r,f,c._offset+.9*c._length,l,.1*c._length,"s",""),s(e,r,f,c._offset,l,.1*c._length,"n","")}}}));var a=n._hoverlayer.node();a.onmousemove=function(t){t.target=e._fullLayout._lasthover,i.hover(e,t,n._hoversubplot)},a.onclick=function(t){t.target=e._fullLayout._lasthover,i.click(e,t)},a.onmousedown=function(t){e._fullLayout._lasthover.onmousedown(t)},t.updateFx(e)}},t.updateFx=function(e){var t=e._fullLayout,n="pan"===t.dragmode?"move":"crosshair";a(t._draggers,n)}},6325:function(e,t,n){"use strict";var r=n(3972),i=n(1828),o=n(1675);e.exports=function(e){return function(t,n){var a=t[e];if(Array.isArray(a))for(var s=r.subplotsRegistry.cartesian,l=s.idRegex,c=n._subplots,u=c.xaxis,d=c.yaxis,f=c.cartesian,p=n._has("cartesian")||n._has("gl2d"),h=0;h<a.length;h++){var m=a[h];if(i.isPlainObject(m)){var g=o.cleanId(m.xref,"x",!1),v=o.cleanId(m.yref,"y",!1),y=l.x.test(g),b=l.y.test(v);if(y||b){p||i.pushUnique(n._basePlotModules,s);var x=!1;y&&-1===u.indexOf(g)&&(u.push(g),x=!0),b&&-1===d.indexOf(v)&&(d.push(v),x=!0),x&&y&&b&&f.push(g+v)}}}}}},3612:function(e,t,n){"use strict";var r=n(9898),i=n(3972),o=n(1828),a=n(4875),s=n(1424),l=n(7659).a0,c=n(1675),u=n(5555),d=n(7922),f=o.ensureSingle;function p(e,t,n){return o.ensureSingle(e,t,n,(function(e){e.datum(n)}))}function h(e,t,n,o,a){for(var c,d,f,p=u.traceLayerClasses,h=e._fullLayout,m=h._modules,g=[],v=[],y=0;y<m.length;y++){var b=(c=m[y]).name,x=i.modules[b].categories;if(x.svg){var w=c.layerName||b+"layer",_=c.plot;f=(d=l(n,_))[0],n=d[1],f.length&&g.push({i:p.indexOf(w),className:w,plotMethod:_,cdModule:f}),x.zoomScale&&v.push("."+w)}}g.sort((function(e,t){return e.i-t.i}));var S=t.plot.selectAll("g.mlayer").data(g,(function(e){return e.className}));if(S.enter().append("g").attr("class",(function(e){return e.className})).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),S.exit().remove(),S.order(),S.each((function(n){var i=r.select(this),l=n.className;n.plotMethod(e,t,n.cdModule,i,o,a),-1===u.clipOnAxisFalseQuery.indexOf("."+l)&&s.setClipUrl(i,t.layerClipId,e)})),h._has("scattergl")&&(c=i.getModule("scattergl"),f=l(n,c)[0],c.plot(e,t,f)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(u.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),v.length)){var C=t.plot.selectAll(v.join(",")).selectAll(".trace");t.zoomScalePts=C.selectAll("path.point"),t.zoomScaleTxt=C.selectAll(".textpoint")}}function m(e,t){var n=t.plotgroup,r=t.id,i=u.layerValue2layerClass[t.xaxis.layer],o=u.layerValue2layerClass[t.yaxis.layer],a=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var s=t.mainplotinfo,l=s.plotgroup,d=r+"-x",h=r+"-y";t.minorGridlayer=s.minorGridlayer,t.gridlayer=s.gridlayer,t.zerolinelayer=s.zerolinelayer,f(s.overlinesBelow,"path",d),f(s.overlinesBelow,"path",h),f(s.overaxesBelow,"g",d),f(s.overaxesBelow,"g",h),t.plot=f(s.overplot,"g",r),f(s.overlinesAbove,"path",d),f(s.overlinesAbove,"path",h),f(s.overaxesAbove,"g",d),f(s.overaxesAbove,"g",h),t.xlines=l.select(".overlines-"+i).select("."+d),t.ylines=l.select(".overlines-"+o).select("."+h),t.xaxislayer=l.select(".overaxes-"+i).select("."+d),t.yaxislayer=l.select(".overaxes-"+o).select("."+h)}else if(a)t.xlines=f(n,"path","xlines-above"),t.ylines=f(n,"path","ylines-above"),t.xaxislayer=f(n,"g","xaxislayer-above"),t.yaxislayer=f(n,"g","yaxislayer-above");else{var m=f(n,"g","layer-subplot");t.shapelayer=f(m,"g","shapelayer"),t.imagelayer=f(m,"g","imagelayer"),t.minorGridlayer=f(n,"g","minor-gridlayer"),t.gridlayer=f(n,"g","gridlayer"),t.zerolinelayer=f(n,"g","zerolinelayer"),f(n,"path","xlines-below"),f(n,"path","ylines-below"),t.overlinesBelow=f(n,"g","overlines-below"),f(n,"g","xaxislayer-below"),f(n,"g","yaxislayer-below"),t.overaxesBelow=f(n,"g","overaxes-below"),t.plot=f(n,"g","plot"),t.overplot=f(n,"g","overplot"),t.xlines=f(n,"path","xlines-above"),t.ylines=f(n,"path","ylines-above"),t.overlinesAbove=f(n,"g","overlines-above"),f(n,"g","xaxislayer-above"),f(n,"g","yaxislayer-above"),t.overaxesAbove=f(n,"g","overaxes-above"),t.xlines=n.select(".xlines-"+i),t.ylines=n.select(".ylines-"+o),t.xaxislayer=n.select(".xaxislayer-"+i),t.yaxislayer=n.select(".yaxislayer-"+o)}a||(p(t.minorGridlayer,"g",t.xaxis._id),p(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map((function(e){return e[0]})).sort(c.idSort),p(t.gridlayer,"g",t.xaxis._id),p(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map((function(e){return e[0]})).sort(c.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function g(e,t){if(e){var n={};for(var i in e.each((function(e){var i=e[0];r.select(this).remove(),v(i,t),n[i]=!0})),t._plots)for(var o=t._plots[i].overlays||[],a=0;a<o.length;a++){var s=o[a];n[s.id]&&s.plot.selectAll(".trace").remove()}}}function v(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}t.name="cartesian",t.attr=["xaxis","yaxis"],t.idRoot=["x","y"],t.idRegex=u.idRegex,t.attrRegex=u.attrRegex,t.attributes=n(9502),t.layoutAttributes=n(3838),t.supplyLayoutDefaults=n(6763),t.transitionAxes=n(6847),t.finalizeSubplots=function(e,t){var n,r,i,a=t._subplots,s=a.xaxis,l=a.yaxis,d=a.cartesian,f=d.concat(a.gl2d||[]),p={},h={};for(n=0;n<f.length;n++){var m=f[n].split("y");p[m[0]]=1,h["y"+m[1]]=1}for(n=0;n<s.length;n++)p[r=s[n]]||(i=(e[c.id2name(r)]||{}).anchor,u.idRegex.y.test(i)||(i="y"),d.push(r+i),f.push(r+i),h[i]||(h[i]=1,o.pushUnique(l,i)));for(n=0;n<l.length;n++)h[i=l[n]]||(r=(e[c.id2name(i)]||{}).anchor,u.idRegex.x.test(r)||(r="x"),d.push(r+i),f.push(r+i),p[r]||(p[r]=1,o.pushUnique(s,r)));if(!f.length){for(var g in r="",i="",e)u.attrRegex.test(g)&&("x"===g.charAt(0)?(!r||+g.substr(5)<+r.substr(5))&&(r=g):(!i||+g.substr(5)<+i.substr(5))&&(i=g));r=r?c.name2id(r):"x",i=i?c.name2id(i):"y",s.push(r),l.push(i),d.push(r+i)}},t.plot=function(e,t,n,r){var i,o=e._fullLayout,a=o._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],i=0;i<s.length;i++)t.push(i);for(i=0;i<a.length;i++){for(var l,c=a[i],u=o._plots[c],d=[],f=0;f<s.length;f++){var p=s[f],m=p[0].trace;m.xaxis+m.yaxis===c&&((-1!==t.indexOf(m.index)||m.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(m.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(p)),l=p)}h(e,u,d,n,r)}},t.clean=function(e,t,n,r){var i,o,a,s=r._plots||{},l=t._plots||{},u=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(a in s)(i=s[a]).plotgroup&&i.plotgroup.remove();var d=r._has&&r._has("gl"),f=t._has&&t._has("gl");if(d&&!f)for(a in s)(i=s[a])._scene&&i._scene.destroy();if(u.xaxis&&u.yaxis){var p=c.listIds({_fullLayout:r});for(o=0;o<p.length;o++){var h=p[o];t[c.id2name(h)]||r._infolayer.selectAll(".g-"+h+"title").remove()}}var m=r._has&&r._has("cartesian"),y=t._has&&t._has("cartesian");if(m&&!y)g(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(u.cartesian)for(o=0;o<u.cartesian.length;o++){var b=u.cartesian[o];if(!l[b]){var x="."+b+",."+b+"-x,."+b+"-y";r._cartesianlayer.selectAll(x).remove(),v(b,r)}}},t.drawFramework=function(e){var t=e._fullLayout,n=function(e){var t,n,r,i,o,a,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){r=l[t],o=(i=s._plots[r]).xaxis,a=i.yaxis;var f=o._mainAxis,p=a._mainAxis,h=f._id+p._id,m=s._plots[h];i.overlays=[],h!==r&&m?(i.mainplot=h,i.mainplotinfo=m,d.push(r)):(i.mainplot=void 0,i.mainplotinfo=void 0,u.push(r))}for(t=0;t<d.length;t++)r=d[t],(i=s._plots[r]).mainplotinfo.overlays.push(i);var g=u.concat(d),v=new Array(c);for(t=0;t<c;t++){r=g[t],o=(i=s._plots[r]).xaxis,a=i.yaxis;var y=[r,o.layer,a.layer,o.overlaying||"",a.overlaying||""];for(n=0;n<i.overlays.length;n++)y.push(i.overlays[n].id);v[t]=y}return v}(e),i=t._cartesianlayer.selectAll(".subplot").data(n,String);i.enter().append("g").attr("class",(function(e){return"subplot "+e[0]})),i.order(),i.exit().call(g,t),i.each((function(n){var i=n[0],o=t._plots[i];o.plotgroup=r.select(this),m(e,o),o.draglayer=f(t._draggers,"g",i)}))},t.rangePlot=function(e,t,n){m(e,t),h(e,t,n),a.style(e)},t.toSVG=function(e){var t=e._fullLayout._glimages,n=r.select(e).selectAll(".svg-container");n.filter((function(e,t){return t===n.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus").each((function(){var e=this,n=e.toDataURL("image/png");t.append("svg:image").attr({xmlns:d.svg,"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}))},t.updateFx=n(4305).updateFx},3838:function(e,t,n){"use strict";var r=n(1940),i=n(2399),o=n(9952).P,a=n(1426).extendFlat,s=n(4467).templatedArray,l=n(2663).descriptionWithDates,c=n(606).ONEDAY,u=n(5555),d=u.HOUR_PATTERN,f=u.WEEKDAY_PATTERN,p={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},h=a({},p,{values:p.values.slice().concat(["sync"])});function m(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},v={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},y={valType:"data_array",editType:"ticks"},b={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function x(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=5),t}function w(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var _={valType:"color",dflt:i.defaultLine,editType:"ticks"},S={valType:"color",dflt:i.lightLine,editType:"ticks"};function C(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var k=a({},o,{editType:"ticks"}),M={valType:"boolean",editType:"ticks"};e.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,d,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:h,nticks:m(),tick0:g,dtick:v,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:y,ticktext:{valType:"data_array",editType:"ticks"},ticks:b,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:x(),tickwidth:w(),tickcolor:_,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:a({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:M,gridcolor:S,gridwidth:C(),griddash:k,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},minor:{tickmode:p,nticks:m("minor"),tick0:g,dtick:v,tickvals:y,ticks:b,ticklen:x("minor"),tickwidth:w("minor"),tickcolor:_,gridcolor:S,gridwidth:C("minor"),griddash:k,showgrid:M,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},6763:function(e,t,n){"use strict";var r=n(1828),i=n(7901),o=n(3469).isUnifiedHover,a=n(8212),s=n(4467),l=n(820),c=n(3838),u=n(951),d=n(1453),f=n(9082),p=n(2830),h=n(1675),m=h.id2name,g=h.name2id,v=n(5555).AX_ID_PATTERN,y=n(3972),b=y.traceIs,x=y.getComponentMethod;function w(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}e.exports=function(e,t,n){var y,_,S=t.autotypenumbers,C={},k={},M={},T={},A={},E={},P={},R={},O={},I={};for(y=0;y<n.length;y++){var L=n[y];if(b(L,"cartesian")||b(L,"gl2d")){var D,N;if(L.xaxis)D=m(L.xaxis),w(C,D,L);else if(L.xaxes)for(_=0;_<L.xaxes.length;_++)w(C,m(L.xaxes[_]),L);if(L.yaxis)N=m(L.yaxis),w(C,N,L);else if(L.yaxes)for(_=0;_<L.yaxes.length;_++)w(C,m(L.yaxes[_]),L);"funnel"===L.type?"h"===L.orientation?(D&&(k[D]=!0),N&&(P[N]=!0)):N&&(M[N]=!0):"image"===L.type?(N&&(R[N]=!0),D&&(R[D]=!0)):(N&&(A[N]=!0,E[N]=!0),b(L,"carpet")&&("carpet"!==L.type||L._cheater)||D&&(T[D]=!0)),"carpet"===L.type&&L._cheater&&D&&(k[D]=!0),b(L,"2dMap")&&(O[D]=!0,O[N]=!0),b(L,"oriented")&&(I["h"===L.orientation?N:D]=!0)}}var F=t._subplots,z=F.xaxis,B=F.yaxis,j=r.simpleMap(z,m),Z=r.simpleMap(B,m),H=j.concat(Z),U=i.background;z.length&&B.length&&(U=r.coerce(e,t,l,"plot_bgcolor"));var V,G,W,$,q,Y=i.combine(U,t.paper_bgcolor);function X(){var e=C[V]||[];q._traceIndices=e.map((function(e){return e._expandedIndex})),q._annIndices=[],q._shapeIndices=[],q._selectionIndices=[],q._imgIndices=[],q._subplotsWith=[],q._counterAxes=[],q._name=q._attr=V,q._id=G}function K(e,t){return r.coerce($,q,c,e,t)}function J(e,t){return r.coerce2($,q,c,e,t)}function Q(e){return"x"===e?B:z}function ee(t,n){for(var r="x"===t?j:Z,i=[],o=0;o<r.length;o++){var a=r[o];a===n||(e[a]||{}).overlaying||i.push(g(a))}return i}var te={x:Q("x"),y:Q("y")},ne=te.x.concat(te.y),re={},ie=[];function oe(){var e=$.matches;v.test(e)&&-1===ne.indexOf(e)&&(re[e]=$.type,ie=Object.keys(re))}var ae=a(e,t),se=o(ae);for(y=0;y<H.length;y++){V=H[y],G=g(V),W=V.charAt(0),r.isPlainObject(e[V])||(e[V]={}),$=e[V],q=s.newContainer(t,V,W+"axis"),X();var le="x"===W&&!T[V]&&k[V]||"y"===W&&!A[V]&&M[V],ce="y"===W&&(!E[V]&&P[V]||R[V]),ue={hasMinor:!0,letter:W,font:t.font,outerTicks:O[V],showGrid:!I[V],data:C[V]||[],bgColor:Y,calendar:t.calendar,automargin:!0,visibleDflt:le,reverseDflt:ce,autotypenumbersDflt:S,splomStash:((t._splomAxes||{})[W]||{})[G]};K("uirevision",t.uirevision),u($,q,K,ue),d($,q,K,ue,t);var de=se&&W===ae.charAt(0),fe=J("spikecolor",se?q.color:void 0),pe=J("spikethickness",se?1.5:void 0),he=J("spikedash",se?"dot":void 0),me=J("spikemode",se?"across":void 0),ge=J("spikesnap");K("showspikes",!!(de||fe||pe||he||me||ge))||(delete q.spikecolor,delete q.spikethickness,delete q.spikedash,delete q.spikemode,delete q.spikesnap);var ve=m($.overlaying),ye=[0,1];if(void 0!==t[ve]){var be=m(t[ve].anchor);void 0!==t[be]&&(ye=t[be].domain)}p($,q,K,{letter:W,counterAxes:te[W],overlayableAxes:ee(W,V),grid:t.grid,overlayingDomain:ye}),K("title.standoff"),oe(),q._input=$}for(y=0;y<ie.length;){G=ie[y++],W=(V=m(G)).charAt(0),r.isPlainObject(e[V])||(e[V]={}),$=e[V],q=s.newContainer(t,V,W+"axis"),X();var xe={letter:W,font:t.font,outerTicks:O[V],showGrid:!I[V],data:[],bgColor:Y,calendar:t.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((t._splomAxes||{})[W]||{})[G]};K("uirevision",t.uirevision),q.type=re[G]||"linear",d($,q,K,xe,t),p($,q,K,{letter:W,counterAxes:te[W],overlayableAxes:ee(W,V),grid:t.grid}),K("fixedrange"),oe(),q._input=$}var we=x("rangeslider","handleDefaults"),_e=x("rangeselector","handleDefaults");for(y=0;y<j.length;y++)V=j[y],$=e[V],q=t[V],we(e,t,V),"date"===q.type&&_e($,q,t,Z,q.calendar),K("fixedrange");for(y=0;y<Z.length;y++){V=Z[y],$=e[V],q=t[V];var Se=t[m(q.anchor)];K("fixedrange",x("rangeslider","isVisible")(Se))}f.handleDefaults(e,t,{axIds:ne.concat(ie).sort(h.idSort),axHasImage:R})}},2128:function(e,t,n){"use strict";var r=n(4267).mix,i=n(2399),o=n(1828);e.exports=function(e,t,n,a){var s=(a=a||{}).dfltColor;function l(n,r){return o.coerce2(e,t,a.attributes,n,r)}var c=l("linecolor",s),u=l("linewidth");n("showline",a.showLine||!!c||!!u)||(delete t.linecolor,delete t.linewidth);var d=l("gridcolor",r(s,a.bgColor,a.blend||i.lightFraction).toRgbString()),f=l("gridwidth"),p=l("griddash");if(n("showgrid",a.showGrid||!!d||!!f||!!p)||(delete t.gridcolor,delete t.gridwidth,delete t.griddash),a.hasMinor){var h=l("minor.gridcolor",r(t.gridcolor,a.bgColor,67).toRgbString()),m=l("minor.gridwidth",t.gridwidth||1),g=l("minor.griddash",t.griddash||"solid");n("minor.showgrid",!!h||!!m||!!g)||(delete t.minor.gridcolor,delete t.minor.gridwidth,delete t.minor.griddash)}if(!a.noZeroLine){var v=l("zerolinecolor",s),y=l("zerolinewidth");n("zeroline",a.showGrid||!!v||!!y)||(delete t.zerolinecolor,delete t.zerolinewidth)}}},2830:function(e,t,n){"use strict";var r=n(2770),i=n(1828);e.exports=function(e,t,n,o){var a,s,l,c,u,d,f=o.counterAxes||[],p=o.overlayableAxes||[],h=o.letter,m=o.grid,g=o.overlayingDomain;m&&(s=m._domains[h][m._axisMap[t._id]],a=m._anchors[t._id],s&&(l=m[h+"side"].split(" ")[0],c=m.domain[h]["right"===l||"top"===l?1:0])),s=s||[0,1],a=a||(r(e.position)?"free":f[0]||"free"),l=l||("x"===h?"bottom":"left"),c=c||0,u=0,d=!1;var v=i.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(f),dflt:a}},"anchor"),y=i.coerce(e,t,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:l}},"side");"free"===v&&("y"===h&&(n("autoshift")&&(c="left"===y?g[0]:g[1],d=!t.automargin||t.automargin,u="left"===y?-3:3),n("shift",u)),n("position",c)),n("automargin",d);var b=!1;if(p.length&&(b=i.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(p),dflt:!1}},"overlaying")),!b){var x=n("domain",s);x[0]>x[1]-1/4096&&(t.domain=s),i.noneOrAll(e.domain,t.domain,s),"sync"===t.tickmode&&(t.tickmode="auto")}return n("layer"),t}},9426:function(e,t,n){"use strict";var r=n(9652);e.exports=function(e,t,n,i,o){o||(o={});var a=o.tickSuffixDflt,s=r(e);n("tickprefix")&&n("showtickprefix",s),n("ticksuffix",a)&&n("showticksuffix",s)}},2449:function(e,t,n){"use strict";var r=n(8783).FROM_BL;e.exports=function(e,t,n){void 0===n&&(n=r[e.constraintoward||"center"]);var i=[e.r2l(e.range[0]),e.r2l(e.range[1])],o=i[0]+(i[1]-i[0])*n;e.range=e._input.range=[e.l2r(o+(i[0]-o)*t),e.l2r(o+(i[1]-o)*t)],e.setScale()}},1994:function(e,t,n){"use strict";var r=n(9898),i=n(4096).g0,o=n(1828),a=o.numberFormat,s=n(2770),l=o.cleanNumber,c=o.ms2DateTime,u=o.dateTime2ms,d=o.ensureNumber,f=o.isArrayOrTypedArray,p=n(606),h=p.FP_SAFE,m=p.BADNUM,g=p.LOG_CLIP,v=p.ONEWEEK,y=p.ONEDAY,b=p.ONEHOUR,x=p.ONEMIN,w=p.ONESEC,_=n(1675),S=n(5555),C=S.HOUR_PATTERN,k=S.WEEKDAY_PATTERN;function M(e){return Math.pow(10,e)}function T(e){return null!=e}e.exports=function(e,t){t=t||{};var n=e._id||"x",p=n.charAt(0);function A(t,n){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&n&&e.range&&2===e.range.length){var r=e.range[0],i=e.range[1];return.5*(r+i-2*g*Math.abs(r-i))}return m}function E(t,n,r,i){if((i||{}).msUTC&&s(t))return+t;var a=u(t,r||e.calendar);if(a===m){if(!s(t))return m;t=+t;var l=Math.floor(10*o.mod(t+.05,1)),c=Math.round(t-l/10);a=u(new Date(c))+l/10}return a}function P(t,n,r){return c(t,n,r||e.calendar)}function R(t){return e._categories[Math.round(t)]}function O(t){if(T(t)){if(void 0===e._categoriesMap&&(e._categoriesMap={}),void 0!==e._categoriesMap[t])return e._categoriesMap[t];e._categories.push("number"==typeof t?String(t):t);var n=e._categories.length-1;return e._categoriesMap[t]=n,n}return m}function I(t){if(e._categoriesMap)return e._categoriesMap[t]}function L(e){var t=I(e);return void 0!==t?t:s(e)?+e:void 0}function D(e){return s(e)?+e:I(e)}function N(e,t,n){return r.round(n+t*e,2)}function F(e,t,n){return(e-n)/t}var z=function(t){return s(t)?N(t,e._m,e._b):m},B=function(t){return F(t,e._m,e._b)};if(e.rangebreaks){var j="y"===p;z=function(t){if(!s(t))return m;var n=e._rangebreaks.length;if(!n)return N(t,e._m,e._b);var r=j;e.range[0]>e.range[1]&&(r=!r);for(var i=r?-1:1,o=i*t,a=0,l=0;l<n;l++){var c=i*e._rangebreaks[l].min,u=i*e._rangebreaks[l].max;if(o<c)break;if(!(o>u)){a=o<(c+u)/2?l:l+1;break}a=l+1}var d=e._B[a]||0;return isFinite(d)?N(t,e._m2,d):0},B=function(t){var n=e._rangebreaks.length;if(!n)return F(t,e._m,e._b);for(var r=0,i=0;i<n&&!(t<e._rangebreaks[i].pmin);i++)t>e._rangebreaks[i].pmax&&(r=i+1);return F(t,e._m2,e._B[r])}}e.c2l="log"===e.type?A:d,e.l2c="log"===e.type?M:d,e.l2p=z,e.p2l=B,e.c2p="log"===e.type?function(e,t){return z(A(e,t))}:z,e.p2c="log"===e.type?function(e){return M(B(e))}:B,-1!==["linear","-"].indexOf(e.type)?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=l,e.c2d=e.c2r=e.l2d=e.l2r=d,e.d2p=e.r2p=function(t){return e.l2p(l(t))},e.p2d=e.p2r=B,e.cleanPos=d):"log"===e.type?(e.d2r=e.d2l=function(e,t){return A(l(e),t)},e.r2d=e.r2c=function(e){return M(l(e))},e.d2c=e.r2l=l,e.c2d=e.l2r=d,e.c2r=A,e.l2d=M,e.d2p=function(t,n){return e.l2p(e.d2r(t,n))},e.p2d=function(e){return M(B(e))},e.r2p=function(t){return e.l2p(l(t))},e.p2r=B,e.cleanPos=d):"date"===e.type?(e.d2r=e.r2d=o.identity,e.d2c=e.r2c=e.d2l=e.r2l=E,e.c2d=e.c2r=e.l2d=e.l2r=P,e.d2p=e.r2p=function(t,n,r){return e.l2p(E(t,0,r))},e.p2d=e.p2r=function(e,t,n){return P(B(e),t,n)},e.cleanPos=function(t){return o.cleanDate(t,m,e.calendar)}):"category"===e.type?(e.d2c=e.d2l=O,e.r2d=e.c2d=e.l2d=R,e.d2r=e.d2l_noadd=L,e.r2c=function(t){var n=D(t);return void 0!==n?n:e.fraction2r(.5)},e.l2r=e.c2r=d,e.r2l=D,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return R(B(e))},e.r2p=e.d2p,e.p2r=B,e.cleanPos=function(e){return"string"==typeof e&&""!==e?e:d(e)}):"multicategory"===e.type&&(e.r2d=e.c2d=e.l2d=R,e.d2r=e.d2l_noadd=L,e.r2c=function(t){var n=L(t);return void 0!==n?n:e.fraction2r(.5)},e.r2c_just_indices=I,e.l2r=e.c2r=d,e.r2l=L,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return R(B(e))},e.r2p=e.d2p,e.p2r=B,e.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:d(e)},e.setupMultiCategory=function(r){var i,a,s=e._traceIndices,l=e._matchGroup;if(l&&0===e._categories.length)for(var c in l)if(c!==n){var u=t[_.id2name(c)];s=s.concat(u._traceIndices)}var d=[[0,{}],[0,{}]],h=[];for(i=0;i<s.length;i++){var m=r[s[i]];if(p in m){var g=m[p],v=m._length||o.minRowLength(g);if(f(g[0])&&f(g[1]))for(a=0;a<v;a++){var y=g[0][a],b=g[1][a];T(y)&&T(b)&&(h.push([y,b]),y in d[0][1]||(d[0][1][y]=d[0][0]++),b in d[1][1]||(d[1][1][b]=d[1][0]++))}}}for(h.sort((function(e,t){var n=d[0][1],r=n[e[0]]-n[t[0]];if(r)return r;var i=d[1][1];return i[e[1]]-i[t[1]]})),i=0;i<h.length;i++)O(h[i])}),e.fraction2r=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return e.l2r(n+t*(r-n))},e.r2fraction=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return(e.r2l(t)-n)/(r-n)},e.cleanRange=function(t,n){n||(n={}),t||(t="range");var r,i,a=o.nestedProperty(e,t).get();if(i=(i="date"===e.type?o.dfltRange(e.calendar):"y"===p?S.DFLTRANGEY:"realaxis"===e._name?[0,1]:n.dfltRange||S.DFLTRANGEX).slice(),"tozero"!==e.rangemode&&"nonnegative"!==e.rangemode||(i[0]=0),a&&2===a.length)for("date"!==e.type||e.autorange||(a[0]=o.cleanDate(a[0],m,e.calendar),a[1]=o.cleanDate(a[1],m,e.calendar)),r=0;r<2;r++)if("date"===e.type){if(!o.isDateTime(a[r],e.calendar)){e[t]=i;break}if(e.r2l(a[0])===e.r2l(a[1])){var l=o.constrain(e.r2l(a[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);a[0]=e.l2r(l-1e3),a[1]=e.l2r(l+1e3);break}}else{if(!s(a[r])){if(!s(a[1-r])){e[t]=i;break}a[r]=a[1-r]*(r?10:.1)}if(a[r]<-h?a[r]=-h:a[r]>h&&(a[r]=h),a[0]===a[1]){var c=Math.max(1,Math.abs(1e-6*a[0]));a[0]-=c,a[1]+=c}}else o.nestedProperty(e,t).set(i)},e.setScale=function(n){var r=t._size;if(e.overlaying){var i=_.getFromId({_fullLayout:t},e.overlaying);e.domain=i.domain}var o=n&&e._r?"_r":"range",a=e.calendar;e.cleanRange(o);var s,l,c=e.r2l(e[o][0],a),u=e.r2l(e[o][1],a),d="y"===p;if(d?(e._offset=r.t+(1-e.domain[1])*r.h,e._length=r.h*(e.domain[1]-e.domain[0]),e._m=e._length/(c-u),e._b=-e._m*u):(e._offset=r.l+e.domain[0]*r.w,e._length=r.w*(e.domain[1]-e.domain[0]),e._m=e._length/(u-c),e._b=-e._m*c),e._rangebreaks=[],e._lBreaks=0,e._m2=0,e._B=[],e.rangebreaks&&(e._rangebreaks=e.locateBreaks(Math.min(c,u),Math.max(c,u)),e._rangebreaks.length)){for(s=0;s<e._rangebreaks.length;s++)l=e._rangebreaks[s],e._lBreaks+=Math.abs(l.max-l.min);var f=d;c>u&&(f=!f),f&&e._rangebreaks.reverse();var h=f?-1:1;for(e._m2=h*e._length/(Math.abs(u-c)-e._lBreaks),e._B.push(-e._m2*(d?u:c)),s=0;s<e._rangebreaks.length;s++)l=e._rangebreaks[s],e._B.push(e._B[e._B.length-1]-h*e._m2*(l.max-l.min));for(s=0;s<e._rangebreaks.length;s++)(l=e._rangebreaks[s]).pmin=z(l.min),l.pmax=z(l.max)}if(!isFinite(e._m)||!isFinite(e._b)||e._length<0)throw t._replotting=!1,new Error("Something went wrong with axis scaling")},e.maskBreaks=function(t){var n,r,i,a,s,c=e.rangebreaks||[];c._cachedPatterns||(c._cachedPatterns=c.map((function(t){return t.enabled&&t.bounds?o.simpleMap(t.bounds,t.pattern?l:e.d2c):null}))),c._cachedValues||(c._cachedValues=c.map((function(t){return t.enabled&&t.values?o.simpleMap(t.values,e.d2c).sort(o.sorterAsc):null})));for(var u=0;u<c.length;u++){var d=c[u];if(d.enabled)if(d.bounds){var f=d.pattern;switch(r=(n=c._cachedPatterns[u])[0],i=n[1],f){case k:a=(s=new Date(t)).getUTCDay(),r>i&&(i+=7,a<r&&(a+=7));break;case C:a=(s=new Date(t)).getUTCHours()+(s.getUTCMinutes()/60+s.getUTCSeconds()/3600+s.getUTCMilliseconds()/36e5),r>i&&(i+=24,a<r&&(a+=24));break;case"":a=t}if(a>=r&&a<i)return m}else for(var p=c._cachedValues[u],h=0;h<p.length;h++)if(i=(r=p[h])+d.dvalue,t>=r&&t<i)return m}return t},e.locateBreaks=function(t,n){var r,i,a,s,c=[];if(!e.rangebreaks)return c;var u=e.rangebreaks.slice().sort((function(e,t){return e.pattern===k&&t.pattern===C?-1:t.pattern===k&&e.pattern===C?1:0})),d=function(e,r){if((e=o.constrain(e,t,n))!==(r=o.constrain(r,t,n))){for(var i=!0,a=0;a<c.length;a++){var s=c[a];e<s.max&&r>=s.min&&(e<s.min&&(s.min=e),r>s.max&&(s.max=r),i=!1)}i&&c.push({min:e,max:r})}};for(r=0;r<u.length;r++){var f=u[r];if(f.enabled)if(f.bounds){var p=t,h=n;f.pattern&&(p=Math.floor(p)),a=(i=o.simpleMap(f.bounds,f.pattern?l:e.r2l))[0],s=i[1];var m,g,_=new Date(p);switch(f.pattern){case k:g=v,m=(s-a+(s<a?7:0))*y,p+=a*y-(_.getUTCDay()*y+_.getUTCHours()*b+_.getUTCMinutes()*x+_.getUTCSeconds()*w+_.getUTCMilliseconds());break;case C:g=y,m=(s-a+(s<a?24:0))*b,p+=a*b-(_.getUTCHours()*b+_.getUTCMinutes()*x+_.getUTCSeconds()*w+_.getUTCMilliseconds());break;default:p=Math.min(i[0],i[1]),m=g=(h=Math.max(i[0],i[1]))-p}for(var S=p;S<h;S+=g)d(S,S+m)}else for(var M=o.simpleMap(f.values,e.d2c),T=0;T<M.length;T++)d(a=M[T],s=a+f.dvalue)}return c.sort((function(e,t){return e.min-t.min})),c},e.makeCalcdata=function(t,n,r){var i,a,s,l,c=e.type,u="date"===c&&t[n+"calendar"];if(n in t){if(i=t[n],l=t._length||o.minRowLength(i),o.isTypedArray(i)&&("linear"===c||"log"===c)){if(l===i.length)return i;if(i.subarray)return i.subarray(0,l)}if("multicategory"===c)return function(e,t){for(var n=new Array(t),r=0;r<t;r++){var i=(e[0]||[])[r],o=(e[1]||[])[r];n[r]=I([i,o])}return n}(i,l);for(a=new Array(l),s=0;s<l;s++)a[s]=e.d2c(i[s],0,u,r)}else{var d=n+"0"in t?e.d2c(t[n+"0"],0,u):0,f=t["d"+n]?Number(t["d"+n]):1;for(i=t[{x:"y",y:"x"}[n]],l=t._length||i.length,a=new Array(l),s=0;s<l;s++)a[s]=d+s*f}if(e.rangebreaks)for(s=0;s<l;s++)a[s]=e.maskBreaks(a[s]);return a},e.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&s(e.r2l(t[0]))&&s(e.r2l(t[1]))},e.isPtWithinRange=function(t,n){var r=e.c2l(t[p],null,n),i=e.r2l(e.range[0]),o=e.r2l(e.range[1]);return i<o?i<=r&&r<=o:o<=r&&r<=i},e._emptyCategories=function(){e._categories=[],e._categoriesMap={}},e.clearCalc=function(){var n=e._matchGroup;if(n){var r=null,i=null;for(var o in n){var a=t[_.id2name(o)];if(a._categories){r=a._categories,i=a._categoriesMap;break}}r&&i?(e._categories=r,e._categoriesMap=i):e._emptyCategories()}else e._emptyCategories();if(e._initialCategories)for(var s=0;s<e._initialCategories.length;s++)O(e._initialCategories[s])},e.sortByInitialCategories=function(){var r=[];if(e._emptyCategories(),e._initialCategories)for(var i=0;i<e._initialCategories.length;i++)O(e._initialCategories[i]);r=r.concat(e._traceIndices);var o=e._matchGroup;for(var a in o)if(n!==a){var s=t[_.id2name(a)];s._categories=e._categories,s._categoriesMap=e._categoriesMap,r=r.concat(s._traceIndices)}return r};var Z=t._d3locale;"date"===e.type&&(e._dateFormat=Z?Z.timeFormat:i,e._extraFormat=t._extraFormat),e._separators=t.separators,e._numFormat=Z?Z.numberFormat:a,delete e._minDtick,delete e._forceTick0}},9652:function(e){"use strict";e.exports=function(e){var t=["showexponent","showtickprefix","showticksuffix"].filter((function(t){return void 0!==e[t]}));if(t.every((function(n){return e[n]===e[t[0]]}))||1===t.length)return e[t[0]]}},6115:function(e,t,n){"use strict";var r=n(1828),i=n(7901).contrast,o=n(3838),a=n(9652),s=n(5501);function l(e,t){function n(n,i){return r.coerce(e,t,o.tickformatstops,n,i)}n("enabled")&&(n("dtickrange"),n("value"))}e.exports=function(e,t,n,c,u){u||(u={});var d=a(e);if(n("showticklabels")){var f=u.font||{},p=t.color,h=-1!==(t.ticklabelposition||"").indexOf("inside")?i(u.bgColor):p&&p!==o.color.dflt?p:f.color;if(r.coerceFont(n,"tickfont",{family:f.family,size:f.size,color:h}),u.noTicklabelstep||"multicategory"===c||"log"===c||n("ticklabelstep"),u.noAng||n("tickangle"),"category"!==c){var m=n("tickformat");s(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:l}),t.tickformatstops.length||delete t.tickformatstops,u.noExp||m||"date"===c||(n("showexponent",d),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}},8701:function(e,t,n){"use strict";var r=n(1828),i=n(3838);e.exports=function(e,t,n,o){var a=o.isMinor,s=a?e.minor||{}:e,l=a?t.minor:t,c=a?i.minor:i,u=a?"minor.":"",d=r.coerce2(s,l,c,"ticklen",a?.6*(t.ticklen||5):void 0),f=r.coerce2(s,l,c,"tickwidth",a?t.tickwidth||1:void 0),p=r.coerce2(s,l,c,"tickcolor",(a?t.tickcolor:void 0)||l.color);n(u+"ticks",!a&&o.outerTicks||d||f||p?"outside":"")||(delete l.ticklen,delete l.tickwidth,delete l.tickcolor)}},6218:function(e,t,n){"use strict";var r=n(6287),i=n(1828).isArrayOrTypedArray;e.exports=function(e,t,n,o,a){a||(a={});var s=a.isMinor,l=s?e.minor||{}:e,c=s?t.minor:t,u=s?"minor.":"";function d(e){var t=l[e];return void 0!==t?t:(c._template||{})[e]}var f=d("tick0"),p=d("dtick"),h=d("tickvals"),m=n(u+"tickmode",i(h)?"array":p?"linear":"auto");if("auto"===m||"sync"===m)n(u+"nticks");else if("linear"===m){var g=c.dtick=r.dtick(p,o);c.tick0=r.tick0(f,o,t.calendar,g)}else"multicategory"!==o&&(void 0===n(u+"tickvals")?c.tickmode="auto":s||n("ticktext"))}},6847:function(e,t,n){"use strict";var r=n(9898),i=n(3972),o=n(1828),a=n(1424),s=n(9298);e.exports=function(e,t,n,l){var c=e._fullLayout;if(0!==t.length){var u,d,f,p;l&&(u=l());var h=r.ease(n.easing);return e._transitionData._interruptCallbacks.push((function(){return window.cancelAnimationFrame(p),p=null,function(){for(var n={},r=0;r<t.length;r++){var o=t[r],a=o.plotinfo.xaxis,s=o.plotinfo.yaxis;o.xr0&&(n[a._name+".range"]=o.xr0.slice()),o.yr0&&(n[s._name+".range"]=o.yr0.slice())}return i.call("relayout",e,n).then((function(){for(var e=0;e<t.length;e++)m(t[e].plotinfo)}))}()})),d=Date.now(),p=window.requestAnimationFrame((function r(){f=Date.now();for(var o=Math.min(1,(f-d)/n.duration),a=h(o),s=0;s<t.length;s++)g(t[s],a);f-d>n.duration?(function(){for(var n={},r=0;r<t.length;r++){var o=t[r],a=o.plotinfo.xaxis,s=o.plotinfo.yaxis;o.xr1&&(n[a._name+".range"]=o.xr1.slice()),o.yr1&&(n[s._name+".range"]=o.yr1.slice())}u&&u(),i.call("relayout",e,n).then((function(){for(var e=0;e<t.length;e++)m(t[e].plotinfo)}))}(),p=window.cancelAnimationFrame(r)):p=window.requestAnimationFrame(r)})),Promise.resolve()}function m(e){var t=e.xaxis,n=e.yaxis;c._defs.select("#"+e.clipId+"> rect").call(a.setTranslate,0,0).call(a.setScale,1,1),e.plot.call(a.setTranslate,t._offset,n._offset).call(a.setScale,1,1);var r=e.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(a.setPointGroupScale,1,1),r.selectAll(".textpoint").call(a.setTextPointsScale,1,1),r.call(a.hideOutsideRangePoints,e)}function g(t,n){var r=t.plotinfo,i=r.xaxis,l=r.yaxis,c=i._length,u=l._length,d=!!t.xr1,f=!!t.yr1,p=[];if(d){var h=o.simpleMap(t.xr0,i.r2l),m=o.simpleMap(t.xr1,i.r2l),g=h[1]-h[0],v=m[1]-m[0];p[0]=(h[0]*(1-n)+n*m[0]-h[0])/(h[1]-h[0])*c,p[2]=c*(1-n+n*v/g),i.range[0]=i.l2r(h[0]*(1-n)+n*m[0]),i.range[1]=i.l2r(h[1]*(1-n)+n*m[1])}else p[0]=0,p[2]=c;if(f){var y=o.simpleMap(t.yr0,l.r2l),b=o.simpleMap(t.yr1,l.r2l),x=y[1]-y[0],w=b[1]-b[0];p[1]=(y[1]*(1-n)+n*b[1]-y[1])/(y[0]-y[1])*u,p[3]=u*(1-n+n*w/x),l.range[0]=i.l2r(y[0]*(1-n)+n*b[0]),l.range[1]=l.l2r(y[1]*(1-n)+n*b[1])}else p[1]=0,p[3]=u;s.drawOne(e,i,{skipTitle:!0}),s.drawOne(e,l,{skipTitle:!0}),s.redrawComponents(e,[i._id,l._id]);var _=d?c/p[2]:1,S=f?u/p[3]:1,C=d?p[0]:0,k=f?p[1]:0,M=d?p[0]/p[2]*c:0,T=f?p[1]/p[3]*u:0,A=i._offset-M,E=l._offset-T;r.clipRect.call(a.setTranslate,C,k).call(a.setScale,1/_,1/S),r.plot.call(a.setTranslate,A,E).call(a.setScale,_,S),a.setPointGroupScale(r.zoomScalePts,1/_,1/S),a.setTextPointsScale(r.zoomScaleTxt,1/_,1/S)}s.redrawComponents(e)}},951:function(e,t,n){"use strict";var r=n(3972).traceIs,i=n(4322);function o(e){return{v:"x",h:"y"}[e.orientation||"v"]}function a(e,t){var n=o(e),i=r(e,"box-violin"),a=r(e._fullInput||{},"candlestick");return i&&!a&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}e.exports=function(e,t,n,s){n("autotypenumbers",s.autotypenumbersDflt),"-"===n("type",(s.splomStash||{}).type)&&(function(e,t){if("-"===e.type){var n,s=e._id,l=s.charAt(0);-1!==s.indexOf("scene")&&(s=l);var c=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if("splom"===i.type&&i._length>0&&(i["_"+n+"axes"]||{})[t])return i;if((i[n+"axis"]||n)===t){if(a(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(t,s,l);if(c)if("histogram"!==c.type||l!=={v:"y",h:"x"}[c.orientation||"v"]){var u=l+"calendar",d=c[u],f={noMultiCategory:!r(c,"cartesian")||r(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(f.noMultiCategory=!0),f.autotypenumbers=e.autotypenumbers,a(c,l)){var p=o(c),h=[];for(n=0;n<t.length;n++){var m=t[n];r(m,"box-violin")&&(m[l+"axis"]||l)===s&&(void 0!==m[p]?h.push(m[p][0]):void 0!==m.name?h.push(m.name):h.push("text"),m[u]!==d&&(d=void 0))}e.type=i(h,d,f)}else if("splom"===c.type){var g=c.dimensions[c._axesDim[s]];g.visible&&(e.type=i(g.values,d,f))}else e.type=i(c[l]||[c[l+"0"]],d,f)}else e.type="linear"}}(t,s.data),"-"===t.type?t.type="linear":e.type=t.type)}},1137:function(e,t,n){"use strict";var r=n(3972),i=n(1828);function o(e,t,n){var r,o,a,s=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return o=i.nestedProperty(r,t.prop).get(),(a=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==o&&(s=!0),a[t.prop]=o,{changed:s,value:o}}function a(e,t){var n=[],r=t[0],o={};if("string"==typeof r)o[r]=t[1];else{if(!i.isPlainObject(r))return n;o=r}return l(o,(function(e,t,r){n.push({type:"layout",prop:e,value:r})}),"",0),n}function s(e,t){var n,r,o,a,s=[];if(r=t[0],o=t[1],n=t[2],a={},"string"==typeof r)a[r]=o;else{if(!i.isPlainObject(r))return s;a=r,void 0===n&&(n=o)}return void 0===n&&(n=null),l(a,(function(t,r,i){var o,a;if(Array.isArray(i)){a=i.slice();var l=Math.min(a.length,e.data.length);n&&(l=Math.min(l,n.length)),o=[];for(var c=0;c<l;c++)o[c]=n?n[c]:c}else a=i,o=n?n.slice():null;if(null===o)Array.isArray(a)&&(a=a[0]);else if(Array.isArray(o)){if(!Array.isArray(a)){var u=a;a=[];for(var d=0;d<o.length;d++)a[d]=u}a.length=Math.min(o.length,a.length)}s.push({type:"data",prop:t,traces:o,value:a})}),"",0),s}function l(e,t,n,r){Object.keys(e).forEach((function(o){var a=e[o];if("_"!==o[0]){var s=n+(r>0?".":"")+o;i.isPlainObject(a)?l(a,t,s,r+1):t(s,o,a)}}))}t.manageCommandObserver=function(e,n,r,a){var s={},l=!0;n&&n._commandObserver&&(s=n._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=t.hasSimpleAPICommandBindings(e,r,s.lookupTable);if(n&&n._commandObserver){if(c)return s;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,s}if(c){o(e,c,s.cache),s.check=function(){if(l){var t=o(e,c,s.cache);return t.changed&&a&&void 0!==s.lookupTable[t.value]&&(s.disable(),Promise.resolve(a({value:t.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[t.value]})).then(s.enable,s.enable)),t.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<u.length;d++)e._internalOn(u[d],s.check);s.remove=function(){for(var t=0;t<u.length;t++)e._removeInternalListener(u[t],s.check)}}else i.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},n&&(n._commandObserver=s),s},t.hasSimpleAPICommandBindings=function(e,n,r){var i,o,a=n.length;for(i=0;i<a;i++){var s,l=n[i],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var d=t.computeAPICommandBindings(e,c,u);if(1!==d.length)return!1;if(o){if((s=d[0]).type!==o.type)return!1;if(s.prop!==o.prop)return!1;if(Array.isArray(o.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var f=0;f<o.traces.length;f++)if(o.traces[f]!==s.traces[f])return!1}else if(s.prop!==o.prop)return!1}else o=d[0],Array.isArray(o.traces)&&o.traces.sort();var p=(s=d[0]).value;if(Array.isArray(p)){if(1!==p.length)return!1;p=p[0]}r&&(r[p]=i)}return o},t.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var o=r.apiMethodRegistry[t],a=[e];Array.isArray(n)||(n=[]);for(var s=0;s<n.length;s++)a.push(n[s]);return o.apply(null,a).catch((function(e){return i.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)}))},t.computeAPICommandBindings=function(e,t,n){var r;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=a(0,n);break;case"update":r=s(e,[n[0],n[2]]).concat(a(0,[n[1]]));break;case"animate":r=function(e,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}(0,n);break;default:r=[]}return r}},7670:function(e,t,n){"use strict";var r=n(1426).extendFlat;t.Y=function(e,t){t=t||{};var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=(e.name&&e.name,e.trace,t.description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(i.row={valType:"integer",min:0,dflt:0,editType:e.editType},i.column={valType:"integer",min:0,dflt:0,editType:e.editType}),i},t.c=function(e,t,n,r){var i=r&&r.x||[0,1],o=r&&r.y||[0,1],a=t.grid;if(a){var s=n("domain.column");void 0!==s&&(s<a.columns?i=a._domains.x[s]:delete e.domain.column);var l=n("domain.row");void 0!==l&&(l<a.rows?o=a._domains.y[l]:delete e.domain.row)}var c=n("domain.x",i),u=n("domain.y",o);c[0]<c[1]||(e.domain.x=i.slice()),u[0]<u[1]||(e.domain.y=o.slice())}},1940:function(e){"use strict";e.exports=function(e){var t=e.editType,n=e.colorEditType;void 0===n&&(n=t);var r={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n},editType:t};return e.autoSize&&(r.size.dflt="auto"),e.autoColor&&(r.color.dflt="auto"),e.arrayOk&&(r.family.arrayOk=!0,r.size.arrayOk=!0,r.color.arrayOk=!0),r}},1391:function(e){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},7659:function(e,t,n){"use strict";var r=n(3972);n(5555).SUBPLOT_PATTERN,t.a0=function(e,t){var n,i=[],o=[];if(!(n="string"==typeof t?r.getModule(t).plot:"function"==typeof t?t:t.plot))return[i,e];for(var a=0;a<e.length;a++){var s=e[a],l=s[0].trace;!0===l.visible&&0!==l._length&&(l._module.plot===n?i.push(s):o.push(s))}return[i,o]}},3538:function(e){"use strict";function t(e,t){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=e[4*n+r]*t[n];return i}e.exports=function(e,n){return t(e.projection,t(e.view,t(e.model,[n[0],n[1],n[2],1])))}},820:function(e,t,n){"use strict";var r=n(1940),i=n(5594),o=n(2399),a=n(9241),s=n(3777),l=n(5025),c=n(1426).extendFlat,u=r({editType:"calc"});u.family.dflt='"Open Sans", verdana, arial, sans-serif',u.size.dflt=12,u.color.dflt=o.defaultLine,e.exports={font:u,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:c(l({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:a.newshape,activeshape:a.activeshape,newselection:s.newselection,activeselection:s.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:c({},i.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},5025:function(e){"use strict";e.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},4875:function(e,t,n){"use strict";var r=n(9898),i=n(4096).Dq,o=n(721).FF,a=n(2770),s=n(3972),l=n(6281),c=n(4467),u=n(1828),d=n(7901),f=n(606).BADNUM,p=n(1675),h=n(1873).clearOutline,m=n(1479),g=n(5594),v=n(1391),y=n(7659).a0,b=u.relinkPrivateKeys,x=u._,w=e.exports={};u.extendFlat(w,s),w.attributes=n(9012),w.attributes.type.values=w.allTypes,w.fontAttrs=n(1940),w.layoutAttributes=n(820),w.fontWeight="normal";var _=w.transformsRegistry,S=n(1137);w.executeAPICommand=S.executeAPICommand,w.computeAPICommandBindings=S.computeAPICommandBindings,w.manageCommandObserver=S.manageCommandObserver,w.hasSimpleAPICommandBindings=S.hasSimpleAPICommandBindings,w.redrawText=function(e){return e=u.getGraphDiv(e),new Promise((function(t){setTimeout((function(){e._fullLayout&&(s.getComponentMethod("annotations","draw")(e),s.getComponentMethod("legend","draw")(e),s.getComponentMethod("colorbar","draw")(e),t(w.previousPromises(e)))}),300)}))},w.resize=function(e){var t;e=u.getGraphDiv(e);var n=new Promise((function(n,r){e&&!u.isHidden(e)||r(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=n,e._redrawTimer=setTimeout((function(){if(!e.layout||e.layout.width&&e.layout.height||u.isHidden(e))n(e);else{delete e.layout.width,delete e.layout.height;var t=e.changed;e.autoplay=!0,s.call("relayout",e,{autosize:!0}).then((function(){e.changed=t,e._resolveResize===n&&(delete e._resolveResize,n(e))}))}}),100)}));return t&&t(n),n},w.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then((function(){e._promises=[]}))},w.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,n=u.ensureSingle(t._paper,"text","js-plot-link-container",(function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:d.defaultLine,"pointer-events":"all"}).each((function(){var e=r.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)}))})),i=n.node(),o={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(o["text-anchor"]="start",o.x=5):(o["text-anchor"]="end",o.x=t._paper.attr("width")-7),n.attr(o);var a=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),l=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",(function(){w.sendDataToCloud(e)}));else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}(e,a),s.text(a.text()&&l.text()?" - ":"")}},w.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var n=r.select(e).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return i.append("input").attr({type:"text",name:"data"}).node().value=w.graphJson(e,!1,"keepdata"),i.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var C=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],k=["year","month","dayMonth","dayMonthYear"];function M(e,t){var n=e._context.locale;n||(n="en-US");var r=!1,i={};function o(e){for(var n=!0,o=0;o<t.length;o++){var a=t[o];i[a]||(e[a]?i[a]=e[a]:n=!1)}n&&(r=!0)}for(var a=0;a<2;a++){for(var l=e._context.locales,c=0;c<2;c++){var u=(l[n]||{}).format;if(u&&(o(u),r))break;l=s.localeRegistry}var d=n.split("-")[0];if(r||d===n)break;n=d}return r||o(s.localeRegistry.en.format),i}function T(e,t){var n={_fullLayout:t},r="x"===e._id.charAt(0),i=e._mainAxis._anchorAxis,o="",a="",s="";if(i&&(s=i._mainAxis._id,o=r?e._id+s:s+e._id),!o||!t._plots[o]){o="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],d=r?e._id+u:u+e._id;a||(a=d);var f=p.getFromId(n,u);if(s&&f.overlaying===s){o=d;break}}}return o||a}function A(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],i=r._module||_[r.type];if(i&&i.makesData)return!0}return!1}function E(e,t,n,r){for(var i=e.transforms,o=[e],a=0;a<i.length;a++){var s=i[a],l=_[s.type];l&&l.transform&&(o=l.transform(o,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:a}))}return o}function P(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function R(e){var t=e.margin;if(!e._size){var n=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};n.w=Math.round(e.width)-n.l-n.r,n.h=Math.round(e.height)-n.t-n.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}w.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var a,l=e._fullLayout={},c=e.layout||{},d=e._fullData||[],f=e._fullData=[],p=e.data||[],m=e.calcdata||[],g=e._context||{};e._transitionData||w.createTransitionData(e),l._dfltTitle={plot:x(e,"Click to enter Plot title"),x:x(e,"Click to enter X axis title"),y:x(e,"Click to enter Y axis title"),colorbar:x(e,"Click to enter Colorscale title"),annotation:x(e,"new text")},l._traceWord=x(e,"trace");var v=M(e,C);if(l._mapboxAccessToken=g.mapboxAccessToken,r._initialAutoSizeIsDone){var y=r.width,_=r.height;w.supplyLayoutGlobalDefaults(c,l,v),c.width||(l.width=y),c.height||(l.height=_),w.sanitizeMargins(l)}else{w.supplyLayoutGlobalDefaults(c,l,v);var S=!c.width||!c.height,T=l.autosize,A=g.autosizable;S&&(T||A)?w.plotAutoSize(e,c,l):S&&w.sanitizeMargins(l),!T&&S&&(c.width=l.width,c.height=l.height)}l._d3locale=function(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(t){try{t=o(e).format(u.adjustFormat(t))}catch(e){return u.warnBadFormat(t),u.noFormat}return t},timeFormat:i(e).utcFormat}}(v,l.separators),l._extraFormat=M(e,k),l._initialAutoSizeIsDone=!0,l._dataLength=p.length,l._modules=[],l._visibleModules=[],l._basePlotModules=[];var E=l._subplots=function(){var e,t,n=s.collectableSubplotTypes,r={};if(!n){n=[];var i=s.subplotsRegistry;for(var o in i){var a=i[o].attr;if(a&&(n.push(o),Array.isArray(a)))for(t=0;t<a.length;t++)u.pushUnique(n,a[t])}}for(e=0;e<n.length;e++)r[n[e]]=[];return r}(),P=l._splomAxes={x:{},y:{}},O=l._splomSubplots={};l._splomGridDflt={},l._scatterStackOpts={},l._firstScatter={},l._alignmentOpts={},l._colorAxes={},l._requestRangeslider={},l._traceUids=function(e,t){var n,r,i=t.length,o=[];for(n=0;n<e.length;n++){var a=e[n]._fullInput;a!==r&&o.push(a),r=a}var s=o.length,l=new Array(i),c={};function d(e,t){l[t]=e,c[e]=1}function f(e,t){if(e&&"string"==typeof e&&!c[e])return d(e,t),!0}for(n=0;n<i;n++){var p=t[n].uid;"number"==typeof p&&(p=String(p)),f(p,n)||n<s&&f(o[n].uid,n)||d(u.randstr(c),n)}return l}(d,p),l._globalTransforms=(e._context||{}).globalTransforms,w.supplyDataDefaults(p,f,c,l);var I=Object.keys(P.x),L=Object.keys(P.y);if(I.length>1&&L.length>1){for(s.getComponentMethod("grid","sizeDefaults")(c,l),a=0;a<I.length;a++)u.pushUnique(E.xaxis,I[a]);for(a=0;a<L.length;a++)u.pushUnique(E.yaxis,L[a]);for(var D in O)u.pushUnique(E.cartesian,D)}if(l._has=w._hasPlotType.bind(l),d.length===f.length)for(a=0;a<f.length;a++)b(f[a],d[a]);w.supplyLayoutModuleDefaults(c,l,f,e._transitionData);var N=l._visibleModules,F=[];for(a=0;a<N.length;a++){var z=N[a].crossTraceDefaults;z&&u.pushUnique(F,z)}for(a=0;a<F.length;a++)F[a](f,l);l._hasOnlyLargeSploms=1===l._basePlotModules.length&&"splom"===l._basePlotModules[0].name&&I.length>15&&L.length>15&&0===l.shapes.length&&0===l.images.length,w.linkSubplots(f,l,d,r),w.cleanPlot(f,l,d,r);var B=!(!r._has||!r._has("gl2d")),j=!(!l._has||!l._has("gl2d")),Z=!(!r._has||!r._has("cartesian"))||B,H=!(!l._has||!l._has("cartesian"))||j;Z&&!H?r._bgLayer.remove():H&&!Z&&(l._shouldCreateBgLayer=!0),r._zoomlayer&&!e._dragging&&h({_fullLayout:r}),function(e,t){var n,r=[];t.meta&&(n=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var i=0;i<e.length;i++){var o=e[i];o.meta?r[o.index]=o._meta={meta:o.meta}:t.meta&&(o._meta={meta:t.meta}),t.meta&&(o._meta.layout={meta:t.meta})}r.length&&(n||(n=t._meta={}),n.data=r)}(f,l),b(l,r),s.getComponentMethod("colorscale","crossTraceDefaults")(f,l),l._preGUI||(l._preGUI={}),l._tracePreGUI||(l._tracePreGUI={});var U,V=l._tracePreGUI,G={};for(U in V)G[U]="old";for(a=0;a<f.length;a++)G[U=f[a]._fullInput.uid]||(V[U]={}),G[U]="new";for(U in G)"old"===G[U]&&delete V[U];R(l),s.getComponentMethod("rangeslider","makeData")(l),n||m.length!==f.length||w.supplyDefaultsUpdateCalc(m,f)}},w.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=(e[n]||[])[0];if(i&&i.trace){var o=i.trace;if(o._hasCalcTransform){var a,s,l,c=o._arrayAttrs;for(a=0;a<c.length;a++)s=c[a],l=u.nestedProperty(o,s).get().slice(),u.nestedProperty(r,s).set(l)}i.trace=r}}},w.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},w._hasPlotType=function(e){var t,n=this._basePlotModules||[];for(t=0;t<n.length;t++)if(n[t].name===e)return!0;var r=this._modules||[];for(t=0;t<r.length;t++){var i=r[t].name;if(i===e)return!0;var o=s.modules[i];if(o&&o.categories[e])return!0}return!1},w.cleanPlot=function(e,t,n,r){var i,o,a=r._basePlotModules||[];for(i=0;i<a.length;i++){var s=a[i];s.clean&&s.clean(e,t,n,r)}var l=r._has&&r._has("gl"),c=t._has&&t._has("gl");l&&!c&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var u=!!r._infolayer;e:for(i=0;i<n.length;i++){var d=n[i].uid;for(o=0;o<e.length;o++)if(d===e[o].uid)continue e;u&&r._infolayer.select(".cb"+d).remove()}},w.linkSubplots=function(e,t,n,r){var i,o,a=r._plots||{},l=t._plots={},c=t._subplots,d={_fullData:e,_fullLayout:t},f=c.cartesian.concat(c.gl2d||[]);for(i=0;i<f.length;i++){var h,m=f[i],g=a[m],v=p.getFromId(d,m,"x"),y=p.getFromId(d,m,"y");for(g?h=l[m]=g:(h=l[m]={}).id=m,v._counterAxes.push(y._id),y._counterAxes.push(v._id),v._subplotsWith.push(m),y._subplotsWith.push(m),h.xaxis=v,h.yaxis=y,h._hasClipOnAxisFalse=!1,o=0;o<e.length;o++){var b=e[o];if(b.xaxis===h.xaxis._id&&b.yaxis===h.yaxis._id&&!1===b.cliponaxis){h._hasClipOnAxisFalse=!0;break}}}var x,w=p.list(d,null,!0);for(i=0;i<w.length;i++){var _=null;(x=w[i]).overlaying&&(_=p.getFromId(d,x.overlaying))&&_.overlaying&&(x.overlaying=!1,_=null),x._mainAxis=_||x,_&&(x.domain=_.domain.slice()),x._anchorAxis="free"===x.anchor?null:p.getFromId(d,x.anchor)}for(i=0;i<w.length;i++)if((x=w[i])._counterAxes.sort(p.idSort),x._subplotsWith.sort(u.subplotSort),x._mainSubplot=T(x,t),x._counterAxes.length&&(x.spikemode&&-1!==x.spikemode.indexOf("across")||x.automargin&&x.mirror&&"free"!==x.anchor||s.getComponentMethod("rangeslider","isVisible")(x))){var S=1,C=0;for(o=0;o<x._counterAxes.length;o++){var k=p.getFromId(d,x._counterAxes[o]);S=Math.min(S,k.domain[0]),C=Math.max(C,k.domain[1])}S<C&&(x._counterDomainMin=S,x._counterDomainMax=C)}},w.clearExpandedTraceDefaultColors=function(e){var t,n,r;for(n=[],(t=e._module._colorAttrs)||(e._module._colorAttrs=t=[],l.crawl(e._module.attributes,(function(e,r,i,o){n[o]=r,n.length=o+1,"color"===e.valType&&void 0===e.dflt&&t.push(n.join("."))}))),r=0;r<t.length;r++)u.nestedProperty(e,"_input."+t[r]).get()||u.nestedProperty(e,t[r]).set(null)},w.supplyDataDefaults=function(e,t,n,r){var i,o,a,l=r._modules,d=r._visibleModules,f=r._basePlotModules,p=0,h=0;function m(e){t.push(e);var n=e._module;n&&(u.pushUnique(l,n),!0===e.visible&&u.pushUnique(d,n),u.pushUnique(f,e._module.basePlotModule),p++,!1!==e._input.visible&&h++)}r._transformModules=[];var g={},v=[],y=(n.template||{}).data||{},x=c.traceTemplater(y);for(i=0;i<e.length;i++){if(a=e[i],(o=x.newTrace(a)).uid=r._traceUids[i],w.supplyTraceDefaults(a,o,h,r,i),o.index=i,o._input=a,o._expandedIndex=p,o.transforms&&o.transforms.length)for(var _=!1!==a.visible&&!1===o.visible,S=E(o,t,n,r),C=0;C<S.length;C++){var k=S[C],M={_template:o._template,type:o.type,uid:o.uid+C};_&&!1===k.visible&&delete k.visible,w.supplyTraceDefaults(k,M,p,r,i),b(M,k),M.index=i,M._input=a,M._fullInput=o,M._expandedIndex=p,M._expandedInput=k,m(M)}else o._fullInput=o,o._expandedInput=o,m(o);s.traceIs(o,"carpetAxis")&&(g[o.carpet]=o),s.traceIs(o,"carpetDependent")&&v.push(i)}for(i=0;i<v.length;i++)if((o=t[v[i]]).visible){var T=g[o.carpet];o._carpet=T,T&&T.visible?(o.xaxis=T.xaxis,o.yaxis=T.yaxis):o.visible=!1}},w.supplyAnimationDefaults=function(e){var t;e=e||{};var n={};function r(t,r){return u.coerce(e||{},n,g,t,r)}if(r("mode"),r("direction"),r("fromcurrent"),Array.isArray(e.frame))for(n.frame=[],t=0;t<e.frame.length;t++)n.frame[t]=w.supplyAnimationFrameDefaults(e.frame[t]||{});else n.frame=w.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(n.transition=[],t=0;t<e.transition.length;t++)n.transition[t]=w.supplyAnimationTransitionDefaults(e.transition[t]||{});else n.transition=w.supplyAnimationTransitionDefaults(e.transition||{});return n},w.supplyAnimationFrameDefaults=function(e){var t={};function n(n,r){return u.coerce(e||{},t,g.frame,n,r)}return n("duration"),n("redraw"),t},w.supplyAnimationTransitionDefaults=function(e){var t={};function n(n,r){return u.coerce(e||{},t,g.transition,n,r)}return n("duration"),n("easing"),t},w.supplyFrameDefaults=function(e){var t={};function n(n,r){return u.coerce(e,t,v,n,r)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),t},w.supplyTraceDefaults=function(e,t,n,r,i){var o,a=r.colorway||d.defaults,l=a[n%a.length];function c(n,r){return u.coerce(e,t,w.attributes,n,r)}var f=c("visible");c("type"),c("name",r._traceWord+" "+i),c("uirevision",r.uirevision);var p=w.getModule(t);if(t._module=p,p){var h=p.basePlotModule,m=h.attr,g=h.attributes;if(m&&g){var v=r._subplots,y="";if(f||"gl2d"!==h.name){if(Array.isArray(m))for(o=0;o<m.length;o++){var b=m[o],x=u.coerce(e,t,g,b);v[b]&&u.pushUnique(v[b],x),y+=x}else y=u.coerce(e,t,g,m);v[h.name]&&u.pushUnique(v[h.name],y)}}}return f&&(c("customdata"),c("ids"),c("meta"),s.traceIs(t,"showLegend")?(u.coerce(e,t,p.attributes.showlegend?p.attributes:w.attributes,"showlegend"),c("legendwidth"),c("legendgroup"),c("legendgrouptitle.text"),c("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,p&&p.supplyDefaults(e,t,l,r),s.traceIs(t,"noOpacity")||c("opacity"),s.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),s.traceIs(t,"noHover")||(t.hovertemplate||u.coerceHoverinfo(e,t,r),"parcats"!==t.type&&s.getComponentMethod("fx","supplyDefaults")(e,t,l,r)),p&&p.selectPoints&&c("selectedpoints"),w.supplyTransformDefaults(e,t,r)),t},w.hasMakesDataTransform=A,w.supplyTransformDefaults=function(e,t,n){if(t._length||A(e)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var o=e.transforms||[],a=r.concat(o),s=t.transforms=[],l=0;l<a.length;l++){var c,d=a[l],f=d.type,p=_[f],h=!(d._module&&d._module===p),m=p&&"function"==typeof p.transform;p||u.warn("Unrecognized transform type "+f+"."),p&&p.supplyDefaults&&(h||m)?((c=p.supplyDefaults(d,t,n,e)).type=f,c._module=p,u.pushUnique(i,p)):c=u.extendFlat({},d),s.push(c)}}},w.supplyLayoutGlobalDefaults=function(e,t,n){function r(n,r){return u.coerce(e,t,w.layoutAttributes,n,r)}var i=e.template;u.isPlainObject(i)&&(t.template=i,t._template=i.layout,t._dataTemplate=i.data),r("autotypenumbers");var o=u.coerceFont(r,"font"),a=o.size;u.coerceFont(r,"title.font",u.extendFlat({},o,{size:Math.round(1.4*a)})),r("title.text",t._dfltTitle.plot),r("title.xref"),r("title.yref"),r("title.x"),r("title.y"),r("title.xanchor"),r("title.yanchor"),r("title.pad.t"),r("title.pad.r"),r("title.pad.b"),r("title.pad.l"),r("uniformtext.mode")&&r("uniformtext.minsize"),r("autosize",!(e.width&&e.height)),r("width"),r("height"),r("minreducedwidth"),r("minreducedheight"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),e.width&&e.height&&w.sanitizeMargins(t),s.getComponentMethod("grid","sizeDefaults")(e,t),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision");var l=r("uirevision");r("editrevision",l),r("selectionrevision",l),s.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),s.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,r),s.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,r),r("meta"),u.isPlainObject(e.transition)&&(r("transition.duration"),r("transition.easing"),r("transition.ordering")),s.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),s.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,r),u.coerce(e,t,m,"scattermode")},w.plotAutoSize=function(e,t,n){var r,i,o=e._context||{},s=o.frameMargins,l=u.isPlotDiv(e);if(l&&e.emit("plotly_autosize"),o.fillFrame)r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else{var c=l?window.getComputedStyle(e):{};if(r=P(c.width)||P(c.maxWidth)||n.width,i=P(c.height)||P(c.maxHeight)||n.height,a(s)&&s>0){var d=1-2*s;r=Math.round(d*r),i=Math.round(d*i)}}var f=w.layoutAttributes.width.min,p=w.layoutAttributes.height.min;r<f&&(r=f),i<p&&(i=p);var h=!t.width&&Math.abs(n.width-r)>1,m=!t.height&&Math.abs(n.height-i)>1;(m||h)&&(h&&(n.width=r),m&&(n.height=i)),e._initialAutoSize||(e._initialAutoSize={width:r,height:i}),w.sanitizeMargins(n)},w.supplyLayoutModuleDefaults=function(e,t,n,r){var i,o,a,l=s.componentsRegistry,c=t._basePlotModules,d=s.subplotsRegistry.cartesian;for(i in l)(a=l[i]).includeBasePlot&&a.includeBasePlot(e,t);for(var f in c.length||c.push(d),t._has("cartesian")&&(s.getComponentMethod("grid","contentDefaults")(e,t),d.finalizeSubplots(e,t)),t._subplots)t._subplots[f].sort(u.subplotSort);for(o=0;o<c.length;o++)(a=c[o]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n);var p=t._modules;for(o=0;o<p.length;o++)(a=p[o]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n);var h=t._transformModules;for(o=0;o<h.length;o++)(a=h[o]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n,r);for(i in l)(a=l[i]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n)},w.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),u.clearThrottle(),u.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},w.style=function(e){var t,n=e._fullLayout._visibleModules,r=[];for(t=0;t<n.length;t++){var i=n[t];i.style&&u.pushUnique(r,i.style)}for(t=0;t<r.length;t++)r[t](e)},w.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,r=e.height,i=e.margin,o=n-(i.l+i.r),a=r-(i.t+i.b);o<0&&(t=(n-1)/(i.l+i.r),i.l=Math.floor(t*i.l),i.r=Math.floor(t*i.r)),a<0&&(t=(r-1)/(i.t+i.b),i.t=Math.floor(t*i.t),i.b=Math.floor(t*i.b))}},w.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},w.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1},w.autoMargin=function(e,t,n){var r=e._fullLayout,i=r.width,o=r.height,a=r.margin,s=r.minreducedwidth,l=r.minreducedheight,c=u.constrain(i-a.l-a.r,2,s),d=u.constrain(o-a.t-a.b,2,l),f=Math.max(0,i-c),p=Math.max(0,o-d),h=r._pushmargin,m=r._pushmarginIds;if(!1!==a.autoexpand){if(n){var g=n.pad;if(void 0===g&&(g=Math.min(12,a.l,a.r,a.t,a.b)),f){var v=(n.l+n.r)/f;v>1&&(n.l/=v,n.r/=v)}if(p){var y=(n.t+n.b)/p;y>1&&(n.t/=y,n.b/=y)}var b=void 0!==n.xl?n.xl:n.x,x=void 0!==n.xr?n.xr:n.x,_=void 0!==n.yt?n.yt:n.y,S=void 0!==n.yb?n.yb:n.y;h[t]={l:{val:b,size:n.l+g},r:{val:x,size:n.r+g},b:{val:S,size:n.b+g},t:{val:_,size:n.t+g}},m[t]=1}else delete h[t],delete m[t];if(!r._replotting)return w.doAutoMargin(e)}},w.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,r=t.height;t._size||(t._size={}),R(t);var i=t._size,o=t.margin,l=u.extendFlat({},i),c=o.l,d=o.r,f=o.t,h=o.b,m=t._pushmargin,g=t._pushmarginIds,v=t.minreducedwidth,y=t.minreducedheight;if(!1!==t.margin.autoexpand){for(var b in m)g[b]||delete m[b];for(var x in m.base={l:{val:0,size:c},r:{val:1,size:d},t:{val:1,size:f},b:{val:0,size:h}},m){var _=m[x].l||{},S=m[x].b||{},C=_.val,k=_.size,M=S.val,T=S.size;for(var A in m){if(a(k)&&m[A].r){var E=m[A].r.val,P=m[A].r.size;if(E>C){var O=(k*E+(P-n)*C)/(E-C),I=(P*(1-C)+(k-n)*(1-E))/(E-C);O+I>c+d&&(c=O,d=I)}}if(a(T)&&m[A].t){var L=m[A].t.val,D=m[A].t.size;if(L>M){var N=(T*L+(D-r)*M)/(L-M),F=(D*(1-M)+(T-r)*(1-L))/(L-M);N+F>h+f&&(h=N,f=F)}}}}}var z=u.constrain(n-o.l-o.r,2,v),B=u.constrain(r-o.t-o.b,2,y),j=Math.max(0,n-z),Z=Math.max(0,r-B);if(j){var H=(c+d)/j;H>1&&(c/=H,d/=H)}if(Z){var U=(h+f)/Z;U>1&&(h/=U,f/=U)}if(i.l=Math.round(c),i.r=Math.round(d),i.t=Math.round(f),i.b=Math.round(h),i.p=Math.round(o.pad),i.w=Math.round(n)-i.l-i.r,i.h=Math.round(r)-i.t-i.b,!t._replotting&&(w.didMarginChange(l,i)||function(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=p.list(e,"",!0);for(var n in t)if(t[n].autoshift||t[n].shift)return!0;return!1}(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var V=3*(1+Object.keys(g).length);if(t._redrawFromAutoMarginCount<V)return s.call("_doPlot",e);t._size=l,u.warn("Too many auto-margin redraws.")}!function(e){var t=p.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach((function(e){for(var n=0;n<t.length;n++){var r=t[n][e];r&&r()}}))}(e)};var O=["l","r","t","b","p","w","h"];function I(e,t,n){var r=!1,i=[w.previousPromises,function(){if(e._transitionData)return e._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(e._transitionData._interruptCallbacks)},n.prepareFn,w.rehover,w.reselect,function(){return e.emit("plotly_transitioning",[]),new Promise((function(i){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push((function(){r=!0})),n.redraw&&e._transitionData._interruptCallbacks.push((function(){return s.call("redraw",e)})),e._transitionData._interruptCallbacks.push((function(){e.emit("plotly_transitioninterrupted",[])}));var o=0,a=0;function l(){return o++,function(){var t;a++,r||a!==o||(t=i,e._transitionData&&(function(e){if(e)for(;e.length;)e.shift()}(e._transitionData._interruptCallbacks),Promise.resolve().then((function(){if(n.redraw)return s.call("redraw",e)})).then((function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])})).then(t)))}}n.runFn(l),setTimeout(l())}))}],o=u.syncOrAsync(i,e);return o&&o.then||(o=Promise.resolve()),o.then((function(){return e}))}w.didMarginChange=function(e,t){for(var n=0;n<O.length;n++){var r=O[n],i=e[r],o=t[r];if(!a(i)||Math.abs(o-i)>1)return!0}return!1},w.graphJson=function(e,t,n,r,i,o){(i&&t&&!e._fullData||i&&!t&&!e._fullLayout)&&w.supplyDefaults(e);var a=i?e._fullData:e.data,s=i?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function c(e,t){if("function"==typeof e)return t?"_function_":null;if(u.isPlainObject(e)){var r,i={};return Object.keys(e).sort().forEach((function(o){if(-1===["_","["].indexOf(o.charAt(0)))if("function"!=typeof e[o]){if("keepdata"===n){if("src"===o.substr(o.length-3))return}else if("keepstream"===n){if("string"==typeof(r=e[o+"src"])&&r.indexOf(":")>0&&!u.isPlainObject(e.stream))return}else if("keepall"!==n&&"string"==typeof(r=e[o+"src"])&&r.indexOf(":")>0)return;i[o]=c(e[o],t)}else t&&(i[o]="_function")})),i}return Array.isArray(e)?e.map((function(e){return c(e,t)})):u.isTypedArray(e)?u.simpleMap(e,u.identity):u.isJSDate(e)?u.ms2DateTimeLocal(+e):e}var d={data:(a||[]).map((function(e){var n=c(e);return t&&delete n.fit,n}))};if(!t&&(d.layout=c(s),i)){var f=s._size;d.layout.computed={margin:{b:f.b,l:f.l,r:f.r,t:f.t}}}return l&&(d.frames=c(l)),o&&(d.config=c(e._context,!0)),"object"===r?d:JSON.stringify(d)},w.modifyFrames=function(e,t){var n,r,i,o=e._transitionData._frames,a=e._transitionData._frameHash;for(n=0;n<t.length;n++)switch((r=t[n]).type){case"replace":i=r.value;var s=(o[r.index]||{}).name,l=i.name;o[r.index]=a[l]=i,l!==s&&(delete a[s],a[l]=i);break;case"insert":a[(i=r.value).name]=i,o.splice(r.index,0,i);break;case"delete":delete a[(i=o[r.index]).name],o.splice(r.index,1)}return Promise.resolve()},w.computeFrame=function(e,t){var n,r,i,o,a=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=a[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=a[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=w.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(o=u.traces.indexOf(i))&&(o=u.data.length,u.traces[o]=i),u.data[o]=w.extendTrace(u.data[o],s.data[n]))}return u},w.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(t[i.name]=i)}},w.extendObjectWithContainers=function(e,t,n){var r,i,o,a,s,l,c,d=u.extendDeepNoArrays({},t||{}),f=u.expandObjectPaths(d),p={};if(n&&n.length)for(o=0;o<n.length;o++)void 0===(i=(r=u.nestedProperty(f,n[o])).get())?u.nestedProperty(p,n[o]).set(null):(r.set(null),u.nestedProperty(p,n[o]).set(i));if(e=u.extendDeepNoArrays(e||{},f),n&&n.length)for(o=0;o<n.length;o++)if(l=u.nestedProperty(p,n[o]).get()){for(c=(s=u.nestedProperty(e,n[o])).get(),Array.isArray(c)||(c=[],s.set(c)),a=0;a<l.length;a++){var h=l[a];c[a]=null===h?null:w.extendObjectWithContainers(c[a],h)}s.set(c)}return e},w.dataArrayContainers=["transforms","dimensions"],w.layoutArrayContainers=s.layoutArrayContainers,w.extendTrace=function(e,t){return w.extendObjectWithContainers(e,t,w.dataArrayContainers)},w.extendLayout=function(e,t){return w.extendObjectWithContainers(e,t,w.layoutArrayContainers)},w.transition=function(e,t,n,r,i,o){var a={redraw:i.redraw},s={},l=[];return a.prepareFn=function(){for(var i=Array.isArray(t)?t.length:0,o=r.slice(0,i),a=0;a<o.length;a++){var c=o[a],d=e._fullData[c]._module;if(d){if(d.animatable){var f=d.basePlotModule.name;s[f]||(s[f]=[]),s[f].push(c)}e.data[o[a]]=w.extendTrace(e.data[o[a]],t[a])}}var p=u.expandObjectPaths(u.extendDeepNoArrays({},n)),h=/^[xy]axis[0-9]*$/;for(var m in p)h.test(m)&&delete p[m].range;w.extendLayout(e.layout,p),delete e.calcdata,w.supplyDefaults(e),w.doCalcdata(e);var g=u.expandObjectPaths(n);if(g){var v=e._fullLayout._plots;for(var y in v){var b=v[y],x=b.xaxis,_=b.yaxis,S=x.range.slice(),C=_.range.slice(),k=null,M=null,T=null,A=null;Array.isArray(g[x._name+".range"])?k=g[x._name+".range"].slice():Array.isArray((g[x._name]||{}).range)&&(k=g[x._name].range.slice()),Array.isArray(g[_._name+".range"])?M=g[_._name+".range"].slice():Array.isArray((g[_._name]||{}).range)&&(M=g[_._name].range.slice()),S&&k&&(x.r2l(S[0])!==x.r2l(k[0])||x.r2l(S[1])!==x.r2l(k[1]))&&(T={xr0:S,xr1:k}),C&&M&&(_.r2l(C[0])!==_.r2l(M[0])||_.r2l(C[1])!==_.r2l(M[1]))&&(A={yr0:C,yr1:M}),(T||A)&&l.push(u.extendFlat({plotinfo:b},T,A))}}return Promise.resolve()},a.runFn=function(t){var r,i,a=e._fullLayout._basePlotModules,c=l.length;if(n)for(i=0;i<a.length;i++)a[i].transitionAxes&&a[i].transitionAxes(e,l,o,t);for(var d in c?((r=u.extendFlat({},o)).duration=0,delete s.cartesian):r=o,s){var f=s[d];e._fullData[f[0]]._module.basePlotModule.plot(e,f,r,t)}},I(e,o,a)},w.transitionFromReact=function(e,t,n,r){var i=e._fullLayout,o=i.transition,a={},s=[];return a.prepareFn=function(){var e=i._plots;for(var o in a.redraw=!1,"some"===t.anim&&(a.redraw=!0),"some"===n.anim&&(a.redraw=!0),e){var l=e[o],c=l.xaxis,d=l.yaxis,f=r[c._name].range.slice(),p=r[d._name].range.slice(),h=c.range.slice(),m=d.range.slice();c.setScale(),d.setScale();var g=null,v=null;c.r2l(f[0])===c.r2l(h[0])&&c.r2l(f[1])===c.r2l(h[1])||(g={xr0:f,xr1:h}),d.r2l(p[0])===d.r2l(m[0])&&d.r2l(p[1])===d.r2l(m[1])||(v={yr0:p,yr1:m}),(g||v)&&s.push(u.extendFlat({plotinfo:l},g,v))}return Promise.resolve()},a.runFn=function(n){for(var r,i,a,l=e._fullData,c=e._fullLayout._basePlotModules,d=[],f=0;f<l.length;f++)d.push(f);function p(){if(e._fullLayout)for(var t=0;t<c.length;t++)c[t].transitionAxes&&c[t].transitionAxes(e,s,r,n)}function h(){if(e._fullLayout)for(var t=0;t<c.length;t++)c[t].plot(e,a,i,n)}s.length&&t.anim?"traces first"===o.ordering?(r=u.extendFlat({},o,{duration:0}),a=d,i=o,setTimeout(p,o.duration),h()):(r=o,a=null,i=u.extendFlat({},o,{duration:0}),setTimeout(h,r.duration),p()):s.length?(r=o,p()):t.anim&&(a=d,i=o,h())},I(e,o,a)},w.doCalcdata=function(e,t){var n,r,i,o,a=p.list(e),c=e._fullData,d=e._fullLayout,h=new Array(c.length),m=(e.calcdata||[]).slice();for(e.calcdata=h,d._numBoxes=0,d._numViolins=0,d._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,d._piecolormap={},d._sunburstcolormap={},d._treemapcolormap={},d._iciclecolormap={},d._funnelareacolormap={},i=0;i<c.length;i++)Array.isArray(t)&&-1===t.indexOf(i)&&(h[i]=m[i]);for(i=0;i<c.length;i++)(n=c[i])._arrayAttrs=l.findArrayAttributes(n),n._extremes={};var g=d._subplots.polar||[];for(i=0;i<g.length;i++)a.push(d[g[i]].radialaxis,d[g[i]].angularaxis);for(var v in d._colorAxes){var y=d[v];!1!==y.cauto&&(delete y.cmin,delete y.cmax)}var b=!1;function x(t){if(n=c[t],r=n._module,!0===n.visible&&n.transforms){if(r&&r.calc){var i=r.calc(e,n);i[0]&&i[0].t&&i[0].t._scene&&delete i[0].t._scene.dirty}for(o=0;o<n.transforms.length;o++){var a=n.transforms[o];(r=_[a.type])&&r.calcTransform&&(n._hasCalcTransform=!0,b=!0,r.calcTransform(e,n,a))}}}function w(t,i){if(n=c[t],!!(r=n._module).isContainer===i){var a=[];if(!0===n.visible&&0!==n._length){delete n._indexToPoints;var s=n.transforms||[];for(o=s.length-1;o>=0;o--)if(s[o].enabled){n._indexToPoints=s[o]._indexToPoints;break}r&&r.calc&&(a=r.calc(e,n))}Array.isArray(a)&&a[0]||(a=[{x:f,y:f}]),a[0].t||(a[0].t={}),a[0].trace=n,h[t]=a}}for(D(a,c,d),i=0;i<c.length;i++)w(i,!0);for(i=0;i<c.length;i++)x(i);for(b&&D(a,c,d),i=0;i<c.length;i++)w(i,!0);for(i=0;i<c.length;i++)w(i,!1);N(e);var S=function(e,t){var n,r,i,o,a,l=[];function c(e,n,r){var i=n._id.charAt(0);if("histogram2dcontour"===e){var o=n._counterAxes[0],a=p.getFromId(t,o),s="x"===i||"x"===o&&"category"===a.type,l="y"===i||"y"===o&&"category"===a.type;return function(e,t){return 0===e||0===t||s&&e===r[t].length-1||l&&t===r.length-1?-1:("y"===i?t:e)-1}}return function(e,t){return"y"===i?t:e}}var d={min:function(e){return u.aggNums(Math.min,null,e)},max:function(e){return u.aggNums(Math.max,null,e)},sum:function(e){return u.aggNums((function(e,t){return e+t}),null,e)},total:function(e){return u.aggNums((function(e,t){return e+t}),null,e)},mean:function(e){return u.mean(e)},median:function(e){return u.median(e)}};for(n=0;n<e.length;n++){var f=e[n];if("category"===f.type){var h=f.categoryorder.match(L);if(h){var m=h[1],g=h[2],v=f._id.charAt(0),y="x"===v,b=[];for(r=0;r<f._categories.length;r++)b.push([f._categories[r],[]]);for(r=0;r<f._traceIndices.length;r++){var x=f._traceIndices[r],w=t._fullData[x];if(!0===w.visible){var _=w.type;s.traceIs(w,"histogram")&&(delete w._xautoBinFinished,delete w._yautoBinFinished);var S="splom"===_,C="scattergl"===_,k=t.calcdata[x];for(i=0;i<k.length;i++){var M,T,A=k[i];if(S){var E=w._axesDim[f._id];if(!y){var P=w._diag[E][0];P&&(f=t._fullLayout[p.id2name(P)])}var R=A.trace.dimensions[E].values;for(o=0;o<R.length;o++)for(M=f._categoriesMap[R[o]],a=0;a<A.trace.dimensions.length;a++)if(a!==E){var O=A.trace.dimensions[a];b[M][1].push(O.values[o])}}else if(C){for(o=0;o<A.t.x.length;o++)y?(M=A.t.x[o],T=A.t.y[o]):(M=A.t.y[o],T=A.t.x[o]),b[M][1].push(T);A.t&&A.t._scene&&delete A.t._scene.dirty}else if(A.hasOwnProperty("z")){T=A.z;var I=c(w.type,f,T);for(o=0;o<T.length;o++)for(a=0;a<T[o].length;a++)(M=I(a,o))+1&&b[M][1].push(T[o][a])}else for(void 0===(M=A.p)&&(M=A[v]),void 0===(T=A.s)&&(T=A.v),void 0===T&&(T=y?A.y:A.x),Array.isArray(T)||(T=void 0===T?[]:[T]),o=0;o<T.length;o++)b[M][1].push(T[o])}}}f._categoriesValue=b;var D=[];for(r=0;r<b.length;r++)D.push([b[r][0],d[m](b[r][1])]);D.sort((function(e,t){return e[1]-t[1]})),f._categoriesAggregatedValue=D,f._initialCategories=D.map((function(e){return e[0]})),"descending"===g&&f._initialCategories.reverse(),l=l.concat(f.sortByInitialCategories())}}}return l}(a,e);if(S.length){for(d._numBoxes=0,d._numViolins=0,i=0;i<S.length;i++)w(S[i],!0);for(i=0;i<S.length;i++)w(S[i],!1);N(e)}s.getComponentMethod("fx","calc")(e),s.getComponentMethod("errorbars","calc")(e)};var L=/(total|sum|min|max|mean|median) (ascending|descending)/;function D(e,t,n){var r={};function i(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),r[e._id]=1}u.simpleMap(e,i);for(var o=n._axisMatchGroups||[],a=0;a<o.length;a++)for(var s in o[a])r[s]||i(n[p.id2name(s)])}function N(e){var t,n,r,i=e._fullLayout,o=i._visibleModules,a={};for(n=0;n<o.length;n++){var s=o[n],l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;a[c]?u.pushUnique(a[c],l):a[c]=[l]}}for(r in a){var d=a[r],f=i._subplots[r];if(Array.isArray(f))for(t=0;t<f.length;t++){var p=f[t],h="cartesian"===r?i._plots[p]:i[p];for(n=0;n<d.length;n++)d[n](e,h,p)}else for(n=0;n<d.length;n++)d[n](e)}}w.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},w.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},w.reselect=function(e){var t=e._fullLayout,n=(e.layout||{}).selections,r=t._previousSelections;t._previousSelections=n;var i=t._reselect||JSON.stringify(n)!==JSON.stringify(r);s.getComponentMethod("selections","reselect")(e,i)},w.generalUpdatePerTraceModule=function(e,t,n,r){var i,o=t.traceHash,a={};for(i=0;i<n.length;i++){var s=n[i],l=s[0].trace;l.visible&&(a[l.type]=a[l.type]||[],a[l.type].push(s))}for(var c in o)if(!a[c]){var d=o[c][0];d[0].trace.visible=!1,a[c]=[d]}for(var f in a){var p=a[f];p[0][0].trace._module.plot(e,t,u.filterVisible(p),r)}t.traceHash=a},w.plotBasePlot=function(e,t,n,r,i){var o=s.getModule(e),a=y(t.calcdata,o)[0];o.plot(t,a,r,i)},w.cleanBasePlot=function(e,t,n,r,i){var o=i._has&&i._has(e),a=n._has&&n._has(e);o&&!a&&i["_"+e+"layer"].selectAll("g.trace").remove()}},5386:function(e,t,n){"use strict";var r=n(1562);function i(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(n.length>0){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";t+="Finally, the template string has access to ",t=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return t}r.FORMAT_LINK,r.DATE_FORMAT_LINK,t.f=function(e,t){e=e||{},i(t=t||{});var n={valType:"string",dflt:"",editType:e.editType||"none"};return!1!==e.arrayOk&&(n.arrayOk=!0),n},t.s=function(e,t){e=e||{},i(t=t||{});var n={valType:"string",dflt:"",editType:e.editType||"calc"};return!1!==e.arrayOk&&(n.arrayOk=!0),n}},3972:function(e,t,n){"use strict";var r=n(7769),i=n(4213),o=n(5138),a=n(1965),s=n(4401).addStyleRule,l=n(1426),c=n(9012),u=n(820),d=l.extendFlat,f=l.extendDeepAll;function p(e){var n=e.name,i=e.categories,o=e.meta;if(t.modules[n])r.log("Type "+n+" already registered");else{t.subplotsRegistry[e.basePlotModule.name]||function(e){var n=e.name;if(t.subplotsRegistry[n])r.log("Plot type "+n+" already registered.");else for(var i in v(e),t.subplotsRegistry[n]=e,t.componentsRegistry)x(i,e.name)}(e.basePlotModule);for(var a={},l=0;l<i.length;l++)a[i[l]]=!0,t.allCategories[i[l]]=!0;for(var c in t.modules[n]={_module:e,categories:a},o&&Object.keys(o).length&&(t.modules[n].meta=o),t.allTypes.push(n),t.componentsRegistry)y(c,n);e.layoutAttributes&&d(t.traceLayoutAttributes,e.layoutAttributes);var u=e.basePlotModule,f=u.name;if("mapbox"===f){var p=u.constants.styleRules;for(var h in p)s(".js-plotly-plot .plotly .mapboxgl-"+h,p[h])}"geo"!==f&&"mapbox"!==f||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function h(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var n=e.name;for(var r in t.componentsRegistry[n]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&o(t.layoutArrayContainers,n),v(e)),t.modules)y(n,r);for(var i in t.subplotsRegistry)x(n,i);for(var a in t.transformsRegistry)b(n,a);e.schema&&e.schema.layout&&f(u,e.schema.layout)}function m(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var n="Transform module "+e.name,i="function"==typeof e.transform,o="function"==typeof e.calcTransform;if(!i&&!o)throw new Error(n+" is missing a *transform* or *calcTransform* method.");for(var s in i&&o&&r.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),a(e.attributes)||r.log(n+" registered without an *attributes* object."),"function"!=typeof e.supplyDefaults&&r.log(n+" registered without a *supplyDefaults* method."),t.transformsRegistry[e.name]=e,t.componentsRegistry)b(s,e.name)}function g(e){var n=e.name,r=n.split("-")[0],i=e.dictionary,o=e.format,a=i&&Object.keys(i).length,s=o&&Object.keys(o).length,l=t.localeRegistry,c=l[n];if(c||(l[n]=c={}),r!==n){var u=l[r];u||(l[r]=u={}),a&&u.dictionary===c.dictionary&&(u.dictionary=i),s&&u.format===c.format&&(u.format=o)}a&&(c.dictionary=i),s&&(c.format=o)}function v(e){if(e.layoutAttributes){var n=e.layoutAttributes._arrayAttrRegexps;if(n)for(var r=0;r<n.length;r++)o(t.layoutArrayRegexes,n[r])}}function y(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.traces){var i=r.traces[n];i&&f(t.modules[n]._module.attributes,i)}}function b(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.transforms){var i=r.transforms[n];i&&f(t.transformsRegistry[n].attributes,i)}}function x(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.subplots){var i=t.subplotsRegistry[n],o=i.layoutAttributes,a="subplot"===i.attr?i.name:i.attr;Array.isArray(a)&&(a=a[0]);var s=r.subplots[a];o&&s&&f(o,s)}}function w(e){return"object"==typeof e&&(e=e.type),e}t.modules={},t.allCategories={},t.allTypes=[],t.subplotsRegistry={},t.transformsRegistry={},t.componentsRegistry={},t.layoutArrayContainers=[],t.layoutArrayRegexes=[],t.traceLayoutAttributes={},t.localeRegistry={},t.apiMethodRegistry={},t.collectableSubplotTypes=null,t.register=function(e){if(t.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":p(r);break;case"transform":m(r);break;case"component":h(r);break;case"locale":g(r);break;case"apiMethod":var i=r.name;t.apiMethodRegistry[i]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},t.getModule=function(e){var n=t.modules[w(e)];return!!n&&n._module},t.traceIs=function(e,n){if("various"===(e=w(e)))return!1;var i=t.modules[e];return i||(e&&r.log("Unrecognized trace type "+e+"."),i=t.modules[c.type.dflt]),!!i.categories[n]},t.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],i=0;i<r.length;i++)r[i].type===t&&n.push(i);return n},t.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},t.getComponentMethod=function(e,n){var r=t.componentsRegistry[e];return r&&r[n]||i},t.call=function(){var e=arguments[0],n=[].slice.call(arguments,1);return t.apiMethodRegistry[e].apply(null,n)}},1914:function(e,t,n){"use strict";var r=n(3972),i=n(1828),o=i.extendFlat,a=i.extendDeep;function s(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}e.exports=function(e,t){var n,i,l=e.data,c=e.layout,u=a([],l),d=a({},c,s(t.tileClass)),f=e._context||{};if(t.width&&(d.width=t.width),t.height&&(d.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){d.annotations=[];var p=Object.keys(d);for(n=0;n<p.length;n++)i=p[n],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(d[p[n]].title={text:""});for(n=0;n<u.length;n++){var h=u[n];h.showscale=!1,h.marker&&(h.marker.showscale=!1),r.traceIs(h,"pie-like")&&(h.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)d.annotations.push(t.annotations[n]);var m=Object.keys(d).filter((function(e){return e.match(/^scene\d*$/)}));if(m.length){var g={};for("thumbnail"===t.tileClass&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<m.length;n++){var v=d[m[n]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),o(v.xaxis,g),o(v.yaxis,g),o(v.zaxis,g),v._scene=null}}var y=document.createElement("div");t.tileClass&&(y.className=t.tileClass);var b={gd:y,td:y,layout:d,data:u,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:f.mapboxAccessToken}};return"transparent"!==t.setBackground&&(b.config.setBackground=t.setBackground||"opaque"),b.gd.defaultLayout=s(t.tileClass),b}},7239:function(e,t,n){"use strict";var r=n(1828),i=n(403),o=n(2435),a=n(5095);e.exports=function(e,t){var n;return r.isPlainObject(e)||(n=r.getGraphDiv(e)),(t=t||{}).format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise((function(s,l){n&&n._snapshotInProgress&&l(new Error("Snapshotting already in progress.")),r.isIE()&&"svg"!==t.format&&l(new Error(a.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var c=i(e,t),u=t.filename||e.fn||"newplot";u+="."+t.format.replace("-","."),c.then((function(e){return n&&(n._snapshotInProgress=!1),o(e,u,t.format)})).then((function(e){s(e)})).catch((function(e){n&&(n._snapshotInProgress=!1),l(e)}))}))}},2435:function(e,t,n){"use strict";var r=n(1828),i=n(5095);e.exports=function(e,t,n){var o=document.createElement("a"),a="download"in o;return new Promise((function(s,l){var c,u;if(r.isIE())return c=i.createBlob(e,"svg"),window.navigator.msSaveBlob(c,t),c=null,s(t);if(a)return c=i.createBlob(e,n),u=i.createObjectURL(c),o.href=u,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),i.revokeObjectURL(u),c=null,s(t);if(r.isSafari()){var d="svg"===n?",":";base64,";return i.octetStream(d+encodeURIComponent(e)),s(t)}l(new Error("download error"))}))}},5095:function(e,t,n){"use strict";var r=n(3972);t.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},t.getRedrawFunc=function(e){return function(){r.getComponentMethod("colorbar","draw")(e)}},t.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},t.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var i=window.URL||window.webkitURL;t.createObjectURL=function(e){return i.createObjectURL(e)},t.revokeObjectURL=function(e){return i.revokeObjectURL(e)},t.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});var n=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(window.atob(e));return new window.Blob([n],{type:"image/"+t})},t.octetStream=function(e){document.location.href="data:application/octet-stream"+e},t.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,t.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},4511:function(e,t,n){"use strict";var r=n(5095),i={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:n(1914),toSVG:n(5900),svgToImg:n(942),toImage:n(6395),downloadImage:n(7239)};e.exports=i},942:function(e,t,n){"use strict";var r=n(1828),i=n(5398).EventEmitter,o=n(5095);e.exports=function(e){var t=e.emitter||new i,n=new Promise((function(i,a){var s=window.Image,l=e.svg,c=e.format||"png";if(r.isIE()&&"svg"!==c){var u=new Error(o.MSG_IE_BAD_FORMAT);return a(u),e.promise?n:t.emit("error",u)}var d,f,p=e.canvas,h=e.scale||1,m=e.width||300,g=e.height||150,v=h*m,y=h*g,b=p.getContext("2d",{willReadFrequently:!0}),x=new s;"svg"===c||r.isSafari()?f=o.encodeSVG(l):(d=o.createBlob(l,"svg"),f=o.createObjectURL(d)),p.width=v,p.height=y,x.onload=function(){var n;switch(d=null,o.revokeObjectURL(f),"svg"!==c&&b.drawImage(x,0,0,v,y),c){case"jpeg":n=p.toDataURL("image/jpeg");break;case"png":n=p.toDataURL("image/png");break;case"webp":n=p.toDataURL("image/webp");break;case"svg":n=f;break;default:var r="Image format is not jpeg, png, svg or webp.";if(a(new Error(r)),!e.promise)return t.emit("error",r)}i(n),e.promise||t.emit("success",n)},x.onerror=function(n){if(d=null,o.revokeObjectURL(f),a(n),!e.promise)return t.emit("error",n)},x.src=f}));return e.promise?n:t}},6395:function(e,t,n){"use strict";var r=n(5398).EventEmitter,i=n(3972),o=n(1828),a=n(5095),s=n(1914),l=n(5900),c=n(942);e.exports=function(e,t){var n=new r,u=s(e,{format:"png"}),d=u.gd;d.style.position="absolute",d.style.left="-5000px",document.body.appendChild(d);var f=a.getRedrawFunc(d);return i.call("_doPlot",d,u.data,u.layout,u.config).then(f).then((function(){var e=a.getDelay(d._fullLayout);setTimeout((function(){var e=l(d),r=document.createElement("canvas");r.id=o.randstr(),(n=c({format:t.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:r,emitter:n,svg:e})).clean=function(){d&&document.body.removeChild(d)}}),e)})).catch((function(e){n.emit("error",e)})),n}},5900:function(e,t,n){"use strict";var r=n(9898),i=n(1828),o=n(1424),a=n(7901),s=n(7922),l=/"/g,c="TOBESTRIPPED",u=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");e.exports=function(e,t,n){var d,f=e._fullLayout,p=f._paper,h=f._toppaper,m=f.width,g=f.height;p.insert("rect",":first-child").call(o.setRect,0,0,m,g).call(a.fill,f.paper_bgcolor);var v=f._basePlotModules||[];for(d=0;d<v.length;d++){var y=v[d];y.toSVG&&y.toSVG(e)}if(h){var b=h.node().childNodes,x=Array.prototype.slice.call(b);for(d=0;d<x.length;d++){var w=x[d];w.childNodes.length&&p.node().appendChild(w)}}f._draggers&&f._draggers.remove(),p.node().style.background="",p.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var e=r.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var t=this.style.fontFamily;t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(l,c))}else e.remove()})),p.selectAll(".gradient_filled,.pattern_filled").each((function(){var e=r.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(l,c));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&e.style("stroke",n.replace(l,c))})),"pdf"!==t&&"eps"!==t||p.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),p.node().setAttributeNS(s.xmlns,"xmlns",s.svg),p.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===t&&n&&(p.attr("width",n*m),p.attr("height",n*g),p.attr("viewBox","0 0 "+m+" "+g));var _=(new window.XMLSerializer).serializeToString(p.node());return _=(_=(_=function(e){var t=r.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,(function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":t.html(e).text()}));return t.remove(),n}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(u,"'"),i.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},5341:function(e,t,n){"use strict";var r=n(1828);e.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");var i=t.marker;if(i){r.mergeArray(i.opacity,e,"mo",!0),r.mergeArray(i.color,e,"mc");var o=i.line;o&&(r.mergeArray(o.color,e,"mlc"),r.mergeArrayCastPositive(o.width,e,"mlw"))}}},1486:function(e,t,n){"use strict";var r=n(2196),i=n(2663).axisHoverFormat,o=n(5386).f,a=n(5386).s,s=n(693),l=n(1940),c=n(7313),u=n(9952).u,d=n(1426).extendFlat,f=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),p=d({},r.marker.line.width,{dflt:0}),h=d({width:p,editType:"calc"},s("marker.line")),m=d({line:h,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:u});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:r.text,texttemplate:a({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:o({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:d({},f,{}),insidetextfont:d({},f,{}),outsidetextfont:d({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:d({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:m,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},2290:function(e,t,n){"use strict";var r=n(9298),i=n(2973),o=n(2869).hasColorscale,a=n(8803),s=n(5341),l=n(6279);e.exports=function(e,t){var n,c,u,d,f,p,h=r.getFromId(e,t.xaxis||"x"),m=r.getFromId(e,t.yaxis||"y"),g={msUTC:!(!t.base&&0!==t.base)};"h"===t.orientation?(n=h.makeCalcdata(t,"x",g),u=m.makeCalcdata(t,"y"),d=i(t,m,"y",u),f=!!t.yperiodalignment,p="y"):(n=m.makeCalcdata(t,"y",g),u=h.makeCalcdata(t,"x"),d=i(t,h,"x",u),f=!!t.xperiodalignment,p="x"),c=d.vals;for(var v=Math.min(c.length,n.length),y=new Array(v),b=0;b<v;b++)y[b]={p:c[b],s:n[b]},f&&(y[b].orig_p=u[b],y[b][p+"End"]=d.ends[b],y[b][p+"Start"]=d.starts[b]),t.ids&&(y[b].id=String(t.ids[b]));return o(t,"marker")&&a(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&a(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),s(y,t),l(y,t),y}},7313:function(e){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},1661:function(e,t,n){"use strict";var r=n(2770),i=n(1828).isArrayOrTypedArray,o=n(606).BADNUM,a=n(3972),s=n(9298),l=n(9082).getAxisGroup,c=n(1546);function u(e,t,n,a,u){if(a.length){var x,w,_,S;switch(function(e,t){var n,o;for(n=0;n<t.length;n++){var a,s=t[n],l=s[0].trace,c="funnel"===l.type?l._base:l.base,u="h"===l.orientation?l.xcalendar:l.ycalendar,d="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(i(c)){for(o=0;o<Math.min(c.length,s.length);o++)a=d(c[o],0,u),r(a)?(s[o].b=+a,s[o].hasB=1):s[o].b=0;for(;o<s.length;o++)s[o].b=0}else{a=d(c,0,u);var f=r(a);for(a=f?a:0,o=0;o<s.length;o++)s[o].b=a,f&&(s[o].hasB=1)}}}(n,a),u.mode){case"overlay":d(t,n,a,u);break;case"group":for(x=[],w=[],_=0;_<a.length;_++)void 0===(S=a[_])[0].trace.offset?w.push(S):x.push(S);w.length&&function(e,t,n,r,i){var a=new c(r,{posAxis:t,sepNegVal:!1,overlapNoMerge:!i.norm});(function(e,t,n,r){for(var i=e._fullLayout,o=n.positions,a=n.distinctPositions,s=n.minDiff,c=n.traces,u=c.length,d=o.length!==a.length,f=s*(1-r.gap),g=l(i,t._id)+c[0][0].trace.orientation,v=i._alignmentOpts[g]||{},y=0;y<u;y++){var b,x,w=c[y],_=w[0].trace,S=v[_.alignmentgroup]||{},C=Object.keys(S.offsetGroups||{}).length,k=(b=C?f/C:d?f/u:f)*(1-(r.groupgap||0));x=C?((2*_._offsetIndex+1-C)*b-k)/2:d?((2*y+1-u)*b-k)/2:-k/2;var M=w[0].t;M.barwidth=k,M.poffset=x,M.bargroupwidth=f,M.bardelta=s}n.binWidth=c[0][0].t.barwidth/100,p(n),h(t,n),m(t,n,d)})(e,t,a,i),function(e,t){for(var n=e.traces,r=0;r<n.length;r++){var i=n[r];if(void 0===i[0].trace.base)for(var a=new c([i],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),s=0;s<i.length;s++){var l=i[s];if(l.p!==o){var u=a.put(l.p,l.b+l.s);u&&(l.b=u)}}}}(a,t),i.norm?(v(a),y(n,a,i)):g(n,a)}(e,t,n,w,u),x.length&&d(t,n,x,u);break;case"stack":case"relative":for(x=[],w=[],_=0;_<a.length;_++)void 0===(S=a[_])[0].trace.base?w.push(S):x.push(S);w.length&&function(e,t,n,r,i){var a=new c(r,{posAxis:t,sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});f(t,a,i),function(e,t,n){var r,i,a,l,c,u,d=b(e),f=t.traces;for(l=0;l<f.length;l++)if("funnel"===(i=(r=f[l])[0].trace).type)for(c=0;c<r.length;c++)(u=r[c]).s!==o&&t.put(u.p,-.5*u.s);for(l=0;l<f.length;l++){a="funnel"===(i=(r=f[l])[0].trace).type;var p=[];for(c=0;c<r.length;c++)if((u=r[c]).s!==o){var h;h=a?u.s:u.s+u.b;var m=t.put(u.p,h),g=m+h;u.b=m,u[d]=g,n.norm||(p.push(g),u.hasB&&p.push(m))}n.norm||(i._extremes[e._id]=s.findExtremes(e,p,{tozero:!0,padded:!0}))}}(n,a,i);for(var l=0;l<r.length;l++)for(var u=r[l],d=0;d<u.length;d++){var p=u[d];p.s!==o&&p.b+p.s===a.get(p.p,p.s)&&(p._outmost=!0)}i.norm&&y(n,a,i)}(0,t,n,w,u),x.length&&d(t,n,x,u)}!function(e,t){var n,i,o,a=b(t),s={},l=1/0,c=-1/0;for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i++){var u=o[i].p;r(u)&&(l=Math.min(l,u),c=Math.max(c,u))}var d=1e4/(c-l),f=s.round=function(e){return String(Math.round(d*(e-l)))};for(n=0;n<e.length;n++){(o=e[n])[0].t.extents=s;var p=o[0].t.poffset,h=Array.isArray(p);for(i=0;i<o.length;i++){var m=o[i],g=m[a]-m.w/2;if(r(g)){var v=m[a]+m.w/2,y=f(m.p);s[y]?s[y]=[Math.min(g,s[y][0]),Math.max(v,s[y][1])]:s[y]=[g,v]}m.p0=m.p+(h?p[i]:p),m.p1=m.p0+m.w,m.s0=m.b,m.s1=m.s0+m.s}}}(a,t)}}function d(e,t,n,r){for(var i=0;i<n.length;i++){var o=n[i],a=new c([o],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});f(e,a,r),r.norm?(v(a),y(t,a,r)):g(t,a)}}function f(e,t,n){for(var r=t.minDiff,i=t.traces,o=r*(1-n.gap),a=o*(1-(n.groupgap||0)),s=-a/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=a,c.poffset=s,c.bargroupwidth=o,c.bardelta=r}t.binWidth=i[0][0].t.barwidth/100,p(t),h(e,t),m(e,t)}function p(e){var t,n,o=e.traces;for(t=0;t<o.length;t++){var a,s=o[t],l=s[0],c=l.trace,u=l.t,d=c._offset||c.offset,f=u.poffset;if(i(d)){for(a=Array.prototype.slice.call(d,0,s.length),n=0;n<a.length;n++)r(a[n])||(a[n]=f);for(n=a.length;n<s.length;n++)a.push(f);u.poffset=a}else void 0!==d&&(u.poffset=d);var p=c._width||c.width,h=u.barwidth;if(i(p)){var m=Array.prototype.slice.call(p,0,s.length);for(n=0;n<m.length;n++)r(m[n])||(m[n]=h);for(n=m.length;n<s.length;n++)m.push(h);if(u.barwidth=m,void 0===d){for(a=[],n=0;n<s.length;n++)a.push(f+(h-m[n])/2);u.poffset=a}}else void 0!==p&&(u.barwidth=p,void 0===d&&(u.poffset=f+(h-p)/2))}}function h(e,t){for(var n=t.traces,r=b(e),i=0;i<n.length;i++)for(var o=n[i],a=o[0].t,s=a.poffset,l=Array.isArray(s),c=a.barwidth,u=Array.isArray(c),d=0;d<o.length;d++){var f=o[d],p=f.w=u?c[d]:c;void 0===f.p&&(f.p=f[r],f["orig_"+r]=f[r]);var h=(l?s[d]:s)+p/2;f[r]=f.p+h}}function m(e,t,n){var r=t.traces,i=t.minDiff/2;s.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var o=0;o<r.length;o++){var a,l,c,u,d=r[o],f=d[0],p=f.trace,h=[];for(u=0;u<d.length;u++)l=(a=d[u]).p-i,c=a.p+i,h.push(l,c);if(p.width||p.offset){var m=f.t,g=m.poffset,v=m.barwidth,y=Array.isArray(g),b=Array.isArray(v);for(u=0;u<d.length;u++){a=d[u];var x=y?g[u]:g,w=b?v[u]:v;c=(l=a.p+x)+w,h.push(l,c)}}p._extremes[e._id]=s.findExtremes(e,h,{padded:!1})}}function g(e,t){for(var n=t.traces,r=b(e),i=0;i<n.length;i++){for(var o=n[i],a=o[0].trace,l="scatter"===a.type,c="v"===a.orientation,u=[],d=!1,f=0;f<o.length;f++){var p=o[f],h=l?0:p.b,m=l?c?p.y:p.x:h+p.s;p[r]=m,u.push(m),p.hasB&&u.push(h),p.hasB&&p.b||(d=!0)}a._extremes[e._id]=s.findExtremes(e,u,{tozero:d,padded:!0})}}function v(e){for(var t=e.traces,n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++){var a=r[i];a.s!==o&&e.put(a.p,a.b+a.s)}}function y(e,t,n){var i=t.traces,a=b(e),l="fraction"===n.norm?1:100,c=l/1e9,u=e.l2c(e.c2l(0)),d="stack"===n.mode?l:u;function f(t){return r(e.c2l(t))&&(t<u-c||t>d+c||!r(u))}for(var p=0;p<i.length;p++){for(var h=i[p],m=h[0].trace,g=[],v=!1,y=!1,x=0;x<h.length;x++){var w=h[x];if(w.s!==o){var _=Math.abs(l/t.get(w.p,w.s));w.b*=_,w.s*=_;var S=w.b,C=S+w.s;w[a]=C,g.push(C),y=y||f(C),w.hasB&&(g.push(S),y=y||f(S)),w.hasB&&w.b||(v=!0)}}m._extremes[e._id]=s.findExtremes(e,g,{tozero:v,padded:y})}}function b(e){return e._id.charAt(0)}e.exports={crossTraceCalc:function(e,t){for(var n=t.xaxis,r=t.yaxis,i=e._fullLayout,o=e._fullData,s=e.calcdata,l=[],c=[],d=0;d<o.length;d++){var f=o[d];if(!0===f.visible&&a.traceIs(f,"bar")&&f.xaxis===n._id&&f.yaxis===r._id&&("h"===f.orientation?l.push(s[d]):c.push(s[d]),f._computePh))for(var p=e.calcdata[d],h=0;h<p.length;h++)"function"==typeof p[h].ph0&&(p[h].ph0=p[h].ph0()),"function"==typeof p[h].ph1&&(p[h].ph1=p[h].ph1())}var m={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};u(e,n,r,c,m),u(e,r,n,l,m)},setGroupPositions:u}},769:function(e,t,n){"use strict";var r=n(1828),i=n(7901),o=n(3972),a=n(7513),s=n(3927),l=n(8340),c=n(6125),u=n(1486),d=r.coerceFont;function f(e,t,n,i,o,a){var s=!(!1===(a=a||{}).moduleHasSelected),l=!(!1===a.moduleHasUnselected),c=!(!1===a.moduleHasConstrain),u=!(!1===a.moduleHasCliponaxis),f=!(!1===a.moduleHasTextangle),p=!(!1===a.moduleHasInsideanchor),h=!!a.hasPathbar,m=Array.isArray(o)||"auto"===o,g=m||"inside"===o,v=m||"outside"===o;if(g||v){var y=d(i,"textfont",n.font),b=r.extendFlat({},y),x=!(e.textfont&&e.textfont.color);if(x&&delete b.color,d(i,"insidetextfont",b),h){var w=r.extendFlat({},y);x&&delete w.color,d(i,"pathbar.textfont",w)}v&&d(i,"outsidetextfont",y),s&&i("selected.textfont.color"),l&&i("unselected.textfont.color"),c&&i("constraintext"),u&&i("cliponaxis"),f&&i("textangle"),i("texttemplate")}g&&p&&i("insidetextanchor")}e.exports={supplyDefaults:function(e,t,n,c){function d(n,i){return r.coerce(e,t,u,n,i)}if(a(e,t,c,d)){s(e,t,c,d),d("xhoverformat"),d("yhoverformat"),d("orientation",t.x&&!t.y?"h":"v"),d("base"),d("offset"),d("width"),d("text"),d("hovertext"),d("hovertemplate");var p=d("textposition");f(e,0,c,d,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l(e,t,d,n,c);var h=(t.marker.line||{}).color,m=o.getComponentMethod("errorbars","supplyDefaults");m(e,t,h||i.defaultLine,{axis:"y"}),m(e,t,h||i.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,d)}else t.visible=!1},crossTraceDefaults:function(e,t){var n,i;function o(e){return r.coerce(i._input,i,u,e)}if("group"===t.barmode)for(var a=0;a<e.length;a++)"bar"===(i=e[a]).type&&(n=i._input,c(n,i,t,o))},handleText:f}},8065:function(e){"use strict";e.exports=function(e,t,n){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===n.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},9383:function(e,t,n){"use strict";var r=n(2770),i=n(4267),o=n(1828).isArrayOrTypedArray;t.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},t.coerceNumber=function(e,t,n){if(r(t)){t=+t;var i=e.min,o=e.max;if(!(void 0!==i&&t<i||void 0!==o&&t>o))return t}return void 0!==n?n:e.dflt},t.coerceColor=function(e,t,n){return i(t).isValid()?t:void 0!==n?n:e.dflt},t.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},t.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:o(e.marker.line.width)?0:e.marker.line.width}},5423:function(e,t,n){"use strict";var r=n(211),i=n(3972),o=n(7901),a=n(1828).fillText,s=n(9383).getLineWidth,l=n(9298).hoverLabelText,c=n(606).BADNUM;function u(e,t,n,i,o){var s,u,d,f,p,h,m,g=e.cd,v=g[0].trace,y=g[0].t,b="closest"===i,x="waterfall"===v.type,w=e.maxHoverDistance,_=e.maxSpikeDistance;"h"===v.orientation?(s=n,u=t,d="y",f="x",p=L,h=O):(s=t,u=n,d="x",f="y",h=L,p=O);var S=v[d+"period"],C=b||S;function k(e){return T(e,-1)}function M(e){return T(e,1)}function T(e,t){var n=e.w;return e[d]+t*n/2}function A(e){return e[d+"End"]-e[d+"Start"]}var E=b?k:S?function(e){return e.p-A(e)/2}:function(e){return Math.min(k(e),e.p-y.bardelta/2)},P=b?M:S?function(e){return e.p+A(e)/2}:function(e){return Math.max(M(e),e.p+y.bardelta/2)};function R(e,t,n){return o.finiteRange&&(n=0),r.inbox(e-s,t-s,n+Math.min(1,Math.abs(t-e)/m)-1)}function O(e){return R(E(e),P(e),w)}function I(e){var t=e[f];if(x){var n=Math.abs(e.rawS)||0;u>0?t+=n:u<0&&(t-=n)}return t}function L(e){var t=u,n=e.b,i=I(e);return r.inbox(n-t,i-t,w+(i-t)/(i-n)-1)}var D=e[d+"a"],N=e[f+"a"];m=Math.abs(D.r2c(D.range[1])-D.r2c(D.range[0]));var F=r.getDistanceFunction(i,p,h,(function(e){return(p(e)+h(e))/2}));if(r.getClosest(g,F,e),!1!==e.index&&g[e.index].p!==c){C||(E=function(e){return Math.min(k(e),e.p-y.bargroupwidth/2)},P=function(e){return Math.max(M(e),e.p+y.bargroupwidth/2)});var z=g[e.index],B=v.base?z.b+z.s:z.s;e[f+"0"]=e[f+"1"]=N.c2p(z[f],!0),e[f+"LabelVal"]=B;var j=y.extents[y.extents.round(z.p)];e[d+"0"]=D.c2p(b?E(z):j[0],!0),e[d+"1"]=D.c2p(b?P(z):j[1],!0);var Z=void 0!==z.orig_p;return e[d+"LabelVal"]=Z?z.orig_p:z.p,e.labelLabel=l(D,e[d+"LabelVal"],v[d+"hoverformat"]),e.valueLabel=l(N,e[f+"LabelVal"],v[f+"hoverformat"]),e.baseLabel=l(N,z.b,v[f+"hoverformat"]),e.spikeDistance=(function(e){var t=u,n=e.b,i=I(e);return r.inbox(n-t,i-t,_+(i-t)/(i-n)-1)}(z)+function(e){return R(k(e),M(e),_)}(z))/2,e[d+"Spike"]=D.c2p(z.p,!0),a(z,v,e),e.hovertemplate=v.hovertemplate,e}}function d(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,i=s(e,t);return o.opacity(n)?n:o.opacity(r)&&i?r:void 0}e.exports={hoverPoints:function(e,t,n,r,o){var a=u(e,t,n,r,o);if(a){var s=a.cd,l=s[0].trace,c=s[a.index];return a.color=d(l,c),i.getComponentMethod("errorbars","hoverInfo")(c,l,a),[a]}},hoverOnBars:u,getTraceColor:d}},822:function(e,t,n){"use strict";e.exports={attributes:n(1486),layoutAttributes:n(3641),supplyDefaults:n(769).supplyDefaults,crossTraceDefaults:n(769).crossTraceDefaults,supplyLayoutDefaults:n(3957),calc:n(2290),crossTraceCalc:n(1661).crossTraceCalc,colorbar:n(4898),arraysToCalcdata:n(5341),plot:n(7295).plot,style:n(6688).style,styleOnSelect:n(6688).styleOnSelect,hoverPoints:n(5423).hoverPoints,eventData:n(8065),selectPoints:n(1974),moduleType:"trace",name:"bar",basePlotModule:n(3612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},3641:function(e){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},3957:function(e,t,n){"use strict";var r=n(3972),i=n(9298),o=n(1828),a=n(3641);e.exports=function(e,t,n){function s(n,r){return o.coerce(e,t,a,n,r)}for(var l=!1,c=!1,u=!1,d={},f=s("barmode"),p=0;p<n.length;p++){var h=n[p];if(r.traceIs(h,"bar")&&h.visible){if(l=!0,"group"===f){var m=h.xaxis+h.yaxis;d[m]&&(u=!0),d[m]=!0}h.visible&&"histogram"===h.type&&"category"!==i.getFromId({_fullLayout:t},h["v"===h.orientation?"xaxis":"yaxis"]).type&&(c=!0)}}l?("overlay"!==f&&s("barnorm"),s("bargap",c&&!u?0:.2),s("bargroupgap")):delete t.barmode}},7295:function(e,t,n){"use strict";var r=n(9898),i=n(2770),o=n(1828),a=n(3893),s=n(7901),l=n(1424),c=n(3972),u=n(9298).tickText,d=n(2597),f=d.recordMinTextSize,p=d.clearMinTextSize,h=n(6688),m=n(9383),g=n(7313),v=n(1486),y=v.text,b=v.textposition,x=n(3469).appendArrayPointValue,w=g.TEXTPAD;function _(e){return e.id}function S(e){if(e.ids)return _}function C(e,t){return e<t?1:-1}function k(e,t,n,r){var i;return!t.uniformtext.mode&&M(n)?(r&&(i=r()),e.transition().duration(n.duration).ease(n.easing).each("end",(function(){i&&i()})).each("interrupt",(function(){i&&i()}))):e}function M(e){return e&&e.duration>0}function T(e){return"auto"===e?0:e}function A(e,t){var n=Math.PI/180*t,r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));return{x:e.width*i+e.height*r,y:e.width*r+e.height*i}}function E(e,t,n,r,i,o){var a=!!o.isHorizontal,s=!!o.constrained,l=o.angle||0,c=o.anchor||"end",u="end"===c,d="start"===c,f=((o.leftToRight||0)+1)/2,p=1-f,h=i.width,m=i.height,g=Math.abs(t-e),v=Math.abs(r-n),y=g>2*w&&v>2*w?w:0;g-=2*y,v-=2*y;var b=T(l);"auto"!==l||h<=g&&m<=v||!(h>g||m>v)||(h>v||m>g)&&h<m==g<v||(b+=90);var x=A(i,b),_=1;s&&(_=Math.min(1,g/x.x,v/x.y));var S=i.left*p+i.right*f,k=(i.top+i.bottom)/2,M=(e+w)*p+(t-w)*f,E=(n+r)/2,P=0,R=0;if(d||u){var O=(a?x.x:x.y)/2,I=a?C(e,t):C(n,r);a?d?(M=e+I*y,P=-I*O):(M=t-I*y,P=I*O):d?(E=n+I*y,R=-I*O):(E=r-I*y,R=I*O)}return{textX:S,textY:k,targetX:M,targetY:E,anchorX:P,anchorY:R,scale:_,rotate:b}}e.exports={plot:function(e,t,n,d,g,v){var _=t.xaxis,P=t.yaxis,R=e._fullLayout;g||(g={mode:R.barmode,norm:R.barmode,gap:R.bargap,groupgap:R.bargroupgap},p("bar",R));var O=o.makeTraceGroups(d,n,"trace bars").each((function(n){var c=r.select(this),d=n[0].trace,p="waterfall"===d.type,O="funnel"===d.type,I="bar"===d.type||O,L=0;p&&d.connector.visible&&"between"===d.connector.mode&&(L=d.connector.line.width/2);var D="h"===d.orientation,N=M(g),F=o.ensureSingle(c,"g","points"),z=S(d),B=F.selectAll("g.point").data(o.identity,z);B.enter().append("g").classed("point",!0),B.exit().remove(),B.each((function(c,p){var S,M,O=r.select(this),F=function(e,t,n,r){var i=[],o=[],a=r?t:n,s=r?n:t;return i[0]=a.c2p(e.s0,!0),o[0]=s.c2p(e.p0,!0),i[1]=a.c2p(e.s1,!0),o[1]=s.c2p(e.p1,!0),r?[i,o]:[o,i]}(c,_,P,D),z=F[0][0],B=F[0][1],j=F[1][0],Z=F[1][1],H=0==(D?B-z:Z-j);if(H&&I&&m.getLineWidth(d,c)&&(H=!1),H||(H=!(i(z)&&i(B)&&i(j)&&i(Z))),c.isBlank=H,H&&(D?B=z:Z=j),L&&!H&&(D?(z-=C(z,B)*L,B+=C(z,B)*L):(j-=C(j,Z)*L,Z+=C(j,Z)*L)),"waterfall"===d.type){if(!H){var U=d[c.dir].marker;S=U.line.width,M=U.color}}else S=m.getLineWidth(d,c),M=c.mc||d.marker.color;function V(e){var t=r.round(S/2%1,2);return 0===g.gap&&0===g.groupgap?r.round(Math.round(e)-t,2):e}if(!e._context.staticPlot){var G=s.opacity(M)<1||S>.01?V:function(e,t,n){return n&&e===t?e:Math.abs(e-t)>=2?V(e):e>t?Math.ceil(e):Math.floor(e)};z=G(z,B,D),B=G(B,z,D),j=G(j,Z,!D),Z=G(Z,j,!D)}var W=k(o.ensureSingle(O,"path"),R,g,v);if(W.style("vector-effect","non-scaling-stroke").attr("d",isNaN((B-z)*(Z-j))||H&&e._context.staticPlot?"M0,0Z":"M"+z+","+j+"V"+Z+"H"+B+"V"+j+"Z").call(l.setClipUrl,t.layerClipId,e),!R.uniformtext.mode&&N){var $=l.makePointStyleFns(d);l.singlePointStyle(c,W,d,$,e)}!function(e,t,n,r,i,s,c,d,p,g,v){var _,S=t.xaxis,M=t.yaxis,P=e._fullLayout;function R(t,n,r){return o.ensureSingle(t,"text").text(n).attr({class:"bartext bartext-"+_,"text-anchor":"middle","data-notex":1}).call(l.font,r).call(a.convertToTspans,e)}var O=r[0].trace,I="h"===O.orientation,L=function(e,t,n,r,i){var a,s=t[0].trace;return a=s.texttemplate?function(e,t,n,r,i){var a=t[0].trace,s=o.castOption(a,n,"texttemplate");if(!s)return"";var l,c,d,f,p="histogram"===a.type,h="waterfall"===a.type,m="funnel"===a.type,g="h"===a.orientation;function v(e){return u(f,f.c2l(e),!0).text}g?(l="y",c=i,d="x",f=r):(l="x",c=r,d="y",f=i);var y,b=t[n],w={};w.label=b.p,w.labelLabel=w[l+"Label"]=(y=b.p,u(c,c.c2l(y),!0).text);var _=o.castOption(a,b.i,"text");(0===_||_)&&(w.text=_),w.value=b.s,w.valueLabel=w[d+"Label"]=v(b.s);var S={};x(S,a,b.i),(p||void 0===S.x)&&(S.x=g?w.value:w.label),(p||void 0===S.y)&&(S.y=g?w.label:w.value),(p||void 0===S.xLabel)&&(S.xLabel=g?w.valueLabel:w.labelLabel),(p||void 0===S.yLabel)&&(S.yLabel=g?w.labelLabel:w.valueLabel),h&&(w.delta=+b.rawS||b.s,w.deltaLabel=v(w.delta),w.final=b.v,w.finalLabel=v(w.final),w.initial=w.final-w.delta,w.initialLabel=v(w.initial)),m&&(w.value=b.s,w.valueLabel=v(w.value),w.percentInitial=b.begR,w.percentInitialLabel=o.formatPercent(b.begR),w.percentPrevious=b.difR,w.percentPreviousLabel=o.formatPercent(b.difR),w.percentTotal=b.sumR,w.percenTotalLabel=o.formatPercent(b.sumR));var C=o.castOption(a,b.i,"customdata");return C&&(w.customdata=C),o.texttemplateString(s,w,e._d3locale,S,w,a._meta||{})}(e,t,n,r,i):s.textinfo?function(e,t,n,r){var i=e[0].trace,a="h"===i.orientation,s="waterfall"===i.type,l="funnel"===i.type;function c(e){return u(a?n:r,+e,!0).text}var d,f,p=i.textinfo,h=e[t],m=p.split("+"),g=[],v=function(e){return-1!==m.indexOf(e)};if(v("label")&&g.push((f=e[t].p,u(a?r:n,f,!0).text)),v("text")&&(0===(d=o.castOption(i,h.i,"text"))||d)&&g.push(d),s){var y=+h.rawS||h.s,b=h.v,x=b-y;v("initial")&&g.push(c(x)),v("delta")&&g.push(c(y)),v("final")&&g.push(c(b))}if(l){v("value")&&g.push(c(h.s));var w=0;v("percent initial")&&w++,v("percent previous")&&w++,v("percent total")&&w++;var _=w>1;v("percent initial")&&(d=o.formatPercent(h.begR),_&&(d+=" of initial"),g.push(d)),v("percent previous")&&(d=o.formatPercent(h.difR),_&&(d+=" of previous"),g.push(d)),v("percent total")&&(d=o.formatPercent(h.sumR),_&&(d+=" of total"),g.push(d))}return g.join("<br>")}(t,n,r,i):m.getValue(s.text,n),m.coerceString(y,a)}(P,r,i,S,M);_=function(e,t){var n=m.getValue(e.textposition,t);return m.coerceEnumerated(b,n)}(O,i);var D="stack"===g.mode||"relative"===g.mode,N=r[i],F=!D||N._outmost;if(L&&"none"!==_&&(!N.isBlank&&s!==c&&d!==p||"auto"!==_&&"inside"!==_)){var z=P.font,B=h.getBarColor(r[i],O),j=h.getInsideTextFont(O,i,z,B),Z=h.getOutsideTextFont(O,i,z),H=n.datum();I?"log"===S.type&&H.s0<=0&&(s=S.range[0]<S.range[1]?0:S._length):"log"===M.type&&H.s0<=0&&(d=M.range[0]<M.range[1]?M._length:0);var U,V,G,W,$,q=Math.abs(c-s)-2*w,Y=Math.abs(p-d)-2*w;if("outside"===_&&(F||N.hasB||(_="inside")),"auto"===_&&(F?(_="inside",U=R(n,L,$=o.ensureUniformFontSize(e,j)),G=(V=l.bBox(U.node())).width,W=V.height,G>0&&W>0&&(G<=q&&W<=Y||G<=Y&&W<=q||(I?q>=G*(Y/W):Y>=W*(q/G)))?_="inside":(_="outside",U.remove(),U=null)):_="inside"),!U){var X=(U=R(n,L,$=o.ensureUniformFontSize(e,"outside"===_?Z:j))).attr("transform");if(U.attr("transform",""),G=(V=l.bBox(U.node())).width,W=V.height,U.attr("transform",X),G<=0||W<=0)return void U.remove()}var K,J=O.textangle;K="outside"===_?function(e,t,n,r,i,o){var a,s=!!o.isHorizontal,l=!!o.constrained,c=o.angle||0,u=i.width,d=i.height,f=Math.abs(t-e),p=Math.abs(r-n);a=s?p>2*w?w:0:f>2*w?w:0;var h=1;l&&(h=s?Math.min(1,p/d):Math.min(1,f/u));var m=T(c),g=A(i,m),v=(s?g.x:g.y)/2,y=(i.left+i.right)/2,b=(i.top+i.bottom)/2,x=(e+t)/2,_=(n+r)/2,S=0,k=0,M=s?C(t,e):C(n,r);return s?(x=t-M*a,S=M*v):(_=r+M*a,k=-M*v),{textX:y,textY:b,targetX:x,targetY:_,anchorX:S,anchorY:k,scale:h,rotate:m}}(s,c,d,p,V,{isHorizontal:I,constrained:"both"===O.constraintext||"outside"===O.constraintext,angle:J}):E(s,c,d,p,V,{isHorizontal:I,constrained:"both"===O.constraintext||"inside"===O.constraintext,angle:J,anchor:O.insidetextanchor}),K.fontSize=$.size,f("histogram"===O.type?"bar":O.type,K,P),N.transform=K;var Q=k(U,P,g,v);o.setTransormAndDisplay(Q,K)}else n.select("text").remove()}(e,t,O,n,p,z,B,j,Z,g,v),t.layerClipId&&l.hideOutsideRangePoint(c,O.select("text"),_,P,d.xcalendar,d.ycalendar)}));var j=!1===d.cliponaxis;l.setClipUrl(c,j?null:t.layerClipId,e)}));c.getComponentMethod("errorbars","plot")(e,O,t,g)},toMoveInsideBar:E}},1974:function(e){"use strict";function t(e,t,n,r,i){var o=t.c2p(r?e.s0:e.p0,!0),a=t.c2p(r?e.s1:e.p1,!0),s=n.c2p(r?e.p0:e.s0,!0),l=n.c2p(r?e.p1:e.s1,!0);return i?[(o+a)/2,(s+l)/2]:r?[a,(s+l)/2]:[(o+a)/2,l]}e.exports=function(e,n){var r,i=e.cd,o=e.xaxis,a=e.yaxis,s=i[0].trace,l="funnel"===s.type,c="h"===s.orientation,u=[];if(!1===n)for(r=0;r<i.length;r++)i[r].selected=0;else for(r=0;r<i.length;r++){var d=i[r],f="ct"in d?d.ct:t(d,o,a,c,l);n.contains(f,!1,r,e)?(u.push({pointNumber:r,x:o.c2d(d.x),y:a.c2d(d.y)}),d.selected=1):d.selected=0}return u}},1546:function(e,t,n){"use strict";e.exports=i;var r=n(1828).distinctVals;function i(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,i=t.posAxis._id.charAt(0),o=[],a=0;a<e.length;a++){for(var s=e[a],l=0;l<s.length;l++){var c=s[l],u=c.p;void 0===u&&(u=c[i]),void 0!==u&&o.push(u)}s[0]&&s[0].width1&&(n=Math.min(s[0].width1,n))}this.positions=o;var d=r(o);this.distinctPositions=d.vals,1===d.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(d.minDiff,n);var f=(t.posAxis||{}).type;"category"!==f&&"multicategory"!==f||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}i.prototype.put=function(e,t){var n=this.getLabel(e,t),r=this.bins[n]||0;return this.bins[n]=r+t,r},i.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},i.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},6688:function(e,t,n){"use strict";var r=n(9898),i=n(7901),o=n(1424),a=n(1828),s=n(3972),l=n(2597).resizeText,c=n(1486),u=c.textfont,d=c.insidetextfont,f=c.outsidetextfont,p=n(9383);function h(e,t,n){o.pointStyle(e.selectAll("path"),t,n),m(e,t,n)}function m(e,t,n){e.selectAll("text").each((function(e){var i=r.select(this),s=a.ensureUniformFontSize(n,g(i,e,t,n));o.font(i,s)}))}function g(e,t,n,r){var i=r._fullLayout.font,o=n.textfont;if(e.classed("bartext-inside")){var a=w(t,n);o=y(n,t.i,i,a)}else e.classed("bartext-outside")&&(o=b(n,t.i,i));return o}function v(e,t,n){return x(u,e.textfont,t,n)}function y(e,t,n,r){var o=v(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(o={color:i.contrast(r),family:o.family,size:o.size}),x(d,e.insidetextfont,t,o)}function b(e,t,n){var r=v(e,t,n);return x(f,e.outsidetextfont,t,r)}function x(e,t,n,r){t=t||{};var i=p.getValue(t.family,n),o=p.getValue(t.size,n),a=p.getValue(t.color,n);return{family:p.coerceString(e.family,i,r.family),size:p.coerceNumber(e.size,o,r.size),color:p.coerceColor(e.color,a,r.color)}}function w(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}e.exports={style:function(e){var t=r.select(e).selectAll("g.barlayer").selectAll("g.trace");l(e,t,"bar");var n=t.size(),i=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===i.barmode&&n>1||0===i.bargap&&0===i.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){h(r.select(this),t[0].trace,e)})),s.getComponentMethod("errorbars","style")(t)},styleTextPoints:m,styleOnSelect:function(e,t,n){var i=t[0].trace;i.selectedpoints?function(e,t,n){o.selectedPointStyle(e.selectAll("path"),t),function(e,t,n){e.each((function(e){var i,s=r.select(this);if(e.selected){i=a.ensureUniformFontSize(n,g(s,e,t,n));var l=t.selected.textfont&&t.selected.textfont.color;l&&(i.color=l),o.font(s,i)}else o.selectedTextStyle(s,t)}))}(e.selectAll("text"),t,n)}(n,i,e):(h(n,i,e),s.getComponentMethod("errorbars","style")(n))},getInsideTextFont:y,getOutsideTextFont:b,getBarColor:w,resizeText:l}},8340:function(e,t,n){"use strict";var r=n(7901),i=n(2869).hasColorscale,o=n(1586),a=n(1828).coercePattern;e.exports=function(e,t,n,s,l){var c=n("marker.color",s),u=i(e,"marker");u&&o(e,t,l,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),i(e,"marker.line")&&o(e,t,l,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),a(n,"marker.pattern",c,u),n("selected.marker.color"),n("unselected.marker.color")}},2597:function(e,t,n){"use strict";var r=n(9898),i=n(1828);function o(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,n){if(n.uniformtext.mode){var r=o(e),i=n.uniformtext.minsize,a=t.scale*t.fontSize;t.hide=a<i,n[r]=n[r]||1/0,t.hide||(n[r]=Math.min(n[r],Math.max(a,i)))}},clearMinTextSize:function(e,t){t[o(e)]=void 0},resizeText:function(e,t,n){var o=e._fullLayout,a=o["_"+n+"Text_minsize"];if(a){var s,l="hide"===o.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":case"icicle":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}t.selectAll(s).each((function(e){var t=e.transform;if(t){t.scale=l&&t.hide?0:a/t.fontSize;var n=r.select(this).select("text");i.setTransormAndDisplay(n,t)}}))}}}},4e3:function(e,t,n){"use strict";var r=n(9012),i=n(7670).Y,o=n(1940),a=n(2399),s=n(5386).f,l=n(5386).s,c=n(1426).extendFlat,u=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});e.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:c({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:c({},u,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:c({},u,{}),outsidetextfont:c({},u,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:c({},u,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:i({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:c({},u,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},3584:function(e,t,n){"use strict";var r=n(4875);t.name="pie",t.plot=function(e,n,i,o){r.plotBasePlot(t.name,e,n,i,o)},t.clean=function(e,n,i,o){r.cleanBasePlot(t.name,e,n,i,o)}},2354:function(e,t,n){"use strict";var r=n(2770),i=n(4267),o=n(7901),a={};function s(e){return function(t,n){return!!t&&!!(t=i(t)).isValid()&&(t=o.addOpacity(t,t.getAlpha()),e[n]||(e[n]=t),t)}}function l(e,t){var n,r=JSON.stringify(e),o=t[r];if(!o){for(o=e.slice(),n=0;n<e.length;n++)o.push(i(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)o.push(i(e[n]).darken(20).toHexString());t[r]=o}return o}e.exports={calc:function(e,t){var n,i,o=[],a=e._fullLayout,l=a.hiddenlabels||[],c=t.labels,u=t.marker.colors||[],d=t.values,f=t._length,p=t._hasValues&&f;if(t.dlabel)for(c=new Array(f),n=0;n<f;n++)c[n]=String(t.label0+n*t.dlabel);var h={},m=s(a["_"+t.type+"colormap"]),g=0,v=!1;for(n=0;n<f;n++){var y,b,x;if(p){if(y=d[n],!r(y))continue;y=+y}else y=1;void 0!==(b=c[n])&&""!==b||(b=n);var w=h[b=String(b)];void 0===w?(h[b]=o.length,(x=-1!==l.indexOf(b))||(g+=y),o.push({v:y,label:b,color:m(u[n],b),i:n,pts:[n],hidden:x})):(v=!0,(i=o[w]).v+=y,i.pts.push(n),i.hidden||(g+=y),!1===i.color&&u[n]&&(i.color=m(u[n],b)))}return o=o.filter((function(e){return e.v>=0})),("funnelarea"===t.type?v:t.sort)&&o.sort((function(e,t){return t.v-e.v})),o[0]&&(o[0].vTotal=g),o},crossTraceCalc:function(e,t){var n=(t||{}).type;n||(n="pie");var r=e._fullLayout,i=e.calcdata,o=r[n+"colorway"],s=r["_"+n+"colormap"];r["extend"+n+"colors"]&&(o=l(o,a));for(var c=0,u=0;u<i.length;u++){var d=i[u];if(d[0].trace.type===n)for(var f=0;f<d.length;f++){var p=d[f];!1===p.color&&(s[p.label]?p.color=s[p.label]:(s[p.label]=p.color=o[c%o.length],c++))}}},makePullColorFn:s,generateExtendedColors:l}},7434:function(e,t,n){"use strict";var r=n(2770),i=n(1828),o=n(4e3),a=n(7670).c,s=n(769).handleText;function l(e,t){var n=Array.isArray(e),o=i.isArrayOrTypedArray(t),a=Math.min(n?e.length:1/0,o?t.length:1/0);if(isFinite(a)||(a=0),a&&o){for(var s,l=0;l<a;l++){var c=t[l];if(r(c)&&c>0){s=!0;break}}s||(a=0)}return{hasLabels:n,hasValues:o,len:a}}e.exports={handleLabelsAndValues:l,supplyDefaults:function(e,t,n,r){function c(n,r){return i.coerce(e,t,o,n,r)}var u=l(c("labels"),c("values")),d=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(c("label0"),c("dlabel")),d){t._length=d,c("marker.line.width")&&c("marker.line.color"),c("marker.colors"),c("scalegroup");var f,p=c("text"),h=c("texttemplate");if(h||(f=c("textinfo",Array.isArray(p)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),h||f&&"none"!==f){var m=c("textposition");s(e,t,r,c,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&c("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&c("insidetextorientation")}a(t,r,c);var g=c("hole");if(c("title.text")){var v=c("title.position",g?"middle center":"top center");g||"middle center"!==v||(t.title.position="top center"),i.coerceFont(c,"title.font",r.font)}c("sort"),c("direction"),c("rotation"),c("pull")}else t.visible=!1}}},7:function(e,t,n){"use strict";var r=n(3469).appendArrayMultiPointValues;e.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,bbox:e.bbox,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),"funnelarea"===t.type&&(delete n.v,delete n.i),n}},3581:function(e,t,n){"use strict";var r=n(1828);function i(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}t.formatPiePercent=function(e,t){var n=i((100*e).toPrecision(3));return r.numSeparate(n,t)+"%"},t.formatPieValue=function(e,t){var n=i(e.toPrecision(10));return r.numSeparate(n,t)},t.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r||""===r)return r}},t.castOption=function(e,n){return Array.isArray(e)?t.getFirstFilled(e,n):e||void 0},t.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},8810:function(e,t,n){"use strict";e.exports={attributes:n(4e3),supplyDefaults:n(7434).supplyDefaults,supplyLayoutDefaults:n(2097),layoutAttributes:n(7550),calc:n(2354).calc,crossTraceCalc:n(2354).crossTraceCalc,plot:n(4575).plot,style:n(8357),styleOne:n(3463),moduleType:"trace",name:"pie",basePlotModule:n(3584),categories:["pie-like","pie","showLegend"],meta:{}}},7550:function(e){"use strict";e.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},2097:function(e,t,n){"use strict";var r=n(1828),i=n(7550);e.exports=function(e,t){function n(n,o){return r.coerce(e,t,i,n,o)}n("hiddenlabels"),n("piecolorway",t.colorway),n("extendpiecolors")}},4575:function(e,t,n){"use strict";var r=n(9898),i=n(4875),o=n(211),a=n(7901),s=n(1424),l=n(1828),c=l.strScale,u=l.strTranslate,d=n(3893),f=n(2597),p=f.recordMinTextSize,h=f.clearMinTextSize,m=n(7313).TEXTPAD,g=n(3581),v=n(7),y=n(1828).isValidTextValue;function b(e,t,n){var i=n[0],a=i.cx,s=i.cy,c=i.trace,u="funnelarea"===c.type;"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),e.on("mouseover",(function(e){var n=t._fullLayout,d=t._fullData[c.index];if(!t._dragging&&!1!==n.hovermode){var f=d.hoverinfo;if(Array.isArray(f)&&(f=o.castHoverinfo({hoverinfo:[g.castOption(f,e.pts)],_module:c._module},n,0)),"all"===f&&(f="label+text+value+percent+name"),d.hovertemplate||"none"!==f&&"skip"!==f&&f){var p=e.rInscribed||0,h=a+e.pxmid[0]*(1-p),m=s+e.pxmid[1]*(1-p),y=n.separators,b=[];if(f&&-1!==f.indexOf("label")&&b.push(e.label),e.text=g.castOption(d.hovertext||d.text,e.pts),f&&-1!==f.indexOf("text")){var x=e.text;l.isValidTextValue(x)&&b.push(x)}e.value=e.v,e.valueLabel=g.formatPieValue(e.v,y),f&&-1!==f.indexOf("value")&&b.push(e.valueLabel),e.percent=e.v/i.vTotal,e.percentLabel=g.formatPiePercent(e.percent,y),f&&-1!==f.indexOf("percent")&&b.push(e.percentLabel);var w=d.hoverlabel,_=w.font,S=[];o.loneHover({trace:c,x0:h-p*i.r,x1:h+p*i.r,y:m,_x0:u?a+e.TL[0]:h-p*i.r,_x1:u?a+e.TR[0]:h+p*i.r,_y0:u?s+e.TL[1]:m-p*i.r,_y1:u?s+e.BL[1]:m+p*i.r,text:b.join("<br>"),name:d.hovertemplate||-1!==f.indexOf("name")?d.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:g.castOption(w.bgcolor,e.pts)||e.color,borderColor:g.castOption(w.bordercolor,e.pts),fontFamily:g.castOption(_.family,e.pts),fontSize:g.castOption(_.size,e.pts),fontColor:g.castOption(_.color,e.pts),nameLength:g.castOption(w.namelength,e.pts),textAlign:g.castOption(w.align,e.pts),hovertemplate:g.castOption(d.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[v(e,d)]},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:t,inOut_bbox:S}),e.bbox=S[0],c._hasHoverLabel=!0}c._hasHoverEvent=!0,t.emit("plotly_hover",{points:[v(e,d)],event:r.event})}})),e.on("mouseout",(function(e){var n=t._fullLayout,i=t._fullData[c.index],a=r.select(this).datum();c._hasHoverEvent&&(e.originalEvent=r.event,t.emit("plotly_unhover",{points:[v(a,i)],event:r.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(o.loneUnhover(n._hoverlayer.node()),c._hasHoverLabel=!1)})),e.on("click",(function(e){var n=t._fullLayout,i=t._fullData[c.index];t._dragging||!1===n.hovermode||(t._hoverdata=[v(e,i)],o.click(t,r.event))}))}function x(e,t,n){var r=g.castOption(e.insidetextfont.color,t.pts);!r&&e._input.textfont&&(r=g.castOption(e._input.textfont.color,t.pts));var i=g.castOption(e.insidetextfont.family,t.pts)||g.castOption(e.textfont.family,t.pts)||n.family,o=g.castOption(e.insidetextfont.size,t.pts)||g.castOption(e.textfont.size,t.pts)||n.size;return{color:r||a.contrast(t.color),family:i,size:o}}function w(e,t){for(var n,r,i=0;i<e.length;i++)if((r=(n=e[i][0]).trace).title.text){var o=r.title.text;r._meta&&(o=l.templateString(o,r._meta));var a=s.tester.append("text").attr("data-notex",1).text(o).call(s.font,r.title.font).call(d.convertToTspans,t),c=s.bBox(a.node(),!0);n.titleBox={width:c.width,height:c.height},a.remove()}}function _(e,t,n){var r=n.r||t.rpx1,i=t.rInscribed;if(t.startangle===t.stopangle)return{rCenter:1-i,scale:0,rotate:0,textPosAngle:0};var o,a=t.ring,s=1===a&&Math.abs(t.startangle-t.stopangle)===2*Math.PI,l=t.halfangle,c=t.midangle,u=n.trace.insidetextorientation,d="horizontal"===u,f="tangential"===u,p="radial"===u,h="auto"===u,m=[];if(!h){var g,v=function(n,i){if(function(e,t){var n=e.startangle,r=e.stopangle;return n>t&&t>r||n<t&&t<r}(t,n)){var s=Math.abs(n-t.startangle),l=Math.abs(n-t.stopangle),c=s<l?s:l;(o="tan"===i?C(e,r,a,c,0):S(e,r,a,c,Math.PI/2)).textPosAngle=n,m.push(o)}};if(d||f){for(g=4;g>=-4;g-=2)v(Math.PI*g,"tan");for(g=4;g>=-4;g-=2)v(Math.PI*(g+1),"tan")}if(d||p){for(g=4;g>=-4;g-=2)v(Math.PI*(g+1.5),"rad");for(g=4;g>=-4;g-=2)v(Math.PI*(g+.5),"rad")}}if(s||h||d){var y=Math.sqrt(e.width*e.width+e.height*e.height);if((o={scale:i*r*2/y,rCenter:1-i,rotate:0}).textPosAngle=(t.startangle+t.stopangle)/2,o.scale>=1)return o;m.push(o)}(h||p)&&((o=S(e,r,a,l,c)).textPosAngle=(t.startangle+t.stopangle)/2,m.push(o)),(h||f)&&((o=C(e,r,a,l,c)).textPosAngle=(t.startangle+t.stopangle)/2,m.push(o));for(var b=0,x=0,w=0;w<m.length;w++){var _=m[w].scale;if(x<_&&(x=_,b=w),!h&&x>=1)break}return m[b]}function S(e,t,n,r,i){t=Math.max(0,t-2*m);var o=e.width/e.height,a=T(o,r,t,n);return{scale:2*a/e.height,rCenter:k(o,a/t),rotate:M(i)}}function C(e,t,n,r,i){t=Math.max(0,t-2*m);var o=e.height/e.width,a=T(o,r,t,n);return{scale:2*a/e.width,rCenter:k(o,a/t),rotate:M(i+Math.PI/2)}}function k(e,t){return Math.cos(t)-e*t}function M(e){return(180/Math.PI*e+720)%180-90}function T(e,t,n,r){var i=e+1/(2*Math.tan(t));return n*Math.min(1/(Math.sqrt(i*i+.5)+i),r/(Math.sqrt(e*e+r/2)+e))}function A(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}function E(e,t){var n=t.pxmid[0],r=t.pxmid[1],i=e.width/2,o=e.height/2;return n<0&&(i*=-1),r<0&&(o*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(o)*(i>0?1:-1)/2,y:o/(1+n*n/(r*r)),outside:!0}}function P(e,t){var n,r,i,o=e.trace,a={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=o.title.font.size,i=O(o),-1!==o.title.position.indexOf("top")?(a.y-=(1+i)*e.r,s.ty-=e.titleBox.height):-1!==o.title.position.indexOf("bottom")&&(a.y+=(1+i)*e.r);var l,c=e.r/(void 0===(l=e.trace.aspectratio)?1:l),u=t.w*(o.domain.x[1]-o.domain.x[0])/2;return-1!==o.title.position.indexOf("left")?(u+=c,a.x-=(1+i)*c,s.tx+=e.titleBox.width/2):-1!==o.title.position.indexOf("center")?u*=2:-1!==o.title.position.indexOf("right")&&(u+=c,a.x+=(1+i)*c,s.tx-=e.titleBox.width/2),n=u/e.titleBox.width,r=R(e,t)/e.titleBox.height,{x:a.x,y:a.y,scale:Math.min(n,r),tx:s.tx,ty:s.ty}}function R(e,t){var n=e.trace,r=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,r/2)}function O(e){var t,n=e.pull;if(!n)return 0;if(Array.isArray(n))for(n=0,t=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}function I(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r][0],o=i.trace,a=o.domain,s=t.w*(a.x[1]-a.x[0]),l=t.h*(a.y[1]-a.y[0]);o.title.text&&"middle center"!==o.title.position&&(l-=R(i,t));var c=s/2,u=l/2;"funnelarea"!==o.type||o.scalegroup||(u/=o.aspectratio),i.r=Math.min(c,u)/(1+O(o)),i.cx=t.l+t.w*(o.domain.x[1]+o.domain.x[0])/2,i.cy=t.t+t.h*(1-o.domain.y[0])-l/2,o.title.text&&-1!==o.title.position.indexOf("bottom")&&(i.cy-=R(i,t)),o.scalegroup&&-1===n.indexOf(o.scalegroup)&&n.push(o.scalegroup)}!function(e,t){for(var n,r,i,o=0;o<t.length;o++){var a=1/0,s=t[o];for(r=0;r<e.length;r++)if((i=(n=e[r][0]).trace).scalegroup===s){var l;if("pie"===i.type)l=n.r*n.r;else if("funnelarea"===i.type){var c,u;i.aspectratio>1?u=(c=n.r)/i.aspectratio:c=(u=n.r)*i.aspectratio,l=(c*=(1+i.baseratio)/2)*u}a=Math.min(a,l/n.vTotal)}for(r=0;r<e.length;r++)if((i=(n=e[r][0]).trace).scalegroup===s){var d=a*n.vTotal;"funnelarea"===i.type&&(d/=(1+i.baseratio)/2,d/=i.aspectratio),n.r=Math.sqrt(d)}}}(e,n)}function L(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function D(e,t,n){var r=e._fullLayout,i=n.trace,o=i.texttemplate,a=i.textinfo;if(!o&&a&&"none"!==a){var s,c=a.split("+"),u=function(e){return-1!==c.indexOf(e)},d=u("label"),f=u("text"),p=u("value"),h=u("percent"),m=r.separators;if(s=d?[t.label]:[],f){var v=g.getFirstFilled(i.text,t.pts);y(v)&&s.push(v)}p&&s.push(g.formatPieValue(t.v,m)),h&&s.push(g.formatPiePercent(t.v/n.vTotal,m)),t.text=s.join("<br>")}if(o){var b=l.castOption(i,t.i,"texttemplate");if(b){var x=function(e){return{label:e.label,value:e.v,valueLabel:g.formatPieValue(e.v,r.separators),percent:e.v/n.vTotal,percentLabel:g.formatPiePercent(e.v/n.vTotal,r.separators),color:e.color,text:e.text,customdata:l.castOption(i,e.i,"customdata")}}(t),w=g.getFirstFilled(i.text,t.pts);(y(w)||""===w)&&(x.text=w),t.text=l.texttemplateString(b,x,e._fullLayout._d3locale,x,i._meta||{})}else t.text=""}}function N(e,t){var n=e.rotate*Math.PI/180,r=Math.cos(n),i=Math.sin(n),o=(t.left+t.right)/2,a=(t.top+t.bottom)/2;e.textX=o*r-a*i,e.textY=o*i+a*r,e.noCenter=!0}e.exports={plot:function(e,t){var n=e._context.staticPlot,o=e._fullLayout,f=o._size;h("pie",o),w(t,e),I(t,f);var m=l.makeTraceGroups(o._pielayer,t,"trace").each((function(t){var h=r.select(this),m=t[0],v=m.trace;!function(e){var t,n,r,i=e[0],o=i.r,a=i.trace,s=g.getRotationAngle(a.rotation),l=2*Math.PI/i.vTotal,c="px0",u="px1";if("counterclockwise"===a.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;s+=l*e[t].v,l*=-1,c="px1",u="px0"}for(r=L(o,s),t=0;t<e.length;t++)(n=e[t]).hidden||(n[c]=r,n.startangle=s,s+=l*n.v/2,n.pxmid=L(o,s),n.midangle=s,r=L(o,s+=l*n.v/2),n.stopangle=s,n[u]=r,n.largeArc=n.v>i.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/i.vTotal,.5),n.ring=1-a.hole,n.rInscribed=A(n,i))}(t),h.attr("stroke-linejoin","round"),h.each((function(){var y=r.select(this).selectAll("g.slice").data(t);y.enter().append("g").classed("slice",!0),y.exit().remove();var w=[[[],[]],[[],[]]],S=!1;y.each((function(i,a){if(i.hidden)r.select(this).selectAll("path,g").remove();else{i.pointNumber=i.i,i.curveNumber=v.index,w[i.pxmid[1]<0?0:1][i.pxmid[0]<0?0:1].push(i);var c=m.cx,u=m.cy,f=r.select(this),h=f.selectAll("path.surface").data([i]);if(h.enter().append("path").classed("surface",!0).style({"pointer-events":n?"none":"all"}),f.call(b,e,t),v.pull){var y=+g.castOption(v.pull,i.pts)||0;y>0&&(c+=y*i.pxmid[0],u+=y*i.pxmid[1])}i.cxFinal=c,i.cyFinal=u;var C=v.hole;if(i.v===m.vTotal){var k="M"+(c+i.px0[0])+","+(u+i.px0[1])+R(i.px0,i.pxmid,!0,1)+R(i.pxmid,i.px0,!0,1)+"Z";C?h.attr("d","M"+(c+C*i.px0[0])+","+(u+C*i.px0[1])+R(i.px0,i.pxmid,!1,C)+R(i.pxmid,i.px0,!1,C)+"Z"+k):h.attr("d",k)}else{var M=R(i.px0,i.px1,!0,1);if(C){var T=1-C;h.attr("d","M"+(c+C*i.px1[0])+","+(u+C*i.px1[1])+R(i.px1,i.px0,!1,C)+"l"+T*i.px0[0]+","+T*i.px0[1]+M+"Z")}else h.attr("d","M"+c+","+u+"l"+i.px0[0]+","+i.px0[1]+M+"Z")}D(e,i,m);var A=g.castOption(v.textposition,i.pts),P=f.selectAll("g.slicetext").data(i.text&&"none"!==A?[0]:[]);P.enter().append("g").classed("slicetext",!0),P.exit().remove(),P.each((function(){var n=l.ensureSingle(r.select(this),"text","",(function(e){e.attr("data-notex",1)})),f=l.ensureUniformFontSize(e,"outside"===A?function(e,t,n){return{color:g.castOption(e.outsidetextfont.color,t.pts)||g.castOption(e.textfont.color,t.pts)||n.color,family:g.castOption(e.outsidetextfont.family,t.pts)||g.castOption(e.textfont.family,t.pts)||n.family,size:g.castOption(e.outsidetextfont.size,t.pts)||g.castOption(e.textfont.size,t.pts)||n.size}}(v,i,o.font):x(v,i,o.font));n.text(i.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(s.font,f).call(d.convertToTspans,e);var h,y=s.bBox(n.node());if("outside"===A)h=E(y,i);else if(h=_(y,i,m),"auto"===A&&h.scale<1){var b=l.ensureUniformFontSize(e,v.outsidetextfont);n.call(s.font,b),h=E(y=s.bBox(n.node()),i)}var w=h.textPosAngle,C=void 0===w?i.pxmid:L(m.r,w);if(h.targetX=c+C[0]*h.rCenter+(h.x||0),h.targetY=u+C[1]*h.rCenter+(h.y||0),N(h,y),h.outside){var k=h.targetY;i.yLabelMin=k-y.height/2,i.yLabelMid=k,i.yLabelMax=k+y.height/2,i.labelExtraX=0,i.labelExtraY=0,S=!0}h.fontSize=f.size,p(v.type,h,o),t[a].transform=h,l.setTransormAndDisplay(n,h)}))}function R(e,t,n,r){var o=r*(t[0]-e[0]),a=r*(t[1]-e[1]);return"a"+r*m.r+","+r*m.r+" 0 "+i.largeArc+(n?" 1 ":" 0 ")+o+","+a}}));var C=r.select(this).selectAll("g.titletext").data(v.title.text?[0]:[]);if(C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each((function(){var t,n=l.ensureSingle(r.select(this),"text","",(function(e){e.attr("data-notex",1)})),i=v.title.text;v._meta&&(i=l.templateString(i,v._meta)),n.text(i).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(s.font,v.title.font).call(d.convertToTspans,e),t="middle center"===v.title.position?function(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}(m):P(m,f),n.attr("transform",u(t.x,t.y)+c(Math.min(1,t.scale))+u(t.tx,t.ty))})),S&&function(e,t){var n,r,i,o,a,s,l,c,u,d,f,p,h;function m(e,t){return e.pxmid[1]-t.pxmid[1]}function v(e,t){return t.pxmid[1]-e.pxmid[1]}function y(e,n){n||(n={});var i,c,u,f,p=n.labelExtraY+(r?n.yLabelMax:n.yLabelMin),h=r?e.yLabelMin:e.yLabelMax,m=r?e.yLabelMax:e.yLabelMin,v=e.cyFinal+a(e.px0[1],e.px1[1]),y=p-h;if(y*l>0&&(e.labelExtraY=y),Array.isArray(t.pull))for(c=0;c<d.length;c++)(u=d[c])===e||(g.castOption(t.pull,e.pts)||0)>=(g.castOption(t.pull,u.pts)||0)||((e.pxmid[1]-u.pxmid[1])*l>0?(y=u.cyFinal+a(u.px0[1],u.px1[1])-h-e.labelExtraY)*l>0&&(e.labelExtraY+=y):(m+e.labelExtraY-v)*l>0&&(i=3*s*Math.abs(c-d.indexOf(e)),(f=u.cxFinal+o(u.px0[0],u.px1[0])+i-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*s>0&&(e.labelExtraX+=f)))}for(r=0;r<2;r++)for(i=r?m:v,a=r?Math.max:Math.min,l=r?1:-1,n=0;n<2;n++){for(o=n?Math.max:Math.min,s=n?1:-1,(c=e[r][n]).sort(i),u=e[1-r][n],d=u.concat(c),p=[],f=0;f<c.length;f++)void 0!==c[f].yLabelMid&&p.push(c[f]);for(h=!1,f=0;r&&f<u.length;f++)if(void 0!==u[f].yLabelMid){h=u[f];break}for(f=0;f<p.length;f++){var b=f&&p[f-1];h&&!f&&(b=h),y(p[f],b)}}}(w,v),function(e,t){e.each((function(e){var n=r.select(this);if(e.labelExtraX||e.labelExtraY){var i=n.select("g.slicetext text");e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,l.setTransormAndDisplay(i,e.transform);var o=e.cxFinal+e.pxmid[0],s="M"+o+","+(e.cyFinal+e.pxmid[1]),c=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var u=e.labelExtraX*e.pxmid[1]/e.pxmid[0],d=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);Math.abs(u)>Math.abs(d)?s+="l"+d*e.pxmid[0]/e.pxmid[1]+","+d+"H"+(o+e.labelExtraX+c):s+="l"+e.labelExtraX+","+u+"v"+(d-u)+"h"+c}else s+="V"+(e.yLabelMid+e.labelExtraY)+"h"+c;l.ensureSingle(n,"path","textline").call(a.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:s,fill:"none"})}else n.select("path.textline").remove()}))}(y,v),S&&v.automargin){var k=s.bBox(h.node()),M=v.domain,T=f.w*(M.x[1]-M.x[0]),A=f.h*(M.y[1]-M.y[0]),R=(.5*T-m.r)/f.w,O=(.5*A-m.r)/f.h;i.autoMargin(e,"pie."+v.uid+".automargin",{xl:M.x[0]-R,xr:M.x[1]+R,yb:M.y[0]-O,yt:M.y[1]+O,l:Math.max(m.cx-m.r-k.left,0),r:Math.max(k.right-(m.cx+m.r),0),b:Math.max(k.bottom-(m.cy+m.r),0),t:Math.max(m.cy-m.r-k.top,0),pad:5})}}))}));setTimeout((function(){m.selectAll("tspan").each((function(){var e=r.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))}))}),0)},formatSliceLabel:D,transformInsideText:_,determineInsideTextFont:x,positionTitleOutside:P,prerenderTitles:w,layoutAreas:I,attachFxHandlers:b,computeTransform:N}},8357:function(e,t,n){"use strict";var r=n(9898),i=n(3463),o=n(2597).resizeText;e.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");o(e,t,"pie"),t.each((function(e){var t=e[0].trace,n=r.select(this);n.style({opacity:t.opacity}),n.selectAll("path.surface").each((function(e){r.select(this).call(i,e,t)}))}))}},3463:function(e,t,n){"use strict";var r=n(7901),i=n(3581).castOption;e.exports=function(e,t,n){var o=n.marker.line,a=i(o.color,t.pts)||r.defaultLine,s=i(o.width,t.pts)||0;e.style("stroke-width",s).call(r.fill,t.color).call(r.stroke,a)}},5225:function(e,t,n){"use strict";var r=n(1828);e.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.texttemplate,e,"txt"),r.mergeArray(t.hovertext,e,"htx"),r.mergeArray(t.customdata,e,"data"),r.mergeArray(t.textposition,e,"tp"),t.textfont&&(r.mergeArrayCastPositive(t.textfont.size,e,"ts"),r.mergeArray(t.textfont.color,e,"tc"),r.mergeArray(t.textfont.family,e,"tf"));var i=t.marker;if(i){r.mergeArrayCastPositive(i.size,e,"ms"),r.mergeArrayCastPositive(i.opacity,e,"mo"),r.mergeArray(i.symbol,e,"mx"),r.mergeArray(i.angle,e,"ma"),r.mergeArray(i.standoff,e,"mf"),r.mergeArray(i.color,e,"mc");var o=i.line;i.line&&(r.mergeArray(o.color,e,"mlc"),r.mergeArrayCastPositive(o.width,e,"mlw"));var a=i.gradient;a&&"none"!==a.type&&(r.mergeArray(a.type,e,"mgt"),r.mergeArray(a.color,e,"mgc"))}}},2196:function(e,t,n){"use strict";var r=n(2663).axisHoverFormat,i=n(5386).s,o=n(5386).f,a=n(693),s=n(1940),l=n(9952).P,c=n(9952).u,u=n(1424),d=n(7581),f=n(1426).extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:r("x"),yhoverformat:r("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:i({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:d.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},l,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:c,marker:f({symbol:{valType:"enumerated",values:u.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},a("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},a("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0})}},7761:function(e,t,n){"use strict";var r=n(2770),i=n(1828),o=n(9298),a=n(2973),s=n(606).BADNUM,l=n(4098),c=n(6922),u=n(5225),d=n(6279);function f(e,t,n,r,i,a,s){var c=t._length,u=e._fullLayout,d=n._id,f=r._id,p=u._firstScatter[m(t)]===t.uid,h=(g(t,u,n,r)||{}).orientation,v=t.fill;n._minDtick=0,r._minDtick=0;var y={padded:!0},b={padded:!0};s&&(y.ppad=b.ppad=s);var x=c<2||i[0]!==i[c-1]||a[0]!==a[c-1];x&&("tozerox"===v||"tonextx"===v&&(p||"h"===h))?y.tozero=!0:(t.error_y||{}).visible||"tonexty"!==v&&"tozeroy"!==v&&(l.hasMarkers(t)||l.hasText(t))||(y.padded=!1,y.ppad=0),x&&("tozeroy"===v||"tonexty"===v&&(p||"v"===h))?b.tozero=!0:"tonextx"!==v&&"tozerox"!==v||(b.padded=!1),d&&(t._extremes[d]=o.findExtremes(n,i,y)),f&&(t._extremes[f]=o.findExtremes(r,a,b))}function p(e,t){if(l.hasMarkers(e)){var n,r=e.marker,a=1.6*(e.marker.sizeref||1);if(n="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/a),3)}:function(e){return Math.max((e||0)/a,3)},i.isArrayOrTypedArray(r.size)){var s={type:"linear"};o.setConvert(s);for(var c=s.makeCalcdata(e.marker,"size"),u=new Array(t),d=0;d<t;d++)u[d]=n(c[d]);return u}return n(r.size)}}function h(e,t){var n=m(t),r=e._firstScatter;r[n]||(r[n]=t.uid)}function m(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function g(e,t,n,r){var i=e.stackgroup;if(i){var o=t._scatterStackOpts[n._id+r._id][i],a="v"===o.orientation?r:n;return"linear"===a.type||"log"===a.type?o:void 0}}e.exports={calc:function(e,t){var n,l,m,v,y,b,x=e._fullLayout,w=t._xA=o.getFromId(e,t.xaxis||"x","x"),_=t._yA=o.getFromId(e,t.yaxis||"y","y"),S=w.makeCalcdata(t,"x"),C=_.makeCalcdata(t,"y"),k=a(t,w,"x",S),M=a(t,_,"y",C),T=k.vals,A=M.vals,E=t._length,P=new Array(E),R=t.ids,O=g(t,x,w,_),I=!1;h(x,t);var L,D="x",N="y";O?(i.pushUnique(O.traceIndices,t._expandedIndex),(n="v"===O.orientation)?(N="s",L="x"):(D="s",L="y"),y="interpolate"===O.stackgaps):f(e,t,w,_,T,A,p(t,E));var F=!!t.xperiodalignment,z=!!t.yperiodalignment;for(l=0;l<E;l++){var B=P[l]={},j=r(T[l]),Z=r(A[l]);j&&Z?(B[D]=T[l],B[N]=A[l],F&&(B.orig_x=S[l],B.xEnd=k.ends[l],B.xStart=k.starts[l]),z&&(B.orig_y=C[l],B.yEnd=M.ends[l],B.yStart=M.starts[l])):O&&(n?j:Z)?(B[L]=n?T[l]:A[l],B.gap=!0,y?(B.s=s,I=!0):B.s=0):B[D]=B[N]=s,R&&(B.id=String(R[l]))}if(u(P,t),c(e,t),d(P,t),O){for(l=0;l<P.length;)P[l][L]===s?P.splice(l,1):l++;if(i.sort(P,(function(e,t){return e[L]-t[L]||e.i-t.i})),I){for(l=0;l<P.length-1&&P[l].gap;)l++;for((b=P[l].s)||(b=P[l].s=0),m=0;m<l;m++)P[m].s=b;for(v=P.length-1;v>l&&P[v].gap;)v--;for(b=P[v].s,m=P.length-1;m>v;m--)P[m].s=b;for(;l<v;)if(P[++l].gap){for(m=l+1;P[m].gap;)m++;for(var H=P[l-1][L],U=P[l-1].s,V=(P[m].s-U)/(P[m][L]-H);l<m;)P[l].s=U+(P[l][L]-H)*V,l++}}}return P},calcMarkerSize:p,calcAxisExpansion:f,setFirstScatter:h,getStackOpts:g}},6279:function(e,t,n){"use strict";var r=n(1828);e.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},6922:function(e,t,n){"use strict";var r=n(2869).hasColorscale,i=n(8803),o=n(4098);e.exports=function(e,t){o.hasLines(t)&&r(t,"line")&&i(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(t)&&(r(t,"marker")&&i(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&i(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},7581:function(e){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},2626:function(e,t,n){"use strict";var r=n(7761),i=n(1661).setGroupPositions;function o(e,t,n,r,i,o,a){i[r]=!0;var s={i:null,gap:!0,s:0};if(s[a]=n,e.splice(t,0,s),t&&n===e[t-1][a]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else o&&(s.s=function(e,t,n,r){var i=e[t-1],o=e[t+1];return o?i?i.s+(o.s-i.s)*(n-i[r])/(o[r]-i[r]):o.s:i.s}(e,t,n,a));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}e.exports=function(e,t){"group"===e._fullLayout.scattermode&&function(e,t){for(var n=t.xaxis,r=t.yaxis,o=e._fullLayout,a=e._fullData,s=e.calcdata,l=[],c=[],u=0;u<a.length;u++){var d=a[u];!0===d.visible&&"scatter"===d.type&&d.xaxis===n._id&&d.yaxis===r._id&&("h"===d.orientation?l.push(s[u]):"v"===d.orientation&&c.push(s[u]))}var f={mode:o.scattermode,gap:o.scattergap};i(e,n,r,c,f),i(e,r,n,l,f)}(e,t);var n=t.xaxis,a=t.yaxis,s=n._id+a._id,l=e._fullLayout._scatterStackOpts[s];if(l){var c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C=e.calcdata;for(var k in l){var M=(y=l[k]).traceIndices;if(M.length){for(b="interpolate"===y.stackgaps,x=y.groupnorm,"v"===y.orientation?(w="x",_="y"):(w="y",_="x"),S=new Array(M.length),c=0;c<S.length;c++)S[c]=!1;h=C[M[0]];var T=new Array(h.length);for(c=0;c<h.length;c++)T[c]=h[c][w];for(c=1;c<M.length;c++){for(p=C[M[c]],u=d=0;u<p.length;u++){for(m=p[u][w];m>T[d]&&d<T.length;d++)o(p,u,T[d],c,S,b,w),u++;if(m!==T[d]){for(f=0;f<c;f++)o(C[M[f]],d,m,f,S,b,w);T.splice(d,0,m)}d++}for(;d<T.length;d++)o(p,u,T[d],c,S,b,w),u++}var A=T.length;for(u=0;u<h.length;u++){for(g=h[u][_]=h[u].s,c=1;c<M.length;c++)(p=C[M[c]])[0].trace._rawLength=p[0].trace._length,p[0].trace._length=A,g+=p[u].s,p[u][_]=g;if(x)for(v=("fraction"===x?g:g/100)||1,c=0;c<M.length;c++){var E=C[M[c]][u];E[_]/=v,E.sNorm=E.s/v}}for(c=0;c<M.length;c++){var P=(p=C[M[c]])[0].trace,R=r.calcMarkerSize(P,P._rawLength),O=Array.isArray(R);if(R&&S[c]||O){var I=R;for(R=new Array(A),u=0;u<A;u++)R[u]=p[u].gap?0:O?I[p[u].i]:I}var L=new Array(A),D=new Array(A);for(u=0;u<A;u++)L[u]=p[u].x,D[u]=p[u].y;r.calcAxisExpansion(e,P,n,a,L,D,R),p[0].t.orientation=y.orientation}}}}}},462:function(e,t,n){"use strict";var r=n(1828),i=n(6125),o=n(2196);e.exports=function(e,t){var n,a,s;function l(e){return r.coerce(a._input,a,o,e)}if("group"===t.scattermode)for(s=0;s<e.length;s++)"scatter"===(a=e[s]).type&&(n=a._input,i(n,a,t,l));for(s=0;s<e.length;s++){var c=e[s];if("scatter"===c.type){var u=c.fill;if("none"!==u&&"toself"!==u&&(c.opacity=void 0,"tonexty"===u||"tonextx"===u))for(var d=s-1;d>=0;d--){var f=e[d];if("scatter"===f.type&&f.xaxis===c.xaxis&&f.yaxis===c.yaxis){f.opacity=void 0;break}}}}}},7438:function(e,t,n){"use strict";var r=n(1828),i=n(3972),o=n(2196),a=n(7581),s=n(4098),l=n(7513),c=n(3927),u=n(565),d=n(9508),f=n(1058),p=n(4039),h=n(2410),m=n(8908),g=n(1828).coercePattern;e.exports=function(e,t,n,v){function y(n,i){return r.coerce(e,t,o,n,i)}var b=l(e,t,v,y);if(b||(t.visible=!1),t.visible){c(e,t,v,y),y("xhoverformat"),y("yhoverformat");var x=u(e,t,v,y);"group"===v.scattermode&&void 0===t.orientation&&y("orientation","v");var w=!x&&b<a.PTS_LINESONLY?"lines+markers":"lines";y("text"),y("hovertext"),y("mode",w),s.hasLines(t)&&(f(e,t,n,v,y,{backoff:!0}),p(e,t,y),y("connectgaps"),y("line.simplify")),s.hasMarkers(t)&&d(e,t,n,v,y,{gradient:!0}),s.hasText(t)&&(y("texttemplate"),h(e,t,v,y));var _=[];(s.hasMarkers(t)||s.hasText(t))&&(y("cliponaxis"),y("marker.maxdisplayed"),_.push("points")),y("fill",x?x.fillDflt:"none"),"none"!==t.fill&&(m(e,t,n,y),s.hasLines(t)||p(e,t,y),g(y,"fillpattern",t.fillcolor,!1));var S=(t.line||{}).color,C=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||_.push("fills"),y("hoveron",_.join("+")||"points"),"fills"!==t.hoveron&&y("hovertemplate");var k=i.getComponentMethod("errorbars","supplyDefaults");k(e,t,S||C||n,{axis:"y"}),k(e,t,S||C||n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,y)}}},8908:function(e,t,n){"use strict";var r=n(7901),i=n(1828).isArrayOrTypedArray;e.exports=function(e,t,n,o){var a=!1;if(t.marker){var s=t.marker.color,l=(t.marker.line||{}).color;s&&!i(s)?a=s:l&&!i(l)&&(a=l)}o("fillcolor",r.addOpacity((t.line||{}).color||a||n,.5))}},8225:function(e,t,n){"use strict";var r=n(9298);e.exports=function(e,t,n){var i={},o={_fullLayout:n},a=r.getFromTrace(o,t,"x"),s=r.getFromTrace(o,t,"y"),l=e.orig_x;void 0===l&&(l=e.x);var c=e.orig_y;return void 0===c&&(c=e.y),i.xLabel=r.tickText(a,a.c2l(l),!0).text,i.yLabel=r.tickText(s,s.c2l(c),!0).text,i}},4603:function(e,t,n){"use strict";var r=n(7901),i=n(4098);e.exports=function(e,t){var n,o;if("lines"===e.mode)return(n=e.line.color)&&r.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var a=t.mcc||(e.marker||{}).color,s=t.mlcc||((e.marker||{}).line||{}).color;return(o=a&&r.opacity(a)?a:s&&r.opacity(s)&&(t.mlw||((e.marker||{}).line||{}).width)?s:"")?r.opacity(o)<.3?r.addOpacity(o,.3):o:(n=(e.line||{}).color)&&r.opacity(n)&&i.hasLines(e)&&e.line.width?n:e.fillcolor}},6125:function(e,t,n){"use strict";var r=n(9082).getAxisGroup;e.exports=function(e,t,n,i){var o=t.orientation,a=t[{v:"x",h:"y"}[o]+"axis"],s=r(n,a)+o,l=n._alignmentOpts||{},c=i("alignmentgroup"),u=l[s];u||(u=l[s]={});var d=u[c];d?d.traces.push(t):d=u[c]={traces:[t],alignmentIndex:Object.keys(u).length,offsetGroups:{}};var f=i("offsetgroup"),p=d.offsetGroups,h=p[f];f&&(h||(h=p[f]={offsetIndex:Object.keys(p).length}),t._offsetIndex=h.offsetIndex)}},3720:function(e,t,n){"use strict";var r=n(1828),i=n(211),o=n(3972),a=n(4603),s=n(7901),l=r.fillText;e.exports=function(e,t,n,c){var u=e.cd,d=u[0].trace,f=e.xa,p=e.ya,h=f.c2p(t),m=p.c2p(n),g=[h,m],v=d.hoveron||"",y=-1!==d.mode.indexOf("markers")?3:.5,b=!!d.xperiodalignment,x=!!d.yperiodalignment;if(-1!==v.indexOf("points")){var w=function(e){var t=Math.max(y,e.mrc||0),n=f.c2p(e.x)-h,r=p.c2p(e.y)-m;return Math.max(Math.sqrt(n*n+r*r)-t,1-y/t)},_=i.getDistanceFunction(c,(function(e){if(b){var t=f.c2p(e.xStart),n=f.c2p(e.xEnd);return h>=Math.min(t,n)&&h<=Math.max(t,n)?0:1/0}var r=Math.max(3,e.mrc||0),i=1-1/r,o=Math.abs(f.c2p(e.x)-h);return o<r?i*o/r:o-r+i}),(function(e){if(x){var t=p.c2p(e.yStart),n=p.c2p(e.yEnd);return m>=Math.min(t,n)&&m<=Math.max(t,n)?0:1/0}var r=Math.max(3,e.mrc||0),i=1-1/r,o=Math.abs(p.c2p(e.y)-m);return o<r?i*o/r:o-r+i}),w);if(i.getClosest(u,_,e),!1!==e.index){var S=u[e.index],C=f.c2p(S.x,!0),k=p.c2p(S.y,!0),M=S.mrc||1;e.index=S.i;var T=u[0].t.orientation,A=T&&(S.sNorm||S.s),E="h"===T?A:void 0!==S.orig_x?S.orig_x:S.x,P="v"===T?A:void 0!==S.orig_y?S.orig_y:S.y;return r.extendFlat(e,{color:a(d,S),x0:C-M,x1:C+M,xLabelVal:E,y0:k-M,y1:k+M,yLabelVal:P,spikeDistance:w(S),hovertemplate:d.hovertemplate}),l(S,d,e),o.getComponentMethod("errorbars","hoverInfo")(S,d,e),[e]}}if(-1!==v.indexOf("fills")&&d._polygons){var R,O,I,L,D,N,F,z,B,j=d._polygons,Z=[],H=!1,U=1/0,V=-1/0,G=1/0,W=-1/0;for(R=0;R<j.length;R++)(I=j[R]).contains(g)&&(H=!H,Z.push(I),G=Math.min(G,I.ymin),W=Math.max(W,I.ymax));if(H){var $=((G=Math.max(G,0))+(W=Math.min(W,p._length)))/2;for(R=0;R<Z.length;R++)for(L=Z[R].pts,O=1;O<L.length;O++)(z=L[O-1][1])>$!=(B=L[O][1])>=$&&(N=L[O-1][0],F=L[O][0],B-z&&(D=N+(F-N)*($-z)/(B-z),U=Math.min(U,D),V=Math.max(V,D)));U=Math.max(U,0),V=Math.min(V,f._length);var q=s.defaultLine;return s.opacity(d.fillcolor)?q=d.fillcolor:s.opacity((d.line||{}).color)&&(q=d.line.color),r.extendFlat(e,{distance:e.maxHoverDistance,x0:U,x1:V,y0:$,y1:$,color:q,hovertemplate:!1}),delete e.index,d.text&&!Array.isArray(d.text)?e.text=String(d.text):e.text=d.name,[e]}}}},7368:function(e,t,n){"use strict";var r=n(4098);e.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:n(2196),layoutAttributes:n(1479),supplyDefaults:n(7438),crossTraceDefaults:n(462),supplyLayoutDefaults:n(9334),calc:n(7761).calc,crossTraceCalc:n(2626),arraysToCalcdata:n(5225),plot:n(7399),colorbar:n(4898),formatLabels:n(8225),style:n(6296).style,styleOnSelect:n(6296).styleOnSelect,hoverPoints:n(3720),selectPoints:n(8002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:n(3612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},1479:function(e){"use strict";e.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},9334:function(e,t,n){"use strict";var r=n(1828),i=n(1479);e.exports=function(e,t){var n,o="group"===t.barmode;"group"===t.scattermode&&(n=o?t.bargap:.2,r.coerce(e,t,i,"scattergap",n))}},1058:function(e,t,n){"use strict";var r=n(1828).isArrayOrTypedArray,i=n(2869).hasColorscale,o=n(1586);e.exports=function(e,t,n,a,s,l){l||(l={});var c=(e.marker||{}).color;s("line.color",n),i(e,"line")?o(e,t,a,s,{prefix:"line.",cLetter:"c"}):s("line.color",!r(c)&&c||n),s("line.width"),l.noDash||s("line.dash"),l.backoff&&s("line.backoff")}},4621:function(e,t,n){"use strict";var r=n(1424),i=n(606),o=i.BADNUM,a=i.LOG_CLIP,s=a+.5,l=a-.5,c=n(1828),u=c.segmentsIntersect,d=c.constrain,f=n(7581);e.exports=function(e,t){var n,i,a,p,h,m,g,v,y,b,x,w,_,S,C,k,M,T,A=t.trace||{},E=t.xaxis,P=t.yaxis,R="log"===E.type,O="log"===P.type,I=E._length,L=P._length,D=t.backoff,N=A.marker,F=t.connectGaps,z=t.baseTolerance,B=t.shape,j="linear"===B,Z=A.fill&&"none"!==A.fill,H=[],U=f.minTolerance,V=e.length,G=new Array(V),W=0;function $(n){var r=e[n];if(!r)return!1;var i=t.linearized?E.l2p(r.x):E.c2p(r.x),a=t.linearized?P.l2p(r.y):P.c2p(r.y);if(i===o){if(R&&(i=E.c2p(r.x,!0)),i===o)return!1;O&&a===o&&(i*=Math.abs(E._m*L*(E._m>0?s:l)/(P._m*I*(P._m>0?s:l)))),i*=1e3}if(a===o){if(O&&(a=P.c2p(r.y,!0)),a===o)return!1;a*=1e3}return[i,a]}function q(e,t,n,r){var i=n-e,o=r-t,a=.5-e,s=.5-t,l=i*i+o*o,c=i*a+o*s;if(c>0&&c<l){var u=a*o-s*i;if(u*u<l)return!0}}function Y(e,t){var n=e[0]/I,r=e[1]/L,i=Math.max(0,-n,n-1,-r,r-1);return i&&void 0!==M&&q(n,r,M,T)&&(i=0),i&&t&&q(n,r,t[0]/I,t[1]/L)&&(i=0),(1+f.toleranceGrowth*i)*z}function X(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}var K,J,Q,ee,te,ne,re,ie=f.maxScreensAway,oe=-I*ie,ae=I*(1+ie),se=-L*ie,le=L*(1+ie),ce=[[oe,se,ae,se],[ae,se,ae,le],[ae,le,oe,le],[oe,le,oe,se]];function ue(e){if(e[0]<oe||e[0]>ae||e[1]<se||e[1]>le)return[d(e[0],oe,ae),d(e[1],se,le)]}function de(e,t){return e[0]===t[0]&&(e[0]===oe||e[0]===ae)||e[1]===t[1]&&(e[1]===se||e[1]===le)||void 0}function fe(e,t,n){return function(r,i){var o=ue(r),a=ue(i),s=[];if(o&&a&&de(o,a))return s;o&&s.push(o),a&&s.push(a);var l=2*c.constrain((r[e]+i[e])/2,t,n)-((o||r)[e]+(a||i)[e]);return l&&((o&&a?l>0==o[e]>a[e]?o:a:o||a)[e]+=l),s}}function pe(e){var t=e[0],n=e[1],r=t===G[W-1][0],i=n===G[W-1][1];if(!r||!i)if(W>1){var o=t===G[W-2][0],a=n===G[W-2][1];r&&(t===oe||t===ae)&&o?a?W--:G[W-1]=e:i&&(n===se||n===le)&&a?o?W--:G[W-1]=e:G[W++]=e}else G[W++]=e}function he(e){G[W-1][0]!==e[0]&&G[W-1][1]!==e[1]&&pe([Q,ee]),pe(e),te=null,Q=ee=0}"linear"===B||"spline"===B?re=function(e,t){for(var n=[],r=0,i=0;i<4;i++){var o=ce[i],a=u(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);a&&(!r||Math.abs(a.x-n[0][0])>1||Math.abs(a.y-n[0][1])>1)&&(a=[a.x,a.y],r&&X(a,e)<X(n[0],e)?n.unshift(a):n.push(a),r++)}return n}:"hv"===B||"vh"===B?re=function(e,t){var n=[],r=ue(e),i=ue(t);return r&&i&&de(r,i)||(r&&n.push(r),i&&n.push(i)),n}:"hvh"===B?re=fe(0,oe,ae):"vhv"===B&&(re=fe(1,se,le));var me=c.isArrayOrTypedArray(N);function ge(t){if(t&&D&&(t.i=n,t.d=e,t.trace=A,t.marker=me?N[t.i]:N,t.backoff=D),M=t[0]/I,T=t[1]/L,K=t[0]<oe?oe:t[0]>ae?ae:0,J=t[1]<se?se:t[1]>le?le:0,K||J){if(W)if(te){var r=re(te,t);r.length>1&&(he(r[0]),G[W++]=r[1])}else ne=re(G[W-1],t)[0],G[W++]=ne;else G[W++]=[K||t[0],J||t[1]];var i=G[W-1];K&&J&&(i[0]!==K||i[1]!==J)?(te&&(Q!==K&&ee!==J?pe(Q&&ee?(o=te,s=(a=t)[0]-o[0],l=(a[1]-o[1])/s,(o[1]*a[0]-a[1]*o[0])/s>0?[l>0?oe:ae,le]:[l>0?ae:oe,se]):[Q||K,ee||J]):Q&&ee&&pe([Q,ee])),pe([K,J])):Q-K&&ee-J&&pe([K||Q,J||ee]),te=t,Q=K,ee=J}else te&&he(re(te,t)[0]),G[W++]=t;var o,a,s,l}for(n=0;n<V;n++)if(i=$(n)){for(W=0,te=null,ge(i),n++;n<V;n++){if(!(p=$(n))){if(F)continue;break}if(j&&t.simplify){var ve=$(n+1);if(b=X(p,i),Z&&(0===W||W===V-1)||!(b<Y(p,ve)*U)){for(v=[(p[0]-i[0])/b,(p[1]-i[1])/b],h=i,x=b,w=S=C=0,g=!1,a=p,n++;n<e.length;n++){if(m=ve,ve=$(n+1),!m){if(F)continue;break}if(k=(y=[m[0]-i[0],m[1]-i[1]])[0]*v[1]-y[1]*v[0],S=Math.min(S,k),(C=Math.max(C,k))-S>Y(m,ve))break;a=m,(_=y[0]*v[0]+y[1]*v[1])>x?(x=_,p=m,g=!1):_<w&&(w=_,h=m,g=!0)}if(g?(ge(p),a!==h&&ge(h)):(h!==i&&ge(h),a!==p&&ge(p)),ge(a),n>=e.length||!m)break;ge(m),i=m}}else ge(p)}te&&pe([Q||te[0],ee||te[1]]),H.push(G.slice(0,W))}var ye=B.slice(B.length-1);if(D&&"h"!==ye&&"v"!==ye){for(var be=!1,xe=-1,we=[],_e=0;_e<H.length;_e++)for(var Se=0;Se<H[_e].length-1;Se++){var Ce=H[_e][Se],ke=H[_e][Se+1],Me=r.applyBackoff(ke,Ce);Me[0]===ke[0]&&Me[1]===ke[1]||(be=!0),we[xe+1]||(we[++xe]=[Ce,[Me[0],Me[1]]])}return be?we:H}return H}},4039:function(e){"use strict";e.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},8687:function(e){"use strict";var t={tonextx:1,tonexty:1,tonext:1};e.exports=function(e,n,r){var i,o,a,s,l,c={},u=!1,d=-1,f=0,p=-1;for(o=0;o<r.length;o++)(a=(i=r[o][0].trace).stackgroup||"")?a in c?l=c[a]:(l=c[a]=f,f++):i.fill in t&&p>=0?l=p:(l=p=f,f++),l<d&&(u=!0),i._groupIndex=d=l;var h=r.slice();u&&h.sort((function(e,t){var n=e[0].trace,r=t[0].trace;return n._groupIndex-r._groupIndex||n.index-r.index}));var m={};for(o=0;o<h.length;o++)a=(i=h[o][0].trace).stackgroup||"",!0===i.visible?(i._nexttrace=null,i.fill in t&&(s=m[a],i._prevtrace=s||null,s&&(s._nexttrace=i)),i._ownfill=i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace),m[a]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return h}},9984:function(e,t,n){"use strict";var r=n(2770);e.exports=function(e,t){t||(t=2);var n=e.marker,i=n.sizeref||1,o=n.sizemin||0,a="area"===n.sizemode?function(e){return Math.sqrt(e/i)}:function(e){return e/i};return function(e){var n=a(e/t);return r(n)&&n>0?Math.max(n,o):0}}},4898:function(e){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},9508:function(e,t,n){"use strict";var r=n(7901),i=n(2869).hasColorscale,o=n(1586),a=n(4098);e.exports=function(e,t,n,s,l,c){var u=a.isBubble(e),d=(e.line||{}).color;c=c||{},d&&(n=d),l("marker.symbol"),l("marker.opacity",u?.7:1),l("marker.size"),c.noAngle||(l("marker.angle"),c.noAngleRef||l("marker.angleref"),c.noStandOff||l("marker.standoff")),l("marker.color",n),i(e,"marker")&&o(e,t,s,l,{prefix:"marker.",cLetter:"c"}),c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),c.noLine||(l("marker.line.color",d&&!Array.isArray(d)&&t.marker.color!==d?d:u?r.background:r.defaultLine),i(e,"marker.line")&&o(e,t,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",u?1:0)),u&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),c.gradient&&"none"!==l("marker.gradient.type")&&l("marker.gradient.color")}},3927:function(e,t,n){"use strict";var r=n(1828).dateTick0,i=n(606).ONEWEEK;function o(e,t){return r(t,e%i==0?1:0)}e.exports=function(e,t,n,r,i){if(i||(i={x:!0,y:!0}),i.x){var a=r("xperiod");a&&(r("xperiod0",o(a,t.xcalendar)),r("xperiodalignment"))}if(i.y){var s=r("yperiod");s&&(r("yperiod0",o(s,t.ycalendar)),r("yperiodalignment"))}}},7399:function(e,t,n){"use strict";var r=n(9898),i=n(3972),o=n(1828),a=o.ensureSingle,s=o.identity,l=n(1424),c=n(4098),u=n(4621),d=n(8687),f=n(1082).tester;function p(e,t,n,d,p,h,m){var g;!function(e,t,n,i,a){var s=n.xaxis,l=n.yaxis,u=r.extent(o.simpleMap(s.range,s.r2c)),d=r.extent(o.simpleMap(l.range,l.r2c)),f=i[0].trace;if(c.hasMarkers(f)){var p=f.marker.maxdisplayed;if(0!==p){var h=i.filter((function(e){return e.x>=u[0]&&e.x<=u[1]&&e.y>=d[0]&&e.y<=d[1]})),m=Math.ceil(h.length/p),g=0;a.forEach((function(e,n){var r=e[0].trace;c.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<t&&g++}));var v=Math.round(g*m/3+Math.floor(g/3)*m/7.1);i.forEach((function(e){delete e.vis})),h.forEach((function(e,t){0===Math.round((t+v)%m)&&(e.vis=!0)}))}}}(0,t,n,d,p);var v=!!m&&m.duration>0;function y(e){return v?e.transition():e}var b=n.xaxis,x=n.yaxis,w=d[0].trace,_=w.line,S=r.select(h),C=a(S,"g","errorbars"),k=a(S,"g","lines"),M=a(S,"g","points"),T=a(S,"g","text");if(i.getComponentMethod("errorbars","plot")(e,C,n,m),!0===w.visible){var A,E;y(S).style("opacity",w.opacity);var P=w.fill.charAt(w.fill.length-1);"x"!==P&&"y"!==P&&(P=""),d[0][n.isRangePlot?"nodeRangePlot3":"node3"]=S;var R,O,I="",L=[],D=w._prevtrace;D&&(I=D._prevRevpath||"",E=D._nextFill,L=D._polygons);var N,F,z,B,j,Z,H,U="",V="",G=[],W=o.noop;if(A=w._ownFill,c.hasLines(w)||"none"!==w.fill){for(E&&E.datum(d),-1!==["hv","vh","hvh","vhv"].indexOf(_.shape)?(N=l.steps(_.shape),F=l.steps(_.shape.split("").reverse().join(""))):N=F="spline"===_.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?l.smoothclosed(e.slice(1),_.smoothing):l.smoothopen(e,_.smoothing)}:function(e){return"M"+e.join("L")},z=function(e){return F(e.reverse())},G=u(d,{xaxis:b,yaxis:x,trace:w,connectGaps:w.connectgaps,baseTolerance:Math.max(_.width||1,3)/4,shape:_.shape,backoff:_.backoff,simplify:_.simplify,fill:w.fill}),H=w._polygons=new Array(G.length),g=0;g<G.length;g++)w._polygons[g]=f(G[g]);G.length&&(B=G[0][0],Z=(j=G[G.length-1])[j.length-1]),W=function(e){return function(t){if(R=N(t),O=z(t),U?P?(U+="L"+R.substr(1),V=O+"L"+V.substr(1)):(U+="Z"+R,V=O+"Z"+V):(U=R,V=O),c.hasLines(w)){var n=r.select(this);if(n.datum(d),e)y(n.style("opacity",0).attr("d",R).call(l.lineGroupStyle)).style("opacity",1);else{var i=y(n);i.attr("d",R),l.singleLineStyle(d,i)}}}}}var $=k.selectAll(".js-line").data(G);y($.exit()).style("opacity",0).remove(),$.each(W(!1)),$.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(W(!0)),l.setClipUrl($,n.layerClipId,e),G.length?(A?(A.datum(d),B&&Z&&(P?("y"===P?B[1]=Z[1]=x.c2p(0,!0):"x"===P&&(B[0]=Z[0]=b.c2p(0,!0)),y(A).attr("d","M"+Z+"L"+B+"L"+U.substr(1)).call(l.singleFillStyle,e)):y(A).attr("d",U+"Z").call(l.singleFillStyle,e))):E&&("tonext"===w.fill.substr(0,6)&&U&&I?("tonext"===w.fill?y(E).attr("d",U+"Z"+I+"Z").call(l.singleFillStyle,e):y(E).attr("d",U+"L"+I.substr(1)+"Z").call(l.singleFillStyle,e),w._polygons=w._polygons.concat(L)):(Y(E),w._polygons=null)),w._prevRevpath=V,w._prevPolygons=H):(A?Y(A):E&&Y(E),w._polygons=w._prevRevpath=w._prevPolygons=null),M.datum(d),T.datum(d),function(t,i,o){var a,u=o[0].trace,d=c.hasMarkers(u),f=c.hasText(u),p=ee(u),h=te,m=te;if(d||f){var g=s,w=u.stackgroup,_=w&&"infer zero"===e._fullLayout._scatterStackOpts[b._id+x._id][w].stackgaps;u.marker.maxdisplayed||u._needsCull?g=_?K:X:w&&!_&&(g=J),d&&(h=g),f&&(m=g)}var S,C=(a=t.selectAll("path.point").data(h,p)).enter().append("path").classed("point",!0);v&&C.call(l.pointStyle,u,e).call(l.translatePoints,b,x).style("opacity",0).transition().style("opacity",1),a.order(),d&&(S=l.makePointStyleFns(u)),a.each((function(t){var i=r.select(this),o=y(i);l.translatePoint(t,o,b,x)?(l.singlePointStyle(t,o,u,S,e),n.layerClipId&&l.hideOutsideRangePoint(t,o,b,x,u.xcalendar,u.ycalendar),u.customdata&&i.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):o.remove()})),v?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=i.selectAll("g").data(m,p)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each((function(e){var t=r.select(this),i=y(t.select("text"));l.translatePoint(e,i,b,x)?n.layerClipId&&l.hideOutsideRangePoint(e,t,b,x,u.xcalendar,u.ycalendar):t.remove()})),a.selectAll("text").call(l.textPointStyle,u,e).each((function(e){var t=b.c2p(e.x),n=x.c2p(e.y);r.select(this).selectAll("tspan.line").each((function(){y(r.select(this)).attr({x:t,y:n})}))})),a.exit().remove()}(M,T,d);var q=!1===w.cliponaxis?null:n.layerClipId;l.setClipUrl(M,q,e),l.setClipUrl(T,q,e)}function Y(e){y(e).attr("d","M0,0Z")}function X(e){return e.filter((function(e){return!e.gap&&e.vis}))}function K(e){return e.filter((function(e){return e.vis}))}function J(e){return e.filter((function(e){return!e.gap}))}function Q(e){return e.id}function ee(e){if(e.ids)return Q}function te(){return!1}}e.exports=function(e,t,n,i,o,c){var u,f,h=!o,m=!!o&&o.duration>0,g=d(e,t,n);(u=i.selectAll("g.trace").data(g,(function(e){return e[0].trace.uid}))).enter().append("g").attr("class",(function(e){return"trace scatter trace"+e[0].trace.uid})).style("stroke-miterlimit",2),u.order(),function(e,t,n){t.each((function(t){var i=a(r.select(this),"g","fills");l.setClipUrl(i,n.layerClipId,e);var o=t[0].trace,c=[];o._ownfill&&c.push("_ownFill"),o._nexttrace&&c.push("_nextFill");var u=i.selectAll("g").data(c,s);u.enter().append("g"),u.exit().each((function(e){o[e]=null})).remove(),u.order().each((function(e){o[e]=a(r.select(this),"path","js-fill")}))}))}(e,u,t),m?(c&&(f=c()),r.transition().duration(o.duration).ease(o.easing).each("end",(function(){f&&f()})).each("interrupt",(function(){f&&f()})).each((function(){i.selectAll("g.trace").each((function(n,r){p(e,r,t,n,g,this,o)}))}))):u.each((function(n,r){p(e,r,t,n,g,this,o)})),h&&u.exit().remove(),i.selectAll("path:not([d])").remove()}},8002:function(e,t,n){"use strict";var r=n(4098);e.exports=function(e,t){var n,i,o,a,s=e.cd,l=e.xaxis,c=e.yaxis,u=[],d=s[0].trace;if(!r.hasMarkers(d)&&!r.hasText(d))return[];if(!1===t)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)i=s[n],o=l.c2p(i.x),a=c.c2p(i.y),null!==i.i&&t.contains([o,a],!1,n,e)?(u.push({pointNumber:i.i,x:l.c2d(i.x),y:c.c2d(i.y)}),i.selected=1):i.selected=0;return u}},565:function(e){"use strict";var t=["orientation","groupnorm","stackgaps"];e.exports=function(e,n,r,i){var o=r._scatterStackOpts,a=i("stackgroup");if(a){var s=n.xaxis+n.yaxis,l=o[s];l||(l=o[s]={});var c=l[a],u=!1;c?c.traces.push(n):(c=l[a]={traceIndices:[],traces:[n]},u=!0);for(var d={orientation:n.x&&!n.y?"h":"v"},f=0;f<t.length;f++){var p=t[f],h=p+"Found";if(!c[h]){var m=void 0!==e[p],g="orientation"===p;if((m||u)&&(c[p]=i(p,d[p]),g&&(c.fillDflt="h"===c[p]?"tonextx":"tonexty"),m&&(c[h]=!0,!u&&(delete c.traces[0][p],g))))for(var v=0;v<c.traces.length-1;v++){var y=c.traces[v];y._input.fill!==y.fill&&(y.fill=c.fillDflt)}}}return c}}},6296:function(e,t,n){"use strict";var r=n(9898),i=n(1424),o=n(3972);function a(e,t,n){i.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){i.textPointStyle(e.selectAll("text"),t,n)}e.exports={style:function(e){var t=r.select(e).selectAll("g.trace.scatter");t.style("opacity",(function(e){return e[0].trace.opacity})),t.selectAll("g.points").each((function(t){a(r.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.text").each((function(t){s(r.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.trace path.js-line").call(i.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(i.fillGroupStyle,e),o.getComponentMethod("errorbars","style")(t)},stylePoints:a,styleText:s,styleOnSelect:function(e,t,n){var r=t[0].trace;r.selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),r),i.selectedTextStyle(n.selectAll("text"),r)):(a(n,r,e),s(n,r,e))}}},4098:function(e,t,n){"use strict";var r=n(1828);e.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},2410:function(e,t,n){"use strict";var r=n(1828);e.exports=function(e,t,n,i,o){o=o||{},i("textposition"),r.coerceFont(i,"textfont",n.font),o.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},7513:function(e,t,n){"use strict";var r=n(1828),i=n(3972);e.exports=function(e,t,n,o){var a,s=o("x"),l=o("y");if(i.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),s){var c=r.minRowLength(s);l?a=Math.min(c,r.minRowLength(l)):(a=c,o("y0"),o("dy"))}else{if(!l)return 0;a=r.minRowLength(l),o("x0"),o("dx")}return t._length=a,a}},2887:function(e,t,n){"use strict";var r=n(9298),i=n(1828),o=n(6281),a=n(9344).p,s=n(606).BADNUM;t.moduleType="transform",t.name="aggregate";var l=t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},c=l.aggregations;function u(e,t,n,o){if(o.enabled){for(var a=o.target,l=i.nestedProperty(t,a),c=l.get(),u=function(e,t){var n=e.func,r=t.d2c,o=t.c2d;switch(n){case"count":return d;case"first":return f;case"last":return p;case"sum":return function(e,t){for(var n=0,i=0;i<t.length;i++){var a=r(e[t[i]]);a!==s&&(n+=a)}return o(n)};case"avg":return function(e,t){for(var n=0,i=0,a=0;a<t.length;a++){var l=r(e[t[a]]);l!==s&&(n+=l,i++)}return i?o(n/i):s};case"min":return function(e,t){for(var n=1/0,i=0;i<t.length;i++){var a=r(e[t[i]]);a!==s&&(n=Math.min(n,a))}return n===1/0?s:o(n)};case"max":return function(e,t){for(var n=-1/0,i=0;i<t.length;i++){var a=r(e[t[i]]);a!==s&&(n=Math.max(n,a))}return n===-1/0?s:o(n)};case"range":return function(e,t){for(var n=1/0,i=-1/0,a=0;a<t.length;a++){var l=r(e[t[a]]);l!==s&&(n=Math.min(n,l),i=Math.max(i,l))}return i===-1/0||n===1/0?s:o(i-n)};case"change":return function(e,t){var n=r(e[t[0]]),i=r(e[t[t.length-1]]);return n===s||i===s?s:o(i-n)};case"median":return function(e,t){for(var n=[],a=0;a<t.length;a++){var l=r(e[t[a]]);l!==s&&n.push(l)}if(!n.length)return s;n.sort(i.sorterAsc);var c=(n.length-1)/2;return o((n[Math.floor(c)]+n[Math.ceil(c)])/2)};case"mode":return function(e,t){for(var n={},i=0,a=s,l=0;l<t.length;l++){var c=r(e[t[l]]);if(c!==s){var u=n[c]=(n[c]||0)+1;u>i&&(i=u,a=c)}}return i?o(a):s};case"rms":return function(e,t){for(var n=0,i=0,a=0;a<t.length;a++){var l=r(e[t[a]]);l!==s&&(n+=l*l,i++)}return i?o(Math.sqrt(n/i)):s};case"stddev":return function(t,n){var i,o=0,a=0,l=1,c=s;for(i=0;i<n.length&&c===s;i++)c=r(t[n[i]]);if(c===s)return s;for(;i<n.length;i++){var u=r(t[n[i]]);if(u!==s){var d=u-c;o+=d,a+=d*d,l++}}var f="sample"===e.funcmode?l-1:l;return f?Math.sqrt((a-o*o/l)/f):0}}}(o,r.getDataConversions(e,t,a,c)),h=new Array(n.length),m=0;m<n.length;m++)h[m]=u(c,n[m]);l.set(h),"count"===o.func&&i.pushUnique(t._arrayAttrs,a)}}function d(e,t){return t.length}function f(e,t){return e[t[0]]}function p(e,t){return e[t[t.length-1]]}t.supplyDefaults=function(e,t){var n,r={};function a(t,n){return i.coerce(e,r,l,t,n)}if(!a("enabled"))return r;var s=o.findArrayAttributes(t),u={};for(n=0;n<s.length;n++)u[s[n]]=1;var d=a("groups");if(!Array.isArray(d)){if(!u[d])return r.enabled=!1,r;u[d]=0}var f,p=e.aggregations||[],h=r.aggregations=new Array(p.length);function m(e,t){return i.coerce(p[n],f,c,e,t)}for(n=0;n<p.length;n++){f={_index:n};var g=m("target"),v=m("func");m("enabled")&&g&&(u[g]||"count"===v&&void 0===u[g])?("stddev"===v&&m("funcmode"),u[g]=0,h[n]=f):h[n]={enabled:!1,_index:n}}for(n=0;n<s.length;n++)u[s[n]]&&h.push({target:s[n],func:c.func.dflt,enabled:!0,_index:-1});return r},t.calcTransform=function(e,t,n){if(n.enabled){var r=n.groups,o=i.getTargetArray(t,{target:r});if(o){var s,l,c,d,f={},p={},h=[],m=a(t.transforms,n),g=o.length;for(t._length&&(g=Math.min(g,t._length)),s=0;s<g;s++)void 0===(c=f[l=o[s]])?(f[l]=h.length,d=[s],h.push(d),p[f[l]]=m(s)):(h[c].push(s),p[f[l]]=(p[f[l]]||[]).concat(m(s)));n._indexToPoints=p;var v=n.aggregations;for(s=0;s<v.length;s++)u(e,t,h,v[s]);"string"==typeof r&&u(e,t,h,{target:r,func:"first",enabled:!0}),t._length=h.length}}}},4382:function(e,t,n){"use strict";var r=n(1828),i=n(3972),o=n(9298),a=n(9344).p,s=n(4808),l=s.COMPARISON_OPS,c=s.INTERVAL_OPS,u=s.SET_OPS;t.moduleType="transform",t.name="filter",t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(l).concat(c).concat(u),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},t.supplyDefaults=function(e){var n={};function o(i,o){return r.coerce(e,n,t.attributes,i,o)}if(o("enabled")){var a=o("target");if(r.isArrayOrTypedArray(a)&&0===a.length)return n.enabled=!1,n;o("preservegaps"),o("operation"),o("value");var s=i.getComponentMethod("calendars","handleDefaults");s(e,n,"valuecalendar",null),s(e,n,"targetcalendar",null)}return n},t.calcTransform=function(e,t,n){if(n.enabled){var i=r.getTargetArray(t,n);if(i){var s=n.target,d=i.length;t._length&&(d=Math.min(d,t._length));var f=n.targetcalendar,p=t._arrayAttrs,h=n.preservegaps;if("string"==typeof s){var m=r.nestedProperty(t,s+"calendar").get();m&&(f=m)}var g,v,y=function(e,t,n){var r=e.operation,i=e.value,o=Array.isArray(i);function a(e){return-1!==e.indexOf(r)}var s,d=function(n){return t(n,0,e.valuecalendar)},f=function(e){return t(e,0,n)};switch(a(l)?s=d(o?i[0]:i):a(c)?s=o?[d(i[0]),d(i[1])]:[d(i),d(i)]:a(u)&&(s=o?i.map(d):[d(i)]),r){case"=":return function(e){return f(e)===s};case"!=":return function(e){return f(e)!==s};case"<":return function(e){return f(e)<s};case"<=":return function(e){return f(e)<=s};case">":return function(e){return f(e)>s};case">=":return function(e){return f(e)>=s};case"[]":return function(e){var t=f(e);return t>=s[0]&&t<=s[1]};case"()":return function(e){var t=f(e);return t>s[0]&&t<s[1]};case"[)":return function(e){var t=f(e);return t>=s[0]&&t<s[1]};case"(]":return function(e){var t=f(e);return t>s[0]&&t<=s[1]};case"][":return function(e){var t=f(e);return t<=s[0]||t>=s[1]};case")(":return function(e){var t=f(e);return t<s[0]||t>s[1]};case"](":return function(e){var t=f(e);return t<=s[0]||t>s[1]};case")[":return function(e){var t=f(e);return t<s[0]||t>=s[1]};case"{}":return function(e){return-1!==s.indexOf(f(e))};case"}{":return function(e){return-1===s.indexOf(f(e))}}}(n,o.getDataToCoordFunc(e,t,s,i),f),b={},x={},w=0;h?(g=function(e){b[e.astr]=r.extendDeep([],e.get()),e.set(new Array(d))},v=function(e,t){var n=b[e.astr][t];e.get()[t]=n}):(g=function(e){b[e.astr]=r.extendDeep([],e.get()),e.set([])},v=function(e,t){var n=b[e.astr][t];e.get().push(n)}),C(g);for(var _=a(t.transforms,n),S=0;S<d;S++)y(i[S])?(C(v,S),x[w++]=_(S)):h&&w++;n._indexToPoints=x,t._length=w}}function C(e,n){for(var i=0;i<p.length;i++)e(r.nestedProperty(t,p[i]),n)}}},3102:function(e,t,n){"use strict";var r=n(1828),i=n(6281),o=n(4875),a=n(9344).p;function s(e,t){var n,s,l,c,u,d,f,p,h,m,g=t.transform,v=t.transformIndex,y=e.transforms[v].groups,b=a(e.transforms,g);if(!r.isArrayOrTypedArray(y)||0===y.length)return[e];var x=r.filterUnique(y),w=new Array(x.length),_=y.length,S=i.findArrayAttributes(e),C=g.styles||[],k={};for(n=0;n<C.length;n++)k[C[n].target]=C[n].value;g.styles&&(m=r.keyedContainer(g,"styles","target","value.name"));var M={},T={};for(n=0;n<x.length;n++){M[d=x[n]]=n,T[d]=0,(f=w[n]=r.extendDeepNoArrays({},e))._group=d,f.transforms[v]._indexToPoints={};var A=null;for(m&&(A=m.get(d)),f.name=A||""===A?A:r.templateString(g.nameformat,{trace:e.name,group:d}),p=f.transforms,f.transforms=[],s=0;s<p.length;s++)f.transforms[s]=r.extendDeepNoArrays({},p[s]);for(s=0;s<S.length;s++)r.nestedProperty(f,S[s]).set([])}for(l=0;l<S.length;l++){for(c=S[l],s=0,h=[];s<x.length;s++)h[s]=r.nestedProperty(w[s],c).get();for(u=r.nestedProperty(e,c).get(),s=0;s<_;s++)h[M[y[s]]].push(u[s])}for(s=0;s<_;s++)(f=w[M[y[s]]]).transforms[v]._indexToPoints[T[y[s]]]=b(s),T[y[s]]++;for(n=0;n<x.length;n++)d=x[n],f=w[n],o.clearExpandedTraceDefaultColors(f),f=r.extendDeepNoArrays(f,k[d]||{});return w}t.moduleType="transform",t.name="groupby",t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},t.supplyDefaults=function(e,n,i){var o,a={};function s(n,i){return r.coerce(e,a,t.attributes,n,i)}if(!s("enabled"))return a;s("groups"),s("nameformat",i._dataLength>1?"%{group} (%{trace})":"%{group}");var l=e.styles,c=a.styles=[];if(l)for(o=0;o<l.length;o++){var u=c[o]={};r.coerce(l[o],c[o],t.attributes.styles,"target");var d=r.coerce(l[o],c[o],t.attributes.styles,"value");r.isPlainObject(d)?u.value=r.extendDeep({},d):d&&delete u.value}return a},t.transform=function(e,t){var n,r,i,o=[];for(r=0;r<e.length;r++)for(n=s(e[r],t),i=0;i<n.length;i++)o.push(n[i]);return o}},9344:function(e,t){"use strict";t.p=function(e,t){for(var n,r,i=0;i<e.length&&(n=e[i])!==t;i++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);var o=r?function(e){return r[e]}:function(e){return[e]};return o}},2275:function(e,t,n){"use strict";var r=n(1828),i=n(9298),o=n(9344).p,a=n(606).BADNUM;t.moduleType="transform",t.name="sort",t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},t.supplyDefaults=function(e){var n={};function i(i,o){return r.coerce(e,n,t.attributes,i,o)}return i("enabled")&&(i("target"),i("order")),n},t.calcTransform=function(e,t,n){if(n.enabled){var s=r.getTargetArray(t,n);if(s){var l=n.target,c=s.length;t._length&&(c=Math.min(c,t._length));var u,d,f=t._arrayAttrs,p=function(e,t,n,r){var i,o=new Array(r),s=new Array(r);for(i=0;i<r;i++)o[i]={v:t[i],i:i};for(o.sort(function(e,t){switch(e.order){case"ascending":return function(e,n){var r=t(e.v),i=t(n.v);return r===a?1:i===a?-1:r-i};case"descending":return function(e,n){var r=t(e.v),i=t(n.v);return r===a?1:i===a?-1:i-r}}}(e,n)),i=0;i<r;i++)s[i]=o[i].i;return s}(n,s,i.getDataToCoordFunc(e,t,l,s),c),h=o(t.transforms,n),m={};for(u=0;u<f.length;u++){var g=r.nestedProperty(t,f[u]),v=g.get(),y=new Array(c);for(d=0;d<c;d++)y[d]=v[p[d]];g.set(y)}for(d=0;d<c;d++)m[d]=h(p[d]);n._indexToPoints=m,t._length=c}}}},1506:function(e,t){"use strict";t.version="2.18.0"},5791:function(e){"use strict";e.exports=i,e.exports.isMobile=i,e.exports.default=i;var t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/CrOS/,r=/android|ipad|playbook|silk/i;function i(e){e||(e={});var i=e.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;var o=t.test(i)&&!n.test(i)||!!e.tablet&&r.test(i);return!o&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(o=!0),o}},9898:function(e,t,n){var r,i;(function(){var o={version:"3.8.0"},a=[].slice,s=function(e){return a.call(e)},l=self.document;function c(e){return e&&(e.ownerDocument||e.document||e).documentElement}function u(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(l)try{s(l.documentElement.childNodes)[0].nodeType}catch(e){s=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var d=this.Element.prototype,f=d.setAttribute,p=d.setAttributeNS,h=this.CSSStyleDeclaration.prototype,m=h.setProperty;d.setAttribute=function(e,t){f.call(this,e,t+"")},d.setAttributeNS=function(e,t,n){p.call(this,e,t,n+"")},h.setProperty=function(e,t,n){m.call(this,e,t+"",n)}}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function v(e){return null===e?NaN:+e}function y(e){return!isNaN(e)}function b(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}o.ascending=g,o.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},o.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},o.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},o.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},o.sum=function(e,t){var n,r=0,i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)y(n=+e[o])&&(r+=n);else for(;++o<i;)y(n=+t.call(e,e[o],o))&&(r+=n);return r},o.mean=function(e,t){var n,r=0,i=e.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)y(n=v(e[o]))?r+=n:--a;else for(;++o<i;)y(n=v(t.call(e,e[o],o)))?r+=n:--a;if(a)return r/a},o.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],o=n-r;return o?i+o*(e[r]-i):i},o.median=function(e,t){var n,r=[],i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)y(n=v(e[a]))&&r.push(n);else for(;++a<i;)y(n=v(t.call(e,e[a],a)))&&r.push(n);if(r.length)return o.quantile(r.sort(g),.5)},o.variance=function(e,t){var n,r,i=e.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)y(n=v(e[s]))&&(a+=(r=n-o)*(n-(o+=r/++l)));else for(;++s<i;)y(n=v(t.call(e,e[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++l)));if(l>1)return a/(l-1)},o.deviation=function(){var e=o.variance.apply(this,arguments);return e?Math.sqrt(e):e};var x=b(g);function w(e){return e.length}o.bisectLeft=x.left,o.bisect=o.bisectRight=x.right,o.bisector=function(e){return b(1===e.length?function(t,n){return g(e(t),n)}:e)},o.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,o<2&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},o.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},o.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},o.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=o.min(e,w),r=new Array(n);++t<n;)for(var i,a=-1,s=r[t]=new Array(i);++a<i;)s[a]=e[a][t];return r},o.zip=function(){return o.transpose(arguments)},o.keys=function(e){var t=[];for(var n in e)t.push(n);return t},o.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},o.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},o.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n};var _=Math.abs;function S(e){for(var t=1;e*t%1;)t*=10;return t}function C(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function k(){this._=Object.create(null)}function M(e){return"__proto__"==(e+="")||"\0"===e[0]?"\0"+e:e}function T(e){return"\0"===(e+="")[0]?e.slice(1):e}function A(e){return M(e)in this._}function E(e){return(e=M(e))in this._&&delete this._[e]}function P(){var e=[];for(var t in this._)e.push(T(t));return e}function R(){var e=0;for(var t in this._)++e;return e}function O(){for(var e in this._)return!1;return!0}function I(){this._=Object.create(null)}function L(e){return e}function D(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function N(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=F.length;n<r;++n){var i=F[n]+t;if(i in e)return i}}o.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],o=S(_(n)),a=-1;if(e*=o,t*=o,(n*=o)<0)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},o.map=function(e,t){var n=new k;if(e instanceof k)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n},C(k,{has:A,get:function(e){return this._[M(e)]},set:function(e,t){return this._[M(e)]=t},remove:E,keys:P,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:T(t),value:this._[t]});return e},size:R,empty:O,forEach:function(e){for(var t in this._)e.call(this,T(t),this._[t])}}),o.nest=function(){var e,t,n={},r=[],i=[];function a(i,o,s){if(s>=r.length)return t?t.call(n,o):e?o.sort(e):o;for(var l,c,u,d,f=-1,p=o.length,h=r[s++],m=new k;++f<p;)(d=m.get(l=h(c=o[f])))?d.push(c):m.set(l,[c]);return i?(c=i(),u=function(e,t){c.set(e,a(i,t,s))}):(c={},u=function(e,t){c[e]=a(i,t,s)}),m.forEach(u),c}function s(e,t){if(t>=r.length)return e;var n=[],o=i[t++];return e.forEach((function(e,r){n.push({key:e,values:s(r,t)})})),o?n.sort((function(e,t){return o(e.key,t.key)})):n}return n.map=function(e,t){return a(t,e,0)},n.entries=function(e){return s(a(o.map,e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return i[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},o.set=function(e){var t=new I;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},C(I,{has:A,add:function(e){return this._[M(e+="")]=!0,e},remove:E,values:P,size:R,empty:O,forEach:function(e){for(var t in this._)e.call(this,T(t))}}),o.behavior={},o.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=D(e,t,t[n]);return e};var F=["webkit","ms","moz","Moz","o","O"];function z(){}function B(){}function j(e){var t=[],n=new k;function r(){for(var n,r=t,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return e}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,t=t.slice(0,o=t.indexOf(a)).concat(t.slice(o+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function Z(){o.event.preventDefault()}function H(){for(var e,t=o.event;e=t.sourceEvent;)t=e;return t}function U(e){for(var t=new B,n=0,r=arguments.length;++n<r;)t[arguments[n]]=j(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=o.event;i.target=e,o.event=i,t[i.type].apply(n,r)}finally{o.event=a}}},t}o.dispatch=function(){for(var e=new B,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=j(e);return e},B.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},o.event=null,o.requote=function(e){return e.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function W(e){return G(e,X),e}var $=function(e,t){return t.querySelector(e)},q=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var n=e.matches||e[N(e,"matchesSelector")];return Y=function(e,t){return n.call(e,t)},Y(e,t)};"function"==typeof Sizzle&&($=function(e,t){return Sizzle(e,t)[0]||null},q=Sizzle,Y=Sizzle.matchesSelector),o.selection=function(){return o.select(l.documentElement)};var X=o.selection.prototype=[];function K(e){return"function"==typeof e?e:function(){return $(e,this)}}function J(e){return"function"==typeof e?e:function(){return q(e,this)}}X.select=function(e){var t,n,r,i,o=[];e=K(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return W(o)},X.selectAll=function(e){var t,n,r=[];e=J(e);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],l=-1,c=a.length;++l<c;)(n=a[l])&&(r.push(t=s(e.call(n,n.__data__,l,i))),t.parentNode=n);return W(r)};var Q="http://www.w3.org/1999/xhtml",ee={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function te(e,t){return e=o.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function ne(e){return e.trim().replace(/\s+/g," ")}function re(e){return new RegExp("(?:^|\\s+)"+o.requote(e)+"(?:\\s+|$)","g")}function ie(e){return(e+"").trim().split(/^|\s+/)}function oe(e,t){var n=(e=ie(e).map(ae)).length;return"function"==typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function ae(e){var t=re(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",ne(i+" "+e))):n.setAttribute("class",ne(i.replace(t," ")))}}function se(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function le(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function ce(e){return"function"==typeof e?e:(e=o.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Q&&t.documentElement.namespaceURI===Q?t.createElement(e):t.createElementNS(n,e)}}function ue(){var e=this.parentNode;e&&e.removeChild(this)}function de(e){return{__data__:e}}function fe(e){return function(){return Y(this,e)}}function pe(e){return arguments.length||(e=g),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function he(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,o=e[n],a=0,s=o.length;a<s;a++)(i=o[a])&&t(i,a,n);return e}function me(e){return G(e,ge),e}o.ns={prefix:ee,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),ee.hasOwnProperty(n)?{space:ee[n],local:e}:e}},X.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=o.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))},X.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=ie(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!re(e[i]).test(t))return!1;return!0}for(t in e)this.each(oe(t,e[t]));return this}return this.each(oe(e,t))},X.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(se(n,e[n],t));return this}if(r<2){var i=this.node();return u(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(se(e,t,n))},X.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(le(t,e[t]));return this}return this.each(le(e,t))},X.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},X.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},X.append=function(e){return e=ce(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},X.insert=function(e,t){return e=ce(e),t=K(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},X.remove=function(){return this.each(ue)},X.data=function(e,t){var n,r,i=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(e[i]=r.__data__);return e}function a(e,n){var r,i,o,a=e.length,u=n.length,d=Math.min(a,u),f=new Array(u),p=new Array(u),h=new Array(a);if(t){var m,g=new k,v=new Array(a);for(r=-1;++r<a;)(i=e[r])&&(g.has(m=t.call(i,i.__data__,r))?h[r]=i:g.set(m,i),v[r]=m);for(r=-1;++r<u;)(i=g.get(m=t.call(n,o=n[r],r)))?!0!==i&&(f[r]=i,i.__data__=o):p[r]=de(o),g.set(m,!0);for(r=-1;++r<a;)r in v&&!0!==g.get(v[r])&&(h[r]=e[r])}else{for(r=-1;++r<d;)i=e[r],o=n[r],i?(i.__data__=o,f[r]=i):p[r]=de(o);for(;r<u;++r)p[r]=de(n[r]);for(;r<a;++r)h[r]=e[r]}p.update=f,p.parentNode=f.parentNode=h.parentNode=e.parentNode,s.push(p),l.push(f),c.push(h)}var s=me([]),l=W([]),c=W([]);if("function"==typeof e)for(;++i<o;)a(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],e);return l.enter=function(){return s},l.exit=function(){return c},l},X.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},X.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=fe(e));for(var o=0,a=this.length;o<a;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return W(i)},X.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},X.sort=function(e){e=pe.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},X.each=function(e){return he(this,(function(t,n,r){e.call(t,t.__data__,n,r)}))},X.call=function(e){var t=s(arguments);return e.apply(t[0]=this,t),this},X.empty=function(){return!this.node()},X.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},X.size=function(){var e=0;return he(this,(function(){++e})),e};var ge=[];function ve(e){var t,n;return function(r,i,o){var a,s=e[o].update,l=s.length;for(o!=n&&(n=o,t=0),i>=t&&(t=i+1);!(a=s[t])&&++t<l;);return a}}function ye(e,t,n){var r="__on"+e,i=e.indexOf("."),a=xe;i>0&&(e=e.slice(0,i));var l=be.get(e);function c(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}return l&&(e=l,a=we),i?t?function(){var i=a(t,s(arguments));c.call(this),this.addEventListener(e,this[r]=i,i.$=n),i._=t}:c:t?z:function(){var t,n=new RegExp("^__on([^.]+)"+o.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}}o.selection.enter=me,o.selection.enter.prototype=ge,ge.append=X.append,ge.empty=X.empty,ge.node=X.node,ge.call=X.call,ge.size=X.size,ge.select=function(e){for(var t,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(o=i[c])?(t.push(r[c]=n=e.call(i.parentNode,o.__data__,c,s)),n.__data__=o.__data__):t.push(null)}return W(a)},ge.insert=function(e,t){return arguments.length<2&&(t=ve(this)),X.insert.call(this,e,t)},o.select=function(e){var t;return"string"==typeof e?(t=[$(e,l)]).parentNode=l.documentElement:(t=[e]).parentNode=c(e),W([t])},o.selectAll=function(e){var t;return"string"==typeof e?(t=s(q(e,l))).parentNode=l.documentElement:(t=s(e)).parentNode=null,W([t])},X.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(ye(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(ye(e,t,n))};var be=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function xe(e,t){return function(n){var r=o.event;o.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{o.event=r}}}function we(e,t){var n=xe(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}l&&be.forEach((function(e){"on"+e in l&&be.remove(e)}));var _e,Se=0;function Ce(e){var t=".dragsuppress-"+ ++Se,n="click"+t,r=o.select(u(e)).on("touchmove"+t,Z).on("dragstart"+t,Z).on("selectstart"+t,Z);if(null==_e&&(_e=!("onselectstart"in e)&&N(e.style,"userSelect")),_e){var i=c(e).style,a=i[_e];i[_e]="none"}return function(e){if(r.on(t,null),_e&&(i[_e]=a),e){var o=function(){r.on(n,null)};r.on(n,(function(){Z(),o()}),!0),setTimeout(o,0)}}}o.mouse=function(e){return Me(e,H())};var ke=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Me(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(ke<0){var i=u(e);if(i.scrollX||i.scrollY){var a=(n=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();ke=!(a.f||a.e),n.remove()}}return ke?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function Te(){return o.event.changedTouches[0].identifier}o.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=H().changedTouches),t)for(var r,i=0,o=t.length;i<o;++i)if((r=t[i]).identifier===n)return Me(e,r)},o.behavior.drag=function(){var e=U(i,"drag","dragstart","dragend"),t=null,n=a(z,o.mouse,u,"mousemove","mouseup"),r=a(Te,o.touch,L,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function a(n,r,i,a,s){return function(){var l,c=this,u=o.event.target.correspondingElement||o.event.target,d=c.parentNode,f=e.of(c,arguments),p=0,h=n(),m=".drag"+(null==h?"":"-"+h),g=o.select(i(u)).on(a+m,b).on(s+m,x),v=Ce(u),y=r(d,h);function b(){var e,t,n=r(d,h);n&&(e=n[0]-y[0],t=n[1]-y[1],p|=e|t,y=n,f({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:e,dy:t}))}function x(){r(d,h)&&(g.on(a+m,null).on(s+m,null),v(p),f({type:"dragend"}))}l=t?[(l=t.apply(c,arguments)).x-y[0],l.y-y[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(t=e,i):t},o.rebind(i,e,"on")},o.touches=function(e,t){return arguments.length<2&&(t=H().touches),t?s(t).map((function(t){var n=Me(e,t);return n.identifier=t.identifier,n})):[]};var Ae=1e-6,Ee=Math.PI,Pe=2*Ee,Re=Pe-Ae,Oe=Ee/2,Ie=Ee/180,Le=180/Ee;function De(e){return e>1?Oe:e<-1?-Oe:Math.asin(e)}function Ne(e){return((e=Math.exp(e))+1/e)/2}var Fe=Math.SQRT2;o.interpolateZoom=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],l=t[1],c=t[2],u=s-i,d=l-o,f=u*u+d*d;if(f<1e-12)r=Math.log(c/a)/Fe,n=function(e){return[i+e*u,o+e*d,a*Math.exp(Fe*e*r)]};else{var p=Math.sqrt(f),h=(c*c-a*a+4*f)/(2*a*2*p),m=(c*c-a*a-4*f)/(2*c*2*p),g=Math.log(Math.sqrt(h*h+1)-h),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/Fe,n=function(e){var t,n=e*r,s=Ne(g),l=a/(2*p)*(s*(t=Fe*n+g,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[i+l*u,o+l*d,a*s/Ne(Fe*n+g)]}}return n.duration=1e3*r,n},o.behavior.zoom=function(){var e,t,n,r,i,a,s,c,d,f={x:0,y:0,k:1},p=[960,500],h=je,m=250,g=0,v="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",w=U(_,"zoomstart","zoom","zoomend");function _(e){e.on(v,R).on(Be+".zoom",I).on("dblclick.zoom",L).on(x,O)}function S(e){return[(e[0]-f.x)/f.k,(e[1]-f.y)/f.k]}function C(e){f.k=Math.max(h[0],Math.min(h[1],e))}function k(e,t){t=function(e){return[e[0]*f.k+f.x,e[1]*f.k+f.y]}(t),f.x+=e[0]-t[0],f.y+=e[1]-t[1]}function M(e,n,r,i){e.__chart__={x:f.x,y:f.y,k:f.k},C(Math.pow(2,i)),k(t=n,r),e=o.select(e),m>0&&(e=e.transition().duration(m)),e.call(_.event)}function T(){s&&s.domain(a.range().map((function(e){return(e-f.x)/f.k})).map(a.invert)),d&&d.domain(c.range().map((function(e){return(e-f.y)/f.k})).map(c.invert))}function A(e){g++||e({type:"zoomstart"})}function E(e){T(),e({type:"zoom",scale:f.k,translate:[f.x,f.y]})}function P(e){--g||(e({type:"zoomend"}),t=null)}function R(){var e=this,t=w.of(e,arguments),n=0,r=o.select(u(e)).on(y,s).on(b,l),i=S(o.mouse(e)),a=Ce(e);function s(){n=1,k(o.mouse(e),i),E(t)}function l(){r.on(y,null).on(b,null),a(n),P(t)}Ji.call(e),A(t)}function O(){var e,t=this,n=w.of(t,arguments),r={},a=0,s=".zoom-"+o.event.changedTouches[0].identifier,l="touchmove"+s,c="touchend"+s,u=[],d=o.select(t),p=Ce(t);function h(){var n=o.touches(t);return e=f.k,n.forEach((function(e){e.identifier in r&&(r[e.identifier]=S(e))})),n}function m(){var e=o.event.target;o.select(e).on(l,g).on(c,y),u.push(e);for(var n=o.event.changedTouches,s=0,d=n.length;s<d;++s)r[n[s].identifier]=null;var p=h(),m=Date.now();if(1===p.length){if(m-i<500){var v=p[0];M(t,v,r[v.identifier],Math.floor(Math.log(f.k)/Math.LN2)+1),Z()}i=m}else if(p.length>1){v=p[0];var b=p[1],x=v[0]-b[0],w=v[1]-b[1];a=x*x+w*w}}function g(){var s,l,c,u,d=o.touches(t);Ji.call(t);for(var f=0,p=d.length;f<p;++f,u=null)if(c=d[f],u=r[c.identifier]){if(l)break;s=c,l=u}if(u){var h=(h=c[0]-s[0])*h+(h=c[1]-s[1])*h,m=a&&Math.sqrt(h/a);s=[(s[0]+c[0])/2,(s[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],C(m*e)}i=null,k(s,l),E(n)}function y(){if(o.event.touches.length){for(var e=o.event.changedTouches,t=0,i=e.length;t<i;++t)delete r[e[t].identifier];for(var a in r)return void h()}o.selectAll(u).on(s,null),d.on(v,R).on(x,O),p(),P(n)}m(),A(n),d.on(v,null).on(x,m)}function I(){var i=w.of(this,arguments);r?clearTimeout(r):(Ji.call(this),e=S(t=n||o.mouse(this)),A(i)),r=setTimeout((function(){r=null,P(i)}),50),Z(),C(Math.pow(2,.002*ze())*f.k),k(t,e),E(i)}function L(){var e=o.mouse(this),t=Math.log(f.k)/Math.LN2;M(this,e,S(e),o.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return Be||(Be="onwheel"in l?(ze=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(ze=function(){return o.event.wheelDelta},"mousewheel"):(ze=function(){return-o.event.detail},"MozMousePixelScroll")),_.event=function(e){e.each((function(){var e=w.of(this,arguments),n=f;to?o.select(this).transition().each("start.zoom",(function(){f=this.__chart__||{x:0,y:0,k:1},A(e)})).tween("zoom:zoom",(function(){var r=p[0],i=p[1],a=t?t[0]:r/2,s=t?t[1]:i/2,l=o.interpolateZoom([(a-f.x)/f.k,(s-f.y)/f.k,r/f.k],[(a-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(t){var n=l(t),i=r/n[2];this.__chart__=f={x:a-n[0]*i,y:s-n[1]*i,k:i},E(e)}})).each("interrupt.zoom",(function(){P(e)})).each("end.zoom",(function(){P(e)})):(this.__chart__=f,A(e),E(e),P(e))}))},_.translate=function(e){return arguments.length?(f={x:+e[0],y:+e[1],k:f.k},T(),_):[f.x,f.y]},_.scale=function(e){return arguments.length?(f={x:f.x,y:f.y,k:null},C(+e),T(),_):f.k},_.scaleExtent=function(e){return arguments.length?(h=null==e?je:[+e[0],+e[1]],_):h},_.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],_):n},_.size=function(e){return arguments.length?(p=e&&[+e[0],+e[1]],_):p},_.duration=function(e){return arguments.length?(m=+e,_):m},_.x=function(e){return arguments.length?(s=e,a=e.copy(),f={x:0,y:0,k:1},_):s},_.y=function(e){return arguments.length?(d=e,c=e.copy(),f={x:0,y:0,k:1},_):d},o.rebind(_,w,"on")};var ze,Be,je=[0,1/0];function Ze(){}function He(e,t,n){return this instanceof He?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof He?new He(e.h,e.s,e.l):ct(""+e,ut,He):new He(e,t,n)}o.color=Ze,Ze.prototype.toString=function(){return this.rgb()+""},o.hsl=He;var Ue=He.prototype=new Ze;function Ve(e,t,n){var r,i;function o(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new it(o(e+120),o(e),o(e-120))}function Ge(e,t,n){return this instanceof Ge?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Ge?new Ge(e.h,e.c,e.l):et(e instanceof qe?e.l:(e=dt((e=o.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ge(e,t,n)}Ue.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,this.l/e)},Ue.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,e*this.l)},Ue.rgb=function(){return Ve(this.h,this.s,this.l)},o.hcl=Ge;var We=Ge.prototype=new Ze;function $e(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new qe(n,Math.cos(e*=Ie)*t,Math.sin(e)*t)}function qe(e,t,n){return this instanceof qe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof qe?new qe(e.l,e.a,e.b):e instanceof Ge?$e(e.h,e.c,e.l):dt((e=it(e)).r,e.g,e.b):new qe(e,t,n)}We.brighter=function(e){return new Ge(this.h,this.c,Math.min(100,this.l+Ye*(arguments.length?e:1)))},We.darker=function(e){return new Ge(this.h,this.c,Math.max(0,this.l-Ye*(arguments.length?e:1)))},We.rgb=function(){return $e(this.h,this.c,this.l).rgb()},o.lab=qe;var Ye=18,Xe=.95047,Ke=1.08883,Je=qe.prototype=new Ze;function Qe(e,t,n){var r=(e+16)/116,i=r+t/500,o=r-n/200;return new it(rt(3.2404542*(i=tt(i)*Xe)-1.5371385*(r=1*tt(r))-.4985314*(o=tt(o)*Ke)),rt(-.969266*i+1.8760108*r+.041556*o),rt(.0556434*i-.2040259*r+1.0572252*o))}function et(e,t,n){return e>0?new Ge(Math.atan2(n,t)*Le,Math.sqrt(t*t+n*n),e):new Ge(NaN,NaN,e)}function tt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function nt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function rt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function it(e,t,n){return this instanceof it?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof it?new it(e.r,e.g,e.b):ct(""+e,it,Ve):new it(e,t,n)}function ot(e){return new it(e>>16,e>>8&255,255&e)}function at(e){return ot(e)+""}Je.brighter=function(e){return new qe(Math.min(100,this.l+Ye*(arguments.length?e:1)),this.a,this.b)},Je.darker=function(e){return new qe(Math.max(0,this.l-Ye*(arguments.length?e:1)),this.a,this.b)},Je.rgb=function(){return Qe(this.l,this.a,this.b)},o.rgb=it;var st=it.prototype=new Ze;function lt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ct(e,t,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(pt(i[0]),pt(i[1]),pt(i[2]))}return(o=ht.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),t(a,s,l))}function ut(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(t<n?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new He(r,i,l)}function dt(e,t,n){var r=nt((.4124564*(e=ft(e))+.3575761*(t=ft(t))+.1804375*(n=ft(n)))/Xe),i=nt((.2126729*e+.7151522*t+.072175*n)/1);return qe(116*i-16,500*(r-i),200*(i-nt((.0193339*e+.119192*t+.9503041*n)/Ke)))}function ft(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}st.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new it(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new it(i,i,i)},st.darker=function(e){return new it((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},st.hsl=function(){return ut(this.r,this.g,this.b)},st.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var ht=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function mt(e){return"function"==typeof e?e:function(){return e}}function gt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),vt(t,n,e,r)}}function vt(e,t,n,r){var i={},a=o.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function d(){var e,t=c.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(c)||t>=200&&t<300||304===t){try{e=n.call(i,c)}catch(e){return void a.error.call(i,e)}a.load.call(i,e)}else a.error.call(i,c)}return self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(e)&&(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=d:c.onreadystatechange=function(){c.readyState>3&&d()},c.onprogress=function(e){var t=o.event;o.event=e;try{a.progress.call(i,c)}finally{o.event=t}},i.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",i)},i.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",i):t},i.responseType=function(e){return arguments.length?(u=e,i):u},i.response=function(e){return n=e,i},["get","post"].forEach((function(e){i[e]=function(){return i.send.apply(i,[e].concat(s(arguments)))}})),i.send=function(n,r,o){if(2===arguments.length&&"function"==typeof r&&(o=r,r=null),c.open(n,e,!0),null==t||"accept"in l||(l.accept=t+",*/*"),c.setRequestHeader)for(var s in l)c.setRequestHeader(s,l[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=u&&(c.responseType=u),null!=o&&i.on("error",o).on("load",(function(e){o(null,e)})),a.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},o.rebind(i,a,"on"),null==r?i:i.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(r))}ht.forEach((function(e,t){ht.set(e,ot(t))})),o.functor=mt,o.xhr=gt(L),o.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=vt(e,t,null==n?o:a(n),r);return i.row=function(e){return arguments.length?i.response(null==(n=e)?o:a(e)):n},i}function o(e){return i.parse(e.responseText)}function a(e){return function(t){return i.parse(t.responseText,e)}}function s(t){return t.map(l).join(e)}function l(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var n;return i.parseRows(e,(function(e,r){if(n)return n(e,r-1);var i=function(t){for(var n={},r=e.length,i=0;i<r;++i)n[e[i]]=t[i];return n};n=t?function(e,n){return t(i(e),n)}:i}))},i.parseRows=function(e,t){var n,i,o={},a={},s=[],l=e.length,c=0,u=0;function d(){if(c>=l)return a;if(i)return i=!1,o;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return c=n+2,13===(s=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++c):10===s&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=e.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===e.charCodeAt(c)&&(++c,++u);else if(s!==r)continue;return e.slice(t,c-u)}return e.slice(t)}for(;(n=d())!==a;){for(var f=[];n!==o&&n!==a;)f.push(n),n=d();t&&null==(f=t(f,u++))||s.push(f)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new I,r=[];return t.forEach((function(e){for(var t in e)n.has(t)||r.push(n.add(t))})),[r.map(l).join(e)].concat(t.map((function(t){return r.map((function(e){return l(t[e])})).join(e)}))).join("\n")},i.formatRows=function(e){return e.map(s).join("\n")},i},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var yt,bt,xt,wt,_t=this[N(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function St(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i={c:e,t:n+t,n:null};return bt?bt.n=i:yt=i,bt=i,xt||(wt=clearTimeout(wt),xt=1,_t(Ct)),i}function Ct(){var e=kt(),t=Mt()-e;t>24?(isFinite(t)&&(clearTimeout(wt),wt=setTimeout(Ct,t)),xt=0):(xt=1,_t(Ct))}function kt(){for(var e=Date.now(),t=yt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Mt(){for(var e,t=yt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:yt=t.n;return bt=e,n}function Tt(e){return e[0]}function At(e){return e[1]}function Et(e){for(var t,n,r,i=e.length,o=[0,1],a=2,s=2;s<i;s++){for(;a>1&&(t=e[o[a-2]],n=e[o[a-1]],r=e[s],(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])<=0);)--a;o[a++]=s}return o.slice(0,a)}function Pt(e,t){return e[0]-t[0]||e[1]-t[1]}o.timer=function(){St.apply(this,arguments)},o.timer.flush=function(){kt(),Mt()},o.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},o.geom={},o.geom.hull=function(e){var t=Tt,n=At;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,i=mt(t),o=mt(n),a=e.length,s=[],l=[];for(r=0;r<a;r++)s.push([+i.call(this,e[r],r),+o.call(this,e[r],r),r]);for(s.sort(Pt),r=0;r<a;r++)l.push([s[r][0],-s[r][1]]);var c=Et(s),u=Et(l),d=u[0]===c[0],f=u[u.length-1]===c[c.length-1],p=[];for(r=c.length-1;r>=0;--r)p.push(e[s[c[r]][2]]);for(r=+d;r<u.length-f;++r)p.push(e[s[u[r]][2]]);return p}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},o.geom.polygon=function(e){return G(e,Rt),e};var Rt=o.geom.polygon.prototype=[];function Ot(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function It(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,l=e[1],c=n[1],u=t[1]-l,d=r[1]-c,f=(s*(l-c)-d*(i-o))/(d*a-s*u);return[i+f*a,l+f*u]}function Lt(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}Rt.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},Rt.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},Rt.clip=function(e){for(var t,n,r,i,o,a,s=Lt(e),l=-1,c=this.length-Lt(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,i=this[l],o=t[(r=t.length-s)-1],n=-1;++n<r;)Ot(a=t[n],u,i)?(Ot(o,u,i)||e.push(It(o,a,u,i)),e.push(a)):Ot(o,u,i)&&e.push(It(o,a,u,i)),o=a;s&&e.push(e[0]),u=i}return e};var Dt,Nt,Ft,zt,Bt,jt=[],Zt=[];function Ht(){sn(this),this.edge=this.site=this.circle=null}function Ut(e){var t=jt.pop()||new Ht;return t.site=e,t}function Vt(e){Qt(e),Ft.remove(e),jt.push(e),sn(e)}function Gt(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];Vt(e);for(var l=o;l.circle&&_(n-l.circle.x)<Ae&&_(r-l.circle.cy)<Ae;)o=l.P,s.unshift(l),Vt(l),l=o;s.unshift(l),Qt(l);for(var c=a;c.circle&&_(n-c.circle.x)<Ae&&_(r-c.circle.cy)<Ae;)a=c.N,s.push(c),Vt(c),c=a;s.push(c),Qt(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],rn(c.edge,l.site,c.site,i);l=s[0],(c=s[d-1]).edge=nn(l.site,c.site,null,i),Jt(l),Jt(c)}function Wt(e){for(var t,n,r,i,o=e.x,a=e.y,s=Ft._;s;)if((r=$t(s,a)-o)>Ae)s=s.L;else{if(!((i=o-qt(s,a))>Ae)){r>-Ae?(t=s.P,n=s):i>-Ae?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Ut(e);if(Ft.insert(t,l),t||n){if(t===n)return Qt(t),n=Ut(t.site),Ft.insert(l,n),l.edge=n.edge=nn(t.site,l.site),Jt(t),void Jt(n);if(n){Qt(t),Qt(n);var c=t.site,u=c.x,d=c.y,f=e.x-u,p=e.y-d,h=n.site,m=h.x-u,g=h.y-d,v=2*(f*g-p*m),y=f*f+p*p,b=m*m+g*g,x={x:(g*y-p*b)/v+u,y:(f*b-m*y)/v+d};rn(n.edge,c,h,x),l.edge=nn(c,e,null,x),n.edge=nn(e,h,null,x),Jt(t),Jt(n)}else l.edge=nn(t.site,l.site)}}function $t(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,c=l-t;if(!c)return s;var u=s-r,d=1/o-1/c,f=u/c;return d?(-f+Math.sqrt(f*f-2*d*(u*u/(-2*c)-l+c/2+i-o/2)))/d+r:(r+s)/2}function qt(e,t){var n=e.N;if(n)return $t(n,t);var r=e.site;return r.y===t?r.x:1/0}function Yt(e){this.site=e,this.edges=[]}function Xt(e,t){return t.angle-e.angle}function Kt(){sn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jt(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,c=r.y-s,u=o.x-a,d=2*(l*(g=o.y-s)-c*u);if(!(d>=-1e-12)){var f=l*l+c*c,p=u*u+g*g,h=(g*f-c*p)/d,m=(l*p-u*f)/d,g=m+s,v=Zt.pop()||new Kt;v.arc=e,v.site=i,v.x=h+a,v.y=g+Math.sqrt(h*h+m*m),v.cy=g,e.circle=v;for(var y=null,b=Bt._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Bt.insert(y,v),y||(zt=v)}}}}function Qt(e){var t=e.circle;t&&(t.P||(zt=t.N),Bt.remove(t),Zt.push(t),sn(t),e.circle=null)}function en(e,t){var n=e.b;if(n)return!0;var r,i,o=e.a,a=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,f=u.x,p=u.y,h=d.x,m=d.y,g=(f+h)/2,v=(p+m)/2;if(m===p){if(g<a||g>=s)return;if(f>h){if(o){if(o.y>=c)return}else o={x:g,y:l};n={x:g,y:c}}else{if(o){if(o.y<l)return}else o={x:g,y:c};n={x:g,y:l}}}else if(i=v-(r=(f-h)/(m-p))*g,r<-1||r>1)if(f>h){if(o){if(o.y>=c)return}else o={x:(l-i)/r,y:l};n={x:(c-i)/r,y:c}}else{if(o){if(o.y<l)return}else o={x:(c-i)/r,y:c};n={x:(l-i)/r,y:l}}else if(p<m){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return e.a=o,e.b=n,!0}function tn(e,t){this.l=e,this.r=t,this.a=this.b=null}function nn(e,t,n,r){var i=new tn(e,t);return Dt.push(i),n&&rn(i,e,t,n),r&&rn(i,t,e,r),Nt[e.i].edges.push(new on(i,e,t)),Nt[t.i].edges.push(new on(i,t,e)),i}function rn(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function on(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function an(){this._=null}function sn(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ln(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function cn(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function un(e){for(;e.L;)e=e.L;return e}function dn(e,t){var n,r,i,o=e.sort(fn).pop();for(Dt=[],Nt=new Array(e.length),Ft=new an,Bt=new an;;)if(i=zt,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(Nt[o.i]=new Yt(o),Wt(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;Gt(i.arc)}t&&(function(e){for(var t,n,r,i,o,a=Dt,s=(n=e[0][0],r=e[0][1],i=e[1][0],o=e[1][1],function(e){var t,a=e.a,s=e.b,l=a.x,c=a.y,u=0,d=1,f=s.x-l,p=s.y-c;if(t=n-l,f||!(t>0)){if(t/=f,f<0){if(t<u)return;t<d&&(d=t)}else if(f>0){if(t>d)return;t>u&&(u=t)}if(t=i-l,f||!(t<0)){if(t/=f,f<0){if(t>d)return;t>u&&(u=t)}else if(f>0){if(t<u)return;t<d&&(d=t)}if(t=r-c,p||!(t>0)){if(t/=p,p<0){if(t<u)return;t<d&&(d=t)}else if(p>0){if(t>d)return;t>u&&(u=t)}if(t=o-c,p||!(t<0)){if(t/=p,p<0){if(t>d)return;t>u&&(u=t)}else if(p>0){if(t<u)return;t<d&&(d=t)}return u>0&&(e.a={x:l+u*f,y:c+u*p}),d<1&&(e.b={x:l+d*f,y:c+d*p}),e}}}}}),l=a.length;l--;)(!en(t=a[l],e)||!s(t)||_(t.a.x-t.b.x)<Ae&&_(t.a.y-t.b.y)<Ae)&&(t.a=t.b=null,a.splice(l,1))}(t),function(e){for(var t,n,r,i,o,a,s,l,c,u,d=e[0][0],f=e[1][0],p=e[0][1],h=e[1][1],m=Nt,g=m.length;g--;)if((o=m[g])&&o.prepare())for(l=(s=o.edges).length,a=0;a<l;)r=(u=s[a].end()).x,i=u.y,t=(c=s[++a%l].start()).x,n=c.y,(_(r-t)>Ae||_(i-n)>Ae)&&(s.splice(a,0,new on((v=o.site,y=u,b=_(r-d)<Ae&&h-i>Ae?{x:d,y:_(t-d)<Ae?n:h}:_(i-h)<Ae&&f-r>Ae?{x:_(n-h)<Ae?t:f,y:h}:_(r-f)<Ae&&i-p>Ae?{x:f,y:_(t-f)<Ae?n:p}:_(i-p)<Ae&&r-d>Ae?{x:_(n-p)<Ae?t:d,y:p}:null,x=void 0,(x=new tn(v,null)).a=y,x.b=b,Dt.push(x),x),o.site,null)),++l);var v,y,b,x}(t));var a={cells:Nt,edges:Dt};return Ft=Bt=Dt=Nt=null,a}function fn(e,t){return t.y-e.y||t.x-e.x}Yt.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Xt),t.length},on.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},an.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=un(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ln(this,n),n=(e=n).U),n.C=!1,r.C=!0,cn(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(cn(this,n),n=(e=n).U),n.C=!1,r.C=!0,ln(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?un(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,ln(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,cn(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ln(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,cn(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ln(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,cn(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},o.geom.voronoi=function(e){var t=Tt,n=At,r=t,i=n,o=pn;if(e)return a(e);function a(e){var t=new Array(e.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return dn(s(e),o).cells.forEach((function(o,s){var l=o.edges,c=o.site;(t[s]=l.length?l.map((function(e){var t=e.start();return[t.x,t.y]})):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(r(e,t)/Ae)*Ae,y:Math.round(i(e,t)/Ae)*Ae,i:t}}))}return a.links=function(e){return dn(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},a.triangles=function(e){var t=[];return dn(s(e)).cells.forEach((function(n,r){for(var i,o,a,s,l=n.site,c=n.edges.sort(Xt),u=-1,d=c.length,f=c[d-1].edge,p=f.l===l?f.r:f.l;++u<d;)i=p,p=(f=c[u].edge).l===l?f.r:f.l,r<i.i&&r<p.i&&(a=i,s=p,((o=l).x-s.x)*(a.y-o.y)-(o.x-a.x)*(s.y-o.y)<0)&&t.push([e[r],e[i.i],e[p.i]])})),t},a.x=function(e){return arguments.length?(r=mt(t=e),a):t},a.y=function(e){return arguments.length?(i=mt(n=e),a):n},a.clipExtent=function(e){return arguments.length?(o=null==e?pn:e,a):o===pn?null:o},a.size=function(e){return arguments.length?a.clipExtent(e&&[[0,0],e]):o===pn?null:o&&o[1]},a};var pn=[[-1e6,-1e6],[1e6,1e6]];function hn(e){return e.x}function mn(e){return e.y}function gn(e,t,n,r,i,o){if(!e(t,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=t.nodes;l[0]&&gn(e,l[0],n,r,a,s),l[1]&&gn(e,l[1],a,r,i,s),l[2]&&gn(e,l[2],n,s,a,o),l[3]&&gn(e,l[3],a,s,i,o)}}function vn(e,t,n,r,i,o,a){var s,l=1/0;return function e(c,u,d,f,p){if(!(u>o||d>a||f<r||p<i)){if(h=c.point){var h,m=t-c.x,g=n-c.y,v=m*m+g*g;if(v<l){var y=Math.sqrt(l=v);r=t-y,i=n-y,o=t+y,a=n+y,s=h}}for(var b=c.nodes,x=.5*(u+f),w=.5*(d+p),_=(n>=w)<<1|t>=x,S=_+4;_<S;++_)if(c=b[3&_])switch(3&_){case 0:e(c,u,d,x,w);break;case 1:e(c,x,d,f,w);break;case 2:e(c,u,w,x,p);break;case 3:e(c,x,w,f,p)}}}(e,r,i,o,a),s}function yn(e,t){e=o.rgb(e),t=o.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,s=t.g-r,l=t.b-i;return function(e){return"#"+lt(Math.round(n+a*e))+lt(Math.round(r+s*e))+lt(Math.round(i+l*e))}}function bn(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Cn(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function xn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wn(e,t){var n,r,i,o=_n.lastIndex=Sn.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=_n.exec(e))&&(r=Sn.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:xn(n,r)})),o=Sn.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}o.geom.delaunay=function(e){return o.geom.voronoi().triangles(e)},o.geom.quadtree=function(e,t,n,r,i){var o,a=Tt,s=At;if(o=arguments.length)return a=hn,s=mn,3===o&&(i=n,r=t,n=t=0),l(e);function l(e){var l,c,u,d,f,p,h,m,g,v=mt(a),y=mt(s);if(null!=t)p=t,h=n,m=r,g=i;else if(m=g=-(p=h=1/0),c=[],u=[],f=e.length,o)for(d=0;d<f;++d)(l=e[d]).x<p&&(p=l.x),l.y<h&&(h=l.y),l.x>m&&(m=l.x),l.y>g&&(g=l.y),c.push(l.x),u.push(l.y);else for(d=0;d<f;++d){var b=+v(l=e[d],d),x=+y(l,d);b<p&&(p=b),x<h&&(h=x),b>m&&(m=b),x>g&&(g=x),c.push(b),u.push(x)}var w=m-p,S=g-h;function C(e,t,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(_(l-n)+_(c-r)<.01)k(e,t,n,r,i,o,a,s);else{var u=e.point;e.x=e.y=e.point=null,k(e,u,l,c,i,o,a,s),k(e,t,n,r,i,o,a,s)}else e.x=n,e.y=r,e.point=t}else k(e,t,n,r,i,o,a,s)}function k(e,t,n,r,i,o,a,s){var l=.5*(i+a),c=.5*(o+s),u=n>=l,d=r>=c,f=d<<1|u;e.leaf=!1,u?i=l:a=l,d?o=c:s=c,C(e=e.nodes[f]||(e.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,i,o,a,s)}w>S?g=h+w:m=p+S;var M={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){C(M,e,+v(e,++d),+y(e,d),p,h,m,g)},visit:function(e){gn(e,M,p,h,m,g)},find:function(e){return vn(M,e[0],e[1],p,h,m,g)}};if(d=-1,null==t){for(;++d<f;)C(M,e[d],c[d],u[d],p,h,m,g);--d}else e.forEach(M.add);return c=u=e=l=null,M}return l.x=function(e){return arguments.length?(a=e,l):a},l.y=function(e){return arguments.length?(s=e,l):s},l.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),l):null==t?null:[[t,n],[r,i]]},l.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),l):null==t?null:[r-t,i-n]},l},o.interpolateRgb=yn,o.interpolateObject=bn,o.interpolateNumber=xn,o.interpolateString=wn;var _n=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sn=new RegExp(_n.source,"g");function Cn(e,t){for(var n,r=o.interpolators.length;--r>=0&&!(n=o.interpolators[r](e,t)););return n}function kn(e,t){var n,r=[],i=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(Cn(e[n],t[n]));for(;n<o;++n)i[n]=e[n];for(;n<a;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}o.interpolate=Cn,o.interpolators=[function(e,t){var n=typeof t;return("string"===n?ht.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?yn:wn:t instanceof Ze?yn:Array.isArray(t)?kn:"object"===n&&isNaN(t)?bn:xn)(e,t)}],o.interpolateArray=kn;var Mn=function(){return L},Tn=o.map({linear:Mn,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return On},cubic:function(){return In},sin:function(){return Dn},exp:function(){return Nn},circle:function(){return Fn},elastic:function(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Pe*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Pe/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return zn}}),An=o.map({in:L,out:Pn,"in-out":Rn,"out-in":function(e){return Rn(Pn(e))}});function En(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Pn(e){return function(t){return 1-e(1-t)}}function Rn(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function On(e){return e*e}function In(e){return e*e*e}function Ln(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Dn(e){return 1-Math.cos(e*Oe)}function Nn(e){return Math.pow(2,10*(e-1))}function Fn(e){return 1-Math.sqrt(1-e*e)}function zn(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Bn(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function jn(e){var t,n,r,i=[e.a,e.b],o=[e.c,e.d],a=Hn(i),s=Zn(i,o),l=Hn(((t=o)[0]+=(r=-s)*(n=i)[0],t[1]+=r*n[1],t))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Le,this.translate=[e.e,e.f],this.scale=[a,l],this.skew=l?Math.atan2(s,l)*Le:0}function Zn(e,t){return e[0]*t[0]+e[1]*t[1]}function Hn(e){var t=Math.sqrt(Zn(e,e));return t&&(e[0]/=t,e[1]/=t),t}o.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=Tn.get(n)||Mn,En((r=An.get(r)||L)(n.apply(null,a.call(arguments,1))))},o.interpolateHcl=function(e,t){e=o.hcl(e),t=o.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,s=t.c-r,l=t.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:a<-180&&(a+=360),function(e){return $e(n+a*e,r+s*e,i+l*e)+""}},o.interpolateHsl=function(e,t){e=o.hsl(e),t=o.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,s=t.s-r,l=t.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:a<-180&&(a+=360),function(e){return Ve(n+a*e,r+s*e,i+l*e)+""}},o.interpolateLab=function(e,t){e=o.lab(e),t=o.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,s=t.a-r,l=t.b-i;return function(e){return Qe(n+a*e,r+s*e,i+l*e)+""}},o.interpolateRound=Bn,o.transform=function(e){var t=l.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new jn(n?n.matrix:Un)})(e)},jn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Un={a:1,b:0,c:0,d:1,e:0,f:0};function Vn(e){return e.length?e.pop()+",":""}function Gn(e,t){var n=[],r=[];return e=o.transform(e),t=o.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:xn(e[0],t[0])},{i:i-2,x:xn(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,r),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Vn(n)+"rotate(",null,")")-2,x:xn(e,t)})):t&&n.push(Vn(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,r),function(e,t,n,r){e!==t?r.push({i:n.push(Vn(n)+"skewX(",null,")")-2,x:xn(e,t)}):t&&n.push(Vn(n)+"skewX("+t+")")}(e.skew,t.skew,n,r),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Vn(n)+"scale(",null,",",null,")");r.push({i:i-4,x:xn(e[0],t[0])},{i:i-2,x:xn(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(Vn(n)+"scale("+t+")")}(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,o=r.length;++i<o;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Wn(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function $n(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function qn(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;for(var n=Yn(e),r=Yn(t),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Yn(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Xn(e){e.fixed|=2}function Kn(e){e.fixed&=-7}function Jn(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Qn(e){e.fixed&=-5}function er(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var o,a=e.nodes,s=a.length,l=-1;++l<s;)null!=(o=a[l])&&(er(o,t,n),e.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=t*n[e.point.index];e.charge+=e.pointCharge=c,r+=c*e.point.x,i+=c*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}o.interpolateTransform=Gn,o.layout={},o.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(qn(e[n]));return t}},o.layout.chord=function(){var e,t,n,r,i,a,s,l={},c=0;function u(){var l,u,f,p,h,m={},g=[],v=o.range(r),y=[];for(e=[],t=[],l=0,p=-1;++p<r;){for(u=0,h=-1;++h<r;)u+=n[p][h];g.push(u),y.push(o.range(r)),l+=u}for(i&&v.sort((function(e,t){return i(g[e],g[t])})),a&&y.forEach((function(e,t){e.sort((function(e,r){return a(n[t][e],n[t][r])}))})),l=(Pe-c*r)/l,u=0,p=-1;++p<r;){for(f=u,h=-1;++h<r;){var b=v[p],x=y[b][h],w=n[b][x],_=u,S=u+=w*l;m[b+"-"+x]={index:b,subindex:x,startAngle:_,endAngle:S,value:w}}t[b]={index:b,startAngle:f,endAngle:u,value:g[b]},u+=c}for(p=-1;++p<r;)for(h=p-1;++h<r;){var C=m[p+"-"+h],k=m[h+"-"+p];(C.value||k.value)&&e.push(C.value<k.value?{source:k,target:C}:{source:C,target:k})}s&&d()}function d(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return l.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,e=t=null,l):n},l.padding=function(n){return arguments.length?(c=n,e=t=null,l):c},l.sortGroups=function(n){return arguments.length?(i=n,e=t=null,l):i},l.sortSubgroups=function(t){return arguments.length?(a=t,e=null,l):a},l.sortChords=function(t){return arguments.length?(s=t,e&&d(),l):s},l.chords=function(){return e||u(),e},l.groups=function(){return t||u(),t},l},o.layout.force=function(){var e,t,n,r,i,a,s={},l=o.dispatch("start","tick","end"),c=[1,1],u=.9,d=tr,f=nr,p=-30,h=rr,m=.1,g=.64,v=[],y=[];function b(e){return function(t,n,r,i){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=i-n,l=o*o+a*a;if(s*s/g<l){if(l<h){var c=t.charge/l;e.px-=o*c,e.py-=a*c}return!0}t.point&&l&&l<h&&(c=t.pointCharge/l,e.px-=o*c,e.py-=a*c)}return!t.charge}}function x(e){e.px=o.event.x,e.py=o.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,l.end({type:"end",alpha:n=0}),!0;var t,s,d,f,h,g,x,w,_,S=v.length,C=y.length;for(s=0;s<C;++s)f=(d=y[s]).source,(g=(w=(h=d.target).x-f.x)*w+(_=h.y-f.y)*_)&&(w*=g=n*i[s]*((g=Math.sqrt(g))-r[s])/g,_*=g,h.x-=w*(x=f.weight+h.weight?f.weight/(f.weight+h.weight):.5),h.y-=_*x,f.x+=w*(x=1-x),f.y+=_*x);if((x=n*m)&&(w=c[0]/2,_=c[1]/2,s=-1,x))for(;++s<S;)(d=v[s]).x+=(w-d.x)*x,d.y+=(_-d.y)*x;if(p)for(er(t=o.geom.quadtree(v),n,a),s=-1;++s<S;)(d=v[s]).fixed||t.visit(b(d));for(s=-1;++s<S;)(d=v[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);l.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(h=e*e,s):Math.sqrt(h)},s.gravity=function(e){return arguments.length?(m=+e,s):m},s.theta=function(e){return arguments.length?(g=e*e,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:n=0})):t>0&&(l.start({type:"start",alpha:n=t}),e=St(s.tick)),s):n},s.start=function(){var e,t,n,o=v.length,l=y.length,u=c[0],h=c[1];for(e=0;e<o;++e)(n=v[e]).index=e,n.weight=0;for(e=0;e<l;++e)"number"==typeof(n=y[e]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<o;++e)n=v[e],isNaN(n.x)&&(n.x=m("x",u)),isNaN(n.y)&&(n.y=m("y",h)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof d)for(e=0;e<l;++e)r[e]=+d.call(this,y[e],e);else for(e=0;e<l;++e)r[e]=d;if(i=[],"function"==typeof f)for(e=0;e<l;++e)i[e]=+f.call(this,y[e],e);else for(e=0;e<l;++e)i[e]=f;if(a=[],"function"==typeof p)for(e=0;e<o;++e)a[e]=+p.call(this,v[e],e);else for(e=0;e<o;++e)a[e]=p;function m(n,r){if(!t){for(t=new Array(o),c=0;c<o;++c)t[c]=[];for(c=0;c<l;++c){var i=y[c];t[i.source.index].push(i.target),t[i.target.index].push(i.source)}}for(var a,s=t[e],c=-1,u=s.length;++c<u;)if(!isNaN(a=s[c][n]))return a;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=o.behavior.drag().origin(L).on("dragstart.force",Xn).on("drag.force",x).on("dragend.force",Kn)),!arguments.length)return t;this.on("mouseover.force",Jn).on("mouseout.force",Qn).call(t)},o.rebind(s,l,"on")};var tr=20,nr=1,rr=1/0;function ir(e,t){return o.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ur,e}function or(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ar(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function sr(e){return e.children}function lr(e){return e.value}function cr(e,t){return t.value-e.value}function ur(e){return o.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}o.layout.hierarchy=function(){var e=cr,t=sr,n=lr;function r(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(c=t.call(r,o,o.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)a.push(u=c[l]),u.parent=o,u.depth=o.depth+1;n&&(o.value=0),o.children=c}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return ar(i,(function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)})),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(or(e,(function(e){e.children&&(e.value=0)})),ar(e,(function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},r},o.layout.partition=function(){var e=o.layout.hierarchy(),t=[1,1];function n(e,t,r,i){var o=e.children;if(e.x=t,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,l,c=-1;for(r=e.value?r/e.value:0;++c<a;)n(s=o[c],t,l=s.value*r,i),t+=l}}function r(e){var t=e.children,n=0;if(t&&(i=t.length))for(var i,o=-1;++o<i;)n=Math.max(n,r(t[o]));return 1+n}function i(i,o){var a=e.call(this,i,o);return n(a[0],0,t[0],t[1]/r(a[0])),a}return i.size=function(e){return arguments.length?(t=e,i):t},ir(i,e)},o.layout.pie=function(){var e=Number,t=dr,n=0,r=Pe,i=0;function a(s){var l,c=s.length,u=s.map((function(t,n){return+e.call(a,t,n)})),d=+("function"==typeof n?n.apply(this,arguments):n),f=("function"==typeof r?r.apply(this,arguments):r)-d,p=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),h=p*(f<0?-1:1),m=o.sum(u),g=m?(f-c*h)/m:0,v=o.range(c),y=[];return null!=t&&v.sort(t===dr?function(e,t){return u[t]-u[e]}:function(e,n){return t(s[e],s[n])}),v.forEach((function(e){y[e]={data:s[e],value:l=u[e],startAngle:d,endAngle:d+=l*g+h,padAngle:p}})),y}return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(e){return arguments.length?(t=e,a):t},a.startAngle=function(e){return arguments.length?(n=e,a):n},a.endAngle=function(e){return arguments.length?(r=e,a):r},a.padAngle=function(e){return arguments.length?(i=e,a):i},a};var dr={};function fr(e){return e.x}function pr(e){return e.y}function hr(e,t,n){e.y0=t,e.y=n}o.layout.stack=function(){var e=L,t=vr,n=yr,r=hr,i=fr,a=pr;function s(l,c){if(!(p=l.length))return l;var u=l.map((function(t,n){return e.call(s,t,n)})),d=u.map((function(e){return e.map((function(e,t){return[i.call(s,e,t),a.call(s,e,t)]}))})),f=t.call(s,d,c);u=o.permute(u,f),d=o.permute(d,f);var p,h,m,g,v=n.call(s,d,c),y=u[0].length;for(m=0;m<y;++m)for(r.call(s,u[0][m],g=v[m],d[0][m][1]),h=1;h<p;++h)r.call(s,u[h][m],g+=d[h-1][m][1],d[h][m][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(t="function"==typeof e?e:mr.get(e)||vr,s):t},s.offset=function(e){return arguments.length?(n="function"==typeof e?e:gr.get(e)||yr,s):n},s.x=function(e){return arguments.length?(i=e,s):i},s.y=function(e){return arguments.length?(a=e,s):a},s.out=function(e){return arguments.length?(r=e,s):r},s};var mr=o.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(br),a=e.map(xr),s=o.range(r).sort((function(e,t){return i[e]-i[t]})),l=0,c=0,u=[],d=[];for(t=0;t<r;++t)n=s[t],l<c?(l+=a[n],u.push(n)):(c+=a[n],d.push(n));return d.reverse().concat(u)},reverse:function(e){return o.range(e.length).reverse()},default:vr}),gr=o.map({silhouette:function(e){var t,n,r,i=e.length,o=e[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,r,i,o,a,s,l,c,u=e.length,d=e[0],f=d.length,p=[];for(p[0]=l=c=0,n=1;n<f;++n){for(t=0,i=0;t<u;++t)i+=e[t][n][1];for(t=0,o=0,s=d[n][0]-d[n-1][0];t<u;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}p[n]=l-=i?o/i*s:0,l<c&&(c=l)}for(n=0;n<f;++n)p[n]-=c;return p},expand:function(e){var t,n,r,i=e.length,o=e[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:yr});function vr(e){return o.range(e.length)}function yr(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function br(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;n<o;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function xr(e){return e.reduce(wr,0)}function wr(e,t){return e+t[1]}function _r(e,t){return Sr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Sr(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function Cr(e){return[o.min(e),o.max(e)]}function kr(e,t){return e.value-t.value}function Mr(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Tr(e,t){e._pack_next=t,t._pack_prev=e}function Ar(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Er(e){if((t=e.children)&&(l=t.length)){var t,n,r,i,o,a,s,l,c=1/0,u=-1/0,d=1/0,f=-1/0;if(t.forEach(Pr),(n=t[0]).x=-n.r,n.y=0,b(n),l>1&&((r=t[1]).x=r.r,r.y=0,b(r),l>2))for(Ir(n,r,i=t[2]),b(i),Mr(n,i),n._pack_prev=i,Mr(i,r),r=n._pack_next,o=3;o<l;o++){Ir(n,r,i=t[o]);var p=0,h=1,m=1;for(a=r._pack_next;a!==r;a=a._pack_next,h++)if(Ar(a,i)){p=1;break}if(1==p)for(s=n._pack_prev;s!==a._pack_prev&&!Ar(s,i);s=s._pack_prev,m++);p?(h<m||h==m&&r.r<n.r?Tr(n,r=a):Tr(n=s,r),o--):(Mr(n,i),r=i,b(i))}var g=(c+u)/2,v=(d+f)/2,y=0;for(o=0;o<l;o++)(i=t[o]).x-=g,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=y,t.forEach(Rr)}function b(e){c=Math.min(e.x-e.r,c),u=Math.max(e.x+e.r,u),d=Math.min(e.y-e.r,d),f=Math.max(e.y+e.r,f)}}function Pr(e){e._pack_next=e._pack_prev=e}function Rr(e){delete e._pack_next,delete e._pack_prev}function Or(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var o=-1,a=i.length;++o<a;)Or(i[o],t,n,r)}function Ir(e,t,n){var r=e.r+n.r,i=t.x-e.x,o=t.y-e.y;if(r&&(i||o)){var a=t.r+n.r,s=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*s),c=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+l*i+c*o,n.y=e.y+l*o-c*i}else n.x=e.x+r,n.y=e.y}function Lr(e,t){return e.parent==t.parent?1:2}function Dr(e){var t=e.children;return t.length?t[0]:e.t}function Nr(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Fr(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function zr(e,t,n){return e.a.parent===t.parent?e.a:n}function Br(e){var t=e.children;return t&&t.length?Br(t[0]):e}function jr(e){var t,n=e.children;return n&&(t=n.length)?jr(n[t-1]):e}function Zr(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Hr(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Ur(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Vr(e){return e.rangeExtent?e.rangeExtent():Ur(e.range())}function Gr(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function Wr(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function $r(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:qr}o.layout.histogram=function(){var e=!0,t=Number,n=Cr,r=_r;function i(i,a){for(var s,l,c=[],u=i.map(t,this),d=n.call(this,u,a),f=r.call(this,d,u,a),p=(a=-1,u.length),h=f.length-1,m=e?1:1/p;++a<h;)(s=c[a]=[]).dx=f[a+1]-(s.x=f[a]),s.y=0;if(h>0)for(a=-1;++a<p;)(l=u[a])>=d[0]&&l<=d[1]&&((s=c[o.bisect(f,l,1,h)-1]).y+=m,s.push(i[a]));return c}return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=mt(e),i):n},i.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return Sr(t,e)}:mt(e),i):r},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},o.layout.pack=function(){var e,t=o.layout.hierarchy().sort(kr),n=0,r=[1,1];function i(i,o){var a=t.call(this,i,o),s=a[0],l=r[0],c=r[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ar(s,(function(e){e.r=+u(e.value)})),ar(s,Er),n){var d=n*(e?1:Math.max(2*s.r/l,2*s.r/c))/2;ar(s,(function(e){e.r+=d})),ar(s,Er),ar(s,(function(e){e.r-=d}))}return Or(s,l/2,c/2,e?1:1/Math.max(2*s.r/l,2*s.r/c)),a}return i.size=function(e){return arguments.length?(r=e,i):r},i.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,i):e},i.padding=function(e){return arguments.length?(n=+e,i):n},ir(i,t)},o.layout.tree=function(){var e=o.layout.hierarchy().sort(null).value(null),t=Lr,n=[1,1],r=null;function i(i,o){var c=e.call(this,i,o),u=c[0],d=function(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,o=t.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:t,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(u);if(ar(d,a),d.parent.m=-d.z,or(d,s),r)or(u,l);else{var f=u,p=u,h=u;or(u,(function(e){e.x<f.x&&(f=e),e.x>p.x&&(p=e),e.depth>h.depth&&(h=e)}));var m=t(f,p)/2-f.x,g=n[0]/(p.x+t(p,f)/2+m),v=n[1]/(h.depth||1);or(u,(function(e){e.x=(e.x+m)*g,e.y=e.depth*v}))}return c}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n.length){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,l=o.parent.children[0],c=o.m,u=a.m,d=s.m,f=l.m;s=Nr(s),o=Dr(o),s&&o;)l=Dr(l),(a=Nr(a)).a=e,(i=s.z+d-o.z-c+t(s._,o._))>0&&(Fr(zr(s,e,r),e,i),c+=i,u+=i),d+=s.m,c+=o.m,f+=l.m,u+=a.m;s&&!Nr(a)&&(a.t=s,a.m+=d-u),o&&!Dr(l)&&(l.t=o,l.m+=c-f,r=e)}return r}(e,i,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=n[0],e.y=e.depth*n[1]}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e)?l:null,i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null==(n=e)?null:l,i):r?n:null},ir(i,e)},o.layout.cluster=function(){var e=o.layout.hierarchy().sort(null).value(null),t=Lr,n=[1,1],r=!1;function i(i,a){var s,l=e.call(this,i,a),c=l[0],u=0;ar(c,(function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(n),e.y=function(e){return 1+o.max(e,(function(e){return e.y}))}(n)):(e.x=s?u+=t(e,s):0,e.y=0,s=e)}));var d=Br(c),f=jr(c),p=d.x-t(d,f)/2,h=f.x+t(f,d)/2;return ar(c,r?function(e){e.x=(e.x-c.x)*n[0],e.y=(c.y-e.y)*n[1]}:function(e){e.x=(e.x-p)/(h-p)*n[0],e.y=(1-(c.y?e.y/c.y:1))*n[1]}),l}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e),i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null!=(n=e),i):r?n:null},ir(i,e)},o.layout.treemap=function(){var e,t=o.layout.hierarchy(),n=Math.round,r=[1,1],i=null,a=Zr,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function d(e){var t=e.children;if(t&&t.length){var n,r,i,o=a(e),s=[],c=t.slice(),f=1/0,m="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&e.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(u(c,o.dx*o.dy/e.value),s.area=0;(i=c.length)>0;)s.push(n=c[i-1]),s.area+=n.area,"squarify"!==l||(r=p(s,m))<=f?(c.pop(),f=r):(s.area-=s.pop().area,h(s,m,o,!1),m=Math.min(o.dx,o.dy),s.length=s.area=0,f=1/0);s.length&&(h(s,m,o,!0),s.length=s.area=0),t.forEach(d)}}function f(e){var t=e.children;if(t&&t.length){var n,r=a(e),i=t.slice(),o=[];for(u(i,r.dx*r.dy/e.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(h(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);t.forEach(f)}}function p(e,t){for(var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(n<o&&(o=n),n>i&&(i=n));return t*=t,(r*=r)?Math.max(t*i*c/r,r/(t*o*c)):1/0}function h(e,t,r,i){var o,a=-1,s=e.length,l=r.x,c=r.y,u=t?n(e.area/t):0;if(t==r.dx){for((i||u>r.dy)&&(u=r.dy);++a<s;)(o=e[a]).x=l,o.y=c,o.dy=u,l+=o.dx=Math.min(r.x+r.dx-l,u?n(o.area/u):0);o.z=!0,o.dx+=r.x+r.dx-l,r.y+=u,r.dy-=u}else{for((i||u>r.dx)&&(u=r.dx);++a<s;)(o=e[a]).x=l,o.y=c,o.dx=u,c+=o.dy=Math.min(r.y+r.dy-c,u?n(o.area/u):0);o.z=!1,o.dy+=r.y+r.dy-c,r.x+=u,r.dx-=u}}function m(n){var i=e||t(n),o=i[0];return o.x=o.y=0,o.value?(o.dx=r[0],o.dy=r[1]):o.dx=o.dy=0,e&&t.revalue(o),u([o],o.dx*o.dy/o.value),(e?f:d)(o),s&&(e=i),i}return m.size=function(e){return arguments.length?(r=e,m):r},m.padding=function(e){if(!arguments.length)return i;function t(t){var n=e.call(m,t,t.depth);return null==n?Zr(t):Hr(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Hr(t,e)}var r;return a=null==(i=e)?Zr:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,m},m.round=function(e){return arguments.length?(n=e?Math.round:Number,m):n!=Number},m.sticky=function(t){return arguments.length?(s=t,e=null,m):s},m.ratio=function(e){return arguments.length?(c=e,m):c},m.mode=function(e){return arguments.length?(l=e+"",m):l},ir(m,t)},o.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=o.random.normal.apply(o,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=o.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},o.scale={};var qr={floor:L,ceil:L};function Yr(e,t,n,r){var i=[],a=[],s=0,l=Math.min(e.length,t.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=l;)i.push(n(e[s-1],e[s])),a.push(r(t[s-1],t[s]));return function(t){var n=o.bisect(e,t,1,l)-1;return a[n](i[n](t))}}function Xr(e,t,n,r){var i,o;function a(){var a=Math.min(e.length,t.length)>2?Yr:Gr,l=r?$n:Wn;return i=a(e,t,l,n),o=a(t,e,l,Cn),s}function s(e){return i(e)}return s.invert=function(e){return o(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),a()):e},s.range=function(e){return arguments.length?(t=e,a()):t},s.rangeRound=function(e){return s.range(e).interpolate(Bn)},s.clamp=function(e){return arguments.length?(r=e,a()):r},s.interpolate=function(e){return arguments.length?(n=e,a()):n},s.ticks=function(t){return ei(e,t)},s.tickFormat=function(t,n){return d3_scale_linearTickFormat(e,t,n)},s.nice=function(t){return Jr(e,t),a()},s.copy=function(){return Xr(e,t,n,r)},a()}function Kr(e,t){return o.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Jr(e,t){return Wr(e,$r(Qr(e,t)[2])),Wr(e,$r(Qr(e,t)[2])),e}function Qr(e,t){null==t&&(t=10);var n=Ur(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ei(e,t){return o.range.apply(o,Qr(e,t))}function ti(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function a(t){return e(i(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),a):t},a.nice=function(){var t=Wr(r.map(i),n?Math:ni);return e.domain(t),r=t.map(o),a},a.ticks=function(){var e=Ur(r),a=[],s=e[0],l=e[1],c=Math.floor(i(s)),u=Math.ceil(i(l)),d=t%1?2:t;if(isFinite(u-c)){if(n){for(;c<u;c++)for(var f=1;f<d;f++)a.push(o(c)*f);a.push(o(c))}else for(a.push(o(c));c++<u;)for(f=d-1;f>0;f--)a.push(o(c)*f);for(c=0;a[c]<s;c++);for(u=a.length;a[u-1]>l;u--);a=a.slice(c,u)}return a},a.copy=function(){return ti(e.copy(),t,n,r)},Kr(a,e)}o.scale.linear=function(){return Xr([0,1],[0,1],Cn,!1)},o.scale.log=function(){return ti(o.scale.linear().domain([0,1]),10,!0,[1,10])};var ni={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function ri(e,t,n){var r=ii(t),i=ii(1/t);function o(t){return e(r(t))}return o.invert=function(t){return i(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),o):n},o.ticks=function(e){return ei(n,e)},o.tickFormat=function(e,t){return d3_scale_linearTickFormat(n,e,t)},o.nice=function(e){return o.domain(Jr(n,e))},o.exponent=function(a){return arguments.length?(r=ii(t=a),i=ii(1/t),e.domain(n.map(r)),o):t},o.copy=function(){return ri(e.copy(),t,n)},Kr(o,e)}function ii(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oi(e,t){var n,r,i;function a(i){return r[((n.get(i)||("range"===t.t?n.set(i,e.push(i)):NaN))-1)%r.length]}function s(t,n){return o.range(e.length).map((function(e){return t+n*e}))}return a.domain=function(r){if(!arguments.length)return e;e=[],n=new k;for(var i,o=-1,s=r.length;++o<s;)n.has(i=r[o])||n.set(i,e.push(i));return a[t.t].apply(a,t.a)},a.range=function(e){return arguments.length?(r=e,i=0,t={t:"range",a:arguments},a):r},a.rangePoints=function(n,o){arguments.length<2&&(o=0);var l=n[0],c=n[1],u=e.length<2?(l=(l+c)/2,0):(c-l)/(e.length-1+o);return r=s(l+u*o/2,u),i=0,t={t:"rangePoints",a:arguments},a},a.rangeRoundPoints=function(n,o){arguments.length<2&&(o=0);var l=n[0],c=n[1],u=e.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(e.length-1+o)|0;return r=s(l+Math.round(u*o/2+(c-l-(e.length-1+o)*u)/2),u),i=0,t={t:"rangeRoundPoints",a:arguments},a},a.rangeBands=function(n,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=n[1]<n[0],u=n[c-0],d=(n[1-c]-u)/(e.length-o+2*l);return r=s(u+d*l,d),c&&r.reverse(),i=d*(1-o),t={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(n,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=n[1]<n[0],u=n[c-0],d=n[1-c],f=Math.floor((d-u)/(e.length-o+2*l));return r=s(u+Math.round((d-u-(e.length-o)*f)/2),f),c&&r.reverse(),i=Math.round(f*(1-o)),t={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return i},a.rangeExtent=function(){return Ur(t.a[0])},a.copy=function(){return oi(e,t)},a.domain(e)}o.scale.pow=function(){return ri(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return oi([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(ai)},o.scale.category20=function(){return o.scale.ordinal().range(si)},o.scale.category20b=function(){return o.scale.ordinal().range(li)},o.scale.category20c=function(){return o.scale.ordinal().range(ci)};var ai=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(at),si=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(at),li=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(at),ci=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(at);function ui(e,t){var n;function r(){var r=0,a=t.length;for(n=[];++r<a;)n[r-1]=o.quantile(e,r/a);return i}function i(e){if(!isNaN(e=+e))return t[o.bisect(n,e)]}return i.domain=function(t){return arguments.length?(e=t.map(v).filter(y).sort(g),r()):e},i.range=function(e){return arguments.length?(t=e,r()):t},i.quantiles=function(){return n},i.invertExtent=function(r){return(r=t.indexOf(r))<0?[NaN,NaN]:[r>0?n[r-1]:e[0],r<n.length?n[r]:e[e.length-1]]},i.copy=function(){return ui(e,t)},r()}function di(e,t,n){var r,i;function o(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function a(){return r=n.length/(t-e),i=n.length-1,o}return o.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],a()):[e,t]},o.range=function(e){return arguments.length?(n=e,a()):n},o.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/r+e,t+1/r]},o.copy=function(){return di(e,t,n)},a()}function fi(e,t){function n(n){if(n<=n)return t[o.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return fi(e,t)},n}function pi(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return ei(e,t)},t.tickFormat=function(t,n){return d3_scale_linearTickFormat(e,t,n)},t.copy=function(){return pi(e)},t}function hi(){return 0}o.scale.quantile=function(){return ui([],[])},o.scale.quantize=function(){return di(0,1,[0,1])},o.scale.threshold=function(){return fi([.5],[0,1])},o.scale.identity=function(){return pi([0,1])},o.svg={},o.svg.arc=function(){var e=gi,t=vi,n=hi,r=mi,i=yi,o=bi,a=xi;function s(){var s=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+t.apply(this,arguments)),u=i.apply(this,arguments)-Oe,d=o.apply(this,arguments)-Oe,f=Math.abs(d-u),p=u>d?0:1;if(c<s&&(h=c,c=s,s=h),f>=Re)return l(c,p)+(s?l(s,1-p):"")+"Z";var h,m,g,v,y,b,x,w,_,S,C,k,M=0,T=0,A=[];if((v=(+a.apply(this,arguments)||0)/2)&&(g=r===mi?Math.sqrt(s*s+c*c):+r.apply(this,arguments),p||(T*=-1),c&&(T=De(g/c*Math.sin(v))),s&&(M=De(g/s*Math.sin(v)))),c){y=c*Math.cos(u+T),b=c*Math.sin(u+T),x=c*Math.cos(d-T),w=c*Math.sin(d-T);var E=Math.abs(d-u-2*T)<=Ee?0:1;if(T&&wi(y,b,x,w)===p^E){var P=(u+d)/2;y=c*Math.cos(P),b=c*Math.sin(P),x=w=null}}else y=b=0;if(s){_=s*Math.cos(d-M),S=s*Math.sin(d-M),C=s*Math.cos(u+M),k=s*Math.sin(u+M);var R=Math.abs(u-d+2*M)<=Ee?0:1;if(M&&wi(_,S,C,k)===1-p^R){var O=(u+d)/2;_=s*Math.cos(O),S=s*Math.sin(O),C=k=null}}else _=S=0;if(f>Ae&&(h=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){m=s<c^p?0:1;var I=h,L=h;if(f<Ee){var D=null==C?[_,S]:null==x?[y,b]:It([y,b],[C,k],[x,w],[_,S]),N=y-D[0],F=b-D[1],z=x-D[0],B=w-D[1],j=1/Math.sin(Math.acos((N*z+F*B)/(Math.sqrt(N*N+F*F)*Math.sqrt(z*z+B*B)))/2),Z=Math.sqrt(D[0]*D[0]+D[1]*D[1]);L=Math.min(h,(s-Z)/(j-1)),I=Math.min(h,(c-Z)/(j+1))}if(null!=x){var H=_i(null==C?[_,S]:[C,k],[y,b],c,I,p),U=_i([x,w],[_,S],c,I,p);h===I?A.push("M",H[0],"A",I,",",I," 0 0,",m," ",H[1],"A",c,",",c," 0 ",1-p^wi(H[1][0],H[1][1],U[1][0],U[1][1]),",",p," ",U[1],"A",I,",",I," 0 0,",m," ",U[0]):A.push("M",H[0],"A",I,",",I," 0 1,",m," ",U[0])}else A.push("M",y,",",b);if(null!=C){var V=_i([y,b],[C,k],s,-L,p),G=_i([_,S],null==x?[y,b]:[x,w],s,-L,p);h===L?A.push("L",G[0],"A",L,",",L," 0 0,",m," ",G[1],"A",s,",",s," 0 ",p^wi(G[1][0],G[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",L,",",L," 0 0,",m," ",V[0]):A.push("L",G[0],"A",L,",",L," 0 0,",m," ",V[0])}else A.push("L",_,",",S)}else A.push("M",y,",",b),null!=x&&A.push("A",c,",",c," 0 ",E,",",p," ",x,",",w),A.push("L",_,",",S),null!=C&&A.push("A",s,",",s," 0 ",R,",",1-p," ",C,",",k);return A.push("Z"),A.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=mt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=mt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=mt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==mi?mi:mt(e),s):r},s.startAngle=function(e){return arguments.length?(i=mt(e),s):i},s.endAngle=function(e){return arguments.length?(o=mt(e),s):o},s.padAngle=function(e){return arguments.length?(a=mt(e),s):a},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Oe;return[Math.cos(r)*n,Math.sin(r)*n]},s};var mi="auto";function gi(e){return e.innerRadius}function vi(e){return e.outerRadius}function yi(e){return e.startAngle}function bi(e){return e.endAngle}function xi(e){return e&&e.padAngle}function wi(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function _i(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,c=-s*o,u=e[0]+l,d=e[1]+c,f=t[0]+l,p=t[1]+c,h=(u+f)/2,m=(d+p)/2,g=f-u,v=p-d,y=g*g+v*v,b=n-r,x=u*p-f*d,w=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),_=(x*v-g*w)/y,S=(-x*g-v*w)/y,C=(x*v+g*w)/y,k=(-x*g+v*w)/y,M=_-h,T=S-m,A=C-h,E=k-m;return M*M+T*T>A*A+E*E&&(_=C,S=k),[[_-l,S-c],[_*n/b,S*n/b]]}function Si(){return!0}function Ci(e){var t=Tt,n=At,r=Si,i=Mi,o=i.key,a=.7;function s(o){var s,l=[],c=[],u=-1,d=o.length,f=mt(t),p=mt(n);function h(){l.push("M",i(e(c),a))}for(;++u<d;)r.call(this,s=o[u],u)?c.push([+f.call(this,s,u),+p.call(this,s,u)]):c.length&&(h(),c=[]);return c.length&&h(),l.length?l.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(o="function"==typeof e?i=e:(i=ki.get(e)||Mi).key,s):o},s.tension=function(e){return arguments.length?(a=e,s):a},s}o.svg.line=function(){return Ci(L)};var ki=o.map({linear:Mi,"linear-closed":Ti,step:function(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":Ai,"step-after":Ei,basis:Oi,"basis-open":function(e){if(e.length<4)return Mi(e);for(var t,n=[],r=-1,i=e.length,o=[0],a=[0];++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);for(n.push(Ii(Ni,o)+","+Ii(Ni,a)),--r;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),Fi(n,o,a);return n.join("")},"basis-closed":function(e){for(var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);for(t=[Ii(Ni,a),",",Ii(Ni,s)],--r;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Fi(t,a,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,l=e[n][1]-a,c=-1;++c<=n;)i=c/n,(r=e[c])[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*l);return Oi(e)},cardinal:function(e,t){return e.length<3?Mi(e):e[0]+Pi(e,Ri(e,t))},"cardinal-open":function(e,t){return e.length<4?Mi(e):e[1]+Pi(e.slice(1,-1),Ri(e,t))},"cardinal-closed":function(e,t){return e.length<3?Ti(e):e[0]+Pi((e.push(e[0]),e),Ri([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Mi(e):e[0]+Pi(e,function(e){for(var t,n,r,i,o=[],a=function(e){for(var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=zi(i,o);++t<n;)r[t]=(a+(a=zi(i=o,o=e[t+1])))/2;return r[t]=a,r}(e),s=-1,l=e.length-1;++s<l;)t=zi(e[s],e[s+1]),_(t)<Ae?a[s]=a[s+1]=0:(i=(n=a[s]/t)*n+(r=a[s+1]/t)*r)>9&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r);for(s=-1;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(e))}});function Mi(e){return e.length>1?e.join("L"):e+"Z"}function Ti(e){return e.join("L")+"Z"}function Ai(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ei(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Pi(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Mi(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],l=2),t.length>1){s=t[1],o=e[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<t.length;c++,l++)o=e[l],s=t[c],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var u=e[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function Ri(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,l=e.length;++s<l;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Oi(e){if(e.length<3)return Mi(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Ii(Ni,a),",",Ii(Ni,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Fi(l,a,s);return e.pop(),l.push("L",r),l.join("")}function Ii(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ki.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var Li=[0,2/3,1/3,0],Di=[0,1/3,2/3,0],Ni=[0,1/6,2/3,1/6];function Fi(e,t,n){e.push("C",Ii(Li,t),",",Ii(Li,n),",",Ii(Di,t),",",Ii(Di,n),",",Ii(Ni,t),",",Ii(Ni,n))}function zi(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Bi(e){for(var t,n,r,i=-1,o=e.length;++i<o;)n=(t=e[i])[0],r=t[1]-Oe,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ji(e){var t=Tt,n=Tt,r=0,i=At,o=Si,a=Mi,s=a.key,l=a,c="L",u=.7;function d(s){var d,f,p,h=[],m=[],g=[],v=-1,y=s.length,b=mt(t),x=mt(r),w=t===n?function(){return f}:mt(n),_=r===i?function(){return p}:mt(i);function S(){h.push("M",a(e(g),u),c,l(e(m.reverse()),u),"Z")}for(;++v<y;)o.call(this,d=s[v],v)?(m.push([f=+b.call(this,d,v),p=+x.call(this,d,v)]),g.push([+w.call(this,d,v),+_.call(this,d,v)])):m.length&&(S(),m=[],g=[]);return m.length&&S(),h.length?h.join(""):null}return d.x=function(e){return arguments.length?(t=n=e,d):n},d.x0=function(e){return arguments.length?(t=e,d):t},d.x1=function(e){return arguments.length?(n=e,d):n},d.y=function(e){return arguments.length?(r=i=e,d):i},d.y0=function(e){return arguments.length?(r=e,d):r},d.y1=function(e){return arguments.length?(i=e,d):i},d.defined=function(e){return arguments.length?(o=e,d):o},d.interpolate=function(e){return arguments.length?(s="function"==typeof e?a=e:(a=ki.get(e)||Mi).key,l=a.reverse||a,c=a.closed?"M":"L",d):s},d.tension=function(e){return arguments.length?(u=e,d):u},d}function Zi(e){return e.source}function Hi(e){return e.target}function Ui(e){return e.radius}function Vi(e){return[e.x,e.y]}function Gi(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Oe;return[n*Math.cos(r),n*Math.sin(r)]}}function Wi(){return 64}function $i(){return"circle"}function qi(e){var t=Math.sqrt(e/Ee);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}o.svg.line.radial=function(){var e=Ci(Bi);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ai.reverse=Ei,Ei.reverse=Ai,o.svg.area=function(){return ji(L)},o.svg.area.radial=function(){var e=ji(Bi);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},o.svg.chord=function(){var e=Zi,t=Hi,n=Ui,r=yi,i=bi;function o(n,r){var i,o,c=a(this,e,n,r),u=a(this,t,n,r);return"M"+c.p0+s(c.r,c.p1,c.a1-c.a0)+(o=u,((i=c).a0==o.a0&&i.a1==o.a1?l(c.r,c.p1,c.r,c.p0):l(c.r,c.p1,u.r,u.p0)+s(u.r,u.p1,u.a1-u.a0)+l(u.r,u.p1,c.r,c.p0))+"Z")}function a(e,t,o,a){var s=t.call(e,o,a),l=n.call(e,s,a),c=r.call(e,s,a)-Oe,u=i.call(e,s,a)-Oe;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ee)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}return o.radius=function(e){return arguments.length?(n=mt(e),o):n},o.source=function(t){return arguments.length?(e=mt(t),o):e},o.target=function(e){return arguments.length?(t=mt(e),o):t},o.startAngle=function(e){return arguments.length?(r=mt(e),o):r},o.endAngle=function(e){return arguments.length?(i=mt(e),o):i},o},o.svg.diagonal=function(){var e=Zi,t=Hi,n=Vi;function r(r,i){var o=e.call(this,r,i),a=t.call(this,r,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(t){return arguments.length?(e=mt(t),r):e},r.target=function(e){return arguments.length?(t=mt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},o.svg.diagonal.radial=function(){var e=o.svg.diagonal(),t=Vi,n=e.projection;return e.projection=function(e){return arguments.length?n(Gi(t=e)):t},e},o.svg.symbol=function(){var e=$i,t=Wi;function n(n,r){return(Yi.get(e.call(this,n,r))||qi)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=mt(t),n):e},n.size=function(e){return arguments.length?(t=mt(e),n):t},n};var Yi=o.map({circle:qi,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ki)),n=t*Ki;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Xi),n=t*Xi/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Xi),n=t*Xi/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});o.svg.symbolTypes=Yi.keys();var Xi=Math.sqrt(3),Ki=Math.tan(30*Ie);X.transition=function(e){for(var t,n,r=to||++io,i=so(e),o=[],a=no||{time:Date.now(),ease:Ln,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&lo(n,u,i,r,a),t.push(n)}return eo(o,i,r)},X.interrupt=function(e){return this.each(null==e?Ji:Qi(so(e)))};var Ji=Qi(so());function Qi(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function eo(e,t,n){return G(e,ro),e.namespace=t,e.id=n,e}var to,no,ro=[],io=0;function oo(e,t,n,r){var i=e.id,o=e.namespace;return he(e,"function"==typeof n?function(e,a,s){e[o][i].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[o][i].tween.set(t,n)}))}function ao(e){return null==e&&(e=""),function(){this.textContent=e}}function so(e){return null==e?"__transition__":"__transition_"+e+"__"}function lo(e,t,n,r,i){var o,a,s,l,c,u=e[n]||(e[n]={active:0,count:0}),d=u[r];function f(n){var i=u.active,f=u[i];for(var h in f&&(f.timer.c=null,f.timer.t=NaN,--u.count,delete u[i],f.event&&f.event.interrupt.call(e,e.__data__,f.index)),u)if(+h<r){var m=u[h];m.timer.c=null,m.timer.t=NaN,--u.count,delete u[h]}a.c=p,St((function(){return a.c&&p(n||1)&&(a.c=null,a.t=NaN),1}),0,o),u.active=r,d.event&&d.event.start.call(e,e.__data__,t),c=[],d.tween.forEach((function(n,r){(r=r.call(e,e.__data__,t))&&c.push(r)})),l=d.ease,s=d.duration}function p(i){for(var o=i/s,a=l(o),f=c.length;f>0;)c[--f].call(e,a);if(o>=1)return d.event&&d.event.end.call(e,e.__data__,t),--u.count?delete u[r]:delete e[n],1}d||(o=i.time,a=St((function(e){var t=d.delay;if(a.t=t+o,t<=e)return f(e-t);a.c=f}),0,o),d=u[r]={tween:new k,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++u.count)}ro.call=X.call,ro.empty=X.empty,ro.node=X.node,ro.size=X.size,o.transition=function(e,t){return e&&e.transition?to?e.transition(t):e:o.selection().transition(e)},o.transition.prototype=ro,ro.select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=K(e);for(var s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),lo(n,u,o,i,r[o][i]),t.push(n)):t.push(null)}return eo(a,o,i)},ro.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,l=[];e=J(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],f=-1,p=d.length;++f<p;)if(r=d[f]){o=r[s][a],n=e.call(r,r.__data__,f,c),l.push(t=[]);for(var h=-1,m=n.length;++h<m;)(i=n[h])&&lo(i,h,s,a,o),t.push(i)}return eo(l,s,a)},ro.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=fe(e));for(var i=0,o=this.length;i<o;i++){r.push(t=[]);for(var a,s=0,l=(a=this[i]).length;s<l;s++)(n=a[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return eo(r,this.namespace,this.id)},ro.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):he(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},ro.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?Gn:Cn,r=o.ns.qualify(e);function i(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}function s(e){return null==e?i:(e+="",function(){var t,i=this.getAttribute(r);return i!==e&&(t=n(i,e),function(e){this.setAttribute(r,t(e))})})}function l(e){return null==e?a:(e+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==e&&(t=n(i,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}return oo(this,"attr."+e,t,r.local?l:s)},ro.attrTween=function(e,t){var n=o.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},ro.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}function o(t){return null==t?i:(t+="",function(){var r,i=u(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=Cn(i,t),function(t){this.style.setProperty(e,r(t),n)})})}return oo(this,"style."+e,t,o)},ro.styleTween=function(e,t,n){function r(r,i){var o=t.call(this,r,i,u(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},ro.text=function(e){return oo(this,"text",e,ao)},ro.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},ro.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=o.ease.apply(o,arguments)),he(this,(function(r){r[n][t].ease=e})))},ro.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:he(this,"function"==typeof e?function(r,i,o){r[n][t].delay=+e.call(r,r.__data__,i,o)}:(e=+e,function(r){r[n][t].delay=e}))},ro.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:he(this,"function"==typeof e?function(r,i,o){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,o))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},ro.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=no,a=to;try{to=n,he(this,(function(t,i,o){no=t[r][n],e.call(t,t.__data__,i,o)}))}finally{no=i,to=a}}else he(this,(function(i){var a=i[r][n];(a.event||(a.event=o.dispatch("start","end","interrupt"))).on(e,t)}));return this},ro.transition=function(){for(var e,t,n,r=this.id,i=++io,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&lo(t,u,o,i,{time:(n=t[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return eo(a,o,i)},o.svg.axis=function(){var e,t=o.scale.linear(),n=co,r=6,i=6,a=3,l=[10],c=null;function u(s){s.each((function(){var s,u=o.select(this),d=this.__chart__||t,f=this.__chart__=t.copy(),p=null==c?f.ticks?f.ticks.apply(f,l):f.domain():c,h=null==e?f.tickFormat?f.tickFormat.apply(f,l):L:e,m=u.selectAll(".tick").data(p,f),g=m.enter().insert("g",".domain").attr("class","tick").style("opacity",Ae),v=o.transition(m.exit()).style("opacity",Ae).remove(),y=o.transition(m.order()).style("opacity",1),b=Math.max(r,0)+a,x=Vr(f),w=u.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),o.transition(w));g.append("line"),g.append("text");var S,C,k,M,T=g.select("line"),A=y.select("line"),E=m.select("text").text(h),P=g.select("text"),R=y.select("text"),O="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=fo,S="x",k="y",C="x2",M="y2",E.attr("dy",O<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+O*i+"V0H"+x[1]+"V"+O*i)):(s=po,S="y",k="x",C="y2",M="x2",E.attr("dy",".32em").style("text-anchor",O<0?"end":"start"),_.attr("d","M"+O*i+","+x[0]+"H0V"+x[1]+"H"+O*i)),T.attr(M,O*r),P.attr(k,O*b),A.attr(C,0).attr(M,O*r),R.attr(S,0).attr(k,O*b),f.rangeBand){var I=f,D=I.rangeBand()/2;d=f=function(e){return I(e)+D}}else d.rangeBand?d=f:v.call(s,f,d);g.call(s,d,f),y.call(s,f,f)}))}return u.scale=function(e){return arguments.length?(t=e,u):t},u.orient=function(e){return arguments.length?(n=e in uo?e+"":co,u):n},u.ticks=function(){return arguments.length?(l=s(arguments),u):l},u.tickValues=function(e){return arguments.length?(c=e,u):c},u.tickFormat=function(t){return arguments.length?(e=t,u):e},u.tickSize=function(e){var t=arguments.length;return t?(r=+e,i=+arguments[t-1],u):r},u.innerTickSize=function(e){return arguments.length?(r=+e,u):r},u.outerTickSize=function(e){return arguments.length?(i=+e,u):i},u.tickPadding=function(e){return arguments.length?(a=+e,u):a},u.tickSubdivide=function(){return arguments.length&&u},u};var co="bottom",uo={top:1,right:1,bottom:1,left:1};function fo(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"}))}function po(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"}))}o.svg.brush=function(){var e,t,n=U(f,"brushstart","brush","brushend"),r=null,i=null,a=[0,0],s=[0,0],l=!0,c=!0,d=mo[0];function f(e){e.each((function(){var e=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(d,L);n.exit().remove(),n.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return ho[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",f.empty()?"none":null);var a,s=o.transition(e),l=o.transition(t);r&&(a=Vr(r),l.attr("x",a[0]).attr("width",a[1]-a[0]),h(s)),i&&(a=Vr(i),l.attr("y",a[0]).attr("height",a[1]-a[0]),m(s)),p(s)}))}function p(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+a[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"}))}function h(e){e.select(".extent").attr("x",a[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function m(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function g(){var d,g,v=this,y=o.select(o.event.target),b=n.of(v,arguments),x=o.select(v),w=y.datum(),_=!/^(n|s)$/.test(w)&&r,S=!/^(e|w)$/.test(w)&&i,C=y.classed("extent"),k=Ce(v),M=o.mouse(v),T=o.select(u(v)).on("keydown.brush",P).on("keyup.brush",R);if(o.event.changedTouches?T.on("touchmove.brush",O).on("touchend.brush",L):T.on("mousemove.brush",O).on("mouseup.brush",L),x.interrupt().selectAll("*").interrupt(),C)M[0]=a[0]-M[0],M[1]=s[0]-M[1];else if(w){var A=+/w$/.test(w),E=+/^n/.test(w);g=[a[1-A]-M[0],s[1-E]-M[1]],M[0]=a[A],M[1]=s[E]}else o.event.altKey&&(d=M.slice());function P(){32==o.event.keyCode&&(C||(d=null,M[0]-=a[1],M[1]-=s[1],C=2),Z())}function R(){32==o.event.keyCode&&2==C&&(M[0]+=a[1],M[1]+=s[1],C=0,Z())}function O(){var e=o.mouse(v),t=!1;g&&(e[0]+=g[0],e[1]+=g[1]),C||(o.event.altKey?(d||(d=[(a[0]+a[1])/2,(s[0]+s[1])/2]),M[0]=a[+(e[0]<d[0])],M[1]=s[+(e[1]<d[1])]):d=null),_&&I(e,r,0)&&(h(x),t=!0),S&&I(e,i,1)&&(m(x),t=!0),t&&(p(x),b({type:"brush",mode:C?"move":"resize"}))}function I(n,r,i){var o,u,f=Vr(r),p=f[0],h=f[1],m=M[i],g=i?s:a,v=g[1]-g[0];if(C&&(p-=m,h-=v+m),o=(i?c:l)?Math.max(p,Math.min(h,n[i])):n[i],C?u=(o+=m)+v:(d&&(m=Math.max(p,Math.min(h,2*d[i]-o))),m<o?(u=o,o=m):u=m),g[0]!=o||g[1]!=u)return i?t=null:e=null,g[0]=o,g[1]=u,!0}function L(){O(),x.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null),o.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),k(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),O()}return f.event=function(r){r.each((function(){var r=n.of(this,arguments),i={x:a,y:s,i:e,j:t},l=this.__chart__||i;this.__chart__=i,to?o.select(this).transition().each("start.brush",(function(){e=l.i,t=l.j,a=l.x,s=l.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var n=kn(a,i.x),o=kn(s,i.y);return e=t=null,function(e){a=i.x=n(e),s=i.y=o(e),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=i.i,t=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},f.x=function(e){return arguments.length?(d=mo[!(r=e)<<1|!i],f):r},f.y=function(e){return arguments.length?(d=mo[!r<<1|!(i=e)],f):i},f.clamp=function(e){return arguments.length?(r&&i?(l=!!e[0],c=!!e[1]):r?l=!!e:i&&(c=!!e),f):r&&i?[l,c]:r?l:i?c:null},f.extent=function(n){var o,l,c,u,d;return arguments.length?(r&&(o=n[0],l=n[1],i&&(o=o[0],l=l[0]),e=[o,l],r.invert&&(o=r(o),l=r(l)),l<o&&(d=o,o=l,l=d),o==a[0]&&l==a[1]||(a=[o,l])),i&&(c=n[0],u=n[1],r&&(c=c[1],u=u[1]),t=[c,u],i.invert&&(c=i(c),u=i(u)),u<c&&(d=c,c=u,u=d),c==s[0]&&u==s[1]||(s=[c,u])),f):(r&&(e?(o=e[0],l=e[1]):(o=a[0],l=a[1],r.invert&&(o=r.invert(o),l=r.invert(l)),l<o&&(d=o,o=l,l=d))),i&&(t?(c=t[0],u=t[1]):(c=s[0],u=s[1],i.invert&&(c=i.invert(c),u=i.invert(u)),u<c&&(d=c,c=u,u=d))),r&&i?[[o,c],[l,u]]:r?[o,l]:i&&[c,u])},f.clear=function(){return f.empty()||(a=[0,0],s=[0,0],e=t=null),f},f.empty=function(){return!!r&&a[0]==a[1]||!!i&&s[0]==s[1]},o.rebind(f,n,"on")};var ho={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},mo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function go(e){return JSON.parse(e.responseText)}function vo(e){var t=l.createRange();return t.selectNode(l.body),t.createContextualFragment(e.responseText)}o.text=gt((function(e){return e.responseText})),o.json=function(e,t){return vt(e,"application/json",go,t)},o.html=function(e,t){return vt(e,"text/html",vo,t)},o.xml=gt((function(e){return e.responseXML})),this.d3=o,void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)}).apply(self)},721:function(e,t,n){"use strict";function r(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}n.d(t,{WU:function(){return f},FF:function(){return m}});var i,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(e){if(!(t=o.exec(e)))throw new Error("invalid format: "+e);var t;return new s({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function s(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function l(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}a.prototype=s.prototype,s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var c={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return l(100*e,t)},r:l,s:function(e,t){var n=r(e,t);if(!n)return e+"";var o=n[0],a=n[1],s=a-(i=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,l=o.length;return s===l?o:s>l?o+new Array(s-l+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+r(e,Math.max(0,t+s-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function u(e){return e}var d,f,p=Array.prototype.map,h=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function m(e){var t,n,o=void 0===e.grouping||void 0===e.thousands?u:(t=p.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),s=void 0===e.currency?"":e.currency[0]+"",l=void 0===e.currency?"":e.currency[1]+"",d=void 0===e.decimal?".":e.decimal+"",f=void 0===e.numerals?u:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(p.call(e.numerals,String)),m=void 0===e.percent?"%":e.percent+"",g=void 0===e.minus?"-":e.minus+"",v=void 0===e.nan?"NaN":e.nan+"";function y(e){var t=(e=a(e)).fill,n=e.align,r=e.sign,u=e.symbol,p=e.zero,y=e.width,b=e.comma,x=e.precision,w=e.trim,_=e.type;"n"===_?(b=!0,_="g"):c[_]||(void 0===x&&(x=12),w=!0,_="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var S="$"===u?s:"#"===u&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C="$"===u?l:/[%p]/.test(_)?m:"",k=c[_],M=/[defgprs%]/.test(_);function T(e){var a,s,l,c=S,u=C;if("c"===_)u=k(e)+u,e="";else{var m=(e=+e)<0||1/e<0;if(e=isNaN(e)?v:k(Math.abs(e),x),w&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),m&&0==+e&&"+"!==r&&(m=!1),c=(m?"("===r?r:g:"-"===r||"("===r?"":r)+c,u=("s"===_?h[8+i/3]:"")+u+(m&&"("===r?")":""),M)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){u=(46===l?d+e.slice(a+1):e.slice(a))+u,e=e.slice(0,a);break}}b&&!p&&(e=o(e,1/0));var T=c.length+e.length+u.length,A=T<y?new Array(y-T+1).join(t):"";switch(b&&p&&(e=o(A+e,A.length?y-u.length:1/0),A=""),n){case"<":e=c+e+u+A;break;case"=":e=c+A+e+u;break;case"^":e=A.slice(0,T=A.length>>1)+c+e+u+A.slice(T);break;default:e=A+c+e+u}return f(e)}return x=void 0===x?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),T.toString=function(){return e+""},T}return{format:y,formatPrefix:function(e,t){var n,i=y(((e=a(e)).type="f",e)),o=3*Math.max(-8,Math.min(8,Math.floor((n=t,((n=r(Math.abs(n)))?n[1]:NaN)/3)))),s=Math.pow(10,-o),l=h[8+o/3];return function(e){return i(s*e)+l}}}}d=m({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),f=d.format,d.formatPrefix},4096:function(e,t,n){"use strict";n.d(t,{i$:function(){return h},Dq:function(){return f},g0:function(){return m}});var r=n(8176),i=n(8480),o=n(9879),a=n(2301),s=n(4823),l=n(9791);function c(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function u(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function d(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function f(e){var t=e.dateTime,n=e.date,s=e.time,l=e.periods,f=e.days,p=e.shortDays,h=e.months,m=e.shortMonths,v=_(l),y=S(l),b=_(f),x=S(f),w=_(p),Te=S(p),Ae=_(h),Ee=S(h),Pe=_(m),Re=S(m),Oe={a:function(e){return p[e.getDay()]},A:function(e){return f[e.getDay()]},b:function(e){return m[e.getMonth()]},B:function(e){return h[e.getMonth()]},c:null,d:V,e:V,f:Y,H:G,I:W,j:$,L:q,m:X,M:K,p:function(e){return l[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:ke,s:Me,S:J,u:Q,U:ee,V:te,w:ne,W:re,x:null,X:null,y:ie,Y:oe,Z:ae,"%":Ce},Ie={a:function(e){return p[e.getUTCDay()]},A:function(e){return f[e.getUTCDay()]},b:function(e){return m[e.getUTCMonth()]},B:function(e){return h[e.getUTCMonth()]},c:null,d:se,e:se,f:fe,H:le,I:ce,j:ue,L:de,m:pe,M:he,p:function(e){return l[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:ke,s:Me,S:me,u:ge,U:ve,V:ye,w:be,W:xe,x:null,X:null,y:we,Y:_e,Z:Se,"%":Ce},Le={a:function(e,t,n){var r=w.exec(t.slice(n));return r?(e.w=Te[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=b.exec(t.slice(n));return r?(e.w=x[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=Pe.exec(t.slice(n));return r?(e.m=Re[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=Ae.exec(t.slice(n));return r?(e.m=Ee[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return Fe(e,t,n,r)},d:L,e:L,f:j,H:N,I:N,j:D,L:B,m:I,M:F,p:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.p=y[r[0].toLowerCase()],n+r[0].length):-1},q:O,Q:H,s:U,S:z,u:k,U:M,V:T,w:C,W:A,x:function(e,t,r){return Fe(e,n,t,r)},X:function(e,t,n){return Fe(e,s,t,n)},y:P,Y:E,Z:R,"%":Z};function De(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=g[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function Ne(e,t){return function(n){var s,l,f=d(1900,void 0,1);if(Fe(f,e,n+="",0)!=n.length)return null;if("Q"in f)return new Date(f.Q);if("s"in f)return new Date(1e3*f.s+("L"in f?f.L:0));if(t&&!("Z"in f)&&(f.Z=0),"p"in f&&(f.H=f.H%12+12*f.p),void 0===f.m&&(f.m="q"in f?f.q:0),"V"in f){if(f.V<1||f.V>53)return null;"w"in f||(f.w=1),"Z"in f?(l=(s=u(d(f.y,0,1))).getUTCDay(),s=l>4||0===l?r.l6.ceil(s):(0,r.l6)(s),s=i.Z.offset(s,7*(f.V-1)),f.y=s.getUTCFullYear(),f.m=s.getUTCMonth(),f.d=s.getUTCDate()+(f.w+6)%7):(l=(s=c(d(f.y,0,1))).getDay(),s=l>4||0===l?o.wA.ceil(s):(0,o.wA)(s),s=a.Z.offset(s,7*(f.V-1)),f.y=s.getFullYear(),f.m=s.getMonth(),f.d=s.getDate()+(f.w+6)%7)}else("W"in f||"U"in f)&&("w"in f||(f.w="u"in f?f.u%7:"W"in f?1:0),l="Z"in f?u(d(f.y,0,1)).getUTCDay():c(d(f.y,0,1)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(l+5)%7:f.w+7*f.U-(l+6)%7);return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,u(f)):c(f)}}function Fe(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=Le[i in g?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return Oe.x=De(n,Oe),Oe.X=De(s,Oe),Oe.c=De(t,Oe),Ie.x=De(n,Ie),Ie.X=De(s,Ie),Ie.c=De(t,Ie),{format:function(e){var t=De(e+="",Oe);return t.toString=function(){return e},t},parse:function(e){var t=Ne(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=De(e+="",Ie);return t.toString=function(){return e},t},utcParse:function(e){var t=Ne(e+="",!0);return t.toString=function(){return e},t}}}var p,h,m,g={"-":"",_:" ",0:"0"},v=/^\s*\d+/,y=/^%/,b=/[\\^$*+?|[\]().{}]/g;function x(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function w(e){return e.replace(b,"\\$&")}function _(e){return new RegExp("^(?:"+e.map(w).join("|")+")","i")}function S(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function C(e,t,n){var r=v.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function k(e,t,n){var r=v.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function M(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function T(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function A(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function E(e,t,n){var r=v.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function P(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function R(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function O(e,t,n){var r=v.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function I(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function L(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function D(e,t,n){var r=v.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function N(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function F(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function z(e,t,n){var r=v.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function B(e,t,n){var r=v.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function j(e,t,n){var r=v.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Z(e,t,n){var r=y.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function H(e,t,n){var r=v.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function U(e,t,n){var r=v.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function V(e,t){return x(e.getDate(),t,2)}function G(e,t){return x(e.getHours(),t,2)}function W(e,t){return x(e.getHours()%12||12,t,2)}function $(e,t){return x(1+a.Z.count((0,s.Z)(e),e),t,3)}function q(e,t){return x(e.getMilliseconds(),t,3)}function Y(e,t){return q(e,t)+"000"}function X(e,t){return x(e.getMonth()+1,t,2)}function K(e,t){return x(e.getMinutes(),t,2)}function J(e,t){return x(e.getSeconds(),t,2)}function Q(e){var t=e.getDay();return 0===t?7:t}function ee(e,t){return x(o.OM.count((0,s.Z)(e)-1,e),t,2)}function te(e,t){var n=e.getDay();return e=n>=4||0===n?(0,o.bL)(e):o.bL.ceil(e),x(o.bL.count((0,s.Z)(e),e)+(4===(0,s.Z)(e).getDay()),t,2)}function ne(e){return e.getDay()}function re(e,t){return x(o.wA.count((0,s.Z)(e)-1,e),t,2)}function ie(e,t){return x(e.getFullYear()%100,t,2)}function oe(e,t){return x(e.getFullYear()%1e4,t,4)}function ae(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+x(t/60|0,"0",2)+x(t%60,"0",2)}function se(e,t){return x(e.getUTCDate(),t,2)}function le(e,t){return x(e.getUTCHours(),t,2)}function ce(e,t){return x(e.getUTCHours()%12||12,t,2)}function ue(e,t){return x(1+i.Z.count((0,l.Z)(e),e),t,3)}function de(e,t){return x(e.getUTCMilliseconds(),t,3)}function fe(e,t){return de(e,t)+"000"}function pe(e,t){return x(e.getUTCMonth()+1,t,2)}function he(e,t){return x(e.getUTCMinutes(),t,2)}function me(e,t){return x(e.getUTCSeconds(),t,2)}function ge(e){var t=e.getUTCDay();return 0===t?7:t}function ve(e,t){return x(r.Ox.count((0,l.Z)(e)-1,e),t,2)}function ye(e,t){var n=e.getUTCDay();return e=n>=4||0===n?(0,r.hB)(e):r.hB.ceil(e),x(r.hB.count((0,l.Z)(e),e)+(4===(0,l.Z)(e).getUTCDay()),t,2)}function be(e){return e.getUTCDay()}function xe(e,t){return x(r.l6.count((0,l.Z)(e)-1,e),t,2)}function we(e,t){return x(e.getUTCFullYear()%100,t,2)}function _e(e,t){return x(e.getUTCFullYear()%1e4,t,4)}function Se(){return"+0000"}function Ce(){return"%"}function ke(e){return+e}function Me(e){return Math.floor(+e/1e3)}p=f({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),h=p.format,p.parse,m=p.utcFormat,p.utcParse},2301:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var r=n(52),i=n(4263),o=(0,r.Z)((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.yB)/i.UD}),(function(e){return e.getDate()-1}));t.Z=o;var a=o.range},4263:function(e,t,n){"use strict";n.d(t,{UD:function(){return a},Y2:function(){return o},Ym:function(){return r},iM:function(){return s},yB:function(){return i}});var r=1e3,i=6e4,o=36e5,a=864e5,s=6048e5},1041:function(e,t,n){"use strict";n.r(t),n.d(t,{timeDay:function(){return v.Z},timeDays:function(){return v.a},timeFriday:function(){return y.mC},timeFridays:function(){return y.b$},timeHour:function(){return m},timeHours:function(){return g},timeInterval:function(){return r.Z},timeMillisecond:function(){return o},timeMilliseconds:function(){return a},timeMinute:function(){return f},timeMinutes:function(){return p},timeMonday:function(){return y.wA},timeMondays:function(){return y.bJ},timeMonth:function(){return x},timeMonths:function(){return w},timeSaturday:function(){return y.EY},timeSaturdays:function(){return y.Ff},timeSecond:function(){return c},timeSeconds:function(){return u},timeSunday:function(){return y.OM},timeSundays:function(){return y.vm},timeThursday:function(){return y.bL},timeThursdays:function(){return y.$t},timeTuesday:function(){return y.sy},timeTuesdays:function(){return y.aU},timeWednesday:function(){return y.zg},timeWednesdays:function(){return y.Ld},timeWeek:function(){return y.OM},timeWeeks:function(){return y.vm},timeYear:function(){return _.Z},timeYears:function(){return _.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return P.QQ},utcFridays:function(){return P.fz},utcHour:function(){return T},utcHours:function(){return A},utcMillisecond:function(){return o},utcMilliseconds:function(){return a},utcMinute:function(){return C},utcMinutes:function(){return k},utcMonday:function(){return P.l6},utcMondays:function(){return P.$3},utcMonth:function(){return O},utcMonths:function(){return I},utcSaturday:function(){return P.g4},utcSaturdays:function(){return P.Q_},utcSecond:function(){return c},utcSeconds:function(){return u},utcSunday:function(){return P.Ox},utcSundays:function(){return P.SU},utcThursday:function(){return P.hB},utcThursdays:function(){return P.xj},utcTuesday:function(){return P.J1},utcTuesdays:function(){return P.DK},utcWednesday:function(){return P.b3},utcWednesdays:function(){return P.uy},utcWeek:function(){return P.Ox},utcWeeks:function(){return P.SU},utcYear:function(){return L.Z},utcYears:function(){return L.D}});var r=n(52),i=(0,r.Z)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,r.Z)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):i:null};var o=i,a=i.range,s=n(4263),l=(0,r.Z)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*s.Ym)}),(function(e,t){return(t-e)/s.Ym}),(function(e){return e.getUTCSeconds()})),c=l,u=l.range,d=(0,r.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*s.Ym)}),(function(e,t){e.setTime(+e+t*s.yB)}),(function(e,t){return(t-e)/s.yB}),(function(e){return e.getMinutes()})),f=d,p=d.range,h=(0,r.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*s.Ym-e.getMinutes()*s.yB)}),(function(e,t){e.setTime(+e+t*s.Y2)}),(function(e,t){return(t-e)/s.Y2}),(function(e){return e.getHours()})),m=h,g=h.range,v=n(2301),y=n(9879),b=(0,r.Z)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),x=b,w=b.range,_=n(4823),S=(0,r.Z)((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*s.yB)}),(function(e,t){return(t-e)/s.yB}),(function(e){return e.getUTCMinutes()})),C=S,k=S.range,M=(0,r.Z)((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*s.Y2)}),(function(e,t){return(t-e)/s.Y2}),(function(e){return e.getUTCHours()})),T=M,A=M.range,E=n(8480),P=n(8176),R=(0,r.Z)((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),O=R,I=R.range,L=n(9791)},52:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=new Date,i=new Date;function o(e,t,n,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},s.range=function(n,r,i){var o,a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return a},s.filter=function(n){return o((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(s.count=function(t,o){return r.setTime(+t),i.setTime(+o),e(r),e(i),Math.floor(n(r,i))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}},8480:function(e,t,n){"use strict";n.d(t,{y:function(){return a}});var r=n(52),i=n(4263),o=(0,r.Z)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/i.UD}),(function(e){return e.getUTCDate()-1}));t.Z=o;var a=o.range},8176:function(e,t,n){"use strict";n.d(t,{$3:function(){return h},DK:function(){return m},J1:function(){return l},Ox:function(){return a},QQ:function(){return d},Q_:function(){return b},SU:function(){return p},b3:function(){return c},fz:function(){return y},g4:function(){return f},hB:function(){return u},l6:function(){return s},uy:function(){return g},xj:function(){return v}});var r=n(52),i=n(4263);function o(e){return(0,r.Z)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/i.iM}))}var a=o(0),s=o(1),l=o(2),c=o(3),u=o(4),d=o(5),f=o(6),p=a.range,h=s.range,m=l.range,g=c.range,v=u.range,y=d.range,b=f.range},9791:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(52),i=(0,r.Z)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.Z)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null},t.Z=i;var o=i.range},9879:function(e,t,n){"use strict";n.d(t,{$t:function(){return v},EY:function(){return f},Ff:function(){return b},Ld:function(){return g},OM:function(){return a},aU:function(){return m},b$:function(){return y},bJ:function(){return h},bL:function(){return u},mC:function(){return d},sy:function(){return l},vm:function(){return p},wA:function(){return s},zg:function(){return c}});var r=n(52),i=n(4263);function o(e){return(0,r.Z)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.yB)/i.iM}))}var a=o(0),s=o(1),l=o(2),c=o(3),u=o(4),d=o(5),f=o(6),p=a.range,h=s.range,m=l.range,g=c.range,v=u.range,y=d.range,b=f.range},4823:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var r=n(52),i=(0,r.Z)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.Z)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null},t.Z=i;var o=i.range},5398:function(e){"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,a,c;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=h(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2770:function(e,t,n){"use strict";var r=n(8546);e.exports=function(e){var t=typeof e;if("string"===t){var n=e;if(0==(e=+e)&&r(n))return!1}else if("number"!==t)return!1;return e-e<1}},5400:function(e){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(f*v-p*g)-d*(l*v-c*g)+m*(l*p-c*f),e[1]=-(r*(f*v-p*g)-d*(i*v-o*g)+m*(i*p-o*f)),e[2]=r*(l*v-c*g)-s*(i*v-o*g)+m*(i*c-o*l),e[3]=-(r*(l*p-c*f)-s*(i*p-o*f)+d*(i*c-o*l)),e[4]=-(a*(f*v-p*g)-u*(l*v-c*g)+h*(l*p-c*f)),e[5]=n*(f*v-p*g)-u*(i*v-o*g)+h*(i*p-o*f),e[6]=-(n*(l*v-c*g)-a*(i*v-o*g)+h*(i*c-o*l)),e[7]=n*(l*p-c*f)-a*(i*p-o*f)+u*(i*c-o*l),e[8]=a*(d*v-p*m)-u*(s*v-c*m)+h*(s*p-c*d),e[9]=-(n*(d*v-p*m)-u*(r*v-o*m)+h*(r*p-o*d)),e[10]=n*(s*v-c*m)-a*(r*v-o*m)+h*(r*c-o*s),e[11]=-(n*(s*p-c*d)-a*(r*p-o*d)+u*(r*c-o*s)),e[12]=-(a*(d*g-f*m)-u*(s*g-l*m)+h*(s*f-l*d)),e[13]=n*(d*g-f*m)-u*(r*g-i*m)+h*(r*f-i*d),e[14]=-(n*(s*g-l*m)-a*(r*g-i*m)+h*(r*l-i*s)),e[15]=n*(s*f-l*d)-a*(r*f-i*d)+u*(r*l-i*s),e}},2331:function(e){e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},1042:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},1902:function(e){e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},9887:function(e){e.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],p=e[12],h=e[13],m=e[14],g=e[15];return(t*a-n*o)*(d*g-f*m)-(t*s-r*o)*(u*g-f*h)+(t*l-i*o)*(u*m-d*h)+(n*s-r*a)*(c*g-f*p)-(n*l-i*a)*(c*m-d*p)+(r*l-i*s)*(c*h-u*p)}},7812:function(e){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,d=r*s,f=i*a,p=i*s,h=i*l,m=o*a,g=o*s,v=o*l;return e[0]=1-d-h,e[1]=u+v,e[2]=f-g,e[3]=0,e[4]=u-v,e[5]=1-c-h,e[6]=p+m,e[7]=0,e[8]=f+g,e[9]=p-m,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},4045:function(e){e.exports=function(e,t,n){var r,i,o,a=n[0],s=n[1],l=n[2],c=Math.sqrt(a*a+s*s+l*l);return Math.abs(c)<1e-6?null:(a*=c=1/c,s*=c,l*=c,r=Math.sin(t),o=1-(i=Math.cos(t)),e[0]=a*a*o+i,e[1]=s*a*o+l*r,e[2]=l*a*o-s*r,e[3]=0,e[4]=a*s*o-l*r,e[5]=s*s*o+i,e[6]=l*s*o+a*r,e[7]=0,e[8]=a*l*o+s*r,e[9]=s*l*o-a*r,e[10]=l*l*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}},5973:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,l=i+i,c=o+o,u=r*s,d=r*l,f=r*c,p=i*l,h=i*c,m=o*c,g=a*s,v=a*l,y=a*c;return e[0]=1-(p+m),e[1]=d+y,e[2]=f-v,e[3]=0,e[4]=d-y,e[5]=1-(u+m),e[6]=h+g,e[7]=0,e[8]=f+v,e[9]=h-g,e[10]=1-(u+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},1472:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},4669:function(e){e.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},5262:function(e){e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},331:function(e){e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},1049:function(e){e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},5195:function(e){e.exports=function(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}},1551:function(e){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},9576:function(e,t,n){e.exports={create:n(1902),clone:n(2331),copy:n(1042),identity:n(1551),transpose:n(8654),invert:n(5874),adjoint:n(5400),determinant:n(9887),multiply:n(1362),translate:n(1283),scale:n(789),rotate:n(5074),rotateX:n(5545),rotateY:n(4918),rotateZ:n(5692),fromRotation:n(4045),fromRotationTranslation:n(5973),fromScaling:n(1472),fromTranslation:n(4669),fromXRotation:n(5262),fromYRotation:n(331),fromZRotation:n(1049),fromQuat:n(7812),frustum:n(5195),perspective:n(7864),perspectiveFromFieldOfView:n(5279),ortho:n(378),lookAt:n(5551),str:n(6726)}},5874:function(e){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*a,b=n*l-i*a,x=n*c-o*a,w=r*l-i*s,_=r*c-o*s,S=i*c-o*l,C=u*m-d*h,k=u*g-f*h,M=u*v-p*h,T=d*g-f*m,A=d*v-p*m,E=f*v-p*g,P=y*E-b*A+x*T+w*M-_*k+S*C;return P?(P=1/P,e[0]=(s*E-l*A+c*T)*P,e[1]=(i*A-r*E-o*T)*P,e[2]=(m*S-g*_+v*w)*P,e[3]=(f*_-d*S-p*w)*P,e[4]=(l*M-a*E-c*k)*P,e[5]=(n*E-i*M+o*k)*P,e[6]=(g*x-h*S-v*b)*P,e[7]=(u*S-f*x+p*b)*P,e[8]=(a*A-s*M+c*C)*P,e[9]=(r*M-n*A-o*C)*P,e[10]=(h*_-m*x+v*y)*P,e[11]=(d*x-u*_-p*y)*P,e[12]=(s*k-a*T-l*C)*P,e[13]=(n*T-r*k+i*C)*P,e[14]=(m*b-h*w-g*y)*P,e[15]=(u*w-d*b+f*y)*P,e):null}},5551:function(e,t,n){var r=n(1551);e.exports=function(e,t,n,i){var o,a,s,l,c,u,d,f,p,h,m=t[0],g=t[1],v=t[2],y=i[0],b=i[1],x=i[2],w=n[0],_=n[1],S=n[2];return Math.abs(m-w)<1e-6&&Math.abs(g-_)<1e-6&&Math.abs(v-S)<1e-6?r(e):(d=m-w,f=g-_,p=v-S,o=b*(p*=h=1/Math.sqrt(d*d+f*f+p*p))-x*(f*=h),a=x*(d*=h)-y*p,s=y*f-b*d,(h=Math.sqrt(o*o+a*a+s*s))?(o*=h=1/h,a*=h,s*=h):(o=0,a=0,s=0),l=f*s-p*a,c=p*o-d*s,u=d*a-f*o,(h=Math.sqrt(l*l+c*c+u*u))?(l*=h=1/h,c*=h,u*=h):(l=0,c=0,u=0),e[0]=o,e[1]=l,e[2]=d,e[3]=0,e[4]=a,e[5]=c,e[6]=f,e[7]=0,e[8]=s,e[9]=u,e[10]=p,e[11]=0,e[12]=-(o*m+a*g+s*v),e[13]=-(l*m+c*g+u*v),e[14]=-(d*m+f*g+p*v),e[15]=1,e)}},1362:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n[0],x=n[1],w=n[2],_=n[3];return e[0]=b*r+x*s+w*d+_*m,e[1]=b*i+x*l+w*f+_*g,e[2]=b*o+x*c+w*p+_*v,e[3]=b*a+x*u+w*h+_*y,b=n[4],x=n[5],w=n[6],_=n[7],e[4]=b*r+x*s+w*d+_*m,e[5]=b*i+x*l+w*f+_*g,e[6]=b*o+x*c+w*p+_*v,e[7]=b*a+x*u+w*h+_*y,b=n[8],x=n[9],w=n[10],_=n[11],e[8]=b*r+x*s+w*d+_*m,e[9]=b*i+x*l+w*f+_*g,e[10]=b*o+x*c+w*p+_*v,e[11]=b*a+x*u+w*h+_*y,b=n[12],x=n[13],w=n[14],_=n[15],e[12]=b*r+x*s+w*d+_*m,e[13]=b*i+x*l+w*f+_*g,e[14]=b*o+x*c+w*p+_*v,e[15]=b*a+x*u+w*h+_*y,e}},378:function(e){e.exports=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e}},7864:function(e){e.exports=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}},5279:function(e){e.exports=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),c=2/(i+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-s)*l*.5,e[9]=(i-o)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},5074:function(e){e.exports=function(e,t,n,r){var i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C,k,M,T,A=r[0],E=r[1],P=r[2],R=Math.sqrt(A*A+E*E+P*P);return Math.abs(R)<1e-6?null:(A*=R=1/R,E*=R,P*=R,i=Math.sin(n),a=1-(o=Math.cos(n)),s=t[0],l=t[1],c=t[2],u=t[3],d=t[4],f=t[5],p=t[6],h=t[7],m=t[8],g=t[9],v=t[10],y=t[11],b=A*A*a+o,x=E*A*a+P*i,w=P*A*a-E*i,_=A*E*a-P*i,S=E*E*a+o,C=P*E*a+A*i,k=A*P*a+E*i,M=E*P*a-A*i,T=P*P*a+o,e[0]=s*b+d*x+m*w,e[1]=l*b+f*x+g*w,e[2]=c*b+p*x+v*w,e[3]=u*b+h*x+y*w,e[4]=s*_+d*S+m*C,e[5]=l*_+f*S+g*C,e[6]=c*_+p*S+v*C,e[7]=u*_+h*S+y*C,e[8]=s*k+d*M+m*T,e[9]=l*k+f*M+g*T,e[10]=c*k+p*M+v*T,e[11]=u*k+h*M+y*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},5545:function(e){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+d*r,e[7]=l*i+f*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=d*i-s*r,e[11]=f*i-l*r,e}},4918:function(e){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-d*r,e[3]=l*i-f*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+d*i,e[11]=l*r+f*i,e}},5692:function(e){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+d*r,e[3]=l*i+f*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=d*i-s*r,e[7]=f*i-l*r,e}},789:function(e){e.exports=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},6726:function(e){e.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},1283:function(e){e.exports=function(e,t,n){var r,i,o,a,s,l,c,u,d,f,p,h,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],p=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=f,e[10]=p,e[11]=h,e[12]=r*m+s*g+d*v+t[12],e[13]=i*m+l*g+f*v+t[13],e[14]=o*m+c*g+p*v+t[14],e[15]=a*m+u*g+h*v+t[15]),e}},8654:function(e){e.exports=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},7035:function(e,t,n){"use strict";var r,i=n(4404);r="function"==typeof n.g.matchMedia?!n.g.matchMedia("(hover: none)").matches:i,e.exports=r},8520:function(e,t,n){"use strict";var r=n(4404);e.exports=r&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},4404:function(e){e.exports=!0},8546:function(e){"use strict";e.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},8956:function(e){var t={left:0,top:0};e.exports=function(e,n,r){n=n||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i,o=e.clientX||0,a=e.clientY||0,s=(i=n)===window||i===document||i===document.body?t:i.getBoundingClientRect();return r[0]=o-s.left,r[1]=a-s.top,r}},7417:function(e,t,n){var r,i,o,a;i="Promise",a=function(){"use strict";var e,t,n,r=Object.prototype.toString,i="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(t){e=function(e,t,n){return e[t]=n,e}}function o(e,r){n.add(e,r),t||(t=i(n.drain))}function a(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)l(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,n){var r,i;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=a(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}function c(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=a(e))?o((function(){var r=new f(n);try{t.call(e,(function(){c.apply(r,arguments)}),(function(){u.apply(r,arguments)}))}catch(e){u.call(r,e)}})):(n.msg=e,n.state=1,n.chain.length>0&&o(s,n))}catch(e){u.call(new f(n),e)}}}function u(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(s,t))}function d(e,t,n,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then((function(e){n(i,e)}),r)}(i)}function f(e){this.def=e,this.triggered=!1}function p(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new p(this);this.then=function(e,n){var r={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return r.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");r.resolve=e,r.reject=t})),t.chain.push(r),0!==t.state&&o(s,t),r.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){c.call(t,e)}),(function(e){u.call(t,e)}))}catch(e){u.call(t,e)}}n=function(){var e,n,r;function i(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,o){r=new i(t,o),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var r=e;for(e=n=t=void 0;r;)r.fn.call(r.self),r=r.next}}}();var m=e({},"constructor",h,!1);return h.prototype=m,e(m,"__NPO__",0,!1),e(h,"resolve",(function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)}))})),e(h,"reject",(function(e){return new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)}))})),e(h,"all",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,o=Array(i),a=0;d(t,e,(function(e,t){o[e]=t,++a===i&&n(o)}),r)}))})),e(h,"race",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):new t((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");d(t,e,(function(e,t){n(t)}),r)}))})),h},(o=void 0!==n.g?n.g:this)[i]=o[i]||a(),e.exports?e.exports=o[i]:void 0===(r=function(){return o[i]}.call(t,n,t,e))||(e.exports=r)},6131:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(l[u]=a[u]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},5616:function(e){e.exports=function(e){var i=[];return e.replace(n,(function(e,n,o){var a=n.toLowerCase();for(o=function(e){var t=e.match(r);return t?t.map(Number):[]}(o),"m"==a&&o.length>2&&(i.push([n].concat(o.splice(0,2))),a="l",n="m"==n?"l":"L");;){if(o.length==t[a])return o.unshift(n),i.push(o);if(o.length<t[a])throw new Error("malformed path data");i.push([n].concat(o.splice(0,t[a])))}})),i};var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi,r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},8258:function(e){e.exports=function(e,t,n,r){var i=e[0],o=e[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=t.length);for(var s=r-n,l=0,c=s-1;l<s;c=l++){var u=t[l+n][0],d=t[l+n][1],f=t[c+n][0],p=t[c+n][1];d>o!=p>o&&i<(f-u)*(o-d)/(p-d)+u&&(a=!a)}return a}},2142:function(e,t,n){var r,i=n(9444),o=n(9023),a=n(7263),s=n(1328),l=n(5968),c=n(670),u=!1,d=o();function f(e,t,n){var i=r.segments(e),o=r.segments(t),a=n(r.combine(i,o));return r.polygon(a)}r={buildLog:function(e){return!0===e?u=i():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=a(!0,d,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:a(!1,d,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,d,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(r,e)},polygonToGeoJSON:function(e){return c.fromPolygon(r,d,e)},union:function(e,t){return f(e,t,r.selectUnion)},intersect:function(e,t){return f(e,t,r.selectIntersect)},difference:function(e,t){return f(e,t,r.selectDifference)},differenceRev:function(e,t){return f(e,t,r.selectDifferenceRev)},xor:function(e,t){return f(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),e.exports=r},9444:function(e){e.exports=function(){var e,t=0,n=!1;function r(t,n){return e.list.push({type:t,data:n?JSON.parse(JSON.stringify(n)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(t){return t===n?e:(n=t,r("vert",{x:t}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),r("log",{txt:e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},9023:function(e){e.exports=function(e){"number"!=typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"==typeof t&&(e=t),e},pointAboveOrOnLine:function(t,n,r){var i=n[0],o=n[1],a=r[0],s=r[1],l=t[0];return(a-i)*(t[1]-o)-(s-o)*(l-i)>=-e},pointBetween:function(t,n,r){var i=t[1]-n[1],o=r[0]-n[0],a=t[0]-n[0],s=r[1]-n[1],l=a*o+i*s;return!(l<e||l-(o*o+s*s)>-e)},pointsSameX:function(t,n){return Math.abs(t[0]-n[0])<e},pointsSameY:function(t,n){return Math.abs(t[1]-n[1])<e},pointsSame:function(e,n){return t.pointsSameX(e,n)&&t.pointsSameY(e,n)},pointsCompare:function(e,n){return t.pointsSameX(e,n)?t.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1},pointsCollinear:function(t,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=n[0]-r[0],s=n[1]-r[1];return Math.abs(i*s-a*o)<e},linesIntersect:function(t,n,r,i){var o=n[0]-t[0],a=n[1]-t[1],s=i[0]-r[0],l=i[1]-r[1],c=o*l-a*s;if(Math.abs(c)<e)return!1;var u=t[0]-r[0],d=t[1]-r[1],f=(s*d-l*u)/c,p=(o*d-a*u)/c,h={alongA:0,alongB:0,pt:[t[0]+f*o,t[1]+f*a]};return h.alongA=f<=-e?-2:f<e?-1:f-1<=-e?0:f-1<e?1:2,h.alongB=p<=-e?-2:p<e?-1:p-1<=-e?0:p-1<e?1:2,h},pointInsideRegion:function(t,n){for(var r=t[0],i=t[1],o=n[n.length-1][0],a=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-i>e!=a-i>e&&(o-c)*(i-u)/(a-u)+c-r>e&&(s=!s),o=c,a=u}return s}};return t}},670:function(e){var t={toPolygon:function(e,t){function n(t){if(t.length<=0)return e.segments({inverted:!1,regions:[]});function n(t){var n=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[n]})}for(var r=n(t[0]),i=1;i<t.length;i++)r=e.selectDifference(e.combine(r,n(t[i])));return r}if("Polygon"===t.type)return e.polygon(n(t.coordinates));if("MultiPolygon"===t.type){for(var r=e.segments({inverted:!1,regions:[]}),i=0;i<t.coordinates.length;i++)r=e.selectUnion(e.combine(r,n(t.coordinates[i])));return e.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,n){function r(e,n){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],n)}function i(e){return{region:e,children:[]}}n=e.polygon(e.segments(n));var o=i(null);function a(e,t){for(var n=0;n<e.children.length;n++)if(r(t,(s=e.children[n]).region))return void a(s,t);var o=i(t);for(n=0;n<e.children.length;n++){var s;r((s=e.children[n]).region,t)&&(o.children.push(s),e.children.splice(n,1),n--)}e.children.push(o)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||a(o,l)}function c(e,t){for(var n=0,r=e[e.length-1][0],i=e[e.length-1][1],o=[],a=0;a<e.length;a++){var s=e[a][0],l=e[a][1];o.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==t&&o.reverse(),o.push([o[0][0],o[0][1]]),o}var u=[];function d(e){var t=[c(e.region,!1)];u.push(t);for(var n=0;n<e.children.length;n++)t.push(f(e.children[n]))}function f(e){for(var t=0;t<e.children.length;t++)d(e.children[t]);return c(e.region,!0)}for(s=0;s<o.children.length;s++)d(o.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};e.exports=t},7263:function(e,t,n){var r=n(6859);e.exports=function(e,t,n){function i(e,t,r){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var o=r.create();function a(e,n){o.insertBefore(e,(function(r){return i=e.isStart,o=e.pt,a=n,s=r.isStart,l=r.pt,c=r.other.pt,(0!==(u=t.pointsCompare(o,l))?u:t.pointsSame(a,c)?0:i!==s?i?1:-1:t.pointAboveOrOnLine(a,s?l:c,s?c:l)?1:-1)<0;var i,o,a,s,l,c,u}))}function s(e,t){var n=function(e,t){var n=r.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return a(n,e.end),n}(e,t);return function(e,t,n){var i=r.node({isStart:!1,pt:t.end,seg:t,primary:n,other:e,status:null});e.other=i,a(i,e.pt)}(n,e,t),n}function l(e,t){var r=i(t,e.seg.end,e.seg);return function(e,t){n&&n.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,a(e.other,e.pt)}(e,t),s(r,e.primary)}function c(i,a){var s=r.create();function c(e){return s.findTransition((function(n){var r,i,o,a,s,l;return r=e,i=n.ev,o=r.seg.start,a=r.seg.end,s=i.seg.start,l=i.seg.end,(t.pointsCollinear(o,s,l)?t.pointsCollinear(a,s,l)||t.pointAboveOrOnLine(a,s,l)?1:-1:t.pointAboveOrOnLine(o,s,l)?1:-1)>0}))}function u(e,r){var i=e.seg,o=r.seg,a=i.start,s=i.end,c=o.start,u=o.end;n&&n.checkIntersection(i,o);var d=t.linesIntersect(a,s,c,u);if(!1===d){if(!t.pointsCollinear(a,s,c))return!1;if(t.pointsSame(a,u)||t.pointsSame(s,c))return!1;var f=t.pointsSame(a,c),p=t.pointsSame(s,u);if(f&&p)return r;var h=!f&&t.pointBetween(a,c,u),m=!p&&t.pointBetween(s,c,u);if(f)return m?l(r,s):l(e,u),r;h&&(p||(m?l(r,s):l(e,u)),l(r,a))}else 0===d.alongA&&(-1===d.alongB?l(e,c):0===d.alongB?l(e,d.pt):1===d.alongB&&l(e,u)),0===d.alongB&&(-1===d.alongA?l(r,a):0===d.alongA?l(r,d.pt):1===d.alongA&&l(r,s));return!1}for(var d=function(){if(p=o.getHead(),n&&n.vert(p.pt[0]),p.isStart){var t=function(){if(m){var e=u(p,m);if(e)return e}return!!g&&u(p,g)};if(n&&n.segmentNew(p.seg,p.primary),h=c(p),m=h.before?h.before.ev:null,g=h.after?h.after.ev:null,n&&n.tempStatus(p.seg,!!m&&m.seg,!!g&&g.seg),(b=t())&&(e?(y=null===p.seg.myFill.below||p.seg.myFill.above!==p.seg.myFill.below)&&(b.seg.myFill.above=!b.seg.myFill.above):b.seg.otherFill=p.seg.myFill,n&&n.segmentUpdate(b.seg),p.other.remove(),p.remove()),o.getHead()!==p)return n&&n.rewind(p.seg),"continue";e?(y=null===p.seg.myFill.below||p.seg.myFill.above!==p.seg.myFill.below,p.seg.myFill.below=g?g.seg.myFill.above:i,p.seg.myFill.above=y?!p.seg.myFill.below:p.seg.myFill.below):null===p.seg.otherFill&&(v=g?p.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:p.primary?a:i,p.seg.otherFill={above:v,below:v}),n&&n.status(p.seg,!!m&&m.seg,!!g&&g.seg),p.other.status=h.insert(r.node({ev:p}))}else{if(null===(x=p.status))throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");s.exists(x.prev)&&s.exists(x.next)&&u(x.prev.ev,x.next.ev),n&&n.statusRemove(x.ev.seg),x.remove(),p.primary||(w=p.seg.myFill,p.seg.myFill=p.seg.otherFill,p.seg.otherFill=w),f.push(p.seg)}o.getHead().remove()},f=[];!o.isEmpty();){var p,h,m,g,v,y,b,x,w;d()}return n&&n.done(),f}return e?{addRegion:function(e){for(var r,i,o,a=e[e.length-1],l=0;l<e.length;l++){r=a,a=e[l];var c=t.pointsCompare(r,a);0!==c&&s((i=c<0?r:a,o=c<0?a:r,{id:n?n.segmentId():-1,start:i,end:o,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return c(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach((function(e){s(i(e.start,e.end,e),!0)})),n.forEach((function(e){s(i(e.start,e.end,e),!1)})),c(t,r)}}}},6859:function(e){e.exports={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,n){for(var r=e.root,i=e.root.next;null!==i;){if(n(i))return t.prev=i.prev,t.next=i,i.prev.next=t,void(i.prev=t);r=i,i=i.next}r.next=t,t.prev=r,t.next=null},findTransition:function(t){for(var n=e.root,r=e.root.next;null!==r&&!t(r);)n=r,r=r.next;return{before:n===e.root?null:n,after:r,insert:function(e){return e.prev=n,e.next=r,n.next=e,null!==r&&(r.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},1328:function(e){e.exports=function(e,t,n){var r=[],i=[];return e.forEach((function(e){var o=e.start,a=e.end;if(t.pointsSame(o,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(e);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<r.length;u++){var d=(g=r[u])[0],f=(g[1],g[g.length-1]);if(g[g.length-2],t.pointsSame(d,o)){if(C(u,!0,!0))break}else if(t.pointsSame(d,a)){if(C(u,!0,!1))break}else if(t.pointsSame(f,o)){if(C(u,!1,!0))break}else if(t.pointsSame(f,a)&&C(u,!1,!1))break}if(c===s)return r.push([o,a]),void(n&&n.chainNew(o,a));if(c===l){n&&n.chainMatch(s.index);var p=s.index,h=s.matches_pt1?a:o,m=s.matches_head,g=r[p],v=m?g[0]:g[g.length-1],y=m?g[1]:g[g.length-2],b=m?g[g.length-1]:g[0],x=m?g[g.length-2]:g[1];return t.pointsCollinear(y,v,h)&&(m?(n&&n.chainRemoveHead(s.index,h),g.shift()):(n&&n.chainRemoveTail(s.index,h),g.pop()),v=y),t.pointsSame(b,h)?(r.splice(p,1),t.pointsCollinear(x,b,v)&&(m?(n&&n.chainRemoveTail(s.index,v),g.pop()):(n&&n.chainRemoveHead(s.index,v),g.shift())),n&&n.chainClose(s.index),void i.push(g)):void(m?(n&&n.chainAddHead(s.index,h),g.unshift(h)):(n&&n.chainAddTail(s.index,h),g.push(h)))}var w=s.index,_=l.index;n&&n.chainConnect(w,_);var S=r[w].length<r[_].length;s.matches_head?l.matches_head?S?(k(w),M(w,_)):(k(_),M(_,w)):M(_,w):l.matches_head?M(w,_):S?(k(w),M(_,w)):(k(_),M(w,_))}function C(e,t,n){return c.index=e,c.matches_head=t,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function k(e){n&&n.chainReverse(e),r[e].reverse()}function M(e,i){var o=r[e],a=r[i],s=o[o.length-1],l=o[o.length-2],c=a[0],u=a[1];t.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(e,s),o.pop(),s=l),t.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(i,c),a.shift()),n&&n.chainJoin(e,i),r[e]=o.concat(a),r.splice(i,1)}})),i}},5968:function(e){function t(e,t,n){var r=[];return e.forEach((function(e){var i=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[i]&&r.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[i],below:2===t[i]},otherFill:null})})),n&&n.selected(r),r}var n={union:function(e,n){return t(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],n)},intersect:function(e,n){return t(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],n)},difference:function(e,n){return t(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],n)},differenceRev:function(e,n){return t(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],n)},xor:function(e,n){return t(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],n)}};e.exports=n},4267:function(e,t,n){var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,l=i.round,c=i.min,u=i.max,d=i.random;function f(e,t){if(t=t||{},(e=e||"")instanceof f)return e;if(!(this instanceof f))return new f(e,t);var n=function(e){var t,n,r,s={r:0,g:0,b:0},l=1,d=null,f=null,p=null,h=!1,m=!1;return"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,n=!1;if(P[e])e=P[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=U.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=U.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=U.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=U.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=U.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=U.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=U.hex8.exec(e))?{r:D(t[1]),g:D(t[2]),b:D(t[3]),a:B(t[4]),format:n?"name":"hex8"}:(t=U.hex6.exec(e))?{r:D(t[1]),g:D(t[2]),b:D(t[3]),format:n?"name":"hex"}:(t=U.hex4.exec(e))?{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),a:B(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=U.hex3.exec(e))&&{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==typeof e&&(V(e.r)&&V(e.g)&&V(e.b)?(t=e.r,n=e.g,r=e.b,s={r:255*I(t,255),g:255*I(n,255),b:255*I(r,255)},h=!0,m="%"===String(e.r).substr(-1)?"prgb":"rgb"):V(e.h)&&V(e.s)&&V(e.v)?(d=F(e.s),f=F(e.v),s=function(e,t,n){e=6*I(e,360),t=I(t,100),n=I(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),l=n*(1-(1-o)*t),c=r%6;return{r:255*[n,s,a,a,l,n][c],g:255*[l,n,n,s,a,a][c],b:255*[a,a,l,n,n,s][c]}}(e.h,d,f),h=!0,m="hsv"):V(e.h)&&V(e.s)&&V(e.l)&&(d=F(e.s),p=F(e.l),s=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=I(e,360),t=I(t,100),n=I(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,d,p),h=!0,m="hsl"),e.hasOwnProperty("a")&&(l=e.a)),l=O(l),{ok:h,format:e.format||m,r:c(255,u(s.r,0)),g:c(255,u(s.g,0)),b:c(255,u(s.b,0)),a:l}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function p(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,o=u(e,t,n),a=c(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function h(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,o=u(e,t,n),a=c(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function m(e,t,n,r){var i=[N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(e,t,n,r){return[N(z(r)),N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16))].join("")}function v(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.s-=t/100,n.s=L(n.s),f(n)}function y(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.s+=t/100,n.s=L(n.s),f(n)}function b(e){return f(e).desaturate(100)}function x(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.l+=t/100,n.l=L(n.l),f(n)}function w(e,t){t=0===t?0:t||10;var n=f(e).toRgb();return n.r=u(0,c(255,n.r-l(-t/100*255))),n.g=u(0,c(255,n.g-l(-t/100*255))),n.b=u(0,c(255,n.b-l(-t/100*255))),f(n)}function _(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.l-=t/100,n.l=L(n.l),f(n)}function S(e,t){var n=f(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,f(n)}function C(e){var t=f(e).toHsl();return t.h=(t.h+180)%360,f(t)}function k(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+120)%360,s:t.s,l:t.l}),f({h:(n+240)%360,s:t.s,l:t.l})]}function M(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+90)%360,s:t.s,l:t.l}),f({h:(n+180)%360,s:t.s,l:t.l}),f({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+72)%360,s:t.s,l:t.l}),f({h:(n+216)%360,s:t.s,l:t.l})]}function A(e,t,n){t=t||6,n=n||30;var r=f(e).toHsl(),i=360/n,o=[f(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(f(r));return o}function E(e,t){t=t||6;for(var n=f(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(f({h:r,s:i,v:o})),o=(o+s)%1;return a}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=O(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16)),N(z(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*I(this._r,255))+"%",g:l(100*I(this._g,255))+"%",b:l(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%)":"rgba("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=f(e);n="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},f.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:F(e[r]));e=n}return f(e,t)},f.equals=function(e,t){return!(!e||!t)&&f(e).toRgbString()==f(t).toRgbString()},f.random=function(){return f.fromRatio({r:d(),g:d(),b:d()})},f.mix=function(e,t,n){n=0===n?0:n||50;var r=f(e).toRgb(),i=f(t).toRgb(),o=n/100;return f({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},f.readability=function(e,t){var n=f(e),r=f(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},f.isReadable=function(e,t,n){var r,i,o,a,s,l=f.readability(e,t);switch(i=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(s=(o.size||"small").toLowerCase())&&"large"!==s&&(s="small"),r={level:a,size:s}).level+r.size){case"AAsmall":case"AAAlarge":i=l>=4.5;break;case"AAlarge":i=l>=3;break;case"AAAsmall":i=l>=7}return i},f.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=f.readability(e,t[c]))>l&&(l=r,s=f(t[c]));return f.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,f.mostReadable(e,["#fff","#000"],n))};var P=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=f.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(P);function O(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function I(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=c(t,u(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function L(e){return c(1,u(0,e))}function D(e){return parseInt(e,16)}function N(e){return 1==e.length?"0"+e:""+e}function F(e){return e<=1&&(e=100*e+"%"),e}function z(e){return i.round(255*parseFloat(e)).toString(16)}function B(e){return D(e)/255}var j,Z,H,U=(Z="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",H="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+Z),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+Z),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+Z),hsva:new RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(e){return!!U.CSS_UNIT.exec(e)}e.exports?e.exports=f:void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}(Math)},3961:function(e,t,n){var r=n(3489),i=n(6131),o=r.instance();function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new r.baseCalendar,i(a.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e){var n=e.match(l);return n?n[0]:""}var r=this._validateYear(e),i=e.month(),o=""+this.toChineseMonth(r,i);return t&&o.length<2&&(o="0"+o),this.isIntercalaryMonth(r,i)&&(o+="i"),o},monthNames:function(e){if("string"==typeof e){var t=e.match(c);return t?t[0]:""}var n=this._validateYear(e),r=e.month(),i=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(n,r)-1];return this.isIntercalaryMonth(n,r)&&(i="\u95f0"+i),i},monthNamesShort:function(e){if("string"==typeof e){var t=e.match(u);return t?t[0]:""}var n=this._validateYear(e),r=e.month(),i=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(n,r)-1];return this.isIntercalaryMonth(n,r)&&(i="\u95f0"+i),i},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);if(isNaN(r))"\u95f0"===t[0]&&(n=!0,t=t.substring(1)),"\u6708"===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(t);else{var i=t[t.length-1];n="i"===i||"I"===i}return this.toMonthIndex(e,r,n)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),"number"!=typeof e||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){var i=this.intercalaryMonth(e);if(n&&t!==i||t<1||t>12)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);return i?!n&&t<=i?t-1:t:t-1},toChineseMonth:function(e,t){e.year&&(t=(e=e.year()).month());var n=this.intercalaryMonth(e);if(t<0||t>(n?12:11))throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);return n?t<n?t+1:t:t+1},intercalaryMonth:function(e){return e=this._validateYear(e),d[e-d[0]]>>13},isIntercalaryMonth:function(e,t){e.year&&(t=(e=e.year()).month());var n=this.intercalaryMonth(e);return!!n&&n===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var i,a=this._validateYear(e,r.local.invalidyear),s=f[a-f[0]],l=s>>9&4095,c=s>>5&15,u=31&s;(i=o.newDate(l,c,u)).add(4-(i.dayOfWeek()||7),"d");var d=this.toJD(e,t,n)-i.toJD();return 1+Math.floor(d/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var n=d[e-d[0]];if(t>(n>>13?12:11))throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);return n&1<<12-t?30:29},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,s,n,r.local.invalidDate);e=this._validateYear(i.year()),t=i.month(),n=i.day();var a=this.isIntercalaryMonth(e,t),s=this.toChineseMonth(e,t),l=function(e,t,n,r,i){var o,a,s;if("object"==typeof e)a=e,o=t||{};else{var l;if(!("number"==typeof e&&e>=1888&&e<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof t&&t>=1&&t<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof n&&n>=1&&n<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof r?(l=!1,o=r):(l=!!r,o={}),a={year:e,month:t,day:n,isIntercalary:l}}s=a.day-1;var c,u=d[a.year-d[0]],p=u>>13;c=p&&(a.month>p||a.isIntercalary)?a.month:a.month-1;for(var h=0;h<c;h++)s+=u&1<<12-h?30:29;var m=f[a.year-f[0]],g=new Date(m>>9&4095,(m>>5&15)-1,(31&m)+s);return o.year=g.getFullYear(),o.month=1+g.getMonth(),o.day=g.getDate(),o}(e,s,n,a);return o.toJD(l.year,l.month,l.day)},fromJD:function(e){var t=o.fromJD(e),n=function(e,t,n,r){var i,o;if("object"==typeof e)i=e,o=t||{};else{if(!("number"==typeof e&&e>=1888&&e<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof t&&t>=1&&t<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof n&&n>=1&&n<=31))throw new Error("Solar day outside range 1 - 31");i={year:e,month:t,day:n},o={}}var a=f[i.year-f[0]],s=i.year<<9|i.month<<5|i.day;o.year=s>=a?i.year:i.year-1,a=f[o.year-f[0]];var l,c=new Date(a>>9&4095,(a>>5&15)-1,31&a),u=new Date(i.year,i.month-1,i.day);l=Math.round((u-c)/864e5);var p,h=d[o.year-d[0]];for(p=0;p<13;p++){var m=h&1<<12-p?30:29;if(l<m)break;l-=m}var g=h>>13;return!g||p<g?(o.isIntercalary=!1,o.month=1+p):p===g?(o.isIntercalary=!0,o.month=p):(o.isIntercalary=!1,o.month=p),o.day=1+l,o}(t.year(),t.month(),t.day()),r=this.toMonthIndex(n.year,n.month,n.isIntercalary);return this.newDate(n.year,r,n.day)},fromString:function(e){var t=e.match(s),n=this._validateYear(+t[1]),r=+t[2],i=!!t[3],o=this.toMonthIndex(n,r,i),a=+t[4];return this.newDate(n,o,a)},add:function(e,t,n){var r=e.year(),i=e.month(),o=this.isIntercalaryMonth(r,i),s=this.toChineseMonth(r,i),l=Object.getPrototypeOf(a.prototype).add.call(this,e,t,n);if("y"===n){var c=l.year(),u=l.month(),d=this.isIntercalaryMonth(c,s),f=o&&d?this.toMonthIndex(c,s,!0):this.toMonthIndex(c,s,!1);f!==u&&l.month(f)}return l}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,l=/^\d?\d[iI]?/m,c=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,u=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;r.calendars.chinese=a;var d=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},8751:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return(e=i.year())<0&&e++,i.day()+30*(i.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(t/30)+1,i=t-30*(r-1)+1;return this.newDate(n,r,i)}}),r.calendars.coptic=o},6825:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),400},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){return(this._validate(e,t,n,r.local.invalidDate).day()+1)%8},weekDay:function(e,t,n){var r=this.dayOfWeek(e,t,n);return r>=2&&r<=6},extraInfo:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return{century:a[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return e=i.year()+(i.year()<0?1:0),t=i.month(),(n=i.day())+(t>1?16:0)+(t>2?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=e>15?16:0;var n=Math.floor(e/32)+1,r=e-32*(n-1)+1;return this.newDate(t<=0?t-1:t,n,r)}});var a={20:"Fruitbat",21:"Anchovy"};r.calendars.discworld=o},7715:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return(e=i.year())<0&&e++,i.day()+30*(i.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(t/30)+1,i=t-30*(r-1)+1;return this.newDate(n,r,i)}}),r.calendars.ethiopian=o},9384:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return a(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,r.local.invalidMonth),12===t&&this.leapYear(e)||8===t&&5===a(this.daysInYear(e),10)?30:9===t&&3===a(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);e=i.year(),t=i.month(),n=i.day();var o=e<=0?e+1:e,a=this.jdEpoch+this._delay1(o)+this._delay2(o)+n+1;if(t<7){for(var s=7;s<=this.monthsInYear(e);s++)a+=this.daysInMonth(e,s);for(s=1;s<t;s++)a+=this.daysInMonth(e,s)}else for(s=7;s<t;s++)a+=this.daysInMonth(e,s);return a},_delay1:function(e){var t=Math.floor((235*e-234)/19),n=12084+13753*t,r=29*t+Math.floor(n/25920);return a(3*(r+1),7)<3&&r++,r},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n==356?2:n-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),r.calendars.hebrew=o},3805:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){return(11*this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year()+14)%30<11},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return e=i.year(),t=i.month(),e=e<=0?e+1:e,(n=i.day())+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),r.calendars.islamic=o},8874:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()<0?t.year()+1:t.year())%4==0},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return e=i.year(),t=i.month(),n=i.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5)+1524,n=Math.floor((t-122.1)/365.25),r=Math.floor(365.25*n),i=Math.floor((t-r)/30.6001),o=i-Math.floor(i<14?1:13),a=n-Math.floor(o>2?4716:4715),s=t-r-Math.floor(30.6001*i);return a<=0&&a--,this.newDate(a,o,s)}}),r.calendars.julian=o},3290:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}function s(e,t){return a(e-1,t)+1}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year();var t=Math.floor(e/400);return e%=400,e+=e<0?400:0,t+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){if((e=e.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate).day()},weekDay:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),!0},extraInfo:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate).toJD(),o=this._toHaab(i),a=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[o[0]-1],haabMonth:o[0],haabDay:o[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(e){var t=a(8+(e-=this.jdEpoch)+340,365);return[Math.floor(t/20)+1,a(t,20)]},_toTzolkin:function(e){return[s(20+(e-=this.jdEpoch),20),s(e+4,13)]},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e%=360,e+=e<0?360:0;var n=Math.floor(e/20),r=e%20;return this.newDate(t,n,r)}}),r.calendars.mayan=o},9108:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar;var a=r.instance("gregorian");i(o.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return a.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidMonth);(e=i.year())<0&&e++;for(var o=i.day(),s=1;s<i.month();s++)o+=this.daysPerMonth[s-1];return o+a.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),r.calendars.nanakshahi=o},5422:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){if(e=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var t=0,n=this.minMonth;n<=12;n++)t+=this.NEPALI_CALENDAR_DATA[e][n];return t},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,r.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);e=i.year(),t=i.month(),n=i.day();var o=r.instance(),a=0,s=t,l=e;this._createMissingCalendarData(e);var c=e-(s>9||9===s&&n>=this.NEPALI_CALENDAR_DATA[l][0]?56:57);for(9!==t&&(a=n,s--);9!==s;)s<=0&&(s=12,l--),a+=this.NEPALI_CALENDAR_DATA[l][s],s--;return 9===t?(a+=n-this.NEPALI_CALENDAR_DATA[l][0])<0&&(a+=o.daysInYear(c)):a+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0],o.newDate(c,1,1).add(a,"d").toJD()},fromJD:function(e){var t=r.instance().fromJD(e),n=t.year(),i=t.dayOfYear(),o=n+56;this._createMissingCalendarData(o);for(var a=9,s=this.NEPALI_CALENDAR_DATA[o][0],l=this.NEPALI_CALENDAR_DATA[o][a]-s+1;i>l;)++a>12&&(a=1,o++),l+=this.NEPALI_CALENDAR_DATA[o][a];var c=this.NEPALI_CALENDAR_DATA[o][a]-(l-i);return this.newDate(o,a,c)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),r.calendars.nepali=o},4320:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}o.prototype=new r.baseCalendar,i(o.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return 682*((t.year()-(t.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-(r.dayOfWeek()+1)%7,"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);e=i.year(),t=i.month(),n=i.day();var o=e-(e>=0?474:473),s=474+a(o,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*s-110)/2816)+365*(s-1)+1029983*Math.floor(o/2820)+this.jdEpoch-1},fromJD:function(e){var t=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(t/1029983),r=a(t,1029983),i=2820;if(1029982!==r){var o=Math.floor(r/366),s=a(r,366);i=Math.floor((2134*o+2816*s+2815)/1028522)+o+1}var l=i+2820*n+474;l=l<=0?l-1:l;var c=e-this.toJD(l,1,1)+1,u=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),d=e-this.toJD(l,u,1)+1;return this.newDate(l,u,d)}}),r.calendars.persian=o,r.calendars.jalali=o},1320:function(e,t,n){var r=n(3489),i=n(6131),o=r.instance();function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new r.baseCalendar,i(a.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return e=this._t2gYear(t.year()),o.leapYear(e)},weekOfYear:function(e,t,n){var i=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return e=this._t2gYear(i.year()),o.weekOfYear(e,i.month(),i.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return e=this._t2gYear(i.year()),o.toJD(e,i.month(),i.day())},fromJD:function(e){var t=o.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),r.calendars.taiwan=a},1367:function(e,t,n){var r=n(3489),i=n(6131),o=r.instance();function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new r.baseCalendar,i(a.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return e=this._t2gYear(t.year()),o.leapYear(e)},weekOfYear:function(e,t,n){var i=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return e=this._t2gYear(i.year()),o.weekOfYear(e,i.month(),i.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate);return e=this._t2gYear(i.year()),o.toJD(e,i.month(),i.day())},fromJD:function(e){var t=o.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),r.calendars.thai=a},1457:function(e,t,n){var r=n(3489),i=n(6131);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,i(o.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return 355===this.daysInYear(t.year())},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,r.local.invalidMonth).toJD()-24e5+.5,i=0,o=0;o<a.length;o++){if(a[o]>n)return a[i]-a[i-1];i++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var i=this._validate(e,t,n,r.local.invalidDate),o=12*(i.year()-1)+i.month()-15292;return i.day()+a[o-1]-1+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<a.length&&!(a[r]>t);r++)n++;var i=n+15292,o=Math.floor((i-1)/12),s=o+1,l=i-12*o,c=t-a[n-1]+1;return this.newDate(s,l,c)},isValid:function(e,t,n){var i=r.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(i=(e=null!=e.year?e.year:e)>=1276&&e<=1500),i},_validate:function(e,t,n,i){var o=r.baseCalendar.prototype._validate.apply(this,arguments);if(o.year<1276||o.year>1500)throw i.replace(/\{0\}/,this.local.name);return o}}),r.calendars.ummalqura=o;var a=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},3489:function(e,t,n){var r=n(6131);function i(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function o(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function a(e,t){return"000000".substring(0,t-(e=""+e).length)+e}function s(){this.shortYearCutoff="+10"}function l(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}r(i.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var n=this._localCals[e+"-"+t];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,r,i){return(r=(null!=e&&e.year?e.calendar():"string"==typeof r?this.instance(r,i):r)||this.instance()).newDate(e,t,n)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,(function(t){return e[t]}))}},substituteChineseDigits:function(e,t){return function(n){for(var r="",i=0;n>0;){var o=n%10;r=(0===o?"":e[o]+t[i])+r,i++,n=Math.floor(n/10)}return 0===r.indexOf(e[1]+t[1])&&(r=r.substr(1)),r||e[0]}}}),r(o.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+a(Math.abs(this.year()),4)+"-"+a(this.month(),2)+"-"+a(this.day(),2)}}),r(s.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,c.local.invalidDate||c.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new o(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+a(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var n=this._validate(e,t,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(e,t){var n=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,n,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth),n},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,n){var r=this._validate(e,t,n,c.local.invalidDate||c.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){var r=this._validate(e,t,n,c.local.invalidDate||c.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,c.local.invalidDate||c.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var r=e.toJD()+t*("w"===n?this.daysInWeek():1),i=e.calendar().fromJD(r);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var o=e.year()+("y"===n?t:0),a=e.monthOfYear()+("m"===n?t:0);i=e.day(),"y"===n?(e.month()!==this.fromMonthOfYear(o,a)&&(a=this.newDate(o,e.month(),this.minDay).monthOfYear()),a=Math.min(a,this.monthsInYear(o)),i=Math.min(i,this.daysInMonth(o,this.fromMonthOfYear(o,a)))):"m"===n&&(function(e){for(;a<e.minMonth;)o--,a+=e.monthsInYear(o);for(var t=e.monthsInYear(o);a>t-1+e.minMonth;)o++,a-=t,t=e.monthsInYear(o)}(this),i=Math.min(i,this.daysInMonth(o,this.fromMonthOfYear(o,a))));var s=[o,this.fromMonthOfYear(o,a),i];return this._validateLevel--,s}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){if(!(this.hasYearZero||"y"!==r&&"m"!==r||0!==t[0]&&e.year()>0==t[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],o=n<0?-1:1;t=this._add(e,n*i[0]+o*i[1],i[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),i="m"===n?t:e.month(),o="d"===n?t:e.day();return"y"!==n&&"m"!==n||(o=Math.min(o,this.daysInMonth(r,i))),e.date(r,i,o)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;if(r){var i=this.newDate(e,t,this.minDay);r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(i)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(i)}return this._validateLevel--,r},toJSDate:function(e,t,n){var r=this._validate(e,t,n,c.local.invalidDate||c.regionalOptions[""].invalidDate);return c.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(e){return this.fromJD(c.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var i=this.newDate(e,t,n);return this._validateLevel--,i}catch(e){throw this._validateLevel--,e}}}),l.prototype=new s,r(l.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,c.local.invalidDate||c.regionalOptions[""].invalidDate);e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--);var i=Math.floor(e/100),o=2-i+Math.floor(i/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+o-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=Math.floor((t-1867216.25)/36524.25),r=1524+(n=t+1+n-Math.floor(n/4)),i=Math.floor((r-122.1)/365.25),o=Math.floor(365.25*i),a=Math.floor((r-o)/30.6001),s=r-o-Math.floor(30.6001*a),l=a-(a>13.5?13:1),c=i-(l>2.5?4716:4715);return c<=0&&c--,this.newDate(c,l,s)},toJSDate:function(e,t,n){var r=this._validate(e,t,n,c.local.invalidDate||c.regionalOptions[""].invalidDate),i=new Date(r.year(),r.month()-1,r.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var c=e.exports=new i;c.cdate=o,c.baseCalendar=s,c.calendars.gregorian=l},4338:function(e,t,n){var r=n(6131),i=n(3489);r(i.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),i.local=i.regionalOptions[""],r(i.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),r(i.baseCalendar.prototype,{UNIX_EPOCH:i.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:i.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,n){if("string"!=typeof e&&(n=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw i.local.invalidFormat||i.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat;for(var r,o,a,s=(n=n||{}).dayNamesShort||this.local.dayNamesShort,l=n.dayNames||this.local.dayNames,c=n.monthNumbers||this.local.monthNumbers,u=n.monthNamesShort||this.local.monthNamesShort,d=n.monthNames||this.local.monthNames,f=(n.calculateWeek||this.local.calculateWeek,function(t,n){for(var r=1;w+r<e.length&&e.charAt(w+r)===t;)r++;return w+=r-1,Math.floor(r/(n||1))>1}),p=function(e,t,n,r){var i=""+t;if(f(e,r))for(;i.length<n;)i="0"+i;return i},h=this,m=function(e){return"function"==typeof c?c.call(h,e,f("m")):y(p("m",e.month(),2))},g=function(e,t){return t?"function"==typeof d?d.call(h,e):d[e.month()-h.minMonth]:"function"==typeof u?u.call(h,e):u[e.month()-h.minMonth]},v=this.local.digits,y=function(e){return n.localNumbers&&v?v(e):e},b="",x=!1,w=0;w<e.length;w++)if(x)"'"!==e.charAt(w)||f("'")?b+=e.charAt(w):x=!1;else switch(e.charAt(w)){case"d":b+=y(p("d",t.day(),2));break;case"D":b+=(r=t.dayOfWeek(),o=s,a=l,f("D")?a[r]:o[r]);break;case"o":b+=p("o",t.dayOfYear(),3);break;case"w":b+=p("w",t.weekOfYear(),2);break;case"m":b+=m(t);break;case"M":b+=g(t,f("M"));break;case"y":b+=f("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":f("Y",2),b+=t.formatYear();break;case"J":b+=t.toJD();break;case"@":b+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":b+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":f("'")?b+="'":x=!0;break;default:b+=e.charAt(w)}return b},parseDate:function(e,t,n){if(null==t)throw i.local.invalidArguments||i.regionalOptions[""].invalidArguments;if(""===(t="object"==typeof t?t.toString():t+""))return null;e=e||this.local.dateFormat;var r=(n=n||{}).shortYearCutoff||this.shortYearCutoff;r="string"!=typeof r?r:this.today().year()%100+parseInt(r,10);for(var o=n.dayNamesShort||this.local.dayNamesShort,a=n.dayNames||this.local.dayNames,s=n.parseMonth||this.local.parseMonth,l=n.monthNumbers||this.local.monthNumbers,c=n.monthNamesShort||this.local.monthNamesShort,u=n.monthNames||this.local.monthNames,d=-1,f=-1,p=-1,h=-1,m=-1,g=!1,v=!1,y=function(t,n){for(var r=1;M+r<e.length&&e.charAt(M+r)===t;)r++;return M+=r-1,Math.floor(r/(n||1))>1},b=function(e,n){var r=y(e,n),o=[2,3,r?4:2,r?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],a=new RegExp("^-?\\d{1,"+o+"}"),s=t.substring(k).match(a);if(!s)throw(i.local.missingNumberAt||i.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=s[0].length,parseInt(s[0],10)},x=this,w=function(){if("function"==typeof l){y("m");var e=l.call(x,t.substring(k));return k+=e.length,e}return b("m")},_=function(e,n,r,o){for(var a=y(e,o)?r:n,s=0;s<a.length;s++)if(t.substr(k,a[s].length).toLowerCase()===a[s].toLowerCase())return k+=a[s].length,s+x.minMonth;throw(i.local.unknownNameAt||i.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},S=function(){if("function"==typeof u){var e=y("M")?u.call(x,t.substring(k)):c.call(x,t.substring(k));return k+=e.length,e}return _("M",c,u)},C=function(){if(t.charAt(k)!==e.charAt(M))throw(i.local.unexpectedLiteralAt||i.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},k=0,M=0;M<e.length;M++)if(v)"'"!==e.charAt(M)||y("'")?C():v=!1;else switch(e.charAt(M)){case"d":h=b("d");break;case"D":_("D",o,a);break;case"o":m=b("o");break;case"w":b("w");break;case"m":p=w();break;case"M":p=S();break;case"y":var T=M;g=!y("y",2),M=T,f=b("y",2);break;case"Y":f=b("Y",2);break;case"J":d=b("J")+.5,"."===t.charAt(k)&&(k++,b("J"));break;case"@":d=b("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":d=b("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=t.length;break;case"'":y("'")?C():v=!0;break;default:C()}if(k<t.length)throw i.local.unexpectedText||i.regionalOptions[""].unexpectedText;if(-1===f?f=this.today().year():f<100&&g&&(f+=-1===r?1900:this.today().year()-this.today().year()%100-(f<=r?0:100)),"string"==typeof p&&(p=s.call(this,f,p)),m>-1){p=1,h=m;for(var A=this.daysInMonth(f,p);h>A;A=this.daysInMonth(f,p))p++,h-=A}return d>-1?this.fromJD(d):this.newDate(f,p,h)},determineDate:function(e,t,n,r,i){n&&"object"!=typeof n&&(i=r,r=n,n=null),"string"!=typeof r&&(i=r,r="");var o=this;return t=t?t.newDate():null,null==e?t:"string"==typeof e?function(e){try{return o.parseDate(r,e,i)}catch(e){}for(var t=((e=e.toLowerCase()).match(/^c/)&&n?n.newDate():null)||o.today(),a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=a.exec(e);s;)t.add(parseInt(s[1],10),s[2]||"d"),s=a.exec(e);return t}(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:o.today().add(e,"d"):o.newDate(e)}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}return n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(2576)}()},1729:function(e,t,n){"use strict";var r=n(9165);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5192:function(e,t,n){e.exports=n(1729)()},9165:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3419:function(e,t,n){"use strict";var r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,x,w,_,S,C,k,M,T,A,E,P,R,O,I,L,D,N,F,z,B,j,Z,H,U,V,G,W,$,q,Y,X,K,J,Q,ee,te,ne,re,ie,oe=n(7424).default,ae=n(8416).default,se=n(9400).default,le=n(861).default;var ce=n(7313),ue=n(3115);function de(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var fe,pe=function(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(ce),he=de(ce),me=de(ue);function ge(e,t){return e[t]}function ve(e,t){return t.split(".").reduce((function(e,t){var n=t.match(/[^\]\\[.]+/g);if(n&&n.length>1)for(var r=0;r<n.length;r++)return e[n[r]][n[r+1]];return e[t]}),e)}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[].concat(le(e.slice(0,n)),[t],le(e.slice(n)))}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",r=e.slice(),i=ge(t,n);return i?r.splice(r.findIndex((function(e){return ge(e,n)===i})),1):r.splice(r.findIndex((function(e){return e===t})),1),r}function xe(e){return e.map((function(e,t){var n=Object.assign(Object.assign({},e),{sortable:e.sortable||!!e.sortFunction||void 0});return e.id||(n.id=t+1),n}))}function we(e,t){return Math.ceil(e/t)}function _e(e,t){return Math.min(e,t)}!function(e){e.ASC="asc",e.DESC="desc"}(fe||(fe={}));var Se=function(){return null};function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={},i=le(n);return t.length&&t.forEach((function(t){if(!t.when||"function"!=typeof t.when)throw new Error('"when" must be defined in the conditional style object and must be function');t.when(e)&&(r=t.style||{},t.classNames&&(i=[].concat(le(i),le(t.classNames))),"function"==typeof t.style&&(r=t.style(e)||{}))})),{style:r,classNames:i.join(" ")}}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",r=ge(e,n);return r?t.some((function(e){return ge(e,n)===r})):t.some((function(t){return t===e}))}function Me(e,t){return t?e.findIndex((function(e){return Te(e.id,t)})):-1}function Te(e,t){return e==t}function Ae(e,t){var n=!e.toggleOnSelectedRowsChange;switch(t.type){case"SELECT_ALL_ROWS":var r=t.keyField,i=t.rows,o=t.rowCount,a=t.mergeSelections,s=!e.allSelected,l=!e.toggleOnSelectedRowsChange;if(a){var c=s?[].concat(le(e.selectedRows),le(i.filter((function(t){return!ke(t,e.selectedRows,r)})))):e.selectedRows.filter((function(e){return!ke(e,i,r)}));return Object.assign(Object.assign({},e),{allSelected:s,selectedCount:c.length,selectedRows:c,toggleOnSelectedRowsChange:l})}return Object.assign(Object.assign({},e),{allSelected:s,selectedCount:s?o:0,selectedRows:s?i:[],toggleOnSelectedRowsChange:l});case"SELECT_SINGLE_ROW":var u=t.keyField,d=t.row,f=t.isSelected,p=t.rowCount;return t.singleSelect?f?Object.assign(Object.assign({},e),{selectedCount:0,allSelected:!1,selectedRows:[],toggleOnSelectedRowsChange:n}):Object.assign(Object.assign({},e),{selectedCount:1,allSelected:!1,selectedRows:[d],toggleOnSelectedRowsChange:n}):f?Object.assign(Object.assign({},e),{selectedCount:e.selectedRows.length>0?e.selectedRows.length-1:0,allSelected:!1,selectedRows:be(e.selectedRows,d,u),toggleOnSelectedRowsChange:n}):Object.assign(Object.assign({},e),{selectedCount:e.selectedRows.length+1,allSelected:e.selectedRows.length+1===p,selectedRows:ye(e.selectedRows,d),toggleOnSelectedRowsChange:n});case"SELECT_MULTIPLE_ROWS":var h=t.keyField,m=t.selectedRows,g=t.totalRows;if(t.mergeSelections){var v=[].concat(le(e.selectedRows),le(m.filter((function(t){return!ke(t,e.selectedRows,h)}))));return Object.assign(Object.assign({},e),{selectedCount:v.length,allSelected:!1,selectedRows:v,toggleOnSelectedRowsChange:n})}return Object.assign(Object.assign({},e),{selectedCount:m.length,allSelected:m.length===g,selectedRows:m,toggleOnSelectedRowsChange:n});case"CLEAR_SELECTED_ROWS":var y=t.selectedRowsFlag;return Object.assign(Object.assign({},e),{allSelected:!1,selectedCount:0,selectedRows:[],selectedRowsFlag:y});case"SORT_CHANGE":var b=t.sortDirection,x=t.selectedColumn,w=t.clearSelectedOnSort;return Object.assign(Object.assign(Object.assign({},e),{selectedColumn:x,sortDirection:b,currentPage:1}),w&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:n});case"CHANGE_PAGE":var _=t.page,S=t.paginationServer,C=t.visibleOnly,k=t.persistSelectedOnPageChange,M=S&&k,T=S&&!k||C;return Object.assign(Object.assign(Object.assign(Object.assign({},e),{currentPage:_}),M&&{allSelected:!1}),T&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:n});case"CHANGE_ROWS_PER_PAGE":var A=t.rowsPerPage,E=t.page;return Object.assign(Object.assign({},e),{currentPage:E,rowsPerPage:A})}}var Ee=ue.css(r||(r=se(["\n\tpointer-events: none;\n\topacity: 0.4;\n"]))),Pe=me.default.div(i||(i=se(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 100%;\n\theight: 100%;\n\tmax-width: 100%;\n\t",";\n\t",";\n"])),(function(e){return e.disabled&&Ee}),(function(e){return e.theme.table.style})),Re=ue.css(o||(o=se(["\n\tposition: sticky;\n\tposition: -webkit-sticky; /* Safari */\n\ttop: 0;\n\tz-index: 1;\n"]))),Oe=me.default.div(a||(a=se(["\n\tdisplay: flex;\n\twidth: 100%;\n\t",";\n\t",";\n"])),(function(e){return e.fixedHeader&&Re}),(function(e){return e.theme.head.style})),Ie=me.default.div(s||(s=se(["\n\tdisplay: flex;\n\talign-items: stretch;\n\twidth: 100%;\n\t",";\n\t",";\n"])),(function(e){return e.theme.headRow.style}),(function(e){var t=e.dense,n=e.theme;return t&&n.headRow.denseStyle})),Le=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ue.css(l||(l=se(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),599,ue.css.apply(ue,[e].concat(n)))},De=me.default.div(f||(f=se(["\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tline-height: normal;\n\t",";\n\t",";\n"])),(function(e){return e.theme[e.headCell?"headCells":"cells"].style}),(function(e){return e.noPadding&&"padding: 0"})),Ne=me.default(De)(p||(p=se(["\n\tflex-grow: ",";\n\tflex-shrink: 0;\n\tflex-basis: 0;\n\tmax-width: ",";\n\tmin-width: ",";\n\t",";\n\t",";\n\t",";\n\t",";\n\n\t/* handle hiding cells */\n\t",";\n\t",";\n\t",";\n\t",";\n"])),(function(e){var t=e.button,n=e.grow;return 0===n||t?0:n||1}),(function(e){return e.maxWidth||"100%"}),(function(e){return e.minWidth||"100px"}),(function(e){var t=e.width;return t&&ue.css(h||(h=se(["\n\t\t\tmin-width: ",";\n\t\t\tmax-width: ",";\n\t\t"])),t,t)}),(function(e){return e.right&&"justify-content: flex-end"}),(function(e){var t=e.button;return(e.center||t)&&"justify-content: center"}),(function(e){var t=e.compact,n=e.button;return(t||n)&&"padding: 0"}),(function(e){var t=e.hide;return t&&"sm"===t&&Le(m||(m=se(["\n    display: none;\n  "])))}),(function(e){var t=e.hide;return t&&"md"===t&&function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ue.css(c||(c=se(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),959,ue.css.apply(ue,[e].concat(n)))}(g||(g=se(["\n    display: none;\n  "])))}),(function(e){var t=e.hide;return t&&"lg"===t&&function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ue.css(u||(u=se(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),1280,ue.css.apply(ue,[e].concat(n)))}(v||(v=se(["\n    display: none;\n  "])))}),(function(e){var t=e.hide;return t&&Number.isInteger(t)&&function(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return ue.css(d||(d=se(["\n\t\t\t\t@media screen and (max-width: ","px) {\n\t\t\t\t\t","\n\t\t\t\t}\n\t\t\t"])),e,ue.css.apply(ue,[t].concat(r)))}}(t)(y||(y=se(["\n    display: none;\n  "])))})),Fe=ue.css(b||(b=se(["\n\tdiv:first-child {\n\t\twhite-space: ",";\n\t\toverflow: ",";\n\t\ttext-overflow: ellipsis;\n\t}\n"])),(function(e){return e.wrapCell?"normal":"nowrap"}),(function(e){return e.allowOverflow?"visible":"hidden"})),ze=me.default(Ne).attrs((function(e){return{style:e.style}}))(x||(x=se(["\n\t",";\n\t",";\n\t",";\n"])),(function(e){return!e.renderAsCell&&Fe}),(function(e){var t=e.theme;return e.isDragging&&t.cells.draggingStyle}),(function(e){return e.cellStyle})),Be=pe.memo((function(e){var t=e.id,n=e.column,r=e.row,i=e.rowIndex,o=e.dataTag,a=e.isDragging,s=e.onDragStart,l=e.onDragOver,c=e.onDragEnd,u=e.onDragEnter,d=e.onDragLeave,f=Ce(r,n.conditionalCellStyles,["rdt_TableCell"]),p=f.style,h=f.classNames;return pe.createElement(ze,{id:t,"data-column-id":n.id,role:"cell",className:h,"data-tag":o,cellStyle:n.style,renderAsCell:!!n.cell,allowOverflow:n.allowOverflow,button:n.button,center:n.center,compact:n.compact,grow:n.grow,hide:n.hide,maxWidth:n.maxWidth,minWidth:n.minWidth,right:n.right,width:n.width,wrapCell:n.wrap,style:p,isDragging:a,onDragStart:s,onDragOver:l,onDragEnd:c,onDragEnter:u,onDragLeave:d},!n.cell&&pe.createElement("div",{"data-tag":o},function(e,t,n,r){if(!t)return null;if("string"!=typeof t&&"function"!=typeof t)throw new Error("selector must be a . delimited string eg (my.property) or function (e.g. row => row.field");return n&&"function"==typeof n?n(e,r):t&&"function"==typeof t?t(e,r):ve(e,t)}(r,n.selector,n.format,i)),n.cell&&n.cell(r,i,n,t))})),je=pe.memo((function(e){var t=e.name,n=e.component,r=void 0===n?"input":n,i=e.componentOptions,o=void 0===i?{style:{}}:i,a=e.indeterminate,s=void 0!==a&&a,l=e.checked,c=void 0!==l&&l,u=e.disabled,d=void 0!==u&&u,f=e.onClick,p=void 0===f?Se:f,h=r,m="input"!==h?o.style:function(e){return Object.assign(Object.assign({fontSize:"18px"},!e&&{cursor:"pointer"}),{padding:0,marginTop:"1px",verticalAlign:"middle",position:"relative"})}(d),g=pe.useMemo((function(){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;return Object.keys(e).map((function(t){return e[t]})).forEach((function(t,r){var o=e;"function"==typeof t&&(i=Object.assign(Object.assign({},o),ae({},Object.keys(e)[r],t.apply(void 0,n))))})),i||e}(o,s)}),[o,s]);return pe.createElement(h,Object.assign({type:"checkbox",ref:function(e){e&&(e.indeterminate=s)},style:m,onClick:d?Se:p,name:t,"aria-label":t,checked:c,disabled:d},g,{onChange:Se}))})),Ze=me.default(De)(w||(w=se(["\n\tflex: 0 0 48px;\n\tmin-width: 48px;\n\tjustify-content: center;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n"])));function He(e){var t=e.name,n=e.keyField,r=e.row,i=e.rowCount,o=e.selected,a=e.selectableRowsComponent,s=e.selectableRowsComponentProps,l=e.selectableRowsSingle,c=e.selectableRowDisabled,u=e.onSelectedRow,d=!(!c||!c(r));return pe.createElement(Ze,{onClick:function(e){return e.stopPropagation()},className:"rdt_TableCell",noPadding:!0},pe.createElement(je,{name:t,component:a,componentOptions:s,checked:o,"aria-checked":o,onClick:function(){u({type:"SELECT_SINGLE_ROW",row:r,isSelected:o,keyField:n,rowCount:i,singleSelect:l})},disabled:d}))}var Ue=me.default.button(_||(_=se(["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n\tborder: none;\n\tbackground-color: transparent;\n\t",";\n"])),(function(e){return e.theme.expanderButton.style}));function Ve(e){var t=e.disabled,n=void 0!==t&&t,r=e.expanded,i=void 0!==r&&r,o=e.expandableIcon,a=e.id,s=e.row,l=e.onToggled,c=i?o.expanded:o.collapsed;return pe.createElement(Ue,{"aria-disabled":n,onClick:function(){return l&&l(s)},"data-testid":"expander-button-".concat(a),disabled:n,"aria-label":i?"Collapse Row":"Expand Row",role:"button",type:"button"},c)}var Ge=me.default(De)(S||(S=se(["\n\twhite-space: nowrap;\n\tfont-weight: 400;\n\tmin-width: 48px;\n\t",";\n"])),(function(e){return e.theme.expanderCell.style}));function We(e){var t=e.row,n=e.expanded,r=void 0!==n&&n,i=e.expandableIcon,o=e.id,a=e.onToggled,s=e.disabled,l=void 0!==s&&s;return pe.createElement(Ge,{onClick:function(e){return e.stopPropagation()},noPadding:!0},pe.createElement(Ve,{id:o,row:t,expanded:r,expandableIcon:i,disabled:l,onToggled:a}))}var $e,qe,Ye,Xe=me.default.div(C||(C=se(["\n\twidth: 100%;\n\tbox-sizing: border-box;\n\t",";\n\t",";\n"])),(function(e){return e.theme.expanderRow.style}),(function(e){return e.extendedRowStyle})),Ke=pe.memo((function(e){var t=e.data,n=e.ExpanderComponent,r=e.expanderComponentProps,i=e.extendedRowStyle,o=e.extendedClassNames,a=["rdt_ExpanderRow"].concat(le(o.split(" ").filter((function(e){return"rdt_TableRow"!==e})))).join(" ");return pe.createElement(Xe,{className:a,extendedRowStyle:i},pe.createElement(n,Object.assign({data:t},r)))}));t.Nm=void 0,($e=t.Nm||(t.Nm={})).LTR="ltr",$e.RTL="rtl",$e.AUTO="auto",t.v2=void 0,(qe=t.v2||(t.v2={})).LEFT="left",qe.RIGHT="right",qe.CENTER="center",t.pU=void 0,(Ye=t.pU||(t.pU={})).SM="sm",Ye.MD="md",Ye.LG="lg";var Je=ue.css(k||(k=se(["\n\t&:hover {\n\t\t",";\n\t}\n"])),(function(e){var t=e.highlightOnHover,n=e.theme;return t&&n.rows.highlightOnHoverStyle})),Qe=ue.css(M||(M=se(["\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]))),et=me.default.div.attrs((function(e){return{style:e.style}}))(T||(T=se(["\n\tdisplay: flex;\n\talign-items: stretch;\n\talign-content: stretch;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\t",";\n\t",";\n\t",";\n\t",";\n\t",";\n\t",";\n"])),(function(e){return e.theme.rows.style}),(function(e){var t=e.dense,n=e.theme;return t&&n.rows.denseStyle}),(function(e){var t=e.striped,n=e.theme;return t&&n.rows.stripedStyle}),(function(e){return e.highlightOnHover&&Je}),(function(e){return e.pointerOnHover&&Qe}),(function(e){var t=e.selected,n=e.theme;return t&&n.rows.selectedHighlightStyle}));function tt(e){var t=e.columns,n=void 0===t?[]:t,r=e.conditionalRowStyles,i=void 0===r?[]:r,o=e.defaultExpanded,a=void 0!==o&&o,s=e.defaultExpanderDisabled,l=void 0!==s&&s,c=e.dense,u=void 0!==c&&c,d=e.expandableIcon,f=e.expandableRows,p=void 0!==f&&f,h=e.expandableRowsComponent,m=e.expandableRowsComponentProps,g=e.expandableRowsHideExpander,v=e.expandOnRowClicked,y=void 0!==v&&v,b=e.expandOnRowDoubleClicked,x=void 0!==b&&b,w=e.highlightOnHover,_=void 0!==w&&w,S=e.id,C=e.expandableInheritConditionalStyles,k=e.keyField,M=e.onRowClicked,T=void 0===M?Se:M,A=e.onRowDoubleClicked,E=void 0===A?Se:A,P=e.onRowMouseEnter,R=void 0===P?Se:P,O=e.onRowMouseLeave,I=void 0===O?Se:O,L=e.onRowExpandToggled,D=void 0===L?Se:L,N=e.onSelectedRow,F=void 0===N?Se:N,z=e.pointerOnHover,B=void 0!==z&&z,j=e.row,Z=e.rowCount,H=e.rowIndex,U=e.selectableRowDisabled,V=void 0===U?null:U,G=e.selectableRows,W=void 0!==G&&G,$=e.selectableRowsComponent,q=e.selectableRowsComponentProps,Y=e.selectableRowsHighlight,X=void 0!==Y&&Y,K=e.selectableRowsSingle,J=void 0!==K&&K,Q=e.selected,ee=e.striped,te=void 0!==ee&&ee,ne=e.draggingColumnId,re=e.onDragStart,ie=e.onDragOver,ae=e.onDragEnd,se=e.onDragEnter,le=e.onDragLeave,ce=pe.useState(a),ue=oe(ce,2),de=ue[0],fe=ue[1];pe.useEffect((function(){fe(a)}),[a]);var he=pe.useCallback((function(){fe(!de),D(!de,j)}),[de,D,j]),me=B||p&&(y||x),ve=pe.useCallback((function(e){e.target&&"allowRowEvents"===e.target.getAttribute("data-tag")&&(T(j,e),!l&&p&&y&&he())}),[l,y,p,he,T,j]),ye=pe.useCallback((function(e){e.target&&"allowRowEvents"===e.target.getAttribute("data-tag")&&(E(j,e),!l&&p&&x&&he())}),[l,x,p,he,E,j]),be=pe.useCallback((function(e){R(j,e)}),[R,j]),xe=pe.useCallback((function(e){I(j,e)}),[I,j]),we=ge(j,k),_e=Ce(j,i,["rdt_TableRow"]),ke=_e.style,Me=_e.classNames,Ae=X&&Q,Ee=C?ke:{},Pe=te&&H%2==0;return pe.createElement(pe.Fragment,null,pe.createElement(et,{id:"row-".concat(S),role:"row",striped:Pe,highlightOnHover:_,pointerOnHover:!l&&me,dense:u,onClick:ve,onDoubleClick:ye,onMouseEnter:be,onMouseLeave:xe,className:Me,selected:Ae,style:ke},W&&pe.createElement(He,{name:"select-row-".concat(we),keyField:k,row:j,rowCount:Z,selected:Q,selectableRowsComponent:$,selectableRowsComponentProps:q,selectableRowDisabled:V,selectableRowsSingle:J,onSelectedRow:F}),p&&!g&&pe.createElement(We,{id:we,expandableIcon:d,expanded:de,row:j,onToggled:he,disabled:l}),n.map((function(e){return e.omit?null:pe.createElement(Be,{id:"cell-".concat(e.id,"-").concat(we),key:"cell-".concat(e.id,"-").concat(we),dataTag:e.ignoreRowClick||e.button?null:"allowRowEvents",column:e,row:j,rowIndex:H,isDragging:Te(ne,e.id),onDragStart:re,onDragOver:ie,onDragEnd:ae,onDragEnter:se,onDragLeave:le})}))),p&&de&&pe.createElement(Ke,{key:"expander-".concat(we),data:j,extendedRowStyle:Ee,extendedClassNames:Me,ExpanderComponent:h,expanderComponentProps:m}))}var nt=me.default.span(A||(A=se(["\n\tpadding: 2px;\n\tcolor: inherit;\n\tflex-grow: 0;\n\tflex-shrink: 0;\n\t",";\n\t",";\n"])),(function(e){return e.sortActive?"opacity: 1":"opacity: 0"}),(function(e){return"desc"===e.sortDirection&&"transform: rotate(180deg)"})),rt=function(e){var t=e.sortActive,n=e.sortDirection;return he.default.createElement(nt,{sortActive:t,sortDirection:n},"\u25b2")},it=me.default(Ne)(E||(E=se(["\n\t",";\n\t",";\n"])),(function(e){return e.button&&"text-align: center"}),(function(e){var t=e.theme;return e.isDragging&&t.headCells.draggingStyle})),ot=ue.css(P||(P=se(["\n\tcursor: pointer;\n\tspan.__rdt_custom_sort_icon__ {\n\t\ti,\n\t\tsvg {\n\t\t\ttransform: 'translate3d(0, 0, 0)';\n\t\t\t",";\n\t\t\tcolor: inherit;\n\t\t\tfont-size: 18px;\n\t\t\theight: 18px;\n\t\t\twidth: 18px;\n\t\t\tbackface-visibility: hidden;\n\t\t\ttransform-style: preserve-3d;\n\t\t\ttransition-duration: 95ms;\n\t\t\ttransition-property: transform;\n\t\t}\n\n\t\t&.asc i,\n\t\t&.asc svg {\n\t\t\ttransform: rotate(180deg);\n\t\t}\n\t}\n\n\t",";\n"])),(function(e){return e.sortActive?"opacity: 1":"opacity: 0"}),(function(e){return!e.sortActive&&ue.css(R||(R=se(["\n\t\t\t&:hover,\n\t\t\t&:focus {\n\t\t\t\topacity: 0.7;\n\n\t\t\t\tspan,\n\t\t\t\tspan.__rdt_custom_sort_icon__ * {\n\t\t\t\t\topacity: 0.7;\n\t\t\t\t}\n\t\t\t}\n\t\t"])))})),at=me.default.div(O||(O=se(["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: inherit;\n\theight: 100%;\n\twidth: 100%;\n\toutline: none;\n\tuser-select: none;\n\toverflow: hidden;\n\t",";\n"])),(function(e){return!e.disabled&&ot})),st=me.default.div(I||(I=se(["\n\toverflow: hidden;\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n"]))),lt=pe.memo((function(e){var t=e.column,n=e.disabled,r=e.draggingColumnId,i=e.selectedColumn,o=void 0===i?{}:i,a=e.sortDirection,s=e.sortIcon,l=e.sortServer,c=e.pagination,u=e.paginationServer,d=e.persistSelectedOnSort,f=e.selectableRowsVisibleOnly,p=e.onSort,h=e.onDragStart,m=e.onDragOver,g=e.onDragEnd,v=e.onDragEnter,y=e.onDragLeave;pe.useEffect((function(){"string"==typeof t.selector&&console.error("Warning: ".concat(t.selector," is a string based column selector which has been deprecated as of v7 and will be removed in v8. Instead, use a selector function e.g. row => row[field]..."))}),[]);var b=pe.useState(!1),x=oe(b,2),w=x[0],_=x[1],S=pe.useRef(null);if(pe.useEffect((function(){S.current&&_(S.current.scrollWidth>S.current.clientWidth)}),[w]),t.omit)return null;var C=function(){if(t.sortable||t.selector){var e=a;Te(o.id,t.id)&&(e=a===fe.ASC?fe.DESC:fe.ASC),p({type:"SORT_CHANGE",sortDirection:e,selectedColumn:t,clearSelectedOnSort:c&&u&&!d||l||f})}},k=function(e){return pe.createElement(rt,{sortActive:e,sortDirection:a})},M=function(){return pe.createElement("span",{className:[a,"__rdt_custom_sort_icon__"].join(" ")},s)},T=!(!t.sortable||!Te(o.id,t.id)),A=!t.sortable||n,E=t.sortable&&!s&&!t.right,P=t.sortable&&!s&&t.right,R=t.sortable&&s&&!t.right,O=t.sortable&&s&&t.right;return pe.createElement(it,{"data-column-id":t.id,className:"rdt_TableCol",headCell:!0,allowOverflow:t.allowOverflow,button:t.button,compact:t.compact,grow:t.grow,hide:t.hide,maxWidth:t.maxWidth,minWidth:t.minWidth,right:t.right,center:t.center,width:t.width,draggable:t.reorder,isDragging:Te(t.id,r),onDragStart:h,onDragOver:m,onDragEnd:g,onDragEnter:v,onDragLeave:y},t.name&&pe.createElement(at,{"data-column-id":t.id,"data-sort-id":t.id,role:"columnheader",tabIndex:0,className:"rdt_TableCol_Sortable",onClick:A?void 0:C,onKeyPress:A?void 0:function(e){"Enter"===e.key&&C()},sortActive:!A&&T,disabled:A},!A&&O&&M(),!A&&P&&k(T),"string"==typeof t.name?pe.createElement(st,{title:w?t.name:void 0,ref:S,"data-column-id":t.id},t.name):t.name,!A&&R&&M(),!A&&E&&k(T)))})),ct=me.default(De)(L||(L=se(["\n\tflex: 0 0 48px;\n\tjustify-content: center;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n\tfont-size: unset;\n"])));function ut(e){var t=e.headCell,n=void 0===t||t,r=e.rowData,i=e.keyField,o=e.allSelected,a=e.mergeSelections,s=e.selectedRows,l=e.selectableRowsComponent,c=e.selectableRowsComponentProps,u=e.selectableRowDisabled,d=e.onSelectAllRows,f=s.length>0&&!o,p=u?r.filter((function(e){return!u(e)})):r,h=0===p.length,m=Math.min(r.length,p.length);return pe.createElement(ct,{className:"rdt_TableCol",headCell:n,noPadding:!0},pe.createElement(je,{name:"select-all-rows",component:l,componentOptions:c,onClick:function(){d({type:"SELECT_ALL_ROWS",rows:p,rowCount:m,mergeSelections:a,keyField:i})},checked:o,indeterminate:f,disabled:h}))}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.Nm.AUTO,n="object"==typeof window,r=pe.useState(!1),i=oe(r,2),o=i[0],a=i[1];return pe.useEffect((function(){if(n)if("auto"!==e)a("rtl"===e);else{var t=!(!window.document||!window.document.createElement),r=document.getElementsByTagName("BODY")[0],i=document.getElementsByTagName("HTML")[0],o="rtl"===r.dir||"rtl"===i.dir;a(t&&o)}}),[e,n]),o}var ft=me.default.div(D||(D=se(["\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 1 0 auto;\n\theight: 100%;\n\tcolor: ",";\n\tfont-size: ",";\n\tfont-weight: 400;\n"])),(function(e){return e.theme.contextMenu.fontColor}),(function(e){return e.theme.contextMenu.fontSize})),pt=me.default.div(N||(N=se(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tflex-wrap: wrap;\n"]))),ht=me.default.div(F||(F=se(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbox-sizing: inherit;\n\tz-index: 1;\n\talign-items: center;\n\tjustify-content: space-between;\n\tdisplay: flex;\n\t",";\n\t",";\n\t",";\n"])),(function(e){return e.rtl&&"direction: rtl"}),(function(e){return e.theme.contextMenu.style}),(function(e){var t=e.theme;return e.visible&&t.contextMenu.activeStyle}));function mt(e){var t=e.contextMessage,n=e.contextActions,r=e.contextComponent,i=e.selectedCount,o=dt(e.direction),a=i>0;return r?pe.createElement(ht,{visible:a},pe.cloneElement(r,{selectedCount:i})):pe.createElement(ht,{visible:a,rtl:o},pe.createElement(ft,null,function(e,t,n){if(0===t)return null;var r=1===t?e.singular:e.plural;return n?"".concat(t," ").concat(e.message||""," ").concat(r):"".concat(t," ").concat(r," ").concat(e.message||"")}(t,i,o)),pe.createElement(pt,null,n))}var gt=me.default.div(z||(z=se(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\talign-items: center;\n\tjustify-content: space-between;\n\twidth: 100%;\n\tflex-wrap: wrap;\n\t","\n"])),(function(e){return e.theme.header.style})),vt=me.default.div(B||(B=se(["\n\tflex: 1 0 auto;\n\tcolor: ",";\n\tfont-size: ",";\n\tfont-weight: 400;\n"])),(function(e){return e.theme.header.fontColor}),(function(e){return e.theme.header.fontSize})),yt=me.default.div(j||(j=se(["\n\tflex: 1 0 auto;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\n\t> * {\n\t\tmargin-left: 5px;\n\t}\n"]))),bt=function(e){var t=e.title,n=e.actions,r=void 0===n?null:n,i=e.contextMessage,o=e.contextActions,a=e.contextComponent,s=e.selectedCount,l=e.direction,c=e.showMenu,u=void 0===c||c;return pe.createElement(gt,{className:"rdt_TableHeader",role:"heading","aria-level":1},pe.createElement(vt,null,t),r&&pe.createElement(yt,null,r),u&&pe.createElement(mt,{contextMessage:i,contextActions:o,contextComponent:a,direction:l,selectedCount:s}))};function xt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var wt={left:"flex-start",right:"flex-end",center:"center"},_t=me.default.header(Z||(Z=se(["\n\tposition: relative;\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\tbox-sizing: border-box;\n\talign-items: center;\n\tpadding: 4px 16px 4px 24px;\n\twidth: 100%;\n\tjustify-content: ",";\n\tflex-wrap: ",";\n\t","\n"])),(function(e){var t=e.align;return wt[t]}),(function(e){return e.wrapContent?"wrap":"nowrap"}),(function(e){return e.theme.subHeader.style})),St=function(e){var t=e.align,n=void 0===t?"right":t,r=e.wrapContent,i=void 0===r||r,o=xt(e,["align","wrapContent"]);return pe.createElement(_t,Object.assign({align:n,wrapContent:i},o))},Ct=me.default.div(H||(H=se(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]))),kt=me.default.div(U||(U=se(["\n\tposition: relative;\n\twidth: 100%;\n\tborder-radius: inherit;\n\t",";\n\n\t",";\n\n\t",";\n"])),(function(e){var t=e.responsive,n=e.fixedHeader;return t&&ue.css(V||(V=se(["\n\t\t\toverflow-x: auto;\n\n\t\t\t// hidden prevents vertical scrolling in firefox when fixedHeader is disabled\n\t\t\toverflow-y: ",";\n\t\t\tmin-height: 0;\n\t\t"])),n?"auto":"hidden")}),(function(e){var t=e.fixedHeader,n=void 0!==t&&t,r=e.fixedHeaderScrollHeight,i=void 0===r?"100vh":r;return n&&ue.css(G||(G=se(["\n\t\t\tmax-height: ",";\n\t\t\t-webkit-overflow-scrolling: touch;\n\t\t"])),i)}),(function(e){return e.theme.responsiveWrapper.style})),Mt=me.default.div(W||(W=se(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\t",";\n"])),(function(e){return e.theme.progress.style})),Tt=me.default.div($||($=se(["\n\tposition: relative;\n\twidth: 100%;\n\t",";\n"])),(function(e){return e.theme.tableWrapper.style})),At=me.default(De)(q||(q=se(["\n\twhite-space: nowrap;\n\t",";\n"])),(function(e){return e.theme.expanderCell.style})),Et=me.default.div(Y||(Y=se(["\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\t",";\n"])),(function(e){return e.theme.noData.style})),Pt=function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},he.default.createElement("path",{d:"M7 10l5 5 5-5z"}),he.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},Rt=me.default.select(X||(X=se(["\n\tcursor: pointer;\n\theight: 24px;\n\tmax-width: 100%;\n\tuser-select: none;\n\tpadding-left: 8px;\n\tpadding-right: 24px;\n\tbox-sizing: content-box;\n\tfont-size: inherit;\n\tcolor: inherit;\n\tborder: none;\n\tbackground-color: transparent;\n\tappearance: none;\n\tdirection: ltr;\n\tflex-shrink: 0;\n\n\t&::-ms-expand {\n\t\tdisplay: none;\n\t}\n\n\t&:disabled::-ms-expand {\n\t\tbackground: #f60;\n\t}\n\n\toption {\n\t\tcolor: initial;\n\t}\n"]))),Ot=me.default.div(K||(K=se(["\n\tposition: relative;\n\tflex-shrink: 0;\n\tfont-size: inherit;\n\tcolor: inherit;\n\tmargin-top: 1px;\n\n\tsvg {\n\t\ttop: 0;\n\t\tright: 0;\n\t\tcolor: inherit;\n\t\tposition: absolute;\n\t\tfill: currentColor;\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tdisplay: inline-block;\n\t\tuser-select: none;\n\t\tpointer-events: none;\n\t}\n"]))),It=function(e){var t=e.defaultValue,n=e.onChange,r=xt(e,["defaultValue","onChange"]);return pe.createElement(Ot,null,pe.createElement(Rt,Object.assign({onChange:n,defaultValue:t},r)),pe.createElement(Pt,null))},Lt={columns:[],data:[],title:"",keyField:"id",selectableRows:!1,selectableRowsHighlight:!1,selectableRowsNoSelectAll:!1,selectableRowSelected:null,selectableRowDisabled:null,selectableRowsComponent:"input",selectableRowsComponentProps:{},selectableRowsVisibleOnly:!1,selectableRowsSingle:!1,clearSelectedRows:!1,expandableRows:!1,expandableRowDisabled:null,expandableRowExpanded:null,expandOnRowClicked:!1,expandableRowsHideExpander:!1,expandOnRowDoubleClicked:!1,expandableInheritConditionalStyles:!1,expandableRowsComponent:function(){return he.default.createElement("div",null,"To add an expander pass in a component instance via ",he.default.createElement("strong",null,"expandableRowsComponent"),". You can then access props.data from this component.")},expandableIcon:{collapsed:he.default.createElement((function(){return he.default.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},he.default.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),he.default.createElement("path",{d:"M0-.25h24v24H0z",fill:"none"}))}),null),expanded:he.default.createElement((function(){return he.default.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},he.default.createElement("path",{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}),he.default.createElement("path",{d:"M0-.75h24v24H0z",fill:"none"}))}),null)},expandableRowsComponentProps:{},progressPending:!1,progressComponent:he.default.createElement("div",{style:{fontSize:"24px",fontWeight:700,padding:"24px"}},"Loading..."),persistTableHead:!1,sortIcon:null,sortFunction:null,sortServer:!1,striped:!1,highlightOnHover:!1,pointerOnHover:!1,noContextMenu:!1,contextMessage:{singular:"item",plural:"items",message:"selected"},actions:null,contextActions:null,contextComponent:null,defaultSortFieldId:null,defaultSortAsc:!0,responsive:!0,noDataComponent:he.default.createElement("div",{style:{padding:"24px"}},"There are no records to display"),disabled:!1,noTableHead:!1,noHeader:!1,subHeader:!1,subHeaderAlign:t.v2.RIGHT,subHeaderWrap:!0,subHeaderComponent:null,fixedHeader:!1,fixedHeaderScrollHeight:"100vh",pagination:!1,paginationServer:!1,paginationServerOptions:{persistSelectedOnSort:!1,persistSelectedOnPageChange:!1},paginationDefaultPage:1,paginationResetDefaultPage:!1,paginationTotalRows:0,paginationPerPage:10,paginationRowsPerPageOptions:[10,15,20,25,30],paginationComponent:null,paginationComponentOptions:{},paginationIconFirstPage:he.default.createElement((function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},he.default.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),he.default.createElement("path",{fill:"none",d:"M24 24H0V0h24v24z"}))}),null),paginationIconLastPage:he.default.createElement((function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},he.default.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),he.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}),null),paginationIconNext:he.default.createElement((function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},he.default.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),he.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}),null),paginationIconPrevious:he.default.createElement((function(){return he.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},he.default.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),he.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}),null),dense:!1,conditionalRowStyles:[],theme:"default",customStyles:{},direction:t.Nm.AUTO,onChangePage:Se,onChangeRowsPerPage:Se,onRowClicked:Se,onRowDoubleClicked:Se,onRowMouseEnter:Se,onRowMouseLeave:Se,onRowExpandToggled:Se,onSelectedRowsChange:Se,onSort:Se,onColumnOrderChange:Se},Dt={rowsPerPageText:"Rows per page:",rangeSeparatorText:"of",noRowsPerPage:!1,selectAllRowsItem:!1,selectAllRowsItemText:"All"},Nt=me.default.nav(J||(J=se(["\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tpadding-right: 8px;\n\tpadding-left: 8px;\n\twidth: 100%;\n\t",";\n"])),(function(e){return e.theme.pagination.style})),Ft=me.default.button(Q||(Q=se(["\n\tposition: relative;\n\tdisplay: block;\n\tuser-select: none;\n\tborder: none;\n\t",";\n\t",";\n"])),(function(e){return e.theme.pagination.pageButtonsStyle}),(function(e){return e.isRTL&&"transform: scale(-1, -1)"})),zt=me.default.div(ee||(ee=se(["\n\tdisplay: flex;\n\talign-items: center;\n\tborder-radius: 4px;\n\twhite-space: nowrap;\n\t",";\n"])),Le(te||(te=se(["\n    width: 100%;\n    justify-content: space-around;\n  "])))),Bt=me.default.span(ne||(ne=se(["\n\tflex-shrink: 1;\n\tuser-select: none;\n"]))),jt=me.default(Bt)(re||(re=se(["\n\tmargin: 0 24px;\n"]))),Zt=me.default(Bt)(ie||(ie=se(["\n\tmargin: 0 4px;\n"]))),Ht=pe.memo((function(e){var t=e.rowsPerPage,n=e.rowCount,r=e.currentPage,i=e.direction,o=void 0===i?Lt.direction:i,a=e.paginationRowsPerPageOptions,s=void 0===a?Lt.paginationRowsPerPageOptions:a,l=e.paginationIconLastPage,c=void 0===l?Lt.paginationIconLastPage:l,u=e.paginationIconFirstPage,d=void 0===u?Lt.paginationIconFirstPage:u,f=e.paginationIconNext,p=void 0===f?Lt.paginationIconNext:f,h=e.paginationIconPrevious,m=void 0===h?Lt.paginationIconPrevious:h,g=e.paginationComponentOptions,v=void 0===g?Lt.paginationComponentOptions:g,y=e.onChangeRowsPerPage,b=void 0===y?Lt.onChangeRowsPerPage:y,x=e.onChangePage,w=void 0===x?Lt.onChangePage:x,_=function(){var e="object"==typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var n=pe.useState(t),r=oe(n,2),i=r[0],o=r[1];return pe.useEffect((function(){if(!e)return function(){return null};function n(){o(t())}return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),i}(),S=dt(o),C=_.width&&_.width>599,k=we(n,t),M=r*t,T=M-t+1,A=1===r,E=r===k,P=Object.assign(Object.assign({},Dt),v),R=r===k?"".concat(T,"-").concat(n," ").concat(P.rangeSeparatorText," ").concat(n):"".concat(T,"-").concat(M," ").concat(P.rangeSeparatorText," ").concat(n),O=pe.useCallback((function(){return w(r-1)}),[r,w]),I=pe.useCallback((function(){return w(r+1)}),[r,w]),L=pe.useCallback((function(){return w(1)}),[w]),D=pe.useCallback((function(){return w(we(n,t))}),[w,n,t]),N=pe.useCallback((function(e){return b(Number(e.target.value),r)}),[r,b]),F=s.map((function(e){return pe.createElement("option",{key:e,value:e},e)}));P.selectAllRowsItem&&F.push(pe.createElement("option",{key:-1,value:n},P.selectAllRowsItemText));var z=pe.createElement(It,{onChange:N,defaultValue:t,"aria-label":P.rowsPerPageText},F);return pe.createElement(Nt,{className:"rdt_Pagination"},!P.noRowsPerPage&&C&&pe.createElement(pe.Fragment,null,pe.createElement(Zt,null,P.rowsPerPageText),z),C&&pe.createElement(jt,null,R),pe.createElement(zt,null,pe.createElement(Ft,{id:"pagination-first-page",type:"button","aria-label":"First Page","aria-disabled":A,onClick:L,disabled:A,isRTL:S},d),pe.createElement(Ft,{id:"pagination-previous-page",type:"button","aria-label":"Previous Page","aria-disabled":A,onClick:O,disabled:A,isRTL:S},m),!C&&z,pe.createElement(Ft,{id:"pagination-next-page",type:"button","aria-label":"Next Page","aria-disabled":E,onClick:I,disabled:E,isRTL:S},p),pe.createElement(Ft,{id:"pagination-last-page",type:"button","aria-label":"Last Page","aria-disabled":E,onClick:D,disabled:E,isRTL:S},c)))})),Ut=function(e,t){var n=pe.useRef(!0);pe.useEffect((function(){n.current?n.current=!1:e()}),t)},Vt=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Gt}(e)}(e)},Gt="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Wt(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Xt((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function $t(e,t,n){return e.concat(t).map((function(e){return Wt(e,n)}))}function qt(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function Yt(e,t){try{return t in e}catch(e){return!1}}function Xt(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||$t,n.isMergeableObject=n.isMergeableObject||Vt,n.cloneUnlessOtherwiseSpecified=Wt;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&qt(e).forEach((function(t){r[t]=Wt(e[t],n)})),qt(t).forEach((function(i){(function(e,t){return Yt(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(Yt(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return Xt;var n=t.customMerge(e);return"function"==typeof n?n:Xt}(i,n)(e[i],t[i],n):r[i]=Wt(t[i],n))})),r}(e,t,n):Wt(t,n)}Xt.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return Xt(e,n,t)}),{})};var Kt=Xt,Jt={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)"},background:{default:"#FFFFFF"},context:{background:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},divider:{default:"rgba(0,0,0,.12)"},button:{default:"rgba(0,0,0,.54)",focus:"rgba(0,0,0,.12)",hover:"rgba(0,0,0,.12)",disabled:"rgba(0, 0, 0, .18)"},selected:{default:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},highlightOnHover:{default:"#EEEEEE",text:"rgba(0, 0, 0, 0.87)"},striped:{default:"#FAFAFA",text:"rgba(0, 0, 0, 0.87)"}},Qt={default:Jt,light:Jt,dark:{text:{primary:"#FFFFFF",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(0,0,0,.12)"},background:{default:"#424242"},context:{background:"#E91E63",text:"#FFFFFF"},divider:{default:"rgba(81, 81, 81, 1)"},button:{default:"#FFFFFF",focus:"rgba(255, 255, 255, .54)",hover:"rgba(255, 255, 255, .12)",disabled:"rgba(255, 255, 255, .18)"},selected:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},highlightOnHover:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},striped:{default:"rgba(0, 0, 0, .87)",text:"#FFFFFF"}}};function en(e,t,n,r){var i=pe.useState((function(){return xe(e)})),o=oe(i,2),a=o[0],s=o[1],l=pe.useState(""),c=oe(l,2),u=c[0],d=c[1],f=pe.useRef("");Ut((function(){s(xe(e))}),[e]);var p=pe.useCallback((function(e){var t,n,r,i=null===(t=e.target.attributes.getNamedItem("data-column-id"))||void 0===t?void 0:t.value;i&&(f.current=(null===(r=null===(n=a[Me(a,i)])||void 0===n?void 0:n.id)||void 0===r?void 0:r.toString())||"",d(f.current))}),[a]),h=pe.useCallback((function(e){var n,r=null===(n=e.target.attributes.getNamedItem("data-column-id"))||void 0===n?void 0:n.value;if(r&&f.current&&r!==f.current){var i=Me(a,f.current),o=Me(a,r),l=le(a);l[i]=a[o],l[o]=a[i],s(l),t(l)}}),[t,a]),m=pe.useCallback((function(e){e.preventDefault()}),[]),g=pe.useCallback((function(e){e.preventDefault()}),[]),v=pe.useCallback((function(e){e.preventDefault(),f.current="",d("")}),[]),y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?fe.ASC:fe.DESC}(r),b=pe.useMemo((function(){return a[Me(a,null==n?void 0:n.toString())]||{}}),[n,a]);return{tableColumns:a,draggingColumnId:u,handleDragStart:p,handleDragEnter:h,handleDragOver:m,handleDragLeave:g,handleDragEnd:v,defaultSortDirection:y,defaultSortColumn:b}}var tn=pe.memo((function(e){var t=e.data,n=void 0===t?Lt.data:t,r=e.columns,i=void 0===r?Lt.columns:r,o=e.title,a=void 0===o?Lt.title:o,s=e.actions,l=void 0===s?Lt.actions:s,c=e.keyField,u=void 0===c?Lt.keyField:c,d=e.striped,f=void 0===d?Lt.striped:d,p=e.highlightOnHover,h=void 0===p?Lt.highlightOnHover:p,m=e.pointerOnHover,g=void 0===m?Lt.pointerOnHover:m,v=e.dense,y=void 0===v?Lt.dense:v,b=e.selectableRows,x=void 0===b?Lt.selectableRows:b,w=e.selectableRowsSingle,_=void 0===w?Lt.selectableRowsSingle:w,S=e.selectableRowsHighlight,C=void 0===S?Lt.selectableRowsHighlight:S,k=e.selectableRowsNoSelectAll,M=void 0===k?Lt.selectableRowsNoSelectAll:k,T=e.selectableRowsVisibleOnly,A=void 0===T?Lt.selectableRowsVisibleOnly:T,E=e.selectableRowSelected,P=void 0===E?Lt.selectableRowSelected:E,R=e.selectableRowDisabled,O=void 0===R?Lt.selectableRowDisabled:R,I=e.selectableRowsComponent,L=void 0===I?Lt.selectableRowsComponent:I,D=e.selectableRowsComponentProps,N=void 0===D?Lt.selectableRowsComponentProps:D,F=e.onRowExpandToggled,z=void 0===F?Lt.onRowExpandToggled:F,B=e.onSelectedRowsChange,j=void 0===B?Lt.onSelectedRowsChange:B,Z=e.expandableIcon,H=void 0===Z?Lt.expandableIcon:Z,U=e.onChangeRowsPerPage,V=void 0===U?Lt.onChangeRowsPerPage:U,G=e.onChangePage,W=void 0===G?Lt.onChangePage:G,$=e.paginationServer,q=void 0===$?Lt.paginationServer:$,Y=e.paginationServerOptions,X=void 0===Y?Lt.paginationServerOptions:Y,K=e.paginationTotalRows,J=void 0===K?Lt.paginationTotalRows:K,Q=e.paginationDefaultPage,ee=void 0===Q?Lt.paginationDefaultPage:Q,te=e.paginationResetDefaultPage,ne=void 0===te?Lt.paginationResetDefaultPage:te,re=e.paginationPerPage,ie=void 0===re?Lt.paginationPerPage:re,ae=e.paginationRowsPerPageOptions,se=void 0===ae?Lt.paginationRowsPerPageOptions:ae,ce=e.paginationIconLastPage,de=void 0===ce?Lt.paginationIconLastPage:ce,he=e.paginationIconFirstPage,me=void 0===he?Lt.paginationIconFirstPage:he,ye=e.paginationIconNext,be=void 0===ye?Lt.paginationIconNext:ye,xe=e.paginationIconPrevious,Se=void 0===xe?Lt.paginationIconPrevious:xe,Ce=e.paginationComponent,Me=void 0===Ce?Lt.paginationComponent:Ce,Te=e.paginationComponentOptions,Ee=void 0===Te?Lt.paginationComponentOptions:Te,Re=e.responsive,Le=void 0===Re?Lt.responsive:Re,Ne=e.progressPending,Fe=void 0===Ne?Lt.progressPending:Ne,ze=e.progressComponent,Be=void 0===ze?Lt.progressComponent:ze,je=e.persistTableHead,Ze=void 0===je?Lt.persistTableHead:je,He=e.noDataComponent,Ue=void 0===He?Lt.noDataComponent:He,Ve=e.disabled,Ge=void 0===Ve?Lt.disabled:Ve,We=e.noTableHead,$e=void 0===We?Lt.noTableHead:We,qe=e.noHeader,Ye=void 0===qe?Lt.noHeader:qe,Xe=e.fixedHeader,Ke=void 0===Xe?Lt.fixedHeader:Xe,Je=e.fixedHeaderScrollHeight,Qe=void 0===Je?Lt.fixedHeaderScrollHeight:Je,et=e.pagination,nt=void 0===et?Lt.pagination:et,rt=e.subHeader,it=void 0===rt?Lt.subHeader:rt,ot=e.subHeaderAlign,at=void 0===ot?Lt.subHeaderAlign:ot,st=e.subHeaderWrap,ct=void 0===st?Lt.subHeaderWrap:st,dt=e.subHeaderComponent,ft=void 0===dt?Lt.subHeaderComponent:dt,pt=e.noContextMenu,ht=void 0===pt?Lt.noContextMenu:pt,mt=e.contextMessage,gt=void 0===mt?Lt.contextMessage:mt,vt=e.contextActions,yt=void 0===vt?Lt.contextActions:vt,xt=e.contextComponent,wt=void 0===xt?Lt.contextComponent:xt,_t=e.expandableRows,Pt=void 0===_t?Lt.expandableRows:_t,Rt=e.onRowClicked,Ot=void 0===Rt?Lt.onRowClicked:Rt,It=e.onRowDoubleClicked,Dt=void 0===It?Lt.onRowDoubleClicked:It,Nt=e.onRowMouseEnter,Ft=void 0===Nt?Lt.onRowMouseEnter:Nt,zt=e.onRowMouseLeave,Bt=void 0===zt?Lt.onRowMouseLeave:zt,jt=e.sortIcon,Zt=void 0===jt?Lt.sortIcon:jt,Vt=e.onSort,Gt=void 0===Vt?Lt.onSort:Vt,Wt=e.sortFunction,$t=void 0===Wt?Lt.sortFunction:Wt,qt=e.sortServer,Yt=void 0===qt?Lt.sortServer:qt,Xt=e.expandableRowsComponent,Jt=void 0===Xt?Lt.expandableRowsComponent:Xt,tn=e.expandableRowsComponentProps,nn=void 0===tn?Lt.expandableRowsComponentProps:tn,rn=e.expandableRowDisabled,on=void 0===rn?Lt.expandableRowDisabled:rn,an=e.expandableRowsHideExpander,sn=void 0===an?Lt.expandableRowsHideExpander:an,ln=e.expandOnRowClicked,cn=void 0===ln?Lt.expandOnRowClicked:ln,un=e.expandOnRowDoubleClicked,dn=void 0===un?Lt.expandOnRowDoubleClicked:un,fn=e.expandableRowExpanded,pn=void 0===fn?Lt.expandableRowExpanded:fn,hn=e.expandableInheritConditionalStyles,mn=void 0===hn?Lt.expandableInheritConditionalStyles:hn,gn=e.defaultSortFieldId,vn=void 0===gn?Lt.defaultSortFieldId:gn,yn=e.defaultSortAsc,bn=void 0===yn?Lt.defaultSortAsc:yn,xn=e.clearSelectedRows,wn=void 0===xn?Lt.clearSelectedRows:xn,_n=e.conditionalRowStyles,Sn=void 0===_n?Lt.conditionalRowStyles:_n,Cn=e.theme,kn=void 0===Cn?Lt.theme:Cn,Mn=e.customStyles,Tn=void 0===Mn?Lt.customStyles:Mn,An=e.direction,En=void 0===An?Lt.direction:An,Pn=e.onColumnOrderChange,Rn=void 0===Pn?Lt.onColumnOrderChange:Pn,On=e.className,In=en(i,Rn,vn,bn),Ln=In.tableColumns,Dn=In.draggingColumnId,Nn=In.handleDragStart,Fn=In.handleDragEnter,zn=In.handleDragOver,Bn=In.handleDragLeave,jn=In.handleDragEnd,Zn=In.defaultSortDirection,Hn=In.defaultSortColumn,Un=pe.useReducer(Ae,{allSelected:!1,selectedCount:0,selectedRows:[],selectedColumn:Hn,toggleOnSelectedRowsChange:!1,sortDirection:Zn,currentPage:ee,rowsPerPage:ie,selectedRowsFlag:!1,contextMessage:Lt.contextMessage}),Vn=oe(Un,2),Gn=Vn[0],Wn=Gn.rowsPerPage,$n=Gn.currentPage,qn=Gn.selectedRows,Yn=Gn.allSelected,Xn=Gn.selectedCount,Kn=Gn.selectedColumn,Jn=Gn.sortDirection,Qn=Gn.toggleOnSelectedRowsChange,er=Vn[1],tr=X.persistSelectedOnSort,nr=void 0!==tr&&tr,rr=X.persistSelectedOnPageChange,ir=void 0!==rr&&rr,or=!(!q||!ir&&!nr),ar=nt&&!Fe&&n.length>0,sr=Me||Ht,lr=pe.useMemo((function(){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",i=Qt[n]?n:r;return Kt({table:{style:{color:(e=Qt[i]).text.primary,backgroundColor:e.background.default}},tableWrapper:{style:{display:"table"}},responsiveWrapper:{style:{}},header:{style:{fontSize:"22px",color:e.text.primary,backgroundColor:e.background.default,minHeight:"56px",paddingLeft:"16px",paddingRight:"8px"}},subHeader:{style:{backgroundColor:e.background.default,minHeight:"52px"}},head:{style:{color:e.text.primary,fontSize:"12px",fontWeight:500}},headRow:{style:{backgroundColor:e.background.default,minHeight:"52px",borderBottomWidth:"1px",borderBottomColor:e.divider.default,borderBottomStyle:"solid"},denseStyle:{minHeight:"32px"}},headCells:{style:{paddingLeft:"16px",paddingRight:"16px"},draggingStyle:{cursor:"move"}},contextMenu:{style:{backgroundColor:e.context.background,fontSize:"18px",fontWeight:400,color:e.context.text,paddingLeft:"16px",paddingRight:"8px",transform:"translate3d(0, -100%, 0)",transitionDuration:"125ms",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)",willChange:"transform"},activeStyle:{transform:"translate3d(0, 0, 0)"}},cells:{style:{paddingLeft:"16px",paddingRight:"16px",wordBreak:"break-word"},draggingStyle:{}},rows:{style:{fontSize:"13px",fontWeight:400,color:e.text.primary,backgroundColor:e.background.default,minHeight:"48px","&:not(:last-of-type)":{borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:e.divider.default}},denseStyle:{minHeight:"32px"},selectedHighlightStyle:{"&:nth-of-type(n)":{color:e.selected.text,backgroundColor:e.selected.default,borderBottomColor:e.background.default}},highlightOnHoverStyle:{color:e.highlightOnHover.text,backgroundColor:e.highlightOnHover.default,transitionDuration:"0.15s",transitionProperty:"background-color",borderBottomColor:e.background.default,outlineStyle:"solid",outlineWidth:"1px",outlineColor:e.background.default},stripedStyle:{color:e.striped.text,backgroundColor:e.striped.default}},expanderRow:{style:{color:e.text.primary,backgroundColor:e.background.default}},expanderCell:{style:{flex:"0 0 48px"}},expanderButton:{style:{color:e.button.default,fill:e.button.default,backgroundColor:"transparent",borderRadius:"2px",transition:"0.25s",height:"100%",width:"100%","&:hover:enabled":{cursor:"pointer"},"&:disabled":{color:e.button.disabled},"&:hover:not(:disabled)":{cursor:"pointer",backgroundColor:e.button.hover},"&:focus":{outline:"none",backgroundColor:e.button.focus},svg:{margin:"auto"}}},pagination:{style:{color:e.text.secondary,fontSize:"13px",minHeight:"56px",backgroundColor:e.background.default,borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:e.divider.default},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"px",cursor:"pointer",transition:"0.4s",color:e.button.default,fill:e.button.default,backgroundColor:"transparent","&:disabled":{cursor:"unset",color:e.button.disabled,fill:e.button.disabled},"&:hover:not(:disabled)":{backgroundColor:e.button.hover},"&:focus":{outline:"none",backgroundColor:e.button.focus}}},noData:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:e.text.primary,backgroundColor:e.background.default}},progress:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:e.text.primary,backgroundColor:e.background.default}}},t)}(Tn,kn)}),[Tn,kn]),cr=pe.useMemo((function(){return Object.assign({},"auto"!==En&&{dir:En})}),[En]),ur=pe.useMemo((function(){if(Yt)return n;if((null==Kn?void 0:Kn.sortFunction)&&"function"==typeof Kn.sortFunction){var e=Kn.sortFunction,t=Jn===fe.ASC?e:function(t,n){return-1*e(t,n)};return le(n).sort(t)}return function(e,t,n,r){return t?r&&"function"==typeof r?r(e.slice(0),t,n):e.slice(0).sort((function(e,r){var i,o;if("string"==typeof t?(i=ve(e,t),o=ve(r,t)):(i=t(e),o=t(r)),"asc"===n){if(i<o)return-1;if(i>o)return 1}if("desc"===n){if(i>o)return-1;if(i<o)return 1}return 0})):e}(n,null==Kn?void 0:Kn.selector,Jn,$t)}),[Yt,Kn,Jn,n,$t]),dr=pe.useMemo((function(){if(nt&&!q){var e=$n*Wn,t=e-Wn;return ur.slice(t,e)}return ur}),[$n,nt,q,Wn,ur]),fr=pe.useCallback((function(e){er(e)}),[]),pr=pe.useCallback((function(e){er(e)}),[]),hr=pe.useCallback((function(e){er(e)}),[]),mr=pe.useCallback((function(e,t){return Ot(e,t)}),[Ot]),gr=pe.useCallback((function(e,t){return Dt(e,t)}),[Dt]),vr=pe.useCallback((function(e,t){return Ft(e,t)}),[Ft]),yr=pe.useCallback((function(e,t){return Bt(e,t)}),[Bt]),br=pe.useCallback((function(e){return er({type:"CHANGE_PAGE",page:e,paginationServer:q,visibleOnly:A,persistSelectedOnPageChange:ir})}),[q,ir,A]),xr=pe.useCallback((function(e){var t=we(J||dr.length,e),n=_e($n,t);q||br(n),er({type:"CHANGE_ROWS_PER_PAGE",page:n,rowsPerPage:e})}),[$n,br,q,J,dr.length]);if(nt&&!q&&ur.length>0&&0===dr.length){var wr=we(ur.length,Wn),_r=_e($n,wr);br(_r)}Ut((function(){j({allSelected:Yn,selectedCount:Xn,selectedRows:qn.slice(0)})}),[Qn]),Ut((function(){Gt(Kn,Jn,ur.slice(0))}),[Kn,Jn]),Ut((function(){W($n,J||ur.length)}),[$n]),Ut((function(){V(Wn,$n)}),[Wn]),Ut((function(){br(ee)}),[ee,ne]),Ut((function(){if(nt&&q&&J>0){var e=we(J,Wn),t=_e($n,e);$n!==t&&br(t)}}),[J]),pe.useEffect((function(){er({type:"CLEAR_SELECTED_ROWS",selectedRowsFlag:wn})}),[_,wn]),pe.useEffect((function(){if(P){var e=ur.filter((function(e){return P(e)})),t=_?e.slice(0,1):e;er({type:"SELECT_MULTIPLE_ROWS",keyField:u,selectedRows:t,totalRows:ur.length,mergeSelections:or})}}),[n,P]);var Sr=A?dr:ur,Cr=ir||_||M;return pe.createElement(ue.ThemeProvider,{theme:lr},!Ye&&(!!a||!!l)&&pe.createElement(bt,{title:a,actions:l,showMenu:!ht,selectedCount:Xn,direction:En,contextActions:yt,contextComponent:wt,contextMessage:gt}),it&&pe.createElement(St,{align:at,wrapContent:ct},ft),pe.createElement(kt,Object.assign({responsive:Le,fixedHeader:Ke,fixedHeaderScrollHeight:Qe,className:On},cr),pe.createElement(Tt,null,Fe&&!Ze&&pe.createElement(Mt,null,Be),pe.createElement(Pe,{disabled:Ge,className:"rdt_Table",role:"table"},!$e&&(!!Ze||ur.length>0&&!Fe)&&pe.createElement(Oe,{className:"rdt_TableHead",role:"rowgroup",fixedHeader:Ke},pe.createElement(Ie,{className:"rdt_TableHeadRow",role:"row",dense:y},x&&(Cr?pe.createElement(De,{style:{flex:"0 0 48px"}}):pe.createElement(ut,{allSelected:Yn,selectedRows:qn,selectableRowsComponent:L,selectableRowsComponentProps:N,selectableRowDisabled:O,rowData:Sr,keyField:u,mergeSelections:or,onSelectAllRows:pr})),Pt&&!sn&&pe.createElement(At,null),Ln.map((function(e){return pe.createElement(lt,{key:e.id,column:e,selectedColumn:Kn,disabled:Fe||0===ur.length,pagination:nt,paginationServer:q,persistSelectedOnSort:nr,selectableRowsVisibleOnly:A,sortDirection:Jn,sortIcon:Zt,sortServer:Yt,onSort:fr,onDragStart:Nn,onDragOver:zn,onDragEnd:jn,onDragEnter:Fn,onDragLeave:Bn,draggingColumnId:Dn})})))),!ur.length&&!Fe&&pe.createElement(Et,null,Ue),Fe&&Ze&&pe.createElement(Mt,null,Be),!Fe&&ur.length>0&&pe.createElement(Ct,{className:"rdt_TableBody",role:"rowgroup"},dr.map((function(e,t){var n=ge(e,u),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"number"!=typeof e&&(!e||0===e.length)}(n)?t:n,i=ke(e,qn,u),o=!!(Pt&&pn&&pn(e)),a=!!(Pt&&on&&on(e));return pe.createElement(tt,{id:r,key:r,keyField:u,"data-row-id":r,columns:Ln,row:e,rowCount:ur.length,rowIndex:t,selectableRows:x,expandableRows:Pt,expandableIcon:H,highlightOnHover:h,pointerOnHover:g,dense:y,expandOnRowClicked:cn,expandOnRowDoubleClicked:dn,expandableRowsComponent:Jt,expandableRowsComponentProps:nn,expandableRowsHideExpander:sn,defaultExpanderDisabled:a,defaultExpanded:o,expandableInheritConditionalStyles:mn,conditionalRowStyles:Sn,selected:i,selectableRowsHighlight:C,selectableRowsComponent:L,selectableRowsComponentProps:N,selectableRowDisabled:O,selectableRowsSingle:_,striped:f,onRowExpandToggled:z,onRowClicked:mr,onRowDoubleClicked:gr,onRowMouseEnter:vr,onRowMouseLeave:yr,onSelectedRow:hr,draggingColumnId:Dn,onDragStart:Nn,onDragOver:zn,onDragEnd:jn,onDragEnter:Fn,onDragLeave:Bn})})))))),ar&&pe.createElement("div",null,pe.createElement(sr,{onChangePage:br,onChangeRowsPerPage:xr,rowCount:J||ur.length,currentPage:$n,rowsPerPage:Wn,direction:En,paginationRowsPerPageOptions:se,paginationIconLastPage:de,paginationIconFirstPage:me,paginationIconNext:be,paginationIconPrevious:Se,paginationComponentOptions:Ee})))}))},534:function(e,t,n){"use strict";var r=n(7313),i=n(2224);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var N,F=Object.assign;function z(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var B=!1;function j(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function Z(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case k:return"Profiler";case C:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){K(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Ce=null;function ke(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Me(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ae(e,t){return e(t)}function Ee(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ae(e,t,n)}finally{Pe=!1,(null!==Se||null!==Ce)&&(Ee(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Ie=!1}function De(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ne=!1,Fe=null,ze=!1,Be=null,je={onError:function(e){Ne=!0,Fe=e}};function Ze(e,t,n,r,i,o,a,s,l){Ne=!1,Fe=null,De.apply(je,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ve(i),e;if(a===r)return Ve(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var $e=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ke=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,St,Ct,kt,Mt=!1,Tt=[],At=null,Et=null,Pt=null,Rt=new Map,Ot=new Map,It=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void kt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function jt(){Mt=!1,null!==At&&zt(At)&&(At=null),null!==Et&&zt(Et)&&(Et=null),null!==Pt&&zt(Pt)&&(Pt=null),Rt.forEach(Bt),Ot.forEach(Bt)}function Zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Mt||(Mt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Ht(e){function t(t){return Zt(t,e)}if(0<Tt.length){Zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Zt(At,e),null!==Et&&Zt(Et,e),null!==Pt&&Zt(Pt,e),Rt.forEach(t),Ot.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Ft(n),null===n.blockedOn&&It.shift()}var Ut=x.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,r){var i=bt,o=Ut.transition;Ut.transition=null;try{bt=1,$t(e,t,n,r)}finally{bt=i,Ut.transition=o}}function Wt(e,t,n,r){var i=bt,o=Ut.transition;Ut.transition=null;try{bt=4,$t(e,t,n,r)}finally{bt=i,Ut.transition=o}}function $t(e,t,n,r){if(Vt){var i=Yt(e,t,n,r);if(null===i)Vr(e,t,r,qt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Nt(At,e,t,n,r,i),!0;case"dragenter":return Et=Nt(Et,e,t,n,r,i),!0;case"mouseover":return Pt=Nt(Pt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,Nt(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Nt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Yt(e,t,n,r))&&Vr(e,t,r,qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var qt=null;function Yt(e,t,n,r){if(qt=null,null!==(e=yi(e=we(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Kt=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,i="value"in Kt?Kt.value:Kt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=F({},cn,{view:0,detail:0}),fn=on(dn),pn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=on(pn),mn=on(F({},pn,{dataTransfer:0})),gn=on(F({},dn,{relatedTarget:0})),vn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),xn=on(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function kn(){return Cn}var Mn=F({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Mn),An=on(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=on(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Pn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Rn),In=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Nn=u&&"TextEvent"in window&&!Dn,Fn=u&&(!Ln||Dn&&8<Dn&&11>=Dn),zn=String.fromCharCode(32),Bn=!1;function jn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,r){Me(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,$n=null;function qn(e){zr(e,0)}function Yn(e){if($(xi(e)))return e}function Xn(e,t){if("change"===e)return t}var Kn=!1;if(u){var Jn;if(u){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;Kn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),$n=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn($n)){var t=[];Gn(t,$n,e,we(e)),Re(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),$n=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn($n)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Cr={};function kr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Mr=kr("animationend"),Tr=kr("animationiteration"),Ar=kr("animationstart"),Er=kr("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Pr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Rr.length;Ir++){var Lr=Rr[Ir];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Mr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(Ze.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var u=Fe;Ne=!1,Fe=null,ze||(ze=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=l}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Zr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Zr]){e[Zr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Nr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zr]||(t[Zr]=!0,jr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=o,i=we(n),a=[];e:{var s=Pr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Mr:case Tr:case Ar:l=vn;break;case Er:l=Pn;break;case"scroll":l=fn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),d=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=Oe(h,f))&&u.push(Gr(h,m,p)))),d)break;h=h.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[hi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=hn,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==l?s:xi(l),p=null==c?s:xi(c),(s=new u(m,h+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,yi(i)===r&&((u=new u(f,h+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(f=c,h=0,p=u=l;p;p=$r(p))h++;for(p=0,m=f;m;m=$r(m))p++;for(;0<h-p;)u=$r(u),h--;for(;0<p-h;)f=$r(f),p--;for(;h--;){if(u===f||null!==f&&u===f.alternate)break e;u=$r(u),f=$r(f)}u=null}else u=null;null!==l&&qr(a,s,l,u,!1),null!==c&&null!==d&&qr(a,d,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xn;else if(Vn(s))if(Kn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xi(r):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Jt="value"in(Kt=i)?Kt.value:Kt.textContent,Hn=!0)),0<(v=Wr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Zn(n))&&(b.data=y))),(y=Nn?function(e,t){switch(e){case"compositionend":return Zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Ln&&jn(e,t)?(e=en(),Qt=Jt=Kt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}zr(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Oe(n,o))&&a.unshift(Gr(n,l,s)):i||null!=(l=Oe(n,o))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Kr(t),Kr(e)!==t&&n)throw Error(o(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,hi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[fi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[pi]||null}var _i=[],Si=-1;function Ci(e){return{current:e}}function ki(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Mi(e,t){Si++,_i[Si]=e.current,e.current=t}var Ti={},Ai=Ci(Ti),Ei=Ci(!1),Pi=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){ki(Ei),ki(Ai)}function Li(e,t,n){if(Ai.current!==Ti)throw Error(o(168));Mi(Ai,t),Mi(Ei,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,U(e)||"Unknown",i));return F({},n,r)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ai.current,Mi(Ai,e),Mi(Ei,Ei.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,ki(Ei),ki(Ai),Mi(Ai,e)):ki(Ei),Mi(Ei,n)}var zi=null,Bi=!1,ji=!1;function Zi(e){null===zi?zi=[e]:zi.push(e)}function Hi(){if(!ji&&null!==zi){ji=!0;var e=0,t=bt;try{var n=zi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Bi=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),$e(Qe,Hi),i}finally{bt=t,ji=!1}}return null}var Ui=[],Vi=0,Gi=null,Wi=0,$i=[],qi=0,Yi=null,Xi=1,Ki="";function Ji(e,t){Ui[Vi++]=Wi,Ui[Vi++]=Gi,Gi=e,Wi=t}function Qi(e,t,n){$i[qi++]=Xi,$i[qi++]=Ki,$i[qi++]=Yi,Yi=e;var r=Xi;e=Ki;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ki=o+e}else Xi=1<<o|n<<i|r,Ki=e}function eo(e){null!==e.return&&(Ji(e,1),Qi(e,1,0))}function to(e){for(;e===Gi;)Gi=Ui[--Vi],Ui[Vi]=null,Wi=Ui[--Vi],Ui[Vi]=null;for(;e===Yi;)Yi=$i[--qi],$i[qi]=null,Ki=$i[--qi],$i[qi]=null,Xi=$i[--qi],$i[qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function ho(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ci(null),bo=null,xo=null,wo=null;function _o(){wo=xo=bo=null}function So(e){var t=yo.current;ki(yo),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){bo=e,wo=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Mo(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===bo)throw Error(o(308));xo=e,bo.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var To=null;function Ao(e){null===To?To=[e]:To.push(e)}function Eo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ao(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ro=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,Ao(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function No(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var i=e.updateQueue;Ro=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(f=t,p=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=F({},d,f);break e;case 2:Ro=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Nl|=a,e.lanes=a,e.memoizedState=d}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Zo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ho={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(nc(t,e,i,r),No(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(nc(t,e,i,r),No(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(nc(t,e,r,n),No(t,e,r))}};function Uo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Vo(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=Mo(o):(i=Oi(t)?Pi:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function Wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Mo(o):(o=Oi(t)?Pi:Ai.current,i.context=Ri(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Zo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ho.enqueueReplaceState(i,i.state,null),zo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function $o(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Yo(o)===t.type)?((r=i(t,n.props)).ref=$o(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=$o(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=$o(e,null,t),n.return=e,n;case _:return(t=zc(t,e.mode,n)).return=e,t;case O:return f(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;qo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case O:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);qo(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return h(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);qo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(i,d),io&&Ji(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=f(i,s[m],l))&&(o=a(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,m),c}for(d=r(i,d);m<s.length;m++)null!==(g=h(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Ji(i,m),c}function g(i,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),io&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(i,y.value,c))&&(s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return io&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=h(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Yo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=$o(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((o=Dc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=$o(r,o,a),l.return=r,r=l)}return s(r);case _:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(a,r.mode,l)).return=r,r=o}return s(r);case O:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(D(a))return g(r,o,a,l);qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Ko=Xo(!0),Jo=Xo(!1),Qo={},ea=Ci(Qo),ta=Ci(Qo),na=Ci(Qo);function ra(e){if(e===Qo)throw Error(o(174));return e}function ia(e,t){switch(Mi(na,t),Mi(ta,e),Mi(ea,Qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(ea),Mi(ea,t)}function oa(){ki(ea),ki(ta),ki(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(Mi(ta,e),Mi(ea,n))}function sa(e){ta.current===e&&(ki(ea),ki(ta))}var la=Ci(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var fa=x.ReactCurrentDispatcher,pa=x.ReactCurrentBatchConfig,ha=0,ma=null,ga=null,va=null,ya=!1,ba=!1,xa=0,wa=0;function _a(){throw Error(o(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ca(e,t,n,r,i,a){if(ha=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),ba){a=0;do{if(ba=!1,xa=0,25<=a)throw Error(o(301));a+=1,va=ga=null,t.updateQueue=null,fa.current=cs,e=n(r,i)}while(ba)}if(fa.current=as,t=null!==ga&&null!==ga.next,ha=0,va=ga=ma=null,ya=!1,t)throw Error(o(300));return e}function ka(){var e=0!==xa;return xa=0,e}function Ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===va?ma.memoizedState=va=e:va=va.next=e,va}function Ta(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===va?ma.memoizedState:va.next;if(null!==t)va=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===va?ma.memoizedState=va=e:va=va.next=e}return va}function Aa(e,t){return"function"===typeof t?t(e):t}function Ea(e){var t=Ta(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((ha&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=r):c=c.next=f,ma.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ma.lanes|=a,Nl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(xs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ra(){}function Oa(e,t){var n=ma,r=Ta(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,xs=!0),r=r.queue,Va(Da.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==va&&1&va.memoizedState.tag){if(n.flags|=2048,Ba(9,La.bind(null,n,r,i,t),void 0,null),null===El)throw Error(o(349));0!==(30&ha)||Ia(n,t,i)}return i}function Ia(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function La(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&Fa(e)}function Da(e,t,n){return n((function(){Na(t)&&Fa(e)}))}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fa(e){var t=Po(e,1);null!==t&&nc(t,e,1,-1)}function za(e){var t=Ma();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ma,e),[t.memoizedState,e]}function Ba(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return Ta().memoizedState}function Za(e,t,n,r){var i=Ma();ma.flags|=e,i.memoizedState=Ba(1|t,n,void 0,void 0===r?null:r)}function Ha(e,t,n,r){var i=Ta();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=Ba(t,n,o,r))}ma.flags|=e,i.memoizedState=Ba(1|t,n,o,r)}function Ua(e,t){return Za(8390656,8,e,t)}function Va(e,t){return Ha(2048,8,e,t)}function Ga(e,t){return Ha(4,2,e,t)}function Wa(e,t){return Ha(4,4,e,t)}function $a(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ha(4,4,$a.bind(null,t,e),n)}function Ya(){}function Xa(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ka(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&ha)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),ma.lanes|=n,Nl|=n,e.baseState=!0),t)}function Qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{bt=n,pa.transition=r}}function es(){return Ta().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Eo(e,t,n,r))){nc(n,e,r,ec()),os(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Ao(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Eo(e,t,i,r))&&(nc(n,e,r,i=ec()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function is(e,t){ba=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Mo,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},ss={readContext:Mo,useCallback:function(e,t){return Ma().memoizedState=[e,void 0===t?null:t],e},useContext:Mo,useEffect:Ua,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Za(4194308,4,$a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Za(4194308,4,e,t)},useInsertionEffect:function(e,t){return Za(4,2,e,t)},useMemo:function(e,t){var n=Ma();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ma();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ma().memoizedState=e},useState:za,useDebugValue:Ya,useDeferredValue:function(e){return Ma().memoizedState=e},useTransition:function(){var e=za(!1),t=e[0];return e=Qa.bind(null,e[1]),Ma().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,i=Ma();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===El)throw Error(o(349));0!==(30&ha)||Ia(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ua(Da.bind(null,r,a,e),[e]),r.flags|=2048,Ba(9,La.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ma(),t=El.identifierPrefix;if(io){var n=Ki;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=xa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Mo,useCallback:Xa,useContext:Mo,useEffect:Va,useImperativeHandle:qa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Ka,useReducer:Ea,useRef:ja,useState:function(){return Ea(Aa)},useDebugValue:Ya,useDeferredValue:function(e){return Ja(Ta(),ga.memoizedState,e)},useTransition:function(){return[Ea(Aa)[0],Ta().memoizedState]},useMutableSource:Ra,useSyncExternalStore:Oa,useId:es,unstable_isNewReconciler:!1},cs={readContext:Mo,useCallback:Xa,useContext:Mo,useEffect:Va,useImperativeHandle:qa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Ka,useReducer:Pa,useRef:ja,useState:function(){return Pa(Aa)},useDebugValue:Ya,useDeferredValue:function(e){var t=Ta();return null===ga?t.memoizedState=e:Ja(t,ga.memoizedState,e)},useTransition:function(){return[Pa(Aa)[0],Ta().memoizedState]},useMutableSource:Ra,useSyncExternalStore:Oa,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=Z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Gl=r),fs(0,t)},n}function ms(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Jo(t,null,n,r):Ko(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var o=t.ref;return ko(t,i),r=Ca(e,t,n,r,o,i),n=ka(),null===e||xs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Cs(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Vs(e,t,i)}return t.flags|=1,(e=Ic(o,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Vs(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return Ts(e,t,n,r,i)}function ks(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(Il,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mi(Il,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Mi(Il,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Mi(Il,Ol),Ol|=r;return ws(e,t,i,n),t.child}function Ms(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var o=Oi(n)?Pi:Ai.current;return o=Ri(t,o),ko(t,i),n=Ca(e,t,n,r,o,i),r=ka(),null===e||xs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function As(e,t,n,r,i){if(Oi(n)){var o=!0;Ni(t)}else o=!1;if(ko(t,i),null===t.stateNode)Us(e,t),Vo(t,n,r),Wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Mo(c):c=Ri(t,c=Oi(n)?Pi:Ai.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Go(t,a,r,c),Ro=!1;var f=t.memoizedState;a.state=f,zo(t,r,a,i),l=t.memoizedState,s!==r||f!==l||Ei.current||Ro?("function"===typeof u&&(Zo(t,n,u,r),l=t.memoizedState),(s=Ro||Uo(t,n,s,r,f,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Io(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vo(t.type,s),a.props=c,d=t.pendingProps,f=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Mo(l):l=Ri(t,l=Oi(n)?Pi:Ai.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||f!==l)&&Go(t,a,r,l),Ro=!1,f=t.memoizedState,a.state=f,zo(t,r,a,i);var h=t.memoizedState;s!==d||f!==h||Ei.current||Ro?("function"===typeof p&&(Zo(t,n,p,r),h=t.memoizedState),(c=Ro||Uo(t,n,c,r,f,h,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Es(e,t,n,r,o,i)}function Es(e,t,n,r,i,o){Ms(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Vs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ko(t,e.child,null,o),t.child=Ko(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ia(e,t.containerInfo)}function Rs(e,t,n,r,i){return ho(),mo(i),t.flags|=256,ws(e,t,n,r),t.child}var Os,Is,Ls,Ds={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,a=la.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Mi(la,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Nc(l,i,0,null),e=Dc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(n),t.memoizedState=Ds,e):zs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Nc({mode:"visible",children:r.children},i,0,null),(a=Dc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ko(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=Ds,a);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=El)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(e,i),nc(r,e,i,-1))}return mc(),Bs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&($i[qi++]=Xi,$i[qi++]=Ki,$i[qi++]=Yi,Xi=e.id,Ki=e.overflow,Yi=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Ic(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ic(r,s):(s=Dc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ns(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=Ic(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function zs(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&mo(r),Ko(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Co(e.return,t,n)}function Zs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mi(la,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zs(t,!0,n,null,o);break;case"together":Zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $s(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Oi(t.type)&&Ii(),Ws(t),null;case 3:return r=t.stateNode,oa(),ki(Ei),ki(Ai),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ws(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ws(t),null}if(e=ra(ea.current),fo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":ie(r,a),Br("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":W(r),Q(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[pi]=r,Os(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"===typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Br("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Q(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ls(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ws(t),null;case 13:if(ki(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),ho(),t.flags|=98560,a=!1;else if(a=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[fi]=t}else ho(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return oa(),null===e&&Hr(t.stateNode.containerInfo),Ws(t),null;case 10:return So(t.type._context),Ws(t),null;case 19:if(ki(la),null===(a=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mi(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&Ke()>Hl&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ws(t),null}else 2*Ke()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ke(),t.sibling=null,n=la.current,Mi(la,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function qs(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),ki(Ei),ki(Ai),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(ki(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ho()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(la),null;case 4:return oa(),null;case 10:return So(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Xs=!1,Ks="function"===typeof WeakSet?WeakSet:Set,Js=null;function Qs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Qs(n,t);case 6:var r=ul,i=dl;ul=null,fl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,fl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xs&&(Qs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cc(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fl(e,t,n),Xs=r):fl(e,t,n);break;default:fl(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ks),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Cc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?ge(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):b(i,d,f,u)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?ne(i,!!a.multiple,h,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Cc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Cc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Zl=Ke())),4&r&&hl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(u=Xs)||d,ml(t,e),Xs=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(f=Js=d;null!==Js;){switch(h=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Qs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:Qs(p,p.return);break;case 22:if(null!==p.memoizedState){wl(f);continue}}null!==h?(h.return=p,Js=h):wl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Cc(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(t,e),vl(e),4&r&&hl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Cc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=a,(Xs=l)&&!c)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Js=l):_l(i);for(;null!==o;)Js=o,bl(o,t,n),o=o.sibling;Js=i,Ys=s,Xs=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):xl(e)}}function xl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Ht(f)}}}break;default:throw Error(o(163))}Xs||512&t.flags&&il(t)}catch(p){Cc(t,t.return,p)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function _l(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cc(t,i,l)}}var o=t.return;try{il(t)}catch(l){Cc(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cc(t,a,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Sl,Cl=Math.ceil,kl=x.ReactCurrentDispatcher,Ml=x.ReactCurrentOwner,Tl=x.ReactCurrentBatchConfig,Al=0,El=null,Pl=null,Rl=0,Ol=0,Il=Ci(0),Ll=0,Dl=null,Nl=0,Fl=0,zl=0,Bl=null,jl=null,Zl=0,Hl=1/0,Ul=null,Vl=!1,Gl=null,Wl=null,$l=!1,ql=null,Yl=0,Xl=0,Kl=null,Jl=-1,Ql=0;function ec(){return 0!==(6&Al)?Ke():-1!==Jl?Jl:Jl=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==go.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Kl=null,Error(o(185));vt(e,n,r),0!==(2&Al)&&e===El||(e===El&&(0===(2&Al)&&(Fl|=n),4===Ll&&sc(e,Rl)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Hl=Ke()+500,Bi&&Hi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===El?Rl:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Bi=!0,Zi(e)}(lc.bind(null,e)):Zi(lc.bind(null,e)),ai((function(){0===(6&Al)&&Hi()})),n=null;else{switch(xt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Ql=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ft(e,e===El?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Al;Al|=2;var a=hc();for(El===e&&Rl===t||(Ul=null,Hl=Ke()+500,fc(e,t));;)try{yc();break}catch(l){pc(e,l)}_o(),kl.current=a,Al=i,null!==Pl?t=0:(El=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=oc(e,i))),1===t)throw n=Dl,fc(e,0),sc(e,r),rc(e,Ke()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=ht(e))&&(r=a,t=oc(e,a))),1===t))throw n=Dl,fc(e,0),sc(e,r),rc(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,jl,Ul);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Zl+500-Ke())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,jl,Ul),t);break}wc(e,jl,Ul);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,jl,Ul),r);break}wc(e,jl,Ul);break;default:throw Error(o(329))}}}return rc(e,Ke()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=jl,jl=n,null!==t&&ac(t)),e}function ac(e){null===jl?jl=e:jl.push.apply(jl,e)}function sc(e,t){for(t&=~zl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(o(327));_c();var t=ft(e,0);if(0===(1&t))return rc(e,Ke()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Dl,fc(e,0),sc(e,t),rc(e,Ke()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,jl,Ul),rc(e,Ke()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Hl=Ke()+500,Bi&&Hi())}}function uc(e){null!==ql&&0===ql.tag&&0===(6&Al)&&_c();var t=Al;Al|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Al=t))&&Hi()}}function dc(){Ol=Il.current,ki(Il)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:oa(),ki(Ei),ki(Ai),da();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:ki(la);break;case 10:So(r.type._context);break;case 22:case 23:dc()}n=n.return}if(El=e,Pl=e=Ic(e.current,null),Rl=Ol=t,Ll=0,Dl=null,zl=Fl=Nl=0,jl=Bl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}To=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(_o(),fa.current=as,ya){for(var r=ma.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(ha=0,va=ga=ma=null,ba=!1,xa=0,Ml.current=null,null===n||null===n.return){Ll=1,Dl=t,Pl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=vs(s);if(null!==h){h.flags&=-257,ys(h,s,l,0,t),1&h.mode&&gs(a,u,t),c=u;var m=(t=h).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(a,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,l,0,t),mo(us(c,l));break e}}a=c=us(c,l),4!==Ll&&(Ll=2),null===Bl?Bl=[a]:Bl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,hs(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,ms(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function hc(){var e=kl.current;return kl.current=as,null===e?as:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===El||0===(268435455&Nl)&&0===(268435455&Fl)||sc(El,Rl)}function gc(e,t){var n=Al;Al|=2;var r=hc();for(El===e&&Rl===t||(Ul=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(_o(),Al=n,kl.current=r,null!==Pl)throw Error(o(261));return El=null,Rl=0,Ll}function vc(){for(;null!==Pl;)bc(Pl)}function yc(){for(;null!==Pl&&!Ye();)bc(Pl)}function bc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):Pl=t,Ml.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$s(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=qs(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ll=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==ql);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===El&&(Pl=El=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$l||($l=!0,Ec(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,Ml.current=null,function(e,t){if(ei=Vt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==a||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++u===i&&(l=s),p===a&&++d===r&&(c=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){Cc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tl,tl=!1}(e,n),gl(n,e),hr(ti),Vt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Xe(),Al=l,bt=s,Tl.transition=a}else e.current=n;if($l&&($l=!1,ql=e,Yl=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Kl?Xl++:(Xl=0,Kl=e):Xl=0,Hi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function _c(){if(null!==ql){var e=xt(Yl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Yl=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var f=d.child;if(null!==f)f.return=d,Js=f;else for(;null!==Js;){var p=(d=Js).sibling,h=d.return;if(ol(d),d===u){Js=null;break}if(null!==p){p.return=h,Js=p;break}Js=h}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Js=y;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Cc(l,l.return,_)}if(l===s){Js=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Js=w;break e}Js=l.return}}if(Al=i,Hi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Do(e,t=hs(0,t=us(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Do(t,e=ms(t,e=us(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Ke()-Zl?fc(e,0):zl|=n),rc(e,t)}function Mc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Po(e,t))&&(vt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Mc(e,n)}function Ec(e,t){return $e(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Dc(n.children,i,a,t);case C:s=8,i|=8;break;case k:return(e=Rc(12,n,t,2|i)).elementType=k,e.lanes=a,e;case E:return(e=Rc(13,n,t,i)).elementType=E,e.lanes=a,e;case P:return(e=Rc(19,n,t,i)).elementType=P,e.lanes=a,e;case I:return Nc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case M:s=10;break e;case T:s=9;break e;case A:s=11;break e;case R:s=14;break e;case O:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Dc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,o,a,s,l){return e=new Bc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Hc(e){if(!e)return Ti;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function Uc(e,t,n,r,i,o,a,s,l){return(e=jc(n,r,!0,e,0,o,0,s,l)).context=Hc(null),n=e.current,(o=Lo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Vc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,a))&&(nc(e,i,a,o),No(e,i,a)),a}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),ho();break;case 5:aa(t);break;case 1:Oi(t.type)&&Ni(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Mi(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Mi(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Mi(la,1&la.current),null!==(e=Vs(e,t,n))?e.sibling:null);Mi(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mi(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,n)}return Vs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,io&&0!==(1048576&t.flags)&&Qi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Us(e,t),e=t.pendingProps;var i=Ri(t,Ai.current);ko(t,n),i=Ca(null,t,r,e,i,n);var a=ka();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Ni(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=Ho,t.stateNode=i,i._reactInternals=t,Wo(t,r,e,n),t=Es(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Io(e,t),zo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=us(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=us(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),r===i){t=Vs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Ms(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ko(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Mi(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ei.current){t=Vs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Lo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Co(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Co(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ko(t,n),r=r(i=Mo(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),Ss(e,t,r,i=vo(r.type,i),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Us(e,t),t.tag=1,Oi(r)?(e=!0,Ni(t)):e=!1,ko(t,n),Vo(t,r,i),Wo(t,r,i,n),Es(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return ks(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Gc(a);s.call(e)}}Vc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Gc(a);o.call(e)}}var a=Uc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[hi]=a.current,Hr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gc(l);s.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[hi]=l.current,Hr(8===e.nodeType?e.parentNode:e),uc((function(){Vc(t,l,n,r)})),l}(n,t,e,i,r);return Gc(a)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Vc(null,e,null,null)})),t[hi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ke()),0===(6&Al)&&(Hl=Ke()+500,Hi()))}break;case 13:uc((function(){var t=Po(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),$c(e,1)}},_t=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)nc(t,e,134217728,ec());$c(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Po(e,t);if(null!==n)nc(n,e,t,ec());$c(e,t)}},Ct=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));$(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ee=uc;var tu={usingClientEntryPoint:!1,Events:[bi,xi,wi,Me,Te,cc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(o(200));return Zc(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(o(299));var n=!1,r="",i=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,i,0,a,s),e[hi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},1624:function(e,t){"use strict";var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,l=60110,c=60112,u=60113,d=60120,f=60115,p=60116,h=60121,m=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),o=b("react.strict_mode"),a=b("react.profiler"),s=b("react.provider"),l=b("react.context"),c=b("react.forward_ref"),u=b("react.suspense"),d=b("react.suspense_list"),f=b("react.memo"),p=b("react.lazy"),h=b("react.block"),m=b("react.server.block"),g=b("react.fundamental"),v=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case f:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===a||e===v||e===o||e===u||e===d||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===s||e.$$typeof===l||e.$$typeof===c||e.$$typeof===g||e.$$typeof===h||e[0]===m)},t.typeOf=x},6214:function(e,t,n){"use strict";e.exports=n(1624)},3642:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},l=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.ComponentDefaultParameters=void 0;var u=o(n(7313)),d=c(n(2358)),f=n(2526),p=n(9837);t.ComponentDefaultParameters={name:"",status:"",visible:!0};var h=new f.NGL.Vector3,m=new f.NGL.Quaternion,g=new f.NGL.Matrix4;t.Component=function(e){var n=e.children,r=e.path,i=e.loadFileParams,o=e.params,c=void 0===o?t.ComponentDefaultParameters:o,v=e.reprList,y=void 0===v?void 0:v,b=e.position,x=void 0===b?h:b,w=e.quaternion,_=void 0===w?m:w,S=e.scale,C=void 0===S?1:S,k=e.transform,M=void 0===k?g:k,T=e.onLoad,A=e.onLoadFailure,E=p.useStage(),P=s(u.useState(),2),R=P[0],O=P[1];return d.default((function(e,t){var n,o,s;return a(this,(function(a){switch(a.label){case 0:n=new AbortController,e((function(){return n.abort()})),a.label=1;case 1:return a.trys.push([1,3,,4]),[5,l(t(E.loadFile(r,i)))];case 2:return o=a.sent(),[3,4];case 3:return s=a.sent(),A&&A(s),[3,4];case 4:return o&&O(o),[2]}}))}),[i,A,r,E]),u.useEffect((function(){R&&T&&T(R)}),[R,T]),u.useEffect((function(){return function(){R&&E.removeComponent(R)}}),[R,E]),u.useEffect((function(){if(R){var e=f.mergeParams(c,t.ComponentDefaultParameters);e.name!==R.parameters.name&&R.setName(e.name),e.status!==R.parameters.status&&R.setStatus(e.status),e.visible!==R.parameters.visible&&R.setVisibility(e.visible)}}),[R,c]),u.useEffect((function(){R&&y&&(R.removeAllRepresentations(),y.forEach((function(e){return R.addRepresentation(e.type,e.params)})))}),[R,y]),u.useEffect((function(){R&&R.setPosition(x)}),[R,x]),u.useEffect((function(){R&&R.setRotation(_)}),[R,_]),u.useEffect((function(){R&&R.setScale(C)}),[R,C]),u.useEffect((function(){R&&R.setTransform(M)}),[R,M]),u.default.createElement(u.default.Fragment,null,R&&u.default.createElement(p.ComponentReactContext.Provider,{value:R},n))}},7398:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=void 0;var s=o(n(7313)),l=n(9837),c=n(2526),u=n(5094);t.Stage=function(e){var t=e.children,n=e.width,r=e.height,i=e.params,o=e.cameraState,d=e.onCameraMove,f=s.useRef(),p=a(s.useState(),2),h=p[0],m=p[1],g=s.useCallback((function(e){if(e){var t=new c.NGL.Stage(e);m(t)}}),[]);s.useEffect((function(){return function(){h&&h.dispose()}}),[h]);var v=s.useCallback((function(){setTimeout((function(){h&&f.current&&c.applyCameraState(h,f.current)}))}),[h]);s.useEffect((function(){return h&&(h.signals.componentAdded.add(v),h.signals.componentRemoved.add(v)),function(){h&&(h.signals.componentAdded.remove(v),h.signals.componentRemoved.remove(v))}}),[v,h]),s.useEffect((function(){h&&h.setParameters(i)}),[i,h]),s.useEffect((function(){h&&h.setSize(n,r)}),[r,h,n]),s.useEffect((function(){if(h){var e=f.current;c.isCameraStateEqual(o,e)||(f.current=o,o&&c.applyCameraState(h,o))}}),[o,h]);var y=s.useCallback((function(){if(h&&d){var e=c.getCameraState(h),t=c.isCameraStateEqual(e,c.getDefaultCameraState(h))?c.CAMERA_STATE_NONE:e;d(t)}}),[d,h]);return s.useEffect((function(){return h&&h.viewerControls.signals.changed.add(y),function(){h&&h.viewerControls.signals.changed.remove(y)}}),[y,h]),s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{ref:g,style:{width:n,height:r}}),h&&s.default.createElement(l.StageReactContext.Provider,{value:h},s.default.createElement(u.Viewer,null,t)))}},5094:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewer=void 0;var i=r(n(7313));t.Viewer=function(e){var t=e.children;return i.default.createElement(i.default.Fragment,null,t)}},7272:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StructureComponent=void 0;var a=o(n(7313)),s=n(3642),l=n(9879);t.StructureComponent=function(e){var t=e.children,n=e.selection,o=i(e,["children","selection"]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Component,r({},o),a.default.createElement(l.StructureComponentInner,{selection:n},t)))}},9879:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StructureComponentInner=void 0;var a=o(n(7313)),s=n(9837),l=n(2526);t.StructureComponentInner=function(e){var t=e.selection,n=void 0===t?"":t,r=e.children,i=s.useComponent();if(!(i instanceof l.NGL.StructureComponent))throw new TypeError("NGL Component loaded from given path is not a StructureComponent");return a.useEffect((function(){i.setSelection(n)}),[i,n]),a.default.createElement(a.default.Fragment,null,r)}},3942:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3642),t),i(n(7398),t),i(n(7272),t)},9837:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2435),t),i(n(2606),t)},2435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useComponent=t.ComponentReactContext=void 0;var r=n(7313),i=n(2526);t.ComponentReactContext=r.createContext(void 0),t.useComponent=function(){var e=r.useContext(t.ComponentReactContext);if(!e)throw new i.ReactNGLError("useComponent hook can only be used in the children of <Component>");return e}},2606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStage=t.StageReactContext=void 0;var r=n(7313),i=n(2526);t.StageReactContext=r.createContext(void 0),t.useStage=function(){var e=r.useContext(t.StageReactContext);if(!e)throw new i.ReactNGLError("useStage hook can only be used in the children of <Stage>");return e}},1541:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3942),t),i(n(2526),t),i(n(9837),t)},9223:function(e,t){"use strict";var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNGLError=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Error);t.ReactNGLError=r},3397:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hello=void 0,t.hello=function(e){return"Hello, "+e}},2526:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.NGL=void 0;var s=o(n(1403));t.NGL=s,a(n(9223),t),a(n(3397),t),a(n(2470),t),a(n(7927),t),a(n(3765),t)},2470:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeParams=void 0,t.mergeParams=function(e,t){var i=n(n({},t),e);return Object.entries(t).forEach((function(e){var n=r(e,2),o=n[0];void 0===n[1]&&(i[o]=t[o])})),i}},7927:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1403:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5079),t)},3765:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isCameraStateEqual=t.applyCameraState=t.getDefaultCameraState=t.getDefaultDistance=t.getDefaultPosition=t.getCameraState=t.CAMERA_STATE_NONE=t.DEFAULT_ROTATION=t.Rotation=t.Position=void 0;var a=o(n(1403));t.Position=a.Vector3,t.Rotation=a.Quaternion,t.DEFAULT_ROTATION=new t.Rotation(0,0,0,1),t.CAMERA_STATE_NONE={},t.getCameraState=function(e){var t=e.viewerControls;return{position:t.position,rotation:t.rotation,distance:e.viewer.camera.position.z}},t.getDefaultPosition=function(e){return e.getCenter().negate()},t.getDefaultDistance=function(e){return e.getZoom()},t.getDefaultCameraState=function(e){return{position:t.getDefaultPosition(e),rotation:t.DEFAULT_ROTATION,distance:t.getDefaultDistance(e)}},t.applyCameraState=function(e,n,r){void 0===r&&(r=!1);var i=e.viewerControls,o=t.getCameraState(e),a=!1,s=n.position||t.getDefaultPosition(e);s.equals(o.position)||(i.viewer.translationGroup.position.copy(s),a=!0);var l=n.rotation||t.DEFAULT_ROTATION;l.equals(o.rotation)||(i.viewer.rotationGroup.setRotationFromQuaternion(l),a=!0);var c=n.distance||t.getDefaultDistance(e);c!==o.distance&&(i.viewer.camera.position.z=Math.min(-1,c),i.viewer.updateZoom(),a=!0),a&&(i.viewer.requestRender(),r||i.signals.changed.dispatch())},t.isCameraStateEqual=function(e,t){if(void 0===e||void 0===t)return e===t;var n=e.position&&t.position?e.position.equals(t.position):e.position===t.position,r=e.rotation&&t.rotation?e.rotation.equals(t.rotation):e.rotation===t.rotation;return n&&r&&e.distance===t.distance}},2502:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.Z=function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(r,t);var n=function(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).p=Promise.resolve(),t.resizeHandler=null,t.handlers={},t.syncWindowResize=t.syncWindowResize.bind(d(t)),t.syncEventHandlers=t.syncEventHandlers.bind(d(t)),t.attachUpdateEvents=t.attachUpdateEvents.bind(d(t)),t.getRef=t.getRef.bind(d(t)),t.handleUpdate=t.handleUpdate.bind(d(t)),t.figureCallback=t.figureCallback.bind(d(t)),t.updatePlotly=t.updatePlotly.bind(d(t)),t}return function(e,t,n){t&&l(e.prototype,t);n&&l(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"updatePlotly",value:function(t,n,r){var i=this;this.p=this.p.then((function(){if(!i.unmounting){if(!i.el)throw new Error("Missing element reference");return e.react(i.el,{data:i.props.data,layout:i.props.layout,config:i.props.config,frames:i.props.frames})}})).then((function(){i.unmounting||(i.syncWindowResize(t),i.syncEventHandlers(),i.figureCallback(n),r&&i.attachUpdateEvents())})).catch((function(e){i.props.onError&&i.props.onError(e)}))}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(e){this.unmounting=!1;var t=e.frames&&e.frames.length?e.frames.length:0,n=this.props.frames&&this.props.frames.length?this.props.frames.length:0,r=!(e.layout===this.props.layout&&e.data===this.props.data&&e.config===this.props.config&&n===t),i=void 0!==e.revision,o=e.revision!==this.props.revision;(r||i&&(!i||o))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&m&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),e.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&h.forEach((function(t){e.el.on(t,e.handleUpdate)}))}},{key:"removeUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&h.forEach((function(t){e.el.removeListener(t,e.handleUpdate)}))}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(e){if("function"===typeof e){var t=this.el;e({data:t.data,layout:t.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(t){var n=this;m&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return e.Plots.resize(n.el)},window.addEventListener("resize",this.resizeHandler),t&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(e){this.el=e,this.props.debug&&m&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var e=this;p.forEach((function(t){var n=e.props["on"+t],r=e.handlers[t],i=Boolean(r);n&&!i?e.addEventHandler(t,n):!n&&i?e.removeEventHandler(t):n&&i&&n!==r&&(e.removeEventHandler(t),e.addEventHandler(t,n))}))}},{key:"addEventHandler",value:function(e,t){this.handlers[e]=t,this.el.on(this.getPlotlyEventName(e),this.handlers[e])}},{key:"removeEventHandler",value:function(e){this.el.removeListener(this.getPlotlyEventName(e),this.handlers[e]),delete this.handlers[e]}},{key:"getPlotlyEventName",value:function(e){return"plotly_"+e.toLowerCase()}},{key:"render",value:function(){return o.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),r}(o.Component);return t.propTypes={data:a.default.arrayOf(a.default.object),config:a.default.object,layout:a.default.object,frames:a.default.arrayOf(a.default.object),revision:a.default.number,onInitialized:a.default.func,onPurge:a.default.func,onError:a.default.func,onUpdate:a.default.func,debug:a.default.bool,style:a.default.object,className:a.default.string,useResizeHandler:a.default.bool,divId:a.default.string},p.forEach((function(e){t.propTypes["on"+e]=a.default.func})),t.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},t};var i,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(7313)),a=(i=n(5192))&&i.__esModule?i:{default:i};function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],h=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],m="undefined"!==typeof window},1497:function(e,t,n){var r=n(2996),i=n(699),o=i;o.v1=r,o.v4=i,e.exports=o},5601:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},5877:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},2996:function(e,t,n){var r,i,o=n(5877),a=n(5601),s=0,l=0;e.exports=function(e,t,n){var c=t&&n||0,u=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:l+1,g=h-s+(m-l)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,l=m,i=f;var v=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;u[c++]=v>>>24&255,u[c++]=v>>>16&255,u[c++]=v>>>8&255,u[c++]=255&v;var y=h/4294967296*1e4&268435455;u[c++]=y>>>8&255,u[c++]=255&y,u[c++]=y>>>24&15|16,u[c++]=y>>>16&255,u[c++]=f>>>8|128,u[c++]=255&f;for(var b=0;b<6;++b)u[c+b]=d[b];return t||a(u)}},699:function(e,t,n){var r=n(5877),i=n(5601);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},10:function(e,t,n){"use strict";var r=n(7313);t.Z=r.createContext(null)},5918:function(e,t,n){"use strict";var r=n(7313),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},306:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),E(a,t,i,"",(function(e){return e}))):null!=a&&(M(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+A(s=e[c],c);l+=E(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=E(s=s.value,t,i,u=o+A(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return E(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},I={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,I(_);else{var t=r(u);null!==t&&L(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(M),M=-1),h=!0;var o=p;try{for(x(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!E());){var a=f.callback;if("function"===typeof a){f.callback=null,p=f.priorityLevel;var s=a(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),x(n)}else i(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&L(w,d.startTime-n),l=!1}return l}finally{f=null,p=o,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,k=null,M=-1,T=5,A=-1;function E(){return!(t.unstable_now()-A<T)}function P(){if(null!==k){var e=t.unstable_now();A=e;var n=!0;try{n=k(!0,e)}finally{n?S():(C=!1,k=null)}}else C=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){v(P,0)};function I(e){k=e,C||(C=!0,S())}function L(e,n){M=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,I(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(M),M=-1):g=!0,L(w,o-a))):(e.sortIndex=s,n(c,e),m||h||(m=!0,I(_))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},763:function(e,t,n){$=n(6666);var r=n(102);n(1398).mixin(r.prototype),e.exports=r},102:function(e,t,n){var r=function(){var e=n(936);return function(t,n){var r,o=this;this.events={MOUSE_SELECTION_EVENT:"sequence-viewer-mouse-selection",SEQUENCE_SELECTED_EVENT:"sequence-viewer-substring-selected"},r=void 0!==n?n:"",console.log(r);var a,s,l="",c="",u={data:[],start:null,end:null,hlColor:null},d={};function f(e){return e+~~(e/10)+4*~~(e/d.charsPerLine)}function p(e){var n=function(e,t){var n=[];e.length&&e.forEach((function(e){n.push({start:e.start+1,end:e.end,sequence:t.substring(e.start,e.end)})}));return n}(e,t);n&&h(n)}function h(e){if(CustomEvent){var t=new CustomEvent(o.events.SEQUENCE_SELECTED_EVENT,{detail:e});s.dispatchEvent(t)}else console.warn("CustomEvent is not defined....");o.trigger&&o.trigger(o.events.SEQUENCE_SELECTED_EVENT,e)}this.render=function(n,m){if("string"!==typeof n)throw new Error("Div identifier must be a string");if(a=n,null===(s=document.getElementById(n.substring(1))))throw new Error("Cannot find element with id: "+n.substring(1));m||(m={}),d.showLineNumbers=void 0===m.showLineNumbers||m.showLineNumbers,d.wrapAminoAcids=void 0===m.wrapAminoAcids||m.wrapAminoAcids,d.sequenceMaxHeight=void 0===m.sequenceMaxHeight?"400px":m.sequenceMaxHeight,d.title=void 0===m.title?"Protein Sequence":m.title,d.charsPerLine=void 0===m.charsPerLine?30:m.charsPerLine,d.search=void 0!==m.search&&m.search,d.toolbar=void 0!==m.toolbar&&m.toolbar,d.badge=void 0===m.badge||m.badge,d.fasta=void 0===m.fasta||m.fasta,d.blast=void 0===m.blast||m.blast,d.header=m.header?{display:void 0===m.header.display||m.header.display,searchInTitle:void 0===m.header.searchInTitle||m.header.searchInTitle,unit:void 0===m.header.unit?"Char":m.header.unit,showCpl:void 0===m.header.showCpl||m.header.showCpl,badgeWithUnit:void 0!==m.header.badgeWithUnit&&m.header.badgeWithUnit}:{display:!0,searchInTitle:!0,unit:"Char",showCpl:!0,badgeWithUnit:!1};var g='<div style="display:inline-block;"><span class="badge" style="border-radius:70%;border: 2px solid black;color:#C50063;padding:8px 5px;background-color:white;margin-right:10px;vertical-align:middle;min-width:32px;">'+t.length+"</span></div>",v='<div style="display:inline-block;"><span class="badge" style="border-radius:70%;border: 2px solid black;color:#C50063;padding:5px 5px;background-color:white;margin-right:10px;vertical-align:middle;min-width:32px;font-size:11px;">'+t.length+"<div style='margin-top:-2px;font-size:9px;color:black;text-transform:lowercase;'>"+d.header.unit+"</div></span></div>",y=d.badge?d.header.badgeWithUnit?v:g:"",b=(d.header.display?'<div class="sequenceHeader row" style="border-bottom: 1px solid #E7EAEC;padding-bottom:5px;margin:0px 0px 10px">'+y+'<h4 style="display:inline-block;vertical-align:middle;">'+d.title+"</h4></div>":"")+'<div class="sequenceBody" style="margin-top: 5px;"><div class="scroller" style="max-height:'+d.sequenceMaxHeight+';overflow:auto;white-space: nowrap;padding-right:20px;margin-right:10px;"><div class="charNumbers" style="font-family: monospace;font-size: 13px;display:inline-block;text-align:right; padding-right:5px; border-right:1px solid LightGray;"></div><div class="fastaSeq" display-option="'+d.charsPerLine+'" style="font-family: monospace;font-size: 13px;display:inline-block;padding:5px;">'+t+'</div></div><div class="coverageLegend" style="margin-top: 10px;margin-left:15px;"></div></div>';if($(n).html(b),d.wrapAminoAcids?function(e){var t=parseInt($(e).attr("display-option"));t=(t+t/10).toString();var n=$(e).html();n=n.toString().match(/.{1,10}/g).join(" ").match(new RegExp(".{1,"+t+"}","g")).join("<br>"),c=n,$(e).html(n)}(n+" .fastaSeq"):$(n+" .scroller").css("overflow-x","auto"),d.showLineNumbers&&function(e,t){for(var n=$(e).html().split("<br>"),r=parseInt($(e).attr("display-option")),i=[],o=0,a=0;a<n.length;a++)i.push(o+1+"<br>"),o+=r;$(t).html(i.join(""))}(n+" .fastaSeq",n+" .charNumbers"),d.toolbar){if(d.header.showCpl)!function(){var e=r?"hidden-xs":"",t='<form class="form-inline" style="margin-bottom:5px;"><div class="form-group form-group-sm sequenceToolbar" style=""> <label class="control-label charPerLine-label '+e+"\" for='"+a.substring(1)+"-cpl' style='margin-right:5px;'>"+d.header.unit+' per line</label><select class="CPLChoice form-control '+e+"\" id='"+a.substring(1)+"-cpl' style='display:inline-block;width:auto;margin-right:10px;'><option>Select</option><option value=50>50</option><option value=60>60</option><option value=70>70</option><option value=80>80</option><option value=90>90</option><option value=100>100</option></select></div></form>";$(a+" .sequenceBody").prepend(t),$(a+" .CPLChoice").change((function(){var e;e=this,d.charsPerLine=e.value,o.render(a,d),u.data.length&&o.coverage(u.data,u.start,u.end,u.hlColor),$(a+" .CPLChoice option:selected").text($(this).val())}))}();else{$(a+" .sequenceBody").prepend('<form class="form-inline" style="margin-bottom:5px;"><div class="form-group form-group-sm sequenceToolbar" style=""> </div></form>')}""!==r&&(d.fasta&&$(a+" .sequenceToolbar").append('<a class="btn btn-default btn-sm fasta-link" href="http://www.nextprot.org/entry/'+r.split("-")[0]+"/fasta?isoform="+r.slice(3)+"\" target='_blank'>View FASTA</a>"),d.blast&&$(a+" .sequenceToolbar").append('<a class="btn btn-default btn-sm" href="/blast/'+r+'" style="margin-left:5px;">Blast sequence</a><a id="selectionBlast" class="btn btn-default btn-sm" href="/blast/'+r+'" style="margin-left:5px;"> Blast selection</a>'))}d.search&&function(n){n?$(a+" .sequenceHeader").append('<input class="inputSearchSeq form-control pull-right" type="text" style="width:40%;margin-top: 3px;" placeholder="Search in sequence.. (Regex supported)">'):$(a+" .sequenceBody").prepend('<input class="inputSearchSeq form-control" type="text" style="width:100%;margin:3px auto 10px;" placeholder="Search in sequence.. (Regex supported)">');$(a+" .inputSearchSeq").keyup(e((function(){var e=$(this).val();if(/\S/.test(e)){for(var n,r=new RegExp(e,"gi"),o=[];null!=(n=r.exec(t));)o.push({start:n.index,end:n.index+n[0].length});o.sort((function(e,t){return t.start-e.start})),p(o),function(e,t,n){(new Date).getTime(),0===e.length&&$(a+" .fastaSeq").html(l);var r=l.toString(),o=0,s=0;for(i in e)o=f(e[i].start),s=f(e[i].end),r=r.substring(0,o)+"<span class='stringsSelected' style=\"background:"+t+';color:white;">'+r.substring(o,s)+"</span>"+r.substring(s,r.length);$(a+" .fastaSeq").html(r)}(o,"#C50063")}else $(a+" .fastaSeq").html(c),h([])}),250))}(d.header.searchInTitle);l=$(n+" .fastaSeq").html(),$(a+" .fastaSeq").mouseup((function(){var e=function(){var e=window.getSelection().toString().replace(/\s+/g,""),t=window.getSelection(),n=$(a+" .fastaSeq")[0],r=0,i=$(a+" .fastaSeq").text(),o=t.getRangeAt(0),s=o.cloneRange();s.selectNodeContents(n),s.setEnd(o.endContainer,o.endOffset),r=s.toString().length;var l=i.substring(0,r).replace(/\s+/g,"").length,c=l-(e.length-1);return{text:e,start:c,end:l}}();e&&(function(e){if(CustomEvent){var t=new CustomEvent(o.events.MOUSE_SELECTION_EVENT,{detail:{selection:e.text,start:e.start,end:e.end}});s.dispatchEvent(t)}else console.warn("CustomEvent is not defined....");o.trigger&&o.trigger(o.events.MOUSE_SELECTION_EVENT,{selection:e})}(e),d.blast&&$("#selectionBlast").attr("href","/blast/"+r+"/"+e.start+"/"+e.end+"/"))}))},this.selection=function(e,t,n,i){var o=[e,t],s=l;p([{start:e,end:t}]),o[0]=o[0]+~~(o[0]/10)+4*~~(o[0]/d.charsPerLine),o[1]=o[1]+~~(o[1]/10)+4*~~(o[1]/d.charsPerLine);s=s.substring(0,o[0])+"<span class='stringSelected' style=\"background:"+n+';color:white;">'+s.substring(o[0],o[1])+"</span>"+s.substring(o[1],s.length),$(a+" .fastaSeq").html(s),d.blast&&$("#selectionBlast").attr("href","/blast/"+r+"/"+(e+1)+"/"+t+"/")},this.addLegend=function(e){for(var t=0;t<e.length;t++)!0===e[t].underscore?$(a+" .coverageLegend").append('<div style="display:inline-block;background:'+e[t].color+';width:20px;height:20px;vertical-align:middle;margin:0px 5px 0px 10px;border-radius:50%; border: 1px solid grey;text-align:center; line-height:0.8;">_</div><p style="display:inline-block;font-weight:bold;font-size:11px;font-style:italic;margin:0;padding-top:3px;vertical-align:top;">'+e[t].name+"</p></div>"):$(a+" .coverageLegend").append('<div style="display:inline-block;background:'+e[t].color+';width:20px;height:20px;vertical-align:middle;margin:0px 5px 0px 10px;border-radius:50%;"></div><p style="display:inline-block;font-weight:bold;font-size:11px;font-style:italic;margin:0;padding-top:3px;vertical-align:top;">'+e[t].name+"</p>")},this.coverage=function(e,n,r,i){u.data=jQuery.extend(!0,[],e),u.start=n,u.end=r,u.hlColor=i,e.sort((function(e,t){return e.start-t.start})),e=function(e){for(var n=e.slice(),r=0;r<=e.length-1;r++)0===r?(e[0].start>0&&n.unshift({start:0,end:e[0].start,color:"black",underscore:!1}),r===e.length-1&&n.push({start:e[r].end,end:t.length,color:"black",underscore:!1})):r===e.length-1?(e[r-1].end<e[r].start&&n.push({start:e[r-1].end,end:e[r].start,color:"black",underscore:!1}),e[r].end<t.length-1&&n.push({start:e[r].end,end:t.length,color:"black",underscore:!1})):e[r-1].end<e[r].start&&n.push({start:e[r-1].end,end:e[r].start,color:"black",underscore:!1}),0!==r&&e[r-1].end>e[r].start&&console.warn("WARNING (error): Some positions in the coverage list are overlapping");return n.sort((function(e,t){return e.start-t.start})),n}(e);(new Date).getTime();if(!n)n=0;if(!r)r=0;if(!i)i="#FFE5A3";for(var o="",s="",d=0;d<e.length;d++){var p="";void 0!==e[d].tooltip&&(p=' title="'+e[d].tooltip+'"');var h="";void 0!==e[d].bgcolor&&(h="background:"+e[d].bgcolor+";");var m="",g="";void 0!==e[d].onclick&&(m=' onclick=" return '+d+';" ',g="cursor: pointer;"),e[d].underscore?o+=s='<span style="text-decoration:underline;color:'+e[d].color+";"+h+g+'"'+p+m+">":o+=s='<span style="color:'+e[d].color+";"+h+g+'"'+p+m+">",r?n>=e[d].start&&n<e[d].end&&r>=e[d].start&&r<e[d].end?(o+=l.substring(f(e[d].start),f(n))+'<span class="peptideHighlighted" style="background:'+i+';">'+l.substring(f(n),f(r+1)),o+="</span>"+l.substring(f(r+1),f(e[d].end))+"</span>"):n>=e[d].start&&n<e[d].end?o+=l.substring(f(e[d].start),f(n))+'</span><span class="peptideHighlighted" style="background:'+i+';">'+s+l.substring(f(n),f(e[d].end))+"</span>":r>=e[d].start&&r<e[d].end?o+=l.substring(f(e[d].start),f(r+1))+"</span></span>"+s+l.substring(f(r+1),f(e[d].end))+"</span>":o+=l.substring(f(e[d].start),f(e[d].end))+"</span>":o+=l.substring(f(e[d].start),f(e[d].end))+"</span>"}var v=$(a+" .fastaSeq");v.html(o),c=o;var y=$("[onclick]",v);for(d=0;d<y.length;d++){var b=y[d].onclick();y[d].onclick=e[b].onclick}},this.onMouseSelection=function(e){s.addEventListener(o.events.MOUSE_SELECTION_EVENT,e)},this.onSubpartSelected=function(e){s.addEventListener(o.events.SEQUENCE_SELECTED_EVENT,e)}}}();"object"===typeof e.exports&&(e.exports=r)},9767:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}},3115:function(e,t,n){"use strict";n.r(t),n.d(t,{ServerStyleSheet:function(){return Be},StyleSheetConsumer:function(){return re},StyleSheetContext:function(){return ne},StyleSheetManager:function(){return ce},ThemeConsumer:function(){return Re},ThemeContext:function(){return Pe},ThemeProvider:function(){return Oe},__PRIVATE__:function(){return He},createGlobalStyle:function(){return Fe},css:function(){return be},default:function(){return Ue},isStyledComponent:function(){return b},keyframes:function(){return ze},useTheme:function(){return Ze},version:function(){return w},withTheme:function(){return je}});var r=n(6214),i=n(7313),o=n(9767),a=n.n(o);var s=function(e){function t(e,r,l,c,f){for(var p,h,m,g,x,_=0,S=0,C=0,k=0,M=0,O=0,L=m=p=0,N=0,F=0,z=0,B=0,j=l.length,Z=j-1,H="",U="",V="",G="";N<j;){if(h=l.charCodeAt(N),N===Z&&0!==S+k+C+_&&(0!==S&&(h=47===S?10:47),k=C=_=0,j++,Z++),0===S+k+C+_){if(N===Z&&(0<F&&(H=H.replace(d,"")),0<H.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt(N)}h=59}switch(h){case 123:for(p=(H=H.trim()).charCodeAt(0),m=1,B=++N;N<j;){switch(h=l.charCodeAt(N)){case 123:m++;break;case 125:m--;break;case 47:switch(h=l.charCodeAt(N+1)){case 42:case 47:e:{for(L=N+1;L<Z;++L)switch(l.charCodeAt(L)){case 47:if(42===h&&42===l.charCodeAt(L-1)&&N+2!==L){N=L+1;break e}break;case 10:if(47===h){N=L+1;break e}}N=L}}break;case 91:h++;case 40:h++;case 34:case 39:for(;N++<Z&&l.charCodeAt(N)!==h;);}if(0===m)break;N++}if(m=l.substring(B,N),0===p&&(p=(H=H.replace(u,"").trim()).charCodeAt(0)),64===p){switch(0<F&&(H=H.replace(d,"")),h=H.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=R}if(B=(m=t(r,F,m,h,f+1)).length,0<I&&(x=s(3,m,F=n(R,H,z),r,A,T,B,h,f,c),H=F.join(""),void 0!==x&&0===(B=(m=x.trim()).length)&&(h=0,m="")),0<B)switch(h){case 115:H=H.replace(w,a);case 100:case 109:case 45:m=H+"{"+m+"}";break;case 107:m=(H=H.replace(v,"$1 $2"))+"{"+m+"}",m=1===P||2===P&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=H+m,112===c&&(U+=m,m="")}else m=""}else m=t(r,n(r,H,z),m,c,f+1);V+=m,m=z=F=L=p=0,H="",h=l.charCodeAt(++N);break;case 125:case 59:if(1<(B=(H=(0<F?H.replace(d,""):H).trim()).length))switch(0===L&&(p=H.charCodeAt(0),45===p||96<p&&123>p)&&(B=(H=H.replace(" ",":")).length),0<I&&void 0!==(x=s(1,H,r,e,A,T,U.length,c,f,c))&&0===(B=(H=x.trim()).length)&&(H="\0\0"),p=H.charCodeAt(0),h=H.charCodeAt(1),p){case 0:break;case 64:if(105===h||99===h){G+=H+l.charAt(N);break}default:58!==H.charCodeAt(B-1)&&(U+=i(H,p,h,H.charCodeAt(2)))}z=F=L=p=0,H="",h=l.charCodeAt(++N)}}switch(h){case 13:case 10:47===S?S=0:0===1+p&&107!==c&&0<H.length&&(F=1,H+="\0"),0<I*D&&s(0,H,r,e,A,T,U.length,c,f,c),T=1,A++;break;case 59:case 125:if(0===S+k+C+_){T++;break}default:switch(T++,g=l.charAt(N),h){case 9:case 32:if(0===k+_+S)switch(M){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===k+S+_&&(F=z=1,g="\f"+g);break;case 108:if(0===k+S+_+E&&0<L)switch(N-L){case 2:112===M&&58===l.charCodeAt(N-3)&&(E=M);case 8:111===O&&(E=O)}break;case 58:0===k+S+_&&(L=N);break;case 44:0===S+C+k+_&&(F=1,g+="\r");break;case 34:case 39:0===S&&(k=k===h?0:0===k?h:k);break;case 91:0===k+S+C&&_++;break;case 93:0===k+S+C&&_--;break;case 41:0===k+S+_&&C--;break;case 40:if(0===k+S+_){if(0===p)if(2*M+3*O===533);else p=1;C++}break;case 64:0===S+C+k+_+L+m&&(m=1);break;case 42:case 47:if(!(0<k+_+C))switch(S){case 0:switch(2*h+3*l.charCodeAt(N+1)){case 235:S=47;break;case 220:B=N,S=42}break;case 42:47===h&&42===M&&B+2!==N&&(33===l.charCodeAt(B+2)&&(U+=l.substring(B,N+1)),g="",S=0)}}0===S&&(H+=g)}O=M,M=h,N++}if(0<(B=U.length)){if(F=r,0<I&&(void 0!==(x=s(2,U,F,e,A,T,B,c,f,c))&&0===(U=x).length))return G+U+V;if(U=F.join(",")+"{"+U+"}",0!==P*E){switch(2!==P||o(U,2)||(E=0),E){case 111:U=U.replace(b,":-moz-$1")+U;break;case 112:U=U.replace(y,"::-webkit-input-$1")+U.replace(y,"::-moz-$1")+U.replace(y,":-ms-input-$1")+U}E=0}}return G+U+V}function n(e,t,n){var i=t.trim().split(m);t=i;var o=i.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var l=s=0;for(t=[];s<o;++s)for(var c=0;c<a;++c)t[l++]=r(e[c]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var a=e+";",s=2*t+3*n+4*r;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===P||2===P&&o(l,1)?"-webkit-"+l+l:l}if(0===P||2===P&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(M,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return p.test(a)?a.replace(f,":-webkit-")+a.replace(f,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(x,"tb");break;case 232:l=a.replace(x,"tb-rl");break;case 220:l=a.replace(x,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===k.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+r&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+a}return a}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),L(2!==t?r:r.replace(C,"$1"),n,t)}function a(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(_," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,o,a,s,l,u){for(var d,f=0,p=t;f<I;++f)switch(d=O[f].call(c,e,p,n,r,i,o,a,s,l,u)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(L=null,e?"function"!==typeof e?P=1:(P=2,L=e):P=0),l}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<I){var i=s(-1,n,r,r,A,T,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var o=t(R,r,n,0,0);return 0<I&&(void 0!==(i=s(-2,o,r,r,A,T,o.length,0,0,0))&&(o=i)),"",E=0,T=A=1,o}var u=/^\0+/g,d=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,k=/stretch|:\s*\w+\-(?:conte|avail)/,M=/([^-])(image-set\()/,T=1,A=1,E=0,P=1,R=[],O=[],I=0,L=null,D=0;return c.use=function e(t){switch(t){case void 0:case null:I=O.length=0;break;default:if("function"===typeof t)O[I++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else D=0|!!t}return e},c.set=l,void 0!==e&&l(e),c},l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},c=n(1097),u=n(7861),d=n.n(u);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},h=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,r.typeOf)(e)},m=Object.freeze([]),g=Object.freeze({});function v(e){return"function"==typeof e}function y(e){return e.displayName||e.name||"Component"}function b(e){return e&&"string"==typeof e.styledComponentId}var x="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",w="5.3.6",_="undefined"!=typeof window&&"HTMLElement"in window,S=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),C={};function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var M=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&k(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),T=new Map,A=new Map,E=1,P=function(e){if(T.has(e))return T.get(e);for(;A.has(E);)E++;var t=E++;return T.set(e,t),A.set(t,e),t},R=function(e){return A.get(e)},O=function(e,t){t>=E&&(E=t+1),T.set(e,t),A.set(t,e)},I="style["+x+'][data-styled-version="5.3.6"]',L=new RegExp("^"+x+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),D=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},N=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,o=n.length;i<o;i++){var a=n[i].trim();if(a){var s=a.match(L);if(s){var l=0|parseInt(s[1],10),c=s[2];0!==l&&(O(c,l),D(e,c,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(a)}}},F=function(){return n.nc},z=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(x))return r}}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(x,"active"),r.setAttribute("data-styled-version","5.3.6");var a=F();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},B=function(){function e(e){var t=this.element=z(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}k(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),j=function(){function e(e){var t=this.element=z(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Z=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),H=_,U={isServer:!_,useCSSOMInjection:!S},V=function(){function e(e,t,n){void 0===e&&(e=g),void 0===t&&(t={}),this.options=f({},U,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&_&&H&&(H=!1,function(e){for(var t=document.querySelectorAll(I),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(x)&&(N(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return P(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(f({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new Z(i):r?new B(i):new j(i),new M(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(P(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(P(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(P(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var o=R(i);if(void 0!==o){var a=e.names.get(o),s=t.getGroup(i);if(a&&s&&a.size){var l=x+".g"+i+'[id="'+o+'"]',c="";void 0!==a&&a.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),G=/(a)(d)/gi,W=function(e){return String.fromCharCode(e+(e>25?39:97))};function $(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=W(t%52)+n;return(W(t%52)+n).replace(G,"$1-$2")}var q=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Y=function(e){return q(5381,e)};function X(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(v(n)&&!b(n))return!1}return!0}var K=Y("5.3.6"),J=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&X(e),this.componentId=t,this.baseHash=q(K,t),this.baseStyle=n,V.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var o=ve(this.rules,e,t,n).join(""),a=$(q(this.baseHash,o)>>>0);if(!t.hasNameForId(r,a)){var s=n(o,"."+a,void 0,r);t.insertRules(r,a,s)}i.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,c=q(this.baseHash,n.hash),u="",d=0;d<l;d++){var f=this.rules[d];if("string"==typeof f)u+=f;else if(f){var p=ve(f,e,t,n),h=Array.isArray(p)?p.join(""):p;c=q(c,h+d),u+=h}}if(u){var m=$(c>>>0);if(!t.hasNameForId(r,m)){var g=n(u,"."+m,void 0,r);t.insertRules(r,m,g)}i.push(m)}}return i.join(" ")},e}(),Q=/^\s*\/\/.*$/gm,ee=[":","[",".","#"];function te(e){var t,n,r,i,o=void 0===e?g:e,a=o.options,l=void 0===a?g:a,c=o.plugins,u=void 0===c?m:c,d=new s(l),f=[],p=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,o,a,s,l,c,u,d){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),h=function(e,r,o){return 0===r&&-1!==ee.indexOf(o[n.length])||o.match(i)?e:"."+t};function v(e,o,a,s){void 0===s&&(s="&");var l=e.replace(Q,""),c=o&&a?a+" "+o+" { "+l+" }":l;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),d(a||!o?"":o,c)}return d.use([].concat(u,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,h))},p,function(e){if(-2===e){var t=f;return f=[],t}}])),v.hash=u.length?u.reduce((function(e,t){return t.name||k(15),q(e,t.name)}),5381).toString():"",v}var ne=i.createContext(),re=ne.Consumer,ie=i.createContext(),oe=(ie.Consumer,new V),ae=te();function se(){return(0,i.useContext)(ne)||oe}function le(){return(0,i.useContext)(ie)||ae}function ce(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],o=se(),s=(0,i.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,i.useMemo)((function(){return te({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){a()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(ne.Provider,{value:s},i.createElement(ie.Provider,{value:l},e.children))}var ue=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ae);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return k(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ae),this.name+e.hash},e}(),de=/([A-Z])/,fe=/([A-Z])/g,pe=/^ms-/,he=function(e){return"-"+e.toLowerCase()};function me(e){return de.test(e)?e.replace(fe,he).replace(pe,"-ms-"):e}var ge=function(e){return null==e||!1===e||""===e};function ve(e,t,n,r){if(Array.isArray(e)){for(var i,o=[],a=0,s=e.length;a<s;a+=1)""!==(i=ve(e[a],t,n,r))&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}return ge(e)?"":b(e)?"."+e.styledComponentId:v(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!t?e:ve(e(t),t,n,r):e instanceof ue?n?(e.inject(n,r),e.getName(r)):e:h(e)?function e(t,n){var r,i,o=[];for(var a in t)t.hasOwnProperty(a)&&!ge(t[a])&&(Array.isArray(t[a])&&t[a].isCss||v(t[a])?o.push(me(a)+":",t[a],";"):h(t[a])?o.push.apply(o,e(t[a],a)):o.push(me(a)+": "+(r=a,(null==(i=t[a])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in l?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var c}var ye=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function be(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e)||h(e)?ye(ve(p(m,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:ye(ve(p(e,n)))}new Set;var xe=function(e,t,n){return void 0===n&&(n=g),e.theme!==n.theme&&e.theme||t||n.theme},we=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,_e=/(^-|-$)/g;function Se(e){return e.replace(we,"-").replace(_e,"")}var Ce=function(e){return $(Y(e)>>>0)};function ke(e){return"string"==typeof e&&!0}var Me=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Te=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ae(e,t,n){var r=e[n];Me(t)&&Me(r)?Ee(r,t):e[n]=t}function Ee(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(Me(a))for(var s in a)Te(s)&&Ae(e,a[s],s)}return e}var Pe=i.createContext(),Re=Pe.Consumer;function Oe(e){var t=(0,i.useContext)(Pe),n=(0,i.useMemo)((function(){return function(e,t){return e?v(e)?e(t):Array.isArray(e)||"object"!=typeof e?k(8):t?f({},t,{},e):e:k(14)}(e.theme,t)}),[e.theme,t]);return e.children?i.createElement(Pe.Provider,{value:n},e.children):null}var Ie={};function Le(e,t,n){var r=b(e),o=!ke(e),a=t.attrs,s=void 0===a?m:a,l=t.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Se(e);Ie[n]=(Ie[n]||0)+1;var r=n+"-"+Ce("5.3.6"+n+Ie[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):l,p=t.displayName,h=void 0===p?function(e){return ke(e)?"styled."+e:"Styled("+y(e)+")"}(e):p,x=t.displayName&&t.componentId?Se(t.displayName)+"-"+t.componentId:t.componentId||u,w=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,_=t.shouldForwardProp;r&&e.shouldForwardProp&&(_=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var S,C=new J(n,x,r?e.componentStyle:void 0),k=C.isStatic&&0===s.length,M=function(e,t){return function(e,t,n,r){var o=e.attrs,a=e.componentStyle,s=e.defaultProps,l=e.foldedComponentIds,u=e.shouldForwardProp,d=e.styledComponentId,p=e.target,h=function(e,t,n){void 0===e&&(e=g);var r=f({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,o,a=e;for(t in v(a)&&(a=a(r)),a)r[t]=i[t]="className"===t?(n=i[t],o=a[t],n&&o?n+" "+o:n||o):a[t]})),[r,i]}(xe(t,(0,i.useContext)(Pe),s)||g,t,o),m=h[0],y=h[1],b=function(e,t,n,r){var i=se(),o=le();return t?e.generateAndInjectStyles(g,i,o):e.generateAndInjectStyles(n,i,o)}(a,r,m),x=n,w=y.$as||t.$as||y.as||t.as||p,_=ke(w),S=y!==t?f({},t,{},y):t,C={};for(var k in S)"$"!==k[0]&&"as"!==k&&("forwardedAs"===k?C.as=S[k]:(u?u(k,c.Z,w):!_||(0,c.Z)(k))&&(C[k]=S[k]));return t.style&&y.style!==t.style&&(C.style=f({},t.style,{},y.style)),C.className=Array.prototype.concat(l,d,b!==d?b:null,t.className,y.className).filter(Boolean).join(" "),C.ref=x,(0,i.createElement)(w,C)}(S,e,t,k)};return M.displayName=h,(S=i.forwardRef(M)).attrs=w,S.componentStyle=C,S.displayName=h,S.shouldForwardProp=_,S.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):m,S.styledComponentId=x,S.target=r?e.target:e,S.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),o=r&&r+"-"+(ke(e)?e:Se(y(e)));return Le(e,f({},i,{attrs:w,componentId:o}),n)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ee({},e.defaultProps,t):t}}),S.toString=function(){return"."+S.styledComponentId},o&&d()(S,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var De=function(e){return function e(t,n,i){if(void 0===i&&(i=g),!(0,r.isValidElementType)(n))return k(1,String(n));var o=function(){return t(n,i,be.apply(void 0,arguments))};return o.withConfig=function(r){return e(t,n,f({},i,{},r))},o.attrs=function(r){return e(t,n,f({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},o}(Le,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){De[e]=De(e)}));var Ne=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=X(e),V.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(ve(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&V.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function Fe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=be.apply(void 0,[e].concat(n)),a="sc-global-"+Ce(JSON.stringify(o)),s=new Ne(o,a);function l(e){var t=se(),n=le(),r=(0,i.useContext)(Pe),o=(0,i.useRef)(t.allocateGSInstance(a)).current;return t.server&&c(o,e,t,r,n),(0,i.useLayoutEffect)((function(){if(!t.server)return c(o,e,t,r,n),function(){return s.removeStyles(o,t)}}),[o,e,t,r,n]),null}function c(e,t,n,r,i){if(s.isStatic)s.renderStyles(e,C,n,i);else{var o=f({},t,{theme:xe(t,r,l.defaultProps)});s.renderStyles(e,o,n,i)}}return i.memo(l)}function ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=be.apply(void 0,[e].concat(n)).join(""),o=Ce(i);return new ue(o,i)}var Be=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=F();return"<style "+[n&&'nonce="'+n+'"',x+'="true"','data-styled-version="5.3.6"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?k(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return k(2);var n=((t={})[x]="",t["data-styled-version"]="5.3.6",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=F();return r&&(n.nonce=r),[i.createElement("style",f({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new V({isServer:!0}),this.sealed=!1}var t=e.prototype;return t.collectStyles=function(e){return this.sealed?k(2):i.createElement(ce,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return k(3)},e}(),je=function(e){var t=i.forwardRef((function(t,n){var r=(0,i.useContext)(Pe),o=e.defaultProps,a=xe(t,r,o);return i.createElement(e,f({},t,{theme:a,ref:n}))}));return d()(t,e),t.displayName="WithTheme("+y(e)+")",t},Ze=function(){return(0,i.useContext)(Pe)},He={StyleSheet:V,masterSheet:oe},Ue=De},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),o=n(6116),a=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},9400:function(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),o=n(6116),a=n(2281);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},4578:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=d;var p={};function h(){}function m(){}function g(){}var v={};u(v,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==t&&n.call(b,s)&&(v=b);var x=g.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(o,a,s,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,l)}),(function(e){i("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return i("throw",e,s,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function S(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(_.prototype),u(_.prototype,l,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(d(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(x),u(x,c,"Generator"),u(x,s,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3878);var i=n(181),o=n(5267);function a(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,o.Z)()}},168:function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{Z:function(){return r}})},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);var i=n(9199),o=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{10:"60d6d92d",198:"6cd64c46",342:"b30388f2",375:"89cf27bc",453:"57cc9f65",481:"02121e72",505:"ea6c4549",524:"bbdcfa94",753:"7513df4b",887:"c2d0d5e4"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="jsonparserv01:";n.l=function(r,i,o,a){if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkjsonparserv01=self.webpackChunkjsonparserv01||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e=n(7313),t=n.t(e,2),r=n(1739),i=n(9439),o=n(4942);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=n(1497),c=n(763),u=n.n(c),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function f(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var p=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,t.call(this,e));return r.handleChange=r.handleChange.bind(r),r.handleRef=r.handleRef.bind(r),e.selection&&e.selection.length>0&&e.coverage&&e.coverage.length>0&&console.warn("The selection and coverage options are not compatible with each other."),r._seqObj=new(u())(r.props.sequence),r._div=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.callRender=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.selection,i=f(n,["selection"]),o=this._div;null!==o&&(this._seqObj.render("#"+o.id,d({},i,t)),this.props.coverage.length>0&&this._seqObj.coverage(this.props.coverage),this.props.legend.length>0&&this._seqObj.addLegend(this.props.legend),r.length>0&&(e=this._seqObj).selection.apply(e,r))},n.prototype.componentDidMount=function(){document.addEventListener("change",this.handleChange),this.callRender(),this._seqObj.onSubpartSelected(this.props.onSubpartSelected),this._seqObj.onMouseSelection(this.props.onMouseSelection)},n.prototype.componentWillReceiveProps=function(e){this.props.sequence!==e.sequence&&(this._seqObj=new(u())(e.sequence))},n.prototype.componentDidUpdate=function(e,t){this.props!==e&&this.callRender()},n.prototype.componentWillUnmount=function(){document.removeEventListener("change",this.handleChange)},n.prototype.handleChange=function(e){var t=e.target;(" "+t.className+" ").indexOf(" "+this.props.seqLenClass+" ")>-1&&this.callRender({charsPerLine:t.value})},n.prototype.handleRef=function(e){this._div=e},n.prototype.render=function(){var t=this.props,n=(t.id,t.sequence,t.className);return e.createElement("div",{className:n,id:this.props.id,ref:this.handleRef})},n}(e.Component);p.propTypes={},p.defaultProps={id:(0,l.v4)(),coverage:[],legend:[],selection:[],seqLenClass:"CPLChoice",onMouseSelection:function(e){},onSubpartSelected:function(e){},className:""};n(3419);var h=n(6417);var m=n(5192),g=n.n(m);var v=n(7462),y=n(3366),b=n(3061),x=n(1615),w=n(6983),_=n(4993),S=n(1921),C=n(7592),k=n(7551),M=n(2298),T=n(7430);function A(e){return(0,M.Z)("MuiDataGrid",e)}var E=(0,T.Z)("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","autoHeight","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLinkOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","root","root--densityStandard","root--densityComfortable","root--densityCompact","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]),P=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:function(e,t){return[(0,o.Z)({},"&.".concat(E.autoHeight),t.autoHeight),(0,o.Z)({},"&.".concat(E.aggregationColumnHeader),t.aggregationColumnHeader),(0,o.Z)({},"&.".concat(E["aggregationColumnHeader--alignLeft"]),t["aggregationColumnHeader--alignLeft"]),(0,o.Z)({},"&.".concat(E["aggregationColumnHeader--alignCenter"]),t["aggregationColumnHeader--alignCenter"]),(0,o.Z)({},"&.".concat(E["aggregationColumnHeader--alignRight"]),t["aggregationColumnHeader--alignRight"]),(0,o.Z)({},"&.".concat(E.aggregationColumnHeaderLabel),t.aggregationColumnHeaderLabel),(0,o.Z)({},"& .".concat(E.editBooleanCell),t.editBooleanCell),(0,o.Z)({},"& .".concat(E["cell--editing"]),t["cell--editing"]),(0,o.Z)({},"& .".concat(E["cell--textCenter"]),t["cell--textCenter"]),(0,o.Z)({},"& .".concat(E["cell--textLeft"]),t["cell--textLeft"]),(0,o.Z)({},"& .".concat(E["cell--textRight"]),t["cell--textRight"]),(0,o.Z)({},"& .".concat(E["cell--withRenderer"]),t["cell--withRenderer"]),(0,o.Z)({},"& .".concat(E.cell),t.cell),(0,o.Z)({},"& .".concat(E.cellContent),t.cellContent),(0,o.Z)({},"& .".concat(E.cellCheckbox),t.cellCheckbox),(0,o.Z)({},"& .".concat(E.cellSkeleton),t.cellSkeleton),(0,o.Z)({},"& .".concat(E.checkboxInput),t.checkboxInput),(0,o.Z)({},"& .".concat(E["columnHeader--alignCenter"]),t["columnHeader--alignCenter"]),(0,o.Z)({},"& .".concat(E["columnHeader--alignLeft"]),t["columnHeader--alignLeft"]),(0,o.Z)({},"& .".concat(E["columnHeader--alignRight"]),t["columnHeader--alignRight"]),(0,o.Z)({},"& .".concat(E["columnHeader--dragging"]),t["columnHeader--dragging"]),(0,o.Z)({},"& .".concat(E["columnHeader--moving"]),t["columnHeader--moving"]),(0,o.Z)({},"& .".concat(E["columnHeader--numeric"]),t["columnHeader--numeric"]),(0,o.Z)({},"& .".concat(E["columnHeader--sortable"]),t["columnHeader--sortable"]),(0,o.Z)({},"& .".concat(E["columnHeader--sorted"]),t["columnHeader--sorted"]),(0,o.Z)({},"& .".concat(E.columnHeader),t.columnHeader),(0,o.Z)({},"& .".concat(E.columnHeaderCheckbox),t.columnHeaderCheckbox),(0,o.Z)({},"& .".concat(E.columnHeaderDraggableContainer),t.columnHeaderDraggableContainer),(0,o.Z)({},"& .".concat(E.columnHeaderTitleContainer),t.columnHeaderTitleContainer),(0,o.Z)({},"& .".concat(E["columnSeparator--resizable"]),t["columnSeparator--resizable"]),(0,o.Z)({},"& .".concat(E["columnSeparator--resizing"]),t["columnSeparator--resizing"]),(0,o.Z)({},"& .".concat(E.columnSeparator),t.columnSeparator),(0,o.Z)({},"& .".concat(E.filterIcon),t.filterIcon),(0,o.Z)({},"& .".concat(E.iconSeparator),t.iconSeparator),(0,o.Z)({},"& .".concat(E.menuIcon),t.menuIcon),(0,o.Z)({},"& .".concat(E.menuIconButton),t.menuIconButton),(0,o.Z)({},"& .".concat(E.menuOpen),t.menuOpen),(0,o.Z)({},"& .".concat(E.menuList),t.menuList),(0,o.Z)({},"& .".concat(E["row--editable"]),t["row--editable"]),(0,o.Z)({},"& .".concat(E["row--editing"]),t["row--editing"]),(0,o.Z)({},"& .".concat(E["row--dragging"]),t["row--dragging"]),(0,o.Z)({},"& .".concat(E.row),t.row),(0,o.Z)({},"& .".concat(E.rowReorderCellPlaceholder),t.rowReorderCellPlaceholder),(0,o.Z)({},"& .".concat(E.rowReorderCell),t.rowReorderCell),(0,o.Z)({},"& .".concat(E["rowReorderCell--draggable"]),t["rowReorderCell--draggable"]),(0,o.Z)({},"& .".concat(E.sortIcon),t.sortIcon),(0,o.Z)({},"& .".concat(E.withBorder),t.withBorder),(0,o.Z)({},"& .".concat(E.treeDataGroupingCell),t.treeDataGroupingCell),(0,o.Z)({},"& .".concat(E.treeDataGroupingCellToggle),t.treeDataGroupingCellToggle),(0,o.Z)({},"& .".concat(E.detailPanelToggleCell),t.detailPanelToggleCell),(0,o.Z)({},"& .".concat(E["detailPanelToggleCell--expanded"]),t["detailPanelToggleCell--expanded"]),t.root]}})((function(e){var t,n,r,i=e.theme,a="light"===i.palette.mode?(0,k.$n)((0,k.Fq)(i.palette.divider,1),.88):(0,k._j)((0,k.Fq)(i.palette.divider,1),.68);return(0,v.Z)({flex:1,boxSizing:"border-box",position:"relative",border:"1px solid ".concat(a),borderRadius:i.shape.borderRadius,color:i.palette.text.primary},i.typography.body2,(r={outline:"none",height:"100%",display:"flex",flexDirection:"column"},(0,o.Z)(r,"&.".concat(E.autoHeight),(0,o.Z)({height:"auto"},"& .".concat(E["row--lastVisible"]," .").concat(E.cell),{borderBottomColor:"transparent"})),(0,o.Z)(r,"& .".concat(E["virtualScrollerContent--overflowed"]," .").concat(E["row--lastVisible"]," .").concat(E.cell),{borderBottomColor:"transparent"}),(0,o.Z)(r,"& .".concat(E.columnHeader,", & .").concat(E.cell),{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"}),(0,o.Z)(r,"& .".concat(E.columnHeader,":focus-within, & .").concat(E.cell,":focus-within"),{outline:"solid ".concat((0,k.Fq)(i.palette.primary.main,.5)," 1px"),outlineWidth:1,outlineOffset:-1}),(0,o.Z)(r,"& .".concat(E.columnHeader,":focus, & .").concat(E.cell,":focus"),{outline:"solid ".concat(i.palette.primary.main," 1px")}),(0,o.Z)(r,"& .".concat(E.columnHeaderCheckbox,", & .").concat(E.cellCheckbox),{padding:0,justifyContent:"center",alignItems:"center"}),(0,o.Z)(r,"& .".concat(E.columnHeader),{position:"relative",display:"flex",alignItems:"center"}),(0,o.Z)(r,"& .".concat(E["columnHeader--sorted"]," .").concat(E.iconButtonContainer,", & .").concat(E["columnHeader--filtered"]," .").concat(E.iconButtonContainer),{visibility:"visible",width:"auto"}),(0,o.Z)(r,"& .".concat(E.columnHeader,":not(.").concat(E["columnHeader--sorted"],") .").concat(E.sortIcon),{opacity:0,transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.shorter})}),(0,o.Z)(r,"& .".concat(E.columnHeader,":not(.").concat(E["columnHeader--sorted"],"):hover .").concat(E.sortIcon),{opacity:.5}),(0,o.Z)(r,"& .".concat(E.columnHeaderTitleContainer),{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"}),(0,o.Z)(r,"& .".concat(E.columnHeaderTitleContainerContent),{overflow:"hidden",display:"flex",alignItems:"center"}),(0,o.Z)(r,"& .".concat(E["columnHeader--filledGroup"]," .").concat(E.columnHeaderTitleContainer),{borderBottom:"solid ".concat(a," 1px"),boxSizing:"border-box"}),(0,o.Z)(r,"& .".concat(E["columnHeader--filledGroup"],".").concat(E["columnHeader--showColumnBorder"]," .").concat(E.columnHeaderTitleContainer),{borderBottom:"none"}),(0,o.Z)(r,"& .".concat(E["columnHeader--filledGroup"],".").concat(E["columnHeader--showColumnBorder"]),{borderBottom:"solid ".concat(a," 1px"),boxSizing:"border-box"}),(0,o.Z)(r,"& .".concat(E.sortIcon,", & .").concat(E.filterIcon),{fontSize:"inherit"}),(0,o.Z)(r,"& .".concat(E["columnHeader--sortable"]),{cursor:"pointer"}),(0,o.Z)(r,"& .".concat(E["columnHeader--alignCenter"]," .").concat(E.columnHeaderTitleContainer),{justifyContent:"center"}),(0,o.Z)(r,"& .".concat(E["columnHeader--alignRight"]," .").concat(E.columnHeaderDraggableContainer,", & .").concat(E["columnHeader--alignRight"]," .").concat(E.columnHeaderTitleContainer),{flexDirection:"row-reverse"}),(0,o.Z)(r,"& .".concat(E["columnHeader--alignCenter"]," .").concat(E.menuIcon,", & .").concat(E["columnHeader--alignRight"]," .").concat(E.menuIcon),{marginRight:"auto",marginLeft:-6}),(0,o.Z)(r,"& .".concat(E["columnHeader--alignRight"]," .").concat(E.menuIcon,", & .").concat(E["columnHeader--alignRight"]," .").concat(E.menuIcon),{marginRight:"auto",marginLeft:-10}),(0,o.Z)(r,"& .".concat(E["columnHeader--moving"]),{backgroundColor:i.palette.action.hover}),(0,o.Z)(r,"& .".concat(E.columnSeparator),{position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:a}),(0,o.Z)(r,"& .".concat(E["columnSeparator--sideLeft"]),{left:-12}),(0,o.Z)(r,"& .".concat(E["columnSeparator--sideRight"]),{right:-12}),(0,o.Z)(r,"& .".concat(E["columnSeparator--resizable"]),(t={cursor:"col-resize",touchAction:"none","&:hover":{color:i.palette.text.primary,"@media (hover: none)":{color:a}}},(0,o.Z)(t,"&.".concat(E["columnSeparator--resizing"]),{color:i.palette.text.primary}),(0,o.Z)(t,"& svg",{pointerEvents:"none"}),t)),(0,o.Z)(r,"& .".concat(E.iconSeparator),{color:"inherit"}),(0,o.Z)(r,"& .".concat(E.menuIcon),{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"}),(0,o.Z)(r,"& .".concat(E.columnHeader,":hover"),(n={},(0,o.Z)(n,"& .".concat(E.iconButtonContainer),{visibility:"visible",width:"auto"}),(0,o.Z)(n,"& .".concat(E.menuIcon),{width:"auto",visibility:"visible"}),n)),(0,o.Z)(r,".".concat(E.menuOpen),{visibility:"visible",width:"auto"}),(0,o.Z)(r,"& .".concat(E.row),{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:i.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,k.Fq)(i.palette.primary.main,i.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,k.Fq)(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,k.Fq)(i.palette.primary.main,i.palette.action.selectedOpacity)}}}}),(0,o.Z)(r,"& .".concat(E.cell),{display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(a)}),(0,o.Z)(r,"& .".concat(E.row,":not(.").concat(E["row--dynamicHeight"],") > .").concat(E.cell),{overflow:"hidden",whiteSpace:"nowrap"}),(0,o.Z)(r,"& .".concat(E.cellContent),{overflow:"hidden",textOverflow:"ellipsis"}),(0,o.Z)(r,"& .".concat(E.cell,".").concat(E["cell--editing"]),{padding:1,display:"flex",boxShadow:i.shadows[2],backgroundColor:i.palette.background.paper,"&:focus-within":{outline:"solid ".concat(i.palette.primary.main," 1px"),outlineOffset:"-1px"}}),(0,o.Z)(r,"& .".concat(E["row--editing"]),{boxShadow:i.shadows[2]}),(0,o.Z)(r,"& .".concat(E["row--editing"]," .").concat(E.cell),{boxShadow:i.shadows[0],backgroundColor:i.palette.background.paper}),(0,o.Z)(r,"& .".concat(E.editBooleanCell),{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"}),(0,o.Z)(r,"& .".concat(E.booleanCell,'[data-value="true"]'),{color:i.palette.text.secondary}),(0,o.Z)(r,"& .".concat(E.booleanCell,'[data-value="false"]'),{color:i.palette.text.disabled}),(0,o.Z)(r,"& .".concat(E.actionsCell),{display:"inline-flex",alignItems:"center",gridGap:i.spacing(1)}),(0,o.Z)(r,"& .".concat(E.rowReorderCell),{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:i.palette.action.disabledOpacity}),(0,o.Z)(r,"& .".concat(E["rowReorderCell--draggable"]),{cursor:"move",opacity:1}),(0,o.Z)(r,"& .".concat(E.rowReorderCellContainer),{padding:0,alignItems:"stretch"}),(0,o.Z)(r,"& .".concat(E.withBorder),{borderRight:"1px solid ".concat(a)}),(0,o.Z)(r,"& .".concat(E["cell--textLeft"]),{justifyContent:"flex-start"}),(0,o.Z)(r,"& .".concat(E["cell--textRight"]),{justifyContent:"flex-end"}),(0,o.Z)(r,"& .".concat(E["cell--textCenter"]),{justifyContent:"center"}),(0,o.Z)(r,"& .".concat(E.columnHeaderDraggableContainer),{display:"flex",width:"100%",height:"100%"}),(0,o.Z)(r,"& .".concat(E.rowReorderCellPlaceholder),{display:"none"}),(0,o.Z)(r,"& .".concat(E["columnHeader--dragging"],", & .").concat(E["row--dragging"]),{background:i.palette.background.paper,padding:"0 12px",borderRadius:i.shape.borderRadius,opacity:i.palette.action.disabledOpacity}),(0,o.Z)(r,"& .".concat(E["row--dragging"]),(0,o.Z)({background:i.palette.background.paper,padding:"0 12px",borderRadius:i.shape.borderRadius,opacity:i.palette.action.disabledOpacity},"& .".concat(E.rowReorderCellPlaceholder),{display:"flex"})),(0,o.Z)(r,"& .".concat(E.treeDataGroupingCell),{display:"flex",alignItems:"center",width:"100%"}),(0,o.Z)(r,"& .".concat(E.treeDataGroupingCellToggle),{flex:"0 0 28px",alignSelf:"stretch",marginRight:i.spacing(2)}),(0,o.Z)(r,"& .".concat(E.groupingCriteriaCell),{display:"flex",alignItems:"center",width:"100%"}),(0,o.Z)(r,"& .".concat(E.groupingCriteriaCellToggle),{flex:"0 0 28px",alignSelf:"stretch",marginRight:i.spacing(2)}),r))})),R="NOT_FOUND";var O=function(e,t){return e===t};function I(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,i=void 0===r?O:r,o=n.maxSize,a=void 0===o?1:o,s=n.resultEqualityCheck,l=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(i),c=1===a?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:R},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(l):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return R}return{get:r,put:function(t,i){r(t)===R&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(a,l);function u(){var t=c.get(arguments);if(t===R){if(t=e.apply(null,arguments),s){var n=c.getEntries(),r=n.find((function(e){return s(e.value,t)}));r&&(t=r.value)}c.put(arguments,t)}return t}return u.clearCache=function(){return c.clear()},u}function L(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function D(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o,a=0,s={memoizeOptions:void 0},l=r.pop();if("object"===typeof l&&(s=l,l=r.pop()),"function"!==typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var c=s,u=c.memoizeOptions,d=void 0===u?n:u,f=Array.isArray(d)?d:[d],p=L(r),h=e.apply(void 0,[function(){return a++,l.apply(null,arguments)}].concat(f)),m=e((function(){for(var e=[],t=p.length,n=0;n<t;n++)e.push(p[n].apply(null,arguments));return o=h.apply(null,e)}));return Object.assign(m,{resultFunc:l,memoizedResultFunc:h,dependencies:p,lastResult:function(){return o},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),m};return i}var N=D(I),F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",n=!1,r=Array.isArray(e)?e.join("\n"):e;return function(){n||(n=!0,"error"===t?console.error(r):console.warn(r))}},z=function(e,t){return e},B={cache:null},j=(F(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g `mySelector(state, apiRef.current.instanceId)`."]),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null===B.cache&&(B.cache={});var r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=!!i.current,s=a?i.current.instanceId:null!=o?o:"default",l=a?i.current.state:i;null===B.cache&&(B.cache={});var c=B.cache;if(c[s]&&c[s].get(t))return c[s].get(t)(l,s);var u=N.apply(void 0,t);return c[s]||(c[s]=new Map),c[s].set(t,u),u(l,s)};return r.acceptsApiRef=!0,r}),Z=function(e){return e.columns},H=j(Z,(function(e){return e.all})),U=j(Z,(function(e){return e.lookup})),V=j(H,U,(function(e,t){return e.map((function(e){return t[e]}))})),G=j(Z,(function(e){return e.columnVisibilityModel})),W=j(V,G,(function(e,t){return e.filter((function(e){return!1!==t[e.field]}))})),$=(j(W,(function(e){return e.map((function(e){return e.field}))})),j(W,(function(e){for(var t=[],n=0,r=0;r<e.length;r+=1)t.push(n),n+=e[r].computedWidth;return t}))),q=j(W,$,(function(e,t){var n=e.length;return 0===n?0:t[n-1]+e[n-1].computedWidth})),Y=j(V,(function(e){return e.filter((function(e){return e.filterable}))})),X=j(V,(function(e){return e.reduce((function(e,t){return t.filterable&&(e[t.field]=t),e}),{})})),K=(z(H),z(V),z(W),z(Y),z(j(Y,(function(e){return e.map((function(e){return e.field}))}))),z(j(W,(function(e){return e.length}))),z(j($,q,(function(e,t){return{totalWidth:t,positions:e}}))));F(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);var J=function(e,t){return function(e){return e.acceptsApiRef}(t)?t(e):t(e.current.state)},Q=e.createContext(void 0);function ee(){var t=e.useContext(Q);if(void 0===t)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join("\n"));return t}var te=e.createContext(void 0);var ne=function(){var t=e.useContext(te);if(!t)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return t},re=function(e){return e.density},ie=j(re,(function(e){return e.value})),oe=j(re,(function(e){return e.rowHeight})),ae=j(re,(function(e){return e.headerHeight})),se=j(re,(function(e){return e.headerGroupingMaxDepth})),le=j(re,(function(e){return e.factor})),ce=j(re,(function(e){return e.headerHeight*(1+e.headerGroupingMaxDepth)})),ue=function(e){return e.rows},de=j(ue,(function(e){return e.totalRowCount})),fe=j(ue,(function(e){return e.loading})),pe=j(ue,(function(e){return e.totalTopLevelRowCount})),he=j(ue,(function(e){return e.idRowsLookup})),me=j(ue,(function(e){return e.idToIdLookup})),ge=j(ue,(function(e){return e.tree})),ve=j(ue,(function(e){return e.groupingName})),ye=j(ue,(function(e){return e.treeDepth})),be=j(ue,(function(e){return e.ids})),xe=j(ue,(function(e){return null==e?void 0:e.additionalRowGroups})),we=j(xe,(function(e){return null==e?void 0:e.pinnedRows})),_e=j(we,(function(e){var t,n;return((null==e||null==(t=e.top)?void 0:t.length)||0)+((null==e||null==(n=e.bottom)?void 0:n.length)||0)})),Se=["children","className"],Ce=e.forwardRef((function(t,n){var r=ne(),o=t.children,a=t.className,s=(0,y.Z)(t,Se),l=ee(),c=J(l,W),u=J(l,de),d=J(l,ie),f=J(l,se),p=e.useRef(null),m=(0,w.Z)(p,n),g=J(l,_e),C=function(e){var t=e.autoHeight,n=e.density,r=e.classes,i={root:["root",t&&"autoHeight","root--density".concat((0,x.Z)(n))]};return(0,S.Z)(i,A,r)}({density:d,classes:r.classes,autoHeight:r.autoHeight});l.current.rootElementRef=p;var k=e.useState(!1),M=(0,i.Z)(k,2),T=M[0],E=M[1];return(0,_.Z)((function(){E(!0)}),[]),(0,_.Z)((function(){T&&l.current.unstable_updateGridDimensionsRef()}),[l,T]),T?(0,h.jsx)(P,(0,v.Z)({ref:m,className:(0,b.Z)(a,C.root),role:"grid","aria-colcount":c.length,"aria-rowcount":f+1+g+u,"aria-multiselectable":!r.disableMultipleSelection,"aria-label":r["aria-label"],"aria-labelledby":r["aria-labelledby"]},s,{children:o})):null}));function ke(t,n){var r=e.useRef(null);if(r.current)return r.current;var i=t.current.getLogger(n);return r.current=i,i}var Me=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:function(e,t){return t.main}})((function(){return{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"}}));function Te(e){var t=function(e){var t=e.classes;return(0,S.Z)({root:["main"]},A,t)}({classes:ne().classes});return(0,h.jsx)(Me,{className:t.root,children:e.children})}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ee=n(9142);function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,Ee.Z)(r.key),r)}}function Re(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Oe=n(9611);function Ie(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,Oe.Z)(e,t)}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}function De(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Ab){return!1}}var Ne=n(1002),Fe=n(7326);function ze(e,t){if(t&&("object"===(0,Ne.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,Fe.Z)(e)}function Be(e){var t=De();return function(){var n,r=Le(e);if(t){var i=Le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ze(this,n)}}var je=function(e){Ie(n,e);var t=Be(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Re(n,[{key:"componentDidCatch",value:function(e,t){this.props.api.current&&(this.logError(e),this.props.api.current.showError({error:e,errorInfo:t}))}},{key:"logError",value:function(e,t){this.props.logger.error("An unexpected error occurred. Error: ".concat(e&&e.message,". "),e,t)}},{key:"render",value:function(){var e;return this.props.hasError||null!=(e=this.state)&&e.hasError?this.props.render(this.state):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(e.Component);function Ze(e){var t=e.children,n=ee(),r=ke(n,"GridErrorHandler"),i=ne(),o=n.current.state.error;return(0,h.jsx)(je,{hasError:null!=o,api:n,logger:r,render:function(e){var t;return(0,h.jsx)(Te,{children:(0,h.jsx)(i.components.ErrorOverlay,(0,v.Z)({},e,o,null==(t=i.componentsProps)?void 0:t.errorOverlay))})},children:t})}function He(){var t,n=ee(),r=ne(),i=e.useRef(null);return n.current.headerRef=i,(0,h.jsx)("div",{ref:i,children:(0,h.jsx)(r.components.Header,(0,v.Z)({},null==(t=r.componentsProps)?void 0:t.header))})}var Ue=n(3236),Ve=n(3533);function Ge(e,t){var n=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},r=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var r=this;n(this),this.__resizeRAF__&&t.cancelAnimationFrame(this.__resizeRAF__),this.__resizeRAF__=t.requestAnimationFrame((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(r)&&(r.__resizeLast__.width=r.offsetWidth,r.__resizeLast__.height=r.offsetHeight,r.__resizeListeners__.forEach((function(t){t.call(r,e)})))}))}},i=!1,o="",a="animationstart",s="Webkit Moz O ms".split(" "),l="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),c=document.createElement("fakeelement");if(void 0!==c.style.animationName&&(i=!0),!1===i)for(var u=0;u<s.length;u++)if(void 0!==c.style[s[u]+"AnimationName"]){o="-"+s[u].toLowerCase()+"-",a=l[u],i=!0;break}var d="resizeanim",f="@"+o+"keyframes "+d+" { from { opacity: 0; } to { opacity: 0; } } ",p=o+"animation: 1ms "+d+"; ";return{addResizeListener:function(i,o){if(!i.__resizeTriggers__){var s=i.ownerDocument,l=t.getComputedStyle(i);l&&"static"==l.position&&(i.style.position="relative"),function(t){if(!t.getElementById("muiDetectElementResize")){var n=(f||"")+".Mui-resizeTriggers { "+(p||"")+'visibility: hidden; opacity: 0; } .Mui-resizeTriggers, .Mui-resizeTriggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .Mui-resizeTriggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="muiDetectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(t.createTextNode(n)),r.appendChild(i)}}(s),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=s.createElement("div")).className="Mui-resizeTriggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),n(i),i.addEventListener("scroll",r,!0),a&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName==d&&n(i)},i.__resizeTriggers__.addEventListener(a,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(o)},removeResizeListener:function(e,t){if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",r,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(a,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(Ab){}}}}}var We=["children","defaultHeight","defaultWidth","disableHeight","disableWidth","nonce","onResize","style"],$e=e.forwardRef((function(t,n){var r=t.children,o=t.defaultHeight,a=void 0===o?null:o,s=t.defaultWidth,l=void 0===s?null:s,c=t.disableHeight,u=void 0!==c&&c,d=t.disableWidth,f=void 0!==d&&d,p=t.nonce,m=t.onResize,g=t.style,b=(0,y.Z)(t,We),x=e.useState({height:a,width:l}),S=(0,i.Z)(x,2),C=S[0],k=S[1],M=e.useRef(null),T=e.useRef(null),A=(0,Ue.Z)((function(){if(T.current){var e=T.current.offsetHeight||0,t=T.current.offsetWidth||0,n=(0,Ve.Z)(T.current).getComputedStyle(T.current),r=parseInt(n.paddingLeft,10)||0,i=parseInt(n.paddingRight,10)||0,o=e-(parseInt(n.paddingTop,10)||0)-(parseInt(n.paddingBottom,10)||0),a=t-r-i;(!u&&C.height!==o||!f&&C.width!==a)&&(k({height:o,width:a}),m&&m({height:o,width:a}))}}));(0,_.Z)((function(){var e;if(T.current=M.current.parentElement,T){var t=(0,Ve.Z)(null!=(e=T.current)?e:void 0),n=Ge(p,t);return n.addResizeListener(T.current,A),A(),function(){n.removeResizeListener(T.current,A)}}}),[p,A]);var E={overflow:"visible"},P={};u||(E.height=0,P.height=C.height),f||(E.width=0,P.width=C.width);var R=(0,w.Z)(M,n);return(0,h.jsx)("div",(0,v.Z)({ref:R,style:(0,v.Z)({},E,g)},b,{children:null===C.height&&null===C.width?null:r(P)}))})),qe=function(e){return e.sorting},Ye=j(qe,(function(e){return e.sortedRows})),Xe=j(Ye,he,(function(e,t){return e.map((function(e){return{id:e,model:t[e]}}))})),Ke=j(qe,(function(e){return e.sortModel})),Je=j(Ke,(function(e){return e.reduce((function(t,n,r){return t[n.field]={sortDirection:n.sort,sortIndex:e.length>1?r+1:void 0},t}),{})})),Qe=function(e){return e.filter},et=j(Qe,(function(e){return e.filterModel})),tt=j(et,(function(e){return e.quickFilterValues})),nt=j(Qe,(function(e){return e.visibleRowsLookup})),rt=j(Qe,(function(e){return e.filteredRowsLookup})),it=(j(Qe,(function(e){return e.filteredDescendantCountLookup})),j(nt,Xe,(function(e,t){return t.filter((function(t){return!1!==e[t.id]}))}))),ot=j(it,(function(e){return e.map((function(e){return e.id}))})),at=j(rt,Xe,(function(e,t){return t.filter((function(t){return!1!==e[t.id]}))})),st=j(at,(function(e){return e.map((function(e){return e.id}))})),lt=j(it,ge,ye,(function(e,t,n){return n<2?e:e.filter((function(e){var n;return 0===(null==(n=t[e.id])?void 0:n.depth)}))})),ct=j(it,(function(e){return e.length})),ut=j(lt,(function(e){return e.length})),dt=j(et,U,(function(e,t){var n;return null==(n=e.items)?void 0:n.filter((function(e){var n,r;if(!e.columnField)return!1;var i=t[e.columnField];if(null==i||!i.filterOperators||0===(null==i||null==(n=i.filterOperators)?void 0:n.length))return!1;var o=i.filterOperators.find((function(t){return t.value===e.operatorValue}));return!!o&&(!o.InputComponent||null!=e.value&&""!==(null==(r=e.value)?void 0:r.toString()))}))})),ft=j(dt,(function(e){return e.reduce((function(e,t){return e[t.columnField]?e[t.columnField].push(t):e[t.columnField]=[t],e}),{})}));function pt(t){var n,r,o=ee(),a=ne(),s=J(o,ce),l=e.useState((function(){var e,t;return null!=(e=null==(t=o.current.getRootDimensions())?void 0:t.viewportInnerSize)?e:null})),c=(0,i.Z)(l,2),u=c[0],d=c[1],f=e.useCallback((function(){var e,t;d(null!=(e=null==(t=o.current.getRootDimensions())?void 0:t.viewportInnerSize)?e:null)}),[o]);(0,_.Z)((function(){return o.current.subscribeEvent("viewportInnerSizeChange",f)}),[o,f]);var p=null!=(n=null==u?void 0:u.height)?n:0;return a.autoHeight&&0===p&&(p="auto"),u?(0,h.jsx)("div",(0,v.Z)({style:{height:p,width:null!=(r=null==u?void 0:u.width)?r:0,position:"absolute",top:s,bottom:"auto"===p?0:void 0}},t)):null}function ht(){var e,t,n,r=ee(),i=ne(),o=J(r,de),a=J(r,ct),s=J(r,fe),l=!s&&o>0&&0===a,c=null;s||0!==o||(c=(0,h.jsx)(i.components.NoRowsOverlay,(0,v.Z)({},null==(e=i.componentsProps)?void 0:e.noRowsOverlay)));l&&(c=(0,h.jsx)(i.components.NoResultsOverlay,(0,v.Z)({},null==(t=i.componentsProps)?void 0:t.noResultsOverlay)));s&&(c=(0,h.jsx)(i.components.LoadingOverlay,(0,v.Z)({},null==(n=i.componentsProps)?void 0:n.loadingOverlay)));return null===c?null:(0,h.jsx)(pt,{children:c})}function mt(t){var n=t.children,r=t.VirtualScrollerComponent,o=t.ColumnHeadersComponent,a=ee(),s=ne(),l=J(a,ce),c=e.useState(s.disableVirtualization),u=(0,i.Z)(c,2),d=u[0],f=u[1],p=e.useCallback((function(){f(!0)}),[]),m=e.useCallback((function(){f(!1)}),[]);e.useEffect((function(){f(s.disableVirtualization)}),[s.disableVirtualization]),a.current.unstable_disableVirtualization=p,a.current.unstable_enableVirtualization=m;var g=e.useRef(null),v=e.useRef(null),y=e.useRef(null),b=e.useRef(null);a.current.columnHeadersContainerElementRef=v,a.current.columnHeadersElementRef=g,a.current.windowRef=y,a.current.renderingZoneRef=b;var x=e.useCallback((function(e){a.current.publishEvent("resize",e)}),[a]);return(0,h.jsxs)(Te,{children:[(0,h.jsx)(ht,{}),(0,h.jsx)(o,{ref:v,innerRef:g}),(0,h.jsx)($e,{nonce:s.nonce,disableHeight:s.autoHeight,onResize:x,children:function(e){var t={width:e.width,height:e.height?e.height-l:"auto",marginTop:l};return(0,h.jsx)(r,{ref:y,style:t,disableVirtualization:d})}}),n]})}function gt(){var t,n=ee(),r=ne(),i=e.useRef(null);return n.current.footerRef=i,r.hideFooter?null:(0,h.jsx)("div",{ref:i,children:(0,h.jsx)(r.components.Footer,(0,v.Z)({},null==(t=r.componentsProps)?void 0:t.footer))})}var vt=function(e){var t=e.apiRef,n=e.props,r=e.children;return(0,h.jsx)(te.Provider,{value:n,children:(0,h.jsx)(Q.Provider,{value:t,children:r})})},yt=n(3433);function bt(e){return"function"===typeof e}function xt(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var wt=function(e,t,n){return Math.max(t,Math.min(n,e))};function _t(e,t){if(e===t)return!0;if(e&&t&&"object"===typeof e&&"object"===typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r+=1)if(!_t(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(var i=Array.from(e.entries()),o=0;o<i.length;o+=1)if(!t.has(i[o][0]))return!1;for(var a=0;a<i.length;a+=1){var s=i[a];if(!_t(s[1],t.get(s[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(var l=Array.from(e.entries()),c=0;c<l.length;c+=1)if(!t.has(l[c][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){var u=e.length;if(u!==t.length)return!1;for(var d=0;d<u;d+=1)if(e[d]!==t[d])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var f=Object.keys(e),p=f.length;if(p!==Object.keys(t).length)return!1;for(var h=0;h<p;h+=1)if(!Object.prototype.hasOwnProperty.call(t,f[h]))return!1;for(var m=0;m<p;m+=1){var g=f[m];if(!_t(e[g],t[g]))return!1}return!0}return e!==e&&t!==t}function St(e,t,n){var r=function(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}}(e);return function(){return t+(n-t)*r()}}function Ct(e){return"function"===typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}var kt=function(){try{var e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(t){return!1}}()&&null!=window.localStorage.getItem("DEBUG"),Mt=function(){},Tt={debug:Mt,info:Mt,warn:Mt,error:Mt},At=["debug","info","warn","error"];function Et(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console,r=At.indexOf(t);if(-1===r)throw new Error("MUI: Log level ".concat(t," not recognized."));var i=At.reduce((function(t,i,o){return t[i]=o>=r?function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=r[0],s=r.slice(1);n[i].apply(n,["MUI: ".concat(e," - ").concat(a)].concat((0,yt.Z)(s)))}:Mt,t}),{});return i}function Pt(t,n,r){var o=e.useRef(n),a=e.useState(Object.keys(n)),s=(0,i.Z)(a,1)[0],l=e.useCallback((function(){t.current&&s.forEach((function(e){t.current.hasOwnProperty(e)||(t.current[e]=function(){var t;return(t=o.current)[e].apply(t,arguments)})}))}),[s,t]);e.useEffect((function(){o.current=n}),[n]),e.useEffect((function(){l()}),[l]),l()}var Rt,Ot=1e3,It=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;Ae(this,e),this.timeouts=new Map,this.cleanupTimeout=Ot,this.cleanupTimeout=t}return Re(e,[{key:"register",value:function(e,t,n){var r=this;this.timeouts||(this.timeouts=new Map);var i=setTimeout((function(){"function"===typeof t&&t(),r.timeouts.delete(n.cleanupToken)}),this.cleanupTimeout);this.timeouts.set(n.cleanupToken,i)}},{key:"unregister",value:function(e){var t=this.timeouts.get(e.cleanupToken);t&&(this.timeouts.delete(e.cleanupToken),clearTimeout(t))}},{key:"reset",value:function(){var e=this;this.timeouts&&(this.timeouts.forEach((function(t,n){e.unregister({cleanupToken:n})})),this.timeouts=void 0)}}]),e}(),Lt=function(){function e(){Ae(this,e),this.registry=new FinalizationRegistry((function(e){"function"===typeof e&&e()}))}return Re(e,[{key:"register",value:function(e,t,n){this.registry.register(e,t,n)}},{key:"unregister",value:function(e){this.registry.unregister(e)}},{key:"reset",value:function(){}}]),e}();!function(e){e.DataGrid="DataGrid",e.DataGridPro="DataGridPro"}(Rt||(Rt={}));var Dt=Re((function e(){Ae(this,e)}));var Nt={registry:null},Ft=function(t){var n=0;return function(r,o,a,s){null===t.registry&&(t.registry="undefined"!==typeof FinalizationRegistry?new Lt:new It);var l=e.useState(new Dt),c=(0,i.Z)(l,1)[0],u=e.useRef(null),d=e.useRef();d.current=a;var f=e.useRef(null);if(!u.current&&d.current){u.current=r.current.subscribeEvent(o,(function(e,t,n){var r;t.defaultMuiPrevented||(null==(r=d.current)||r.call(d,e,t,n))}),s),n+=1,f.current={cleanupToken:n},t.registry.register(c,(function(){var e;null==(e=u.current)||e.call(u),u.current=null,f.current=null}),f.current)}else!d.current&&u.current&&(u.current(),u.current=null,f.current&&(t.registry.unregister(f.current),f.current=null));e.useEffect((function(){if(!u.current&&d.current){u.current=r.current.subscribeEvent(o,(function(e,t,n){var r;t.defaultMuiPrevented||(null==(r=d.current)||r.call(d,e,t,n))}),s)}return f.current&&t.registry&&(t.registry.unregister(f.current),f.current=null),function(){var e;null==(e=u.current)||e.call(u),u.current=null}}),[r,o,s])}}(Nt),zt={isFirst:!0};function Bt(e,t,n){Ft(e,t,n,zt)}var jt=function(){function e(){Ae(this,e),this.maxListeners=10,this.warnOnce=!1,this.events={}}return Re(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.events[e];r||(r={highPriority:new Map,regular:new Map},this.events[e]=r),n.isFirst?r.highPriority.set(t,!0):r.regular.set(t,!0)}},{key:"removeListener",value:function(e,t){this.events[e]&&(this.events[e].regular.delete(t),this.events[e].highPriority.delete(t))}},{key:"removeAllListeners",value:function(){this.events={}}},{key:"emit",value:function(e){var t=this.events[e];if(t){for(var n=Array.from(t.highPriority.keys()),r=Array.from(t.regular.keys()),i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(var s=n.length-1;s>=0;s-=1){var l=n[s];t.highPriority.has(l)&&l.apply(this,o)}for(var c=0;c<r.length;c+=1){var u=r[c];t.regular.has(u)&&u.apply(this,o)}}}},{key:"once",value:function(e,t){var n=this;this.on(e,(function r(){n.removeListener(e,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];t.apply(n,o)}))}}]),e}(),Zt=function(e){return void 0!==e.isPropagationStopped},Ht=0;function Ut(t,n){var r=e.useRef();r.current||(r.current={unstable_eventManager:new jt,unstable_caches:{},state:{},instanceId:Ht},Ht+=1),e.useImperativeHandle(t,(function(){return r.current}),[r]);var i=e.useCallback((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t[0],a=t[1],s=t[2],l=void 0===s?{}:s;if(l.defaultMuiPrevented=!1,!Zt(l)||!l.isPropagationStopped()){var c=n.signature===Rt.DataGridPro?{api:r.current}:{};r.current.unstable_eventManager.emit(o,a,l,c)}}),[r,n.signature]),o=e.useCallback((function(e,t,n){r.current.unstable_eventManager.on(e,t,n);var i=r.current;return function(){i.unstable_eventManager.removeListener(e,t)}}),[r]),a=e.useCallback((function(e){r.current.publishEvent("componentError",e)}),[r]);return Pt(r,{subscribeEvent:o,publishEvent:i,showError:a}),e.useEffect((function(){var e=r.current;return function(){var t;"undefined"!==typeof(t=e.instanceId)?B.cache&&B.cache[t]&&delete B.cache[t]:B.cache=null,e.publishEvent("unmount")}}),[r]),r}var Vt="none",Gt={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree"},Wt=["stateId"],$t=function(t,n){var r=Ut(t,n);return function(t,n){t.current.getLogger=e.useCallback((function(e){return kt?Et(e,"debug",n.logger):n.logLevel?Et(e,n.logLevel.toString(),n.logger):Tt}),[n.logLevel,n.logger])}(r,n),function(t,n){var r=e.useCallback((function(e){t.current.setState((function(t){return(0,v.Z)({},t,{error:e})}))}),[t]);e.useEffect((function(){n.error?r({error:n.error}):r(null)}),[r,n.error]),Ft(t,"componentError",r)}(r,n),function(t,n){var r=e.useRef({}),a=e.useState(),s=(0,i.Z)(a,2)[1],l=e.useCallback((function(e){var t=e.stateId,n=(0,y.Z)(e,Wt);r.current[t]=(0,v.Z)({},n,{stateId:t})}),[]),c=e.useCallback((function(e,i){var o;if(o=bt(e)?e(t.current.state):e,t.current.state===o)return!1;var a=!1,s=[];if(Object.keys(r.current).forEach((function(e){var n=r.current[e],i=n.stateSelector(t.current.state,t.current.instanceId),l=n.stateSelector(o,t.current.instanceId);l!==i&&(s.push({stateId:n.stateId,hasPropChanged:l!==n.propModel}),void 0!==n.propModel&&l!==n.propModel&&(a=!0))})),s.length>1)throw new Error("You're not allowed to update several sub-state in one transaction. You already updated ".concat(s[0].stateId,", therefore, you're not allowed to update ").concat(s.map((function(e){return e.stateId})).join(", ")," in the same transaction."));if(a||(t.current.state=o,t.current.publishEvent&&t.current.publishEvent("stateChange",o)),1===s.length){var l=s[0],c=l.stateId,u=l.hasPropChanged,d=r.current[c],f=d.stateSelector(o,t.current.instanceId);if(d.propOnChange&&u){var p=n.signature===Rt.DataGridPro?{api:t.current,reason:i}:{reason:i};d.propOnChange(f,p)}a||t.current.publishEvent(d.changeEvent,f,{reason:i})}return!a}),[t,n.signature]),u=e.useCallback((function(e,n,r){return t.current.setState((function(t){return(0,v.Z)({},t,(0,o.Z)({},e,n(t[e])))}),r)}),[t]),d=e.useCallback((function(){return s((function(){return t.current.state}))}),[t]);Pt(t,{setState:c,forceUpdate:d,unstable_updateControlState:u,unstable_registerControlState:l})}(r,n),function(t){var n=e.useRef({}),r=e.useCallback((function(e){e&&Object.values(e.appliers).forEach((function(e){e()}))}),[]),i=e.useCallback((function(e,t,i){n.current[e]||(n.current[e]={processors:new Map,appliers:{}});var o=n.current[e];return o.processors.get(t)!==i&&(o.processors.set(t,i),r(o)),function(){n.current[e].processors.set(t,null)}}),[r]),o=e.useCallback((function(e,t,r){return n.current[e]||(n.current[e]={processors:new Map,appliers:{}}),n.current[e].appliers[t]=r,function(){var r=n.current[e].appliers,i=(0,y.Z)(r,[t].map(Ee.Z));n.current[e].appliers=i}}),[]),a=e.useCallback((function(e){var t=n.current[e];r(t)}),[r]),s=e.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],a=t[2];return n.current[i]?Array.from(n.current[i].processors.values()).reduce((function(e,t){return t?t(e,a):e}),o):o}),[]);Pt(t,{unstable_registerPipeProcessor:i,unstable_registerPipeApplier:o,unstable_requestPipeProcessorsApplication:a,unstable_applyPipeProcessors:s})}(r),function(t){var n=e.useRef(new Map),r=e.useRef({}),o=e.useCallback((function(e,n,i){var o=function(){var t=r.current[n],i=(0,y.Z)(t,[e].map(Ee.Z));r.current[n]=i};r.current[n]||(r.current[n]={});var a=r.current[n],s=a[e];return a[e]=i,s&&s!==i?(e===t.current.unstable_getActiveStrategy(Gt[n])&&t.current.publishEvent("activeStrategyProcessorChange",n),o):o}),[t]),a=e.useCallback((function(e,n){var i=t.current.unstable_getActiveStrategy(Gt[e]);if(null==i)throw new Error("Can't apply a strategy processor before defining an active strategy");var o=r.current[e];if(!o||!o[i])throw new Error('No processor found for processor "'.concat(e,'" on strategy "').concat(i,'"'));return(0,o[i])(n)}),[t]),s=e.useCallback((function(e){var t,r=Array.from(n.current.entries()).find((function(t){var n=(0,i.Z)(t,2)[1];return n.group===e&&n.isAvailable()}));return null!=(t=null==r?void 0:r[0])?t:Vt}),[]),l=e.useCallback((function(e,r,i){n.current.set(r,{group:e,isAvailable:i}),t.current.publishEvent("strategyAvailabilityChange")}),[t]);Pt(t,{unstable_registerStrategyProcessor:o,unstable_applyStrategyProcessor:a,unstable_getActiveStrategy:s,unstable_setStrategyAvailability:l})}(r),function(t,n){Pt(t,{getLocaleText:e.useCallback((function(e){if(null==n.localeText[e])throw new Error("Missing translation for key ".concat(e,"."));return n.localeText[e]}),[n.localeText])})}(r,n),r},qt=function(t,n,r){var i=e.useRef(!1);i.current||(n.current.state=t(n.current.state,r,n),i.current=!0)};function Yt(e){var t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);var n=document.createRange();n.selectNode(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}var Xt=function(t){var n=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0!==t.current.getSelectedRows().size){var n=t.current.getDataAsCsv({includeHeaders:e,delimiter:"\t"});navigator.clipboard?navigator.clipboard.writeText(n).catch((function(){Yt(n)})):Yt(n)}}),[t]),r=e.useCallback((function(e){var n=e.ctrlKey||e.metaKey||e.altKey;"C"===String.fromCharCode(e.keyCode)&&n&&(function(e){var t;return""!==(null==(t=window.getSelection())?void 0:t.toString())||!!e&&(e.selectionEnd||0)-(e.selectionStart||0)>0}(e.target)||t.current.unstable_copySelectedRowsToClipboard(e.altKey))}),[t]);!function(t,n,r,o,a){var s=ke(t,"useNativeEventListener"),l=e.useState(!1),c=(0,i.Z)(l,2),u=c[0],d=c[1],f=e.useRef(o),p=e.useCallback((function(e){return f.current&&f.current(e)}),[]);e.useEffect((function(){f.current=o}),[o]),e.useEffect((function(){var e;if((e=bt(n)?n():n&&n.current?n.current:null)&&r&&!u){s.debug("Binding native ".concat(r," event")),e.addEventListener(r,p,a);var i=e;d(!0),t.current.subscribeEvent("unmount",(function(){s.debug("Clearing native ".concat(r," event")),i.removeEventListener(r,p,a)}))}}),[n,p,r,u,s,a,t])}(t,t.current.rootElementRef,"keydown",r),Pt(t,{unstable_copySelectedRowsToClipboard:n})},Kt=function(e){return e.columnMenu},Jt=function(e){return(0,v.Z)({},e,{columnMenu:{open:!1}})},Qt=function(t){var n=e.useRef(!0);n.current&&(n.current=!1,t())},en=function(t,n,r){var i=e.useRef(),o=e.useRef("mui-".concat(Math.round(1e9*Math.random()))),a=e.useCallback((function(){i.current=t.current.unstable_registerPipeProcessor(n,o.current,r)}),[t,r,n]);Qt((function(){a()}));var s=e.useRef(!0);e.useEffect((function(){return s.current?s.current=!1:a(),function(){i.current&&(i.current(),i.current=null)}}),[a])},tn=function(t,n,r){var i=e.useRef(),o=e.useRef("mui-".concat(Math.round(1e9*Math.random()))),a=e.useCallback((function(){i.current=t.current.unstable_registerPipeApplier(n,o.current,r)}),[t,r,n]);Qt((function(){a()}));var s=e.useRef(!0);e.useEffect((function(){return s.current?s.current=!1:a(),function(){i.current&&(i.current(),i.current=null)}}),[a])},nn=n(4165),rn=n(5861),on=n(7219),an=n(1168),sn=n(7472),ln=n(3282),cn=n(4312),un=n(2678),dn=["onChange","maxRows","minRows","style","value"];function fn(e,t){return parseInt(e[t],10)||0}var pn={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function hn(e){return void 0===e||null===e||0===Object.keys(e).length}var mn=e.forwardRef((function(t,n){var r=t.onChange,o=t.maxRows,a=t.minRows,s=void 0===a?1:a,l=t.style,c=t.value,u=(0,y.Z)(t,dn),d=e.useRef(null!=c).current,f=e.useRef(null),p=(0,sn.Z)(n,f),m=e.useRef(null),g=e.useRef(0),b=e.useState({}),x=(0,i.Z)(b,2),w=x[0],_=x[1],S=e.useCallback((function(){var e=f.current,n=(0,ln.Z)(e).getComputedStyle(e);if("0px"===n.width)return{};var r=m.current;r.style.width=n.width,r.value=e.value||t.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],a=fn(n,"padding-bottom")+fn(n,"padding-top"),l=fn(n,"border-bottom-width")+fn(n,"border-top-width"),c=r.scrollHeight;r.value="x";var u=r.scrollHeight,d=c;return s&&(d=Math.max(Number(s)*u,d)),o&&(d=Math.min(Number(o)*u,d)),{outerHeightStyle:(d=Math.max(d,u))+("border-box"===i?a+l:0),overflow:Math.abs(d-c)<=1}}),[o,s,t.placeholder]),C=function(e,t){var n=t.outerHeightStyle,r=t.overflow;return g.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==r)?(g.current+=1,{overflow:r,outerHeightStyle:n}):e},k=e.useCallback((function(){var e=S();hn(e)||_((function(t){return C(t,e)}))}),[S]);e.useEffect((function(){var e,t=(0,cn.Z)((function(){g.current=0,f.current&&function(){var e=S();hn(e)||(0,an.flushSync)((function(){_((function(t){return C(t,e)}))}))}()})),n=(0,ln.Z)(f.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(f.current),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}})),(0,un.Z)((function(){k()})),e.useEffect((function(){g.current=0}),[c]);return(0,h.jsxs)(e.Fragment,{children:[(0,h.jsx)("textarea",(0,v.Z)({value:c,onChange:function(e){g.current=0,d||k(),r&&r(e)},ref:p,rows:s,style:(0,v.Z)({height:w.outerHeightStyle,overflow:w.overflow?"hidden":null},l)},u)),(0,h.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:m,tabIndex:-1,style:(0,v.Z)({},pn,l,{padding:0})})]})}));var gn=function(e){return"string"===typeof e};function vn(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var yn=e.createContext(void 0);function bn(){return e.useContext(yn)}var xn=n(7342),wn=n(686);function _n(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,i="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,h.jsx)(wn.xB,{styles:i})}var Sn=n(2248);var Cn=function(e){return(0,h.jsx)(_n,(0,v.Z)({},e,{defaultTheme:Sn.Z}))};function kn(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Mn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(kn(e.value)&&""!==e.value||t&&kn(e.defaultValue)&&""!==e.defaultValue)}function Tn(e){return(0,M.Z)("MuiInputBase",e)}var An=(0,T.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),En=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Pn=function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,x.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Rn=function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},On=(0,C.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Pn})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({},t.typography.body1,(0,o.Z)({color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(An.disabled),{color:(t.vars||t).palette.text.disabled,cursor:"default"}),n.multiline&&(0,v.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),In=(0,C.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Rn})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode,a=(0,v.Z)({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},l=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return(0,v.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,o.Z)(t,"label[data-shrink=false] + .".concat(An.formControl," &"),{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus:-ms-input-placeholder":l,"&:focus::-ms-input-placeholder":l}),(0,o.Z)(t,"&.".concat(An.disabled),{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled}),(0,o.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),Ln=(0,h.jsx)(Cn,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Dn=e.forwardRef((function(t,n){var r,o=(0,xn.Z)({props:t,name:"MuiInputBase"}),a=o["aria-describedby"],s=o.autoComplete,l=o.autoFocus,c=o.className,u=o.components,d=void 0===u?{}:u,f=o.componentsProps,p=void 0===f?{}:f,m=o.defaultValue,g=o.disabled,C=o.disableInjectingGlobalStyles,k=o.endAdornment,M=o.fullWidth,T=void 0!==M&&M,A=o.id,E=o.inputComponent,P=void 0===E?"input":E,R=o.inputProps,O=void 0===R?{}:R,I=o.inputRef,L=o.maxRows,D=o.minRows,N=o.multiline,F=void 0!==N&&N,z=o.name,B=o.onBlur,j=o.onChange,Z=o.onClick,H=o.onFocus,U=o.onKeyDown,V=o.onKeyUp,G=o.placeholder,W=o.readOnly,$=o.renderSuffix,q=o.rows,Y=o.slotProps,X=void 0===Y?{}:Y,K=o.slots,J=void 0===K?{}:K,Q=o.startAdornment,ee=o.type,te=void 0===ee?"text":ee,ne=o.value,re=(0,y.Z)(o,En),ie=null!=O.value?O.value:ne,oe=e.useRef(null!=ie).current,ae=e.useRef(),se=e.useCallback((function(e){0}),[]),le=(0,w.Z)(ae,I,O.ref,se),ce=e.useState(!1),ue=(0,i.Z)(ce,2),de=ue[0],fe=ue[1],pe=bn();var he=vn({props:o,muiFormControl:pe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});he.focused=pe?pe.focused:de,e.useEffect((function(){!pe&&g&&de&&(fe(!1),B&&B())}),[pe,g,de,B]);var me=pe&&pe.onFilled,ge=pe&&pe.onEmpty,ve=e.useCallback((function(e){Mn(e)?me&&me():ge&&ge()}),[me,ge]);(0,_.Z)((function(){oe&&ve({value:ie})}),[ie,ve,oe]);e.useEffect((function(){ve(ae.current)}),[]);var ye=P,be=O;F&&"input"===ye&&(be=q?(0,v.Z)({type:void 0,minRows:q,maxRows:q},be):(0,v.Z)({type:void 0,maxRows:L,minRows:D},be),ye=mn);e.useEffect((function(){pe&&pe.setAdornedStart(Boolean(Q))}),[pe,Q]);var xe=(0,v.Z)({},o,{color:he.color||"primary",disabled:he.disabled,endAdornment:k,error:he.error,focused:he.focused,formControl:pe,fullWidth:T,hiddenLabel:he.hiddenLabel,multiline:F,size:he.size,startAdornment:Q,type:te}),we=function(e){var t=e.classes,n=e.color,r=e.disabled,i=e.error,o=e.endAdornment,a=e.focused,s=e.formControl,l=e.fullWidth,c=e.hiddenLabel,u=e.multiline,d=e.readOnly,f=e.size,p=e.startAdornment,h=e.type,m={root:["root","color".concat((0,x.Z)(n)),r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl","small"===f&&"sizeSmall",u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===h&&"inputTypeSearch",u&&"inputMultiline","small"===f&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return(0,S.Z)(m,Tn,t)}(xe),_e=J.root||d.Root||On,Se=X.root||p.root||{},Ce=J.input||d.Input||In;return be=(0,v.Z)({},be,null!=(r=X.input)?r:p.input),(0,h.jsxs)(e.Fragment,{children:[!C&&Ln,(0,h.jsxs)(_e,(0,v.Z)({},Se,!gn(_e)&&{ownerState:(0,v.Z)({},xe,Se.ownerState)},{ref:n,onClick:function(e){ae.current&&e.currentTarget===e.target&&ae.current.focus(),Z&&Z(e)}},re,{className:(0,b.Z)(we.root,Se.className,c),children:[Q,(0,h.jsx)(yn.Provider,{value:null,children:(0,h.jsx)(Ce,(0,v.Z)({ownerState:xe,"aria-invalid":he.error,"aria-describedby":a,autoComplete:s,autoFocus:l,defaultValue:m,disabled:he.disabled,id:A,onAnimationStart:function(e){ve("mui-auto-fill-cancel"===e.animationName?ae.current:{value:"x"})},name:z,placeholder:G,readOnly:W,required:he.required,rows:q,value:ie,onKeyDown:U,onKeyUp:V,type:te},be,!gn(Ce)&&{as:ye,ownerState:(0,v.Z)({},xe,be.ownerState)},{ref:le,className:(0,b.Z)(we.input,be.className),onBlur:function(e){B&&B(e),O.onBlur&&O.onBlur(e),pe&&pe.onBlur?pe.onBlur(e):fe(!1)},onChange:function(e){if(!oe){var t=e.target||ae.current;if(null==t)throw new Error((0,on.Z)(1));ve({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];O.onChange&&O.onChange.apply(O,[e].concat(r)),j&&j.apply(void 0,[e].concat(r))},onFocus:function(e){he.disabled?e.stopPropagation():(H&&H(e),O.onFocus&&O.onFocus(e),pe&&pe.onFocus?pe.onFocus(e):fe(!0))}}))}),k,$?$((0,v.Z)({},he,{startAdornment:Q})):null]}))]})})),Nn=Dn,Fn=n(1171),zn=(0,Fn.Z)((0,h.jsx)("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),Bn=(0,Fn.Z)((0,h.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),jn=(0,Fn.Z)((0,h.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),Zn=(0,Fn.Z)((0,h.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Hn=(0,Fn.Z)((0,h.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),Un=(0,Fn.Z)((0,h.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),Vn=(0,Fn.Z)((0,h.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),Gn=((0,Fn.Z)((0,h.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),(0,Fn.Z)((0,h.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),(0,Fn.Z)((0,h.jsx)("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon")),Wn=(0,Fn.Z)((0,h.jsx)("path",{d:"M11 19V5h2v14z"}),"Separator"),$n=(0,Fn.Z)((0,h.jsx)("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),qn=(0,Fn.Z)((0,h.jsx)("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),Yn=(0,Fn.Z)((0,h.jsx)("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),Xn=(0,Fn.Z)((0,h.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),Kn=(0,Fn.Z)((0,h.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Jn=(0,Fn.Z)((0,h.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),Qn=(0,Fn.Z)((0,h.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),er=(0,Fn.Z)((0,h.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),tr=(0,Fn.Z)((0,h.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),nr=(0,Fn.Z)((0,h.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),rr=(0,Fn.Z)((0,h.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),ir=(0,Fn.Z)((0,h.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),or=n(7677),ar=n(1195),sr=n(7999);var lr=(0,T.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function cr(e){return(0,M.Z)("MuiListItemIcon",e)}var ur=(0,T.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),dr=n(1081);function fr(e){return(0,M.Z)("MuiMenuItem",e)}var pr=(0,T.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),hr=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],mr=(0,C.ZP)(sr.Z,{shouldForwardProp:function(e){return(0,C.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,v.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,o.Z)(t,"&.".concat(pr.selected),(0,o.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,k.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(pr.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,k.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,o.Z)(t,"&.".concat(pr.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,k.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,k.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,o.Z)(t,"&.".concat(pr.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,o.Z)(t,"&.".concat(pr.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,o.Z)(t,"& + .".concat(lr.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,o.Z)(t,"& + .".concat(lr.inset),{marginLeft:52}),(0,o.Z)(t,"& .".concat(dr.Z.root),{marginTop:0,marginBottom:0}),(0,o.Z)(t,"& .".concat(dr.Z.inset),{paddingLeft:36}),(0,o.Z)(t,"& .".concat(ur.root),{minWidth:36}),t),!r.dense&&(0,o.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),r.dense&&(0,v.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,o.Z)({},"& .".concat(ur.root," svg"),{fontSize:"1.25rem"})))})),gr=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiMenuItem"}),i=r.autoFocus,o=void 0!==i&&i,a=r.component,s=void 0===a?"li":a,l=r.dense,c=void 0!==l&&l,u=r.divider,d=void 0!==u&&u,f=r.disableGutters,p=void 0!==f&&f,m=r.focusVisibleClassName,g=r.role,x=void 0===g?"menuitem":g,C=r.tabIndex,k=r.className,M=(0,y.Z)(r,hr),T=e.useContext(ar.Z),A=e.useMemo((function(){return{dense:c||T.dense||!1,disableGutters:p}}),[T.dense,c,p]),E=e.useRef(null);(0,_.Z)((function(){o&&E.current&&E.current.focus()}),[o]);var P,R=(0,v.Z)({},r,{dense:A.dense,divider:d,disableGutters:p}),O=function(e){var t=e.disabled,n=e.dense,r=e.divider,i=e.disableGutters,o=e.selected,a=e.classes,s={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},l=(0,S.Z)(s,fr,a);return(0,v.Z)({},a,l)}(r),I=(0,w.Z)(E,n);return r.disabled||(P=void 0!==C?C:-1),(0,h.jsx)(ar.Z.Provider,{value:A,children:(0,h.jsx)(mr,(0,v.Z)({ref:I,role:x,tabIndex:P,component:s,focusVisibleClassName:(0,b.Z)(O.focusVisible,m),className:(0,b.Z)(O.root,k)},M,{ownerState:R,classes:O}))})}));function vr(e){return"object"===typeof e&&null!==e?e.value:e}function yr(e,t){if(void 0!==t){var n=t.find((function(t){var n=vr(t);return String(n)===String(e)}));return vr(n)}}var br=["item","applyValue","type","apiRef","focusElementRef"];var xr=function(e,t,n){var r=e.valueOptions,i=e.valueFormatter,o=e.field;return[""].concat("function"===typeof r?(0,yt.Z)(r({field:o})):(0,yt.Z)(r||[])).map((function(e){var r="object"===typeof e,a=r?e.value:e,s=r?e.value:e,l=i&&""!==e?i({value:e,field:o,api:t}):e,c=r?e.label:l;return(0,h.jsx)(n,{value:s,children:c},a)}))};function wr(t){var n,r,o,a,s,l=t.item,c=t.applyValue,u=t.type,d=t.apiRef,f=t.focusElementRef,p=(0,y.Z)(t,br);var m=e.useRef(),g=e.useState(null!=(n=l.value)?n:""),b=(0,i.Z)(g,2),x=b[0],w=b[1],_=e.useState(!1),S=(0,i.Z)(_,2),C=S[0],k=S[1],M=(0,or.Z)(),T=ne(),A=null==(o=((null==(r=T.componentsProps)?void 0:r.baseSelect)||{}).native)||o,E="singleSelect"===u?{select:!0,SelectProps:(0,v.Z)({native:A},null==(a=T.componentsProps)?void 0:a.baseSelect),children:xr(d.current.getColumn(l.columnField),d.current,A?"option":gr)}:{},P=e.useCallback((function(e){var t=e.target.value;if("singleSelect"===u){var n=d.current.getColumn(l.columnField),r="function"===typeof n.valueOptions?n.valueOptions({field:n.field}):n.valueOptions;t=yr(t,r)}clearTimeout(m.current),w(String(t)),k(!0),m.current=setTimeout((function(){c((0,v.Z)({},l,{value:t})),k(!1)}),500)}),[d,c,l,u]);e.useEffect((function(){return function(){clearTimeout(m.current)}}),[]),e.useEffect((function(){var e,t=null!=(e=l.value)?e:"";w(String(t))}),[l.value]);var R=C?{endAdornment:(0,h.jsx)(er,{})}:p.InputProps;return(0,h.jsx)(T.components.BaseTextField,(0,v.Z)({id:M,label:d.current.getLocaleText("filterPanelInputLabel"),placeholder:d.current.getLocaleText("filterPanelInputPlaceholder"),value:x,onChange:P,variant:"standard",type:u||"text",InputProps:R,InputLabelProps:{shrink:!0},inputRef:f},E,p,null==(s=T.componentsProps)?void 0:s.baseTextField))}var _r=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","isValidating","debounceMs","isProcessingProps","onValueChange"],Sr=(0,C.ZP)(Nn,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:function(e,t){return t.editInputCell}})((function(e){var t=e.theme;return(0,v.Z)({},t.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})})),Cr=e.forwardRef((function(t,n){var r,o,a=ne(),s=t.id,l=t.value,c=t.field,u=t.colDef,d=t.hasFocus,f=t.debounceMs,p=void 0===f?null!=(r=a.experimentalFeatures)&&r.newEditingApi?200:500:f,m=t.isProcessingProps,g=t.onValueChange,b=(0,y.Z)(t,_r),x=ee(),w=e.useRef(),C=e.useState(l),k=(0,i.Z)(C,2),M=k[0],T=k[1],E=function(e){var t=e.classes;return(0,S.Z)({root:["editInputCell"]},A,t)}({classes:a.classes}),P=e.useCallback(function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(t){var n,r,i,o;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.value,!g){e.next=4;break}return e.next=4,g(t,r);case 4:i=x.current.getColumn(c),o=r,i.valueParser&&null!=(n=a.experimentalFeatures)&&n.newEditingApi&&(o=i.valueParser(r,x.current.getCellParams(s,c))),T(o),x.current.setEditCellValue({id:s,field:c,value:o,debounceMs:p,unstable_skipValueParser:!0},t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x,p,c,s,g,null==(o=a.experimentalFeatures)?void 0:o.newEditingApi]),R=x.current.unstable_getEditCellMeta?x.current.unstable_getEditCellMeta(s,c):{};return e.useEffect((function(){"debouncedSetEditCellValue"!==R.changeReason&&T(l)}),[R.changeReason,l]),(0,_.Z)((function(){d&&w.current.focus()}),[d]),(0,h.jsx)(Sr,(0,v.Z)({ref:n,inputRef:w,className:E.root,fullWidth:!0,type:"number"===u.type?u.type:"text",value:null!=M?M:"",onChange:P,endAdornment:m?(0,h.jsx)(er,{}):void 0},b))})),kr=F(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Mr=function(e,t){return t&&e.length>1?(kr(),[e[0]]):e},Tr=function(e,t){return function(n){return(0,v.Z)({},n,{sorting:(0,v.Z)({},n.sorting,{sortModel:Mr(e,t)})})}},Ar=function(e,t){var n=e.indexOf(t);return t&&-1!==n&&n+1!==e.length?e[n+1]:e[0]},Er=function(e,t){return null==e&&null!=t?-1:null==t&&null!=e?1:null==e&&null==t?0:null},Pr=new Intl.Collator,Rr=function(e,t){var n=Er(e,t);return null!==n?n:Number(e)-Number(t)},Or=function(e,t){var n=Er(e,t);return null!==n?n:e>t?1:e<t?-1:0},Ir=n(3362),Lr=n(782),Dr=n(2780),Nr=n(9265);function Fr(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreAccents,n=void 0===t||t,r=e.ignoreCase,i=void 0===r||r,o=e.limit,a=e.matchFrom,s=void 0===a?"any":a,l=e.stringify,c=e.trim,u=void 0!==c&&c;return function(e,t){var r=t.inputValue,a=t.getOptionLabel,c=u?r.trim():r;i&&(c=c.toLowerCase()),n&&(c=Fr(c));var d=c?e.filter((function(e){var t=(l||a)(e);return i&&(t=t.toLowerCase()),n&&(t=Fr(t)),"start"===s?0===t.indexOf(c):t.indexOf(c)>-1})):e;return"number"===typeof o?d.slice(0,o):d}}function Br(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}var jr=zr(),Zr=function(e){var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))};function Hr(t){var n,r=t.unstable_isActiveElementInListbox,o=void 0===r?Zr:r,a=t.unstable_classNamePrefix,s=void 0===a?"Mui":a,l=t.autoComplete,c=void 0!==l&&l,u=t.autoHighlight,d=void 0!==u&&u,f=t.autoSelect,p=void 0!==f&&f,h=t.blurOnSelect,m=void 0!==h&&h,g=t.clearOnBlur,y=void 0===g?!t.freeSolo:g,b=t.clearOnEscape,x=void 0!==b&&b,w=t.componentName,_=void 0===w?"useAutocomplete":w,S=t.defaultValue,C=void 0===S?t.multiple?[]:null:S,k=t.disableClearable,M=void 0!==k&&k,T=t.disableCloseOnSelect,A=void 0!==T&&T,E=t.disabled,P=t.disabledItemsFocusable,R=void 0!==P&&P,O=t.disableListWrap,I=void 0!==O&&O,L=t.filterOptions,D=void 0===L?jr:L,N=t.filterSelectedOptions,F=void 0!==N&&N,z=t.freeSolo,B=void 0!==z&&z,j=t.getOptionDisabled,Z=t.getOptionLabel,H=void 0===Z?function(e){var t;return null!=(t=e.label)?t:e}:Z,U=t.groupBy,V=t.handleHomeEndKeys,G=void 0===V?!t.freeSolo:V,W=t.id,$=t.includeInputInList,q=void 0!==$&&$,Y=t.inputValue,X=t.isOptionEqualToValue,K=void 0===X?function(e,t){return e===t}:X,J=t.multiple,Q=void 0!==J&&J,ee=t.onChange,te=t.onClose,ne=t.onHighlightChange,re=t.onInputChange,ie=t.onOpen,oe=t.open,ae=t.openOnFocus,se=void 0!==ae&&ae,le=t.options,ce=t.readOnly,ue=void 0!==ce&&ce,de=t.selectOnFocus,fe=void 0===de?!t.freeSolo:de,pe=t.value,he=(0,Ir.Z)(W);n=function(e){var t=H(e);return"string"!==typeof t?String(t):t};var me=e.useRef(!1),ge=e.useRef(!0),ve=e.useRef(null),ye=e.useRef(null),be=e.useState(null),xe=(0,i.Z)(be,2),we=xe[0],_e=xe[1],Se=e.useState(-1),Ce=(0,i.Z)(Se,2),ke=Ce[0],Me=Ce[1],Te=d?0:-1,Ae=e.useRef(Te),Ee=(0,Lr.Z)({controlled:pe,default:C,name:_}),Pe=(0,i.Z)(Ee,2),Re=Pe[0],Oe=Pe[1],Ie=(0,Lr.Z)({controlled:Y,default:"",name:_,state:"inputValue"}),Le=(0,i.Z)(Ie,2),De=Le[0],Ne=Le[1],Fe=e.useState(!1),ze=(0,i.Z)(Fe,2),Be=ze[0],je=ze[1],Ze=e.useCallback((function(e,t){if((Q?Re.length<t.length:null!==t)||y){var r;if(Q)r="";else if(null==t)r="";else{var i=n(t);r="string"===typeof i?i:""}De!==r&&(Ne(r),re&&re(e,r,"reset"))}}),[n,De,Q,re,Ne,y,Re]),He=e.useRef();e.useEffect((function(){var e=Re!==He.current;He.current=Re,Be&&!e||B&&!e||Ze(null,Re)}),[Re,Ze,Be,He,B]);var Ue=(0,Lr.Z)({controlled:oe,default:!1,name:_,state:"open"}),Ve=(0,i.Z)(Ue,2),Ge=Ve[0],We=Ve[1],$e=e.useState(!0),qe=(0,i.Z)($e,2),Ye=qe[0],Xe=qe[1],Ke=!Q&&null!=Re&&De===n(Re),Je=Ge&&!ue,Qe=Je?D(le.filter((function(e){return!F||!(Q?Re:[Re]).some((function(t){return null!==t&&K(e,t)}))})),{inputValue:Ke&&Ye?"":De,getOptionLabel:n}):[],et=Ge&&Qe.length>0&&!ue,tt=(0,Dr.Z)((function(e){-1===e?ve.current.focus():we.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));e.useEffect((function(){Q&&ke>Re.length-1&&(Me(-1),tt(-1))}),[Re,Q,ke,tt]);var nt=(0,Dr.Z)((function(e){var t=e.event,n=e.index,r=e.reason,i=void 0===r?"auto":r;if(Ae.current=n,-1===n?ve.current.removeAttribute("aria-activedescendant"):ve.current.setAttribute("aria-activedescendant","".concat(he,"-option-").concat(n)),ne&&ne(t,-1===n?null:Qe[n],i),ye.current){var o=ye.current.querySelector('[role="option"].'.concat(s,"-focused"));o&&(o.classList.remove("".concat(s,"-focused")),o.classList.remove("".concat(s,"-focusVisible")));var a=ye.current.parentElement.querySelector('[role="listbox"]');if(a)if(-1!==n){var l=ye.current.querySelector('[data-option-index="'.concat(n,'"]'));if(l&&(l.classList.add("".concat(s,"-focused")),"keyboard"===i&&l.classList.add("".concat(s,"-focusVisible")),a.scrollHeight>a.clientHeight&&"mouse"!==i)){var c=l,u=a.clientHeight+a.scrollTop,d=c.offsetTop+c.offsetHeight;d>u?a.scrollTop=d-a.clientHeight:c.offsetTop-c.offsetHeight*(U?1.3:0)<a.scrollTop&&(a.scrollTop=c.offsetTop-c.offsetHeight*(U?1.3:0))}}else a.scrollTop=0}})),rt=(0,Dr.Z)((function(e){var t=e.event,r=e.diff,i=e.direction,o=void 0===i?"next":i,a=e.reason,s=void 0===a?"auto":a;if(Je){var l=function(e,t){if(!ye.current||-1===e)return-1;for(var n=e;;){if("next"===t&&n===Qe.length||"previous"===t&&-1===n)return-1;var r=ye.current.querySelector('[data-option-index="'.concat(n,'"]')),i=!R&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(!(r&&!r.hasAttribute("tabindex")||i))return n;n+="next"===t?1:-1}}(function(){var e=Qe.length-1;if("reset"===r)return Te;if("start"===r)return 0;if("end"===r)return e;var t=Ae.current+r;return t<0?-1===t&&q?-1:I&&-1!==Ae.current||Math.abs(r)>1?0:e:t>e?t===e+1&&q?-1:I||Math.abs(r)>1?e:0:t}(),o);if(nt({index:l,reason:s,event:t}),c&&"reset"!==r)if(-1===l)ve.current.value=De;else{var u=n(Qe[l]);ve.current.value=u,0===u.toLowerCase().indexOf(De.toLowerCase())&&De.length>0&&ve.current.setSelectionRange(De.length,u.length)}}})),it=e.useCallback((function(){if(Je){var e=Q?Re[0]:Re;if(0!==Qe.length&&null!=e){if(ye.current)if(null==e)Ae.current>=Qe.length-1?nt({index:Qe.length-1}):nt({index:Ae.current});else{var t=Qe[Ae.current];if(Q&&t&&-1!==Br(Re,(function(e){return K(t,e)})))return;var n=Br(Qe,(function(t){return K(t,e)}));-1===n?rt({diff:"reset"}):nt({index:n})}}else rt({diff:"reset"})}}),[Qe.length,!Q&&Re,F,rt,nt,Je,De,Q]),ot=(0,Dr.Z)((function(e){(0,Nr.Z)(ye,e),e&&it()}));e.useEffect((function(){it()}),[it]);var at=function(e){Ge||(We(!0),Xe(!0),ie&&ie(e))},st=function(e,t){Ge&&(We(!1),te&&te(e,t))},lt=function(e,t,n,r){if(Q){if(Re.length===t.length&&Re.every((function(e,n){return e===t[n]})))return}else if(Re===t)return;ee&&ee(e,t,n,r),Oe(t)},ct=e.useRef(!1),ut=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",i=n,o=t;if(Q){var a=Br(o=Array.isArray(Re)?Re.slice():[],(function(e){return K(t,e)}));-1===a?o.push(t):"freeSolo"!==r&&(o.splice(a,1),i="removeOption")}Ze(e,o),lt(e,o,i,{option:t}),A||e&&(e.ctrlKey||e.metaKey)||st(e,i),(!0===m||"touch"===m&&ct.current||"mouse"===m&&!ct.current)&&ve.current.blur()};var dt=function(e,t){if(Q){""===De&&st(e,"toggleInput");var n=ke;-1===ke?""===De&&"previous"===t&&(n=Re.length-1):((n+="next"===t?1:-1)<0&&(n=0),n===Re.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;for(var n=e;;){if("next"===t&&n===Re.length||"previous"===t&&-1===n)return-1;var r=we.querySelector('[data-tag-index="'.concat(n,'"]'));if(r&&r.hasAttribute("tabindex")&&!r.disabled&&"true"!==r.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),Me(n),tt(n)}},ft=function(e){me.current=!0,Ne(""),re&&re(e,"","clear"),lt(e,Q?[]:null,"clear")},pt=function(e){return function(t){if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==ke&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(Me(-1),tt(-1)),229!==t.which))switch(t.key){case"Home":Je&&G&&(t.preventDefault(),rt({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":Je&&G&&(t.preventDefault(),rt({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),rt({diff:-5,direction:"previous",reason:"keyboard",event:t}),at(t);break;case"PageDown":t.preventDefault(),rt({diff:5,direction:"next",reason:"keyboard",event:t}),at(t);break;case"ArrowDown":t.preventDefault(),rt({diff:1,direction:"next",reason:"keyboard",event:t}),at(t);break;case"ArrowUp":t.preventDefault(),rt({diff:-1,direction:"previous",reason:"keyboard",event:t}),at(t);break;case"ArrowLeft":dt(t,"previous");break;case"ArrowRight":dt(t,"next");break;case"Enter":if(-1!==Ae.current&&Je){var n=Qe[Ae.current],r=!!j&&j(n);if(t.preventDefault(),r)return;ut(t,n,"selectOption"),c&&ve.current.setSelectionRange(ve.current.value.length,ve.current.value.length)}else B&&""!==De&&!1===Ke&&(Q&&t.preventDefault(),ut(t,De,"createOption","freeSolo"));break;case"Escape":Je?(t.preventDefault(),t.stopPropagation(),st(t,"escape")):x&&(""!==De||Q&&Re.length>0)&&(t.preventDefault(),t.stopPropagation(),ft(t));break;case"Backspace":if(Q&&!ue&&""===De&&Re.length>0){var i=-1===ke?Re.length-1:ke,o=Re.slice();o.splice(i,1),lt(t,o,"removeOption",{option:Re[i]})}break;case"Delete":if(Q&&!ue&&""===De&&Re.length>0&&-1!==ke){var a=ke,s=Re.slice();s.splice(a,1),lt(t,s,"removeOption",{option:Re[a]})}}}},ht=function(e){je(!0),se&&!me.current&&at(e)},mt=function(e){o(ye)?ve.current.focus():(je(!1),ge.current=!0,me.current=!1,p&&-1!==Ae.current&&Je?ut(e,Qe[Ae.current],"blur"):p&&B&&""!==De?ut(e,De,"blur","freeSolo"):y&&Ze(e,Re),st(e,"blur"))},gt=function(e){var t=e.target.value;De!==t&&(Ne(t),Xe(!1),re&&re(e,t,"input")),""===t?M||Q||lt(e,null,"clear"):at(e)},vt=function(e){nt({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},yt=function(){ct.current=!0},bt=function(e){var t=Number(e.currentTarget.getAttribute("data-option-index"));ut(e,Qe[t],"selectOption"),ct.current=!1},xt=function(e){return function(t){var n=Re.slice();n.splice(e,1),lt(t,n,"removeOption",{option:Re[e]})}},wt=function(e){Ge?st(e,"toggleInput"):at(e)},_t=function(e){e.target.getAttribute("id")!==he&&e.preventDefault()},St=function(){ve.current.focus(),fe&&ge.current&&ve.current.selectionEnd-ve.current.selectionStart===0&&ve.current.select(),ge.current=!1},Ct=function(e){""!==De&&Ge||wt(e)},kt=B&&De.length>0;kt=kt||(Q?Re.length>0:null!==Re);var Mt=Qe;if(U){new Map;Mt=Qe.reduce((function(e,t,n){var r=U(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return E&&Be&&mt(),{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.Z)({"aria-owns":et?"".concat(he,"-listbox"):null},e,{onKeyDown:pt(e),onMouseDown:_t,onClick:St})},getInputLabelProps:function(){return{id:"".concat(he,"-label"),htmlFor:he}},getInputProps:function(){return{id:he,value:De,onBlur:mt,onFocus:ht,onChange:gt,onMouseDown:Ct,"aria-activedescendant":Je?"":null,"aria-autocomplete":c?"both":"list","aria-controls":et?"".concat(he,"-listbox"):void 0,"aria-expanded":et,autoComplete:"off",ref:ve,autoCapitalize:"none",spellCheck:"false",role:"combobox"}},getClearProps:function(){return{tabIndex:-1,onClick:ft}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:wt}},getTagProps:function(e){var t=e.index;return(0,v.Z)({key:t,"data-tag-index":t,tabIndex:-1},!ue&&{onDelete:xt(t)})},getListboxProps:function(){return{role:"listbox",id:"".concat(he,"-listbox"),"aria-labelledby":"".concat(he,"-label"),ref:ot,onMouseDown:function(e){e.preventDefault()}}},getOptionProps:function(e){var t=e.index,r=e.option,i=(Q?Re:[Re]).some((function(e){return null!=e&&K(r,e)})),o=!!j&&j(r);return{key:n(r),tabIndex:-1,role:"option",id:"".concat(he,"-option-").concat(t),onMouseOver:vt,onClick:bt,onTouchStart:yt,"data-option-index":t,"aria-disabled":o,"aria-selected":i}},id:he,inputValue:De,value:Re,dirty:kt,popupOpen:Je,focused:Be||-1!==ke,anchorEl:we,setAnchorEl:_e,focusedTag:ke,groupedOptions:Mt}}var Ur=n(9081);function Vr(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Gr(e){return e instanceof Vr(e).Element||e instanceof Element}function Wr(e){return e instanceof Vr(e).HTMLElement||e instanceof HTMLElement}function $r(e){return"undefined"!==typeof ShadowRoot&&(e instanceof Vr(e).ShadowRoot||e instanceof ShadowRoot)}var qr=Math.max,Yr=Math.min,Xr=Math.round;function Kr(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Jr(){return!/^((?!chrome|android).)*safari/i.test(Kr())}function Qr(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&Wr(e)&&(i=e.offsetWidth>0&&Xr(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Xr(r.height)/e.offsetHeight||1);var a=(Gr(e)?Vr(e):window).visualViewport,s=!Jr()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,c=(r.top+(s&&a?a.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function ei(e){var t=Vr(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ti(e){return e?(e.nodeName||"").toLowerCase():null}function ni(e){return((Gr(e)?e.ownerDocument:e.document)||window.document).documentElement}function ri(e){return Qr(ni(e)).left+ei(e).scrollLeft}function ii(e){return Vr(e).getComputedStyle(e)}function oi(e){var t=ii(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ai(e,t,n){void 0===n&&(n=!1);var r=Wr(t),i=Wr(t)&&function(e){var t=e.getBoundingClientRect(),n=Xr(t.width)/e.offsetWidth||1,r=Xr(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=ni(t),a=Qr(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==ti(t)||oi(o))&&(s=function(e){return e!==Vr(e)&&Wr(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:ei(e);var t}(t)),Wr(t)?((l=Qr(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=ri(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function si(e){var t=Qr(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function li(e){return"html"===ti(e)?e:e.assignedSlot||e.parentNode||($r(e)?e.host:null)||ni(e)}function ci(e){return["html","body","#document"].indexOf(ti(e))>=0?e.ownerDocument.body:Wr(e)&&oi(e)?e:ci(li(e))}function ui(e,t){var n;void 0===t&&(t=[]);var r=ci(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=Vr(r),a=i?[o].concat(o.visualViewport||[],oi(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(ui(li(a)))}function di(e){return["table","td","th"].indexOf(ti(e))>=0}function fi(e){return Wr(e)&&"fixed"!==ii(e).position?e.offsetParent:null}function pi(e){for(var t=Vr(e),n=fi(e);n&&di(n)&&"static"===ii(n).position;)n=fi(n);return n&&("html"===ti(n)||"body"===ti(n)&&"static"===ii(n).position)?t:n||function(e){var t=/firefox/i.test(Kr());if(/Trident/i.test(Kr())&&Wr(e)&&"fixed"===ii(e).position)return null;var n=li(e);for($r(n)&&(n=n.host);Wr(n)&&["html","body"].indexOf(ti(n))<0;){var r=ii(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var hi="top",mi="bottom",gi="right",vi="left",yi="auto",bi=[hi,mi,gi,vi],xi="start",wi="end",_i="viewport",Si="popper",Ci=bi.reduce((function(e,t){return e.concat([t+"-"+xi,t+"-"+wi])}),[]),ki=[].concat(bi,[yi]).reduce((function(e,t){return e.concat([t,t+"-"+xi,t+"-"+wi])}),[]),Mi=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ti(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function Ai(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Ei={placement:"bottom",modifiers:[],strategy:"absolute"};function Pi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Ri(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?Ei:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ei,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:Gr(e)?ui(e):e.contextElement?ui(e.contextElement):[],popper:ui(t)};var u=function(e){var t=Ti(e);return Mi.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(Pi(t,n)){i.rects={reference:ai(t,pi(n),"fixed"===i.options.strategy),popper:si(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"===typeof a&&(i=a({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:Ai((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!Pi(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var Oi={passive:!0};var Ii={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=Vr(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,Oi)})),s&&l.addEventListener("resize",n.update,Oi),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Oi)})),s&&l.removeEventListener("resize",n.update,Oi)}},data:{}};function Li(e){return e.split("-")[0]}function Di(e){return e.split("-")[1]}function Ni(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Fi(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?Li(i):null,a=i?Di(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case hi:t={x:s,y:n.y-r.height};break;case mi:t={x:s,y:n.y+n.height};break;case gi:t={x:n.x+n.width,y:l};break;case vi:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?Ni(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case xi:t[c]=t[c]-(n[u]/2-r[u]/2);break;case wi:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var zi={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Fi({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Bi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ji(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,f=a.x,p=void 0===f?0:f,h=a.y,m=void 0===h?0:h,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),b=vi,x=hi,w=window;if(c){var _=pi(n),S="clientHeight",C="clientWidth";if(_===Vr(n)&&"static"!==ii(_=ni(n)).position&&"absolute"===s&&(S="scrollHeight",C="scrollWidth"),i===hi||(i===vi||i===gi)&&o===wi)x=mi,m-=(d&&_===w&&w.visualViewport?w.visualViewport.height:_[S])-r.height,m*=l?1:-1;if(i===vi||(i===hi||i===mi)&&o===wi)b=gi,p-=(d&&_===w&&w.visualViewport?w.visualViewport.width:_[C])-r.width,p*=l?1:-1}var k,M=Object.assign({position:s},c&&Bi),T=!0===u?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Xr(t*r)/r||0,y:Xr(n*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=T.x,m=T.y,l?Object.assign({},M,((k={})[x]=y?"0":"",k[b]=v?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",k)):Object.assign({},M,((t={})[x]=y?m+"px":"",t[b]=v?p+"px":"",t.transform="",t))}var Zi={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];Wr(i)&&ti(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Wr(r)&&ti(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var Hi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=ki.reduce((function(e,n){return e[n]=function(e,t,n){var r=Li(e),i=[vi,hi].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[vi,gi].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},Ui={left:"right",right:"left",bottom:"top",top:"bottom"};function Vi(e){return e.replace(/left|right|bottom|top/g,(function(e){return Ui[e]}))}var Gi={start:"end",end:"start"};function Wi(e){return e.replace(/start|end/g,(function(e){return Gi[e]}))}function $i(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&$r(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function qi(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Yi(e,t,n){return t===_i?qi(function(e,t){var n=Vr(e),r=ni(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var c=Jr();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+ri(e),y:l}}(e,n)):Gr(t)?function(e,t){var n=Qr(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):qi(function(e){var t,n=ni(e),r=ei(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=qr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=qr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+ri(e),l=-r.scrollTop;return"rtl"===ii(i||n).direction&&(s+=qr(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(ni(e)))}function Xi(e,t,n,r){var i="clippingParents"===t?function(e){var t=ui(li(e)),n=["absolute","fixed"].indexOf(ii(e).position)>=0&&Wr(e)?pi(e):e;return Gr(n)?t.filter((function(e){return Gr(e)&&$i(e,n)&&"body"!==ti(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(t,n){var i=Yi(e,n,r);return t.top=qr(i.top,t.top),t.right=Yr(i.right,t.right),t.bottom=Yr(i.bottom,t.bottom),t.left=qr(i.left,t.left),t}),Yi(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Ki(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Ji(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Qi(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?_i:c,d=n.elementContext,f=void 0===d?Si:d,p=n.altBoundary,h=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=Ki("number"!==typeof g?g:Ji(g,bi)),y=f===Si?"reference":Si,b=e.rects.popper,x=e.elements[h?y:f],w=Xi(Gr(x)?x:x.contextElement||ni(e.elements.popper),l,u,a),_=Qr(e.elements.reference),S=Fi({reference:_,element:b,strategy:"absolute",placement:i}),C=qi(Object.assign({},b,S)),k=f===Si?C:_,M={top:w.top-k.top+v.top,bottom:k.bottom-w.bottom+v.bottom,left:w.left-k.left+v.left,right:k.right-w.right+v.right},T=e.modifiersData.offset;if(f===Si&&T){var A=T[i];Object.keys(M).forEach((function(e){var t=[gi,mi].indexOf(e)>=0?1:-1,n=[hi,mi].indexOf(e)>=0?"y":"x";M[e]+=A[n]*t}))}return M}var eo={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,h=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=Li(g),y=l||(v===g||!h?[Vi(g)]:function(e){if(Li(e)===yi)return[];var t=Vi(e);return[Wi(e),t,Wi(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(Li(n)===yi?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?ki:l,u=Di(r),d=u?s?Ci:Ci.filter((function(e){return Di(e)===u})):bi,f=d.filter((function(e){return c.indexOf(e)>=0}));0===f.length&&(f=d);var p=f.reduce((function(t,n){return t[n]=Qi(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[Li(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,w=t.rects.popper,_=new Map,S=!0,C=b[0],k=0;k<b.length;k++){var M=b[k],T=Li(M),A=Di(M)===xi,E=[hi,mi].indexOf(T)>=0,P=E?"width":"height",R=Qi(t,{placement:M,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),O=E?A?gi:vi:A?mi:hi;x[P]>w[P]&&(O=Vi(O));var I=Vi(O),L=[];if(o&&L.push(R[T]<=0),s&&L.push(R[O]<=0,R[I]<=0),L.every((function(e){return e}))){C=M,S=!1;break}_.set(M,L)}if(S)for(var D=function(e){var t=b.find((function(t){var n=_.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},N=h?3:1;N>0;N--){if("break"===D(N))break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function to(e,t,n){return qr(e,Yr(t,n))}var no={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=void 0===f||f,h=n.tetherOffset,m=void 0===h?0:h,g=Qi(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=Li(t.placement),y=Di(t.placement),b=!y,x=Ni(v),w="x"===x?"y":"x",_=t.modifiersData.popperOffsets,S=t.rects.reference,C=t.rects.popper,k="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,M="number"===typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(_){if(o){var E,P="y"===x?hi:vi,R="y"===x?mi:gi,O="y"===x?"height":"width",I=_[x],L=I+g[P],D=I-g[R],N=p?-C[O]/2:0,F=y===xi?S[O]:C[O],z=y===xi?-C[O]:-S[O],B=t.elements.arrow,j=p&&B?si(B):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=Z[P],U=Z[R],V=to(0,S[O],j[O]),G=b?S[O]/2-N-V-H-M.mainAxis:F-V-H-M.mainAxis,W=b?-S[O]/2+N+V+U+M.mainAxis:z+V+U+M.mainAxis,$=t.elements.arrow&&pi(t.elements.arrow),q=$?"y"===x?$.clientTop||0:$.clientLeft||0:0,Y=null!=(E=null==T?void 0:T[x])?E:0,X=I+W-Y,K=to(p?Yr(L,I+G-Y-q):L,I,p?qr(D,X):D);_[x]=K,A[x]=K-I}if(s){var J,Q="x"===x?hi:vi,ee="x"===x?mi:gi,te=_[w],ne="y"===w?"height":"width",re=te+g[Q],ie=te-g[ee],oe=-1!==[hi,vi].indexOf(v),ae=null!=(J=null==T?void 0:T[w])?J:0,se=oe?re:te-S[ne]-C[ne]-ae+M.altAxis,le=oe?te+S[ne]+C[ne]-ae-M.altAxis:ie,ce=p&&oe?function(e,t,n){var r=to(e,t,n);return r>n?n:r}(se,te,le):to(p?se:re,te,p?le:ie);_[w]=ce,A[w]=ce-te}t.modifiersData[r]=A}},requiresIfExists:["offset"]};var ro={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Li(n.placement),l=Ni(s),c=[vi,gi].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(e,t){return Ki("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Ji(e,bi))}(i.padding,n),d=si(o),f="y"===l?hi:vi,p="y"===l?mi:gi,h=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=pi(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=h/2-m/2,b=u[f],x=v-d[c]-u[p],w=v/2-d[c]/2+y,_=to(b,w,x),S=l;n.modifiersData[r]=((t={})[S]=_,t.centerOffset=_-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&$i(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function io(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function oo(e){return[hi,gi,mi,vi].some((function(t){return e[t]>=0}))}var ao={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=Qi(t,{elementContext:"reference"}),s=Qi(t,{altBoundary:!0}),l=io(a,r),c=io(s,i,o),u=oo(l),d=oo(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}},so=Ri({defaultModifiers:[Ii,zi,{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:Li(t.placement),variation:Di(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ji(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ji(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Zi,Hi,eo,no,ro,ao]});var lo=e.forwardRef((function(t,n){var r=t.children,o=t.container,a=t.disablePortal,s=void 0!==a&&a,l=e.useState(null),c=(0,i.Z)(l,2),u=c[0],d=c[1],f=(0,sn.Z)(e.isValidElement(r)?r.ref:null,n);if((0,un.Z)((function(){s||d(function(e){return"function"===typeof e?e():e}(o)||document.body)}),[o,s]),(0,un.Z)((function(){if(u&&!s)return(0,Nr.Z)(n,u),function(){(0,Nr.Z)(n,null)}}),[n,u,s]),s){if(e.isValidElement(r)){var p={ref:f};return e.cloneElement(r,p)}return(0,h.jsx)(e.Fragment,{children:r})}return(0,h.jsx)(e.Fragment,{children:u?an.createPortal(r,u):u})}));function co(e){return(0,M.Z)("MuiPopperUnstyled",e)}(0,T.Z)("MuiPopperUnstyled",["root"]);function uo(e,t,n){return void 0===e||gn(e)?t:(0,v.Z)({},t,{ownerState:(0,v.Z)({},t.ownerState,n)})}function fo(e){if(void 0===e)return{};var t={};return Object.keys(e).filter((function(t){return!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])})).forEach((function(n){t[n]=e[n]})),t}function po(e){var t=e.getSlotProps,n=e.additionalProps,r=e.externalSlotProps,i=e.externalForwardedProps,o=e.className;if(!t){var a=(0,b.Z)(null==i?void 0:i.className,null==r?void 0:r.className,o,null==n?void 0:n.className),s=(0,v.Z)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),l=(0,v.Z)({},n,i,r);return a.length>0&&(l.className=a),Object.keys(s).length>0&&(l.style=s),{props:l,internalRef:void 0}}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var n={};return Object.keys(e).filter((function(n){return n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n)})).forEach((function(t){n[t]=e[t]})),n}((0,v.Z)({},i,r)),u=fo(r),d=fo(i),f=t(c),p=(0,b.Z)(null==f?void 0:f.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),h=(0,v.Z)({},null==f?void 0:f.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),m=(0,v.Z)({},f,n,d,u);return p.length>0&&(m.className=p),Object.keys(h).length>0&&(m.style=h),{props:m,internalRef:f.ref}}function ho(e,t){return"function"===typeof e?e(t):e}var mo=["elementType","externalSlotProps","ownerState"];function go(e){var t,n=e.elementType,r=e.externalSlotProps,i=e.ownerState,o=(0,y.Z)(e,mo),a=ho(r,i),s=po((0,v.Z)({},o,{externalSlotProps:a})),l=s.props,c=s.internalRef,u=(0,sn.Z)(c,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref);return uo(n,(0,v.Z)({},l,{ref:u}),i)}var vo=["anchorEl","children","component","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","slotProps","slots","TransitionProps"],yo=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function bo(e){return"function"===typeof e?e():e}function xo(e){return void 0!==e.nodeType}var wo={},_o=e.forwardRef((function(t,n){var r,o=t.anchorEl,a=t.children,s=t.component,l=t.direction,c=t.disablePortal,u=t.modifiers,d=t.open,f=t.ownerState,p=t.placement,m=t.popperOptions,g=t.popperRef,b=t.slotProps,x=void 0===b?{}:b,w=t.slots,_=void 0===w?{}:w,C=t.TransitionProps,k=(0,y.Z)(t,vo),M=e.useRef(null),T=(0,sn.Z)(M,n),A=e.useRef(null),E=(0,sn.Z)(A,g),P=e.useRef(E);(0,un.Z)((function(){P.current=E}),[E]),e.useImperativeHandle(g,(function(){return A.current}),[]);var R=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(p,l),O=e.useState(R),I=(0,i.Z)(O,2),L=I[0],D=I[1],N=e.useState(bo(o)),F=(0,i.Z)(N,2),z=F[0],B=F[1];e.useEffect((function(){A.current&&A.current.forceUpdate()})),e.useEffect((function(){o&&B(bo(o))}),[o]),(0,un.Z)((function(){if(z&&d){var e=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:function(e){var t=e.state;D(t.placement)}}];null!=u&&(e=e.concat(u)),m&&null!=m.modifiers&&(e=e.concat(m.modifiers));var t=so(z,M.current,(0,v.Z)({placement:R},m,{modifiers:e}));return P.current(t),function(){t.destroy(),P.current(null)}}}),[z,c,u,d,m,R]);var j={placement:L};null!==C&&(j.TransitionProps=C);var Z=(0,S.Z)({root:["root"]},co,{}),H=null!=(r=null!=s?s:_.root)?r:"div",U=go({elementType:H,externalSlotProps:x.root,externalForwardedProps:k,additionalProps:{role:"tooltip",ref:T},ownerState:(0,v.Z)({},t,f),className:Z.root});return(0,h.jsx)(H,(0,v.Z)({},U,{children:"function"===typeof a?a(j):a}))})),So=e.forwardRef((function(t,n){var r,o=t.anchorEl,a=t.children,s=t.container,l=t.direction,c=void 0===l?"ltr":l,u=t.disablePortal,d=void 0!==u&&u,f=t.keepMounted,p=void 0!==f&&f,m=t.modifiers,g=t.open,b=t.placement,x=void 0===b?"bottom":b,w=t.popperOptions,_=void 0===w?wo:w,S=t.popperRef,C=t.style,k=t.transition,M=void 0!==k&&k,T=t.slotProps,A=void 0===T?{}:T,E=t.slots,P=void 0===E?{}:E,R=(0,y.Z)(t,yo),O=e.useState(!0),I=(0,i.Z)(O,2),L=I[0],D=I[1];if(!p&&!g&&(!M||L))return null;if(s)r=s;else if(o){var N=bo(o);r=N&&xo(N)?(0,Ur.Z)(N).body:(0,Ur.Z)(null).body}var F=g||!p||M&&!L?void 0:"none",z=M?{in:g,onEnter:function(){D(!1)},onExited:function(){D(!0)}}:void 0;return(0,h.jsx)(lo,{disablePortal:d,container:r,children:(0,h.jsx)(_o,(0,v.Z)({anchorEl:o,direction:c,disablePortal:d,modifiers:m,ref:n,open:M?!L:g,placement:x,popperOptions:_,popperRef:S,slotProps:A,slots:P},R,{style:(0,v.Z)({position:"fixed",top:0,left:0,display:F},C),TransitionProps:z,children:a}))})})),Co=n(4976),ko=["components","componentsProps","slots","slotProps"],Mo=(0,C.ZP)(So,{name:"MuiPopper",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),To=e.forwardRef((function(e,t){var n,r=(0,Co.Z)(),i=(0,xn.Z)({props:e,name:"MuiPopper"}),o=i.components,a=i.componentsProps,s=i.slots,l=i.slotProps,c=(0,y.Z)(i,ko),u=null!=(n=null==s?void 0:s.root)?n:null==o?void 0:o.Root;return(0,h.jsx)(Mo,(0,v.Z)({direction:null==r?void 0:r.direction,slots:{root:u},slotProps:null!=l?l:a},c,{ref:t}))})),Ao=To;function Eo(e){return(0,M.Z)("MuiListSubheader",e)}(0,T.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var Po=["className","color","component","disableGutters","disableSticky","inset"],Ro=(0,C.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,x.Z)(n.color))],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:(t.vars||t).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),Oo=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiListSubheader"}),r=n.className,i=n.color,o=void 0===i?"default":i,a=n.component,s=void 0===a?"li":a,l=n.disableGutters,c=void 0!==l&&l,u=n.disableSticky,d=void 0!==u&&u,f=n.inset,p=void 0!==f&&f,m=(0,y.Z)(n,Po),g=(0,v.Z)({},n,{color:o,component:s,disableGutters:c,disableSticky:d,inset:p}),w=function(e){var t=e.classes,n=e.color,r=e.disableGutters,i=e.inset,o=e.disableSticky,a={root:["root","default"!==n&&"color".concat((0,x.Z)(n)),!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,S.Z)(a,Eo,t)}(g);return(0,h.jsx)(Ro,(0,v.Z)({as:s,className:(0,b.Z)(w.root,r),ref:t,ownerState:g},m))})),Io=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)};function Lo(e){return(0,M.Z)("MuiPaper",e)}(0,T.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var Do=["className","component","elevation","square","variant"],No=(0,C.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,v.Z)({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&(0,v.Z)({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,k.Fq)("#fff",Io(r.elevation)),", ").concat((0,k.Fq)("#fff",Io(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),Fo=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiPaper"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=n.elevation,s=void 0===a?1:a,l=n.square,c=void 0!==l&&l,u=n.variant,d=void 0===u?"elevation":u,f=(0,y.Z)(n,Do),p=(0,v.Z)({},n,{component:o,elevation:s,square:c,variant:d}),m=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,S.Z)(o,Lo,i)}(p);return(0,h.jsx)(No,(0,v.Z)({as:o,ownerState:p,className:(0,b.Z)(m.root,r),ref:t},f))}));function zo(e){return(0,M.Z)("MuiIconButton",e)}var Bo=(0,T.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),jo=["edge","children","className","color","disabled","disableFocusRipple","size"],Zo=(0,C.ZP)(sr.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,x.Z)(n.color))],n.edge&&t["edge".concat((0,x.Z)(n.edge))],t["size".concat((0,x.Z)(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,k.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t,n=e.theme,r=e.ownerState,i=null==(t=(n.vars||n).palette)?void 0:t[r.color];return(0,v.Z)({},"inherit"===r.color&&{color:"inherit"},"inherit"!==r.color&&"default"!==r.color&&(0,v.Z)({color:null==i?void 0:i.main},!r.disableRipple&&{"&:hover":(0,v.Z)({},i&&{backgroundColor:n.vars?"rgba(".concat(i.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,k.Fq)(i.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===r.size&&{padding:5,fontSize:n.typography.pxToRem(18)},"large"===r.size&&{padding:12,fontSize:n.typography.pxToRem(28)},(0,o.Z)({},"&.".concat(Bo.disabled),{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}))})),Ho=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,o=n.children,a=n.className,s=n.color,l=void 0===s?"default":s,c=n.disabled,u=void 0!==c&&c,d=n.disableFocusRipple,f=void 0!==d&&d,p=n.size,m=void 0===p?"medium":p,g=(0,y.Z)(n,jo),w=(0,v.Z)({},n,{edge:i,color:l,disabled:u,disableFocusRipple:f,size:m}),_=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,o=e.size,a={root:["root",n&&"disabled","default"!==r&&"color".concat((0,x.Z)(r)),i&&"edge".concat((0,x.Z)(i)),"size".concat((0,x.Z)(o))]};return(0,S.Z)(a,zo,t)}(w);return(0,h.jsx)(Zo,(0,v.Z)({className:(0,b.Z)(_.root,a),centerRipple:!0,focusRipple:!f,disabled:u,ref:t,ownerState:w},g,{children:o}))})),Uo=(0,Fn.Z)((0,h.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Vo(e){return(0,M.Z)("MuiChip",e)}var Go=(0,T.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Wo=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],$o=(0,C.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.color,i=n.iconColor,a=n.clickable,s=n.onDelete,l=n.size,c=n.variant;return[(0,o.Z)({},"& .".concat(Go.avatar),t.avatar),(0,o.Z)({},"& .".concat(Go.avatar),t["avatar".concat((0,x.Z)(l))]),(0,o.Z)({},"& .".concat(Go.avatar),t["avatarColor".concat((0,x.Z)(r))]),(0,o.Z)({},"& .".concat(Go.icon),t.icon),(0,o.Z)({},"& .".concat(Go.icon),t["icon".concat((0,x.Z)(l))]),(0,o.Z)({},"& .".concat(Go.icon),t["iconColor".concat((0,x.Z)(i))]),(0,o.Z)({},"& .".concat(Go.deleteIcon),t.deleteIcon),(0,o.Z)({},"& .".concat(Go.deleteIcon),t["deleteIcon".concat((0,x.Z)(l))]),(0,o.Z)({},"& .".concat(Go.deleteIcon),t["deleteIconColor".concat((0,x.Z)(r))]),(0,o.Z)({},"& .".concat(Go.deleteIcon),t["deleteIcon".concat((0,x.Z)(c),"Color").concat((0,x.Z)(r))]),t.root,t["size".concat((0,x.Z)(l))],t["color".concat((0,x.Z)(r))],a&&t.clickable,a&&"default"!==r&&t["clickableColor".concat((0,x.Z)(r),")")],s&&t.deletable,s&&"default"!==r&&t["deletableColor".concat((0,x.Z)(r))],t[c],t["".concat(c).concat((0,x.Z)(r))]]}})((function(e){var t,n=e.theme,r=e.ownerState,i=(0,k.Fq)(n.palette.text.primary,.26),a="light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300];return(0,v.Z)((t={maxWidth:"100%",fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(n.vars||n).palette.text.primary,backgroundColor:(n.vars||n).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},(0,o.Z)(t,"&.".concat(Go.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"}),(0,o.Z)(t,"& .".concat(Go.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:n.vars?n.vars.palette.Chip.defaultAvatarColor:a,fontSize:n.typography.pxToRem(12)}),(0,o.Z)(t,"& .".concat(Go.avatarColorPrimary),{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.dark}),(0,o.Z)(t,"& .".concat(Go.avatarColorSecondary),{color:(n.vars||n).palette.secondary.contrastText,backgroundColor:(n.vars||n).palette.secondary.dark}),(0,o.Z)(t,"& .".concat(Go.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)}),(0,o.Z)(t,"& .".concat(Go.icon),(0,v.Z)({marginLeft:5,marginRight:-6},"small"===r.size&&{fontSize:18,marginLeft:4,marginRight:-4},r.iconColor===r.color&&(0,v.Z)({color:n.vars?n.vars.palette.Chip.defaultIconColor:a},"default"!==r.color&&{color:"inherit"}))),(0,o.Z)(t,"& .".concat(Go.deleteIcon),(0,v.Z)({WebkitTapHighlightColor:"transparent",color:n.vars?"rgba(".concat(n.vars.palette.text.primaryChannel," / 0.26)"):i,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:n.vars?"rgba(".concat(n.vars.palette.text.primaryChannel," / 0.4)"):(0,k.Fq)(i,.4)}},"small"===r.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==r.color&&{color:n.vars?"rgba(".concat(n.vars.palette[r.color].contrastTextChannel," / 0.7)"):(0,k.Fq)(n.palette[r.color].contrastText,.7),"&:hover, &:active":{color:(n.vars||n).palette[r.color].contrastText}})),t),"small"===r.size&&{height:24},"default"!==r.color&&{backgroundColor:(n.vars||n).palette[r.color].main,color:(n.vars||n).palette[r.color].contrastText},r.onDelete&&(0,o.Z)({},"&.".concat(Go.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,k.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),r.onDelete&&"default"!==r.color&&(0,o.Z)({},"&.".concat(Go.focusVisible),{backgroundColor:(n.vars||n).palette[r.color].dark}))}),(function(e){var t,n=e.theme,r=e.ownerState;return(0,v.Z)({},r.clickable&&(t={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,k.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)}},(0,o.Z)(t,"&.".concat(Go.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,k.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),(0,o.Z)(t,"&:active",{boxShadow:(n.vars||n).shadows[1]}),t),r.clickable&&"default"!==r.color&&(0,o.Z)({},"&:hover, &.".concat(Go.focusVisible),{backgroundColor:(n.vars||n).palette[r.color].dark}))}),(function(e){var t,n,r=e.theme,i=e.ownerState;return(0,v.Z)({},"outlined"===i.variant&&(t={backgroundColor:"transparent",border:r.vars?"1px solid ".concat(r.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===r.palette.mode?r.palette.grey[400]:r.palette.grey[700])},(0,o.Z)(t,"&.".concat(Go.clickable,":hover"),{backgroundColor:(r.vars||r).palette.action.hover}),(0,o.Z)(t,"&.".concat(Go.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),(0,o.Z)(t,"& .".concat(Go.avatar),{marginLeft:4}),(0,o.Z)(t,"& .".concat(Go.avatarSmall),{marginLeft:2}),(0,o.Z)(t,"& .".concat(Go.icon),{marginLeft:4}),(0,o.Z)(t,"& .".concat(Go.iconSmall),{marginLeft:2}),(0,o.Z)(t,"& .".concat(Go.deleteIcon),{marginRight:5}),(0,o.Z)(t,"& .".concat(Go.deleteIconSmall),{marginRight:3}),t),"outlined"===i.variant&&"default"!==i.color&&(n={color:(r.vars||r).palette[i.color].main,border:"1px solid ".concat(r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / 0.7)"):(0,k.Fq)(r.palette[i.color].main,.7))},(0,o.Z)(n,"&.".concat(Go.clickable,":hover"),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,k.Fq)(r.palette[i.color].main,r.palette.action.hoverOpacity)}),(0,o.Z)(n,"&.".concat(Go.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / ").concat(r.vars.palette.action.focusOpacity,")"):(0,k.Fq)(r.palette[i.color].main,r.palette.action.focusOpacity)}),(0,o.Z)(n,"& .".concat(Go.deleteIcon),{color:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / 0.7)"):(0,k.Fq)(r.palette[i.color].main,.7),"&:hover, &:active":{color:(r.vars||r).palette[i.color].main}}),n))})),qo=(0,C.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:function(e,t){var n=e.ownerState.size;return[t.label,t["label".concat((0,x.Z)(n))]]}})((function(e){var t=e.ownerState;return(0,v.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===t.size&&{paddingLeft:8,paddingRight:8})}));function Yo(e){return"Backspace"===e.key||"Delete"===e.key}var Xo=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiChip"}),i=r.avatar,o=r.className,a=r.clickable,s=r.color,l=void 0===s?"default":s,c=r.component,u=r.deleteIcon,d=r.disabled,f=void 0!==d&&d,p=r.icon,m=r.label,g=r.onClick,_=r.onDelete,C=r.onKeyDown,k=r.onKeyUp,M=r.size,T=void 0===M?"medium":M,A=r.variant,E=void 0===A?"filled":A,P=r.tabIndex,R=r.skipFocusWhenDisabled,O=void 0!==R&&R,I=(0,y.Z)(r,Wo),L=e.useRef(null),D=(0,w.Z)(L,n),N=function(e){e.stopPropagation(),_&&_(e)},F=!(!1===a||!g)||a,z=F||_?sr.Z:c||"div",B=(0,v.Z)({},r,{component:z,disabled:f,size:T,color:l,iconColor:e.isValidElement(p)&&p.props.color||l,onDelete:!!_,clickable:F,variant:E}),j=function(e){var t=e.classes,n=e.disabled,r=e.size,i=e.color,o=e.iconColor,a=e.onDelete,s=e.clickable,l=e.variant,c={root:["root",l,n&&"disabled","size".concat((0,x.Z)(r)),"color".concat((0,x.Z)(i)),s&&"clickable",s&&"clickableColor".concat((0,x.Z)(i)),a&&"deletable",a&&"deletableColor".concat((0,x.Z)(i)),"".concat(l).concat((0,x.Z)(i))],label:["label","label".concat((0,x.Z)(r))],avatar:["avatar","avatar".concat((0,x.Z)(r)),"avatarColor".concat((0,x.Z)(i))],icon:["icon","icon".concat((0,x.Z)(r)),"iconColor".concat((0,x.Z)(o))],deleteIcon:["deleteIcon","deleteIcon".concat((0,x.Z)(r)),"deleteIconColor".concat((0,x.Z)(i)),"deleteIcon".concat((0,x.Z)(l),"Color").concat((0,x.Z)(i))]};return(0,S.Z)(c,Vo,t)}(B),Z=z===sr.Z?(0,v.Z)({component:c||"div",focusVisibleClassName:j.focusVisible},_&&{disableRipple:!0}):{},H=null;_&&(H=u&&e.isValidElement(u)?e.cloneElement(u,{className:(0,b.Z)(u.props.className,j.deleteIcon),onClick:N}):(0,h.jsx)(Uo,{className:(0,b.Z)(j.deleteIcon),onClick:N}));var U=null;i&&e.isValidElement(i)&&(U=e.cloneElement(i,{className:(0,b.Z)(j.avatar,i.props.className)}));var V=null;return p&&e.isValidElement(p)&&(V=e.cloneElement(p,{className:(0,b.Z)(j.icon,p.props.className)})),(0,h.jsxs)($o,(0,v.Z)({as:z,className:(0,b.Z)(j.root,o),disabled:!(!F||!f)||void 0,onClick:g,onKeyDown:function(e){e.currentTarget===e.target&&Yo(e)&&e.preventDefault(),C&&C(e)},onKeyUp:function(e){e.currentTarget===e.target&&(_&&Yo(e)?_(e):"Escape"===e.key&&L.current&&L.current.blur()),k&&k(e)},ref:D,tabIndex:O&&f?-1:P,ownerState:B},Z,I,{children:[U||V,(0,h.jsx)(qo,{className:(0,b.Z)(j.label),ownerState:B,children:m}),H]}))}));function Ko(e){return(0,M.Z)("MuiInput",e)}var Jo=(0,v.Z)({},An,(0,T.Z)("MuiInput",["root","underline","input"]));function Qo(e){return(0,M.Z)("MuiOutlinedInput",e)}var ea=(0,v.Z)({},An,(0,T.Z)("MuiOutlinedInput",["root","notchedOutline","input"]));function ta(e){return(0,M.Z)("MuiFilledInput",e)}var na=(0,v.Z)({},An,(0,T.Z)("MuiFilledInput",["root","underline","input"])),ra=(0,Fn.Z)((0,h.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),ia=(0,Fn.Z)((0,h.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function oa(e){return(0,M.Z)("MuiAutocomplete",e)}var aa,sa,la=(0,T.Z)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),ca=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],ua=(0,C.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.fullWidth,i=n.hasClearIcon,a=n.hasPopupIcon,s=n.inputFocused,l=n.size;return[(0,o.Z)({},"& .".concat(la.tag),t.tag),(0,o.Z)({},"& .".concat(la.tag),t["tagSize".concat((0,x.Z)(l))]),(0,o.Z)({},"& .".concat(la.inputRoot),t.inputRoot),(0,o.Z)({},"& .".concat(la.input),t.input),(0,o.Z)({},"& .".concat(la.input),s&&t.inputFocused),t.root,r&&t.fullWidth,a&&t.hasPopupIcon,i&&t.hasClearIcon]}})((function(e){var t,n,r,i,a,s=e.ownerState;return(0,v.Z)((t={},(0,o.Z)(t,"&.".concat(la.focused," .").concat(la.clearIndicator),{visibility:"visible"}),(0,o.Z)(t,"@media (pointer: fine)",(0,o.Z)({},"&:hover .".concat(la.clearIndicator),{visibility:"visible"})),t),s.fullWidth&&{width:"100%"},(a={},(0,o.Z)(a,"& .".concat(la.tag),(0,v.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===s.size&&{margin:2,maxWidth:"calc(100% - 4px)"})),(0,o.Z)(a,"& .".concat(la.inputRoot),(n={flexWrap:"wrap"},(0,o.Z)(n,".".concat(la.hasPopupIcon,"&, .").concat(la.hasClearIcon,"&"),{paddingRight:30}),(0,o.Z)(n,".".concat(la.hasPopupIcon,".").concat(la.hasClearIcon,"&"),{paddingRight:56}),(0,o.Z)(n,"& .".concat(la.input),{width:0,minWidth:30}),n)),(0,o.Z)(a,"& .".concat(Jo.root),{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}}),(0,o.Z)(a,"& .".concat(Jo.root,".").concat(An.sizeSmall),(0,o.Z)({},"& .".concat(Jo.input),{padding:"2px 4px 3px 0"})),(0,o.Z)(a,"& .".concat(ea.root),(r={padding:9},(0,o.Z)(r,".".concat(la.hasPopupIcon,"&, .").concat(la.hasClearIcon,"&"),{paddingRight:39}),(0,o.Z)(r,".".concat(la.hasPopupIcon,".").concat(la.hasClearIcon,"&"),{paddingRight:65}),(0,o.Z)(r,"& .".concat(la.input),{padding:"7.5px 4px 7.5px 6px"}),(0,o.Z)(r,"& .".concat(la.endAdornment),{right:9}),r)),(0,o.Z)(a,"& .".concat(ea.root,".").concat(An.sizeSmall),(0,o.Z)({paddingTop:6,paddingBottom:6,paddingLeft:6},"& .".concat(la.input),{padding:"2.5px 4px 2.5px 6px"})),(0,o.Z)(a,"& .".concat(na.root),(i={paddingTop:19,paddingLeft:8},(0,o.Z)(i,".".concat(la.hasPopupIcon,"&, .").concat(la.hasClearIcon,"&"),{paddingRight:39}),(0,o.Z)(i,".".concat(la.hasPopupIcon,".").concat(la.hasClearIcon,"&"),{paddingRight:65}),(0,o.Z)(i,"& .".concat(na.input),{padding:"7px 4px"}),(0,o.Z)(i,"& .".concat(la.endAdornment),{right:9}),i)),(0,o.Z)(a,"& .".concat(na.root,".").concat(An.sizeSmall),(0,o.Z)({paddingBottom:1},"& .".concat(na.input),{padding:"2.5px 4px"})),(0,o.Z)(a,"& .".concat(An.hiddenLabel),{paddingTop:8}),(0,o.Z)(a,"& .".concat(la.input),(0,v.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},s.inputFocused&&{opacity:1})),a))})),da=(0,C.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:function(e,t){return t.endAdornment}})({position:"absolute",right:0,top:"calc(50% - 14px)"}),fa=(0,C.ZP)(Ho,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:function(e,t){return t.clearIndicator}})({marginRight:-2,padding:4,visibility:"hidden"}),pa=(0,C.ZP)(Ho,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:function(e,t){var n=e.ownerState;return(0,v.Z)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})((function(e){var t=e.ownerState;return(0,v.Z)({padding:2,marginRight:-2},t.popupOpen&&{transform:"rotate(180deg)"})})),ha=(0,C.ZP)(Ao,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[(0,o.Z)({},"& .".concat(la.option),t.option),t.popper,n.disablePortal&&t.popperDisablePortal]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({zIndex:(t.vars||t).zIndex.modal},n.disablePortal&&{position:"absolute"})})),ma=(0,C.ZP)(Fo,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){var t=e.theme;return(0,v.Z)({},t.typography.body1,{overflow:"auto"})})),ga=(0,C.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:function(e,t){return t.loading}})((function(e){var t=e.theme;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),va=(0,C.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:function(e,t){return t.noOptions}})((function(e){var t=e.theme;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),ya=(0,C.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:function(e,t){return t.listbox}})((function(e){var t,n,r=e.theme;return(0,o.Z)({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative"},"& .".concat(la.option),(n={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},(0,o.Z)(n,r.breakpoints.up("sm"),{minHeight:"auto"}),(0,o.Z)(n,"&.".concat(la.focused),{backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}),(0,o.Z)(n,'&[aria-disabled="true"]',{opacity:(r.vars||r).palette.action.disabledOpacity,pointerEvents:"none"}),(0,o.Z)(n,"&.".concat(la.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),(0,o.Z)(n,'&[aria-selected="true"]',(t={backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,k.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},(0,o.Z)(t,"&.".concat(la.focused),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,k.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(r.vars||r).palette.action.selected}}),(0,o.Z)(t,"&.".concat(la.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.focusOpacity,"))"):(0,k.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}),t)),n))})),ba=(0,C.ZP)(Oo,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:function(e,t){return t.groupLabel}})((function(e){var t=e.theme;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}})),xa=(0,C.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:function(e,t){return t.groupUl}})((0,o.Z)({padding:0},"& .".concat(la.option),{paddingLeft:24})),wa=e.forwardRef((function(t,n){var r,i,o,a,s,l=(0,xn.Z)({props:t,name:"MuiAutocomplete"}),c=(l.autoComplete,l.autoHighlight,l.autoSelect,l.blurOnSelect,l.ChipProps),u=l.className,d=l.clearIcon,f=void 0===d?aa||(aa=(0,h.jsx)(ra,{fontSize:"small"})):d,p=l.clearOnBlur,m=(void 0===p&&l.freeSolo,l.clearOnEscape,l.clearText),g=void 0===m?"Clear":m,w=l.closeText,_=void 0===w?"Close":w,C=l.componentsProps,k=void 0===C?{}:C,M=l.defaultValue,T=(void 0===M&&l.multiple,l.disableClearable),A=void 0!==T&&T,E=(l.disableCloseOnSelect,l.disabled),P=void 0!==E&&E,R=(l.disabledItemsFocusable,l.disableListWrap,l.disablePortal),O=void 0!==R&&R,I=(l.filterSelectedOptions,l.forcePopupIcon),L=void 0===I?"auto":I,D=l.freeSolo,N=void 0!==D&&D,F=l.fullWidth,z=void 0!==F&&F,B=l.getLimitTagsText,j=void 0===B?function(e){return"+".concat(e)}:B,Z=l.getOptionLabel,H=void 0===Z?function(e){var t;return null!=(t=e.label)?t:e}:Z,U=l.groupBy,V=l.handleHomeEndKeys,G=(void 0===V&&l.freeSolo,l.includeInputInList,l.limitTags),W=void 0===G?-1:G,$=l.ListboxComponent,q=void 0===$?"ul":$,Y=l.ListboxProps,X=l.loading,K=void 0!==X&&X,J=l.loadingText,Q=void 0===J?"Loading\u2026":J,ee=l.multiple,te=void 0!==ee&&ee,ne=l.noOptionsText,re=void 0===ne?"No options":ne,ie=(l.openOnFocus,l.openText),oe=void 0===ie?"Open":ie,ae=l.PaperComponent,se=void 0===ae?Fo:ae,le=l.PopperComponent,ce=void 0===le?Ao:le,ue=l.popupIcon,de=void 0===ue?sa||(sa=(0,h.jsx)(ia,{})):ue,fe=l.readOnly,pe=void 0!==fe&&fe,he=l.renderGroup,me=l.renderInput,ge=l.renderOption,ve=l.renderTags,ye=l.selectOnFocus,be=(void 0===ye&&l.freeSolo,l.size),xe=void 0===be?"medium":be,we=l.slotProps,_e=void 0===we?{}:we,Se=(0,y.Z)(l,ca),Ce=Hr((0,v.Z)({},l,{componentName:"Autocomplete"})),ke=Ce.getRootProps,Me=Ce.getInputProps,Te=Ce.getInputLabelProps,Ae=Ce.getPopupIndicatorProps,Ee=Ce.getClearProps,Pe=Ce.getTagProps,Re=Ce.getListboxProps,Oe=Ce.getOptionProps,Ie=Ce.value,Le=Ce.dirty,De=Ce.id,Ne=Ce.popupOpen,Fe=Ce.focused,ze=Ce.focusedTag,Be=Ce.anchorEl,je=Ce.setAnchorEl,Ze=Ce.inputValue,He=Ce.groupedOptions,Ue=!A&&!P&&Le&&!pe,Ve=(!N||!0===L)&&!1!==L,Ge=(0,v.Z)({},l,{disablePortal:O,focused:Fe,fullWidth:z,hasClearIcon:Ue,hasPopupIcon:Ve,inputFocused:-1===ze,popupOpen:Ne,size:xe}),We=function(e){var t=e.classes,n=e.disablePortal,r=e.focused,i=e.fullWidth,o=e.hasClearIcon,a=e.hasPopupIcon,s=e.inputFocused,l=e.popupOpen,c=e.size,u={root:["root",r&&"focused",i&&"fullWidth",o&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",s&&"inputFocused"],tag:["tag","tagSize".concat((0,x.Z)(c))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",l&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,S.Z)(u,oa,t)}(Ge);if(te&&Ie.length>0){var $e=function(e){return(0,v.Z)({className:We.tag,disabled:P},Pe(e))};s=ve?ve(Ie,$e,Ge):Ie.map((function(e,t){return(0,h.jsx)(Xo,(0,v.Z)({label:H(e),size:xe},$e({index:t}),c))}))}if(W>-1&&Array.isArray(s)){var qe=s.length-W;!Fe&&qe>0&&(s=s.splice(0,W)).push((0,h.jsx)("span",{className:We.tag,children:j(qe)},s.length))}var Ye=he||function(e){return(0,h.jsxs)("li",{children:[(0,h.jsx)(ba,{className:We.groupLabel,ownerState:Ge,component:"div",children:e.group}),(0,h.jsx)(xa,{className:We.groupUl,ownerState:Ge,children:e.children})]},e.key)},Xe=ge||function(e,t){return(0,h.jsx)("li",(0,v.Z)({},e,{children:H(t)}))},Ke=function(e,t){var n=Oe({option:e,index:t});return Xe((0,v.Z)({},n,{className:We.option}),e,{selected:n["aria-selected"],index:t,inputValue:Ze})},Je=null!=(r=_e.clearIndicator)?r:k.clearIndicator,Qe=null!=(i=_e.paper)?i:k.paper,et=null!=(o=_e.popper)?o:k.popper,tt=null!=(a=_e.popupIndicator)?a:k.popupIndicator;return(0,h.jsxs)(e.Fragment,{children:[(0,h.jsx)(ua,(0,v.Z)({ref:n,className:(0,b.Z)(We.root,u),ownerState:Ge},ke(Se),{children:me({id:De,disabled:P,fullWidth:!0,size:"small"===xe?"small":void 0,InputLabelProps:Te(),InputProps:(0,v.Z)({ref:je,className:We.inputRoot,startAdornment:s},(Ue||Ve)&&{endAdornment:(0,h.jsxs)(da,{className:We.endAdornment,ownerState:Ge,children:[Ue?(0,h.jsx)(fa,(0,v.Z)({},Ee(),{"aria-label":g,title:g,ownerState:Ge},Je,{className:(0,b.Z)(We.clearIndicator,null==Je?void 0:Je.className),children:f})):null,Ve?(0,h.jsx)(pa,(0,v.Z)({},Ae(),{disabled:P,"aria-label":Ne?_:oe,title:Ne?_:oe,ownerState:Ge},tt,{className:(0,b.Z)(We.popupIndicator,null==tt?void 0:tt.className),children:de})):null]})}),inputProps:(0,v.Z)({className:We.input,disabled:P,readOnly:pe},Me())})})),Be?(0,h.jsx)(ha,(0,v.Z)({as:ce,disablePortal:O,style:{width:Be?Be.clientWidth:null},ownerState:Ge,role:"presentation",anchorEl:Be,open:Ne},et,{className:(0,b.Z)(We.popper,null==et?void 0:et.className),children:(0,h.jsxs)(ma,(0,v.Z)({ownerState:Ge,as:se},Qe,{className:(0,b.Z)(We.paper,null==Qe?void 0:Qe.className),children:[K&&0===He.length?(0,h.jsx)(ga,{className:We.loading,ownerState:Ge,children:Q}):null,0!==He.length||N||K?null:(0,h.jsx)(va,{className:We.noOptions,ownerState:Ge,role:"presentation",onMouseDown:function(e){e.preventDefault()},children:re}),He.length>0?(0,h.jsx)(ya,(0,v.Z)({as:q,className:We.listbox,ownerState:Ge},Re(),Y,{children:He.map((function(e,t){return U?Ye({key:e.key,group:e.group,children:e.options.map((function(t,n){return Ke(t,e.index+n)}))}):Ke(e,t)}))})):null]}))})):null]})})),_a=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function Sa(t){var n=t.item,r=t.applyValue,o=t.type,a=t.apiRef,s=t.focusElementRef,l=t.color,c=t.error,u=t.helperText,d=t.size,f=t.variant,p=(0,y.Z)(t,_a),m={color:l,error:c,helperText:u,size:d,variant:f},g=e.useState(n.value||[]),b=(0,i.Z)(g,2),x=b[0],w=b[1],_=(0,or.Z)(),S=ne();e.useEffect((function(){var e,t=null!=(e=n.value)?e:[];w(t.map(String))}),[n.value]);var C=e.useCallback((function(e,t){w(t.map(String)),r((0,v.Z)({},n,{value:(0,yt.Z)(t)}))}),[r,n]);return(0,h.jsx)(wa,(0,v.Z)({multiple:!0,freeSolo:!0,limitTags:1,options:[],filterOptions:function(e,t){var n=t.inputValue;return null==n||""===n?[]:[n]},id:_,value:x,onChange:C,renderTags:function(e,t){return e.map((function(e,n){return(0,h.jsx)(Xo,(0,v.Z)({variant:"outlined",size:"small",label:e},t({index:n})))}))},renderInput:function(e){var t;return(0,h.jsx)(S.components.BaseTextField,(0,v.Z)({},e,{label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:(0,v.Z)({},e.InputLabelProps,{shrink:!0}),inputRef:s,type:o||"text"},m,null==(t=S.componentsProps)?void 0:t.baseTextField))}},p))}var Ca={width:100,minWidth:50,maxWidth:1/0,hide:!1,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:function(e,t){var n=Er(e,t);return null!==n?n:"string"===typeof e?Pr.compare(e.toString(),t.toString()):e-t},type:"string",align:"left",filterOperators:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{value:"contains",getApplyFilterFn:function(t){if(!t.value)return null;var n=e?t.value:t.value.trim(),r=new RegExp(xt(n),"i");return function(e){var t=e.value;return null!=t&&r.test(t.toString())}},InputComponent:wr},{value:"equals",getApplyFilterFn:function(t){if(!t.value)return null;var n=e?t.value:t.value.trim(),r=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return function(e){var t=e.value;return null!=t&&0===r.compare(n,t.toString())}},InputComponent:wr},{value:"startsWith",getApplyFilterFn:function(t){if(!t.value)return null;var n=e?t.value:t.value.trim(),r=new RegExp("^".concat(xt(n),".*$"),"i");return function(e){var t=e.value;return null!=t&&r.test(t.toString())}},InputComponent:wr},{value:"endsWith",getApplyFilterFn:function(t){if(!t.value)return null;var n=e?t.value:t.value.trim(),r=new RegExp(".*".concat(xt(n),"$"),"i");return function(e){var t=e.value;return null!=t&&r.test(t.toString())}},InputComponent:wr},{value:"isEmpty",getApplyFilterFn:function(){return function(e){var t=e.value;return""===t||null==t}},requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){var t=e.value;return""!==t&&null!=t}},requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:function(t){if(!Array.isArray(t.value)||0===t.value.length)return null;var n=e?t.value:t.value.map((function(e){return e.trim()})),r=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return function(e){var t=e.value;return null!=t&&n.some((function(e){return 0===r.compare(e,t.toString()||"")}))}},InputComponent:Sa}]}(),renderEditCell:function(e){return(0,h.jsx)(Cr,(0,v.Z)({},e))},getApplyQuickFilterFn:function(e){if(!e)return null;var t=new RegExp(xt(e),"i");return function(e){var n=e.value;return null!=n&&t.test(n.toString())}}},ka=function(e){return null==e?null:Number(e)},Ma=function(){return[{label:"=",value:"=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return ka(n)===e.value}},InputComponent:wr,InputComponentProps:{type:"number"}},{label:"!=",value:"!=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return ka(n)!==e.value}},InputComponent:wr,InputComponentProps:{type:"number"}},{label:">",value:">",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&ka(n)>e.value}},InputComponent:wr,InputComponentProps:{type:"number"}},{label:">=",value:">=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&ka(n)>=e.value}},InputComponent:wr,InputComponentProps:{type:"number"}},{label:"<",value:"<",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&ka(n)<e.value}},InputComponent:wr,InputComponentProps:{type:"number"}},{label:"<=",value:"<=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&ka(n)<=e.value}},InputComponent:wr,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:function(){return function(e){return null==e.value}},requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){return null!=e.value}},requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:function(e){return Array.isArray(e.value)&&0!==e.value.length?function(t){var n=t.value;return null!=n&&e.value.includes(Number(n))}:null},InputComponent:Sa,InputComponentProps:{type:"number"}}]},Ta=(z(Ma),(0,v.Z)({},Ca,{type:"number",align:"right",headerAlign:"right",sortComparator:Rr,valueParser:function(e){return""===e?null:Number(e)},valueFormatter:function(e){var t=e.value;return function(e){return"number"===typeof e}(t)?t.toLocaleString():t||""},filterOperators:Ma(),getApplyQuickFilterFn:function(e){return null==e||Number.isNaN(e)||""===e?null:function(t){var n=t.value;return ka(n)===ka(e)}}})),Aa=["item","applyValue","type","apiRef","focusElementRef","InputProps"];function Ea(t){var n,r,o=t.item,a=t.applyValue,s=t.type,l=t.apiRef,c=t.focusElementRef,u=t.InputProps,d=(0,y.Z)(t,Aa),f=e.useRef(),p=e.useState(null!=(n=o.value)?n:""),m=(0,i.Z)(p,2),g=m[0],b=m[1],x=e.useState(!1),w=(0,i.Z)(x,2),_=w[0],S=w[1],C=(0,or.Z)(),k=ne(),M=e.useCallback((function(e){var t=e.target.value;clearTimeout(f.current),b(String(t)),S(!0),f.current=setTimeout((function(){a((0,v.Z)({},o,{value:t})),S(!1)}),500)}),[a,o]);return e.useEffect((function(){return function(){clearTimeout(f.current)}}),[]),e.useEffect((function(){var e,t=null!=(e=o.value)?e:"";b(String(t))}),[o.value]),(0,h.jsx)(k.components.BaseTextField,(0,v.Z)({id:C,label:l.current.getLocaleText("filterPanelInputLabel"),placeholder:l.current.getLocaleText("filterPanelInputPlaceholder"),value:g,onChange:M,variant:"standard",type:s||"text",InputLabelProps:{shrink:!0},inputRef:c,InputProps:(0,v.Z)({},_?{endAdornment:(0,h.jsx)(er,{})}:{},u,{inputProps:(0,v.Z)({max:"datetime-local"===s?"9999-12-31T23:59":"9999-12-31"},null==u?void 0:u.inputProps)})},d,null==(r=k.componentsProps)?void 0:r.baseTextField))}var Pa=/(\d+)-(\d+)-(\d+)/,Ra=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function Oa(e,t,n,r){if(!e.value)return null;var o=e.value.match(n?Ra:Pa).slice(1).map(Number),a=(0,i.Z)(o,5),s=a[0],l=a[1],c=a[2],u=a[3],d=a[4],f=new Date(s,l-1,c,u||0,d||0).getTime();return function(e){var i=e.value;if(!i)return!1;var o=i instanceof Date?i:new Date(i.toString());if(r)return t(o.getTime(),f);var a=(i instanceof Date?new Date(o):o).setHours(n?o.getHours():0,n?o.getMinutes():0,0,0);return t(a,f)}}var Ia=function(e){return[{value:"is",getApplyFilterFn:function(t){return Oa(t,(function(e,t){return e===t}),e)},InputComponent:Ea,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:function(t){return Oa(t,(function(e,t){return e!==t}),e)},InputComponent:Ea,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:function(t){return Oa(t,(function(e,t){return e>t}),e)},InputComponent:Ea,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:function(t){return Oa(t,(function(e,t){return e>=t}),e)},InputComponent:Ea,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:function(t){return Oa(t,(function(e,t){return e<t}),e,!e)},InputComponent:Ea,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:function(t){return Oa(t,(function(e,t){return e<=t}),e)},InputComponent:Ea,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:function(){return function(e){return null==e.value}},requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){return null!=e.value}},requiresFilterValue:!1}]},La=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","inputProps","isValidating","isProcessingProps","onValueChange"],Da=(0,C.ZP)(Nn)({fontSize:"inherit"});function Na(t){var n=t.id,r=t.value,o=t.field,a=t.colDef,s=t.hasFocus,l=t.inputProps,c=t.onValueChange,u=(0,y.Z)(t,La),d="dateTime"===a.type,f=ee(),p=e.useRef(),m=e.useMemo((function(){var e,t;null==(e=null==r?null:r instanceof Date?r:new Date((null!=r?r:"").toString()))||Number.isNaN(e.getTime())?t="":t=new Date(e.getTime()-60*e.getTimezoneOffset()*1e3).toISOString().substr(0,d?16:10);return{parsed:e,formatted:t}}),[r,d]),g=e.useState(m),b=(0,i.Z)(g,2),x=b[0],w=b[1],C=function(e){var t=e.classes;return(0,S.Z)({root:["editInputCell"]},A,t)}({classes:ne().classes}),k=e.useCallback(function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(t){var r,a,s,l,u,d,p,h,m,g,v,y,b,x,_;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(r=t.target.value)?a=null:(s=r.split("T"),l=(0,i.Z)(s,2),u=l[0],d=l[1],p=u.split("-"),h=(0,i.Z)(p,3),m=h[0],g=h[1],v=h[2],(a=new Date).setFullYear(Number(m),Number(g)-1,Number(v)),a.setHours(0,0,0,0),d&&(y=d.split(":"),b=(0,i.Z)(y,2),x=b[0],_=b[1],a.setHours(Number(x),Number(_),0,0))),!c){e.next=5;break}return e.next=5,c(t,a);case 5:w({parsed:a,formatted:r}),f.current.setEditCellValue({id:n,field:o,value:a},t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,o,n,c]);return e.useEffect((function(){w((function(e){var t,n;return m.parsed!==e.parsed&&(null==(t=m.parsed)?void 0:t.getTime())!==(null==(n=e.parsed)?void 0:n.getTime())?m:e}))}),[m]),(0,_.Z)((function(){s&&p.current.focus()}),[s]),(0,h.jsx)(Da,(0,v.Z)({inputRef:p,fullWidth:!0,className:C.root,type:d?"datetime-local":"date",inputProps:(0,v.Z)({max:d?"9999-12-31T23:59":"9999-12-31"},l),value:x.formatted,onChange:k},u))}var Fa=function(e){return(0,h.jsx)(Na,(0,v.Z)({},e))};var za=(0,v.Z)({},Ca,{type:"date",sortComparator:Or,valueFormatter:function(e){var t=e.value;return t instanceof Date?t.toLocaleDateString():null!=t?t:""},filterOperators:Ia(),renderEditCell:Fa,getApplyQuickFilterFn:void 0}),Ba=(0,v.Z)({},Ca,{type:"dateTime",sortComparator:Or,valueFormatter:function(e){var t=e.value;return t instanceof Date?t.toLocaleString():null!=t?t:""},filterOperators:Ia(!0),renderEditCell:Fa,getApplyQuickFilterFn:void 0}),ja=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex","getValue"],Za=function(t){var n=t.value,r=(0,y.Z)(t,ja),i=ee(),o=ne(),a=function(e){var t=e.classes;return(0,S.Z)({root:["booleanCell"]},A,t)}({classes:o.classes}),s=e.useMemo((function(){return n?o.components.BooleanCellTrueIcon:o.components.BooleanCellFalseIcon}),[o.components.BooleanCellFalseIcon,o.components.BooleanCellTrueIcon,n]);return(0,h.jsx)(s,(0,v.Z)({fontSize:"small",className:a.root,titleAccess:i.current.getLocaleText(n?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":Boolean(n)},r))},Ha=e.memo(Za),Ua=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error","onValueChange"];function Va(t){var n,r=t.id,o=t.value,a=t.field,s=t.className,l=t.hasFocus,c=t.onValueChange,u=(0,y.Z)(t,Ua),d=ee(),f=e.useRef(null),p=(0,or.Z)(),m=e.useState(o),g=(0,i.Z)(m,2),x=g[0],w=g[1],C=ne(),k=function(e){var t=e.classes;return(0,S.Z)({root:["editBooleanCell"]},A,t)}({classes:C.classes}),M=e.useCallback(function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(t){var n;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.checked,!c){e.next=4;break}return e.next=4,c(t,n);case 4:return w(n),e.next=7,d.current.setEditCellValue({id:r,field:a,value:n},t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,a,r,c]);return e.useEffect((function(){w(o)}),[o]),(0,_.Z)((function(){l&&f.current.focus()}),[l]),(0,h.jsx)("label",(0,v.Z)({htmlFor:p,className:(0,b.Z)(k.root,s)},u,{children:(0,h.jsx)(C.components.BaseCheckbox,(0,v.Z)({id:p,inputRef:f,checked:Boolean(x),onChange:M,size:"small"},null==(n=C.componentsProps)?void 0:n.baseCheckbox))}))}var Ga=["item","applyValue","apiRef","focusElementRef"];function Wa(t){var n,r,o,a,s=t.item,l=t.applyValue,c=t.apiRef,u=t.focusElementRef,d=(0,y.Z)(t,Ga),f=e.useState(s.value||""),p=(0,i.Z)(f,2),m=p[0],g=p[1],b=ne(),x=null==(r=((null==(n=b.componentsProps)?void 0:n.baseSelect)||{}).native)||r,w=x?"option":gr,_=e.useCallback((function(e){var t=e.target.value;g(t),l((0,v.Z)({},s,{value:t}))}),[l,s]);return e.useEffect((function(){g(s.value||"")}),[s.value]),(0,h.jsxs)(b.components.BaseTextField,(0,v.Z)({label:c.current.getLocaleText("filterPanelInputLabel"),value:m,onChange:_,select:!0,variant:"standard",SelectProps:(0,v.Z)({native:x,displayEmpty:!0},null==(o=b.componentsProps)?void 0:o.baseSelect),InputLabelProps:{shrink:!0},inputRef:u},d,null==(a=b.componentsProps)?void 0:a.baseTextField,{children:[(0,h.jsx)(w,{value:"",children:c.current.getLocaleText("filterValueAny")}),(0,h.jsx)(w,{value:"true",children:c.current.getLocaleText("filterValueTrue")}),(0,h.jsx)(w,{value:"false",children:c.current.getLocaleText("filterValueFalse")})]}))}var $a=(0,v.Z)({},Ca,{type:"boolean",align:"center",headerAlign:"center",renderCell:function(e){return e.rowNode.isAutoGenerated?"":(0,h.jsx)(Ha,(0,v.Z)({},e))},renderEditCell:function(e){return(0,h.jsx)(Va,(0,v.Z)({},e))},sortComparator:Rr,valueFormatter:function(e){var t=e.value,n=e.api;return t?n.getLocaleText("booleanCellTrueLabel"):n.getLocaleText("booleanCellFalseLabel")},filterOperators:[{value:"is",getApplyFilterFn:function(e){if(!e.value)return null;var t="true"===e.value;return function(e){var n=e.value;return Boolean(n)===t}},InputComponent:Wa}],getApplyQuickFilterFn:void 0,aggregable:!1}),qa=function(e){return"Escape"===e},Ya=function(e){return"Enter"===e},Xa=function(e){return"Tab"===e},Ka=function(e){return" "===e},Ja=function(e){return"Delete"===e||"Backspace"===e};function Qa(e){return 1===e.key.length&&!1===e.ctrlKey&&!1===e.metaKey}var es,ts,ns,rs=["Enter","Escape","Tab"],is=["Enter","Tab"],os=function(e){return Ya(e.key)||Ja(e.key)||Qa(e)},as=function(e){return is.indexOf(e)>-1},ss=function(e){return function(e){return"Home"===e||"End"===e}(e)||function(e){return 0===e.indexOf("Arrow")}(e)||function(e){return 0===e.indexOf("Page")}(e)||Ka(e)},ls=function(e){return!!e.key},cs=function(e){return Xa(e)||qa(e)};!function(e){e.Cell="cell",e.Row="row"}(es||(es={})),function(e){e.Edit="edit",e.View="view"}(ts||(ts={})),function(e){e.Edit="edit",e.View="view"}(ns||(ns={}));var us=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen"];function ds(t){var n,r,o,a,s=ne(),l=t.id,c=t.value,u=t.api,d=t.field,f=t.row,p=t.colDef,m=t.hasFocus,g=t.error,b=t.onValueChange,x=t.initialOpen,w=void 0===x?s.editMode===es.Cell:x,S=(0,y.Z)(t,us),C=ee(),k=e.useRef(),M=e.useRef(),T=e.useState(w),A=(0,i.Z)(T,2),E=A[0],P=A[1],R=null!=(r=((null==(n=s.componentsProps)?void 0:n.baseSelect)||{}).native)&&r;a="function"===typeof p.valueOptions?p.valueOptions({id:l,row:f,field:d}):p.valueOptions,p.valueFormatter&&(a=a.map((function(e){if("object"===typeof e)return e;var t={field:d,api:u,value:e};return{value:e,label:String(p.valueFormatter(t))}})));var O=function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(t){var n,r,i,o,c;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!1),r=t.target,i=yr(r.value,a),!b){e.next=6;break}return e.next=6,b(t,i);case 6:return e.next=8,C.current.setEditCellValue({id:l,field:d,value:i},t);case 8:if(o=e.sent,null==(n=s.experimentalFeatures)||!n.newEditingApi){e.next=11;break}return e.abrupt("return");case 11:if(s.editMode!==es.Row&&!1!==o){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,Promise.resolve(C.current.commitCellChange({id:l,field:d},t));case 15:e.sent&&(C.current.setCellMode(l,d,"view"),t.key&&(c=C.current.getCellParams(l,d),C.current.publishEvent("cellNavigationKeyDown",c,t)));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,_.Z)((function(){m&&M.current.focus()}),[m]),(0,h.jsx)(s.components.BaseSelect,(0,v.Z)({ref:k,inputRef:M,value:c,onChange:O,open:E,onOpen:function(e){(function(e){return!!e.key})(e)&&"Enter"===e.key||P(!0)},MenuProps:{onClose:function(e,t){var n;s.editMode!==es.Row?("backdropClick"===t||qa(e.key))&&(null!=(n=s.experimentalFeatures)&&n.newEditingApi?C.current.stopCellEditMode({id:l,field:d,ignoreModifications:!0}):C.current.setCellMode(l,d,"view")):P(!1)}},error:g,native:R,fullWidth:!0},S,null==(o=s.componentsProps)?void 0:o.baseSelect,{children:a.map((function(e){return function(e,t){var n="object"===typeof e,r=n?e.value:e,i=n?e.value:e,o=n?e.label:e;return(0,h.jsx)(t,{value:i,children:o},r)}(e,R?"option":gr)}))}))}var fs=["item","applyValue","type","apiRef","focusElementRef"],ps=function(e,t,n){var r=e.valueOptions,i=e.valueFormatter,o=e.field;return[""].concat("function"===typeof r?(0,yt.Z)(r({field:o})):(0,yt.Z)(r||[])).map((function(e){var r="object"===typeof e,a=r?e.value:e,s=r?e.value:e,l=i&&""!==e?i({value:e,field:o,api:t}):e,c=r?e.label:l;return(0,h.jsx)(n,{value:s,children:c},a)}))};function hs(t){var n,r,o,a,s,l=t.item,c=t.applyValue,u=t.type,d=t.apiRef,f=t.focusElementRef,p=(0,y.Z)(t,fs),m=e.useState(null!=(n=l.value)?n:""),g=(0,i.Z)(m,2),b=g[0],x=g[1],w=(0,or.Z)(),_=ne(),S=null==(o=((null==(r=_.componentsProps)?void 0:r.baseSelect)||{}).native)||o,C=l.columnField?d.current.getColumn(l.columnField):null,k=e.useMemo((function(){if(null!==C)return"function"===typeof C.valueOptions?C.valueOptions({field:C.field}):C.valueOptions}),[C]),M=e.useCallback((function(e){var t=e.target.value;t=yr(t,k),x(String(t)),c((0,v.Z)({},l,{value:t}))}),[c,l,k]);return e.useEffect((function(){var e,t;if(void 0!==k){if((t=yr(l.value,k))!==l.value)return void c((0,v.Z)({},l,{value:t}))}else t=l.value;t=null!=(e=t)?e:"",x(String(t))}),[l,k,c]),(0,h.jsx)(_.components.BaseTextField,(0,v.Z)({id:w,label:d.current.getLocaleText("filterPanelInputLabel"),placeholder:d.current.getLocaleText("filterPanelInputPlaceholder"),value:b,onChange:M,variant:"standard",type:u||"text",InputLabelProps:{shrink:!0},inputRef:f,select:!0,SelectProps:(0,v.Z)({native:S},null==(a=_.componentsProps)?void 0:a.baseSelect)},p,null==(s=_.componentsProps)?void 0:s.baseTextField,{children:ps(d.current.getColumn(l.columnField),d.current,S?"option":gr)}))}var ms=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"],gs=function(e,t){return vr(e)===vr(t)},vs=zr();function ys(t){var n=t.item,r=t.applyValue,i=t.apiRef,o=t.focusElementRef,a=t.color,s=t.error,l=t.helperText,c=t.size,u=t.variant,d=void 0===u?"standard":u,f=(0,y.Z)(t,ms),p={color:a,error:s,helperText:l,size:c,variant:d},m=(0,or.Z)(),g=ne(),b=n.columnField?i.current.getColumn(n.columnField):null,x=e.useMemo((function(){return null!=b&&b.valueOptions?"function"===typeof b.valueOptions?b.valueOptions({field:b.field}):b.valueOptions:[]}),[b]),w=e.useMemo((function(){return null==x?void 0:x.map(vr)}),[x]),_=i.current.getColumn(n.columnField),S=_.valueFormatter,C=_.field,k=function(e){return"object"===typeof e?e.label:S&&""!==e?S({value:e,field:C,api:i.current}):e},M=e.useMemo((function(){return Array.isArray(n.value)?void 0!==x?n.value.map((function(e){var t=vr(e);return(null==w?void 0:w.findIndex((function(e){return e===t})))||0})).filter((function(e){return e>=0})).map((function(e){return x[e]})):n.value:[]}),[n.value,x,w]);e.useEffect((function(){Array.isArray(n.value)&&M.length===n.value.length||r((0,v.Z)({},n,{value:M.map(vr)}))}),[n,M,r]);var T=e.useCallback((function(e,t){r((0,v.Z)({},n,{value:(0,yt.Z)(t.map(vr))}))}),[r,n]);return(0,h.jsx)(wa,(0,v.Z)({multiple:!0,limitTags:1,options:x,isOptionEqualToValue:gs,filterOptions:vs,id:m,value:M,onChange:T,renderTags:function(e,t){return e.map((function(e,n){return(0,h.jsx)(Xo,(0,v.Z)({variant:"outlined",size:"small",label:k(e)},t({index:n})))}))},renderInput:function(e){var t;return(0,h.jsx)(g.components.BaseTextField,(0,v.Z)({},e,{label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:(0,v.Z)({},e.InputLabelProps,{shrink:!0}),inputRef:o,type:"singleSelect"},p,null==(t=g.componentsProps)?void 0:t.baseTextField))}},f))}var bs=function(e){return null==e||"object"!==typeof e?e:e.value},xs=(0,v.Z)({},Ca,{type:"singleSelect",renderEditCell:function(e){return(0,h.jsx)(ds,(0,v.Z)({},e))},filterOperators:[{value:"is",getApplyFilterFn:function(e){return null==e.value||""===e.value?null:function(t){var n=t.value;return bs(n)===bs(e.value)}},InputComponent:hs},{value:"not",getApplyFilterFn:function(e){return null==e.value||""===e.value?null:function(t){var n=t.value;return bs(n)!==bs(e.value)}},InputComponent:hs},{value:"isAnyOf",getApplyFilterFn:function(e){if(!Array.isArray(e.value)||0===e.value.length)return null;var t=e.value.map(bs);return function(e){var n=e.value;return t.includes(bs(n))}},InputComponent:ys}],getApplyQuickFilterFn:function(e,t,n){if(!e)return null;var r=t.valueOptions,i=t.valueFormatter,o=t.field,a=[bs(e).toString()],s="function"===typeof r?r({field:o}):r||[];return s&&s.forEach((function(t){var r,s;"object"===typeof t?(r=t.value,s=t.label):(r=t,s=i?i({value:t,field:o,api:n.current}):t),s.slice(0,e.length).toLowerCase()===e.toLowerCase()&&(a.includes(r)||a.push(r.toString()))})),function(e){var t=e.value;return null!=t&&a.includes(bs(t).toString())}}}),ws=(n(478),n(6106));function _s(e){return(0,M.Z)("MuiList",e)}(0,T.Z)("MuiList",["root","padding","dense","subheader"]);var Ss=["children","className","component","dense","disablePadding","subheader"],Cs=(0,C.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return(0,v.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),ks=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiList"}),i=r.children,o=r.className,a=r.component,s=void 0===a?"ul":a,l=r.dense,c=void 0!==l&&l,u=r.disablePadding,d=void 0!==u&&u,f=r.subheader,p=(0,y.Z)(r,Ss),m=e.useMemo((function(){return{dense:c}}),[c]),g=(0,v.Z)({},r,{component:s,dense:c,disablePadding:d}),x=function(e){var t=e.classes,n={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,S.Z)(n,_s,t)}(g);return(0,h.jsx)(ar.Z.Provider,{value:m,children:(0,h.jsxs)(Cs,(0,v.Z)({as:s,className:(0,b.Z)(x.root,o),ref:n,ownerState:g},p,{children:[f,i]}))})}));function Ms(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var Ts=Ms,As=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Es(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Ps(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Rs(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function Os(e,t,n,r,i,o){for(var a=!1,s=i(e,t,!!t&&n);s;){if(s===e.firstChild){if(a)return!1;a=!0}var l=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Rs(s,o)&&!l)return s.focus(),!0;s=i(e,s,n)}return!1}var Is=e.forwardRef((function(t,n){var r=t.actions,i=t.autoFocus,o=void 0!==i&&i,a=t.autoFocusItem,s=void 0!==a&&a,l=t.children,c=t.className,u=t.disabledItemsFocusable,d=void 0!==u&&u,f=t.disableListWrap,p=void 0!==f&&f,m=t.onKeyDown,g=t.variant,b=void 0===g?"selectedMenu":g,x=(0,y.Z)(t,As),S=e.useRef(null),C=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,_.Z)((function(){o&&S.current.focus()}),[o]),e.useImperativeHandle(r,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!S.current.style.width;if(e.clientHeight<S.current.clientHeight&&n){var r="".concat(Ts((0,ws.Z)(e)),"px");S.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,S.current.style.width="calc(100% + ".concat(r,")")}return S.current}}}),[]);var k=(0,w.Z)(S,n),M=-1;e.Children.forEach(l,(function(t,n){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===b&&t.props.selected||-1===M)&&(M=n))}));var T=e.Children.map(l,(function(t,n){if(n===M){var r={};return s&&(r.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===b&&(r.tabIndex=0),e.cloneElement(t,r)}return t}));return(0,h.jsx)(ks,(0,v.Z)({role:"menu",ref:k,className:c,onKeyDown:function(e){var t=S.current,n=e.key,r=(0,ws.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Os(t,r,p,d,Es);else if("ArrowUp"===n)e.preventDefault(),Os(t,r,p,d,Ps);else if("Home"===n)e.preventDefault(),Os(t,null,p,d,Es);else if("End"===n)e.preventDefault(),Os(t,null,p,d,Ps);else if(1===n.length){var i=C.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);var s=r&&!i.repeating&&Rs(r,i);i.previousKeyMatched&&(s||Os(t,r,!1,d,Es,i))?e.preventDefault():i.previousKeyMatched=!1}m&&m(e)},tabIndex:o?0:-1},x,{children:T}))})),Ls=Is;function Ds(e){return e.substring(2).toLowerCase()}var Ns=function(t){var n=t.children,r=t.disableReactTree,i=void 0!==r&&r,o=t.mouseEvent,a=void 0===o?"onClick":o,s=t.onClickAway,l=t.touchEvent,c=void 0===l?"onTouchEnd":l,u=e.useRef(!1),d=e.useRef(null),f=e.useRef(!1),p=e.useRef(!1);e.useEffect((function(){return setTimeout((function(){f.current=!0}),0),function(){f.current=!1}}),[]);var m=(0,sn.Z)(n.ref,d),g=(0,Dr.Z)((function(e){var t=p.current;p.current=!1;var n=(0,Ur.Z)(d.current);!f.current||!d.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n)||(u.current?u.current=!1:(e.composedPath?e.composedPath().indexOf(d.current)>-1:!n.documentElement.contains(e.target)||d.current.contains(e.target))||!i&&t||s(e))})),v=function(e){return function(t){p.current=!0;var r=n.props[e];r&&r(t)}},y={ref:m};return!1!==c&&(y[c]=v(c)),e.useEffect((function(){if(!1!==c){var e=Ds(c),t=(0,Ur.Z)(d.current),n=function(){u.current=!0};return t.addEventListener(e,g),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,g),t.removeEventListener("touchmove",n)}}}),[g,c]),!1!==a&&(y[a]=v(a)),e.useEffect((function(){if(!1!==a){var e=Ds(a),t=(0,Ur.Z)(d.current);return t.addEventListener(e,g),function(){t.removeEventListener(e,g)}}}),[g,a]),(0,h.jsx)(e.Fragment,{children:e.cloneElement(n,y)})},Fs=n(4578),zs=!1,Bs=n(10),js="unmounted",Zs="exited",Hs="entering",Us="entered",Vs="exiting",Gs=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=Zs,r.appearStatus=Hs):i=Us:i=e.unmountOnExit||e.mountOnEnter?js:Zs,r.state={status:i},r.nextCallback=null,r}(0,Fs.Z)(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===js?{status:Zs}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Hs&&n!==Us&&(t=Hs):n!==Hs&&n!==Us||(t=Vs)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Hs){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:an.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zs&&this.setState({status:js})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[an.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||zs?this.safeSetState({status:Us},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:Hs},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:Us},(function(){t.props.onEntered(o,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:an.findDOMNode(this);t&&!zs?(this.props.onExit(r),this.safeSetState({status:Vs},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Zs},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Zs},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:an.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===js)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,y.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(Bs.Z.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},n}(e.Component);function Ws(){}Gs.contextType=Bs.Z,Gs.propTypes={},Gs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ws,onEntering:Ws,onEntered:Ws,onExit:Ws,onExiting:Ws,onExited:Ws},Gs.UNMOUNTED=js,Gs.EXITED=Zs,Gs.ENTERING=Hs,Gs.ENTERED=Us,Gs.EXITING=Vs;var $s=Gs,qs=n(6728);function Ys(){return(0,qs.Z)(Sn.Z)}var Xs=function(e){return e.scrollTop};function Ks(e,t){var n,r,i=e.timeout,o=e.easing,a=e.style,s=void 0===a?{}:a;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}var Js=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Qs(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var el={entering:{opacity:1,transform:Qs(1)},entered:{opacity:1,transform:"none"}},tl="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),nl=e.forwardRef((function(t,n){var r=t.addEndListener,i=t.appear,o=void 0===i||i,a=t.children,s=t.easing,l=t.in,c=t.onEnter,u=t.onEntered,d=t.onEntering,f=t.onExit,p=t.onExited,m=t.onExiting,g=t.style,b=t.timeout,x=void 0===b?"auto":b,_=t.TransitionComponent,S=void 0===_?$s:_,C=(0,y.Z)(t,Js),k=e.useRef(),M=e.useRef(),T=Ys(),A=e.useRef(null),E=(0,w.Z)(A,a.ref,n),P=function(e){return function(t){if(e){var n=A.current;void 0===t?e(n):e(n,t)}}},R=P(d),O=P((function(e,t){Xs(e);var n,r=Ks({style:g,timeout:x,easing:s},{mode:"enter"}),i=r.duration,o=r.delay,a=r.easing;"auto"===x?(n=T.transitions.getAutoHeightDuration(e.clientHeight),M.current=n):n=i,e.style.transition=[T.transitions.create("opacity",{duration:n,delay:o}),T.transitions.create("transform",{duration:tl?n:.666*n,delay:o,easing:a})].join(","),c&&c(e,t)})),I=P(u),L=P(m),D=P((function(e){var t,n=Ks({style:g,timeout:x,easing:s},{mode:"exit"}),r=n.duration,i=n.delay,o=n.easing;"auto"===x?(t=T.transitions.getAutoHeightDuration(e.clientHeight),M.current=t):t=r,e.style.transition=[T.transitions.create("opacity",{duration:t,delay:i}),T.transitions.create("transform",{duration:tl?t:.666*t,delay:tl?i:i||.333*t,easing:o})].join(","),e.style.opacity=0,e.style.transform=Qs(.75),f&&f(e)})),N=P(p);return e.useEffect((function(){return function(){clearTimeout(k.current)}}),[]),(0,h.jsx)(S,(0,v.Z)({appear:o,in:l,nodeRef:A,onEnter:O,onEntered:I,onEntering:R,onExit:D,onExited:N,onExiting:L,addEndListener:function(e){"auto"===x&&(k.current=setTimeout(e,M.current||0)),r&&r(A.current,e)},timeout:"auto"===x?null:x},C,{children:function(t,n){return e.cloneElement(a,(0,v.Z)({style:(0,v.Z)({opacity:0,transform:Qs(.75),visibility:"exited"!==t||l?void 0:"hidden"},el[t],g,a.props.style),ref:E},n))}}))}));nl.muiSupportAuto=!0;var rl=nl,il=["open","target","onClickAway","children","position","className","onExited"],ol=(0,C.ZP)(Ao,{name:"MuiDataGrid",slot:"Menu",overridesResolver:function(e,t){return t.menu}})((function(e){var t=e.theme;return(0,o.Z)({zIndex:t.zIndex.modal},"& .".concat(E.menuList),{outline:0})})),al={"bottom-start":"top left","bottom-end":"top right"},sl=function(t){var n,r=t.open,i=t.target,o=t.onClickAway,a=t.children,s=t.position,l=t.className,c=t.onExited,u=(0,y.Z)(t,il),d=ee(),f=e.useRef(i),p=e.useRef(r),m=ne(),g=function(e){var t=e.classes;return(0,S.Z)({root:["menu"]},A,t)}({classes:m.classes});e.useEffect((function(){p.current&&f.current&&f.current.focus();var e=r?"menuOpen":"menuClose";d.current.publishEvent(e,{target:i}),p.current=r,f.current=i}),[d,r,i]);return(0,h.jsx)(ol,(0,v.Z)({as:m.components.BasePopper,className:(0,b.Z)(l,g.root),open:r,anchorEl:i,transition:!0,placement:s},u,null==(n=m.componentsProps)?void 0:n.basePopper,{children:function(e){var t,n=e.TransitionProps,r=e.placement;return(0,h.jsx)(Ns,{onClickAway:o,mouseEvent:"onMouseDown",children:(0,h.jsx)(rl,(0,v.Z)({},n,{style:{transformOrigin:al[r]},onExited:(t=null==n?void 0:n.onExited,function(e){t&&t(),c&&c(e)}),children:(0,h.jsx)(Fo,{children:a})}))})}}))},ll=["colDef","id","api","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","getValue","tabIndex","position","focusElementRef"],cl=function(t){var n=t.colDef,r=t.id,o=t.hasFocus,a=t.tabIndex,s=t.position,l=void 0===s?"bottom-end":s,c=t.focusElementRef,u=(0,y.Z)(t,ll),d=e.useState(-1),f=(0,i.Z)(d,2),p=f[0],m=f[1],g=e.useState(!1),b=(0,i.Z)(g,2),x=b[0],w=b[1],_=ee(),S=e.useRef(null),C=e.useRef(null),k=e.useRef(!1),M=e.useRef({}),T=(0,or.Z)(),A=(0,or.Z)(),P=ne();if(e.useLayoutEffect((function(){o||Object.entries(M.current).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];null==r||r.stop({},(function(){delete M.current[n]}))}))}),[o]),e.useEffect((function(){p<0||!S.current||(p>=S.current.children.length||S.current.children[p].focus({preventScroll:!0}))}),[p]),e.useEffect((function(){o||(m(-1),k.current=!1)}),[o]),e.useImperativeHandle(c,(function(){return{focus:function(){k.current||m(0)}}}),[]),!function(e){return"function"===typeof e.getActions}(n))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");var R=n.getActions(_.current.getRowParams(r)),O=R.filter((function(e){return!e.props.showInMenu})),I=R.filter((function(e){return e.props.showInMenu})),L=O.length+(I.length?1:0);e.useEffect((function(){p>=L&&m(L-1)}),[p,L]);var D=function(){w(!1)},N=function(e){return function(t){M.current[e]=t}},F=function(e,t){return function(n){m(e),k.current=!0,t&&t(n)}};return(0,h.jsxs)("div",(0,v.Z)({role:"menu",ref:S,tabIndex:-1,className:E.actionsCell,onKeyDown:function(e){if(!(L<=1)){var t=p;"ArrowRight"===e.key?t+=1:"ArrowLeft"===e.key&&(t-=1),t<0||t>=L||t!==p&&(e.preventDefault(),e.stopPropagation(),m(t))}}},u,{children:[O.map((function(t,n){return e.cloneElement(t,{key:n,touchRippleRef:N(n),onClick:F(n,t.props.onClick),tabIndex:p===n?a:-1})})),I.length>0&&A&&(0,h.jsx)(Ho,{ref:C,id:A,"aria-label":_.current.getLocaleText("actionsCellMore"),"aria-controls":T,"aria-expanded":x?"true":void 0,"aria-haspopup":"true",role:"menuitem",size:"small",onClick:function(){w(!0),m(L-1),k.current=!0},touchRippleRef:N(A),tabIndex:p===O.length?a:-1,children:(0,h.jsx)(P.components.MoreActionsIcon,{fontSize:"small"})}),I.length>0&&(0,h.jsx)(sl,{onClickAway:D,onClick:D,open:x,target:C.current,position:l,children:(0,h.jsx)(Ls,{id:T,className:E.menuList,onKeyDown:function(e){"Tab"===e.key&&e.preventDefault(),["Tab","Enter","Escape"].includes(e.key)&&D()},"aria-labelledby":A,variant:"menu",autoFocusItem:!0,children:I.map((function(t,n){return e.cloneElement(t,{key:n})}))})})]}))},ul="actions",dl=(0,v.Z)({},Ca,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:function(e){return(0,h.jsx)(cl,(0,v.Z)({},e))},getApplyQuickFilterFn:void 0}),fl="__default__",pl=function(){var e;return e={string:Ca,number:Ta,date:za,dateTime:Ba,boolean:$a,singleSelect:xs},(0,o.Z)(e,ul,dl),(0,o.Z)(e,fl,Ca),e},hl=["maxWidth","minWidth","width","flex"],ml=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,v.Z)({},pl());return Object.entries(e).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],o=n[1];t[r]?t[r]=(0,v.Z)({},t[r],o):t[r]=(0,v.Z)({},t[o.extendType||fl],o)})),t};var gl,vl=function(e,t){var n={},r=0,i=0,o=[];e.all.forEach((function(t){var a,s=(0,v.Z)({},e.lookup[t]);!1===e.columnVisibilityModel[t]?s.computedWidth=0:(s.flex&&s.flex>0?(r+=s.flex,a=0,o.push(s)):a=wt(s.width,s.minWidth,s.maxWidth),i+=a,s.computedWidth=a);n[t]=s}));var a=Math.max(t-i,0);if(r>0&&t>0){var s=function(e){var t=e.initialFreeSpace,n=e.totalFlexUnits,r=e.flexColumns,i={all:{},frozenFields:[],freeze:function(e){var t=i.all[e];t&&!0!==t.frozen&&(i.all[e].frozen=!0,i.frozenFields.push(e))}};return function e(){if(i.frozenFields.length!==r.length){var o={min:{},max:{}},a=t,s=n,l=0;i.frozenFields.forEach((function(e){a-=i.all[e].computedWidth,s-=i.all[e].flex}));for(var c=0;c<r.length;c+=1){var u=r[c];if(!i.all[u.field]||!0!==i.all[u.field].frozen){var d=a/s*u.flex;d<u.minWidth?(l+=u.minWidth-d,d=u.minWidth,o.min[u.field]=!0):d>u.maxWidth&&(l+=u.maxWidth-d,d=u.maxWidth,o.max[u.field]=!0),i.all[u.field]={frozen:!1,computedWidth:d,flex:u.flex}}}l<0?Object.keys(o.max).forEach((function(e){i.freeze(e)})):l>0?Object.keys(o.min).forEach((function(e){i.freeze(e)})):r.forEach((function(e){var t=e.field;i.freeze(t)})),e()}}(),i.all}({initialFreeSpace:a,totalFlexUnits:r,flexColumns:o});Object.keys(s).forEach((function(e){n[e].computedWidth=s[e].computedWidth}))}return(0,v.Z)({},e,{lookup:n})},yl=function(e){var t,n,r,a,s,l=e.apiRef,c=e.columnsToUpsert,u=e.initialState,d=e.columnTypes,f=e.currentColumnVisibilityModel,p=void 0===f?G(l):f,h=e.shouldRegenColumnVisibilityModelFromColumns,m=e.keepOnlyColumnsToUpsert,g=void 0!==m&&m,y=!l.current.state.columns;if(y)s={all:[],lookup:{}};else{var b=Z(l.current.state);s={all:g?[]:(0,yt.Z)(b.all),lookup:(0,v.Z)({},b.lookup)}}var x={};g&&!y&&(x=Object.keys(s.lookup).reduce((function(e,t){return(0,v.Z)({},e,(0,o.Z)({},t,!1))}),{}));var w={};c.forEach((function(e){var t=e.field;w[t]=!0,x[t]=!0;var n=s.lookup[t];null==n?(n=(0,v.Z)({},function(e,t){return t&&e[t]?e[t]:e[fl]}(d,e.type),{field:t,hasBeenResized:!1}),s.all.push(t)):g&&s.all.push(t);var r=n.hasBeenResized;hl.forEach((function(t){void 0!==e[t]&&(r=!0,-1===e[t]&&(e[t]=1/0))})),s.lookup[t]=(0,v.Z)({},n,{hide:null!=e.hide&&e.hide},e,{hasBeenResized:r})})),g&&!y&&Object.keys(s.lookup).forEach((function(e){x[e]||delete s.lookup[e]}));var _=(0,v.Z)({},s.lookup),S=l.current.unstable_applyPipeProcessors("hydrateColumns",s),C={};if(h){var k=!1,M=(0,v.Z)({},p);y?S.all.forEach((function(e){M[e]=!s.lookup[e].hide})):g&&Object.keys(M).forEach((function(e){S.lookup[e]||(delete M[e],k=!0)})),S.all.forEach((function(e){if(w[e]||_[e]!==S.lookup[e]){var t=p[e];if(void 0===t)if(y)t=!0;else t=!!Z(l.current.state).lookup[e];var n=!S.lookup[e].hide;n!==t&&(k=!0,M[e]=n)}})),C=k||y?M:p}else C=p;var T=function(e,t){if(!t)return e;var n=t.orderedFields,r=void 0===n?[]:n,o=t.dimensions,a=void 0===o?{}:o,s=Object.keys(a);if(0===s.length&&0===r.length)return e;for(var l={},c=[],u=0;u<r.length;u+=1){var d=r[u];e.lookup[d]&&(l[d]=!0,c.push(d))}for(var f=0===c.length?e.all:[].concat(c,(0,yt.Z)(e.all.filter((function(e){return!l[e]})))),p=(0,v.Z)({},e.lookup),h=function(){var e=s[m],t=(0,v.Z)({},p[e],{hasBeenResized:!0});Object.entries(a[e]).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],o=n[1];t[r]=-1===o?1/0:o})),p[e]=t},m=0;m<s.length;m+=1)h();return{all:f,lookup:p}}(S,u),A=(0,v.Z)({},T,{columnVisibilityModel:C});return vl(A,null!=(t=null==(n=(r=l.current).getRootDimensions)||null==(a=n.call(r))?void 0:a.viewportInnerSize.width)?t:0)},bl=function(e){return function(t){return(0,v.Z)({},t,{columns:e})}};function xl(e){for(var t=e.firstColumnToRender,n=e.apiRef,r=e.firstRowToRender,i=e.lastRowToRender,o=e.visibleRows,a=t,s=r;s<i;s+=1){if(o[s]){var l=o[s].id,c=n.current.unstable_getCellColSpanInfo(l,t);c&&c.spannedByColSpan&&(a=c.leftVisibleCellIndex)}}return a}function wl(e){var t=e.firstColumnIndex,n=e.minColumnIndex,r=e.columnBuffer,i=e.firstRowToRender,o=e.lastRowToRender,a=e.apiRef,s=e.visibleRows;return xl({firstColumnToRender:Math.max(t-r,n),apiRef:a,firstRowToRender:i,lastRowToRender:o,visibleRows:s})}!function(e){e.filters="filters",e.columns="columns"}(gl||(gl={}));var _l,Sl=function(e,t,n){var r,i,o,a,s,l,c,u=!!t.columnVisibilityModel||!(null==(r=t.initialState)||null==(i=r.columns)||!i.columnVisibilityModel);n.current.unstable_caches.columns={isUsingColumnVisibilityModel:u};var d=ml(t.columnTypes),f=yl({apiRef:n,columnTypes:d,columnsToUpsert:t.columns,initialState:null==(o=t.initialState)?void 0:o.columns,shouldRegenColumnVisibilityModelFromColumns:!u,currentColumnVisibilityModel:null!=(a=null!=(s=t.columnVisibilityModel)?s:null==(l=t.initialState)||null==(c=l.columns)?void 0:c.columnVisibilityModel)?a:{},keepOnlyColumnsToUpsert:!0});return(0,v.Z)({},e,{columns:f})};function Cl(e){return void 0!==e.field}!function(e){e.Compact="compact",e.Standard="standard",e.Comfortable="comfortable"}(_l||(_l={}));var kl=j((function(e){return e.columnGrouping}),(function(e){return e.lookup})),Ml=["groupId","children"];var Tl=function e(t,n,r){if(Cl(t)){if(void 0!==r[t.field])throw new Error(["MUI: columnGroupingModel contains duplicated field","column field ".concat(t.field," occurrs two times in the grouping model:"),"- ".concat(r[t.field].join(" > ")),"- ".concat(n.join(" > "))].join("\n"));r[t.field]=n}else{var i=t.groupId;t.children.forEach((function(t){e(t,[].concat((0,yt.Z)(n),[i]),r)}))}},Al=function(e){if(!e)return{};var t={};return e.forEach((function(e){Tl(e,[],t)})),t},El=function e(t){var n={};return t.forEach((function(t){if(!Cl(t)){var r=t.groupId,i=t.children,a=(0,y.Z)(t,Ml);if(!r)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");i||console.warn("MUI: group groupId=".concat(r," has no children."));var s=(0,v.Z)({},a,{groupId:r}),l=e(i);if(void 0!==l[r]||void 0!==n[r])throw new Error("MUI: The groupId ".concat(r," is used multiple times in the columnGroupingModel."));n=(0,v.Z)({},n,l,(0,o.Z)({},r,s))}})),(0,v.Z)({},n)},Pl=function(e,t){var n,r=El(null!=(n=t.columnGroupingModel)?n:[]);return(0,v.Z)({},e,{columnGrouping:{lookup:r,groupCollapsedModel:{}}})},Rl=function(e,t,n,r){switch(e){case _l.Compact:return{value:e,headerHeight:Math.floor(.7*t),rowHeight:Math.floor(.7*n),headerGroupingMaxDepth:r,factor:.7};case _l.Comfortable:return{value:e,headerHeight:Math.floor(1.3*t),rowHeight:Math.floor(1.3*n),headerGroupingMaxDepth:r,factor:1.3};default:return{value:e,headerHeight:t,rowHeight:n,headerGroupingMaxDepth:r,factor:1}}},Ol=function(e,t){var n;if(null==t.columnGroupingModel||0===Object.keys(t.columnGroupingModel).length)n=0;else{var r=Al(t.columnGroupingModel),i=e.columns,o=i.all.filter((function(e){return!1!==i.columnVisibilityModel[e]}));n=0===o.length?0:Math.max.apply(Math,(0,yt.Z)(o.map((function(e){var t,n;return null!=(t=null==(n=r[e])?void 0:n.length)?t:0}))))}return(0,v.Z)({},e,{density:Rl(t.density,t.headerHeight,t.rowHeight,n)})};var Il=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","getValue","api"],Ll=e.forwardRef((function(t,n){var r,i=t.field,o=t.id,a=t.value,s=t.rowNode,l=t.hasFocus,c=t.tabIndex,u=(0,y.Z)(t,Il),d=ee(),f=ne(),p=function(e){var t=e.classes;return(0,S.Z)({root:["checkboxInput"]},A,t)}({classes:f.classes}),m=e.useRef(null),g=e.useRef(),b=(0,w.Z)(m,n),x=d.current.getCellElement(o,i);e.useLayoutEffect((function(){0===c&&x&&(x.tabIndex=-1)}),[x,c]),e.useEffect((function(){if(l){var e,t=null==(e=m.current)?void 0:e.querySelector("input");null==t||t.focus({preventScroll:!0})}else g.current&&g.current.stop({})}),[l]);var _=e.useCallback((function(e){Ka(e.key)&&e.stopPropagation(),ss(e.key)&&!e.shiftKey&&d.current.publishEvent("cellNavigationKeyDown",t,e)}),[d,t]);if("footer"===s.position)return null;var C=d.current.isRowSelectable(o),k=d.current.getLocaleText(a?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return s.isPinned?null:(0,h.jsx)(f.components.BaseCheckbox,(0,v.Z)({ref:b,tabIndex:c,checked:a,onChange:function(e){var t={value:e.target.checked,id:o};d.current.publishEvent("rowSelectionCheckboxChange",t,e)},className:p.root,inputProps:{"aria-label":k},onKeyDown:_,disabled:!C,touchRippleRef:g},null==(r=f.componentsProps)?void 0:r.baseCheckbox,u))})),Dl=function(e){return e.focus},Nl=j(Dl,(function(e){return e.cell})),Fl=j(Dl,(function(e){return e.columnHeader})),zl=function(e){return e.tabIndex},Bl=j(zl,(function(e){return e.cell})),jl=j(zl,(function(e){return e.columnHeader})),Zl=function(e){return e.selection},Hl=j(Zl,(function(e){return e.length})),Ul=j(Zl,he,(function(e,t){return new Map(e.map((function(e){return[e,t[e]]})))})),Vl=j(Zl,(function(e){return e.reduce((function(e,t){return e[t]=t,e}),{})})),Gl=function(e){return e.pagination},Wl=j(Gl,(function(e){return e.page})),$l=j(Gl,(function(e){return e.pageSize})),ql=(j(Gl,(function(e){return e.pageCount})),j(Gl,ge,ye,it,lt,(function(e,t,n,r,i){var o=i.length,a=Math.min(e.pageSize*e.page,o-1),s=Math.min(a+e.pageSize-1,o-1);if(-1===a||-1===s)return null;if(n<2)return{firstRowIndex:a,lastRowIndex:s};for(var l=i[a],c=s-a+1,u=r.findIndex((function(e){return e.id===l.id})),d=u,f=0;d<r.length&&f<=c;){var p=t[r[d].id].depth;(f<c||p>0)&&(d+=1),0===p&&(f+=1)}return{firstRowIndex:u,lastRowIndex:d-1}}))),Yl=j(it,ql,(function(e,t){return t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]})),Xl=j(ot,ql,(function(e,t){return t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]})),Kl=["field","colDef"],Jl=e.forwardRef((function(t,n){var r,o=(0,y.Z)(t,Kl),a=e.useState(!1),s=(0,i.Z)(a,2)[1],l=ee(),c=ne(),u=function(e){var t=e.classes;return(0,S.Z)({root:["checkboxInput"]},A,t)}({classes:c.classes}),d=J(l,jl),f=J(l,Zl),p=J(l,ot),m=J(l,Xl),g=e.useMemo((function(){return"function"!==typeof c.isRowSelectable?f:f.filter((function(e){return!!l.current.getRow(e)&&c.isRowSelectable(l.current.getRowParams(e))}))}),[l,c.isRowSelectable,f]),b=e.useMemo((function(){return(c.pagination&&c.checkboxSelectionVisibleOnly?m:p).reduce((function(e,t){return e[t]=!0,e}),{})}),[c.pagination,c.checkboxSelectionVisibleOnly,m,p]),x=e.useMemo((function(){return g.filter((function(e){return b[e]})).length}),[g,b]),w=x>0&&x<Object.keys(b).length,_=x>0,C=null!==d&&d.field===t.field?0:-1;e.useLayoutEffect((function(){var e=l.current.getColumnHeaderElement(t.field);0===C&&e&&(e.tabIndex=-1)}),[C,l,t.field]);var k=e.useCallback((function(e){" "===e.key&&l.current.publishEvent("headerSelectionCheckboxChange",{value:!_}),ss(e.key)&&!e.shiftKey&&l.current.publishEvent("columnHeaderNavigationKeyDown",t,e)}),[l,t,_]),M=e.useCallback((function(){s((function(e){return!e}))}),[]);e.useEffect((function(){return l.current.subscribeEvent("selectionChange",M)}),[l,M]);var T=l.current.getLocaleText(_?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return(0,h.jsx)(c.components.BaseCheckbox,(0,v.Z)({ref:n,indeterminate:w,checked:_,onChange:function(e){var t={value:e.target.checked};l.current.publishEvent("headerSelectionCheckboxChange",t)},className:u.root,inputProps:{"aria-label":T},tabIndex:C,onKeyDown:k},null==(r=c.componentsProps)?void 0:r.baseCheckbox,o))})),Ql="__check__",ec=(0,v.Z)({},$a,{field:Ql,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,valueGetter:function(e){return void 0!==Vl(e.api.state,e.api.instanceId)[e.id]},renderHeader:function(e){return(0,h.jsx)(Jl,(0,v.Z)({},e))},renderCell:function(e){return(0,h.jsx)(Ll,(0,v.Z)({},e))}}),tc=function(e,t){if("string"===typeof e){var n=e.replace(/"/g,'""');return[t,"\n","\r"].some((function(e){return n.includes(e)}))?'"'.concat(n,'"'):n}return e};F(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);function nc(e){var t=e.columns,n=e.rowIds,r=e.getCellParams,i=e.delimiterCharacter,o=e.includeHeaders,a=n.reduce((function(e,n){return"".concat(e).concat(function(e,t,n,r){return t.map((function(t){var i=n(e,t.field);return tc(i.formattedValue,r)}))}(n,t,r,i).join(i),"\r\n")}),"").trim();if(!o)return a;var s="".concat(t.filter((function(e){return e.field!==ec.field})).map((function(e){return tc(e.headerName||e.field,i)})).join(i),"\r\n");return"".concat(s).concat(a).trim()}var rc,ic=function(e){var t=e.apiRef,n=e.options,r=V(t);return n.fields?n.fields.map((function(e){return r.find((function(t){return t.field===e}))})).filter((function(e){return!!e})):(n.allColumns?r:W(t)).filter((function(e){return!e.disableExport}))},oc=function(e){var t,n,r=e.apiRef,i=st(r),o=ge(r),a=r.current.getSelectedRows(),s=i.filter((function(e){var t;return"body"===(null!=(t=o[e].position)?t:"body")})),l=we(r),c=(null==l||null==(t=l.top)?void 0:t.map((function(e){return e.id})))||[],u=(null==l||null==(n=l.bottom)?void 0:n.map((function(e){return e.id})))||[];return s.unshift.apply(s,(0,yt.Z)(c)),s.push.apply(s,(0,yt.Z)(u)),a.size>0?s.filter((function(e){return a.has(e)})):s},ac=["children","onClick"],sc=e.forwardRef((function(t,n){var r,o=t.children,a=t.onClick,s=(0,y.Z)(t,ac),l=ee(),c=ne(),u=(0,or.Z)(),d=(0,or.Z)(),f=e.useState(!1),p=(0,i.Z)(f,2),m=p[0],g=p[1],b=e.useRef(null),x=(0,w.Z)(n,b),_=function(){return g(!1)};return null==o?null:(0,h.jsxs)(e.Fragment,{children:[(0,h.jsx)(c.components.BaseButton,(0,v.Z)({ref:x,size:"small",startIcon:(0,h.jsx)(c.components.ExportIcon,{}),"aria-expanded":m?"true":void 0,"aria-label":l.current.getLocaleText("toolbarExportLabel"),"aria-haspopup":"menu","aria-labelledby":d,id:u},s,{onClick:function(e){g((function(e){return!e})),null==a||a(e)}},null==(r=c.componentsProps)?void 0:r.baseButton,{children:l.current.getLocaleText("toolbarExport")})),(0,h.jsx)(sl,{open:m,target:b.current,onClickAway:function(e){var t;b.current===e.target||null!=(t=b.current)&&t.contains(e.target)||g(!1)},position:"bottom-start",children:(0,h.jsx)(Ls,{id:d,className:E.menuList,"aria-labelledby":u,onKeyDown:function(e){Xa(e.key)&&e.preventDefault(),cs(e.key)&&_()},autoFocusItem:m,children:e.Children.map(o,(function(t){return e.isValidElement(t)?e.cloneElement(t,{hideMenu:_}):t}))})})]})})),lc=["hideMenu","options"],cc=["hideMenu","options"],uc=["csvOptions","printOptions","excelOptions"],dc=function(e){var t=ee(),n=e.hideMenu,r=e.options,i=(0,y.Z)(e,lc);return(0,h.jsx)(gr,(0,v.Z)({onClick:function(){t.current.exportDataAsCsv(r),null==n||n()}},i,{children:t.current.getLocaleText("toolbarExportCSV")}))},fc=function(e){var t=ee(),n=e.hideMenu,r=e.options,i=(0,y.Z)(e,cc);return(0,h.jsx)(gr,(0,v.Z)({onClick:function(){t.current.exportDataAsPrint(r),null==n||n()}},i,{children:t.current.getLocaleText("toolbarExportPrint")}))},pc=e.forwardRef((function(t,n){var r=t.csvOptions,i=void 0===r?{}:r,o=t.printOptions,a=void 0===o?{}:o,s=t.excelOptions,l=(0,y.Z)(t,uc),c=ee().current.unstable_applyPipeProcessors("exportMenu",[],{excelOptions:s,csvOptions:i,printOptions:a}).sort((function(e,t){return e.componentName>t.componentName?1:-1}));return 0===c.length?null:(0,h.jsx)(sc,(0,v.Z)({},l,{ref:n,children:c.map((function(t,n){return e.cloneElement(t.component,{key:n})}))}))})),hc=function(t){var n=ke(t,"useGridCsvExport"),r=e.useCallback((function(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.debug("Get data as CSV");var o=ic({apiRef:t,options:i}),a=null!=(e=i.getRowsToExport)?e:oc,s=a({apiRef:t});return nc({columns:o,rowIds:s,getCellParams:t.current.getCellParams,delimiterCharacter:i.delimiter||",",includeHeaders:null==(r=i.includeHeaders)||r})}),[n,t]),i=e.useCallback((function(e){n.debug("Export data as CSV");var t=r(e);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.title||"untitled",r="".concat(n,".").concat(t);if("download"in HTMLAnchorElement.prototype){var i=URL.createObjectURL(e),o=document.createElement("a");return o.href=i,o.download=r,o.click(),void setTimeout((function(){URL.revokeObjectURL(i)}))}throw new Error("MUI: exportAs not supported")}(new Blob([null!=e&&e.utf8WithBom?new Uint8Array([239,187,191]):"",t],{type:"text/csv"}),"csv",null==e?void 0:e.fileName)}),[n,r]);Pt(t,{getDataAsCsv:r,exportDataAsCsv:i});var o=e.useCallback((function(e,t){var n;return null!=(n=t.csvOptions)&&n.disableToolbarButton?e:[].concat((0,yt.Z)(e),[{component:(0,h.jsx)(dc,{options:t.csvOptions}),componentName:"csvExport"}])}),[]);en(t,"exportMenu",o)},mc=function(e){return e.rowsMeta},gc="client",vc="server";!function(e){e.And="and",e.Or="or"}(rc||(rc={}));var yc=function(){return{items:[],linkOperator:rc.And,quickFilterValues:[],quickFilterLogicOperator:rc.And}},bc=function(t,n,r,i){var o=e.useCallback((function(){t.current.unstable_registerStrategyProcessor(n,r,i)}),[t,i,r,n]);Qt((function(){o()}));var a=e.useRef(!0);e.useEffect((function(){a.current?a.current=!1:o()}),[o])},xc=function(e,t){var n=(0,v.Z)({},e);if(null==n.id&&(n.id=Math.round(1e5*Math.random())),null==n.operatorValue){var r=U(t)[n.columnField];n.operatorValue=r&&r.filterOperators[0].value}return n},wc=F(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),_c=F("MUI: The 'id' field is required on `filterModel.items` when you use multiple filters.","error"),Sc=F(["MUI: One of your filtering item have no `operatorValue` provided.","This property will become required on `@mui/x-data-grid@6.X`."]),Cc=function(e,t,n){var r,i=e.items.length>1;i&&t?(wc(),r=[e.items[0]]):r=e.items;var o=i&&r.some((function(e){return null==e.id})),a=r.some((function(e){return null==e.operatorValue}));return o&&_c(),a&&Sc(),a||o?(0,v.Z)({},e,{items:r.map((function(e){return xc(e,n)}))}):e.items!==r?(0,v.Z)({},e,{items:r}):e},kc=function(e,t,n){return function(r){return(0,v.Z)({},r,{filterModel:Cc(e,t,n)})}},Mc=function(e,t){if(!e.columnField||!e.operatorValue)return null;var n,r=t.current.getColumn(e.columnField);if(!r)return null;if(r.valueParser){var i,o=r.valueParser;n=Array.isArray(e.value)?null==(i=e.value)?void 0:i.map((function(e){return o(e)})):o(e.value)}else n=e.value;var a=(0,v.Z)({},e,{value:n}),s=r.filterOperators;if(null==s||!s.length)throw new Error("MUI: No filter operators found for column '".concat(r.field,"'."));var l=s.find((function(e){return e.value===a.operatorValue}));if(!l)throw new Error("MUI: No filter operator found for column '".concat(r.field,"' and operator value '").concat(a.operatorValue,"'."));var c=l.getApplyFilterFn(a,r);if("function"!==typeof c)return null;return{fn:function(e){var n=t.current.getCellParams(e,a.columnField);return c(n)},item:a}},Tc=function(e,t){var n=function(e,t){var n=e.items.map((function(e){return Mc(e,t)})).filter((function(e){return!!e}));return 0===n.length?null:function(e,t){var r={};return(t?n.filter((function(e){return t(e.item.columnField)})):n).forEach((function(t){r[t.item.id]=t.fn(e)})),r}}(e,t),r=function(e,t){var n=e.quickFilterValues,r=void 0===n?[]:n;if(0===r.length)return null;var i=H(t),o={};i.forEach((function(e){var n=t.current.getColumn(e),i=null==n?void 0:n.getApplyQuickFilterFn;i&&(o[e]=r.map((function(e){return i(e,n,t)})))}));var a=r.filter((function(e,t){return Object.keys(o).some((function(e){return null!=o[e][t]}))}));return 0===a.length?null:function(e,n){var r={},i=[];Object.keys(o).forEach((function(o){n&&!n(o)||(r[o]=t.current.getCellParams(e,o),i.push(o))}));var s={};return a.forEach((function(e,t){var n=i.some((function(e){var n,i;return null!=o[e][t]&&(null==(n=(i=o[e])[t])?void 0:n.call(i,r[e]))}));s[e]=n})),s}}(e,t);return function(e,t){return{passingFilterItems:n&&n(e,t),passingQuickFilterValues:r&&r(e,t)}}},Ac=function(e,t,n,r){var i,o,a=n.items.filter((function(e){return null!==Mc(e,r)})),s=e.filter((function(e){return null!=e})),l=t.filter((function(e){return null!=e})),c=null!=(i=n.quickFilterLogicOperator)?i:yc().quickFilterLogicOperator,u=null!=(o=n.linkOperator)?o:yc().linkOperator;if(s.length>0){var d=function(e){return s.some((function(t){return t[e.id]}))};if(u===rc.And){if(!a.every(d))return!1}else if(!a.some(d))return!1}if(l.length>0&&null!=n.quickFilterValues){var f=function(e){return l.some((function(t){return t[e]}))};if(c===rc.And){if(!n.quickFilterValues.every(f))return!1}else if(!n.quickFilterValues.some(f))return!1}return!0},Ec=function(e,t,n){var r,i,o,a,s=null!=(r=null!=(i=t.filterModel)?i:null==(o=t.initialState)||null==(a=o.filter)?void 0:a.filterModel)?r:yc();return(0,v.Z)({},e,{filter:{filterModel:Cc(s,t.disableMultipleColumnsFiltering,n),visibleRowsLookup:{},filteredDescendantCountLookup:{}}})},Pc=function(e,t){var n,r;return t.pagination&&"client"===t.paginationMode?(r=ql(e),n=Yl(e)):r=0===(n=it(e)).length?null:{firstRowIndex:0,lastRowIndex:n.length-1},{rows:n,range:r}},Rc=function(t,n){var r=Pc(t,n);return e.useMemo((function(){return{rows:r.rows,range:r.range}}),[r.rows,r.range])},Oc=function(e){return(0,v.Z)({},e,{focus:{cell:null,columnHeader:null},tabIndex:{cell:null,columnHeader:null}})},Ic="__detail_panel_toggle__";var Lc=function(t,n){var r=ke(t,"useGridKeyboardNavigation"),i=Rc(t,n).rows,o=e.useMemo((function(){return function(e,t){var n=we(e)||{};return[].concat((0,yt.Z)(n.top||[]),(0,yt.Z)(t),(0,yt.Z)(n.bottom||[]))}(t,i)}),[t,i]),a=e.useCallback((function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",o=it(t),a=t.current.unstable_getCellColSpanInfo(n,e);a&&a.spannedByColSpan&&("left"===i?e=a.leftVisibleCellIndex:"right"===i&&(e=a.rightVisibleCellIndex));var s=o.findIndex((function(e){return e.id===n}));r.debug("Navigating to cell row ".concat(s,", col ").concat(e)),t.current.scrollToIndexes({colIndex:e,rowIndex:s});var l=t.current.getVisibleColumns()[e].field;t.current.setCellFocus(n,l)}),[t,r]),s=e.useCallback((function(e,n){r.debug("Navigating to header col ".concat(e)),t.current.scrollToIndexes({colIndex:e});var i=t.current.getVisibleColumns()[e].field;t.current.setColumnHeaderFocus(i,n)}),[t,r]),l=e.useCallback((function(e){return o[e].id}),[o]),c=e.useCallback((function(e,n){var r=t.current.getRootDimensions();if(0!==o.length&&r){var i=t.current.unstable_getViewportPageSize(),c=e.field?t.current.getColumnIndex(e.field):0,u=o.findIndex((function(t){return t.id===e.id})),d=o.length-1,f=W(t).length-1,p=!0;switch(n.key){case"ArrowDown":case"Enter":u<d&&a(c,l(u+1));break;case"ArrowUp":u>0?a(c,l(u-1)):s(c,n);break;case"ArrowRight":c<f&&a(c+1,l(u),"right");break;case"ArrowLeft":c>0&&a(c-1,l(u));break;case"Tab":n.shiftKey&&c>0?a(c-1,l(u),"left"):!n.shiftKey&&c<f&&a(c+1,l(u),"right");break;case" ":if(e.field===Ic)break;var h=e.colDef;if(h&&"treeDataGroup"===h.type)break;!n.shiftKey&&u<d&&a(c,l(Math.min(u+i,d)));break;case"PageDown":u<d&&a(c,l(Math.min(u+i,d)));break;case"PageUp":var m=Math.max(u-i,0);m!==u&&m>=0?a(c,l(m)):s(c,n);break;case"Home":n.ctrlKey||n.metaKey||n.shiftKey?a(0,l(0)):a(0,l(u));break;case"End":n.ctrlKey||n.metaKey||n.shiftKey?a(f,l(d)):a(f,l(u));break;default:p=!1}p&&n.preventDefault()}}),[t,o,a,s,l]),u=e.useCallback((function(e,n){var r=n.currentTarget.querySelector(".".concat(E.columnHeaderTitleContainerContent));if((!(!!r&&r.contains(n.target))||e.field===ec.field)&&t.current.getRootDimensions()){var i=t.current.unstable_getViewportPageSize(),c=e.field?t.current.getColumnIndex(e.field):0,u=o.length-1,d=W(t).length-1,f=!0;switch(n.key){case"ArrowDown":a(c,l(0));break;case"ArrowRight":c<d&&s(c+1,n);break;case"ArrowLeft":c>0&&s(c-1,n);break;case"PageDown":null!==u&&a(c,l(Math.min(0+i,u)));break;case"Home":s(0,n);break;case"End":s(d,n);break;case"Enter":(n.ctrlKey||n.metaKey)&&t.current.toggleColumnMenu(e.field);break;case" ":break;default:f=!1}f&&n.preventDefault()}}),[t,o,a,s,l]),d=e.useCallback((function(e,n){if(n.currentTarget.contains(n.target)){var r=t.current.getCellParams(e.id,e.field);r.cellMode!==ts.Edit&&ss(n.key)&&t.current.publishEvent("cellNavigationKeyDown",r,n)}}),[t]);Ft(t,"cellNavigationKeyDown",c),Ft(t,"columnHeaderKeyDown",u),Ft(t,"cellKeyDown",d)},Dc=["rowsBeforePartialUpdates"];var Nc=function(e,t,n){var r=t?t(e):e.id;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A row was provided without id in the rows prop:";if(null==e)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",n,JSON.stringify(t)].join("\n"))}(r,e,n),r},Fc=function(e){for(var t=e.rows,n=e.getRowId,r={rowsBeforePartialUpdates:t,loadingPropBeforePartialUpdates:e.loading,rowCountPropBeforePartialUpdates:e.rowCount,idRowsLookup:{},idToIdLookup:{},ids:[]},i=0;i<t.length;i+=1){var o=t[i],a=Nc(o,n);r.idRowsLookup[a]=o,r.idToIdLookup[a]=a,r.ids.push(a)}return r},zc=function(e){var t=e.apiRef,n=e.previousTree,r=e.rowCountProp,i=e.loadingProp,o=t.current.unstable_caches.rows,a=(0,y.Z)(o,Dc),s=null!=r?r:0,l=t.current.unstable_applyStrategyProcessor("rowTreeCreation",(0,v.Z)({},a,{previousTree:n})),c=t.current.unstable_applyPipeProcessors("hydrateRows",l),u=1===c.treeDepth?c.ids.length:Object.values(c.tree).filter((function(e){return null==e.parent&&!e.isPinned})).length;return(0,v.Z)({},c,{groupingResponseBeforeRowHydration:l,loading:i,totalRowCount:Math.max(s,c.ids.length),totalTopLevelRowCount:Math.max(s,u)})},Bc=function e(t,n,r){var i,o=null==(i=t[n])?void 0:i.children;if(null==o)return[];for(var a=[],s=0;s<o.length;s+=1){var l=o[s],c=t[l];r&&c.isAutoGenerated||a.push(l),a.push.apply(a,(0,yt.Z)(e(t,c.id,r)))}return a};function jc(e){var t,n,r=we(e);return{top:(null==r||null==(t=r.top)?void 0:t.reduce((function(t,n){return t+=e.current.unstable_getRowHeight(n.id)}),0))||0,bottom:(null==r||null==(n=r.bottom)?void 0:n.reduce((function(t,n){return t+=e.current.unstable_getRowHeight(n.id)}),0))||0}}var Zc=function(e){return e?0:100},Hc=function(e){return function(t){return(0,v.Z)({},t,{pagination:(0,v.Z)({},t.pagination,{pageSize:e})})}},Uc=function(e,t){return t>0&&e>0?Math.ceil(e/t):0},Vc=function(e){return e.pageCount?(0,v.Z)({},e,{page:Math.max(Math.min(e.page,e.pageCount-1),0)}):e},Gc=function(e){return function(t){return(0,v.Z)({},t,{pagination:Vc((0,v.Z)({},t.pagination,{page:e}))})}},Wc=(F(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error"),function(e,t){var n,r,i,o,a,s,l,c,u;return u=null!=t.pageSize?t.pageSize:null!=(null==(n=t.initialState)||null==(r=n.pagination)?void 0:r.pageSize)?t.initialState.pagination.pageSize:Zc(t.autoPageSize),(0,v.Z)({},e,{pagination:{pageSize:u,page:null!=(i=null!=(o=t.page)?o:null==(a=t.initialState)||null==(s=a.pagination)?void 0:s.page)?i:0,pageCount:Uc(null!=(l=t.rowCount)?l:0,u),rowCount:null!=(c=t.rowCount)?c:0}})}),$c=function(t,n){!function(t,n){var r,i,o=ke(t,"useGridPageSize"),a=J(t,oe);t.current.unstable_registerControlState({stateId:"pageSize",propModel:n.pageSize,propOnChange:n.onPageSizeChange,stateSelector:$l,changeEvent:"pageSizeChange"});var s=e.useCallback((function(e){e!==$l(t)&&(o.debug("Setting page size to ".concat(e)),t.current.setState(Hc(e)),t.current.forceUpdate())}),[t,o]);Pt(t,{setPageSize:s});var l=e.useCallback((function(e,r){var i,o,a=$l(t);return r.exportOnlyDirtyModels&&null==n.pageSize&&null==(null==(i=n.initialState)||null==(o=i.pagination)?void 0:o.pageSize)&&a===Zc(n.autoPageSize)?e:(0,v.Z)({},e,{pagination:(0,v.Z)({},e.pagination,{pageSize:a})})}),[t,n.pageSize,null==(r=n.initialState)||null==(i=r.pagination)?void 0:i.pageSize,n.autoPageSize]),c=e.useCallback((function(e,n){var r,i=null==(r=n.stateToRestore.pagination)?void 0:r.pageSize;return null!=i&&t.current.setState(Hc(i)),e}),[t]);en(t,"exportState",l),en(t,"restoreState",c);var u=e.useCallback((function(){var e=t.current.getRootDimensions();if(n.autoPageSize&&e){var r=jc(t),i=Math.floor((e.viewportInnerSize.height-r.top-r.bottom)/a);t.current.setPageSize(i)}}),[t,n.autoPageSize,a]);Ft(t,"viewportInnerSizeChange",u),e.useEffect((function(){null==n.pageSize||n.autoPageSize||t.current.setPageSize(n.pageSize)}),[t,n.autoPageSize,n.pageSize]),e.useEffect((function(){u()}),[u])}(t,n),function(t,n){var r,i,o=ke(t,"useGridPage"),a=J(t,ut);t.current.unstable_registerControlState({stateId:"page",propModel:n.page,propOnChange:n.onPageChange,stateSelector:Wl,changeEvent:"pageChange"});var s=e.useCallback((function(e){o.debug("Setting page to ".concat(e)),t.current.setState(Gc(e)),t.current.forceUpdate()}),[t,o]);Pt(t,{setPage:s});var l=e.useCallback((function(e,r){var i,o,a=Wl(t);return r.exportOnlyDirtyModels&&null==n.page&&null==(null==(i=n.initialState)||null==(o=i.pagination)?void 0:o.page)&&0===a?e:(0,v.Z)({},e,{pagination:(0,v.Z)({},e.pagination,{page:a})})}),[t,n.page,null==(r=n.initialState)||null==(i=r.pagination)?void 0:i.page]),c=e.useCallback((function(e,n){var r,i,o=null!=(r=null==(i=n.stateToRestore.pagination)?void 0:i.page)?r:Wl(t);return t.current.setState(Gc(o)),e}),[t]);en(t,"exportState",l),en(t,"restoreState",c),Ft(t,"pageSizeChange",(function(e){t.current.setState((function(t){var n=Uc(t.pagination.rowCount,e);return(0,v.Z)({},t,{pagination:Vc((0,v.Z)({},t.pagination,{pageCount:n,page:t.pagination.page}))})})),t.current.forceUpdate()})),Ft(t,"pageChange",(function(){return t.current.scrollToIndexes({rowIndex:Wl(t)*$l(t)})})),e.useEffect((function(){}),[n.rowCount,n.paginationMode]),e.useEffect((function(){t.current.setState((function(e){var t=void 0!==n.rowCount?n.rowCount:a,r=Uc(t,e.pagination.pageSize),i=null==n.page?e.pagination.page:n.page;return(0,v.Z)({},e,{pagination:Vc((0,v.Z)({},e.pagination,{page:i,rowCount:t,pageCount:r}))})})),t.current.forceUpdate()}),[a,n.rowCount,n.page,n.paginationMode,t])}(t,n)},qc=function(e){return e.preferencePanel},Yc=function(e,t){var n,r;return(0,v.Z)({},e,{preferencePanel:null!=(n=null==(r=t.initialState)?void 0:r.preferencePanel)?n:{open:!1}})},Xc=function(e){return e.editRows};function Kc(e){return"function"===typeof e.then}var Jc,Qc,eu=function(e){return(0,v.Z)({},e,{editRows:{}})};function tu(t,n){var r,a=ke(t,"useGridEditRows");!function(t,n){var r,i=ke(t,"useGridEditRows"),a=function(e){return function(){n.editMode===es.Cell&&e.apply(void 0,arguments)}},s=e.useCallback((function(e,n,r){t.current.getCellMode(e,n)!==r&&(i.debug("Switching cell id: ".concat(e," field: ").concat(n," to mode: ").concat(r)),t.current.setState((function(i){var o=(0,v.Z)({},i.editRows);return o[e]=(0,v.Z)({},o[e]),r===ts.Edit?o[e][n]={value:t.current.getCellValue(e,n)}:(delete o[e][n],Object.keys(o[e]).length||delete o[e]),(0,v.Z)({},i,{editRows:o})})),t.current.forceUpdate(),t.current.publishEvent("cellModeChange",t.current.getCellParams(e,n)))}),[t,i]),l=e.useCallback((function(e,n){var r=Xc(t.current.state);return r[e]&&r[e][n]?ts.Edit:ts.View}),[t]),c=e.useCallback((function(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.id,a=e.field;t.current.unstable_runPendingEditCellValueMutation(o,a);var s=t.current.getEditRowsModel();if(!s[o]||!s[o][a])throw new Error("MUI: Cell at id: ".concat(o," and field: ").concat(a," is not in edit mode."));var l=s[o][a],c=t.current.getColumn(a),u=t.current.getRow(o);if(null!=(r=n.experimentalFeatures)&&r.preventCommitWhileValidating){var d=s[o][a];if(d.isValidating||d.error)return!1}var f=(0,v.Z)({},e,{value:l.value}),p=!!l.error;if(!p&&"function"===typeof c.preProcessEditCellProps){var h=c.preProcessEditCellProps({id:o,row:u,props:l});if(Kc(h))return h.then((function(e){return t.current.unstable_setEditCellProps({id:o,field:a,props:e}),!e.error&&(t.current.publishEvent("cellEditCommit",f,i),!0)}));t.current.unstable_setEditCellProps({id:o,field:a,props:h}),p=!!h.error}return!p&&(t.current.publishEvent("cellEditCommit",f,i),!0)}),[t,null==(r=n.experimentalFeatures)?void 0:r.preventCommitWhileValidating]),u=e.useCallback((function(e){var n=t.current.getColumn(e.field),r=t.current.getRow(e.id);return new Promise((function(i){var o={value:e.value},a=t.current.getEditRowsModel()[e.id][e.field];if("function"!==typeof n.preProcessEditCellProps)return t.current.unstable_setEditCellProps((0,v.Z)({},e,{props:o})),void i(!0);o=t.current.unstable_setEditCellProps((0,v.Z)({},e,{props:(0,v.Z)({},a,{isValidating:!0})})),Promise.resolve(n.preProcessEditCellProps({id:e.id,row:r,props:(0,v.Z)({},o,{value:t.current.unstable_parseValue(e.id,e.field,e.value)})})).then((function(n){t.current.unstable_setEditCellProps((0,v.Z)({},e,{props:(0,v.Z)({},n,{isValidating:!1})})),i(!n.error)}))}))}),[t]);Pt(t,{setCellMode:s,getCellMode:l,commitCellChange:c,unstable_setCellEditingEditCellValue:u});var d=e.useCallback(function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(n,r){var i,o,a,s,l,c;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(229!==r.which){e.next=2;break}return e.abrupt("return");case 2:if(i=n.id,o=n.field,a=n.cellMode,n.isEditable){e.next=5;break}return e.abrupt("return");case 5:if(s=a===ts.Edit,l=r.ctrlKey||r.metaKey||r.altKey,s||!os(r)||l||" "===r.key&&r.shiftKey||t.current.publishEvent("cellEditStart",n,r),!s&&Ja(r.key)&&(t.current.setEditCellValue({id:i,field:o,value:""}),t.current.commitCellChange({id:i,field:o},r),t.current.publishEvent("cellEditStop",n,r)),!s||!as(r.key)){e.next=16;break}return c={id:i,field:o},e.next=13,t.current.commitCellChange(c,r);case 13:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:s&&(u=r.key,rs.indexOf(u)>-1)&&t.current.publishEvent("cellEditStop",n,r);case 17:case"end":return e.stop()}var u}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),f=e.useCallback((function(e,n){e.isEditable&&t.current.publishEvent("cellEditStart",e,n)}),[t]),p=function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(n,r){return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.cellMode!==ts.View){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.current.commitCellChange(n,r);case 4:t.current.publishEvent("cellEditStop",n,r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=(0,Ue.Z)((function(e,t){p(e,t)})),m=(0,Ue.Z)((function(){var e=Nl(t);if(e){var n=t.current.getCellParams(e.id,e.field);p(n,{})}})),g=e.useCallback((function(e,n){e.isEditable&&(t.current.setCellMode(e.id,e.field,ts.Edit),ls(n)&&Qa(n)&&t.current.unstable_setEditCellProps({id:e.id,field:e.field,props:{value:""}}))}),[t]),y=e.useCallback((function(e,n){t.current.setCellMode(e.id,e.field,ts.View),ls(n)&&(as(n.key)?t.current.publishEvent("cellNavigationKeyDown",e,n):("Escape"===n.key||Ja(n.key))&&t.current.setCellFocus(e.id,e.field))}),[t]),b=e.useCallback((function(e){var n=e.id,r=e.field,a=t.current.getEditRowsModel()[n][r].value;i.debug("Setting cell id: ".concat(n," field: ").concat(r," to value: ").concat(null==a?void 0:a.toString()));var s=t.current.getRow(n);if(s){var l=t.current.getColumn(e.field),c=(0,v.Z)({},s,(0,o.Z)({},r,a));l.valueSetter&&(c=l.valueSetter({row:s,value:a})),t.current.updateRows([c])}}),[t,i]),x=e.useCallback((function(e){var n=t.current.getRow(e.id),r=t.current.getColumn(e.field),i=r.preProcessEditCellProps?r.preProcessEditCellProps({id:e.id,row:n,props:e.props}):e.props;Kc(i)?i.then((function(n){t.current.unstable_setEditCellProps((0,v.Z)({},e,{props:n}))})):t.current.unstable_setEditCellProps((0,v.Z)({},e,{props:i}))}),[t]);Ft(t,"cellKeyDown",a(d)),Ft(t,"cellDoubleClick",a(f)),Ft(t,"cellFocusOut",a(h)),Ft(t,"columnHeaderDragStart",a(m)),Ft(t,"cellEditStart",a(g)),Ft(t,"cellEditStop",a(y)),Ft(t,"cellEditCommit",a(b)),Ft(t,"editCellPropsChange",a(x)),Bt(t,"cellEditCommit",n.onCellEditCommit),Bt(t,"cellEditStart",n.onCellEditStart),Bt(t,"cellEditStop",n.onCellEditStop)}(t,n),function(t,n){var r,i,o=e.useRef(null),a=e.useRef(null),s=J(t,V),l=function(e){return function(){n.editMode===es.Row&&e.apply(void 0,arguments)}},c=e.useCallback((function(e,n){n!==t.current.getRowMode(e)&&(t.current.setState((function(r){var i=(0,v.Z)({},r.editRows);return n===ns.Edit?(i[e]={},s.forEach((function(n){var r=t.current.getCellParams(e,n.field);r.isEditable&&(i[e][n.field]={value:r.value})}))):delete i[e],(0,v.Z)({},r,{editRows:i})})),t.current.forceUpdate())}),[t,s]),u=e.useCallback((function(e){return n.editMode===es.Cell?ns.View:Xc(t.current.state)[e]?ns.Edit:ns.View}),[t,n.editMode]),d=e.useCallback((function(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.editMode===es.Cell)throw new Error("MUI: You can't commit changes when the edit mode is 'cell'.");t.current.unstable_runPendingEditCellValueMutation(e);var o=t.current.getEditRowsModel()[e];if(!o)throw new Error("MUI: Row at id: ".concat(e," is not being edited."));if(null!=(r=n.experimentalFeatures)&&r.preventCommitWhileValidating&&!Object.keys(o).reduce((function(e,t){return e&&!o[t].isValidating&&!o[t].error}),!0))return!1;if(Object.values(o).some((function(e){return!!e.error})))return!1;var a=Object.keys(o).filter((function(e){return"function"===typeof t.current.getColumn(e).preProcessEditCellProps}));if(a.length>0){var s=t.current.getRow(e),l=a.map(function(){var n=(0,rn.Z)((0,nn.Z)().mark((function n(r){var i,a;return(0,nn.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.current.getColumn(r),n.next=3,Promise.resolve(i.preProcessEditCellProps({id:e,row:s,props:o[r]}));case 3:return a=n.sent,t.current.unstable_setEditCellProps({id:e,field:r,props:a}),n.abrupt("return",a.error);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return Promise.all(l).then((function(n){return!n.some((function(e){return!!e}))&&(t.current.publishEvent("rowEditCommit",e,i),!0)}))}return t.current.publishEvent("rowEditCommit",e,i),!0}),[t,n.editMode,null==(r=n.experimentalFeatures)?void 0:r.preventCommitWhileValidating]),f=e.useCallback((function(e){var n=t.current.getEditRowsModel()[e.id],r=t.current.getRow(e.id),i=!0;return new Promise((function(o){Object.keys(n).forEach(function(){var o=(0,rn.Z)((0,nn.Z)().mark((function o(a){var s,l;return(0,nn.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=t.current.getColumn(a),l=a===e.field?{value:e.value}:n[a],l=t.current.unstable_setEditCellProps({id:e.id,field:a,props:(0,v.Z)({},l,{isValidating:!0})}),!s.preProcessEditCellProps){o.next=7;break}return o.next=6,Promise.resolve(s.preProcessEditCellProps({id:e.id,row:r,props:(0,v.Z)({},l,{value:a===e.field?t.current.unstable_parseValue(e.id,a,e.value):l.value})}));case 6:l=o.sent;case 7:l.error&&(i=!1),t.current.unstable_setEditCellProps({id:e.id,field:a,props:(0,v.Z)({},l,{isValidating:!1})});case 9:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()),o(i)}))}),[t]);Pt(t,{setRowMode:c,getRowMode:u,commitRowChange:d,unstable_setRowEditingEditCellValue:f});var p=e.useCallback(function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(r,i){var o,a,s,l;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(229!==i.which){e.next=2;break}return e.abrupt("return");case 2:if(o=r.cellMode,r.isEditable){e.next=5;break}return e.abrupt("return");case 5:if(a=o===ts.Edit,s=t.current.getRowParams(r.id),!a){e.next=20;break}if("Enter"!==i.key){e.next=17;break}return e.next=11,t.current.commitRowChange(r.id);case 11:if(e.sent||null==(l=n.experimentalFeatures)||!l.preventCommitWhileValidating){e.next=14;break}return e.abrupt("return");case 14:t.current.publishEvent("rowEditStop",s,i),e.next=18;break;case 17:"Escape"===i.key&&t.current.publishEvent("rowEditStop",s,i);case 18:e.next=21;break;case 20:"Enter"===i.key&&t.current.publishEvent("rowEditStart",s,i);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,null==(i=n.experimentalFeatures)?void 0:i.preventCommitWhileValidating]),h=e.useCallback((function(e,n){if(e.isEditable){var r=t.current.getRowParams(e.id);t.current.publishEvent("rowEditStart",r,n)}}),[t]),m=e.useCallback((function(e){var n=t.current.getRow(e.id),r=t.current.getEditRowsModel()[e.id];Object.keys(r).forEach(function(){var i=(0,rn.Z)((0,nn.Z)().mark((function i(o){var a,s,l;return(0,nn.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(a=t.current.getColumn(o)).preProcessEditCellProps){i.next=9;break}return s=o===e.field?e.props:r[o],i.next=5,Promise.resolve(a.preProcessEditCellProps({id:e.id,row:n,props:s}));case 5:l=i.sent,t.current.unstable_setEditCellProps({id:e.id,field:o,props:l}),i.next=10;break;case 9:o===e.field&&t.current.unstable_setEditCellProps(e);case 10:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}),[t]),g=e.useCallback((function(e){t.current.setRowMode(e.id,ns.Edit)}),[t]),y=e.useCallback((function(e,n){t.current.setRowMode(e.id,ns.View),"Enter"===n.key&&t.current.publishEvent("cellNavigationKeyDown",e,n)}),[t]),b=e.useCallback((function(e){var n=t.current.getEditRowsModel()[e];if(!n)throw new Error("MUI: Row at id: ".concat(e," is not being edited."));var r=t.current.getRow(e);if(r){var i=(0,v.Z)({},r);Object.keys(n).forEach((function(e){var r=t.current.getColumn(e),o=n[e].value;r.valueSetter?i=r.valueSetter({row:i,value:o}):i[e]=o})),t.current.updateRows([i])}}),[t]),x=e.useCallback((function(e){a.current=e}),[]),w=function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(n,r){return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.cellMode!==ts.View){e.next=2;break}return e.abrupt("return");case 2:a.current=null,o.current=setTimeout((0,rn.Z)((0,nn.Z)().mark((function e(){var i,o;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==(i=a.current)?void 0:i.id)===n.id){e.next=5;break}return e.next=3,t.current.commitRowChange(n.id,r);case 3:o=t.current.getRowParams(n.id),t.current.publishEvent("rowEditStop",o,r);case 5:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=(0,Ue.Z)((function(e,t){w(e,t)})),S=(0,Ue.Z)((function(){var e=Nl(t);if(e){var n=t.current.getCellParams(e.id,e.field);w(n,{})}}));Ft(t,"cellKeyDown",l(p)),Ft(t,"cellDoubleClick",l(h)),Ft(t,"editCellPropsChange",l(m)),Ft(t,"rowEditStart",l(g)),Ft(t,"rowEditStop",l(y)),Ft(t,"rowEditCommit",l(b)),Ft(t,"cellFocusIn",l(x)),Ft(t,"cellFocusOut",l(_)),Ft(t,"columnHeaderDragStart",l(S)),Bt(t,"rowEditCommit",n.onRowEditCommit),Bt(t,"rowEditStart",n.onRowEditStart),Bt(t,"rowEditStop",n.onRowEditStop)}(t,n);var s=e.useRef({});t.current.unstable_registerControlState({stateId:"editRows",propModel:n.editRowsModel,propOnChange:n.onEditRowsModelChange,stateSelector:Xc,changeEvent:"editRowsModelChange"});var l=e.useCallback((function(e){return!e.rowNode.isAutoGenerated&&!e.rowNode.isPinned&&!!e.colDef.editable&&!!e.colDef.renderEditCell&&(!n.isCellEditable||n.isCellEditable(e))}),[n.isCellEditable]),c=function(e,t,n,r){if(n){if(s.current[e]||(s.current[e]={}),s.current[e][t]){var o=(0,i.Z)(s.current[e][t],1)[0];clearTimeout(o)}var a=setTimeout((function(){r(),delete s.current[e][t]}),n);s.current[e][t]=[a,function(){r();var n=(0,i.Z)(s.current[e][t],1)[0];clearTimeout(n),delete s.current[e][t]}]}else r()},u=e.useCallback((function(e,t){if(s.current[e])if(t){if(s.current[e][t]){(0,(0,i.Z)(s.current[e][t],2)[1])()}}else Object.keys(s.current[e]).forEach((function(t){(0,(0,i.Z)(s.current[e][t],2)[1])()}))}),[]),d=e.useCallback((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(e.id,e.field,e.debounceMs,(function(){var i;if(null!=(i=n.experimentalFeatures)&&i.preventCommitWhileValidating)return"row"===n.editMode?t.current.unstable_setRowEditingEditCellValue(e):t.current.unstable_setCellEditingEditCellValue(e);var o={id:e.id,field:e.field,props:{value:e.value}};return t.current.publishEvent("editCellPropsChange",o,r)}))}),[t,n.editMode,null==(r=n.experimentalFeatures)?void 0:r.preventCommitWhileValidating]),f=e.useCallback((function(e,n,r){var i=t.current.getColumn(n);return i.valueParser?i.valueParser(r,t.current.getCellParams(e,n)):r}),[t]),p=e.useCallback((function(e){var n=e.id,r=e.field,i=e.props;return a.debug("Setting cell props on id: ".concat(n," field: ").concat(r)),t.current.setState((function(e){var t=(0,v.Z)({},e.editRows);return t[n]=(0,v.Z)({},e.editRows[n]),t[n][r]=(0,v.Z)({},i,{value:f(n,r,i.value)}),(0,v.Z)({},e,{editRows:t})})),t.current.forceUpdate(),Xc(t.current.state)[n][r]}),[t,a,f]),h=e.useCallback((function(e){Xc(t.current.state)!==e&&(a.debug("Setting editRows model"),t.current.setState((function(t){return(0,v.Z)({},t,{editRows:e})})),t.current.forceUpdate())}),[t,a]),m=e.useCallback((function(){return Xc(t.current.state)}),[t]),g=e.useCallback((function(e,t){var n=t.detail>1;e.isEditable&&e.cellMode===ts.View&&n&&t.preventDefault()}),[]);Ft(t,"cellMouseDown",g),Bt(t,"editCellPropsChange",n.onEditCellPropsChange),Pt(t,{isCellEditable:l,setEditRowsModel:h,getEditRowsModel:m,setEditCellValue:d,unstable_setEditCellProps:p,unstable_parseValue:f,unstable_runPendingEditCellValueMutation:u}),e.useEffect((function(){void 0!==n.editRowsModel&&t.current.setEditRowsModel(n.editRowsModel)}),[t,n.editRowsModel])}!function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"}(Jc||(Jc={})),function(e){e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"}(Qc||(Qc={}));var nu,ru,iu=["id","field"],ou=["id","field"],au=F(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error");!function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"}(nu||(nu={})),function(e){e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"}(ru||(ru={}));var su=["id"],lu=["id"],cu=F(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error"),uu=function(e){return(0,v.Z)({},e,{editRows:{}})},du=function(t,n){!function(t,n){var r=e.useState({}),a=(0,i.Z)(r,2),s=a[0],l=a[1],c=e.useRef(s),u=e.useRef({}),d=n.processRowUpdate,f=n.onProcessRowUpdateError,p=n.cellModesModel,h=n.onCellModesModelChange,m=n.signature,g=function(e){return function(){n.editMode===es.Cell&&e.apply(void 0,arguments)}},b=e.useCallback((function(e,n){var r=t.current.getCellParams(e,n);if(!t.current.isCellEditable(r))throw new Error("MUI: The cell with id=".concat(e," and field=").concat(n," is not editable."))}),[t]),x=e.useCallback((function(e,n,r){if(t.current.getCellMode(e,n)!==r)throw new Error("MUI: The cell with id=".concat(e," and field=").concat(n," is not in ").concat(r," mode."))}),[t]),w=e.useCallback((function(e,n){if(e.isEditable&&e.cellMode!==ts.Edit){var r=(0,v.Z)({},e,{reason:Jc.cellDoubleClick});t.current.publishEvent("cellEditStart",r,n)}}),[t]),_=e.useCallback((function(e,n){if(e.cellMode!==ts.View&&t.current.getCellMode(e.id,e.field)!==ts.View){var r=(0,v.Z)({},e,{reason:Qc.cellFocusOut});t.current.publishEvent("cellEditStop",r,n)}}),[t]),S=e.useCallback((function(e,n){if(e.cellMode===ts.Edit){if(229===n.which)return;var r;if("Escape"===n.key?r=Qc.escapeKeyDown:"Enter"===n.key?r=Qc.enterKeyDown:"Tab"===n.key&&(r=n.shiftKey?Qc.shiftTabKeyDown:Qc.tabKeyDown,n.preventDefault()),r){var i=(0,v.Z)({},e,{reason:r});t.current.publishEvent("cellEditStop",i,n)}}else if(e.isEditable){var o;if(" "===n.key&&n.shiftKey)return;if(Qa(n)||(n.ctrlKey||n.metaKey)&&"v"===n.key?o=Jc.printableKeyDown:"Enter"===n.key?o=Jc.enterKeyDown:"Delete"!==n.key&&"Backspace"!==n.key||(o=Jc.deleteKeyDown),o){var a=(0,v.Z)({},e,{reason:o,key:n.key});t.current.publishEvent("cellEditStart",a,n)}}}),[t]),C=e.useCallback((function(n){var r=n.id,i=n.field,o=n.reason,a=n.key,s={id:r,field:i};o===Jc.printableKeyDown?e.version.startsWith("18")?s.initialValue=a:s.deleteValue=!0:o===Jc.deleteKeyDown&&(s.deleteValue=!0),t.current.startCellEditMode(s)}),[t]),k=e.useCallback((function(e){var r,i=e.id,o=e.field,a=e.reason;t.current.unstable_runPendingEditCellValueMutation(i,o),a===Qc.enterKeyDown?r="below":a===Qc.tabKeyDown?r="right":a===Qc.shiftTabKeyDown&&(r="left");var s="escapeKeyDown"===a;Xc(t.current.state)[i][o].isProcessingProps&&!n.disableIgnoreModificationsIfProcessingProps&&(s=!0),t.current.stopCellEditMode({id:i,field:o,ignoreModifications:s,cellToFocusAfter:r})}),[t,n.disableIgnoreModificationsIfProcessingProps]);Ft(t,"cellDoubleClick",g(w)),Ft(t,"cellFocusOut",g(_)),Ft(t,"cellKeyDown",g(S)),Ft(t,"cellEditStart",g(C)),Ft(t,"cellEditStop",g(k)),Bt(t,"cellEditStart",n.onCellEditStart),Bt(t,"cellEditStop",n.onCellEditStop);var M=e.useCallback((function(e,n){var r=Xc(t.current.state);return r[e]&&r[e][n]?ts.Edit:ts.View}),[t]),T=(0,Dr.Z)((function(e){var r=e!==n.cellModesModel;if(h&&r){var i=m===Rt.DataGridPro?{api:t.current}:{};h(e,i)}n.cellModesModel&&r||(l(e),c.current=e,t.current.publishEvent("cellModesModelChange",e))})),A=e.useCallback((function(e,t,n){var r=(0,v.Z)({},c.current);if(null!==n)r[e]=(0,v.Z)({},r[e],(0,o.Z)({},t,(0,v.Z)({},n)));else{var i=r[e],a=(0,y.Z)(i,[t].map(Ee.Z));r[e]=a,0===Object.keys(r[e]).length&&delete r[e]}T(r)}),[T]),E=e.useCallback((function(e,n,r){t.current.setState((function(t){var i=(0,v.Z)({},t.editRows);return null!==r?i[e]=(0,v.Z)({},i[e],(0,o.Z)({},n,(0,v.Z)({},r))):(delete i[e][n],0===Object.keys(i[e]).length&&delete i[e]),(0,v.Z)({},t,{editRows:i})})),t.current.forceUpdate()}),[t]),P=e.useCallback((function(e){var t=e.id,n=e.field,r=(0,y.Z)(e,iu);b(t,n),x(t,n,ts.View),A(t,n,(0,v.Z)({mode:ts.Edit},r))}),[b,x,A]),R=(0,Dr.Z)((function(e){var n=e.id,r=e.field,i=e.deleteValue,o=e.initialValue,a=t.current.getCellValue(n,r);(i||o)&&(a=i?"":o),E(n,r,{value:a,error:!1,isProcessingProps:!1}),t.current.setCellFocus(n,r)})),O=e.useCallback((function(e){var t=e.id,n=e.field,r=(0,y.Z)(e,ou);x(t,n,ts.Edit),A(t,n,(0,v.Z)({mode:ts.View},r))}),[x,A]),I=(0,Dr.Z)(function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(n){var r,i,o,a,s,l,c,p,h,m,g,v,y;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,i=n.field,o=n.ignoreModifications,a=n.cellToFocusAfter,s=void 0===a?"none":a,x(r,i,ts.Edit),t.current.unstable_runPendingEditCellValueMutation(r,i),l=function(){E(r,i,null),A(r,i,null),"none"!==s&&t.current.unstable_moveFocusToRelativeCell(r,i,s)},!o){e.next=7;break}return l(),e.abrupt("return");case 7:if(c=Xc(t.current.state),p=c[r][i],h=p.error,m=p.isProcessingProps,!h&&!m){e.next=13;break}return u.current[r][i].mode=ts.Edit,A(r,i,{mode:ts.Edit}),e.abrupt("return");case 13:if(g=t.current.unstable_getRowWithUpdatedValuesFromCellEditing(r,i),d){v=function(e){u.current[r][i].mode=ts.Edit,A(r,i,{mode:ts.Edit}),f?f(e):au()};try{y=t.current.getRow(r),Promise.resolve(d(g,y)).then((function(e){t.current.updateRows([e]),l()})).catch(v)}catch(b){v(b)}}else t.current.updateRows([g]),l();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=e.useCallback(function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(n){var r,i,o,a,s,l,c,u,d,f,p,h,m;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.id,a=n.field,s=n.value,l=n.debounceMs,c=n.unstable_skipValueParser,b(o,a),x(o,a,ts.Edit),u=t.current.getColumn(a),d=t.current.getRow(o),f=s,u.valueParser&&!c&&(f=u.valueParser(s,t.current.getCellParams(o,a))),p=Xc(t.current.state),h=(0,v.Z)({},p[o][a],{value:f,changeReason:l?"debouncedSetEditCellValue":"setEditCellValue"}),!u.preProcessEditCellProps){e.next=16;break}return m=s!==p[o][a].value,h=(0,v.Z)({},h,{isProcessingProps:!0}),E(o,a,h),e.next=15,Promise.resolve(u.preProcessEditCellProps({id:o,row:d,props:h,hasChanged:m}));case 15:h=e.sent;case 16:if(t.current.getCellMode(o,a)!==ts.View){e.next=18;break}return e.abrupt("return",!1);case 18:return p=Xc(t.current.state),(h=(0,v.Z)({},h,{isProcessingProps:!1})).value=u.preProcessEditCellProps?p[o][a].value:f,E(o,a,h),p=Xc(t.current.state),e.abrupt("return",!(null!=(r=p[o])&&null!=(i=r[a])&&i.error));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,b,x,E]),D=e.useCallback((function(e,n){var r=t.current.getColumn(n),i=Xc(t.current.state)[e][n].value,a=t.current.getRow(e);return r.valueSetter?r.valueSetter({value:i,row:a}):(0,v.Z)({},a,(0,o.Z)({},n,i))}),[t]);Pt(t,{getCellMode:M,startCellEditMode:P,stopCellEditMode:O,unstable_setCellEditingEditCellValue:L,unstable_getRowWithUpdatedValuesFromCellEditing:D}),e.useEffect((function(){p&&T(p)}),[p,T]),e.useEffect((function(){var e=me(t),n=u.current;u.current=Ct(s),Object.entries(s).forEach((function(t){var r=(0,i.Z)(t,2),o=r[0],a=r[1];Object.entries(a).forEach((function(t){var r,a,s,l=(0,i.Z)(t,2),c=l[0],u=l[1],d=(null==(r=n[o])||null==(a=r[c])?void 0:a.mode)||ts.View,f=null!=(s=e[o])?s:o;u.mode===ts.Edit&&d===ts.View?R((0,v.Z)({id:f,field:c},u)):u.mode===ts.View&&d===ts.Edit&&I((0,v.Z)({id:f,field:c},u))}))}))}),[t,s,R,I])}(t,n),function(t,n){var r=e.useState({}),a=(0,i.Z)(r,2),s=a[0],l=a[1],c=e.useRef(s),u=e.useRef({}),d=e.useRef(null),f=e.useRef(null),p=n.processRowUpdate,h=n.onProcessRowUpdateError,m=n.rowModesModel,g=n.onRowModesModelChange,b=n.signature,x=function(e){return function(){n.editMode===es.Row&&e.apply(void 0,arguments)}},w=e.useCallback((function(e,n){var r=t.current.getCellParams(e,n);if(!t.current.isCellEditable(r))throw new Error("MUI: The cell with id=".concat(e," and field=").concat(n," is not editable."))}),[t]),_=e.useCallback((function(e,n){if(t.current.getRowMode(e)!==n)throw new Error("MUI: The row with id=".concat(e," is not in ").concat(n," mode."))}),[t]),S=e.useCallback((function(e,n){if(e.isEditable&&t.current.getRowMode(e.id)!==ns.Edit){var r=t.current.getRowParams(e.id),i=(0,v.Z)({},r,{field:e.field,reason:nu.cellDoubleClick});t.current.publishEvent("rowEditStart",i,n)}}),[t]),C=e.useCallback((function(e){f.current=e}),[]),k=e.useCallback((function(e,n){e.isEditable&&t.current.getRowMode(e.id)!==ns.View&&(f.current=null,d.current=setTimeout((function(){var r;if(d.current=null,(null==(r=f.current)?void 0:r.id)!==e.id){if(!t.current.getRow(e.id))return;if(t.current.getRowMode(e.id)===ns.View)return;var i=t.current.getRowParams(e.id),o=(0,v.Z)({},i,{field:e.field,reason:ru.rowFocusOut});t.current.publishEvent("rowEditStop",o,n)}})))}),[t]);e.useEffect((function(){return function(){clearTimeout(d.current)}}),[]);var M=e.useCallback((function(e,n){if(e.cellMode===ns.Edit){if(229===n.which)return;var r;if("Escape"===n.key)r=ru.escapeKeyDown;else if("Enter"===n.key)r=ru.enterKeyDown;else if("Tab"===n.key){var i=H(t).filter((function(n){return t.current.isCellEditable(t.current.getCellParams(e.id,n))}));n.shiftKey?e.field===i[0]&&(r=ru.shiftTabKeyDown):e.field===i[i.length-1]&&(r=ru.tabKeyDown),r&&n.preventDefault()}if(r){var o=t.current.getRowParams(e.id),a=(0,v.Z)({},o,{reason:r,field:e.field});t.current.publishEvent("rowEditStop",a,n)}}else if(e.isEditable){var s;if(" "===n.key&&n.shiftKey)return;if(Qa(n)||(n.ctrlKey||n.metaKey)&&"v"===n.key?s=nu.printableKeyDown:"Enter"===n.key?s=nu.enterKeyDown:"Delete"!==n.key&&"Backspace"!==n.key||(s=nu.deleteKeyDown),s){var l=t.current.getRowParams(e.id),c=(0,v.Z)({},l,{field:e.field,key:n.key,reason:s});t.current.publishEvent("rowEditStart",c,n)}}}),[t]),T=e.useCallback((function(n){var r=n.id,i=n.field,o=n.reason,a=n.key,s={id:r,fieldToFocus:i};o===nu.printableKeyDown?e.version.startsWith("18")?s.initialValue=a:s.deleteValue=!!i:o===nu.deleteKeyDown&&(s.deleteValue=!!i),t.current.startRowEditMode(s)}),[t]),A=e.useCallback((function(e){var r,i=e.id,o=e.reason,a=e.field;t.current.unstable_runPendingEditCellValueMutation(i),o===ru.enterKeyDown?r="below":o===ru.tabKeyDown?r="right":o===ru.shiftTabKeyDown&&(r="left");var s="escapeKeyDown"===o,l=Xc(t.current.state);s||n.disableIgnoreModificationsIfProcessingProps||(s=Object.values(l[i]).some((function(e){return e.isProcessingProps}))),t.current.stopRowEditMode({id:i,ignoreModifications:s,field:a,cellToFocusAfter:r})}),[t,n.disableIgnoreModificationsIfProcessingProps]);Ft(t,"cellDoubleClick",x(S)),Ft(t,"cellFocusIn",x(C)),Ft(t,"cellFocusOut",x(k)),Ft(t,"cellKeyDown",x(M)),Ft(t,"rowEditStart",x(T)),Ft(t,"rowEditStop",x(A)),Bt(t,"rowEditStart",n.onRowEditStart),Bt(t,"rowEditStop",n.onRowEditStop);var E=e.useCallback((function(e){if(n.editMode===es.Cell)return ns.View;var r=Xc(t.current.state);return r[e]&&Object.keys(r[e]).length>0?ns.Edit:ns.View}),[t,n.editMode]),P=(0,Dr.Z)((function(e){var r=e!==n.rowModesModel;if(g&&r){var i=b===Rt.DataGridPro?{api:t.current}:{};g(e,i)}n.rowModesModel&&r||(l(e),c.current=e,t.current.publishEvent("rowModesModelChange",e))})),R=e.useCallback((function(e,t){var n=(0,v.Z)({},c.current);null!==t?n[e]=(0,v.Z)({},t):delete n[e],P(n)}),[P]),O=e.useCallback((function(e,n){t.current.setState((function(t){var r=(0,v.Z)({},t.editRows);return null!==n?r[e]=n:delete r[e],(0,v.Z)({},t,{editRows:r})})),t.current.forceUpdate()}),[t]),I=e.useCallback((function(e,n,r){t.current.setState((function(t){var i=(0,v.Z)({},t.editRows);return null!==r?i[e]=(0,v.Z)({},i[e],(0,o.Z)({},n,(0,v.Z)({},r))):(delete i[e][n],0===Object.keys(i[e]).length&&delete i[e]),(0,v.Z)({},t,{editRows:i})})),t.current.forceUpdate()}),[t]),L=e.useCallback((function(e){var t=e.id,n=(0,y.Z)(e,su);_(t,ns.View),R(t,(0,v.Z)({mode:ns.Edit},n))}),[_,R]),D=(0,Dr.Z)((function(e){var n=e.id,r=e.fieldToFocus,i=e.deleteValue,o=e.initialValue,a=H(t).reduce((function(e,a){if(!t.current.getCellParams(n,a).isEditable)return e;var s=t.current.getCellValue(n,a);return r===a&&(i||o)&&(s=i?"":o),e[a]={value:s,error:!1,isProcessingProps:!1},e}),{});O(n,a),r&&t.current.setCellFocus(n,r)})),N=e.useCallback((function(e){var t=e.id,n=(0,y.Z)(e,lu);_(t,ns.Edit),R(t,(0,v.Z)({mode:ns.View},n))}),[_,R]),F=(0,Dr.Z)((function(e){var n=e.id,r=e.ignoreModifications,i=e.field,o=e.cellToFocusAfter,a=void 0===o?"none":o;t.current.unstable_runPendingEditCellValueMutation(n);var s=function(){"none"!==a&&i&&t.current.unstable_moveFocusToRelativeCell(n,i,a),O(n,null),R(n,null)};if(r)s();else{var l=Xc(t.current.state),c=t.current.getRow(n);if(Object.values(l[n]).some((function(e){return e.isProcessingProps})))u.current[n].mode=ns.Edit;else{if(Object.values(l[n]).some((function(e){return e.error})))return u.current[n].mode=ns.Edit,void R(n,{mode:ns.Edit});var d=t.current.unstable_getRowWithUpdatedValuesFromRowEditing(n);if(p){var f=function(e){u.current[n].mode=ns.Edit,R(n,{mode:ns.Edit}),h?h(e):cu()};try{Promise.resolve(p(d,c)).then((function(e){t.current.updateRows([e]),s()})).catch(f)}catch(m){f(m)}}else t.current.updateRows([d]),s()}}})),z=e.useCallback((function(e){var n=e.id,r=e.field,o=e.value,a=e.debounceMs,s=e.unstable_skipValueParser;w(n,r);var l=t.current.getColumn(r),c=t.current.getRow(n),u=o;l.valueParser&&!s&&(u=l.valueParser(o,t.current.getCellParams(n,r)));var d=Xc(t.current.state),f=(0,v.Z)({},d[n][r],{value:u,changeReason:a?"debouncedSetEditCellValue":"setEditCellValue"});return l.preProcessEditCellProps||I(n,r,f),new Promise((function(e){var o=[];if(l.preProcessEditCellProps){var a=f.value!==d[n][r].value;f=(0,v.Z)({},f,{isProcessingProps:!0}),I(n,r,f);var s=d[n],p=(0,y.Z)(s,[r].map(Ee.Z)),h=Promise.resolve(l.preProcessEditCellProps({id:n,row:c,props:f,hasChanged:a,otherFieldsProps:p})).then((function(i){t.current.getRowMode(n)!==ns.View?(d=Xc(t.current.state),(i=(0,v.Z)({},i,{isProcessingProps:!1})).value=l.preProcessEditCellProps?d[n][r].value:u,I(n,r,i)):e(!1)}));o.push(h)}Object.entries(d[n]).forEach((function(a){var s=(0,i.Z)(a,2),l=s[0],u=s[1];if(l!==r){var f=t.current.getColumn(l);if(f.preProcessEditCellProps){u=(0,v.Z)({},u,{isProcessingProps:!0}),I(n,l,u);var p=(d=Xc(t.current.state))[n],h=(0,y.Z)(p,[l].map(Ee.Z)),m=Promise.resolve(f.preProcessEditCellProps({id:n,row:c,props:u,hasChanged:!1,otherFieldsProps:h})).then((function(r){t.current.getRowMode(n)!==ns.View?(r=(0,v.Z)({},r,{isProcessingProps:!1}),I(n,l,r)):e(!1)}));o.push(m)}}})),Promise.all(o).then((function(){t.current.getRowMode(n)===ns.Edit?(d=Xc(t.current.state),e(!d[n][r].error)):e(!1)}))}))}),[t,w,I]),B=e.useCallback((function(e){var n=Xc(t.current.state),r=t.current.getRow(e),o=(0,v.Z)({},r);return Object.entries(n[e]).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1],s=t.current.getColumn(r);s.valueSetter?o=s.valueSetter({value:a.value,row:o}):o[r]=a.value})),o}),[t]);Pt(t,{getRowMode:E,startRowEditMode:L,stopRowEditMode:N,unstable_setRowEditingEditCellValue:z,unstable_getRowWithUpdatedValuesFromRowEditing:B}),e.useEffect((function(){m&&P(m)}),[m,P]),e.useEffect((function(){var e=me(t),n=u.current;u.current=Ct(s),Object.entries(s).forEach((function(t){var r,o,a=(0,i.Z)(t,2),s=a[0],l=a[1],c=(null==(r=n[s])?void 0:r.mode)||ns.View,u=null!=(o=e[s])?o:s;l.mode===ns.Edit&&c===ns.View?D((0,v.Z)({id:u},l)):l.mode===ns.View&&c===ns.Edit&&F((0,v.Z)({id:u},l))}))}),[t,s,D,F])}(t,n);var r=e.useRef({}),a=n.isCellEditable,s=e.useCallback((function(e){return!e.rowNode.isAutoGenerated&&(!!e.colDef.editable&&(!!e.colDef.renderEditCell&&(a?a(e):!e.rowNode.isPinned)))}),[a]);e.useEffect((function(){var e=r.current;return function(){Object.entries(e).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],o=n[1];Object.keys(o).forEach((function(t){var n=(0,i.Z)(e[r][t],1)[0];clearTimeout(n),delete e[r][t]}))}))}}),[]);var l=e.useCallback((function(e,t){if(r.current[e])if(t){if(r.current[e][t]){(0,(0,i.Z)(r.current[e][t],2)[1])()}}else Object.keys(r.current[e]).forEach((function(t){(0,(0,i.Z)(r.current[e][t],2)[1])()}))}),[]),c=e.useCallback((function(e){var o=e.id,a=e.field,s=e.debounceMs;return new Promise((function(l){!function(e,t,n,o){if(n){if(r.current[e]||(r.current[e]={}),r.current[e][t]){var a=(0,i.Z)(r.current[e][t],1)[0];clearTimeout(a)}var s=setTimeout((function(){o(),delete r.current[e][t]}),n);r.current[e][t]=[s,function(){var n=(0,i.Z)(r.current[e][t],1)[0];clearTimeout(n),o(),delete r.current[e][t]}]}else o()}(o,a,s,(0,rn.Z)((0,nn.Z)().mark((function r(){var i,s;return(0,nn.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=n.editMode===es.Row?t.current.unstable_setRowEditingEditCellValue:t.current.unstable_setCellEditingEditCellValue,t.current.getCellMode(o,a)!==ts.Edit){r.next=6;break}return r.next=4,i(e);case 4:s=r.sent,l(s);case 6:case"end":return r.stop()}}),r)}))))}))}),[t,n.editMode]),u=e.useCallback((function(e,r){return n.editMode===es.Cell?t.current.unstable_getRowWithUpdatedValuesFromCellEditing(e,r):t.current.unstable_getRowWithUpdatedValuesFromRowEditing(e)}),[t,n.editMode]),d=e.useCallback((function(e,n){return{changeReason:Xc(t.current.state)[e][n].changeReason}}),[t]);Pt(t,{isCellEditable:s,setEditCellValue:c,unstable_runPendingEditCellValueMutation:l,unstable_getRowWithUpdatedValues:u,unstable_getEditCellMeta:d})},fu=function(e,t,n){return n.current.unstable_caches.rows=Fc({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),(0,v.Z)({},e,{rows:zc({apiRef:n,previousTree:null,rowCountProp:t.rowCount,loadingProp:t.loading})})},pu=function(t,n){var r=ke(t,"useGridRows"),a=Rc(t,n),s=e.useRef(Date.now()),l=e.useRef(null),c=e.useCallback((function(e){var n;return null!=(n=he(t)[e])?n:null}),[t]),u=e.useMemo((function(){return a.rows.reduce((function(e,t,n){return e[t.id]=n,e}),{})}),[a.rows]),d=e.useCallback((function(e,r){var i=function(){l.current=null,s.current=Date.now(),t.current.setState((function(e){return(0,v.Z)({},e,{rows:zc({apiRef:t,previousTree:ge(t),rowCountProp:n.rowCount,loadingProp:n.loading})})})),t.current.publishEvent("rowsSet"),t.current.forceUpdate()};if(l.current&&(clearTimeout(l.current),l.current=null),t.current.unstable_caches.rows=e,r){var o=n.throttleRowsMs-(Date.now()-s.current);o>0?l.current=setTimeout(i,o):i()}else i()}),[n.throttleRowsMs,n.rowCount,n.loading,t]),f=e.useCallback((function(e){r.debug("Updating all rows, new length ".concat(e.length));var i=Fc({rows:e,getRowId:n.getRowId,loading:n.loading,rowCount:n.rowCount}),o=t.current.unstable_caches.rows;i.rowsBeforePartialUpdates=o.rowsBeforePartialUpdates,d(i,!0)}),[r,n.getRowId,n.loading,n.rowCount,d,t]),p=e.useCallback((function(e){if(n.signature===Rt.DataGrid&&e.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));var r=new Map;e.forEach((function(e){var t=Nc(e,n.getRowId,"A row was provided without id when calling updateRows():");r.has(t)?r.set(t,(0,v.Z)({},r.get(t),e)):r.set(t,e)}));var i=[],o=t.current.unstable_caches.rows,a={rowsBeforePartialUpdates:o.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:o.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:o.rowCountPropBeforePartialUpdates,idRowsLookup:(0,v.Z)({},o.idRowsLookup),idToIdLookup:(0,v.Z)({},o.idToIdLookup),ids:(0,yt.Z)(o.ids)};r.forEach((function(e,n){return"delete"===e._action?(delete a.idRowsLookup[n],delete a.idToIdLookup[n],void i.push(n)):t.current.getRow(n)?void(a.idRowsLookup[n]=(0,v.Z)({},t.current.getRow(n),e)):(a.idRowsLookup[n]=e,a.idToIdLookup[n]=n,void a.ids.push(n))})),i.length>0&&(a.ids=a.ids.filter((function(e){return!i.includes(e)}))),d(a,!0)}),[n.signature,n.getRowId,d,t]),h=e.useCallback((function(){var e=be(t),n=he(t);return new Map(e.map((function(e){return[e,n[e]]})))}),[t]),m=e.useCallback((function(){return de(t)}),[t]),g=e.useCallback((function(){return be(t)}),[t]),y=e.useCallback((function(e){return u[e]}),[u]),b=e.useCallback((function(e,n){var r=t.current.getRowNode(e);if(!r)throw new Error("MUI: No row with id #".concat(e," found"));var i=(0,v.Z)({},r,{childrenExpanded:n});t.current.setState((function(t){return(0,v.Z)({},t,{rows:(0,v.Z)({},t.rows,{tree:(0,v.Z)({},t.rows.tree,(0,o.Z)({},e,i))})})})),t.current.forceUpdate(),t.current.publishEvent("rowExpansionChange",i)}),[t]),x=e.useCallback((function(e){var n;return null!=(n=ge(t)[e])?n:null}),[t]),w=e.useCallback((function(e){var n,r=e.skipAutoGeneratedRows,i=void 0===r||r,o=e.groupId,a=e.applySorting,s=e.applyFiltering,l=ge(t);if(a){var c=l[o];if(!c)return[];var u=Ye(t);n=[];for(var d=u.findIndex((function(e){return e===o}))+1,f=d;f<u.length&&l[u[f]].depth>c.depth;f+=1){var p=u[f],h=l[p];i&&h.isAutoGenerated||n.push(p)}}else n=Bc(l,o,i);if(s){var m=rt(t);n=n.filter((function(e){return!1!==m[e]}))}return n}),[t]),_={getRow:c,getRowModels:h,getRowsCount:m,getAllRowIds:g,setRows:f,setRowIndex:e.useCallback((function(e,n){var i=be(t),o=i.findIndex((function(t){return t===e}));if(-1!==o&&o!==n){r.debug("Moving row ".concat(e," to index ").concat(n));var a=(0,yt.Z)(i);a.splice(n,0,a.splice(o,1)[0]),t.current.setState((function(e){return(0,v.Z)({},e,{rows:(0,v.Z)({},e.rows,{ids:a})})})),t.current.unstable_caches.rows.ids=a,t.current.publishEvent("rowsSet")}}),[t,r]),updateRows:p,setRowChildrenExpansion:b,getRowNode:x,getRowIndexRelativeToVisibleRows:y,getRowGroupChildren:w,unstable_replaceRows:e.useCallback((function(e,r){if(n.signature===Rt.DataGrid&&r.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));if(0!==r.length){var o=be(t),a=(0,yt.Z)(o),s=he(t),l=me(t),c=ge(t),u=(0,v.Z)({},s),d=(0,v.Z)({},l),f=(0,v.Z)({},c),p=r.map((function(e){return{id:Nc(e,n.getRowId,"A row was provided without id when calling replaceRows()."),model:e}}));p.forEach((function(t,n){var r=a.splice(e+n,1,t.id),o=(0,i.Z)(r,1)[0];delete u[o],delete d[o],delete f[o]})),p.forEach((function(e){var t={id:e.id,parent:null,depth:0,groupingKey:null,groupingField:null};u[e.id]=e.model,d[e.id]=e.id,f[e.id]=t})),t.current.unstable_caches.rows.idRowsLookup=u,t.current.unstable_caches.rows.idToIdLookup=d,t.current.unstable_caches.rows.ids=a,t.current.setState((function(e){return(0,v.Z)({},e,{rows:(0,v.Z)({},e.rows,{idRowsLookup:u,idToIdLookup:d,tree:f,ids:a})})})),t.current.publishEvent("rowsSet")}}),[t,n.signature,n.getRowId])},S=e.useCallback((function(){var e;r.info("Row grouping pre-processing have changed, regenerating the row tree"),e=t.current.unstable_caches.rows.rowsBeforePartialUpdates===n.rows?t.current.unstable_caches.rows:Fc({rows:n.rows,getRowId:n.getRowId,loading:n.loading,rowCount:n.rowCount}),d(e,!1)}),[r,t,n.rows,n.getRowId,n.loading,n.rowCount,d]),C=e.useCallback((function(e){"rowTreeCreation"===e&&S()}),[S]),k=e.useCallback((function(){t.current.unstable_getActiveStrategy("rowTree")!==ve(t)&&S()}),[t,S]);Ft(t,"activeStrategyProcessorChange",C),Ft(t,"strategyAvailabilityChange",k);var M=e.useCallback((function(){t.current.setState((function(e){return(0,v.Z)({},e,{rows:(0,v.Z)({},e.rows,t.current.unstable_applyPipeProcessors("hydrateRows",e.rows.groupingResponseBeforeRowHydration))})})),t.current.publishEvent("rowsSet"),t.current.forceUpdate()}),[t]);tn(t,"hydrateRows",M),Pt(t,_),e.useEffect((function(){return function(){null!==l.current&&clearTimeout(l.current)}}),[]);var T=e.useRef(!0);e.useEffect((function(){if(T.current)T.current=!1;else{var e=t.current.unstable_caches.rows.rowsBeforePartialUpdates===n.rows,i=t.current.unstable_caches.rows.loadingPropBeforePartialUpdates===n.loading,o=t.current.unstable_caches.rows.rowCountPropBeforePartialUpdates===n.rowCount;if(e)return i||(t.current.setState((function(e){return(0,v.Z)({},e,{rows:(0,v.Z)({},e.rows,{loading:n.loading})})})),t.current.unstable_caches.rows.loadingPropBeforePartialUpdates=n.loading,t.current.forceUpdate()),void(o||(t.current.setState((function(e){return(0,v.Z)({},e,{rows:(0,v.Z)({},e.rows,{totalRowCount:Math.max(n.rowCount||0,e.rows.totalRowCount),totalTopLevelRowCount:Math.max(n.rowCount||0,e.rows.totalTopLevelRowCount)})})})),t.current.unstable_caches.rows.rowCountPropBeforePartialUpdates=n.rowCount,t.current.forceUpdate()));r.debug("Updating all rows, new length ".concat(n.rows.length)),d(Fc({rows:n.rows,getRowId:n.getRowId,loading:n.loading,rowCount:n.rowCount}),!1)}}),[n.rows,n.rowCount,n.getRowId,n.loading,r,d,t])},hu=function(e){for(var t=e.ids,n=e.idRowsLookup,r=e.idToIdLookup,i=e.previousTree,o={},a=0;a<t.length;a+=1){var s=t[a];i&&i[s]&&0===i[s].depth&&null==i[s].parent&&!i[s].isPinned?o[s]=i[s]:o[s]={id:s,depth:0,parent:null,groupingKey:"",groupingField:null}}return{groupingName:Vt,tree:o,treeDepth:1,idRowsLookup:n,idToIdLookup:r,ids:t}};function mu(e,t){return e.closest(".".concat(t))}function gu(e){return e.replace(/["\\]/g,"\\$&")}function vu(e,t){return e.querySelector(".".concat(E.row,'[data-id="').concat(gu(String(t)),'"]'))}F(["MUI: You are calling getValue. This method is deprecated and will be removed in the next major version.","Instead, you can access the data from `params.row`."]);function yu(t){var n=e.useCallback((function(e){return{field:e,colDef:t.current.getColumn(e)}}),[t]),r=e.useCallback((function(){var e;return(e=t.current).getCellValue.apply(e,arguments)}),[t]),i=e.useCallback((function(e){var n=t.current.getRow(e);if(!n)throw new Error("No row with id #".concat(e," found"));return{id:e,columns:t.current.getAllColumns(),row:n,getValue:r}}),[t,r]),o=e.useCallback((function(e,n){var i=t.current.getRow(e),o=t.current.getRowNode(e);if(!i||!o)throw new Error("No row with id #".concat(e," found"));var a=Nl(t),s=Bl(t);return{id:e,field:n,row:i,rowNode:o,value:i[n],colDef:t.current.getColumn(n),cellMode:t.current.getCellMode(e,n),getValue:r,api:t.current,hasFocus:null!==a&&a.field===n&&a.id===e,tabIndex:s&&s.field===n&&s.id===e?0:-1}}),[t,r]),a=e.useCallback((function(e,n){var i=t.current.getColumn(n),o=t.current.getCellValue(e,n),a=t.current.getRow(e),s=t.current.getRowNode(e);if(!a||!s)throw new Error("No row with id #".concat(e," found"));var l=Nl(t),c=Bl(t),u={id:e,field:n,row:a,rowNode:s,colDef:i,cellMode:t.current.getCellMode(e,n),getValue:r,hasFocus:null!==l&&l.field===n&&l.id===e,tabIndex:c&&c.field===n&&c.id===e?0:-1,value:o,formattedValue:o};return i&&i.valueFormatter&&(u.formattedValue=i.valueFormatter({id:e,field:u.field,value:u.value,api:t.current})),u.isEditable=i&&t.current.isCellEditable(u),u}),[t,r]),s=e.useCallback((function(e,n){var r=t.current.getColumn(n);if(!r||!r.valueGetter){var i=t.current.getRow(e);if(!i)throw new Error("No row with id #".concat(e," found"));return i[n]}return r.valueGetter(o(e,n))}),[t,o]),l=e.useCallback((function(e){return t.current.rootElementRef.current?function(e,t){return e.querySelector('[role="columnheader"][data-field="'.concat(gu(t),'"]'))}(t.current.rootElementRef.current,e):null}),[t]),c=e.useCallback((function(e){return t.current.rootElementRef.current?vu(t.current.rootElementRef.current,e):null}),[t]),u=e.useCallback((function(e,n){return t.current.rootElementRef.current?function(e,t){var n=t.id,r=t.field,i=vu(e,n);return i?i.querySelector(".".concat(E.cell,'[data-field="').concat(gu(r),'"]')):null}(t.current.rootElementRef.current,{id:e,field:n}):null}),[t]);Pt(t,{getCellValue:s,getCellParams:a,getCellElement:u,getRowParams:i,getRowElement:c,getColumnHeaderParams:n,getColumnHeaderElement:l})}var bu=function(e,t){return null==e||Array.isArray(e)?e:t&&t[0]===e?t:[e]},xu=function(e,t){var n;return(0,v.Z)({},e,{selection:null!=(n=bu(t.selectionModel))?n:[]})},wu=function(t,n){var r=function(t){var n=t.classes;return e.useMemo((function(){return(0,S.Z)({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},A,n)}),[n])}({classes:n.classes}),i=e.useCallback((function(e){var i=(0,v.Z)({},ec,{cellClassName:r.cellCheckbox,headerClassName:r.columnHeaderCheckbox,headerName:t.current.getLocaleText("checkboxSelectionHeaderName")}),o=n.checkboxSelection,a=null!=e.lookup[Ql];return o&&!a?(e.lookup[Ql]=i,e.all=[Ql].concat((0,yt.Z)(e.all))):!o&&a?(delete e.lookup[Ql],e.all=e.all.filter((function(e){return e!==Ql}))):o&&a&&(e.lookup[Ql]=(0,v.Z)({},i,e.lookup[Ql])),e}),[t,r,n.checkboxSelection]);en(t,"hydrateColumns",i)},_u=function(e,t){var n,r,i,o,a=null!=(n=null!=(r=t.sortModel)?r:null==(i=t.initialState)||null==(o=i.sorting)?void 0:o.sortModel)?n:[];return(0,v.Z)({},e,{sorting:{sortModel:Mr(a,t.disableMultipleColumnsSorting),sortedRows:[]}})};function Su(e){var t=e.clientHeight,n=e.scrollTop,r=e.offsetHeight,i=e.offsetTop,o=i+r;return r>t?i:o-t>n?o-t:i<n?i:void 0}var Cu=n(8706);var ku=function(e){return(0,v.Z)({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}})},Mu=function(t){var n,r,a=$t(void 0,t);return function(t,n){var r,i=e.useCallback((function(e){var t;if(null==(t=n.experimentalFeatures)||!t.columnGrouping)return e;var r=Al(n.columnGroupingModel);return e.all.forEach((function(t){var n,i,o=null!=(n=r[t])?n:[],a=e.lookup[t];(function(e){return void 0!==e.groupPath})(a)&&_t(o,null==a?void 0:a.groupPath)||(e.lookup[t]=(0,v.Z)({},e.lookup[t],{groupPath:null!=(i=r[t])?i:[]}))})),e}),[n.columnGroupingModel,null==(r=n.experimentalFeatures)?void 0:r.columnGrouping]);en(t,"hydrateColumns",i)}(a,t),wu(a,t),function(e){bc(e,Vt,"rowTreeCreation",hu)}(a),qt(xu,a,t),qt(Sl,a,t),qt(Pl,a,t),qt(fu,a,t),qt(null!=(n=t.experimentalFeatures)&&n.newEditingApi?uu:eu,a,t),qt(Oc,a,t),qt(_u,a,t),qt(Yc,a,t),qt(Ec,a,t),qt(Ol,a,t),qt(Wc,a,t),qt(ku,a,t),qt(Jt,a,t),Lc(a,t),function(t,n){var r=ke(t,"useGridSelection"),o=e.useMemo((function(){return bu(n.selectionModel,Zl(t.current.state))}),[t,n.selectionModel]),a=e.useRef(null);t.current.unstable_registerControlState({stateId:"selection",propModel:o,propOnChange:n.onSelectionModelChange,stateSelector:Zl,changeEvent:"selectionChange"});var s=n.checkboxSelection,l=n.disableMultipleSelection,c=n.disableSelectionOnClick,u=n.pagination,d=n.paginationMode,f=n.isRowSelectable,p=!l||s,h=Rc(t,n),m=e.useCallback((function(e){var n,r=e,i=null!=(n=a.current)?n:e,o=t.current.isRowSelected(e);if(o){var s=ot(t),l=s.findIndex((function(e){return e===i})),c=s.findIndex((function(e){return e===r}));if(l===c)return;r=l>c?s[c+1]:s[c-1]}a.current=e,t.current.selectRowRange({startId:i,endId:r},!o)}),[t]),g=e.useCallback((function(e){Zl(t.current.state)!==e&&(r.debug("Setting selection model"),t.current.setState((function(t){return(0,v.Z)({},t,{selection:e})})),t.current.forceUpdate())}),[t,r]),y=e.useCallback((function(e){return Zl(t.current.state).includes(e)}),[t]),b=e.useCallback((function(e){if(f&&!f(t.current.getRowParams(e)))return!1;var n=t.current.getRowNode(e);return!("footer"===(null==n?void 0:n.position)||null!=n&&n.isPinned)}),[t,f]),x=e.useCallback((function(){return Ul(t)}),[t]),w=e.useCallback((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.current.isRowSelectable(e))if(a.current=e,i)r.debug("Setting selection for row ".concat(e)),t.current.setSelectionModel(n?[e]:[]);else{r.debug("Toggling selection for row ".concat(e));var o=Zl(t.current.state).filter((function(t){return t!==e}));n&&o.push(e),(o.length<2||p)&&t.current.setSelectionModel(o)}}),[t,r,p]),_=e.useCallback((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.debug("Setting selection for several rows");var o,a=e.filter((function(e){return t.current.isRowSelectable(e)}));if(i)o=n?a:[];else{var s=(0,v.Z)({},Vl(t));a.forEach((function(e){n?s[e]=e:delete s[e]})),o=Object.values(s)}(o.length<2||p)&&t.current.setSelectionModel(o)}),[t,r,p]),S=e.useCallback((function(e){var n=e.startId,o=e.endId,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2?arguments[2]:void 0;if(t.current.getRow(n)&&t.current.getRow(o)){r.debug("Expanding selection from row ".concat(n," to row ").concat(o));var l=ot(t),c=l.indexOf(n),u=l.indexOf(o),d=c>u?[u,c]:[c,u],f=(0,i.Z)(d,2),p=f[0],h=f[1],m=l.slice(p,h+1);t.current.selectRows(m,a,s)}}),[t,r]);Pt(t,{selectRow:w,selectRows:_,selectRowRange:S,setSelectionModel:g,getSelectedRows:x,isRowSelected:y,isRowSelectable:b});var C=e.useCallback((function(){if(!n.keepNonExistentRowsSelected){var e=Zl(t.current.state),r=he(t),i=(0,v.Z)({},Vl(t)),o=!1;e.forEach((function(e){r[e]||(delete i[e],o=!0)})),o&&t.current.setSelectionModel(Object.values(i))}}),[t,n.keepNonExistentRowsSelected]),k=e.useCallback((function(e,n){var r=n.metaKey||n.ctrlKey,i=!s&&!r&&!ls(n),o=!p||i,a=t.current.isRowSelected(e);o?t.current.selectRow(e,!!i||!a,!0):t.current.selectRow(e,!a,!1)}),[t,p,s]),M=e.useCallback((function(e,n){var r;if(!c){var i=null==(r=n.target.closest(".".concat(E.cell)))?void 0:r.getAttribute("data-field");if(i!==ec.field&&i!==Ic){if(i&&t.current.getColumn(i).type===ul)return;t.current.getRowNode(e.id).isPinned||(n.shiftKey&&(p||s)?m(e.id):k(e.id,n))}}}),[c,p,s,t,m,k]),T=e.useCallback((function(e,t){var n;p&&t.shiftKey&&(null==(n=window.getSelection())||n.removeAllRanges())}),[p]),A=e.useCallback((function(e,n){n.nativeEvent.shiftKey?m(e.id):t.current.selectRow(e.id,e.value)}),[t,m]),P=e.useCallback((function(e){var r=n.checkboxSelectionVisibleOnly&&n.pagination?Xl(t):ot(t);t.current.selectRows(r,e.value)}),[t,n.checkboxSelectionVisibleOnly,n.pagination]),R=e.useCallback((function(e,n){if(t.current.getCellMode(e.id,e.field)!==ts.Edit&&n.currentTarget.contains(n.target)){if(ss(n.key)&&n.shiftKey){var r=Nl(t);if(r&&r.id!==e.id){n.preventDefault();var i=t.current.isRowSelected(r.id);if(!p)return void t.current.selectRow(r.id,!i,!0);var o,a,s=t.current.getRowIndexRelativeToVisibleRows(r.id),l=t.current.getRowIndexRelativeToVisibleRows(e.id);s>l?i?(o=l,a=s-1):(o=l,a=s):i?(o=s+1,a=l):(o=s,a=l);var c=h.rows.slice(o,a+1).map((function(e){return e.id}));return void t.current.selectRows(c,!i)}}if(" "===n.key&&n.shiftKey)return n.preventDefault(),void k(e.id,n);"a"===n.key.toLowerCase()&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),_(t.current.getAllRowIds(),!0))}}),[t,k,_,h.rows,p]);Ft(t,"sortedRowsSet",C),Ft(t,"rowClick",M),Ft(t,"rowSelectionCheckboxChange",A),Ft(t,"headerSelectionCheckboxChange",P),Ft(t,"cellMouseDown",T),Ft(t,"cellKeyDown",R),e.useEffect((function(){void 0!==o&&t.current.setSelectionModel(o)}),[t,o]);var O=null!=o;e.useEffect((function(){if(!O){var e=Zl(t.current.state);if(b){var n=e.filter((function(e){return b(e)}));n.length<e.length&&t.current.setSelectionModel(n)}}}),[t,b,O]),e.useEffect((function(){var e=Zl(t.current.state);if(!p&&e.length>1){var n=Pc(t,{pagination:u,paginationMode:d}).rows.reduce((function(e,t){return e[t.id]=!0,e}),{}),r=e.find((function(e){var t=!0;return b&&(t=b(e)),t&&n[e]}));t.current.setSelectionModel(void 0!==r?[r]:[])}}),[t,p,s,l,b,u,d])}(a,t),function(t,n){var r,i,a=ke(t,"useGridColumns"),s=e.useMemo((function(){return ml(n.columnTypes)}),[n.columnTypes]),l=e.useRef(n.columns),c=e.useRef(s);t.current.unstable_registerControlState({stateId:"visibleColumns",propModel:n.columnVisibilityModel,propOnChange:n.onColumnVisibilityModelChange,stateSelector:G,changeEvent:"columnVisibilityModelChange"});var u=e.useCallback((function(e){a.debug("Updating columns state."),t.current.setState(bl(e)),t.current.forceUpdate(),t.current.publishEvent("columnsChange",e.all)}),[a,t]),d=e.useCallback((function(e){return U(t)[e]}),[t]),f=e.useCallback((function(){return V(t)}),[t]),p=e.useCallback((function(){return W(t)}),[t]),m=e.useCallback((function(){return K(t)}),[t]),g=e.useCallback((function(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?W(t):V(t)).findIndex((function(t){return t.field===e}))}),[t]),y=e.useCallback((function(e){var n=g(e);return $(t)[n]}),[t,g]),b=e.useCallback((function(e){G(t)!==e&&(t.current.setState((function(n){return(0,v.Z)({},n,{columns:yl({apiRef:t,columnTypes:s,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!1,currentColumnVisibilityModel:e,keepOnlyColumnsToUpsert:!1})})})),t.current.forceUpdate())}),[t,s]),x=e.useCallback((function(e){var n=yl({apiRef:t,columnTypes:s,columnsToUpsert:e,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!0,keepOnlyColumnsToUpsert:!1});u(n)}),[t,u,s]),w=e.useCallback((function(e){return t.current.updateColumns([e])}),[t]),_=e.useCallback((function(e,n){if(t.current.unstable_caches.columns.isUsingColumnVisibilityModel){var r,i=G(t);if(n!==(null==(r=i[e])||r)){var a=(0,v.Z)({},i,(0,o.Z)({},e,n));t.current.setColumnVisibilityModel(a)}}else{var s=t.current.getColumn(e),l=(0,v.Z)({},s,{hide:!n});t.current.updateColumns([l]);var c={field:e,colDef:l,isVisible:n};t.current.publishEvent("columnVisibilityChange",c)}}),[t]),S=e.useCallback((function(e,n){var r=H(t),i=r.findIndex((function(t){return t===e}));if(i!==n){a.debug("Moving column ".concat(e," to index ").concat(n));var o=(0,yt.Z)(r),s=o.splice(i,1)[0];o.splice(n,0,s),u((0,v.Z)({},Z(t.current.state),{all:o}));var l={field:e,element:t.current.getColumnHeaderElement(e),colDef:t.current.getColumn(e),targetIndex:n,oldIndex:i};t.current.publishEvent("columnOrderChange",l)}}),[t,a,u]),C=e.useCallback((function(e,n){a.debug("Updating column ".concat(e," width to ").concat(n));var r=t.current.getColumn(e),i=(0,v.Z)({},r,{width:n});t.current.updateColumns([i]),t.current.publishEvent("columnWidthChange",{element:t.current.getColumnHeaderElement(e),colDef:i,width:n})}),[t,a]);Pt(t,{getColumn:d,getAllColumns:f,getColumnIndex:g,getColumnPosition:y,getVisibleColumns:p,getColumnsMeta:m,updateColumn:w,updateColumns:x,setColumnVisibilityModel:b,setColumnVisibility:_,setColumnIndex:S,setColumnWidth:C});var k=e.useCallback((function(e,r){var i={};if(t.current.unstable_caches.columns.isUsingColumnVisibilityModel){var o,a,s,l=G(t);(!r.exportOnlyDirtyModels||null!=n.columnVisibilityModel||Object.keys(null!=(o=null==(a=n.initialState)||null==(s=a.columns)?void 0:s.columnVisibilityModel)?o:{}).length>0||Object.keys(l).length>0)&&(i.columnVisibilityModel=l)}i.orderedFields=H(t);var c=V(t),u={};return c.forEach((function(e){if(e.hasBeenResized){var t={};hl.forEach((function(n){var r=e[n];r===1/0&&(r=-1),t[n]=r})),u[e.field]=t}})),Object.keys(u).length>0&&(i.dimensions=u),(0,v.Z)({},e,{columns:i})}),[t,n.columnVisibilityModel,null==(r=n.initialState)?void 0:r.columns]),M=e.useCallback((function(e,n){var r,i=t.current.unstable_caches.columns.isUsingColumnVisibilityModel?null==(r=n.stateToRestore.columns)?void 0:r.columnVisibilityModel:void 0,o=n.stateToRestore.columns;if(null==i&&null==o)return e;var a=yl({apiRef:t,columnTypes:s,columnsToUpsert:[],initialState:o,shouldRegenColumnVisibilityModelFromColumns:!t.current.unstable_caches.columns.isUsingColumnVisibilityModel,currentColumnVisibilityModel:i,keepOnlyColumnsToUpsert:!1});return t.current.setState(bl(a)),null!=o&&t.current.publishEvent("columnsChange",a.all),e}),[t,s]),T=e.useCallback((function(e,t){if(t===gl.columns){var r,i=n.components.ColumnsPanel;return(0,h.jsx)(i,(0,v.Z)({},null==(r=n.componentsProps)?void 0:r.columnsPanel))}return e}),[n.components.ColumnsPanel,null==(i=n.componentsProps)?void 0:i.columnsPanel]);en(t,"exportState",k),en(t,"restoreState",M),en(t,"preferencePanel",T);var A=e.useRef(null);Ft(t,"viewportInnerSizeChange",(function(e){A.current!==e.width&&(A.current=e.width,u(vl(Z(t.current.state),e.width)))})),Bt(t,"columnVisibilityChange",n.onColumnVisibilityChange);var E=e.useCallback((function(){a.info("Columns pipe processing have changed, regenerating the columns");var e=yl({apiRef:t,columnTypes:s,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!t.current.unstable_caches.columns.isUsingColumnVisibilityModel,keepOnlyColumnsToUpsert:!1});u(e)}),[t,a,u,s]);tn(t,"hydrateColumns",E);var P=e.useRef(!0);e.useEffect((function(){if(P.current)P.current=!1;else if(a.info("GridColumns have changed, new length ".concat(n.columns.length)),l.current!==n.columns||c.current!==s){var e=yl({apiRef:t,columnTypes:s,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!t.current.unstable_caches.columns.isUsingColumnVisibilityModel,columnsToUpsert:n.columns,keepOnlyColumnsToUpsert:!0});l.current=n.columns,c.current=s,u(e)}}),[a,t,u,n.columns,s]),e.useEffect((function(){void 0!==n.columnVisibilityModel&&t.current.setColumnVisibilityModel(n.columnVisibilityModel)}),[t,a,n.columnVisibilityModel])}(a,t),pu(a,t),yu(a),function(t){var n=e.useRef({}),r=e.useCallback((function(e,t,r){var i=n.current;i[e]||(i[e]={}),i[e][t]=r}),[]),i=e.useCallback((function(e,t){var r;return null==(r=n.current[e])?void 0:r[t]}),[]),o=e.useCallback((function(e){var n=e.columnIndex,i=e.rowId,o=e.minFirstColumnIndex,a=e.maxLastColumnIndex,s=e.columns,l=s.length,c=s[n],u="function"===typeof c.colSpan?c.colSpan(t.current.getCellParams(i,c.field)):c.colSpan;if(!u||1===u)return r(i,n,{spannedByColSpan:!1,cellProps:{colSpan:1,width:c.computedWidth}}),{colSpan:1};for(var d=c.computedWidth,f=1;f<u;f+=1){var p=n+f;p>=o&&p<a&&(d+=s[p].computedWidth,r(i,n+f,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(n+u,l-1),leftVisibleCellIndex:n})),r(i,n,{spannedByColSpan:!1,cellProps:{colSpan:u,width:d}})}return{colSpan:u}}),[t,r]),a=e.useCallback((function(e){for(var t=e.rowId,n=e.minFirstColumn,r=e.maxLastColumn,i=e.columns,a=n;a<r;a+=1){var s=o({columnIndex:a,rowId:t,minFirstColumnIndex:n,maxLastColumnIndex:r,columns:i});s.colSpan>1&&(a+=s.colSpan-1)}}),[o]);Pt(t,{unstable_getCellColSpanInfo:i,unstable_calculateColSpan:a});var s=e.useCallback((function(){n.current={}}),[]);Ft(t,"columnOrderChange",s)}(a),function(t,n){var r,i=e.useCallback((function(e){var n,r;return null!=(n=null==(r=U(t)[e])?void 0:r.groupPath)?n:[]}),[t]),o=e.useCallback((function(){return kl(t)}),[t]);Pt(t,{unstable_getColumnGroupPath:i,unstable_getAllGroupDetails:o});var a=e.useRef(!0);e.useEffect((function(){var e,r;if(a.current)a.current=!1;else if(null!=(e=n.experimentalFeatures)&&e.columnGrouping){var i=El(null!=(r=n.columnGroupingModel)?r:[]);t.current.setState((function(e){return(0,v.Z)({},e,{columnGrouping:(0,v.Z)({},e.columnGrouping,{lookup:i})})}))}}),[t,n.columnGroupingModel,null==(r=n.experimentalFeatures)?void 0:r.columnGrouping])}(a,t),(null!=(r=t.experimentalFeatures)&&r.newEditingApi?du:tu)(a,t),function(t,n){var r=ke(t,"useGridFocus"),i=e.useRef(null),o=e.useCallback((function(e,n){e&&t.current.getRow(e.id)&&t.current.publishEvent("cellFocusOut",t.current.getCellParams(e.id,e.field),n)}),[t]),a=e.useCallback((function(e,n){var i=Nl(t);(null==i?void 0:i.id)===e&&(null==i?void 0:i.field)===n||(t.current.setState((function(t){return r.debug("Focusing on cell with id=".concat(e," and field=").concat(n)),(0,v.Z)({},t,{tabIndex:{cell:{id:e,field:n},columnHeader:null},focus:{cell:{id:e,field:n},columnHeader:null}})})),t.current.forceUpdate(),t.current.getRow(e)&&(i&&o(i,{}),t.current.publishEvent("cellFocusIn",t.current.getCellParams(e,n))))}),[t,r,o]),s=e.useCallback((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Nl(t);o(i,n),t.current.setState((function(t){return r.debug("Focusing on column header with colIndex=".concat(e)),(0,v.Z)({},t,{tabIndex:{columnHeader:{field:e},cell:null},focus:{columnHeader:{field:e},cell:null}})})),t.current.forceUpdate()}),[t,r,o]),l=e.useCallback((function(e,r,i){var o=t.current.getColumnIndex(r),a=t.current.getRowIndexRelativeToVisibleRows(e),s=W(t);"right"===i?o+=1:"left"===i?o-=1:a+=1;var l=Pc(t,{pagination:n.pagination,paginationMode:n.paginationMode});o>=s.length?(a+=1)<l.rows.length&&(o=0):o<0&&(a-=1)>=0&&(o=s.length-1),a=wt(a,0,l.rows.length-1);var c=l.rows[a],u=t.current.unstable_getCellColSpanInfo(c.id,o);u&&u.spannedByColSpan&&("left"===i||"below"===i?o=u.leftVisibleCellIndex:"right"===i&&(o=u.rightVisibleCellIndex));var d=s[o=wt(o,0,s.length-1)];t.current.setCellFocus(c.id,d.field)}),[t,n.pagination,n.paginationMode]),c=e.useCallback((function(e){var n=e.id,r=e.field;t.current.setCellFocus(n,r)}),[t]),u=e.useCallback((function(e,n){"Enter"===n.key||"Tab"===n.key||ss(n.key)||t.current.setCellFocus(e.id,e.field)}),[t]),d=e.useCallback((function(e,n){var r=e.field;n.target===n.currentTarget&&t.current.setColumnHeaderFocus(r,n)}),[t]),f=e.useCallback((function(){r.debug("Clearing focus"),t.current.setState((function(e){return(0,v.Z)({},e,{focus:{cell:null,columnHeader:null}})}))}),[r,t]),p=e.useCallback((function(e){i.current=e}),[]),h=e.useCallback((function(e){var n=i.current;i.current=null;var r=Nl(t);if(r){if((null==n?void 0:n.id)!==r.id||(null==n?void 0:n.field)!==r.field){var a=t.current.getCellElement(r.id,r.field);null!=a&&a.contains(e.target)||(n?t.current.setCellFocus(n.id,n.field):(t.current.setState((function(e){return(0,v.Z)({},e,{focus:{cell:null,columnHeader:null}})})),t.current.forceUpdate(),o(r,e)))}}else n&&t.current.setCellFocus(n.id,n.field)}),[t,o]),m=e.useCallback((function(e){if("view"!==e.cellMode){var n=Nl(t);(null==n?void 0:n.id)===e.id&&(null==n?void 0:n.field)===e.field||t.current.setCellFocus(e.id,e.field)}}),[t]),g=e.useCallback((function(){var e=Nl(t);e&&!t.current.getRow(e.id)&&t.current.setState((function(e){return(0,v.Z)({},e,{focus:{cell:null,columnHeader:null}})}))}),[t]);Pt(t,{setCellFocus:a,setColumnHeaderFocus:s,unstable_moveFocusToRelativeCell:l}),e.useEffect((function(){var e=(0,ws.Z)(t.current.rootElementRef.current);return e.addEventListener("click",h),function(){e.removeEventListener("click",h)}}),[t,h]),Ft(t,"columnHeaderBlur",f),Ft(t,"cellDoubleClick",c),Ft(t,"cellMouseDown",p),Ft(t,"cellKeyDown",u),Ft(t,"cellModeChange",m),Ft(t,"columnHeaderFocus",d),Ft(t,"rowsSet",g)}(a,t),function(t,n){var r,i=ke(t,"useGridPreferencesPanel"),o=e.useRef(),a=e.useRef(),s=e.useCallback((function(){i.debug("Hiding Preferences Panel");var e=qc(t.current.state);e.openedPanelValue&&t.current.publishEvent("preferencePanelClose",{openedPanelValue:e.openedPanelValue}),t.current.setState((function(e){return(0,v.Z)({},e,{preferencePanel:{open:!1}})})),t.current.forceUpdate()}),[t,i]),l=e.useCallback((function(){a.current=setTimeout((function(){return clearTimeout(o.current)}),0)}),[]),c=e.useCallback((function(){o.current=setTimeout(s,100)}),[s]),u=e.useCallback((function(e){i.debug("Opening Preferences Panel"),l(),t.current.setState((function(t){return(0,v.Z)({},t,{preferencePanel:(0,v.Z)({},t.preferencePanel,{open:!0,openedPanelValue:e})})})),t.current.publishEvent("preferencePanelOpen",{openedPanelValue:e}),t.current.forceUpdate()}),[i,l,t]);Pt(t,{showPreferences:u,hidePreferences:c});var d=e.useCallback((function(e,r){var i,o=qc(t.current.state);return!r.exportOnlyDirtyModels||null!=(null==(i=n.initialState)?void 0:i.preferencePanel)||o.open?(0,v.Z)({},e,{preferencePanel:o}):e}),[t,null==(r=n.initialState)?void 0:r.preferencePanel]),f=e.useCallback((function(e,n){var r=n.stateToRestore.preferencePanel;return null!=r&&t.current.setState((function(e){return(0,v.Z)({},e,{preferencePanel:r})})),e}),[t]);en(t,"exportState",d),en(t,"restoreState",f),e.useEffect((function(){return function(){clearTimeout(o.current),clearTimeout(a.current)}}),[])}(a,t),function(t,n){var r,i,o,a=ke(t,"useGridFilter");t.current.unstable_registerControlState({stateId:"filter",propModel:n.filterModel,propOnChange:n.onFilterModelChange,stateSelector:et,changeEvent:"filterModelChange"});var s=e.useCallback((function(){t.current.setState((function(e){var r=et(e,t.current.instanceId),i=n.filterMode===gc?Tc(r,t):null,o=t.current.unstable_applyStrategyProcessor("filtering",{isRowMatchingFilters:i,filterModel:null!=r?r:yc()});return(0,v.Z)({},e,{filter:(0,v.Z)({},e.filter,o)})})),t.current.publishEvent("filteredRowsSet")}),[n.filterMode,t]),l=e.useCallback((function(){s(),t.current.forceUpdate()}),[t,s]),c=e.useCallback((function(e){var n=et(t),r=(0,yt.Z)(n.items),i=r.findIndex((function(t){return t.id===e.id}));-1===i?r.push(e):r[i]=e,t.current.setFilterModel((0,v.Z)({},n,{items:r}),"upsertFilterItem")}),[t]),u=e.useCallback((function(e){var n=et(t),r=(0,yt.Z)(n.items);e.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));-1===n?r.push(t):r[n]=t})),t.current.setFilterModel((0,v.Z)({},n,{items:e}),"upsertFilterItems")}),[t]),d=e.useCallback((function(e){var n=et(t),r=n.items.filter((function(t){return t.id!==e.id}));r.length!==n.items.length&&t.current.setFilterModel((0,v.Z)({},n,{items:r}),"deleteFilterItem")}),[t]),f=e.useCallback((function(e){if(a.debug("Displaying filter panel"),e){var r,i=et(t),o=i.items.filter((function(e){var n;if(void 0!==e.value)return!0;var r=null==(n=t.current.getColumn(e.columnField).filterOperators)?void 0:n.find((function(t){return t.value===e.operatorValue}));return!("undefined"===typeof(null==r?void 0:r.requiresFilterValue)||(null==r?void 0:r.requiresFilterValue))}));r=o.find((function(t){return t.columnField===e}))?o:n.disableMultipleColumnsFiltering?[xc({columnField:e},t)]:[].concat((0,yt.Z)(o),[xc({columnField:e},t)]),t.current.setFilterModel((0,v.Z)({},i,{items:r}))}t.current.showPreferences(gl.filters)}),[t,a,n.disableMultipleColumnsFiltering]),p=e.useCallback((function(){a.debug("Hiding filter panel"),t.current.hidePreferences()}),[t,a]),m=e.useCallback((function(e){var n=et(t);n.linkOperator!==e&&t.current.setFilterModel((0,v.Z)({},n,{linkOperator:e}),"changeLogicOperator")}),[t]),g=e.useCallback((function(e){var n=et(t);_t(n.quickFilterValues,e)||t.current.setFilterModel((0,v.Z)({},n,{quickFilterValues:(0,yt.Z)(e)}))}),[t]),y=e.useCallback((function(e,r){et(t)!==e&&(a.debug("Setting filter model"),t.current.unstable_updateControlState("filter",kc(e,n.disableMultipleColumnsFiltering,t),r),t.current.unstable_applyFilters())}),[t,a,n.disableMultipleColumnsFiltering]),b=e.useCallback((function(){var e=it(t);return new Map(e.map((function(e){return[e.id,e.model]})))}),[t]);Pt(t,{setFilterLinkOperator:m,unstable_applyFilters:l,deleteFilterItem:d,upsertFilterItem:c,upsertFilterItems:u,setFilterModel:y,showFilterPanel:f,hideFilterPanel:p,getVisibleRowModels:b,setQuickFilterValues:g});var x=e.useCallback((function(e,r){var i,o,a=et(t);return r.exportOnlyDirtyModels&&null==n.filterModel&&null==(null==(i=n.initialState)||null==(o=i.filter)?void 0:o.filterModel)&&_t(a,yc())?e:(0,v.Z)({},e,{filter:{filterModel:a}})}),[t,n.filterModel,null==(r=n.initialState)||null==(i=r.filter)?void 0:i.filterModel]),w=e.useCallback((function(e,r){var i,o=null==(i=r.stateToRestore.filter)?void 0:i.filterModel;return null==o?e:(t.current.unstable_updateControlState("filter",kc(o,n.disableMultipleColumnsFiltering,t),"restoreState"),(0,v.Z)({},e,{callbacks:[].concat((0,yt.Z)(e.callbacks),[t.current.unstable_applyFilters])}))}),[t,n.disableMultipleColumnsFiltering]),_=e.useCallback((function(e,t){if(t===gl.filters){var r,i=n.components.FilterPanel;return(0,h.jsx)(i,(0,v.Z)({},null==(r=n.componentsProps)?void 0:r.filterPanel))}return e}),[n.components.FilterPanel,null==(o=n.componentsProps)?void 0:o.filterPanel]),S=e.useCallback((function(e){if(n.filterMode===gc&&e.isRowMatchingFilters){for(var r=be(t),i={},o=0;o<r.length;o+=1){var a=r[o],s=void 0;if("string"===typeof a&&a.startsWith("auto-generated-group-footer"))s=!0;else{var l=e.isRowMatchingFilters(a),c=l.passingFilterItems,u=l.passingQuickFilterValues;s=Ac([c],[u],e.filterModel,t)}i[a]=s}return{filteredRowsLookup:i,visibleRowsLookup:i,filteredDescendantCountLookup:{}}}return{visibleRowsLookup:{},filteredRowsLookup:{},filteredDescendantCountLookup:{}}}),[t,n.filterMode]);en(t,"exportState",x),en(t,"restoreState",w),en(t,"preferencePanel",_),bc(t,Vt,"filtering",S);var C=e.useCallback((function(){a.debug("onColUpdated - GridColumns changed, applying filters");var e=et(t),n=X(t),r=e.items.filter((function(e){return e.columnField&&n[e.columnField]}));r.length<e.items.length&&t.current.setFilterModel((0,v.Z)({},e,{items:r}))}),[t,a]),k=e.useCallback((function(e){"filtering"===e&&t.current.unstable_applyFilters()}),[t]);Ft(t,"rowsSet",s),Ft(t,"rowExpansionChange",t.current.unstable_applyFilters),Ft(t,"columnsChange",C),Ft(t,"activeStrategyProcessorChange",k),Qt((function(){t.current.unstable_applyFilters()})),e.useEffect((function(){void 0!==n.filterModel&&t.current.setFilterModel(n.filterModel)}),[t,a,n.filterModel])}(a,t),function(t,n){var r,i,o=ke(t,"useGridSorting");t.current.unstable_registerControlState({stateId:"sortModel",propModel:n.sortModel,propOnChange:n.onSortModelChange,stateSelector:Ke,changeEvent:"sortModelChange"});var a=e.useCallback((function(e,n){var r=Ke(t),i=r.findIndex((function(t){return t.field===e})),o=(0,yt.Z)(r);return i>-1?n?o.splice(i,1,n):o.splice(i,1):o=[].concat((0,yt.Z)(r),[n]),o}),[t]),s=e.useCallback((function(e,r){var i,o=Ke(t).find((function(t){return t.field===e.field}));if(o){var a,s=void 0===r?Ar(null!=(a=e.sortingOrder)?a:n.sortingOrder,o.sort):r;return null==s?void 0:(0,v.Z)({},o,{sort:s})}return{field:e.field,sort:void 0===r?Ar(null!=(i=e.sortingOrder)?i:n.sortingOrder):r}}),[t,n.sortingOrder]),l=e.useCallback((function(){t.current.setState((function(e){if(n.sortingMode===vc)return o.debug("Skipping sorting rows as sortingMode = server"),(0,v.Z)({},e,{sorting:(0,v.Z)({},e.sorting,{sortedRows:be(e,t.current.instanceId)})});var r=function(e,t){var n=e.map((function(e){return function(e,t){var n=t.current.getColumn(e.field);if(!n)return null;var r="desc"===e.sort?function(){return-1*n.sortComparator.apply(n,arguments)}:n.sortComparator;return{getSortCellParams:function(e){return{id:e,field:n.field,rowNode:t.current.getRowNode(e),value:t.current.getCellValue(e,n.field),api:t.current}},comparator:r}}(e,t)})).filter((function(e){return!!e}));return 0===n.length?null:function(e){return e.map((function(e){return{node:e,params:n.map((function(t){return t.getSortCellParams(e.id)}))}})).sort((function(e,t){return r=e,i=t,n.reduce((function(e,t,n){if(0!==e)return e;var o=r.params[n],a=i.params[n];return t.comparator(o.value,a.value,o,a)}),0);var r,i})).map((function(e){return e.node.id}))}}(Ke(e,t.current.instanceId),t),i=t.current.unstable_applyStrategyProcessor("sorting",{sortRowList:r});return(0,v.Z)({},e,{sorting:(0,v.Z)({},e.sorting,{sortedRows:i})})})),t.current.publishEvent("sortedRowsSet"),t.current.forceUpdate()}),[t,o,n.sortingMode]),c=e.useCallback((function(e){Ke(t)!==e&&(o.debug("Setting sort model"),t.current.setState(Tr(e,n.disableMultipleColumnsSorting)),t.current.forceUpdate(),t.current.applySorting())}),[t,o,n.disableMultipleColumnsSorting]),u=e.useCallback((function(e,r,i){if(e.sortable){var o,l=s(e,r);o=!i||n.disableMultipleColumnsSorting?l?[l]:[]:a(e.field,l),t.current.setSortModel(o)}}),[t,a,s,n.disableMultipleColumnsSorting]),d=e.useCallback((function(){return Ke(t)}),[t]),f=e.useCallback((function(){return Xe(t).map((function(e){return e.model}))}),[t]),p=e.useCallback((function(){return Ye(t)}),[t]),h=e.useCallback((function(e){return t.current.getSortedRowIds().indexOf(e)}),[t]),m=e.useCallback((function(e){return t.current.getSortedRowIds()[e]}),[t]);Pt(t,{getSortModel:d,getSortedRows:f,getSortedRowIds:p,getRowIndex:h,getRowIdFromRowIndex:m,setSortModel:c,sortColumn:u,applySorting:l});var g=e.useCallback((function(e,r){var i,o,a=Ke(t);return!r.exportOnlyDirtyModels||null!=n.sortModel||null!=(null==(i=n.initialState)||null==(o=i.sorting)?void 0:o.sortModel)||a.length>0?(0,v.Z)({},e,{sorting:{sortModel:a}}):e}),[t,n.sortModel,null==(r=n.initialState)||null==(i=r.sorting)?void 0:i.sortModel]),y=e.useCallback((function(e,r){var i,o=null==(i=r.stateToRestore.sorting)?void 0:i.sortModel;return null==o?e:(t.current.setState(Tr(o,n.disableMultipleColumnsSorting)),(0,v.Z)({},e,{callbacks:[].concat((0,yt.Z)(e.callbacks),[t.current.applySorting])}))}),[t,n.disableMultipleColumnsSorting]),b=e.useCallback((function(e){var n=ge(t);if(!e.sortRowList){var r=[],i=[];return be(t).forEach((function(e){n[e].isPinned||("footer"===n[e].position?i.push(e):r.push(e))})),[].concat(r,i)}var o=[],a=[];return Object.values(n).forEach((function(e){e.isPinned||("footer"===e.position?a.push(e.id):o.push(e))})),[].concat((0,yt.Z)(e.sortRowList(o)),a)}),[t]);en(t,"exportState",g),en(t,"restoreState",y),bc(t,Vt,"sorting",b);var x=e.useCallback((function(e,t){var n=e.colDef,r=t.shiftKey||t.metaKey||t.ctrlKey;u(n,void 0,r)}),[u]),w=e.useCallback((function(e,t){var n=e.colDef;!Ya(t.key)||t.ctrlKey||t.metaKey||u(n,void 0,t.shiftKey)}),[u]),_=e.useCallback((function(){var e=Ke(t),n=U(t);if(e.length>0){var r=e.filter((function(e){return n[e.field]}));r.length<e.length&&t.current.setSortModel(r)}}),[t]),S=e.useCallback((function(e){"sorting"===e&&t.current.applySorting()}),[t]);Ft(t,"columnHeaderClick",x),Ft(t,"columnHeaderKeyDown",w),Ft(t,"rowsSet",t.current.applySorting),Ft(t,"columnsChange",_),Ft(t,"activeStrategyProcessorChange",S),Qt((function(){t.current.applySorting()})),e.useEffect((function(){void 0!==n.sortModel&&t.current.setSortModel(n.sortModel)}),[t,n.sortModel])}(a,t),function(t,n){var r=J(t,W),i=r.length>0?Math.max.apply(Math,(0,yt.Z)(r.map((function(e){var t,n;return null!=(t=null==(n=e.groupPath)?void 0:n.length)?t:0})))):0,o=ke(t,"useDensity"),a=e.useCallback((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.headerHeight,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.rowHeight,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;o.debug("Set grid density to ".concat(e)),t.current.setState((function(t){var n=re(t),i=Rl(e,r,a,s);return _t(n,i)?t:(0,v.Z)({},t,{density:i})})),t.current.forceUpdate()}),[o,t,n.headerHeight,n.rowHeight,i]);e.useEffect((function(){t.current.setDensity(n.density,n.headerHeight,n.rowHeight,i)}),[t,n.density,n.rowHeight,n.headerHeight,i]),Pt(t,{setDensity:a})}(a,t),$c(a,t),function(t,n){var r=n.getRowHeight,o=n.getRowSpacing,a=n.getEstimatedRowHeight,s=e.useRef({}),l=e.useRef(-1),c=e.useRef(!1),u=J(t,oe),d=J(t,Qe),f=J(t,Gl),p=J(t,qe),h=Rc(t,n),m=J(t,we),g=e.useCallback((function(){var e,n;c.current=!1;var d=le(t.current.state,t.current.instanceId),f=function(e){s.current[e.id]||(s.current[e.id]={sizes:{baseCenter:u},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});var n=s.current[e.id],l=n.isResized,f=n.needsFirstMeasurement,p=n.sizes,m=u,g=p.baseCenter;if(l)m=g;else if(r){var y=r((0,v.Z)({},e,{densityFactor:d}));if("auto"===y){if(f){var b=a?a((0,v.Z)({},e,{densityFactor:d})):u;m=null!=b?b:u}else m=g;c.current=!0,s.current[e.id].autoHeight=!0}else m=null!=y?y:u,s.current[e.id].needsFirstMeasurement=!1,s.current[e.id].autoHeight=!1}else s.current[e.id].needsFirstMeasurement=!1;var x=Object.entries(p).reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],o=n[1];return/^base[A-Z]/.test(r)&&(e[r]=o),e}),{}),w=(0,v.Z)({},x,{baseCenter:m});if(o){var _,S,C=t.current.getRowIndexRelativeToVisibleRows(e.id),k=o((0,v.Z)({},e,{isFirstVisible:0===C,isLastVisible:C===h.rows.length-1,indexRelativeToCurrentPage:C}));w.spacingTop=null!=(_=k.top)?_:0,w.spacingBottom=null!=(S=k.bottom)?S:0}var M=t.current.unstable_applyPipeProcessors("rowHeight",w,e);return s.current[e.id].sizes=M,M},p=[],g=h.rows.reduce((function(e,t){p.push(e);var n=0,r=0,o=f(t);return Object.entries(o).forEach((function(e){var t=(0,i.Z)(e,2),o=t[0],a=t[1];/^base[A-Z]/.test(o)?n=a>n?a:n:r+=a})),e+n+r}),0);null==m||null==(e=m.top)||e.forEach((function(e){f(e)})),null==m||null==(n=m.bottom)||n.forEach((function(e){f(e)})),t.current.setState((function(e){return(0,v.Z)({},e,{rowsMeta:{currentPageTotalHeight:g,positions:p}})})),c.current||(l.current=1/0),t.current.forceUpdate()}),[t,h.rows,u,r,o,a,m]),y=e.useCallback((function(e){var t=s.current[e];return t?t.sizes.baseCenter:u}),[u]),b=e.useCallback((function(e,t){s.current[e].sizes.baseCenter=t,s.current[e].isResized=!0,s.current[e].needsFirstMeasurement=!1,g()}),[g]),w=e.useMemo((function(){return(0,Cu.Z)(g)}),[g]),_=e.useCallback((function(e,t,n){if(s.current[e]&&s.current[e].autoHeight){var r=s.current[e].sizes["base".concat((0,x.Z)(n))]!==t;s.current[e].needsFirstMeasurement=!1,s.current[e].sizes["base".concat((0,x.Z)(n))]=t,r&&w()}}),[w]),S=e.useCallback((function(e){var t;return(null==(t=s.current[e])?void 0:t.autoHeight)||!1}),[]),C=e.useCallback((function(){return l.current}),[]),k=e.useCallback((function(e){c.current&&e>l.current&&(l.current=e)}),[]),M=e.useCallback((function(){s.current={},g()}),[g]);e.useEffect((function(){g()}),[u,d,f,p,g]),tn(t,"rowHeight",g),Pt(t,{unstable_getLastMeasuredRowIndex:C,unstable_setLastMeasuredRowIndex:k,unstable_rowHasAutoHeight:S,unstable_getRowHeight:y,unstable_getRowInternalSizes:function(e){var t;return null==(t=s.current[e])?void 0:t.sizes},unstable_setRowHeight:b,unstable_storeRowHeightMeasurement:_,resetRowHeights:M})}(a,t),function(t,n){var r=ke(t,"useGridScroll"),i=t.current.columnHeadersElementRef,o=t.current.windowRef,a=J(t,it),s=e.useCallback((function(e){var i=de(t),s=W(t);if(null!=e.rowIndex&&0===i||0===s.length)return!1;r.debug("Scrolling to cell at row ".concat(e.rowIndex,", col: ").concat(e.colIndex," "));var l={};if(null!=e.colIndex){var c,u=$(t);if("undefined"!==typeof e.rowIndex){var d,f=null==(d=a[e.rowIndex])?void 0:d.id,p=t.current.unstable_getCellColSpanInfo(f,e.colIndex);p&&!p.spannedByColSpan&&(c=p.cellProps.width)}"undefined"===typeof c&&(c=s[e.colIndex].computedWidth),l.left=Su({clientHeight:o.current.clientWidth,scrollTop:o.current.scrollLeft,offsetHeight:c,offsetTop:u[e.colIndex]})}if(null!=e.rowIndex){var h,m,g=mc(t.current.state),v=Wl(t),y=$l(t),b=n.pagination?e.rowIndex-v*y:e.rowIndex,x=g.positions[b+1]?g.positions[b+1]-g.positions[b]:g.currentPageTotalHeight-g.positions[b],w=(null==(h=o.current.querySelector(".".concat(E["pinnedRows--top"])))?void 0:h.clientHeight)||0,_=(null==(m=o.current.querySelector(".".concat(E["pinnedRows--bottom"])))?void 0:m.clientHeight)||0;l.top=Su({clientHeight:o.current.clientHeight-w-_,scrollTop:o.current.scrollTop,offsetHeight:x,offsetTop:g.positions[b]})}return(void 0!==typeof(l=t.current.unstable_applyPipeProcessors("scrollToIndexes",l,e)).left||void 0!==typeof l.top)&&(t.current.scroll(l),!0)}),[r,t,o,n.pagination,a]),l=e.useCallback((function(e){o.current&&null!=e.left&&i.current&&(i.current.scrollLeft=e.left,o.current.scrollLeft=e.left,r.debug("Scrolling left: ".concat(e.left))),o.current&&null!=e.top&&(o.current.scrollTop=e.top,r.debug("Scrolling top: ".concat(e.top))),r.debug("Scrolling, updating container, and viewport")}),[o,i,r]),c=e.useCallback((function(){return null!=o&&o.current?{top:o.current.scrollTop,left:o.current.scrollLeft}:{top:0,left:0}}),[o]);Pt(t,{scroll:l,scrollToIndexes:s,getScrollPosition:c})}(a,t),function(t){var n=ke(t,"useGridColumnMenu"),r=e.useCallback((function(e){t.current.setState((function(t){return t.columnMenu.open&&t.columnMenu.field===e?t:(n.debug("Opening Column Menu"),(0,v.Z)({},t,{columnMenu:{open:!0,field:e}}))}))&&(t.current.hidePreferences(),t.current.forceUpdate())}),[t,n]),i=e.useCallback((function(){t.current.setState((function(e){return e.columnMenu.open||void 0!==e.columnMenu.field?(n.debug("Hiding Column Menu"),(0,v.Z)({},e,{columnMenu:(0,v.Z)({},e.columnMenu,{open:!1,field:void 0})})):e}))&&t.current.forceUpdate()}),[t,n]),o=e.useCallback((function(e){n.debug("Toggle Column Menu");var o=Kt(t.current.state);o.open&&o.field===e?i():r(e)}),[t,n,r,i]);Pt(t,{showColumnMenu:r,hideColumnMenu:i,toggleColumnMenu:o});var a=e.useCallback((function(e,n){if(n.target.classList.contains(E.menuIconButton)&&n.relatedTarget){var r=n.relatedTarget.classList.contains(E.menuList),i="menuitem"===n.relatedTarget.getAttribute("role");(r||i)&&t.current.setColumnHeaderFocus(e.field)}}),[t]);Ft(t,"columnResizeStart",i),Ft(t,"columnHeaderFocus",a),Ft(t,"virtualScrollerWheel",t.current.hideColumnMenu),Ft(t,"virtualScrollerTouchMove",t.current.hideColumnMenu)}(a),hc(a),function(t,n){var r=ke(t,"useGridPrintExport"),i=e.useRef(null),o=e.useRef(null),a=e.useRef({});e.useEffect((function(){i.current=(0,ws.Z)(t.current.rootElementRef.current)}),[t]);var s=e.useCallback((function(e,n){return new Promise((function(r){if(e||n){var i=ic({apiRef:t,options:{fields:e,allColumns:n}}).map((function(e){return e.field})),o=V(t),a={};o.forEach((function(e){a[e.field]=i.includes(e.field)})),t.current.setColumnVisibilityModel(a),r()}else r()}))}),[t]),l=e.useCallback((function(e){var t=document.createElement("iframe");return t.id="grid-print-window",t.src=window.location.href,t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}),[]),c=e.useCallback((function(e,n){var r,o,a,s=(0,v.Z)({copyStyles:!0,hideToolbar:!1,hideFooter:!1},n);e.onload=null;var l=e.contentDocument||(null==(r=e.contentWindow)?void 0:r.document);if(l){var c=ce(t),u=mc(t.current.state),d=t.current.rootElementRef.current,f=d.cloneNode(!0),p=f.querySelector(".".concat(E.virtualScroller));p.style.height="auto",p.style.width="auto",p.parentElement.style.width="auto",p.parentElement.style.height="auto",f.querySelector(".".concat(E.main)).style.overflow="visible",f.querySelector(".".concat(E.columnHeaders)).querySelector(".".concat(E.columnHeadersInner)).style.width="100%";var h,m,g=(null==(o=d.querySelector(".".concat(E.toolbarContainer)))?void 0:o.clientHeight)||0,y=(null==(a=d.querySelector(".".concat(E.footerContainer)))?void 0:a.clientHeight)||0;s.hideToolbar&&(null==(h=f.querySelector(".".concat(E.toolbarContainer)))||h.remove(),g=0),s.hideFooter&&(null==(m=f.querySelector(".".concat(E.footerContainer)))||m.remove(),y=0),f.style.height="".concat(u.currentPageTotalHeight+c+g+y,"px"),l.body.innerHTML="",l.body.appendChild(f);var b,x="function"===typeof s.pageStyle?s.pageStyle():s.pageStyle;if("string"===typeof x){var w=l.createElement("style");w.appendChild(l.createTextNode(x)),l.head.appendChild(w)}if(s.bodyClassName&&(b=l.body.classList).add.apply(b,(0,yt.Z)(s.bodyClassName.split(" "))),s.copyStyles)for(var _=i.current.querySelectorAll("style, link[rel='stylesheet']"),S=0;S<_.length;S+=1){var C=_[S];if("STYLE"===C.tagName){var k=l.createElement(C.tagName),M=C.sheet;if(M){for(var T="",A=0;A<M.cssRules.length;A+=1)"string"===typeof M.cssRules[A].cssText&&(T+="".concat(M.cssRules[A].cssText,"\r\n"));k.appendChild(l.createTextNode(T)),l.head.appendChild(k)}}else if(C.getAttribute("href")){for(var P=l.createElement(C.tagName),R=0;R<C.attributes.length;R+=1){var O=C.attributes[R];O&&P.setAttribute(O.nodeName,O.nodeValue||"")}l.head.appendChild(P)}}e.contentWindow.print()}}),[t,i]),u=e.useCallback((function(e){var n,r;i.current.body.removeChild(e),t.current.restoreState(o.current||{}),null!=(n=o.current)&&null!=(r=n.columns)&&r.columnVisibilityModel||t.current.setColumnVisibilityModel(a.current),t.current.unstable_enableVirtualization(),o.current=null,a.current={}}),[t]),d=e.useCallback(function(){var e=(0,rn.Z)((0,nn.Z)().mark((function e(d){var f,p;return(0,nn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.debug("Export data as Print"),t.current.rootElementRef.current){e.next=3;break}throw new Error("MUI: No grid root element available.");case 3:return o.current=t.current.exportState(),a.current=G(t),n.pagination&&(f=ct(t),t.current.setPageSize(f)),e.next=8,s(null==d?void 0:d.fields,null==d?void 0:d.allColumns);case 8:t.current.unstable_disableVirtualization(),p=l(null==d?void 0:d.fileName),i.current.body.appendChild(p),p.onload=function(){return c(p,d)},p.contentWindow.onafterprint=function(){return u(p)};case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,r,t,l,c,u,s]);Pt(t,{exportDataAsPrint:d});var f=e.useCallback((function(e,t){var n;return null!=(n=t.printOptions)&&n.disableToolbarButton?e:[].concat((0,yt.Z)(e),[{component:(0,h.jsx)(fc,{options:t.printOptions}),componentName:"printExport"}])}),[]);en(t,"exportMenu",f)}(a,t),Xt(a),function(t,n){var r=ke(t,"useResizeContainer"),i=e.useRef(!1),o=e.useRef(null),a=e.useRef(null),s=J(t,mc),l=J(t,ce),c=e.useCallback((function(){var e,r=null==(e=t.current.rootElementRef)?void 0:e.current,i=q(t),c=jc(t);if(o.current){var u,d,f,p;if(null!=n.scrollbarSize)u=n.scrollbarSize;else if(i&&r){var h=(0,ws.Z)(r).createElement("div");h.style.width="99px",h.style.height="99px",h.style.position="absolute",h.style.overflow="scroll",h.className="scrollDiv",r.appendChild(h),u=h.offsetWidth-h.clientWidth,r.removeChild(h)}else u=0;if(n.autoHeight)p=!1,f=Math.round(i)>o.current.width,d={width:o.current.width,height:s.currentPageTotalHeight+(f?u:0)};else{d={width:o.current.width,height:o.current.height-l};var m=function(e){var t=e.content,n=e.container,r=e.scrollBarSize,i=t.width>n.width,o=t.height>n.height,a=!1,s=!1;return(i||o)&&(a=i,(s=t.height+(a?r:0)>n.height)&&(a=t.width+r>n.width)),{hasScrollX:a,hasScrollY:s}}({content:{width:Math.round(i),height:s.currentPageTotalHeight},container:{width:d.width,height:d.height-c.top-c.bottom},scrollBarSize:u});p=m.hasScrollY,f=m.hasScrollX}var g={viewportOuterSize:d,viewportInnerSize:{width:d.width-(p?u:0),height:d.height-(f?u:0)},hasScrollX:f,hasScrollY:p,scrollBarSize:u},v=a.current;a.current=g,g.viewportInnerSize.width===(null==v?void 0:v.viewportInnerSize.width)&&g.viewportInnerSize.height===(null==v?void 0:v.viewportInnerSize.height)||t.current.publishEvent("viewportInnerSizeChange",g.viewportInnerSize)}}),[t,n.scrollbarSize,n.autoHeight,l,s.currentPageTotalHeight]),u=e.useCallback((function(){c(),t.current.publishEvent("debouncedResize",o.current)}),[t,c]),d=e.useCallback((function(){return a.current}),[]),f=e.useCallback((function(){var e=t.current.getRootDimensions();if(!e)return 0;var r=Pc(t,{pagination:n.pagination,paginationMode:n.paginationMode});if(n.getRowHeight){var i=t.current.unstable_getRenderContext(),o=i.lastRowIndex-i.firstRowIndex;return Math.min(o-1,r.rows.length)}var a=Math.floor(e.viewportInnerSize.height/oe(t));return Math.min(a,r.rows.length)}),[t,n.pagination,n.paginationMode,n.getRowHeight]);Pt(t,{resize:u,getRootDimensions:d,unstable_getViewportPageSize:f,unstable_updateGridDimensionsRef:c});var p=e.useMemo((function(){return(0,Cu.Z)(u,60)}),[u]),h=e.useRef(!0),m=e.useCallback((function(e){o.current=e;var t=/jsdom/.test(window.navigator.userAgent);if(0!==e.height||i.current||n.autoHeight||t||(r.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),i.current=!0),0!==e.width||i.current||t||(r.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),i.current=!0),h.current)return u(),void(h.current=!1);p()}),[n.autoHeight,p,r,u]);(0,_.Z)((function(){return c()}),[c]),Bt(t,"sortedRowsSet",c),Bt(t,"pageChange",c),Bt(t,"pageSizeChange",c),Bt(t,"columnsChange",c),Ft(t,"resize",m),Bt(t,"debouncedResize",n.onResize)}(a,t),function(e,t){Bt(e,"columnHeaderClick",t.onColumnHeaderClick),Bt(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),Bt(e,"columnHeaderOver",t.onColumnHeaderOver),Bt(e,"columnHeaderOut",t.onColumnHeaderOut),Bt(e,"columnHeaderEnter",t.onColumnHeaderEnter),Bt(e,"columnHeaderLeave",t.onColumnHeaderLeave),Bt(e,"columnOrderChange",t.onColumnOrderChange),Bt(e,"cellClick",t.onCellClick),Bt(e,"cellDoubleClick",t.onCellDoubleClick),Bt(e,"cellKeyDown",t.onCellKeyDown),Bt(e,"cellFocusOut",t.onCellFocusOut),Bt(e,"preferencePanelClose",t.onPreferencePanelClose),Bt(e,"preferencePanelOpen",t.onPreferencePanelOpen),Bt(e,"menuOpen",t.onMenuOpen),Bt(e,"menuClose",t.onMenuClose),Bt(e,"rowDoubleClick",t.onRowDoubleClick),Bt(e,"rowClick",t.onRowClick),Bt(e,"componentError",t.onError),Bt(e,"stateChange",t.onStateChange)}(a,t),function(t){var n=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.current.unstable_applyPipeProcessors("exportState",{},e)}),[t]),r=e.useCallback((function(e){t.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:e}).callbacks.forEach((function(e){e()})),t.current.forceUpdate()}),[t]);Pt(t,{exportState:n,restoreState:r})}(a),a},Tu={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",errorOverlayDefaultLabel:"An error occurred.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:function(e){return"".concat(e,1!==e?" active filters":" active filter")},toolbarQuickFilterPlaceholder:"Search\u2026",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelDeleteIconLabel:"Delete",filterPanelLinkOperator:"Logic operator",filterPanelOperators:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:function(e){return"".concat(e,1!==e?" active filters":" active filter")},columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:function(e){return"".concat(e.toLocaleString(),1!==e?" rows selected":" row selected")},footerTotalRows:"Total Rows:",footerTotalVisibleRows:function(e,t){return"".concat(e.toLocaleString()," of ").concat(t.toLocaleString())},checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:function(e){return"Group by ".concat(e)},unGroupColumn:function(e){return"Stop grouping by ".concat(e)},detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"},Au=n(3800);function Eu(e){return(0,M.Z)("PrivateSwitchBase",e)}(0,T.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var Pu=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ru=(0,C.ZP)(sr.Z)((function(e){var t=e.ownerState;return(0,v.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),Ou=(0,C.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Iu=e.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,o=e.checkedIcon,a=e.className,s=e.defaultChecked,l=e.disabled,c=e.disableFocusRipple,u=void 0!==c&&c,d=e.edge,f=void 0!==d&&d,p=e.icon,m=e.id,g=e.inputProps,w=e.inputRef,_=e.name,C=e.onBlur,k=e.onChange,M=e.onFocus,T=e.readOnly,A=e.required,E=e.tabIndex,P=e.type,R=e.value,O=(0,y.Z)(e,Pu),I=(0,Au.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),L=(0,i.Z)(I,2),D=L[0],N=L[1],F=bn(),z=l;F&&"undefined"===typeof z&&(z=F.disabled);var B="checkbox"===P||"radio"===P,j=(0,v.Z)({},e,{checked:D,disabled:z,disableFocusRipple:u,edge:f}),Z=function(e){var t=e.classes,n=e.checked,r=e.disabled,i=e.edge,o={root:["root",n&&"checked",r&&"disabled",i&&"edge".concat((0,x.Z)(i))],input:["input"]};return(0,S.Z)(o,Eu,t)}(j);return(0,h.jsxs)(Ru,(0,v.Z)({component:"span",className:(0,b.Z)(Z.root,a),centerRipple:!0,focusRipple:!u,disabled:z,tabIndex:null,role:void 0,onFocus:function(e){M&&M(e),F&&F.onFocus&&F.onFocus(e)},onBlur:function(e){C&&C(e),F&&F.onBlur&&F.onBlur(e)},ownerState:j,ref:t},O,{children:[(0,h.jsx)(Ou,(0,v.Z)({autoFocus:n,checked:r,defaultChecked:s,className:Z.input,disabled:z,id:B&&m,name:_,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;N(t),k&&k(e,t)}},readOnly:T,ref:w,required:A,ownerState:j,tabIndex:E,type:P},"checkbox"===P&&void 0===R?{}:{value:R},g)),D?o:p]}))})),Lu=(0,Fn.Z)((0,h.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Du=(0,Fn.Z)((0,h.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Nu=(0,Fn.Z)((0,h.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Fu(e){return(0,M.Z)("MuiCheckbox",e)}var zu=(0,T.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),Bu=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],ju=(0,C.ZP)(Iu,{shouldForwardProp:function(e){return(0,C.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,x.Z)(n.color))]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,v.Z)({color:(n.vars||n).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat("default"===r.color?n.vars.palette.action.activeChannel:n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,k.Fq)("default"===r.color?n.palette.action.active:n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(t={},(0,o.Z)(t,"&.".concat(zu.checked,", &.").concat(zu.indeterminate),{color:(n.vars||n).palette[r.color].main}),(0,o.Z)(t,"&.".concat(zu.disabled),{color:(n.vars||n).palette.action.disabled}),t))})),Zu=(0,h.jsx)(Du,{}),Hu=(0,h.jsx)(Lu,{}),Uu=(0,h.jsx)(Nu,{}),Vu=e.forwardRef((function(t,n){var r,i,o=(0,xn.Z)({props:t,name:"MuiCheckbox"}),a=o.checkedIcon,s=void 0===a?Zu:a,l=o.color,c=void 0===l?"primary":l,u=o.icon,d=void 0===u?Hu:u,f=o.indeterminate,p=void 0!==f&&f,m=o.indeterminateIcon,g=void 0===m?Uu:m,w=o.inputProps,_=o.size,C=void 0===_?"medium":_,k=o.className,M=(0,y.Z)(o,Bu),T=p?g:d,A=p?g:s,E=(0,v.Z)({},o,{color:c,indeterminate:p,size:C}),P=function(e){var t=e.classes,n=e.indeterminate,r=e.color,i={root:["root",n&&"indeterminate","color".concat((0,x.Z)(r))]},o=(0,S.Z)(i,Fu,t);return(0,v.Z)({},t,o)}(E);return(0,h.jsx)(ju,(0,v.Z)({type:"checkbox",inputProps:(0,v.Z)({"data-indeterminate":p},w),icon:e.cloneElement(T,{fontSize:null!=(r=T.props.fontSize)?r:C}),checkedIcon:e.cloneElement(A,{fontSize:null!=(i=A.props.fontSize)?i:C}),ownerState:E,ref:n,className:(0,b.Z)(P.root,k)},M,{classes:P}))})),Gu=n(3019),Wu=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],$u=(0,C.ZP)(On,{shouldForwardProp:function(e){return(0,C.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,yt.Z)(Pn(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i="rgba(".concat(n.vars.palette.common.onBackgroundChannel," / ").concat(n.vars.opacity.inputUnderline,")")),(0,v.Z)({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat((n.vars||n).palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,o.Z)(t,"&.".concat(Jo.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,o.Z)(t,"&.".concat(Jo.error),{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}}),(0,o.Z)(t,"&:before",{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,o.Z)(t,"&:hover:not(.".concat(Jo.disabled,", .").concat(Jo.error,"):before"),{borderBottom:"2px solid ".concat((n.vars||n).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}}),(0,o.Z)(t,"&.".concat(Jo.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),qu=(0,C.ZP)(In,{name:"MuiInput",slot:"Input",overridesResolver:Rn})({}),Yu=e.forwardRef((function(e,t){var n,r,i,o,a=(0,xn.Z)({props:e,name:"MuiInput"}),s=a.disableUnderline,l=a.components,c=void 0===l?{}:l,u=a.componentsProps,d=a.fullWidth,f=void 0!==d&&d,p=a.inputComponent,m=void 0===p?"input":p,g=a.multiline,b=void 0!==g&&g,x=a.slotProps,w=a.slots,_=void 0===w?{}:w,C=a.type,k=void 0===C?"text":C,M=(0,y.Z)(a,Wu),T=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,S.Z)(n,Ko,t);return(0,v.Z)({},t,r)}(a),A={root:{ownerState:{disableUnderline:s}}},E=(null!=x?x:u)?(0,Gu.Z)(null!=x?x:u,A):A,P=null!=(n=null!=(r=_.root)?r:c.Root)?n:$u,R=null!=(i=null!=(o=_.input)?o:c.Input)?i:qu;return(0,h.jsx)(Nn,(0,v.Z)({slots:{root:P,input:R},slotProps:E,fullWidth:f,inputComponent:m,multiline:b,ref:t,type:k},M,{classes:T}))}));Yu.muiName="Input";var Xu=Yu,Ku=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Ju=(0,C.ZP)(On,{shouldForwardProp:function(e){return(0,C.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,yt.Z)(Pn(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n,r,i=e.theme,a=e.ownerState,s="light"===i.palette.mode,l=s?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",c=s?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",u=s?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",d=s?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,v.Z)((t={position:"relative",backgroundColor:i.vars?i.vars.palette.FilledInput.bg:c,borderTopLeftRadius:(i.vars||i).shape.borderRadius,borderTopRightRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),"&:hover":{backgroundColor:i.vars?i.vars.palette.FilledInput.hoverBg:u,"@media (hover: none)":{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:c}}},(0,o.Z)(t,"&.".concat(na.focused),{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:c}),(0,o.Z)(t,"&.".concat(na.disabled),{backgroundColor:i.vars?i.vars.palette.FilledInput.disabledBg:d}),t),!a.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(null==(r=(i.vars||i).palette[a.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"}},(0,o.Z)(n,"&.".concat(na.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,o.Z)(n,"&.".concat(na.error),{"&:before, &:after":{borderBottomColor:(i.vars||i).palette.error.main}}),(0,o.Z)(n,"&:before",{borderBottom:"1px solid ".concat(i.vars?"rgba(".concat(i.vars.palette.common.onBackgroundChannel," / ").concat(i.vars.opacity.inputUnderline,")"):l),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"}),(0,o.Z)(n,"&:hover:not(.".concat(na.disabled,", .").concat(na.error,"):before"),{borderBottom:"1px solid ".concat((i.vars||i).palette.text.primary)}),(0,o.Z)(n,"&.".concat(na.disabled,":before"),{borderBottomStyle:"dotted"}),n),a.startAdornment&&{paddingLeft:12},a.endAdornment&&{paddingRight:12},a.multiline&&(0,v.Z)({padding:"25px 12px 8px"},"small"===a.size&&{paddingTop:21,paddingBottom:4},a.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),Qu=(0,C.ZP)(In,{name:"MuiFilledInput",slot:"Input",overridesResolver:Rn})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&(0,o.Z)({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),ed=e.forwardRef((function(e,t){var n,r,i,o,a=(0,xn.Z)({props:e,name:"MuiFilledInput"}),s=a.components,l=void 0===s?{}:s,c=a.componentsProps,u=a.fullWidth,d=void 0!==u&&u,f=a.inputComponent,p=void 0===f?"input":f,m=a.multiline,g=void 0!==m&&m,b=a.slotProps,x=a.slots,w=void 0===x?{}:x,_=a.type,C=void 0===_?"text":_,k=(0,y.Z)(a,Ku),M=(0,v.Z)({},a,{fullWidth:d,inputComponent:p,multiline:g,type:C}),T=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,S.Z)(n,ta,t);return(0,v.Z)({},t,r)}(a),A={root:{ownerState:M},input:{ownerState:M}},E=(null!=b?b:c)?(0,Gu.Z)(null!=b?b:c,A):A,P=null!=(n=null!=(r=w.root)?r:l.Root)?n:Ju,R=null!=(i=null!=(o=w.input)?o:l.Input)?i:Qu;return(0,h.jsx)(Nn,(0,v.Z)({slots:{root:P,input:R},componentsProps:E,fullWidth:d,inputComponent:p,multiline:g,ref:t,type:C},k,{classes:T}))}));ed.muiName="Input";var td,nd=ed,rd=["children","classes","className","label","notched"],id=(0,C.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),od=(0,C.ZP)("legend")((function(e){var t=e.ownerState,n=e.theme;return(0,v.Z)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,v.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));var ad=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],sd=(0,C.ZP)(On,{shouldForwardProp:function(e){return(0,C.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Pn})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,v.Z)((t={position:"relative",borderRadius:(n.vars||n).shape.borderRadius},(0,o.Z)(t,"&:hover .".concat(ea.notchedOutline),{borderColor:(n.vars||n).palette.text.primary}),(0,o.Z)(t,"@media (hover: none)",(0,o.Z)({},"&:hover .".concat(ea.notchedOutline),{borderColor:n.vars?"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.23)"):i})),(0,o.Z)(t,"&.".concat(ea.focused," .").concat(ea.notchedOutline),{borderColor:(n.vars||n).palette[r.color].main,borderWidth:2}),(0,o.Z)(t,"&.".concat(ea.error," .").concat(ea.notchedOutline),{borderColor:(n.vars||n).palette.error.main}),(0,o.Z)(t,"&.".concat(ea.disabled," .").concat(ea.notchedOutline),{borderColor:(n.vars||n).palette.action.disabled}),t),r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&(0,v.Z)({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),ld=(0,C.ZP)((function(e){var t=e.className,n=e.label,r=e.notched,i=(0,y.Z)(e,rd),o=null!=n&&""!==n,a=(0,v.Z)({},e,{notched:r,withLabel:o});return(0,h.jsx)(id,(0,v.Z)({"aria-hidden":!0,className:t,ownerState:a},i,{children:(0,h.jsx)(od,{ownerState:a,children:o?(0,h.jsx)("span",{children:n}):td||(td=(0,h.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){var t=e.theme,n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),cd=(0,C.ZP)(In,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Rn})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&(0,o.Z)({"&:-webkit-autofill":{borderRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),ud=e.forwardRef((function(t,n){var r,i,o,a,s,l=(0,xn.Z)({props:t,name:"MuiOutlinedInput"}),c=l.components,u=void 0===c?{}:c,d=l.fullWidth,f=void 0!==d&&d,p=l.inputComponent,m=void 0===p?"input":p,g=l.label,b=l.multiline,x=void 0!==b&&b,w=l.notched,_=l.slots,C=void 0===_?{}:_,k=l.type,M=void 0===k?"text":k,T=(0,y.Z)(l,ad),A=function(e){var t=e.classes,n=(0,S.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Qo,t);return(0,v.Z)({},t,n)}(l),E=bn(),P=vn({props:l,muiFormControl:E,states:["required"]}),R=(0,v.Z)({},l,{color:P.color||"primary",disabled:P.disabled,error:P.error,focused:P.focused,formControl:E,fullWidth:f,hiddenLabel:P.hiddenLabel,multiline:x,size:P.size,type:M}),O=null!=(r=null!=(i=C.root)?i:u.Root)?r:sd,I=null!=(o=null!=(a=C.input)?a:u.Input)?o:cd;return(0,h.jsx)(Nn,(0,v.Z)({slots:{root:O,input:I},renderSuffix:function(t){return(0,h.jsx)(ld,{ownerState:R,className:A.notchedOutline,label:null!=g&&""!==g&&P.required?s||(s=(0,h.jsxs)(e.Fragment,{children:[g,"\xa0","*"]})):g,notched:"undefined"!==typeof w?w:Boolean(t.startAdornment||t.filled||t.focused)})},fullWidth:f,inputComponent:m,multiline:x,ref:n,type:M},T,{classes:(0,v.Z)({},A,{notchedOutline:null})}))}));ud.muiName="Input";var dd=ud;function fd(e){return(0,M.Z)("MuiFormLabel",e)}var pd=(0,T.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),hd=["children","className","color","component","disabled","error","filled","focused","required"],md=(0,C.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,v.Z)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,v.Z)({color:(n.vars||n).palette.text.secondary},n.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},(0,o.Z)(t,"&.".concat(pd.focused),{color:(n.vars||n).palette[r.color].main}),(0,o.Z)(t,"&.".concat(pd.disabled),{color:(n.vars||n).palette.text.disabled}),(0,o.Z)(t,"&.".concat(pd.error),{color:(n.vars||n).palette.error.main}),t))})),gd=(0,C.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,o.Z)({},"&.".concat(pd.error),{color:(t.vars||t).palette.error.main})})),vd=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiFormLabel"}),r=n.children,i=n.className,o=n.component,a=void 0===o?"label":o,s=(0,y.Z)(n,hd),l=vn({props:n,muiFormControl:bn(),states:["color","required","focused","disabled","error","filled"]}),c=(0,v.Z)({},n,{color:l.color||"primary",component:a,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),u=function(e){var t=e.classes,n=e.color,r=e.focused,i=e.disabled,o=e.error,a=e.filled,s=e.required,l={root:["root","color".concat((0,x.Z)(n)),i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return(0,S.Z)(l,fd,t)}(c);return(0,h.jsxs)(md,(0,v.Z)({as:a,ownerState:c,className:(0,b.Z)(u.root,i),ref:t},s,{children:[r,l.required&&(0,h.jsxs)(gd,{ownerState:c,"aria-hidden":!0,className:u.asterisk,children:["\u2009","*"]})]}))}));function yd(e){return(0,M.Z)("MuiInputLabel",e)}(0,T.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var bd=["disableAnimation","margin","shrink","variant","className"],xd=(0,C.ZP)(vd,{shouldForwardProp:function(e){return(0,C.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,o.Z)({},"& .".concat(pd.asterisk),t.asterisk),t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,v.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,v.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,v.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),wd=e.forwardRef((function(e,t){var n=(0,xn.Z)({name:"MuiInputLabel",props:e}),r=n.disableAnimation,i=void 0!==r&&r,o=n.shrink,a=n.className,s=(0,y.Z)(n,bd),l=bn(),c=o;"undefined"===typeof c&&l&&(c=l.filled||l.focused||l.adornedStart);var u=vn({props:n,muiFormControl:l,states:["size","variant","required"]}),d=(0,v.Z)({},n,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required}),f=function(e){var t=e.classes,n=e.formControl,r=e.size,i=e.shrink,o={root:["root",n&&"formControl",!e.disableAnimation&&"animated",i&&"shrink","small"===r&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},a=(0,S.Z)(o,yd,t);return(0,v.Z)({},t,a)}(d);return(0,h.jsx)(xd,(0,v.Z)({"data-shrink":c,ownerState:d,ref:t,className:(0,b.Z)(f.root,a)},s,{classes:f}))})),_d=n(7816);function Sd(e){return(0,M.Z)("MuiFormControl",e)}(0,T.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var Cd=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],kd=(0,C.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,v.Z)({},t.root,t["margin".concat((0,x.Z)(n.margin))],n.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return(0,v.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Md=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiFormControl"}),o=r.children,a=r.className,s=r.color,l=void 0===s?"primary":s,c=r.component,u=void 0===c?"div":c,d=r.disabled,f=void 0!==d&&d,p=r.error,m=void 0!==p&&p,g=r.focused,w=r.fullWidth,_=void 0!==w&&w,C=r.hiddenLabel,k=void 0!==C&&C,M=r.margin,T=void 0===M?"none":M,A=r.required,E=void 0!==A&&A,P=r.size,R=void 0===P?"medium":P,O=r.variant,I=void 0===O?"outlined":O,L=(0,y.Z)(r,Cd),D=(0,v.Z)({},r,{color:l,component:u,disabled:f,error:m,fullWidth:_,hiddenLabel:k,margin:T,required:E,size:R,variant:I}),N=function(e){var t=e.classes,n=e.margin,r=e.fullWidth,i={root:["root","none"!==n&&"margin".concat((0,x.Z)(n)),r&&"fullWidth"]};return(0,S.Z)(i,Sd,t)}(D),F=e.useState((function(){var t=!1;return o&&e.Children.forEach(o,(function(e){if((0,_d.Z)(e,["Input","Select"])){var n=(0,_d.Z)(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)}})),t})),z=(0,i.Z)(F,2),B=z[0],j=z[1],Z=e.useState((function(){var t=!1;return o&&e.Children.forEach(o,(function(e){(0,_d.Z)(e,["Input","Select"])&&Mn(e.props,!0)&&(t=!0)})),t})),H=(0,i.Z)(Z,2),U=H[0],V=H[1],G=e.useState(!1),W=(0,i.Z)(G,2),$=W[0],q=W[1];f&&$&&q(!1);var Y,X=void 0===g||f?$:g,K=e.useMemo((function(){return{adornedStart:B,setAdornedStart:j,color:l,disabled:f,error:m,filled:U,focused:X,fullWidth:_,hiddenLabel:k,size:R,onBlur:function(){q(!1)},onEmpty:function(){V(!1)},onFilled:function(){V(!0)},onFocus:function(){q(!0)},registerEffect:Y,required:E,variant:I}}),[B,l,f,m,U,X,_,k,Y,E,R,I]);return(0,h.jsx)(yn.Provider,{value:K,children:(0,h.jsx)(kd,(0,v.Z)({as:u,ownerState:D,className:(0,b.Z)(N.root,a),ref:n},L,{children:o}))})}));function Td(e){return(0,M.Z)("MuiFormHelperText",e)}var Ad,Ed=(0,T.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Pd=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Rd=(0,C.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.size&&t["size".concat((0,x.Z)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,v.Z)({color:(n.vars||n).palette.text.secondary},n.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,o.Z)(t,"&.".concat(Ed.disabled),{color:(n.vars||n).palette.text.disabled}),(0,o.Z)(t,"&.".concat(Ed.error),{color:(n.vars||n).palette.error.main}),t),"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})})),Od=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiFormHelperText"}),r=n.children,i=n.className,o=n.component,a=void 0===o?"p":o,s=(0,y.Z)(n,Pd),l=vn({props:n,muiFormControl:bn(),states:["variant","size","disabled","error","filled","focused","required"]}),c=(0,v.Z)({},n,{component:a,contained:"filled"===l.variant||"outlined"===l.variant,variant:l.variant,size:l.size,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),u=function(e){var t=e.classes,n=e.contained,r=e.size,i=e.disabled,o=e.error,a=e.filled,s=e.focused,l=e.required,c={root:["root",i&&"disabled",o&&"error",r&&"size".concat((0,x.Z)(r)),n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return(0,S.Z)(c,Td,t)}(c);return(0,h.jsx)(Rd,(0,v.Z)({as:a,ownerState:c,className:(0,b.Z)(u.root,i),ref:t},s,{children:" "===r?Ad||(Ad=(0,h.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),Id=n(4246);function Ld(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Dd(e){return parseInt((0,ln.Z)(e).getComputedStyle(e).paddingRight,10)||0}function Nd(e,t,n,r,i){var o=[t,n].concat((0,yt.Z)(r));[].forEach.call(e.children,(function(e){var t=-1===o.indexOf(e),n=!function(e){var t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&Ld(e,i)}))}function Fd(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function zd(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,Ur.Z)(e);return t.body===e?(0,ln.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var i=Ms((0,Ur.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Dd(r)+i,"px");var o=(0,Ur.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(o,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(Dd(e)+i,"px")}))}var a;if(r.parentNode instanceof DocumentFragment)a=(0,Ur.Z)(r).body;else{var s=r.parentElement,l=(0,ln.Z)(r);a="HTML"===(null==s?void 0:s.nodeName)&&"scroll"===l.getComputedStyle(s).overflowY?s:r}n.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var Bd=function(){function e(){Ae(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return Re(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Ld(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Nd(t,e.mount,e.modalRef,r,!0);var i=Fd(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=Fd(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=zd(r,t))}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.modals.indexOf(e);if(-1===n)return n;var r=Fd(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&Ld(e.modalRef,t),Nd(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{var o=i.modals[i.modals.length-1];o.modalRef&&Ld(o.modalRef,!1)}return n}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),jd=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Zd(e){var t=[],n=[];return Array.from(e.querySelectorAll(jd)).forEach((function(e,r){var i=function(e){var t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function Hd(){return!0}var Ud=function(t){var n=t.children,r=t.disableAutoFocus,i=void 0!==r&&r,o=t.disableEnforceFocus,a=void 0!==o&&o,s=t.disableRestoreFocus,l=void 0!==s&&s,c=t.getTabbable,u=void 0===c?Zd:c,d=t.isEnabled,f=void 0===d?Hd:d,p=t.open,m=e.useRef(!1),g=e.useRef(null),v=e.useRef(null),y=e.useRef(null),b=e.useRef(null),x=e.useRef(!1),w=e.useRef(null),_=(0,sn.Z)(n.ref,w),S=e.useRef(null);e.useEffect((function(){p&&w.current&&(x.current=!i)}),[i,p]),e.useEffect((function(){if(p&&w.current){var e=(0,Ur.Z)(w.current);return w.current.contains(e.activeElement)||(w.current.hasAttribute("tabIndex")||w.current.setAttribute("tabIndex","-1"),x.current&&w.current.focus()),function(){l||(y.current&&y.current.focus&&(m.current=!0,y.current.focus()),y.current=null)}}}),[p]),e.useEffect((function(){if(p&&w.current){var e=(0,Ur.Z)(w.current),t=function(t){var n=w.current;if(null!==n)if(e.hasFocus()&&!a&&f()&&!m.current){if(!n.contains(e.activeElement)){if(t&&b.current!==t.target||e.activeElement!==b.current)b.current=null;else if(null!==b.current)return;if(!x.current)return;var r=[];if(e.activeElement!==g.current&&e.activeElement!==v.current||(r=u(w.current)),r.length>0){var i,o,s=Boolean((null==(i=S.current)?void 0:i.shiftKey)&&"Tab"===(null==(o=S.current)?void 0:o.key)),l=r[0],c=r[r.length-1];"string"!==typeof l&&"string"!==typeof c&&(s?c.focus():l.focus())}else n.focus()}}else m.current=!1},n=function(t){S.current=t,!a&&f()&&"Tab"===t.key&&e.activeElement===w.current&&t.shiftKey&&(m.current=!0,v.current&&v.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){e.activeElement&&"BODY"===e.activeElement.tagName&&t(null)}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[i,a,l,f,p,u]);var C=function(e){null===y.current&&(y.current=e.relatedTarget),x.current=!0};return(0,h.jsxs)(e.Fragment,{children:[(0,h.jsx)("div",{tabIndex:p?0:-1,onFocus:C,ref:g,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:_,onFocus:function(e){null===y.current&&(y.current=e.relatedTarget),x.current=!0,b.current=e.target;var t=n.props.onFocus;t&&t(e)}}),(0,h.jsx)("div",{tabIndex:p?0:-1,onFocus:C,ref:v,"data-testid":"sentinelEnd"})]})};function Vd(e){return(0,M.Z)("MuiModal",e)}(0,T.Z)("MuiModal",["root","hidden"]);var Gd=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"];var Wd=new Bd,$d=e.forwardRef((function(t,n){var r,o,a=t.children,s=t.classes,l=t.closeAfterTransition,c=void 0!==l&&l,u=t.component,d=t.container,f=t.disableAutoFocus,p=void 0!==f&&f,m=t.disableEnforceFocus,g=void 0!==m&&m,b=t.disableEscapeKeyDown,x=void 0!==b&&b,w=t.disablePortal,_=void 0!==w&&w,C=t.disableRestoreFocus,k=void 0!==C&&C,M=t.disableScrollLock,T=void 0!==M&&M,A=t.hideBackdrop,E=void 0!==A&&A,P=t.keepMounted,R=void 0!==P&&P,O=t.manager,I=void 0===O?Wd:O,L=t.onBackdropClick,D=t.onClose,N=t.onKeyDown,F=t.open,z=t.onTransitionEnter,B=t.onTransitionExited,j=t.slotProps,Z=void 0===j?{}:j,H=t.slots,U=void 0===H?{}:H,V=(0,y.Z)(t,Gd),G=e.useState(!F),W=(0,i.Z)(G,2),$=W[0],q=W[1],Y=e.useRef({}),X=e.useRef(null),K=e.useRef(null),J=(0,sn.Z)(K,n),Q=function(e){return!!e&&e.props.hasOwnProperty("in")}(a),ee=null==(r=t["aria-hidden"])||r,te=function(){return Y.current.modalRef=K.current,Y.current.mountNode=X.current,Y.current},ne=function(){I.mount(te(),{disableScrollLock:T}),K.current&&(K.current.scrollTop=0)},re=(0,Dr.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(d)||(0,Ur.Z)(X.current).body;I.add(te(),e),K.current&&ne()})),ie=e.useCallback((function(){return I.isTopModal(te())}),[I]),oe=(0,Dr.Z)((function(e){X.current=e,e&&K.current&&(F&&ie()?ne():Ld(K.current,ee))})),ae=e.useCallback((function(){I.remove(te(),ee)}),[I,ee]);e.useEffect((function(){return function(){ae()}}),[ae]),e.useEffect((function(){F?re():Q&&c||ae()}),[F,ae,Q,c,re]);var se=(0,v.Z)({},t,{classes:s,closeAfterTransition:c,disableAutoFocus:p,disableEnforceFocus:g,disableEscapeKeyDown:x,disablePortal:_,disableRestoreFocus:k,disableScrollLock:T,exited:$,hideBackdrop:E,keepMounted:R}),le=function(e){var t=e.open,n=e.exited,r=e.classes,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,S.Z)(i,Vd,r)}(se),ce={};void 0===a.props.tabIndex&&(ce.tabIndex="-1"),Q&&(ce.onEnter=(0,Id.Z)((function(){q(!1),z&&z()}),a.props.onEnter),ce.onExited=(0,Id.Z)((function(){q(!0),B&&B(),c&&ae()}),a.props.onExited));var ue=null!=(o=null!=u?u:U.root)?o:"div",de=go({elementType:ue,externalSlotProps:Z.root,externalForwardedProps:V,additionalProps:{ref:J,role:"presentation",onKeyDown:function(e){N&&N(e),"Escape"===e.key&&ie()&&(x||(e.stopPropagation(),D&&D(e,"escapeKeyDown")))}},className:le.root,ownerState:se}),fe=U.backdrop,pe=go({elementType:fe,externalSlotProps:Z.backdrop,additionalProps:{"aria-hidden":!0,onClick:function(e){e.target===e.currentTarget&&(L&&L(e),D&&D(e,"backdropClick"))},open:F},className:le.backdrop,ownerState:se});return R||F||Q&&!$?(0,h.jsx)(lo,{ref:oe,container:d,disablePortal:_,children:(0,h.jsxs)(ue,(0,v.Z)({},de,{children:[!E&&fe?(0,h.jsx)(fe,(0,v.Z)({},pe)):null,(0,h.jsx)(Ud,{disableEnforceFocus:g,disableAutoFocus:p,disableRestoreFocus:k,isEnabled:ie,open:F,children:e.cloneElement(a,ce)})]}))}):null})),qd=$d,Yd=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Xd={entering:{opacity:1},entered:{opacity:1}},Kd=e.forwardRef((function(t,n){var r=Ys(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},o=t.addEndListener,a=t.appear,s=void 0===a||a,l=t.children,c=t.easing,u=t.in,d=t.onEnter,f=t.onEntered,p=t.onEntering,m=t.onExit,g=t.onExited,b=t.onExiting,x=t.style,_=t.timeout,S=void 0===_?i:_,C=t.TransitionComponent,k=void 0===C?$s:C,M=(0,y.Z)(t,Yd),T=e.useRef(null),A=(0,w.Z)(T,l.ref,n),E=function(e){return function(t){if(e){var n=T.current;void 0===t?e(n):e(n,t)}}},P=E(p),R=E((function(e,t){Xs(e);var n=Ks({style:x,timeout:S,easing:c},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),d&&d(e,t)})),O=E(f),I=E(b),L=E((function(e){var t=Ks({style:x,timeout:S,easing:c},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),m&&m(e)})),D=E(g);return(0,h.jsx)(k,(0,v.Z)({appear:s,in:u,nodeRef:T,onEnter:R,onEntered:O,onEntering:P,onExit:L,onExited:D,onExiting:I,addEndListener:function(e){o&&o(T.current,e)},timeout:S},M,{children:function(t,n){return e.cloneElement(l,(0,v.Z)({style:(0,v.Z)({opacity:0,visibility:"exited"!==t||u?void 0:"hidden"},Xd[t],x,l.props.style),ref:A},n))}}))})),Jd=Kd;function Qd(e){return(0,M.Z)("MuiBackdrop",e)}(0,T.Z)("MuiBackdrop",["root","invisible"]);var ef=["children","component","components","componentsProps","className","invisible","open","slotProps","slots","transitionDuration","TransitionComponent"],tf=(0,C.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,v.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),nf=e.forwardRef((function(e,t){var n,r,i,o=(0,xn.Z)({props:e,name:"MuiBackdrop"}),a=o.children,s=o.component,l=void 0===s?"div":s,c=o.components,u=void 0===c?{}:c,d=o.componentsProps,f=void 0===d?{}:d,p=o.className,m=o.invisible,g=void 0!==m&&m,x=o.open,w=o.slotProps,_=void 0===w?{}:w,C=o.slots,k=void 0===C?{}:C,M=o.transitionDuration,T=o.TransitionComponent,A=void 0===T?Jd:T,E=(0,y.Z)(o,ef),P=(0,v.Z)({},o,{component:l,invisible:g}),R=function(e){var t=e.classes,n={root:["root",e.invisible&&"invisible"]};return(0,S.Z)(n,Qd,t)}(P),O=null!=(n=_.root)?n:f.root;return(0,h.jsx)(A,(0,v.Z)({in:x,timeout:M},E,{children:(0,h.jsx)(tf,(0,v.Z)({"aria-hidden":!0},O,{as:null!=(r=null!=(i=k.root)?i:u.Root)?r:l,className:(0,b.Z)(R.root,p,null==O?void 0:O.className),ownerState:(0,v.Z)({},P,null==O?void 0:O.ownerState),classes:R,ref:t,children:a}))}))})),rf=nf,of=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],af=(0,C.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),sf=(0,C.ZP)(rf,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),lf=e.forwardRef((function(t,n){var r,o,a,s,l,c,u=(0,xn.Z)({name:"MuiModal",props:t}),d=u.BackdropComponent,f=void 0===d?sf:d,p=u.BackdropProps,m=u.closeAfterTransition,g=void 0!==m&&m,b=u.children,x=u.component,w=u.components,_=void 0===w?{}:w,S=u.componentsProps,C=void 0===S?{}:S,k=u.disableAutoFocus,M=void 0!==k&&k,T=u.disableEnforceFocus,A=void 0!==T&&T,E=u.disableEscapeKeyDown,P=void 0!==E&&E,R=u.disablePortal,O=void 0!==R&&R,I=u.disableRestoreFocus,L=void 0!==I&&I,D=u.disableScrollLock,N=void 0!==D&&D,F=u.hideBackdrop,z=void 0!==F&&F,B=u.keepMounted,j=void 0!==B&&B,Z=u.slotProps,H=u.slots,U=u.theme,V=(0,y.Z)(u,of),G=e.useState(!0),W=(0,i.Z)(G,2),$=W[0],q=W[1],Y={closeAfterTransition:g,disableAutoFocus:M,disableEnforceFocus:A,disableEscapeKeyDown:P,disablePortal:O,disableRestoreFocus:L,disableScrollLock:N,hideBackdrop:z,keepMounted:j},X=(0,v.Z)({},u,Y,{exited:$}),K=function(e){return e.classes}(X),J=null!=(r=null!=(o=null==H?void 0:H.root)?o:_.Root)?r:af,Q=null!=(a=null!=(s=null==H?void 0:H.backdrop)?s:_.Backdrop)?a:f,ee=null!=(l=null==Z?void 0:Z.root)?l:C.root,te=null!=(c=null==Z?void 0:Z.backdrop)?c:C.backdrop;return(0,h.jsx)(qd,(0,v.Z)({slots:{root:J,backdrop:Q},slotProps:{root:function(){return(0,v.Z)({},ho(ee,X),!gn(J)&&{as:x,theme:U})},backdrop:function(){return(0,v.Z)({},p,ho(te,X))}},onTransitionEnter:function(){return q(!1)},onTransitionExited:function(){return q(!0)},ref:n},V,{classes:K},Y,{children:b}))})),cf=lf;function uf(e){return(0,M.Z)("MuiPopover",e)}(0,T.Z)("MuiPopover",["root","paper"]);var df=["onEntering"],ff=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function pf(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function hf(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function mf(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function gf(e){return"function"===typeof e?e():e}var vf=(0,C.ZP)(cf,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),yf=(0,C.ZP)(Fo,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),bf=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiPopover"}),o=r.action,a=r.anchorEl,s=r.anchorOrigin,l=void 0===s?{vertical:"top",horizontal:"left"}:s,c=r.anchorPosition,u=r.anchorReference,d=void 0===u?"anchorEl":u,f=r.children,p=r.className,m=r.container,g=r.elevation,x=void 0===g?8:g,_=r.marginThreshold,C=void 0===_?16:_,k=r.open,M=r.PaperProps,T=void 0===M?{}:M,A=r.transformOrigin,E=void 0===A?{vertical:"top",horizontal:"left"}:A,P=r.TransitionComponent,R=void 0===P?rl:P,O=r.transitionDuration,I=void 0===O?"auto":O,L=r.TransitionProps,D=(void 0===L?{}:L).onEntering,N=(0,y.Z)(r.TransitionProps,df),F=(0,y.Z)(r,ff),z=e.useRef(),B=(0,w.Z)(z,T.ref),j=(0,v.Z)({},r,{anchorOrigin:l,anchorReference:d,elevation:x,marginThreshold:C,PaperProps:T,transformOrigin:E,TransitionComponent:R,transitionDuration:I,TransitionProps:N}),Z=function(e){var t=e.classes;return(0,S.Z)({root:["root"],paper:["paper"]},uf,t)}(j),H=e.useCallback((function(){if("anchorPosition"===d)return c;var e=gf(a),t=(e&&1===e.nodeType?e:(0,ws.Z)(z.current).body).getBoundingClientRect();return{top:t.top+pf(t,l.vertical),left:t.left+hf(t,l.horizontal)}}),[a,l.horizontal,l.vertical,c,d]),U=e.useCallback((function(e){return{vertical:pf(e,E.vertical),horizontal:hf(e,E.horizontal)}}),[E.horizontal,E.vertical]),V=e.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=U(t);if("none"===d)return{top:null,left:null,transformOrigin:mf(n)};var r=H(),i=r.top-n.vertical,o=r.left-n.horizontal,s=i+t.height,l=o+t.width,c=(0,Ve.Z)(gf(a)),u=c.innerHeight-C,f=c.innerWidth-C;if(i<C){var p=i-C;i-=p,n.vertical+=p}else if(s>u){var h=s-u;i-=h,n.vertical+=h}if(o<C){var m=o-C;o-=m,n.horizontal+=m}else if(l>f){var g=l-f;o-=g,n.horizontal+=g}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:mf(n)}}),[a,d,H,U,C]),G=e.useState(k),W=(0,i.Z)(G,2),$=W[0],q=W[1],Y=e.useCallback((function(){var e=z.current;if(e){var t=V(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,q(!0)}}),[V]);e.useEffect((function(){k&&Y()})),e.useImperativeHandle(o,(function(){return k?{updatePosition:function(){Y()}}:null}),[k,Y]),e.useEffect((function(){if(k){var e=(0,Cu.Z)((function(){Y()})),t=(0,Ve.Z)(a);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[a,k,Y]);var X=I;"auto"!==I||R.muiSupportAuto||(X=void 0);var K=m||(a?(0,ws.Z)(gf(a)).body:void 0);return(0,h.jsx)(vf,(0,v.Z)({BackdropProps:{invisible:!0},className:(0,b.Z)(Z.root,p),container:K,open:k,ref:n,ownerState:j},F,{children:(0,h.jsx)(R,(0,v.Z)({appear:!0,in:k,onEntering:function(e,t){D&&D(e,t),Y()},onExited:function(){q(!1)},timeout:X},N,{children:(0,h.jsx)(yf,(0,v.Z)({elevation:x},T,{ref:B,className:(0,b.Z)(Z.paper,T.className)},$?void 0:{style:(0,v.Z)({},T.style,{opacity:0})},{ownerState:j,children:f}))}))}))})),xf=bf;function wf(e){return(0,M.Z)("MuiMenu",e)}(0,T.Z)("MuiMenu",["root","paper","list"]);var _f=["onEntering"],Sf=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Cf={vertical:"top",horizontal:"right"},kf={vertical:"top",horizontal:"left"},Mf=(0,C.ZP)(xf,{shouldForwardProp:function(e){return(0,C.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Tf=(0,C.ZP)(Fo,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Af=(0,C.ZP)(Ls,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),Ef=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiMenu"}),i=r.autoFocus,o=void 0===i||i,a=r.children,s=r.disableAutoFocusItem,l=void 0!==s&&s,c=r.MenuListProps,u=void 0===c?{}:c,d=r.onClose,f=r.open,p=r.PaperProps,m=void 0===p?{}:p,g=r.PopoverClasses,x=r.transitionDuration,w=void 0===x?"auto":x,_=r.TransitionProps,C=(void 0===_?{}:_).onEntering,k=r.variant,M=void 0===k?"selectedMenu":k,T=(0,y.Z)(r.TransitionProps,_f),A=(0,y.Z)(r,Sf),E=Ys(),P="rtl"===E.direction,R=(0,v.Z)({},r,{autoFocus:o,disableAutoFocusItem:l,MenuListProps:u,onEntering:C,PaperProps:m,transitionDuration:w,TransitionProps:T,variant:M}),O=function(e){var t=e.classes;return(0,S.Z)({root:["root"],paper:["paper"],list:["list"]},wf,t)}(R),I=o&&!l&&f,L=e.useRef(null),D=-1;return e.Children.map(a,(function(t,n){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===M&&t.props.selected||-1===D)&&(D=n))})),(0,h.jsx)(Mf,(0,v.Z)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:P?"right":"left"},transformOrigin:P?Cf:kf,PaperProps:(0,v.Z)({component:Tf},m,{classes:(0,v.Z)({},m.classes,{root:O.paper})}),className:O.root,open:f,ref:n,transitionDuration:w,TransitionProps:(0,v.Z)({onEntering:function(e,t){L.current&&L.current.adjustStyleForScrollbar(e,E),C&&C(e,t)}},T),ownerState:R},A,{classes:g,children:(0,h.jsx)(Af,(0,v.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:L,autoFocus:o&&(-1===D||l),autoFocusItem:I,variant:M},u,{className:(0,b.Z)(O.list,u.className),children:a}))}))})),Pf=Ef;function Rf(e){return(0,M.Z)("MuiNativeSelect",e)}var Of=(0,T.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),If=["className","disabled","IconComponent","inputRef","variant"],Lf=function(e){var t,n=e.ownerState,r=e.theme;return(0,v.Z)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,v.Z)({},r.vars?{backgroundColor:"rgba(".concat(r.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"}},(0,o.Z)(t,"&.".concat(Of.disabled),{cursor:"default"}),(0,o.Z)(t,"&[multiple]",{height:"auto"}),(0,o.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:(r.vars||r).palette.background.paper}),(0,o.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:(r.vars||r).shape.borderRadius,"&:focus":{borderRadius:(r.vars||r).shape.borderRadius},"&&&":{paddingRight:32}})},Df=(0,C.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:C.FO,overridesResolver:function(e,t){var n=e.ownerState;return[t.select,t[n.variant],(0,o.Z)({},"&.".concat(Of.multiple),t.multiple)]}})(Lf),Nf=function(e){var t=e.ownerState,n=e.theme;return(0,v.Z)((0,o.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active},"&.".concat(Of.disabled),{color:(n.vars||n).palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},Ff=(0,C.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,x.Z)(n.variant))],n.open&&t.iconOpen]}})(Nf),zf=e.forwardRef((function(t,n){var r=t.className,i=t.disabled,o=t.IconComponent,a=t.inputRef,s=t.variant,l=void 0===s?"standard":s,c=(0,y.Z)(t,If),u=(0,v.Z)({},t,{disabled:i,variant:l}),d=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,o=e.open,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,x.Z)(n)),o&&"iconOpen",r&&"disabled"]};return(0,S.Z)(a,Rf,t)}(u);return(0,h.jsxs)(e.Fragment,{children:[(0,h.jsx)(Df,(0,v.Z)({ownerState:u,className:(0,b.Z)(d.select,r),disabled:i,ref:a||n},c)),t.multiple?null:(0,h.jsx)(Ff,{as:o,ownerState:u,className:d.icon})]})}));function Bf(e){return(0,M.Z)("MuiSelect",e)}var jf,Zf=(0,T.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Hf=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Uf=(0,C.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var n=e.ownerState;return[(0,o.Z)({},"&.".concat(Zf.select),t.select),(0,o.Z)({},"&.".concat(Zf.select),t[n.variant]),(0,o.Z)({},"&.".concat(Zf.multiple),t.multiple)]}})(Lf,(0,o.Z)({},"&.".concat(Zf.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),Vf=(0,C.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,x.Z)(n.variant))],n.open&&t.iconOpen]}})(Nf),Gf=(0,C.ZP)("input",{shouldForwardProp:function(e){return(0,C.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Wf(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function $f(e){return null==e||"string"===typeof e&&!e.trim()}var qf,Yf,Xf=e.forwardRef((function(t,n){var r=t["aria-describedby"],o=t["aria-label"],a=t.autoFocus,s=t.autoWidth,l=t.children,c=t.className,u=t.defaultOpen,d=t.defaultValue,f=t.disabled,p=t.displayEmpty,m=t.IconComponent,g=t.inputRef,_=t.labelId,C=t.MenuProps,k=void 0===C?{}:C,M=t.multiple,T=t.name,A=t.onBlur,E=t.onChange,P=t.onClose,R=t.onFocus,O=t.onOpen,I=t.open,L=t.readOnly,D=t.renderValue,N=t.SelectDisplayProps,F=void 0===N?{}:N,z=t.tabIndex,B=t.value,j=t.variant,Z=void 0===j?"standard":j,H=(0,y.Z)(t,Hf),U=(0,Au.Z)({controlled:B,default:d,name:"Select"}),V=(0,i.Z)(U,2),G=V[0],W=V[1],$=(0,Au.Z)({controlled:I,default:u,name:"Select"}),q=(0,i.Z)($,2),Y=q[0],X=q[1],K=e.useRef(null),J=e.useRef(null),Q=e.useState(null),ee=(0,i.Z)(Q,2),te=ee[0],ne=ee[1],re=e.useRef(null!=I).current,ie=e.useState(),oe=(0,i.Z)(ie,2),ae=oe[0],se=oe[1],le=(0,w.Z)(n,g),ce=e.useCallback((function(e){J.current=e,e&&ne(e)}),[]),ue=null==te?void 0:te.parentNode;e.useImperativeHandle(le,(function(){return{focus:function(){J.current.focus()},node:K.current,value:G}}),[G]),e.useEffect((function(){u&&Y&&te&&!re&&(se(s?null:ue.clientWidth),J.current.focus())}),[te,s]),e.useEffect((function(){a&&J.current.focus()}),[a]),e.useEffect((function(){if(_){var e=(0,ws.Z)(J.current).getElementById(_);if(e){var t=function(){getSelection().isCollapsed&&J.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[_]);var de,fe,pe=function(e,t){e?O&&O(t):P&&P(t),re||(se(s?null:ue.clientWidth),X(e))},he=e.Children.toArray(l),me=function(e){return function(t){var n;if(t.currentTarget.hasAttribute("tabindex")){if(M){n=Array.isArray(G)?G.slice():[];var r=G.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),G!==n&&(W(n),E)){var i=t.nativeEvent||t,o=new i.constructor(i.type,i);Object.defineProperty(o,"target",{writable:!0,value:{value:n,name:T}}),E(o,e)}M||pe(!1,t)}}},ge=null!==te&&Y;delete H["aria-invalid"];var ve=[],ye=!1;(Mn({value:G})||p)&&(D?de=D(G):ye=!0);var be=he.map((function(t,n,r){var i,o,a,s,l;if(!e.isValidElement(t))return null;if(M){if(!Array.isArray(G))throw new Error((0,on.Z)(2));l=G.some((function(e){return Wf(e,t.props.value)})),l&&ye&&ve.push(t.props.children)}else(l=Wf(G,t.props.value))&&ye&&(fe=t.props.children);if(l&&!0,void 0===t.props.value)return e.cloneElement(t,{"aria-readonly":!0,role:"option"});return e.cloneElement(t,{"aria-selected":l?"true":"false",onClick:me(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:void 0===(null==(i=r[0])||null==(o=i.props)?void 0:o.value)||!0===(null==(a=r[0])||null==(s=a.props)?void 0:s.disabled)?function(){if(G)return l;var e=r.find((function(e){var t;return void 0!==(null==e||null==(t=e.props)?void 0:t.value)&&!0!==e.props.disabled}));return t===e||l}():l,value:void 0,"data-value":t.props.value})}));ye&&(de=M?0===ve.length?null:ve.reduce((function(e,t,n){return e.push(t),n<ve.length-1&&e.push(", "),e}),[]):fe);var xe,we=ae;!s&&re&&te&&(we=ue.clientWidth),xe="undefined"!==typeof z?z:f?null:0;var _e=F.id||(T?"mui-component-select-".concat(T):void 0),Se=(0,v.Z)({},t,{variant:Z,value:G,open:ge}),Ce=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,o=e.open,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,x.Z)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,S.Z)(a,Bf,t)}(Se);return(0,h.jsxs)(e.Fragment,{children:[(0,h.jsx)(Uf,(0,v.Z)({ref:ce,tabIndex:xe,role:"button","aria-disabled":f?"true":void 0,"aria-expanded":ge?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[_,_e].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:function(e){if(!L){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),pe(!0,e))}},onMouseDown:f||L?null:function(e){0===e.button&&(e.preventDefault(),J.current.focus(),pe(!0,e))},onBlur:function(e){!ge&&A&&(Object.defineProperty(e,"target",{writable:!0,value:{value:G,name:T}}),A(e))},onFocus:R},F,{ownerState:Se,className:(0,b.Z)(F.className,Ce.select,c),id:_e,children:$f(de)?jf||(jf=(0,h.jsx)("span",{className:"notranslate",children:"\u200b"})):de})),(0,h.jsx)(Gf,(0,v.Z)({value:Array.isArray(G)?G.join(","):G,name:T,ref:K,"aria-hidden":!0,onChange:function(e){var t=he.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=he[t];W(n.props.value),E&&E(e,n)}},tabIndex:-1,disabled:f,className:Ce.nativeInput,autoFocus:a,ownerState:Se},H)),(0,h.jsx)(Vf,{as:m,className:Ce.icon,ownerState:Se}),(0,h.jsx)(Pf,(0,v.Z)({id:"menu-".concat(T||""),anchorEl:ue,open:ge,onClose:function(e){pe(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},k,{MenuListProps:(0,v.Z)({"aria-labelledby":_,role:"listbox",disableListWrap:!0},k.MenuListProps),PaperProps:(0,v.Z)({},k.PaperProps,{style:(0,v.Z)({minWidth:we},null!=k.PaperProps?k.PaperProps.style:null)}),children:be}))]})})),Kf=Xf,Jf=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Qf={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return(0,C.FO)(e)&&"variant"!==e},slot:"Root"},ep=(0,C.ZP)(Xu,Qf)(""),tp=(0,C.ZP)(dd,Qf)(""),np=(0,C.ZP)(nd,Qf)(""),rp=e.forwardRef((function(t,n){var r=(0,xn.Z)({name:"MuiSelect",props:t}),i=r.autoWidth,o=void 0!==i&&i,a=r.children,s=r.classes,l=void 0===s?{}:s,c=r.className,u=r.defaultOpen,d=void 0!==u&&u,f=r.displayEmpty,p=void 0!==f&&f,m=r.IconComponent,g=void 0===m?ia:m,x=r.id,_=r.input,S=r.inputProps,C=r.label,k=r.labelId,M=r.MenuProps,T=r.multiple,A=void 0!==T&&T,E=r.native,P=void 0!==E&&E,R=r.onClose,O=r.onOpen,I=r.open,L=r.renderValue,D=r.SelectDisplayProps,N=r.variant,F=void 0===N?"outlined":N,z=(0,y.Z)(r,Jf),B=P?zf:Kf,j=vn({props:r,muiFormControl:bn(),states:["variant"]}).variant||F,Z=_||{standard:qf||(qf=(0,h.jsx)(ep,{})),outlined:(0,h.jsx)(tp,{label:C}),filled:Yf||(Yf=(0,h.jsx)(np,{}))}[j],H=function(e){return e.classes}((0,v.Z)({},r,{variant:j,classes:l})),U=(0,w.Z)(n,Z.ref);return(0,h.jsx)(e.Fragment,{children:e.cloneElement(Z,(0,v.Z)({inputComponent:B,inputProps:(0,v.Z)({children:a,IconComponent:g,variant:j,type:void 0,multiple:A},P?{id:x}:{autoWidth:o,defaultOpen:d,displayEmpty:p,labelId:k,MenuProps:M,onClose:R,onOpen:O,open:I,renderValue:L,SelectDisplayProps:(0,v.Z)({id:x},D)},S,{classes:S?(0,Gu.Z)(H,S.classes):H},_?_.props.inputProps:{})},A&&P&&"outlined"===j?{notched:!0}:{},{ref:U,className:(0,b.Z)(Z.props.className,c)},!_&&{variant:j},z))})}));rp.muiName="Select";var ip=rp;function op(e){return(0,M.Z)("MuiTextField",e)}(0,T.Z)("MuiTextField",["root"]);var ap=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],sp={standard:Xu,filled:nd,outlined:dd},lp=(0,C.ZP)(Md,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),cp=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiTextField"}),r=n.autoComplete,i=n.autoFocus,o=void 0!==i&&i,a=n.children,s=n.className,l=n.color,c=void 0===l?"primary":l,u=n.defaultValue,d=n.disabled,f=void 0!==d&&d,p=n.error,m=void 0!==p&&p,g=n.FormHelperTextProps,x=n.fullWidth,w=void 0!==x&&x,_=n.helperText,C=n.id,k=n.InputLabelProps,M=n.inputProps,T=n.InputProps,A=n.inputRef,E=n.label,P=n.maxRows,R=n.minRows,O=n.multiline,I=void 0!==O&&O,L=n.name,D=n.onBlur,N=n.onChange,F=n.onFocus,z=n.placeholder,B=n.required,j=void 0!==B&&B,Z=n.rows,H=n.select,U=void 0!==H&&H,V=n.SelectProps,G=n.type,W=n.value,$=n.variant,q=void 0===$?"outlined":$,Y=(0,y.Z)(n,ap),X=(0,v.Z)({},n,{autoFocus:o,color:c,disabled:f,error:m,fullWidth:w,multiline:I,required:j,select:U,variant:q}),K=function(e){var t=e.classes;return(0,S.Z)({root:["root"]},op,t)}(X);var J={};"outlined"===q&&(k&&"undefined"!==typeof k.shrink&&(J.notched=k.shrink),J.label=E),U&&(V&&V.native||(J.id=void 0),J["aria-describedby"]=void 0);var Q=(0,Ir.Z)(C),ee=_&&Q?"".concat(Q,"-helper-text"):void 0,te=E&&Q?"".concat(Q,"-label"):void 0,ne=sp[q],re=(0,h.jsx)(ne,(0,v.Z)({"aria-describedby":ee,autoComplete:r,autoFocus:o,defaultValue:u,fullWidth:w,multiline:I,name:L,rows:Z,maxRows:P,minRows:R,type:G,value:W,id:Q,inputRef:A,onBlur:D,onChange:N,onFocus:F,placeholder:z,inputProps:M},J,T));return(0,h.jsxs)(lp,(0,v.Z)({className:(0,b.Z)(K.root,s),disabled:f,error:m,fullWidth:w,ref:t,required:j,color:c,variant:q,ownerState:X},Y,{children:[null!=E&&""!==E&&(0,h.jsx)(wd,(0,v.Z)({htmlFor:Q,id:te},k,{children:E})),U?(0,h.jsx)(ip,(0,v.Z)({"aria-describedby":ee,id:Q,labelId:te,value:W,input:re},V,{children:a})):re,_&&(0,h.jsx)(Od,(0,v.Z)({id:ee},g,{children:_}))]}))}));function up(e){return(0,M.Z)("MuiSwitch",e)}var dp=(0,T.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),fp=["className","color","edge","size","sx"],pp=(0,C.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.edge&&t["edge".concat((0,x.Z)(n.edge))],t["size".concat((0,x.Z)(n.size))]]}})((function(e){var t,n=e.ownerState;return(0,v.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===n.edge&&{marginLeft:-8},"end"===n.edge&&{marginRight:-8},"small"===n.size&&(t={width:40,height:24,padding:7},(0,o.Z)(t,"& .".concat(dp.thumb),{width:16,height:16}),(0,o.Z)(t,"& .".concat(dp.switchBase),(0,o.Z)({padding:4},"&.".concat(dp.checked),{transform:"translateX(16px)"})),t))})),hp=(0,C.ZP)(Iu,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var n=e.ownerState;return[t.switchBase,(0,o.Z)({},"& .".concat(dp.input),t.input),"default"!==n.color&&t["color".concat((0,x.Z)(n.color))]]}})((function(e){var t,n=e.theme;return t={position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:"".concat("light"===n.palette.mode?n.palette.common.white:n.palette.grey[300]),transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest})},(0,o.Z)(t,"&.".concat(dp.checked),{transform:"translateX(20px)"}),(0,o.Z)(t,"&.".concat(dp.disabled),{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:"".concat("light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[600])}),(0,o.Z)(t,"&.".concat(dp.checked," + .").concat(dp.track),{opacity:.5}),(0,o.Z)(t,"&.".concat(dp.disabled," + .").concat(dp.track),{opacity:n.vars?n.vars.opacity.switchTrackDisabled:"".concat("light"===n.palette.mode?.12:.2)}),(0,o.Z)(t,"& .".concat(dp.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,n=e.theme,r=e.ownerState;return(0,v.Z)({"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.activeChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,k.Fq)(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(t={},(0,o.Z)(t,"&.".concat(dp.checked),(0,o.Z)({color:(n.vars||n).palette[r.color].main,"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[r.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,k.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(dp.disabled),{color:n.vars?n.vars.palette.Switch["".concat(r.color,"DisabledColor")]:"".concat("light"===n.palette.mode?(0,k.$n)(n.palette[r.color].main,.62):(0,k._j)(n.palette[r.color].main,.55))})),(0,o.Z)(t,"&.".concat(dp.checked," + .").concat(dp.track),{backgroundColor:(n.vars||n).palette[r.color].main}),t))})),mp=(0,C.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),gp=(0,C.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){var t=e.theme;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),vp=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiSwitch"}),r=n.className,i=n.color,o=void 0===i?"primary":i,a=n.edge,s=void 0!==a&&a,l=n.size,c=void 0===l?"medium":l,u=n.sx,d=(0,y.Z)(n,fp),f=(0,v.Z)({},n,{color:o,edge:s,size:c}),p=function(e){var t=e.classes,n=e.edge,r=e.size,i=e.color,o=e.checked,a=e.disabled,s={root:["root",n&&"edge".concat((0,x.Z)(n)),"size".concat((0,x.Z)(r))],switchBase:["switchBase","color".concat((0,x.Z)(i)),o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,S.Z)(s,up,t);return(0,v.Z)({},t,l)}(f),m=(0,h.jsx)(gp,{className:p.thumb,ownerState:f});return(0,h.jsxs)(pp,{className:(0,b.Z)(p.root,r),sx:u,ownerState:f,children:[(0,h.jsx)(hp,(0,v.Z)({type:"checkbox",icon:m,checkedIcon:m,ref:t,ownerState:f},d,{classes:(0,v.Z)({},p,{root:p.switchBase})})),(0,h.jsx)(mp,{className:p.track,ownerState:f})]})})),yp=n(8104),bp=n(9127);function xp(e){return(0,M.Z)("MuiTooltip",e)}var wp=(0,T.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),_p=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];var Sp=(0,C.ZP)(Ao,{name:"MuiTooltip",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((function(e){var t,n=e.theme,r=e.ownerState,i=e.open;return(0,v.Z)({zIndex:(n.vars||n).zIndex.tooltip,pointerEvents:"none"},!r.disableInteractive&&{pointerEvents:"auto"},!i&&{pointerEvents:"none"},r.arrow&&(t={},(0,o.Z)(t,'&[data-popper-placement*="bottom"] .'.concat(wp.arrow),{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}}),(0,o.Z)(t,'&[data-popper-placement*="top"] .'.concat(wp.arrow),{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}}),(0,o.Z)(t,'&[data-popper-placement*="right"] .'.concat(wp.arrow),(0,v.Z)({},r.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}})),(0,o.Z)(t,'&[data-popper-placement*="left"] .'.concat(wp.arrow),(0,v.Z)({},r.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})),t))})),Cp=(0,C.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:function(e,t){var n=e.ownerState;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t["tooltipPlacement".concat((0,x.Z)(n.placement.split("-")[0]))]]}})((function(e){var t,n,r=e.theme,i=e.ownerState;return(0,v.Z)({backgroundColor:r.vars?r.vars.palette.Tooltip.bg:(0,k.Fq)(r.palette.grey[700],.92),borderRadius:(r.vars||r).shape.borderRadius,color:(r.vars||r).palette.common.white,fontFamily:r.typography.fontFamily,padding:"4px 8px",fontSize:r.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:r.typography.fontWeightMedium},i.arrow&&{position:"relative",margin:0},i.touch&&{padding:"8px 16px",fontSize:r.typography.pxToRem(14),lineHeight:"".concat((n=16/14,Math.round(1e5*n)/1e5),"em"),fontWeight:r.typography.fontWeightRegular},(t={},(0,o.Z)(t,".".concat(wp.popper,'[data-popper-placement*="left"] &'),(0,v.Z)({transformOrigin:"right center"},i.isRtl?(0,v.Z)({marginLeft:"14px"},i.touch&&{marginLeft:"24px"}):(0,v.Z)({marginRight:"14px"},i.touch&&{marginRight:"24px"}))),(0,o.Z)(t,".".concat(wp.popper,'[data-popper-placement*="right"] &'),(0,v.Z)({transformOrigin:"left center"},i.isRtl?(0,v.Z)({marginRight:"14px"},i.touch&&{marginRight:"24px"}):(0,v.Z)({marginLeft:"14px"},i.touch&&{marginLeft:"24px"}))),(0,o.Z)(t,".".concat(wp.popper,'[data-popper-placement*="top"] &'),(0,v.Z)({transformOrigin:"center bottom",marginBottom:"14px"},i.touch&&{marginBottom:"24px"})),(0,o.Z)(t,".".concat(wp.popper,'[data-popper-placement*="bottom"] &'),(0,v.Z)({transformOrigin:"center top",marginTop:"14px"},i.touch&&{marginTop:"24px"})),t))})),kp=(0,C.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:function(e,t){return t.arrow}})((function(e){var t=e.theme;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,k.Fq)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}})),Mp=!1,Tp=null;function Ap(e,t){return function(n){t&&t(n),e(n)}}var Ep,Pp=e.forwardRef((function(t,n){var r,o,a,s,l,c,u,d,f,p,m,g,_,C,k,M,T,A,E,P=(0,xn.Z)({props:t,name:"MuiTooltip"}),R=P.arrow,O=void 0!==R&&R,I=P.children,L=P.components,D=void 0===L?{}:L,N=P.componentsProps,F=void 0===N?{}:N,z=P.describeChild,B=void 0!==z&&z,j=P.disableFocusListener,Z=void 0!==j&&j,H=P.disableHoverListener,U=void 0!==H&&H,V=P.disableInteractive,G=void 0!==V&&V,W=P.disableTouchListener,$=void 0!==W&&W,q=P.enterDelay,Y=void 0===q?100:q,X=P.enterNextDelay,K=void 0===X?0:X,J=P.enterTouchDelay,Q=void 0===J?700:J,ee=P.followCursor,te=void 0!==ee&&ee,ne=P.id,re=P.leaveDelay,ie=void 0===re?0:re,oe=P.leaveTouchDelay,ae=void 0===oe?1500:oe,se=P.onClose,le=P.onOpen,ce=P.open,ue=P.placement,de=void 0===ue?"bottom":ue,fe=P.PopperComponent,pe=P.PopperProps,he=void 0===pe?{}:pe,me=P.slotProps,ge=void 0===me?{}:me,ve=P.slots,ye=void 0===ve?{}:ve,be=P.title,xe=P.TransitionComponent,we=void 0===xe?rl:xe,_e=P.TransitionProps,Se=(0,y.Z)(P,_p),Ce=Ys(),ke="rtl"===Ce.direction,Me=e.useState(),Te=(0,i.Z)(Me,2),Ae=Te[0],Ee=Te[1],Pe=e.useState(null),Re=(0,i.Z)(Pe,2),Oe=Re[0],Ie=Re[1],Le=e.useRef(!1),De=G||te,Ne=e.useRef(),Fe=e.useRef(),ze=e.useRef(),Be=e.useRef(),je=(0,Au.Z)({controlled:ce,default:!1,name:"Tooltip",state:"open"}),Ze=(0,i.Z)(je,2),He=Ze[0],Ve=Ze[1],Ge=He,We=(0,or.Z)(ne),$e=e.useRef(),qe=e.useCallback((function(){void 0!==$e.current&&(document.body.style.WebkitUserSelect=$e.current,$e.current=void 0),clearTimeout(Be.current)}),[]);e.useEffect((function(){return function(){clearTimeout(Ne.current),clearTimeout(Fe.current),clearTimeout(ze.current),qe()}}),[qe]);var Ye=function(e){clearTimeout(Tp),Mp=!0,Ve(!0),le&&!Ge&&le(e)},Xe=(0,Ue.Z)((function(e){clearTimeout(Tp),Tp=setTimeout((function(){Mp=!1}),800+ie),Ve(!1),se&&Ge&&se(e),clearTimeout(Ne.current),Ne.current=setTimeout((function(){Le.current=!1}),Ce.transitions.duration.shortest)})),Ke=function(e){Le.current&&"touchstart"!==e.type||(Ae&&Ae.removeAttribute("title"),clearTimeout(Fe.current),clearTimeout(ze.current),Y||Mp&&K?Fe.current=setTimeout((function(){Ye(e)}),Mp?K:Y):Ye(e))},Je=function(e){clearTimeout(Fe.current),clearTimeout(ze.current),ze.current=setTimeout((function(){Xe(e)}),ie)},Qe=(0,bp.Z)(),et=Qe.isFocusVisibleRef,tt=Qe.onBlur,nt=Qe.onFocus,rt=Qe.ref,it=e.useState(!1),ot=(0,i.Z)(it,2)[1],at=function(e){tt(e),!1===et.current&&(ot(!1),Je(e))},st=function(e){Ae||Ee(e.currentTarget),nt(e),!0===et.current&&(ot(!0),Ke(e))},lt=function(e){Le.current=!0;var t=I.props;t.onTouchStart&&t.onTouchStart(e)},ct=Ke,ut=Je;e.useEffect((function(){if(Ge)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||Xe(e)}}),[Xe,Ge]);var dt=(0,w.Z)(I.ref,rt,Ee,n);be||0===be||(Ge=!1);var ft=e.useRef({x:0,y:0}),pt=e.useRef(),ht={},mt="string"===typeof be;B?(ht.title=Ge||!mt||U?null:be,ht["aria-describedby"]=Ge?We:null):(ht["aria-label"]=mt?be:null,ht["aria-labelledby"]=Ge&&!mt?We:null);var gt=(0,v.Z)({},ht,Se,I.props,{className:(0,b.Z)(Se.className,I.props.className),onTouchStart:lt,ref:dt},te?{onMouseMove:function(e){var t=I.props;t.onMouseMove&&t.onMouseMove(e),ft.current={x:e.clientX,y:e.clientY},pt.current&&pt.current.update()}}:{});var vt={};$||(gt.onTouchStart=function(e){lt(e),clearTimeout(ze.current),clearTimeout(Ne.current),qe(),$e.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Be.current=setTimeout((function(){document.body.style.WebkitUserSelect=$e.current,Ke(e)}),Q)},gt.onTouchEnd=function(e){I.props.onTouchEnd&&I.props.onTouchEnd(e),qe(),clearTimeout(ze.current),ze.current=setTimeout((function(){Xe(e)}),ae)}),U||(gt.onMouseOver=Ap(ct,gt.onMouseOver),gt.onMouseLeave=Ap(ut,gt.onMouseLeave),De||(vt.onMouseOver=ct,vt.onMouseLeave=ut)),Z||(gt.onFocus=Ap(st,gt.onFocus),gt.onBlur=Ap(at,gt.onBlur),De||(vt.onFocus=st,vt.onBlur=at));var yt=e.useMemo((function(){var e,t=[{name:"arrow",enabled:Boolean(Oe),options:{element:Oe,padding:4}}];return null!=(e=he.popperOptions)&&e.modifiers&&(t=t.concat(he.popperOptions.modifiers)),(0,v.Z)({},he.popperOptions,{modifiers:t})}),[Oe,he]),bt=(0,v.Z)({},P,{isRtl:ke,arrow:O,disableInteractive:De,placement:de,PopperComponentProp:fe,touch:Le.current}),xt=function(e){var t=e.classes,n=e.disableInteractive,r=e.arrow,i=e.touch,o=e.placement,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch","tooltipPlacement".concat((0,x.Z)(o.split("-")[0]))],arrow:["arrow"]};return(0,S.Z)(a,xp,t)}(bt),wt=null!=(r=null!=(o=ye.popper)?o:D.Popper)?r:Sp,_t=null!=(a=null!=(s=null!=(l=ye.transition)?l:D.Transition)?s:we)?a:rl,St=null!=(c=null!=(u=ye.tooltip)?u:D.Tooltip)?c:Cp,Ct=null!=(d=null!=(f=ye.arrow)?f:D.Arrow)?d:kp,kt=uo(wt,(0,v.Z)({},he,null!=(p=ge.popper)?p:F.popper,{className:(0,b.Z)(xt.popper,null==he?void 0:he.className,null==(m=null!=(g=ge.popper)?g:F.popper)?void 0:m.className)}),bt),Mt=uo(_t,(0,v.Z)({},_e,null!=(_=ge.transition)?_:F.transition),bt),Tt=uo(St,(0,v.Z)({},null!=(C=ge.tooltip)?C:F.tooltip,{className:(0,b.Z)(xt.tooltip,null==(k=null!=(M=ge.tooltip)?M:F.tooltip)?void 0:k.className)}),bt),At=uo(Ct,(0,v.Z)({},null!=(T=ge.arrow)?T:F.arrow,{className:(0,b.Z)(xt.arrow,null==(A=null!=(E=ge.arrow)?E:F.arrow)?void 0:A.className)}),bt);return(0,h.jsxs)(e.Fragment,{children:[e.cloneElement(I,gt),(0,h.jsx)(wt,(0,v.Z)({as:null!=fe?fe:Ao,placement:de,anchorEl:te?{getBoundingClientRect:function(){return{top:ft.current.y,left:ft.current.x,right:ft.current.x,bottom:ft.current.y,width:0,height:0}}}:Ae,popperRef:pt,open:!!Ae&&Ge,id:We,transition:!0},vt,kt,{popperOptions:yt,children:function(e){var t=e.TransitionProps;return(0,h.jsx)(_t,(0,v.Z)({timeout:Ce.transitions.duration.shorter},t,Mt,{children:(0,h.jsxs)(St,(0,v.Z)({},Tt,{children:[be,O?(0,h.jsx)(Ct,(0,v.Z)({},At,{ref:Ie})):null]}))}))}}))]})})),Rp=Pp,Op=["align","children","colIndex","colDef","cellMode","field","formattedValue","hasFocus","height","isEditable","rowId","tabIndex","value","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","onClick","onDoubleClick","onMouseDown","onMouseUp","onKeyDown","onDragEnter","onDragOver"];var Ip=n(168);function Lp(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Dp(e){return parseFloat(e)}function Np(e){return(0,M.Z)("MuiSkeleton",e)}(0,T.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var Fp,zp,Bp,jp,Zp,Hp,Up,Vp,Gp=["animation","className","component","height","style","variant","width"],Wp=(0,wn.F4)(Zp||(Zp=Fp||(Fp=(0,Ip.Z)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),$p=(0,wn.F4)(Hp||(Hp=zp||(zp=(0,Ip.Z)(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),qp=(0,C.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((function(e){var t=e.theme,n=e.ownerState,r=Lp(t.shape.borderRadius)||"px",i=Dp(t.shape.borderRadius);return(0,v.Z)({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:(0,k.Fq)(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(i).concat(r,"/").concat(Math.round(i/.6*10)/10).concat(r),"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(function(e){return"pulse"===e.ownerState.animation&&(0,wn.iv)(Up||(Up=Bp||(Bp=(0,Ip.Z)(["\n      animation: "," 1.5s ease-in-out 0.5s infinite;\n    "]))),Wp)}),(function(e){var t=e.ownerState,n=e.theme;return"wave"===t.animation&&(0,wn.iv)(Vp||(Vp=jp||(jp=(0,Ip.Z)(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 1.6s linear 0.5s infinite;\n        background: linear-gradient(\n          90deg,\n          transparent,\n          ",",\n          transparent\n        );\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),$p,(n.vars||n).palette.action.hover)})),Yp=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiSkeleton"}),r=n.animation,i=void 0===r?"pulse":r,o=n.className,a=n.component,s=void 0===a?"span":a,l=n.height,c=n.style,u=n.variant,d=void 0===u?"text":u,f=n.width,p=(0,y.Z)(n,Gp),m=(0,v.Z)({},n,{animation:i,component:s,variant:d,hasChildren:Boolean(p.children)}),g=function(e){var t=e.classes,n=e.variant,r=e.animation,i=e.hasChildren,o=e.width,a=e.height,s={root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!a&&"heightAuto"]};return(0,S.Z)(s,Np,t)}(m);return(0,h.jsx)(qp,(0,v.Z)({as:s,ref:t,className:(0,b.Z)(g.root,o),ownerState:m},p,{style:(0,v.Z)({width:f,height:l},c)}))})),Xp=["field","align","width","contentWidth"];var Kp=function(t){var n=e.useRef({});return e.useEffect((function(){n.current=t})),n.current};function Jp(e){return(0,M.Z)("MuiBadge",e)}(0,T.Z)("MuiBadge",["root","badge","invisible"]);var Qp=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],eh=e.forwardRef((function(e,t){var n=e.component,r=e.children,i=e.max,o=void 0===i?99:i,a=e.slotProps,s=void 0===a?{}:a,l=e.slots,c=void 0===l?{}:l,u=e.showZero,d=void 0!==u&&u,f=(0,y.Z)(e,Qp),p=function(e){var t=e.badgeContent,n=e.invisible,r=void 0!==n&&n,i=e.max,o=void 0===i?99:i,a=e.showZero,s=void 0!==a&&a,l=Kp({badgeContent:t,max:o}),c=r;!1!==r||0!==t||s||(c=!0);var u=c?l:e,d=u.badgeContent,f=u.max,p=void 0===f?o:f;return{badgeContent:d,invisible:c,max:p,displayValue:d&&Number(d)>p?"".concat(p,"+"):d}}((0,v.Z)({},e,{max:o})),m=p.badgeContent,g=p.max,b=p.displayValue,x=p.invisible,w=(0,v.Z)({},e,{badgeContent:m,invisible:x,max:g,showZero:d}),_=function(e){var t={root:["root"],badge:["badge",e.invisible&&"invisible"]};return(0,S.Z)(t,Jp,void 0)}(w),C=n||c.root||"span",k=go({elementType:C,externalSlotProps:s.root,externalForwardedProps:f,additionalProps:{ref:t},ownerState:w,className:_.root}),M=c.badge||"span",T=go({elementType:M,externalSlotProps:s.badge,ownerState:w,className:_.badge});return(0,h.jsxs)(C,(0,v.Z)({},k,{children:[r,(0,h.jsx)(M,(0,v.Z)({},T,{children:b}))]}))})),th=eh,nh=function(e){return!e||!gn(e)};function rh(e){return(0,M.Z)("MuiBadge",e)}var ih=(0,T.Z)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),oh=["anchorOrigin","className","component","components","componentsProps","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],ah=(0,C.ZP)("span",{name:"MuiBadge",slot:"Root",overridesResolver:function(e,t){return t.root}})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),sh=(0,C.ZP)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:function(e,t){var n=e.ownerState;return[t.badge,t[n.variant],t["anchorOrigin".concat((0,x.Z)(n.anchorOrigin.vertical)).concat((0,x.Z)(n.anchorOrigin.horizontal)).concat((0,x.Z)(n.overlap))],"default"!==n.color&&t["color".concat((0,x.Z)(n.color))],n.invisible&&t.invisible]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},"dot"===n.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&(0,o.Z)({top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%"},"&.".concat(ih.invisible),{transform:"scale(0) translate(50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&(0,o.Z)({bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%"},"&.".concat(ih.invisible),{transform:"scale(0) translate(50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&(0,o.Z)({top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%"},"&.".concat(ih.invisible),{transform:"scale(0) translate(-50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&(0,o.Z)({bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%"},"&.".concat(ih.invisible),{transform:"scale(0) translate(-50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&(0,o.Z)({top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%"},"&.".concat(ih.invisible),{transform:"scale(0) translate(50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&(0,o.Z)({bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%"},"&.".concat(ih.invisible),{transform:"scale(0) translate(50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&(0,o.Z)({top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%"},"&.".concat(ih.invisible),{transform:"scale(0) translate(-50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&(0,o.Z)({bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%"},"&.".concat(ih.invisible),{transform:"scale(0) translate(-50%, 50%)"}),n.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})})),lh=e.forwardRef((function(e,t){var n,r,i,o,a,s,l=(0,xn.Z)({props:e,name:"MuiBadge"}),c=l.anchorOrigin,u=void 0===c?{vertical:"top",horizontal:"right"}:c,d=l.className,f=l.component,p=void 0===f?"span":f,m=l.components,g=void 0===m?{}:m,w=l.componentsProps,_=void 0===w?{}:w,C=l.overlap,k=void 0===C?"rectangular":C,M=l.color,T=void 0===M?"default":M,A=l.invisible,E=void 0!==A&&A,P=l.max,R=l.badgeContent,O=l.slots,I=l.slotProps,L=l.showZero,D=void 0!==L&&L,N=l.variant,F=void 0===N?"standard":N,z=(0,y.Z)(l,oh),B=Kp({anchorOrigin:u,color:T,overlap:k,variant:F}),j=E;!1===E&&(0===R&&!D||null==R&&"dot"!==F)&&(j=!0);var Z,H=j?B:l,U=H.color,V=void 0===U?T:U,G=H.overlap,W=void 0===G?k:G,$=H.anchorOrigin,q=void 0===$?u:$,Y=H.variant,X=void 0===Y?F:Y,K=function(e){var t=e.color,n=e.anchorOrigin,r=e.invisible,i=e.overlap,o=e.variant,a=e.classes,s=void 0===a?{}:a,l={root:["root"],badge:["badge",o,r&&"invisible","anchorOrigin".concat((0,x.Z)(n.vertical)).concat((0,x.Z)(n.horizontal)),"anchorOrigin".concat((0,x.Z)(n.vertical)).concat((0,x.Z)(n.horizontal)).concat((0,x.Z)(i)),"overlap".concat((0,x.Z)(i)),"default"!==t&&"color".concat((0,x.Z)(t))]};return(0,S.Z)(l,rh,s)}((0,v.Z)({},l,{anchorOrigin:q,invisible:j,color:V,overlap:W,variant:X}));"dot"!==X&&(Z=R&&Number(R)>P?"".concat(P,"+"):R);var J=null!=(n=null!=(r=null==O?void 0:O.root)?r:g.Root)?n:ah,Q=null!=(i=null!=(o=null==O?void 0:O.badge)?o:g.Badge)?i:sh,ee=null!=(a=null==I?void 0:I.root)?a:_.root,te=null!=(s=null==I?void 0:I.badge)?s:_.badge;return(0,h.jsx)(th,(0,v.Z)({invisible:E,badgeContent:Z,showZero:D,max:P},z,{slots:{root:J,badge:Q},className:(0,b.Z)(null==ee?void 0:ee.className,K.root,d),slotProps:{root:(0,v.Z)({},ee,nh(J)&&{as:p,ownerState:(0,v.Z)({},null==ee?void 0:ee.ownerState,{anchorOrigin:q,color:V,overlap:W,variant:X})}),badge:(0,v.Z)({},te,{className:(0,b.Z)(K.badge,null==te?void 0:te.className)},nh(Q)&&{ownerState:(0,v.Z)({},null==te?void 0:te.ownerState,{anchorOrigin:q,color:V,overlap:W,variant:X})})},ref:t}))})),ch=lh,uh=["className"],dh=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:function(e,t){return t.iconButtonContainer}})((function(){return{display:"flex",visibility:"hidden",width:0}})),fh=e.forwardRef((function(e,t){var n=e.className,r=(0,y.Z)(e,uh),i=function(e){var t=e.classes;return(0,S.Z)({root:["iconButtonContainer"]},A,t)}({classes:ne().classes});return(0,h.jsx)(dh,(0,v.Z)({ref:t,className:(0,b.Z)(i.root,n)},r))}));var ph=["hideMenu","currentColumn","open","id","labelledby","className","children"],hh=e.forwardRef((function(t,n){var r=t.hideMenu,i=t.open,o=t.id,a=t.labelledby,s=t.className,l=t.children,c=(0,y.Z)(t,ph),u=e.useCallback((function(e){Xa(e.key)&&e.preventDefault(),cs(e.key)&&r(e)}),[r]);return(0,h.jsx)(Ls,(0,v.Z)({id:o,ref:n,className:(0,b.Z)(E.menuList,s),"aria-labelledby":a,onKeyDown:u,autoFocus:i},c,{children:l}))})),mh=function(t){var n=t.onClick,r=ee(),i=ne(),o=e.useCallback((function(e){n(e),r.current.showPreferences(gl.columns)}),[r,n]);return i.disableColumnSelector?null:(0,h.jsx)(gr,{onClick:o,children:r.current.getLocaleText("columnMenuShowColumns")})},gh=function(t){var n=t.column,r=t.onClick,i=ee(),o=ne(),a=e.useCallback((function(e){r(e),i.current.showFilterPanel(null==n?void 0:n.field)}),[i,null==n?void 0:n.field,r]);return o.disableColumnFilter||null==n||!n.filterable?null:(0,h.jsx)(gr,{onClick:a,children:i.current.getLocaleText("columnMenuFilter")})},vh=function(t){var n=t.column,r=t.onClick,i=ee(),o=ne(),a=e.useRef(),s=1===W(i).filter((function(e){return!0!==e.disableColumnMenu})).length,l=e.useCallback((function(e){s||(r(e),a.current=setTimeout((function(){i.current.setColumnVisibility(null==n?void 0:n.field,!1)}),100))}),[i,null==n?void 0:n.field,r,s]);return e.useEffect((function(){return function(){return clearTimeout(a.current)}}),[]),o.disableColumnSelector||!1===n.hideable?null:(0,h.jsx)(gr,{onClick:l,disabled:s,children:i.current.getLocaleText("columnMenuHideColumn")})};function yh(t){var n,r=t.column,i=t.onClick,o=ee(),a=J(o,Ke),s=ne(),l=null!=(n=r.sortingOrder)?n:s.sortingOrder,c=e.useMemo((function(){if(!r)return null;var e=a.find((function(e){return e.field===r.field}));return null==e?void 0:e.sort}),[r,a]),u=e.useCallback((function(e){i(e);var t=e.currentTarget.getAttribute("data-value")||null;o.current.sortColumn(r,t)}),[o,r,i]);return r&&r.sortable?(0,h.jsxs)(e.Fragment,{children:[l.includes(null)?(0,h.jsx)(gr,{onClick:u,disabled:null==c,children:o.current.getLocaleText("columnMenuUnsort")}):null,l.includes("asc")?(0,h.jsx)(gr,{onClick:u,"data-value":"asc",disabled:"asc"===c,children:o.current.getLocaleText("columnMenuSortAsc")}):null,l.includes("desc")?(0,h.jsx)(gr,{onClick:u,"data-value":"desc",disabled:"desc"===c,children:o.current.getLocaleText("columnMenuSortDesc")}):null]}):null}var bh=e.forwardRef((function(t,n){var r=t.hideMenu,i=t.currentColumn,o=ee(),a=[(0,h.jsx)(yh,{onClick:r,column:i}),(0,h.jsx)(gh,{onClick:r,column:i}),(0,h.jsx)(vh,{onClick:r,column:i}),(0,h.jsx)(mh,{onClick:r,column:i})],s=o.current.unstable_applyPipeProcessors("columnMenu",a,i);return(0,h.jsx)(hh,(0,v.Z)({ref:n},t,{children:s.map((function(t,n){return e.cloneElement(t,{key:n,onClick:r,column:i})}))}))})),xh=["className","rowCount","visibleRowCount"],wh=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:function(e,t){return t.rowCount}})((function(e){return{alignItems:"center",display:"flex",margin:e.theme.spacing(0,2)}})),_h=e.forwardRef((function(e,t){var n=e.className,r=e.rowCount,i=e.visibleRowCount,o=(0,y.Z)(e,xh),a=ee(),s=function(e){var t=e.classes;return(0,S.Z)({root:["rowCount"]},A,t)}({classes:ne().classes});if(0===r)return null;var l=i<r?a.current.getLocaleText("footerTotalVisibleRows")(i,r):r.toLocaleString();return(0,h.jsxs)(wh,(0,v.Z)({ref:t,className:(0,b.Z)(s.root,n)},o,{children:[a.current.getLocaleText("footerTotalRows")," ",l]}))})),Sh=["className","selectedRowCount"],Ch=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:function(e,t){return t.selectedRowCount}})((function(e){var t=e.theme;return(0,o.Z)({alignItems:"center",display:"flex",margin:t.spacing(0,2),visibility:"hidden",width:0,height:0},t.breakpoints.up("sm"),{visibility:"visible",width:"auto",height:"auto"})})),kh=e.forwardRef((function(e,t){var n=e.className,r=e.selectedRowCount,i=(0,y.Z)(e,Sh),o=ee(),a=function(e){var t=e.classes;return(0,S.Z)({root:["selectedRowCount"]},A,t)}({classes:ne().classes}),s=o.current.getLocaleText("footerRowSelected")(r);return(0,h.jsx)(Ch,(0,v.Z)({ref:t,className:(0,b.Z)(a.root,n)},i,{children:s}))})),Mh=["className"],Th=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:function(e,t){return t.footerContainer}})((function(e){var t=e.theme,n="light"===t.palette.mode?(0,k.$n)((0,k.Fq)(t.palette.divider,1),.88):(0,k._j)((0,k.Fq)(t.palette.divider,1),.68);return{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid ".concat(n)}})),Ah=e.forwardRef((function(e,t){var n=e.className,r=(0,y.Z)(e,Mh),i=function(e){var t=e.classes;return(0,S.Z)({root:["footerContainer"]},A,t)}({classes:ne().classes});return(0,h.jsx)(Th,(0,v.Z)({ref:t,className:(0,b.Z)(i.root,n)},r))})),Eh=e.forwardRef((function(e,t){var n,r=ee(),i=ne(),o=J(r,pe),a=J(r,Hl),s=J(r,ut),l=!i.hideFooterSelectedRowCount&&a>0?(0,h.jsx)(kh,{selectedRowCount:a}):(0,h.jsx)("div",{}),c=i.hideFooterRowCount||i.pagination?null:(0,h.jsx)(_h,{rowCount:o,visibleRowCount:s}),u=i.pagination&&!i.hideFooterPagination&&i.components.Pagination&&(0,h.jsx)(i.components.Pagination,(0,v.Z)({},null==(n=i.componentsProps)?void 0:n.pagination));return(0,h.jsxs)(Ah,(0,v.Z)({ref:t},e,{children:[l,c,u]}))})),Ph=e.forwardRef((function(e,t){var n,r,i=ne();return(0,h.jsxs)("div",(0,v.Z)({ref:t},e,{children:[(0,h.jsx)(i.components.PreferencesPanel,(0,v.Z)({},null==(n=i.componentsProps)?void 0:n.preferencesPanel)),i.components.Toolbar&&(0,h.jsx)(i.components.Toolbar,(0,v.Z)({},null==(r=i.componentsProps)?void 0:r.toolbar))]}))})),Rh=e.forwardRef((function(e,t){var n,r,i,o=ee(),a=J(o,V),s=ne(),l=J(o,qc),c=o.current.unstable_applyPipeProcessors("preferencePanel",null,null!=(n=l.openedPanelValue)?n:gl.filters);return(0,h.jsx)(s.components.Panel,(0,v.Z)({ref:t,as:s.components.BasePopper,open:a.length>0&&l.open},null==(r=s.componentsProps)?void 0:r.panel,e,null==(i=s.componentsProps)?void 0:i.basePopper,{children:c}))}));function Oh(e){return(0,M.Z)("MuiCircularProgress",e)}(0,T.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var Ih,Lh,Dh,Nh,Fh,zh,Bh,jh,Zh=["className","color","disableShrink","size","style","thickness","value","variant"],Hh=44,Uh=(0,wn.F4)(Fh||(Fh=Ih||(Ih=(0,Ip.Z)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),Vh=(0,wn.F4)(zh||(zh=Lh||(Lh=(0,Ip.Z)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),Gh=(0,C.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["color".concat((0,x.Z)(n.color))]]}})((function(e){var t=e.ownerState,n=e.theme;return(0,v.Z)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&(0,wn.iv)(Bh||(Bh=Dh||(Dh=(0,Ip.Z)(["\n      animation: "," 1.4s linear infinite;\n    "]))),Uh)})),Wh=(0,C.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,t){return t.svg}})({display:"block"}),$h=(0,C.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,t){var n=e.ownerState;return[t.circle,t["circle".concat((0,x.Z)(n.variant))],n.disableShrink&&t.circleDisableShrink]}})((function(e){var t=e.ownerState,n=e.theme;return(0,v.Z)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var t=e.ownerState;return"indeterminate"===t.variant&&!t.disableShrink&&(0,wn.iv)(jh||(jh=Nh||(Nh=(0,Ip.Z)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),Vh)})),qh=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiCircularProgress"}),r=n.className,i=n.color,o=void 0===i?"primary":i,a=n.disableShrink,s=void 0!==a&&a,l=n.size,c=void 0===l?40:l,u=n.style,d=n.thickness,f=void 0===d?3.6:d,p=n.value,m=void 0===p?0:p,g=n.variant,w=void 0===g?"indeterminate":g,_=(0,y.Z)(n,Zh),C=(0,v.Z)({},n,{color:o,disableShrink:s,size:c,thickness:f,value:m,variant:w}),k=function(e){var t=e.classes,n=e.variant,r=e.color,i=e.disableShrink,o={root:["root",n,"color".concat((0,x.Z)(r))],svg:["svg"],circle:["circle","circle".concat((0,x.Z)(n)),i&&"circleDisableShrink"]};return(0,S.Z)(o,Oh,t)}(C),M={},T={},A={};if("determinate"===w){var E=2*Math.PI*((Hh-f)/2);M.strokeDasharray=E.toFixed(3),A["aria-valuenow"]=Math.round(m),M.strokeDashoffset="".concat(((100-m)/100*E).toFixed(3),"px"),T.transform="rotate(-90deg)"}return(0,h.jsx)(Gh,(0,v.Z)({className:(0,b.Z)(k.root,r),style:(0,v.Z)({width:c,height:c},T,u),ownerState:C,ref:t,role:"progressbar"},A,_,{children:(0,h.jsx)(Wh,{className:k.svg,ownerState:C,viewBox:"".concat(22," ").concat(22," ").concat(Hh," ").concat(Hh),children:(0,h.jsx)($h,{className:k.circle,style:M,ownerState:C,cx:Hh,cy:Hh,r:(Hh-f)/2,fill:"none",strokeWidth:f})})}))})),Yh=["className"],Xh=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:function(e,t){return t.overlay}})((function(e){var t=e.theme;return{position:"absolute",top:0,zIndex:4,width:"100%",height:"100%",pointerEvents:"none",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:(0,k.Fq)(t.palette.background.default,t.palette.action.disabledOpacity)}})),Kh=e.forwardRef((function(e,t){var n=e.className,r=(0,y.Z)(e,Yh),i=function(e){var t=e.classes;return(0,S.Z)({root:["overlay"]},A,t)}({classes:ne().classes});return(0,h.jsx)(Xh,(0,v.Z)({ref:t,className:(0,b.Z)(i.root,n)},r))})),Jh=e.forwardRef((function(e,t){return(0,h.jsx)(Kh,(0,v.Z)({ref:t},e,{children:(0,h.jsx)(qh,{})}))})),Qh=e.forwardRef((function(e,t){var n=ee().current.getLocaleText("noRowsLabel");return(0,h.jsx)(Kh,(0,v.Z)({ref:t},e,{children:n}))})),em=n(941);function tm(e){return(0,M.Z)("MuiToolbar",e)}(0,T.Z)("MuiToolbar",["root","gutters","regular","dense"]);var nm,rm,im,om,am,sm,lm,cm,um=["className","component","disableGutters","variant"],dm=(0,C.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&(0,o.Z)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),"dense"===n.variant&&{minHeight:48})}),(function(e){var t=e.theme;return"regular"===e.ownerState.variant&&t.mixins.toolbar})),fm=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiToolbar"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=n.disableGutters,s=void 0!==a&&a,l=n.variant,c=void 0===l?"regular":l,u=(0,y.Z)(n,um),d=(0,v.Z)({},n,{component:o,disableGutters:s,variant:c}),f=function(e){var t=e.classes,n={root:["root",!e.disableGutters&&"gutters",e.variant]};return(0,S.Z)(n,tm,t)}(d);return(0,h.jsx)(dm,(0,v.Z)({as:o,className:(0,b.Z)(f.root,r),ref:t,ownerState:d},u))})),pm=(0,Fn.Z)((0,h.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),hm=(0,Fn.Z)((0,h.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),mm=(0,Fn.Z)((0,h.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),gm=(0,Fn.Z)((0,h.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),vm=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],ym=e.forwardRef((function(e,t){var n=e.backIconButtonProps,r=e.count,i=e.getItemAriaLabel,o=e.nextIconButtonProps,a=e.onPageChange,s=e.page,l=e.rowsPerPage,c=e.showFirstButton,u=e.showLastButton,d=(0,y.Z)(e,vm),f=Ys();return(0,h.jsxs)("div",(0,v.Z)({ref:t},d,{children:[c&&(0,h.jsx)(Ho,{onClick:function(e){a(e,0)},disabled:0===s,"aria-label":i("first",s),title:i("first",s),children:"rtl"===f.direction?nm||(nm=(0,h.jsx)(mm,{})):rm||(rm=(0,h.jsx)(gm,{}))}),(0,h.jsx)(Ho,(0,v.Z)({onClick:function(e){a(e,s-1)},disabled:0===s,color:"inherit","aria-label":i("previous",s),title:i("previous",s)},n,{children:"rtl"===f.direction?im||(im=(0,h.jsx)(hm,{})):om||(om=(0,h.jsx)(pm,{}))})),(0,h.jsx)(Ho,(0,v.Z)({onClick:function(e){a(e,s+1)},disabled:-1!==r&&s>=Math.ceil(r/l)-1,color:"inherit","aria-label":i("next",s),title:i("next",s)},o,{children:"rtl"===f.direction?am||(am=(0,h.jsx)(pm,{})):sm||(sm=(0,h.jsx)(hm,{}))})),u&&(0,h.jsx)(Ho,{onClick:function(e){a(e,Math.max(0,Math.ceil(r/l)-1))},disabled:s>=Math.ceil(r/l)-1,"aria-label":i("last",s),title:i("last",s),children:"rtl"===f.direction?lm||(lm=(0,h.jsx)(gm,{})):cm||(cm=(0,h.jsx)(mm,{}))})]}))})),bm=ym;function xm(e){return(0,M.Z)("MuiTablePagination",e)}var wm,_m=(0,T.Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),Sm=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],Cm=(0,C.ZP)(em.Z,{name:"MuiTablePagination",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t=e.theme;return{overflow:"auto",color:(t.vars||t).palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}}})),km=(0,C.ZP)(fm,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:function(e,t){return(0,v.Z)((0,o.Z)({},"& .".concat(_m.actions),t.actions),t.toolbar)}})((function(e){var t,n=e.theme;return t={minHeight:52,paddingRight:2},(0,o.Z)(t,"".concat(n.breakpoints.up("xs")," and (orientation: landscape)"),{minHeight:52}),(0,o.Z)(t,n.breakpoints.up("sm"),{minHeight:52,paddingRight:2}),(0,o.Z)(t,"& .".concat(_m.actions),{flexShrink:0,marginLeft:20}),t})),Mm=(0,C.ZP)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:function(e,t){return t.spacer}})({flex:"1 1 100%"}),Tm=(0,C.ZP)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:function(e,t){return t.selectLabel}})((function(e){var t=e.theme;return(0,v.Z)({},t.typography.body2,{flexShrink:0})})),Am=(0,C.ZP)(ip,{name:"MuiTablePagination",slot:"Select",overridesResolver:function(e,t){var n;return(0,v.Z)((n={},(0,o.Z)(n,"& .".concat(_m.selectIcon),t.selectIcon),(0,o.Z)(n,"& .".concat(_m.select),t.select),n),t.input,t.selectRoot)}})((0,o.Z)({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8},"& .".concat(_m.select),{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"})),Em=(0,C.ZP)(gr,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:function(e,t){return t.menuItem}})({}),Pm=(0,C.ZP)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:function(e,t){return t.displayedRows}})((function(e){var t=e.theme;return(0,v.Z)({},t.typography.body2,{flexShrink:0})}));function Rm(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"\u2013").concat(n," of ").concat(-1!==r?r:"more than ".concat(n))}function Om(e){return"Go to ".concat(e," page")}var Im=e.forwardRef((function(t,n){var r,i=(0,xn.Z)({props:t,name:"MuiTablePagination"}),o=i.ActionsComponent,a=void 0===o?bm:o,s=i.backIconButtonProps,l=i.className,c=i.colSpan,u=i.component,d=void 0===u?em.Z:u,f=i.count,p=i.getItemAriaLabel,m=void 0===p?Om:p,g=i.labelDisplayedRows,x=void 0===g?Rm:g,w=i.labelRowsPerPage,_=void 0===w?"Rows per page:":w,C=i.nextIconButtonProps,k=i.onPageChange,M=i.onRowsPerPageChange,T=i.page,A=i.rowsPerPage,E=i.rowsPerPageOptions,P=void 0===E?[10,25,50,100]:E,R=i.SelectProps,O=void 0===R?{}:R,I=i.showFirstButton,L=void 0!==I&&I,D=i.showLastButton,N=void 0!==D&&D,F=(0,y.Z)(i,Sm),z=i,B=function(e){var t=e.classes;return(0,S.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},xm,t)}(z),j=O.native?"option":Em;d!==em.Z&&"td"!==d||(r=c||1e3);var Z=(0,or.Z)(O.id),H=(0,or.Z)(O.labelId);return(0,h.jsx)(Cm,(0,v.Z)({colSpan:r,ref:n,as:d,ownerState:z,className:(0,b.Z)(B.root,l)},F,{children:(0,h.jsxs)(km,{className:B.toolbar,children:[(0,h.jsx)(Mm,{className:B.spacer}),P.length>1&&(0,h.jsx)(Tm,{className:B.selectLabel,id:H,children:_}),P.length>1&&(0,h.jsx)(Am,(0,v.Z)({variant:"standard"},!O.variant&&{input:wm||(wm=(0,h.jsx)(Nn,{}))},{value:A,onChange:M,id:Z,labelId:H},O,{classes:(0,v.Z)({},O.classes,{root:(0,b.Z)(B.input,B.selectRoot,(O.classes||{}).root),select:(0,b.Z)(B.select,(O.classes||{}).select),icon:(0,b.Z)(B.selectIcon,(O.classes||{}).icon)}),children:P.map((function(t){return(0,e.createElement)(j,(0,v.Z)({},!gn(j)&&{ownerState:z},{className:B.menuItem,key:t.label?t.label:t,value:t.value?t.value:t}),t.label?t.label:t)}))})),(0,h.jsx)(Pm,{className:B.displayedRows,children:x({from:0===f?0:T*A+1,to:-1===f?(T+1)*A:-1===A?f:Math.min(f,(T+1)*A),count:-1===f?-1:f,page:T})}),(0,h.jsx)(a,{className:B.actions,backIconButtonProps:s,count:f,nextIconButtonProps:C,onPageChange:k,page:T,rowsPerPage:A,showFirstButton:L,showLastButton:N,getItemAriaLabel:m})]})}))})),Lm=(0,C.ZP)(Im)((function(e){var t,n=e.theme;return t={},(0,o.Z)(t,"& .".concat(_m.selectLabel),(0,o.Z)({display:"none"},n.breakpoints.up("sm"),{display:"block"})),(0,o.Z)(t,"& .".concat(_m.input),(0,o.Z)({display:"none"},n.breakpoints.up("sm"),{display:"inline-flex"})),t})),Dm=e.forwardRef((function(t,n){var r,i=ee(),o=ne(),a=J(i,Gl),s=e.useMemo((function(){return Math.floor(a.rowCount/(a.pageSize||1))}),[a.rowCount,a.pageSize]),l=e.useCallback((function(e){var t=Number(e.target.value);i.current.setPageSize(t)}),[i]),c=e.useCallback((function(e,t){i.current.setPage(t)}),[i]);return(0,h.jsx)(Lm,(0,v.Z)({ref:n,component:"div",count:a.rowCount,page:a.page<=s?a.page:s,rowsPerPageOptions:null!=(r=o.rowsPerPageOptions)&&r.includes(a.pageSize)?o.rowsPerPageOptions:[],rowsPerPage:a.pageSize,onPageChange:c,onRowsPerPageChange:l},i.current.getLocaleText("MuiTablePagination"),t))})),Nm=["className"],Fm=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:function(e,t){return t.panelContent}})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function zm(e){var t=e.className,n=(0,y.Z)(e,Nm),r=function(e){var t=e.classes;return(0,S.Z)({root:["panelContent"]},A,t)}({classes:ne().classes});return(0,h.jsx)(Fm,(0,v.Z)({className:(0,b.Z)(t,r.root)},n))}var Bm=["className"],jm=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:function(e,t){return t.panelFooter}})((function(e){return{padding:e.theme.spacing(.5),display:"flex",justifyContent:"space-between"}}));function Zm(e){var t=e.className,n=(0,y.Z)(e,Bm),r=function(e){var t=e.classes;return(0,S.Z)({root:["panelFooter"]},A,t)}({classes:ne().classes});return(0,h.jsx)(jm,(0,v.Z)({className:(0,b.Z)(t,r.root)},n))}var Hm=["className"],Um=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:function(e,t){return t.panelWrapper}})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),Vm=function(){return!0},Gm=e.forwardRef((function(e,t){var n=e.className,r=(0,y.Z)(e,Hm),i=function(e){var t=e.classes;return(0,S.Z)({root:["panelWrapper"]},A,t)}({classes:ne().classes});return(0,h.jsx)(Ud,{open:!0,disableEnforceFocus:!0,isEnabled:Vm,children:(0,h.jsx)(Um,(0,v.Z)({ref:t,tabIndex:-1,className:(0,b.Z)(n,i.root)},r))})})),Wm=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","linkOperators","columnsSort","deleteIconProps","linkOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],$m=["InputComponentProps"],qm=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:function(e,t){return t.filterForm}})((function(e){return{display:"flex",padding:e.theme.spacing(1)}})),Ym=(0,C.ZP)(Md,{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:function(e,t){return t.filterFormDeleteIcon}})((function(e){var t=e.theme;return{flexShrink:0,justifyContent:"flex-end",marginRight:t.spacing(.5),marginBottom:t.spacing(.2)}})),Xm=(0,C.ZP)(Md,{name:"MuiDataGrid",slot:"FilterFormLinkOperatorInput",overridesResolver:function(e,t){return t.filterFormLinkOperatorInput}})({minWidth:55,marginRight:5,justifyContent:"end"}),Km=(0,C.ZP)(Md,{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:function(e,t){return t.filterFormColumnInput}})({width:150}),Jm=(0,C.ZP)(Md,{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:function(e,t){return t.filterFormOperatorInput}})({width:120}),Qm=(0,C.ZP)(Md,{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:function(e,t){return t.filterFormValueInput}})({width:190}),eg=function(e){switch(e){case rc.And:return"filterPanelOperatorAnd";case rc.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `linkOperator` property in the `GridFilterPanel`.")}},tg=function(e){return e.headerName||e.field},ng=new Intl.Collator,rg=e.forwardRef((function(t,n){var r,i,o,a,s,l,c,u=t.item,d=t.hasMultipleFilters,f=t.deleteFilter,p=t.applyFilterChanges,m=t.multiFilterOperator,g=t.showMultiFilterOperators,w=t.disableMultiFilterOperator,_=t.applyMultiFilterOperatorChanges,C=t.focusElementRef,k=t.linkOperators,M=void 0===k?[rc.And,rc.Or]:k,T=t.columnsSort,E=t.deleteIconProps,P=void 0===E?{}:E,R=t.linkOperatorInputProps,O=void 0===R?{}:R,I=t.operatorInputProps,L=void 0===I?{}:I,D=t.columnInputProps,N=void 0===D?{}:D,F=t.valueInputProps,z=void 0===F?{}:F,B=(0,y.Z)(t,Wm),j=ee(),Z=J(j,Y),H=(0,or.Z)(),U=(0,or.Z)(),V=(0,or.Z)(),G=(0,or.Z)(),W=ne(),$=function(e){var t=e.classes;return(0,S.Z)({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],linkOperatorInput:["filterFormLinkOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},A,t)}({classes:W.classes}),q=e.useRef(null),X=e.useRef(null),K=d&&M.length>0,Q=(null==(r=W.componentsProps)?void 0:r.baseFormControl)||{},te=null==(o=((null==(i=W.componentsProps)?void 0:i.baseSelect)||{}).native)||o,re=te?"option":gr,ie=z.InputComponentProps,oe=(0,y.Z)(z,$m),ae=e.useMemo((function(){switch(T){case"asc":return Z.sort((function(e,t){return ng.compare(tg(e),tg(t))}));case"desc":return Z.sort((function(e,t){return-ng.compare(tg(e),tg(t))}));default:return Z}}),[Z,T]),se=u.columnField?j.current.getColumn(u.columnField):null,le=e.useMemo((function(){var e;return u.operatorValue&&se?null==(e=se.filterOperators)?void 0:e.find((function(e){return e.value===u.operatorValue})):null}),[u,se]),ce=e.useCallback((function(e){var t=e.target.value,n=j.current.getColumn(t);if(n.field!==se.field){var r=n.filterOperators.find((function(e){return e.value===u.operatorValue}))||n.filterOperators[0],i=!r.InputComponent||r.InputComponent!==(null==le?void 0:le.InputComponent);p((0,v.Z)({},u,{columnField:t,operatorValue:r.value,value:i?void 0:u.value}))}}),[j,p,u,se,le]),ue=e.useCallback((function(e){var t=e.target.value,n=null==se?void 0:se.filterOperators.find((function(e){return e.value===t})),r=!(null!=n&&n.InputComponent)||(null==n?void 0:n.InputComponent)!==(null==le?void 0:le.InputComponent);p((0,v.Z)({},u,{operatorValue:t,value:r?void 0:u.value}))}),[p,u,se,le]),de=e.useCallback((function(e){var t=e.target.value===rc.And.toString()?rc.And:rc.Or;_(t)}),[_]);return e.useImperativeHandle(C,(function(){return{focus:function(){var e;null!=le&&le.InputComponent?null==q||null==(e=q.current)||e.focus():X.current.focus()}}}),[le]),(0,h.jsxs)(qm,(0,v.Z)({ref:n,className:$.root},B,{children:[(0,h.jsx)(Ym,(0,v.Z)({variant:"standard",as:W.components.BaseFormControl},Q,P,{className:(0,b.Z)($.deleteIcon,Q.className,P.className),children:(0,h.jsx)(Ho,{"aria-label":j.current.getLocaleText("filterPanelDeleteIconLabel"),title:j.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:function(){W.disableMultipleColumnsFiltering?void 0===u.value?f(u):p((0,v.Z)({},u,{value:void 0})):f(u)},size:"small",children:(0,h.jsx)(W.components.FilterPanelDeleteIcon,{fontSize:"small"})})})),(0,h.jsx)(Xm,(0,v.Z)({variant:"standard",as:W.components.BaseFormControl},Q,O,{sx:(0,v.Z)({display:K?"flex":"none",visibility:g?"visible":"hidden"},Q.sx||{},O.sx||{}),className:(0,b.Z)($.linkOperatorInput,Q.className,O.className),children:(0,h.jsx)(W.components.BaseSelect,(0,v.Z)({inputProps:{"aria-label":j.current.getLocaleText("filterPanelLinkOperator")},value:m,onChange:de,disabled:!!w||1===M.length,native:te},null==(a=W.componentsProps)?void 0:a.baseSelect,{children:M.map((function(e){return(0,h.jsx)(re,{value:e.toString(),children:j.current.getLocaleText(eg(e))},e.toString())}))}))})),(0,h.jsxs)(Km,(0,v.Z)({variant:"standard",as:W.components.BaseFormControl},Q,N,{className:(0,b.Z)($.columnInput,Q.className,N.className),children:[(0,h.jsx)(wd,{htmlFor:H,id:U,children:j.current.getLocaleText("filterPanelColumns")}),(0,h.jsx)(W.components.BaseSelect,(0,v.Z)({labelId:U,id:H,label:j.current.getLocaleText("filterPanelColumns"),value:u.columnField||"",onChange:ce,native:te},null==(s=W.componentsProps)?void 0:s.baseSelect,{children:ae.map((function(e){return(0,h.jsx)(re,{value:e.field,children:tg(e)},e.field)}))}))]})),(0,h.jsxs)(Jm,(0,v.Z)({variant:"standard",as:W.components.BaseFormControl},Q,L,{className:(0,b.Z)($.operatorInput,Q.className,L.className),children:[(0,h.jsx)(wd,{htmlFor:V,id:G,children:j.current.getLocaleText("filterPanelOperators")}),(0,h.jsx)(W.components.BaseSelect,(0,v.Z)({labelId:G,label:j.current.getLocaleText("filterPanelOperators"),id:V,value:u.operatorValue,onChange:ue,native:te,inputRef:X},null==(l=W.componentsProps)?void 0:l.baseSelect,{children:null==se||null==(c=se.filterOperators)?void 0:c.map((function(e){return(0,h.jsx)(re,{value:e.value,children:e.label||j.current.getLocaleText("filterOperator".concat((0,x.Z)(e.value)))},e.value)}))}))]})),(0,h.jsx)(Qm,(0,v.Z)({variant:"standard",as:W.components.BaseFormControl},Q,oe,{className:(0,b.Z)($.valueInput,Q.className,oe.className),children:null!=le&&le.InputComponent?(0,h.jsx)(le.InputComponent,(0,v.Z)({apiRef:j,item:u,applyValue:p,focusElementRef:q},le.InputComponentProps,ie)):null}))]}))})),ig=["linkOperators","columnsSort","filterFormProps","children"],og=e.forwardRef((function(t,n){var r,i=ee(),o=ne(),a=J(i,et),s=J(i,Y),l=e.useRef(null),c=t.linkOperators,u=void 0===c?[rc.And,rc.Or]:c,d=t.columnsSort,f=t.filterFormProps,p=(0,y.Z)(t,ig),m=e.useCallback((function(e){i.current.upsertFilterItem(e)}),[i]),g=e.useCallback((function(e){i.current.setFilterLinkOperator(e)}),[i]),b=e.useCallback((function(){var e=s.find((function(e){var t;return null==(t=e.filterOperators)?void 0:t.length}));return e?{columnField:e.field,operatorValue:e.filterOperators[0].value,id:Math.round(1e5*Math.random())}:null}),[s]),x=e.useMemo((function(){if(a.items.length)return a.items;var e=b();return e?[e]:[]}),[a.items,b]),w=x.length>1,_=e.useCallback((function(e){var t=1===x.length;i.current.deleteFilterItem(e),t&&i.current.hideFilterPanel()}),[i,x.length]);return e.useEffect((function(){u.length>0&&a.linkOperator&&!u.includes(a.linkOperator)&&g(u[0])}),[u,g,a.linkOperator]),e.useEffect((function(){x.length>0&&l.current.focus()}),[x.length]),(0,h.jsxs)(Gm,(0,v.Z)({ref:n},p,{children:[(0,h.jsx)(zm,{children:x.map((function(e,t){return(0,h.jsx)(rg,(0,v.Z)({item:e,applyFilterChanges:m,deleteFilter:_,hasMultipleFilters:w,showMultiFilterOperators:t>0,multiFilterOperator:a.linkOperator,disableMultiFilterOperator:1!==t,applyMultiFilterOperatorChanges:g,focusElementRef:t===x.length-1?l:null,linkOperators:u,columnsSort:d},f),null==e.id?t:e.id)}))}),!o.disableMultipleColumnsFiltering&&(0,h.jsx)(Zm,{children:(0,h.jsx)(o.components.BaseButton,(0,v.Z)({onClick:function(){var e=b();e&&i.current.upsertFilterItems([].concat((0,yt.Z)(x),[e]))},startIcon:(0,h.jsx)(Jn,{})},null==(r=o.componentsProps)?void 0:r.baseButton,{children:i.current.getLocaleText("filterPanelAddFilter")}))})]}))})),ag=n(7605);function sg(e){return(0,M.Z)("MuiFormControlLabel",e)}var lg=(0,T.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),cg=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],ug=(0,C.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,o.Z)({},"& .".concat(lg.label),t.label),t.root,t["labelPlacement".concat((0,x.Z)(n.labelPlacement))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)((0,o.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(lg.disabled),{cursor:"default"}),"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},(0,o.Z)({},"& .".concat(lg.label),(0,o.Z)({},"&.".concat(lg.disabled),{color:(t.vars||t).palette.text.disabled})))})),dg=e.forwardRef((function(t,n){var r,i=(0,xn.Z)({props:t,name:"MuiFormControlLabel"}),o=i.className,a=i.componentsProps,s=void 0===a?{}:a,l=i.control,c=i.disabled,u=i.disableTypography,d=i.label,f=i.labelPlacement,p=void 0===f?"end":f,m=i.slotProps,g=void 0===m?{}:m,w=(0,y.Z)(i,cg),_=bn(),C=c;"undefined"===typeof C&&"undefined"!==typeof l.props.disabled&&(C=l.props.disabled),"undefined"===typeof C&&_&&(C=_.disabled);var k={disabled:C};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof l.props[e]&&"undefined"!==typeof i[e]&&(k[e]=i[e])}));var M=vn({props:i,muiFormControl:_,states:["error"]}),T=(0,v.Z)({},i,{disabled:C,labelPlacement:p,error:M.error}),A=function(e){var t=e.classes,n=e.disabled,r=e.labelPlacement,i=e.error,o={root:["root",n&&"disabled","labelPlacement".concat((0,x.Z)(r)),i&&"error"],label:["label",n&&"disabled"]};return(0,S.Z)(o,sg,t)}(T),E=null!=(r=g.typography)?r:s.typography,P=d;return null==P||P.type===ag.Z||u||(P=(0,h.jsx)(ag.Z,(0,v.Z)({component:"span"},E,{className:(0,b.Z)(A.label,null==E?void 0:E.className),children:P}))),(0,h.jsxs)(ug,(0,v.Z)({className:(0,b.Z)(A.root,o),ownerState:T,ref:n},w,{children:[e.cloneElement(l,k),P]}))})),fg=["className"],pg=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:function(e,t){return t.panelHeader}})((function(e){return{padding:e.theme.spacing(1)}}));function hg(e){var t=e.className,n=(0,y.Z)(e,fg),r=function(e){var t=e.classes;return(0,S.Z)({root:["panelHeader"]},A,t)}({classes:ne().classes});return(0,h.jsx)(pg,(0,v.Z)({className:(0,b.Z)(t,r.root)},n))}var mg=["sort","searchPredicate","autoFocusSearchField"],gg=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:function(e,t){return t.columnsPanel}})((function(){return{padding:"8px 0px 8px 8px"}})),vg=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:function(e,t){return t.columnsPanelRow}})((function(e){var t=e.theme;return(0,o.Z)({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px"},"& .".concat(dp.root),{marginRight:t.spacing(.5)})})),yg=((0,C.ZP)(Ho)({justifyContent:"flex-end"}),new Intl.Collator),bg=function(e,t){return(e.headerName||e.field).toLowerCase().indexOf(t)>-1};var xg=["children","className","classes"],wg=(0,T.Z)("MuiDataGrid",["panel","paper"]),_g=(0,C.ZP)(Ao,{name:"MuiDataGrid",slot:"Panel",overridesResolver:function(e,t){return t.panel}})((function(e){return{zIndex:e.theme.zIndex.modal}})),Sg=(0,C.ZP)(Fo,{name:"MuiDataGrid",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){return{backgroundColor:e.theme.palette.background.paper,minWidth:300,maxHeight:450,display:"flex"}})),Cg=e.forwardRef((function(t,n){var r,o=t.children,a=t.className,s=(0,y.Z)(t,xg),l=ee(),c=wg,u=e.useState(!1),d=(0,i.Z)(u,2),f=d[0],p=d[1],m=e.useCallback((function(){l.current.hidePreferences()}),[l]),g=e.useCallback((function(e){qa(e.key)&&l.current.hidePreferences()}),[l]),x=e.useMemo((function(){return[{name:"flip",enabled:!1},{name:"isPlaced",enabled:!0,phase:"main",fn:function(){p(!0)},effect:function(){return function(){p(!1)}}}]}),[]),w=null==(r=l.current.columnHeadersContainerElementRef)?void 0:r.current;return w?(0,h.jsx)(_g,(0,v.Z)({ref:n,placement:"bottom-start",className:(0,b.Z)(a,c.panel),anchorEl:w,modifiers:x},s,{children:(0,h.jsx)(Ns,{mouseEvent:"onMouseUp",onClickAway:m,children:(0,h.jsx)(Sg,{className:c.paper,elevation:8,onKeyDown:g,children:f&&o})})})):null})),kg=["selected","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","cellFocus","cellTabIndex","editRowsState","isLastVisible","onClick","onDoubleClick","onMouseEnter","onMouseLeave"],Mg=["changeReason"],Tg=function(e){var t=e.width;if(!t)return null;var n={width:t};return(0,h.jsx)("div",{className:"MuiDataGrid-cell",style:n})},Ag=e.forwardRef((function(t,n){var r,o=t.selected,a=t.rowId,s=t.row,l=t.index,c=t.style,u=t.position,d=t.rowHeight,f=t.className,p=t.visibleColumns,m=t.renderedColumns,g=t.containerWidth,x=t.firstColumnToRender,_=t.cellFocus,C=t.cellTabIndex,k=t.editRowsState,M=t.isLastVisible,T=void 0!==M&&M,P=t.onClick,R=t.onDoubleClick,O=t.onMouseEnter,I=t.onMouseLeave,L=(0,y.Z)(t,kg),D=ee(),N=e.useRef(null),F=ne(),z=Rc(D,F),B=J(D,q),j=J(D,Ke),Z=J(D,ye),H=J(D,se),U=(0,w.Z)(N,n),V=l+H+2,G=null!=(r=D.current.getRootDimensions())?r:{hasScrollX:!1,hasScrollY:!1},W=G.hasScrollX,$=G.hasScrollY,Y=function(e){var t=e.editable,n=e.editing,r=e.selected,i=e.isLastVisible,o=e.rowHeight,a=e.classes,s={root:["row",r&&"selected",t&&"row--editable",n&&"row--editing",i&&"row--lastVisible","auto"===o&&"row--dynamicHeight"]};return(0,S.Z)(s,A,a)}({selected:o,isLastVisible:T,classes:F.classes,editing:D.current.getRowMode(a)===ns.Edit,editable:F.editMode===es.Row,rowHeight:d});e.useLayoutEffect((function(){"auto"===d&&N.current&&"undefined"===typeof ResizeObserver&&D.current.unstable_storeRowHeightMeasurement(a,N.current.clientHeight,u)}),[D,d,a,u]),e.useLayoutEffect((function(){if(z.range){var e=D.current.getRowIndexRelativeToVisibleRows(a);null!=e&&D.current.unstable_setLastMeasuredRowIndex(e)}var t=N.current;if(t&&!("auto"!==d)&&"undefined"!==typeof ResizeObserver){var n=new ResizeObserver((function(e){var t=(0,i.Z)(e,1)[0],n=t.borderBoxSize&&t.borderBoxSize.length>0?t.borderBoxSize[0].blockSize:t.contentRect.height;D.current.unstable_storeRowHeightMeasurement(a,n,u)}));return n.observe(t),function(){return n.disconnect()}}}),[D,z.range,l,d,a,u]);var X=e.useCallback((function(e,t){return function(n){(1!==n.target.nodeType||n.currentTarget.contains(n.target))&&D.current.getRow(a)&&(D.current.publishEvent(e,D.current.getRowParams(a),n),t&&t(n))}}),[D,a]),K=e.useCallback((function(e){var t=mu(e.target,E.cell),n=null==t?void 0:t.getAttribute("data-field");if(n){if(n===ec.field)return;if(n===Ic)return;if("__reorder__"===n)return;if(D.current.getCellMode(a,n)===ts.Edit)return;if(D.current.getColumn(n).type===ul)return}X("rowClick",P)(e)}),[D,P,X,a]),Q=e.useCallback((function(e,t){var n,r=D.current.getCellParams(a,e.field),i=[],o=F.disableColumnReorder&&e.disableReorder||!F.rowReordering&&!!j.length&&Z>1&&Object.keys(k).length>0;e.cellClassName&&i.push((0,b.Z)("function"===typeof e.cellClassName?e.cellClassName(r):e.cellClassName));var l,c=k[a]?k[a][e.field]:null,u=null;null==c&&e.renderCell&&(u=e.renderCell((0,v.Z)({},r,{api:D.current})),i.push((0,b.Z)(E["cell--withRenderer"],null==(l=F.classes)?void 0:l["cell--withRenderer"])));if(null!=c&&e.renderEditCell){var f,p=s;D.current.unstable_getRowWithUpdatedValues&&(p=D.current.unstable_getRowWithUpdatedValues(a,e.field));var m=(0,y.Z)(c,Mg),g=(0,v.Z)({},r,{row:p},m,{api:D.current});u=e.renderEditCell(g),i.push((0,b.Z)(E["cell--editing"],null==(f=F.classes)?void 0:f["cell--editing"]))}F.getCellClassName&&i.push(F.getCellClassName(r));var x=null!==_&&_.id===a&&_.field===e.field,w=null!==C&&C.id===a&&C.field===e.field&&"view"===r.cellMode?0:-1;return(0,h.jsx)(F.components.Cell,(0,v.Z)({value:r.value,field:e.field,width:t.width,rowId:a,height:d,showRightBorder:t.showRightBorder,formattedValue:r.formattedValue,align:e.align||"left",cellMode:r.cellMode,colIndex:t.indexRelativeToAllColumns,isEditable:r.isEditable,hasFocus:x,tabIndex:w,className:(0,b.Z)(i),colSpan:t.colSpan,disableDragEvents:o},null==(n=F.componentsProps)?void 0:n.cell,{children:u}),e.field)}),[D,C,k,_,F,s,d,a,Z,j.length]),te=D.current.unstable_getRowInternalSizes(a),re=d;if("auto"===re&&te){var ie=0,oe=Object.entries(te).reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],o=n[1];return/^base[A-Z]/.test(r)?(ie+=1,o>e?o:e):e}),0);oe>0&&ie>1&&(re=oe)}var ae=(0,v.Z)({},c,{maxHeight:"auto"===d?"none":d,minHeight:re});null!=te&&te.spacingTop&&(ae["border"===F.rowSpacingType?"borderTopWidth":"marginTop"]=te.spacingTop);if(null!=te&&te.spacingBottom){var le="border"===F.rowSpacingType?"borderBottomWidth":"marginBottom",ce=ae[le];"number"!==typeof ce&&(ce=parseInt(ce||"0",10)),ce+=te.spacingBottom,ae[le]=ce}var ue=D.current.unstable_applyPipeProcessors("rowClassName",[],a);if("function"===typeof F.getRowClassName){var de,fe=l-((null==(de=z.range)?void 0:de.firstRowIndex)||0),pe=(0,v.Z)({},D.current.getRowParams(a),{isFirstVisible:0===fe,isLastVisible:fe===z.rows.length-1,indexRelativeToCurrentPage:fe});ue.push(F.getRowClassName(pe))}for(var he=St(1e4,20,80),me=[],ge=0;ge<m.length;ge+=1){var ve=m[ge],be=x+ge,xe=be===p.length-1,we=xe?!(xe&&W&&!$)&&F.disableExtendRowFullWidth:F.showCellRightBorder,_e=D.current.unstable_getCellColSpanInfo(a,be);if(_e&&!_e.spannedByColSpan)if(s){var Se=_e.cellProps,Ce=Se.colSpan,ke={width:Se.width,colSpan:Ce,showRightBorder:we,indexRelativeToAllColumns:be};me.push(Q(ve,ke))}else{var Me=_e.cellProps.width,Te=Math.round(he());me.push((0,h.jsx)(F.components.SkeletonCell,{width:Me,contentWidth:Te,field:ve.field,align:ve.align},ve.field))}}var Ae=g-B,Ee=s?{onClick:K,onDoubleClick:X("rowDoubleClick",R),onMouseEnter:X("rowMouseEnter",O),onMouseLeave:X("rowMouseLeave",I)}:null;return(0,h.jsxs)("div",(0,v.Z)({ref:U,"data-id":a,"data-rowindex":l,role:"row",className:b.Z.apply(void 0,(0,yt.Z)(ue).concat([Y.root,f])),"aria-rowindex":V,"aria-selected":o,style:ae},Ee,L,{children:[me,Ae>0&&(0,h.jsx)(Tg,{width:Ae})]}))})),Eg=["sortingOrder"],Pg=e.memo((function(e){var t=e.sortingOrder,n=(0,y.Z)(e,Eg),r=ne(),o="asc"===(0,i.Z)(t,1)[0]?r.components.ColumnSortedAscendingIcon:r.components.ColumnSortedDescendingIcon;return o?(0,h.jsx)(o,(0,v.Z)({},n)):null})),Rg=["error","hasError","errorInfo"],Og=e.forwardRef((function(e,t){var n=e.error,r=(0,y.Z)(e,Rg),i=ee(),o=i.current.getLocaleText("errorOverlayDefaultLabel"),a=J(i,oe);return(0,h.jsx)(Kh,(0,v.Z)({ref:t,sx:{width:"100%",minHeight:2*a}},r,{children:(null==n?void 0:n.message)||o}))})),Ig=e.forwardRef((function(e,t){var n=ee().current.getLocaleText("noResultsOverlayLabel");return(0,h.jsx)(Kh,(0,v.Z)({ref:t},e,{children:n}))})),Lg={BooleanCellTrueIcon:rr,BooleanCellFalseIcon:Kn,ColumnMenuIcon:Xn,OpenFilterButtonIcon:Hn,FilterPanelDeleteIcon:Kn,ColumnFilteredIcon:Un,ColumnSelectorIcon:Gn,ColumnUnsortedIcon:Pg,ColumnSortedAscendingIcon:zn,ColumnSortedDescendingIcon:Bn,ColumnResizeIcon:Wn,DensityCompactIcon:$n,DensityStandardIcon:qn,DensityComfortableIcon:Yn,ExportIcon:nr,MoreActionsIcon:ir,TreeDataCollapseIcon:Zn,TreeDataExpandIcon:jn,GroupingCriteriaCollapseIcon:Zn,GroupingCriteriaExpandIcon:jn,DetailPanelExpandIcon:Jn,DetailPanelCollapseIcon:Qn,RowReorderIcon:tr,QuickFilterIcon:Vn,QuickFilterClearIcon:Kn},Dg=(0,v.Z)({},Lg,{BaseCheckbox:Vu,BaseTextField:cp,BaseFormControl:Md,BaseSelect:ip,BaseSwitch:vp,BaseButton:yp.Z,BaseTooltip:Rp,BasePopper:Ao,Cell:function(t){var n=t.align,r=t.children,i=t.colIndex,o=t.cellMode,a=t.field,s=t.formattedValue,l=t.hasFocus,c=t.height,u=t.isEditable,d=t.rowId,f=t.tabIndex,p=t.value,m=t.width,g=t.className,w=t.showRightBorder,_=t.colSpan,C=t.disableDragEvents,k=t.onClick,M=t.onDoubleClick,T=t.onMouseDown,E=t.onMouseUp,P=t.onKeyDown,R=t.onDragEnter,O=t.onDragOver,I=(0,y.Z)(t,Op),L=null==s?p:s,D=e.useRef(null),N=e.useRef(null),F=ee(),z=function(e){var t=e.align,n=e.showRightBorder,r=e.isEditable,i=e.classes,o={root:["cell","cell--text".concat((0,x.Z)(t)),r&&"cell--editable",n&&"withBorder"],content:["cellContent"]};return(0,S.Z)(o,A,i)}({align:n,showRightBorder:w,isEditable:u,classes:ne().classes}),B=e.useCallback((function(e){return function(t){var n=F.current.getCellParams(d,a||"");F.current.publishEvent(e,n,t),E&&E(t)}}),[F,a,E,d]),j=e.useCallback((function(e){return function(t){var n=F.current.getCellParams(d,a||"");F.current.publishEvent(e,n,t),T&&T(t)}}),[F,a,T,d]),Z=e.useCallback((function(e,t){return function(n){if(n.currentTarget.contains(n.target)&&F.current.getRow(d)){var r=F.current.getCellParams(d,a||"");F.current.publishEvent(e,r,n),t&&t(n)}}}),[F,a,d]),H={minWidth:m,maxWidth:m,minHeight:c,maxHeight:"auto"===c?"none":c};e.useEffect((function(){if(l&&o!==ts.Edit){var e=(0,ws.Z)(F.current.rootElementRef.current);if(D.current&&!D.current.contains(e.activeElement)){var t=D.current.querySelector('[tabindex="0"]'),n=N.current||t||D.current;if(void 0===Ep&&document.createElement("div").focus({get preventScroll(){return Ep=!0,!1}}),Ep)n.focus({preventScroll:!0});else{var r=F.current.getScrollPosition();n.focus(),F.current.scroll(r)}}}}),[l,o,F]);var U=I.onFocus,V="actions"===F.current.getColumn(a).type,G=C?null:{onDragEnter:Z("cellDragEnter",R),onDragOver:Z("cellDragOver",O)};return(0,h.jsx)("div",(0,v.Z)({ref:D,className:(0,b.Z)(g,z.root),role:"cell","data-field":a,"data-colindex":i,"aria-colindex":i+1,"aria-colspan":_,style:H,tabIndex:"view"!==o&&u||V?-1:f,onClick:Z("cellClick",k),onDoubleClick:Z("cellDoubleClick",M),onMouseDown:j("cellMouseDown"),onMouseUp:B("cellMouseUp"),onKeyDown:Z("cellKeyDown",P)},G,I,{onFocus:U,children:null==r?(0,h.jsx)("div",{className:z.content,children:null==L?void 0:L.toString()}):e.isValidElement(r)&&V?e.cloneElement(r,{focusElementRef:N}):r}))},SkeletonCell:function(e){var t=e.align,n=e.width,r=e.contentWidth,i=(0,y.Z)(e,Xp),o=function(e){var t=e.align,n=e.classes,r={root:["cell","cellSkeleton","cell--text".concat((0,x.Z)(t))]};return(0,S.Z)(r,A,n)}({classes:ne().classes,align:t});return(0,h.jsx)("div",(0,v.Z)({className:o.root,style:{width:n}},i,{children:(0,h.jsx)(Yp,{width:"".concat(r,"%")})}))},ColumnHeaderFilterIconButton:function(t){var n,r=t.counter,i=t.field,o=t.onClick,a=ee(),s=ne(),l=function(e){var t=e.classes;return(0,S.Z)({icon:["filterIcon"]},A,t)}((0,v.Z)({},t,{classes:s.classes})),c=e.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=qc(a.current.state),n=t.open,r=t.openedPanelValue;n&&r===gl.filters?a.current.hideFilterPanel():a.current.showFilterPanel(),o&&o(a.current.getColumnHeaderParams(i),e)}),[a,i,o]);if(!r)return null;var u=(0,h.jsx)(Ho,{onClick:c,color:"default","aria-label":a.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,children:(0,h.jsx)(s.components.ColumnFilteredIcon,{className:l.icon,fontSize:"small"})});return(0,h.jsx)(s.components.BaseTooltip,(0,v.Z)({title:a.current.getLocaleText("columnHeaderFiltersTooltipActive")(r),enterDelay:1e3},null==(n=s.componentsProps)?void 0:n.baseTooltip,{children:(0,h.jsxs)(fh,{children:[r>1&&(0,h.jsx)(ch,{badgeContent:r,color:"default",children:u}),1===r&&u]})}))},ColumnMenu:bh,ErrorOverlay:Og,Footer:Eh,Header:Ph,Toolbar:null,PreferencesPanel:Rh,LoadingOverlay:Jh,NoResultsOverlay:Ig,NoRowsOverlay:Qh,Pagination:Dm,FilterPanel:og,ColumnsPanel:function(t){var n,r,o,a=ee(),s=e.useRef(null),l=J(a,V),c=J(a,G),u=ne(),d=e.useState(""),f=(0,i.Z)(d,2),p=f[0],m=f[1],g=function(e){var t=e.classes;return(0,S.Z)({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},A,t)}({classes:u.classes}),b=t.sort,x=t.searchPredicate,w=void 0===x?bg:x,_=t.autoFocusSearchField,C=void 0===_||_,k=(0,y.Z)(t,mg),M=e.useMemo((function(){switch(b){case"asc":return(0,yt.Z)(l).sort((function(e,t){return yg.compare(e.headerName||e.field,t.headerName||t.field)}));case"desc":return(0,yt.Z)(l).sort((function(e,t){return-yg.compare(e.headerName||e.field,t.headerName||t.field)}));default:return l}}),[l,b]),T=function(e){var t=e.target.name;a.current.setColumnVisibility(t,!1===c[t])},E=e.useCallback((function(e){return a.current.unstable_caches.columns.isUsingColumnVisibilityModel?e?a.current.setColumnVisibilityModel({}):a.current.setColumnVisibilityModel(Object.fromEntries(l.filter((function(e){return!1!==e.hideable})).map((function(e){return[e.field,!1]})))):a.current.updateColumns(l.map((function(t){return!1!==t.hideable?{field:t.field,hide:!e}:t})))}),[a,l]),P=e.useCallback((function(e){m(e.target.value)}),[]),R=e.useMemo((function(){if(!p)return M;var e=p.toLowerCase();return M.filter((function(t){return w(t,e)}))}),[M,p,w]),O=e.useRef(null);e.useEffect((function(){C?s.current.focus():O.current&&"function"===typeof O.current.focus&&O.current.focus()}),[C]);var I=!1,L=function(e){return!1===I&&!1!==e.hideable&&(I=!0,!0)};return(0,h.jsxs)(Gm,(0,v.Z)({},k,{children:[(0,h.jsx)(hg,{children:(0,h.jsx)(u.components.BaseTextField,(0,v.Z)({label:a.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:a.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:s,value:p,onChange:P,variant:"standard",fullWidth:!0},null==(n=u.componentsProps)?void 0:n.baseTextField))}),(0,h.jsx)(zm,{children:(0,h.jsx)(gg,{className:g.root,children:R.map((function(e){var t;return(0,h.jsxs)(vg,{className:g.columnsPanelRow,children:[(0,h.jsx)(dg,{control:(0,h.jsx)(u.components.BaseSwitch,(0,v.Z)({disabled:!1===e.hideable,checked:!1!==c[e.field],onClick:T,name:e.field,size:"small",inputRef:L(e)?O:void 0},null==(t=u.componentsProps)?void 0:t.baseSwitch)),label:e.headerName||e.field}),!u.disableColumnReorder&&false]},e.field)}))})}),(0,h.jsxs)(Zm,{children:[(0,h.jsx)(u.components.BaseButton,(0,v.Z)({onClick:function(){return E(!1)}},null==(r=u.componentsProps)?void 0:r.baseButton,{children:a.current.getLocaleText("columnsPanelHideAllButton")})),(0,h.jsx)(u.components.BaseButton,(0,v.Z)({onClick:function(){return E(!0)}},null==(o=u.componentsProps)?void 0:o.baseButton,{children:a.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))},Panel:Cg,Row:Ag}),Ng={apiRef:void 0,disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},Fg={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,density:_l.Standard,disableExtendRowFullWidth:!1,disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableMultipleColumnsFiltering:!1,disableMultipleSelection:!1,disableMultipleColumnsSorting:!1,disableSelectionOnClick:!1,disableVirtualization:!1,disableIgnoreModificationsIfProcessingProps:!1,editMode:es.Cell,filterMode:gc,headerHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:gc,rowHeight:52,rowsPerPageOptions:[25,50,100],rowSpacingType:"margin",showCellRightBorder:!1,showColumnRightBorder:!1,sortingOrder:["asc","desc",null],sortingMode:gc,throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1},zg=["className"],Bg=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:function(e,t){return t.virtualScroller}})({overflow:"auto",position:"relative","@media print":{overflow:"hidden"}}),jg=e.forwardRef((function(e,t){var n=e.className,r=(0,y.Z)(e,zg),i=function(e){var t=e.classes;return(0,S.Z)({root:["virtualScroller"]},A,t)}({classes:ne().classes});return(0,h.jsx)(Bg,(0,v.Z)({ref:t,className:(0,b.Z)(i.root,n)},r))})),Zg=["className","style"],Hg=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:function(e,t){return t.virtualScrollerContent}})({}),Ug=e.forwardRef((function(e,t){var n=e.className,r=e.style,i=(0,y.Z)(e,Zg),o=ne(),a=function(e){var t=e.classes,n={root:["virtualScrollerContent",e.overflowedContent&&"virtualScrollerContent--overflowed"]};return(0,S.Z)(n,A,t)}({classes:o.classes,overflowedContent:!o.autoHeight&&"auto"===(null==r?void 0:r.minHeight)});return(0,h.jsx)(Hg,(0,v.Z)({ref:t,className:(0,b.Z)(a.root,n),style:r},i))})),Vg=["className"],Gg=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:function(e,t){return t.virtualScrollerRenderZone}})({position:"absolute",display:"flex",flexDirection:"column"}),Wg=e.forwardRef((function(e,t){var n=e.className,r=(0,y.Z)(e,Vg),i=function(e){var t=e.classes;return(0,S.Z)({root:["virtualScrollerRenderZone"]},A,t)}({classes:ne().classes});return(0,h.jsx)(Gg,(0,v.Z)({ref:t,className:(0,b.Z)(i.root,n)},r))})),$g=["style"];function qg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(t.length<=0)return-1;if(n>=r)return n;var i=n+Math.floor((r-n)/2),o=t[i];return e<=o?qg(e,t,n,i):qg(e,t,i+1,r)}var Yg=function(e){var t=e.firstIndex,n=e.lastIndex,r=e.buffer,i=e.minFirstIndex,o=e.maxLastIndex;return[wt(t-r,i,o),wt(n+r,i,o)]},Xg=function(t){var n,r,o=ee(),a=ne(),s=J(o,W),l=t.ref,c=t.disableVirtualization,u=t.onRenderZonePositioning,d=t.renderZoneMinColumnIndex,f=void 0===d?0:d,p=t.renderZoneMaxColumnIndex,m=void 0===p?s.length:p,g=t.getRowProps,b=J(o,$),x=J(o,q),S=J(o,oe),C=J(o,Nl),k=J(o,Bl),M=J(o,mc),T=J(o,Xc),A=J(o,Vl),E=Rc(o,a),P=e.useRef(null),R=e.useRef(null),O=(0,w.Z)(l,R),I=e.useState(null),L=(0,i.Z)(I,2),D=L[0],N=L[1],F=e.useRef(D),z=e.useRef({top:0,left:0}),B=e.useState({width:null,height:null}),j=(0,i.Z)(B,2),Z=j[0],H=j[1],U=e.useRef(x),V=e.useCallback((function(e){var t,n,r=o.current.unstable_getLastMeasuredRowIndex(),i=r===1/0;null!=(t=E.range)&&t.lastRowIndex&&!i&&(i=r>=E.range.lastRowIndex);var a=wt(r-((null==(n=E.range)?void 0:n.firstRowIndex)||0),0,M.positions.length);return i||M.positions[a]>=e?qg(e,M.positions):function(e,t,n){for(var r=1;n<t.length&&t[n]<e;)n+=r,r*=2;return qg(e,t,Math.floor(n/2),Math.min(n,t.length))}(e,M.positions,a)}),[o,null==(n=E.range)?void 0:n.firstRowIndex,null==(r=E.range)?void 0:r.lastRowIndex,M.positions]),G=e.useCallback((function(){if(c)return{firstRowIndex:0,lastRowIndex:E.rows.length,firstColumnIndex:0,lastColumnIndex:s.length};for(var e=z.current,t=e.top,n=e.left,r=Math.min(V(t),M.positions.length-1),l=a.autoHeight?r+E.rows.length:V(t+Z.height),u=!1,d=0,f=b.length,p=Yg({firstIndex:r,lastIndex:l,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:a.rowBuffer}),h=(0,i.Z)(p,2),m=h[0],g=h[1],v=m;v<g&&!u;v+=1){var y=E.rows[v];u=o.current.unstable_rowHasAutoHeight(y.id)}return u||(d=qg(n,b),f=qg(n+Z.width,b)),{firstRowIndex:r,lastRowIndex:l,firstColumnIndex:d,lastColumnIndex:f}}),[c,V,M.positions.length,a.autoHeight,a.rowBuffer,E.rows,b,s.length,o,Z]);(0,_.Z)((function(){c?P.current.style.transform="translate3d(0px, 0px, 0px)":(R.current.scrollLeft=0,R.current.scrollTop=0)}),[c]),(0,_.Z)((function(){H({width:R.current.clientWidth,height:R.current.clientHeight})}),[M.currentPageTotalHeight]);var Y=e.useCallback((function(e){H({width:e.width,height:e.height})}),[]);Ft(o,"resize",Y);var X=e.useCallback((function(e){var t=Yg({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:a.rowBuffer}),n=(0,i.Z)(t,2),r=n[0],s=n[1],l=Yg({firstIndex:e.firstColumnIndex,lastIndex:e.lastColumnIndex,minFirstIndex:f,maxLastIndex:m,buffer:a.columnBuffer}),c=xl({firstColumnToRender:(0,i.Z)(l,1)[0],apiRef:o,firstRowToRender:r,lastRowToRender:s,visibleRows:E.rows}),d=mc(o.current.state).positions[r],p=$(o)[c];P.current.style.transform="translate3d(".concat(p,"px, ").concat(d,"px, 0px)"),"function"===typeof u&&u({top:d,left:p})}),[o,E.rows,u,f,m,a.columnBuffer,a.rowBuffer]);e.useLayoutEffect((function(){D&&X(D)}),[D,X]);var K=e.useCallback((function(e){N(e);var t=Yg({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:a.rowBuffer}),n=(0,i.Z)(t,2),r=n[0],s=n[1];o.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:r,lastRowToRender:s}),F.current=e}),[o,N,F,E.rows.length,a.rowBuffer]);(0,_.Z)((function(){if(null!=Z.width){var e=G();K(e);var t=z.current,n={top:t.top,left:t.left,renderContext:e};o.current.publishEvent("rowsScroll",n)}}),[o,G,Z.width,K]);var Q=function(e){var t=e.currentTarget,n=t.scrollTop,r=t.scrollLeft;if(z.current.top=n,z.current.left=r,!(r<0||n<0)&&F.current){var i=c?F.current:G(),s=Math.abs(i.firstRowIndex-F.current.firstRowIndex),l=Math.abs(i.lastRowIndex-F.current.lastRowIndex),u=Math.abs(i.firstColumnIndex-F.current.firstColumnIndex),d=Math.abs(i.lastColumnIndex-F.current.lastColumnIndex),f=s>=a.rowThreshold||l>=a.rowThreshold||u>=a.columnThreshold||d>=a.columnThreshold||U.current!==x;o.current.publishEvent("rowsScroll",{top:n,left:r,renderContext:f?i:F.current},e),f&&(an.flushSync((function(){K(i)})),U.current=x)}},te=function(e){o.current.publishEvent("virtualScrollerWheel",{},e)},re=function(e){o.current.publishEvent("virtualScrollerTouchMove",{},e)},ie=Z.width&&x>Z.width,ae=e.useMemo((function(){var e=Math.max(M.currentPageTotalHeight,1),t=!1;null!=R&&R.current&&e<=(null==R?void 0:R.current.clientHeight)&&(t=!0);var n={width:ie?x:"auto",height:e,minHeight:t?"100%":"auto"};return a.autoHeight&&0===E.rows.length&&(n.height=2*S),n}),[R,x,M.currentPageTotalHeight,E.rows.length,ie,a.autoHeight,S]);e.useEffect((function(){o.current.publishEvent("virtualScrollerContentSizeChange")}),[o,ae]),a.autoHeight&&0===E.rows.length&&(ae.height=2*S);var se={};ie||(se.overflowX="hidden"),a.autoHeight&&(se.overflowY="hidden");var le=e.useCallback((function(){return F.current}),[]);return o.current.unstable_getRenderContext=le,{renderContext:D,updateRenderZonePosition:X,getRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{renderContext:D},t=e.renderContext,n=e.minFirstColumn,r=void 0===n?f:n,l=e.maxLastColumn,u=void 0===l?m:l,d=e.availableSpace,p=void 0===d?Z.width:d,y=e.rowIndexOffset,b=void 0===y?0:y,x=e.position,w=void 0===x?"center":x;if(!t||null==p)return null;var _=c?0:a.rowBuffer,S=c?0:a.columnBuffer,M=Yg({firstIndex:t.firstRowIndex,lastIndex:t.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:_}),P=(0,i.Z)(M,2),R=P[0],O=P[1],I=[];if(e.rows)e.rows.forEach((function(e){I.push(e),o.current.unstable_calculateColSpan({rowId:e.id,minFirstColumn:r,maxLastColumn:u,columns:s})}));else{if(!E.range)return null;for(var L=R;L<O;L+=1){var N=E.rows[L];I.push(N),o.current.unstable_calculateColSpan({rowId:N.id,minFirstColumn:r,maxLastColumn:u,columns:s})}}for(var F=Yg({firstIndex:t.firstColumnIndex,lastIndex:t.lastColumnIndex,minFirstIndex:r,maxLastIndex:u,buffer:S}),z=(0,i.Z)(F,2),B=z[0],j=z[1],H=xl({firstColumnToRender:B,apiRef:o,firstRowToRender:R,lastRowToRender:O,visibleRows:E.rows}),U=s.slice(H,j),V=[],G=0;G<I.length;G+=1){var W,$,q=I[G],Y=q.id,X=q.model,K=R+G===E.rows.length-1,J=o.current.unstable_rowHasAutoHeight(Y)?"auto":o.current.unstable_getRowHeight(Y),Q=void 0;Q=null!=A[Y]&&o.current.isRowSelectable(Y),V.push((0,h.jsx)(a.components.Row,(0,v.Z)({row:X,rowId:Y,rowHeight:J,cellFocus:C,cellTabIndex:k,editRowsState:T,renderedColumns:U,visibleColumns:s,firstColumnToRender:H,lastColumnToRender:j,selected:Q,index:b+((null==E||null==(W=E.range)?void 0:W.firstRowIndex)||0)+R+G,containerWidth:p,isLastVisible:K,position:w},"function"===typeof g?g(Y,X):{},null==($=a.componentsProps)?void 0:$.row),Y))}return V},getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,r=(0,y.Z)(e,$g);return(0,v.Z)({ref:O,onScroll:Q,onWheel:te,onTouchMove:re,style:(0,v.Z)({},n,se)},r)},getContentProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t;return{style:(0,v.Z)({},n,ae)}},getRenderZoneProps:function(){return{ref:P}}}},Kg=["className","disableVirtualization"],Jg=e.forwardRef((function(e,t){var n=e.className,r=e.disableVirtualization,i=(0,y.Z)(e,Kg),o=Xg({ref:t,disableVirtualization:r}),a=o.getRootProps,s=o.getContentProps,l=o.getRenderZoneProps,c=o.getRows;return(0,h.jsx)(jg,(0,v.Z)({className:n},a(i),{children:(0,h.jsx)(Ug,(0,v.Z)({},s(),{children:(0,h.jsx)(Wg,(0,v.Z)({},l(),{children:c()}))}))}))}));function Qg(e){var t=e.direction,n=e.index,r=e.sortingOrder,i=ee(),o=ne(),a=function(e){var t=e.classes;return(0,S.Z)({icon:["sortIcon"]},A,t)}((0,v.Z)({},e,{classes:o.classes})),s=function(e,t,n,r){var i,o={};return"asc"===t?i=e.ColumnSortedAscendingIcon:"desc"===t?i=e.ColumnSortedDescendingIcon:(i=e.ColumnUnsortedIcon,o.sortingOrder=r),i?(0,h.jsx)(i,(0,v.Z)({fontSize:"small",className:n},o)):null}(o.components,t,a.icon,r);if(!s)return null;var l=(0,h.jsx)(Ho,{tabIndex:-1,"aria-label":i.current.getLocaleText("columnHeaderSortIconLabel"),title:i.current.getLocaleText("columnHeaderSortIconLabel"),size:"small",children:s});return(0,h.jsxs)(fh,{children:[null!=n&&(0,h.jsx)(ch,{badgeContent:n,color:"default",children:l}),null==n&&l]})}var ev=e.memo(Qg),tv=e.memo((function(t){var n=t.column,r=t.open,i=t.columnMenuId,o=t.columnMenuButtonId,a=t.iconButtonRef,s=ee(),l=ne(),c=function(e){var t=e.classes,n={root:["menuIcon",e.open&&"menuOpen"],button:["menuIconButton"]};return(0,S.Z)(n,A,t)}((0,v.Z)({},t,{classes:l.classes})),u=e.useCallback((function(e){e.preventDefault(),e.stopPropagation(),s.current.toggleColumnMenu(n.field)}),[s,n.field]);return(0,h.jsx)("div",{className:c.root,children:(0,h.jsx)(Ho,{ref:a,tabIndex:-1,className:c.button,"aria-label":s.current.getLocaleText("columnMenuLabel"),title:s.current.getLocaleText("columnMenuLabel"),size:"small",onClick:u,"aria-expanded":r?"true":void 0,"aria-haspopup":"true","aria-controls":i,id:o,children:(0,h.jsx)(l.components.ColumnMenuIcon,{fontSize:"small"})})})}));function nv(t){var n=t.columnMenuId,r=t.columnMenuButtonId,i=t.ContentComponent,o=t.contentComponentProps,a=t.field,s=t.open,l=t.target,c=t.onExited,u=ee(),d=u.current.getColumn(a),f=e.useCallback((function(e){e.stopPropagation(),u.current.hideColumnMenu()}),[u]);return l?(0,h.jsx)(sl,{placement:"bottom-".concat("right"===d.align?"start":"end"),open:s,target:l,onClickAway:f,onExited:c,children:(0,h.jsx)(i,(0,v.Z)({currentColumn:d,hideMenu:f,open:s,id:n,labelledby:r},o))}):null}var rv=["className"],iv=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:function(e,t){return t.columnHeaderTitle}})((function(e){return{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:e.theme.typography.fontWeightMedium}})),ov=e.forwardRef((function(e,t){var n=e.className,r=(0,y.Z)(e,rv),i=function(e){var t=e.classes;return(0,S.Z)({root:["columnHeaderTitle"]},A,t)}({classes:ne().classes});return(0,h.jsx)(iv,(0,v.Z)({ref:t,className:(0,b.Z)(i.root,n)},r))}));function av(t){var n,r=t.label,o=t.description,a=t.columnWidth,s=ne(),l=e.useRef(null),c=e.useState(""),u=(0,i.Z)(c,2),d=u[0],f=u[1];return e.useEffect((function(){if(!o&&l&&l.current){var e=(t=l.current).scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth;f(e?r:"")}var t}),[l,a,o,r]),(0,h.jsx)(s.components.BaseTooltip,(0,v.Z)({title:o||d},null==(n=s.componentsProps)?void 0:n.baseTooltip,{children:(0,h.jsx)(ov,{ref:l,children:r})}))}var sv,lv=["resizable","resizing","height","side"];!function(e){e.Left="left",e.Right="right"}(sv||(sv={}));function cv(t){var n=t.height,r=t.side,i=void 0===r?sv.Right:r,o=(0,y.Z)(t,lv),a=ne(),s=function(e){var t=e.resizable,n=e.resizing,r=e.classes,i=e.side,o={root:["columnSeparator",t&&"columnSeparator--resizable",n&&"columnSeparator--resizing",i&&"columnSeparator--side".concat((0,x.Z)(i))],icon:["iconSeparator"]};return(0,S.Z)(o,A,r)}((0,v.Z)({},t,{side:i,classes:a.classes})),l=e.useCallback((function(e){e.preventDefault(),e.stopPropagation()}),[]);return(0,h.jsx)("div",(0,v.Z)({className:s.root,style:{minHeight:n,opacity:a.showColumnRightBorder?0:1}},o,{onClick:l,children:(0,h.jsx)(a.components.ColumnResizeIcon,{className:s.icon})}))}var uv=e.memo(cv),dv=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps","disableHeaderSeparator"],fv=e.forwardRef((function(t,n){var r=t.classes,o=t.columnMenuOpen,a=t.colIndex,s=t.height,l=t.isResizing,c=t.sortDirection,u=t.hasFocus,d=t.tabIndex,f=t.separatorSide,p=t.isDraggable,m=t.headerComponent,g=t.description,x=t.width,_=t.columnMenuIconButton,S=void 0===_?null:_,C=t.columnMenu,k=void 0===C?null:C,M=t.columnTitleIconButtons,T=void 0===M?null:M,A=t.headerClassName,E=t.label,P=t.resizable,R=t.draggableContainerProps,O=t.columnHeaderSeparatorProps,I=t.disableHeaderSeparator,L=(0,y.Z)(t,dv),D=ee(),N=ne(),F=e.useRef(null),z=e.useState(o),B=(0,i.Z)(z,2),j=B[0],Z=B[1],H=(0,w.Z)(F,n),U="none";return null!=c&&(U="asc"===c?"ascending":"descending"),e.useEffect((function(){j||Z(o)}),[j,o]),e.useLayoutEffect((function(){var e=D.current.state.columnMenu;if(u&&!e.open){var t=F.current.querySelector('[tabindex="0"]')||F.current;null==t||t.focus(),D.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[D,u]),(0,h.jsxs)("div",(0,v.Z)({ref:H,className:(0,b.Z)(r.root,A),style:{height:s,width:x,minWidth:x,maxWidth:x},role:"columnheader",tabIndex:d,"aria-colindex":a+1,"aria-sort":U,"aria-label":null==m?E:void 0},L,{children:[(0,h.jsxs)("div",(0,v.Z)({className:r.draggableContainer,draggable:p},R,{children:[(0,h.jsxs)("div",{className:r.titleContainer,children:[(0,h.jsx)("div",{className:r.titleContainerContent,children:void 0!==m?m:(0,h.jsx)(av,{label:E,description:g,columnWidth:x})}),T]}),S]})),!I&&(0,h.jsx)(uv,(0,v.Z)({resizable:!N.disableColumnResize&&!!P,resizing:l,height:s,side:f},O)),k]}))}));function pv(t){var n,r,o,a,s,l,c=t.column,u=t.columnMenuOpen,d=t.colIndex,f=t.headerHeight,p=t.isResizing,m=t.isLastColumn,g=t.sortDirection,y=t.sortIndex,b=t.filterItemsCounter,x=t.hasFocus,w=t.tabIndex,_=t.extendRowFullWidth,C=t.disableReorder,k=t.separatorSide,M=ee(),T=ne(),E=e.useRef(null),P=(0,or.Z)(),R=(0,or.Z)(),O=e.useRef(null),I=e.useState(u),L=(0,i.Z)(I,2),D=L[0],N=L[1],F=null!=(n=M.current.getRootDimensions())?n:{hasScrollX:!1,hasScrollY:!1},z=F.hasScrollX,B=F.hasScrollY,j=e.useMemo((function(){return!T.disableColumnReorder&&!C&&!c.disableReorder}),[T.disableColumnReorder,C,c.disableReorder]);c.renderHeader&&(l=c.renderHeader(M.current.getColumnHeaderParams(c.field)));var Z=m?!(m&&z&&!B)&&!_:T.showColumnRightBorder,H=function(e){var t=e.column,n=e.classes,r=e.isDragging,i=e.sortDirection,o=e.showRightBorder,a=e.filterItemsCounter,s=null!=i,l=null!=a&&a>0,c="number"===t.type,u={root:["columnHeader","left"===t.headerAlign&&"columnHeader--alignLeft","center"===t.headerAlign&&"columnHeader--alignCenter","right"===t.headerAlign&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",r&&"columnHeader--moving",s&&"columnHeader--sorted",l&&"columnHeader--filtered",c&&"columnHeader--numeric",o&&"withBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return(0,S.Z)(u,A,n)}((0,v.Z)({},t,{classes:T.classes,showRightBorder:Z})),U=e.useCallback((function(e){return function(t){t.currentTarget.contains(t.target)&&M.current.publishEvent(e,M.current.getColumnHeaderParams(c.field),t)}}),[M,c.field]),V=e.useMemo((function(){return{onClick:U("columnHeaderClick"),onDoubleClick:U("columnHeaderDoubleClick"),onMouseOver:U("columnHeaderOver"),onMouseOut:U("columnHeaderOut"),onMouseEnter:U("columnHeaderEnter"),onMouseLeave:U("columnHeaderLeave"),onKeyDown:U("columnHeaderKeyDown"),onFocus:U("columnHeaderFocus"),onBlur:U("columnHeaderBlur")}}),[U]),G=e.useMemo((function(){return j?{onDragStart:U("columnHeaderDragStart"),onDragEnter:U("columnHeaderDragEnter"),onDragOver:U("columnHeaderDragOver"),onDragEnd:U("columnHeaderDragEnd")}:{}}),[j,U]),W=e.useMemo((function(){return{onMouseDown:U("columnSeparatorMouseDown")}}),[U]);e.useEffect((function(){D||N(u)}),[D,u]);var $=e.useCallback((function(){N(!1)}),[]),q=!T.disableColumnMenu&&!c.disableColumnMenu&&(0,h.jsx)(tv,{column:c,columnMenuId:P,columnMenuButtonId:R,open:D,iconButtonRef:O}),Y=(0,h.jsx)(nv,{columnMenuId:P,columnMenuButtonId:R,field:c.field,open:u,target:O.current,ContentComponent:T.components.ColumnMenu,contentComponentProps:null==(r=T.componentsProps)?void 0:r.columnMenu,onExited:$}),X=null!=(o=c.sortingOrder)?o:T.sortingOrder,K=(0,h.jsxs)(e.Fragment,{children:[!T.disableColumnFilter&&(0,h.jsx)(T.components.ColumnHeaderFilterIconButton,(0,v.Z)({field:c.field,counter:b},null==(a=T.componentsProps)?void 0:a.columnHeaderFilterIconButton)),c.sortable&&!c.hideSortIcons&&(0,h.jsx)(ev,{direction:g,index:y,sortingOrder:X})]});e.useLayoutEffect((function(){var e=M.current.state.columnMenu;if(x&&!e.open){var t=E.current.querySelector('[tabindex="0"]')||E.current;null==t||t.focus(),M.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[M,x]);var J="function"===typeof c.headerClassName?c.headerClassName({field:c.field,colDef:c}):c.headerClassName,Q=null!=(s=c.headerName)?s:c.field;return(0,h.jsx)(fv,(0,v.Z)({ref:E,classes:H,columnMenuOpen:u,colIndex:d,height:f,isResizing:p,sortDirection:g,hasFocus:x,tabIndex:w,separatorSide:k,isDraggable:j,headerComponent:l,description:c.description,elementId:c.field,width:c.computedWidth,columnMenuIconButton:q,columnTitleIconButtons:K,headerClassName:J,label:Q,resizable:!T.disableColumnResize&&!!c.resizable,"data-field":c.field,columnMenu:Y,draggableContainerProps:G,columnHeaderSeparatorProps:W},V))}function hv(e){var t,n,r,i=e.groupId,o=e.width,a=e.depth,s=e.maxDepth,l=e.fields,c=e.height,u=e.colIndex,d=e.isLastColumn,f=e.extendRowFullWidth,p=ne(),m=ee(),g=J(m,kl),y=null!=(t=m.current.getRootDimensions())?t:{hasScrollX:!1,hasScrollY:!1},b=y.hasScrollX,x=y.hasScrollY,w=i?g[i]:{},_=w.headerName,C=void 0===_?null!=i?i:"":_,k=w.description,M=void 0===k?"":k,T=w.headerAlign,E=void 0===T?void 0:T,P=i&&(null==(n=g[i])?void 0:n.renderHeaderGroup),R={groupId:i,headerName:C,description:M,depth:a,maxDepth:s,fields:l,colIndex:u,isLastColumn:d};i&&P&&(r=P(R));var O=d?!(d&&b&&!x)&&!f:p.showColumnRightBorder,I=p.showColumnRightBorder,L=(0,v.Z)({},e,{classes:p.classes,showRightBorder:O,showColumnBorder:I,headerAlign:E,depth:a,isDragging:!1}),D=null!=C?C:i,N=(0,Ir.Z)(),F=null===i?"empty-group-cell-".concat(N):i,z=function(e){var t=e.classes,n=e.headerAlign,r={root:["columnHeader","left"===n&&"columnHeader--alignLeft","center"===n&&"columnHeader--alignCenter","right"===n&&"columnHeader--alignRight",e.isDragging&&"columnHeader--moving",e.showRightBorder&&"withBorder",e.showColumnBorder&&"columnHeader--showColumnBorder",null===e.groupId?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return(0,S.Z)(r,A,t)}(L),B="function"===typeof w.headerClassName?w.headerClassName(R):w.headerClassName;return(0,h.jsx)(fv,{classes:z,columnMenuOpen:!1,colIndex:u,height:c,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:-1,isDraggable:!1,headerComponent:r,headerClassName:B,description:M,elementId:F,width:o,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:D,"aria-colspan":l.length,"data-fields":"|-".concat(l.join("-|-"),"-|"),disableHeaderSeparator:!0})}var mv=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:function(e,t){return t.columnHeaderRow}})((function(){return{display:"flex"}}));var gv=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:function(e,t){return[(0,o.Z)({},"&.".concat(E["scrollArea--left"]),t["scrollArea--left"]),(0,o.Z)({},"&.".concat(E["scrollArea--right"]),t["scrollArea--right"]),t.scrollArea]}})((function(){var e;return e={position:"absolute",top:0,zIndex:101,width:20,bottom:0},(0,o.Z)(e,"&.".concat(E["scrollArea--left"]),{left:0}),(0,o.Z)(e,"&.".concat(E["scrollArea--right"]),{right:0}),e}));function vv(t){var n=t.scrollDirection,r=e.useRef(null),o=ee(),a=e.useRef(),s=e.useState(!1),l=(0,i.Z)(s,2),c=l[0],u=l[1],d=J(o,ae),f=e.useRef({left:0,top:0}),p=ne(),m=function(e){var t=e.scrollDirection,n=e.classes,r={root:["scrollArea","scrollArea--".concat(t)]};return(0,S.Z)(r,A,n)}((0,v.Z)({},t,{classes:p.classes})),g=e.useCallback((function(e){f.current=e}),[]),y=e.useCallback((function(e){var t;if("left"===n)t=e.clientX-r.current.getBoundingClientRect().right;else{if("right"!==n)throw new Error("MUI: Wrong drag direction");t=Math.max(1,e.clientX-r.current.getBoundingClientRect().left)}t=1.5*(t-1)+1,clearTimeout(a.current),a.current=setTimeout((function(){o.current.scroll({left:f.current.left+t,top:f.current.top})}))}),[n,o]);e.useEffect((function(){return function(){clearTimeout(a.current)}}),[]);var x=e.useCallback((function(){u((function(e){return!e}))}),[]);return Ft(o,"rowsScroll",g),Ft(o,"columnHeaderDragStart",x),Ft(o,"columnHeaderDragEnd",x),c?(0,h.jsx)(gv,{ref:r,className:(0,b.Z)(m.root),onDragOver:y,style:{height:d}}):null}var yv=e.memo(vv),bv=["className"],xv=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:function(e,t){return t.columnHeaders}})((function(e){var t=e.theme,n="light"===t.palette.mode?(0,k.$n)((0,k.Fq)(t.palette.divider,1),.88):(0,k._j)((0,k.Fq)(t.palette.divider,1),.68);return{position:"absolute",top:0,left:0,right:0,overflow:"hidden",display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(n),borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius}})),wv=e.forwardRef((function(e,t){var n=e.className,r=(0,y.Z)(e,bv),i=function(e){var t=e.classes;return(0,S.Z)({root:["columnHeaders"]},A,t)}({classes:ne().classes});return(0,h.jsx)(xv,(0,v.Z)({ref:t,className:(0,b.Z)(n,i.root)},r))})),_v=["isDragging","className"],Sv=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:function(e,t){return[(0,o.Z)({},"&.".concat(E.columnHeaderDropZone),t.columnHeaderDropZone),t.columnHeadersInner]}})((function(){var e;return e={display:"flex",alignItems:"flex-start",flexDirection:"column"},(0,o.Z)(e,"&.".concat(E.columnHeaderDropZone," .").concat(E.columnHeaderDraggableContainer),{cursor:"move"}),(0,o.Z)(e,"&.".concat(E["columnHeadersInner--scrollable"]," .").concat(E.columnHeader,":last-child"),{borderRight:"none"}),e})),Cv=e.forwardRef((function(e,t){var n,r,i=e.isDragging,o=e.className,a=(0,y.Z)(e,_v),s=ee(),l=ne(),c=function(e){var t=e.isDragging,n=e.hasScrollX,r=e.classes,i={root:["columnHeadersInner",t&&"columnHeaderDropZone",n&&"columnHeadersInner--scrollable"]};return(0,S.Z)(i,A,r)}({isDragging:i,hasScrollX:null!=(n=null==(r=s.current.getRootDimensions())?void 0:r.hasScrollX)&&n,classes:l.classes});return(0,h.jsx)(Sv,(0,v.Z)({ref:t,className:(0,b.Z)(o,c.root)},a))})),kv=["innerRef","className"],Mv=e.forwardRef((function(t,n){var r=t.innerRef,o=(0,y.Z)(t,kv),a=function(t){var n=t.innerRef,r=t.minColumnIndex,o=void 0===r?0:r,a=e.useState(""),s=(0,i.Z)(a,2),l=s[0],c=s[1],u=e.useState(""),d=(0,i.Z)(u,2),f=d[0],p=d[1],m=ee(),g=J(m,W),y=J(m,$),b=J(m,jl),x=J(m,Bl),_=J(m,Fl),S=J(m,ae),C=J(m,se),k=J(m,ce),M=J(m,ft),T=J(m,Je),A=J(m,Kt),E=ne(),P=e.useRef(null),R=(0,w.Z)(n,P),O=e.useState(null),L=(0,i.Z)(O,2),D=L[0],N=L[1],F=e.useRef(D),z=e.useRef(0),B=Rc(m,E);e.useEffect((function(){m.current.columnHeadersContainerElementRef.current.scrollLeft=0}),[m]);var j=e.useRef(I(wl,{equalityCheck:function(e,t){return["firstColumnIndex","minColumnIndex","columnBuffer"].every((function(n){return e[n]===t[n]}))}})),Z=e.useCallback((function(e){var t=Yg({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:B.rows.length,buffer:E.rowBuffer}),n=(0,i.Z)(t,2),r=n[0],a=n[1],s=j.current({firstColumnIndex:e.firstColumnIndex,minColumnIndex:o,columnBuffer:E.columnBuffer,firstRowToRender:r,lastRowToRender:a,apiRef:m,visibleRows:B.rows}),l=s>0?z.current-y[s]:z.current;P.current.style.transform="translate3d(".concat(-l,"px, 0px, 0px)")}),[y,o,E.columnBuffer,m,B.rows,E.rowBuffer]);e.useLayoutEffect((function(){D&&Z(D)}),[D,Z]);var H=e.useCallback((function(e,t){var n,r,i=e.left,o=e.renderContext,a=void 0===o?null:o;if(P.current&&(z.current!==i||(null==(n=F.current)?void 0:n.firstColumnIndex)!==(null==a?void 0:a.firstColumnIndex)||(null==(r=F.current)?void 0:r.lastColumnIndex)!==(null==a?void 0:a.lastColumnIndex))){z.current=i;var s=!1;a===F.current&&F.current?s=!0:(function(e){return!!e.target}(t)?(an.flushSync((function(){N(a)})),s=!0):N(a),F.current=a),a&&s&&Z(a)}}),[Z]),U=e.useCallback((function(e){return p(e.field)}),[]),V=e.useCallback((function(){return p("")}),[]),G=e.useCallback((function(e){return c(e.field)}),[]),q=e.useCallback((function(){return c("")}),[]);Ft(m,"columnResizeStart",U),Ft(m,"columnResizeStop",V),Ft(m,"columnHeaderDragStart",G),Ft(m,"columnHeaderDragEnd",q),Ft(m,"rowsScroll",H);var Y=function(e){var t=e||{},n=t.renderContext,r=void 0===n?D:n,a=t.minFirstColumn,s=void 0===a?o:a,l=t.maxLastColumn,c=void 0===l?g.length:l;if(!r)return null;var u=Yg({firstIndex:r.firstRowIndex,lastIndex:r.lastRowIndex,minFirstIndex:0,maxLastIndex:B.rows.length,buffer:E.rowBuffer}),d=(0,i.Z)(u,2),f=d[0],p=d[1],h=j.current({firstColumnIndex:r.firstColumnIndex,minColumnIndex:s,columnBuffer:E.columnBuffer,apiRef:m,firstRowToRender:f,lastRowToRender:p,visibleRows:B.rows}),v=Math.min(r.lastColumnIndex+E.columnBuffer,c);return{renderedColumns:g.slice(h,v),firstColumnToRender:h,lastColumnToRender:v,minFirstColumn:s,maxLastColumn:c}},X=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(0,e+1)},K={minHeight:k,maxHeight:k,lineHeight:"".concat(S,"px")};return{renderContext:D,getColumnHeaders:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Y(e);if(null==n)return null;for(var r=n.renderedColumns,i=n.firstColumnToRender,o=[],a=0;a<r.length;a+=1){var s=r[a],c=i+a,u=0===c,d=!(null===b&&null===x),p=null!==b&&b.field===s.field||u&&!d?0:-1,m=null!==_&&_.field===s.field,y=A.open&&A.field===s.field;o.push((0,h.jsx)(pv,(0,v.Z)({},T[s.field],{columnMenuOpen:y,filterItemsCounter:M[s.field]&&M[s.field].length,headerHeight:S,isDragging:s.field===l,column:s,colIndex:c,isResizing:f===s.field,isLastColumn:c===g.length-1,extendRowFullWidth:!E.disableExtendRowFullWidth,hasFocus:m,tabIndex:p},t),s.field))}return(0,h.jsx)(mv,{role:"row","aria-rowindex":C+1,children:o})},getColumnGroupHeaders:function(e){if(0===C)return null;var t=Y(e);if(null==t||0===t.renderedColumns.length)return null;for(var n=t.renderedColumns,r=t.firstColumnToRender,i=t.lastColumnToRender,a=t.maxLastColumn,s=[],l=[],c=function(e){for(var t=[],s=0,c=r-1,u=null==(d=g[r])||null==(f=d.groupPath)?void 0:f[e],h=X(null==(p=g[r])?void 0:p.groupPath,e);null!==u&&c>=o&&null!=(m=g[c])&&m.groupPath&&_t(X(null==(y=g[c])?void 0:y.groupPath,e),h);){var S=g[c];s+=null!=(b=S.computedWidth)?b:0,0===t.length?t.push({width:null!=(x=S.computedWidth)?x:0,fields:[S.field],groupId:u,groupParents:h,colIndex:c}):(t[0].width+=null!=(w=S.computedWidth)?w:0,t[0].fields.push(S.field),t[0].colIndex=c),c-=1}var C=n.reduce((function(t,n,i){var o,a,s,l,c=t[t.length-1];return n.groupPath&&n.groupPath.length>e?c&&c.groupId===n.groupPath[e]?[].concat((0,yt.Z)(t.slice(0,t.length-1)),[(0,v.Z)({},c,{width:c.width+(null!=(s=n.computedWidth)?s:0),fields:[].concat((0,yt.Z)(c.fields),[n.field])})]):[].concat((0,yt.Z)(t),[{groupId:n.groupPath[e],groupParents:X(n.groupPath,e),width:null!=(a=n.computedWidth)?a:0,fields:[n.field],colIndex:r+i}]):c&&null===c.groupId&&_t(X(n.groupPath,e),c.groupParents)?[].concat((0,yt.Z)(t.slice(0,t.length-1)),[(0,v.Z)({},c,{width:c.width+(null!=(l=n.computedWidth)?l:0),fields:[].concat((0,yt.Z)(c.fields),[n.field])})]):[].concat((0,yt.Z)(t),[{groupId:null,groupParents:X(n.groupPath,e),width:null!=(o=n.computedWidth)?o:0,fields:[n.field],colIndex:r+i}])}),t);c=i;for(var A=C[C.length-1].groupId;null!==A&&c<a&&null!=(_=g[c])&&_.groupPath&&(null==(k=g[c])||null==(M=k.groupPath)?void 0:M[e])===A;){var E=g[c];C[C.length-1].width+=null!=(T=E.computedWidth)?T:0,C[C.length-1].fields.push(E.field),c+=1}l.push({leftOverflow:s,elements:(0,yt.Z)(C)})},u=0;u<C;u+=1){var d,f,p,m,y,b,x,w,_,k,M,T;c(u)}return l.forEach((function(e,t){s.push((0,h.jsx)(mv,{style:{height:"".concat(S,"px"),transform:"translateX(-".concat(e.leftOverflow,"px)")},role:"row","aria-rowindex":t+1,children:e.elements.map((function(e,n){var r=e.groupId,i=e.width,o=e.fields,a=e.colIndex;return(0,h.jsx)(hv,{groupId:r,width:i,fields:o,colIndex:a,depth:t,isLastColumn:a===g.length-o.length,extendRowFullWidth:!E.disableExtendRowFullWidth,maxDepth:l.length,height:S},n)}))},t))})),s},isDragging:!!l,getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.Z)({style:K},e)},getInnerProps:function(){return{ref:R,role:"rowgroup"}}}}({innerRef:r}),s=a.isDragging,l=a.getRootProps,c=a.getInnerProps,u=a.getColumnHeaders,d=a.getColumnGroupHeaders;return(0,h.jsxs)(wv,(0,v.Z)({ref:n},l(o),{children:[(0,h.jsx)(yv,{scrollDirection:"left"}),(0,h.jsxs)(Cv,(0,v.Z)({isDragging:s},c(),{children:[d(),u()]})),(0,h.jsx)(yv,{scrollDirection:"right"})]}))})),Tv=e.forwardRef((function(t,n){var r=function(t){if(t.pageSize>100)throw new Error("'props.pageSize' cannot exceed 100 in DataGrid.");var n=(0,xn.Z)({props:t,name:"MuiDataGrid"}),r=e.useMemo((function(){return(0,v.Z)({},Tu,n.localeText)}),[n.localeText]),o=e.useMemo((function(){var e=n.components;if(!e)return(0,v.Z)({},Dg);var t={};return Object.entries(Dg).forEach((function(n){var r=(0,i.Z)(n,2),o=r[0],a=r[1];t[o]=void 0===e[o]?a:e[o]})),t}),[n.components]);return e.useMemo((function(){return(0,v.Z)({},Fg,n,{localeText:r,components:o},Ng)}),[n,r,o])}(t),o=Mu(r);return(0,h.jsx)(vt,{apiRef:o,props:r,children:(0,h.jsx)(Ce,{className:r.className,style:r.style,sx:r.sx,ref:n,children:(0,h.jsxs)(Ze,{children:[(0,h.jsx)(He,{}),(0,h.jsx)(mt,{ColumnHeadersComponent:Mv,VirtualScrollerComponent:Jg}),(0,h.jsx)(gt,{})]})})})})),Av=e.memo(Tv);Tv.propTypes={"aria-label":g().string,"aria-labelledby":g().string,autoHeight:g().bool,autoPageSize:g().bool,cellModesModel:g().object,checkboxSelection:g().bool,classes:g().object,columnBuffer:g().number,columnGroupingModel:g().arrayOf(g().object),columns:(g().array.isRequired,function(){return null}),columnThreshold:g().number,columnTypes:g().object,columnVisibilityModel:g().object,components:g().object,componentsProps:g().object,density:g().oneOf(["comfortable","compact","standard"]),disableColumnFilter:g().bool,disableColumnMenu:g().bool,disableColumnSelector:g().bool,disableDensitySelector:g().bool,disableExtendRowFullWidth:g().bool,disableIgnoreModificationsIfProcessingProps:g().bool,disableSelectionOnClick:g().bool,disableVirtualization:g().bool,editMode:g().oneOf(["cell","row"]),editRowsModel:g().object,error:g().any,experimentalFeatures:g().shape({columnGrouping:g().bool,newEditingApi:g().bool,preventCommitWhileValidating:g().bool,warnIfFocusStateIsNotSynced:g().bool}),filterMode:g().oneOf(["client","server"]),filterModel:g().shape({items:g().arrayOf(g().shape({columnField:g().string.isRequired,id:g().oneOfType([g().number,g().string]),operatorValue:g().string,value:g().any})).isRequired,linkOperator:g().oneOf(["and","or"]),quickFilterLogicOperator:g().oneOf(["and","or"]),quickFilterValues:g().array}),getCellClassName:g().func,getDetailPanelContent:g().func,getEstimatedRowHeight:g().func,getRowClassName:g().func,getRowHeight:g().func,getRowId:g().func,getRowSpacing:g().func,headerHeight:g().number,hideFooter:g().bool,hideFooterPagination:g().bool,hideFooterSelectedRowCount:g().bool,initialState:g().object,isCellEditable:g().func,isRowSelectable:g().func,keepNonExistentRowsSelected:g().bool,loading:g().bool,localeText:g().object,logger:g().shape({debug:g().func.isRequired,error:g().func.isRequired,info:g().func.isRequired,warn:g().func.isRequired}),logLevel:g().oneOf(["debug","error","info","warn",!1]),nonce:g().string,onCellClick:g().func,onCellDoubleClick:g().func,onCellEditCommit:g().func,onCellEditStart:g().func,onCellEditStop:g().func,onCellFocusOut:g().func,onCellKeyDown:g().func,onCellModesModelChange:g().func,onColumnHeaderClick:g().func,onColumnHeaderDoubleClick:g().func,onColumnHeaderEnter:g().func,onColumnHeaderLeave:g().func,onColumnHeaderOut:g().func,onColumnHeaderOver:g().func,onColumnOrderChange:g().func,onColumnVisibilityChange:g().func,onColumnVisibilityModelChange:g().func,onEditCellPropsChange:g().func,onEditRowsModelChange:g().func,onError:g().func,onFilterModelChange:g().func,onMenuClose:g().func,onMenuOpen:g().func,onPageChange:g().func,onPageSizeChange:g().func,onPreferencePanelClose:g().func,onPreferencePanelOpen:g().func,onProcessRowUpdateError:g().func,onResize:g().func,onRowClick:g().func,onRowDoubleClick:g().func,onRowEditCommit:g().func,onRowEditStart:g().func,onRowEditStop:g().func,onRowModesModelChange:g().func,onSelectionModelChange:g().func,onSortModelChange:g().func,onStateChange:g().func,page:g().number,pageSize:(g().number,function(){return null}),pagination:function(e){return!1===e.pagination?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join("\n")):null},paginationMode:g().oneOf(["client","server"]),processRowUpdate:g().func,rowBuffer:g().number,rowCount:g().number,rowHeight:g().number,rowModesModel:g().object,rows:g().arrayOf(g().object).isRequired,rowSpacingType:g().oneOf(["border","margin"]),rowsPerPageOptions:g().arrayOf(g().number),rowThreshold:g().number,scrollbarSize:g().number,selectionModel:(g().oneOfType([g().number,g().string,g().array]),function(){return null}),showCellRightBorder:g().bool,showColumnRightBorder:g().bool,sortingMode:g().oneOf(["client","server"]),sortingOrder:g().arrayOf(g().oneOf(["asc","desc"])),sortModel:g().arrayOf(g().shape({field:g().string.isRequired,sort:g().oneOf(["asc","desc"])})),sx:g().oneOfType([g().arrayOf(g().oneOfType([g().func,g().object,g().bool])),g().func,g().object])};var Ev=n(8339),Pv=n(3649),Rv=n(9028),Ov=["className","component"];var Iv=n(1271),Lv=n(8658),Dv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.defaultTheme,r=t.defaultClassName,i=void 0===r?"MuiBox-root":r,o=t.generateClassName,a=(0,Ev.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(Pv.Z),s=e.forwardRef((function(e,t){var r=(0,qs.Z)(n),s=(0,Rv.Z)(e),l=s.className,c=s.component,u=void 0===c?"div":c,d=(0,y.Z)(s,Ov);return(0,h.jsx)(a,(0,v.Z)({as:u,ref:t,className:(0,b.Z)(l,o?o(i):i),theme:r},d))}));return s}({defaultTheme:(0,Lv.Z)(),defaultClassName:"MuiBox-root",generateClassName:Iv.Z.generate}),Nv=Dv,Fv=["className","children"],zv=(0,C.ZP)("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:function(e,t){return t.toolbarContainer}})((function(e){return{display:"flex",alignItems:"center",flexWrap:"wrap",padding:e.theme.spacing(.5,.5,0)}})),Bv=e.forwardRef((function(e,t){var n=e.className,r=e.children,i=(0,y.Z)(e,Fv),o=function(e){var t=e.classes;return(0,S.Z)({root:["toolbarContainer"]},A,t)}({classes:ne().classes});return r?(0,h.jsx)(zv,(0,v.Z)({ref:t,className:(0,b.Z)(n,o.root)},i,{children:r})):null})),jv=["onClick"],Zv=e.forwardRef((function(e,t){var n,r=e.onClick,i=(0,y.Z)(e,jv),o=ee(),a=ne(),s=J(o,qc),l=s.open,c=s.openedPanelValue;return a.disableColumnSelector?null:(0,h.jsx)(a.components.BaseButton,(0,v.Z)({ref:t,size:"small","aria-label":o.current.getLocaleText("toolbarColumnsLabel"),startIcon:(0,h.jsx)(a.components.ColumnSelectorIcon,{})},i,{onClick:function(e){l&&c===gl.columns?o.current.hidePreferences():o.current.showPreferences(gl.columns),null==r||r(e)}},null==(n=a.componentsProps)?void 0:n.baseButton,{children:o.current.getLocaleText("toolbarColumns")}))})),Hv=["className"],Uv=(0,C.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),Vv=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiListItemIcon"}),i=r.className,o=(0,y.Z)(r,Hv),a=e.useContext(ar.Z),s=(0,v.Z)({},r,{alignItems:a.alignItems}),l=function(e){var t=e.alignItems,n=e.classes,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,S.Z)(r,cr,n)}(s);return(0,h.jsx)(Uv,(0,v.Z)({className:(0,b.Z)(l.root,i),ownerState:s,ref:n},o))})),Gv=["onClick"],Wv=e.forwardRef((function(t,n){var r,o=t.onClick,a=(0,y.Z)(t,Gv),s=ee(),l=ne(),c=J(s,ie),u=(0,or.Z)(),d=(0,or.Z)(),f=e.useState(!1),p=(0,i.Z)(f,2),m=p[0],g=p[1],b=e.useRef(null),x=(0,w.Z)(n,b),_=[{icon:(0,h.jsx)(l.components.DensityCompactIcon,{}),label:s.current.getLocaleText("toolbarDensityCompact"),value:_l.Compact},{icon:(0,h.jsx)(l.components.DensityStandardIcon,{}),label:s.current.getLocaleText("toolbarDensityStandard"),value:_l.Standard},{icon:(0,h.jsx)(l.components.DensityComfortableIcon,{}),label:s.current.getLocaleText("toolbarDensityComfortable"),value:_l.Comfortable}],S=e.useMemo((function(){switch(c){case _l.Compact:return(0,h.jsx)(l.components.DensityCompactIcon,{});case _l.Comfortable:return(0,h.jsx)(l.components.DensityComfortableIcon,{});default:return(0,h.jsx)(l.components.DensityStandardIcon,{})}}),[c,l]);if(l.disableDensitySelector)return null;var C=_.map((function(e,t){return(0,h.jsxs)(gr,{onClick:function(){return t=e.value,s.current.setDensity(t),void g(!1);var t},selected:e.value===c,children:[(0,h.jsx)(Vv,{children:e.icon}),e.label]},t)}));return(0,h.jsxs)(e.Fragment,{children:[(0,h.jsx)(l.components.BaseButton,(0,v.Z)({ref:x,size:"small",startIcon:S,"aria-label":s.current.getLocaleText("toolbarDensityLabel"),"aria-expanded":m?"true":void 0,"aria-haspopup":"menu","aria-controls":d,id:u},a,{onClick:function(e){g((function(e){return!e})),null==o||o(e)}},null==(r=l.componentsProps)?void 0:r.baseButton,{children:s.current.getLocaleText("toolbarDensity")})),(0,h.jsx)(sl,{open:m,target:b.current,onClickAway:function(e){var t;b.current===e.target||null!=(t=b.current)&&t.contains(e.target)||g(!1)},position:"bottom-start",children:(0,h.jsx)(Ls,{id:d,className:E.menuList,"aria-labelledby":u,onKeyDown:function(e){Xa(e.key)&&e.preventDefault(),cs(e.key)&&g(!1)},autoFocusItem:m,children:C})})]})})),$v=["componentsProps"],qv=(0,C.ZP)("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:function(e,t){return t.toolbarFilterList}})((function(e){var t=e.theme;return{margin:t.spacing(1,1,.5),padding:t.spacing(0,1)}})),Yv=e.forwardRef((function(t,n){var r,i,o=t.componentsProps,a=void 0===o?{}:o,s=(0,y.Z)(t,$v),l=a.button||{},c=ee(),u=ne(),d=J(c,dt),f=J(c,U),p=J(c,qc),m=function(e){var t=e.classes;return(0,S.Z)({root:["toolbarFilterList"]},A,t)}({classes:u.classes}),g=e.useMemo((function(){if(p.open)return c.current.getLocaleText("toolbarFiltersTooltipHide");if(0===d.length)return c.current.getLocaleText("toolbarFiltersTooltipShow");var e=function(e){return f[e.columnField].filterOperators.find((function(t){return t.value===e.operatorValue})).label||c.current.getLocaleText("filterOperator".concat((0,x.Z)(e.operatorValue))).toString()};return(0,h.jsxs)("div",{children:[c.current.getLocaleText("toolbarFiltersTooltipActive")(d.length),(0,h.jsx)(qv,{className:m.root,children:d.map((function(t,n){var r;return(0,v.Z)({},f[t.columnField]&&(0,h.jsx)("li",{children:"".concat(f[t.columnField].headerName||t.columnField,"\n                  ").concat(e(t),"\n                  ").concat(null!=(r=t.value)?r:"")},n))}))})]})}),[c,p.open,d,f,m]);return u.disableColumnFilter?null:(0,h.jsx)(u.components.BaseTooltip,(0,v.Z)({title:g,enterDelay:1e3},s,null==(r=u.componentsProps)?void 0:r.baseTooltip,{children:(0,h.jsx)(u.components.BaseButton,(0,v.Z)({ref:n,size:"small","aria-label":c.current.getLocaleText("toolbarFiltersLabel"),startIcon:(0,h.jsx)(ch,{badgeContent:d.length,color:"primary",children:(0,h.jsx)(u.components.OpenFilterButtonIcon,{})})},l,{onClick:function(e){var t,n=p.open,r=p.openedPanelValue;n&&r===gl.filters?c.current.hideFilterPanel():c.current.showFilterPanel(),null==(t=l.onClick)||t.call(l,e)}},null==(i=u.componentsProps)?void 0:i.baseButton,{children:c.current.getLocaleText("toolbarFilters")}))}))})),Xv=["quickFilterParser","quickFilterFormatter","debounceMs"],Kv=(0,C.ZP)(cp,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:function(e,t){return t.toolbarQuickFilter}})((function(e){var t,n=e.theme;return t={width:"auto",paddingBottom:n.spacing(.5),"& input":{marginLeft:n.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:"1px solid ".concat(n.palette.divider)}},(0,o.Z)(t,"& input[type=search]::-ms-clear,\n& input[type=search]::-ms-reveal",{display:"none",width:0,height:0}),(0,o.Z)(t,'& input[type="search"]::-webkit-search-decoration,\n  & input[type="search"]::-webkit-search-cancel-button,\n  & input[type="search"]::-webkit-search-results-button,\n  & input[type="search"]::-webkit-search-results-decoration',{display:"none"}),t})),Jv=function(e){return e.split(" ").filter((function(e){return""!==e}))},Qv=function(e){return e.join(" ")};function ey(t){var n,r=t.quickFilterParser,o=void 0===r?Jv:r,a=t.quickFilterFormatter,s=void 0===a?Qv:a,l=t.debounceMs,c=void 0===l?500:l,u=(0,y.Z)(t,Xv),d=ee(),f=ne(),p=J(d,tt),m=e.useState((function(){return s(null!=p?p:[])})),g=(0,i.Z)(m,2),b=g[0],x=g[1],w=e.useState(p),_=(0,i.Z)(w,2),S=_[0],C=_[1];e.useEffect((function(){_t(S,p)||(C(p),x((function(e){return _t(o(e),p)?e:s(null!=p?p:[])})))}),[S,p,s,o]);var k=e.useCallback((function(e){d.current.setQuickFilterValues(o(e))}),[d,o]),M=e.useMemo((function(){return(0,Cu.Z)(k,c)}),[k,c]),T=e.useCallback((function(e){var t=e.target.value;x(t),M(t)}),[M]),A=e.useCallback((function(){x(""),k("")}),[k]);return(0,h.jsx)(Kv,(0,v.Z)({as:f.components.BaseTextField,variant:"standard",value:b,onChange:T,placeholder:d.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":d.current.getLocaleText("toolbarQuickFilterLabel"),type:"search",InputProps:{startAdornment:(0,h.jsx)(f.components.QuickFilterIcon,{fontSize:"small"}),endAdornment:(0,h.jsx)(Ho,{"aria-label":d.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:b?"visible":"hidden"},onClick:A,children:(0,h.jsx)(f.components.QuickFilterClearIcon,{fontSize:"small"})})}},u,null==(n=f.componentsProps)?void 0:n.baseTextField))}var ty=["className","csvOptions","printOptions","excelOptions","showQuickFilter","quickFilterProps"],ny=e.forwardRef((function(e,t){var n=e.csvOptions,r=e.printOptions,i=e.excelOptions,o=e.showQuickFilter,a=void 0!==o&&o,s=e.quickFilterProps,l=void 0===s?{}:s,c=(0,y.Z)(e,ty),u=ne();return u.disableColumnFilter&&u.disableColumnSelector&&u.disableDensitySelector&&!a?null:(0,h.jsxs)(Bv,(0,v.Z)({ref:t},c,{children:[(0,h.jsx)(Zv,{}),(0,h.jsx)(Yv,{}),(0,h.jsx)(Wv,{}),(0,h.jsx)(pc,{csvOptions:n,printOptions:r,excelOptions:i}),(0,h.jsx)(Nv,{sx:{flex:1}}),a&&(0,h.jsx)(ey,(0,v.Z)({},l))]}))}));function ry(e,t,n){return ry=De()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,Oe.Z)(i,n.prototype),i},ry.apply(null,arguments)}function iy(e){var t="function"===typeof Map?new Map:void 0;return iy=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ry(e,arguments,Le(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,Oe.Z)(n,e)},iy(e)}var oy,ay=n(3878),sy=n(9199),ly=n(181),cy=n(5267);function uy(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,ly.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dy.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(oy||(oy={}));var fy,py="popstate";function hy(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function my(e){return{usr:e.state,key:e.key}}function gy(e,t,n,r){return void 0===n&&(n=null),dy({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?yy(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function vy(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function yy(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function by(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,n="string"===typeof e?e:vy(e);return hy(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function xy(e,t,n,r){void 0===r&&(r={});var i=r,o=i.window,a=void 0===o?document.defaultView:o,s=i.v5Compat,l=void 0!==s&&s,c=a.history,u=oy.Pop,d=null;function f(){u=oy.Pop,d&&d({action:u,location:p.location})}var p={get action(){return u},get location(){return e(a,c)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(py,f),d=e,function(){a.removeEventListener(py,f),d=null}},createHref:function(e){return t(a,e)},encodeLocation:function(e){var t=by("string"===typeof e?e:vy(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u=oy.Push;var r=gy(p.location,e,t);n&&n(r,e);var i=my(r),o=p.createHref(r);try{c.pushState(i,"",o)}catch(s){a.location.assign(o)}l&&d&&d({action:u,location:p.location})},replace:function(e,t){u=oy.Replace;var r=gy(p.location,e,t);n&&n(r,e);var i=my(r),o=p.createHref(r);c.replaceState(i,"",o),l&&d&&d({action:u,location:p.location})},go:function(e){return c.go(e)}};return p}function wy(e,t,n){void 0===n&&(n="/");var r=Py(("string"===typeof t?yy(t):t).pathname||"/",n);if(null==r)return null;var i=_y(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=Ty(i[a],Ey(r));return o}function _y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,o){var a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(hy(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var s=Dy([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(hy(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),_y(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:My(s,e.index),routesMeta:l})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,o=uy(Sy(e.path));try{for(o.s();!(r=o.n()).done;){var a=r.value;i(e,t,a)}}catch(s){o.e(s)}finally{o.f()}}else i(e,t)})),t}function Sy(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,ay.Z)(n)||(0,sy.Z)(n)||(0,ly.Z)(n)||(0,cy.Z)()),i=r[0],o=r.slice(1),a=i.endsWith("?"),s=i.replace(/\?$/,"");if(0===o.length)return a?[s,""]:[s];var l=Sy(o.join("/")),c=[];return c.push.apply(c,(0,yt.Z)(l.map((function(e){return""===e?s:[s,e].join("/")})))),a&&c.push.apply(c,(0,yt.Z)(l)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(fy||(fy={}));var Cy=/^:\w+$/,ky=function(e){return"*"===e};function My(e,t){var n=e.split("/"),r=n.length;return n.some(ky)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!ky(e)})).reduce((function(e,t){return e+(Cy.test(t)?3:""===t?1:10)}),r)}function Ty(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],l=a===n.length-1,c="/"===i?t:t.slice(i.length)||"/",u=Ay({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);var d=s.route;o.push({params:r,pathname:Dy([i,u.pathname]),pathnameBase:Ny(Dy([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=Dy([i,u.pathnameBase]))}return o}function Ay(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Ry("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),r=(0,i.Z)(n,2),o=r[0],a=r[1],s=t.match(o);if(!s)return null;var l=s[0],c=l.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=u[n]||"";c=l.slice(0,l.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Ry(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(u[n]||"",t),e}),{}),pathname:l,pathnameBase:c,pattern:e}}function Ey(e){try{return decodeURI(e)}catch(t){return Ry(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Py(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ry(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ab){}}}function Oy(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Iy(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Ly(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=yy(e):(hy(!(i=dy({},e)).pathname||!i.pathname.includes("?"),Oy("?","pathname","search",i)),hy(!i.pathname||!i.pathname.includes("#"),Oy("#","pathname","hash",i)),hy(!i.search||!i.search.includes("#"),Oy("#","search","hash",i)));var o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{var l=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),l-=1;i.pathname=c.join("/")}o=l>=0?t[l]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?yy(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,l=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:l,search:Fy(o),hash:zy(s)}}(i,o),d=s&&"/"!==s&&s.endsWith("/"),f=(a||"."===s)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!f||(u.pathname+="/"),u}var Dy=function(e){return e.join("/").replace(/\/\/+/g,"/")},Ny=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Fy=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},zy=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},By=function(e){Ie(n,e);var t=Be(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Re(n)}(iy(Error));var jy=Re((function e(t,n,r,i){Ae(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function Zy(e){return e instanceof jy}var Hy=["post","put","patch","delete"],Uy=(new Set(Hy),["get"].concat(Hy));new Set(Uy),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vy.apply(this,arguments)}var Gy="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Wy=e.useState,$y=e.useEffect,qy=e.useLayoutEffect,Yy=e.useDebugValue;function Xy(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Gy(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var Ky=e.createContext(null);var Jy=e.createContext(null);var Qy=e.createContext(null);var eb=e.createContext(null);var tb=e.createContext(null);var nb=e.createContext({outlet:null,matches:[]});var rb=e.createContext(null);function ib(){return null!=e.useContext(tb)}function ob(){return ib()||hy(!1),e.useContext(tb).location}function ab(){ib()||hy(!1);var t=e.useContext(eb),n=t.basename,r=t.navigator,i=e.useContext(nb).matches,o=ob().pathname,a=JSON.stringify(Iy(i).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);return e.useEffect((function(){s.current=!0})),e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=Ly(e,JSON.parse(a),o,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:Dy([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,a,o])}function sb(){var t=function(){var t,n=e.useContext(rb),r=pb(cb.UseRouteError),i=hb(cb.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=Zy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unhandled Thrown Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:o},r):null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",e.createElement("code",{style:a},"errorElement")," props on\xa0",e.createElement("code",{style:a},"<Route>")))}var lb,cb,ub=function(t){Ie(r,t);var n=Be(r);function r(e){var t;return Ae(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return Re(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(nb.Provider,{value:this.props.routeContext},e.createElement(rb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function db(t){var n=t.routeContext,r=t.match,i=t.children,o=e.useContext(Ky);return o&&o.static&&o.staticContext&&r.route.errorElement&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(nb.Provider,{value:n},i)}function fb(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var i=t,o=null==r?void 0:r.errors;if(null!=o){var a=i.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));a>=0||hy(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((function(t,a,s){var l=a.route.id?null==o?void 0:o[a.route.id]:null,c=r?a.route.errorElement||e.createElement(sb,null):null,u=n.concat(i.slice(0,s+1)),d=function(){return e.createElement(db,{match:a,routeContext:{outlet:t,matches:u}},l?c:void 0!==a.route.element?a.route.element:t)};return r&&(a.route.errorElement||0===s)?e.createElement(ub,{location:r.location,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u}}):d()}),null)}function pb(t){var n=e.useContext(Jy);return n||hy(!1),n}function hb(t){var n=function(t){var n=e.useContext(nb);return n||hy(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||hy(!1),r.route.id}!function(e){e.UseRevalidator="useRevalidator"}(lb||(lb={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(cb||(cb={}));var mb;function gb(e){hy(!1)}function vb(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,o=void 0===i?null:i,a=t.location,s=t.navigationType,l=void 0===s?oy.Pop:s,c=t.navigator,u=t.static,d=void 0!==u&&u;ib()&&hy(!1);var f=r.replace(/^\/*/,"/"),p=e.useMemo((function(){return{basename:f,navigator:c,static:d}}),[f,c,d]);"string"===typeof a&&(a=yy(a));var h=a,m=h.pathname,g=void 0===m?"/":m,v=h.search,y=void 0===v?"":v,b=h.hash,x=void 0===b?"":b,w=h.state,_=void 0===w?null:w,S=h.key,C=void 0===S?"default":S,k=e.useMemo((function(){var e=Py(g,f);return null==e?null:{pathname:e,search:y,hash:x,state:_,key:C}}),[f,g,y,x,_,C]);return null==k?null:e.createElement(eb.Provider,{value:p},e.createElement(tb.Provider,{children:o,value:{location:k,navigationType:l}}))}function yb(t){var n=t.children,r=t.location,i=e.useContext(Ky);return function(t,n){ib()||hy(!1);var r,i=e.useContext(eb).navigator,o=e.useContext(Jy),a=e.useContext(nb).matches,s=a[a.length-1],l=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),u=(s&&s.route,ob());if(n){var d,f="string"===typeof n?yy(n):n;"/"===c||(null==(d=f.pathname)?void 0:d.startsWith(c))||hy(!1),r=f}else r=u;var p=r.pathname||"/",h=wy(t,{pathname:"/"===c?p:p.slice(c.length)||"/"}),m=fb(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Dy([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Dy([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,o||void 0);return n&&m?e.createElement(tb.Provider,{value:{location:Vy({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:oy.Pop}},m):m}(i&&!n?i.router.routes:xb(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(mb||(mb={}));var bb=new Promise((function(){}));e.Component;function xb(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==gb&&hy(!1),t.props.index&&t.props.children&&hy(!1);var o=[].concat((0,yt.Z)(n),[i]),a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(a.children=xb(t.props.children,o)),r.push(a)}else r.push.apply(r,xb(t.props.children,n))})),r}var wb=(0,C.ZP)("a")({textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",textDecoration:"underline"});function _b(e){var t=ab();if(null==e.value)return"";var n=e.value.split("@"),r=(0,i.Z)(n,2),o=r[0],a=r[1];return(0,h.jsx)(wb,{onClick:function(e){o.startsWith("http")?window.open(o,"_blank","noreferrer"):t(o)},children:a})}var Sb=.2,Cb=(0,C.ZP)(Av)((function(e){var t=e.theme;return(0,o.Z)({},"& .".concat(E.row,".even"),{backgroundColor:t.palette.grey[200],"&:hover, &.Mui-hovered":{backgroundColor:(0,k.Fq)(t.palette.primary.main,Sb),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,k.Fq)(t.palette.primary.main,Sb+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,k.Fq)(t.palette.primary.main,Sb+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,k.Fq)(t.palette.primary.main,Sb+t.palette.action.selectedOpacity)}}}})}));var kb=function(e){var t=e.columns,n=e.rows,r=t.map((function(e){return e.startsWith("l:")?{headerName:e.substring(2),field:e,flex:1,minWidth:80,renderCell:_b}:{headerName:e,field:e,flex:1,headerClassName:"b",minWidth:80}})),i=n.map((function(e,n){var r={id:n+1};return t.map((function(t,n){return r[t]=e[n]})),r}));return(0,h.jsx)(Cb,{rows:i,columns:r,density:"compact",autoHeight:!0,components:{Toolbar:ny},componentsProps:{toolbar:{showQuickFilter:!0,quickFilterProps:{debounceMs:500}}},getRowClassName:function(e){return e.indexRelativeToCurrentPage%2===0?"even":"odd"},sx:{".MuiDataGrid-columnHeaderTitle":{typography:"subtitle1"}}})},Mb=n(1541);var Tb=function(t){var n=t.path,r=t.height,o=void 0===r?"400px":r,a=t.name,s=(0,e.useMemo)((function(){return[{type:"cartoon",params:{colorScheme:"sstruc",smoothSheet:!0}}]}),[]),l=(0,e.useState)(),c=(0,i.Z)(l,2),u=c[0],d=c[1],f=function(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout((function(){return e.apply(r,i)}),t)}}((function(e){d(e)}),300);return(0,h.jsx)(Fo,{elevation:1,children:(0,h.jsxs)(Nv,{textAlign:"center",children:[a&&(0,h.jsx)(ag.Z,{variant:"subtitle1",children:a}),(0,h.jsx)(Mb.Stage,{height:o,params:{backgroundColor:"white"},cameraState:u,onCameraMove:f,children:(0,h.jsx)(Mb.Component,{path:n,reprList:s,onLoad:function(){null==u&&setTimeout((function(){return d({})}),200)}})}),(0,h.jsx)(yp.Z,{variant:"outlined",sx:{mb:1},onClick:function(){d({})},children:"Reset Camera"})]})})};function Ab(){return(Ab=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Eb=["children","options"],Pb=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{for:"htmlFor"}),Rb={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"\xa0",quot:"\u201c"},Ob=["style","script"],Ib=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,Lb=/mailto:/i,Db=/\n{2,}$/,Nb=/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/,Fb=/^ *> ?/gm,zb=/^ {2,}\n/,Bb=/^(?:( *[-*_]) *){3,}(?:\n *)+\n/,jb=/^\s*(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n *)+\n?/,Zb=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,Hb=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,Ub=/^(?:\n *)*\n/,Vb=/\r\n?/g,Gb=/^\[\^([^\]]+)](:.*)\n/,Wb=/^\[\^([^\]]+)]/,$b=/\f/g,qb=/^\s*?\[(x|\s)\]/,Yb=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Xb=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,Kb=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?([^>]*)\/{0}>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1)[\s\S])*?)<\/\1>\n*/i,Jb=/&([a-z]+);/g,Qb=/^<!--[\s\S]*?(?:-->)/,ex=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,tx=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,nx=/^\{.*\}$/,rx=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,ix=/^<([^ >]+@[^ >]+)>/,ox=/^<([^ >]+:\/[^ >]+)>/,ax=/ *\n+$/,sx=/(?:^|\n)( *)$/,lx=/-([a-z])?/gi,cx=/^(.*\|?.*)\n *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*)\n?/,ux=/^\[([^\]]*)\]:\s+(\S+)\s*("([^"]*)")?/,dx=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,fx=/^\[([^\]]*)\] ?\[([^\]]*)\]/,px=/(\[|\])/g,hx=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,mx=/\t/g,gx=/^ *\| */,vx=/(^ *\||\| *$)/g,yx=/ *$/,bx=/^ *:-+: *$/,xx=/^ *:-+ *$/,wx=/^ *-+: *$/,_x=/^([*_])\1((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1\1(?!\1)/,Sx=/^([*_])((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1(?!\1|\w)/,Cx=/^~~((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)~~/,kx=/^\\([^0-9A-Za-z\s])/,Mx=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,Tx=/^\n+/,Ax=/^([ \t]*)/,Ex=/\\([^0-9A-Z\s])/gi,Px=new RegExp("^( *)((?:[*+-]|\\d+\\.)) +"),Rx=new RegExp("^( *)((?:[*+-]|\\d+\\.)) +[^\\n]*(?:\\n(?!\\1(?:[*+-]|\\d+\\.) )[^\\n]*)*(\\n|$)","gm"),Ox=new RegExp("^( *)((?:[*+-]|\\d+\\.)) [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1(?:[*+-]|\\d+\\.) (?!(?:[*+-]|\\d+\\.) ))\\n*|\\s*\\n*$)"),Ix="(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",Lx=new RegExp("^\\[("+Ix+")\\]\\(\\s*<?((?:[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),Dx=new RegExp("^!\\[("+Ix+")\\]\\(\\s*<?((?:[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),Nx=[Nb,Zb,jb,Yb,Xb,Qb,Rx,Ox,cx],Fx=[].concat(Nx,[/^[^\n]+(?:  \n|\n{2,})/,Kb,tx]);function zx(e){return e.replace(/[\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xc6]/g,"a").replace(/[\xe7\xc7]/g,"c").replace(/[\xf0\xd0]/g,"d").replace(/[\xc8\xc9\xca\xcb\xe9\xe8\xea\xeb]/g,"e").replace(/[\xcf\xef\xce\xee\xcd\xed\xcc\xec]/g,"i").replace(/[\xd1\xf1]/g,"n").replace(/[\xf8\xd8\u0153\u0152\xd5\xf5\xd4\xf4\xd3\xf3\xd2\xf2]/g,"o").replace(/[\xdc\xfc\xdb\xfb\xda\xfa\xd9\xf9]/g,"u").replace(/[\u0178\xff\xdd\xfd]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Bx(e){return wx.test(e)?"right":bx.test(e)?"center":xx.test(e)?"left":null}function jx(e,t,n){var r=n.t;n.t=!0;var i=t(e.trim(),n);n.t=r;var o=[[]];return i.forEach((function(e,t){"tableSeparator"===e.type?0!==t&&t!==i.length-1&&o.push([]):("text"!==e.type||null!=i[t+1]&&"tableSeparator"!==i[t+1].type||(e.content=e.content.replace(yx,"")),o[o.length-1].push(e))})),o}function Zx(e,t,n){n.o=!0;var r=jx(e[1],t,n),i=e[2].replace(vx,"").split("|").map(Bx),o=function(e,t,n){return e.trim().split("\n").map((function(e){return jx(e,t,n)}))}(e[3],t,n);return n.o=!1,{align:i,cells:o,header:r,type:"table"}}function Hx(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function Ux(e){return function(t,n){return n.o?e.exec(t):null}}function Vx(e){return function(t,n){return n.o||n.u?e.exec(t):null}}function Gx(e){return function(t,n){return n.o||n.u?null:e.exec(t)}}function Wx(e){return function(t){return e.exec(t)}}function $x(e,t,n){if(t.o||t.u)return null;if(n&&!n.endsWith("\n"))return null;var r="";e.split("\n").every((function(e){return!Nx.some((function(t){return t.test(e)}))&&(r+=e+"\n",e.trim())}));var i=r.trimEnd();return""==i?null:[r,i]}function qx(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data):/i))return null}catch(e){return null}return e}function Yx(e){return e.replace(Ex,"$1")}function Xx(e,t,n){var r=n.o||!1,i=n.u||!1;n.o=!0,n.u=!0;var o=e(t,n);return n.o=r,n.u=i,o}function Kx(e,t,n){var r=n.o||!1,i=n.u||!1;n.o=!1,n.u=!0;var o=e(t,n);return n.o=r,n.u=i,o}function Jx(e,t,n){return n.o=!1,e(t+"\n\n",n)}var Qx,ew=function(e,t,n){return{content:Xx(t,e[1],n)}};function tw(){return{}}function nw(){return null}function rw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function iw(e,t,n){for(var r=e,i=t.split(".");i.length&&void 0!==(r=r[i[0]]);)i.shift();return r||n}function ow(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.overrides=n.overrides||{},n.slugify=n.slugify||zx,n.namedCodesToUnicode=n.namedCodesToUnicode?Ab({},Rb,n.namedCodesToUnicode):Rb;var r=n.createElement||e.createElement;function o(e,t){for(var i=iw(n.overrides,"".concat(e,".props"),{}),o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return r.apply(void 0,[function(e,t){var n=iw(t,e);return n?"function"==typeof n||"object"==typeof n&&"render"in n?n:iw(t,"".concat(e,".component"),e):e}(e,n.overrides),Ab({},t,i,{className:rw(null==t?void 0:t.className,i.className)||void 0})].concat(a))}function a(t){var r=!1;n.forceInline?r=!0:n.forceBlock||(r=!1===hx.test(t));for(var i=p(f(r?t:"".concat(t.trimEnd().replace(Tx,""),"\n\n"),{o:r}));"string"==typeof i[i.length-1]&&!i[i.length-1].trim();)i.pop();if(null===n.wrapper)return i;var a,s=n.wrapper||(r?"span":"div");if(i.length>1||n.forceWrapper)a=i;else{if(1===i.length)return"string"==typeof(a=i[0])?o("span",{key:"outer"},a):a;a=null}return e.createElement(s,{key:"outer"},a)}function s(t){var n=t.match(Ib);return n?n.reduce((function(t,n,r){var i=n.indexOf("=");if(-1!==i){var o=function(e){return-1!==e.indexOf("-")&&null===e.match(ex)&&(e=e.replace(lx,(function(e,t){return t.toUpperCase()}))),e}(n.slice(0,i)).trim(),s=function(e){var t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(n.slice(i+1).trim()),l=Pb[o]||o,c=t[l]=function(e,t){return"style"===e?t.split(/;\s?/).reduce((function(e,t){var n=t.slice(0,t.indexOf(":"));return e[n.replace(/(-[a-z])/g,(function(e){return e[1].toUpperCase()}))]=t.slice(n.length+1).trim(),e}),{}):"href"===e?qx(t):(t.match(nx)&&(t=t.slice(1,t.length-1)),"true"===t||"false"!==t&&t)}(o,s);"string"==typeof c&&(Kb.test(c)||tx.test(c))&&(t[l]=e.cloneElement(a(c.trim()),{key:r}))}else"style"!==n&&(t[Pb[n]||n]=!0);return t}),{}):void 0}var l=[],c={},u={blockQuote:{i:Gx(Nb),l:Qx.HIGH,_:function(e,t,n){return{content:t(e[0].replace(Fb,""),n)}},p:function(e,t,n){return o("blockquote",{key:n.g},t(e.content,n))}},breakLine:{i:Wx(zb),l:Qx.HIGH,_:tw,p:function(e,t,n){return o("br",{key:n.g})}},breakThematic:{i:Gx(Bb),l:Qx.HIGH,_:tw,p:function(e,t,n){return o("hr",{key:n.g})}},codeBlock:{i:Gx(Zb),l:Qx.MAX,_:function(e){return{content:e[0].replace(/^ {4}/gm,"").replace(/\n+$/,""),lang:void 0}},p:function(e,t,n){return o("pre",{key:n.g},o("code",{className:e.lang?"lang-".concat(e.lang):""},e.content))}},codeFenced:{i:Gx(jb),l:Qx.MAX,_:function(e){return{content:e[3],lang:e[2]||void 0,type:"codeBlock"}}},codeInline:{i:Vx(Hb),l:Qx.LOW,_:function(e){return{content:e[2]}},p:function(e,t,n){return o("code",{key:n.g},e.content)}},footnote:{i:Gx(Gb),l:Qx.MAX,_:function(e){return l.push({footnote:e[2],identifier:e[1]}),{}},p:nw},footnoteReference:{i:Ux(Wb),l:Qx.HIGH,_:function(e){return{content:e[1],target:"#".concat(n.slugify(e[1]))}},p:function(e,t,n){return o("a",{key:n.g,href:qx(e.target)},o("sup",{key:n.g},e.content))}},gfmTask:{i:Ux(qb),l:Qx.HIGH,_:function(e){return{completed:"x"===e[1].toLowerCase()}},p:function(e,t,n){return o("input",{checked:e.completed,key:n.g,readOnly:!0,type:"checkbox"})}},heading:{i:Gx(Yb),l:Qx.HIGH,_:function(e,t,r){return{content:Xx(t,e[2],r),id:n.slugify(e[2]),level:e[1].length}},p:function(e,t,n){return e.tag="h".concat(e.level),o(e.tag,{id:e.id,key:n.g},t(e.content,n))}},headingSetext:{i:Gx(Xb),l:Qx.MAX,_:function(e,t,n){return{content:Xx(t,e[1],n),level:"="===e[2]?1:2,type:"heading"}}},htmlComment:{i:Wx(Qb),l:Qx.HIGH,_:function(){return{}},p:nw},image:{i:Vx(Dx),l:Qx.HIGH,_:function(e){return{alt:e[1],target:Yx(e[2]),title:e[3]}},p:function(e,t,n){return o("img",{key:n.g,alt:e.alt||void 0,title:e.title||void 0,src:qx(e.target)})}},link:{i:Ux(Lx),l:Qx.LOW,_:function(e,t,n){return{content:Kx(t,e[1],n),target:Yx(e[2]),title:e[3]}},p:function(e,t,n){return o("a",{key:n.g,href:qx(e.target),title:e.title},t(e.content,n))}},linkAngleBraceStyleDetector:{i:Ux(ox),l:Qx.MAX,_:function(e){return{content:[{content:e[1],type:"text"}],target:e[1],type:"link"}}},linkBareUrlDetector:{i:function(e,t){return t.m?null:Ux(rx)(e,t)},l:Qx.MAX,_:function(e){return{content:[{content:e[1],type:"text"}],target:e[1],title:void 0,type:"link"}}},linkMailtoDetector:{i:Ux(ix),l:Qx.MAX,_:function(e){var t=e[1],n=e[1];return Lb.test(n)||(n="mailto:"+n),{content:[{content:t.replace("mailto:",""),type:"text"}],target:n,type:"link"}}},list:{i:function(e,t,n){var r=sx.exec(n);return!r||!t.h&&t.o?null:Ox.exec(e=r[1]+e)},l:Qx.HIGH,_:function(e,t,n){var r=e[2],i=r.length>1,o=i?+r:void 0,a=e[0].replace(Db,"\n").match(Rx),s=!1;return{items:a.map((function(e,r){var i=Px.exec(e)[0].length,o=new RegExp("^ {1,"+i+"}","gm"),l=e.replace(o,"").replace(Px,""),c=r===a.length-1,u=-1!==l.indexOf("\n\n")||c&&s;s=u;var d,f=n.o,p=n.h;n.h=!0,u?(n.o=!1,d=l.replace(ax,"\n\n")):(n.o=!0,d=l.replace(ax,""));var h=t(d,n);return n.o=f,n.h=p,h})),ordered:i,start:o}},p:function(e,t,n){return o(e.ordered?"ol":"ul",{key:n.g,start:e.start},e.items.map((function(e,r){return o("li",{key:r},t(e,n))})))}},newlineCoalescer:{i:Gx(Ub),l:Qx.LOW,_:tw,p:function(){return"\n"}},paragraph:{i:$x,l:Qx.LOW,_:ew,p:function(e,t,n){return o("p",{key:n.g},t(e.content,n))}},ref:{i:Ux(ux),l:Qx.MAX,_:function(e){return c[e[1]]={target:e[2],title:e[4]},{}},p:nw},refImage:{i:Vx(dx),l:Qx.MAX,_:function(e){return{alt:e[1]||void 0,ref:e[2]}},p:function(e,t,n){return o("img",{key:n.g,alt:e.alt,src:qx(c[e.ref].target),title:c[e.ref].title})}},refLink:{i:Ux(fx),l:Qx.MAX,_:function(e,t,n){return{content:t(e[1],n),fallbackContent:t(e[0].replace(px,"\\$1"),n),ref:e[2]}},p:function(e,t,n){return c[e.ref]?o("a",{key:n.g,href:qx(c[e.ref].target),title:c[e.ref].title},t(e.content,n)):o("span",{key:n.g},t(e.fallbackContent,n))}},table:{i:Gx(cx),l:Qx.HIGH,_:Zx,p:function(e,t,n){return o("table",{key:n.g},o("thead",null,o("tr",null,e.header.map((function(r,i){return o("th",{key:i,style:Hx(e,i)},t(r,n))})))),o("tbody",null,e.cells.map((function(r,i){return o("tr",{key:i},r.map((function(r,i){return o("td",{key:i,style:Hx(e,i)},t(r,n))})))}))))}},tableSeparator:{i:function(e,t){return t.t?gx.exec(e):null},l:Qx.HIGH,_:function(){return{type:"tableSeparator"}},p:function(){return" | "}},text:{i:Wx(Mx),l:Qx.MIN,_:function(e){return{content:e[0].replace(Jb,(function(e,t){return n.namedCodesToUnicode[t]?n.namedCodesToUnicode[t]:e}))}},p:function(e){return e.content}},textBolded:{i:Vx(_x),l:Qx.MED,_:function(e,t,n){return{content:t(e[2],n)}},p:function(e,t,n){return o("strong",{key:n.g},t(e.content,n))}},textEmphasized:{i:Vx(Sx),l:Qx.LOW,_:function(e,t,n){return{content:t(e[2],n)}},p:function(e,t,n){return o("em",{key:n.g},t(e.content,n))}},textEscaped:{i:Vx(kx),l:Qx.HIGH,_:function(e){return{content:e[1],type:"text"}}},textStrikethroughed:{i:Vx(Cx),l:Qx.LOW,_:ew,p:function(e,t,n){return o("del",{key:n.g},t(e.content,n))}}};!0!==n.disableParsingRawHTML&&(u.htmlBlock={i:Wx(Kb),l:Qx.HIGH,_:function(e,t,n){var r,o=e[3].match(Ax),a=(0,i.Z)(o,2)[1],l=new RegExp("^".concat(a),"gm"),c=e[3].replace(l,""),u=(r=c,Fx.some((function(e){return e.test(r)}))?Jx:Xx),d=e[1].toLowerCase(),f=-1!==Ob.indexOf(d);n.m=n.m||"a"===d;var p=f?e[3]:u(t,c,n);return n.m=!1,{attrs:s(e[2]),content:p,noInnerParse:f,tag:f?d:e[1]}},p:function(e,t,n){return o(e.tag,Ab({key:n.g},e.attrs),e.noInnerParse?e.content:t(e.content,n))}},u.htmlSelfClosing={i:Wx(tx),l:Qx.HIGH,_:function(e){return{attrs:s(e[2]||""),tag:e[1]}},p:function(e,t,n){return o(e.tag,Ab({},e.attrs,{key:n.g}))}});var d,f=function(e){var t=Object.keys(e);function n(r,i){for(var o=[],a="";r;)for(var s=0;s<t.length;){var l=t[s],c=e[l],u=c.i(r,i,a);if(u){var d=u[0];r=r.substring(d.length);var f=c._(u,n,i);null==f.type&&(f.type=l),o.push(f),a=d;break}s++}return o}return t.sort((function(t,n){var r=e[t].l,i=e[n].l;return r!==i?r-i:t<n?-1:1})),function(e,t){return n(function(e){return e.replace(Vb,"\n").replace($b,"").replace(mx,"    ")}(e),t)}}(u),p=(d=function(e){return function(t,n,r){return e[t.type].p(t,n,r)}}(u),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t)){for(var r=n.g,i=[],o=!1,a=0;a<t.length;a++){n.g=a;var s=e(t[a],n),l="string"==typeof s;l&&o?i[i.length-1]+=s:null!==s&&i.push(s),o=l}return n.g=r,i}return d(t,e,n)}),h=a(t);return l.length?o("div",null,h,o("footer",{key:"footer"},l.map((function(e){return o("div",{id:n.slugify(e.identifier),key:e.identifier},e.identifier,p(f(e.footnote,{o:!0})))})))):h}!function(e){e[e.MAX=0]="MAX",e[e.HIGH=1]="HIGH",e[e.MED=2]="MED",e[e.LOW=3]="LOW",e[e.MIN=4]="MIN"}(Qx||(Qx={}));var aw=function(t){var n=t.children,r=t.options,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}(t,Eb);return e.cloneElement(ow(n,r),i)},sw={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},lw={plain:{color:"#9CDCFE",backgroundColor:"#1E1E1E"},styles:[{types:["prolog"],style:{color:"rgb(0, 0, 128)"}},{types:["comment"],style:{color:"rgb(106, 153, 85)"}},{types:["builtin","changed","keyword","interpolation-punctuation"],style:{color:"rgb(86, 156, 214)"}},{types:["number","inserted"],style:{color:"rgb(181, 206, 168)"}},{types:["constant"],style:{color:"rgb(100, 102, 149)"}},{types:["attr-name","variable"],style:{color:"rgb(156, 220, 254)"}},{types:["deleted","string","attr-value","template-punctuation"],style:{color:"rgb(206, 145, 120)"}},{types:["selector"],style:{color:"rgb(215, 186, 125)"}},{types:["tag"],style:{color:"rgb(78, 201, 176)"}},{types:["tag"],languages:["markup"],style:{color:"rgb(86, 156, 214)"}},{types:["punctuation","operator"],style:{color:"rgb(212, 212, 212)"}},{types:["punctuation"],languages:["markup"],style:{color:"#808080"}},{types:["function"],style:{color:"rgb(220, 220, 170)"}},{types:["class-name"],style:{color:"rgb(78, 201, 176)"}},{types:["char"],style:{color:"rgb(209, 105, 105)"}}]};function cw(e){return(0,M.Z)("MuiTableContainer",e)}(0,T.Z)("MuiTableContainer",["root"]);var uw=["className","component"],dw=(0,C.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(e,t){return t.root}})({width:"100%",overflowX:"auto"}),fw=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiTableContainer"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=(0,y.Z)(n,uw),s=(0,v.Z)({},n,{component:o}),l=function(e){var t=e.classes;return(0,S.Z)({root:["root"]},cw,t)}(s);return(0,h.jsx)(dw,(0,v.Z)({ref:t,as:o,className:(0,b.Z)(l.root,r),ownerState:s},a))})),pw=n(6759),hw=function(){var e=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,t=0,n={},r={util:{encode:function e(t){return t instanceof i?new i(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function e(t,n){var i,o;switch(n=n||{},r.util.type(t)){case"Object":if(o=r.util.objId(t),n[o])return n[o];for(var a in i={},n[o]=i,t)t.hasOwnProperty(a)&&(i[a]=e(t[a],n));return i;case"Array":return o=r.util.objId(t),n[o]?n[o]:(i=[],n[o]=i,t.forEach((function(t,r){i[r]=e(t,n)})),i);default:return t}},getLanguage:function(t){for(;t;){var n=e.exec(t.className);if(n)return n[1].toLowerCase();t=t.parentElement}return"none"},setLanguage:function(t,n){t.className=t.className.replace(RegExp(e,"gi"),""),t.classList.add("language-"+n)},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var i in t)n[i]=t[i];return n},insertBefore:function(e,t,n,i){var o=(i=i||r.languages)[e],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=o[s])}var c=i[e];return i[e]=a,r.languages.DFS(r.languages,(function(t,n){n===c&&t!=e&&(this[t]=a)})),a},DFS:function e(t,n,i,o){o=o||{};var a=r.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],i||s);var l=t[s],c=r.util.type(l);"Object"!==c||o[a(l)]?"Array"!==c||o[a(l)]||(o[a(l)]=!0,e(l,n,s,o)):(o[a(l)]=!0,e(l,n,null,o))}}},plugins:{},highlight:function(e,t,n){var o={code:e,grammar:t,language:n};return r.hooks.run("before-tokenize",o),o.tokens=r.tokenize(o.code,o.grammar),r.hooks.run("after-tokenize",o),i.stringify(r.util.encode(o.tokens),o.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new s;return l(i,i.head,e),a(e,i,t,i.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var i,o=0;i=n[o++];)i(t)}},Token:i};function i(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function o(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function a(e,t,n,s,u,d){for(var f in n)if(n.hasOwnProperty(f)&&n[f]){var p=n[f];p=Array.isArray(p)?p:[p];for(var h=0;h<p.length;++h){if(d&&d.cause==f+","+h)return;var m=p[h],g=m.inside,v=!!m.lookbehind,y=!!m.greedy,b=m.alias;if(y&&!m.pattern.global){var x=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,x+"g")}for(var w=m.pattern||m,_=s.next,S=u;_!==t.tail&&!(d&&S>=d.reach);S+=_.value.length,_=_.next){var C=_.value;if(t.length>e.length)return;if(!(C instanceof i)){var k,M=1;if(y){if(!(k=o(w,S,e,v))||k.index>=e.length)break;var T=k.index,A=k.index+k[0].length,E=S;for(E+=_.value.length;T>=E;)E+=(_=_.next).value.length;if(S=E-=_.value.length,_.value instanceof i)continue;for(var P=_;P!==t.tail&&(E<A||"string"===typeof P.value);P=P.next)M++,E+=P.value.length;M--,C=e.slice(S,E),k.index-=S}else if(!(k=o(w,0,C,v)))continue;T=k.index;var R=k[0],O=C.slice(0,T),I=C.slice(T+R.length),L=S+C.length;d&&L>d.reach&&(d.reach=L);var D=_.prev;if(O&&(D=l(t,D,O),S+=O.length),c(t,D,M),_=l(t,D,new i(f,g?r.tokenize(R,g):R,b,R)),I&&l(t,_,I),M>1){var N={cause:f+","+h,reach:L};a(e,t,n,_.prev,S,N),d&&N.reach>d.reach&&(d.reach=N.reach)}}}}}}function s(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function l(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function c(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}return i.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var i="";return t.forEach((function(t){i+=e(t,n)})),i}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),r.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},r}(),mw=hw;hw.default=hw,mw.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},mw.languages.markup.tag.inside["attr-value"].inside.entity=mw.languages.markup.entity,mw.languages.markup.doctype.inside["internal-subset"].inside=mw.languages.markup,mw.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(mw.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:mw.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:mw.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},mw.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(mw.languages.markup.tag,"addAttribute",{value:function(e,t){mw.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:mw.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),mw.languages.html=mw.languages.markup,mw.languages.mathml=mw.languages.markup,mw.languages.svg=mw.languages.markup,mw.languages.xml=mw.languages.extend("markup",{}),mw.languages.ssml=mw.languages.xml,mw.languages.atom=mw.languages.xml,mw.languages.rss=mw.languages.xml,function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],o=r.variable[1].inside,a=0;a<i.length;a++)o[i[a]]=e.languages.bash[i[a]];e.languages.shell=e.languages.bash}(mw),mw.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},mw.languages.c=mw.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),mw.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),mw.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},mw.languages.c.string],char:mw.languages.c.char,comment:mw.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:mw.languages.c}}}}),mw.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete mw.languages.c.boolean,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return t.source}));e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(mw),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(mw),function(e){var t,n=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css.selector={pattern:e.languages.css.selector.pattern,lookbehind:!0,inside:t={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp("\\[(?:[^[\\]\"']|"+n.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[n,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},e.languages.css.atrule.inside["selector-function-argument"].inside=t,e.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var r={pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0},i={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};e.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#[\da-f]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:r,number:i,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:r,number:i})}(mw),mw.languages.javascript=mw.languages.extend("clike",{"class-name":[mw.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),mw.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,mw.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:mw.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:mw.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:mw.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:mw.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:mw.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),mw.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:mw.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),mw.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),mw.languages.markup&&(mw.languages.markup.tag.addInlined("script","javascript"),mw.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),mw.languages.js=mw.languages.javascript,function(e){var t=/#(?!\{).+/,n={pattern:/#\{[^}]+\}/,alias:"variable"};e.languages.coffeescript=e.languages.extend("javascript",{comment:t,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:n}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),e.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:t,interpolation:n}}}),e.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:e.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:n}}]}),e.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete e.languages.coffeescript["template-string"],e.languages.coffee=e.languages.coffeescript}(mw),function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ \t]+"+t.source+")?|"+t.source+"(?:[ \t]+"+n.source+")?)",i=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,(function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source})),o=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(e,t){t=(t||"").replace(/m/g,"")+"m";var n=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<value>>/g,(function(){return e}));return RegExp(n,t)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,(function(){return r}))),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<key>>/g,(function(){return"(?:"+i+"|"+o+")"}))),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(o),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml}(mw),function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(e){return e=e.replace(/<inner>/g,(function(){return t})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+o+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+o+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(t){["url","bold","italic","strike","code-snippet"].forEach((function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])}))})),e.hooks.add("after-tokenize",(function(e){"markdown"!==e.language&&"md"!==e.language||function e(t){if(t&&"string"!==typeof t)for(var n=0,r=t.length;n<r;n++){var i=t[n];if("code"===i.type){var o=i.content[1],a=i.content[3];if(o&&a&&"code-language"===o.type&&"code-block"===a.type&&"string"===typeof o.content){var s=o.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),l="language-"+(s=(/[a-z][\w-]*/i.exec(s)||[""])[0].toLowerCase());a.alias?"string"===typeof a.alias?a.alias=[a.alias,l]:a.alias.push(l):a.alias=[l]}}else e(i.content)}}(e.tokens)})),e.hooks.add("wrap",(function(t){if("code-block"===t.type){for(var n="",r=0,i=t.classes.length;r<i;r++){var o=t.classes[r],c=/language-(.+)/.exec(o);if(c){n=c[1];break}}var u=e.languages[n];if(u)t.content=e.highlight(function(e){var t=e.replace(a,"");return t=t.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,(function(e,t){var n;if("#"===(t=t.toLowerCase())[0])return n="x"===t[1]?parseInt(t.slice(2),16):Number(t.slice(1)),l(n);var r=s[t];return r||e})),t}(t.content),u,n);else if(n&&"none"!==n&&e.plugins.autoloader){var d="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=d,e.plugins.autoloader.loadLanguages(n,(function(){var t=document.getElementById(d);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))}))}}}));var a=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;e.languages.md=e.languages.markdown}(mw),mw.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:mw.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},mw.hooks.add("after-tokenize",(function(e){if("graphql"===e.language)for(var t=e.tokens.filter((function(e){return"string"!==typeof e&&"comment"!==e.type&&"scalar"!==e.type})),n=0;n<t.length;){var r=t[n++];if("keyword"===r.type&&"mutation"===r.content){var i=[];if(d(["definition-mutation","punctuation"])&&"("===u(1).content){n+=2;var o=f(/^\($/,/^\)$/);if(-1===o)continue;for(;n<o;n++){var a=u(0);"variable"===a.type&&(p(a,"variable-input"),i.push(a.content))}n=o+1}if(d(["punctuation","property-query"])&&"{"===u(0).content&&(n++,p(u(0),"property-mutation"),i.length>0)){var s=f(/^\{$/,/^\}$/);if(-1===s)continue;for(var l=n;l<s;l++){var c=t[l];"variable"===c.type&&i.indexOf(c.content)>=0&&p(c,"variable-input")}}}}function u(e){return t[n+e]}function d(e,t){t=t||0;for(var n=0;n<e.length;n++){var r=u(n+t);if(!r||r.type!==e[n])return!1}return!0}function f(e,r){for(var i=1,o=n;o<t.length;o++){var a=t[o],s=a.content;if("punctuation"===a.type&&"string"===typeof s)if(e.test(s))i++;else if(r.test(s)&&0===--i)return o}return-1}function p(e,t){var n=e.alias;n?Array.isArray(n)||(e.alias=n=[n]):e.alias=n=[],n.push(t)}})),mw.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(e){var t=e.languages.javascript["template-string"],n=t.pattern.source,r=t.inside.interpolation,i=r.inside["interpolation-punctuation"],o=r.pattern.source;function a(t,r){if(e.languages[t])return{pattern:RegExp("((?:"+r+")\\s*)"+n),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},"embedded-code":{pattern:/[\s\S]+/,alias:t}}}}function s(e,t){return"___"+t.toUpperCase()+"_"+e+"___"}function l(t,n,r){var i={code:t,grammar:n,language:r};return e.hooks.run("before-tokenize",i),i.tokens=e.tokenize(i.code,i.grammar),e.hooks.run("after-tokenize",i),i.tokens}function c(t){var n={};n["interpolation-punctuation"]=i;var o=e.tokenize(t,n);if(3===o.length){var a=[1,1];a.push.apply(a,l(o[1],e.languages.javascript,"javascript")),o.splice.apply(o,a)}return new e.Token("interpolation",o,r.alias,t)}function u(t,n,r){var i=e.tokenize(t,{interpolation:{pattern:RegExp(o),lookbehind:!0}}),a=0,u={},d=l(i.map((function(e){if("string"===typeof e)return e;for(var n,i=e.content;-1!==t.indexOf(n=s(a++,r)););return u[n]=i,n})).join(""),n,r),f=Object.keys(u);return a=0,function e(t){for(var n=0;n<t.length;n++){if(a>=f.length)return;var r=t[n];if("string"===typeof r||"string"===typeof r.content){var i=f[a],o="string"===typeof r?r:r.content,s=o.indexOf(i);if(-1!==s){++a;var l=o.substring(0,s),d=c(u[i]),p=o.substring(s+i.length),h=[];if(l&&h.push(l),h.push(d),p){var m=[p];e(m),h.push.apply(h,m)}"string"===typeof r?(t.splice.apply(t,[n,1].concat(h)),n+=h.length-1):r.content=h}}else{var g=r.content;Array.isArray(g)?e(g):e([g])}}}(d),new e.Token(r,d,"language-"+r,t)}e.languages.javascript["template-string"]=[a("css",/\b(?:styled(?:\([^)]*\))?(?:\s*\.\s*\w+(?:\([^)]*\))*)*|css(?:\s*\.\s*(?:global|resolve))?|createGlobalStyle|keyframes)/.source),a("html",/\bhtml|\.\s*(?:inner|outer)HTML\s*\+?=/.source),a("svg",/\bsvg/.source),a("markdown",/\b(?:markdown|md)/.source),a("graphql",/\b(?:gql|graphql(?:\s*\.\s*experimental)?)/.source),a("sql",/\bsql/.source),t].filter(Boolean);var d={javascript:!0,js:!0,typescript:!0,ts:!0,jsx:!0,tsx:!0};function f(e){return"string"===typeof e?e:Array.isArray(e)?e.map(f).join(""):f(e.content)}e.hooks.add("after-tokenize",(function(t){t.language in d&&function t(n){for(var r=0,i=n.length;r<i;r++){var o=n[r];if("string"!==typeof o){var a=o.content;if(Array.isArray(a))if("template-string"===o.type){var s=a[1];if(3===a.length&&"string"!==typeof s&&"embedded-code"===s.type){var l=f(s),c=s.alias,d=Array.isArray(c)?c[0]:c,p=e.languages[d];if(!p)continue;a[1]=u(l,p,d)}}else t(a);else"string"!==typeof a&&t([a])}}}(t.tokens)}))}(mw),function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(mw),function(e){function t(e,t){return RegExp(e.replace(/<ID>/g,(function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source})),t)}e.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+e.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),e.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+e.languages.javascript.function.source),lookbehind:!0,alias:["function","property-access"]}}),e.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|(?:Weak)?(?:Map|Set)|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]}),e.languages.insertBefore("javascript","keyword",{imports:{pattern:t(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:e.languages.javascript},exports:{pattern:t(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:e.languages.javascript}}),e.languages.javascript.keyword.unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),e.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),e.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:t(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|(?:local|session)Storage|location|navigator|performance|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var n=["function","function-variable","method","method-variable","property-access"],r=0;r<n.length;r++){var i=n[r],o=e.languages.javascript[i];"RegExp"===e.util.type(o)&&(o=e.languages.javascript[i]={pattern:o});var a=o.inside||{};o.inside=a,a["maybe-class-name"]=/^[A-Z][\s\S]*/}}(mw),function(e){var t=e.util.clone(e.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,i=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function o(e,t){return e=e.replace(/<S>/g,(function(){return n})).replace(/<BRACES>/g,(function(){return r})).replace(/<SPREAD>/g,(function(){return i})),RegExp(e,t)}i=o(i).source,e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=o(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),e.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,e.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,e.languages.jsx.tag.inside.comment=t.comment,e.languages.insertBefore("inside","attr-name",{spread:{pattern:o(/<SPREAD>/.source),inside:e.languages.jsx}},e.languages.jsx.tag),e.languages.insertBefore("inside","special-attr",{script:{pattern:o(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:e.languages.jsx}}},e.languages.jsx.tag);var a=function e(t){return t?"string"===typeof t?t:"string"===typeof t.content?t.content:t.content.map(e).join(""):""},s=function t(n){for(var r=[],i=0;i<n.length;i++){var o=n[i],s=!1;if("string"!==typeof o&&("tag"===o.type&&o.content[0]&&"tag"===o.content[0].type?"</"===o.content[0].content[0].content?r.length>0&&r[r.length-1].tagName===a(o.content[0].content[1])&&r.pop():"/>"===o.content[o.content.length-1].content||r.push({tagName:a(o.content[0].content[1]),openedBraces:0}):r.length>0&&"punctuation"===o.type&&"{"===o.content?r[r.length-1].openedBraces++:r.length>0&&r[r.length-1].openedBraces>0&&"punctuation"===o.type&&"}"===o.content?r[r.length-1].openedBraces--:s=!0),(s||"string"===typeof o)&&r.length>0&&0===r[r.length-1].openedBraces){var l=a(o);i<n.length-1&&("string"===typeof n[i+1]||"plain-text"===n[i+1].type)&&(l+=a(n[i+1]),n.splice(i+1,1)),i>0&&("string"===typeof n[i-1]||"plain-text"===n[i-1].type)&&(l=a(n[i-1])+l,n.splice(i-1,1),i--),n[i]=new e.Token("plain-text",l,null,l)}o.content&&"string"!==typeof o.content&&t(o.content)}};e.hooks.add("after-tokenize",(function(e){"jsx"!==e.language&&"tsx"!==e.language||s(e.tokens)}))}(mw),function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(n){var r=t[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),"diff"===n&&i.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+"].*(?:\r\n?|\n|(?![\\s\\S])))+","m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})}(mw),mw.languages.git={comment:/^#.*/m,deleted:/^[-\u2013].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m},mw.languages.go=mw.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),mw.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete mw.languages.go["class-name"],function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,r,i,o){if(n.language===r){var a=n.tokenStack=[];n.code=n.code.replace(i,(function(e){if("function"===typeof o&&!o(e))return e;for(var i,s=a.length;-1!==n.code.indexOf(i=t(r,s));)++s;return a[s]=e,i})),n.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(n,r){if(n.language===r&&n.tokenStack){n.grammar=e.languages[r];var i=0,o=Object.keys(n.tokenStack);!function a(s){for(var l=0;l<s.length&&!(i>=o.length);l++){var c=s[l];if("string"===typeof c||c.content&&"string"===typeof c.content){var u=o[i],d=n.tokenStack[u],f="string"===typeof c?c:c.content,p=t(r,u),h=f.indexOf(p);if(h>-1){++i;var m=f.substring(0,h),g=new e.Token(r,e.tokenize(d,n.grammar),"language-"+r,d),v=f.substring(h+p.length),y=[];m&&y.push.apply(y,a([m])),y.push(g),v&&y.push.apply(y,a([v])),"string"===typeof c?s.splice.apply(s,[l,1].concat(y)):c.content=y}}else c.content&&a(c.content)}return s}(n.tokens)}}}})}(mw),function(e){e.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:false|true)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},e.hooks.add("before-tokenize",(function(t){e.languages["markup-templating"].buildPlaceholders(t,"handlebars",/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g)})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"handlebars")})),e.languages.hbs=e.languages.handlebars}(mw),mw.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},mw.languages.webmanifest=mw.languages.json,mw.languages.less=mw.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/}),mw.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}}),mw.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/},mw.languages.objectivec=mw.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete mw.languages.objectivec["class-name"],mw.languages.objc=mw.languages.objectivec,mw.languages.ocaml={comment:{pattern:/\(\*[\s\S]*?\*\)/,greedy:!0},char:{pattern:/'(?:[^\\\r\n']|\\(?:.|[ox]?[0-9a-f]{1,3}))'/i,greedy:!0},string:[{pattern:/"(?:\\(?:[\s\S]|\r\n)|[^\\\r\n"])*"/,greedy:!0},{pattern:/\{([a-z_]*)\|[\s\S]*?\|\1\}/,greedy:!0}],number:[/\b(?:0b[01][01_]*|0o[0-7][0-7_]*)\b/i,/\b0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]*)?(?:p[+-]?\d[\d_]*)?(?!\w)/i,/\b\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?\d[\d_]*)?(?!\w)/i],directive:{pattern:/\B#\w+/,alias:"property"},label:{pattern:/\B~\w+/,alias:"property"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"symbol"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,"operator-like-punctuation":{pattern:/\[[<>|]|[>|]\]|\{<|>\}/,alias:"punctuation"},operator:/\.[.~]|:[=>]|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/;;|::|[(){}\[\].,:;#]|\b_\b/},mw.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},mw.languages.python["string-interpolation"].inside.interpolation.inside.rest=mw.languages.python,mw.languages.py=mw.languages.python,mw.languages.reason=mw.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/}),mw.languages.insertBefore("reason","class-name",{char:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,greedy:!0},constructor:/\b[A-Z]\w*\b(?!\s*\.)/,label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete mw.languages.reason.function,function(e){e.languages.sass=e.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),e.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete e.languages.sass.atrule;var t=/\$[-\w]+|#\{\$[-\w]+\}/,n=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];e.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:t,operator:n}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:t,operator:n,important:e.languages.sass.important}}}),delete e.languages.sass.property,delete e.languages.sass.important,e.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})}(mw),mw.languages.scss=mw.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),mw.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),mw.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),mw.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),mw.languages.scss.atrule.inside.rest=mw.languages.scss,function(e){var t={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},n={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},r={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/\burl\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:else|for|if|return|unless)(?=\s|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:t,number:n,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:t,boolean:/\b(?:false|true)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:n,punctuation:/[{}()\[\];:,]/};r.interpolation={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^\{|\}$/,alias:"punctuation"},rest:r}},r.func={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:r}},e.languages.stylus={"atrule-declaration":{pattern:/(^[ \t]*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:r}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:r}},statement:{pattern:/(^[ \t]*)(?:else|for|if|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:r}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,]$(?!(?:\r?\n|\r)(?:\{|\2[ \t])))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:r.interpolation}},rest:r}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t])))/m,lookbehind:!0,inside:{interpolation:r.interpolation,comment:r.comment,punctuation:/[{},]/}},func:r.func,string:r.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:r.interpolation,punctuation:/[{}()\[\];:.]/}}(mw),function(e){var t=e.util.clone(e.languages.typescript);e.languages.tsx=e.languages.extend("jsx",t),delete e.languages.tsx.parameter,delete e.languages.tsx["literal-property"];var n=e.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0}(mw),mw.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|neg?|nearest|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|sqrt|store(?:8|16|32)?|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^`|~]+/,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/};var gw={Prism:mw,theme:sw};function vw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yw(){return yw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yw.apply(this,arguments)}var bw=/\r\n|\r|\n/,xw=function(e){0===e.length?e.push({types:["plain"],content:"\n",empty:!0}):1===e.length&&""===e[0].content&&(e[0].content="\n",e[0].empty=!0)},ww=function(e,t){var n=e.length;return n>0&&e[n-1]===t?e:e.concat(t)},_w=function(e,t){var n=e.plain,r=Object.create(null),i=e.styles.reduce((function(e,n){var r=n.languages,i=n.style;return r&&!r.includes(t)||n.types.forEach((function(t){var n=yw({},e[t],i);e[t]=n})),e}),r);return i.root=n,i.plain=yw({},n,{backgroundColor:null}),i};function Sw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var Cw=function(e){function t(){for(var t=this,n=[],r=arguments.length;r--;)n[r]=arguments[r];e.apply(this,n),vw(this,"getThemeDict",(function(e){if(void 0!==t.themeDict&&e.theme===t.prevTheme&&e.language===t.prevLanguage)return t.themeDict;t.prevTheme=e.theme,t.prevLanguage=e.language;var n=e.theme?_w(e.theme,e.language):void 0;return t.themeDict=n})),vw(this,"getLineProps",(function(e){var n=e.key,r=e.className,i=e.style,o=yw({},Sw(e,["key","className","style","line"]),{className:"token-line",style:void 0,key:void 0}),a=t.getThemeDict(t.props);return void 0!==a&&(o.style=a.plain),void 0!==i&&(o.style=void 0!==o.style?yw({},o.style,i):i),void 0!==n&&(o.key=n),r&&(o.className+=" "+r),o})),vw(this,"getStyleForToken",(function(e){var n=e.types,r=e.empty,i=n.length,o=t.getThemeDict(t.props);if(void 0!==o){if(1===i&&"plain"===n[0])return r?{display:"inline-block"}:void 0;if(1===i&&!r)return o[n[0]];var a=r?{display:"inline-block"}:{},s=n.map((function(e){return o[e]}));return Object.assign.apply(Object,[a].concat(s))}})),vw(this,"getTokenProps",(function(e){var n=e.key,r=e.className,i=e.style,o=e.token,a=yw({},Sw(e,["key","className","style","token"]),{className:"token "+o.types.join(" "),children:o.content,style:t.getStyleForToken(o),key:void 0});return void 0!==i&&(a.style=void 0!==a.style?yw({},a.style,i):i),void 0!==n&&(a.key=n),r&&(a.className+=" "+r),a})),vw(this,"tokenize",(function(e,t,n,r){var i={code:t,grammar:n,language:r,tokens:[]};e.hooks.run("before-tokenize",i);var o=i.tokens=e.tokenize(i.code,i.grammar,i.language);return e.hooks.run("after-tokenize",i),o}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.Prism,n=e.language,r=e.code,i=e.children,o=this.getThemeDict(this.props),a=t.languages[n],s=function(e){for(var t=[[]],n=[e],r=[0],i=[e.length],o=0,a=0,s=[],l=[s];a>-1;){for(;(o=r[a]++)<i[a];){var c=void 0,u=t[a],d=n[a][o];if("string"===typeof d?(u=a>0?u:["plain"],c=d):(u=ww(u,d.type),d.alias&&(u=ww(u,d.alias)),c=d.content),"string"===typeof c){var f=c.split(bw),p=f.length;s.push({types:u,content:f[0]});for(var h=1;h<p;h++)xw(s),l.push(s=[]),s.push({types:u,content:f[h]})}else a++,t.push(u),n.push(c),r.push(0),i.push(c.length)}a--,t.pop(),n.pop(),r.pop(),i.pop()}return xw(s),l}(void 0!==a?this.tokenize(t,r,a,n):[r]);return i({tokens:s,className:"prism-code language-"+n,style:void 0!==o?o.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},t}(e.Component),kw=Cw,Mw=function(){return Mw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Mw.apply(this,arguments)};function Tw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var Aw=e.lazy((function(){return n.e(753).then(n.bind(n,5753))})),Ew=e.lazy((function(){return n.e(887).then(n.bind(n,887))}));e.lazy((function(){return n.e(505).then(n.bind(n,6505))}));var Pw=e.lazy((function(){return n.e(481).then(n.bind(n,5481))})),Rw=e.lazy((function(){return n.e(453).then(n.bind(n,9453))})),Ow=e.lazy((function(){return n.e(375).then(n.bind(n,6375))})),Iw=e.lazy((function(){return n.e(10).then(n.bind(n,6010))})),Lw=e.lazy((function(){return n.e(198).then(n.bind(n,198))})),Dw=e.lazy((function(){return n.e(524).then(n.bind(n,2524))})),Nw=e.lazy((function(){return n.e(342).then(n.bind(n,3342))})),Fw=e.lazy((function(){return Promise.resolve().then((function(){return Hw}))})),zw=e.lazy((function(){return Promise.resolve().then((function(){return Ww}))})),Bw=e.lazy((function(){return Promise.resolve().then((function(){return $w}))})),jw=function(e){var t=e.disableTableContainer,n=void 0!==t&&t,r=e.blockquoteBorderColor,i=e.inlineCodeBgColor,o=void 0===i?"rgba(126, 126, 126, 0.1)":i,a=e.inlineCodeColor,s=void 0===a?"currentcolor":a,l=e.codeBlockTheme;return{a:{component:Ew},blockquote:{component:Fw,props:{borderColor:r}},button:{component:Aw},Button:{component:Aw},code:{component:"code",props:{style:{backgroundColor:o,borderRadius:"4px",color:s,margin:"0 0.2rem",padding:"0.5rem 0.5rem"}}},h1:{component:Pw,props:{variant:"h1",gutterBottom:!0}},h2:{component:Pw,props:{variant:"h2",gutterBottom:!0}},h3:{component:Pw,props:{variant:"h3",gutterBottom:!0}},h4:{component:Pw,props:{variant:"h4",gutterBottom:!0}},h5:{component:Pw,props:{variant:"h5",gutterBottom:!0}},h6:{component:Pw,props:{variant:"h6",gutterBottom:!0}},li:{component:"li"},Link:{component:Ew},ol:{component:"ol"},p:{component:Pw,props:{variant:"body1",gutterBottom:!0}},pre:{component:zw,props:{theme:l}},table:{component:n?Rw:Bw},tbody:{component:Ow},td:{component:Iw},tfoot:{component:Lw},thead:{component:Dw},th:{component:Iw},tr:{component:Nw},ul:{component:"ul"}}},Zw=function(t){return(0,h.jsx)(e.Suspense,Mw({fallback:(0,h.jsx)("div",{children:"..."},void 0)},{children:function(e){var t=e.children,n=e.key,r=e.options,i=e.overrides,o=e.disableTableContainer,a=e.blockquoteBorderColor,s=e.inlineCodeBgColor,l=e.inlineCodeColor,c=e.codeBlockTheme,u=jw({disableTableContainer:o,blockquoteBorderColor:a,inlineCodeBgColor:s,inlineCodeColor:l,codeBlockTheme:c}),d=t||"";if(r){var f=r.overrides,p=Tw(r,["overrides"]);return(0,h.jsx)(aw,Mw(f?{options:Mw({overrides:Mw(Mw({},u),f)},p)}:{options:Mw({overrides:Mw({},u)},p)},{children:d}),n&&n)}return(0,h.jsx)(aw,Mw(i?{options:{overrides:Mw(Mw({},u),i)}}:{options:{overrides:Mw({},u)}},{children:d}),n&&n)}(t)}),void 0)},Hw=(jw({}),Object.freeze({__proto__:null,default:function(e){var t=e.children,n=e.borderColor,r=Ys().palette,i=r.background,o=r.info,a=function(e){var t=e;3===(t=t.replaceAll("#","")).length&&(t=t.split("").map((function(e){return e+e})).join(""));var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}(i.paper),s=a?"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", 0.5)"):i.paper;return(0,h.jsx)(Fo,Mw({sx:{padding:"1rem",backgroundColor:s,borderLeft:"4px solid ".concat(n||o.main)}},{children:t}),void 0)}})),Uw=(0,C.ZP)(Nv,{name:"PreContainer"})((function(e){return{borderRadius:e.theme.shape.borderRadius,padding:"1rem"}})),Vw=(0,C.ZP)("pre")({overflowX:"auto"}),Gw=function(e){var t=e.code,n=void 0===t?"const sayHello = (name:string) => console.log(`Hello${name}`);":t,r=e.language,i=void 0===r?"tsx":r,o=e.theme;return(0,h.jsx)(kw,Mw({},gw,{theme:void 0===o?lw:o,code:n,language:i},{children:function(e){var t=e.className,n=e.style,r=e.tokens,i=e.getLineProps,o=e.getTokenProps;return(0,h.jsx)(Uw,Mw({className:t,style:n},{children:(0,h.jsx)(Vw,{children:r.map((function(e,t){return(0,h.jsx)("div",Mw({},i({line:e,key:t}),{children:e.map((function(e,t){return(0,h.jsx)("span",Mw({},o({token:e,key:t})),t)}))}),t)}))},void 0)}),void 0)}}),void 0)},Ww=Object.freeze({__proto__:null,default:function(e){var t=e.children,n=e.theme;if(t&&t.type&&"code"===t.type){var r=t.props.className?t.props.className.replace("lang-",""):"tsx";return(0,h.jsx)(Gw,{code:t.props.children,language:r,theme:n&&n},void 0)}return(0,h.jsx)(Nv,Mw({component:"pre",sx:{whiteSpace:"pre-wrap"}},{children:t}),void 0)}}),$w=Object.freeze({__proto__:null,default:function(e){var t=e.children,n=Tw(e,["children"]);return(0,h.jsx)(fw,Mw({component:Fo},{children:(0,h.jsx)(pw.Z,Mw({},n,{children:t}),void 0)}),void 0)}});var qw=function(e){var t=e.markdown;return(0,h.jsx)(Zw,{children:t})},Yw=n(114),Xw=n(118),Kw=(0,n(6541).ZP)(),Jw=n(5318),Qw=["className","component","disableGutters","fixed","maxWidth","classes"],e_=(0,Jw.Z)(),t_=Kw("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat((0,Yw.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),n_=function(e){return(0,Xw.Z)({props:e,name:"MuiContainer",defaultTheme:e_})},r_=function(e,t){var n=e.classes,r=e.fixed,i=e.disableGutters,o=e.maxWidth,a={root:["root",o&&"maxWidth".concat((0,Yw.Z)(String(o))),r&&"fixed",i&&"disableGutters"]};return(0,S.Z)(a,(function(e){return(0,M.Z)(t,e)}),n)};var i_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.createStyledComponent,r=void 0===n?t_:n,i=t.useThemeProps,a=void 0===i?n_:i,s=t.componentName,l=void 0===s?"MuiContainer":s,c=r((function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&(0,o.Z)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}))}),(function(e){var t=e.theme;return e.ownerState.fixed&&Object.keys(t.breakpoints.values).reduce((function(e,n){var r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(i).concat(t.breakpoints.unit)}),e}),{})}),(function(e){var t=e.theme,n=e.ownerState;return(0,v.Z)({},"xs"===n.maxWidth&&(0,o.Z)({},t.breakpoints.up("xs"),{maxWidth:Math.max(t.breakpoints.values.xs,444)}),n.maxWidth&&"xs"!==n.maxWidth&&(0,o.Z)({},t.breakpoints.up(n.maxWidth),{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}))})),u=e.forwardRef((function(e,t){var n=a(e),r=n.className,i=n.component,o=void 0===i?"div":i,s=n.disableGutters,u=void 0!==s&&s,d=n.fixed,f=void 0!==d&&d,p=n.maxWidth,m=void 0===p?"lg":p,g=(0,y.Z)(n,Qw),x=(0,v.Z)({},n,{component:o,disableGutters:u,fixed:f,maxWidth:m}),w=r_(x,l);return(0,h.jsx)(c,(0,v.Z)({as:o,ownerState:x,className:(0,b.Z)(w.root,r),ref:t},g))}));return u}({createStyledComponent:(0,C.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat((0,x.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:function(e){return(0,xn.Z)({props:e,name:"MuiContainer"})}}),o_=i_,a_=n(4929);var s_=e.createContext();function l_(e){return(0,M.Z)("MuiGrid",e)}var c_=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],u_=(0,T.Z)("MuiGrid",["root","container","item","zeroMinWidth"].concat((0,yt.Z)([0,1,2,3,4,5,6,7,8,9,10].map((function(e){return"spacing-xs-".concat(e)}))),(0,yt.Z)(["column-reverse","column","row-reverse","row"].map((function(e){return"direction-xs-".concat(e)}))),(0,yt.Z)(["nowrap","wrap-reverse","wrap"].map((function(e){return"wrap-xs-".concat(e)}))),(0,yt.Z)(c_.map((function(e){return"grid-xs-".concat(e)}))),(0,yt.Z)(c_.map((function(e){return"grid-sm-".concat(e)}))),(0,yt.Z)(c_.map((function(e){return"grid-md-".concat(e)}))),(0,yt.Z)(c_.map((function(e){return"grid-lg-".concat(e)}))),(0,yt.Z)(c_.map((function(e){return"grid-xl-".concat(e)}))))),d_=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function f_(e){var t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function p_(e){var t=e.breakpoints,n=e.values,r="";Object.keys(n).forEach((function(e){""===r&&0!==n[e]&&(r=e)}));var i=Object.keys(t).sort((function(e,n){return t[e]-t[n]}));return i.slice(0,i.indexOf(r))}var h_=(0,C.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.container,i=n.direction,o=n.item,a=n.spacing,s=n.wrap,l=n.zeroMinWidth,c=n.breakpoints,u=[];r&&(u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];var r=[];return t.forEach((function(t){var i=e[t];Number(i)>0&&r.push(n["spacing-".concat(t,"-").concat(String(i))])})),r}(a,c,t));var d=[];return c.forEach((function(e){var r=n[e];r&&d.push(t["grid-".concat(e,"-").concat(String(r))])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth].concat((0,yt.Z)(u),["row"!==i&&t["direction-xs-".concat(String(i))],"wrap"!==s&&t["wrap-xs-".concat(String(s))]],d)}})((function(e){var t=e.ownerState;return(0,v.Z)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){var t=e.theme,n=e.ownerState,r=(0,a_.P$)({values:n.direction,breakpoints:t.breakpoints.values});return(0,a_.k9)({theme:t},r,(function(e){var t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(u_.item)]={maxWidth:"none"}),t}))}),(function(e){var t=e.theme,n=e.ownerState,r=n.container,i=n.rowSpacing,a={};if(r&&0!==i){var s,l=(0,a_.P$)({values:i,breakpoints:t.breakpoints.values});"object"===typeof l&&(s=p_({breakpoints:t.breakpoints.values,values:l})),a=(0,a_.k9)({theme:t},l,(function(e,n){var r,i=t.spacing(e);return"0px"!==i?(0,o.Z)({marginTop:"-".concat(f_(i))},"& > .".concat(u_.item),{paddingTop:f_(i)}):null!=(r=s)&&r.includes(n)?{}:(0,o.Z)({marginTop:0},"& > .".concat(u_.item),{paddingTop:0})}))}return a}),(function(e){var t=e.theme,n=e.ownerState,r=n.container,i=n.columnSpacing,a={};if(r&&0!==i){var s,l=(0,a_.P$)({values:i,breakpoints:t.breakpoints.values});"object"===typeof l&&(s=p_({breakpoints:t.breakpoints.values,values:l})),a=(0,a_.k9)({theme:t},l,(function(e,n){var r,i=t.spacing(e);return"0px"!==i?(0,o.Z)({width:"calc(100% + ".concat(f_(i),")"),marginLeft:"-".concat(f_(i))},"& > .".concat(u_.item),{paddingLeft:f_(i)}):null!=(r=s)&&r.includes(n)?{}:(0,o.Z)({width:"100%",marginLeft:0},"& > .".concat(u_.item),{paddingLeft:0})}))}return a}),(function(e){var t,n=e.theme,r=e.ownerState;return n.breakpoints.keys.reduce((function(e,i){var o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var a=(0,a_.P$)({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[i]:a;if(void 0===s||null===s)return e;var l="".concat(Math.round(t/s*1e8)/1e6,"%"),c={};if(r.container&&r.item&&0!==r.columnSpacing){var u=n.spacing(r.columnSpacing);if("0px"!==u){var d="calc(".concat(l," + ").concat(f_(u),")");c={flexBasis:d,maxWidth:d}}}o=(0,v.Z)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));var m_=function(e){var t=e.classes,n=e.container,r=e.direction,i=e.item,o=e.spacing,a=e.wrap,s=e.zeroMinWidth,l=e.breakpoints,c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];var n=[];return t.forEach((function(t){var r=e[t];if(Number(r)>0){var i="spacing-".concat(t,"-").concat(String(r));n.push(i)}})),n}(o,l));var u=[];l.forEach((function(t){var n=e[t];n&&u.push("grid-".concat(t,"-").concat(String(n)))}));var d={root:["root",n&&"container",i&&"item",s&&"zeroMinWidth"].concat((0,yt.Z)(c),["row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==a&&"wrap-xs-".concat(String(a))],u)};return(0,S.Z)(d,l_,t)},g_=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiGrid"}),i=Ys().breakpoints,o=(0,Rv.Z)(r),a=o.className,s=o.columns,l=o.columnSpacing,c=o.component,u=void 0===c?"div":c,d=o.container,f=void 0!==d&&d,p=o.direction,m=void 0===p?"row":p,g=o.item,x=void 0!==g&&g,w=o.rowSpacing,_=o.spacing,S=void 0===_?0:_,C=o.wrap,k=void 0===C?"wrap":C,M=o.zeroMinWidth,T=void 0!==M&&M,A=(0,y.Z)(o,d_),E=w||S,P=l||S,R=e.useContext(s_),O=f?s||12:R,I={},L=(0,v.Z)({},A);i.keys.forEach((function(e){null!=A[e]&&(I[e]=A[e],delete L[e])}));var D=(0,v.Z)({},o,{columns:O,container:f,direction:m,item:x,rowSpacing:E,columnSpacing:P,wrap:k,zeroMinWidth:T,spacing:S},I,{breakpoints:i.keys}),N=m_(D);return(0,h.jsx)(s_.Provider,{value:O,children:(0,h.jsx)(h_,(0,v.Z)({ownerState:D,className:(0,b.Z)(N.root,a),as:u,ref:n},L))})})),v_=g_;function y_(e){return(0,M.Z)("MuiCardMedia",e)}(0,T.Z)("MuiCardMedia",["root","media","img"]);var b_,x_=["children","className","component","image","src","style"],w_=(0,C.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.isMediaComponent,i=n.isImageComponent;return[t.root,r&&t.media,i&&t.img]}})((function(e){var t=e.ownerState;return(0,v.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})})),__=["video","audio","picture","iframe","img"],S_=["picture","img"],C_=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiCardMedia"}),r=n.children,i=n.className,o=n.component,a=void 0===o?"div":o,s=n.image,l=n.src,c=n.style,u=(0,y.Z)(n,x_),d=-1!==__.indexOf(a),f=!d&&s?(0,v.Z)({backgroundImage:'url("'.concat(s,'")')},c):c,p=(0,v.Z)({},n,{component:a,isMediaComponent:d,isImageComponent:-1!==S_.indexOf(a)}),m=function(e){var t=e.classes,n={root:["root",e.isMediaComponent&&"media",e.isImageComponent&&"img"]};return(0,S.Z)(n,y_,t)}(p);return(0,h.jsx)(w_,(0,v.Z)({className:(0,b.Z)(m.root,i),as:a,role:!d&&s?"img":void 0,ref:t,style:f,ownerState:p,src:d?s||l:void 0},u,{children:r}))})),k_=C_,M_=new Uint8Array(16);function T_(){if(!b_&&!(b_="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b_(M_)}var A_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var E_=function(e){return"string"===typeof e&&A_.test(e)},P_=[],R_=0;R_<256;++R_)P_.push((R_+256).toString(16).substr(1));var O_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(P_[e[t+0]]+P_[e[t+1]]+P_[e[t+2]]+P_[e[t+3]]+"-"+P_[e[t+4]]+P_[e[t+5]]+"-"+P_[e[t+6]]+P_[e[t+7]]+"-"+P_[e[t+8]]+P_[e[t+9]]+"-"+P_[e[t+10]]+P_[e[t+11]]+P_[e[t+12]]+P_[e[t+13]]+P_[e[t+14]]+P_[e[t+15]]).toLowerCase();if(!E_(n))throw TypeError("Stringified UUID is invalid");return n};var I_=function(e,t,n){var r=(e=e||{}).random||(e.rng||T_)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return O_(r)},L_=n(4174),D_=n.n(L_),N_=(0,n(2502).Z)(D_());function F_(e){var t=e.data,n=e.height;return(0,h.jsx)(N_,{data:t,useResizeHandler:!0,style:{width:"100%",height:"100%"},layout:{autosize:!0,height:n}})}function z_(e){return(0,M.Z)("MuiListItem",e)}var B_=(0,T.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);var j_=(0,T.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Z_(e){return(0,M.Z)("MuiListItemSecondaryAction",e)}(0,T.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);var H_=["className"],U_=(0,C.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.disableGutters&&t.disableGutters]}})((function(e){var t=e.ownerState;return(0,v.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),V_=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiListItemSecondaryAction"}),i=r.className,o=(0,y.Z)(r,H_),a=e.useContext(ar.Z),s=(0,v.Z)({},r,{disableGutters:a.disableGutters}),l=function(e){var t=e.disableGutters,n=e.classes,r={root:["root",t&&"disableGutters"]};return(0,S.Z)(r,Z_,n)}(s);return(0,h.jsx)(U_,(0,v.Z)({className:(0,b.Z)(l.root,i),ownerState:s,ref:n},o))}));V_.muiName="ListItemSecondaryAction";var G_=V_,W_=["className"],$_=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],q_=(0,C.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,v.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!r.disablePadding&&(0,v.Z)({paddingTop:8,paddingBottom:8},r.dense&&{paddingTop:4,paddingBottom:4},!r.disableGutters&&{paddingLeft:16,paddingRight:16},!!r.secondaryAction&&{paddingRight:48}),!!r.secondaryAction&&(0,o.Z)({},"& > .".concat(j_.root),{paddingRight:48}),(t={},(0,o.Z)(t,"&.".concat(B_.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,o.Z)(t,"&.".concat(B_.selected),(0,o.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,k.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(B_.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,k.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,o.Z)(t,"&.".concat(B_.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),t),"flex-start"===r.alignItems&&{alignItems:"flex-start"},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},r.button&&(0,o.Z)({transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(B_.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,k.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,k.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),r.hasSecondaryAction&&{paddingRight:48})})),Y_=(0,C.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:function(e,t){return t.container}})({position:"relative"}),X_=e.forwardRef((function(t,n){var r=(0,xn.Z)({props:t,name:"MuiListItem"}),i=r.alignItems,o=void 0===i?"center":i,a=r.autoFocus,s=void 0!==a&&a,l=r.button,c=void 0!==l&&l,u=r.children,d=r.className,f=r.component,p=r.components,m=void 0===p?{}:p,g=r.componentsProps,x=void 0===g?{}:g,C=r.ContainerComponent,k=void 0===C?"li":C,M=r.ContainerProps,T=(void 0===M?{}:M).className,A=r.dense,E=void 0!==A&&A,P=r.disabled,R=void 0!==P&&P,O=r.disableGutters,I=void 0!==O&&O,L=r.disablePadding,D=void 0!==L&&L,N=r.divider,F=void 0!==N&&N,z=r.focusVisibleClassName,B=r.secondaryAction,j=r.selected,Z=void 0!==j&&j,H=r.slotProps,U=void 0===H?{}:H,V=r.slots,G=void 0===V?{}:V,W=(0,y.Z)(r.ContainerProps,W_),$=(0,y.Z)(r,$_),q=e.useContext(ar.Z),Y=e.useMemo((function(){return{dense:E||q.dense||!1,alignItems:o,disableGutters:I}}),[o,q.dense,E,I]),X=e.useRef(null);(0,_.Z)((function(){s&&X.current&&X.current.focus()}),[s]);var K=e.Children.toArray(u),J=K.length&&(0,_d.Z)(K[K.length-1],["ListItemSecondaryAction"]),Q=(0,v.Z)({},r,{alignItems:o,autoFocus:s,button:c,dense:Y.dense,disabled:R,disableGutters:I,disablePadding:D,divider:F,hasSecondaryAction:J,selected:Z}),ee=function(e){var t=e.alignItems,n=e.button,r=e.classes,i=e.dense,o=e.disabled,a={root:["root",i&&"dense",!e.disableGutters&&"gutters",!e.disablePadding&&"padding",e.divider&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",e.hasSecondaryAction&&"secondaryAction",e.selected&&"selected"],container:["container"]};return(0,S.Z)(a,z_,r)}(Q),te=(0,w.Z)(X,n),ne=G.root||m.Root||q_,re=U.root||x.root||{},ie=(0,v.Z)({className:(0,b.Z)(ee.root,re.className,d),disabled:R},$),oe=f||"li";return c&&(ie.component=f||"div",ie.focusVisibleClassName=(0,b.Z)(B_.focusVisible,z),oe=sr.Z),J?(oe=ie.component||f?oe:"div","li"===k&&("li"===oe?oe="div":"li"===ie.component&&(ie.component="div")),(0,h.jsx)(ar.Z.Provider,{value:Y,children:(0,h.jsxs)(Y_,(0,v.Z)({as:k,className:(0,b.Z)(ee.container,T),ref:te,ownerState:Q},W,{children:[(0,h.jsx)(ne,(0,v.Z)({},re,!gn(ne)&&{as:oe,ownerState:(0,v.Z)({},Q,re.ownerState)},ie,{children:K})),K.pop()]}))})):(0,h.jsx)(ar.Z.Provider,{value:Y,children:(0,h.jsxs)(ne,(0,v.Z)({},re,{as:oe,ref:te},!gn(ne)&&{ownerState:(0,v.Z)({},Q,re.ownerState)},ie,{children:[K,B&&(0,h.jsx)(G_,{children:B})]}))})})),K_=n(3213);function J_(e){var t=e.items;return(0,h.jsx)(ks,{children:t.map((function(e){return(0,h.jsx)(X_,{children:(0,h.jsx)(K_.Z,{primary:e})})}))})}var Q_=["h1","h2","h3","p"],eS=function t(n){var r=n.data;return(0,h.jsx)(o_,{children:(0,h.jsx)(v_,{container:!0,spacing:1,children:Object.keys(r).map((function(n){var o=n.split(":"),a=(0,i.Z)(o,3),l=a[0],c=(a[1],a[2]),u=void 0===c?12:c,d=r[n];return"page"===l||"navpage"===l?null:"section"===l?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,h.jsx)(Fo,{sx:{height:"100%",mb:2},elevation:3,children:(0,h.jsx)(t,{data:d},n)})},"g:"+n):"seq"===l?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,h.jsx)(p,{sequence:d,id:I_()},n)},"g:"+n):"table"===l?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,e.createElement)(kb,s(s({},d),{},{key:n}))},"g:"+n):"pdb"===l?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,e.createElement)(Tb,s(s({},d),{},{key:n}))},"g:"+n):"md"===l?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,h.jsx)(qw,{markdown:d},n)},"g:"+n):"plot"===l?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,e.createElement)(F_,s(s({},d),{},{key:n}))},"g:"+n):"img"===l?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,h.jsx)(k_,{component:"img",image:d.src,height:d.height,sx:{padding:"1em 1em 0 1em",objectFit:"contain"}},n)},"g:"+n):"ul"===l?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,h.jsx)(J_,{items:d},n)},"g:"+n):Q_.includes(l)?(0,h.jsx)(v_,{item:!0,xs:u,children:(0,h.jsx)(ag.Z,{variant:l,children:d},n)},"g:"+n):(console.log(l,"is not supported!"),null)}))})})},tS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,nS=Object.keys,rS=Array.isArray;function iS(e,t){return"object"!=typeof t||nS(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||tS.Promise||(tS.Promise=Promise);var oS=Object.getPrototypeOf,aS={}.hasOwnProperty;function sS(e,t){return aS.call(e,t)}function lS(e,t){"function"==typeof t&&(t=t(oS(e))),("undefined"==typeof Reflect?nS:Reflect.ownKeys)(t).forEach((function(n){uS(e,n,t[n])}))}var cS=Object.defineProperty;function uS(e,t,n,r){cS(e,t,iS(n&&sS(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function dS(e){return{from:function(t){return e.prototype=Object.create(t.prototype),uS(e.prototype,"constructor",e),{extend:lS.bind(null,e.prototype)}}}}var fS=Object.getOwnPropertyDescriptor;function pS(e,t){var n;return fS(e,t)||(n=oS(e))&&pS(n,t)}var hS=[].slice;function mS(e,t,n){return hS.call(e,t,n)}function gS(e,t){return t(e)}function vS(e){if(!e)throw new Error("Assertion Failed")}function yS(e){tS.setImmediate?setImmediate(e):setTimeout(e,0)}function bS(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function xS(e,t){if(sS(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=xS(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:xS(s,t.substr(a+1))}}function wS(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){vS("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)wS(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?rS(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var l=e[a];l&&sS(e,a)||(l=e[a]={}),wS(l,s,n)}}else void 0===n?rS(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function _S(e){var t={};for(var n in e)sS(e,n)&&(t[n]=e[n]);return t}var SS=[].concat;function CS(e){return SS.apply([],e)}var kS="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(CS([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return tS[e]})),MS=kS.map((function(e){return tS[e]}));bS(kS,(function(e){return[e,!0]}));var TS=null;function AS(e){TS="undefined"!=typeof WeakMap&&new WeakMap;var t=ES(e);return TS=null,t}function ES(e){if(!e||"object"!=typeof e)return e;var t=TS&&TS.get(e);if(t)return t;if(rS(e)){t=[],TS&&TS.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(ES(e[n]))}else if(MS.indexOf(e.constructor)>=0)t=e;else{var i=oS(e);for(var o in t=i===Object.prototype?{}:Object.create(i),TS&&TS.set(e,t),e)sS(e,o)&&(t[o]=ES(e[o]))}return t}var PS={}.toString;function RS(e){return PS.call(e).slice(8,-1)}var OS="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",IS="symbol"==typeof OS?function(e){var t;return null!=e&&(t=e[OS])&&t.apply(e)}:function(){return null},LS={};function DS(e){var t,n,r,i;if(1===arguments.length){if(rS(e))return e.slice();if(this===LS&&"string"==typeof e)return[e];if(i=IS(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var NS="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},FS="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function zS(e,t){FS=e,BS=t}var BS=function(){return!0},jS=!new Error("").stack;function ZS(){if(jS)try{throw ZS.arguments,new Error}catch(Ab){return Ab}return new Error}function HS(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(BS).map((function(e){return"\n"+e})).join("")):""}var US=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],VS=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(US),GS={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function WS(e,t){this._e=ZS(),this.name=e,this.message=t}function $S(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function qS(e,t,n,r){this._e=ZS(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=$S(e,t)}function YS(e,t){this._e=ZS(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=$S(e,t)}dS(WS).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+HS(this._e,2))}},toString:function(){return this.name+": "+this.message}}),dS(qS).from(WS),dS(YS).from(WS);var XS=VS.reduce((function(e,t){return e[t]=t+"Error",e}),{}),KS=WS,JS=VS.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=ZS(),this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=GS[t]||n,this.inner=null)}return dS(r).from(KS),e[t]=r,e}),{});JS.Syntax=SyntaxError,JS.Type=TypeError,JS.Range=RangeError;var QS=US.reduce((function(e,t){return e[t+"Error"]=JS[t],e}),{}),eC=VS.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=JS[t]),e}),{});function tC(){}function nC(e){return e}function rC(e,t){return null==e||e===nC?t:function(n){return t(e(n))}}function iC(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function oC(e,t){return e===tC?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?iC(r,this.onsuccess):r),i&&(this.onerror=this.onerror?iC(i,this.onerror):i),void 0!==o?o:n}}function aC(e,t){return e===tC?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?iC(n,this.onsuccess):n),r&&(this.onerror=this.onerror?iC(r,this.onerror):r)}}function sC(e,t){return e===tC?t:function(n){var r=e.apply(this,arguments);iS(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?iC(i,this.onsuccess):i),o&&(this.onerror=this.onerror?iC(o,this.onerror):o),void 0===r?void 0===a?void 0:a:iS(r,a)}}function lC(e,t){return e===tC?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function cC(e,t){return e===tC?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}eC.ModifyError=qS,eC.DexieError=WS,eC.BulkError=YS;var uC={},dC="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,oS(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,oS(t),e]}(),fC=(0,i.Z)(dC,3),pC=fC[0],hC=fC[1],mC=fC[2],gC=hC&&hC.then,vC=pC&&pC.constructor,yC=!!mC,bC=!1,xC=mC?function(){mC.then(UC)}:tS.setImmediate?setImmediate.bind(null,UC):tS.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){UC(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(UC,0)},wC=function(e,t){PC.push([e,t]),SC&&(xC(),SC=!1)},_C=!0,SC=!0,CC=[],kC=[],MC=null,TC=nC,AC={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:pk,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{pk(e[0],e[1])}catch(e){}}))}},EC=AC,PC=[],RC=0,OC=[];function IC(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=tC,this._lib=!1;var t=this._PSD=EC;if(FS&&(this._stackHolder=ZS(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==uC)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&FC(this,this._value))}this._state=null,this._value=null,++t.ref,NC(this,e)}var LC={get:function(){var e=EC,t=QC;function n(n,r){var i=this,o=!e.global&&(e!==EC||t!==QC),a=o&&!rk(),s=new IC((function(t,s){BC(i,new DC(dk(n,e,o,a),dk(r,e,o,a),t,s,e))}));return FS&&HC(s,this),s}return n.prototype=uC,n},set:function(e){uS(this,"then",e&&e.prototype===uC?LC:{get:function(){return e},set:LC.set})}};function DC(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function NC(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&VC();t&&"function"==typeof t.then?NC(e,(function(e,n){t instanceof IC?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,zC(e)),n&&GC()}}),FC.bind(null,e))}catch(t){FC(e,t)}}function FC(e,t){if(kC.push(t),null===e._state){var n=e._lib&&VC();t=TC(t),e._state=!1,e._value=t,FS&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((function(){var n=pS(t,"stack");t._promise=e,uS(t,"stack",{get:function(){return bC?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){CC.some((function(t){return t._value===e._value}))||CC.push(e)}(e),zC(e),n&&GC()}}function zC(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)BC(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===RC&&(++RC,wC((function(){0==--RC&&WC()}),[]))}function BC(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++RC,wC(jC,[n,e,t])}else e._listeners.push(t)}function jC(e,t,n){try{MC=t;var r,i=t._value;t._state?r=e(i):(kC.length&&(kC=[]),r=e(i),-1===kC.indexOf(i)&&function(e){for(var t=CC.length;t;)if(CC[--t]._value===e._value)return void CC.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{MC=null,0==--RC&&WC(),--n.psd.ref||n.psd.finalize()}}function ZC(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=HS(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return FS&&((r=HS(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&ZC(e._prev,t,n)),t}function HC(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function UC(){VC()&&GC()}function VC(){var e=_C;return _C=!1,SC=!1,e}function GC(){var e,t,n;do{for(;PC.length>0;)for(e=PC,PC=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(PC.length>0);_C=!0,SC=!0}function WC(){var e=CC;CC=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=OC.slice(0),n=t.length;n;)t[--n]()}function $C(e){return new IC(uC,!1,e)}function qC(e,t){var n=EC;return function(){var r=VC(),i=EC;try{return sk(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{sk(i,!1),r&&GC()}}}lS(IC.prototype,{then:LC,_then:function(e,t){BC(this,new DC(null,null,e,t,EC))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):$C(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):$C(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),$C(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{bC=!0;var e=ZC(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{bC=!1}}},timeout:function(e,t){var n=this;return e<1/0?new IC((function(r,i){var o=setTimeout((function(){return i(new JS.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&uS(IC.prototype,Symbol.toStringTag,"Dexie.Promise"),AC.env=lk(),lS(IC,{all:function(){var e=DS.apply(null,arguments).map(ik);return new IC((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return IC.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof IC)return e;if(e&&"function"==typeof e.then)return new IC((function(t,n){e.then(t,n)}));var t=new IC(uC,!0,e);return HC(t,MC),t},reject:$C,race:function(){var e=DS.apply(null,arguments).map(ik);return new IC((function(t,n){e.map((function(e){return IC.resolve(e).then(t,n)}))}))},PSD:{get:function(){return EC},set:function(e){return EC=e}},totalEchoes:{get:function(){return QC}},newPSD:tk,usePSD:ck,scheduler:{get:function(){return wC},set:function(e){wC=e}},rejectionMapper:{get:function(){return TC},set:function(e){TC=e}},follow:function(e,t){return new IC((function(n,r){return tk((function(t,n){var r=EC;r.unhandleds=[],r.onunhandled=n,r.finalize=iC((function(){var e=this;!function(e){OC.push((function t(){e(),OC.splice(OC.indexOf(t),1)})),++RC,wC((function(){0==--RC&&WC()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),vC&&(vC.allSettled&&uS(IC,"allSettled",(function(){var e=DS.apply(null,arguments).map(ik);return new IC((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return IC.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),vC.any&&"undefined"!=typeof AggregateError&&uS(IC,"any",(function(){var e=DS.apply(null,arguments).map(ik);return new IC((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return IC.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var YC={awaits:0,echoes:0,id:0},XC=0,KC=[],JC=0,QC=0,ek=0;function tk(e,t,n,r){var i=EC,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ek;var a=AC.env;o.env=yC?{Promise:IC,PromiseProp:{value:IC,configurable:!0,writable:!0},all:IC.all,race:IC.race,allSettled:IC.allSettled,any:IC.any,resolve:IC.resolve,reject:IC.reject,nthen:fk(a.nthen,o),gthen:fk(a.gthen,o)}:{},t&&iS(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ck(o,e,n,r);return 0===o.ref&&o.finalize(),s}function nk(){return YC.id||(YC.id=++XC),++YC.awaits,YC.echoes+=100,YC.id}function rk(){return!!YC.awaits&&(0==--YC.awaits&&(YC.id=0),YC.echoes=100*YC.awaits,!0)}function ik(e){return YC.echoes&&e&&e.constructor===vC?(nk(),e.then((function(e){return rk(),e}),(function(e){return rk(),hk(e)}))):e}function ok(e){++QC,YC.echoes&&0!=--YC.echoes||(YC.echoes=YC.id=0),KC.push(EC),sk(e,!0)}function ak(){var e=KC[KC.length-1];KC.pop(),sk(e,!1)}function sk(e,t){var n=EC;if((t?!YC.echoes||JC++&&e===EC:!JC||--JC&&e===EC)||uk(t?ok.bind(null,e):ak),e!==EC&&(EC=e,n===AC&&(AC.env=lk()),yC)){var r=AC.env.Promise,i=e.env;hC.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(tS,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function lk(){var e=tS.Promise;return yC?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(tS,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:hC.then,gthen:e.prototype.then}:{}}function ck(e,t,n,r,i){var o=EC;try{return sk(e,!0),t(n,r,i)}finally{sk(o,!1)}}function uk(e){gC.call(pC,e)}function dk(e,t,n,r){return"function"!=typeof e?e:function(){var i=EC;n&&nk(),sk(t,!0);try{return e.apply(this,arguments)}finally{sk(i,!1),r&&uk(rk)}}}function fk(e,t){return function(n,r){return e.call(this,dk(n,t),dk(r,t))}}function pk(e,t){var n;try{n=t.onuncatched(e)}catch(Ab){}if(!1!==n)try{var r,i={promise:t,reason:e};if(tS.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),iS(r,i)):tS.CustomEvent&&iS(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&tS.dispatchEvent&&(dispatchEvent(r),!tS.PromiseRejectionEvent&&tS.onunhandledrejection))try{tS.onunhandledrejection(r)}catch(Ab){}FS&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(Ab){}}-1===(""+gC).indexOf("[native code]")&&(nk=rk=tC);var hk=IC.reject;function mk(e,t,n,r){if(e.idbdb&&(e._state.openComplete||EC.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===XS.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return mk(e,t,n,r)}))):hk(i)}return i._promise(t,(function(e,t){return tk((function(){return EC.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(e._state.openComplete)return hk(new JS.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return hk(new JS.DatabaseClosed);e.open().catch(tC)}return e._state.dbReadyPromise.then((function(){return mk(e,t,n,r)}))}var gk=String.fromCharCode(65535),vk="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yk=[],bk="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xk=bk,wk=bk,_k=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function Sk(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Ck={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function kk(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=AS(t))[e],t}}var Mk=function(){function e(){Ae(this,e)}return Re(e,[{key:"_trans",value:function(e,t,n){var r=this._tx||EC.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new JS.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=VC();try{return r&&r.db===this.db?r===EC.trans?r._promise(e,o,n):tk((function(){return r._promise(e,o,n)}),{trans:r,transless:EC.transless||EC}):mk(this.db,e,[this.name],o)}finally{a&&GC()}}},{key:"get",value:function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)}},{key:"where",value:function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(rS(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=nS(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==gk)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&FS&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit of a compound index [").concat(t.join("+"),"]"));var r=this.schema.idxByName,o=this.db._deps.indexedDB;function a(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}var s=t.reduce((function(t,n){var o=(0,i.Z)(t,2),s=o[0],l=o[1],c=r[n],u=e[n];return[s||c,s||!c?Sk(l,c&&c.multi?function(e){var t=xS(e,n);return rS(t)&&t.some((function(e){return a(u,e)}))}:function(e){return a(u,xS(e,n))}):l]}),[null,null]),l=(0,i.Z)(s,2),c=l[0],u=l[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(u):n?this.filter(u):this.where(t).equals("")}},{key:"filter",value:function(e){return this.toCollection().and(e)}},{key:"count",value:function(e){return this.toCollection().count(e)}},{key:"offset",value:function(e){return this.toCollection().offset(e)}},{key:"limit",value:function(e){return this.toCollection().limit(e)}},{key:"each",value:function(e){return this.toCollection().each(e)}},{key:"toArray",value:function(e){return this.toCollection().toArray(e)}},{key:"toCollection",value:function(){return new this.db.Collection(new this.db.WhereClause(this))}},{key:"orderBy",value:function(e){return new this.db.Collection(new this.db.WhereClause(this,rS(e)?"[".concat(e.join("+"),"]"):e))}},{key:"reverse",value:function(){return this.toCollection().reverse()}},{key:"mapToClass",value:function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(sS(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}},{key:"defineClass",value:function(){return this.mapToClass((function(e){iS(this,e)}))}},{key:"add",value:function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=kk(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?IC.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{wS(e,o,t)}catch(e){}return t}))}},{key:"update",value:function(e,t){if("object"!=typeof e||rS(e))return this.where(":id").equals(e).modify(t);var n=xS(e,this.schema.primKey.keyPath);if(void 0===n)return hk(new JS.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?nS(t).forEach((function(n){wS(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}},{key:"put",value:function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=kk(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?IC.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{wS(e,o,t)}catch(e){}return t}))}},{key:"delete",value:function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?IC.reject(e.failures[0]):void 0}))}},{key:"clear",value:function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Ck})})).then((function(e){return e.numFailures?IC.reject(e.failures[0]):void 0}))}},{key:"bulkGet",value:function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))}},{key:"bulkAdd",value:function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new JS.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new JS.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=s&&a?e.map(kk(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new YS("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(l," operations failed"),a)}))}))}},{key:"bulkPut",value:function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new JS.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new JS.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=s&&a?e.map(kk(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new YS("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(l," operations failed"),a)}))}))}},{key:"bulkDelete",value:function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new YS("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),o)}))}}]),e}();function Tk(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return a(e);r||(r=lC),i||(i=tC);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function a(e){nS(e).forEach((function(t){var n=e[t];if(rS(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new JS.InvalidArgument("Invalid event config");var r=o(t,nC,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){yS((function(){e.apply(null,t)}))}))}))}}))}}function Ak(e,t){return dS(t).from({prototype:e}),t}function Ek(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Pk(e,t){e.filter=Sk(e.filter,t)}function Rk(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Sk(r(),t())}:t,e.justLimit=n&&!r}function Ok(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new JS.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ik(e,t,n){var r=Ok(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Lk(e,t,n,r){var i=e.replayFilter?Sk(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),sS(o,s)||(o[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Dk(Ik(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Dk(Ik(e,r,n),Sk(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Dk(e,t,n,r){var i=qC(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=tC}),(function(t){e.fail(t),n=tC}))||i(e.value,e,(function(e){return n=e})),n()}))}))}function Nk(e,t){try{var n=Fk(e),r=Fk(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(zk(e),zk(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=Nk(e[o],t[o]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Fk(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=RS(e);return"ArrayBuffer"===n?"binary":n}function zk(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Bk=function(){function e(){Ae(this,e)}return Re(e,[{key:"_read",value:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,hk.bind(null,n.error)):n.table._trans("readonly",e).then(t)}},{key:"_write",value:function(e){var t=this._ctx;return t.error?t.table._trans(null,hk.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}},{key:"_addAlgorithm",value:function(e){var t=this._ctx;t.algorithm=Sk(t.algorithm,e)}},{key:"_iterate",value:function(e,t){return Lk(this._ctx,e,t,this._ctx.table.core)}},{key:"clone",value:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&iS(n,e),t._ctx=n,t}},{key:"raw",value:function(){return this._ctx.valueMapper=null,this}},{key:"each",value:function(e){var t=this._ctx;return this._read((function(n){return Lk(t,e,n,t.table.core)}))}},{key:"count",value:function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(Ek(n,!0))return r.count({trans:e,query:{index:Ok(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return Lk(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)}},{key:"sortBy",value:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)}},{key:"toArray",value:function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&Ek(n,!0)&&n.limit>0){var r=n.valueMapper,i=Ok(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return Lk(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)}},{key:"offset",value:function(e){var t=this._ctx;return e<=0||(t.offset+=e,Ek(t)?Rk(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):Rk(t,(function(){var t=e;return function(){return--t<0}}))),this}},{key:"limit",value:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Rk(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}},{key:"until",value:function(e,t){return Pk(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}},{key:"first",value:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}},{key:"last",value:function(e){return this.reverse().first(e)}},{key:"filter",value:function(e){var t,n;return Pk(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Sk(t.isMatch,n),this}},{key:"and",value:function(e){return this.filter(e)}},{key:"or",value:function(e){return new this.db.WhereClause(this._ctx.table,e,this)}},{key:"reverse",value:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}},{key:"desc",value:function(){return this.reverse()}},{key:"eachKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}},{key:"eachUniqueKey",value:function(e){return this._ctx.unique="unique",this.eachKey(e)}},{key:"eachPrimaryKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}},{key:"keys",value:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}},{key:"primaryKeys",value:function(e){var t=this._ctx;if("next"===t.dir&&Ek(t,!0)&&t.limit>0)return this._read((function(e){var n=Ok(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}},{key:"uniqueKeys",value:function(e){return this._ctx.unique="unique",this.keys(e)}},{key:"firstKey",value:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}},{key:"lastKey",value:function(e){return this.reverse().firstKey(e)}},{key:"distinct",value:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Pk(this._ctx,(function(e){var t=e.primaryKey.toString(),r=sS(n,t);return n[t]=!0,!r})),this}},{key:"modify",value:function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var o=nS(e),a=o.length;i=function(t){for(var n=!1,r=0;r<a;++r){var i=o[r],s=e[i];xS(t,i)!==s&&(wS(t,i,s),n=!0)}return n}}var s=n.table.core,l=s.schema.primaryKey,c=l.outbound,u=l.extractKey,d=t.db._options.modifyChunkSize||200,f=[],p=0,h=[],m=function(e,t){var n=t.failures,r=t.numFailures;p+=e-r;var i,o=uy(nS(n));try{for(o.s();!(i=o.n()).done;){var a=i.value;f.push(n[a])}}catch(s){o.e(s)}finally{o.f()}};return t.clone().primaryKeys().then((function(t){return function o(a){var l=Math.min(d,t.length-a);return s.getMany({trans:r,keys:t.slice(a,a+l),cache:"immutable"}).then((function(f){for(var p=[],h=[],g=c?[]:null,v=[],y=0;y<l;++y){var b=f[y],x={value:AS(b),primKey:t[a+y]};!1!==i.call(x,x.value,x)&&(null==x.value?v.push(t[a+y]):c||0===Nk(u(b),u(x.value))?(h.push(x.value),c&&g.push(t[a+y])):(v.push(t[a+y]),p.push(x.value)))}var w=Ek(n)&&n.limit===1/0&&("function"!=typeof e||e===jk)&&{index:n.index,range:n.range};return Promise.resolve(p.length>0&&s.mutate({trans:r,type:"add",values:p}).then((function(e){for(var t in e.failures)v.splice(parseInt(t),1);m(p.length,e)}))).then((function(){return(h.length>0||w&&"object"==typeof e)&&s.mutate({trans:r,type:"put",keys:g,values:h,criteria:w,changeSpec:"function"!=typeof e&&e}).then((function(e){return m(h.length,e)}))})).then((function(){return(v.length>0||w&&e===jk)&&s.mutate({trans:r,type:"delete",keys:v,criteria:w}).then((function(e){return m(v.length,e)}))})).then((function(){return t.length>a+l&&o(a+d)}))}))}(0).then((function(){if(f.length>0)throw new qS("Error modifying one or more objects",f,p,h);return t.length}))}))}))}},{key:"delete",value:function(){var e=this._ctx,t=e.range;return Ek(e)&&(e.isPrimKey&&!wk||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new qS("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify(jk)}}]),e}(),jk=function(e,t){return t.value=null};function Zk(e,t){return e<t?-1:e===t?0:1}function Hk(e,t){return e>t?-1:e===t?0:1}function Uk(e,t,n){var r=e instanceof Yk?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Vk(e){return new e.Collection(e,(function(){return qk("")})).limit(0)}function Gk(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,l=0;l<a;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],c)<0&&(s=l)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function Wk(e,t,n,r){var i,o,a,s,l,c,u,d=n.length;if(!n.every((function(e){return"string"==typeof e})))return Uk(e,"String expected.");function f(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?Zk:Hk;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}f("next");var p=new e.Collection(e,(function(){return $k(s[0],l[d-1]+r)}));p._ondirectionchange=function(e){f(e)};var h=0;return p._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var f=o(i);if(t(f,l,h))return!0;for(var p=null,m=h;m<d;++m){var g=Gk(i,f,s[m],l[m],a,c);null===g&&null===p?h=m+1:(null===p||a(p,g)>0)&&(p=g)}return n(null!==p?function(){e.continue(p+u)}:r),!1})),p}function $k(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function qk(e){return{type:1,lower:e,upper:e}}var Yk=function(){function e(){Ae(this,e)}return Re(e,[{key:"Collection",get:function(){return this._ctx.table.db.Collection}},{key:"between",value:function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Vk(this):new this.Collection(this,(function(){return $k(e,t,!n,!r)}))}catch(e){return Uk(this,vk)}}},{key:"equals",value:function(e){return null==e?Uk(this,vk):new this.Collection(this,(function(){return qk(e)}))}},{key:"above",value:function(e){return null==e?Uk(this,vk):new this.Collection(this,(function(){return $k(e,void 0,!0)}))}},{key:"aboveOrEqual",value:function(e){return null==e?Uk(this,vk):new this.Collection(this,(function(){return $k(e,void 0,!1)}))}},{key:"below",value:function(e){return null==e?Uk(this,vk):new this.Collection(this,(function(){return $k(void 0,e,!1,!0)}))}},{key:"belowOrEqual",value:function(e){return null==e?Uk(this,vk):new this.Collection(this,(function(){return $k(void 0,e)}))}},{key:"startsWith",value:function(e){return"string"!=typeof e?Uk(this,"String expected."):this.between(e,e+gk,!0,!0)}},{key:"startsWithIgnoreCase",value:function(e){return""===e?this.startsWith(e):Wk(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],gk)}},{key:"equalsIgnoreCase",value:function(e){return Wk(this,(function(e,t){return e===t[0]}),[e],"")}},{key:"anyOfIgnoreCase",value:function(){var e=DS.apply(LS,arguments);return 0===e.length?Vk(this):Wk(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")}},{key:"startsWithAnyOfIgnoreCase",value:function(){var e=DS.apply(LS,arguments);return 0===e.length?Vk(this):Wk(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,gk)}},{key:"anyOf",value:function(){var e=this,t=DS.apply(LS,arguments),n=this._cmp;try{t.sort(n)}catch(t){return Uk(this,vk)}if(0===t.length)return Vk(this);var r=new this.Collection(this,(function(){return $k(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;n(a,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r}},{key:"notEqual",value:function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}},{key:"noneOf",value:function(){var e=DS.apply(LS,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Uk(this,vk)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}},{key:"inAnyRange",value:function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,s=this._max;if(0===e.length)return Vk(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Uk(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",JS.InvalidArgument);var l,c=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=i;function f(e,t){return d(e[0],t[0])}try{l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=s(o[1],t[1]);break}}return n===i&&e.push(t),e}),[]),l.sort(f)}catch(e){return Uk(this,vk)}var p=0,h=u?function(e){return i(e,l[p][1])>0}:function(e){return i(e,l[p][1])>=0},m=c?function(e){return o(e,l[p][0])>0}:function(e){return o(e,l[p][0])>=0},g=h,v=new this.Collection(this,(function(){return $k(l[0][0],l[l.length-1][1],!c,!u)}));return v._ondirectionchange=function(e){"next"===e?(g=h,d=i):(g=m,d=o),l.sort(f)},v._addAlgorithm((function(e,t,r){for(var o=e.key;g(o);)if(++p===l.length)return t(r),!1;return!!function(e){return!h(e)&&!m(e)}(o)||(0===n._cmp(o,l[p][1])||0===n._cmp(o,l[p][0])||t((function(){d===i?e.continue(l[p][0]):e.continue(l[p][1])})),!1)})),v}},{key:"startsWithAnyOf",value:function(){var e=DS.apply(LS,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Vk(this):this.inAnyRange(e.map((function(e){return[e,e+gk]}))):Uk(this,"startsWithAnyOf() only works with strings")}}]),e}();function Xk(e){return qC((function(t){return Kk(t),e(t.target.error),!1}))}function Kk(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Jk=Tk(null,"storagemutated"),Qk=function(){function e(){Ae(this,e)}return Re(e,[{key:"_lock",value:function(){return vS(!EC.global),++this._reculock,1!==this._reculock||EC.global||(EC.lockOwnerFor=this),this}},{key:"_unlock",value:function(){if(vS(!EC.global),0==--this._reculock)for(EC.global||(EC.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ck(e[1],e[0])}catch(e){}}return this}},{key:"_locked",value:function(){return this._reculock&&EC.lockOwnerFor!==this}},{key:"create",value:function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(vS(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new JS.DatabaseClosed(r);case"MissingAPIError":throw new JS.MissingAPI(r.message,r);default:throw new JS.OpenFailed(r)}if(!this.active)throw new JS.TransactionInactive;return vS(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=qC((function(n){Kk(n),t._reject(e.error)})),e.onabort=qC((function(n){Kk(n),t.active&&t._reject(new JS.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=qC((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Jk.storagemutated.fire(e.mutatedParts)})),this}},{key:"_promise",value:function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return hk(new JS.ReadOnly("Transaction is readonly"));if(!this.active)return hk(new JS.TransactionInactive);if(this._locked())return new IC((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},EC])}));if(n)return tk((function(){var e=new IC((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new IC((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i}},{key:"_root",value:function(){return this.parent?this.parent._root():this}},{key:"waitFor",value:function(e){var t=this._root(),n=IC.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new IC((function(e,r){n.then((function(n){return t._waitingQueue.push(qC(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(qC(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))}},{key:"abort",value:function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new JS.Abort))}},{key:"table",value:function(e){var t=this._memoizedTables||(this._memoizedTables={});if(sS(t,e))return t[e];var n=this.schema[e];if(!n)throw new JS.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}]),e}();function eM(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+tM(t)}}function tM(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function nM(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:bS(n,(function(e){return[e.name,e]}))}}var rM=function(e){try{return e.only([[]]),rM=function(){return[[]]},[[]]}catch(e){return rM=function(){return gk},gk}};function iM(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return xS(t,e)}}(e):function(t){return xS(t,e)}}function oM(e){return[].slice.call(e)}var aM=0;function sM(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function lM(e,t){var n=e._novip,r=t.db,o=function(e,t,n,r){var o=n.IDBKeyRange,a=(n.indexedDB,function(e,t){return t.reduce((function(e,t){var n=t.create;return s(s({},e),n(e))}),e)}(function(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}var o=function(e,t){var n=oM(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=rS(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:iM(t)},indexes:oM(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,a={name:t,compound:rS(i),keyPath:i,unique:n,multiEntry:r,extractKey:iM(i)};return o[sM(i)]=a,a})),getIndexByKeyPath:function(e){return o[sM(e)]}};return o[":id"]=a.primaryKey,null!=t&&(o[sM(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),a=o.schema,s=o.hasGetAll,l=a.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,o=e.type,a=e.keys,s=e.values,l=e.range;return new Promise((function(e,c){e=qC(e);var u=n.objectStore(t),d=null==u.keyPath,f="put"===o||"add"===o;if(!f&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var p,h=(a||s||{length:1}).length;if(a&&s&&a.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var m=[],g=[],v=0,y=function(e){++v,Kk(e)};if("deleteRange"===o){if(4===l.type)return e({numFailures:v,failures:g,results:[],lastResult:void 0});3===l.type?m.push(p=u.clear()):m.push(p=u.delete(r(l)))}else{var b=f?d?[s,a]:[s,null]:[a,null],x=(0,i.Z)(b,2),w=x[0],_=x[1];if(f)for(var S=0;S<h;++S)m.push(p=_&&void 0!==_[S]?u[o](w[S],_[S]):u[o](w[S])),p.onerror=y;else for(var C=0;C<h;++C)m.push(p=u[o](w[C])),p.onerror=y}var k=function(t){var n=t.target.result;m.forEach((function(e,t){return null!=e.error&&(g[t]=e.error)})),e({numFailures:v,failures:g,results:"delete"===o?a:m.map((function(e){return e.result})),lastResult:n})};p.onerror=function(e){y(e),k(e)},p.onsuccess=k}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=qC(e);for(var o,a=n.objectStore(t),s=r.length,l=new Array(s),c=0,u=0,d=function(t){var n=t.target;l[n._pos]=n.result,++u===c&&e(l)},f=Xk(i),p=0;p<s;++p)null!=r[p]&&((o=a.get(r[p]))._pos=p,o.onsuccess=d,o.onerror=f,++c);0===c&&e(l)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=qC(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Xk(i)}))},query:function(e){return function(n){return new Promise((function(i,o){i=qC(i);var a=n.trans,s=n.values,l=n.limit,c=n.query,u=l===1/0?void 0:l,d=c.index,f=c.range,p=a.objectStore(t),h=d.isPrimaryKey?p:p.index(d.name),m=r(f);if(0===l)return i({result:[]});if(e){var g=s?h.getAll(m,u):h.getAllKeys(m,u);g.onsuccess=function(e){return i({result:e.target.result})},g.onerror=Xk(o)}else{var v=0,y=s||!("openKeyCursor"in h)?h.openCursor(m):h.openKeyCursor(m),b=[];y.onsuccess=function(e){var t=y.result;return t?(b.push(s?t.value:t.primaryKey),++v===l?i({result:b}):void t.continue()):i({result:b})},y.onerror=Xk(o)}}))}}(s),openCursor:function(e){var n=e.trans,i=e.values,o=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,l){e=qC(e);var c=o.index,u=o.range,d=n.objectStore(t),f=c.isPrimaryKey?d:d.index(c.name),p=a?s?"prevunique":"prev":s?"nextunique":"next",h=i||!("openKeyCursor"in f)?f.openCursor(r(u),p):f.openKeyCursor(r(u),p);h.onerror=Xk(l),h.onsuccess=qC((function(t){var r=h.result;if(r){r.___id=++aM,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=qC(l),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=qC(e),h.onerror=Xk(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=s,e(t)}})),n=function(){if(h.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return h.onsuccess=qC((function(e){h.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,n(),t},e(r)}else e(null)}),l)}))},count:function(e){var n=e.query,i=e.trans,o=n.index,a=n.range;return new Promise((function(e,n){var s=i.objectStore(t),l=o.isPrimaryKey?s:s.index(o.name),c=r(a),u=c?l.count(c):l.count();u.onsuccess=qC((function(t){return e(t.target.result)})),u.onerror=Xk(n)}))}}}(e)})),c={};return l.forEach((function(e){return c[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!c[e])throw new Error("Table '".concat(e,"' not found"));return c[e]},MIN_KEY:-1/0,MAX_KEY:rM(t),schema:a}}(t,o,r),e.dbcore));return{dbcore:a}}(n._middlewares,r,n._deps,t);n.core=o.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function cM(e,t,n,r){var i=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=pS(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?uS(t,e,{get:function(){return this.table(e)},set:function(t){cS(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function uM(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function dM(e,t){return e._cfg.version-t._cfg.version}function fM(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=EC.transless||EC;tk((function(){EC.trans=o,EC.transless=s,0===t?(nS(i).forEach((function(e){hM(n,e,i[e].primKey,i[e].indexes)})),lM(e,n),IC.follow((function(){return e.on.populate.fire(o)})).catch(a)):function(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=gM(i,i.idbdb,r),l=!1;return a.filter((function(e){return e._cfg.version>=t})).forEach((function(e){o.push((function(){var o=s,a=e._cfg.dbschema;vM(i,o,r),vM(i,a,r),s=i._dbSchema=a;var c=pM(o,a);c.add.forEach((function(e){hM(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new JS.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return mM(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),mM(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=e._cfg.contentUpgrade;if(u&&e._cfg.version>t){lM(i,r),n._memoizedTables={},l=!0;var d=_S(a);c.del.forEach((function(e){d[e]=o[e]})),uM(i,[i.Transaction.prototype]),cM(i,[i.Transaction.prototype],nS(d),d),n.schema=d;var f,p=NS(u);p&&nk();var h=IC.follow((function(){if((f=u(n))&&p){var e=rk.bind(null,null);f.then(e,e)}}));return f&&"function"==typeof f.then?IC.resolve(f):h.then((function(){return f}))}})),o.push((function(t){l&&xk||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(e._cfg.dbschema,t),uM(i,[i.Transaction.prototype]),cM(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema}))})),function e(){return o.length?IC.resolve(o.shift()(n.idbtrans)).then(e):IC.resolve()}().then((function(){var e,t;t=r,nS(e=s).forEach((function(n){t.db.objectStoreNames.contains(n)||hM(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(a)}))}function pM(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!bk)a.recreate=!0,r.change.push(a);else{var s=i.idxByName,l=o.idxByName,c=void 0;for(c in s)l[c]||a.del.push(c);for(c in l){var u=s[c],d=l[c];u?u.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function hM(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return mM(i,e)})),i}function mM(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function gM(e,t,n){var r={};return mS(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=eM(tM(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[],s=0;s<t.indexNames.length;++s){var l=t.index(t.indexNames[s]);i=l.keyPath;var c=eM(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(c)}r[e]=nM(e,o,a)})),r}function vM(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var c=s.indexNames[l],u=s.index(c).keyPath,d="string"==typeof u?u:"["+mS(u).join("+")+"]";if(t[a]){var f=t[a].idxByName[d];f&&(f.name=c,delete t[a].idxByName[d],t[a].idxByName[c]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&tS.WorkerGlobalScope&&tS instanceof tS.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}var yM=function(){function e(){Ae(this,e)}return Re(e,[{key:"_parseStoresSpec",value:function(e,t){nS(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return eM(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),rS(r),0===t)})),i=r.shift();if(i.multi)throw new JS.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new JS.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new JS.Schema("Index must have a name and cannot be an empty string")})),t[n]=nM(n,i,r)}}))}},{key:"stores",value:function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?iS(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){iS(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,uM(t,[t._allTables,t,t.Transaction.prototype]),cM(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],nS(i),i),t._storeNames=nS(i),this}},{key:"upgrade",value:function(e){return this._cfg.contentUpgrade=cC(this._cfg.contentUpgrade||tC,e),this}}]),e}();function bM(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ZM("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function xM(e){return e&&"function"==typeof e.databases}function wM(e){return tk((function(){return EC.letThrough=!0,e()}))}function _M(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function SM(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):rS(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function CM(e,t,n){var r=arguments.length;if(r<2)throw new JS.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=CS(i);return[e,o,n]}function kM(e,t,n,r,i){return IC.resolve().then((function(){var o=EC.transless||EC,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===XS.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return kM(e,t,n,null,i)}))):hk(r)}var l,c=NS(i);c&&nk();var u=IC.follow((function(){if(l=i.call(a,a))if(c){var e=rk.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=SM(l))}),s);return(l&&"function"==typeof l.then?IC.resolve(l).then((function(e){return a.active?e:hk(new JS.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return l}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),hk(e)}))}))}function MM(e,t,n){for(var r=rS(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var TM={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{},{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(e,t,n){var r=sM(e),l=i[r]=i[r]||[],c=null==e?0:"string"==typeof e?1:e.length,u=t>0,d=s(s({},n),{},{isVirtual:u,keyTail:t,keyLength:c,extractKey:iM(e),unique:!u&&n.unique});return l.push(d),d.isPrimaryKey||o.push(d),c>1&&a(2===c?e[0]:e.slice(0,c-1),t+1,n),l.sort((function(e,t){return e.keyTail-t.keyTail})),d}var l=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];var c,u=uy(r.indexes);try{for(u.s();!(c=u.n()).done;){var d=c.value;a(d.keyPath,0,d)}}catch(h){u.e(h)}finally{u.f()}function f(t){var n,r,i=t.query.index;return i.isVirtual?s(s({},t),{},{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:MM(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:MM(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}var p=s(s({},n),{},{schema:s(s({},r),{},{primaryKey:l,indexes:o,getIndexByKeyPath:function(e){var t=i[sM(e)];return t&&t[0]}}),count:function(e){return n.count(f(e))},query:function(e){return n.query(f(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,o=r.isVirtual,a=r.keyLength;return o?n.openCursor(f(t)).then((function(n){return n&&function(n){var r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(MM(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(MM(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}});return r}(n)})):n.openCursor(t)}});return p}})}};function AM(e,t,n,r){return n=n||{},r=r||"",nS(e).forEach((function(i){if(sS(t,i)){var o=e[i],a=t[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var s=RS(o);s!==RS(a)?n[r+i]=t[i]:"Object"===s?AM(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),nS(t).forEach((function(i){sS(e,i)||(n[r+i]=t[i])})),n}var EM={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{},{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=s(s({},n),{},{mutate:function(e){var i=EC.trans,o=i.table(t).hook,a=o.deleting,l=o.creating,c=o.updating;switch(e.type){case"add":if(l.fire===tC)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"put":if(l.fire===tC&&c.fire===tC)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"delete":if(a.fire===tC)break;return i._promise("readwrite",(function(){return u(e)}),!0);case"deleteRange":if(a.fire===tC)break;return i._promise("readwrite",(function(){return function(e){return d(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function u(e){var t=EC.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?s(s({},e),{},{keys:i}):s({},e)).type&&(e.values=(0,yt.Z)(e.values)),e.keys&&(e.keys=(0,yt.Z)(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((function(o){var s=i.map((function(n,i){var s=o[i],u={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(u,n,s,t);else if("add"===e.type||void 0===s){var d=l.fire.call(u,n,e.values[i],t);null==n&&null!=d&&(n=d,e.keys[i]=n,r.outbound||wS(e.values[i],r.keyPath,n))}else{var f=AM(s,e.values[i]),p=c.fire.call(u,f,n,s,t);if(p){var h=e.values[i];Object.keys(p).forEach((function(e){sS(h,e)?h[e]=p[e]:wS(h,e,p[e])}))}}return u}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,a=t.numFailures,l=t.lastResult,c=0;c<i.length;++c){var u=r?r[c]:i[c],d=s[c];null==u?d.onerror&&d.onerror(n[c]):d.onsuccess&&d.onsuccess("put"===e.type&&o[c]?e.values[c]:u)}return{failures:n,results:r,numFailures:a,lastResult:l}})).catch((function(e){return s.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function d(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return u({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:d(e,s(s({},t),{},{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}});return i}})}};function PM(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===Nk(t.keys[i],e[o])&&(r.push(n?AS(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}var RM={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{},{getMany:function(e){if(!e.cache)return n.getMany(e);var t=PM(e.keys,e.trans._cache,"clone"===e.cache);return t?IC.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?AS(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function OM(e){return!("from"in e)}var IM=function e(t,n){if(!this){var r=new e;return t&&"d"in t&&iS(r,t),r}iS(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0})};function LM(e,t,n){var r=Nk(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(OM(e))return iS(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(Nk(n,e.from)<0)return i?LM(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},FM(e);if(Nk(t,e.to)>0)return o?LM(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},FM(e);Nk(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Nk(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&DM(e,i),o&&a&&DM(e,o)}}function DM(e,t){OM(t)||function e(t,n){var r=n.from,i=n.to,o=n.l,a=n.r;LM(t,r,i),o&&e(t,o),a&&e(t,a)}(e,t)}function NM(e){var t=OM(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Nk(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Nk(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function FM(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o="r"===i?"l":"r",a=s({},e),l=e[i];e.from=l.from,e.to=l.to,e[i]=l[i],a[i]=l[o],e[o]=a,a.d=zM(a)}e.d=zM(e)}function zM(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}lS(IM.prototype,(0,o.Z)({add:function(e){return DM(this,e),this},addKey:function(e){return LM(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return LM(t,e,e)})),this}},OS,(function(){return NM(this)})));var BM,jM={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new IM(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{},{table:function(r){var o=e.table(r),a=o.schema,l=a.primaryKey,c=l.extractKey,u=l.outbound,d=s(s({},o),{},{mutate:function(e){var s=e.trans,l=s.mutatedParts||(s.mutatedParts={}),c=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return l[n]||(l[n]=new IM)},u=c(""),d=c(":dels"),f=e.type,p="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],h=(0,i.Z)(p,2),m=h[0],g=h[1],v=e.trans._cache;return o.mutate(e).then((function(e){if(rS(m)){"delete"!==f&&(m=e.results),u.addKeys(m);var t=PM(m,v);t||"add"===f||d.addKeys(m),(t||g)&&function(e,t,n,r){t.indexes.forEach((function(t){var i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}var a=function(e){return t.multiEntry&&rS(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(n||r).forEach((function(e,t){var i=n&&o(n[t]),s=r&&o(r[t]);0!==Nk(i,s)&&(null!=i&&a(i),null!=s&&a(s))}))}))}(c,a,t,g)}else if(m){var r={from:m.lower,to:m.upper};d.add(r),u.add(r)}else u.add(n),d.add(n),a.indexes.forEach((function(e){return c(e.name).add(n)}));return e}))}}),f=function(t){var n,r,i=t.query,o=i.index,a=i.range;return[o,new IM(null!==(n=a.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=a.upper)&&void 0!==r?r:e.MAX_KEY)]},p={get:function(e){return[l,new IM(e.key)]},getMany:function(e){return[l,(new IM).addKeys(e.keys)]},count:f,query:f,openCursor:f};return nS(p).forEach((function(e){d[e]=function(a){var l=EC,d=l.subscr;if(d){var f=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return d[n]||(d[n]=new IM)},h=f(""),m=f(":dels"),g=p[e](a),v=(0,i.Z)(g,2),y=v[0],b=v[1];if(f(y.name||"").add(b),!y.isPrimaryKey){if("count"!==e){var x="query"===e&&u&&a.values&&o.query(s(s({},a),{},{values:!1}));return o[e].apply(this,arguments).then((function(t){if("query"===e){if(u&&a.values)return x.then((function(e){var n=e.result;return h.addKeys(n),t}));var n=a.values?t.result.map(c):t.result;a.values?h.addKeys(n):m.addKeys(n)}else if("openCursor"===e){var r=t,i=a.values;return r&&Object.create(r,{key:{get:function(){return m.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return m.addKey(e),e}},value:{get:function(){return i&&h.addKey(r.primaryKey),r.value}}})}return t}))}m.add(n)}}return o[e].apply(this,arguments)}})),d}})}},ZM=function(){function e(t,n){var r=this;Ae(this,e),this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=s({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:tC,dbReadyPromise:null,cancelOpen:tC,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};l.dbReadyPromise=new IC((function(e){l.dbReadyResolve=e})),l.openCanceller=new IC((function(e,t){l.cancelOpen=t})),this._state=l,this.name=t,this.on=Tk(this,"populate","blocked","versionchange","close",{ready:[cC,tC]}),this.on.ready.subscribe=gS(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||IC.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var o=r;i||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(a=this,Ak(Bk.prototype,(function(e,t){this.db=a;var n=Ck,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table,s=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s!==nC?s:null}}))),this.Table=function(e){return Ak(Mk.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Tk(null,{creating:[oC,tC],reading:[rC,nC],updating:[sC,tC],deleting:[aC,tC]})}))}(this),this.Transaction=function(e){return Ak(Qk.prototype,(function(t,n,r,i,o){var a=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Tk(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new IC((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),hk(e)}))}))}(this),this.Version=function(e){return Ak(yM.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Ak(Yk.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new JS.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=rM(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),yk.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(TM),this.use(EM),this.use(jM),this.use(RM),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach((function(e){return e(r)}))}return Re(e,[{key:"version",value:function(e){if(isNaN(e)||e<.1)throw new JS.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new JS.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(dM),n.stores({}),this._state.autoSchema=!1,n)}},{key:"_whenReady",value:function(e){var t=this;return this.idbdb&&(this._state.openComplete||EC.letThrough||this._vip)?e():new IC((function(e,n){if(t._state.openComplete)return n(new JS.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new JS.DatabaseClosed);t.open().catch(tC)}t._state.dbReadyPromise.then(e,n)})).then(e)}},{key:"use",value:function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this}},{key:"unuse",value:function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this}},{key:"open",value:function(){return function(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?hk(t.dbOpenError):e}));FS&&(t.openCanceller._stackHolder=ZS()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new JS.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return IC.race([r,("undefined"==typeof navigator?IC.resolve():_M()).then((function(){return new IC((function(r,o){if(i(),!n)throw new JS.MissingAPI;var l=e.name,c=t.autoSchema?n.open(l):n.open(l,Math.round(10*e.verno));if(!c)throw new JS.MissingAPI;c.onerror=Xk(o),c.onblocked=qC(e._fireOnBlocked),c.onupgradeneeded=qC((function(r){if(a=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=Kk,a.abort(),c.result.close();var i=n.deleteDatabase(l);i.onsuccess=i.onerror=qC((function(){o(new JS.NoSuchDatabase("Database ".concat(l," doesnt exist")))}))}else{a.onerror=Xk(o);var u=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;s=u<1,e._novip.idbdb=c.result,fM(e,u/10,a,o)}}),o),c.onsuccess=qC((function(){a=null;var n,i=e._novip.idbdb=c.result,o=mS(i.objectStoreNames);if(o.length>0)try{var u=i.transaction(1===(n=o).length?n[0]:n,"readonly");t.autoSchema?function(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=gM(0,t,n);r._storeNames=mS(t.objectStoreNames,0),cM(r,[r._allTables],nS(i),i)}(e,i,u):(vM(e,e._dbSchema,u),function(e,t){var n=pM(gM(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,u)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),lM(e,u)}catch(e){}yk.push(e),i.onversionchange=qC((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),i.onclose=qC((function(t){e.on("close").fire(t)})),s&&function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!xM(n)&&"__dbnames"!==t&&bM(n,r).put({name:t}).catch(tC)}(e._deps,l),r()}),o)}))}))]).then((function(){return i(),t.onReadyBeingFired=[],IC.resolve(wM((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(cC,tC);return t.onReadyBeingFired=[],IC.resolve(wM((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(n){t.dbOpenError=n;try{a&&a.abort()}catch(e){}return r===t.openCanceller&&e._close(),hk(n)})).finally((function(){t.openComplete=!0,o()}))}(this)}},{key:"_close",value:function(){var e=this._state,t=yk.indexOf(this);if(t>=0&&yk.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new IC((function(t){e.dbReadyResolve=t})),e.openCanceller=new IC((function(t,n){e.cancelOpen=n}))}},{key:"close",value:function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new JS.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}},{key:"delete",value:function(){var e=this,t=arguments.length>0,n=this._state;return new IC((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=qC((function(){!function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!xM(n)&&"__dbnames"!==t&&bM(n,r).delete(t).catch(tC)}(e._deps,e.name),r()})),t.onerror=Xk(i),t.onblocked=e._fireOnBlocked};if(t)throw new JS.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))}},{key:"backendDB",value:function(){return this.idbdb}},{key:"isOpen",value:function(){return null!==this.idbdb}},{key:"hasBeenClosed",value:function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}},{key:"hasFailed",value:function(){return null!==this._state.dbOpenError}},{key:"dynamicallyOpened",value:function(){return this._state.autoSchema}},{key:"tables",get:function(){var e=this;return nS(this._allTables).map((function(t){return e._allTables[t]}))}},{key:"transaction",value:function(){var e=CM.apply(this,arguments);return this._transaction.apply(this,e)}},{key:"_transaction",value:function(e,t,n){var r=this,i=EC.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)o="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new JS.InvalidArgument("Invalid transaction mode: "+e);o="readwrite"}if(i){if("readonly"===i.mode&&"readwrite"===o){if(!s)throw new JS.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new JS.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):hk(e)}var l=kM.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):EC.trans?ck(EC.transless,(function(){return r._whenReady(l)})):this._whenReady(l)}},{key:"table",value:function(e){if(!sS(this._allTables,e))throw new JS.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]}}]),e}(),HM="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",UM=function(){function e(t){Ae(this,e),this._subscribe=t}return Re(e,[{key:"subscribe",value:function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}},{key:HM,value:function(){return this}}]),e}();function VM(e,t){return nS(t).forEach((function(n){DM(e[n]||(e[n]=new IM),t[n])})),e}try{BM={indexedDB:tS.indexedDB||tS.mozIndexedDB||tS.webkitIndexedDB||tS.msIndexedDB,IDBKeyRange:tS.IDBKeyRange||tS.webkitIDBKeyRange}}catch(Ab){BM={indexedDB:null,IDBKeyRange:null}}var GM=ZM;function WM(e){var t=$M;try{$M=!0,Jk.storagemutated.fire(e)}finally{$M=t}}lS(GM,s(s({},eC),{},{delete:function(e){return new GM(e,{addons:[]}).delete()},exists:function(e){return new GM(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return xM(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return"__dbnames"!==e}))})):bM(t,n).toCollection().primaryKeys()}(GM.dependencies).then(e)}catch(e){return hk(new JS.MissingAPI)}},defineClass:function(){return function(e){iS(this,e)}},ignoreTransaction:function(e){return EC.trans?ck(EC.transless,e):e()},vip:wM,async:function(e){return function(){try{var t=SM(e.apply(this,arguments));return t&&"function"==typeof t.then?t:IC.resolve(t)}catch(e){return hk(e)}}},spawn:function(e,t,n){try{var r=SM(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:IC.resolve(r)}catch(e){return hk(e)}},currentTransaction:{get:function(){return EC.trans||null}},waitFor:function(e,t){var n=IC.resolve("function"==typeof e?GM.ignoreTransaction(e):e).timeout(t||6e4);return EC.trans?EC.trans.waitFor(n):n},Promise:IC,debug:{get:function(){return FS},set:function(e){zS(e,"dexie"===e?function(){return!0}:_k)}},derive:dS,extend:iS,props:lS,override:gS,Events:Tk,on:Jk,liveQuery:function(e){return new UM((function(t){var n=NS(e),r=!1,i={},o={},a={get closed(){return r},unsubscribe:function(){r=!0,Jk.storagemutated.unsubscribe(u)}};t.start&&t.start(a);var s=!1,l=!1;function c(){return nS(o).some((function(e){return i[e]&&function(e,t){var n=NM(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=NM(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(Nk(s.from,i.to)<=0&&Nk(s.to,i.from)>=0)return!0;Nk(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}(i[e],o[e])}))}var u=function(e){VM(i,e),c()&&d()},d=function d(){if(!s&&!r){i={};var f={},p=function(t){n&&nk();var r=function(){return tk(e,{subscr:t,trans:null})},i=EC.trans?ck(EC.transless,r):r();return n&&i.then(rk,rk),i}(f);l||(Jk("storagemutated",u),l=!0),s=!0,Promise.resolve(p).then((function(e){s=!1,r||(c()?d():(i={},o=f,t.next&&t.next(e)))}),(function(e){s=!1,t.error&&t.error(e),a.unsubscribe()}))}};return d(),a}))},extendObservabilitySet:VM,getByKeyPath:xS,setByKeyPath:wS,delByKeyPath:function(e,t){"string"==typeof t?wS(e,t,void 0):"length"in t&&[].map.call(t,(function(t){wS(e,t,void 0)}))},shallowClone:_S,deepClone:AS,getObjectDiff:AM,cmp:Nk,asap:yS,minKey:-1/0,addons:[],connections:yk,errnames:XS,dependencies:BM,semVer:"3.2.2",version:"3.2.2".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),GM.maxKey=rM(GM.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Jk("storagemutated",(function(e){var t;$M||(bk?(t=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,e):t=new CustomEvent("x-storagemutated-1",{detail:e}),$M=!0,dispatchEvent(t),$M=!1)})),addEventListener("x-storagemutated-1",(function(e){var t=e.detail;$M||WM(t)})));var $M=!1;if("undefined"!=typeof BroadcastChannel){var qM=new BroadcastChannel("x-storagemutated-1");Jk("storagemutated",(function(e){$M||qM.postMessage(e)})),qM.onmessage=function(e){e.data&&WM(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Jk("storagemutated",(function(e){try{$M||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&(0,yt.Z)(self.clients.matchAll({includeUncontrolled:!0})).forEach((function(t){return t.postMessage({type:"x-storagemutated-1",changedParts:e})})))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(e){if("x-storagemutated-1"===e.key){var t=JSON.parse(e.newValue);t&&WM(t.changedParts)}}));var YM=self.document&&navigator.serviceWorker;YM&&YM.addEventListener("message",(function(e){var t=e.data;t&&"x-storagemutated-1"===t.type&&WM(t.changedParts)}))}function XM(e){return(0,M.Z)("MuiAppBar",e)}IC.rejectionMapper=function(e,t){if(!e||e instanceof WS||e instanceof TypeError||e instanceof SyntaxError||!e.name||!QS[e.name])return e;var n=new QS[e.name](t||e.message,e);return"stack"in e&&uS(n,"stack",{get:function(){return this.inner.stack}}),n},zS(FS,_k);(0,T.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);var KM=["className","color","enableColorOnDark","position"],JM=function(e,t){return"".concat(null==e?void 0:e.replace(")",""),", ").concat(t,")")},QM=(0,C.ZP)(Fo,{name:"MuiAppBar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,x.Z)(n.position))],t["color".concat((0,x.Z)(n.color))]]}})((function(e){var t=e.theme,n=e.ownerState,r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,v.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,v.Z)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,v.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,v.Z)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:JM(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:JM(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:JM(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:JM(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),eT=e.forwardRef((function(e,t){var n=(0,xn.Z)({props:e,name:"MuiAppBar"}),r=n.className,i=n.color,o=void 0===i?"primary":i,a=n.enableColorOnDark,s=void 0!==a&&a,l=n.position,c=void 0===l?"fixed":l,u=(0,y.Z)(n,KM),d=(0,v.Z)({},n,{color:o,position:c,enableColorOnDark:s}),f=function(e){var t=e.color,n=e.position,r=e.classes,i={root:["root","color".concat((0,x.Z)(t)),"position".concat((0,x.Z)(n))]};return(0,S.Z)(i,XM,r)}(d);return(0,h.jsx)(QM,(0,v.Z)({square:!0,component:"header",ownerState:d,elevation:4,className:(0,b.Z)(f.root,r,"fixed"===c&&"mui-fixed"),ref:t},u))})),tT=n(1317),nT=n(5578),rT=n(4487),iT=n(4084);var oT=function(t){var n=t.pages,r=t.name,o=t.handleFileUpload,a=t.handleDocumentation,s=ab(),l=e.useState(null),c=(0,i.Z)(l,2),u=c[0],d=c[1],f=function(e){d(null),console.log("/"+e.target.firstChild.data),s("/"+e.target.firstChild.data)};return(0,h.jsx)(e.Fragment,{children:(0,h.jsx)(eT,{position:"sticky",children:(0,h.jsx)(o_,{maxWidth:"xl",children:(0,h.jsxs)(fm,{disableGutters:!0,children:[(0,h.jsx)(nT.Z,{sx:{display:{xs:"none",md:"flex"},mr:1}}),(0,h.jsx)(ag.Z,{variant:"h6",noWrap:!0,component:"a",onClick:function(){s("/")},sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".2rem",color:"inherit",textDecoration:"none"},children:r}),(0,h.jsxs)(Nv,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,h.jsx)(Ho,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit",children:(0,h.jsx)(tT.Z,{})}),(0,h.jsx)(Pf,{id:"menu-appbar",anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(u),onClose:f,sx:{display:{xs:"block",md:"none"}},children:n.map((function(e){return(0,h.jsx)(gr,{onClick:f,children:(0,h.jsx)(ag.Z,{textAlign:"center",children:e})},e)}))})]}),(0,h.jsx)(nT.Z,{sx:{display:{xs:"flex",md:"none"},mr:1}}),(0,h.jsx)(ag.Z,{variant:"h5",noWrap:!0,component:"a",onClick:function(){s("/")},sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:r}),(0,h.jsx)(Nv,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:n.map((function(e){return(0,h.jsx)(yp.Z,{onClick:f,sx:{my:2,color:"white",display:"block"},children:e},e)}))}),(0,h.jsxs)(Nv,{sx:{flexGrow:0},children:[(0,h.jsx)(Rp,{title:"Documentation",children:(0,h.jsx)(iT.Z,{onClick:a,sx:{p:0}})}),(0,h.jsx)("input",{type:"file",id:"fileInput",onChange:o,accept:".json",style:{display:"none"}}),(0,h.jsx)(Rp,{title:"Load JSON File",children:(0,h.jsx)(rT.Z,{onClick:function(){var e=document.getElementById("fileInput");e.value="",e.click()},sx:{p:0}})})]})]})})})})};function aT(){return(0,h.jsx)(Fo,{sx:{position:"fixed",bottom:0,left:0,right:0,height:50},elevation:3,children:(0,h.jsxs)(v_,{container:!0,direction:"column",alignItems:"center",children:[(0,h.jsx)(v_,{item:!0,xs:12,children:(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,h.jsx)(nT.Z,{sx:{mr:1}}),(0,h.jsx)(ag.Z,{color:"black",variant:"subtitle1",children:"JSON Web Page Renderer"})]})}),(0,h.jsx)(v_,{item:!0,xs:12,children:(0,h.jsx)(ag.Z,{color:"textSecondary",variant:"subtitle2",children:"\xa9 ".concat((new Date).getFullYear()," Mesih K\u0131l\u0131n\xe7")})})]})})}var sT=JSON.parse('{"h1:title":"Hello There \ud83d\udc4b Welcome to Mesih\'s JSON Website Generator \ud83d\ude80","md:info":"Once upon a time, there was a PhD student named Mesih \ud83e\udd13. He was knee-deep in research, studying the intricacies of bioinformatics \ud83e\uddec. But as he worked on his manuscript, he found himself facing a common problem among researchers: creating companion websites to showcase his findings.\\n\\nMesih found himself creating three separate websites for three different manuscripts, and each time he thought to himself, \\"there has to be a better way!\\" \ud83e\udd14\\n\\nSo, being the tech-savvy bioinformatician that he is, Mesih set out to create a website generator that would make it easy for researchers like himself to present their findings in a visually appealing and interactive way \ud83d\ude80.\\n\\nHe realized that with JSON, a dictionary-like format, he could represent nearly anything! \ud83e\udd2f So, he got to work and created the generator you see before you today.\\n\\nWith this generator, you can easily create tables, charts, and graphs to present your findings in a clear and easy-to-understand format. You can also include interactive elements, such as charts, that allow visitors to explore the data in more depth. \ud83d\udcca\ud83d\udcc8\ud83d\udd0d\\n\\nNot only that, but you can also use the generator to create pages that provide explanations of key concepts and techniques used in your research. For example, you could include markdown sections with explanations and diagrams to help visitors understand the methods and techniques used in your study.\ud83d\udd2c\ud83d\udcdd\\n\\nBut that\'s not all! The generator can also be used for creating portfolios, landing pages, documentation websites, event websites and more. \ud83d\ude80\ud83d\udcca\ud83d\udcbb\\n\\nAnd so, with the help of a little bit of coding magic \ud83e\uddd9\u200d\u2642\ufe0f and a lot of determination, Mesih created a website generator that makes it easy for researchers to present their findings in an interactive and easily accessible format.\\n\\nHere you are using it, Mesih\'s creation, a website generator that will make your research presentation a breeze \ud83c\udf2c\ud83c\udf2a.\\n\\n### \ud83d\udcbbHere are the contents of this documentation:\\n\\n-   [Getting-Started](/getting-started): \ud83d\ude80We\'ll take off with learning how to use a JSON file to represent basic websites that have titles, markdowns, and images.\\n-   [Layouts](/layouts): \ud83c\udfa8 We\'ll delve a little deeper and show you how to use the grid system to make 2-column websites and wrap up components with sections.\\n-   [Bioinformatics](/bioinformatics): \ud83d\udd2c Here\'s where things get exciting! We\'ll showcase the advanced features, like protein sequence and structure visualization and super helpful paginated, searchable and filterable table generation with just row and column data.\\n-   [Plots&Chars](/Plots&Charts): \ud83d\udcca We\'ll show you how to embed Plotly plots into your research webpage like a boss.\\n-   [Python](/Python): \ud83d\udc0d Finally, we\'ll give you an example of how to generate a website for your research article using a programming language.","navpage:getting-started":{"h1:title":"\ud83c\udf89\ud83d\ude80 WELCOME to the JSON Website Generator! \ud83d\ude80\ud83c\udf89","md:intro":"This generator allows you to create visually stunning websites with just a simple JSON file. \ud83d\udcbb\ud83d\udcdc In this documentation, you\'ll learn how to become a website creating pro and add all sorts of fancy elements to your site.\ud83d\udcda\ud83d\udd25\\n\\n##### Loading JSON \ud83d\udcc1\\n\\n\ud83d\ude80 Are you ready to take your website game to the next level? \ud83e\udd14 But first things first, let\'s learn how to load that juicy JSON data onto the site! \ud83e\udd17 Whether you prefer the classic \\"browse your computer\\" method or the fancy \\"URL magic\\" trick, we\'ve got you covered. \ud83e\uddd9\u200d\u2642\ufe0f\\n\\nSo, you\'ve got two options, my friend! \ud83e\udd14\\n\\n- Option 1: You can click the the upload file icon on the top right corner of the page, and select your JSON file from your computer. Easy peasy, lemon squeezy! \ud83c\udf4b\\n\\n- Option 2: You can be a real tech-savvy \ud83e\udd16 and use the `?json=` argument in this website URL. This way, you can load a JSON file straight from the internet, like from Github. \ud83c\udf0e Just make sure the file is publicly accessible, otherwise it\'s gonna be a no-go. \ud83d\udeab\\n\\nSo, what are you waiting for? Go forth and load that data! \ud83d\ude80\\n\\nBut before you go, \ud83d\udcda want to revisit this documentation? No problemo! Just click that little question mark icon in top right corner and voila! \ud83d\udd0d You\'re back where you left off! \ud83d\udcbb\\n\\n\ud83d\udc40 Don\'t forget, the \ud83d\udca1name of the json file will be shown in the \ud83d\udd1dleft top corner of the website \ud83d\udcbb! Just \ud83d\udd1cside of the \ud83c\udfe0homepage icon \ud83c\udf1f!","md:examples_intro":"##### The First Steps \ud83e\uddb6\\n\\nTo help you get started \ud83d\ude80, here are some basic examples of how you can use the different elements and properties \ud83d\udd27. Try them out and see what you can create! \ud83e\udd29 You can copy the JSON, paste it into a file, and upload it to the site \ud83d\udcc2.","md:info:6":"```js\\n{\\n\\t\\"h2:title\\":  \\"A title\\",\\n\\t\\"p:info\\":  \\"And here is a paragraph\\"\\n}\\n```\\n\ud83d\udc49 This should look like this.","section:ex1:6":{"h2:title":"A title","p:info":"And here is a paragraph"},"md:ex2:6":"We can embed pictures too \ud83d\uddbc\ufe0f!\\n\\n```js\\n{\\n    \\"h2:title\\": \\"My Awesome Website\\",\\n    \\"p:intro:6\\": \\"Welcome to my website!\\",\\n    \\"img:logo:6\\": {\\n        \\"src\\": \\"https://picsum.photos/200\\",\\n        \\"height\\": \\"200\\"\\n    }\\n}```\\n\\n\ud83d\udc49 Here is the result!","section:ex2:6":{"h2:title":"My Awesome Website","p:intro:6":"Welcome to my website!","img:logo:6":{"src":"https://picsum.photos/200","height":"200"}},"md:info2:6":"The navpage tag \ud83d\udd16, a real lifesaver, helps you create a page that will be displayed in the AppBar \ud83e\ude84 like a boss! \\n\\n```js\\n{\\n\\t\\"navpage:about\\": {\\n\\t\\t\\"h2:title\\":  \\"About Page\\",\\n\\t\\t\\"p:info\\":  \\"This site creates static websites from json.\\"\\n\\t},\\n\\t\\"p:info\\":  \\"And here is a paragraph\\"\\n}\\n```","img:navpage:6":{"src":"https://raw.githubusercontent.com/MesihK/react-json-wpbuilder/master/imgs/navpage.png","height":200},"md:outro":"##### The Finish Line \ud83c\udf87\\n\\nThis should help you get started \ud83d\ude80 You can build amazing things already \ud83c\udf1f But if you\'re ready to level up, head on over to the other pages in the AppBar \ud83e\ude84 and discover all the cool things you can do with the JSON Website Generator. From tables \ud83d\udcca to charts \ud83d\udcc8, protein sequence visualizers \ud83e\uddec, and more, the possibilities are endless. Go forth and create something amazing! \ud83c\udfa8"},"navpage:layouts":{"h2:title":"\ud83d\udcd6 Layouts","md:layout":"You can create different layout options available using the xs property. The keys \ud83d\udd11 in the JSON file represent the type \ud83d\udcdd of element and the width \ud83d\udccf of the grid (using the xs property) in the website generator\'s grid system \ud83d\udee0. They\'re separated by colons \ud83d\udd0d. For example, `md:info:6` creates a markdown section named info and takes up half of the page \ud83c\udf1f.\\n\\n#####\ud83d\udd25 Two Column Layout\\n\\nTo create a two-column layout, you\'ll need to specify the xs property for each element. The xs property determines the width of the element on the page, with a maximum value of 12.\\n\\n","md:layoutexp:6":"Here\'s an example of a two-column layout:\\n\\n```json\\n{\\n    \\"h2:title\\": \\"Here is how a 2-column layout looks like!\\",\\n    \\"md:column1:6\\": \\"\ud83d\udcdd This is the content for column 1\\",\\n    \\"md:column2:6\\": \\"\ud83d\udcdd This is the content for column 2\\"\\n}\\n```\\n\\nIn this example, both `column1` and `column2` have an xs value of 6, which means they will each take up half of the available space on the page.","section:ex4:6":{"h2:title":"Here is how a 2-column layout looks like!","md:column1:6":"\ud83d\udcdd This is the content for column 1","md:column2:6":"\ud83d\udcdd This is the content for column 2"},"md:tips":"##### \ud83d\udca1 Tips\\n\\n- To create a three-column layout, you\'ll need to set the xs property for each element to a value of 4.\\n- You can also use the xs property to create a single-column layout by setting the xs property for all elements to a value of 12 or not specifying them at all!\\n- \ud83c\udfa8 Remember to have fun and be creative with your layouts!\\n***\\n\\n","md:section":"##### Sections\\n\\nThe `section` tag is a powerful tool that allows you to create custom layouts and organize your elements in a way that makes sense for your specific use case.\\n\\nFor example, let\'s say you\'re creating a bioinformatics website that focuses on the structure and function of a particular protein. You might use the `section` tag to create a section for the protein\'s sequence, a section for its 3D structure, and a section for any relevant research findings.\\n\\nHere\'s an example of how you might use the `section` tag in a json file to create a visually appealing layout for this information:\\n\\n```json{\\n    \\"section:sequence\\": {\\n        \\"h2:sequenceTitle\\": \\"Protein Sequence\\",\\n        \\"seq:testseq:6\\": \\"MAACCAACAKKV\\"\\n    },\\n    \\"section:structure\\": {\\n        \\"h2:structureTitle\\": \\"3D Structure\\",\\n        \\"pdb:3pqr:6\\": {\\n            \\"path\\":\\"rcsb://6vsb\\",\\n            \\"height\\":\\"400px\\"\\n        }\\n    },\\n    \\"section:findings\\": {\\n        \\"h2:findingsTitle\\": \\"Research Findings\\",\\n        \\"md:findingsInfo:6\\": \\"Recent studies have shown that this protein plays a key role in the replication of the SARS-CoV-2 virus \ud83e\udda0\ud83d\udd2c\\"\\n    }\\n}\\n```\\n\\nAs you can see, the `section` tag allows you to create distinct areas on the page for different types of information, and you can use other tags within each section to add elements like headings, sequence, structure, markdown etc.\\n\\nThis is a powerful way to organize your website and ensure that all the information is presented in a clear and easy-to-understand way \ud83d\udcda\ud83d\udcbb"},"navpage:bioinformatics":{"h2:title":"JSON Website Generator for Bioinformatics Research \ud83c\udf1f","md:intro":"Are you a bioinformatics researcher looking to present your findings in a visually appealing and interactive way? Look no further! Our generator is designed to make it easy for you to create a beautiful and professional-looking website \ud83d\udcbb to showcase your research \ud83d\udd2c.\\n\\nWith our generator, you can easily display important information such as protein sequences \ud83e\uddec using the `seq` tag, protein structures \ud83d\udd2c using the `pdb` tag, and charts \ud83d\udcc8 using the `plot` tag. Plus, with the `navpage` tag \ud83d\udd16, you can create pages that will be displayed in the AppBar \ud83d\udcf1, making it easy for visitors to navigate your site.\\n\\nMoreover, creating tables to present your data can be a tedious task, but not with our generator! With the `table` tag \ud83d\udcca, you can easily generate tables to showcase your data in a  clear and organized way. You can customize the columns, set the rows, and even add links to other pages within your site for additional information. Plus, you can use the `l:` prefix to create a column with a hyperlink, making it easy for visitors to access more information. And the best part? Our tables are not only beautiful, but also fully interactive  \ud83e\udd16. You can easily paginate \ud83d\udcc4, search \ud83d\udd0d, and filter \ud83d\udd75\ufe0f\u200d\u2642\ufe0f your data, making it easy for visitors to find the information they need. With our generator, creating tables to present your data is now a breeze \ud83d\udca8.\\n\\nSo why wait? Give our generator a try and take your research presentation to the next level \ud83d\ude80.","md:ex1:6":"##### An Example: Understanding the Spike Protein of COVID-19 \ud83e\udda0\\n\\nOne of the key proteins in the COVID-19 virus is the spike protein. It plays a crucial role in the virus\'s ability to enter host cells. \\n\\nBut what does the spike protein look like? With our generator\'s `seq` tag \ud83d\udd0d, we can easily display the protein sequence \ud83e\uddec in a clear and easy to read format.\\n\\nBut just seeing the sequence isn\'t enough. To truly understand the spike protein, we need to visualize its structure \ud83d\udd2c. With the `pdb` tag, we can easily embed 3D structures of the spike protein.\\n\\nFor example, here is the spike protein of COVID-19 with the structure path of \\"rcsb://6vsb\\":\\n\\n```json\\n{\\n\\t\\"h2:title\\":\\"Covid Spike Protein Sequence & Structure\\",\\n    \\"seq:spike_protein\\": \\"MFVFLVLLPLVSSQCVNLTTRTQLPPAYTNSFTRGVYYPDKVFRSSVLHSTQDLFLPFFSNVTWFHAIHVSGTNGTKRFDNPVLPFNDGVYFASTEKSNIIRGWIFGTTLDSKTQSLLIV\\",\\n    \\"pdb:spike_structure\\": {\\n        \\"path\\":\\"rcsb://6VSB Spike Protein\\",\\n        \\"name\\":\\"6vsb\\",\\n        \\"height\\":\\"400px\\"\\n    }\\n}\\n```\\nWith this generator, you can easily showcase the protein sequence and structure of the spike protein, providing visitors with a deeper understanding of the virus \ud83e\udde0","section:ex1:6":{"h2:title":"Covid Spike Protein Sequence & Structure","seq:spike_protein":"MFVFLVLLPLVSSQCVNLTTRTQLPPAYTNSFTRGVYYPDKVFRSSVLHSTQDLFLPFFSNVTWFHAIHVSGTNGTKRFDNPVLPFNDGVYFASTEKSNIIRGWIFGTTLDSKTQSLLIV","pdb:spike_structure":{"path":"https://files.rcsb.org/download/6VSB.pdb","name":"6VSB Spike Protein","height":"400px"}},"md:ex2intro":"##### Tables\\n\\n\ud83d\udcbbCreating tables with the table tag is a breeze! \ud83d\udd20Just specify the rows and columns as arrays and voila! \ud83c\udf89Your resulting page will be not only paginated, but also searchable and filterable.\ud83d\udd0d\ud83d\udd0e Making it super easy to navigate and find the information you need! \ud83d\ude4c","md:ex2:6":"```json\\n{\\n    \\"table:covid_studies\\": {\\n        \\"columns\\": [\\"Title\\", \\"Authors\\", \\"l:Link\\"],\\n        \\"rows\\": [\\n            [\\"Structure and Mechanism of the SARS-CoV-2 Spike Protein\\", \\"J.W. Brown et al.\\", \\"https://www.nature.com/articles/s41586-020-2295-9@Nature\\"],\\n            [\\"Cryo-EM structure of the SARS-CoV-2 spike receptor-binding domain bound to ACE2\\", \\"A. Gao et al.\\", \\"https://science.sciencemag.org/content/early/2020/03/03/science.abb2762@Science\\"],\\n            [\\"Atomic structure of the SARS-CoV-2 spike glycoprotein\\", \\"Y. Wu et al.\\", \\"https://www.nature.com/articles/s41586-020-2271-0@Nature\\"]\\n        ]\\n    }\\n}\\n```\\n","section:ex2:6":{"table:covid_studies":{"columns":["Title","Authors","l:Link"],"rows":[["Structure and Mechanism of the SARS-CoV-2 Spike Protein","J.W. Brown et al.","https://www.nature.com/articles/s41586-020-2295-9@Nature"],["Cryo-EM structure of the SARS-CoV-2 spike receptor-binding domain bound to ACE2","A. Gao et al.","https://science.sciencemag.org/content/early/2020/03/03/science.abb2762@Science"],["Atomic structure of the SARS-CoV-2 spike glycoprotein","Y. Wu et al.","https://www.nature.com/articles/s41586-020-2271-0@Nature"]]}},"md:outro":"When it comes to generating tables, we have to be serious about the columns and rows \ud83d\ude04. Each table needs a column array to hold all the headers and a row array to hold all the data. \ud83d\udcbb\\n\\nBut if a column starts with \\"l:\\", it\'s a special column! \ud83c\udf89 This column will hold links as data, so you can click on them and be whisked away to other parts of the internet! \ud83d\ude80\\n\\nIn the row data for this column, links are defined as [link]@[name]. That\'s right, like a superhero team, the link and name join forces to become an unstoppable force of navigation! \ud83d\udcaa\\n\\nSo remember, when creating tables, keep it serious with the columns and rows, but have a little fun with the links! \ud83d\udd2c\ud83d\udcda"},"navpage:Plots&Charts":{"h1:title":"\ud83c\udf89 Let\'s talk about charts and plots! \ud83d\udcc8","md:intro":"Did you know that our JSON Website Generator can handle Plotly json format? \ud83e\udd2f That\'s right, you can create beautiful and interactive charts just by using a simple JSON file.","md:ex1:6":"Here\'s an example of a bar chart:\\n\\n```js\\n{\\n    \\"plot:n1\\": {\\n        \\"data\\": [{\\n            \\"x\\": [\\"giraffes\\",\\"orangutans\\",\\"monkeys\\"],\\n            \\"y\\": [20,14,23],\\n            \\"type\\": \\"bar\\"\\n        }],\\n        \\"height\\":400\\n    }\\n}\\n```\\nJust copy and paste this JSON into your file and upload it to the site! \ud83d\udcbe","section:ex1:6":{"plot:n1":{"data":[{"x":["giraffes","orangutans","monkeys"],"y":[20,14,23],"type":"bar"}],"height":400}},"md:outro":"Just copy and paste this JSON into your file and upload it to the site! \ud83d\udcbe\\n\\n**Note:** The layout key is not supported in our generator, but don\'t worry, you can still control the height of the chart with the height key.\\n\\nFor more information on the Plotly JSON format, you can check out their official documentation at [plotly json docs](https://plotly.com/chart-studio-help/json-chart-schema/). Get creative and see what amazing charts you can come up with! \ud83d\ude80"},"navpage:Python":{"h1:title":"Generating JSON File From Python","md:intro":"\ud83d\udd25 You can create supplementary websites for your research article with R, Python, or any other language you\'re in love with! \ud83d\udc95 Simply present your data as key-value pairs and transform it into JSON. \ud83d\udcbb And if you\'re feeling adventurous, here\'s a way to generate a website for a reciprocal best hit study using Python \ud83d\udc0d.","md:exp:6":"\ud83d\udca1We have a variable `website` which is a dictionary containing the basic structure of our website.\\n\\nBut first, let\'s understand the basic structure of the JSON that we want to generate. We want to create a `website` object that has:\\n\\n-   A header title `\'h1:title\'`\\n-   A summary `\'p:summary\'`\\n-   A table of results `\'table:results\'` with columns `[\'l:link\',\'Organism 1\',\'Organism 2\']` and rows that will be filled later.\\n-   Pages for each study in the research, each study is a separate object inside the `website` object with a key format of `\'page:\'+studyPage`. Each study has:\\n    -   A header title `\'h1:title\'`\\n    -   Info `\'p:info\'`\\n    -   Table of results `\'table:results\'` with columns `[\'l:Protein\',\'Best RBH\',\'Source\',\'Fatcat\',\'Seq. ID.\',\'Same Panther,\'# RBH\']` and rows that will be filled later.\\n    -   Protein information page `\'page:\'+p1` with:\\n        -   Title `\'h1:title\'`\\n        -   Info `\'md:info\'`\\n        -   Table of summary `\'table:summary\'` with columns `[\'Method\',\'Uniprot ID\',\'Seq. ID.\',\'Fatcat Pvalue\',\'l:PANTHER\']` and rows that will be filled later.\\n        -   Explanation `\'md:exp\'`\\n        -   PDB files of the protein `\'pdb:p1:6\'` and best hit `\'pdb:best:6\'`\\n\\n\ud83d\udc49Now, let\'s get to work! \\n\\n1.  First, we\'ll create the `website` object with the header title, summary and table of results as described in the basic structure.\\n2.  Next, we will create a function `protein_page(p1)` that will take a protein id `p1` as input and create the detailed page for it, as well as the table entry in the study page.\\n\\n-   Inside the function, we\'ll start by finding the reciprocral best hit using the `reciprocral_res[study][p1]`\\n-   Then, we\'ll find the best homolog and if all methods find the same Panther family.\\n-   We\'ll fill the table in the organism page with the given columns.\\n-   Then, we\'ll create the result page with the given structure and fill in the relevant information.\\n-   Finally, we\'ll fill the summary table and return the page and row.\\n\\n3.  After that, we\'ll create pages for each study in the research using a for loop.\\n\\n-   We\'ll iterate through `reciprocral_res` and create a separate object in the `website` object for each study with a key format of `\'page:\'+studyPage`\\n-   For each study, we\'ll create a table of results, fill in the header title and info, and finally, call the `protein_page(p1)` function to fill in the rest of the information.","md:code:6":"```python\\nwebsite = {\\n    \'h1:title\':\'PROST Reciprocral Best Hit Analysis\',\\n    \'p:summary\':\'This page presents the study of reciprocral best hits using 3 different methods: PROST, Fatcat using Alphafold models and BLAST. Reciprocral best hit found between 5 organisims\',\\n    \'table:results\': {\\n        \'columns\': [\'l:link\',\'Organism 1\',\'Organism 2\'],\\n        \'rows\':[]\\n    }\\n}\\n\\n#this function takes a protein id and\\n#creates the detail page for it and \\n#the table entry in the study page\\ndef protein_page(p1):\\n    p1r = reciprocral_res[study][p1]\\n    \\n    #find the best homolog\\n    ...\\n\\n    #find if all methods find same Panther familiy\\n    ...\\n    \\n    # fill the table in the organism page\\n    #\'l:Protein\',\'Best RBH\',\'Source\',\'Fatcat\',\'Seq. ID.\',\'Same Panther,\'# RBH\'\\n    row = [\'/\'+studyPage+\'/\'+p1+\'@\'+p1,bProt,bMethodsStr,get_fatcatres(bKey)[0],\\n           f\'{get_seqid(bKey):.2f}%\',pantherRes,len(list(p1r.keys()))]\\n    \\n    #create the result page\\n    page = {\\n        \'h1:title\': S1 + \' \' + p1 + \' results\',\\n        \'md:info\': \'This page presents reciprocral best hit results for \' + get_uniprot_link_md(p1) + \' in \' + S2 + \' genome.\' +\\n        \' The panther familiy of this protein is: \' + get_panther_link_md(get_panther(p1)),\\n        \'table:summary\': {\\n            \'columns\': [\'Method\',\'Uniprot ID\',\'Seq. ID.\',\'Fatcat Pvalue\',\'l:PANTHER\'],\\n            \'rows\': []\\n        },\\n        \'md:exp\': f\'### Results\\n\\nThe best reciprocral hit is **{get_uniprot_link_md(bProt)}** which is found by {bMethodsStr}.\\n\\n\'\\\\n        +f\'The fatcat P-Value is: **{get_fatcatres(bKey)[0]}** with an RMSD of: **{get_fatcatres(bKey)[1]} angstrom**\\n\\n\' \\\\n        +f\'The sequence alignment identity is: **{get_seqid(bKey):.2f}%**\\n\\n\'\\\\n        +f\'{p1} shown in left and {bProt} shown in right. These structures colored based on secondary structures.\',\\n        \'pdb:p1:6\': { \'path\': get_pdb_url(p1) },\\n        \'pdb:best:6\': { \'path\': get_pdb_url(bProt) },\\n    }\\n    \\n    #fill the summary table\\n    for m in p1r:\\n        p2 = p1r[m]\\n        \\n        key = getKey(p1,p1r[m])\\n        sid = \'%.2f\'%seqid[key]\\n        if key not in fatcatres: \\n            print(key,\'not found in fatcat results\')\\n            fcres = \'?\'\\n        else: fcres = fatcatres[key][0]\\n        panther = get_panther(p2)\\n        \\n        page[\'table:summary\'][\'rows\'].append([m.upper(),p2,sid,fcres,f\'http://www.pantherdb.org/panther/family.do?clsAccession={panther}@{panther}\'])\\n        \\n    return page,row \\n\\n#Create pages for each study in the research\\n#Each study investigates reciprocral best hits for a pair of organisms\\n#create table for each study\\nfor study in reciprocral_res:\\n    print(study)\\n    s1,s2 = study.split(\':\')\\n    S1,S2 = tr[s1].replace(\'_\',\'. \'), tr[s2].replace(\'_\',\'. \')\\n    studyPage = s1+\'_\'+s2\\n    website[\'table:results\'][\'rows\'].append([\'/\'+studyPage+\'@\'+s1+\'-\'+s2,S1,S2])\\n    website[\'page:\'+studyPage]={\\n        \'h1:title\': S1 + \' & \' + S2 + \' reciprocral best hit analysis\',\\n        \'p:info\': \'This page presents the proteins of \' + S1 + \'. The table below has a row for each protein. If clicked a detailed view of reciprocral best hits found by 3 different method (PROST, BLAST and Fatcat) will be shown\',\\n        \'table:results\': {\\n            \'columns\': [\'l:Protein\',\'Best RBH\',\'Source\',\'Fatcat\',\'Seq. ID.\',\'Same Panther\',\'# RBH\'],\\n            \'rows\':[]\\n        }\\n    }\\n    #now for each study, there is a list of proteins to show. \\n    #Create a detail page for each protein and fill the table in the study page\\n    for p1 in reciprocral_res[study]:\\n        page,row = protein_page(p1)\\n        website[\'page:\'+studyPage][\'table:results\'][\'rows\'].append(row)\\n        website[\'page:\'+studyPage][\'page:\'+p1] = page\\n\\n#finally write the python object `website` as JSON to file. \\n#we\'ll use this file to open in the website generator\\nwith open(\'website/t1.json\',\'w\') as f:\\n    f.write(json.dumps(website))\\n```","md:outro:":"\ud83d\udca1And that\'s it! You now have a JSON file that can be easily turned into a website. \ud83c\udf89\\n\\n\\n\ud83d\udd0d Just remember that this code is a snippet and there might be other functions used in the code that have not been shown here."},"navpage:about":{"h2:title":"What is all about this page?","md:info":"This site creates beautiful and interactive static websites from json \ud83d\udcbb\ud83d\ude80 Here are a few ways you can use this website generator to showcase your skills and ideas:\\n\\n1.  **Creating a portfolio website:** Show off your past projects and skills with a sleek and professional website \ud83d\udcbc\\n    \\n2.  **Building a landing page:** Use the generator to create a landing page for a specific product or service you\'re offering. You can include product information, and  contact information \ud83d\udecd\\n    \\n3.  **Building a documentation website:** Create a website to document a project, software, or any product. You can include installation instructions, usage examples, and API references \ud83d\udcda\\n    \\n4.  **Building an event website:** Create a website for an upcoming event, such as a conference, concert, or festival. You can include event information, and a schedule \ud83c\udfab.\\n\\nBut the generator isn\'t limited to just these uses. It\'s also perfect for bioinformatics research \ud83e\uddec. You can use the generator to create a website as a supplement to your research paper. It\'s perfect for presenting findings, data, and other information in a visually appealing and interactive way.\\n\\n5.  **Research Paper Companion Website** You can use the generator to create a webpage that includes tables, charts, and graphs to present your findings in a clear and easy-to-understand format. You can also include interactive elements such as buttons, that allow visitors to explore the data in more depth.\\n\\nYou can also use the `section` tag to help organize elements and create custom layouts. This is useful for creating pages that provide explanations of key concepts and techniques used in your research. You can include markdown sections with explanations and diagrams to help visitors understand the methods and techniques used in your study.\\n\\nAdditionally, you could also use the `table` tag to create tables that are paginated, searchable, and filterable. This can be useful for creating a \\"Methods\\" page where you can provide detailed information about the participants, materials, procedures, and data analysis methods used in your study.\\n\\nYou could also use the `navpage` tag to create a page that is shown in the AppBar \ud83e\ude84 and create a \\"References\\" page where you can list all the sources used in your research paper.\\n\\nOverall, using a website generator to create a supplement to your research paper can be an effective way to present your findings, data, and explanations in an interactive and easily accessible format.\ud83d\udcca\ud83d\udcc8\ud83d\udd0d"}}'),lT=n(5693),cT=n(201),uT="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var dT=function(t){var n=t.children,r=t.theme,i=(0,cT.Z)(),o=e.useMemo((function(){var e=null===i?r:function(e,t){return"function"===typeof t?t(e):(0,v.Z)({},e,t)}(i,r);return null!=e&&(e[uT]=null!==i),e}),[r,i]);return(0,h.jsx)(lT.Z.Provider,{value:o,children:n})},fT=n(6132),pT={};function hT(e){var t=(0,qs.Z)();return(0,h.jsx)(fT.T.Provider,{value:"object"===typeof t?t:pT,children:e.children})}var mT=function(e){var t=e.children,n=e.theme;return(0,h.jsx)(dT,{theme:n,children:(0,h.jsx)(hT,{children:t})})},gT=(0,Lv.Z)({typography:{h1:{fontSize:"2rem",fontWeight:500},h2:{fontSize:"1.7rem",fontWeight:500},h3:{fontSize:"1.25rem",fontWeight:500}}}),vT=new ZM("myDatabase");function yT(){var t=ab(),n=function(){var t=ob().search;return e.useMemo((function(){return new URLSearchParams(t)}),[t])}().get("json"),r=(0,e.useState)({content:sT,name:"Docs"}),o=(0,i.Z)(r,2),a=o[0],s=o[1];if((0,e.useEffect)((function(){n||vT.myObjectStore.get(1).then((function(e){e&&s({content:JSON.parse(e.data),name:e.name})})).catch((function(e){return console.log("db read error",e)}))}),[]),n){console.log("load json from:",n);var l=n.split("/").at(-1).split(".")[0];fetch(n).then((function(e){return e.json()})).then((function(e){vT.myObjectStore.put({id:1,data:JSON.stringify(e),name:l},1).then((function(){s({content:e,name:l}),t("/"),console.log("sucsefully json from path written to db")})).catch((function(e){return console.log("db write error",e)}))})).catch((function(e){console.error(e)}))}var c=ob(),u=c.pathname.split("/").filter(Boolean),d=a.content;0===Object.keys(a.content).length?d={"h2:info":"Waiting for the data..."}:u.forEach((function(e){d=d.hasOwnProperty("page:"+e)?d["page:"+e]:d.hasOwnProperty("navpage:"+e)?d["navpage:"+e]:{"h2:notfound":c.pathname+" not found!"}}));var f=[];Object.keys(a.content).forEach((function(e){var t=e.split(":"),n=(0,i.Z)(t,3),r=n[0],o=n[1];n[2];"navpage"==r&&f.push(o)}));return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(mT,{theme:gT,children:[(0,h.jsx)(oT,{pages:f,name:a.name,handleFileUpload:function(e){var n=e.target.files[0],r=new FileReader;r.onload=function(e){vT.myObjectStore.put({id:1,data:e.target.result,name:n.name.split(".")[0]}).then((function(){return console.log("sucsefully file written to db")})).catch((function(e){return console.log("db write error",e)})),s({content:JSON.parse(e.target.result),name:n.name.split(".")[0]}),t("/")},r.readAsText(n)},handleDocumentation:function(){vT.myObjectStore.put({id:1,data:JSON.stringify(sT),name:"Docs"},1).then((function(){s({content:sT,name:"Docs"}),t("/"),console.log("Load documents")}))}}),d&&(0,h.jsx)(eS,{data:d}),(0,h.jsx)(aT,{})]})})}vT.version(1).stores({myObjectStore:"id, data, name"});var bT=function(){return(0,h.jsx)("div",{className:"App",children:(0,h.jsx)(yb,{children:(0,h.jsx)(gb,{path:"*",element:(0,h.jsx)(yT,{})})})})};function xT(t){var n,r=t.basename,o=t.children,a=t.window,s=e.useRef();null==s.current&&(s.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),xy((function(e,t){var n=e.location;return gy("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:vy(t)}),null,n)));var l=s.current,c=e.useState({action:l.action,location:l.location}),u=(0,i.Z)(c,2),d=u[0],f=u[1];return e.useLayoutEffect((function(){return l.listen(f)}),[l]),e.createElement(vb,{basename:r,children:o,location:d.location,navigationType:d.action,navigator:l})}var wT,_T;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(wT||(wT={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(_T||(_T={}));r.createRoot(document.getElementById("root")).render((0,h.jsx)(xT,{children:(0,h.jsx)(bT,{})}))}()}();